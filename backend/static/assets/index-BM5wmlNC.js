function Lne(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function Zi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LS={exports:{}},ig={};var tI;function Pne(){if(tI)return ig;tI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var l in r)l!=="key"&&(i[l]=r[l])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:o,ref:r!==void 0?r:null,props:i}}return ig.Fragment=t,ig.jsx=a,ig.jsxs=a,ig}var nI;function Dne(){return nI||(nI=1,LS.exports=Pne()),LS.exports}var n=Dne(),PS={exports:{}},Zt={};var aI;function One(){if(aI)return Zt;aI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function x(se){return se===null||typeof se!="object"?null:(se=p&&se[p]||se["@@iterator"],typeof se=="function"?se:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,v={};function j(se,Y,pe){this.props=se,this.context=Y,this.refs=v,this.updater=pe||y}j.prototype.isReactComponent={},j.prototype.setState=function(se,Y){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,Y,"setState")},j.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function w(){}w.prototype=j.prototype;function S(se,Y,pe){this.props=se,this.context=Y,this.refs=v,this.updater=pe||y}var A=S.prototype=new w;A.constructor=S,N(A,j.prototype),A.isPureReactComponent=!0;var k=Array.isArray;function _(){}var L={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function M(se,Y,pe){var Se=pe.ref;return{$$typeof:e,type:se,key:Y,ref:Se!==void 0?Se:null,props:pe}}function R(se,Y){return M(se.type,Y,se.props)}function z(se){return typeof se=="object"&&se!==null&&se.$$typeof===e}function O(se){var Y={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(pe){return Y[pe]})}var I=/\/+/g;function B(se,Y){return typeof se=="object"&&se!==null&&se.key!=null?O(""+se.key):Y.toString(36)}function ee(se){switch(se.status){case"fulfilled":return se.value;case"rejected":throw se.reason;default:switch(typeof se.status=="string"?se.then(_,_):(se.status="pending",se.then(function(Y){se.status==="pending"&&(se.status="fulfilled",se.value=Y)},function(Y){se.status==="pending"&&(se.status="rejected",se.reason=Y)})),se.status){case"fulfilled":return se.value;case"rejected":throw se.reason}}throw se}function Q(se,Y,pe,Se,me){var ye=typeof se;(ye==="undefined"||ye==="boolean")&&(se=null);var re=!1;if(se===null)re=!0;else switch(ye){case"bigint":case"string":case"number":re=!0;break;case"object":switch(se.$$typeof){case e:case t:re=!0;break;case u:return re=se._init,Q(re(se._payload),Y,pe,Se,me)}}if(re)return me=me(se),re=Se===""?"."+B(se,0):Se,k(me)?(pe="",re!=null&&(pe=re.replace(I,"$&/")+"/"),Q(me,Y,pe,"",function(ke){return ke})):me!=null&&(z(me)&&(me=R(me,pe+(me.key==null||se&&se.key===me.key?"":(""+me.key).replace(I,"$&/")+"/")+re)),Y.push(me)),1;re=0;var De=Se===""?".":Se+":";if(k(se))for(var ve=0;ve<se.length;ve++)Se=se[ve],ye=De+B(Se,ve),re+=Q(Se,Y,pe,ye,me);else if(ve=x(se),typeof ve=="function")for(se=ve.call(se),ve=0;!(Se=se.next()).done;)Se=Se.value,ye=De+B(Se,ve++),re+=Q(Se,Y,pe,ye,me);else if(ye==="object"){if(typeof se.then=="function")return Q(ee(se),Y,pe,Se,me);throw Y=String(se),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return re}function te(se,Y,pe){if(se==null)return se;var Se=[],me=0;return Q(se,Se,"","",function(ye){return Y.call(pe,ye,me++)}),Se}function W(se){if(se._status===-1){var Y=se._result;Y=Y(),Y.then(function(pe){(se._status===0||se._status===-1)&&(se._status=1,se._result=pe)},function(pe){(se._status===0||se._status===-1)&&(se._status=2,se._result=pe)}),se._status===-1&&(se._status=0,se._result=Y)}if(se._status===1)return se._result.default;throw se._result}var ae=typeof reportError=="function"?reportError:function(se){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof se=="object"&&se!==null&&typeof se.message=="string"?String(se.message):String(se),error:se});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",se);return}console.error(se)},Ee={map:te,forEach:function(se,Y,pe){te(se,function(){Y.apply(this,arguments)},pe)},count:function(se){var Y=0;return te(se,function(){Y++}),Y},toArray:function(se){return te(se,function(Y){return Y})||[]},only:function(se){if(!z(se))throw Error("React.Children.only expected to receive a single React element child.");return se}};return Zt.Activity=f,Zt.Children=Ee,Zt.Component=j,Zt.Fragment=a,Zt.Profiler=r,Zt.PureComponent=S,Zt.StrictMode=s,Zt.Suspense=c,Zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Zt.__COMPILER_RUNTIME={__proto__:null,c:function(se){return L.H.useMemoCache(se)}},Zt.cache=function(se){return function(){return se.apply(null,arguments)}},Zt.cacheSignal=function(){return null},Zt.cloneElement=function(se,Y,pe){if(se==null)throw Error("The argument must be a React element, but you passed "+se+".");var Se=N({},se.props),me=se.key;if(Y!=null)for(ye in Y.key!==void 0&&(me=""+Y.key),Y)!T.call(Y,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Y.ref===void 0||(Se[ye]=Y[ye]);var ye=arguments.length-2;if(ye===1)Se.children=pe;else if(1<ye){for(var re=Array(ye),De=0;De<ye;De++)re[De]=arguments[De+2];Se.children=re}return M(se.type,me,Se)},Zt.createContext=function(se){return se={$$typeof:o,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null},se.Provider=se,se.Consumer={$$typeof:i,_context:se},se},Zt.createElement=function(se,Y,pe){var Se,me={},ye=null;if(Y!=null)for(Se in Y.key!==void 0&&(ye=""+Y.key),Y)T.call(Y,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(me[Se]=Y[Se]);var re=arguments.length-2;if(re===1)me.children=pe;else if(1<re){for(var De=Array(re),ve=0;ve<re;ve++)De[ve]=arguments[ve+2];me.children=De}if(se&&se.defaultProps)for(Se in re=se.defaultProps,re)me[Se]===void 0&&(me[Se]=re[Se]);return M(se,ye,me)},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(se){return{$$typeof:l,render:se}},Zt.isValidElement=z,Zt.lazy=function(se){return{$$typeof:u,_payload:{_status:-1,_result:se},_init:W}},Zt.memo=function(se,Y){return{$$typeof:d,type:se,compare:Y===void 0?null:Y}},Zt.startTransition=function(se){var Y=L.T,pe={};L.T=pe;try{var Se=se(),me=L.S;me!==null&&me(pe,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(_,ae)}catch(ye){ae(ye)}finally{Y!==null&&pe.types!==null&&(Y.types=pe.types),L.T=Y}},Zt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Zt.use=function(se){return L.H.use(se)},Zt.useActionState=function(se,Y,pe){return L.H.useActionState(se,Y,pe)},Zt.useCallback=function(se,Y){return L.H.useCallback(se,Y)},Zt.useContext=function(se){return L.H.useContext(se)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(se,Y){return L.H.useDeferredValue(se,Y)},Zt.useEffect=function(se,Y){return L.H.useEffect(se,Y)},Zt.useEffectEvent=function(se){return L.H.useEffectEvent(se)},Zt.useId=function(){return L.H.useId()},Zt.useImperativeHandle=function(se,Y,pe){return L.H.useImperativeHandle(se,Y,pe)},Zt.useInsertionEffect=function(se,Y){return L.H.useInsertionEffect(se,Y)},Zt.useLayoutEffect=function(se,Y){return L.H.useLayoutEffect(se,Y)},Zt.useMemo=function(se,Y){return L.H.useMemo(se,Y)},Zt.useOptimistic=function(se,Y){return L.H.useOptimistic(se,Y)},Zt.useReducer=function(se,Y,pe){return L.H.useReducer(se,Y,pe)},Zt.useRef=function(se){return L.H.useRef(se)},Zt.useState=function(se){return L.H.useState(se)},Zt.useSyncExternalStore=function(se,Y,pe){return L.H.useSyncExternalStore(se,Y,pe)},Zt.useTransition=function(){return L.H.useTransition()},Zt.version="19.2.0",Zt}var sI;function Gf(){return sI||(sI=1,PS.exports=One()),PS.exports}var h=Gf();const pt=Zi(h),Su=Lne({__proto__:null,default:pt},[h]);var DS={exports:{}},og={},OS={exports:{}},MS={};var rI;function Mne(){return rI||(rI=1,(function(e){function t(Q,te){var W=Q.length;Q.push(te);e:for(;0<W;){var ae=W-1>>>1,Ee=Q[ae];if(0<r(Ee,te))Q[ae]=te,Q[W]=Ee,W=ae;else break e}}function a(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var te=Q[0],W=Q.pop();if(W!==te){Q[0]=W;e:for(var ae=0,Ee=Q.length,se=Ee>>>1;ae<se;){var Y=2*(ae+1)-1,pe=Q[Y],Se=Y+1,me=Q[Se];if(0>r(pe,W))Se<Ee&&0>r(me,pe)?(Q[ae]=me,Q[Se]=W,ae=Se):(Q[ae]=pe,Q[Y]=W,ae=Y);else if(Se<Ee&&0>r(me,W))Q[ae]=me,Q[Se]=W,ae=Se;else break e}}return te}function r(Q,te){var W=Q.sortIndex-te.sortIndex;return W!==0?W:Q.id-te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,p=3,x=!1,y=!1,N=!1,v=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function A(Q){for(var te=a(d);te!==null;){if(te.callback===null)s(d);else if(te.startTime<=Q)s(d),te.sortIndex=te.expirationTime,t(c,te);else break;te=a(d)}}function k(Q){if(N=!1,A(Q),!y)if(a(c)!==null)y=!0,_||(_=!0,O());else{var te=a(d);te!==null&&ee(k,te.startTime-Q)}}var _=!1,L=-1,T=5,M=-1;function R(){return v?!0:!(e.unstable_now()-M<T)}function z(){if(v=!1,_){var Q=e.unstable_now();M=Q;var te=!0;try{e:{y=!1,N&&(N=!1,w(L),L=-1),x=!0;var W=p;try{t:{for(A(Q),f=a(c);f!==null&&!(f.expirationTime>Q&&R());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,p=f.priorityLevel;var Ee=ae(f.expirationTime<=Q);if(Q=e.unstable_now(),typeof Ee=="function"){f.callback=Ee,A(Q),te=!0;break t}f===a(c)&&s(c),A(Q)}else s(c);f=a(c)}if(f!==null)te=!0;else{var se=a(d);se!==null&&ee(k,se.startTime-Q),te=!1}}break e}finally{f=null,p=W,x=!1}te=void 0}}finally{te?O():_=!1}}}var O;if(typeof S=="function")O=function(){S(z)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,B=I.port2;I.port1.onmessage=z,O=function(){B.postMessage(null)}}else O=function(){j(z,0)};function ee(Q,te){L=j(function(){Q(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var te=3;break;default:te=p}var W=p;p=te;try{return Q()}finally{p=W}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(Q,te){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var W=p;p=Q;try{return te()}finally{p=W}},e.unstable_scheduleCallback=function(Q,te,W){var ae=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ae+W:ae):W=ae,Q){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=W+Ee,Q={id:u++,callback:te,priorityLevel:Q,startTime:W,expirationTime:Ee,sortIndex:-1},W>ae?(Q.sortIndex=W,t(d,Q),a(c)===null&&Q===a(d)&&(N?(w(L),L=-1):N=!0,ee(k,W-ae))):(Q.sortIndex=Ee,t(c,Q),y||x||(y=!0,_||(_=!0,O()))),Q},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(Q){var te=p;return function(){var W=p;p=te;try{return Q.apply(this,arguments)}finally{p=W}}}})(MS)),MS}var iI;function Ine(){return iI||(iI=1,OS.exports=Mne()),OS.exports}var IS={exports:{}},Es={};var oI;function $ne(){if(oI)return Es;oI=1;var e=Gf();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,d,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Es.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},Es.flushSync=function(c){var d=o.T,u=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=d,s.p=u,s.d.f()}},Es.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(c,d))},Es.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Es.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?s.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:x}):u==="script"&&s.d.X(c,{crossOrigin:f,integrity:p,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Es.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);s.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(c)},Es.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin);s.d.L(c,u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Es.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);s.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(c)},Es.requestFormReset=function(c){s.d.r(c)},Es.unstable_batchedUpdates=function(c,d){return c(d)},Es.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},Es.useFormStatus=function(){return o.H.useHostTransitionStatus()},Es.version="19.2.0",Es}var lI;function uH(){if(lI)return IS.exports;lI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),IS.exports=$ne(),IS.exports}var cI;function Rne(){if(cI)return og;cI=1;var e=Ine(),t=Gf(),a=uH();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,b=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(b=g.return),m=g.return;while(m)}return g.tag===3?b:null}function o(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function l(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function d(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var b=m,C=g;;){var D=b.return;if(D===null)break;var $=D.alternate;if($===null){if(C=D.return,C!==null){b=C;continue}break}if(D.child===$.child){for($=D.child;$;){if($===b)return c(D),m;if($===C)return c(D),g;$=$.sibling}throw Error(s(188))}if(b.return!==C.return)b=D,C=$;else{for(var J=!1,we=D.child;we;){if(we===b){J=!0,b=D,C=$;break}if(we===C){J=!0,C=D,b=$;break}we=we.sibling}if(!J){for(we=$.child;we;){if(we===b){J=!0,b=$,C=D;break}if(we===C){J=!0,C=$,b=D;break}we=we.sibling}if(!J)throw Error(s(189))}}if(b.alternate!==C)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?m:g}function u(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=u(m),g!==null)return g;m=m.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function O(m){return m===null||typeof m!="object"?null:(m=z&&m[z]||m["@@iterator"],typeof m=="function"?m:null)}var I=Symbol.for("react.client.reference");function B(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===I?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case N:return"Fragment";case j:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList";case M:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case y:return"Portal";case S:return m.displayName||"Context";case w:return(m._context.displayName||"Context")+".Consumer";case A:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case L:return g=m.displayName||null,g!==null?g:B(m.type)||"Memo";case T:g=m._payload,m=m._init;try{return B(m(g))}catch{}}return null}var ee=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ae=[],Ee=-1;function se(m){return{current:m}}function Y(m){0>Ee||(m.current=ae[Ee],ae[Ee]=null,Ee--)}function pe(m,g){Ee++,ae[Ee]=m.current,m.current=g}var Se=se(null),me=se(null),ye=se(null),re=se(null);function De(m,g){switch(pe(ye,g),pe(me,m),pe(Se,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?CM(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=CM(g),m=SM(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}Y(Se),pe(Se,m)}function ve(){Y(Se),Y(me),Y(ye)}function ke(m){m.memoizedState!==null&&pe(re,m);var g=Se.current,b=SM(g,m.type);g!==b&&(pe(me,m),pe(Se,b))}function Ce(m){me.current===m&&(Y(Se),Y(me)),re.current===m&&(Y(re),ng._currentValue=W)}var de,Re;function Oe(m){if(de===void 0)try{throw Error()}catch(b){var g=b.stack.trim().match(/\n( *(at )?)/);de=g&&g[1]||"",Re=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+m+Re}var Ge=!1;function et(m,g){if(!m||Ge)return"";Ge=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(g){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(ut){var lt=ut}Reflect.construct(m,[],xt)}else{try{xt.call()}catch(ut){lt=ut}m.call(xt.prototype)}}else{try{throw Error()}catch(ut){lt=ut}(xt=m())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(ut){if(ut&&lt&&typeof ut.stack=="string")return[ut.stack,lt.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=C.DetermineComponentFrameRoot(),J=$[0],we=$[1];if(J&&we){var He=J.split(`
`),st=we.split(`
`);for(D=C=0;C<He.length&&!He[C].includes("DetermineComponentFrameRoot");)C++;for(;D<st.length&&!st[D].includes("DetermineComponentFrameRoot");)D++;if(C===He.length||D===st.length)for(C=He.length-1,D=st.length-1;1<=C&&0<=D&&He[C]!==st[D];)D--;for(;1<=C&&0<=D;C--,D--)if(He[C]!==st[D]){if(C!==1||D!==1)do if(C--,D--,0>D||He[C]!==st[D]){var ft=`
`+He[C].replace(" at new "," at ");return m.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",m.displayName)),ft}while(1<=C&&0<=D);break}}}finally{Ge=!1,Error.prepareStackTrace=b}return(b=m?m.displayName||m.name:"")?Oe(b):""}function mt(m,g){switch(m.tag){case 26:case 27:case 5:return Oe(m.type);case 16:return Oe("Lazy");case 13:return m.child!==g&&g!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return et(m.type,!1);case 11:return et(m.type.render,!1);case 1:return et(m.type,!0);case 31:return Oe("Activity");default:return""}}function Fe(m){try{var g="",b=null;do g+=mt(m,b),b=m,m=m.return;while(m);return g}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var ot=Object.prototype.hasOwnProperty,We=e.unstable_scheduleCallback,Ke=e.unstable_cancelCallback,Ze=e.unstable_shouldYield,Me=e.unstable_requestPaint,je=e.unstable_now,ce=e.unstable_getCurrentPriorityLevel,oe=e.unstable_ImmediatePriority,U=e.unstable_UserBlockingPriority,V=e.unstable_NormalPriority,be=e.unstable_LowPriority,ze=e.unstable_IdlePriority,le=e.log,X=e.unstable_setDisableYieldValue,Ae=null,Pe=null;function Qe(m){if(typeof le=="function"&&X(m),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(Ae,m)}catch{}}var nt=Math.clz32?Math.clz32:it,wt=Math.log,Te=Math.LN2;function it(m){return m>>>=0,m===0?32:31-(wt(m)/Te|0)|0}var $e=256,ue=262144,he=4194304;function F(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function G(m,g,b){var C=m.pendingLanes;if(C===0)return 0;var D=0,$=m.suspendedLanes,J=m.pingedLanes;m=m.warmLanes;var we=C&134217727;return we!==0?(C=we&~$,C!==0?D=F(C):(J&=we,J!==0?D=F(J):b||(b=we&~m,b!==0&&(D=F(b))))):(we=C&~$,we!==0?D=F(we):J!==0?D=F(J):b||(b=C&~m,b!==0&&(D=F(b)))),D===0?0:g!==0&&g!==D&&(g&$)===0&&($=D&-D,b=g&-g,$>=b||$===32&&(b&4194048)!==0)?g:D}function Ne(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function ge(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fe(){var m=he;return he<<=1,(he&62914560)===0&&(he=4194304),m}function Ue(m){for(var g=[],b=0;31>b;b++)g.push(m);return g}function K(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function ne(m,g,b,C,D,$){var J=m.pendingLanes;m.pendingLanes=b,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=b,m.entangledLanes&=b,m.errorRecoveryDisabledLanes&=b,m.shellSuspendCounter=0;var we=m.entanglements,He=m.expirationTimes,st=m.hiddenUpdates;for(b=J&~b;0<b;){var ft=31-nt(b),xt=1<<ft;we[ft]=0,He[ft]=-1;var lt=st[ft];if(lt!==null)for(st[ft]=null,ft=0;ft<lt.length;ft++){var ut=lt[ft];ut!==null&&(ut.lane&=-536870913)}b&=~xt}C!==0&&H(m,C,0),$!==0&&D===0&&m.tag!==0&&(m.suspendedLanes|=$&~(J&~g))}function H(m,g,b){m.pendingLanes|=g,m.suspendedLanes&=~g;var C=31-nt(g);m.entangledLanes|=g,m.entanglements[C]=m.entanglements[C]|1073741824|b&261930}function xe(m,g){var b=m.entangledLanes|=g;for(m=m.entanglements;b;){var C=31-nt(b),D=1<<C;D&g|m[C]&g&&(m[C]|=g),b&=~D}}function Ie(m,g){var b=g&-g;return b=(b&42)!==0?1:Je(b),(b&(m.suspendedLanes|g))!==0?0:b}function Je(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function ct(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function bt(){var m=te.p;return m!==0?m:(m=window.event,m===void 0?32:YM(m.type))}function Pt(m,g){var b=te.p;try{return te.p=m,g()}finally{te.p=b}}var Et=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Et,rn="__reactProps$"+Et,aa="__reactContainer$"+Et,Va="__reactEvents$"+Et,bs="__reactListeners$"+Et,Be="__reactHandles$"+Et,St="__reactResources$"+Et,P="__reactMarker$"+Et;function E(m){delete m[Yt],delete m[rn],delete m[Va],delete m[bs],delete m[Be]}function Z(m){var g=m[Yt];if(g)return g;for(var b=m.parentNode;b;){if(g=b[aa]||b[Yt]){if(b=g.alternate,g.child!==null||b!==null&&b.child!==null)for(m=PM(m);m!==null;){if(b=m[Yt])return b;m=PM(m)}return g}m=b,b=m.parentNode}return null}function _e(m){if(m=m[Yt]||m[aa]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function Le(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function qe(m){var g=m[St];return g||(g=m[St]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Xe(m){m[P]=!0}var jt=new Set,vt={};function Ut(m,g){An(m,g),An(m+"Capture",g)}function An(m,g){for(vt[m]=g,m=0;m<g.length;m++)jt.add(g[m])}var Ei=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),b0={},g3={};function jee(m){return ot.call(g3,m)?!0:ot.call(b0,m)?!1:Ei.test(m)?g3[m]=!0:(b0[m]=!0,!1)}function v0(m,g,b){if(jee(g))if(b===null)m.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var C=g.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+b)}}function w0(m,g,b){if(b===null)m.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+b)}}function Qo(m,g,b,C){if(C===null)m.removeAttribute(b);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(b);return}m.setAttributeNS(g,b,""+C)}}function Wr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function p3(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Cee(m,g,b){var C=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var D=C.get,$=C.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return D.call(this)},set:function(J){b=""+J,$.call(this,J)}}),Object.defineProperty(m,g,{enumerable:C.enumerable}),{getValue:function(){return b},setValue:function(J){b=""+J},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function C1(m){if(!m._valueTracker){var g=p3(m)?"checked":"value";m._valueTracker=Cee(m,g,""+m[g])}}function x3(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var b=g.getValue(),C="";return m&&(C=p3(m)?m.checked?"true":"false":m.value),m=C,m!==b?(g.setValue(m),!0):!1}function N0(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var See=/[\n"\\]/g;function Vr(m){return m.replace(See,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function S1(m,g,b,C,D,$,J,we){m.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?m.type=J:m.removeAttribute("type"),g!=null?J==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+Wr(g)):m.value!==""+Wr(g)&&(m.value=""+Wr(g)):J!=="submit"&&J!=="reset"||m.removeAttribute("value"),g!=null?_1(m,J,Wr(g)):b!=null?_1(m,J,Wr(b)):C!=null&&m.removeAttribute("value"),D==null&&$!=null&&(m.defaultChecked=!!$),D!=null&&(m.checked=D&&typeof D!="function"&&typeof D!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?m.name=""+Wr(we):m.removeAttribute("name")}function y3(m,g,b,C,D,$,J,we){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(m.type=$),g!=null||b!=null){if(!($!=="submit"&&$!=="reset"||g!=null)){C1(m);return}b=b!=null?""+Wr(b):"",g=g!=null?""+Wr(g):b,we||g===m.value||(m.value=g),m.defaultValue=g}C=C??D,C=typeof C!="function"&&typeof C!="symbol"&&!!C,m.checked=we?m.checked:!!C,m.defaultChecked=!!C,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(m.name=J),C1(m)}function _1(m,g,b){g==="number"&&N0(m.ownerDocument)===m||m.defaultValue===""+b||(m.defaultValue=""+b)}function om(m,g,b,C){if(m=m.options,g){g={};for(var D=0;D<b.length;D++)g["$"+b[D]]=!0;for(b=0;b<m.length;b++)D=g.hasOwnProperty("$"+m[b].value),m[b].selected!==D&&(m[b].selected=D),D&&C&&(m[b].defaultSelected=!0)}else{for(b=""+Wr(b),g=null,D=0;D<m.length;D++){if(m[D].value===b){m[D].selected=!0,C&&(m[D].defaultSelected=!0);return}g!==null||m[D].disabled||(g=m[D])}g!==null&&(g.selected=!0)}}function b3(m,g,b){if(g!=null&&(g=""+Wr(g),g!==m.value&&(m.value=g),b==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=b!=null?""+Wr(b):""}function v3(m,g,b,C){if(g==null){if(C!=null){if(b!=null)throw Error(s(92));if(ee(C)){if(1<C.length)throw Error(s(93));C=C[0]}b=C}b==null&&(b=""),g=b}b=Wr(g),m.defaultValue=b,C=m.textContent,C===b&&C!==""&&C!==null&&(m.value=C),C1(m)}function lm(m,g){if(g){var b=m.firstChild;if(b&&b===m.lastChild&&b.nodeType===3){b.nodeValue=g;return}}m.textContent=g}var _ee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function w3(m,g,b){var C=g.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?C?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":C?m.setProperty(g,b):typeof b!="number"||b===0||_ee.has(g)?g==="float"?m.cssFloat=b:m[g]=(""+b).trim():m[g]=b+"px"}function N3(m,g,b){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,b!=null){for(var C in b)!b.hasOwnProperty(C)||g!=null&&g.hasOwnProperty(C)||(C.indexOf("--")===0?m.setProperty(C,""):C==="float"?m.cssFloat="":m[C]="");for(var D in g)C=g[D],g.hasOwnProperty(D)&&b[D]!==C&&w3(m,D,C)}else for(var $ in g)g.hasOwnProperty($)&&w3(m,$,g[$])}function A1(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function j0(m){return Tee.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Ko(){}var T1=null;function E1(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var cm=null,dm=null;function j3(m){var g=_e(m);if(g&&(m=g.stateNode)){var b=m[rn]||null;e:switch(m=g.stateNode,g.type){case"input":if(S1(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),g=b.name,b.type==="radio"&&g!=null){for(b=m;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Vr(""+g)+'"][type="radio"]'),g=0;g<b.length;g++){var C=b[g];if(C!==m&&C.form===m.form){var D=C[rn]||null;if(!D)throw Error(s(90));S1(C,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(g=0;g<b.length;g++)C=b[g],C.form===m.form&&x3(C)}break e;case"textarea":b3(m,b.value,b.defaultValue);break e;case"select":g=b.value,g!=null&&om(m,!!b.multiple,g,!1)}}}var k1=!1;function C3(m,g,b){if(k1)return m(g,b);k1=!0;try{var C=m(g);return C}finally{if(k1=!1,(cm!==null||dm!==null)&&(dy(),cm&&(g=cm,m=dm,dm=cm=null,j3(g),m)))for(g=0;g<m.length;g++)j3(m[g])}}function bh(m,g){var b=m.stateNode;if(b===null)return null;var C=b[rn]||null;if(C===null)return null;b=C[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(m=m.type,C=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!C;break e;default:m=!1}if(m)return null;if(b&&typeof b!="function")throw Error(s(231,g,typeof b));return b}var Xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L1=!1;if(Xo)try{var vh={};Object.defineProperty(vh,"passive",{get:function(){L1=!0}}),window.addEventListener("test",vh,vh),window.removeEventListener("test",vh,vh)}catch{L1=!1}var uc=null,P1=null,C0=null;function S3(){if(C0)return C0;var m,g=P1,b=g.length,C,D="value"in uc?uc.value:uc.textContent,$=D.length;for(m=0;m<b&&g[m]===D[m];m++);var J=b-m;for(C=1;C<=J&&g[b-C]===D[$-C];C++);return C0=D.slice(m,1<C?1-C:void 0)}function S0(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function _0(){return!0}function _3(){return!1}function Js(m){function g(b,C,D,$,J){this._reactName=b,this._targetInst=D,this.type=C,this.nativeEvent=$,this.target=J,this.currentTarget=null;for(var we in m)m.hasOwnProperty(we)&&(b=m[we],this[we]=b?b($):$[we]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?_0:_3,this.isPropagationStopped=_3,this}return f(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=_0)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=_0)},persist:function(){},isPersistent:_0}),g}var Ed={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A0=Js(Ed),wh=f({},Ed,{view:0,detail:0}),Eee=Js(wh),D1,O1,Nh,T0=f({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I1,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Nh&&(Nh&&m.type==="mousemove"?(D1=m.screenX-Nh.screenX,O1=m.screenY-Nh.screenY):O1=D1=0,Nh=m),D1)},movementY:function(m){return"movementY"in m?m.movementY:O1}}),A3=Js(T0),kee=f({},T0,{dataTransfer:0}),Lee=Js(kee),Pee=f({},wh,{relatedTarget:0}),M1=Js(Pee),Dee=f({},Ed,{animationName:0,elapsedTime:0,pseudoElement:0}),Oee=Js(Dee),Mee=f({},Ed,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Iee=Js(Mee),$ee=f({},Ed,{data:0}),T3=Js($ee),Ree={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uee(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=Fee[m])?!!g[m]:!1}function I1(){return Uee}var Bee=f({},wh,{key:function(m){if(m.key){var g=Ree[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=S0(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?zee[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I1,charCode:function(m){return m.type==="keypress"?S0(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?S0(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Hee=Js(Bee),qee=f({},T0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E3=Js(qee),Gee=f({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I1}),Wee=Js(Gee),Vee=f({},Ed,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yee=Js(Vee),Qee=f({},T0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Kee=Js(Qee),Xee=f({},Ed,{newState:0,oldState:0}),Zee=Js(Xee),Jee=[9,13,27,32],$1=Xo&&"CompositionEvent"in window,jh=null;Xo&&"documentMode"in document&&(jh=document.documentMode);var ete=Xo&&"TextEvent"in window&&!jh,k3=Xo&&(!$1||jh&&8<jh&&11>=jh),L3=" ",P3=!1;function D3(m,g){switch(m){case"keyup":return Jee.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O3(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var um=!1;function tte(m,g){switch(m){case"compositionend":return O3(g);case"keypress":return g.which!==32?null:(P3=!0,L3);case"textInput":return m=g.data,m===L3&&P3?null:m;default:return null}}function nte(m,g){if(um)return m==="compositionend"||!$1&&D3(m,g)?(m=S3(),C0=P1=uc=null,um=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return k3&&g.locale!=="ko"?null:g.data;default:return null}}var ate={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M3(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!ate[m.type]:g==="textarea"}function I3(m,g,b,C){cm?dm?dm.push(C):dm=[C]:cm=C,g=xy(g,"onChange"),0<g.length&&(b=new A0("onChange","change",null,b,C),m.push({event:b,listeners:g}))}var Ch=null,Sh=null;function ste(m){yM(m,0)}function E0(m){var g=Le(m);if(x3(g))return m}function $3(m,g){if(m==="change")return g}var R3=!1;if(Xo){var R1;if(Xo){var z1="oninput"in document;if(!z1){var z3=document.createElement("div");z3.setAttribute("oninput","return;"),z1=typeof z3.oninput=="function"}R1=z1}else R1=!1;R3=R1&&(!document.documentMode||9<document.documentMode)}function F3(){Ch&&(Ch.detachEvent("onpropertychange",U3),Sh=Ch=null)}function U3(m){if(m.propertyName==="value"&&E0(Sh)){var g=[];I3(g,Sh,m,E1(m)),C3(ste,g)}}function rte(m,g,b){m==="focusin"?(F3(),Ch=g,Sh=b,Ch.attachEvent("onpropertychange",U3)):m==="focusout"&&F3()}function ite(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return E0(Sh)}function ote(m,g){if(m==="click")return E0(g)}function lte(m,g){if(m==="input"||m==="change")return E0(g)}function cte(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var Sr=typeof Object.is=="function"?Object.is:cte;function _h(m,g){if(Sr(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var b=Object.keys(m),C=Object.keys(g);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var D=b[C];if(!ot.call(g,D)||!Sr(m[D],g[D]))return!1}return!0}function B3(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function H3(m,g){var b=B3(m);m=0;for(var C;b;){if(b.nodeType===3){if(C=m+b.textContent.length,m<=g&&C>=g)return{node:b,offset:g-m};m=C}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=B3(b)}}function q3(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?q3(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function G3(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=N0(m.document);g instanceof m.HTMLIFrameElement;){try{var b=typeof g.contentWindow.location.href=="string"}catch{b=!1}if(b)m=g.contentWindow;else break;g=N0(m.document)}return g}function F1(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var dte=Xo&&"documentMode"in document&&11>=document.documentMode,mm=null,U1=null,Ah=null,B1=!1;function W3(m,g,b){var C=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;B1||mm==null||mm!==N0(C)||(C=mm,"selectionStart"in C&&F1(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Ah&&_h(Ah,C)||(Ah=C,C=xy(U1,"onSelect"),0<C.length&&(g=new A0("onSelect","select",null,g,b),m.push({event:g,listeners:C}),g.target=mm)))}function kd(m,g){var b={};return b[m.toLowerCase()]=g.toLowerCase(),b["Webkit"+m]="webkit"+g,b["Moz"+m]="moz"+g,b}var fm={animationend:kd("Animation","AnimationEnd"),animationiteration:kd("Animation","AnimationIteration"),animationstart:kd("Animation","AnimationStart"),transitionrun:kd("Transition","TransitionRun"),transitionstart:kd("Transition","TransitionStart"),transitioncancel:kd("Transition","TransitionCancel"),transitionend:kd("Transition","TransitionEnd")},H1={},V3={};Xo&&(V3=document.createElement("div").style,"AnimationEvent"in window||(delete fm.animationend.animation,delete fm.animationiteration.animation,delete fm.animationstart.animation),"TransitionEvent"in window||delete fm.transitionend.transition);function Ld(m){if(H1[m])return H1[m];if(!fm[m])return m;var g=fm[m],b;for(b in g)if(g.hasOwnProperty(b)&&b in V3)return H1[m]=g[b];return m}var Y3=Ld("animationend"),Q3=Ld("animationiteration"),K3=Ld("animationstart"),ute=Ld("transitionrun"),mte=Ld("transitionstart"),fte=Ld("transitioncancel"),X3=Ld("transitionend"),Z3=new Map,q1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");q1.push("scrollEnd");function ki(m,g){Z3.set(m,g),Ut(g,[m])}var k0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Yr=[],hm=0,G1=0;function L0(){for(var m=hm,g=G1=hm=0;g<m;){var b=Yr[g];Yr[g++]=null;var C=Yr[g];Yr[g++]=null;var D=Yr[g];Yr[g++]=null;var $=Yr[g];if(Yr[g++]=null,C!==null&&D!==null){var J=C.pending;J===null?D.next=D:(D.next=J.next,J.next=D),C.pending=D}$!==0&&J3(b,D,$)}}function P0(m,g,b,C){Yr[hm++]=m,Yr[hm++]=g,Yr[hm++]=b,Yr[hm++]=C,G1|=C,m.lanes|=C,m=m.alternate,m!==null&&(m.lanes|=C)}function W1(m,g,b,C){return P0(m,g,b,C),D0(m)}function Pd(m,g){return P0(m,null,null,g),D0(m)}function J3(m,g,b){m.lanes|=b;var C=m.alternate;C!==null&&(C.lanes|=b);for(var D=!1,$=m.return;$!==null;)$.childLanes|=b,C=$.alternate,C!==null&&(C.childLanes|=b),$.tag===22&&(m=$.stateNode,m===null||m._visibility&1||(D=!0)),m=$,$=$.return;return m.tag===3?($=m.stateNode,D&&g!==null&&(D=31-nt(b),m=$.hiddenUpdates,C=m[D],C===null?m[D]=[g]:C.push(g),g.lane=b|536870912),$):null}function D0(m){if(50<Qh)throw Qh=0,tS=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var gm={};function hte(m,g,b,C){this.tag=m,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(m,g,b,C){return new hte(m,g,b,C)}function V1(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Zo(m,g){var b=m.alternate;return b===null?(b=_r(m.tag,g,m.key,m.mode),b.elementType=m.elementType,b.type=m.type,b.stateNode=m.stateNode,b.alternate=m,m.alternate=b):(b.pendingProps=g,b.type=m.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=m.flags&65011712,b.childLanes=m.childLanes,b.lanes=m.lanes,b.child=m.child,b.memoizedProps=m.memoizedProps,b.memoizedState=m.memoizedState,b.updateQueue=m.updateQueue,g=m.dependencies,b.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},b.sibling=m.sibling,b.index=m.index,b.ref=m.ref,b.refCleanup=m.refCleanup,b}function eO(m,g){m.flags&=65011714;var b=m.alternate;return b===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=b.childLanes,m.lanes=b.lanes,m.child=b.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=b.memoizedProps,m.memoizedState=b.memoizedState,m.updateQueue=b.updateQueue,m.type=b.type,g=b.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function O0(m,g,b,C,D,$){var J=0;if(C=m,typeof m=="function")V1(m)&&(J=1);else if(typeof m=="string")J=bne(m,b,Se.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case M:return m=_r(31,b,g,D),m.elementType=M,m.lanes=$,m;case N:return Dd(b.children,D,$,g);case v:J=8,D|=24;break;case j:return m=_r(12,b,g,D|2),m.elementType=j,m.lanes=$,m;case k:return m=_r(13,b,g,D),m.elementType=k,m.lanes=$,m;case _:return m=_r(19,b,g,D),m.elementType=_,m.lanes=$,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:J=10;break e;case w:J=9;break e;case A:J=11;break e;case L:J=14;break e;case T:J=16,C=null;break e}J=29,b=Error(s(130,m===null?"null":typeof m,"")),C=null}return g=_r(J,b,g,D),g.elementType=m,g.type=C,g.lanes=$,g}function Dd(m,g,b,C){return m=_r(7,m,C,g),m.lanes=b,m}function Y1(m,g,b){return m=_r(6,m,null,g),m.lanes=b,m}function tO(m){var g=_r(18,null,null,0);return g.stateNode=m,g}function Q1(m,g,b){return g=_r(4,m.children!==null?m.children:[],m.key,g),g.lanes=b,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var nO=new WeakMap;function Qr(m,g){if(typeof m=="object"&&m!==null){var b=nO.get(m);return b!==void 0?b:(g={value:m,source:g,stack:Fe(g)},nO.set(m,g),g)}return{value:m,source:g,stack:Fe(g)}}var pm=[],xm=0,M0=null,Th=0,Kr=[],Xr=0,mc=null,to=1,no="";function Jo(m,g){pm[xm++]=Th,pm[xm++]=M0,M0=m,Th=g}function aO(m,g,b){Kr[Xr++]=to,Kr[Xr++]=no,Kr[Xr++]=mc,mc=m;var C=to;m=no;var D=32-nt(C)-1;C&=~(1<<D),b+=1;var $=32-nt(g)+D;if(30<$){var J=D-D%5;$=(C&(1<<J)-1).toString(32),C>>=J,D-=J,to=1<<32-nt(g)+D|b<<D|C,no=$+m}else to=1<<$|b<<D|C,no=m}function K1(m){m.return!==null&&(Jo(m,1),aO(m,1,0))}function X1(m){for(;m===M0;)M0=pm[--xm],pm[xm]=null,Th=pm[--xm],pm[xm]=null;for(;m===mc;)mc=Kr[--Xr],Kr[Xr]=null,no=Kr[--Xr],Kr[Xr]=null,to=Kr[--Xr],Kr[Xr]=null}function sO(m,g){Kr[Xr++]=to,Kr[Xr++]=no,Kr[Xr++]=mc,to=g.id,no=g.overflow,mc=m}var vs=null,Xn=null,pn=!1,fc=null,Zr=!1,Z1=Error(s(519));function hc(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eh(Qr(g,m)),Z1}function rO(m){var g=m.stateNode,b=m.type,C=m.memoizedProps;switch(g[Yt]=m,g[rn]=C,b){case"dialog":dn("cancel",g),dn("close",g);break;case"iframe":case"object":case"embed":dn("load",g);break;case"video":case"audio":for(b=0;b<Xh.length;b++)dn(Xh[b],g);break;case"source":dn("error",g);break;case"img":case"image":case"link":dn("error",g),dn("load",g);break;case"details":dn("toggle",g);break;case"input":dn("invalid",g),y3(g,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":dn("invalid",g);break;case"textarea":dn("invalid",g),v3(g,C.value,C.defaultValue,C.children)}b=C.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||g.textContent===""+b||C.suppressHydrationWarning===!0||NM(g.textContent,b)?(C.popover!=null&&(dn("beforetoggle",g),dn("toggle",g)),C.onScroll!=null&&dn("scroll",g),C.onScrollEnd!=null&&dn("scrollend",g),C.onClick!=null&&(g.onclick=Ko),g=!0):g=!1,g||hc(m,!0)}function iO(m){for(vs=m.return;vs;)switch(vs.tag){case 5:case 31:case 13:Zr=!1;return;case 27:case 3:Zr=!0;return;default:vs=vs.return}}function ym(m){if(m!==vs)return!1;if(!pn)return iO(m),pn=!0,!1;var g=m.tag,b;if((b=g!==3&&g!==27)&&((b=g===5)&&(b=m.type,b=!(b!=="form"&&b!=="button")||pS(m.type,m.memoizedProps)),b=!b),b&&Xn&&hc(m),iO(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Xn=LM(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Xn=LM(m)}else g===27?(g=Xn,Tc(m.type)?(m=wS,wS=null,Xn=m):Xn=g):Xn=vs?ei(m.stateNode.nextSibling):null;return!0}function Od(){Xn=vs=null,pn=!1}function J1(){var m=fc;return m!==null&&(ar===null?ar=m:ar.push.apply(ar,m),fc=null),m}function Eh(m){fc===null?fc=[m]:fc.push(m)}var eC=se(null),Md=null,el=null;function gc(m,g,b){pe(eC,g._currentValue),g._currentValue=b}function tl(m){m._currentValue=eC.current,Y(eC)}function tC(m,g,b){for(;m!==null;){var C=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,C!==null&&(C.childLanes|=g)):C!==null&&(C.childLanes&g)!==g&&(C.childLanes|=g),m===b)break;m=m.return}}function nC(m,g,b,C){var D=m.child;for(D!==null&&(D.return=m);D!==null;){var $=D.dependencies;if($!==null){var J=D.child;$=$.firstContext;e:for(;$!==null;){var we=$;$=D;for(var He=0;He<g.length;He++)if(we.context===g[He]){$.lanes|=b,we=$.alternate,we!==null&&(we.lanes|=b),tC($.return,b,m),C||(J=null);break e}$=we.next}}else if(D.tag===18){if(J=D.return,J===null)throw Error(s(341));J.lanes|=b,$=J.alternate,$!==null&&($.lanes|=b),tC(J,b,m),J=null}else J=D.child;if(J!==null)J.return=D;else for(J=D;J!==null;){if(J===m){J=null;break}if(D=J.sibling,D!==null){D.return=J.return,J=D;break}J=J.return}D=J}}function bm(m,g,b,C){m=null;for(var D=g,$=!1;D!==null;){if(!$){if((D.flags&524288)!==0)$=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var J=D.alternate;if(J===null)throw Error(s(387));if(J=J.memoizedProps,J!==null){var we=D.type;Sr(D.pendingProps.value,J.value)||(m!==null?m.push(we):m=[we])}}else if(D===re.current){if(J=D.alternate,J===null)throw Error(s(387));J.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(m!==null?m.push(ng):m=[ng])}D=D.return}m!==null&&nC(g,m,b,C),g.flags|=262144}function I0(m){for(m=m.firstContext;m!==null;){if(!Sr(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Id(m){Md=m,el=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function ws(m){return oO(Md,m)}function $0(m,g){return Md===null&&Id(m),oO(m,g)}function oO(m,g){var b=g._currentValue;if(g={context:g,memoizedValue:b,next:null},el===null){if(m===null)throw Error(s(308));el=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else el=el.next=g;return b}var gte=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(b,C){m.push(C)}};this.abort=function(){g.aborted=!0,m.forEach(function(b){return b()})}},pte=e.unstable_scheduleCallback,xte=e.unstable_NormalPriority,Ma={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function aC(){return{controller:new gte,data:new Map,refCount:0}}function kh(m){m.refCount--,m.refCount===0&&pte(xte,function(){m.controller.abort()})}var Lh=null,sC=0,vm=0,wm=null;function yte(m,g){if(Lh===null){var b=Lh=[];sC=0,vm=oS(),wm={status:"pending",value:void 0,then:function(C){b.push(C)}}}return sC++,g.then(lO,lO),g}function lO(){if(--sC===0&&Lh!==null){wm!==null&&(wm.status="fulfilled");var m=Lh;Lh=null,vm=0,wm=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function bte(m,g){var b=[],C={status:"pending",value:null,reason:null,then:function(D){b.push(D)}};return m.then(function(){C.status="fulfilled",C.value=g;for(var D=0;D<b.length;D++)(0,b[D])(g)},function(D){for(C.status="rejected",C.reason=D,D=0;D<b.length;D++)(0,b[D])(void 0)}),C}var cO=Q.S;Q.S=function(m,g){W5=je(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&yte(m,g),cO!==null&&cO(m,g)};var $d=se(null);function rC(){var m=$d.current;return m!==null?m:Hn.pooledCache}function R0(m,g){g===null?pe($d,$d.current):pe($d,g.pool)}function dO(){var m=rC();return m===null?null:{parent:Ma._currentValue,pool:m}}var Nm=Error(s(460)),iC=Error(s(474)),z0=Error(s(542)),F0={then:function(){}};function uO(m){return m=m.status,m==="fulfilled"||m==="rejected"}function mO(m,g,b){switch(b=m[b],b===void 0?m.push(g):b!==g&&(g.then(Ko,Ko),g=b),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,hO(m),m;default:if(typeof g.status=="string")g.then(Ko,Ko);else{if(m=Hn,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(C){if(g.status==="pending"){var D=g;D.status="fulfilled",D.value=C}},function(C){if(g.status==="pending"){var D=g;D.status="rejected",D.reason=C}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,hO(m),m}throw zd=g,Nm}}function Rd(m){try{var g=m._init;return g(m._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(zd=b,Nm):b}}var zd=null;function fO(){if(zd===null)throw Error(s(459));var m=zd;return zd=null,m}function hO(m){if(m===Nm||m===z0)throw Error(s(483))}var jm=null,Ph=0;function U0(m){var g=Ph;return Ph+=1,jm===null&&(jm=[]),mO(jm,m,g)}function Dh(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function B0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function gO(m){function g(tt,Ve){if(m){var at=tt.deletions;at===null?(tt.deletions=[Ve],tt.flags|=16):at.push(Ve)}}function b(tt,Ve){if(!m)return null;for(;Ve!==null;)g(tt,Ve),Ve=Ve.sibling;return null}function C(tt){for(var Ve=new Map;tt!==null;)tt.key!==null?Ve.set(tt.key,tt):Ve.set(tt.index,tt),tt=tt.sibling;return Ve}function D(tt,Ve){return tt=Zo(tt,Ve),tt.index=0,tt.sibling=null,tt}function $(tt,Ve,at){return tt.index=at,m?(at=tt.alternate,at!==null?(at=at.index,at<Ve?(tt.flags|=67108866,Ve):at):(tt.flags|=67108866,Ve)):(tt.flags|=1048576,Ve)}function J(tt){return m&&tt.alternate===null&&(tt.flags|=67108866),tt}function we(tt,Ve,at,gt){return Ve===null||Ve.tag!==6?(Ve=Y1(at,tt.mode,gt),Ve.return=tt,Ve):(Ve=D(Ve,at),Ve.return=tt,Ve)}function He(tt,Ve,at,gt){var Ht=at.type;return Ht===N?ft(tt,Ve,at.props.children,gt,at.key):Ve!==null&&(Ve.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===T&&Rd(Ht)===Ve.type)?(Ve=D(Ve,at.props),Dh(Ve,at),Ve.return=tt,Ve):(Ve=O0(at.type,at.key,at.props,null,tt.mode,gt),Dh(Ve,at),Ve.return=tt,Ve)}function st(tt,Ve,at,gt){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==at.containerInfo||Ve.stateNode.implementation!==at.implementation?(Ve=Q1(at,tt.mode,gt),Ve.return=tt,Ve):(Ve=D(Ve,at.children||[]),Ve.return=tt,Ve)}function ft(tt,Ve,at,gt,Ht){return Ve===null||Ve.tag!==7?(Ve=Dd(at,tt.mode,gt,Ht),Ve.return=tt,Ve):(Ve=D(Ve,at),Ve.return=tt,Ve)}function xt(tt,Ve,at){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return Ve=Y1(""+Ve,tt.mode,at),Ve.return=tt,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case x:return at=O0(Ve.type,Ve.key,Ve.props,null,tt.mode,at),Dh(at,Ve),at.return=tt,at;case y:return Ve=Q1(Ve,tt.mode,at),Ve.return=tt,Ve;case T:return Ve=Rd(Ve),xt(tt,Ve,at)}if(ee(Ve)||O(Ve))return Ve=Dd(Ve,tt.mode,at,null),Ve.return=tt,Ve;if(typeof Ve.then=="function")return xt(tt,U0(Ve),at);if(Ve.$$typeof===S)return xt(tt,$0(tt,Ve),at);B0(tt,Ve)}return null}function lt(tt,Ve,at,gt){var Ht=Ve!==null?Ve.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Ht!==null?null:we(tt,Ve,""+at,gt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case x:return at.key===Ht?He(tt,Ve,at,gt):null;case y:return at.key===Ht?st(tt,Ve,at,gt):null;case T:return at=Rd(at),lt(tt,Ve,at,gt)}if(ee(at)||O(at))return Ht!==null?null:ft(tt,Ve,at,gt,null);if(typeof at.then=="function")return lt(tt,Ve,U0(at),gt);if(at.$$typeof===S)return lt(tt,Ve,$0(tt,at),gt);B0(tt,at)}return null}function ut(tt,Ve,at,gt,Ht){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return tt=tt.get(at)||null,we(Ve,tt,""+gt,Ht);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case x:return tt=tt.get(gt.key===null?at:gt.key)||null,He(Ve,tt,gt,Ht);case y:return tt=tt.get(gt.key===null?at:gt.key)||null,st(Ve,tt,gt,Ht);case T:return gt=Rd(gt),ut(tt,Ve,at,gt,Ht)}if(ee(gt)||O(gt))return tt=tt.get(at)||null,ft(Ve,tt,gt,Ht,null);if(typeof gt.then=="function")return ut(tt,Ve,at,U0(gt),Ht);if(gt.$$typeof===S)return ut(tt,Ve,at,$0(Ve,gt),Ht);B0(Ve,gt)}return null}function Mt(tt,Ve,at,gt){for(var Ht=null,wn=null,zt=Ve,sn=Ve=0,fn=null;zt!==null&&sn<at.length;sn++){zt.index>sn?(fn=zt,zt=null):fn=zt.sibling;var Nn=lt(tt,zt,at[sn],gt);if(Nn===null){zt===null&&(zt=fn);break}m&&zt&&Nn.alternate===null&&g(tt,zt),Ve=$(Nn,Ve,sn),wn===null?Ht=Nn:wn.sibling=Nn,wn=Nn,zt=fn}if(sn===at.length)return b(tt,zt),pn&&Jo(tt,sn),Ht;if(zt===null){for(;sn<at.length;sn++)zt=xt(tt,at[sn],gt),zt!==null&&(Ve=$(zt,Ve,sn),wn===null?Ht=zt:wn.sibling=zt,wn=zt);return pn&&Jo(tt,sn),Ht}for(zt=C(zt);sn<at.length;sn++)fn=ut(zt,tt,sn,at[sn],gt),fn!==null&&(m&&fn.alternate!==null&&zt.delete(fn.key===null?sn:fn.key),Ve=$(fn,Ve,sn),wn===null?Ht=fn:wn.sibling=fn,wn=fn);return m&&zt.forEach(function(Dc){return g(tt,Dc)}),pn&&Jo(tt,sn),Ht}function Wt(tt,Ve,at,gt){if(at==null)throw Error(s(151));for(var Ht=null,wn=null,zt=Ve,sn=Ve=0,fn=null,Nn=at.next();zt!==null&&!Nn.done;sn++,Nn=at.next()){zt.index>sn?(fn=zt,zt=null):fn=zt.sibling;var Dc=lt(tt,zt,Nn.value,gt);if(Dc===null){zt===null&&(zt=fn);break}m&&zt&&Dc.alternate===null&&g(tt,zt),Ve=$(Dc,Ve,sn),wn===null?Ht=Dc:wn.sibling=Dc,wn=Dc,zt=fn}if(Nn.done)return b(tt,zt),pn&&Jo(tt,sn),Ht;if(zt===null){for(;!Nn.done;sn++,Nn=at.next())Nn=xt(tt,Nn.value,gt),Nn!==null&&(Ve=$(Nn,Ve,sn),wn===null?Ht=Nn:wn.sibling=Nn,wn=Nn);return pn&&Jo(tt,sn),Ht}for(zt=C(zt);!Nn.done;sn++,Nn=at.next())Nn=ut(zt,tt,sn,Nn.value,gt),Nn!==null&&(m&&Nn.alternate!==null&&zt.delete(Nn.key===null?sn:Nn.key),Ve=$(Nn,Ve,sn),wn===null?Ht=Nn:wn.sibling=Nn,wn=Nn);return m&&zt.forEach(function(kne){return g(tt,kne)}),pn&&Jo(tt,sn),Ht}function Fn(tt,Ve,at,gt){if(typeof at=="object"&&at!==null&&at.type===N&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case x:e:{for(var Ht=at.key;Ve!==null;){if(Ve.key===Ht){if(Ht=at.type,Ht===N){if(Ve.tag===7){b(tt,Ve.sibling),gt=D(Ve,at.props.children),gt.return=tt,tt=gt;break e}}else if(Ve.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===T&&Rd(Ht)===Ve.type){b(tt,Ve.sibling),gt=D(Ve,at.props),Dh(gt,at),gt.return=tt,tt=gt;break e}b(tt,Ve);break}else g(tt,Ve);Ve=Ve.sibling}at.type===N?(gt=Dd(at.props.children,tt.mode,gt,at.key),gt.return=tt,tt=gt):(gt=O0(at.type,at.key,at.props,null,tt.mode,gt),Dh(gt,at),gt.return=tt,tt=gt)}return J(tt);case y:e:{for(Ht=at.key;Ve!==null;){if(Ve.key===Ht)if(Ve.tag===4&&Ve.stateNode.containerInfo===at.containerInfo&&Ve.stateNode.implementation===at.implementation){b(tt,Ve.sibling),gt=D(Ve,at.children||[]),gt.return=tt,tt=gt;break e}else{b(tt,Ve);break}else g(tt,Ve);Ve=Ve.sibling}gt=Q1(at,tt.mode,gt),gt.return=tt,tt=gt}return J(tt);case T:return at=Rd(at),Fn(tt,Ve,at,gt)}if(ee(at))return Mt(tt,Ve,at,gt);if(O(at)){if(Ht=O(at),typeof Ht!="function")throw Error(s(150));return at=Ht.call(at),Wt(tt,Ve,at,gt)}if(typeof at.then=="function")return Fn(tt,Ve,U0(at),gt);if(at.$$typeof===S)return Fn(tt,Ve,$0(tt,at),gt);B0(tt,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,Ve!==null&&Ve.tag===6?(b(tt,Ve.sibling),gt=D(Ve,at),gt.return=tt,tt=gt):(b(tt,Ve),gt=Y1(at,tt.mode,gt),gt.return=tt,tt=gt),J(tt)):b(tt,Ve)}return function(tt,Ve,at,gt){try{Ph=0;var Ht=Fn(tt,Ve,at,gt);return jm=null,Ht}catch(zt){if(zt===Nm||zt===z0)throw zt;var wn=_r(29,zt,null,tt.mode);return wn.lanes=gt,wn.return=tt,wn}}}var Fd=gO(!0),pO=gO(!1),pc=!1;function oC(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lC(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function xc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function yc(m,g,b){var C=m.updateQueue;if(C===null)return null;if(C=C.shared,(Cn&2)!==0){var D=C.pending;return D===null?g.next=g:(g.next=D.next,D.next=g),C.pending=g,g=D0(m),J3(m,null,b),g}return P0(m,C,g,b),D0(m)}function Oh(m,g,b){if(g=g.updateQueue,g!==null&&(g=g.shared,(b&4194048)!==0)){var C=g.lanes;C&=m.pendingLanes,b|=C,g.lanes=b,xe(m,b)}}function cC(m,g){var b=m.updateQueue,C=m.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var D=null,$=null;if(b=b.firstBaseUpdate,b!==null){do{var J={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};$===null?D=$=J:$=$.next=J,b=b.next}while(b!==null);$===null?D=$=g:$=$.next=g}else D=$=g;b={baseState:C.baseState,firstBaseUpdate:D,lastBaseUpdate:$,shared:C.shared,callbacks:C.callbacks},m.updateQueue=b;return}m=b.lastBaseUpdate,m===null?b.firstBaseUpdate=g:m.next=g,b.lastBaseUpdate=g}var dC=!1;function Mh(){if(dC){var m=wm;if(m!==null)throw m}}function Ih(m,g,b,C){dC=!1;var D=m.updateQueue;pc=!1;var $=D.firstBaseUpdate,J=D.lastBaseUpdate,we=D.shared.pending;if(we!==null){D.shared.pending=null;var He=we,st=He.next;He.next=null,J===null?$=st:J.next=st,J=He;var ft=m.alternate;ft!==null&&(ft=ft.updateQueue,we=ft.lastBaseUpdate,we!==J&&(we===null?ft.firstBaseUpdate=st:we.next=st,ft.lastBaseUpdate=He))}if($!==null){var xt=D.baseState;J=0,ft=st=He=null,we=$;do{var lt=we.lane&-536870913,ut=lt!==we.lane;if(ut?(mn&lt)===lt:(C&lt)===lt){lt!==0&&lt===vm&&(dC=!0),ft!==null&&(ft=ft.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Mt=m,Wt=we;lt=g;var Fn=b;switch(Wt.tag){case 1:if(Mt=Wt.payload,typeof Mt=="function"){xt=Mt.call(Fn,xt,lt);break e}xt=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Wt.payload,lt=typeof Mt=="function"?Mt.call(Fn,xt,lt):Mt,lt==null)break e;xt=f({},xt,lt);break e;case 2:pc=!0}}lt=we.callback,lt!==null&&(m.flags|=64,ut&&(m.flags|=8192),ut=D.callbacks,ut===null?D.callbacks=[lt]:ut.push(lt))}else ut={lane:lt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},ft===null?(st=ft=ut,He=xt):ft=ft.next=ut,J|=lt;if(we=we.next,we===null){if(we=D.shared.pending,we===null)break;ut=we,we=ut.next,ut.next=null,D.lastBaseUpdate=ut,D.shared.pending=null}}while(!0);ft===null&&(He=xt),D.baseState=He,D.firstBaseUpdate=st,D.lastBaseUpdate=ft,$===null&&(D.shared.lanes=0),jc|=J,m.lanes=J,m.memoizedState=xt}}function xO(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function yO(m,g){var b=m.callbacks;if(b!==null)for(m.callbacks=null,m=0;m<b.length;m++)xO(b[m],g)}var Cm=se(null),H0=se(0);function bO(m,g){m=dl,pe(H0,m),pe(Cm,g),dl=m|g.baseLanes}function uC(){pe(H0,dl),pe(Cm,Cm.current)}function mC(){dl=H0.current,Y(Cm),Y(H0)}var Ar=se(null),Jr=null;function bc(m){var g=m.alternate;pe(Ta,Ta.current&1),pe(Ar,m),Jr===null&&(g===null||Cm.current!==null||g.memoizedState!==null)&&(Jr=m)}function fC(m){pe(Ta,Ta.current),pe(Ar,m),Jr===null&&(Jr=m)}function vO(m){m.tag===22?(pe(Ta,Ta.current),pe(Ar,m),Jr===null&&(Jr=m)):vc()}function vc(){pe(Ta,Ta.current),pe(Ar,Ar.current)}function Tr(m){Y(Ar),Jr===m&&(Jr=null),Y(Ta)}var Ta=se(0);function q0(m){for(var g=m;g!==null;){if(g.tag===13){var b=g.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||bS(b)||vS(b)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var nl=0,tn=null,Rn=null,Ia=null,G0=!1,Sm=!1,Ud=!1,W0=0,$h=0,_m=null,vte=0;function ya(){throw Error(s(321))}function hC(m,g){if(g===null)return!1;for(var b=0;b<g.length&&b<m.length;b++)if(!Sr(m[b],g[b]))return!1;return!0}function gC(m,g,b,C,D,$){return nl=$,tn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Q.H=m===null||m.memoizedState===null?a5:kC,Ud=!1,$=b(C,D),Ud=!1,Sm&&($=NO(g,b,C,D)),wO(m),$}function wO(m){Q.H=Fh;var g=Rn!==null&&Rn.next!==null;if(nl=0,Ia=Rn=tn=null,G0=!1,$h=0,_m=null,g)throw Error(s(300));m===null||$a||(m=m.dependencies,m!==null&&I0(m)&&($a=!0))}function NO(m,g,b,C){tn=m;var D=0;do{if(Sm&&(_m=null),$h=0,Sm=!1,25<=D)throw Error(s(301));if(D+=1,Ia=Rn=null,m.updateQueue!=null){var $=m.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}Q.H=s5,$=g(b,C)}while(Sm);return $}function wte(){var m=Q.H,g=m.useState()[0];return g=typeof g.then=="function"?Rh(g):g,m=m.useState()[0],(Rn!==null?Rn.memoizedState:null)!==m&&(tn.flags|=1024),g}function pC(){var m=W0!==0;return W0=0,m}function xC(m,g,b){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~b}function yC(m){if(G0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}G0=!1}nl=0,Ia=Rn=tn=null,Sm=!1,$h=W0=0,_m=null}function Bs(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ia===null?tn.memoizedState=Ia=m:Ia=Ia.next=m,Ia}function Ea(){if(Rn===null){var m=tn.alternate;m=m!==null?m.memoizedState:null}else m=Rn.next;var g=Ia===null?tn.memoizedState:Ia.next;if(g!==null)Ia=g,Rn=m;else{if(m===null)throw tn.alternate===null?Error(s(467)):Error(s(310));Rn=m,m={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Ia===null?tn.memoizedState=Ia=m:Ia=Ia.next=m}return Ia}function V0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rh(m){var g=$h;return $h+=1,_m===null&&(_m=[]),m=mO(_m,m,g),g=tn,(Ia===null?g.memoizedState:Ia.next)===null&&(g=g.alternate,Q.H=g===null||g.memoizedState===null?a5:kC),m}function Y0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Rh(m);if(m.$$typeof===S)return ws(m)}throw Error(s(438,String(m)))}function bC(m){var g=null,b=tn.updateQueue;if(b!==null&&(g=b.memoCache),g==null){var C=tn.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(g={data:C.data.map(function(D){return D.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),b===null&&(b=V0(),tn.updateQueue=b),b.memoCache=g,b=g.data[g.index],b===void 0)for(b=g.data[g.index]=Array(m),C=0;C<m;C++)b[C]=R;return g.index++,b}function al(m,g){return typeof g=="function"?g(m):g}function Q0(m){var g=Ea();return vC(g,Rn,m)}function vC(m,g,b){var C=m.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=b;var D=m.baseQueue,$=C.pending;if($!==null){if(D!==null){var J=D.next;D.next=$.next,$.next=J}g.baseQueue=D=$,C.pending=null}if($=m.baseState,D===null)m.memoizedState=$;else{g=D.next;var we=J=null,He=null,st=g,ft=!1;do{var xt=st.lane&-536870913;if(xt!==st.lane?(mn&xt)===xt:(nl&xt)===xt){var lt=st.revertLane;if(lt===0)He!==null&&(He=He.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),xt===vm&&(ft=!0);else if((nl&lt)===lt){st=st.next,lt===vm&&(ft=!0);continue}else xt={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},He===null?(we=He=xt,J=$):He=He.next=xt,tn.lanes|=lt,jc|=lt;xt=st.action,Ud&&b($,xt),$=st.hasEagerState?st.eagerState:b($,xt)}else lt={lane:xt,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},He===null?(we=He=lt,J=$):He=He.next=lt,tn.lanes|=xt,jc|=xt;st=st.next}while(st!==null&&st!==g);if(He===null?J=$:He.next=we,!Sr($,m.memoizedState)&&($a=!0,ft&&(b=wm,b!==null)))throw b;m.memoizedState=$,m.baseState=J,m.baseQueue=He,C.lastRenderedState=$}return D===null&&(C.lanes=0),[m.memoizedState,C.dispatch]}function wC(m){var g=Ea(),b=g.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=m;var C=b.dispatch,D=b.pending,$=g.memoizedState;if(D!==null){b.pending=null;var J=D=D.next;do $=m($,J.action),J=J.next;while(J!==D);Sr($,g.memoizedState)||($a=!0),g.memoizedState=$,g.baseQueue===null&&(g.baseState=$),b.lastRenderedState=$}return[$,C]}function jO(m,g,b){var C=tn,D=Ea(),$=pn;if($){if(b===void 0)throw Error(s(407));b=b()}else b=g();var J=!Sr((Rn||D).memoizedState,b);if(J&&(D.memoizedState=b,$a=!0),D=D.queue,CC(_O.bind(null,C,D,m),[m]),D.getSnapshot!==g||J||Ia!==null&&Ia.memoizedState.tag&1){if(C.flags|=2048,Am(9,{destroy:void 0},SO.bind(null,C,D,b,g),null),Hn===null)throw Error(s(349));$||(nl&127)!==0||CO(C,g,b)}return b}function CO(m,g,b){m.flags|=16384,m={getSnapshot:g,value:b},g=tn.updateQueue,g===null?(g=V0(),tn.updateQueue=g,g.stores=[m]):(b=g.stores,b===null?g.stores=[m]:b.push(m))}function SO(m,g,b,C){g.value=b,g.getSnapshot=C,AO(g)&&TO(m)}function _O(m,g,b){return b(function(){AO(g)&&TO(m)})}function AO(m){var g=m.getSnapshot;m=m.value;try{var b=g();return!Sr(m,b)}catch{return!0}}function TO(m){var g=Pd(m,2);g!==null&&sr(g,m,2)}function NC(m){var g=Bs();if(typeof m=="function"){var b=m;if(m=b(),Ud){Qe(!0);try{b()}finally{Qe(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:m},g}function EO(m,g,b,C){return m.baseState=b,vC(m,Rn,typeof C=="function"?C:al)}function Nte(m,g,b,C,D){if(Z0(m))throw Error(s(485));if(m=g.action,m!==null){var $={payload:D,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){$.listeners.push(J)}};Q.T!==null?b(!0):$.isTransition=!1,C($),b=g.pending,b===null?($.next=g.pending=$,kO(g,$)):($.next=b.next,g.pending=b.next=$)}}function kO(m,g){var b=g.action,C=g.payload,D=m.state;if(g.isTransition){var $=Q.T,J={};Q.T=J;try{var we=b(D,C),He=Q.S;He!==null&&He(J,we),LO(m,g,we)}catch(st){jC(m,g,st)}finally{$!==null&&J.types!==null&&($.types=J.types),Q.T=$}}else try{$=b(D,C),LO(m,g,$)}catch(st){jC(m,g,st)}}function LO(m,g,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(C){PO(m,g,C)},function(C){return jC(m,g,C)}):PO(m,g,b)}function PO(m,g,b){g.status="fulfilled",g.value=b,DO(g),m.state=b,g=m.pending,g!==null&&(b=g.next,b===g?m.pending=null:(b=b.next,g.next=b,kO(m,b)))}function jC(m,g,b){var C=m.pending;if(m.pending=null,C!==null){C=C.next;do g.status="rejected",g.reason=b,DO(g),g=g.next;while(g!==C)}m.action=null}function DO(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function OO(m,g){return g}function MO(m,g){if(pn){var b=Hn.formState;if(b!==null){e:{var C=tn;if(pn){if(Xn){t:{for(var D=Xn,$=Zr;D.nodeType!==8;){if(!$){D=null;break t}if(D=ei(D.nextSibling),D===null){D=null;break t}}$=D.data,D=$==="F!"||$==="F"?D:null}if(D){Xn=ei(D.nextSibling),C=D.data==="F!";break e}}hc(C)}C=!1}C&&(g=b[0])}}return b=Bs(),b.memoizedState=b.baseState=g,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:OO,lastRenderedState:g},b.queue=C,b=e5.bind(null,tn,C),C.dispatch=b,C=NC(!1),$=EC.bind(null,tn,!1,C.queue),C=Bs(),D={state:g,dispatch:null,action:m,pending:null},C.queue=D,b=Nte.bind(null,tn,D,$,b),D.dispatch=b,C.memoizedState=m,[g,b,!1]}function IO(m){var g=Ea();return $O(g,Rn,m)}function $O(m,g,b){if(g=vC(m,g,OO)[0],m=Q0(al)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var C=Rh(g)}catch(J){throw J===Nm?z0:J}else C=g;g=Ea();var D=g.queue,$=D.dispatch;return b!==g.memoizedState&&(tn.flags|=2048,Am(9,{destroy:void 0},jte.bind(null,D,b),null)),[C,$,m]}function jte(m,g){m.action=g}function RO(m){var g=Ea(),b=Rn;if(b!==null)return $O(g,b,m);Ea(),g=g.memoizedState,b=Ea();var C=b.queue.dispatch;return b.memoizedState=m,[g,C,!1]}function Am(m,g,b,C){return m={tag:m,create:b,deps:C,inst:g,next:null},g=tn.updateQueue,g===null&&(g=V0(),tn.updateQueue=g),b=g.lastEffect,b===null?g.lastEffect=m.next=m:(C=b.next,b.next=m,m.next=C,g.lastEffect=m),m}function zO(){return Ea().memoizedState}function K0(m,g,b,C){var D=Bs();tn.flags|=m,D.memoizedState=Am(1|g,{destroy:void 0},b,C===void 0?null:C)}function X0(m,g,b,C){var D=Ea();C=C===void 0?null:C;var $=D.memoizedState.inst;Rn!==null&&C!==null&&hC(C,Rn.memoizedState.deps)?D.memoizedState=Am(g,$,b,C):(tn.flags|=m,D.memoizedState=Am(1|g,$,b,C))}function FO(m,g){K0(8390656,8,m,g)}function CC(m,g){X0(2048,8,m,g)}function Cte(m){tn.flags|=4;var g=tn.updateQueue;if(g===null)g=V0(),tn.updateQueue=g,g.events=[m];else{var b=g.events;b===null?g.events=[m]:b.push(m)}}function UO(m){var g=Ea().memoizedState;return Cte({ref:g,nextImpl:m}),function(){if((Cn&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function BO(m,g){return X0(4,2,m,g)}function HO(m,g){return X0(4,4,m,g)}function qO(m,g){if(typeof g=="function"){m=m();var b=g(m);return function(){typeof b=="function"?b():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function GO(m,g,b){b=b!=null?b.concat([m]):null,X0(4,4,qO.bind(null,g,m),b)}function SC(){}function WO(m,g){var b=Ea();g=g===void 0?null:g;var C=b.memoizedState;return g!==null&&hC(g,C[1])?C[0]:(b.memoizedState=[m,g],m)}function VO(m,g){var b=Ea();g=g===void 0?null:g;var C=b.memoizedState;if(g!==null&&hC(g,C[1]))return C[0];if(C=m(),Ud){Qe(!0);try{m()}finally{Qe(!1)}}return b.memoizedState=[C,g],C}function _C(m,g,b){return b===void 0||(nl&1073741824)!==0&&(mn&261930)===0?m.memoizedState=g:(m.memoizedState=b,m=Y5(),tn.lanes|=m,jc|=m,b)}function YO(m,g,b,C){return Sr(b,g)?b:Cm.current!==null?(m=_C(m,b,C),Sr(m,g)||($a=!0),m):(nl&42)===0||(nl&1073741824)!==0&&(mn&261930)===0?($a=!0,m.memoizedState=b):(m=Y5(),tn.lanes|=m,jc|=m,g)}function QO(m,g,b,C,D){var $=te.p;te.p=$!==0&&8>$?$:8;var J=Q.T,we={};Q.T=we,EC(m,!1,g,b);try{var He=D(),st=Q.S;if(st!==null&&st(we,He),He!==null&&typeof He=="object"&&typeof He.then=="function"){var ft=bte(He,C);zh(m,g,ft,Lr(m))}else zh(m,g,C,Lr(m))}catch(xt){zh(m,g,{then:function(){},status:"rejected",reason:xt},Lr())}finally{te.p=$,J!==null&&we.types!==null&&(J.types=we.types),Q.T=J}}function Ste(){}function AC(m,g,b,C){if(m.tag!==5)throw Error(s(476));var D=KO(m).queue;QO(m,D,g,W,b===null?Ste:function(){return XO(m),b(C)})}function KO(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:W},next:null};var b={};return g.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:b},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function XO(m){var g=KO(m);g.next===null&&(g=m.alternate.memoizedState),zh(m,g.next.queue,{},Lr())}function TC(){return ws(ng)}function ZO(){return Ea().memoizedState}function JO(){return Ea().memoizedState}function _te(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var b=Lr();m=xc(b);var C=yc(g,m,b);C!==null&&(sr(C,g,b),Oh(C,g,b)),g={cache:aC()},m.payload=g;return}g=g.return}}function Ate(m,g,b){var C=Lr();b={lane:C,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Z0(m)?t5(g,b):(b=W1(m,g,b,C),b!==null&&(sr(b,m,C),n5(b,g,C)))}function e5(m,g,b){var C=Lr();zh(m,g,b,C)}function zh(m,g,b,C){var D={lane:C,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(Z0(m))t5(g,D);else{var $=m.alternate;if(m.lanes===0&&($===null||$.lanes===0)&&($=g.lastRenderedReducer,$!==null))try{var J=g.lastRenderedState,we=$(J,b);if(D.hasEagerState=!0,D.eagerState=we,Sr(we,J))return P0(m,g,D,0),Hn===null&&L0(),!1}catch{}if(b=W1(m,g,D,C),b!==null)return sr(b,m,C),n5(b,g,C),!0}return!1}function EC(m,g,b,C){if(C={lane:2,revertLane:oS(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},Z0(m)){if(g)throw Error(s(479))}else g=W1(m,b,C,2),g!==null&&sr(g,m,2)}function Z0(m){var g=m.alternate;return m===tn||g!==null&&g===tn}function t5(m,g){Sm=G0=!0;var b=m.pending;b===null?g.next=g:(g.next=b.next,b.next=g),m.pending=g}function n5(m,g,b){if((b&4194048)!==0){var C=g.lanes;C&=m.pendingLanes,b|=C,g.lanes=b,xe(m,b)}}var Fh={readContext:ws,use:Y0,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useLayoutEffect:ya,useInsertionEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useDeferredValue:ya,useTransition:ya,useSyncExternalStore:ya,useId:ya,useHostTransitionStatus:ya,useFormState:ya,useActionState:ya,useOptimistic:ya,useMemoCache:ya,useCacheRefresh:ya};Fh.useEffectEvent=ya;var a5={readContext:ws,use:Y0,useCallback:function(m,g){return Bs().memoizedState=[m,g===void 0?null:g],m},useContext:ws,useEffect:FO,useImperativeHandle:function(m,g,b){b=b!=null?b.concat([m]):null,K0(4194308,4,qO.bind(null,g,m),b)},useLayoutEffect:function(m,g){return K0(4194308,4,m,g)},useInsertionEffect:function(m,g){K0(4,2,m,g)},useMemo:function(m,g){var b=Bs();g=g===void 0?null:g;var C=m();if(Ud){Qe(!0);try{m()}finally{Qe(!1)}}return b.memoizedState=[C,g],C},useReducer:function(m,g,b){var C=Bs();if(b!==void 0){var D=b(g);if(Ud){Qe(!0);try{b(g)}finally{Qe(!1)}}}else D=g;return C.memoizedState=C.baseState=D,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:D},C.queue=m,m=m.dispatch=Ate.bind(null,tn,m),[C.memoizedState,m]},useRef:function(m){var g=Bs();return m={current:m},g.memoizedState=m},useState:function(m){m=NC(m);var g=m.queue,b=e5.bind(null,tn,g);return g.dispatch=b,[m.memoizedState,b]},useDebugValue:SC,useDeferredValue:function(m,g){var b=Bs();return _C(b,m,g)},useTransition:function(){var m=NC(!1);return m=QO.bind(null,tn,m.queue,!0,!1),Bs().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,b){var C=tn,D=Bs();if(pn){if(b===void 0)throw Error(s(407));b=b()}else{if(b=g(),Hn===null)throw Error(s(349));(mn&127)!==0||CO(C,g,b)}D.memoizedState=b;var $={value:b,getSnapshot:g};return D.queue=$,FO(_O.bind(null,C,$,m),[m]),C.flags|=2048,Am(9,{destroy:void 0},SO.bind(null,C,$,b,g),null),b},useId:function(){var m=Bs(),g=Hn.identifierPrefix;if(pn){var b=no,C=to;b=(C&~(1<<32-nt(C)-1)).toString(32)+b,g="_"+g+"R_"+b,b=W0++,0<b&&(g+="H"+b.toString(32)),g+="_"}else b=vte++,g="_"+g+"r_"+b.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:TC,useFormState:MO,useActionState:MO,useOptimistic:function(m){var g=Bs();g.memoizedState=g.baseState=m;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=b,g=EC.bind(null,tn,!0,b),b.dispatch=g,[m,g]},useMemoCache:bC,useCacheRefresh:function(){return Bs().memoizedState=_te.bind(null,tn)},useEffectEvent:function(m){var g=Bs(),b={impl:m};return g.memoizedState=b,function(){if((Cn&2)!==0)throw Error(s(440));return b.impl.apply(void 0,arguments)}}},kC={readContext:ws,use:Y0,useCallback:WO,useContext:ws,useEffect:CC,useImperativeHandle:GO,useInsertionEffect:BO,useLayoutEffect:HO,useMemo:VO,useReducer:Q0,useRef:zO,useState:function(){return Q0(al)},useDebugValue:SC,useDeferredValue:function(m,g){var b=Ea();return YO(b,Rn.memoizedState,m,g)},useTransition:function(){var m=Q0(al)[0],g=Ea().memoizedState;return[typeof m=="boolean"?m:Rh(m),g]},useSyncExternalStore:jO,useId:ZO,useHostTransitionStatus:TC,useFormState:IO,useActionState:IO,useOptimistic:function(m,g){var b=Ea();return EO(b,Rn,m,g)},useMemoCache:bC,useCacheRefresh:JO};kC.useEffectEvent=UO;var s5={readContext:ws,use:Y0,useCallback:WO,useContext:ws,useEffect:CC,useImperativeHandle:GO,useInsertionEffect:BO,useLayoutEffect:HO,useMemo:VO,useReducer:wC,useRef:zO,useState:function(){return wC(al)},useDebugValue:SC,useDeferredValue:function(m,g){var b=Ea();return Rn===null?_C(b,m,g):YO(b,Rn.memoizedState,m,g)},useTransition:function(){var m=wC(al)[0],g=Ea().memoizedState;return[typeof m=="boolean"?m:Rh(m),g]},useSyncExternalStore:jO,useId:ZO,useHostTransitionStatus:TC,useFormState:RO,useActionState:RO,useOptimistic:function(m,g){var b=Ea();return Rn!==null?EO(b,Rn,m,g):(b.baseState=m,[m,b.queue.dispatch])},useMemoCache:bC,useCacheRefresh:JO};s5.useEffectEvent=UO;function LC(m,g,b,C){g=m.memoizedState,b=b(C,g),b=b==null?g:f({},g,b),m.memoizedState=b,m.lanes===0&&(m.updateQueue.baseState=b)}var PC={enqueueSetState:function(m,g,b){m=m._reactInternals;var C=Lr(),D=xc(C);D.payload=g,b!=null&&(D.callback=b),g=yc(m,D,C),g!==null&&(sr(g,m,C),Oh(g,m,C))},enqueueReplaceState:function(m,g,b){m=m._reactInternals;var C=Lr(),D=xc(C);D.tag=1,D.payload=g,b!=null&&(D.callback=b),g=yc(m,D,C),g!==null&&(sr(g,m,C),Oh(g,m,C))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var b=Lr(),C=xc(b);C.tag=2,g!=null&&(C.callback=g),g=yc(m,C,b),g!==null&&(sr(g,m,b),Oh(g,m,b))}};function r5(m,g,b,C,D,$,J){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(C,$,J):g.prototype&&g.prototype.isPureReactComponent?!_h(b,C)||!_h(D,$):!0}function i5(m,g,b,C){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(b,C),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(b,C),g.state!==m&&PC.enqueueReplaceState(g,g.state,null)}function Bd(m,g){var b=g;if("ref"in g){b={};for(var C in g)C!=="ref"&&(b[C]=g[C])}if(m=m.defaultProps){b===g&&(b=f({},b));for(var D in m)b[D]===void 0&&(b[D]=m[D])}return b}function o5(m){k0(m)}function l5(m){console.error(m)}function c5(m){k0(m)}function J0(m,g){try{var b=m.onUncaughtError;b(g.value,{componentStack:g.stack})}catch(C){setTimeout(function(){throw C})}}function d5(m,g,b){try{var C=m.onCaughtError;C(b.value,{componentStack:b.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function DC(m,g,b){return b=xc(b),b.tag=3,b.payload={element:null},b.callback=function(){J0(m,g)},b}function u5(m){return m=xc(m),m.tag=3,m}function m5(m,g,b,C){var D=b.type.getDerivedStateFromError;if(typeof D=="function"){var $=C.value;m.payload=function(){return D($)},m.callback=function(){d5(g,b,C)}}var J=b.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(m.callback=function(){d5(g,b,C),typeof D!="function"&&(Cc===null?Cc=new Set([this]):Cc.add(this));var we=C.stack;this.componentDidCatch(C.value,{componentStack:we!==null?we:""})})}function Tte(m,g,b,C,D){if(b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(g=b.alternate,g!==null&&bm(g,b,D,!0),b=Ar.current,b!==null){switch(b.tag){case 31:case 13:return Jr===null?uy():b.alternate===null&&ba===0&&(ba=3),b.flags&=-257,b.flags|=65536,b.lanes=D,C===F0?b.flags|=16384:(g=b.updateQueue,g===null?b.updateQueue=new Set([C]):g.add(C),sS(m,C,D)),!1;case 22:return b.flags|=65536,C===F0?b.flags|=16384:(g=b.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([C])},b.updateQueue=g):(b=g.retryQueue,b===null?g.retryQueue=new Set([C]):b.add(C)),sS(m,C,D)),!1}throw Error(s(435,b.tag))}return sS(m,C,D),uy(),!1}if(pn)return g=Ar.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=D,C!==Z1&&(m=Error(s(422),{cause:C}),Eh(Qr(m,b)))):(C!==Z1&&(g=Error(s(423),{cause:C}),Eh(Qr(g,b))),m=m.current.alternate,m.flags|=65536,D&=-D,m.lanes|=D,C=Qr(C,b),D=DC(m.stateNode,C,D),cC(m,D),ba!==4&&(ba=2)),!1;var $=Error(s(520),{cause:C});if($=Qr($,b),Yh===null?Yh=[$]:Yh.push($),ba!==4&&(ba=2),g===null)return!0;C=Qr(C,b),b=g;do{switch(b.tag){case 3:return b.flags|=65536,m=D&-D,b.lanes|=m,m=DC(b.stateNode,C,m),cC(b,m),!1;case 1:if(g=b.type,$=b.stateNode,(b.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Cc===null||!Cc.has($))))return b.flags|=65536,D&=-D,b.lanes|=D,D=u5(D),m5(D,m,b,C),cC(b,D),!1}b=b.return}while(b!==null);return!1}var OC=Error(s(461)),$a=!1;function Ns(m,g,b,C){g.child=m===null?pO(g,null,b,C):Fd(g,m.child,b,C)}function f5(m,g,b,C,D){b=b.render;var $=g.ref;if("ref"in C){var J={};for(var we in C)we!=="ref"&&(J[we]=C[we])}else J=C;return Id(g),C=gC(m,g,b,J,$,D),we=pC(),m!==null&&!$a?(xC(m,g,D),sl(m,g,D)):(pn&&we&&K1(g),g.flags|=1,Ns(m,g,C,D),g.child)}function h5(m,g,b,C,D){if(m===null){var $=b.type;return typeof $=="function"&&!V1($)&&$.defaultProps===void 0&&b.compare===null?(g.tag=15,g.type=$,g5(m,g,$,C,D)):(m=O0(b.type,null,C,g,g.mode,D),m.ref=g.ref,m.return=g,g.child=m)}if($=m.child,!BC(m,D)){var J=$.memoizedProps;if(b=b.compare,b=b!==null?b:_h,b(J,C)&&m.ref===g.ref)return sl(m,g,D)}return g.flags|=1,m=Zo($,C),m.ref=g.ref,m.return=g,g.child=m}function g5(m,g,b,C,D){if(m!==null){var $=m.memoizedProps;if(_h($,C)&&m.ref===g.ref)if($a=!1,g.pendingProps=C=$,BC(m,D))(m.flags&131072)!==0&&($a=!0);else return g.lanes=m.lanes,sl(m,g,D)}return MC(m,g,b,C,D)}function p5(m,g,b,C){var D=C.children,$=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((g.flags&128)!==0){if($=$!==null?$.baseLanes|b:b,m!==null){for(C=g.child=m.child,D=0;C!==null;)D=D|C.lanes|C.childLanes,C=C.sibling;C=D&~$}else C=0,g.child=null;return x5(m,g,$,b,C)}if((b&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&R0(g,$!==null?$.cachePool:null),$!==null?bO(g,$):uC(),vO(g);else return C=g.lanes=536870912,x5(m,g,$!==null?$.baseLanes|b:b,b,C)}else $!==null?(R0(g,$.cachePool),bO(g,$),vc(),g.memoizedState=null):(m!==null&&R0(g,null),uC(),vc());return Ns(m,g,D,b),g.child}function Uh(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function x5(m,g,b,C,D){var $=rC();return $=$===null?null:{parent:Ma._currentValue,pool:$},g.memoizedState={baseLanes:b,cachePool:$},m!==null&&R0(g,null),uC(),vO(g),m!==null&&bm(m,g,C,!0),g.childLanes=D,null}function ey(m,g){return g=ny({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function y5(m,g,b){return Fd(g,m.child,null,b),m=ey(g,g.pendingProps),m.flags|=2,Tr(g),g.memoizedState=null,m}function Ete(m,g,b){var C=g.pendingProps,D=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(pn){if(C.mode==="hidden")return m=ey(g,C),g.lanes=536870912,Uh(null,m);if(fC(g),(m=Xn)?(m=kM(m,Zr),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:mc!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},b=tO(m),b.return=g,g.child=b,vs=g,Xn=null)):m=null,m===null)throw hc(g);return g.lanes=536870912,null}return ey(g,C)}var $=m.memoizedState;if($!==null){var J=$.dehydrated;if(fC(g),D)if(g.flags&256)g.flags&=-257,g=y5(m,g,b);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if($a||bm(m,g,b,!1),D=(b&m.childLanes)!==0,$a||D){if(C=Hn,C!==null&&(J=Ie(C,b),J!==0&&J!==$.retryLane))throw $.retryLane=J,Pd(m,J),sr(C,m,J),OC;uy(),g=y5(m,g,b)}else m=$.treeContext,Xn=ei(J.nextSibling),vs=g,pn=!0,fc=null,Zr=!1,m!==null&&sO(g,m),g=ey(g,C),g.flags|=4096;return g}return m=Zo(m.child,{mode:C.mode,children:C.children}),m.ref=g.ref,g.child=m,m.return=g,m}function ty(m,g){var b=g.ref;if(b===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(s(284));(m===null||m.ref!==b)&&(g.flags|=4194816)}}function MC(m,g,b,C,D){return Id(g),b=gC(m,g,b,C,void 0,D),C=pC(),m!==null&&!$a?(xC(m,g,D),sl(m,g,D)):(pn&&C&&K1(g),g.flags|=1,Ns(m,g,b,D),g.child)}function b5(m,g,b,C,D,$){return Id(g),g.updateQueue=null,b=NO(g,C,b,D),wO(m),C=pC(),m!==null&&!$a?(xC(m,g,$),sl(m,g,$)):(pn&&C&&K1(g),g.flags|=1,Ns(m,g,b,$),g.child)}function v5(m,g,b,C,D){if(Id(g),g.stateNode===null){var $=gm,J=b.contextType;typeof J=="object"&&J!==null&&($=ws(J)),$=new b(C,$),g.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=PC,g.stateNode=$,$._reactInternals=g,$=g.stateNode,$.props=C,$.state=g.memoizedState,$.refs={},oC(g),J=b.contextType,$.context=typeof J=="object"&&J!==null?ws(J):gm,$.state=g.memoizedState,J=b.getDerivedStateFromProps,typeof J=="function"&&(LC(g,b,J,C),$.state=g.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(J=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),J!==$.state&&PC.enqueueReplaceState($,$.state,null),Ih(g,C,$,D),Mh(),$.state=g.memoizedState),typeof $.componentDidMount=="function"&&(g.flags|=4194308),C=!0}else if(m===null){$=g.stateNode;var we=g.memoizedProps,He=Bd(b,we);$.props=He;var st=$.context,ft=b.contextType;J=gm,typeof ft=="object"&&ft!==null&&(J=ws(ft));var xt=b.getDerivedStateFromProps;ft=typeof xt=="function"||typeof $.getSnapshotBeforeUpdate=="function",we=g.pendingProps!==we,ft||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(we||st!==J)&&i5(g,$,C,J),pc=!1;var lt=g.memoizedState;$.state=lt,Ih(g,C,$,D),Mh(),st=g.memoizedState,we||lt!==st||pc?(typeof xt=="function"&&(LC(g,b,xt,C),st=g.memoizedState),(He=pc||r5(g,b,He,C,lt,st,J))?(ft||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(g.flags|=4194308)):(typeof $.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=C,g.memoizedState=st),$.props=C,$.state=st,$.context=J,C=He):(typeof $.componentDidMount=="function"&&(g.flags|=4194308),C=!1)}else{$=g.stateNode,lC(m,g),J=g.memoizedProps,ft=Bd(b,J),$.props=ft,xt=g.pendingProps,lt=$.context,st=b.contextType,He=gm,typeof st=="object"&&st!==null&&(He=ws(st)),we=b.getDerivedStateFromProps,(st=typeof we=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(J!==xt||lt!==He)&&i5(g,$,C,He),pc=!1,lt=g.memoizedState,$.state=lt,Ih(g,C,$,D),Mh();var ut=g.memoizedState;J!==xt||lt!==ut||pc||m!==null&&m.dependencies!==null&&I0(m.dependencies)?(typeof we=="function"&&(LC(g,b,we,C),ut=g.memoizedState),(ft=pc||r5(g,b,ft,C,lt,ut,He)||m!==null&&m.dependencies!==null&&I0(m.dependencies))?(st||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(C,ut,He),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(C,ut,He)),typeof $.componentDidUpdate=="function"&&(g.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof $.componentDidUpdate!="function"||J===m.memoizedProps&&lt===m.memoizedState||(g.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||J===m.memoizedProps&&lt===m.memoizedState||(g.flags|=1024),g.memoizedProps=C,g.memoizedState=ut),$.props=C,$.state=ut,$.context=He,C=ft):(typeof $.componentDidUpdate!="function"||J===m.memoizedProps&&lt===m.memoizedState||(g.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||J===m.memoizedProps&&lt===m.memoizedState||(g.flags|=1024),C=!1)}return $=C,ty(m,g),C=(g.flags&128)!==0,$||C?($=g.stateNode,b=C&&typeof b.getDerivedStateFromError!="function"?null:$.render(),g.flags|=1,m!==null&&C?(g.child=Fd(g,m.child,null,D),g.child=Fd(g,null,b,D)):Ns(m,g,b,D),g.memoizedState=$.state,m=g.child):m=sl(m,g,D),m}function w5(m,g,b,C){return Od(),g.flags|=256,Ns(m,g,b,C),g.child}var IC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $C(m){return{baseLanes:m,cachePool:dO()}}function RC(m,g,b){return m=m!==null?m.childLanes&~b:0,g&&(m|=kr),m}function N5(m,g,b){var C=g.pendingProps,D=!1,$=(g.flags&128)!==0,J;if((J=$)||(J=m!==null&&m.memoizedState===null?!1:(Ta.current&2)!==0),J&&(D=!0,g.flags&=-129),J=(g.flags&32)!==0,g.flags&=-33,m===null){if(pn){if(D?bc(g):vc(),(m=Xn)?(m=kM(m,Zr),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:mc!==null?{id:to,overflow:no}:null,retryLane:536870912,hydrationErrors:null},b=tO(m),b.return=g,g.child=b,vs=g,Xn=null)):m=null,m===null)throw hc(g);return vS(m)?g.lanes=32:g.lanes=536870912,null}var we=C.children;return C=C.fallback,D?(vc(),D=g.mode,we=ny({mode:"hidden",children:we},D),C=Dd(C,D,b,null),we.return=g,C.return=g,we.sibling=C,g.child=we,C=g.child,C.memoizedState=$C(b),C.childLanes=RC(m,J,b),g.memoizedState=IC,Uh(null,C)):(bc(g),zC(g,we))}var He=m.memoizedState;if(He!==null&&(we=He.dehydrated,we!==null)){if($)g.flags&256?(bc(g),g.flags&=-257,g=FC(m,g,b)):g.memoizedState!==null?(vc(),g.child=m.child,g.flags|=128,g=null):(vc(),we=C.fallback,D=g.mode,C=ny({mode:"visible",children:C.children},D),we=Dd(we,D,b,null),we.flags|=2,C.return=g,we.return=g,C.sibling=we,g.child=C,Fd(g,m.child,null,b),C=g.child,C.memoizedState=$C(b),C.childLanes=RC(m,J,b),g.memoizedState=IC,g=Uh(null,C));else if(bc(g),vS(we)){if(J=we.nextSibling&&we.nextSibling.dataset,J)var st=J.dgst;J=st,C=Error(s(419)),C.stack="",C.digest=J,Eh({value:C,source:null,stack:null}),g=FC(m,g,b)}else if($a||bm(m,g,b,!1),J=(b&m.childLanes)!==0,$a||J){if(J=Hn,J!==null&&(C=Ie(J,b),C!==0&&C!==He.retryLane))throw He.retryLane=C,Pd(m,C),sr(J,m,C),OC;bS(we)||uy(),g=FC(m,g,b)}else bS(we)?(g.flags|=192,g.child=m.child,g=null):(m=He.treeContext,Xn=ei(we.nextSibling),vs=g,pn=!0,fc=null,Zr=!1,m!==null&&sO(g,m),g=zC(g,C.children),g.flags|=4096);return g}return D?(vc(),we=C.fallback,D=g.mode,He=m.child,st=He.sibling,C=Zo(He,{mode:"hidden",children:C.children}),C.subtreeFlags=He.subtreeFlags&65011712,st!==null?we=Zo(st,we):(we=Dd(we,D,b,null),we.flags|=2),we.return=g,C.return=g,C.sibling=we,g.child=C,Uh(null,C),C=g.child,we=m.child.memoizedState,we===null?we=$C(b):(D=we.cachePool,D!==null?(He=Ma._currentValue,D=D.parent!==He?{parent:He,pool:He}:D):D=dO(),we={baseLanes:we.baseLanes|b,cachePool:D}),C.memoizedState=we,C.childLanes=RC(m,J,b),g.memoizedState=IC,Uh(m.child,C)):(bc(g),b=m.child,m=b.sibling,b=Zo(b,{mode:"visible",children:C.children}),b.return=g,b.sibling=null,m!==null&&(J=g.deletions,J===null?(g.deletions=[m],g.flags|=16):J.push(m)),g.child=b,g.memoizedState=null,b)}function zC(m,g){return g=ny({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function ny(m,g){return m=_r(22,m,null,g),m.lanes=0,m}function FC(m,g,b){return Fd(g,m.child,null,b),m=zC(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function j5(m,g,b){m.lanes|=g;var C=m.alternate;C!==null&&(C.lanes|=g),tC(m.return,g,b)}function UC(m,g,b,C,D,$){var J=m.memoizedState;J===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:D,treeForkCount:$}:(J.isBackwards=g,J.rendering=null,J.renderingStartTime=0,J.last=C,J.tail=b,J.tailMode=D,J.treeForkCount=$)}function C5(m,g,b){var C=g.pendingProps,D=C.revealOrder,$=C.tail;C=C.children;var J=Ta.current,we=(J&2)!==0;if(we?(J=J&1|2,g.flags|=128):J&=1,pe(Ta,J),Ns(m,g,C,b),C=pn?Th:0,!we&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&j5(m,b,g);else if(m.tag===19)j5(m,b,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(D){case"forwards":for(b=g.child,D=null;b!==null;)m=b.alternate,m!==null&&q0(m)===null&&(D=b),b=b.sibling;b=D,b===null?(D=g.child,g.child=null):(D=b.sibling,b.sibling=null),UC(g,!1,D,b,$,C);break;case"backwards":case"unstable_legacy-backwards":for(b=null,D=g.child,g.child=null;D!==null;){if(m=D.alternate,m!==null&&q0(m)===null){g.child=D;break}m=D.sibling,D.sibling=b,b=D,D=m}UC(g,!0,b,null,$,C);break;case"together":UC(g,!1,null,null,void 0,C);break;default:g.memoizedState=null}return g.child}function sl(m,g,b){if(m!==null&&(g.dependencies=m.dependencies),jc|=g.lanes,(b&g.childLanes)===0)if(m!==null){if(bm(m,g,b,!1),(b&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,b=Zo(m,m.pendingProps),g.child=b,b.return=g;m.sibling!==null;)m=m.sibling,b=b.sibling=Zo(m,m.pendingProps),b.return=g;b.sibling=null}return g.child}function BC(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&I0(m)))}function kte(m,g,b){switch(g.tag){case 3:De(g,g.stateNode.containerInfo),gc(g,Ma,m.memoizedState.cache),Od();break;case 27:case 5:ke(g);break;case 4:De(g,g.stateNode.containerInfo);break;case 10:gc(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,fC(g),null;break;case 13:var C=g.memoizedState;if(C!==null)return C.dehydrated!==null?(bc(g),g.flags|=128,null):(b&g.child.childLanes)!==0?N5(m,g,b):(bc(g),m=sl(m,g,b),m!==null?m.sibling:null);bc(g);break;case 19:var D=(m.flags&128)!==0;if(C=(b&g.childLanes)!==0,C||(bm(m,g,b,!1),C=(b&g.childLanes)!==0),D){if(C)return C5(m,g,b);g.flags|=128}if(D=g.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),pe(Ta,Ta.current),C)break;return null;case 22:return g.lanes=0,p5(m,g,b,g.pendingProps);case 24:gc(g,Ma,m.memoizedState.cache)}return sl(m,g,b)}function S5(m,g,b){if(m!==null)if(m.memoizedProps!==g.pendingProps)$a=!0;else{if(!BC(m,b)&&(g.flags&128)===0)return $a=!1,kte(m,g,b);$a=(m.flags&131072)!==0}else $a=!1,pn&&(g.flags&1048576)!==0&&aO(g,Th,g.index);switch(g.lanes=0,g.tag){case 16:e:{var C=g.pendingProps;if(m=Rd(g.elementType),g.type=m,typeof m=="function")V1(m)?(C=Bd(m,C),g.tag=1,g=v5(null,g,m,C,b)):(g.tag=0,g=MC(null,g,m,C,b));else{if(m!=null){var D=m.$$typeof;if(D===A){g.tag=11,g=f5(null,g,m,C,b);break e}else if(D===L){g.tag=14,g=h5(null,g,m,C,b);break e}}throw g=B(m)||m,Error(s(306,g,""))}}return g;case 0:return MC(m,g,g.type,g.pendingProps,b);case 1:return C=g.type,D=Bd(C,g.pendingProps),v5(m,g,C,D,b);case 3:e:{if(De(g,g.stateNode.containerInfo),m===null)throw Error(s(387));C=g.pendingProps;var $=g.memoizedState;D=$.element,lC(m,g),Ih(g,C,null,b);var J=g.memoizedState;if(C=J.cache,gc(g,Ma,C),C!==$.cache&&nC(g,[Ma],b,!0),Mh(),C=J.element,$.isDehydrated)if($={element:C,isDehydrated:!1,cache:J.cache},g.updateQueue.baseState=$,g.memoizedState=$,g.flags&256){g=w5(m,g,C,b);break e}else if(C!==D){D=Qr(Error(s(424)),g),Eh(D),g=w5(m,g,C,b);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,Xn=ei(m.firstChild),vs=g,pn=!0,fc=null,Zr=!0,b=pO(g,null,C,b),g.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Od(),C===D){g=sl(m,g,b);break e}Ns(m,g,C,b)}g=g.child}return g;case 26:return ty(m,g),m===null?(b=IM(g.type,null,g.pendingProps,null))?g.memoizedState=b:pn||(b=g.type,m=g.pendingProps,C=yy(ye.current).createElement(b),C[Yt]=g,C[rn]=m,js(C,b,m),Xe(C),g.stateNode=C):g.memoizedState=IM(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return ke(g),m===null&&pn&&(C=g.stateNode=DM(g.type,g.pendingProps,ye.current),vs=g,Zr=!0,D=Xn,Tc(g.type)?(wS=D,Xn=ei(C.firstChild)):Xn=D),Ns(m,g,g.pendingProps.children,b),ty(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&pn&&((D=C=Xn)&&(C=ine(C,g.type,g.pendingProps,Zr),C!==null?(g.stateNode=C,vs=g,Xn=ei(C.firstChild),Zr=!1,D=!0):D=!1),D||hc(g)),ke(g),D=g.type,$=g.pendingProps,J=m!==null?m.memoizedProps:null,C=$.children,pS(D,$)?C=null:J!==null&&pS(D,J)&&(g.flags|=32),g.memoizedState!==null&&(D=gC(m,g,wte,null,null,b),ng._currentValue=D),ty(m,g),Ns(m,g,C,b),g.child;case 6:return m===null&&pn&&((m=b=Xn)&&(b=one(b,g.pendingProps,Zr),b!==null?(g.stateNode=b,vs=g,Xn=null,m=!0):m=!1),m||hc(g)),null;case 13:return N5(m,g,b);case 4:return De(g,g.stateNode.containerInfo),C=g.pendingProps,m===null?g.child=Fd(g,null,C,b):Ns(m,g,C,b),g.child;case 11:return f5(m,g,g.type,g.pendingProps,b);case 7:return Ns(m,g,g.pendingProps,b),g.child;case 8:return Ns(m,g,g.pendingProps.children,b),g.child;case 12:return Ns(m,g,g.pendingProps.children,b),g.child;case 10:return C=g.pendingProps,gc(g,g.type,C.value),Ns(m,g,C.children,b),g.child;case 9:return D=g.type._context,C=g.pendingProps.children,Id(g),D=ws(D),C=C(D),g.flags|=1,Ns(m,g,C,b),g.child;case 14:return h5(m,g,g.type,g.pendingProps,b);case 15:return g5(m,g,g.type,g.pendingProps,b);case 19:return C5(m,g,b);case 31:return Ete(m,g,b);case 22:return p5(m,g,b,g.pendingProps);case 24:return Id(g),C=ws(Ma),m===null?(D=rC(),D===null&&(D=Hn,$=aC(),D.pooledCache=$,$.refCount++,$!==null&&(D.pooledCacheLanes|=b),D=$),g.memoizedState={parent:C,cache:D},oC(g),gc(g,Ma,D)):((m.lanes&b)!==0&&(lC(m,g),Ih(g,null,null,b),Mh()),D=m.memoizedState,$=g.memoizedState,D.parent!==C?(D={parent:C,cache:C},g.memoizedState=D,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=D),gc(g,Ma,C)):(C=$.cache,gc(g,Ma,C),C!==D.cache&&nC(g,[Ma],b,!0))),Ns(m,g,g.pendingProps.children,b),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function rl(m){m.flags|=4}function HC(m,g,b,C,D){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(D&335544128)===D)if(m.stateNode.complete)m.flags|=8192;else if(Z5())m.flags|=8192;else throw zd=F0,iC}else m.flags&=-16777217}function _5(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!UM(g))if(Z5())m.flags|=8192;else throw zd=F0,iC}function ay(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?fe():536870912,m.lanes|=g,Lm|=g)}function Bh(m,g){if(!pn)switch(m.tailMode){case"hidden":g=m.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?m.tail=null:b.sibling=null;break;case"collapsed":b=m.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:C.sibling=null}}function Zn(m){var g=m.alternate!==null&&m.alternate.child===m.child,b=0,C=0;if(g)for(var D=m.child;D!==null;)b|=D.lanes|D.childLanes,C|=D.subtreeFlags&65011712,C|=D.flags&65011712,D.return=m,D=D.sibling;else for(D=m.child;D!==null;)b|=D.lanes|D.childLanes,C|=D.subtreeFlags,C|=D.flags,D.return=m,D=D.sibling;return m.subtreeFlags|=C,m.childLanes=b,g}function Lte(m,g,b){var C=g.pendingProps;switch(X1(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(g),null;case 1:return Zn(g),null;case 3:return b=g.stateNode,C=null,m!==null&&(C=m.memoizedState.cache),g.memoizedState.cache!==C&&(g.flags|=2048),tl(Ma),ve(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(m===null||m.child===null)&&(ym(g)?rl(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,J1())),Zn(g),null;case 26:var D=g.type,$=g.memoizedState;return m===null?(rl(g),$!==null?(Zn(g),_5(g,$)):(Zn(g),HC(g,D,null,C,b))):$?$!==m.memoizedState?(rl(g),Zn(g),_5(g,$)):(Zn(g),g.flags&=-16777217):(m=m.memoizedProps,m!==C&&rl(g),Zn(g),HC(g,D,m,C,b)),null;case 27:if(Ce(g),b=ye.current,D=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==C&&rl(g);else{if(!C){if(g.stateNode===null)throw Error(s(166));return Zn(g),null}m=Se.current,ym(g)?rO(g):(m=DM(D,C,b),g.stateNode=m,rl(g))}return Zn(g),null;case 5:if(Ce(g),D=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==C&&rl(g);else{if(!C){if(g.stateNode===null)throw Error(s(166));return Zn(g),null}if($=Se.current,ym(g))rO(g);else{var J=yy(ye.current);switch($){case 1:$=J.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:$=J.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":$=J.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":$=J.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":$=J.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild);break;case"select":$=typeof C.is=="string"?J.createElement("select",{is:C.is}):J.createElement("select"),C.multiple?$.multiple=!0:C.size&&($.size=C.size);break;default:$=typeof C.is=="string"?J.createElement(D,{is:C.is}):J.createElement(D)}}$[Yt]=g,$[rn]=C;e:for(J=g.child;J!==null;){if(J.tag===5||J.tag===6)$.appendChild(J.stateNode);else if(J.tag!==4&&J.tag!==27&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===g)break e;for(;J.sibling===null;){if(J.return===null||J.return===g)break e;J=J.return}J.sibling.return=J.return,J=J.sibling}g.stateNode=$;e:switch(js($,D,C),D){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&rl(g)}}return Zn(g),HC(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,b),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==C&&rl(g);else{if(typeof C!="string"&&g.stateNode===null)throw Error(s(166));if(m=ye.current,ym(g)){if(m=g.stateNode,b=g.memoizedProps,C=null,D=vs,D!==null)switch(D.tag){case 27:case 5:C=D.memoizedProps}m[Yt]=g,m=!!(m.nodeValue===b||C!==null&&C.suppressHydrationWarning===!0||NM(m.nodeValue,b)),m||hc(g,!0)}else m=yy(m).createTextNode(C),m[Yt]=g,g.stateNode=m}return Zn(g),null;case 31:if(b=g.memoizedState,m===null||m.memoizedState!==null){if(C=ym(g),b!==null){if(m===null){if(!C)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[Yt]=g}else Od(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Zn(g),m=!1}else b=J1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=b),m=!0;if(!m)return g.flags&256?(Tr(g),g):(Tr(g),null);if((g.flags&128)!==0)throw Error(s(558))}return Zn(g),null;case 13:if(C=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(D=ym(g),C!==null&&C.dehydrated!==null){if(m===null){if(!D)throw Error(s(318));if(D=g.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(s(317));D[Yt]=g}else Od(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Zn(g),D=!1}else D=J1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=D),D=!0;if(!D)return g.flags&256?(Tr(g),g):(Tr(g),null)}return Tr(g),(g.flags&128)!==0?(g.lanes=b,g):(b=C!==null,m=m!==null&&m.memoizedState!==null,b&&(C=g.child,D=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(D=C.alternate.memoizedState.cachePool.pool),$=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&($=C.memoizedState.cachePool.pool),$!==D&&(C.flags|=2048)),b!==m&&b&&(g.child.flags|=8192),ay(g,g.updateQueue),Zn(g),null);case 4:return ve(),m===null&&uS(g.stateNode.containerInfo),Zn(g),null;case 10:return tl(g.type),Zn(g),null;case 19:if(Y(Ta),C=g.memoizedState,C===null)return Zn(g),null;if(D=(g.flags&128)!==0,$=C.rendering,$===null)if(D)Bh(C,!1);else{if(ba!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if($=q0(m),$!==null){for(g.flags|=128,Bh(C,!1),m=$.updateQueue,g.updateQueue=m,ay(g,m),g.subtreeFlags=0,m=b,b=g.child;b!==null;)eO(b,m),b=b.sibling;return pe(Ta,Ta.current&1|2),pn&&Jo(g,C.treeForkCount),g.child}m=m.sibling}C.tail!==null&&je()>ly&&(g.flags|=128,D=!0,Bh(C,!1),g.lanes=4194304)}else{if(!D)if(m=q0($),m!==null){if(g.flags|=128,D=!0,m=m.updateQueue,g.updateQueue=m,ay(g,m),Bh(C,!0),C.tail===null&&C.tailMode==="hidden"&&!$.alternate&&!pn)return Zn(g),null}else 2*je()-C.renderingStartTime>ly&&b!==536870912&&(g.flags|=128,D=!0,Bh(C,!1),g.lanes=4194304);C.isBackwards?($.sibling=g.child,g.child=$):(m=C.last,m!==null?m.sibling=$:g.child=$,C.last=$)}return C.tail!==null?(m=C.tail,C.rendering=m,C.tail=m.sibling,C.renderingStartTime=je(),m.sibling=null,b=Ta.current,pe(Ta,D?b&1|2:b&1),pn&&Jo(g,C.treeForkCount),m):(Zn(g),null);case 22:case 23:return Tr(g),mC(),C=g.memoizedState!==null,m!==null?m.memoizedState!==null!==C&&(g.flags|=8192):C&&(g.flags|=8192),C?(b&536870912)!==0&&(g.flags&128)===0&&(Zn(g),g.subtreeFlags&6&&(g.flags|=8192)):Zn(g),b=g.updateQueue,b!==null&&ay(g,b.retryQueue),b=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(b=m.memoizedState.cachePool.pool),C=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==b&&(g.flags|=2048),m!==null&&Y($d),null;case 24:return b=null,m!==null&&(b=m.memoizedState.cache),g.memoizedState.cache!==b&&(g.flags|=2048),tl(Ma),Zn(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function Pte(m,g){switch(X1(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return tl(Ma),ve(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return Ce(g),null;case 31:if(g.memoizedState!==null){if(Tr(g),g.alternate===null)throw Error(s(340));Od()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(Tr(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Od()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return Y(Ta),null;case 4:return ve(),null;case 10:return tl(g.type),null;case 22:case 23:return Tr(g),mC(),m!==null&&Y($d),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return tl(Ma),null;case 25:return null;default:return null}}function A5(m,g){switch(X1(g),g.tag){case 3:tl(Ma),ve();break;case 26:case 27:case 5:Ce(g);break;case 4:ve();break;case 31:g.memoizedState!==null&&Tr(g);break;case 13:Tr(g);break;case 19:Y(Ta);break;case 10:tl(g.type);break;case 22:case 23:Tr(g),mC(),m!==null&&Y($d);break;case 24:tl(Ma)}}function Hh(m,g){try{var b=g.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var D=C.next;b=D;do{if((b.tag&m)===m){C=void 0;var $=b.create,J=b.inst;C=$(),J.destroy=C}b=b.next}while(b!==D)}}catch(we){Pn(g,g.return,we)}}function wc(m,g,b){try{var C=g.updateQueue,D=C!==null?C.lastEffect:null;if(D!==null){var $=D.next;C=$;do{if((C.tag&m)===m){var J=C.inst,we=J.destroy;if(we!==void 0){J.destroy=void 0,D=g;var He=b,st=we;try{st()}catch(ft){Pn(D,He,ft)}}}C=C.next}while(C!==$)}}catch(ft){Pn(g,g.return,ft)}}function T5(m){var g=m.updateQueue;if(g!==null){var b=m.stateNode;try{yO(g,b)}catch(C){Pn(m,m.return,C)}}}function E5(m,g,b){b.props=Bd(m.type,m.memoizedProps),b.state=m.memoizedState;try{b.componentWillUnmount()}catch(C){Pn(m,g,C)}}function qh(m,g){try{var b=m.ref;if(b!==null){switch(m.tag){case 26:case 27:case 5:var C=m.stateNode;break;case 30:C=m.stateNode;break;default:C=m.stateNode}typeof b=="function"?m.refCleanup=b(C):b.current=C}}catch(D){Pn(m,g,D)}}function ao(m,g){var b=m.ref,C=m.refCleanup;if(b!==null)if(typeof C=="function")try{C()}catch(D){Pn(m,g,D)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(D){Pn(m,g,D)}else b.current=null}function k5(m){var g=m.type,b=m.memoizedProps,C=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":b.autoFocus&&C.focus();break e;case"img":b.src?C.src=b.src:b.srcSet&&(C.srcset=b.srcSet)}}catch(D){Pn(m,m.return,D)}}function qC(m,g,b){try{var C=m.stateNode;ene(C,m.type,b,g),C[rn]=g}catch(D){Pn(m,m.return,D)}}function L5(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&Tc(m.type)||m.tag===4}function GC(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||L5(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&Tc(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function WC(m,g,b){var C=m.tag;if(C===5||C===6)m=m.stateNode,g?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(m,g):(g=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,g.appendChild(m),b=b._reactRootContainer,b!=null||g.onclick!==null||(g.onclick=Ko));else if(C!==4&&(C===27&&Tc(m.type)&&(b=m.stateNode,g=null),m=m.child,m!==null))for(WC(m,g,b),m=m.sibling;m!==null;)WC(m,g,b),m=m.sibling}function sy(m,g,b){var C=m.tag;if(C===5||C===6)m=m.stateNode,g?b.insertBefore(m,g):b.appendChild(m);else if(C!==4&&(C===27&&Tc(m.type)&&(b=m.stateNode),m=m.child,m!==null))for(sy(m,g,b),m=m.sibling;m!==null;)sy(m,g,b),m=m.sibling}function P5(m){var g=m.stateNode,b=m.memoizedProps;try{for(var C=m.type,D=g.attributes;D.length;)g.removeAttributeNode(D[0]);js(g,C,b),g[Yt]=m,g[rn]=b}catch($){Pn(m,m.return,$)}}var il=!1,Ra=!1,VC=!1,D5=typeof WeakSet=="function"?WeakSet:Set,cs=null;function Dte(m,g){if(m=m.containerInfo,hS=Sy,m=G3(m),F1(m)){if("selectionStart"in m)var b={start:m.selectionStart,end:m.selectionEnd};else e:{b=(b=m.ownerDocument)&&b.defaultView||window;var C=b.getSelection&&b.getSelection();if(C&&C.rangeCount!==0){b=C.anchorNode;var D=C.anchorOffset,$=C.focusNode;C=C.focusOffset;try{b.nodeType,$.nodeType}catch{b=null;break e}var J=0,we=-1,He=-1,st=0,ft=0,xt=m,lt=null;t:for(;;){for(var ut;xt!==b||D!==0&&xt.nodeType!==3||(we=J+D),xt!==$||C!==0&&xt.nodeType!==3||(He=J+C),xt.nodeType===3&&(J+=xt.nodeValue.length),(ut=xt.firstChild)!==null;)lt=xt,xt=ut;for(;;){if(xt===m)break t;if(lt===b&&++st===D&&(we=J),lt===$&&++ft===C&&(He=J),(ut=xt.nextSibling)!==null)break;xt=lt,lt=xt.parentNode}xt=ut}b=we===-1||He===-1?null:{start:we,end:He}}else b=null}b=b||{start:0,end:0}}else b=null;for(gS={focusedElem:m,selectionRange:b},Sy=!1,cs=g;cs!==null;)if(g=cs,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,cs=m;else for(;cs!==null;){switch(g=cs,$=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(b=0;b<m.length;b++)D=m[b],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&$!==null){m=void 0,b=g,D=$.memoizedProps,$=$.memoizedState,C=b.stateNode;try{var Mt=Bd(b.type,D);m=C.getSnapshotBeforeUpdate(Mt,$),C.__reactInternalSnapshotBeforeUpdate=m}catch(Wt){Pn(b,b.return,Wt)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,b=m.nodeType,b===9)yS(m);else if(b===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":yS(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,cs=m;break}cs=g.return}}function O5(m,g,b){var C=b.flags;switch(b.tag){case 0:case 11:case 15:ll(m,b),C&4&&Hh(5,b);break;case 1:if(ll(m,b),C&4)if(m=b.stateNode,g===null)try{m.componentDidMount()}catch(J){Pn(b,b.return,J)}else{var D=Bd(b.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(D,g,m.__reactInternalSnapshotBeforeUpdate)}catch(J){Pn(b,b.return,J)}}C&64&&T5(b),C&512&&qh(b,b.return);break;case 3:if(ll(m,b),C&64&&(m=b.updateQueue,m!==null)){if(g=null,b.child!==null)switch(b.child.tag){case 27:case 5:g=b.child.stateNode;break;case 1:g=b.child.stateNode}try{yO(m,g)}catch(J){Pn(b,b.return,J)}}break;case 27:g===null&&C&4&&P5(b);case 26:case 5:ll(m,b),g===null&&C&4&&k5(b),C&512&&qh(b,b.return);break;case 12:ll(m,b);break;case 31:ll(m,b),C&4&&$5(m,b);break;case 13:ll(m,b),C&4&&R5(m,b),C&64&&(m=b.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(b=Bte.bind(null,b),lne(m,b))));break;case 22:if(C=b.memoizedState!==null||il,!C){g=g!==null&&g.memoizedState!==null||Ra,D=il;var $=Ra;il=C,(Ra=g)&&!$?cl(m,b,(b.subtreeFlags&8772)!==0):ll(m,b),il=D,Ra=$}break;case 30:break;default:ll(m,b)}}function M5(m){var g=m.alternate;g!==null&&(m.alternate=null,M5(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&E(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var sa=null,er=!1;function ol(m,g,b){for(b=b.child;b!==null;)I5(m,g,b),b=b.sibling}function I5(m,g,b){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(Ae,b)}catch{}switch(b.tag){case 26:Ra||ao(b,g),ol(m,g,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Ra||ao(b,g);var C=sa,D=er;Tc(b.type)&&(sa=b.stateNode,er=!1),ol(m,g,b),Jh(b.stateNode),sa=C,er=D;break;case 5:Ra||ao(b,g);case 6:if(C=sa,D=er,sa=null,ol(m,g,b),sa=C,er=D,sa!==null)if(er)try{(sa.nodeType===9?sa.body:sa.nodeName==="HTML"?sa.ownerDocument.body:sa).removeChild(b.stateNode)}catch($){Pn(b,g,$)}else try{sa.removeChild(b.stateNode)}catch($){Pn(b,g,$)}break;case 18:sa!==null&&(er?(m=sa,TM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,b.stateNode),zm(m)):TM(sa,b.stateNode));break;case 4:C=sa,D=er,sa=b.stateNode.containerInfo,er=!0,ol(m,g,b),sa=C,er=D;break;case 0:case 11:case 14:case 15:wc(2,b,g),Ra||wc(4,b,g),ol(m,g,b);break;case 1:Ra||(ao(b,g),C=b.stateNode,typeof C.componentWillUnmount=="function"&&E5(b,g,C)),ol(m,g,b);break;case 21:ol(m,g,b);break;case 22:Ra=(C=Ra)||b.memoizedState!==null,ol(m,g,b),Ra=C;break;default:ol(m,g,b)}}function $5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{zm(m)}catch(b){Pn(g,g.return,b)}}}function R5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{zm(m)}catch(b){Pn(g,g.return,b)}}function Ote(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new D5),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new D5),g;default:throw Error(s(435,m.tag))}}function ry(m,g){var b=Ote(m);g.forEach(function(C){if(!b.has(C)){b.add(C);var D=Hte.bind(null,m,C);C.then(D,D)}})}function tr(m,g){var b=g.deletions;if(b!==null)for(var C=0;C<b.length;C++){var D=b[C],$=m,J=g,we=J;e:for(;we!==null;){switch(we.tag){case 27:if(Tc(we.type)){sa=we.stateNode,er=!1;break e}break;case 5:sa=we.stateNode,er=!1;break e;case 3:case 4:sa=we.stateNode.containerInfo,er=!0;break e}we=we.return}if(sa===null)throw Error(s(160));I5($,J,D),sa=null,er=!1,$=D.alternate,$!==null&&($.return=null),D.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)z5(g,m),g=g.sibling}var Li=null;function z5(m,g){var b=m.alternate,C=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:tr(g,m),nr(m),C&4&&(wc(3,m,m.return),Hh(3,m),wc(5,m,m.return));break;case 1:tr(g,m),nr(m),C&512&&(Ra||b===null||ao(b,b.return)),C&64&&il&&(m=m.updateQueue,m!==null&&(C=m.callbacks,C!==null&&(b=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=b===null?C:b.concat(C))));break;case 26:var D=Li;if(tr(g,m),nr(m),C&512&&(Ra||b===null||ao(b,b.return)),C&4){var $=b!==null?b.memoizedState:null;if(C=m.memoizedState,b===null)if(C===null)if(m.stateNode===null){e:{C=m.type,b=m.memoizedProps,D=D.ownerDocument||D;t:switch(C){case"title":$=D.getElementsByTagName("title")[0],(!$||$[P]||$[Yt]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=D.createElement(C),D.head.insertBefore($,D.querySelector("head > title"))),js($,C,b),$[Yt]=m,Xe($),C=$;break e;case"link":var J=zM("link","href",D).get(C+(b.href||""));if(J){for(var we=0;we<J.length;we++)if($=J[we],$.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&$.getAttribute("rel")===(b.rel==null?null:b.rel)&&$.getAttribute("title")===(b.title==null?null:b.title)&&$.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){J.splice(we,1);break t}}$=D.createElement(C),js($,C,b),D.head.appendChild($);break;case"meta":if(J=zM("meta","content",D).get(C+(b.content||""))){for(we=0;we<J.length;we++)if($=J[we],$.getAttribute("content")===(b.content==null?null:""+b.content)&&$.getAttribute("name")===(b.name==null?null:b.name)&&$.getAttribute("property")===(b.property==null?null:b.property)&&$.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&$.getAttribute("charset")===(b.charSet==null?null:b.charSet)){J.splice(we,1);break t}}$=D.createElement(C),js($,C,b),D.head.appendChild($);break;default:throw Error(s(468,C))}$[Yt]=m,Xe($),C=$}m.stateNode=C}else FM(D,m.type,m.stateNode);else m.stateNode=RM(D,C,m.memoizedProps);else $!==C?($===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):$.count--,C===null?FM(D,m.type,m.stateNode):RM(D,C,m.memoizedProps)):C===null&&m.stateNode!==null&&qC(m,m.memoizedProps,b.memoizedProps)}break;case 27:tr(g,m),nr(m),C&512&&(Ra||b===null||ao(b,b.return)),b!==null&&C&4&&qC(m,m.memoizedProps,b.memoizedProps);break;case 5:if(tr(g,m),nr(m),C&512&&(Ra||b===null||ao(b,b.return)),m.flags&32){D=m.stateNode;try{lm(D,"")}catch(Mt){Pn(m,m.return,Mt)}}C&4&&m.stateNode!=null&&(D=m.memoizedProps,qC(m,D,b!==null?b.memoizedProps:D)),C&1024&&(VC=!0);break;case 6:if(tr(g,m),nr(m),C&4){if(m.stateNode===null)throw Error(s(162));C=m.memoizedProps,b=m.stateNode;try{b.nodeValue=C}catch(Mt){Pn(m,m.return,Mt)}}break;case 3:if(wy=null,D=Li,Li=by(g.containerInfo),tr(g,m),Li=D,nr(m),C&4&&b!==null&&b.memoizedState.isDehydrated)try{zm(g.containerInfo)}catch(Mt){Pn(m,m.return,Mt)}VC&&(VC=!1,F5(m));break;case 4:C=Li,Li=by(m.stateNode.containerInfo),tr(g,m),nr(m),Li=C;break;case 12:tr(g,m),nr(m);break;case 31:tr(g,m),nr(m),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,ry(m,C)));break;case 13:tr(g,m),nr(m),m.child.flags&8192&&m.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(oy=je()),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,ry(m,C)));break;case 22:D=m.memoizedState!==null;var He=b!==null&&b.memoizedState!==null,st=il,ft=Ra;if(il=st||D,Ra=ft||He,tr(g,m),Ra=ft,il=st,nr(m),C&8192)e:for(g=m.stateNode,g._visibility=D?g._visibility&-2:g._visibility|1,D&&(b===null||He||il||Ra||Hd(m)),b=null,g=m;;){if(g.tag===5||g.tag===26){if(b===null){He=b=g;try{if($=He.stateNode,D)J=$.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{we=He.stateNode;var xt=He.memoizedProps.style,lt=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;we.style.display=lt==null||typeof lt=="boolean"?"":(""+lt).trim()}}catch(Mt){Pn(He,He.return,Mt)}}}else if(g.tag===6){if(b===null){He=g;try{He.stateNode.nodeValue=D?"":He.memoizedProps}catch(Mt){Pn(He,He.return,Mt)}}}else if(g.tag===18){if(b===null){He=g;try{var ut=He.stateNode;D?EM(ut,!0):EM(He.stateNode,!1)}catch(Mt){Pn(He,He.return,Mt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;b===g&&(b=null),g=g.return}b===g&&(b=null),g.sibling.return=g.return,g=g.sibling}C&4&&(C=m.updateQueue,C!==null&&(b=C.retryQueue,b!==null&&(C.retryQueue=null,ry(m,b))));break;case 19:tr(g,m),nr(m),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,ry(m,C)));break;case 30:break;case 21:break;default:tr(g,m),nr(m)}}function nr(m){var g=m.flags;if(g&2){try{for(var b,C=m.return;C!==null;){if(L5(C)){b=C;break}C=C.return}if(b==null)throw Error(s(160));switch(b.tag){case 27:var D=b.stateNode,$=GC(m);sy(m,$,D);break;case 5:var J=b.stateNode;b.flags&32&&(lm(J,""),b.flags&=-33);var we=GC(m);sy(m,we,J);break;case 3:case 4:var He=b.stateNode.containerInfo,st=GC(m);WC(m,st,He);break;default:throw Error(s(161))}}catch(ft){Pn(m,m.return,ft)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function F5(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;F5(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function ll(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)O5(m,g.alternate,g),g=g.sibling}function Hd(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:wc(4,g,g.return),Hd(g);break;case 1:ao(g,g.return);var b=g.stateNode;typeof b.componentWillUnmount=="function"&&E5(g,g.return,b),Hd(g);break;case 27:Jh(g.stateNode);case 26:case 5:ao(g,g.return),Hd(g);break;case 22:g.memoizedState===null&&Hd(g);break;case 30:Hd(g);break;default:Hd(g)}m=m.sibling}}function cl(m,g,b){for(b=b&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var C=g.alternate,D=m,$=g,J=$.flags;switch($.tag){case 0:case 11:case 15:cl(D,$,b),Hh(4,$);break;case 1:if(cl(D,$,b),C=$,D=C.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(st){Pn(C,C.return,st)}if(C=$,D=C.updateQueue,D!==null){var we=C.stateNode;try{var He=D.shared.hiddenCallbacks;if(He!==null)for(D.shared.hiddenCallbacks=null,D=0;D<He.length;D++)xO(He[D],we)}catch(st){Pn(C,C.return,st)}}b&&J&64&&T5($),qh($,$.return);break;case 27:P5($);case 26:case 5:cl(D,$,b),b&&C===null&&J&4&&k5($),qh($,$.return);break;case 12:cl(D,$,b);break;case 31:cl(D,$,b),b&&J&4&&$5(D,$);break;case 13:cl(D,$,b),b&&J&4&&R5(D,$);break;case 22:$.memoizedState===null&&cl(D,$,b),qh($,$.return);break;case 30:break;default:cl(D,$,b)}g=g.sibling}}function YC(m,g){var b=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(b=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==b&&(m!=null&&m.refCount++,b!=null&&kh(b))}function QC(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&kh(m))}function Pi(m,g,b,C){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)U5(m,g,b,C),g=g.sibling}function U5(m,g,b,C){var D=g.flags;switch(g.tag){case 0:case 11:case 15:Pi(m,g,b,C),D&2048&&Hh(9,g);break;case 1:Pi(m,g,b,C);break;case 3:Pi(m,g,b,C),D&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&kh(m)));break;case 12:if(D&2048){Pi(m,g,b,C),m=g.stateNode;try{var $=g.memoizedProps,J=$.id,we=$.onPostCommit;typeof we=="function"&&we(J,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(He){Pn(g,g.return,He)}}else Pi(m,g,b,C);break;case 31:Pi(m,g,b,C);break;case 13:Pi(m,g,b,C);break;case 23:break;case 22:$=g.stateNode,J=g.alternate,g.memoizedState!==null?$._visibility&2?Pi(m,g,b,C):Gh(m,g):$._visibility&2?Pi(m,g,b,C):($._visibility|=2,Tm(m,g,b,C,(g.subtreeFlags&10256)!==0||!1)),D&2048&&YC(J,g);break;case 24:Pi(m,g,b,C),D&2048&&QC(g.alternate,g);break;default:Pi(m,g,b,C)}}function Tm(m,g,b,C,D){for(D=D&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var $=m,J=g,we=b,He=C,st=J.flags;switch(J.tag){case 0:case 11:case 15:Tm($,J,we,He,D),Hh(8,J);break;case 23:break;case 22:var ft=J.stateNode;J.memoizedState!==null?ft._visibility&2?Tm($,J,we,He,D):Gh($,J):(ft._visibility|=2,Tm($,J,we,He,D)),D&&st&2048&&YC(J.alternate,J);break;case 24:Tm($,J,we,He,D),D&&st&2048&&QC(J.alternate,J);break;default:Tm($,J,we,He,D)}g=g.sibling}}function Gh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var b=m,C=g,D=C.flags;switch(C.tag){case 22:Gh(b,C),D&2048&&YC(C.alternate,C);break;case 24:Gh(b,C),D&2048&&QC(C.alternate,C);break;default:Gh(b,C)}g=g.sibling}}var Wh=8192;function Em(m,g,b){if(m.subtreeFlags&Wh)for(m=m.child;m!==null;)B5(m,g,b),m=m.sibling}function B5(m,g,b){switch(m.tag){case 26:Em(m,g,b),m.flags&Wh&&m.memoizedState!==null&&vne(b,Li,m.memoizedState,m.memoizedProps);break;case 5:Em(m,g,b);break;case 3:case 4:var C=Li;Li=by(m.stateNode.containerInfo),Em(m,g,b),Li=C;break;case 22:m.memoizedState===null&&(C=m.alternate,C!==null&&C.memoizedState!==null?(C=Wh,Wh=16777216,Em(m,g,b),Wh=C):Em(m,g,b));break;default:Em(m,g,b)}}function H5(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Vh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var b=0;b<g.length;b++){var C=g[b];cs=C,G5(C,m)}H5(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)q5(m),m=m.sibling}function q5(m){switch(m.tag){case 0:case 11:case 15:Vh(m),m.flags&2048&&wc(9,m,m.return);break;case 3:Vh(m);break;case 12:Vh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,iy(m)):Vh(m);break;default:Vh(m)}}function iy(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var b=0;b<g.length;b++){var C=g[b];cs=C,G5(C,m)}H5(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:wc(8,g,g.return),iy(g);break;case 22:b=g.stateNode,b._visibility&2&&(b._visibility&=-3,iy(g));break;default:iy(g)}m=m.sibling}}function G5(m,g){for(;cs!==null;){var b=cs;switch(b.tag){case 0:case 11:case 15:wc(8,b,g);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var C=b.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:kh(b.memoizedState.cache)}if(C=b.child,C!==null)C.return=b,cs=C;else e:for(b=m;cs!==null;){C=cs;var D=C.sibling,$=C.return;if(M5(C),C===b){cs=null;break e}if(D!==null){D.return=$,cs=D;break e}cs=$}}}var Mte={getCacheForType:function(m){var g=ws(Ma),b=g.data.get(m);return b===void 0&&(b=m(),g.data.set(m,b)),b},cacheSignal:function(){return ws(Ma).controller.signal}},Ite=typeof WeakMap=="function"?WeakMap:Map,Cn=0,Hn=null,cn=null,mn=0,Ln=0,Er=null,Nc=!1,km=!1,KC=!1,dl=0,ba=0,jc=0,qd=0,XC=0,kr=0,Lm=0,Yh=null,ar=null,ZC=!1,oy=0,W5=0,ly=1/0,cy=null,Cc=null,Ya=0,Sc=null,Pm=null,ul=0,JC=0,eS=null,V5=null,Qh=0,tS=null;function Lr(){return(Cn&2)!==0&&mn!==0?mn&-mn:Q.T!==null?oS():bt()}function Y5(){if(kr===0)if((mn&536870912)===0||pn){var m=ue;ue<<=1,(ue&3932160)===0&&(ue=262144),kr=m}else kr=536870912;return m=Ar.current,m!==null&&(m.flags|=32),kr}function sr(m,g,b){(m===Hn&&(Ln===2||Ln===9)||m.cancelPendingCommit!==null)&&(Dm(m,0),_c(m,mn,kr,!1)),K(m,b),((Cn&2)===0||m!==Hn)&&(m===Hn&&((Cn&2)===0&&(qd|=b),ba===4&&_c(m,mn,kr,!1)),so(m))}function Q5(m,g,b){if((Cn&6)!==0)throw Error(s(327));var C=!b&&(g&127)===0&&(g&m.expiredLanes)===0||Ne(m,g),D=C?zte(m,g):aS(m,g,!0),$=C;do{if(D===0){km&&!C&&_c(m,g,0,!1);break}else{if(b=m.current.alternate,$&&!$te(b)){D=aS(m,g,!1),$=!1;continue}if(D===2){if($=g,m.errorRecoveryDisabledLanes&$)var J=0;else J=m.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){g=J;e:{var we=m;D=Yh;var He=we.current.memoizedState.isDehydrated;if(He&&(Dm(we,J).flags|=256),J=aS(we,J,!1),J!==2){if(KC&&!He){we.errorRecoveryDisabledLanes|=$,qd|=$,D=4;break e}$=ar,ar=D,$!==null&&(ar===null?ar=$:ar.push.apply(ar,$))}D=J}if($=!1,D!==2)continue}}if(D===1){Dm(m,0),_c(m,g,0,!0);break}e:{switch(C=m,$=D,$){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:_c(C,g,kr,!Nc);break e;case 2:ar=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(D=oy+300-je(),10<D)){if(_c(C,g,kr,!Nc),G(C,0,!0)!==0)break e;ul=g,C.timeoutHandle=_M(K5.bind(null,C,b,ar,cy,ZC,g,kr,qd,Lm,Nc,$,"Throttled",-0,0),D);break e}K5(C,b,ar,cy,ZC,g,kr,qd,Lm,Nc,$,null,-0,0)}}break}while(!0);so(m)}function K5(m,g,b,C,D,$,J,we,He,st,ft,xt,lt,ut){if(m.timeoutHandle=-1,xt=g.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ko},B5(g,$,xt);var Mt=($&62914560)===$?oy-je():($&4194048)===$?W5-je():0;if(Mt=wne(xt,Mt),Mt!==null){ul=$,m.cancelPendingCommit=Mt(sM.bind(null,m,g,$,b,C,D,J,we,He,ft,xt,null,lt,ut)),_c(m,$,J,!st);return}}sM(m,g,$,b,C,D,J,we,He)}function $te(m){for(var g=m;;){var b=g.tag;if((b===0||b===11||b===15)&&g.flags&16384&&(b=g.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var C=0;C<b.length;C++){var D=b[C],$=D.getSnapshot;D=D.value;try{if(!Sr($(),D))return!1}catch{return!1}}if(b=g.child,g.subtreeFlags&16384&&b!==null)b.return=g,g=b;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function _c(m,g,b,C){g&=~XC,g&=~qd,m.suspendedLanes|=g,m.pingedLanes&=~g,C&&(m.warmLanes|=g),C=m.expirationTimes;for(var D=g;0<D;){var $=31-nt(D),J=1<<$;C[$]=-1,D&=~J}b!==0&&H(m,b,g)}function dy(){return(Cn&6)===0?(Kh(0),!1):!0}function nS(){if(cn!==null){if(Ln===0)var m=cn.return;else m=cn,el=Md=null,yC(m),jm=null,Ph=0,m=cn;for(;m!==null;)A5(m.alternate,m),m=m.return;cn=null}}function Dm(m,g){var b=m.timeoutHandle;b!==-1&&(m.timeoutHandle=-1,ane(b)),b=m.cancelPendingCommit,b!==null&&(m.cancelPendingCommit=null,b()),ul=0,nS(),Hn=m,cn=b=Zo(m.current,null),mn=g,Ln=0,Er=null,Nc=!1,km=Ne(m,g),KC=!1,Lm=kr=XC=qd=jc=ba=0,ar=Yh=null,ZC=!1,(g&8)!==0&&(g|=g&32);var C=m.entangledLanes;if(C!==0)for(m=m.entanglements,C&=g;0<C;){var D=31-nt(C),$=1<<D;g|=m[D],C&=~$}return dl=g,L0(),b}function X5(m,g){tn=null,Q.H=Fh,g===Nm||g===z0?(g=fO(),Ln=3):g===iC?(g=fO(),Ln=4):Ln=g===OC?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Er=g,cn===null&&(ba=1,J0(m,Qr(g,m.current)))}function Z5(){var m=Ar.current;return m===null?!0:(mn&4194048)===mn?Jr===null:(mn&62914560)===mn||(mn&536870912)!==0?m===Jr:!1}function J5(){var m=Q.H;return Q.H=Fh,m===null?Fh:m}function eM(){var m=Q.A;return Q.A=Mte,m}function uy(){ba=4,Nc||(mn&4194048)!==mn&&Ar.current!==null||(km=!0),(jc&134217727)===0&&(qd&134217727)===0||Hn===null||_c(Hn,mn,kr,!1)}function aS(m,g,b){var C=Cn;Cn|=2;var D=J5(),$=eM();(Hn!==m||mn!==g)&&(cy=null,Dm(m,g)),g=!1;var J=ba;e:do try{if(Ln!==0&&cn!==null){var we=cn,He=Er;switch(Ln){case 8:nS(),J=6;break e;case 3:case 2:case 9:case 6:Ar.current===null&&(g=!0);var st=Ln;if(Ln=0,Er=null,Om(m,we,He,st),b&&km){J=0;break e}break;default:st=Ln,Ln=0,Er=null,Om(m,we,He,st)}}Rte(),J=ba;break}catch(ft){X5(m,ft)}while(!0);return g&&m.shellSuspendCounter++,el=Md=null,Cn=C,Q.H=D,Q.A=$,cn===null&&(Hn=null,mn=0,L0()),J}function Rte(){for(;cn!==null;)tM(cn)}function zte(m,g){var b=Cn;Cn|=2;var C=J5(),D=eM();Hn!==m||mn!==g?(cy=null,ly=je()+500,Dm(m,g)):km=Ne(m,g);e:do try{if(Ln!==0&&cn!==null){g=cn;var $=Er;t:switch(Ln){case 1:Ln=0,Er=null,Om(m,g,$,1);break;case 2:case 9:if(uO($)){Ln=0,Er=null,nM(g);break}g=function(){Ln!==2&&Ln!==9||Hn!==m||(Ln=7),so(m)},$.then(g,g);break e;case 3:Ln=7;break e;case 4:Ln=5;break e;case 7:uO($)?(Ln=0,Er=null,nM(g)):(Ln=0,Er=null,Om(m,g,$,7));break;case 5:var J=null;switch(cn.tag){case 26:J=cn.memoizedState;case 5:case 27:var we=cn;if(J?UM(J):we.stateNode.complete){Ln=0,Er=null;var He=we.sibling;if(He!==null)cn=He;else{var st=we.return;st!==null?(cn=st,my(st)):cn=null}break t}}Ln=0,Er=null,Om(m,g,$,5);break;case 6:Ln=0,Er=null,Om(m,g,$,6);break;case 8:nS(),ba=6;break e;default:throw Error(s(462))}}Fte();break}catch(ft){X5(m,ft)}while(!0);return el=Md=null,Q.H=C,Q.A=D,Cn=b,cn!==null?0:(Hn=null,mn=0,L0(),ba)}function Fte(){for(;cn!==null&&!Ze();)tM(cn)}function tM(m){var g=S5(m.alternate,m,dl);m.memoizedProps=m.pendingProps,g===null?my(m):cn=g}function nM(m){var g=m,b=g.alternate;switch(g.tag){case 15:case 0:g=b5(b,g,g.pendingProps,g.type,void 0,mn);break;case 11:g=b5(b,g,g.pendingProps,g.type.render,g.ref,mn);break;case 5:yC(g);default:A5(b,g),g=cn=eO(g,dl),g=S5(b,g,dl)}m.memoizedProps=m.pendingProps,g===null?my(m):cn=g}function Om(m,g,b,C){el=Md=null,yC(g),jm=null,Ph=0;var D=g.return;try{if(Tte(m,D,g,b,mn)){ba=1,J0(m,Qr(b,m.current)),cn=null;return}}catch($){if(D!==null)throw cn=D,$;ba=1,J0(m,Qr(b,m.current)),cn=null;return}g.flags&32768?(pn||C===1?m=!0:km||(mn&536870912)!==0?m=!1:(Nc=m=!0,(C===2||C===9||C===3||C===6)&&(C=Ar.current,C!==null&&C.tag===13&&(C.flags|=16384))),aM(g,m)):my(g)}function my(m){var g=m;do{if((g.flags&32768)!==0){aM(g,Nc);return}m=g.return;var b=Lte(g.alternate,g,dl);if(b!==null){cn=b;return}if(g=g.sibling,g!==null){cn=g;return}cn=g=m}while(g!==null);ba===0&&(ba=5)}function aM(m,g){do{var b=Pte(m.alternate,m);if(b!==null){b.flags&=32767,cn=b;return}if(b=m.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!g&&(m=m.sibling,m!==null)){cn=m;return}cn=m=b}while(m!==null);ba=6,cn=null}function sM(m,g,b,C,D,$,J,we,He){m.cancelPendingCommit=null;do fy();while(Ya!==0);if((Cn&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if($=g.lanes|g.childLanes,$|=G1,ne(m,b,$,J,we,He),m===Hn&&(cn=Hn=null,mn=0),Pm=g,Sc=m,ul=b,JC=$,eS=D,V5=C,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,qte(V,function(){return cM(),null})):(m.callbackNode=null,m.callbackPriority=0),C=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||C){C=Q.T,Q.T=null,D=te.p,te.p=2,J=Cn,Cn|=4;try{Dte(m,g,b)}finally{Cn=J,te.p=D,Q.T=C}}Ya=1,rM(),iM(),oM()}}function rM(){if(Ya===1){Ya=0;var m=Sc,g=Pm,b=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||b){b=Q.T,Q.T=null;var C=te.p;te.p=2;var D=Cn;Cn|=4;try{z5(g,m);var $=gS,J=G3(m.containerInfo),we=$.focusedElem,He=$.selectionRange;if(J!==we&&we&&we.ownerDocument&&q3(we.ownerDocument.documentElement,we)){if(He!==null&&F1(we)){var st=He.start,ft=He.end;if(ft===void 0&&(ft=st),"selectionStart"in we)we.selectionStart=st,we.selectionEnd=Math.min(ft,we.value.length);else{var xt=we.ownerDocument||document,lt=xt&&xt.defaultView||window;if(lt.getSelection){var ut=lt.getSelection(),Mt=we.textContent.length,Wt=Math.min(He.start,Mt),Fn=He.end===void 0?Wt:Math.min(He.end,Mt);!ut.extend&&Wt>Fn&&(J=Fn,Fn=Wt,Wt=J);var tt=H3(we,Wt),Ve=H3(we,Fn);if(tt&&Ve&&(ut.rangeCount!==1||ut.anchorNode!==tt.node||ut.anchorOffset!==tt.offset||ut.focusNode!==Ve.node||ut.focusOffset!==Ve.offset)){var at=xt.createRange();at.setStart(tt.node,tt.offset),ut.removeAllRanges(),Wt>Fn?(ut.addRange(at),ut.extend(Ve.node,Ve.offset)):(at.setEnd(Ve.node,Ve.offset),ut.addRange(at))}}}}for(xt=[],ut=we;ut=ut.parentNode;)ut.nodeType===1&&xt.push({element:ut,left:ut.scrollLeft,top:ut.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<xt.length;we++){var gt=xt[we];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}Sy=!!hS,gS=hS=null}finally{Cn=D,te.p=C,Q.T=b}}m.current=g,Ya=2}}function iM(){if(Ya===2){Ya=0;var m=Sc,g=Pm,b=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||b){b=Q.T,Q.T=null;var C=te.p;te.p=2;var D=Cn;Cn|=4;try{O5(m,g.alternate,g)}finally{Cn=D,te.p=C,Q.T=b}}Ya=3}}function oM(){if(Ya===4||Ya===3){Ya=0,Me();var m=Sc,g=Pm,b=ul,C=V5;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ya=5:(Ya=0,Pm=Sc=null,lM(m,m.pendingLanes));var D=m.pendingLanes;if(D===0&&(Cc=null),ct(b),g=g.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(Ae,g,void 0,(g.current.flags&128)===128)}catch{}if(C!==null){g=Q.T,D=te.p,te.p=2,Q.T=null;try{for(var $=m.onRecoverableError,J=0;J<C.length;J++){var we=C[J];$(we.value,{componentStack:we.stack})}}finally{Q.T=g,te.p=D}}(ul&3)!==0&&fy(),so(m),D=m.pendingLanes,(b&261930)!==0&&(D&42)!==0?m===tS?Qh++:(Qh=0,tS=m):Qh=0,Kh(0)}}function lM(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,kh(g)))}function fy(){return rM(),iM(),oM(),cM()}function cM(){if(Ya!==5)return!1;var m=Sc,g=JC;JC=0;var b=ct(ul),C=Q.T,D=te.p;try{te.p=32>b?32:b,Q.T=null,b=eS,eS=null;var $=Sc,J=ul;if(Ya=0,Pm=Sc=null,ul=0,(Cn&6)!==0)throw Error(s(331));var we=Cn;if(Cn|=4,q5($.current),U5($,$.current,J,b),Cn=we,Kh(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(Ae,$)}catch{}return!0}finally{te.p=D,Q.T=C,lM(m,g)}}function dM(m,g,b){g=Qr(b,g),g=DC(m.stateNode,g,2),m=yc(m,g,2),m!==null&&(K(m,2),so(m))}function Pn(m,g,b){if(m.tag===3)dM(m,m,b);else for(;g!==null;){if(g.tag===3){dM(g,m,b);break}else if(g.tag===1){var C=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Cc===null||!Cc.has(C))){m=Qr(b,m),b=u5(2),C=yc(g,b,2),C!==null&&(m5(b,C,g,m),K(C,2),so(C));break}}g=g.return}}function sS(m,g,b){var C=m.pingCache;if(C===null){C=m.pingCache=new Ite;var D=new Set;C.set(g,D)}else D=C.get(g),D===void 0&&(D=new Set,C.set(g,D));D.has(b)||(KC=!0,D.add(b),m=Ute.bind(null,m,g,b),g.then(m,m))}function Ute(m,g,b){var C=m.pingCache;C!==null&&C.delete(g),m.pingedLanes|=m.suspendedLanes&b,m.warmLanes&=~b,Hn===m&&(mn&b)===b&&(ba===4||ba===3&&(mn&62914560)===mn&&300>je()-oy?(Cn&2)===0&&Dm(m,0):XC|=b,Lm===mn&&(Lm=0)),so(m)}function uM(m,g){g===0&&(g=fe()),m=Pd(m,g),m!==null&&(K(m,g),so(m))}function Bte(m){var g=m.memoizedState,b=0;g!==null&&(b=g.retryLane),uM(m,b)}function Hte(m,g){var b=0;switch(m.tag){case 31:case 13:var C=m.stateNode,D=m.memoizedState;D!==null&&(b=D.retryLane);break;case 19:C=m.stateNode;break;case 22:C=m.stateNode._retryCache;break;default:throw Error(s(314))}C!==null&&C.delete(g),uM(m,b)}function qte(m,g){return We(m,g)}var hy=null,Mm=null,rS=!1,gy=!1,iS=!1,Ac=0;function so(m){m!==Mm&&m.next===null&&(Mm===null?hy=Mm=m:Mm=Mm.next=m),gy=!0,rS||(rS=!0,Wte())}function Kh(m,g){if(!iS&&gy){iS=!0;do for(var b=!1,C=hy;C!==null;){if(m!==0){var D=C.pendingLanes;if(D===0)var $=0;else{var J=C.suspendedLanes,we=C.pingedLanes;$=(1<<31-nt(42|m)+1)-1,$&=D&~(J&~we),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(b=!0,gM(C,$))}else $=mn,$=G(C,C===Hn?$:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),($&3)===0||Ne(C,$)||(b=!0,gM(C,$));C=C.next}while(b);iS=!1}}function Gte(){mM()}function mM(){gy=rS=!1;var m=0;Ac!==0&&nne()&&(m=Ac);for(var g=je(),b=null,C=hy;C!==null;){var D=C.next,$=fM(C,g);$===0?(C.next=null,b===null?hy=D:b.next=D,D===null&&(Mm=b)):(b=C,(m!==0||($&3)!==0)&&(gy=!0)),C=D}Ya!==0&&Ya!==5||Kh(m),Ac!==0&&(Ac=0)}function fM(m,g){for(var b=m.suspendedLanes,C=m.pingedLanes,D=m.expirationTimes,$=m.pendingLanes&-62914561;0<$;){var J=31-nt($),we=1<<J,He=D[J];He===-1?((we&b)===0||(we&C)!==0)&&(D[J]=ge(we,g)):He<=g&&(m.expiredLanes|=we),$&=~we}if(g=Hn,b=mn,b=G(m,m===g?b:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),C=m.callbackNode,b===0||m===g&&(Ln===2||Ln===9)||m.cancelPendingCommit!==null)return C!==null&&C!==null&&Ke(C),m.callbackNode=null,m.callbackPriority=0;if((b&3)===0||Ne(m,b)){if(g=b&-b,g===m.callbackPriority)return g;switch(C!==null&&Ke(C),ct(b)){case 2:case 8:b=U;break;case 32:b=V;break;case 268435456:b=ze;break;default:b=V}return C=hM.bind(null,m),b=We(b,C),m.callbackPriority=g,m.callbackNode=b,g}return C!==null&&C!==null&&Ke(C),m.callbackPriority=2,m.callbackNode=null,2}function hM(m,g){if(Ya!==0&&Ya!==5)return m.callbackNode=null,m.callbackPriority=0,null;var b=m.callbackNode;if(fy()&&m.callbackNode!==b)return null;var C=mn;return C=G(m,m===Hn?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),C===0?null:(Q5(m,C,g),fM(m,je()),m.callbackNode!=null&&m.callbackNode===b?hM.bind(null,m):null)}function gM(m,g){if(fy())return null;Q5(m,g,!0)}function Wte(){sne(function(){(Cn&6)!==0?We(oe,Gte):mM()})}function oS(){if(Ac===0){var m=vm;m===0&&(m=$e,$e<<=1,($e&261888)===0&&($e=256)),Ac=m}return Ac}function pM(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:j0(""+m)}function xM(m,g){var b=g.ownerDocument.createElement("input");return b.name=g.name,b.value=g.value,m.id&&b.setAttribute("form",m.id),g.parentNode.insertBefore(b,g),m=new FormData(m),b.parentNode.removeChild(b),m}function Vte(m,g,b,C,D){if(g==="submit"&&b&&b.stateNode===D){var $=pM((D[rn]||null).action),J=C.submitter;J&&(g=(g=J[rn]||null)?pM(g.formAction):J.getAttribute("formAction"),g!==null&&($=g,J=null));var we=new A0("action","action",null,C,D);m.push({event:we,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(Ac!==0){var He=J?xM(D,J):new FormData(D);AC(b,{pending:!0,data:He,method:D.method,action:$},null,He)}}else typeof $=="function"&&(we.preventDefault(),He=J?xM(D,J):new FormData(D),AC(b,{pending:!0,data:He,method:D.method,action:$},$,He))},currentTarget:D}]})}}for(var lS=0;lS<q1.length;lS++){var cS=q1[lS],Yte=cS.toLowerCase(),Qte=cS[0].toUpperCase()+cS.slice(1);ki(Yte,"on"+Qte)}ki(Y3,"onAnimationEnd"),ki(Q3,"onAnimationIteration"),ki(K3,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(ute,"onTransitionRun"),ki(mte,"onTransitionStart"),ki(fte,"onTransitionCancel"),ki(X3,"onTransitionEnd"),An("onMouseEnter",["mouseout","mouseover"]),An("onMouseLeave",["mouseout","mouseover"]),An("onPointerEnter",["pointerout","pointerover"]),An("onPointerLeave",["pointerout","pointerover"]),Ut("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ut("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ut("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ut("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ut("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ut("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xh));function yM(m,g){g=(g&4)!==0;for(var b=0;b<m.length;b++){var C=m[b],D=C.event;C=C.listeners;e:{var $=void 0;if(g)for(var J=C.length-1;0<=J;J--){var we=C[J],He=we.instance,st=we.currentTarget;if(we=we.listener,He!==$&&D.isPropagationStopped())break e;$=we,D.currentTarget=st;try{$(D)}catch(ft){k0(ft)}D.currentTarget=null,$=He}else for(J=0;J<C.length;J++){if(we=C[J],He=we.instance,st=we.currentTarget,we=we.listener,He!==$&&D.isPropagationStopped())break e;$=we,D.currentTarget=st;try{$(D)}catch(ft){k0(ft)}D.currentTarget=null,$=He}}}}function dn(m,g){var b=g[Va];b===void 0&&(b=g[Va]=new Set);var C=m+"__bubble";b.has(C)||(bM(g,m,2,!1),b.add(C))}function dS(m,g,b){var C=0;g&&(C|=4),bM(b,m,C,g)}var py="_reactListening"+Math.random().toString(36).slice(2);function uS(m){if(!m[py]){m[py]=!0,jt.forEach(function(b){b!=="selectionchange"&&(Kte.has(b)||dS(b,!1,m),dS(b,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[py]||(g[py]=!0,dS("selectionchange",!1,g))}}function bM(m,g,b,C){switch(YM(g)){case 2:var D=Cne;break;case 8:D=Sne;break;default:D=_S}b=D.bind(null,g,b,m),D=void 0,!L1||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(D=!0),C?D!==void 0?m.addEventListener(g,b,{capture:!0,passive:D}):m.addEventListener(g,b,!0):D!==void 0?m.addEventListener(g,b,{passive:D}):m.addEventListener(g,b,!1)}function mS(m,g,b,C,D){var $=C;if((g&1)===0&&(g&2)===0&&C!==null)e:for(;;){if(C===null)return;var J=C.tag;if(J===3||J===4){var we=C.stateNode.containerInfo;if(we===D)break;if(J===4)for(J=C.return;J!==null;){var He=J.tag;if((He===3||He===4)&&J.stateNode.containerInfo===D)return;J=J.return}for(;we!==null;){if(J=Z(we),J===null)return;if(He=J.tag,He===5||He===6||He===26||He===27){C=$=J;continue e}we=we.parentNode}}C=C.return}C3(function(){var st=$,ft=E1(b),xt=[];e:{var lt=Z3.get(m);if(lt!==void 0){var ut=A0,Mt=m;switch(m){case"keypress":if(S0(b)===0)break e;case"keydown":case"keyup":ut=Hee;break;case"focusin":Mt="focus",ut=M1;break;case"focusout":Mt="blur",ut=M1;break;case"beforeblur":case"afterblur":ut=M1;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=A3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Lee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Wee;break;case Y3:case Q3:case K3:ut=Oee;break;case X3:ut=Yee;break;case"scroll":case"scrollend":ut=Eee;break;case"wheel":ut=Kee;break;case"copy":case"cut":case"paste":ut=Iee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=E3;break;case"toggle":case"beforetoggle":ut=Zee}var Wt=(g&4)!==0,Fn=!Wt&&(m==="scroll"||m==="scrollend"),tt=Wt?lt!==null?lt+"Capture":null:lt;Wt=[];for(var Ve=st,at;Ve!==null;){var gt=Ve;if(at=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||at===null||tt===null||(gt=bh(Ve,tt),gt!=null&&Wt.push(Zh(Ve,gt,at))),Fn)break;Ve=Ve.return}0<Wt.length&&(lt=new ut(lt,Mt,null,b,ft),xt.push({event:lt,listeners:Wt}))}}if((g&7)===0){e:{if(lt=m==="mouseover"||m==="pointerover",ut=m==="mouseout"||m==="pointerout",lt&&b!==T1&&(Mt=b.relatedTarget||b.fromElement)&&(Z(Mt)||Mt[aa]))break e;if((ut||lt)&&(lt=ft.window===ft?ft:(lt=ft.ownerDocument)?lt.defaultView||lt.parentWindow:window,ut?(Mt=b.relatedTarget||b.toElement,ut=st,Mt=Mt?Z(Mt):null,Mt!==null&&(Fn=i(Mt),Wt=Mt.tag,Mt!==Fn||Wt!==5&&Wt!==27&&Wt!==6)&&(Mt=null)):(ut=null,Mt=st),ut!==Mt)){if(Wt=A3,gt="onMouseLeave",tt="onMouseEnter",Ve="mouse",(m==="pointerout"||m==="pointerover")&&(Wt=E3,gt="onPointerLeave",tt="onPointerEnter",Ve="pointer"),Fn=ut==null?lt:Le(ut),at=Mt==null?lt:Le(Mt),lt=new Wt(gt,Ve+"leave",ut,b,ft),lt.target=Fn,lt.relatedTarget=at,gt=null,Z(ft)===st&&(Wt=new Wt(tt,Ve+"enter",Mt,b,ft),Wt.target=at,Wt.relatedTarget=Fn,gt=Wt),Fn=gt,ut&&Mt)t:{for(Wt=Xte,tt=ut,Ve=Mt,at=0,gt=tt;gt;gt=Wt(gt))at++;gt=0;for(var Ht=Ve;Ht;Ht=Wt(Ht))gt++;for(;0<at-gt;)tt=Wt(tt),at--;for(;0<gt-at;)Ve=Wt(Ve),gt--;for(;at--;){if(tt===Ve||Ve!==null&&tt===Ve.alternate){Wt=tt;break t}tt=Wt(tt),Ve=Wt(Ve)}Wt=null}else Wt=null;ut!==null&&vM(xt,lt,ut,Wt,!1),Mt!==null&&Fn!==null&&vM(xt,Fn,Mt,Wt,!0)}}e:{if(lt=st?Le(st):window,ut=lt.nodeName&&lt.nodeName.toLowerCase(),ut==="select"||ut==="input"&&lt.type==="file")var wn=$3;else if(M3(lt))if(R3)wn=lte;else{wn=ite;var zt=rte}else ut=lt.nodeName,!ut||ut.toLowerCase()!=="input"||lt.type!=="checkbox"&&lt.type!=="radio"?st&&A1(st.elementType)&&(wn=$3):wn=ote;if(wn&&(wn=wn(m,st))){I3(xt,wn,b,ft);break e}zt&&zt(m,lt,st),m==="focusout"&&st&&lt.type==="number"&&st.memoizedProps.value!=null&&_1(lt,"number",lt.value)}switch(zt=st?Le(st):window,m){case"focusin":(M3(zt)||zt.contentEditable==="true")&&(mm=zt,U1=st,Ah=null);break;case"focusout":Ah=U1=mm=null;break;case"mousedown":B1=!0;break;case"contextmenu":case"mouseup":case"dragend":B1=!1,W3(xt,b,ft);break;case"selectionchange":if(dte)break;case"keydown":case"keyup":W3(xt,b,ft)}var sn;if($1)e:{switch(m){case"compositionstart":var fn="onCompositionStart";break e;case"compositionend":fn="onCompositionEnd";break e;case"compositionupdate":fn="onCompositionUpdate";break e}fn=void 0}else um?D3(m,b)&&(fn="onCompositionEnd"):m==="keydown"&&b.keyCode===229&&(fn="onCompositionStart");fn&&(k3&&b.locale!=="ko"&&(um||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&um&&(sn=S3()):(uc=ft,P1="value"in uc?uc.value:uc.textContent,um=!0)),zt=xy(st,fn),0<zt.length&&(fn=new T3(fn,m,null,b,ft),xt.push({event:fn,listeners:zt}),sn?fn.data=sn:(sn=O3(b),sn!==null&&(fn.data=sn)))),(sn=ete?tte(m,b):nte(m,b))&&(fn=xy(st,"onBeforeInput"),0<fn.length&&(zt=new T3("onBeforeInput","beforeinput",null,b,ft),xt.push({event:zt,listeners:fn}),zt.data=sn)),Vte(xt,m,st,b,ft)}yM(xt,g)})}function Zh(m,g,b){return{instance:m,listener:g,currentTarget:b}}function xy(m,g){for(var b=g+"Capture",C=[];m!==null;){var D=m,$=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||$===null||(D=bh(m,b),D!=null&&C.unshift(Zh(m,D,$)),D=bh(m,g),D!=null&&C.push(Zh(m,D,$))),m.tag===3)return C;m=m.return}return[]}function Xte(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function vM(m,g,b,C,D){for(var $=g._reactName,J=[];b!==null&&b!==C;){var we=b,He=we.alternate,st=we.stateNode;if(we=we.tag,He!==null&&He===C)break;we!==5&&we!==26&&we!==27||st===null||(He=st,D?(st=bh(b,$),st!=null&&J.unshift(Zh(b,st,He))):D||(st=bh(b,$),st!=null&&J.push(Zh(b,st,He)))),b=b.return}J.length!==0&&m.push({event:g,listeners:J})}var Zte=/\r\n?/g,Jte=/\u0000|\uFFFD/g;function wM(m){return(typeof m=="string"?m:""+m).replace(Zte,`
`).replace(Jte,"")}function NM(m,g){return g=wM(g),wM(m)===g}function zn(m,g,b,C,D,$){switch(b){case"children":typeof C=="string"?g==="body"||g==="textarea"&&C===""||lm(m,C):(typeof C=="number"||typeof C=="bigint")&&g!=="body"&&lm(m,""+C);break;case"className":w0(m,"class",C);break;case"tabIndex":w0(m,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":w0(m,b,C);break;case"style":N3(m,C,$);break;case"data":if(g!=="object"){w0(m,"data",C);break}case"src":case"href":if(C===""&&(g!=="a"||b!=="href")){m.removeAttribute(b);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){m.removeAttribute(b);break}C=j0(""+C),m.setAttribute(b,C);break;case"action":case"formAction":if(typeof C=="function"){m.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(b==="formAction"?(g!=="input"&&zn(m,g,"name",D.name,D,null),zn(m,g,"formEncType",D.formEncType,D,null),zn(m,g,"formMethod",D.formMethod,D,null),zn(m,g,"formTarget",D.formTarget,D,null)):(zn(m,g,"encType",D.encType,D,null),zn(m,g,"method",D.method,D,null),zn(m,g,"target",D.target,D,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){m.removeAttribute(b);break}C=j0(""+C),m.setAttribute(b,C);break;case"onClick":C!=null&&(m.onclick=Ko);break;case"onScroll":C!=null&&dn("scroll",m);break;case"onScrollEnd":C!=null&&dn("scrollend",m);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(s(61));if(b=C.__html,b!=null){if(D.children!=null)throw Error(s(60));m.innerHTML=b}}break;case"multiple":m.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":m.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){m.removeAttribute("xlink:href");break}b=j0(""+C),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(b,""+C):m.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(b,""):m.removeAttribute(b);break;case"capture":case"download":C===!0?m.setAttribute(b,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(b,C):m.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?m.setAttribute(b,C):m.removeAttribute(b);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?m.removeAttribute(b):m.setAttribute(b,C);break;case"popover":dn("beforetoggle",m),dn("toggle",m),v0(m,"popover",C);break;case"xlinkActuate":Qo(m,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":Qo(m,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":Qo(m,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":Qo(m,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":Qo(m,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":Qo(m,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":Qo(m,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":Qo(m,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":Qo(m,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":v0(m,"is",C);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Aee.get(b)||b,v0(m,b,C))}}function fS(m,g,b,C,D,$){switch(b){case"style":N3(m,C,$);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(s(61));if(b=C.__html,b!=null){if(D.children!=null)throw Error(s(60));m.innerHTML=b}}break;case"children":typeof C=="string"?lm(m,C):(typeof C=="number"||typeof C=="bigint")&&lm(m,""+C);break;case"onScroll":C!=null&&dn("scroll",m);break;case"onScrollEnd":C!=null&&dn("scrollend",m);break;case"onClick":C!=null&&(m.onclick=Ko);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vt.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(D=b.endsWith("Capture"),g=b.slice(2,D?b.length-7:void 0),$=m[rn]||null,$=$!=null?$[b]:null,typeof $=="function"&&m.removeEventListener(g,$,D),typeof C=="function")){typeof $!="function"&&$!==null&&(b in m?m[b]=null:m.hasAttribute(b)&&m.removeAttribute(b)),m.addEventListener(g,C,D);break e}b in m?m[b]=C:C===!0?m.setAttribute(b,""):v0(m,b,C)}}}function js(m,g,b){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dn("error",m),dn("load",m);var C=!1,D=!1,$;for($ in b)if(b.hasOwnProperty($)){var J=b[$];if(J!=null)switch($){case"src":C=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:zn(m,g,$,J,b,null)}}D&&zn(m,g,"srcSet",b.srcSet,b,null),C&&zn(m,g,"src",b.src,b,null);return;case"input":dn("invalid",m);var we=$=J=D=null,He=null,st=null;for(C in b)if(b.hasOwnProperty(C)){var ft=b[C];if(ft!=null)switch(C){case"name":D=ft;break;case"type":J=ft;break;case"checked":He=ft;break;case"defaultChecked":st=ft;break;case"value":$=ft;break;case"defaultValue":we=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(s(137,g));break;default:zn(m,g,C,ft,b,null)}}y3(m,$,we,He,st,J,D,!1);return;case"select":dn("invalid",m),C=J=$=null;for(D in b)if(b.hasOwnProperty(D)&&(we=b[D],we!=null))switch(D){case"value":$=we;break;case"defaultValue":J=we;break;case"multiple":C=we;default:zn(m,g,D,we,b,null)}g=$,b=J,m.multiple=!!C,g!=null?om(m,!!C,g,!1):b!=null&&om(m,!!C,b,!0);return;case"textarea":dn("invalid",m),$=D=C=null;for(J in b)if(b.hasOwnProperty(J)&&(we=b[J],we!=null))switch(J){case"value":C=we;break;case"defaultValue":D=we;break;case"children":$=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(91));break;default:zn(m,g,J,we,b,null)}v3(m,C,D,$);return;case"option":for(He in b)b.hasOwnProperty(He)&&(C=b[He],C!=null)&&(He==="selected"?m.selected=C&&typeof C!="function"&&typeof C!="symbol":zn(m,g,He,C,b,null));return;case"dialog":dn("beforetoggle",m),dn("toggle",m),dn("cancel",m),dn("close",m);break;case"iframe":case"object":dn("load",m);break;case"video":case"audio":for(C=0;C<Xh.length;C++)dn(Xh[C],m);break;case"image":dn("error",m),dn("load",m);break;case"details":dn("toggle",m);break;case"embed":case"source":case"link":dn("error",m),dn("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in b)if(b.hasOwnProperty(st)&&(C=b[st],C!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:zn(m,g,st,C,b,null)}return;default:if(A1(g)){for(ft in b)b.hasOwnProperty(ft)&&(C=b[ft],C!==void 0&&fS(m,g,ft,C,b,void 0));return}}for(we in b)b.hasOwnProperty(we)&&(C=b[we],C!=null&&zn(m,g,we,C,b,null))}function ene(m,g,b,C){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,$=null,J=null,we=null,He=null,st=null,ft=null;for(ut in b){var xt=b[ut];if(b.hasOwnProperty(ut)&&xt!=null)switch(ut){case"checked":break;case"value":break;case"defaultValue":He=xt;default:C.hasOwnProperty(ut)||zn(m,g,ut,null,C,xt)}}for(var lt in C){var ut=C[lt];if(xt=b[lt],C.hasOwnProperty(lt)&&(ut!=null||xt!=null))switch(lt){case"type":$=ut;break;case"name":D=ut;break;case"checked":st=ut;break;case"defaultChecked":ft=ut;break;case"value":J=ut;break;case"defaultValue":we=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(s(137,g));break;default:ut!==xt&&zn(m,g,lt,ut,C,xt)}}S1(m,J,we,He,st,ft,$,D);return;case"select":ut=J=we=lt=null;for($ in b)if(He=b[$],b.hasOwnProperty($)&&He!=null)switch($){case"value":break;case"multiple":ut=He;default:C.hasOwnProperty($)||zn(m,g,$,null,C,He)}for(D in C)if($=C[D],He=b[D],C.hasOwnProperty(D)&&($!=null||He!=null))switch(D){case"value":lt=$;break;case"defaultValue":we=$;break;case"multiple":J=$;default:$!==He&&zn(m,g,D,$,C,He)}g=we,b=J,C=ut,lt!=null?om(m,!!b,lt,!1):!!C!=!!b&&(g!=null?om(m,!!b,g,!0):om(m,!!b,b?[]:"",!1));return;case"textarea":ut=lt=null;for(we in b)if(D=b[we],b.hasOwnProperty(we)&&D!=null&&!C.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:zn(m,g,we,null,C,D)}for(J in C)if(D=C[J],$=b[J],C.hasOwnProperty(J)&&(D!=null||$!=null))switch(J){case"value":lt=D;break;case"defaultValue":ut=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:D!==$&&zn(m,g,J,D,C,$)}b3(m,lt,ut);return;case"option":for(var Mt in b)lt=b[Mt],b.hasOwnProperty(Mt)&&lt!=null&&!C.hasOwnProperty(Mt)&&(Mt==="selected"?m.selected=!1:zn(m,g,Mt,null,C,lt));for(He in C)lt=C[He],ut=b[He],C.hasOwnProperty(He)&&lt!==ut&&(lt!=null||ut!=null)&&(He==="selected"?m.selected=lt&&typeof lt!="function"&&typeof lt!="symbol":zn(m,g,He,lt,C,ut));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in b)lt=b[Wt],b.hasOwnProperty(Wt)&&lt!=null&&!C.hasOwnProperty(Wt)&&zn(m,g,Wt,null,C,lt);for(st in C)if(lt=C[st],ut=b[st],C.hasOwnProperty(st)&&lt!==ut&&(lt!=null||ut!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(s(137,g));break;default:zn(m,g,st,lt,C,ut)}return;default:if(A1(g)){for(var Fn in b)lt=b[Fn],b.hasOwnProperty(Fn)&&lt!==void 0&&!C.hasOwnProperty(Fn)&&fS(m,g,Fn,void 0,C,lt);for(ft in C)lt=C[ft],ut=b[ft],!C.hasOwnProperty(ft)||lt===ut||lt===void 0&&ut===void 0||fS(m,g,ft,lt,C,ut);return}}for(var tt in b)lt=b[tt],b.hasOwnProperty(tt)&&lt!=null&&!C.hasOwnProperty(tt)&&zn(m,g,tt,null,C,lt);for(xt in C)lt=C[xt],ut=b[xt],!C.hasOwnProperty(xt)||lt===ut||lt==null&&ut==null||zn(m,g,xt,lt,C,ut)}function jM(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tne(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,b=performance.getEntriesByType("resource"),C=0;C<b.length;C++){var D=b[C],$=D.transferSize,J=D.initiatorType,we=D.duration;if($&&we&&jM(J)){for(J=0,we=D.responseEnd,C+=1;C<b.length;C++){var He=b[C],st=He.startTime;if(st>we)break;var ft=He.transferSize,xt=He.initiatorType;ft&&jM(xt)&&(He=He.responseEnd,J+=ft*(He<we?1:(we-st)/(He-st)))}if(--C,g+=8*($+J)/(D.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var hS=null,gS=null;function yy(m){return m.nodeType===9?m:m.ownerDocument}function CM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SM(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function pS(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var xS=null;function nne(){var m=window.event;return m&&m.type==="popstate"?m===xS?!1:(xS=m,!0):(xS=null,!1)}var _M=typeof setTimeout=="function"?setTimeout:void 0,ane=typeof clearTimeout=="function"?clearTimeout:void 0,AM=typeof Promise=="function"?Promise:void 0,sne=typeof queueMicrotask=="function"?queueMicrotask:typeof AM<"u"?function(m){return AM.resolve(null).then(m).catch(rne)}:_M;function rne(m){setTimeout(function(){throw m})}function Tc(m){return m==="head"}function TM(m,g){var b=g,C=0;do{var D=b.nextSibling;if(m.removeChild(b),D&&D.nodeType===8)if(b=D.data,b==="/$"||b==="/&"){if(C===0){m.removeChild(D),zm(g);return}C--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")C++;else if(b==="html")Jh(m.ownerDocument.documentElement);else if(b==="head"){b=m.ownerDocument.head,Jh(b);for(var $=b.firstChild;$;){var J=$.nextSibling,we=$.nodeName;$[P]||we==="SCRIPT"||we==="STYLE"||we==="LINK"&&$.rel.toLowerCase()==="stylesheet"||b.removeChild($),$=J}}else b==="body"&&Jh(m.ownerDocument.body);b=D}while(b);zm(g)}function EM(m,g){var b=m;m=0;do{var C=b.nextSibling;if(b.nodeType===1?g?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(g?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),C&&C.nodeType===8)if(b=C.data,b==="/$"){if(m===0)break;m--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||m++;b=C}while(b)}function yS(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var b=g;switch(g=g.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":yS(b),E(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}m.removeChild(b)}}function ine(m,g,b,C){for(;m.nodeType===1;){var D=b;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!C&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(C){if(!m[P])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if($=m.getAttribute("rel"),$==="stylesheet"&&m.hasAttribute("data-precedence"))break;if($!==D.rel||m.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||m.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||m.getAttribute("title")!==(D.title==null?null:D.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if($=m.getAttribute("src"),($!==(D.src==null?null:D.src)||m.getAttribute("type")!==(D.type==null?null:D.type)||m.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&$&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var $=D.name==null?null:""+D.name;if(D.type==="hidden"&&m.getAttribute("name")===$)return m}else return m;if(m=ei(m.nextSibling),m===null)break}return null}function one(m,g,b){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!b||(m=ei(m.nextSibling),m===null))return null;return m}function kM(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=ei(m.nextSibling),m===null))return null;return m}function bS(m){return m.data==="$?"||m.data==="$~"}function vS(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function lne(m,g){var b=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||b.readyState!=="loading")g();else{var C=function(){g(),b.removeEventListener("DOMContentLoaded",C)};b.addEventListener("DOMContentLoaded",C),m._reactRetry=C}}function ei(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var wS=null;function LM(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var b=m.data;if(b==="/$"||b==="/&"){if(g===0)return ei(m.nextSibling);g--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||g++}m=m.nextSibling}return null}function PM(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var b=m.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(g===0)return m;g--}else b!=="/$"&&b!=="/&"||g++}m=m.previousSibling}return null}function DM(m,g,b){switch(g=yy(b),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function Jh(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);E(m)}var ti=new Map,OM=new Set;function by(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var ml=te.d;te.d={f:cne,r:dne,D:une,C:mne,L:fne,m:hne,X:pne,S:gne,M:xne};function cne(){var m=ml.f(),g=dy();return m||g}function dne(m){var g=_e(m);g!==null&&g.tag===5&&g.type==="form"?XO(g):ml.r(m)}var Im=typeof document>"u"?null:document;function MM(m,g,b){var C=Im;if(C&&typeof g=="string"&&g){var D=Vr(g);D='link[rel="'+m+'"][href="'+D+'"]',typeof b=="string"&&(D+='[crossorigin="'+b+'"]'),OM.has(D)||(OM.add(D),m={rel:m,crossOrigin:b,href:g},C.querySelector(D)===null&&(g=C.createElement("link"),js(g,"link",m),Xe(g),C.head.appendChild(g)))}}function une(m){ml.D(m),MM("dns-prefetch",m,null)}function mne(m,g){ml.C(m,g),MM("preconnect",m,g)}function fne(m,g,b){ml.L(m,g,b);var C=Im;if(C&&m&&g){var D='link[rel="preload"][as="'+Vr(g)+'"]';g==="image"&&b&&b.imageSrcSet?(D+='[imagesrcset="'+Vr(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(D+='[imagesizes="'+Vr(b.imageSizes)+'"]')):D+='[href="'+Vr(m)+'"]';var $=D;switch(g){case"style":$=$m(m);break;case"script":$=Rm(m)}ti.has($)||(m=f({rel:"preload",href:g==="image"&&b&&b.imageSrcSet?void 0:m,as:g},b),ti.set($,m),C.querySelector(D)!==null||g==="style"&&C.querySelector(eg($))||g==="script"&&C.querySelector(tg($))||(g=C.createElement("link"),js(g,"link",m),Xe(g),C.head.appendChild(g)))}}function hne(m,g){ml.m(m,g);var b=Im;if(b&&m){var C=g&&typeof g.as=="string"?g.as:"script",D='link[rel="modulepreload"][as="'+Vr(C)+'"][href="'+Vr(m)+'"]',$=D;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=Rm(m)}if(!ti.has($)&&(m=f({rel:"modulepreload",href:m},g),ti.set($,m),b.querySelector(D)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(tg($)))return}C=b.createElement("link"),js(C,"link",m),Xe(C),b.head.appendChild(C)}}}function gne(m,g,b){ml.S(m,g,b);var C=Im;if(C&&m){var D=qe(C).hoistableStyles,$=$m(m);g=g||"default";var J=D.get($);if(!J){var we={loading:0,preload:null};if(J=C.querySelector(eg($)))we.loading=5;else{m=f({rel:"stylesheet",href:m,"data-precedence":g},b),(b=ti.get($))&&NS(m,b);var He=J=C.createElement("link");Xe(He),js(He,"link",m),He._p=new Promise(function(st,ft){He.onload=st,He.onerror=ft}),He.addEventListener("load",function(){we.loading|=1}),He.addEventListener("error",function(){we.loading|=2}),we.loading|=4,vy(J,g,C)}J={type:"stylesheet",instance:J,count:1,state:we},D.set($,J)}}}function pne(m,g){ml.X(m,g);var b=Im;if(b&&m){var C=qe(b).hoistableScripts,D=Rm(m),$=C.get(D);$||($=b.querySelector(tg(D)),$||(m=f({src:m,async:!0},g),(g=ti.get(D))&&jS(m,g),$=b.createElement("script"),Xe($),js($,"link",m),b.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},C.set(D,$))}}function xne(m,g){ml.M(m,g);var b=Im;if(b&&m){var C=qe(b).hoistableScripts,D=Rm(m),$=C.get(D);$||($=b.querySelector(tg(D)),$||(m=f({src:m,async:!0,type:"module"},g),(g=ti.get(D))&&jS(m,g),$=b.createElement("script"),Xe($),js($,"link",m),b.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},C.set(D,$))}}function IM(m,g,b,C){var D=(D=ye.current)?by(D):null;if(!D)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(g=$m(b.href),b=qe(D).hoistableStyles,C=b.get(g),C||(C={type:"style",instance:null,count:0,state:null},b.set(g,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){m=$m(b.href);var $=qe(D).hoistableStyles,J=$.get(m);if(J||(D=D.ownerDocument||D,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(m,J),($=D.querySelector(eg(m)))&&!$._p&&(J.instance=$,J.state.loading=5),ti.has(m)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},ti.set(m,b),$||yne(D,m,b,J.state))),g&&C===null)throw Error(s(528,""));return J}if(g&&C!==null)throw Error(s(529,""));return null;case"script":return g=b.async,b=b.src,typeof b=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Rm(b),b=qe(D).hoistableScripts,C=b.get(g),C||(C={type:"script",instance:null,count:0,state:null},b.set(g,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function $m(m){return'href="'+Vr(m)+'"'}function eg(m){return'link[rel="stylesheet"]['+m+"]"}function $M(m){return f({},m,{"data-precedence":m.precedence,precedence:null})}function yne(m,g,b,C){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?C.loading=1:(g=m.createElement("link"),C.preload=g,g.addEventListener("load",function(){return C.loading|=1}),g.addEventListener("error",function(){return C.loading|=2}),js(g,"link",b),Xe(g),m.head.appendChild(g))}function Rm(m){return'[src="'+Vr(m)+'"]'}function tg(m){return"script[async]"+m}function RM(m,g,b){if(g.count++,g.instance===null)switch(g.type){case"style":var C=m.querySelector('style[data-href~="'+Vr(b.href)+'"]');if(C)return g.instance=C,Xe(C),C;var D=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return C=(m.ownerDocument||m).createElement("style"),Xe(C),js(C,"style",D),vy(C,b.precedence,m),g.instance=C;case"stylesheet":D=$m(b.href);var $=m.querySelector(eg(D));if($)return g.state.loading|=4,g.instance=$,Xe($),$;C=$M(b),(D=ti.get(D))&&NS(C,D),$=(m.ownerDocument||m).createElement("link"),Xe($);var J=$;return J._p=new Promise(function(we,He){J.onload=we,J.onerror=He}),js($,"link",C),g.state.loading|=4,vy($,b.precedence,m),g.instance=$;case"script":return $=Rm(b.src),(D=m.querySelector(tg($)))?(g.instance=D,Xe(D),D):(C=b,(D=ti.get($))&&(C=f({},b),jS(C,D)),m=m.ownerDocument||m,D=m.createElement("script"),Xe(D),js(D,"link",C),m.head.appendChild(D),g.instance=D);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(C=g.instance,g.state.loading|=4,vy(C,b.precedence,m));return g.instance}function vy(m,g,b){for(var C=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=C.length?C[C.length-1]:null,$=D,J=0;J<C.length;J++){var we=C[J];if(we.dataset.precedence===g)$=we;else if($!==D)break}$?$.parentNode.insertBefore(m,$.nextSibling):(g=b.nodeType===9?b.head:b,g.insertBefore(m,g.firstChild))}function NS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function jS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var wy=null;function zM(m,g,b){if(wy===null){var C=new Map,D=wy=new Map;D.set(b,C)}else D=wy,C=D.get(b),C||(C=new Map,D.set(b,C));if(C.has(m))return C;for(C.set(m,null),b=b.getElementsByTagName(m),D=0;D<b.length;D++){var $=b[D];if(!($[P]||$[Yt]||m==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var J=$.getAttribute(g)||"";J=m+J;var we=C.get(J);we?we.push($):C.set(J,[$])}}return C}function FM(m,g,b){m=m.ownerDocument||m,m.head.insertBefore(b,g==="title"?m.querySelector("head > title"):null)}function bne(m,g,b){if(b===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function UM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function vne(m,g,b,C){if(b.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var D=$m(C.href),$=g.querySelector(eg(D));if($){g=$._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=Ny.bind(m),g.then(m,m)),b.state.loading|=4,b.instance=$,Xe($);return}$=g.ownerDocument||g,C=$M(C),(D=ti.get(D))&&NS(C,D),$=$.createElement("link"),Xe($);var J=$;J._p=new Promise(function(we,He){J.onload=we,J.onerror=He}),js($,"link",C),b.instance=$}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(b,g),(g=b.state.preload)&&(b.state.loading&3)===0&&(m.count++,b=Ny.bind(m),g.addEventListener("load",b),g.addEventListener("error",b))}}var CS=0;function wne(m,g){return m.stylesheets&&m.count===0&&Cy(m,m.stylesheets),0<m.count||0<m.imgCount?function(b){var C=setTimeout(function(){if(m.stylesheets&&Cy(m,m.stylesheets),m.unsuspend){var $=m.unsuspend;m.unsuspend=null,$()}},6e4+g);0<m.imgBytes&&CS===0&&(CS=62500*tne());var D=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&Cy(m,m.stylesheets),m.unsuspend)){var $=m.unsuspend;m.unsuspend=null,$()}},(m.imgBytes>CS?50:800)+g);return m.unsuspend=b,function(){m.unsuspend=null,clearTimeout(C),clearTimeout(D)}}:null}function Ny(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cy(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var jy=null;function Cy(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,jy=new Map,g.forEach(Nne,m),jy=null,Ny.call(m))}function Nne(m,g){if(!(g.state.loading&4)){var b=jy.get(m);if(b)var C=b.get(null);else{b=new Map,jy.set(m,b);for(var D=m.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<D.length;$++){var J=D[$];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(b.set(J.dataset.precedence,J),C=J)}C&&b.set(null,C)}D=g.instance,J=D.getAttribute("data-precedence"),$=b.get(J)||C,$===C&&b.set(null,D),b.set(J,D),this.count++,C=Ny.bind(this),D.addEventListener("load",C),D.addEventListener("error",C),$?$.parentNode.insertBefore(D,$.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(D,m.firstChild)),g.state.loading|=4}}var ng={$$typeof:S,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function jne(m,g,b,C,D,$,J,we,He){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ue(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.hiddenUpdates=Ue(null),this.identifierPrefix=C,this.onUncaughtError=D,this.onCaughtError=$,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=He,this.incompleteTransitions=new Map}function BM(m,g,b,C,D,$,J,we,He,st,ft,xt){return m=new jne(m,g,b,J,He,st,ft,xt,we),g=1,$===!0&&(g|=24),$=_r(3,null,null,g),m.current=$,$.stateNode=m,g=aC(),g.refCount++,m.pooledCache=g,g.refCount++,$.memoizedState={element:C,isDehydrated:b,cache:g},oC($),m}function HM(m){return m?(m=gm,m):gm}function qM(m,g,b,C,D,$){D=HM(D),C.context===null?C.context=D:C.pendingContext=D,C=xc(g),C.payload={element:b},$=$===void 0?null:$,$!==null&&(C.callback=$),b=yc(m,C,g),b!==null&&(sr(b,m,g),Oh(b,m,g))}function GM(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var b=m.retryLane;m.retryLane=b!==0&&b<g?b:g}}function SS(m,g){GM(m,g),(m=m.alternate)&&GM(m,g)}function WM(m){if(m.tag===13||m.tag===31){var g=Pd(m,67108864);g!==null&&sr(g,m,67108864),SS(m,67108864)}}function VM(m){if(m.tag===13||m.tag===31){var g=Lr();g=Je(g);var b=Pd(m,g);b!==null&&sr(b,m,g),SS(m,g)}}var Sy=!0;function Cne(m,g,b,C){var D=Q.T;Q.T=null;var $=te.p;try{te.p=2,_S(m,g,b,C)}finally{te.p=$,Q.T=D}}function Sne(m,g,b,C){var D=Q.T;Q.T=null;var $=te.p;try{te.p=8,_S(m,g,b,C)}finally{te.p=$,Q.T=D}}function _S(m,g,b,C){if(Sy){var D=AS(C);if(D===null)mS(m,g,C,_y,b),QM(m,C);else if(Ane(D,m,g,b,C))C.stopPropagation();else if(QM(m,C),g&4&&-1<_ne.indexOf(m)){for(;D!==null;){var $=_e(D);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var J=F($.pendingLanes);if(J!==0){var we=$;for(we.pendingLanes|=2,we.entangledLanes|=2;J;){var He=1<<31-nt(J);we.entanglements[1]|=He,J&=~He}so($),(Cn&6)===0&&(ly=je()+500,Kh(0))}}break;case 31:case 13:we=Pd($,2),we!==null&&sr(we,$,2),dy(),SS($,2)}if($=AS(C),$===null&&mS(m,g,C,_y,b),$===D)break;D=$}D!==null&&C.stopPropagation()}else mS(m,g,C,null,b)}}function AS(m){return m=E1(m),TS(m)}var _y=null;function TS(m){if(_y=null,m=Z(m),m!==null){var g=i(m);if(g===null)m=null;else{var b=g.tag;if(b===13){if(m=o(g),m!==null)return m;m=null}else if(b===31){if(m=l(g),m!==null)return m;m=null}else if(b===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return _y=m,null}function YM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case oe:return 2;case U:return 8;case V:case be:return 32;case ze:return 268435456;default:return 32}default:return 32}}var ES=!1,Ec=null,kc=null,Lc=null,ag=new Map,sg=new Map,Pc=[],_ne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QM(m,g){switch(m){case"focusin":case"focusout":Ec=null;break;case"dragenter":case"dragleave":kc=null;break;case"mouseover":case"mouseout":Lc=null;break;case"pointerover":case"pointerout":ag.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":sg.delete(g.pointerId)}}function rg(m,g,b,C,D,$){return m===null||m.nativeEvent!==$?(m={blockedOn:g,domEventName:b,eventSystemFlags:C,nativeEvent:$,targetContainers:[D]},g!==null&&(g=_e(g),g!==null&&WM(g)),m):(m.eventSystemFlags|=C,g=m.targetContainers,D!==null&&g.indexOf(D)===-1&&g.push(D),m)}function Ane(m,g,b,C,D){switch(g){case"focusin":return Ec=rg(Ec,m,g,b,C,D),!0;case"dragenter":return kc=rg(kc,m,g,b,C,D),!0;case"mouseover":return Lc=rg(Lc,m,g,b,C,D),!0;case"pointerover":var $=D.pointerId;return ag.set($,rg(ag.get($)||null,m,g,b,C,D)),!0;case"gotpointercapture":return $=D.pointerId,sg.set($,rg(sg.get($)||null,m,g,b,C,D)),!0}return!1}function KM(m){var g=Z(m.target);if(g!==null){var b=i(g);if(b!==null){if(g=b.tag,g===13){if(g=o(b),g!==null){m.blockedOn=g,Pt(m.priority,function(){VM(b)});return}}else if(g===31){if(g=l(b),g!==null){m.blockedOn=g,Pt(m.priority,function(){VM(b)});return}}else if(g===3&&b.stateNode.current.memoizedState.isDehydrated){m.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Ay(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var b=AS(m.nativeEvent);if(b===null){b=m.nativeEvent;var C=new b.constructor(b.type,b);T1=C,b.target.dispatchEvent(C),T1=null}else return g=_e(b),g!==null&&WM(g),m.blockedOn=b,!1;g.shift()}return!0}function XM(m,g,b){Ay(m)&&b.delete(g)}function Tne(){ES=!1,Ec!==null&&Ay(Ec)&&(Ec=null),kc!==null&&Ay(kc)&&(kc=null),Lc!==null&&Ay(Lc)&&(Lc=null),ag.forEach(XM),sg.forEach(XM)}function Ty(m,g){m.blockedOn===g&&(m.blockedOn=null,ES||(ES=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Tne)))}var Ey=null;function ZM(m){Ey!==m&&(Ey=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ey===m&&(Ey=null);for(var g=0;g<m.length;g+=3){var b=m[g],C=m[g+1],D=m[g+2];if(typeof C!="function"){if(TS(C||b)===null)continue;break}var $=_e(b);$!==null&&(m.splice(g,3),g-=3,AC($,{pending:!0,data:D,method:b.method,action:C},C,D))}}))}function zm(m){function g(He){return Ty(He,m)}Ec!==null&&Ty(Ec,m),kc!==null&&Ty(kc,m),Lc!==null&&Ty(Lc,m),ag.forEach(g),sg.forEach(g);for(var b=0;b<Pc.length;b++){var C=Pc[b];C.blockedOn===m&&(C.blockedOn=null)}for(;0<Pc.length&&(b=Pc[0],b.blockedOn===null);)KM(b),b.blockedOn===null&&Pc.shift();if(b=(m.ownerDocument||m).$$reactFormReplay,b!=null)for(C=0;C<b.length;C+=3){var D=b[C],$=b[C+1],J=D[rn]||null;if(typeof $=="function")J||ZM(b);else if(J){var we=null;if($&&$.hasAttribute("formAction")){if(D=$,J=$[rn]||null)we=J.formAction;else if(TS(D)!==null)continue}else we=J.action;typeof we=="function"?b[C+1]=we:(b.splice(C,3),C-=3),ZM(b)}}}function JM(){function m($){$.canIntercept&&$.info==="react-transition"&&$.intercept({handler:function(){return new Promise(function(J){return D=J})},focusReset:"manual",scroll:"manual"})}function g(){D!==null&&(D(),D=null),C||setTimeout(b,20)}function b(){if(!C&&!navigation.transition){var $=navigation.currentEntry;$&&$.url!=null&&navigation.navigate($.url,{state:$.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,D=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(b,100),function(){C=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),D!==null&&(D(),D=null)}}}function kS(m){this._internalRoot=m}ky.prototype.render=kS.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var b=g.current,C=Lr();qM(b,C,m,g,null,null)},ky.prototype.unmount=kS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;qM(m.current,2,null,m,null,null),dy(),g[aa]=null}};function ky(m){this._internalRoot=m}ky.prototype.unstable_scheduleHydration=function(m){if(m){var g=bt();m={blockedOn:null,target:m,priority:g};for(var b=0;b<Pc.length&&g!==0&&g<Pc[b].priority;b++);Pc.splice(b,0,m),b===0&&KM(m)}};var eI=t.version;if(eI!=="19.2.0")throw Error(s(527,eI,"19.2.0"));te.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=d(g),m=m!==null?u(m):null,m=m===null?null:m.stateNode,m};var Ene={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ly.isDisabled&&Ly.supportsFiber)try{Ae=Ly.inject(Ene),Pe=Ly}catch{}}return og.createRoot=function(m,g){if(!r(m))throw Error(s(299));var b=!1,C="",D=o5,$=l5,J=c5;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(D=g.onUncaughtError),g.onCaughtError!==void 0&&($=g.onCaughtError),g.onRecoverableError!==void 0&&(J=g.onRecoverableError)),g=BM(m,1,!1,null,null,b,C,null,D,$,J,JM),m[aa]=g.current,uS(m),new kS(g)},og.hydrateRoot=function(m,g,b){if(!r(m))throw Error(s(299));var C=!1,D="",$=o5,J=l5,we=c5,He=null;return b!=null&&(b.unstable_strictMode===!0&&(C=!0),b.identifierPrefix!==void 0&&(D=b.identifierPrefix),b.onUncaughtError!==void 0&&($=b.onUncaughtError),b.onCaughtError!==void 0&&(J=b.onCaughtError),b.onRecoverableError!==void 0&&(we=b.onRecoverableError),b.formState!==void 0&&(He=b.formState)),g=BM(m,1,!0,g,b??null,C,D,He,$,J,we,JM),g.context=HM(null),b=g.current,C=Lr(),C=Je(C),D=xc(C),D.callback=null,yc(b,D,C),b=C,g.current.lanes=b,K(g,b),so(g),m[aa]=g.current,uS(m),new ky(g)},og.version="19.2.0",og}var dI;function zne(){if(dI)return DS.exports;dI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),DS.exports=Rne(),DS.exports}var Fne=zne();var uI="popstate";function Une(e={}){function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return zT("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(s,r){return typeof r=="string"?r:up(r)}return Hne(t,a,null,e)}function ca(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bne(){return Math.random().toString(36).substring(2,10)}function mI(e,t){return{usr:e.state,key:e.key,idx:t}}function zT(e,t,a=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Wf(t):t,state:a,key:t&&t.key||s||Bne()}}function up({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Wf(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Hne(e,t,a,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function f(){l="POP";let v=u(),j=v==null?null:v-d;d=v,c&&c({action:l,location:N.location,delta:j})}function p(v,j){l="PUSH";let w=zT(N.location,v,j);d=u()+1;let S=mI(w,d),A=N.createHref(w);try{o.pushState(S,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(A)}i&&c&&c({action:l,location:N.location,delta:1})}function x(v,j){l="REPLACE";let w=zT(N.location,v,j);d=u();let S=mI(w,d),A=N.createHref(w);o.replaceState(S,"",A),i&&c&&c({action:l,location:N.location,delta:0})}function y(v){return qne(v)}let N={get action(){return l},get location(){return e(r,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(uI,f),c=v,()=>{r.removeEventListener(uI,f),c=null}},createHref(v){return t(r,v)},createURL:y,encodeLocation(v){let j=y(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:p,replace:x,go(v){return o.go(v)}};return N}function qne(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),ca(a,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:up(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function mH(e,t,a="/"){return Gne(e,t,a,!1)}function Gne(e,t,a,s){let r=typeof t=="string"?Wf(t):t,i=Il(r.pathname||"/",a);if(i==null)return null;let o=fH(e);Wne(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=aae(i);l=tae(o[c],d,s)}return l}function fH(e,t=[],a=[],s="",r=!1){let i=(o,l,c=r,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;ca(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let f=Pl([s,u.relativePath]),p=a.concat(u);o.children&&o.children.length>0&&(ca(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),fH(o.children,t,p,f,c)),!(o.path==null&&!o.index)&&t.push({path:f,score:Jne(f,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of hH(o.path))i(o,l,!0,c)}),t}function hH(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=hH(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Wne(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:eae(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var Vne=/^:[\w-]+$/,Yne=3,Qne=2,Kne=1,Xne=10,Zne=-2,fI=e=>e==="*";function Jne(e,t){let a=e.split("/"),s=a.length;return a.some(fI)&&(s+=Zne),t&&(s+=Qne),a.filter(r=>!fI(r)).reduce((r,i)=>r+(Vne.test(i)?Yne:i===""?Kne:Xne),s)}function eae(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function tae(e,t,a=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=fv({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!f&&d&&a&&!s[s.length-1].route.index&&(f=fv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Pl([i,f.pathname]),pathnameBase:oae(Pl([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Pl([i,f.pathnameBase]))}return o}function fv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=nae(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:f},p)=>{if(u==="*"){let y=l[p]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[p];return f&&!x?d[u]=void 0:d[u]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function nae(e,t=!1,a=!0){pi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function aae(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Il(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}var sae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function rae(e,t="/"){let{pathname:a,search:s="",hash:r=""}=typeof e=="string"?Wf(e):e,i;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?i=hI(a.substring(1),"/"):i=hI(a,t)):i=t,{pathname:i,search:lae(s),hash:cae(r)}}function hI(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function $S(e,t,a,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iae(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function oL(e){let t=iae(e);return t.map((a,s)=>s===t.length-1?a.pathname:a.pathnameBase)}function lL(e,t,a,s=!1){let r;typeof e=="string"?r=Wf(e):(r={...e},ca(!r.pathname||!r.pathname.includes("?"),$S("?","pathname","search",r)),ca(!r.pathname||!r.pathname.includes("#"),$S("#","pathname","hash",r)),ca(!r.search||!r.search.includes("#"),$S("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=a;else{let f=t.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=rae(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var Pl=e=>e.join("/").replace(/\/\/+/g,"/"),oae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,dae=class{constructor(e,t,a,s=!1){this.status=e,this.statusText=t||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function uae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function mae(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var gH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pH(e,t){let a=e;if(typeof a!="string"||!sae.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,r=!1;if(gH)try{let i=new URL(window.location.href),o=a.startsWith("//")?new URL(i.protocol+a):new URL(a),l=Il(o.pathname,t);o.origin===i.origin&&l!=null?a=l+o.search+o.hash:r=!0}catch{pi(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xH=["POST","PUT","PATCH","DELETE"];new Set(xH);var fae=["GET",...xH];new Set(fae);var Vf=h.createContext(null);Vf.displayName="DataRouter";var Hw=h.createContext(null);Hw.displayName="DataRouterState";var hae=h.createContext(!1),yH=h.createContext({isTransitioning:!1});yH.displayName="ViewTransition";var gae=h.createContext(new Map);gae.displayName="Fetchers";var pae=h.createContext(null);pae.displayName="Await";var Hr=h.createContext(null);Hr.displayName="Navigation";var Zp=h.createContext(null);Zp.displayName="Location";var ji=h.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var cL=h.createContext(null);cL.displayName="RouteError";var bH="REACT_ROUTER_ERROR",xae="REDIRECT",yae="ROUTE_ERROR_RESPONSE";function bae(e){if(e.startsWith(`${bH}:${xae}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function vae(e){if(e.startsWith(`${bH}:${yae}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new dae(t.status,t.statusText,t.data)}catch{}}function wae(e,{relative:t}={}){ca(Yf(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=h.useContext(Hr),{hash:r,pathname:i,search:o}=Jp(e,{relative:t}),l=i;return a!=="/"&&(l=i==="/"?a:Pl([a,i])),s.createHref({pathname:l,search:o,hash:r})}function Yf(){return h.useContext(Zp)!=null}function Xt(){return ca(Yf(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Zp).location}var vH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wH(e){h.useContext(Hr).static||h.useLayoutEffect(e)}function Nt(){let{isDataRoute:e}=h.useContext(ji);return e?Iae():Nae()}function Nae(){ca(Yf(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(Vf),{basename:t,navigator:a}=h.useContext(Hr),{matches:s}=h.useContext(ji),{pathname:r}=Xt(),i=JSON.stringify(oL(s)),o=h.useRef(!1);return wH(()=>{o.current=!0}),h.useCallback((c,d={})=>{if(pi(o.current,vH),!o.current)return;if(typeof c=="number"){a.go(c);return}let u=lL(c,JSON.parse(i),r,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Pl([t,u.pathname])),(d.replace?a.replace:a.push)(u,d.state,d)},[t,a,i,r,e])}var jae=h.createContext(null);function Cae(e){let t=h.useContext(ji).outlet;return h.useMemo(()=>t&&h.createElement(jae.Provider,{value:e},t),[t,e])}function Ho(){let{matches:e}=h.useContext(ji),t=e[e.length-1];return t?t.params:{}}function Jp(e,{relative:t}={}){let{matches:a}=h.useContext(ji),{pathname:s}=Xt(),r=JSON.stringify(oL(a));return h.useMemo(()=>lL(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function Sae(e,t){return NH(e,t)}function NH(e,t,a,s,r){ca(Yf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(Hr),{matches:o}=h.useContext(ji),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",f=l&&l.route;{let w=f&&f.path||"";CH(d,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Xt(),x;if(t){let w=typeof t=="string"?Wf(t):t;ca(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=p;let y=x.pathname||"/",N=y;if(u!=="/"){let w=u.replace(/^\//,"").split("/");N="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=mH(e,{pathname:N});pi(f||v!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),pi(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=kae(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Pl([u,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Pl([u,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,a,s,r);return t&&j?h.createElement(Zp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},j):j}function _ae(){let e=Mae(),t=uae(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),a?h.createElement("pre",{style:r},a):null,o)}var Aae=h.createElement(_ae,null),jH=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=vae(e.digest);a&&(e=a)}let t=e!==void 0?h.createElement(ji.Provider,{value:this.props.routeContext},h.createElement(cL.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?h.createElement(Tae,{error:e},t):t}};jH.contextType=hae;var RS=new WeakMap;function Tae({children:e,error:t}){let{basename:a}=h.useContext(Hr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=bae(t.digest);if(s){let r=RS.get(t);if(r)throw r;let i=pH(s.location,a);if(gH&&!RS.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw RS.set(t,o),o}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function Eae({routeContext:e,match:t,children:a}){let s=h.useContext(Vf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(ji.Provider,{value:e},a)}function kae(e,t=[],a=null,s=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,o=a?.errors;if(o!=null){let u=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);ca(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(a)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:x}=a,y=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=a&&s?(u,f)=>{s(u,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:mae(a.matches),errorInfo:f})}:void 0;return i.reduceRight((u,f,p)=>{let x,y=!1,N=null,v=null;a&&(x=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||Aae,l&&(c<0&&p===0?(CH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):c===p&&(y=!0,v=f.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,p+1)),w=()=>{let S;return x?S=N:y?S=v:f.route.Component?S=h.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,h.createElement(Eae,{match:f,routeContext:{outlet:u,matches:j,isDataRoute:a!=null},children:S})};return a&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?h.createElement(jH,{location:a.location,revalidation:a.revalidation,component:N,error:x,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:d}):w()},null)}function dL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lae(e){let t=h.useContext(Vf);return ca(t,dL(e)),t}function Pae(e){let t=h.useContext(Hw);return ca(t,dL(e)),t}function Dae(e){let t=h.useContext(ji);return ca(t,dL(e)),t}function uL(e){let t=Dae(e),a=t.matches[t.matches.length-1];return ca(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function Oae(){return uL("useRouteId")}function Mae(){let e=h.useContext(cL),t=Pae("useRouteError"),a=uL("useRouteError");return e!==void 0?e:t.errors?.[a]}function Iae(){let{router:e}=Lae("useNavigate"),t=uL("useNavigate"),a=h.useRef(!1);return wH(()=>{a.current=!0}),h.useCallback(async(r,i={})=>{pi(a.current,vH),a.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var gI={};function CH(e,t,a){!t&&!gI[e]&&(gI[e]=!0,pi(!1,a))}h.memo($ae);function $ae({routes:e,future:t,state:a,onError:s}){return NH(e,void 0,a,s,t)}function li({to:e,replace:t,state:a,relative:s}){ca(Yf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=h.useContext(Hr);pi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(ji),{pathname:o}=Xt(),l=Nt(),c=lL(e,oL(i),o,s==="path"),d=JSON.stringify(c);return h.useEffect(()=>{l(JSON.parse(d),{replace:t,state:a,relative:s})},[l,d,s,t,a]),null}function ex(e){return Cae(e.context)}function yt(e){ca(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Rae({basename:e="/",children:t=null,location:a,navigationType:s="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){ca(!Yf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:l,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[l,r,i,o]);typeof a=="string"&&(a=Wf(a));let{pathname:d="/",search:u="",hash:f="",state:p=null,key:x="default"}=a,y=h.useMemo(()=>{let N=Il(d,l);return N==null?null:{location:{pathname:N,search:u,hash:f,state:p,key:x},navigationType:s}},[l,d,u,f,p,x,s]);return pi(y!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:h.createElement(Hr.Provider,{value:c},h.createElement(Zp.Provider,{children:t,value:y}))}function zae({children:e,location:t}){return Sae(FT(e),t)}function FT(e,t=[]){let a=[];return h.Children.forEach(e,(s,r)=>{if(!h.isValidElement(s))return;let i=[...t,r];if(s.type===h.Fragment){a.push.apply(a,FT(s.props.children,i));return}ca(s.type===yt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ca(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=FT(s.props.children,i)),a.push(o)}),a}var Gb="get",Wb="application/x-www-form-urlencoded";function qw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Fae(e){return qw(e)&&e.tagName.toLowerCase()==="button"}function Uae(e){return qw(e)&&e.tagName.toLowerCase()==="form"}function Bae(e){return qw(e)&&e.tagName.toLowerCase()==="input"}function Hae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qae(e,t){return e.button===0&&(!t||t==="_self")&&!Hae(e)}function UT(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let s=e[a];return t.concat(Array.isArray(s)?s.map(r=>[a,r]):[[a,s]])},[]))}function Gae(e,t){let a=UT(e);return t&&t.forEach((s,r)=>{a.has(r)||t.getAll(r).forEach(i=>{a.append(r,i)})}),a}var Py=null;function Wae(){if(Py===null)try{new FormData(document.createElement("form"),0),Py=!1}catch{Py=!0}return Py}var Vae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zS(e){return e!=null&&!Vae.has(e)?(pi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wb}"`),null):e}function Yae(e,t){let a,s,r,i,o;if(Uae(e)){let l=e.getAttribute("action");s=l?Il(l,t):null,a=e.getAttribute("method")||Gb,r=zS(e.getAttribute("enctype"))||Wb,i=new FormData(e)}else if(Fae(e)||Bae(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Il(c,t):null,a=e.getAttribute("formmethod")||l.getAttribute("method")||Gb,r=zS(e.getAttribute("formenctype"))||zS(l.getAttribute("enctype"))||Wb,i=new FormData(l,e),!Wae()){let{name:d,type:u,value:f}=e;if(u==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,f)}}else{if(qw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Gb,s=null,r=Wb,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:a.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mL(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qae(e,t,a,s){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&Il(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function Kae(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xae(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Zae(e,t,a){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await Kae(i,a);return o.links?o.links():[]}return[]}));return nse(s.flat(1).filter(Xae).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function pI(e,t,a,s,r,i){let o=(c,d)=>a[d]?c.route.id!==a[d].route.id:!0,l=(c,d)=>a[d].pathname!==c.pathname||a[d].route.path?.endsWith("*")&&a[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Jae(e,t,{includeHydrateFallback:a}={}){return ese(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function ese(e){return[...new Set(e)]}function tse(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}function nse(e,t){let a=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(tse(r));return a.has(i)||(a.add(i),s.push({key:i,link:r})),s},[])}function SH(){let e=h.useContext(Vf);return mL(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ase(){let e=h.useContext(Hw);return mL(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var fL=h.createContext(void 0);fL.displayName="FrameworkContext";function _H(){let e=h.useContext(fL);return mL(e,"You must render this element inside a <HydratedRouter> element"),e}function sse(e,t){let a=h.useContext(fL),[s,r]=h.useState(!1),[i,o]=h.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:f}=t,p=h.useRef(null);h.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let N=j=>{j.forEach(w=>{o(w.isIntersecting)})},v=new IntersectionObserver(N,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[e]),h.useEffect(()=>{if(s){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[s]);let x=()=>{r(!0)},y=()=>{r(!1),o(!1)};return a?e!=="intent"?[i,p,{}]:[i,p,{onFocus:lg(l,x),onBlur:lg(c,y),onMouseEnter:lg(d,x),onMouseLeave:lg(u,y),onTouchStart:lg(f,x)}]:[!1,p,{}]}function lg(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function rse({page:e,...t}){let{router:a}=SH(),s=h.useMemo(()=>mH(a.routes,e,a.basename),[a.routes,e,a.basename]);return s?h.createElement(ose,{page:e,matches:s,...t}):null}function ise(e){let{manifest:t,routeModules:a}=_H(),[s,r]=h.useState([]);return h.useEffect(()=>{let i=!1;return Zae(e,t,a).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,a]),s}function ose({page:e,matches:t,...a}){let s=Xt(),{future:r,manifest:i,routeModules:o}=_H(),{basename:l}=SH(),{loaderData:c,matches:d}=ase(),u=h.useMemo(()=>pI(e,t,d,i,s,"data"),[e,t,d,i,s]),f=h.useMemo(()=>pI(e,t,d,i,s,"assets"),[e,t,d,i,s]),p=h.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let N=new Set,v=!1;if(t.forEach(w=>{let S=i.routes[w.route.id];!S||!S.hasLoader||(!u.some(A=>A.route.id===w.route.id)&&w.route.id in c&&o[w.route.id]?.shouldRevalidate||S.hasClientLoader?v=!0:N.add(w.route.id))}),N.size===0)return[];let j=Qae(e,l,r.unstable_trailingSlashAwareDataRequests,"data");return v&&N.size>0&&j.searchParams.set("_routes",t.filter(w=>N.has(w.route.id)).map(w=>w.route.id).join(",")),[j.pathname+j.search]},[l,r.unstable_trailingSlashAwareDataRequests,c,s,i,u,t,e,o]),x=h.useMemo(()=>Jae(f,i),[f,i]),y=ise(f);return h.createElement(h.Fragment,null,p.map(N=>h.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...a})),x.map(N=>h.createElement("link",{key:N,rel:"modulepreload",href:N,...a})),y.map(({key:N,link:v})=>h.createElement("link",{key:N,nonce:a.nonce,...v,crossOrigin:v.crossOrigin??a.crossOrigin})))}function lse(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var cse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cse&&(window.__reactRouterVersion="7.13.0")}catch{}function dse({basename:e,children:t,unstable_useTransitions:a,window:s}){let r=h.useRef();r.current==null&&(r.current=Une({window:s,v5Compat:!0}));let i=r.current,[o,l]=h.useState({action:i.action,location:i.location}),c=h.useCallback(d=>{a===!1?l(d):h.startTransition(()=>l(d))},[a]);return h.useLayoutEffect(()=>i.listen(c),[i,c]),h.createElement(Rae,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:a})}var AH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sd=h.forwardRef(function({onClick:t,discover:a="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},y){let{basename:N,unstable_useTransitions:v}=h.useContext(Hr),j=typeof d=="string"&&AH.test(d),w=pH(d,N);d=w.to;let S=wae(d,{relative:r}),[A,k,_]=sse(s,x),L=fse(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:v});function T(R){t&&t(R),R.defaultPrevented||L(R)}let M=h.createElement("a",{...x,..._,href:w.absoluteURL||S,onClick:w.isExternal||i?t:T,ref:lse(y,k),target:c,"data-discover":!j&&a==="render"?"true":void 0});return A&&!j?h.createElement(h.Fragment,null,M,h.createElement(rse,{page:S})):M});sd.displayName="Link";var $t=h.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let f=Jp(o,{relative:d.relative}),p=Xt(),x=h.useContext(Hw),{navigator:y,basename:N}=h.useContext(Hr),v=x!=null&&yse(f)&&l===!0,j=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,w=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(w=w.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&N&&(S=Il(S,N)||S);const A=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let k=w===j||!r&&w.startsWith(j)&&w.charAt(A)==="/",_=S!=null&&(S===j||!r&&S.startsWith(j)&&S.charAt(j.length)==="/"),L={isActive:k,isPending:_,isTransitioning:v},T=k?t:void 0,M;typeof s=="function"?M=s(L):M=[s,k?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(L):i;return h.createElement(sd,{...d,"aria-current":T,className:M,ref:u,style:R,to:o,viewTransition:l},typeof c=="function"?c(L):c)});$t.displayName="NavLink";var use=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:s,replace:r,state:i,method:o=Gb,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},y)=>{let{unstable_useTransitions:N}=h.useContext(Hr),v=pse(),j=xse(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&AH.test(l),A=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let _=k.nativeEvent.submitter,L=_?.getAttribute("formmethod")||o,T=()=>v(_||k.currentTarget,{fetcherKey:t,method:L,navigate:a,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p});N&&a!==!1?h.startTransition(()=>T()):T()};return h.createElement("form",{ref:y,method:w,action:j,onSubmit:s?c:A,...x,"data-discover":!S&&e==="render"?"true":void 0})});use.displayName="Form";function mse(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TH(e){let t=h.useContext(Vf);return ca(t,mse(e)),t}function fse(e,{target:t,replace:a,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=Nt(),u=Xt(),f=Jp(e,{relative:i});return h.useCallback(p=>{if(qae(p,t)){p.preventDefault();let x=a!==void 0?a:up(u)===up(f),y=()=>d(e,{replace:x,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?h.startTransition(()=>y()):y()}},[u,d,f,a,s,t,e,r,i,o,l,c])}function Fs(e){pi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(UT(e)),a=h.useRef(!1),s=Xt(),r=h.useMemo(()=>Gae(s.search,a.current?null:t.current),[s.search]),i=Nt(),o=h.useCallback((l,c)=>{const d=UT(typeof l=="function"?l(new URLSearchParams(r)):l);a.current=!0,i("?"+d,c)},[i,r]);return[r,o]}var hse=0,gse=()=>`__${String(++hse)}__`;function pse(){let{router:e}=TH("useSubmit"),{basename:t}=h.useContext(Hr),a=Oae(),s=e.fetch,r=e.navigate;return h.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:u,body:f}=Yae(i,t);if(o.navigate===!1){let p=o.fetcherKey||gse();await s(p,a,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:f,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await r(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:f,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,r,t,a])}function xse(e,{relative:t}={}){let{basename:a}=h.useContext(Hr),s=h.useContext(ji);ca(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Jp(e||".",{relative:t})},o=Xt();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:Pl([a,i.pathname])),up(i)}function yse(e,{relative:t}={}){let a=h.useContext(yH);ca(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=TH("useViewTransitionState"),r=Jp(e,{relative:t});if(!a.isTransitioning)return!1;let i=Il(a.currentLocation.pathname,s)||a.currentLocation.pathname,o=Il(a.nextLocation.pathname,s)||a.nextLocation.pathname;return fv(r.pathname,o)!=null||fv(r.pathname,i)!=null}var Hi=uH();const Dy=Zi(Hi);function EH(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(a=EH(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Lt(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=EH(e))&&(s&&(s+=" "),s+=t);return s}function bse(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}bse(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var tx=e=>typeof e=="number"&&!isNaN(e),_u=e=>typeof e=="string",$l=e=>typeof e=="function",vse=e=>_u(e)||tx(e),BT=e=>_u(e)||$l(e)?e:null,wse=(e,t)=>e===!1||tx(e)&&e>0?e:t,HT=e=>h.isValidElement(e)||_u(e)||$l(e)||tx(e);function Nse(e,t,a=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,a)})})}function jse({enter:e,exit:t,appendPosition:a=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:d,isIn:u,playToast:f}){let p=a?`${e}--${o}`:e,x=a?`${t}--${o}`:t,y=h.useRef(0);return h.useLayoutEffect(()=>{let N=d.current,v=p.split(" "),j=w=>{w.target===d.current&&(f(),N.removeEventListener("animationend",j),N.removeEventListener("animationcancel",j),y.current===0&&w.type!=="animationcancel"&&N.classList.remove(...v))};N.classList.add(...v),N.addEventListener("animationend",j),N.addEventListener("animationcancel",j)},[]),h.useEffect(()=>{let N=d.current,v=()=>{N.removeEventListener("animationend",v),s?Nse(N,c,r):c()};u||(l?v():(y.current=1,N.className+=` ${x}`,N.addEventListener("animationend",v)))},[u]),pt.createElement(pt.Fragment,null,i)}}function xI(e,t){return{content:kH(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function kH(e,t,a=!1){return h.isValidElement(e)&&!_u(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):$l(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):e}function Cse({closeToast:e,theme:t,ariaLabel:a="close"}){return pt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":a},pt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},pt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Sse({delay:e,isRunning:t,closeToast:a,type:s="default",hide:r,className:i,controlledProgress:o,progress:l,rtl:c,isIn:d,theme:u}){let f=r||o&&l===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(p.transform=`scaleX(${l})`);let x=Lt("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),y=$l(i)?i({rtl:c,type:s,defaultClassName:x}):Lt(x,i),N={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{d&&a()}};return pt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},pt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),pt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:y,style:p,...N}))}var _se=1,LH=()=>`${_se++}`;function Ase(e,t,a){let s=1,r=0,i=[],o=[],l=t,c=new Map,d=new Set,u=w=>(d.add(w),()=>d.delete(w)),f=()=>{o=Array.from(c.values()),d.forEach(w=>w())},p=({containerId:w,toastId:S,updateId:A})=>{let k=w?w!==e:e!==1,_=c.has(S)&&A==null;return k||_},x=(w,S)=>{c.forEach(A=>{var k;(S==null||S===A.props.toastId)&&((k=A.toggle)==null||k.call(A,w))})},y=w=>{var S,A;(A=(S=w.props)==null?void 0:S.onClose)==null||A.call(S,w.removalReason),w.isActive=!1},N=w=>{if(w==null)c.forEach(y);else{let S=c.get(w);S&&y(S)}f()},v=()=>{r-=i.length,i=[]},j=w=>{var S,A;let{toastId:k,updateId:_}=w.props,L=_==null;w.staleId&&c.delete(w.staleId),w.isActive=!0,c.set(k,w),f(),a(xI(w,L?"added":"updated")),L&&((A=(S=w.props).onOpen)==null||A.call(S))};return{id:e,props:l,observe:u,toggle:x,removeToast:N,toasts:c,clearQueue:v,buildToast:(w,S)=>{if(p(S))return;let{toastId:A,updateId:k,data:_,staleId:L,delay:T}=S,M=k==null;M&&r++;let R={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([O,I])=>I!=null)),toastId:A,updateId:k,data:_,isIn:!1,className:BT(S.className||l.toastClassName),progressClassName:BT(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:wse(S.autoClose,l.autoClose),closeToast(O){c.get(A).removalReason=O,N(A)},deleteToast(){let O=c.get(A);if(O!=null){if(a(xI(O,"removed")),c.delete(A),r--,r<0&&(r=0),i.length>0){j(i.shift());return}f()}}};R.closeButton=l.closeButton,S.closeButton===!1||HT(S.closeButton)?R.closeButton=S.closeButton:S.closeButton===!0&&(R.closeButton=HT(l.closeButton)?l.closeButton:!0);let z={content:w,props:R,staleId:L};l.limit&&l.limit>0&&r>l.limit&&M?i.push(z):tx(T)?setTimeout(()=>{j(z)},T):j(z)},setProps(w){l=w},setToggle:(w,S)=>{let A=c.get(w);A&&(A.toggle=S)},isToastActive:w=>{var S;return(S=c.get(w))==null?void 0:S.isActive},getSnapshot:()=>o}}var qs=new Map,mp=[],qT=new Set,Tse=e=>qT.forEach(t=>t(e)),PH=()=>qs.size>0;function Ese(){mp.forEach(e=>OH(e.content,e.options)),mp=[]}var kse=(e,{containerId:t})=>{var a;return(a=qs.get(t||1))==null?void 0:a.toasts.get(e)};function DH(e,t){var a;if(t)return!!((a=qs.get(t))!=null&&a.isToastActive(e));let s=!1;return qs.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function Lse(e){if(!PH()){mp=mp.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||vse(e))qs.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=qs.get(e.containerId);t?t.removeToast(e.id):qs.forEach(a=>{a.removeToast(e.id)})}}var Pse=(e={})=>{qs.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function OH(e,t){HT(e)&&(PH()||mp.push({content:e,options:t}),qs.forEach(a=>{a.buildToast(e,t)}))}function Dse(e){var t;(t=qs.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function MH(e,t){qs.forEach(a=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===a.id)&&a.toggle(e,t?.id)})}function Ose(e){let t=e.containerId||1;return{subscribe(a){let s=Ase(t,e,Tse);qs.set(t,s);let r=s.observe(a);return Ese(),()=>{r(),qs.delete(t)}},setProps(a){var s;(s=qs.get(t))==null||s.setProps(a)},getSnapshot(){var a;return(a=qs.get(t))==null?void 0:a.getSnapshot()}}}function Mse(e){return qT.add(e),()=>{qT.delete(e)}}function Ise(e){return e&&(_u(e.toastId)||tx(e.toastId))?e.toastId:LH()}function nx(e,t){return OH(e,t),t.toastId}function Gw(e,t){return{...t,type:t&&t.type||e,toastId:Ise(t)}}function Ww(e){return(t,a)=>nx(t,Gw(e,a))}function q(e,t){return nx(e,Gw("default",t))}q.loading=(e,t)=>nx(e,Gw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function $se(e,{pending:t,error:a,success:s},r){let i;t&&(i=_u(t)?q.loading(t,r):q.loading(t.render,{...r,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,u,f)=>{if(u==null){q.dismiss(i);return}let p={type:d,...o,...r,data:f},x=_u(u)?{render:u}:u;return i?q.update(i,{...p,...x}):q(x.render,{...p,...x}),f},c=$l(e)?e():e;return c.then(d=>l("success",s,d)).catch(d=>l("error",a,d)),c}q.promise=$se;q.success=Ww("success");q.info=Ww("info");q.error=Ww("error");q.warning=Ww("warning");q.warn=q.warning;q.dark=(e,t)=>nx(e,Gw("default",{theme:"dark",...t}));function Rse(e){Lse(e)}q.dismiss=Rse;q.clearWaitingQueue=Pse;q.isActive=DH;q.update=(e,t={})=>{let a=kse(e,t);if(a){let{props:s,content:r}=a,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:LH()};i.toastId!==e&&(i.staleId=e);let o=i.render||r;delete i.render,nx(o,i)}};q.done=e=>{q.update(e,{progress:1})};q.onChange=Mse;q.play=e=>MH(!0,e);q.pause=e=>MH(!1,e);function zse(e){var t;let{subscribe:a,getSnapshot:s,setProps:r}=h.useRef(Ose(e)).current;r(e);let i=(t=h.useSyncExternalStore(a,s,s))==null?void 0:t.slice();function o(l){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:u}=d.props;c.has(u)||c.set(u,[]),c.get(u).push(d)}),Array.from(c,d=>l(d[0],d[1]))}return{getToastToRender:o,isToastActive:DH,count:i?.length}}function Fse(e){let[t,a]=h.useState(!1),[s,r]=h.useState(!1),i=h.useRef(null),o=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:f}=e;Dse({id:e.toastId,containerId:e.containerId,fn:a}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||j(),window.addEventListener("focus",v),window.addEventListener("blur",j)}function x(){window.removeEventListener("focus",v),window.removeEventListener("blur",j)}function y(L){if(e.draggable===!0||e.draggable===L.pointerType){w();let T=i.current;o.canCloseOnClick=!0,o.canDrag=!0,T.style.transition="none",e.draggableDirection==="x"?(o.start=L.clientX,o.removalDistance=T.offsetWidth*(e.draggablePercent/100)):(o.start=L.clientY,o.removalDistance=T.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function N(L){let{top:T,bottom:M,left:R,right:z}=i.current.getBoundingClientRect();L.nativeEvent.type!=="touchend"&&e.pauseOnHover&&L.clientX>=R&&L.clientX<=z&&L.clientY>=T&&L.clientY<=M?j():v()}function v(){a(!0)}function j(){a(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",A),document.addEventListener("pointerup",k)}function S(){document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",k)}function A(L){let T=i.current;if(o.canDrag&&T){o.didMove=!0,t&&j(),e.draggableDirection==="x"?o.delta=L.clientX-o.start:o.delta=L.clientY-o.start,o.start!==L.clientX&&(o.canCloseOnClick=!1);let M=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;T.style.transform=`translate3d(${M},0)`,T.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function k(){S();let L=i.current;if(o.canDrag&&o.didMove&&L){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}L.style.transition="transform 0.2s, opacity 0.2s",L.style.removeProperty("transform"),L.style.removeProperty("opacity")}}let _={onPointerDown:y,onPointerUp:N};return l&&c&&(_.onMouseEnter=j,e.stacked||(_.onMouseLeave=v)),f&&(_.onClick=L=>{u&&u(L),o.canCloseOnClick&&d(!0)}),{playToast:v,pauseToast:j,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:_}}var Use=typeof window<"u"?h.useLayoutEffect:h.useEffect,Vw=({theme:e,type:t,isLoading:a,...s})=>pt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function Bse(e){return pt.createElement(Vw,{...e},pt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Hse(e){return pt.createElement(Vw,{...e},pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function qse(e){return pt.createElement(Vw,{...e},pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Gse(e){return pt.createElement(Vw,{...e},pt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Wse(){return pt.createElement("div",{className:"Toastify__spinner"})}var GT={info:Hse,warning:Bse,success:qse,error:Gse,spinner:Wse},Vse=e=>e in GT;function Yse({theme:e,type:t,isLoading:a,icon:s}){let r=null,i={theme:e,type:t};return s===!1||($l(s)?r=s({...i,isLoading:a}):h.isValidElement(s)?r=h.cloneElement(s,i):a?r=GT.spinner():Vse(t)&&(r=GT[t](i))),r}var Qse=e=>{let{isRunning:t,preventExitTransition:a,toastRef:s,eventHandlers:r,playToast:i}=Fse(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:f,closeToast:p,transition:x,position:y,className:N,style:v,progressClassName:j,updateId:w,role:S,progress:A,rtl:k,toastId:_,deleteToast:L,isIn:T,isLoading:M,closeOnClick:R,theme:z,ariaLabel:O}=e,I=Lt("Toastify__toast",`Toastify__toast-theme--${z}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":R}),B=$l(N)?N({rtl:k,position:y,type:u,defaultClassName:I}):Lt(I,N),ee=Yse(e),Q=!!A||!c,te={closeToast:p,type:u,theme:z},W=null;return o===!1||($l(o)?W=o(te):h.isValidElement(o)?W=h.cloneElement(o,te):W=Cse(te)),pt.createElement(x,{isIn:T,done:L,position:y,preventExitTransition:a,nodeRef:s,playToast:i},pt.createElement("div",{id:_,tabIndex:0,onClick:d,"data-in":T,className:B,...r,style:v,ref:s,...T&&{role:S,"aria-label":O}},ee!=null&&pt.createElement("div",{className:Lt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!M})},ee),kH(l,e,!t),W,!e.customProgressBar&&pt.createElement(Sse,{...w&&!Q?{key:`p-${w}`}:{},rtl:k,theme:z,delay:c,isRunning:t,isIn:T,closeToast:p,hide:f,type:u,className:j,controlledProgress:Q,progress:A||0})))},Kse=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Xse=jse(Kse("bounce",!0)),Zse={position:"top-right",transition:Xse,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function Jse(e){let t={...Zse,...e},a=e.stacked,[s,r]=h.useState(!0),i=h.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=zse(t),{className:d,style:u,rtl:f,containerId:p,hotKeys:x}=t;function y(v){let j=Lt("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":f});return $l(d)?d({position:v,rtl:f,defaultClassName:j}):Lt(j,BT(d))}function N(){a&&(r(!0),q.play())}return Use(()=>{var v;if(a){let j=i.current.querySelectorAll('[data-in="true"]'),w=12,S=(v=t.position)==null?void 0:v.includes("top"),A=0,k=0;Array.from(j).reverse().forEach((_,L)=>{let T=_;T.classList.add("Toastify__toast--stacked"),L>0&&(T.dataset.collapsed=`${s}`),T.dataset.pos||(T.dataset.pos=S?"top":"bot");let M=A*(s?.2:1)+(s?0:w*L);T.style.setProperty("--y",`${S?M:M*-1}px`),T.style.setProperty("--g",`${w}`),T.style.setProperty("--s",`${1-(s?k:0)}`),A+=T.offsetHeight,k+=.025})}},[s,c,a]),h.useEffect(()=>{function v(j){var w;let S=i.current;x(j)&&((w=S.querySelector('[tabIndex="0"]'))==null||w.focus(),r(!1),q.pause()),j.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),q.play())}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[x]),pt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{a&&(r(!1),q.pause())},onMouseLeave:N,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((v,j)=>{let w=j.length?{...u}:{...u,pointerEvents:"none"};return pt.createElement("div",{tabIndex:-1,className:y(v),"data-stacked":a,style:w,key:`c-${v}`},j.map(({content:S,props:A})=>pt.createElement(Qse,{...A,stacked:a,collapseAll:N,isIn:l(A.toastId,A.containerId),key:`t-${A.key}`},S)))}))}function IH(e,t){return function(){return e.apply(t,arguments)}}const{toString:ere}=Object.prototype,{getPrototypeOf:hL}=Object,{iterator:Yw,toStringTag:$H}=Symbol,Qw=(e=>t=>{const a=ere.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Ji=e=>(e=e.toLowerCase(),t=>Qw(t)===e),Kw=e=>t=>typeof t===e,{isArray:Qf}=Array,Cf=Kw("undefined");function ax(e){return e!==null&&!Cf(e)&&e.constructor!==null&&!Cf(e.constructor)&&fr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const RH=Ji("ArrayBuffer");function tre(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&RH(e.buffer),t}const nre=Kw("string"),fr=Kw("function"),zH=Kw("number"),sx=e=>e!==null&&typeof e=="object",are=e=>e===!0||e===!1,Vb=e=>{if(Qw(e)!=="object")return!1;const t=hL(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!($H in e)&&!(Yw in e)},sre=e=>{if(!sx(e)||ax(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},rre=Ji("Date"),ire=Ji("File"),ore=Ji("Blob"),lre=Ji("FileList"),cre=e=>sx(e)&&fr(e.pipe),dre=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||fr(e.append)&&((t=Qw(e))==="formdata"||t==="object"&&fr(e.toString)&&e.toString()==="[object FormData]"))},ure=Ji("URLSearchParams"),[mre,fre,hre,gre]=["ReadableStream","Request","Response","Headers"].map(Ji),pre=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rx(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Qf(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(ax(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function FH(e,t){if(ax(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s=a.length,r;for(;s-- >0;)if(r=a[s],t===r.toLowerCase())return r;return null}const ou=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,UH=e=>!Cf(e)&&e!==ou;function WT(){const{caseless:e,skipUndefined:t}=UH(this)&&this||{},a={},s=(r,i)=>{const o=e&&FH(a,i)||i;Vb(a[o])&&Vb(r)?a[o]=WT(a[o],r):Vb(r)?a[o]=WT({},r):Qf(r)?a[o]=r.slice():(!t||!Cf(r))&&(a[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&rx(arguments[r],s);return a}const xre=(e,t,a,{allOwnKeys:s}={})=>(rx(t,(r,i)=>{a&&fr(r)?e[i]=IH(r,a):e[i]=r},{allOwnKeys:s}),e),yre=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),bre=(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},vre=(e,t,a,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=a!==!1&&hL(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},wre=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return s!==-1&&s===a},Nre=e=>{if(!e)return null;if(Qf(e))return e;let t=e.length;if(!zH(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},jre=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&hL(Uint8Array)),Cre=(e,t)=>{const s=(e&&e[Yw]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},Sre=(e,t)=>{let a;const s=[];for(;(a=e.exec(t))!==null;)s.push(a);return s},_re=Ji("HTMLFormElement"),Are=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,r){return s.toUpperCase()+r}),yI=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),Tre=Ji("RegExp"),BH=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};rx(a,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},Ere=e=>{BH(e,(t,a)=>{if(fr(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(fr(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},kre=(e,t)=>{const a={},s=r=>{r.forEach(i=>{a[i]=!0})};return Qf(e)?s(e):s(String(e).split(t)),a},Lre=()=>{},Pre=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Dre(e){return!!(e&&fr(e.append)&&e[$H]==="FormData"&&e[Yw])}const Ore=e=>{const t=new Array(10),a=(s,r)=>{if(sx(s)){if(t.indexOf(s)>=0)return;if(ax(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Qf(s)?[]:{};return rx(s,(o,l)=>{const c=a(o,r+1);!Cf(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return a(e,0)},Mre=Ji("AsyncFunction"),Ire=e=>e&&(sx(e)||fr(e))&&fr(e.then)&&fr(e.catch),HH=((e,t)=>e?setImmediate:t?((a,s)=>(ou.addEventListener("message",({source:r,data:i})=>{r===ou&&i===a&&s.length&&s.shift()()},!1),r=>{s.push(r),ou.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",fr(ou.postMessage)),$re=typeof queueMicrotask<"u"?queueMicrotask.bind(ou):typeof process<"u"&&process.nextTick||HH,Rre=e=>e!=null&&fr(e[Yw]),dt={isArray:Qf,isArrayBuffer:RH,isBuffer:ax,isFormData:dre,isArrayBufferView:tre,isString:nre,isNumber:zH,isBoolean:are,isObject:sx,isPlainObject:Vb,isEmptyObject:sre,isReadableStream:mre,isRequest:fre,isResponse:hre,isHeaders:gre,isUndefined:Cf,isDate:rre,isFile:ire,isBlob:ore,isRegExp:Tre,isFunction:fr,isStream:cre,isURLSearchParams:ure,isTypedArray:jre,isFileList:lre,forEach:rx,merge:WT,extend:xre,trim:pre,stripBOM:yre,inherits:bre,toFlatObject:vre,kindOf:Qw,kindOfTest:Ji,endsWith:wre,toArray:Nre,forEachEntry:Cre,matchAll:Sre,isHTMLForm:_re,hasOwnProperty:yI,hasOwnProp:yI,reduceDescriptors:BH,freezeMethods:Ere,toObjectSet:kre,toCamelCase:Are,noop:Lre,toFiniteNumber:Pre,findKey:FH,global:ou,isContextDefined:UH,isSpecCompliantForm:Dre,toJSONObject:Ore,isAsyncFn:Mre,isThenable:Ire,setImmediate:HH,asap:$re,isIterable:Rre};function nn(e,t,a,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}dt.inherits(nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:dt.toJSONObject(this.config),code:this.code,status:this.status}}});const qH=nn.prototype,GH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{GH[e]={value:e}});Object.defineProperties(nn,GH);Object.defineProperty(qH,"isAxiosError",{value:!0});nn.from=(e,t,a,s,r,i)=>{const o=Object.create(qH);dt.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return nn.call(o,l,c,a,s,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const zre=null;function VT(e){return dt.isPlainObject(e)||dt.isArray(e)}function WH(e){return dt.endsWith(e,"[]")?e.slice(0,-2):e}function bI(e,t,a){return e?e.concat(t).map(function(r,i){return r=WH(r),!a&&i?"["+r+"]":r}).join(a?".":""):t}function Fre(e){return dt.isArray(e)&&!e.some(VT)}const Ure=dt.toFlatObject(dt,{},null,function(t){return/^is[A-Z]/.test(t)});function Xw(e,t,a){if(!dt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=dt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,v){return!dt.isUndefined(v[N])});const s=a.metaTokens,r=a.visitor||u,i=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&dt.isSpecCompliantForm(t);if(!dt.isFunction(r))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(dt.isDate(y))return y.toISOString();if(dt.isBoolean(y))return y.toString();if(!c&&dt.isBlob(y))throw new nn("Blob is not supported. Use a Buffer instead.");return dt.isArrayBuffer(y)||dt.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,N,v){let j=y;if(y&&!v&&typeof y=="object"){if(dt.endsWith(N,"{}"))N=s?N:N.slice(0,-2),y=JSON.stringify(y);else if(dt.isArray(y)&&Fre(y)||(dt.isFileList(y)||dt.endsWith(N,"[]"))&&(j=dt.toArray(y)))return N=WH(N),j.forEach(function(S,A){!(dt.isUndefined(S)||S===null)&&t.append(o===!0?bI([N],A,i):o===null?N:N+"[]",d(S))}),!1}return VT(y)?!0:(t.append(bI(v,N,i),d(y)),!1)}const f=[],p=Object.assign(Ure,{defaultVisitor:u,convertValue:d,isVisitable:VT});function x(y,N){if(!dt.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(y),dt.forEach(y,function(j,w){(!(dt.isUndefined(j)||j===null)&&r.call(t,j,dt.isString(w)?w.trim():w,N,p))===!0&&x(j,N?N.concat(w):[w])}),f.pop()}}if(!dt.isObject(e))throw new TypeError("data must be an object");return x(e),t}function vI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function gL(e,t){this._pairs=[],e&&Xw(e,this,t)}const VH=gL.prototype;VH.append=function(t,a){this._pairs.push([t,a])};VH.toString=function(t){const a=t?function(s){return t.call(this,s,vI)}:vI;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function Bre(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function YH(e,t,a){if(!t)return e;const s=a&&a.encode||Bre;dt.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(t,a):i=dt.isURLSearchParams(t)?t.toString():new gL(t,a).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class wI{constructor(){this.handlers=[]}use(t,a,s){return this.handlers.push({fulfilled:t,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){dt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const QH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hre=typeof URLSearchParams<"u"?URLSearchParams:gL,qre=typeof FormData<"u"?FormData:null,Gre=typeof Blob<"u"?Blob:null,Wre={isBrowser:!0,classes:{URLSearchParams:Hre,FormData:qre,Blob:Gre},protocols:["http","https","file","blob","url","data"]},pL=typeof window<"u"&&typeof document<"u",YT=typeof navigator=="object"&&navigator||void 0,Vre=pL&&(!YT||["ReactNative","NativeScript","NS"].indexOf(YT.product)<0),Yre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qre=pL&&window.location.href||"http://localhost",Kre=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pL,hasStandardBrowserEnv:Vre,hasStandardBrowserWebWorkerEnv:Yre,navigator:YT,origin:Qre},Symbol.toStringTag,{value:"Module"})),Os={...Kre,...Wre};function Xre(e,t){return Xw(e,new Os.classes.URLSearchParams,{visitor:function(a,s,r,i){return Os.isNode&&dt.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Zre(e){return dt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Jre(e){const t={},a=Object.keys(e);let s;const r=a.length;let i;for(s=0;s<r;s++)i=a[s],t[i]=e[i];return t}function KH(e){function t(a,s,r,i){let o=a[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=a.length;return o=!o&&dt.isArray(r)?r.length:o,c?(dt.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!dt.isObject(r[o]))&&(r[o]=[]),t(a,s,r[o],i)&&dt.isArray(r[o])&&(r[o]=Jre(r[o])),!l)}if(dt.isFormData(e)&&dt.isFunction(e.entries)){const a={};return dt.forEachEntry(e,(s,r)=>{t(Zre(s),r,a,0)}),a}return null}function eie(e,t,a){if(dt.isString(e))try{return(t||JSON.parse)(e),dt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const ix={transitional:QH,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const s=a.getContentType()||"",r=s.indexOf("application/json")>-1,i=dt.isObject(t);if(i&&dt.isHTMLForm(t)&&(t=new FormData(t)),dt.isFormData(t))return r?JSON.stringify(KH(t)):t;if(dt.isArrayBuffer(t)||dt.isBuffer(t)||dt.isStream(t)||dt.isFile(t)||dt.isBlob(t)||dt.isReadableStream(t))return t;if(dt.isArrayBufferView(t))return t.buffer;if(dt.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Xre(t,this.formSerializer).toString();if((l=dt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Xw(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),eie(t)):t}],transformResponse:[function(t){const a=this.transitional||ix.transitional,s=a&&a.forcedJSONParsing,r=this.responseType==="json";if(dt.isResponse(t)||dt.isReadableStream(t))return t;if(t&&dt.isString(t)&&(s&&!this.responseType||r)){const o=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?nn.from(l,nn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Os.classes.FormData,Blob:Os.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};dt.forEach(["delete","get","head","post","put","patch"],e=>{ix.headers[e]={}});const tie=dt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nie=e=>{const t={};let a,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),a=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!a||t[a]&&tie[a])&&(a==="set-cookie"?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t},NI=Symbol("internals");function cg(e){return e&&String(e).trim().toLowerCase()}function Yb(e){return e===!1||e==null?e:dt.isArray(e)?e.map(Yb):String(e)}function aie(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}const sie=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function FS(e,t,a,s,r){if(dt.isFunction(s))return s.call(this,t,a);if(r&&(t=a),!!dt.isString(t)){if(dt.isString(s))return t.indexOf(s)!==-1;if(dt.isRegExp(s))return s.test(t)}}function rie(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,s)=>a.toUpperCase()+s)}function iie(e,t){const a=dt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let hr=class{constructor(t){t&&this.set(t)}set(t,a,s){const r=this;function i(l,c,d){const u=cg(c);if(!u)throw new Error("header name must be a non-empty string");const f=dt.findKey(r,u);(!f||r[f]===void 0||d===!0||d===void 0&&r[f]!==!1)&&(r[f||c]=Yb(l))}const o=(l,c)=>dt.forEach(l,(d,u)=>i(d,u,c));if(dt.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(dt.isString(t)&&(t=t.trim())&&!sie(t))o(nie(t),a);else if(dt.isObject(t)&&dt.isIterable(t)){let l={},c,d;for(const u of t){if(!dt.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?dt.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,a)}else t!=null&&i(a,t,s);return this}get(t,a){if(t=cg(t),t){const s=dt.findKey(this,t);if(s){const r=this[s];if(!a)return r;if(a===!0)return aie(r);if(dt.isFunction(a))return a.call(this,r,s);if(dt.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=cg(t),t){const s=dt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!a||FS(this,this[s],s,a)))}return!1}delete(t,a){const s=this;let r=!1;function i(o){if(o=cg(o),o){const l=dt.findKey(s,o);l&&(!a||FS(s,s[l],l,a))&&(delete s[l],r=!0)}}return dt.isArray(t)?t.forEach(i):i(t),r}clear(t){const a=Object.keys(this);let s=a.length,r=!1;for(;s--;){const i=a[s];(!t||FS(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const a=this,s={};return dt.forEach(this,(r,i)=>{const o=dt.findKey(s,i);if(o){a[o]=Yb(r),delete a[i];return}const l=t?rie(i):String(i).trim();l!==i&&delete a[i],a[l]=Yb(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return dt.forEach(this,(s,r)=>{s!=null&&s!==!1&&(a[r]=t&&dt.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const s=new this(t);return a.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[NI]=this[NI]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=cg(o);s[l]||(iie(r,o),s[l]=!0)}return dt.isArray(t)?t.forEach(i):i(t),this}};hr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);dt.reduceDescriptors(hr.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[a]=s}}});dt.freezeMethods(hr);function US(e,t){const a=this||ix,s=t||a,r=hr.from(s.headers);let i=s.data;return dt.forEach(e,function(l){i=l.call(a,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function XH(e){return!!(e&&e.__CANCEL__)}function Kf(e,t,a){nn.call(this,e??"canceled",nn.ERR_CANCELED,t,a),this.name="CanceledError"}dt.inherits(Kf,nn,{__CANCEL__:!0});function ZH(e,t,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):t(new nn("Request failed with status code "+a.status,[nn.ERR_BAD_REQUEST,nn.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function oie(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function lie(e,t){e=e||10;const a=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];o||(o=d),a[r]=c,s[r]=d;let f=i,p=0;for(;f!==r;)p+=a[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),d-o<t)return;const x=u&&d-u;return x?Math.round(p*1e3/x):void 0}}function cie(e,t){let a=0,s=1e3/t,r,i;const o=(d,u=Date.now())=>{a=u,r=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-a;f>=s?o(d,u):(r=d,i||(i=setTimeout(()=>{i=null,o(r)},s-f)))},()=>r&&o(r)]}const hv=(e,t,a=3)=>{let s=0;const r=lie(50,250);return cie(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,d=r(c),u=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},a)},jI=(e,t)=>{const a=e!=null;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},CI=e=>(...t)=>dt.asap(()=>e(...t)),die=Os.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,Os.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(Os.origin),Os.navigator&&/(msie|trident)/i.test(Os.navigator.userAgent)):()=>!0,uie=Os.hasStandardBrowserEnv?{write(e,t,a,s,r,i){const o=[e+"="+encodeURIComponent(t)];dt.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),dt.isString(s)&&o.push("path="+s),dt.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mie(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function fie(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function JH(e,t,a){let s=!mie(t);return e&&(s||a==!1)?fie(e,t):t}const SI=e=>e instanceof hr?{...e}:e;function Au(e,t){t=t||{};const a={};function s(d,u,f,p){return dt.isPlainObject(d)&&dt.isPlainObject(u)?dt.merge.call({caseless:p},d,u):dt.isPlainObject(u)?dt.merge({},u):dt.isArray(u)?u.slice():u}function r(d,u,f,p){if(dt.isUndefined(u)){if(!dt.isUndefined(d))return s(void 0,d,f,p)}else return s(d,u,f,p)}function i(d,u){if(!dt.isUndefined(u))return s(void 0,u)}function o(d,u){if(dt.isUndefined(u)){if(!dt.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,f){if(f in t)return s(d,u);if(f in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,f)=>r(SI(d),SI(u),f,!0)};return dt.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||r,p=f(e[u],t[u],u);dt.isUndefined(p)&&f!==l||(a[u]=p)}),a}const e9=e=>{const t=Au({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=hr.from(o),t.url=YH(JH(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),dt.isFormData(a)){if(Os.hasStandardBrowserEnv||Os.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(dt.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&o.set(u,f)})}}if(Os.hasStandardBrowserEnv&&(s&&dt.isFunction(s)&&(s=s(t)),s||s!==!1&&die(t.url))){const c=r&&i&&uie.read(i);c&&o.set(r,c)}return t},hie=typeof XMLHttpRequest<"u",gie=hie&&function(e){return new Promise(function(a,s){const r=e9(e);let i=r.data;const o=hr.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=r,u,f,p,x,y;function N(){x&&x(),y&&y(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function j(){if(!v)return;const S=hr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:e,request:v};ZH(function(L){a(L),N()},function(L){s(L),N()},k),v=null}"onloadend"in v?v.onloadend=j:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(j)},v.onabort=function(){v&&(s(new nn("Request aborted",nn.ECONNABORTED,e,v)),v=null)},v.onerror=function(A){const k=A&&A.message?A.message:"Network Error",_=new nn(k,nn.ERR_NETWORK,e,v);_.event=A||null,s(_),v=null},v.ontimeout=function(){let A=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||QH;r.timeoutErrorMessage&&(A=r.timeoutErrorMessage),s(new nn(A,k.clarifyTimeoutError?nn.ETIMEDOUT:nn.ECONNABORTED,e,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&dt.forEach(o.toJSON(),function(A,k){v.setRequestHeader(k,A)}),dt.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),l&&l!=="json"&&(v.responseType=r.responseType),d&&([p,y]=hv(d,!0),v.addEventListener("progress",p)),c&&v.upload&&([f,x]=hv(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(u=S=>{v&&(s(!S||S.type?new Kf(null,e,v):S),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const w=oie(r.url);if(w&&Os.protocols.indexOf(w)===-1){s(new nn("Unsupported protocol "+w+":",nn.ERR_BAD_REQUEST,e));return}v.send(i||null)})},pie=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let s=new AbortController,r;const i=function(d){if(!r){r=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof nn?u:new Kf(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new nn(`timeout ${t} of ms exceeded`,nn.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>dt.asap(l),c}},xie=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let s=0,r;for(;s<a;)r=s+t,yield e.slice(s,r),s=r},yie=async function*(e,t){for await(const a of bie(e))yield*xie(a,t)},bie=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:s}=await t.read();if(a)break;yield s}}finally{await t.cancel()}},_I=(e,t,a,s)=>{const r=yie(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await r.next();if(d){l(),c.close();return}let f=u.byteLength;if(a){let p=i+=f;a(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},AI=64*1024,{isFunction:Oy}=dt,vie=(({Request:e,Response:t})=>({Request:e,Response:t}))(dt.global),{ReadableStream:TI,TextEncoder:EI}=dt.global,kI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},wie=e=>{e=dt.merge.call({skipUndefined:!0},vie,e);const{fetch:t,Request:a,Response:s}=e,r=t?Oy(t):typeof fetch=="function",i=Oy(a),o=Oy(s);if(!r)return!1;const l=r&&Oy(TI),c=r&&(typeof EI=="function"?(y=>N=>y.encode(N))(new EI):async y=>new Uint8Array(await new a(y).arrayBuffer())),d=i&&l&&kI(()=>{let y=!1;const N=new a(Os.origin,{body:new TI,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!N}),u=o&&l&&kI(()=>dt.isReadableStream(new s("").body)),f={stream:u&&(y=>y.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!f[y]&&(f[y]=(N,v)=>{let j=N&&N[y];if(j)return j.call(N);throw new nn(`Response type '${y}' is not supported`,nn.ERR_NOT_SUPPORT,v)})});const p=async y=>{if(y==null)return 0;if(dt.isBlob(y))return y.size;if(dt.isSpecCompliantForm(y))return(await new a(Os.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(dt.isArrayBufferView(y)||dt.isArrayBuffer(y))return y.byteLength;if(dt.isURLSearchParams(y)&&(y=y+""),dt.isString(y))return(await c(y)).byteLength},x=async(y,N)=>{const v=dt.toFiniteNumber(y.getContentLength());return v??p(N)};return async y=>{let{url:N,method:v,data:j,signal:w,cancelToken:S,timeout:A,onDownloadProgress:k,onUploadProgress:_,responseType:L,headers:T,withCredentials:M="same-origin",fetchOptions:R}=e9(y),z=t||fetch;L=L?(L+"").toLowerCase():"text";let O=pie([w,S&&S.toAbortSignal()],A),I=null;const B=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let ee;try{if(_&&d&&v!=="get"&&v!=="head"&&(ee=await x(T,j))!==0){let se=new a(N,{method:"POST",body:j,duplex:"half"}),Y;if(dt.isFormData(j)&&(Y=se.headers.get("content-type"))&&T.setContentType(Y),se.body){const[pe,Se]=jI(ee,hv(CI(_)));j=_I(se.body,AI,pe,Se)}}dt.isString(M)||(M=M?"include":"omit");const Q=i&&"credentials"in a.prototype,te={...R,signal:O,method:v.toUpperCase(),headers:T.normalize().toJSON(),body:j,duplex:"half",credentials:Q?M:void 0};I=i&&new a(N,te);let W=await(i?z(I,R):z(N,te));const ae=u&&(L==="stream"||L==="response");if(u&&(k||ae&&B)){const se={};["status","statusText","headers"].forEach(me=>{se[me]=W[me]});const Y=dt.toFiniteNumber(W.headers.get("content-length")),[pe,Se]=k&&jI(Y,hv(CI(k),!0))||[];W=new s(_I(W.body,AI,pe,()=>{Se&&Se(),B&&B()}),se)}L=L||"text";let Ee=await f[dt.findKey(f,L)||"text"](W,y);return!ae&&B&&B(),await new Promise((se,Y)=>{ZH(se,Y,{data:Ee,headers:hr.from(W.headers),status:W.status,statusText:W.statusText,config:y,request:I})})}catch(Q){throw B&&B(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new nn("Network Error",nn.ERR_NETWORK,y,I),{cause:Q.cause||Q}):nn.from(Q,Q&&Q.code,y,I)}}},Nie=new Map,t9=e=>{let t=e?e.env:{};const{fetch:a,Request:s,Response:r}=t,i=[s,r,a];let o=i.length,l=o,c,d,u=Nie;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:wie(t)),u=d;return d};t9();const QT={http:zre,xhr:gie,fetch:{get:t9}};dt.forEach(QT,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const LI=e=>`- ${e}`,jie=e=>dt.isFunction(e)||e===null||e===!1,n9={getAdapter:(e,t)=>{e=dt.isArray(e)?e:[e];const{length:a}=e;let s,r;const i={};for(let o=0;o<a;o++){s=e[o];let l;if(r=s,!jie(s)&&(r=QT[(l=String(s)).toLowerCase()],r===void 0))throw new nn(`Unknown adapter '${l}'`);if(r&&(dt.isFunction(r)||(r=r.get(t))))break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(LI).join(`
`):" "+LI(o[0]):"as no adapter specified";throw new nn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:QT};function BS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Kf(null,e)}function PI(e){return BS(e),e.headers=hr.from(e.headers),e.data=US.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),n9.getAdapter(e.adapter||ix.adapter,e)(e).then(function(s){return BS(e),s.data=US.call(e,e.transformResponse,s),s.headers=hr.from(s.headers),s},function(s){return XH(s)||(BS(e),s&&s.response&&(s.response.data=US.call(e,e.transformResponse,s.response),s.response.headers=hr.from(s.response.headers))),Promise.reject(s)})}const a9="1.12.2",Zw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Zw[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const DI={};Zw.transitional=function(t,a,s){function r(i,o){return"[Axios v"+a9+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new nn(r(o," has been removed"+(a?" in "+a:"")),nn.ERR_DEPRECATED);return a&&!DI[o]&&(DI[o]=!0,console.warn(r(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,l):!0}};Zw.spelling=function(t){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Cie(e,t,a){if(typeof e!="object")throw new nn("options must be an object",nn.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new nn("option "+i+" must be "+c,nn.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new nn("Unknown option "+i,nn.ERR_BAD_OPTION)}}const Qb={assertOptions:Cie,validators:Zw},ro=Qb.validators;let pu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new wI,response:new wI}}async request(t,a){try{return await this._request(t,a)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Au(this.defaults,a);const{transitional:s,paramsSerializer:r,headers:i}=a;s!==void 0&&Qb.assertOptions(s,{silentJSONParsing:ro.transitional(ro.boolean),forcedJSONParsing:ro.transitional(ro.boolean),clarifyTimeoutError:ro.transitional(ro.boolean)},!1),r!=null&&(dt.isFunction(r)?a.paramsSerializer={serialize:r}:Qb.assertOptions(r,{encode:ro.function,serialize:ro.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Qb.assertOptions(a,{baseUrl:ro.spelling("baseURL"),withXsrfToken:ro.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&dt.merge(i.common,i[a.method]);i&&dt.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),a.headers=hr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(c=c&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let u,f=0,p;if(!c){const y=[PI.bind(this),void 0];for(y.unshift(...l),y.push(...d),p=y.length,u=Promise.resolve(a);f<p;)u=u.then(y[f++],y[f++]);return u}p=l.length;let x=a;for(;f<p;){const y=l[f++],N=l[f++];try{x=y(x)}catch(v){N.call(this,v);break}}try{u=PI.call(this,x)}catch(y){return Promise.reject(y)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=Au(this.defaults,t);const a=JH(t.baseURL,t.url,t.allowAbsoluteUrls);return YH(a,t.params,t.paramsSerializer)}};dt.forEach(["delete","get","head","options"],function(t){pu.prototype[t]=function(a,s){return this.request(Au(s||{},{method:t,url:a,data:(s||{}).data}))}});dt.forEach(["post","put","patch"],function(t){function a(s){return function(i,o,l){return this.request(Au(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}pu.prototype[t]=a(),pu.prototype[t+"Form"]=a(!0)});let Sie=class s9{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Kf(i,o,l),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=s=>{t.abort(s)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new s9(function(r){t=r}),cancel:t}}};function _ie(e){return function(a){return e.apply(null,a)}}function Aie(e){return dt.isObject(e)&&e.isAxiosError===!0}const KT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(KT).forEach(([e,t])=>{KT[t]=e});function r9(e){const t=new pu(e),a=IH(pu.prototype.request,t);return dt.extend(a,pu.prototype,t,{allOwnKeys:!0}),dt.extend(a,t,null,{allOwnKeys:!0}),a.create=function(r){return r9(Au(e,r))},a}const Pa=r9(ix);Pa.Axios=pu;Pa.CanceledError=Kf;Pa.CancelToken=Sie;Pa.isCancel=XH;Pa.VERSION=a9;Pa.toFormData=Xw;Pa.AxiosError=nn;Pa.Cancel=Pa.CanceledError;Pa.all=function(t){return Promise.all(t)};Pa.spread=_ie;Pa.isAxiosError=Aie;Pa.mergeConfig=Au;Pa.AxiosHeaders=hr;Pa.formToJSON=e=>KH(dt.isHTMLForm(e)?new FormData(e):e);Pa.getAdapter=n9.getAdapter;Pa.HttpStatusCode=KT;Pa.default=Pa;const{Axios:gVe,AxiosError:pVe,CanceledError:xVe,isCancel:yVe,CancelToken:bVe,VERSION:vVe,all:wVe,Cancel:NVe,isAxiosError:jVe,spread:CVe,toFormData:SVe,AxiosHeaders:_Ve,HttpStatusCode:AVe,formToJSON:TVe,getAdapter:EVe,mergeConfig:kVe}=Pa,Tie="https://crm.sari-sari.com",ie=Pa.create({baseURL:`${Tie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});ie.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));ie.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const Eie="isLoggedIn",My="userRole",Qs=()=>{const[e,t]=h.useState(!!localStorage.getItem(My)),[a,s]=h.useState(localStorage.getItem(My)||""),r=Nt();h.useEffect(()=>{const d=localStorage.getItem(My);d?(t(!0),s(d)):o()},[]);const i=d=>{localStorage.setItem(My,d.role),localStorage.setItem(Eie,!0),t(!0),s(d.role)},o=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await ie.post("/auth/logout")}catch(d){console.log("Failed to logout from server:",d)}o(),r("/")},userRole:a,setUserRole:s,login:d=>{i(d),d.role==="CEO"||d.role==="Admin"?r("/admin"):d.role==="Manager"?r("/manager/dashboard"):r("/")}}},fl=({children:e,requiredRole:t})=>{const{isLoggedIn:a,userRole:s}=Qs();if(!a)return n.jsx(li,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?n.jsx(li,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?n.jsx(li,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?n.jsx(li,{to:"/manager/dashboard",replace:!0}):s==="SALES"?n.jsx(li,{to:"/sales/dashboard",replace:!0}):n.jsx(li,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?n.jsx(li,{to:"/",replace:!0}):e};var i9={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},OI=pt.createContext&&pt.createContext(i9),kie=["attr","size","title"];function Lie(e,t){if(e==null)return{};var a=Pie(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Pie(e,t){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},gv.apply(this,arguments)}function MI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function pv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(a),!0).forEach(function(s){Die(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):MI(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Die(e,t,a){return t=Oie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Oie(e){var t=Mie(e,"string");return typeof t=="symbol"?t:t+""}function Mie(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o9(e){return e&&e.map((t,a)=>pt.createElement(t.tag,pv({key:a},t.attr),o9(t.child)))}function _t(e){return t=>pt.createElement(Iie,gv({attr:pv({},e.attr)},t),o9(e.child))}function Iie(e){var t=a=>{var{attr:s,size:r,title:i}=e,o=Lie(e,kie),l=r||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),pt.createElement("svg",gv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,o,{className:c,style:pv(pv({color:e.color||a.color},a.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&pt.createElement("title",null,i),e.children)};return OI!==void 0?pt.createElement(OI.Consumer,null,a=>t(a)):t(i9)}function Wi(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Vu(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function kn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function Jw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function XT(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function $ie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function eN(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function ox(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function Rie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function HS(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function zie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function lx(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function Fie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(e)}function tN(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Jt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Tt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function l9(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function ga(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Vt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function xL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function At(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function Uie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Dt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Bie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function Ts(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function Ws(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function c9(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function qo(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function ua(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function ma(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function Tu(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function Eu(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function un(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function Hie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Iy(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 18v-6a9 9 0 0 1 18 0v6"},child:[]},{tag:"path",attr:{d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"},child:[]}]})(e)}function qie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function cx(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function II(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(e)}function d9(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function yL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function Ao(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function ta(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Gie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Xf(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function $I(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Wie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function Vie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"},child:[]}]})(e)}function Rs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function kt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function RI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function gn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function bL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function qt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function ZT(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function vL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function nN(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function ld(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function Xl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function ur(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Kt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function qS(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function rd(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Yie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Io(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Yn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function $o(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function en(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function na(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function zs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Qt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const u9=()=>{const[e,t]=h.useState(!1),a=h.useRef(null);return h.useEffect(()=>{const s=r=>{a.current&&!a.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),h.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),n.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:" CRM"})]})}),n.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[n.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),n.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[n.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),n.jsxs("div",{className:"flex sm:hidden items-center relative",ref:a,children:[n.jsx("button",{onClick:()=>t(!e),children:e?n.jsx(Qt,{className:"w-6 h-6 text-white"}):n.jsx(Xf,{className:"w-6 h-6 text-white"})}),e&&n.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:n.jsxs("nav",{className:"flex flex-col",children:[n.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),n.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function Qie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function Zl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Kie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function aN(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function Xie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Zie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const Jie=()=>{const e=["/image/crm1.png","/image/crm2.png","/image/crm3.png","/image/crm4.png","/image/crm5.png","/image/crm7.png","/image/crm6.png"],[t,a]=h.useState(0),[s,r]=h.useState(!1),i=h.useRef(null),[o,l]=h.useState(0),[c,d]=h.useState(0);h.useEffect(()=>(s||(i.current=setInterval(()=>{a(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const u=x=>l(x.targetTouches[0].clientX),f=x=>d(x.targetTouches[0].clientX),p=()=>{o-c>75&&a(x=>(x+1)%e.length),c-o>75&&a(x=>(x-1+e.length)%e.length)};return n.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"lg:text-left text-center",children:[n.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",n.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),n.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),n.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:u,onTouchMove:f,onTouchEnd:p,children:[e.map((x,y)=>n.jsx("img",{src:x,alt:`Slide ${y+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${y===t?"opacity-100":"opacity-0"}`},y)),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,y)=>n.jsx("button",{onClick:()=>a(y),className:`w-3 h-3 rounded-full transition-all ${y===t?"bg-accent":"bg-gray-400 opacity-50"}`},y))})]})]})]})})},eoe=({Icon:e,title:t,description:a})=>n.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[n.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:n.jsx(e,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),n.jsx("p",{className:"text-gray-400",children:a})]}),toe=()=>{const e=[{Icon:Zie,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:Qie,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:Xie,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:Kie,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return n.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),n.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,a)=>n.jsx(eoe,{...t},a))})]})})},noe=()=>n.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),n.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),n.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),aoe=()=>n.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-5 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsx("p",{className:"text-sm text-white mt-4",children:" 2026 Sari-Sari CRM"})]}),[{title:"Resources",links:["Security","Support"],href:"/resources"},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"],href:"/legal"}].map((e,t)=>n.jsxs("div",{children:[n.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),n.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((a,s)=>n.jsx("li",{children:n.jsx("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"hover:text-accent",children:a})},s))})]},t))]})}),soe=()=>(h.useEffect(()=>{document.title="Sari-Sari CRM"},[]),n.jsxs("main",{className:"font-inter",children:[n.jsx(u9,{}),n.jsx(Jie,{}),n.jsx(toe,{}),n.jsx(noe,{}),n.jsx(aoe,{})]}));function Yu(e){return _t({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Qn(e){return _t({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function vd(e){return _t({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class Ig extends Error{}Ig.prototype.name="InvalidTokenError";function roe(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,a)=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function ioe(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return roe(t)}catch{return atob(t)}}function m9(e,t){if(typeof e!="string")throw new Ig("Invalid token specified: must be a string");t||(t={});const a=t.header===!0?0:1,s=e.split(".")[a];if(typeof s!="string")throw new Ig(`Invalid token specified: missing part #${a+1}`);let r;try{r=ioe(s)}catch(i){throw new Ig(`Invalid token specified: invalid base64 for part #${a+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new Ig(`Invalid token specified: invalid json for part #${a+1} (${i.message})`)}}function qa(e,t,a=void 0){const s={};for(const r in e){const i=e[r];let o="",l=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(o+=(l===!0?"":" ")+t(d),l=!1,a&&a[d]&&(o+=" "+a[d]))}s[r]=o}return s}function ku(e,...t){const a=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${a} for the full message.`}function qn(e){if(typeof e!="string")throw new Error(ku(7));return e.charAt(0).toUpperCase()+e.slice(1)}var GS={exports:{}},Un={};var zI;function ooe(){if(zI)return Un;zI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function y(N){if(typeof N=="object"&&N!==null){var v=N.$$typeof;switch(v){case e:switch(N=N.type,N){case a:case r:case s:case c:case d:case p:return N;default:switch(N=N&&N.$$typeof,N){case o:case l:case f:case u:return N;case i:return N;default:return v}}case t:return v}}}return Un.ContextConsumer=i,Un.ContextProvider=o,Un.Element=e,Un.ForwardRef=l,Un.Fragment=a,Un.Lazy=f,Un.Memo=u,Un.Portal=t,Un.Profiler=r,Un.StrictMode=s,Un.Suspense=c,Un.SuspenseList=d,Un.isContextConsumer=function(N){return y(N)===i},Un.isContextProvider=function(N){return y(N)===o},Un.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Un.isForwardRef=function(N){return y(N)===l},Un.isFragment=function(N){return y(N)===a},Un.isLazy=function(N){return y(N)===f},Un.isMemo=function(N){return y(N)===u},Un.isPortal=function(N){return y(N)===t},Un.isProfiler=function(N){return y(N)===r},Un.isStrictMode=function(N){return y(N)===s},Un.isSuspense=function(N){return y(N)===c},Un.isSuspenseList=function(N){return y(N)===d},Un.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===a||N===r||N===s||N===c||N===d||typeof N=="object"&&N!==null&&(N.$$typeof===f||N.$$typeof===u||N.$$typeof===o||N.$$typeof===i||N.$$typeof===l||N.$$typeof===x||N.getModuleId!==void 0)},Un.typeOf=y,Un}var FI;function loe(){return FI||(FI=1,GS.exports=ooe()),GS.exports}var wL=loe();function jo(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function f9(e){if(h.isValidElement(e)||wL.isValidElementType(e)||!jo(e))return e;const t={};return Object.keys(e).forEach(a=>{t[a]=f9(e[a])}),t}function $r(e,t,a={clone:!0}){const s=a.clone?{...e}:e;return jo(e)&&jo(t)&&Object.keys(t).forEach(r=>{h.isValidElement(t[r])||wL.isValidElementType(t[r])?s[r]=t[r]:jo(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&jo(e[r])?s[r]=$r(e[r],t[r],a):a.clone?s[r]=jo(t[r])?f9(t[r]):t[r]:s[r]=t[r]}),s}function Xg(e,t){return t?$r(e,t,{clone:!1}):e}function UI(e,t){if(!e.containerQueries)return t;const a=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return a.length?a.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function coe(e,t){return t==="@"||t.startsWith("@")&&(e.some(a=>t.startsWith(`@${a}`))||!!t.match(/^@\d/))}function doe(e,t){const a=t.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,r]=a,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function uoe(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function a(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(a(s,i),s);return a(r),{...e,containerQueries:r}}const sN={xs:0,sm:600,md:900,lg:1200,xl:1536},BI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${sN[e]}px)`},moe={containerQueries:e=>({up:t=>{let a=typeof t=="number"?t:sN[t]||t;return typeof a=="number"&&(a=`${a}px`),e?`@container ${e} (min-width:${a})`:`@container (min-width:${a})`}})};function Rl(e,t,a){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||BI;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=a(t[c]),o),{})}if(typeof t=="object"){const i=s.breakpoints||BI;return Object.keys(t).reduce((o,l)=>{if(coe(i.keys,l)){const c=doe(s.containerQueries?s:moe,l);c&&(o[c]=a(t[l],l))}else if(Object.keys(i.values||sN).includes(l)){const c=i.up(l);o[c]=a(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return a(t)}function foe(e={}){return e.keys?.reduce((a,s)=>{const r=e.up(s);return a[r]={},a},{})||{}}function HI(e,t){return e.reduce((a,s)=>{const r=a[s];return(!r||Object.keys(r).length===0)&&delete a[s],a},t)}function rN(e,t,a=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&a){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function xv(e,t,a,s=a){let r;return typeof e=="function"?r=e(a):Array.isArray(e)?r=e[a]||s:r=rN(e,a)||s,t&&(r=t(r,s,e)),r}function Da(e){const{prop:t,cssProperty:a=e.prop,themeKey:s,transform:r}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,d=rN(c,s)||{};return Rl(o,l,f=>{let p=xv(d,r,f);return f===p&&typeof f=="string"&&(p=xv(d,r,`${t}${f==="default"?"":qn(f)}`,f)),a===!1?p:{[a]:p}})};return i.propTypes={},i.filterProps=[t],i}function hoe(e){const t={};return a=>(t[a]===void 0&&(t[a]=e(a)),t[a])}const goe={m:"margin",p:"padding"},poe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},qI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},xoe=hoe(e=>{if(e.length>2)if(qI[e])e=qI[e];else return[e];const[t,a]=e.split(""),s=goe[t],r=poe[a]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),NL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],jL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...NL,...jL];function dx(e,t,a,s){const r=rN(e,t,!0)??a;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=r[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof r=="function"?r:()=>{}}function CL(e){return dx(e,"spacing",8)}function ux(e,t){return typeof t=="string"||t==null?t:e(t)}function yoe(e,t){return a=>e.reduce((s,r)=>(s[r]=ux(t,a),s),{})}function boe(e,t,a,s){if(!t.includes(a))return null;const r=xoe(a),i=yoe(r,s),o=e[a];return Rl(e,o,i)}function h9(e,t){const a=CL(e.theme);return Object.keys(e).map(s=>boe(e,t,s,a)).reduce(Xg,{})}function va(e){return h9(e,NL)}va.propTypes={};va.filterProps=NL;function wa(e){return h9(e,jL)}wa.propTypes={};wa.filterProps=jL;function iN(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),a=s=>Object.keys(s).reduce((r,i)=>t[i]?Xg(r,t[i](s)):r,{});return a.propTypes={},a.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),a}function ui(e){return typeof e!="number"?e:`${e}px solid`}function Ci(e,t){return Da({prop:e,themeKey:"borders",transform:t})}const voe=Ci("border",ui),woe=Ci("borderTop",ui),Noe=Ci("borderRight",ui),joe=Ci("borderBottom",ui),Coe=Ci("borderLeft",ui),Soe=Ci("borderColor"),_oe=Ci("borderTopColor"),Aoe=Ci("borderRightColor"),Toe=Ci("borderBottomColor"),Eoe=Ci("borderLeftColor"),koe=Ci("outline",ui),Loe=Ci("outlineColor"),oN=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=dx(e.theme,"shape.borderRadius",4),a=s=>({borderRadius:ux(t,s)});return Rl(e,e.borderRadius,a)}return null};oN.propTypes={};oN.filterProps=["borderRadius"];iN(voe,woe,Noe,joe,Coe,Soe,_oe,Aoe,Toe,Eoe,oN,koe,Loe);const lN=e=>{if(e.gap!==void 0&&e.gap!==null){const t=dx(e.theme,"spacing",8),a=s=>({gap:ux(t,s)});return Rl(e,e.gap,a)}return null};lN.propTypes={};lN.filterProps=["gap"];const cN=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=dx(e.theme,"spacing",8),a=s=>({columnGap:ux(t,s)});return Rl(e,e.columnGap,a)}return null};cN.propTypes={};cN.filterProps=["columnGap"];const dN=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=dx(e.theme,"spacing",8),a=s=>({rowGap:ux(t,s)});return Rl(e,e.rowGap,a)}return null};dN.propTypes={};dN.filterProps=["rowGap"];const Poe=Da({prop:"gridColumn"}),Doe=Da({prop:"gridRow"}),Ooe=Da({prop:"gridAutoFlow"}),Moe=Da({prop:"gridAutoColumns"}),Ioe=Da({prop:"gridAutoRows"}),$oe=Da({prop:"gridTemplateColumns"}),Roe=Da({prop:"gridTemplateRows"}),zoe=Da({prop:"gridTemplateAreas"}),Foe=Da({prop:"gridArea"});iN(lN,cN,dN,Poe,Doe,Ooe,Moe,Ioe,$oe,Roe,zoe,Foe);function gf(e,t){return t==="grey"?t:e}const Uoe=Da({prop:"color",themeKey:"palette",transform:gf}),Boe=Da({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:gf}),Hoe=Da({prop:"backgroundColor",themeKey:"palette",transform:gf});iN(Uoe,Boe,Hoe);function Or(e){return e<=1&&e!==0?`${e*100}%`:e}const qoe=Da({prop:"width",transform:Or}),SL=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=a=>{const s=e.theme?.breakpoints?.values?.[a]||sN[a];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Or(a)}};return Rl(e,e.maxWidth,t)}return null};SL.filterProps=["maxWidth"];const Goe=Da({prop:"minWidth",transform:Or}),Woe=Da({prop:"height",transform:Or}),Voe=Da({prop:"maxHeight",transform:Or}),Yoe=Da({prop:"minHeight",transform:Or});Da({prop:"size",cssProperty:"width",transform:Or});Da({prop:"size",cssProperty:"height",transform:Or});const Qoe=Da({prop:"boxSizing"});iN(qoe,SL,Goe,Woe,Voe,Yoe,Qoe);const mx={border:{themeKey:"borders",transform:ui},borderTop:{themeKey:"borders",transform:ui},borderRight:{themeKey:"borders",transform:ui},borderBottom:{themeKey:"borders",transform:ui},borderLeft:{themeKey:"borders",transform:ui},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ui},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:oN},color:{themeKey:"palette",transform:gf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:gf},backgroundColor:{themeKey:"palette",transform:gf},p:{style:wa},pt:{style:wa},pr:{style:wa},pb:{style:wa},pl:{style:wa},px:{style:wa},py:{style:wa},padding:{style:wa},paddingTop:{style:wa},paddingRight:{style:wa},paddingBottom:{style:wa},paddingLeft:{style:wa},paddingX:{style:wa},paddingY:{style:wa},paddingInline:{style:wa},paddingInlineStart:{style:wa},paddingInlineEnd:{style:wa},paddingBlock:{style:wa},paddingBlockStart:{style:wa},paddingBlockEnd:{style:wa},m:{style:va},mt:{style:va},mr:{style:va},mb:{style:va},ml:{style:va},mx:{style:va},my:{style:va},margin:{style:va},marginTop:{style:va},marginRight:{style:va},marginBottom:{style:va},marginLeft:{style:va},marginX:{style:va},marginY:{style:va},marginInline:{style:va},marginInlineStart:{style:va},marginInlineEnd:{style:va},marginBlock:{style:va},marginBlockStart:{style:va},marginBlockEnd:{style:va},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:lN},rowGap:{style:dN},columnGap:{style:cN},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Or},maxWidth:{style:SL},minWidth:{transform:Or},height:{transform:Or},maxHeight:{transform:Or},minHeight:{transform:Or},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Koe(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),a=new Set(t);return e.every(s=>a.size===Object.keys(s).length)}function Xoe(e,t){return typeof e=="function"?e(t):e}function Zoe(){function e(a,s,r,i){const o={[a]:s,theme:r},l=i[a];if(!l)return{[a]:s};const{cssProperty:c=a,themeKey:d,transform:u,style:f}=l;if(s==null)return null;if(d==="typography"&&s==="inherit")return{[a]:s};const p=rN(r,d)||{};return f?f(o):Rl(o,s,y=>{let N=xv(p,u,y);return y===N&&typeof y=="string"&&(N=xv(p,u,`${a}${y==="default"?"":qn(y)}`,y)),c===!1?N:{[c]:N}})}function t(a){const{sx:s,theme:r={},nested:i}=a||{};if(!s)return null;const o=r.unstable_sxConfig??mx;function l(c){let d=c;if(typeof c=="function")d=c(r);else if(typeof c!="object")return c;if(!d)return null;const u=foe(r.breakpoints),f=Object.keys(u);let p=u;return Object.keys(d).forEach(x=>{const y=Xoe(d[x],r);if(y!=null)if(typeof y=="object")if(o[x])p=Xg(p,e(x,y,r,o));else{const N=Rl({theme:r},y,v=>({[x]:v}));Koe(N,y)?p[x]=t({sx:y,theme:r,nested:!0}):p=Xg(p,N)}else p=Xg(p,e(x,y,r,o))}),!i&&r.modularCssLayers?{"@layer sx":UI(r,HI(f,p))}:UI(r,HI(f,p))}return Array.isArray(s)?s.map(l):l(s)}return t}const Sf=Zoe();Sf.filterProps=["sx"];const Joe=e=>{const t={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??mx;return Object.keys(e).forEach(s=>{a[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function ele(e){const{sx:t,...a}=e,{systemProps:s,otherProps:r}=Joe(a);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return jo(l)?{...s,...l}:s}:i={...s,...t},{...r,sx:i}}function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ye.apply(null,arguments)}function tle(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function nle(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var ale=(function(){function e(a){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(nle(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=tle(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),ks="-ms-",yv="-moz-",Sn="-webkit-",g9="comm",_L="rule",AL="decl",sle="@import",p9="@keyframes",rle="@layer",ile=Math.abs,uN=String.fromCharCode,ole=Object.assign;function lle(e,t){return As(e,0)^45?(((t<<2^As(e,0))<<2^As(e,1))<<2^As(e,2))<<2^As(e,3):0}function x9(e){return e.trim()}function cle(e,t){return(e=t.exec(e))?e[0]:e}function _n(e,t,a){return e.replace(t,a)}function JT(e,t){return e.indexOf(t)}function As(e,t){return e.charCodeAt(t)|0}function fp(e,t,a){return e.slice(t,a)}function vo(e){return e.length}function TL(e){return e.length}function $y(e,t){return t.push(e),e}function dle(e,t){return e.map(t).join("")}var mN=1,_f=1,y9=0,yr=0,Fa=0,Zf="";function fN(e,t,a,s,r,i,o){return{value:e,root:t,parent:a,type:s,props:r,children:i,line:mN,column:_f,length:o,return:""}}function dg(e,t){return ole(fN("",null,null,"",null,null,0),e,{length:-e.length},t)}function ule(){return Fa}function mle(){return Fa=yr>0?As(Zf,--yr):0,_f--,Fa===10&&(_f=1,mN--),Fa}function Rr(){return Fa=yr<y9?As(Zf,yr++):0,_f++,Fa===10&&(_f=1,mN++),Fa}function ko(){return As(Zf,yr)}function Kb(){return yr}function fx(e,t){return fp(Zf,e,t)}function hp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function b9(e){return mN=_f=1,y9=vo(Zf=e),yr=0,[]}function v9(e){return Zf="",e}function Xb(e){return x9(fx(yr-1,eE(e===91?e+2:e===40?e+1:e)))}function fle(e){for(;(Fa=ko())&&Fa<33;)Rr();return hp(e)>2||hp(Fa)>3?"":" "}function hle(e,t){for(;--t&&Rr()&&!(Fa<48||Fa>102||Fa>57&&Fa<65||Fa>70&&Fa<97););return fx(e,Kb()+(t<6&&ko()==32&&Rr()==32))}function eE(e){for(;Rr();)switch(Fa){case e:return yr;case 34:case 39:e!==34&&e!==39&&eE(Fa);break;case 40:e===41&&eE(e);break;case 92:Rr();break}return yr}function gle(e,t){for(;Rr()&&e+Fa!==57;)if(e+Fa===84&&ko()===47)break;return"/*"+fx(t,yr-1)+"*"+uN(e===47?e:Rr())}function ple(e){for(;!hp(ko());)Rr();return fx(e,yr)}function xle(e){return v9(Zb("",null,null,null,[""],e=b9(e),0,[0],e))}function Zb(e,t,a,s,r,i,o,l,c){for(var d=0,u=0,f=o,p=0,x=0,y=0,N=1,v=1,j=1,w=0,S="",A=r,k=i,_=s,L=S;v;)switch(y=w,w=Rr()){case 40:if(y!=108&&As(L,f-1)==58){JT(L+=_n(Xb(w),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:L+=Xb(w);break;case 9:case 10:case 13:case 32:L+=fle(y);break;case 92:L+=hle(Kb()-1,7);continue;case 47:switch(ko()){case 42:case 47:$y(yle(gle(Rr(),Kb()),t,a),c);break;default:L+="/"}break;case 123*N:l[d++]=vo(L)*j;case 125*N:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+u:j==-1&&(L=_n(L,/\f/g,"")),x>0&&vo(L)-f&&$y(x>32?WI(L+";",s,a,f-1):WI(_n(L," ","")+";",s,a,f-2),c);break;case 59:L+=";";default:if($y(_=GI(L,t,a,d,u,r,l,S,A=[],k=[],f),i),w===123)if(u===0)Zb(L,t,_,_,A,i,f,l,k);else switch(p===99&&As(L,3)===110?100:p){case 100:case 108:case 109:case 115:Zb(e,_,_,s&&$y(GI(e,_,_,0,0,r,l,S,r,A=[],f),k),r,k,f,l,s?A:k);break;default:Zb(L,_,_,_,[""],k,0,l,k)}}d=u=x=0,N=j=1,S=L="",f=o;break;case 58:f=1+vo(L),x=y;default:if(N<1){if(w==123)--N;else if(w==125&&N++==0&&mle()==125)continue}switch(L+=uN(w),w*N){case 38:j=u>0?1:(L+="\f",-1);break;case 44:l[d++]=(vo(L)-1)*j,j=1;break;case 64:ko()===45&&(L+=Xb(Rr())),p=ko(),u=f=vo(S=L+=ple(Kb())),w++;break;case 45:y===45&&vo(L)==2&&(N=0)}}return i}function GI(e,t,a,s,r,i,o,l,c,d,u){for(var f=r-1,p=r===0?i:[""],x=TL(p),y=0,N=0,v=0;y<s;++y)for(var j=0,w=fp(e,f+1,f=ile(N=o[y])),S=e;j<x;++j)(S=x9(N>0?p[j]+" "+w:_n(w,/&\f/g,p[j])))&&(c[v++]=S);return fN(e,t,a,r===0?_L:l,c,d,u)}function yle(e,t,a){return fN(e,t,a,g9,uN(ule()),fp(e,2,-2),0)}function WI(e,t,a,s){return fN(e,t,a,AL,fp(e,0,s),fp(e,s+1,-1),s)}function pf(e,t){for(var a="",s=TL(e),r=0;r<s;r++)a+=t(e[r],r,e,t)||"";return a}function ble(e,t,a,s){switch(e.type){case rle:if(e.children.length)break;case sle:case AL:return e.return=e.return||e.value;case g9:return"";case p9:return e.return=e.value+"{"+pf(e.children,s)+"}";case _L:e.value=e.props.join(",")}return vo(a=pf(e.children,s))?e.return=e.value+"{"+a+"}":""}function vle(e){var t=TL(e);return function(a,s,r,i){for(var o="",l=0;l<t;l++)o+=e[l](a,s,r,i)||"";return o}}function wle(e){return function(t){t.root||(t=t.return)&&e(t)}}function w9(e){var t=Object.create(null);return function(a){return t[a]===void 0&&(t[a]=e(a)),t[a]}}var Nle=function(t,a,s){for(var r=0,i=0;r=i,i=ko(),r===38&&i===12&&(a[s]=1),!hp(i);)Rr();return fx(t,yr)},jle=function(t,a){var s=-1,r=44;do switch(hp(r)){case 0:r===38&&ko()===12&&(a[s]=1),t[s]+=Nle(yr-1,a,s);break;case 2:t[s]+=Xb(r);break;case 4:if(r===44){t[++s]=ko()===58?"&\f":"",a[s]=t[s].length;break}default:t[s]+=uN(r)}while(r=Rr());return t},Cle=function(t,a){return v9(jle(b9(t),a))},VI=new WeakMap,Sle=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var a=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&a.charCodeAt(0)!==58&&!VI.get(s))&&!r){VI.set(t,!0);for(var i=[],o=Cle(a,i),l=s.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},_le=function(t){if(t.type==="decl"){var a=t.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(t.return="",t.value="")}};function N9(e,t){switch(lle(e,t)){case 5103:return Sn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Sn+e+yv+e+ks+e+e;case 6828:case 4268:return Sn+e+ks+e+e;case 6165:return Sn+e+ks+"flex-"+e+e;case 5187:return Sn+e+_n(e,/(\w+).+(:[^]+)/,Sn+"box-$1$2"+ks+"flex-$1$2")+e;case 5443:return Sn+e+ks+"flex-item-"+_n(e,/flex-|-self/,"")+e;case 4675:return Sn+e+ks+"flex-line-pack"+_n(e,/align-content|flex-|-self/,"")+e;case 5548:return Sn+e+ks+_n(e,"shrink","negative")+e;case 5292:return Sn+e+ks+_n(e,"basis","preferred-size")+e;case 6060:return Sn+"box-"+_n(e,"-grow","")+Sn+e+ks+_n(e,"grow","positive")+e;case 4554:return Sn+_n(e,/([^-])(transform)/g,"$1"+Sn+"$2")+e;case 6187:return _n(_n(_n(e,/(zoom-|grab)/,Sn+"$1"),/(image-set)/,Sn+"$1"),e,"")+e;case 5495:case 3959:return _n(e,/(image-set\([^]*)/,Sn+"$1$`$1");case 4968:return _n(_n(e,/(.+:)(flex-)?(.*)/,Sn+"box-pack:$3"+ks+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sn+e+e;case 4095:case 3583:case 4068:case 2532:return _n(e,/(.+)-inline(.+)/,Sn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(vo(e)-1-t>6)switch(As(e,t+1)){case 109:if(As(e,t+4)!==45)break;case 102:return _n(e,/(.+:)(.+)-([^]+)/,"$1"+Sn+"$2-$3$1"+yv+(As(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~JT(e,"stretch")?N9(_n(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(As(e,t+1)!==115)break;case 6444:switch(As(e,vo(e)-3-(~JT(e,"!important")&&10))){case 107:return _n(e,":",":"+Sn)+e;case 101:return _n(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Sn+(As(e,14)===45?"inline-":"")+"box$3$1"+Sn+"$2$3$1"+ks+"$2box$3")+e}break;case 5936:switch(As(e,t+11)){case 114:return Sn+e+ks+_n(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Sn+e+ks+_n(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Sn+e+ks+_n(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Sn+e+ks+e+e}return e}var Ale=function(t,a,s,r){if(t.length>-1&&!t.return)switch(t.type){case AL:t.return=N9(t.value,t.length);break;case p9:return pf([dg(t,{value:_n(t.value,"@","@"+Sn)})],r);case _L:if(t.length)return dle(t.props,function(i){switch(cle(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pf([dg(t,{props:[_n(i,/:(read-\w+)/,":"+yv+"$1")]})],r);case"::placeholder":return pf([dg(t,{props:[_n(i,/:(plac\w+)/,":"+Sn+"input-$1")]}),dg(t,{props:[_n(i,/:(plac\w+)/,":"+yv+"$1")]}),dg(t,{props:[_n(i,/:(plac\w+)/,ks+"input-$1")]})],r)}return""})}},Tle=[Ale],Ele=function(t){var a=t.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(N){var v=N.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var r=t.stylisPlugins||Tle,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(N){for(var v=N.getAttribute("data-emotion").split(" "),j=1;j<v.length;j++)i[v[j]]=!0;l.push(N)});var c,d=[Sle,_le];{var u,f=[ble,wle(function(N){u.insert(N)})],p=vle(d.concat(r,f)),x=function(v){return pf(xle(v),p)};c=function(v,j,w,S){u=w,x(v?v+"{"+j.styles+"}":j.styles),S&&(y.inserted[j.name]=!0)}}var y={key:a,sheet:new ale({key:a,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return y.sheet.hydrate(l),y},WS={exports:{}},Tn={};var YI;function kle(){if(YI)return Tn;YI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(k){if(typeof k=="object"&&k!==null){var _=k.$$typeof;switch(_){case t:switch(k=k.type,k){case c:case d:case s:case i:case r:case f:return k;default:switch(k=k&&k.$$typeof,k){case l:case u:case y:case x:case o:return k;default:return _}}case a:return _}}}function A(k){return S(k)===d}return Tn.AsyncMode=c,Tn.ConcurrentMode=d,Tn.ContextConsumer=l,Tn.ContextProvider=o,Tn.Element=t,Tn.ForwardRef=u,Tn.Fragment=s,Tn.Lazy=y,Tn.Memo=x,Tn.Portal=a,Tn.Profiler=i,Tn.StrictMode=r,Tn.Suspense=f,Tn.isAsyncMode=function(k){return A(k)||S(k)===c},Tn.isConcurrentMode=A,Tn.isContextConsumer=function(k){return S(k)===l},Tn.isContextProvider=function(k){return S(k)===o},Tn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},Tn.isForwardRef=function(k){return S(k)===u},Tn.isFragment=function(k){return S(k)===s},Tn.isLazy=function(k){return S(k)===y},Tn.isMemo=function(k){return S(k)===x},Tn.isPortal=function(k){return S(k)===a},Tn.isProfiler=function(k){return S(k)===i},Tn.isStrictMode=function(k){return S(k)===r},Tn.isSuspense=function(k){return S(k)===f},Tn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===s||k===d||k===i||k===r||k===f||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===y||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===u||k.$$typeof===v||k.$$typeof===j||k.$$typeof===w||k.$$typeof===N)},Tn.typeOf=S,Tn}var QI;function Lle(){return QI||(QI=1,WS.exports=kle()),WS.exports}var VS,KI;function Ple(){if(KI)return VS;KI=1;var e=Lle(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function o(y){return e.isMemo(y)?r:i[y.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function x(y,N,v){if(typeof N!="string"){if(p){var j=f(N);j&&j!==p&&x(y,j,v)}var w=c(N);d&&(w=w.concat(d(N)));for(var S=o(y),A=o(N),k=0;k<w.length;++k){var _=w[k];if(!a[_]&&!(v&&v[_])&&!(A&&A[_])&&!(S&&S[_])){var L=u(N,_);try{l(y,_,L)}catch{}}}}return y}return VS=x,VS}Ple();var Dle=!0;function j9(e,t,a){var s="";return a.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var EL=function(t,a,s){var r=t.key+"-"+a.name;(s===!1||Dle===!1)&&t.registered[r]===void 0&&(t.registered[r]=a.styles)},C9=function(t,a,s){EL(t,a,s);var r=t.key+"-"+a.name;if(t.inserted[a.name]===void 0){var i=a;do t.insert(a===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function Ole(e){for(var t=0,a,s=0,r=e.length;r>=4;++s,r-=4)a=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,t=(a&65535)*1540483477+((a>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Mle={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ile=/[A-Z]|^ms/g,$le=/_EMO_([^_]+?)_([^]*?)_EMO_/g,S9=function(t){return t.charCodeAt(1)===45},XI=function(t){return t!=null&&typeof t!="boolean"},YS=w9(function(e){return S9(e)?e:e.replace(Ile,"-$&").toLowerCase()}),ZI=function(t,a){switch(t){case"animation":case"animationName":if(typeof a=="string")return a.replace($le,function(s,r,i){return wo={name:r,styles:i,next:wo},r})}return Mle[t]!==1&&!S9(t)&&typeof a=="number"&&a!==0?a+"px":a};function gp(e,t,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var r=a;if(r.anim===1)return wo={name:r.name,styles:r.styles,next:wo},r.name;var i=a;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)wo={name:o.name,styles:o.styles,next:wo},o=o.next;var l=i.styles+";";return l}return Rle(e,t,a)}case"function":{if(e!==void 0){var c=wo,d=a(e);return wo=c,gp(e,t,d)}break}}var u=a;if(t==null)return u;var f=t[u];return f!==void 0?f:u}function Rle(e,t,a){var s="";if(Array.isArray(a))for(var r=0;r<a.length;r++)s+=gp(e,t,a[r])+";";else for(var i in a){var o=a[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=i+"{"+t[l]+"}":XI(l)&&(s+=YS(i)+":"+ZI(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)XI(o[c])&&(s+=YS(i)+":"+ZI(i,o[c])+";");else{var d=gp(e,t,o);switch(i){case"animation":case"animationName":{s+=YS(i)+":"+d+";";break}default:s+=i+"{"+d+"}"}}}return s}var JI=/label:\s*([^\s;{]+)\s*(;|$)/g,wo;function hN(e,t,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";wo=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=gp(a,t,i);else{var o=i;r+=o[0]}for(var l=1;l<e.length;l++)if(r+=gp(a,t,e[l]),s){var c=i;r+=c[l]}JI.lastIndex=0;for(var d="",u;(u=JI.exec(r))!==null;)d+="-"+u[1];var f=Ole(r)+d;return{name:f,styles:r,next:wo}}var zle=function(t){return t()},Fle=Su.useInsertionEffect?Su.useInsertionEffect:!1,_9=Fle||zle,A9=h.createContext(typeof HTMLElement<"u"?Ele({key:"css"}):null);A9.Provider;var T9=function(t){return h.forwardRef(function(a,s){var r=h.useContext(A9);return t(a,r,s)})},kL=h.createContext({}),LL={}.hasOwnProperty,tE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ule=function(t,a){var s={};for(var r in a)LL.call(a,r)&&(s[r]=a[r]);return s[tE]=t,s},Ble=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return EL(a,s,r),_9(function(){return C9(a,s,r)}),null},Hle=T9(function(e,t,a){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[tE],i=[s],o="";typeof e.className=="string"?o=j9(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=hN(i,void 0,h.useContext(kL));o+=t.key+"-"+l.name;var c={};for(var d in e)LL.call(e,d)&&d!=="css"&&d!==tE&&(c[d]=e[d]);return c.className=o,a&&(c.ref=a),h.createElement(h.Fragment,null,h.createElement(Ble,{cache:t,serialized:l,isStringTag:typeof r=="string"}),h.createElement(r,c))}),qle=Hle,e$=function(t,a){var s=arguments;if(a==null||!LL.call(a,"css"))return h.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=qle,i[1]=Ule(t,a);for(var o=2;o<r;o++)i[o]=s[o];return h.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(e$||(e$={}));function PL(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return hN(t)}function hx(){var e=PL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Gle=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Wle=w9(function(e){return Gle.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Vle=Wle,Yle=function(t){return t!=="theme"},t$=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Vle:Yle},n$=function(t,a,s){var r;if(a){var i=a.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},Qle=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return EL(a,s,r),_9(function(){return C9(a,s,r)}),null},Kle=function e(t,a){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,o;a!==void 0&&(i=a.label,o=a.target);var l=n$(t,a,s),c=l||t$(r),d=!c("as");return function(){var u=arguments,f=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&f.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var p=u[0];f.push(p[0]);for(var x=u.length,y=1;y<x;y++)f.push(u[y],p[y])}var N=T9(function(v,j,w){var S=d&&v.as||r,A="",k=[],_=v;if(v.theme==null){_={};for(var L in v)_[L]=v[L];_.theme=h.useContext(kL)}typeof v.className=="string"?A=j9(j.registered,k,v.className):v.className!=null&&(A=v.className+" ");var T=hN(f.concat(k),j.registered,_);A+=j.key+"-"+T.name,o!==void 0&&(A+=" "+o);var M=d&&l===void 0?t$(S):c,R={};for(var z in v)d&&z==="as"||M(z)&&(R[z]=v[z]);return R.className=A,w&&(R.ref=w),h.createElement(h.Fragment,null,h.createElement(Qle,{cache:j,serialized:T,isStringTag:typeof S=="string"}),h.createElement(S,R))});return N.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=r,N.__emotion_styles=f,N.__emotion_forwardProp=l,Object.defineProperty(N,"toString",{value:function(){return"."+o}}),N.withComponent=function(v,j){var w=e(v,Ye({},a,j,{shouldForwardProp:n$(N,j,!0)}));return w.apply(void 0,f)},N}},Xle=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],nE=Kle.bind(null);Xle.forEach(function(e){nE[e]=nE(e)});function Zle(e,t){return nE(e,t)}function Jle(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const a$=[];function xu(e){return a$[0]=e,hN(a$)}const ece=e=>{const t=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return t.sort((a,s)=>a.val-s.val),t.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function tce(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...r}=e,i=ece(t),o=Object.keys(i);function l(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${a})`}function d(p,x){const y=o.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a}) and (max-width:${(y!==-1&&typeof t[o[y]]=="number"?t[o[y]]:x)-s/100}${a})`}function u(p){return o.indexOf(p)+1<o.length?d(p,o[o.indexOf(p)+1]):l(p)}function f(p){const x=o.indexOf(p);return x===0?l(o[1]):x===o.length-1?c(o[x]):d(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:d,only:u,not:f,unit:a,...r}}const nce={borderRadius:4};function E9(e=8,t=CL({spacing:e})){if(e.mui)return e;const a=(...s)=>(s.length===0?[1]:s).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return a.mui=!0,a}function ace(e,t){const a=this;if(a.vars){if(!a.colorSchemes?.[e]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return a.palette.mode===e?t:{}}function DL(e={},...t){const{breakpoints:a={},palette:s={},spacing:r,shape:i={},...o}=e,l=tce(a),c=E9(r);let d=$r({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...nce,...i}},o);return d=uoe(d),d.applyStyles=ace,d=t.reduce((u,f)=>$r(u,f),d),d.unstable_sxConfig={...mx,...o?.unstable_sxConfig},d.unstable_sx=function(f){return Sf({sx:f,theme:this})},d}function sce(e){return Object.keys(e).length===0}function k9(e=null){const t=h.useContext(kL);return!t||sce(t)?e:t}const rce=DL();function L9(e=rce){return k9(e)}const s$=e=>e,ice=()=>{let e=s$;return{configure(t){e=t},generate(t){return e(t)},reset(){e=s$}}},oce=ice(),lce={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ga(e,t,a="Mui"){const s=lce[t];return s?`${a}-${s}`:`${oce.generate(e)}-${t}`}function Sa(e,t,a="Mui"){const s={};return t.forEach(r=>{s[r]=Ga(e,r,a)}),s}function P9(e){const{variants:t,...a}=e,s={variants:t,style:xu(a),isProcessed:!0};return s.style===a||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=xu(r.style))}),s}const cce=DL();function Jb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function lu(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function dce(e){return e?(t,a)=>a[e]:null}function uce(e,t,a){e.theme=hce(e.theme)?a:e.theme[t]||e.theme}function ev(e,t,a){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>ev(e,r,a));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=a?lu(s.style,a):s.style;else{const{variants:i,...o}=s;r=a?lu(xu(o),a):o}return D9(e,s.variants,[r],a)}return s?.isProcessed?a?lu(xu(s.style),a):s.style:a?lu(xu(s),a):s}function D9(e,t,a=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(r))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&e.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},a.push(s?lu(xu(o.style(r)),s):o.style(r))):a.push(s?lu(xu(o.style),s):o.style)}return a}function mce(e={}){const{themeId:t,defaultTheme:a=cce,rootShouldForwardProp:s=Jb,slotShouldForwardProp:r=Jb}=e;function i(l){uce(l,t,a)}return(l,c={})=>{Jle(l,_=>_.filter(L=>L!==Sf));const{name:d,slot:u,skipVariantsResolver:f,skipSx:p,overridesResolver:x=dce(pce(u)),...y}=c,N=d&&d.startsWith("Mui")||u?"components":"custom",v=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,j=p||!1;let w=Jb;u==="Root"||u==="root"?w=s:u?w=r:gce(l)&&(w=void 0);const S=Zle(l,{shouldForwardProp:w,label:fce(),...y}),A=_=>{if(_.__emotion_real===_)return _;if(typeof _=="function")return function(T){return ev(T,_,T.theme.modularCssLayers?N:void 0)};if(jo(_)){const L=P9(_);return function(M){return L.variants?ev(M,L,M.theme.modularCssLayers?N:void 0):M.theme.modularCssLayers?lu(L.style,N):L.style}}return _},k=(..._)=>{const L=[],T=_.map(A),M=[];if(L.push(i),d&&x&&M.push(function(I){const ee=I.theme.components?.[d]?.styleOverrides;if(!ee)return null;const Q={};for(const te in ee)Q[te]=ev(I,ee[te],I.theme.modularCssLayers?"theme":void 0);return x(I,Q)}),d&&!v&&M.push(function(I){const ee=I.theme?.components?.[d]?.variants;return ee?D9(I,ee,[],I.theme.modularCssLayers?"theme":void 0):null}),j||M.push(Sf),Array.isArray(T[0])){const O=T.shift(),I=new Array(L.length).fill(""),B=new Array(M.length).fill("");let ee;ee=[...I,...O,...B],ee.raw=[...I,...O.raw,...B],L.unshift(ee)}const R=[...L,...T,...M],z=S(...R);return l.muiName&&(z.muiName=l.muiName),z};return S.withConfig&&(k.withConfig=S.withConfig),k}}function fce(e,t){return void 0}function hce(e){for(const t in e)return!1;return!0}function gce(e){return typeof e=="string"&&e.charCodeAt(0)>96}function pce(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Lu(e,t,a=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)s[i]=o||{};else if(!o)s[i]=l;else{s[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=c;s[i][d]=Lu(o[d],l[d],a)}}}else i==="className"&&a&&t.className?s.className=Lt(e?.className,t?.className):i==="style"&&a&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function O9(e){const{theme:t,name:a,props:s}=e;return!t||!t.components||!t.components[a]||!t.components[a].defaultProps?s:Lu(t.components[a].defaultProps,s)}function xce({props:e,name:t,defaultTheme:a,themeId:s}){let r=L9(a);return r=r[s]||r,O9({theme:r,name:t,props:e})}const ss=typeof window<"u"?h.useLayoutEffect:h.useEffect;function yce(e,t,a,s,r){const[i,o]=h.useState(()=>r&&a?a(e).matches:s?s(e).matches:t);return ss(()=>{if(!a)return;const l=a(e),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[e,a]),i}const bce={...Su},M9=bce.useSyncExternalStore;function vce(e,t,a,s,r){const i=h.useCallback(()=>t,[t]),o=h.useMemo(()=>{if(r&&a)return()=>a(e).matches;if(s!==null){const{matches:u}=s(e);return()=>u}return i},[i,e,s,r,a]),[l,c]=h.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const u=a(e);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[i,a,e]);return M9(c,l,o)}function I9(e={}){const{themeId:t}=e;return function(s,r={}){let i=k9();i&&t&&(i=i[t]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=O9({name:"MuiUseMediaQuery",props:r,theme:i});let f=typeof s=="function"?s(i):s;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(M9!==void 0?vce:yce)(f,l,c,d,u)}}I9();function wce(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}function OL(e,t=0,a=1){return wce(e,t,a)}function Nce(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function cd(e){if(e.type)return e;if(e.charAt(0)==="#")return cd(Nce(e));const t=e.indexOf("("),a=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(ku(9,e));let s=e.substring(t+1,e.length-1),r;if(a==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(ku(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:a,values:s,colorSpace:r}}const jce=e=>{const t=cd(e);return t.values.slice(0,3).map((a,s)=>t.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},$g=(e,t)=>{try{return jce(e)}catch{return e}};function gN(e){const{type:t,colorSpace:a}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function $9(e){e=cd(e);const{values:t}=e,a=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),o=(d,u=(d+a/30)%12)=>r-i*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),gN({type:l,values:c})}function aE(e){e=cd(e);let t=e.type==="hsl"||e.type==="hsla"?cd($9(e)).values:e.values;return t=t.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Cce(e,t){const a=aE(e),s=aE(t);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function R9(e,t){return e=cd(e),t=OL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,gN(e)}function Gd(e,t,a){try{return R9(e,t)}catch{return e}}function pN(e,t){if(e=cd(e),t=OL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]*=1-t;return gN(e)}function Dn(e,t,a){try{return pN(e,t)}catch{return e}}function xN(e,t){if(e=cd(e),t=OL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*t;else if(e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*t;return gN(e)}function On(e,t,a){try{return xN(e,t)}catch{return e}}function Sce(e,t=.15){return aE(e)>.5?pN(e,t):xN(e,t)}function Ry(e,t,a){try{return Sce(e,t)}catch{return e}}const _ce=h.createContext(),gx=()=>h.useContext(_ce)??!1,Ace=h.createContext(void 0);function Tce(e){const{theme:t,name:a,props:s}=e;if(!t||!t.components||!t.components[a])return s;const r=t.components[a];return r.defaultProps?Lu(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?Lu(r,s,t.components.mergeClassNameAndStyle):s}function Ece({props:e,name:t}){const a=h.useContext(Ace);return Tce({props:e,name:t,theme:{components:a}})}let r$=0;function kce(e){const[t,a]=h.useState(e),s=e||t;return h.useEffect(()=>{t==null&&(r$+=1,a(`mui-${r$}`))},[t]),s}const Lce={...Su},i$=Lce.useId;function yN(e){if(i$!==void 0){const t=i$();return e??t}return kce(e)}const o$={theme:void 0};function Pce(e){let t,a;return function(r){let i=t;return(i===void 0||r.theme!==a)&&(o$.theme=r.theme,i=P9(e(o$)),t=i,a=r.theme),i}}function Dce(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const l$=(e,t,a,s=[])=>{let r=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(r)?r[Number(i)]=a:r&&typeof r=="object"&&(r[i]=a):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},Oce=(e,t,a)=>{function s(r,i=[],o=[]){Object.entries(r).forEach(([l,c])=>{(!a||a&&!a([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}s(e)},Mce=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function QS(e,t){const{prefix:a,shouldSkipGeneratingVar:s}=t||{},r={},i={},o={};return Oce(e,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const u=`--${a?`${a}-`:""}${l.join("-")}`,f=Mce(l,c);Object.assign(r,{[u]:f}),l$(i,l,`var(${u})`,d),l$(o,l,`var(${u}, ${f})`,d)}},l=>l[0]==="vars"),{css:r,vars:i,varsWithDefaults:o}}function Ice(e,t={}){const{getSelector:a=j,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...d}=e,{vars:u,css:f,varsWithDefaults:p}=QS(d,t);let x=p;const y={},{[c]:N,...v}=o;if(Object.entries(v||{}).forEach(([A,k])=>{const{vars:_,css:L,varsWithDefaults:T}=QS(k,t);x=$r(x,T),y[A]={css:L,vars:_}}),N){const{css:A,vars:k,varsWithDefaults:_}=QS(N,t);x=$r(x,_),y[c]={css:A,vars:k}}function j(A,k){let _=r;if(r==="class"&&(_=".%s"),r==="data"&&(_="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(_=`[${r}="%s"]`),A){if(_==="media")return e.defaultColorScheme===A?":root":{[`@media (prefers-color-scheme: ${o[A]?.palette?.mode||A})`]:{":root":k}};if(_)return e.defaultColorScheme===A?`:root, ${_.replace("%s",String(A))}`:_.replace("%s",String(A))}return":root"}return{vars:x,generateThemeVars:()=>{let A={...u};return Object.entries(y).forEach(([,{vars:k}])=>{A=$r(A,k)}),A},generateStyleSheets:()=>{const A=[],k=e.defaultColorScheme||"light";function _(M,R){Object.keys(R).length&&A.push(typeof M=="string"?{[M]:{...R}}:M)}_(a(void 0,{...f}),f);const{[k]:L,...T}=y;if(L){const{css:M}=L,R=o[k]?.palette?.mode,z=!s&&R?{colorScheme:R,...M}:{...M};_(a(k,{...z}),z)}return Object.entries(T).forEach(([M,{css:R}])=>{const z=o[M]?.palette?.mode,O=!s&&z?{colorScheme:z,...R}:{...R};_(a(M,{...O}),O)}),i&&A.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),A}}}function $ce(e){return function(a){return e==="media"?`@media (prefers-color-scheme: ${a})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${a}"] &`:e==="class"?`.${a} &`:e==="data"?`[data-${a}] &`:`${e.replace("%s",a)} &`:"&"}}const pp={black:"#000",white:"#fff"},Rce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Fm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Um={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},ug={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Bm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Hm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},qm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function z9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:pp.white,default:pp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const F9=z9();function U9(){return{text:{primary:pp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:pp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const sE=U9();function c$(e,t,a,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(a)?e[t]=e[a]:t==="light"?e.light=xN(e.main,r):t==="dark"&&(e.dark=pN(e.main,i)))}function d$(e,t,a,s,r){const i=r.light||r,o=r.dark||r*1.5;t[a]||(t.hasOwnProperty(s)?t[a]=t[s]:a==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function zce(e="light"){return e==="dark"?{main:Bm[200],light:Bm[50],dark:Bm[400]}:{main:Bm[700],light:Bm[400],dark:Bm[800]}}function Fce(e="light"){return e==="dark"?{main:Fm[200],light:Fm[50],dark:Fm[400]}:{main:Fm[500],light:Fm[300],dark:Fm[700]}}function Uce(e="light"){return e==="dark"?{main:Um[500],light:Um[300],dark:Um[700]}:{main:Um[700],light:Um[400],dark:Um[800]}}function Bce(e="light"){return e==="dark"?{main:Hm[400],light:Hm[300],dark:Hm[700]}:{main:Hm[700],light:Hm[500],dark:Hm[900]}}function Hce(e="light"){return e==="dark"?{main:qm[400],light:qm[300],dark:qm[700]}:{main:qm[800],light:qm[500],dark:qm[900]}}function qce(e="light"){return e==="dark"?{main:ug[400],light:ug[300],dark:ug[700]}:{main:"#ed6c02",light:ug[500],dark:ug[900]}}function Gce(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function ML(e){const{mode:t="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:r,...i}=e,o=e.primary||zce(t),l=e.secondary||Fce(t),c=e.error||Uce(t),d=e.info||Bce(t),u=e.success||Hce(t),f=e.warning||qce(t);function p(v){return r?Gce(v):Cce(v,sE.text.primary)>=a?sE.text.primary:F9.text.primary}const x=({color:v,name:j,mainShade:w=500,lightShade:S=300,darkShade:A=700})=>{if(v={...v},!v.main&&v[w]&&(v.main=v[w]),!v.hasOwnProperty("main"))throw new Error(ku(11,j?` (${j})`:"",w));if(typeof v.main!="string")throw new Error(ku(12,j?` (${j})`:"",JSON.stringify(v.main)));return r?(d$(r,v,"light",S,s),d$(r,v,"dark",A,s)):(c$(v,"light",S,s),c$(v,"dark",A,s)),v.contrastText||(v.contrastText=p(v.main)),v};let y;return t==="light"?y=z9():t==="dark"&&(y=U9()),$r({common:{...pp},mode:t,primary:x({color:o,name:"primary"}),secondary:x({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:f,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:u,name:"success"}),grey:Rce,contrastThreshold:a,getContrastText:p,augmentColor:x,tonalOffset:s,...y},i)}function Wce(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function Vce(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Yce(e){return Math.round(e*1e5)/1e5}const u$={textTransform:"uppercase"},m$='"Roboto", "Helvetica", "Arial", sans-serif';function Qce(e,t){const{fontFamily:a=m$,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...f}=typeof t=="function"?t(e):t,p=s/14,x=u||(v=>`${v/c*p}rem`),y=(v,j,w,S,A)=>({fontFamily:a,fontWeight:v,fontSize:x(j),lineHeight:w,...a===m$?{letterSpacing:`${Yce(S/j)}em`}:{},...A,...d}),N={h1:y(r,96,1.167,-1.5),h2:y(r,60,1.2,-.5),h3:y(i,48,1.167,0),h4:y(i,34,1.235,.25),h5:y(i,24,1.334,0),h6:y(o,20,1.6,.15),subtitle1:y(i,16,1.75,.15),subtitle2:y(o,14,1.57,.1),body1:y(i,16,1.5,.15),body2:y(i,14,1.43,.15),button:y(o,14,1.75,.4,u$),caption:y(i,12,1.66,.4),overline:y(i,12,2.66,1,u$),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return $r({htmlFontSize:c,pxToRem:x,fontFamily:a,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...N},f,{clone:!1})}const Kce=.2,Xce=.14,Zce=.12;function ra(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Kce})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Xce})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Zce})`].join(",")}const Jce=["none",ra(0,2,1,-1,0,1,1,0,0,1,3,0),ra(0,3,1,-2,0,2,2,0,0,1,5,0),ra(0,3,3,-2,0,3,4,0,0,1,8,0),ra(0,2,4,-1,0,4,5,0,0,1,10,0),ra(0,3,5,-1,0,5,8,0,0,1,14,0),ra(0,3,5,-1,0,6,10,0,0,1,18,0),ra(0,4,5,-2,0,7,10,1,0,2,16,1),ra(0,5,5,-3,0,8,10,1,0,3,14,2),ra(0,5,6,-3,0,9,12,1,0,3,16,2),ra(0,6,6,-3,0,10,14,1,0,4,18,3),ra(0,6,7,-4,0,11,15,1,0,4,20,3),ra(0,7,8,-4,0,12,17,2,0,5,22,4),ra(0,7,8,-4,0,13,19,2,0,5,24,4),ra(0,7,9,-4,0,14,21,2,0,5,26,4),ra(0,8,9,-5,0,15,22,2,0,6,28,5),ra(0,8,10,-5,0,16,24,2,0,6,30,5),ra(0,8,11,-5,0,17,26,2,0,6,32,5),ra(0,9,11,-5,0,18,28,2,0,7,34,6),ra(0,9,12,-6,0,19,29,2,0,7,36,6),ra(0,10,13,-6,0,20,31,3,0,8,38,7),ra(0,10,13,-6,0,21,33,3,0,8,40,7),ra(0,10,14,-6,0,22,35,3,0,8,42,7),ra(0,11,14,-7,0,23,36,3,0,9,44,8),ra(0,11,15,-7,0,24,38,3,0,9,46,8)],ede={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},tde={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function f$(e){return`${Math.round(e)}ms`}function nde(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function ade(e){const t={...ede,...e.easing},a={...tde,...e.duration};return{getAutoHeightDuration:nde,create:(r=["all"],i={})=>{const{duration:o=a.standard,easing:l=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof o=="string"?o:f$(o)} ${l} ${typeof c=="string"?c:f$(c)}`).join(",")},...e,easing:t,duration:a}}const sde={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function rde(e){return jo(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function B9(e={}){const t={...e};function a(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[o,l]=r[i];!rde(l)||o.startsWith("unstable_")?delete s[o]:jo(l)&&(s[o]={...l},a(s[o]))}}return a(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function h$(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const ide=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let a=0;for(let s=0;s<t.length;s+=1)a+=+t[s];return a};function ode(e){Object.assign(e,{alpha(t,a){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:R9(t,ide(a))},lighten(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${h$(a)})`:xN(t,a)},darken(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${h$(a)})`:pN(t,a)}})}function rE(e={},...t){const{breakpoints:a,mixins:s={},spacing:r,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:d,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(ku(20));const f=ML({...i,colorSpace:d}),p=DL(e);let x=$r(p,{mixins:Vce(p.breakpoints,s),palette:f,shadows:Jce.slice(),typography:Qce(f,l),transitions:ade(o),zIndex:{...sde}});return x=$r(x,u),x=t.reduce((y,N)=>$r(y,N),x),x.unstable_sxConfig={...mx,...u?.unstable_sxConfig},x.unstable_sx=function(N){return Sf({sx:N,theme:this})},x.toRuntimeSource=B9,ode(x),x}function lde(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const cde=[...Array(25)].map((e,t)=>{if(t===0)return"none";const a=lde(t);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function H9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function q9(e){return e==="dark"?cde:[]}function dde(e){const{palette:t={mode:"light"},opacity:a,overlays:s,colorSpace:r,...i}=e,o=ML({...t,colorSpace:r});return{palette:o,opacity:{...H9(o.mode),...a},overlays:s||q9(o.mode),...i}}function ude(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const mde=e=>[...[...Array(25)].map((t,a)=>`--${e?`${e}-`:""}overlays-${a}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],fde=e=>(t,a)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return mde(e.cssVarPrefix).forEach(l=>{o[l]=a[l],delete a[l]}),i==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:o}}:i?{[i.replace("%s",t)]:o,[`${s}, ${i.replace("%s",t)}`]:a}:{[s]:{...a,...o}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:a}};if(i)return i.replace("%s",String(t))}return s};function hde(e,t){t.forEach(a=>{e[a]||(e[a]={})})}function ht(e,t,a){!e[t]&&a&&(e[t]=a)}function Rg(e){return typeof e!="string"||!e.startsWith("hsl")?e:$9(e)}function hl(e,t){`${t}Channel`in e||(e[`${t}Channel`]=$g(Rg(e[t])))}function gde(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const io=e=>{try{return e()}catch{}},pde=(e="mui")=>Dce(e);function KS(e,t,a,s,r){if(!a)return;a=a===!0?{}:a;const i=r==="dark"?"dark":"light";if(!s){t[r]=dde({...a,palette:{mode:i,...a?.palette},colorSpace:e});return}const{palette:o,...l}=rE({...s,palette:{mode:i,...a?.palette},colorSpace:e});return t[r]={...a,palette:o,opacity:{...H9(i),...a?.opacity},overlays:a?.overlays||q9(i)},l}function xde(e={},...t){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=ude,colorSchemeSelector:c=a.light&&a.dark?"media":void 0,rootSelector:d=":root",...u}=e,f=Object.keys(a)[0],p=s||(a.light&&f!=="light"?"light":f),x=pde(i),{[p]:y,light:N,dark:v,...j}=a,w={...j};let S=y;if((p==="dark"&&!("dark"in a)||p==="light"&&!("light"in a))&&(S=!0),!S)throw new Error(ku(21,p));let A;o&&(A="oklch");const k=KS(A,w,S,u,p);N&&!w.light&&KS(A,w,N,void 0,"light"),v&&!w.dark&&KS(A,w,v,void 0,"dark");let _={defaultColorScheme:p,...k,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:w,font:{...Wce(k.typography),...k.font},spacing:gde(u.spacing)};Object.keys(_.colorSchemes).forEach(z=>{const O=_.colorSchemes[z].palette,I=ee=>{const Q=ee.split("-"),te=Q[1],W=Q[2];return x(ee,O[te][W])};O.mode==="light"&&(ht(O.common,"background","#fff"),ht(O.common,"onBackground","#000")),O.mode==="dark"&&(ht(O.common,"background","#000"),ht(O.common,"onBackground","#fff"));function B(ee,Q,te){if(A){let W;return ee===Gd&&(W=`transparent ${((1-te)*100).toFixed(0)}%`),ee===Dn&&(W=`#000 ${(te*100).toFixed(0)}%`),ee===On&&(W=`#fff ${(te*100).toFixed(0)}%`),`color-mix(in ${A}, ${Q}, ${W})`}return ee(Q,te)}if(hde(O,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),O.mode==="light"){ht(O.Alert,"errorColor",B(Dn,O.error.light,.6)),ht(O.Alert,"infoColor",B(Dn,O.info.light,.6)),ht(O.Alert,"successColor",B(Dn,O.success.light,.6)),ht(O.Alert,"warningColor",B(Dn,O.warning.light,.6)),ht(O.Alert,"errorFilledBg",I("palette-error-main")),ht(O.Alert,"infoFilledBg",I("palette-info-main")),ht(O.Alert,"successFilledBg",I("palette-success-main")),ht(O.Alert,"warningFilledBg",I("palette-warning-main")),ht(O.Alert,"errorFilledColor",io(()=>O.getContrastText(O.error.main))),ht(O.Alert,"infoFilledColor",io(()=>O.getContrastText(O.info.main))),ht(O.Alert,"successFilledColor",io(()=>O.getContrastText(O.success.main))),ht(O.Alert,"warningFilledColor",io(()=>O.getContrastText(O.warning.main))),ht(O.Alert,"errorStandardBg",B(On,O.error.light,.9)),ht(O.Alert,"infoStandardBg",B(On,O.info.light,.9)),ht(O.Alert,"successStandardBg",B(On,O.success.light,.9)),ht(O.Alert,"warningStandardBg",B(On,O.warning.light,.9)),ht(O.Alert,"errorIconColor",I("palette-error-main")),ht(O.Alert,"infoIconColor",I("palette-info-main")),ht(O.Alert,"successIconColor",I("palette-success-main")),ht(O.Alert,"warningIconColor",I("palette-warning-main")),ht(O.AppBar,"defaultBg",I("palette-grey-100")),ht(O.Avatar,"defaultBg",I("palette-grey-400")),ht(O.Button,"inheritContainedBg",I("palette-grey-300")),ht(O.Button,"inheritContainedHoverBg",I("palette-grey-A100")),ht(O.Chip,"defaultBorder",I("palette-grey-400")),ht(O.Chip,"defaultAvatarColor",I("palette-grey-700")),ht(O.Chip,"defaultIconColor",I("palette-grey-700")),ht(O.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ht(O.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ht(O.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ht(O.LinearProgress,"primaryBg",B(On,O.primary.main,.62)),ht(O.LinearProgress,"secondaryBg",B(On,O.secondary.main,.62)),ht(O.LinearProgress,"errorBg",B(On,O.error.main,.62)),ht(O.LinearProgress,"infoBg",B(On,O.info.main,.62)),ht(O.LinearProgress,"successBg",B(On,O.success.main,.62)),ht(O.LinearProgress,"warningBg",B(On,O.warning.main,.62)),ht(O.Skeleton,"bg",A?B(Gd,O.text.primary,.11):`rgba(${I("palette-text-primaryChannel")} / 0.11)`),ht(O.Slider,"primaryTrack",B(On,O.primary.main,.62)),ht(O.Slider,"secondaryTrack",B(On,O.secondary.main,.62)),ht(O.Slider,"errorTrack",B(On,O.error.main,.62)),ht(O.Slider,"infoTrack",B(On,O.info.main,.62)),ht(O.Slider,"successTrack",B(On,O.success.main,.62)),ht(O.Slider,"warningTrack",B(On,O.warning.main,.62));const ee=A?B(Dn,O.background.default,.6825):Ry(O.background.default,.8);ht(O.SnackbarContent,"bg",ee),ht(O.SnackbarContent,"color",io(()=>A?sE.text.primary:O.getContrastText(ee))),ht(O.SpeedDialAction,"fabHoverBg",Ry(O.background.paper,.15)),ht(O.StepConnector,"border",I("palette-grey-400")),ht(O.StepContent,"border",I("palette-grey-400")),ht(O.Switch,"defaultColor",I("palette-common-white")),ht(O.Switch,"defaultDisabledColor",I("palette-grey-100")),ht(O.Switch,"primaryDisabledColor",B(On,O.primary.main,.62)),ht(O.Switch,"secondaryDisabledColor",B(On,O.secondary.main,.62)),ht(O.Switch,"errorDisabledColor",B(On,O.error.main,.62)),ht(O.Switch,"infoDisabledColor",B(On,O.info.main,.62)),ht(O.Switch,"successDisabledColor",B(On,O.success.main,.62)),ht(O.Switch,"warningDisabledColor",B(On,O.warning.main,.62)),ht(O.TableCell,"border",B(On,B(Gd,O.divider,1),.88)),ht(O.Tooltip,"bg",B(Gd,O.grey[700],.92))}if(O.mode==="dark"){ht(O.Alert,"errorColor",B(On,O.error.light,.6)),ht(O.Alert,"infoColor",B(On,O.info.light,.6)),ht(O.Alert,"successColor",B(On,O.success.light,.6)),ht(O.Alert,"warningColor",B(On,O.warning.light,.6)),ht(O.Alert,"errorFilledBg",I("palette-error-dark")),ht(O.Alert,"infoFilledBg",I("palette-info-dark")),ht(O.Alert,"successFilledBg",I("palette-success-dark")),ht(O.Alert,"warningFilledBg",I("palette-warning-dark")),ht(O.Alert,"errorFilledColor",io(()=>O.getContrastText(O.error.dark))),ht(O.Alert,"infoFilledColor",io(()=>O.getContrastText(O.info.dark))),ht(O.Alert,"successFilledColor",io(()=>O.getContrastText(O.success.dark))),ht(O.Alert,"warningFilledColor",io(()=>O.getContrastText(O.warning.dark))),ht(O.Alert,"errorStandardBg",B(Dn,O.error.light,.9)),ht(O.Alert,"infoStandardBg",B(Dn,O.info.light,.9)),ht(O.Alert,"successStandardBg",B(Dn,O.success.light,.9)),ht(O.Alert,"warningStandardBg",B(Dn,O.warning.light,.9)),ht(O.Alert,"errorIconColor",I("palette-error-main")),ht(O.Alert,"infoIconColor",I("palette-info-main")),ht(O.Alert,"successIconColor",I("palette-success-main")),ht(O.Alert,"warningIconColor",I("palette-warning-main")),ht(O.AppBar,"defaultBg",I("palette-grey-900")),ht(O.AppBar,"darkBg",I("palette-background-paper")),ht(O.AppBar,"darkColor",I("palette-text-primary")),ht(O.Avatar,"defaultBg",I("palette-grey-600")),ht(O.Button,"inheritContainedBg",I("palette-grey-800")),ht(O.Button,"inheritContainedHoverBg",I("palette-grey-700")),ht(O.Chip,"defaultBorder",I("palette-grey-700")),ht(O.Chip,"defaultAvatarColor",I("palette-grey-300")),ht(O.Chip,"defaultIconColor",I("palette-grey-300")),ht(O.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ht(O.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ht(O.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ht(O.LinearProgress,"primaryBg",B(Dn,O.primary.main,.5)),ht(O.LinearProgress,"secondaryBg",B(Dn,O.secondary.main,.5)),ht(O.LinearProgress,"errorBg",B(Dn,O.error.main,.5)),ht(O.LinearProgress,"infoBg",B(Dn,O.info.main,.5)),ht(O.LinearProgress,"successBg",B(Dn,O.success.main,.5)),ht(O.LinearProgress,"warningBg",B(Dn,O.warning.main,.5)),ht(O.Skeleton,"bg",A?B(Gd,O.text.primary,.13):`rgba(${I("palette-text-primaryChannel")} / 0.13)`),ht(O.Slider,"primaryTrack",B(Dn,O.primary.main,.5)),ht(O.Slider,"secondaryTrack",B(Dn,O.secondary.main,.5)),ht(O.Slider,"errorTrack",B(Dn,O.error.main,.5)),ht(O.Slider,"infoTrack",B(Dn,O.info.main,.5)),ht(O.Slider,"successTrack",B(Dn,O.success.main,.5)),ht(O.Slider,"warningTrack",B(Dn,O.warning.main,.5));const ee=A?B(On,O.background.default,.985):Ry(O.background.default,.98);ht(O.SnackbarContent,"bg",ee),ht(O.SnackbarContent,"color",io(()=>A?F9.text.primary:O.getContrastText(ee))),ht(O.SpeedDialAction,"fabHoverBg",Ry(O.background.paper,.15)),ht(O.StepConnector,"border",I("palette-grey-600")),ht(O.StepContent,"border",I("palette-grey-600")),ht(O.Switch,"defaultColor",I("palette-grey-300")),ht(O.Switch,"defaultDisabledColor",I("palette-grey-600")),ht(O.Switch,"primaryDisabledColor",B(Dn,O.primary.main,.55)),ht(O.Switch,"secondaryDisabledColor",B(Dn,O.secondary.main,.55)),ht(O.Switch,"errorDisabledColor",B(Dn,O.error.main,.55)),ht(O.Switch,"infoDisabledColor",B(Dn,O.info.main,.55)),ht(O.Switch,"successDisabledColor",B(Dn,O.success.main,.55)),ht(O.Switch,"warningDisabledColor",B(Dn,O.warning.main,.55)),ht(O.TableCell,"border",B(Dn,B(Gd,O.divider,1),.68)),ht(O.Tooltip,"bg",B(Gd,O.grey[700],.92))}hl(O.background,"default"),hl(O.background,"paper"),hl(O.common,"background"),hl(O.common,"onBackground"),hl(O,"divider"),Object.keys(O).forEach(ee=>{const Q=O[ee];ee!=="tonalOffset"&&Q&&typeof Q=="object"&&(Q.main&&ht(O[ee],"mainChannel",$g(Rg(Q.main))),Q.light&&ht(O[ee],"lightChannel",$g(Rg(Q.light))),Q.dark&&ht(O[ee],"darkChannel",$g(Rg(Q.dark))),Q.contrastText&&ht(O[ee],"contrastTextChannel",$g(Rg(Q.contrastText))),ee==="text"&&(hl(O[ee],"primary"),hl(O[ee],"secondary")),ee==="action"&&(Q.active&&hl(O[ee],"active"),Q.selected&&hl(O[ee],"selected")))})}),_=t.reduce((z,O)=>$r(z,O),_);const L={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:l,getSelector:fde(_),enableContrastVars:o},{vars:T,generateThemeVars:M,generateStyleSheets:R}=Ice(_,L);return _.vars=T,Object.entries(_.colorSchemes[_.defaultColorScheme]).forEach(([z,O])=>{_[z]=O}),_.generateThemeVars=M,_.generateStyleSheets=R,_.generateSpacing=function(){return E9(u.spacing,CL(this))},_.getColorSchemeSelector=$ce(c),_.spacing=_.generateSpacing(),_.shouldSkipGeneratingVar=l,_.unstable_sxConfig={...mx,...u?.unstable_sxConfig},_.unstable_sx=function(O){return Sf({sx:O,theme:this})},_.toRuntimeSource=B9,_}function g$(e,t,a){e.colorSchemes&&a&&(e.colorSchemes[t]={...a!==!0&&a,palette:ML({...a===!0?{}:a.palette,mode:t})})}function yde(e={},...t){const{palette:a,cssVariables:s=!1,colorSchemes:r=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...o}=e,l=i||"light",c=r?.[l],d={...r,...a?{[l]:{...typeof c!="boolean"&&c,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in e))return rE(e,...t);let u=a;"palette"in e||d[l]&&(d[l]!==!0?u=d[l].palette:l==="dark"&&(u={mode:"dark"}));const f=rE({...e,palette:u},...t);return f.defaultColorScheme=l,f.colorSchemes=d,f.palette.mode==="light"&&(f.colorSchemes.light={...d.light!==!0&&d.light,palette:f.palette},g$(f,"dark",d.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:f.palette},g$(f,"light",d.light)),f}return!a&&!("light"in d)&&l==="light"&&(d.light=!0),xde({...o,colorSchemes:d,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const IL=yde(),bN="$$material";function Go(){const e=L9(IL);return e[bN]||e}function bde(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const G9=e=>bde(e)&&e!=="classes",ln=mce({themeId:bN,defaultTheme:IL,rootShouldForwardProp:G9});function vde(){return ele}function wd(e){return Ece(e)}function Ro(...e){const t=h.useRef(void 0),a=h.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return h.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=a(s))},e)}function wde(e){return typeof e=="string"}function W9(e,t,a){return e===void 0||wde(e)?t:{...t,ownerState:{...t.ownerState,...a}}}function V9(e,t,a){return typeof e=="function"?e(t,a):e}function Nde(e,t=[]){if(e===void 0)return{};const a={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{a[s]=e[s]}),a}function p$(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(a=>!(a.match(/^on[A-Z]/)&&typeof e[a]=="function")).forEach(a=>{t[a]=e[a]}),t}function Y9(e){const{getSlotProps:t,additionalProps:a,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=Lt(a?.className,i,r?.className,s?.className),y={...a?.style,...r?.style,...s?.style},N={...a,...r,...s};return x.length>0&&(N.className=x),Object.keys(y).length>0&&(N.style=y),{props:N,internalRef:void 0}}const o=Nde({...r,...s}),l=p$(s),c=p$(r),d=t(o),u=Lt(d?.className,a?.className,i,r?.className,s?.className),f={...d?.style,...a?.style,...r?.style,...s?.style},p={...d,...a,...c,...l};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:d.ref}}function x$(e,t){const{className:a,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:d,slots:u={[e]:void 0},slotProps:f={[e]:void 0},...p}=i,x=u[e]||s,y=V9(f[e],r),{props:{component:N,...v},internalRef:j}=Y9({className:a,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:y}),w=Ro(j,y?.ref,t.ref),S=e==="root"?N||d:N,A=W9(x,{...e==="root"&&!d&&!u[e]&&o,...e!=="root"&&!u[e]&&o,...v,...S&&!l&&{as:S},...S&&l&&{component:S},ref:w},r);return[x,A]}function hn(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function iE(e,t){return iE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},iE(e,t)}function Q9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,iE(e,t)}const y$={disabled:!1},bv=pt.createContext(null);var jde=function(t){return t.scrollTop},zg="unmounted",Kd="exited",Xd="entering",rf="entered",oE="exiting",Jl=(function(e){Q9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=r,l=o&&!o.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?l?(c=Kd,i.appearStatus=Xd):c=rf:s.unmountOnExit||s.mountOnEnter?c=zg:c=Kd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var o=r.in;return o&&i.status===zg?{status:Kd}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(r){var i=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Xd&&o!==rf&&(i=Xd):(o===Xd||o===rf)&&(i=oE)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var r=this.props.timeout,i,o,l;return i=o=l=r,r!=null&&typeof r!="number"&&(i=r.exit,o=r.enter,l=r.appear!==void 0?r.appear:o),{exit:i,enter:o,appear:l}},a.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Xd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Dy.findDOMNode(this);o&&jde(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Kd&&this.setState({status:zg})},a.performEnter=function(r){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:r,c=this.props.nodeRef?[l]:[Dy.findDOMNode(this),l],d=c[0],u=c[1],f=this.getTimeouts(),p=l?f.appear:f.enter;if(!r&&!o||y$.disabled){this.safeSetState({status:rf},function(){i.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:Xd},function(){i.props.onEntering(d,u),i.onTransitionEnd(p,function(){i.safeSetState({status:rf},function(){i.props.onEntered(d,u)})})})},a.performExit=function(){var r=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:Dy.findDOMNode(this);if(!i||y$.disabled){this.safeSetState({status:Kd},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:oE},function(){r.props.onExiting(l),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Kd},function(){r.props.onExited(l)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},a.setNextCallback=function(r){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,r(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},a.onTransitionEnd=function(r,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Dy.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}r!=null&&setTimeout(this.nextCallback,r)},a.render=function(){var r=this.state.status;if(r===zg)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=hn(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return pt.createElement(bv.Provider,{value:null},typeof o=="function"?o(r,l):pt.cloneElement(pt.Children.only(o),l))},t})(pt.Component);Jl.contextType=bv;Jl.propTypes={};function Gm(){}Jl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Gm,onEntering:Gm,onEntered:Gm,onExit:Gm,onExiting:Gm,onExited:Gm};Jl.UNMOUNTED=zg;Jl.EXITED=Kd;Jl.ENTERING=Xd;Jl.ENTERED=rf;Jl.EXITING=oE;function Cde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $L(e,t){var a=function(i){return t&&h.isValidElement(i)?t(i):i},s=Object.create(null);return e&&h.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=a(r)}),s}function Sde(e,t){e=e||{},t=t||{};function a(u){return u in t?t[u]:e[u]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var d=s[c][o];l[s[c][o]]=a(d)}l[c]=a(c)}for(o=0;o<r.length;o++)l[r[o]]=a(r[o]);return l}function cu(e,t,a){return a[t]!=null?a[t]:e.props[t]}function _de(e,t){return $L(e.children,function(a){return h.cloneElement(a,{onExited:t.bind(null,a),in:!0,appear:cu(a,"appear",e),enter:cu(a,"enter",e),exit:cu(a,"exit",e)})})}function Ade(e,t,a){var s=$L(e.children),r=Sde(t,s);return Object.keys(r).forEach(function(i){var o=r[i];if(h.isValidElement(o)){var l=i in t,c=i in s,d=t[i],u=h.isValidElement(d)&&!d.props.in;c&&(!l||u)?r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:!0,exit:cu(o,"exit",e),enter:cu(o,"enter",e)}):!c&&l&&!u?r[i]=h.cloneElement(o,{in:!1}):c&&l&&h.isValidElement(d)&&(r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:d.props.in,exit:cu(o,"exit",e),enter:cu(o,"enter",e)}))}}),r}var Tde=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Ede={component:"div",childFactory:function(t){return t}},RL=(function(e){Q9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=i.handleExited.bind(Cde(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?_de(r,l):Ade(r,o,l),firstRender:!1}},a.handleExited=function(r,i){var o=$L(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(l){var c=Ye({},l.children);return delete c[r.key],{children:c}}))},a.render=function(){var r=this.props,i=r.component,o=r.childFactory,l=hn(r,["component","childFactory"]),c=this.state.contextValue,d=Tde(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?pt.createElement(bv.Provider,{value:c},d):pt.createElement(bv.Provider,{value:c},pt.createElement(i,l,d))},t})(pt.Component);RL.propTypes={};RL.defaultProps=Ede;function K9(e){return parseInt(h.version,10)>=19?e?.props?.ref||null:e?.ref||null}const kde=e=>e.scrollTop;function b$(e,t){const{timeout:a,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof a=="number"?a:a[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const Lde={entering:{opacity:1},entered:{opacity:1}},Pde=h.forwardRef(function(t,a){const s=Go(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:d,onEnter:u,onEntered:f,onEntering:p,onExit:x,onExited:y,onExiting:N,style:v,timeout:j=r,TransitionComponent:w=Jl,...S}=t,A=h.useRef(null),k=Ro(A,K9(l),a),_=B=>ee=>{if(B){const Q=A.current;ee===void 0?B(Q):B(Q,ee)}},L=_(p),T=_((B,ee)=>{kde(B);const Q=b$({style:v,timeout:j,easing:c},{mode:"enter"});B.style.webkitTransition=s.transitions.create("opacity",Q),B.style.transition=s.transitions.create("opacity",Q),u&&u(B,ee)}),M=_(f),R=_(N),z=_(B=>{const ee=b$({style:v,timeout:j,easing:c},{mode:"exit"});B.style.webkitTransition=s.transitions.create("opacity",ee),B.style.transition=s.transitions.create("opacity",ee),x&&x(B)}),O=_(y),I=B=>{i&&i(A.current,B)};return n.jsx(w,{appear:o,in:d,nodeRef:A,onEnter:T,onEntered:M,onEntering:L,onExit:z,onExited:O,onExiting:R,addEndListener:I,timeout:j,...S,children:(B,{ownerState:ee,...Q})=>h.cloneElement(l,{style:{opacity:0,visibility:B==="exited"&&!d?"hidden":void 0,...Lde[B],...v,...l.props.style},ref:k,...Q})})});function Dde(e){return Ga("MuiBackdrop",e)}Sa("MuiBackdrop",["root","invisible"]);const Ode=e=>{const{classes:t,invisible:a}=e;return qa({root:["root",a&&"invisible"]},Dde,t)},Mde=ln("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Ide=h.forwardRef(function(t,a){const s=wd({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:l=!1,open:c,components:d={},componentsProps:u={},slotProps:f={},slots:p={},TransitionComponent:x,transitionDuration:y,...N}=s,v={...s,component:o,invisible:l},j=Ode(v),w={transition:x,root:d.Root,...p},S={...u,...f},A={component:o,slots:w,slotProps:S},[k,_]=x$("root",{elementType:Mde,externalForwardedProps:A,className:Lt(j.root,i),ownerState:v}),[L,T]=x$("transition",{elementType:Pde,externalForwardedProps:A,ownerState:v});return n.jsx(L,{in:c,timeout:y,...N,...T,children:n.jsx(k,{"aria-hidden":!0,..._,classes:j,ref:a,children:r})})}),Pu=Pce;function $de(e){return typeof e.main=="string"}function Rde(e,t=[]){if(!$de(e))return!1;for(const a of t)if(!e.hasOwnProperty(a)||typeof e[a]!="string")return!1;return!0}function xp(e=[]){return([,t])=>t&&Rde(t,e)}function zde(e){return Ga("MuiCircularProgress",e)}Sa("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Di=44,lE=hx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,cE=hx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Fde=typeof lE!="string"?PL`
        animation: ${lE} 1.4s linear infinite;
      `:null,Ude=typeof cE!="string"?PL`
        animation: ${cE} 1.4s ease-in-out infinite;
      `:null,Bde=e=>{const{classes:t,variant:a,color:s,disableShrink:r}=e,i={root:["root",a,`color${qn(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${qn(a)}`,r&&"circleDisableShrink"]};return qa(i,zde,t)},Hde=ln("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`color${qn(a.color)}`]]}})(Pu(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Fde||{animation:`${lE} 1.4s linear infinite`}},...Object.entries(e.palette).filter(xp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),qde=ln("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Gde=ln("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.circle,t[`circle${qn(a.variant)}`],a.disableShrink&&t.circleDisableShrink]}})(Pu(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Ude||{animation:`${cE} 1.4s ease-in-out infinite`}}]}))),Wde=ln("circle",{name:"MuiCircularProgress",slot:"Track"})(Pu(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),zL=h.forwardRef(function(t,a){const s=wd({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:u=3.6,value:f=0,variant:p="indeterminate",...x}=s,y={...s,color:i,disableShrink:o,size:c,thickness:u,value:f,variant:p,enableTrackSlot:l},N=Bde(y),v={},j={},w={};if(p==="determinate"){const S=2*Math.PI*((Di-u)/2);v.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(f),v.strokeDashoffset=`${((100-f)/100*S).toFixed(3)}px`,j.transform="rotate(-90deg)"}return n.jsx(Hde,{className:Lt(N.root,r),style:{width:c,height:c,...j,...d},ownerState:y,ref:a,role:"progressbar",...w,...x,children:n.jsxs(qde,{className:N.svg,ownerState:y,viewBox:`${Di/2} ${Di/2} ${Di} ${Di}`,children:[l?n.jsx(Wde,{className:N.track,ownerState:y,cx:Di,cy:Di,r:(Di-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,n.jsx(Gde,{className:N.circle,style:v,ownerState:y,cx:Di,cy:Di,r:(Di-u)/2,fill:"none",strokeWidth:u})]})})});function X9(e){return n.jsx(Ide,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:n.jsx(zL,{color:"inherit"})})}var Cs={},zy={},v$;function Vde(){if(v$)return zy;v$=1,Object.defineProperty(zy,"__esModule",{value:!0});function e(t,a){return t.reduce((s,r)=>{const i=String(r[a]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return zy.default=e,zy}var Fy={},w$;function Yde(){if(w$)return Fy;w$=1,Object.defineProperty(Fy,"__esModule",{value:!0});function e(t,a){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=a[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return Fy.default=e,Fy}var Uy={},N$;function Qde(){if(N$)return Uy;N$=1,Object.defineProperty(Uy,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return Uy.default=e,Uy}var j$;function Kde(){if(j$)return Cs;j$=1;var e=Cs&&Cs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.customList=Cs.customArray=Cs.findOne=Cs.filter=Cs.all=Cs.utils=void 0;const t=e(Vde()),a=e(Yde()),s=e(Qde());Cs.utils={groupBy:t.default};function r(){return s.default}Cs.all=r;function i(d,u){return s.default.filter(f=>f[d]===u)}Cs.filter=i;function o(d,u){return s.default.find(f=>f[d]===u)}Cs.findOne=o;function l(d={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:u,sortDataBy:f,filter:p}={}){const x=[];let y=s.default;if(typeof p=="function"&&(y=y.filter(p)),f){const N=new Intl.Collator([],{sensitivity:"accent"});y.sort((v,j)=>N.compare(v[f],j[f]))}if(y.forEach(N=>{const v={};for(const j in d)v[j]=(0,a.default)(d[j],N);x.push(v)}),u&&d[u]){const N=new Intl.Collator([],{sensitivity:"accent"});x.sort((v,j)=>N.compare(v[u],j[u]))}return x}Cs.customArray=l;function c(d="countryCode",u="{countryNameEn} ({countryCode})",{filter:f}={}){const p={};let x=s.default;return typeof f=="function"&&(x=x.filter(f)),x.forEach(y=>{const N=(0,a.default)(u,y);p[String(y[d])]=N}),p}return Cs.customList=c,Cs}var Jf=Kde();const dE=(...e)=>e.flat().filter(Boolean).join(" "),Xde=Jf.all(),Z9=Xde.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),uE=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],Zde=()=>{const e=Nt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[n.jsx(Yu,{className:"size-4 mr-1"})," Back to Home"]})},Jde=h.memo(({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isVisible:o,onTogglePass:l,error:c,isSelect:d,options:u})=>{const f=t.toLowerCase().includes("password"),p=dE("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",f?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),n.jsxs("div",{className:"relative",children:[d?n.jsx("select",{id:t,value:r,onChange:i,required:!0,className:p,children:u.map(x=>n.jsx("option",{value:x,children:x},x))}):n.jsx("input",{id:t,type:f?"text":s,style:f&&!o?{WebkitTextSecurity:"disc"}:void 0,placeholder:a,value:r,onChange:i,required:!0,className:p}),f&&n.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(Tu,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]}),c&&n.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),su=Jde,eue=h.memo(({currentStep:e,totalSteps:t})=>n.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:uE.map(a=>n.jsxs(h.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[n.jsx("div",{className:dE("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",a.id===e?"bg-amber-500 text-white shadow-lg":a.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:a.id<e?n.jsx(xL,{className:"size-5"}):a.id}),n.jsx("span",{className:dE("mt-2 text-xs font-medium hidden sm:block",a.id===e?"text-amber-600":"text-gray-500"),children:a.title})]}),a.id<t&&n.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},a.id))})),tue=h.memo(({formData:e,handleChange:t,handleCodeChange:a,handleTogglePass:s,isPassVisible:r,formError:i,signupError:o,termsAccepted:l,handleTerms:c,isButtonDisabled:d,handleSubmit:u,handleGoogleLogin:f})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx(su,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(su,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:a,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:Z9.map(p=>n.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),n.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(su,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),n.jsx(su,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),n.jsx(su,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),o&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:o}),n.jsxs("div",{className:"flex items-start pt-2",children:[n.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),n.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),i&&n.jsx("div",{className:"mt-4 p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium animate-pulse",children:i}),n.jsx("button",{type:"submit",onClick:u,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),nue=h.memo(({companyData:e,handleCodeChange1:t,handleSubmit:a,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:o,setStep:l,setIsSubmitted:c,setFormError:d})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(su,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:Z9.map(u=>n.jsxs("option",{value:u.code,children:[u.name," ",u.code]},u.code))}),n.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(su,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),n.jsxs("div",{className:"flex space-x-4 mt-8",children:[n.jsxs("button",{type:"button",onClick:()=>{l(1),c(!1),d(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[n.jsx($ie,{className:"size-4 mr-2"})," Back"]}),n.jsx("button",{onClick:a,type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),aue=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[a,s]=h.useState(1),[r,i]=h.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[o,l]=h.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,d]=h.useState({}),[u,f]=h.useState(!1),[p,x]=h.useState(null),[y,N]=h.useState(!1),{login:v}=Qs(),[j,w]=h.useState({plan_name:"Free",price:0}),[S,A]=h.useState(!1),[k,_]=h.useState(null);h.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),h.useEffect(()=>{const W=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:L}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){W();return}const ae=document.createElement("script");ae.src="https://accounts.google.com/gsi/client",ae.async=!0,ae.defer=!0,ae.onload=W,document.body.appendChild(ae)},[]);const L=async W=>{A(!0);try{const ae=m9(W.credential);console.log("Google user:",ae);try{await ie.post("/auth/email-check",{email:ae.email})}catch(Ee){const se=Ee.response?.data?.detail||"An error occurred.";_(se),A(!1);return}i(Ee=>({...Ee,email:ae.email,first_name:ae.given_name||"",last_name:ae.family_name||"",password:"",profilePicture:ae.picture||"",googleId:ae.sub,auth_provider:"google",id_token:W.credential})),s(2)}catch(ae){console.error("Google signup error:",ae),x("Failed to process Google account. Please try again.")}finally{_(null),x(null),A(!1)}},T=h.useCallback(W=>{const{id:ae,value:Ee}=W.target;l(se=>({...se,[ae]:Ee})),x(null)},[]),M=h.useCallback(W=>{const{id:ae,value:Ee}=W.target;N(!1),i(se=>{const Y={...se,[ae]:Ee};if(a===1){let pe=null;if(ae==="password"&&Ee.length>0&&Ee.length<8)pe="Password must be at least 8 characters.";else if(ae==="password"||ae==="confirmPassword"){const Se=ae==="password"?Ee:Y.password,me=ae==="confirmPassword"?Ee:Y.confirmPassword;Se&&me&&Se!==me&&(pe="Passwords don't match.")}x(pe)}return Y})},[a]),R=h.useCallback(W=>i(ae=>({...ae,countryCode:W.target.value})),[]),z=h.useCallback(W=>l(ae=>({...ae,countryCode:W.target.value})),[]),O=h.useCallback(W=>d(ae=>({...ae,[W]:!ae[W]})),[]),I=h.useCallback(W=>f(W.target.checked),[]),B=async W=>{if(W.preventDefault(),N(!1),x(null),a===1){if(!e.every(Ee=>r[Ee].trim()!=="")||!u){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.password.length<8){x("Password must be at least 8 characters long.");return}if(r.auth_provider==="google"){s(2);return}try{(await ie.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(Ee){Ee.response&&Ee.response.data&&Ee.response.data.detail?x(Ee.response.data.detail):x("Something went wrong. Please try again.")}finally{A(!1)}}else if(a===2){if(!t.every(Ee=>(o[Ee]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:Ee,...se}=r,Y={...o,company_number:`${o.countryCode} ${o.company_number}`},Se=(await ie.post("/company/create",Y)).data.id,me={...se,company_id:Se,phone_number:`${se.countryCode} ${se.phone_number}`};if(console.log(" Sending payload:",me),se.auth_provider==="google"){const ye=await ie.post("/auth/google/signup",me),re={...j,company_id:Se,status:"Active"},De=await ie.post("/subscription/subscribe",re);x(null),N(!0),v(ye.data)}else{const ye=await ie.post("/auth/signup",me),re={...j,company_id:Se,status:"Active"},De=await ie.post("/subscription/subscribe",re);x(null),N(!0),v(ye.data)}}catch(Ee){if(Ee.response?.data?.detail){const se=Ee.response.data.detail;if(Array.isArray(se)){const Y=se.map(pe=>pe.msg).join(", ");x(Y)}else x(typeof se=="object"?se.msg||JSON.stringify(se):se)}else x("Something went wrong. Please try again.")}finally{A(!1)}}},ee=h.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:W=>{const{credential:ae}=W;i(Ee=>({...Ee,first_name:ae.given_name||"",last_name:ae.family_name||"",email:ae.email||"",profile_picture:ae.picture||"",auth_provider:"google",id_token:ae})),s(2)}}),window.google.accounts.id.prompt()}catch(W){console.error("Google login error:",W),x("Google login failed. Please try again.")}},[i,x,s]),Q=h.useMemo(()=>{if(a===1){const W=e.every(se=>(r[se]||"").trim()!==""),ae=r.password.length>=8,Ee=r.password===r.confirmPassword;return!u||!!p||!W||!ae||!Ee}return a===2?!t.every(ae=>(o[ae]||"").trim()!=="")||!!p:!1},[a,u,p,r,o]),te=uE.find(W=>W.id===a);return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsxs("div",{className:"flex items-center text-gray-800",children:[n.jsx(Jt,{className:"size-6 text-amber-500 mr-2"}),n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&n.jsx(X9,{isLoading:S}),n.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:n.jsx(Zde,{})}),n.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:te.title}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:te.subtitle})]}),n.jsx(eue,{currentStep:a,totalSteps:uE.length}),a===1&&n.jsx("div",{id:"googleSignupBtn"}),n.jsxs("form",{className:"mt-8",children:[a===1&&n.jsx(tue,{formData:r,handleChange:M,handleCodeChange:R,handleTogglePass:O,isPassVisible:c,formError:p,signupError:k,termsAccepted:u,handleTerms:I,isButtonDisabled:Q,handleSubmit:B,handleGoogleLogin:ee}),a===2&&n.jsx(nue,{handleSubmit:B,companyData:o,handleCompanyChange:T,formError:p,isSubmitted:y,isButtonDisabled:Q,setStep:s,setIsSubmitted:N,setFormError:x,handleCodeChange1:z}),a===1&&n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",n.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},sue=()=>{const e=Nt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Yu,{className:"size-4 mr-1"})," Back to Home"]})},C$=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isPassVisible:o,onTogglePass:l})=>{const c=t.toLowerCase().includes("password");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:t,type:c?"text":s,style:c&&!o?{WebkitTextSecurity:"disc"}:void 0,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&n.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(Tu,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]})},rue=()=>{const[e,t]=h.useState({email:"",password:""}),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(!1),{isLoggedIn:c,login:d,userRole:u}=Qs(),f=Nt();h.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),h.useEffect(()=>{c&&(u==="CEO"||u==="Admin"?f("/admin"):u==="Group Manager"?f("/group-manager"):u==="Manager"?f("/manager"):u==="Marketing"?f("/marketing"):u==="Sales"&&f("/sales"))},[c,f,u]);const p=N=>{const{id:v,value:j}=N.target;t(w=>({...w,[v]:j}))},x=async N=>{N.preventDefault(),i(null);try{const v=await ie.post("/auth/login",e);d(v.data),i(null)}catch(v){v.response&&v.response.data&&v.response.data.detail?i(v.response.data.detail):i("Something went wrong. Please try again.")}};h.useEffect(()=>{const N=document.createElement("script");return N.src="https://accounts.google.com/gsi/client",N.async=!0,N.defer=!0,N.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:y}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(N),()=>{document.body.contains(N)&&document.body.removeChild(N)}},[]);const y=async N=>{l(!0);try{const v=m9(N.credential),j=await ie.post("/auth/google/login",{id_token:N.credential});d(j.data)}catch(v){console.error("Google login failed:",v);const j=v.response?.data?.detail||"Google login failed. Please try again.";i(j)}finally{l(!1)}};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),o&&n.jsx(X9,{isLoading:o}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(sue,{}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),n.jsx("div",{id:"googleLoginBtn"}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[n.jsx(C$,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),n.jsx(C$,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:a,onTogglePass:()=>s(N=>!N)}),r&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),n.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),n.jsx("div",{className:"text-center mt-1",children:n.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",n.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},iue=({onClick:e})=>n.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Yu,{className:"size-4 mr-1"})," Back"]}),XS=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,icon:o})=>{const[l,c]=h.useState(!1),d=s==="password";return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative flex items-center",children:[o&&n.jsx(o,{className:"absolute left-3 text-gray-500 size-5"}),n.jsx("input",{id:t,type:d?"text":s,style:d&&!l?{WebkitTextSecurity:"disc"}:void 0,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&n.jsx("button",{type:"button",onClick:()=>c(u=>!u),className:"absolute right-3 text-gray-500",children:l?n.jsx(Tu,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]})},oue=({otp:e,setOtp:t})=>n.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((a,s)=>n.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const o=[...e];o[s]=i,t(o)}}},s))}),lue=()=>{const e=Nt(),[t,a]=h.useState(1),[s,r]=h.useState(""),[i,o]=h.useState(["","","","","",""]),[l,c]=h.useState(""),[d,u]=h.useState(""),f=N=>{N.preventDefault(),a(2)},p=N=>{N.preventDefault(),a(3)},x=N=>{if(N.preventDefault(),l!==d){alert("Passwords do not match!");return}alert("Password reset successfully!")},y=()=>{t>1?a(t-1):e("/login")};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(iue,{onClick:y}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),n.jsxs("form",{onSubmit:f,className:"space-y-6 cursor-pointer",children:[n.jsx(XS,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:N=>r(N.target.value),icon:ta}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",n.jsx("strong",{children:s}),"."]})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsx(oue,{otp:i,setOtp:o}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsx(XS,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:l,onChange:N=>c(N.target.value),icon:Ao}),n.jsx(XS,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:d,onChange:N=>u(N.target.value),icon:Ao}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},Gt=()=>{const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(!0),o=Nt(),l=async()=>{try{const d=await ie.get("/auth/me");t(d.data),s(!0)}catch(d){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",d)}finally{i(!1)}};return h.useEffect(()=>{l()},[]),{user:e,isLoggedIn:a,loading:r,fetchUser:l,logout:async()=>{try{await ie.post("/auth/logout")}catch{}t(null),s(!1),o("/login")}}};function Bt({message:e="Loading..."}){return n.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const cue=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function By(){const{user:e,loading:t,fetchUser:a}=Gt(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,y]=h.useState(!1),[N,v]=h.useState(!1),[j,w]=h.useState(!1),[S,A]=h.useState(null),[k,_]=h.useState(null),L=h.useRef(null),[T,M]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[R,z]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(M({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const O=(te,W)=>{M(ae=>({...ae,[te]:W}))},I=(te,W)=>{z(ae=>({...ae,[te]:W}))},B=te=>{const W=te.target.files?.[0];if(!W)return;if(!W.type.startsWith("image/")){q.error("Please select an image file");return}if(W.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const ae=new FileReader;ae.onloadend=()=>{A(ae.result),_(ae.result)},ae.readAsDataURL(W)},ee=async te=>{if(te.preventDefault(),!T.firstName.trim()||!T.lastName.trim()){q.warn("Please fill in all required fields.");return}o(!0);try{const W={first_name:T.firstName.trim(),last_name:T.lastName.trim(),phone_number:T.phoneNumber.trim()||null};S!==null&&(W.profile_picture=S),await ie.put("/users/me",W),await a(),c(!1),A(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(W){console.error("Error updating account:",W);const ae=W.response?.data?.detail||"Failed to update account information. Please try again.";q.error(ae)}finally{o(!1)}},Q=async te=>{if(te.preventDefault(),!R.newPassword||!R.confirmPassword){q.warn("Please fill in all password fields.");return}if(R.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(R.newPassword!==R.confirmPassword){q.warn("New password and confirm password do not match.");return}w(!0);try{const W={password:R.newPassword};await ie.put("/users/me",W),await a(),z({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),w(!1),q.success("Password changed successfully!")}catch(W){console.error("Error changing password:",W);const ae=W.response?.data?.detail||"Failed to change password. Please try again.";q.error(ae)}finally{w(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Bt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Profile"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(en,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!l&&n.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ua,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[k?n.jsx("div",{className:"relative",children:n.jsx("img",{src:k,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:cue(e.first_name,e.last_name)}),l&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:L,accept:"image/*",onChange:B,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(l9,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),l?n.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:T.firstName,onChange:te=>O("firstName",te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:T.lastName,onChange:te=>O("lastName",te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(ta,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:T.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:T.phoneNumber,onChange:te=>O("phoneNumber",te.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{c(!1),M({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),A(null),_(e.profile_picture||null),L.current&&(L.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[n.jsx(bL,{}),i?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(Ao,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:R.newPassword,onChange:te=>I("newPassword",te.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>y(te=>!te),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?n.jsx(Tu,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:N?void 0:{WebkitTextSecurity:"disc"},value:R.confirmPassword,onChange:te=>I("confirmPassword",te.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>v(te=>!te),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":N?"Hide password":"Show password",children:N?n.jsx(Tu,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:j,children:[n.jsx(Ao,{}),j?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(d9,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}const due=()=>n.jsx("header",{className:"bg-secondary text-white py-4 border-b border-accent",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs(sd,{to:"/",className:"text-2xl font-bold",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsxs("nav",{className:"flex space-x-8",children:[n.jsx(sd,{to:"/resources",className:"hover:text-accent transition-colors",children:"Resources"}),n.jsx(sd,{to:"/legal",className:"hover:text-accent transition-colors",children:"Legal"})]})]})})}),uue=()=>{h.useEffect(()=>{document.title="Resources - Sari-Sari CRM"},[]);const e=[{title:"Security",description:"Understand our security practices and certifications.",link:"#"},{title:"Support",description:"Get help from our support team and knowledge base.",link:"#"}];return n.jsxs("div",{className:"font-inter",children:[n.jsx(due,{}),n.jsx("main",{className:"bg-paper-white min-h-screen py-16",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("h1",{className:"text-5xl font-bold text-secondary mb-4",children:"Resources"}),n.jsx("p",{className:"text-lg text-secondary mb-12",children:"Everything you need to succeed with Sari-Sari CRM"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.map((t,a)=>n.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsx("h3",{className:"text-2xl font-semibold text-secondary mb-2",children:t.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),n.jsx("a",{href:t.link,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Learn More "})]},a))})]})})]})},mue=()=>n.jsx("header",{className:"bg-secondary text-white py-4 border-b border-accent",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs(sd,{to:"/",className:"text-2xl font-bold",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsxs("nav",{className:"flex space-x-8",children:[n.jsx(sd,{to:"/resources",className:"hover:text-accent transition-colors",children:"Resources"}),n.jsx(sd,{to:"/legal",className:"hover:text-accent transition-colors",children:"Legal"})]})]})})}),fue=()=>{h.useEffect(()=>{document.title="Legal - Sari-Sari CRM"},[]);const e=[{title:"Terms",description:"Our terms of service and conditions of use.",link:"#"},{title:"Privacy",description:"How we protect and handle your personal data.",link:"#"},{title:"SLA",description:"Service level agreements and guarantees.",link:"#"},{title:"Compliance",description:"Our compliance standards and certifications.",link:"#"}];return n.jsxs("div",{className:"font-inter",children:[n.jsx(mue,{}),n.jsx("main",{className:"bg-paper-white min-h-screen py-16",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("h1",{className:"text-5xl font-bold text-secondary mb-4",children:"Legal"}),n.jsx("p",{className:"text-lg text-secondary mb-12",children:"Important legal information and policies"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.map((t,a)=>n.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsx("h3",{className:"text-2xl font-semibold text-secondary mb-2",children:t.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),n.jsx("a",{href:t.link,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Read More "})]},a))})]})})]})},vN=e=>{const t="https://crm.sari-sari.com";try{const a=new URL(t),s=a.protocol==="https:"?"wss":"ws",r=a.hostname,i=a.port||(a.protocol==="https:"?443:80),o=`${s}://${r}:${i}/ws/notifications?user_id=${e}`;return console.log(" WebSocket URL:",o),o}catch(a){return console.error("Error parsing API URL:",a),`ws://localhost:8000/ws/notifications?user_id=${e}`}};function hue({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Xt(),p=Nt(),{logout:x}=Qs(),{user:y,fetchUser:N}=Gt(),j={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[f.pathname]||"Admin Panel";return h.useEffect(()=>{const w=()=>{N()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[N]),h.useEffect(()=>{if(!y?.id)return;const w=vN(y.id);console.log(" Connecting to WebSocket:",w);const S=new WebSocket(w);let A;const k=()=>{A=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return S.onopen=()=>{console.log(" Admin WS Connected"),clearTimeout(A)},S.onmessage=_=>{try{const L=JSON.parse(_.data);console.log(" Notification received:",L),o(T=>[L,...T]),c(T=>T+1)}catch(L){console.error("Error parsing notification:",L)}},S.onerror=_=>{console.error(" Admin WS Error:",_)},S.onclose=()=>{console.log(" Admin WS Disconnected"),k()},()=>{clearTimeout(A),S&&S.readyState===WebSocket.OPEN&&S.close()}},[y?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Xf,{className:"text-2xl"})}),y?.company?.company_logo&&n.jsx("img",{src:y.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(lx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:w.title||w.message||"New Update"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{p("/admin/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/admin/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("button",{onClick:()=>{p("/admin/help"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Help"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function gue(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Xt(),{user:d}=Gt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const f=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);h.useEffect(()=>{f&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/admin/dashboard",className:({isActive:y})=>y?p:x,children:[n.jsx(cx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-lg"}),"Sales"]}),n.jsx(At,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/accounts",className:({isActive:y})=>y?p:x,children:[n.jsx(vd,{})," Accounts"]}),n.jsxs($t,{to:"/admin/contacts",className:({isActive:y})=>y?p:x,children:[n.jsx(en,{})," Contacts"]}),n.jsxs($t,{to:"/admin/leads",className:({isActive:y})=>y?p:x,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs($t,{to:"/admin/deals",className:({isActive:y})=>y?p:x,children:[n.jsx(Jt,{})," Deals"]}),n.jsxs($t,{to:"/admin/quotes",className:({isActive:y})=>y?p:x,children:[n.jsx(un,{})," Quotes"]}),n.jsxs($t,{to:"/admin/targets",className:({isActive:y})=>y?p:x,children:[n.jsx(ur,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(At,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/tasks",className:({isActive:y})=>y?p:x,children:[n.jsx(Vt,{})," Tasks"]}),n.jsxs($t,{to:"/admin/meetings",className:({isActive:y})=>y?p:x,children:[n.jsx(Tt,{})," Meetings"]}),n.jsxs($t,{to:"/admin/calls",className:({isActive:y})=>y?p:x,children:[n.jsx(Rs,{})," Calls"]}),n.jsxs($t,{to:"/admin/audit",className:({isActive:y})=>y?p:x,children:[n.jsx(Ts,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/admin/territory",className:({isActive:y})=>y?p:x,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(vL,{className:"text-lg"}),"Settings"]}),n.jsx(At,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/users",className:({isActive:y})=>y?p:x,children:[n.jsx(na,{})," Users"]}),n.jsxs($t,{to:"/admin/manage-account",className:({isActive:y})=>y?p:x,children:[n.jsx(en,{}),"Your Profile"]}),n.jsxs($t,{to:"/admin/company-details",className:({isActive:y})=>y?p:x,children:[n.jsx(nN,{}),"Organization"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(hue,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(ex,{})})]})]})}function pue(e){return _t({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function xue(e){return _t({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function yue(e){return _t({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function Si({props:e,name:t}){return xce({props:e,name:t,defaultTheme:IL,themeId:bN})}function zl(e){const{elementType:t,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,o=r?{}:V9(a,s),{props:l,internalRef:c}=Y9({...i,externalSlotProps:o}),d=Ro(c,o?.ref,e.additionalProps?.ref);return W9(t,{...l,ref:d},s)}function hs(e){const t=h.useRef(e);return ss(()=>{t.current=e}),h.useRef((...a)=>(0,t.current)(...a)).current}var vv=Symbol("NOT_FOUND");function bue(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vue(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function wue(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${a}]`)}}var S$=e=>Array.isArray(e)?e:[e];function Nue(e){const t=Array.isArray(e[0])?e[0]:e;return wue(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function jue(e,t){const a=[],{length:s}=e;for(let r=0;r<s;r++)a.push(e[r].apply(null,t));return a}function Cue(e){let t;return{get(a){return t&&e(t.key,a)?t.value:vv},put(a,s){t={key:a,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Sue(e,t){let a=[];function s(l){const c=a.findIndex(d=>t(l,d.key));if(c>-1){const d=a[c];return c>0&&(a.splice(c,1),a.unshift(d)),d.value}return vv}function r(l,c){s(l)===vv&&(a.unshift({key:l,value:c}),a.length>e&&a.pop())}function i(){return a}function o(){a=[]}return{get:s,put:r,getEntries:i,clear:o}}var _ue=(e,t)=>e===t;function Aue(e){return function(a,s){if(a===null||s===null||a.length!==s.length)return!1;const{length:r}=a;for(let i=0;i<r;i++)if(!e(a[i],s[i]))return!1;return!0}}function Tue(e,t){const a=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=_ue,maxSize:r=1,resultEqualityCheck:i}=a,o=Aue(s);let l=0;const c=r<=1?Cue(o):Sue(r,o);function d(){let u=c.get(arguments);if(u===vv){if(u=e.apply(null,arguments),l++,i){const p=c.getEntries().find(x=>i(x.value,u));p&&(u=p.value,l!==0&&l--)}c.put(arguments,u)}return u}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>l,d.resetResultsCount=()=>{l=0},d}var Eue=class{constructor(e){this.value=e}deref(){return this.value}},kue=typeof WeakRef<"u"?WeakRef:Eue,Lue=0,_$=1;function Hy(){return{s:Lue,v:void 0,o:null,p:null}}function J9(e,t={}){let a=Hy();const{resultEqualityCheck:s}=t;let r,i=0;function o(){let l=a;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const x=arguments[f];if(typeof x=="function"||typeof x=="object"&&x!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const N=y.get(x);N===void 0?(l=Hy(),y.set(x,l)):l=N}else{let y=l.p;y===null&&(l.p=y=new Map);const N=y.get(x);N===void 0?(l=Hy(),y.set(x,l)):l=N}}const d=l;let u;if(l.s===_$)u=l.v;else if(u=e.apply(null,arguments),i++,s){const f=r?.deref?.()??r;f!=null&&s(f,u)&&(u=f,i!==0&&i--),r=typeof u=="object"&&u!==null||typeof u=="function"?new kue(u):u}return d.s=_$,d.v=u,u}return o.clearCache=()=>{a=Hy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function eq(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,o=0,l,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),bue(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...a,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:x=J9,argsMemoizeOptions:y=[]}=u,N=S$(p),v=S$(y),j=Nue(r),w=f(function(){return i++,d.apply(null,arguments)},...N),S=x(function(){o++;const k=jue(j,arguments);return l=w.apply(null,k),l},...v);return Object.assign(S,{resultFunc:d,memoizedResultFunc:w,dependencies:j,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var rt=eq(J9),Pue=Object.assign((e,t=rt)=>{vue(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),s=a.map(i=>e[i]);return t(s,(...i)=>i.reduce((o,l,c)=>(o[a[c]]=l,o),{}))},{withTypes:()=>Pue});const Due=eq({memoize:Tue,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),Ct=(e,t,a,s,r,i,o,l,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let d;if(e&&t&&a&&s&&r&&i&&o&&l)d=(u,f,p,x)=>{const y=e(u,f,p,x),N=t(u,f,p,x),v=a(u,f,p,x),j=s(u,f,p,x),w=r(u,f,p,x),S=i(u,f,p,x),A=o(u,f,p,x);return l(y,N,v,j,w,S,A,f,p,x)};else if(e&&t&&a&&s&&r&&i&&o)d=(u,f,p,x)=>{const y=e(u,f,p,x),N=t(u,f,p,x),v=a(u,f,p,x),j=s(u,f,p,x),w=r(u,f,p,x),S=i(u,f,p,x);return o(y,N,v,j,w,S,f,p,x)};else if(e&&t&&a&&s&&r&&i)d=(u,f,p,x)=>{const y=e(u,f,p,x),N=t(u,f,p,x),v=a(u,f,p,x),j=s(u,f,p,x),w=r(u,f,p,x);return i(y,N,v,j,w,f,p,x)};else if(e&&t&&a&&s&&r)d=(u,f,p,x)=>{const y=e(u,f,p,x),N=t(u,f,p,x),v=a(u,f,p,x),j=s(u,f,p,x);return r(y,N,v,j,f,p,x)};else if(e&&t&&a&&s)d=(u,f,p,x)=>{const y=e(u,f,p,x),N=t(u,f,p,x),v=a(u,f,p,x);return s(y,N,v,f,p,x)};else if(e&&t&&a)d=(u,f,p,x)=>{const y=e(u,f,p,x),N=t(u,f,p,x);return a(y,N,f,p,x)};else if(e&&t)d=(u,f,p,x)=>{const y=e(u,f,p,x);return t(y,f,p,x)};else if(e)d=e;else throw new Error("Missing arguments");return d},wN=e=>(...t)=>{const a=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,o=Math.max(r.length-i,0);if(o>3)throw new Error("Unsupported number of arguments");return(c,d,u,f)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=a.get(p);if(!x){const y=t.length===1?[j=>j,r]:t;let N=t;const v=[void 0,void 0,void 0];switch(o){case 0:break;case 1:{N=[...y.slice(0,-1),()=>v[0],r];break}case 2:{N=[...y.slice(0,-1),()=>v[0],()=>v[1],r];break}case 3:{N=[...y.slice(0,-1),()=>v[0],()=>v[1],()=>v[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(N=[...N,e]),x=Due(...N),x.selectorArgs=v,a.set(p,x)}switch(o){case 3:x.selectorArgs[2]=f;case 2:x.selectorArgs[1]=u;case 1:x.selectorArgs[0]=d}switch(o){case 0:return x(c);case 1:return x(c,d);case 2:return x(c,d,u);case 3:return x(c,d,u,f);default:throw new Error("unreachable")}}},Oa=wN();var ZS={exports:{}},JS={},e2={exports:{}},t2={};var A$;function Oue(){if(A$)return t2;A$=1;var e=Gf();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var a=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(f,p){var x=p(),y=s({inst:{value:x,getSnapshot:p}}),N=y[0].inst,v=y[1];return i(function(){N.value=x,N.getSnapshot=p,c(N)&&v({inst:N})},[f,x,p]),r(function(){return c(N)&&v({inst:N}),f(function(){c(N)&&v({inst:N})})},[f]),o(x),x}function c(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!a(f,x)}catch{return!0}}function d(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return t2.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,t2}var T$;function Mue(){return T$||(T$=1,e2.exports=Oue()),e2.exports}var E$;function Iue(){if(E$)return JS;E$=1;var e=Gf(),t=Mue();function a(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var s=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return JS.useSyncExternalStoreWithSelector=function(d,u,f,p,x){var y=i(null);if(y.current===null){var N={hasValue:!1,value:null};y.current=N}else N=y.current;y=l(function(){function j(_){if(!w){if(w=!0,S=_,_=p(_),x!==void 0&&N.hasValue){var L=N.value;if(x(L,_))return A=L}return A=_}if(L=A,s(S,_))return L;var T=p(_);return x!==void 0&&x(L,T)?(S=_,L):(S=_,A=T)}var w=!1,S,A,k=f===void 0?null:f;return[function(){return j(u())},k===null?void 0:function(){return j(k())}]},[u,f,p,x]);var v=r(d,y[0],y[1]);return o(function(){N.hasValue=!0,N.value=v},[v]),c(v),v},JS}var k$;function $ue(){return k$||(k$=1,ZS.exports=Iue()),ZS.exports}var tq=$ue();function Rue(e,t,a,s,r){const i=o=>t(o,a,s,r);return tq.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const L$={};function NN(e,t){const a=h.useRef(L$);return a.current===L$&&(a.current=e(t)),a}const zue=[];function nq(e){h.useEffect(e,zue)}const Fue=()=>{};function Uue(e,t,a){const s=NN(Bue,{store:e,selector:t}).current;s.effect=a,nq(s.onMount)}function Bue(e){const{store:t,selector:a}=e;let s=a(t.state);const r={effect:Fue,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const o=a(i);if(!Object.is(s,o)){const l=s;s=o,r.effect(l,o)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class FL{static create(t){return new FL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const a=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(a!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const a in t)if(!Object.is(this.state[a],t[a])){this.setState(Ye({},this.state,t));return}}set(t,a){Object.is(this.state[t],a)||this.setState(Ye({},this.state,{[t]:a}))}}const jN=({params:e,store:t})=>{h.useEffect(()=>{t.set("animation",Ye({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const a=h.useCallback(()=>{let s=!1;return t.set("animation",Ye({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",Ye({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return ss(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=l=>{l.matches?r=a():r?.()},o=window.matchMedia("(prefers-reduced-motion)");return i(o),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[a,t]),{instance:{disableAnimation:a}}};jN.params={skipAnimation:!0};jN.getDefaultizedParams=({params:e})=>Ye({},e,{skipAnimation:e.skipAnimation??!1});jN.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const Hue=e=>e.animation,que=Ct(Hue,e=>e.skip||e.skipAnimationRequests>0);function Gue(e,t){const a=h.useRef(!0);h.useEffect(()=>{if(a.current){a.current=!1;return}return e()},t)}function mE(e){return e&&e.ownerDocument||document}function Wue(e){return mE(e).defaultView||window}const Ft=Rue,CN="DEFAULT_X_AXIS_KEY",Vue="DEFAULT_Y_AXIS_KEY",Yue={top:20,bottom:20,left:20,right:20},Que=45,Kue=25,aq=20,Wo=e=>e.cartesianAxis?.x,ec=e=>e.cartesianAxis?.y,Xue=Ct(ec,function(t){return(t??[]).reduce((a,s)=>s.position==="left"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Zue=Ct(ec,function(t){return(t??[]).reduce((a,s)=>s.position==="right"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Jue=Ct(Wo,function(t){return(t??[]).reduce((a,s)=>s.position==="top"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),eme=Ct(Wo,function(t){return(t??[]).reduce((a,s)=>s.position==="bottom"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),tme=Oa(Xue,Zue,Jue,eme,function(t,a,s,r){return{left:t,right:a,top:s,bottom:r}}),px=e=>e.dimensions,nme=e=>e.dimensions.margin,br=Oa(px,nme,tme,function({width:t,height:a},{top:s,right:r,bottom:i,left:o},{left:l,right:c,top:d,bottom:u}){return{width:t-o-r-l-c,left:o+l,right:r+c,height:a-s-i-d-u,top:s+d,bottom:i+u}}),ame=Ct(px,e=>e.width),sme=Ct(px,e=>e.height),sq=Ct(px,e=>e.propsWidth),rq=Ct(px,e=>e.propsHeight);function rme(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?Ye({},t,e):e}const ime=10,SN=({params:e,store:t,svgRef:a})=>{const s=e.width!==void 0&&e.height!==void 0,r=h.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,o]=h.useState(0),[l,c]=h.useState(0),d=h.useCallback(()=>{const y=a?.current;if(!y)return{};const v=Wue(y).getComputedStyle(y),j=Math.floor(parseFloat(v.height))||0,w=Math.floor(parseFloat(v.width))||0;return(t.state.dimensions.width!==w||t.state.dimensions.height!==j)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??w,height:e.height??j,propsWidth:e.width,propsHeight:e.height}),{height:j,width:w}},[t,a,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);Gue(()=>{const y=e.width??t.state.dimensions.width,N=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:y,height:N,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),h.useEffect(()=>{r.current.displayError=!0},[]),ss(()=>{if(s||!r.current.initialCompute||r.current.computeRun>ime)return;const y=d();y.width!==i||y.height!==l?(r.current.computeRun+=1,y.width!==void 0&&o(y.width),y.height!==void 0&&c(y.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[l,i,d,s]),ss(()=>{if(s)return()=>{};d();const y=a.current;if(typeof ResizeObserver>"u")return()=>{};let N;const v=new ResizeObserver(()=>{N=requestAnimationFrame(()=>{d()})});return y&&v.observe(y),()=>{N&&cancelAnimationFrame(N),y&&v.unobserve(y)}},[d,s,a]);const u=Ft(t,br),f=h.useCallback(y=>y>=u.left-1&&y<=u.left+u.width,[u.left,u.width]),p=h.useCallback(y=>y>=u.top-1&&y<=u.top+u.height,[u.height,u.top]);return{instance:{isPointInside:h.useCallback((y,N,v)=>v&&"closest"in v&&v.closest("[data-drawing-container]")?!0:f(y)&&p(N),[f,p]),isXInside:f,isYInside:p}}};SN.params={width:!0,height:!0,margin:!0};SN.getDefaultizedParams=({params:e})=>Ye({},e,{margin:rme(e.margin,Yue)});SN.getInitialState=({width:e,height:t,margin:a})=>({dimensions:{margin:a,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const UL=({params:e,store:t})=>(ss(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});UL.params={experimentalFeatures:!0};UL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const ome=e=>e.experimentalFeatures,_N=Ct(ome,e=>!!e?.preferStrictDomainInLineCharts);let P$=0;const lme=()=>(P$+=1,`mui-chart-${P$}`),BL=({params:e,store:t})=>(h.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",Ye({},t.state.id,{chartId:e.id??lme()}))},[t,e.id]),{});BL.params={id:!0};BL.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const cme=e=>e.id,dme=Ct(cme,e=>e.chartId),ume=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],mme=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],iq=e=>e==="dark"?mme:ume,oq=({series:e,colors:t,seriesConfig:a})=>{const s={};return e.forEach((r,i)=>{const o=a[r.type].getSeriesWithDefaultValues(r,i,t),l=o.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[l]!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);s[r.type].series[l]=o,s[r.type].seriesOrder.push(l)}),s},fme=(e,t,a)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,a)??i)}),s},AN=({params:e,store:t,seriesConfig:a})=>{const{series:s,dataset:r,theme:i,colors:o}=e,l=h.useRef(!0);return h.useEffect(()=>{if(l.current){l.current=!1;return}t.set("series",Ye({},t.state.series,{defaultizedSeries:oq({series:s,colors:typeof o=="function"?o(i):o,seriesConfig:a}),dataset:r}))},[o,r,s,i,a,t]),{}};AN.params={dataset:!0,series:!0,colors:!0,theme:!0};const hme=[];AN.getDefaultizedParams=({params:e})=>Ye({},e,{series:e.series?.length?e.series:hme,colors:e.colors??iq,theme:e.theme??"light"});AN.getInitialState=({series:e=[],colors:t,theme:a,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:oq({series:e,colors:typeof t=="function"?t(a):t,seriesConfig:i}),dataset:s}});const HL=e=>e.series,gme=Ct(HL,e=>e.defaultizedSeries),qr=Ct(HL,e=>e.seriesConfig),pme=Ct(HL,e=>e.dataset),pa=Oa(gme,qr,pme,function(t,a,s){return fme(t,a,s)}),xme={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class lq{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in xme)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,a,s,r){this.element=t,this.pointerManager=a,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const o=`${this.name}ChangeState`;this.element.addEventListener(o,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,a){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return a;const s=this.pointerOptions[t];return s?Ye({},a,s):a}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const a=`${this.name}ChangeState`;this.element.removeEventListener(a,this.handleStateChange)}}class yme{activeGestures=new Map;registerActiveGesture(t,a){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:a,element:t};s.add(r)}unregisterActiveGesture(t,a){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===a&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const a=this.activeGestures.get(t);return a?Array.from(a).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,a){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===a):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class bme{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(a=>a==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(a))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class vme{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const a=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(a,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const o=Ye({},i,{type:"forceCancel"});this.pointers.set(r,o)}}this.notifyHandlers(a),this.pointers.clear()};handlePointerEvent=t=>{const{type:a,pointerId:s}=t;if(a==="pointerdown"||a==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(a==="pointerup"||a==="pointercancel"||a==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(a=>a(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class wme{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new yme;keyboardManager=new bme;constructor(t){this.pointerManager=new vme({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(a=>{this.addGestureTemplate(a)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}setGestureState(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}registerElement(t,a,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,a,i)}),a}registerSingleGesture(t,a,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(a)||this.elementGestureMap.set(a,new Map);const i=this.elementGestureMap.get(a);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,a));const o=r.clone(s);return o.init(a,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,o),!0}unregisterElement(t,a){const s=this.elementGestureMap.get(a);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(a),s.size===0&&this.elementGestureMap.delete(a),!0)}unregisterAllGestures(t){const a=this.elementGestureMap.get(t);if(a){for(const[,s]of a)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Qu extends lq{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,a,s,r){super.init(t,a,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,a){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(a===s.target||s.target===this.originalTarget||a===this.originalTarget||"contains"in a&&a.contains(s.target))||"getRootNode"in a&&a.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(a))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Nme(e,t){const a=t.x-e.x,s=t.y-e.y;return Math.sqrt(a*a+s*s)}function n2(e){if(e.length<2)return 0;let t=0,a=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=Nme({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),a+=1;return a>0?t/a:0}function Fl(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((a,s)=>(a.x+=s.clientX,a.y+=s.clientY,a),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function hi(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const qy=1e-5,Oc=1e-5,D$=.15;function jme(e,t){const a=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=Cme(t,e),o=Math.abs(a)>Math.abs(s)?"horizontal":"vertical",l=i||o==="horizontal"?qy:D$,c=i?qy:o==="horizontal"?D$:qy;return Math.abs(a)>l&&(r.horizontal=a>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":o,r}function Cme(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,a)*180/Math.PI;return r>=-45+Oc&&r<=-22.5+Oc||r>=22.5+Oc&&r<=45+Oc||r>=135+Oc&&r<=157.5+Oc||r>=-157.5+Oc&&r<=-135+Oc}function Sme(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const a=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return a&&s}const O$=0,_me=e=>e>O$?1:e<-O$?-1:0,Bc=e=>{e.cancelable&&e.preventDefault()};class qL extends Qu{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new qL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,a)=>{if(a.type!=="pointermove"||a.pointerType!=="mouse"&&a.pointerType!=="pen")return;this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r||!this.isWithinPointerCount(s,a.pointerType))return;if(this.shouldPreventGesture(r,a.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,a);return}const i={x:a.clientX,y:a.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,a)),this.emitMoveEvent(r,"ongoing",s,a)};emitMoveEvent(t,a,s,r){const i=this.state.lastPosition||Fl(s),o=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,activeGestures:o,customData:this.customData},c=hi(this.name,a),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(d)}}class yu extends Qu{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new yu(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=Ye({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancel(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.cancel(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.cancel(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(o=>{this.state.startPointers.set(o.pointerId,o)}),this.originalTarget=r,this.state.startCentroid=Fl(i),this.state.lastCentroid=Ye({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,a.pointerType)){const o=Fl(i),l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y,d=Math.sqrt(l*l+c*c),u=jme(this.state.lastCentroid??this.state.startCentroid,o),f=this.state.lastCentroid?o.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?o.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&Sme(u,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,a,o),this.emitPanEvent(r,"ongoing",i,a,o)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,a,o)),this.state.lastCentroid=o,this.state.lastDirection=u}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType)){const l=this.state.lastCentroid||this.state.startCentroid;a.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,a,l),this.emitPanEvent(r,"end",i,a,l),this.resetState()}}else this.resetState();break}};emitPanEvent(t,a,s,r,i){if(!this.state.startCentroid)return;const o=this.state.lastDeltas?.x??0,l=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,d=c?(r.timeStamp-c.timeStamp)/1e3:0,u=d>0?o/d:0,f=d>0?l/d:0,p=Math.sqrt(u*u+f*f),x=this.gesturesRegistry.getActiveGestures(t),y={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,deltaX:o,deltaY:l,direction:this.state.lastDirection,velocityX:u,velocityY:f,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},N=hi(this.name,a),v=new CustomEvent(N,{bubbles:!0,cancelable:!0,composed:!0,detail:y});t.dispatchEvent(v),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,a,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",a,s,this.state.lastCentroid),this.emitPanEvent(r,"end",a,s,this.state.lastCentroid)}this.resetState()}}class GL extends Qu{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(Ye({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new GL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=Ye({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,a),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(a.type){case"pointerdown":if(i.length>=2&&!this.isActive){const o=n2(i);this.state.startDistance=o,this.state.lastDistance=o,this.state.lastTime=a.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,a.pointerType)){const o=n2(i),l=Math.abs(o-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?o/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const u=(a.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(o-this.state.lastDistance)/u;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=o,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=a.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,a):(this.isActive=!0,this.emitPinchEvent(r,"start",i,a),this.emitPinchEvent(r,"ongoing",i,a))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType))a.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,a),this.emitPinchEvent(r,"end",i,a),this.resetState();else if(o.length>=2){const l=n2(o);this.state.startDistance=l/this.state.lastScale}}break}};emitPinchEvent(t,a,s,r){const i=Fl(s),o=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:o,velocity:this.state.velocity,activeGestures:c,direction:_me(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const u=hi(this.name,a),f=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(f)}}class TN extends Qu{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new TN(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=Ye({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancelPress(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&this.cancelPress(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelPress(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Fl(i),this.state.lastPosition=Ye({},this.state.startCentroid),this.state.startTime=a.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const o=this.state.lastPosition;this.emitPressEvent(r,"start",i,a,o),this.emitPressEvent(r,"ongoing",i,a,o)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Fl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(r,i,a)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const o=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,a,o)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,a);break}};emitPressEvent(t,a,s,r,i){const o=this.gesturesRegistry.getActiveGestures(t),l=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:l,activeGestures:o,customData:this.customData},d=hi(this.name,a),u=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(u),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,a,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",a,s,r),this.emitPressEvent(t??this.element,"end",a,s,r)}this.resetState()}}class WL extends Qu{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new TN({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new yu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new WL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.pressGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Bc,{passive:!1}),this.element.addEventListener("touchmove",Bc,{passive:!1}),this.element.addEventListener("touchend",Bc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Bc),this.element.removeEventListener("touchmove",Bc),this.element.removeEventListener("touchend",Bc)}}class yp extends Qu{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new yp(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,a.pointerType)||!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelTap(r,i,a);return}switch(a.type){case"pointerdown":this.isActive||(this.state.startCentroid=Fl(i),this.state.lastPosition=Ye({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Fl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(r,i,a)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const o=this.state.lastPosition||this.state.startCentroid;if(!o){this.cancelTap(r,i,a);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,a,o),this.resetState()):(this.state.lastTapTime=a.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,a);break}};fireTapEvent(t,a,s,r){const i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(l),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,a,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=hi(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}this.resetState()}}class VL extends Qu{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new yp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new yu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new VL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.tapGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Bc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Bc)}}class wv extends lq{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new wv(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,a){const s=t.length>0?Fl(t):{x:a.clientX,y:a.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:a.target,srcEvent:a,phase:"ongoing",pointers:t,timeStamp:a.timeStamp,deltaX:a.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:a.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:a.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:a.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const o=hi(this.name,"ongoing"),l=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(l)}}const Wm=e=>e.preventDefault(),YL=({svgRef:e})=>{const t=h.useRef(null);h.useEffect(()=>{const r=e.current;t.current||(t.current=new wme({gestures:[new yu({name:"pan",threshold:0,maxPointers:1}),new qL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new yp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new TN({name:"quickPress",duration:50}),new yu({name:"brush",threshold:0,maxPointers:1}),new yu({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new GL({name:"zoomPinch",threshold:5}),new wv({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new wv({name:"panTurnWheel",sensitivity:.5}),new VL({name:"zoomTapAndDrag",dragThreshold:10}),new WL({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new yp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const a=h.useCallback((r,i,o)=>{const l=e.current;return l?.addEventListener(r,i,o),{cleanup:()=>l?.removeEventListener(r,i)}},[e]),s=h.useCallback((r,i)=>{const o=e.current,l=t.current;!l||!o||l.setGestureOptions(r,o,i??{})},[e,t]);return h.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Wm),r?.addEventListener("gesturechange",Wm),r?.addEventListener("gestureend",Wm),()=>{r?.removeEventListener("gesturestart",Wm),r?.removeEventListener("gesturechange",Wm),r?.removeEventListener("gestureend",Wm)}},[e]),{instance:{addInteractionListener:a,updateZoomInteractionListeners:s}}};YL.params={};YL.getInitialState=()=>({});const Ame=[BL,UL,SN,AN,YL,jN],Tme=["apiRef"],Eme=e=>{let{plugins:t}=e,a=hn(e.props,Tme);const s={};t.forEach(o=>{Object.assign(s,o.params)});const r={};return Object.keys(a).forEach(o=>{const l=a[o];s[o]&&(r[o]=l)}),t.reduce((o,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:o}):o,r)};let M$=0;function kme(e,t,a){const s=yN(),r=h.useMemo(()=>[...Ame,...e],[e]),i=Eme({plugins:r,props:t});i.id=i.id??s;const l=h.useRef({}).current,c=Pme(t.apiRef),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null);if(f.current==null){M$+=1;const y={cacheKey:{id:M$}};r.forEach(N=>{N.getInitialState&&Object.assign(y,N.getInitialState(i,y,a))}),f.current=new FL(y)}const p=y=>{const N=y({instance:l,params:i,plugins:r,store:f.current,svgRef:u,chartRootRef:d,seriesConfig:a});N.publicAPI&&Object.assign(c.current,N.publicAPI),N.instance&&Object.assign(l,N.instance)};return r.forEach(p),{contextValue:h.useMemo(()=>({store:f.current,publicAPI:c.current,instance:l,svgRef:u,chartRootRef:d}),[l,c])}}function Lme(e){return e.current==null&&(e.current={}),e}function Pme(e){const t=h.useRef({});return e?Lme(e):t}const cq=h.createContext(null);const dq=()=>{},uq=4,mq=20+2*uq,Dme=40+2*uq,Ome="hover",Gy={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:mq,showTooltip:Ome}},QL=(e,t,a,s)=>{if(e)return e===!0?Ye({axisId:t,axisDirection:a},Gy,{reverse:s??!1}):Ye({axisId:t,axisDirection:a},Gy,{reverse:s??!1},e,{slider:Ye({},Gy.slider,{size:e.slider?.preview??Gy.slider.preview?Dme:mq},e.slider)})};function fq(e,t){const a={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:CN,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"bottom":"none",d=i.position??c,u=Kue+(i.label?aq:0),f=i.id??`defaultized-x-axis-${o}`,p=Ye({offset:a[d]},i,{id:f,position:d,height:i.height??u,zoom:QL(i.zoom,f,"x",i.reverse)});if(d!=="none"&&(a[d]+=p.height,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return Ye({},p,{data:t.map(x=>x[l])})})}function hq(e,t){const a={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:Vue,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"left":"none",d=i.position??c,u=Que+(i.label?aq:0),f=i.id??`defaultized-y-axis-${o}`,p=Ye({offset:a[d]},i,{id:f,position:d,width:i.width??u,zoom:QL(i.zoom,f,"y",i.reverse)});if(d!=="none"&&(a[d]+=p.width,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return Ye({},p,{data:t.map(x=>x[l])})})}function Mme(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Ku(e){return e.scaleType==="band"}function Xu(e){return e.scaleType==="point"}function Ime(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function $me(e){return e.scaleType==="symlog"}function xx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function KL(e){let t=e,a=e;e.length===1&&(t=(o,l)=>e(o)-l,a=Rme(e));function s(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)<0?c=u+1:d=u}return c}function r(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)>0?d=u:c=u+1}return c}function i(o,l,c,d){c==null&&(c=0),d==null&&(d=o.length);const u=s(o,l,c,d-1);return u>c&&t(o[u-1],l)>-t(o[u],l)?u-1:u}return{left:s,center:i,right:r}}function Rme(e){return(t,a)=>xx(e(t),a)}function gq(e){return e===null?NaN:+e}function*zme(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const Fme=KL(xx),yx=Fme.right;KL(gq).center;class Nv extends Map{constructor(t,a=Hme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(I$(this,t))}has(t){return super.has(I$(this,t))}set(t,a){return super.set(Ume(this,t),a)}delete(t){return super.delete(Bme(this,t))}}function I$({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):a}function Ume({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):(e.set(s,a),a)}function Bme({_intern:e,_key:t},a){const s=t(a);return e.has(s)&&(a=e.get(a),e.delete(s)),a}function Hme(e){return e!==null&&typeof e=="object"?e.valueOf():e}var fE=Math.sqrt(50),hE=Math.sqrt(10),gE=Math.sqrt(2);function pE(e,t,a){var s,r=-1,i,o,l;if(t=+t,e=+e,a=+a,e===t&&a>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(l=pq(e,t,a))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),d=Math.round(t/l);for(c*l<e&&++c,d*l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)*l}else{l=-l;let c=Math.round(e*l),d=Math.round(t*l);for(c/l<e&&++c,d/l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)/l}return s&&o.reverse(),o}function pq(e,t,a){var s=(t-e)/Math.max(0,a),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=fE?10:i>=hE?5:i>=gE?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=fE?10:i>=hE?5:i>=gE?2:1)}function xE(e,t,a){var s=Math.abs(t-e)/Math.max(0,a),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=fE?r*=10:i>=hE?r*=5:i>=gE&&(r*=2),t<e?-r:r}function $$(e,t){let a;for(const s of e)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function R$(e,t){let a;for(const s of e)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function xq(e,t,a=0,s=e.length-1,r=xx){for(;s>a;){if(s-a>600){const c=s-a+1,d=t-a+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),x=Math.max(a,Math.floor(t-d*f/c+p)),y=Math.min(s,Math.floor(t+(c-d)*f/c+p));xq(e,t,x,y,r)}const i=e[t];let o=a,l=s;for(mg(e,a,t),r(e[s],i)>0&&mg(e,a,s);o<l;){for(mg(e,o,l),++o,--l;r(e[o],i)<0;)++o;for(;r(e[l],i)>0;)--l}r(e[a],i)===0?mg(e,a,l):(++l,mg(e,l,s)),l<=t&&(a=l+1),t<=l&&(s=l-1)}return e}function mg(e,t,a){const s=e[t];e[t]=e[a],e[a]=s}function qme(e,t,a){if(e=Float64Array.from(zme(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return R$(e);if(t>=1)return $$(e);var s,r=(s-1)*t,i=Math.floor(r),o=$$(xq(e,i).subarray(0,i+1)),l=R$(e.subarray(i+1));return o+(l-o)*(r-i)}}function Gme(e,t,a=gq){if(s=e.length){if((t=+t)<=0||s<2)return+a(e[0],0,e);if(t>=1)return+a(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),o=+a(e[i],i,e),l=+a(e[i+1],i+1,e);return o+(l-o)*(r-i)}}function yq(e,t,a){e=+e,t=+t,a=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+a;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/a))|0,i=new Array(r);++s<r;)i[s]=e+s*a;return i}function _i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function tc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const yE=Symbol("implicit");function bp(){var e=new Nv,t=[],a=[],s=yE;function r(i){let o=e.get(i);if(o===void 0){if(s!==yE)return s;e.set(i,o=t.push(i)-1)}return a[o%a.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Nv;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(i){return arguments.length?(a=Array.from(i),r):a.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return bp(t,a).unknown(s)},_i.apply(r,arguments),r}function XL(){var e=bp().unknown(void 0),t=e.domain,a=e.range,s=0,r=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,x=r<s,y=x?r:s,N=x?s:r;i=(N-y)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),y+=(N-y-i*(p-c))*u,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var v=yq(p).map(function(j){return y+i*j});return a(x?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,f()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return XL(t(),[s,r]).round(l).paddingInner(c).paddingOuter(d).align(u)},_i.apply(f(),arguments)}function bq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return bq(t())},e}function Wme(){return bq(XL.apply(null,arguments).paddingInner(1))}function ZL(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function vq(e,t){var a=Object.create(e.prototype);for(var s in t)a[s]=t[s];return a}function bx(){}var vp=.7,jv=1/vp,xf="\\s*([+-]?\\d+)\\s*",wp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vme=/^#([0-9a-f]{3,8})$/,Yme=new RegExp(`^rgb\\(${xf},${xf},${xf}\\)$`),Qme=new RegExp(`^rgb\\(${Lo},${Lo},${Lo}\\)$`),Kme=new RegExp(`^rgba\\(${xf},${xf},${xf},${wp}\\)$`),Xme=new RegExp(`^rgba\\(${Lo},${Lo},${Lo},${wp}\\)$`),Zme=new RegExp(`^hsl\\(${wp},${Lo},${Lo}\\)$`),Jme=new RegExp(`^hsla\\(${wp},${Lo},${Lo},${wp}\\)$`),z$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ZL(bx,Np,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:F$,formatHex:F$,formatHex8:efe,formatHsl:tfe,formatRgb:U$,toString:U$});function F$(){return this.rgb().formatHex()}function efe(){return this.rgb().formatHex8()}function tfe(){return wq(this).formatHsl()}function U$(){return this.rgb().formatRgb()}function Np(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=Vme.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?B$(t):a===3?new mr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?Wy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?Wy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Yme.exec(e))?new mr(t[1],t[2],t[3],1):(t=Qme.exec(e))?new mr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Kme.exec(e))?Wy(t[1],t[2],t[3],t[4]):(t=Xme.exec(e))?Wy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Zme.exec(e))?G$(t[1],t[2]/100,t[3]/100,1):(t=Jme.exec(e))?G$(t[1],t[2]/100,t[3]/100,t[4]):z$.hasOwnProperty(e)?B$(z$[e]):e==="transparent"?new mr(NaN,NaN,NaN,0):null}function B$(e){return new mr(e>>16&255,e>>8&255,e&255,1)}function Wy(e,t,a,s){return s<=0&&(e=t=a=NaN),new mr(e,t,a,s)}function nfe(e){return e instanceof bx||(e=Np(e)),e?(e=e.rgb(),new mr(e.r,e.g,e.b,e.opacity)):new mr}function bE(e,t,a,s){return arguments.length===1?nfe(e):new mr(e,t,a,s??1)}function mr(e,t,a,s){this.r=+e,this.g=+t,this.b=+a,this.opacity=+s}ZL(mr,bE,vq(bx,{brighter(e){return e=e==null?jv:Math.pow(jv,e),new mr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vp:Math.pow(vp,e),new mr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mr(bu(this.r),bu(this.g),bu(this.b),Cv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:H$,formatHex:H$,formatHex8:afe,formatRgb:q$,toString:q$}));function H$(){return`#${du(this.r)}${du(this.g)}${du(this.b)}`}function afe(){return`#${du(this.r)}${du(this.g)}${du(this.b)}${du((isNaN(this.opacity)?1:this.opacity)*255)}`}function q$(){const e=Cv(this.opacity);return`${e===1?"rgb(":"rgba("}${bu(this.r)}, ${bu(this.g)}, ${bu(this.b)}${e===1?")":`, ${e})`}`}function Cv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function du(e){return e=bu(e),(e<16?"0":"")+e.toString(16)}function G$(e,t,a,s){return s<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new Fi(e,t,a,s)}function wq(e){if(e instanceof Fi)return new Fi(e.h,e.s,e.l,e.opacity);if(e instanceof bx||(e=Np(e)),!e)return new Fi;if(e instanceof Fi)return e;e=e.rgb();var t=e.r/255,a=e.g/255,s=e.b/255,r=Math.min(t,a,s),i=Math.max(t,a,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(a-s)/l+(a<s)*6:a===i?o=(s-t)/l+2:o=(t-a)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new Fi(o,l,c,e.opacity)}function sfe(e,t,a,s){return arguments.length===1?wq(e):new Fi(e,t,a,s??1)}function Fi(e,t,a,s){this.h=+e,this.s=+t,this.l=+a,this.opacity=+s}ZL(Fi,sfe,vq(bx,{brighter(e){return e=e==null?jv:Math.pow(jv,e),new Fi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vp:Math.pow(vp,e),new Fi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*t,r=2*a-s;return new mr(a2(e>=240?e-240:e+120,r,s),a2(e,r,s),a2(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new Fi(W$(this.h),Vy(this.s),Vy(this.l),Cv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cv(this.opacity);return`${e===1?"hsl(":"hsla("}${W$(this.h)}, ${Vy(this.s)*100}%, ${Vy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W$(e){return e=(e||0)%360,e<0?e+360:e}function Vy(e){return Math.max(0,Math.min(1,e||0))}function a2(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const JL=e=>()=>e;function rfe(e,t){return function(a){return e+a*t}}function ife(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(s){return Math.pow(e+s*t,a)}}function ofe(e){return(e=+e)==1?Nq:function(t,a){return a-t?ife(t,a,e):JL(isNaN(t)?a:t)}}function Nq(e,t){var a=t-e;return a?rfe(e,a):JL(isNaN(e)?t:e)}const V$=(function e(t){var a=ofe(t);function s(r,i){var o=a((r=bE(r)).r,(i=bE(i)).r),l=a(r.g,i.g),c=a(r.b,i.b),d=Nq(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=l(u),r.b=c(u),r.opacity=d(u),r+""}}return s.gamma=e,s})(1);function lfe(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<a;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function cfe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dfe(e,t){var a=t?t.length:0,s=e?Math.min(a,e.length):0,r=new Array(s),i=new Array(a),o;for(o=0;o<s;++o)r[o]=eh(e[o],t[o]);for(;o<a;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=r[o](l);return i}}function e4(e,t){var a=new Date;return e=+e,t=+t,function(s){return a.setTime(e*(1-s)+t*s),a}}function Af(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function ufe(e,t){var a={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?a[r]=eh(e[r],t[r]):s[r]=t[r];return function(i){for(r in a)s[r]=a[r](i);return s}}var vE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s2=new RegExp(vE.source,"g");function mfe(e){return function(){return e}}function ffe(e){return function(t){return e(t)+""}}function t4(e,t){var a=vE.lastIndex=s2.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=vE.exec(e))&&(r=s2.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:Af(s,r)})),a=s2.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?ffe(c[0].x):mfe(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function eh(e,t){var a=typeof t,s;return t==null||a==="boolean"?JL(t):(a==="number"?Af:a==="string"?(s=Np(t))?(t=s,V$):t4:t instanceof Np?V$:t instanceof Date?e4:cfe(t)?lfe:Array.isArray(t)?dfe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ufe:Af)(e,t)}function n4(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function hfe(e,t){t===void 0&&(t=e,e=eh);for(var a=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);a<s;)i[a]=e(r,r=t[++a]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function gfe(e){return function(){return e}}function Sv(e){return+e}var Y$=[0,1];function Gs(e){return e}function wE(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:gfe(isNaN(t)?NaN:.5)}function pfe(e,t){var a;return e>t&&(a=e,e=t,t=a),function(s){return Math.max(e,Math.min(t,s))}}function xfe(e,t,a){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=wE(r,s),i=a(o,i)):(s=wE(s,r),i=a(i,o)),function(l){return i(s(l))}}function yfe(e,t,a){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=wE(e[o],e[o+1]),i[o]=a(t[o],t[o+1]);return function(l){var c=yx(e,l,1,s)-1;return i[c](r[c](l))}}function vx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function EN(){var e=Y$,t=Y$,a=eh,s,r,i,o=Gs,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==Gs&&(o=pfe(e[0],e[p-1])),l=p>2?yfe:xfe,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(s),t,a)))(s(o(p)))}return f.invert=function(p){return o(r((d||(d=l(t,e.map(s),Af)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,Sv),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),a=n4,u()},f.clamp=function(p){return arguments.length?(o=p?!0:Gs,u()):o!==Gs},f.interpolate=function(p){return arguments.length?(a=p,u()):a},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,x){return s=p,r=x,u()}}function a4(){return EN()(Gs,Gs)}function bfe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _v(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function Tf(e){return e=_v(Math.abs(e)),e?e[1]:NaN}function vfe(e,t){return function(a,s){for(var r=a.length,i=[],o=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(a.substring(r-=l,r+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function wfe(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var Nfe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jp(e){if(!(t=Nfe.exec(e)))throw new Error("invalid format: "+e);var t;return new s4({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}jp.prototype=s4.prototype;function s4(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}s4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jfe(e){e:for(var t=e.length,a=1,s=-1,r;a<t;++a)switch(e[a]){case".":s=r=a;break;case"0":s===0&&(s=a),r=a;break;default:if(!+e[a])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var jq;function Cfe(e,t){var a=_v(e,t);if(!a)return e+"";var s=a[0],r=a[1],i=r-(jq=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+_v(e,Math.max(0,t+i-1))[0]}function Q$(e,t){var a=_v(e,t);if(!a)return e+"";var s=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const K$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bfe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Q$(e*100,t),r:Q$,s:Cfe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function X$(e){return e}var Z$=Array.prototype.map,J$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Sfe(e){var t=e.grouping===void 0||e.thousands===void 0?X$:vfe(Z$.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?X$:wfe(Z$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=jp(f);var p=f.fill,x=f.align,y=f.sign,N=f.symbol,v=f.zero,j=f.width,w=f.comma,S=f.precision,A=f.trim,k=f.type;k==="n"?(w=!0,k="g"):K$[k]||(S===void 0&&(S=12),A=!0,k="g"),(v||p==="0"&&x==="=")&&(v=!0,p="0",x="=");var _=N==="$"?a:N==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",L=N==="$"?s:/[%p]/.test(k)?o:"",T=K$[k],M=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function R(z){var O=_,I=L,B,ee,Q;if(k==="c")I=T(z)+I,z="";else{z=+z;var te=z<0||1/z<0;if(z=isNaN(z)?c:T(Math.abs(z),S),A&&(z=jfe(z)),te&&+z==0&&y!=="+"&&(te=!1),O=(te?y==="("?y:l:y==="-"||y==="("?"":y)+O,I=(k==="s"?J$[8+jq/3]:"")+I+(te&&y==="("?")":""),M){for(B=-1,ee=z.length;++B<ee;)if(Q=z.charCodeAt(B),48>Q||Q>57){I=(Q===46?r+z.slice(B+1):z.slice(B))+I,z=z.slice(0,B);break}}}w&&!v&&(z=t(z,1/0));var W=O.length+z.length+I.length,ae=W<j?new Array(j-W+1).join(p):"";switch(w&&v&&(z=t(ae+z,ae.length?j-I.length:1/0),ae=""),x){case"<":z=O+z+I+ae;break;case"=":z=O+ae+z+I;break;case"^":z=ae.slice(0,W=ae.length>>1)+O+z+I+ae.slice(W);break;default:z=ae+O+z+I;break}return i(z)}return R.toString=function(){return f+""},R}function u(f,p){var x=d((f=jp(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Tf(p)/3)))*3,N=Math.pow(10,-y),v=J$[8+y/3];return function(j){return x(N*j)+v}}return{format:d,formatPrefix:u}}var Yy,r4,Cq;_fe({thousands:",",grouping:[3],currency:["$",""]});function _fe(e){return Yy=Sfe(e),r4=Yy.format,Cq=Yy.formatPrefix,Yy}function Afe(e){return Math.max(0,-Tf(Math.abs(e)))}function Tfe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tf(t)/3)))*3-Tf(Math.abs(e)))}function Efe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Tf(t)-Tf(e))+1}function Sq(e,t,a,s){var r=xE(e,t,a),i;switch(s=jp(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Tfe(r,o))&&(s.precision=i),Cq(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Efe(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Afe(r))&&(s.precision=i-(s.type==="%")*2);break}}return r4(s)}function Nd(e){var t=e.domain;return e.ticks=function(a){var s=t();return pE(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var r=t();return Sq(r[0],r[r.length-1],a??10,s)},e.nice=function(a){a==null&&(a=10);var s=t(),r=0,i=s.length-1,o=s[r],l=s[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=r,r=i,i=d);u-- >0;){if(d=pq(o,l,a),d===c)return s[r]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function kN(){var e=a4();return e.copy=function(){return vx(e,kN())},_i.apply(e,arguments),Nd(e)}function _q(e){var t;function a(s){return s==null||isNaN(s=+s)?t:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(e=Array.from(s,Sv),a):e.slice()},a.unknown=function(s){return arguments.length?(t=s,a):t},a.copy=function(){return _q(e).unknown(t)},e=arguments.length?Array.from(e,Sv):[0,1],Nd(a)}function Aq(e,t){e=e.slice();var a=0,s=e.length-1,r=e[a],i=e[s],o;return i<r&&(o=a,a=s,s=o,o=r,r=i,i=o),e[a]=t.floor(r),e[s]=t.ceil(i),e}function e6(e){return Math.log(e)}function t6(e){return Math.exp(e)}function kfe(e){return-Math.log(-e)}function Lfe(e){return-Math.exp(-e)}function Pfe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Dfe(e){return e===10?Pfe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Ofe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function n6(e){return(t,a)=>-e(-t,a)}function i4(e){const t=e(e6,t6),a=t.domain;let s=10,r,i;function o(){return r=Ofe(s),i=Dfe(s),a()[0]<0?(r=n6(r),i=n6(i),e(kfe,Lfe)):e(e6,t6),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(a(l),o()):a()},t.ticks=l=>{const c=a();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=r(d),x=r(u),y,N;const v=l==null?10:+l;let j=[];if(!(s%1)&&x-p<v){if(p=Math.floor(p),x=Math.ceil(x),d>0){for(;p<=x;++p)for(y=1;y<s;++y)if(N=p<0?y/i(-p):y*i(p),!(N<d)){if(N>u)break;j.push(N)}}else for(;p<=x;++p)for(y=s-1;y>=1;--y)if(N=p>0?y/i(-p):y*i(p),!(N<d)){if(N>u)break;j.push(N)}j.length*2<v&&(j=pE(d,u,v))}else j=pE(p,x,Math.min(x-p,v)).map(i);return f?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=jp(c)).precision==null&&(c.trim=!0),c=r4(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let f=u/i(Math.round(r(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>a(Aq(a(),{floor:l=>i(Math.floor(r(l))),ceil:l=>i(Math.ceil(r(l)))})),t}function Cp(){const e=i4(EN()).domain([1,10]);return e.copy=()=>vx(e,Cp()).base(e.base()),_i.apply(e,arguments),e}function a6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function s6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function o4(e){var t=1,a=e(a6(t),s6(t));return a.constant=function(s){return arguments.length?e(a6(t=+s),s6(t)):t},Nd(a)}function l4(){var e=o4(EN());return e.copy=function(){return vx(e,l4()).constant(e.constant())},_i.apply(e,arguments)}function r6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Mfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ife(e){return e<0?-e*e:e*e}function c4(e){var t=e(Gs,Gs),a=1;function s(){return a===1?e(Gs,Gs):a===.5?e(Mfe,Ife):e(r6(a),r6(1/a))}return t.exponent=function(r){return arguments.length?(a=+r,s()):a},Nd(t)}function LN(){var e=c4(EN());return e.copy=function(){return vx(e,LN()).exponent(e.exponent())},_i.apply(e,arguments),e}function Tq(){return LN.apply(null,arguments).exponent(.5)}function i6(e){return Math.sign(e)*e*e}function $fe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Eq(){var e=a4(),t=[0,1],a=!1,s;function r(i){var o=$fe(e(i));return isNaN(o)?s:a?Math.round(o):o}return r.invert=function(i){return e.invert(i6(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,Sv)).map(i6)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(a=!!i,r):a},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return Eq(e.domain(),t).round(a).clamp(e.clamp()).unknown(s)},_i.apply(r,arguments),Nd(r)}function kq(){var e=[],t=[],a=[],s;function r(){var o=0,l=Math.max(1,t.length);for(a=new Array(l-1);++o<l;)a[o-1]=Gme(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[yx(a,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?a[l-1]:e[0],l<a.length?a[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(xx),r()},i.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return a.slice()},i.copy=function(){return kq().domain(e).range(t).unknown(s)},_i.apply(i,arguments)}function Lq(){var e=0,t=1,a=1,s=[.5],r=[0,1],i;function o(c){return c!=null&&c<=c?r[yx(s,c,0,a)]:i}function l(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*t-(c-a)*e)/(a+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(a=(r=Array.from(c)).length-1,l()):r.slice()},o.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=a?[s[a-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return Lq().domain([e,t]).range(r).unknown(i)},_i.apply(Nd(o),arguments)}function d4(){var e=[.5],t=[0,1],a,s=1;function r(i){return i!=null&&i<=i?t[yx(e,i,0,s)]:a}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return d4().domain(e).range(t).unknown(a)},_i.apply(r,arguments)}const r2=new Date,i2=new Date;function rs(e,t,a,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const o=r(i),l=r.ceil(i);return i-o<l-i?o:l},r.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),r.range=(i,o,l)=>{const c=[];if(i=r.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},r.filter=i=>rs(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),a&&(r.count=(i,o)=>(r2.setTime(+i),i2.setTime(+o),e(r2),e(i2),Math.floor(a(r2,i2))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?o=>s(o)%i===0:o=>r.count(0,o)%i===0):r)),r}const Av=rs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Av.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?rs(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):Av);Av.range;const El=1e3,mi=El*60,kl=mi*60,Ul=kl*24,u4=Ul*7,o6=Ul*30,o2=Ul*365,uu=rs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*El)},(e,t)=>(t-e)/El,e=>e.getUTCSeconds());uu.range;const m4=rs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*El)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getMinutes());m4.range;const f4=rs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getUTCMinutes());f4.range;const h4=rs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*El-e.getMinutes()*mi)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getHours());h4.range;const g4=rs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getUTCHours());g4.range;const wx=rs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mi)/Ul,e=>e.getDate()-1);wx.range;const PN=rs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ul,e=>e.getUTCDate()-1);PN.range;const Pq=rs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ul,e=>Math.floor(e/Ul));Pq.range;function Zu(e){return rs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*mi)/u4)}const DN=Zu(0),Tv=Zu(1),Rfe=Zu(2),zfe=Zu(3),Ef=Zu(4),Ffe=Zu(5),Ufe=Zu(6);DN.range;Tv.range;Rfe.range;zfe.range;Ef.range;Ffe.range;Ufe.range;function Ju(e){return rs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/u4)}const ON=Ju(0),Ev=Ju(1),Bfe=Ju(2),Hfe=Ju(3),kf=Ju(4),qfe=Ju(5),Gfe=Ju(6);ON.range;Ev.range;Bfe.range;Hfe.range;kf.range;qfe.range;Gfe.range;const p4=rs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p4.range;const x4=rs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());x4.range;const Bl=rs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});Bl.range;const Hl=rs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});Hl.range;function Dq(e,t,a,s,r,i){const o=[[uu,1,El],[uu,5,5*El],[uu,15,15*El],[uu,30,30*El],[i,1,mi],[i,5,5*mi],[i,15,15*mi],[i,30,30*mi],[r,1,kl],[r,3,3*kl],[r,6,6*kl],[r,12,12*kl],[s,1,Ul],[s,2,2*Ul],[a,1,u4],[t,1,o6],[t,3,3*o6],[e,1,o2]];function l(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const x=f&&typeof f.range=="function"?f:c(d,u,f),y=x?x.range(d,+u+1):[];return p?y.reverse():y}function c(d,u,f){const p=Math.abs(u-d)/f,x=KL(([,,v])=>v).right(o,p);if(x===o.length)return e.every(xE(d/o2,u/o2,f));if(x===0)return Av.every(Math.max(xE(d,u,f),1));const[y,N]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return y.every(N)}return[l,c]}const[Wfe,Vfe]=Dq(Hl,x4,ON,Pq,g4,f4),[Yfe,Qfe]=Dq(Bl,p4,DN,wx,h4,m4);function l2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function c2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fg(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function Kfe(e){var t=e.dateTime,a=e.date,s=e.time,r=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=hg(r),u=gg(r),f=hg(i),p=gg(i),x=hg(o),y=gg(o),N=hg(l),v=gg(l),j=hg(c),w=gg(c),S={a:te,A:W,b:ae,B:Ee,c:null,d:f6,e:f6,f:bhe,g:Ehe,G:Lhe,H:phe,I:xhe,j:yhe,L:Oq,m:vhe,M:whe,p:se,q:Y,Q:p6,s:x6,S:Nhe,u:jhe,U:Che,V:She,w:_he,W:Ahe,x:null,X:null,y:The,Y:khe,Z:Phe,"%":g6},A={a:pe,A:Se,b:me,B:ye,c:null,d:h6,e:h6,f:Ihe,g:Whe,G:Yhe,H:Dhe,I:Ohe,j:Mhe,L:Iq,m:$he,M:Rhe,p:re,q:De,Q:p6,s:x6,S:zhe,u:Fhe,U:Uhe,V:Bhe,w:Hhe,W:qhe,x:null,X:null,y:Ghe,Y:Vhe,Z:Qhe,"%":g6},k={a:R,A:z,b:O,B:I,c:B,d:u6,e:u6,f:mhe,g:d6,G:c6,H:m6,I:m6,j:lhe,L:uhe,m:ohe,M:che,p:M,q:ihe,Q:hhe,s:ghe,S:dhe,u:the,U:nhe,V:ahe,w:ehe,W:she,x:ee,X:Q,y:d6,Y:c6,Z:rhe,"%":fhe};S.x=_(a,S),S.X=_(s,S),S.c=_(t,S),A.x=_(a,A),A.X=_(s,A),A.c=_(t,A);function _(ve,ke){return function(Ce){var de=[],Re=-1,Oe=0,Ge=ve.length,et,mt,Fe;for(Ce instanceof Date||(Ce=new Date(+Ce));++Re<Ge;)ve.charCodeAt(Re)===37&&(de.push(ve.slice(Oe,Re)),(mt=l6[et=ve.charAt(++Re)])!=null?et=ve.charAt(++Re):mt=et==="e"?" ":"0",(Fe=ke[et])&&(et=Fe(Ce,mt)),de.push(et),Oe=Re+1);return de.push(ve.slice(Oe,Re)),de.join("")}}function L(ve,ke){return function(Ce){var de=fg(1900,void 0,1),Re=T(de,ve,Ce+="",0),Oe,Ge;if(Re!=Ce.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(ke&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Oe=c2(fg(de.y,0,1)),Ge=Oe.getUTCDay(),Oe=Ge>4||Ge===0?Ev.ceil(Oe):Ev(Oe),Oe=PN.offset(Oe,(de.V-1)*7),de.y=Oe.getUTCFullYear(),de.m=Oe.getUTCMonth(),de.d=Oe.getUTCDate()+(de.w+6)%7):(Oe=l2(fg(de.y,0,1)),Ge=Oe.getDay(),Oe=Ge>4||Ge===0?Tv.ceil(Oe):Tv(Oe),Oe=wx.offset(Oe,(de.V-1)*7),de.y=Oe.getFullYear(),de.m=Oe.getMonth(),de.d=Oe.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Ge="Z"in de?c2(fg(de.y,0,1)).getUTCDay():l2(fg(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Ge+5)%7:de.w+de.U*7-(Ge+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,c2(de)):l2(de)}}function T(ve,ke,Ce,de){for(var Re=0,Oe=ke.length,Ge=Ce.length,et,mt;Re<Oe;){if(de>=Ge)return-1;if(et=ke.charCodeAt(Re++),et===37){if(et=ke.charAt(Re++),mt=k[et in l6?ke.charAt(Re++):et],!mt||(de=mt(ve,Ce,de))<0)return-1}else if(et!=Ce.charCodeAt(de++))return-1}return de}function M(ve,ke,Ce){var de=d.exec(ke.slice(Ce));return de?(ve.p=u.get(de[0].toLowerCase()),Ce+de[0].length):-1}function R(ve,ke,Ce){var de=x.exec(ke.slice(Ce));return de?(ve.w=y.get(de[0].toLowerCase()),Ce+de[0].length):-1}function z(ve,ke,Ce){var de=f.exec(ke.slice(Ce));return de?(ve.w=p.get(de[0].toLowerCase()),Ce+de[0].length):-1}function O(ve,ke,Ce){var de=j.exec(ke.slice(Ce));return de?(ve.m=w.get(de[0].toLowerCase()),Ce+de[0].length):-1}function I(ve,ke,Ce){var de=N.exec(ke.slice(Ce));return de?(ve.m=v.get(de[0].toLowerCase()),Ce+de[0].length):-1}function B(ve,ke,Ce){return T(ve,t,ke,Ce)}function ee(ve,ke,Ce){return T(ve,a,ke,Ce)}function Q(ve,ke,Ce){return T(ve,s,ke,Ce)}function te(ve){return o[ve.getDay()]}function W(ve){return i[ve.getDay()]}function ae(ve){return c[ve.getMonth()]}function Ee(ve){return l[ve.getMonth()]}function se(ve){return r[+(ve.getHours()>=12)]}function Y(ve){return 1+~~(ve.getMonth()/3)}function pe(ve){return o[ve.getUTCDay()]}function Se(ve){return i[ve.getUTCDay()]}function me(ve){return c[ve.getUTCMonth()]}function ye(ve){return l[ve.getUTCMonth()]}function re(ve){return r[+(ve.getUTCHours()>=12)]}function De(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var ke=_(ve+="",S);return ke.toString=function(){return ve},ke},parse:function(ve){var ke=L(ve+="",!1);return ke.toString=function(){return ve},ke},utcFormat:function(ve){var ke=_(ve+="",A);return ke.toString=function(){return ve},ke},utcParse:function(ve){var ke=L(ve+="",!0);return ke.toString=function(){return ve},ke}}}var l6={"-":"",_:" ",0:"0"},xs=/^\s*\d+/,Xfe=/^%/,Zfe=/[\\^$*+?|[\]().{}]/g;function jn(e,t,a){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<a?new Array(a-i+1).join(t)+r:r)}function Jfe(e){return e.replace(Zfe,"\\$&")}function hg(e){return new RegExp("^(?:"+e.map(Jfe).join("|")+")","i")}function gg(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function ehe(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function the(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function nhe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function ahe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function she(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function c6(e,t,a){var s=xs.exec(t.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function d6(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function rhe(e,t,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function ihe(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.q=s[0]*3-3,a+s[0].length):-1}function ohe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function u6(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function lhe(e,t,a){var s=xs.exec(t.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function m6(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function che(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function dhe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function uhe(e,t,a){var s=xs.exec(t.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function mhe(e,t,a){var s=xs.exec(t.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function fhe(e,t,a){var s=Xfe.exec(t.slice(a,a+1));return s?a+s[0].length:-1}function hhe(e,t,a){var s=xs.exec(t.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function ghe(e,t,a){var s=xs.exec(t.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function f6(e,t){return jn(e.getDate(),t,2)}function phe(e,t){return jn(e.getHours(),t,2)}function xhe(e,t){return jn(e.getHours()%12||12,t,2)}function yhe(e,t){return jn(1+wx.count(Bl(e),e),t,3)}function Oq(e,t){return jn(e.getMilliseconds(),t,3)}function bhe(e,t){return Oq(e,t)+"000"}function vhe(e,t){return jn(e.getMonth()+1,t,2)}function whe(e,t){return jn(e.getMinutes(),t,2)}function Nhe(e,t){return jn(e.getSeconds(),t,2)}function jhe(e){var t=e.getDay();return t===0?7:t}function Che(e,t){return jn(DN.count(Bl(e)-1,e),t,2)}function Mq(e){var t=e.getDay();return t>=4||t===0?Ef(e):Ef.ceil(e)}function She(e,t){return e=Mq(e),jn(Ef.count(Bl(e),e)+(Bl(e).getDay()===4),t,2)}function _he(e){return e.getDay()}function Ahe(e,t){return jn(Tv.count(Bl(e)-1,e),t,2)}function The(e,t){return jn(e.getFullYear()%100,t,2)}function Ehe(e,t){return e=Mq(e),jn(e.getFullYear()%100,t,2)}function khe(e,t){return jn(e.getFullYear()%1e4,t,4)}function Lhe(e,t){var a=e.getDay();return e=a>=4||a===0?Ef(e):Ef.ceil(e),jn(e.getFullYear()%1e4,t,4)}function Phe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+jn(t/60|0,"0",2)+jn(t%60,"0",2)}function h6(e,t){return jn(e.getUTCDate(),t,2)}function Dhe(e,t){return jn(e.getUTCHours(),t,2)}function Ohe(e,t){return jn(e.getUTCHours()%12||12,t,2)}function Mhe(e,t){return jn(1+PN.count(Hl(e),e),t,3)}function Iq(e,t){return jn(e.getUTCMilliseconds(),t,3)}function Ihe(e,t){return Iq(e,t)+"000"}function $he(e,t){return jn(e.getUTCMonth()+1,t,2)}function Rhe(e,t){return jn(e.getUTCMinutes(),t,2)}function zhe(e,t){return jn(e.getUTCSeconds(),t,2)}function Fhe(e){var t=e.getUTCDay();return t===0?7:t}function Uhe(e,t){return jn(ON.count(Hl(e)-1,e),t,2)}function $q(e){var t=e.getUTCDay();return t>=4||t===0?kf(e):kf.ceil(e)}function Bhe(e,t){return e=$q(e),jn(kf.count(Hl(e),e)+(Hl(e).getUTCDay()===4),t,2)}function Hhe(e){return e.getUTCDay()}function qhe(e,t){return jn(Ev.count(Hl(e)-1,e),t,2)}function Ghe(e,t){return jn(e.getUTCFullYear()%100,t,2)}function Whe(e,t){return e=$q(e),jn(e.getUTCFullYear()%100,t,2)}function Vhe(e,t){return jn(e.getUTCFullYear()%1e4,t,4)}function Yhe(e,t){var a=e.getUTCDay();return e=a>=4||a===0?kf(e):kf.ceil(e),jn(e.getUTCFullYear()%1e4,t,4)}function Qhe(){return"+0000"}function g6(){return"%"}function p6(e){return+e}function x6(e){return Math.floor(+e/1e3)}var Vm,Rq,zq;Khe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Khe(e){return Vm=Kfe(e),Rq=Vm.format,Vm.parse,zq=Vm.utcFormat,Vm.utcParse,Vm}function Xhe(e){return new Date(e)}function Zhe(e){return e instanceof Date?+e:+new Date(+e)}function y4(e,t,a,s,r,i,o,l,c,d){var u=a4(),f=u.invert,p=u.domain,x=d(".%L"),y=d(":%S"),N=d("%I:%M"),v=d("%I %p"),j=d("%a %d"),w=d("%b %d"),S=d("%B"),A=d("%Y");function k(_){return(c(_)<_?x:l(_)<_?y:o(_)<_?N:i(_)<_?v:s(_)<_?r(_)<_?j:w:a(_)<_?S:A)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?p(Array.from(_,Zhe)):p().map(Xhe)},u.ticks=function(_){var L=p();return e(L[0],L[L.length-1],_??10)},u.tickFormat=function(_,L){return L==null?k:d(L)},u.nice=function(_){var L=p();return(!_||typeof _.range!="function")&&(_=t(L[0],L[L.length-1],_??10)),_?p(Aq(L,_)):u},u.copy=function(){return vx(u,y4(e,t,a,s,r,i,o,l,c,d))},u}function b4(){return _i.apply(y4(Yfe,Qfe,Bl,p4,DN,wx,h4,m4,uu,Rq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Fq(){return _i.apply(y4(Wfe,Vfe,Hl,x4,ON,PN,g4,f4,uu,zq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function MN(){var e=0,t=1,a,s,r,i,o=Gs,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(r===0?.5:(f=(i(f)-a)*r,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,a=i(e=+e),s=i(t=+t),r=a===s?0:1/(s-a),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(p){var x,y;return arguments.length?([x,y]=p,o=f(x,y),d):[o(0),o(1)]}}return d.range=u(eh),d.rangeRound=u(n4),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,a=f(e),s=f(t),r=a===s?0:1/(s-a),d}}function jd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function v4(){var e=Nd(MN()(Gs));return e.copy=function(){return jd(e,v4())},tc.apply(e,arguments)}function Uq(){var e=i4(MN()).domain([1,10]);return e.copy=function(){return jd(e,Uq()).base(e.base())},tc.apply(e,arguments)}function Bq(){var e=o4(MN());return e.copy=function(){return jd(e,Bq()).constant(e.constant())},tc.apply(e,arguments)}function w4(){var e=c4(MN());return e.copy=function(){return jd(e,w4()).exponent(e.exponent())},tc.apply(e,arguments)}function Jhe(){return w4.apply(null,arguments).exponent(.5)}function Hq(){var e=[],t=Gs;function a(s){if(s!=null&&!isNaN(s=+s))return t((yx(e,s,1)-1)/(e.length-1))}return a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(xx),a},a.interpolator=function(s){return arguments.length?(t=s,a):t},a.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(r,i)=>qme(e,i/s))},a.copy=function(){return Hq(t).domain(e)},tc.apply(a,arguments)}function IN(){var e=0,t=.5,a=1,s=1,r,i,o,l,c,d=Gs,u,f=!1,p;function x(N){return isNaN(N=+N)?p:(N=.5+((N=+u(N))-i)*(s*N<s*i?l:c),d(f?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,a]=N,r=u(e=+e),i=u(t=+t),o=u(a=+a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x):[e,t,a]},x.clamp=function(N){return arguments.length?(f=!!N,x):f},x.interpolator=function(N){return arguments.length?(d=N,x):d};function y(N){return function(v){var j,w,S;return arguments.length?([j,w,S]=v,d=hfe(N,[j,w,S]),x):[d(0),d(.5),d(1)]}}return x.range=y(eh),x.rangeRound=y(n4),x.unknown=function(N){return arguments.length?(p=N,x):p},function(N){return u=N,r=N(e),i=N(t),o=N(a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x}}function qq(){var e=Nd(IN()(Gs));return e.copy=function(){return jd(e,qq())},tc.apply(e,arguments)}function Gq(){var e=i4(IN()).domain([.1,1,10]);return e.copy=function(){return jd(e,Gq()).base(e.base())},tc.apply(e,arguments)}function Wq(){var e=o4(IN());return e.copy=function(){return jd(e,Wq()).constant(e.constant())},tc.apply(e,arguments)}function N4(){var e=c4(IN());return e.copy=function(){return jd(e,N4()).exponent(e.exponent())},tc.apply(e,arguments)}function ege(){return N4.apply(null,arguments).exponent(.5)}function Vq(e){return e.type==="piecewise"?d4(e.thresholds,e.colors):v4([e.min??0,e.max??100],e.color)}function Lf(e){return e.values?bp(e.values,e.colors).unknown(e.unknownColor??null):bp(e.colors.map((t,a)=>a),e.colors).unknown(e.unknownColor??null)}function yf(e){return e.type==="ordinal"?Lf(e):Vq(e)}function Yq(e,t,a){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,o=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),l=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(o,Math.max(l,i??a))}function Qq(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function j4(e){return Math.floor(Math.abs(e)/50)}function y6(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function $N(...e){let t=new Nv(void 0,y6),a=[],s=[],r=0,i=1,o,l,c=!1,d=0,u=0,f=.5;const p=v=>{const j=t.get(v);if(j!==void 0)return s[j%s.length]},x=()=>{const v=a.length,j=i<r,w=j?i:r,S=j?r:i;o=(S-w)/Math.max(1,v-d+u*2),c&&(o=Math.floor(o));const A=w+(S-w-o*(v-d))*f;l=o*(1-d);const k=c?Math.round(A):A;l=c?Math.round(l):l;const L=yq(v).map(T=>k+o*T);return s=j?L.reverse():L,p};p.domain=function(v){if(!arguments.length)return a.slice();a=[],t=new Nv(void 0,y6);for(const j of v)t.has(j)||t.set(j,a.push(j)-1);return x()},p.range=function(v){if(!arguments.length)return[r,i];const[j,w]=v;return r=+j,i=+w,x()},p.rangeRound=function(v){const[j,w]=v;return r=+j,i=+w,c=!0,x()},p.bandwidth=function(){return l},p.step=function(){return o},p.round=function(v){return arguments.length?(c=!!v,x()):c},p.padding=function(v){return arguments.length?(d=Math.min(1,u=+v),x()):d},p.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),x()):d},p.paddingOuter=function(v){return arguments.length?(u=+v,x()):u},p.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),x()):f},p.copy=()=>$N(a,[r,i]).round(c).paddingInner(d).paddingOuter(u).align(f);const[y,N]=e;return e.length>1?(p.domain(y),p.range(N)):y?p.range(y):x(),p}function Kq(...e){const t=$N(...e).paddingInner(1),a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=a();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function Xq(...e){const t=l4(...e),a=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=tge(t);return t.ticks=o=>{const l=a(o),c=t.constant();let d=0,u=0,f=0;l.forEach(x=>{x>-c&&x<c&&(u+=1),x<=-c&&(d+=1),x>=c&&(f+=1)});const p=[];if(d>0&&p.push(...s.ticks(d)),u>0){const x=r.ticks(u);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(f>0){const x=i.ticks(f);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(o=10,l)=>{const c=t.constant(),[d,u]=t.domain(),f=u-d,p=s.domain(),x=p[1]-p[0],N=(f===0?0:x/f)*o,v=r.domain(),j=v[1]-v[0],S=(f===0?0:j/f)*o,A=i.domain(),k=A[1]-A[0],L=(f===0?0:k/f)*o,T=s.tickFormat(N,l),M=r.tickFormat(S,l),R=i.tickFormat(L,l);return z=>(z.valueOf()<=-c?T:z.valueOf()>=c?R:M)(z)},t.copy=()=>Xq(t.domain(),t.range()).constant(t.constant()),t}function tge(e){const t=e.constant(),a=e.domain(),s=[a[0],Math.min(a[1],-t)],r=Cp(s,e.range()),i=[Math.max(a[0],-t),Math.min(a[1],t)],o=kN(i,e.range()),l=[Math.max(a[0],t),a[1]],c=Cp(l,e.range());return{negativeScale:r,linearScale:o,positiveScale:c}}function RN(e,t,a){switch(e){case"log":return Cp(t,a);case"pow":return LN(t,a);case"sqrt":return Tq(t,a);case"time":return b4(t,a);case"utc":return Fq(t,a);case"symlog":return Xq(t,a);default:return kN(t,a)}}const NE=e=>e?.[0]instanceof Date;function jE(e,t,a){const s=b4(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(a)(r):`${r.toLocaleString()}`}let b6,v6;class nge{types=new Set;constructor(){if(b6)throw new Error("You can only create one instance!");b6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class age{types=new Set;constructor(){if(v6)throw new Error("You can only create one instance!");v6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const zN=new nge;zN.addType("bar");zN.addType("line");zN.addType("scatter");const Zq=new age;Zq.addType("radar");function FN(e){return zN.getTypes().has(e)}function kv(e){return FN(e.type)}const sge=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(FN).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function ys(e){return e.bandwidth!==void 0}function rge(e){return ys(e)&&e.paddingOuter!==void 0}function ige(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a?[s[1],s[0]]:s}const oge=.2,lge=.1;function Jq({scales:e,drawingArea:t,formattedSeries:a,axis:s,seriesConfig:r,axisDirection:i,zoomMap:o,domains:l}){if(s===void 0)return{axis:{},axisIds:[]};const c=sge(i,r,a,s[0].id),d={};return s.forEach(u=>{const f=u,p=e[f.id],x=o?.get(f.id),y=x?[x.start,x.end]:[0,100],N=ige(t,i,f.reverse??!1),v=!f.ignoreTooltip&&c.has(f.id),j=f.data??[];if(ys(p)){const _=i==="y"?[N[1],N[0]]:N;if(rge(p)&&Ku(f)){const L=f.categoryGapRatio??oge,T=f.barGapRatio??lge;d[f.id]=Ye({offset:0,height:0,categoryGapRatio:L,barGapRatio:T,triggerTooltip:v},f,{data:j,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?Lf(Ye({values:f.data},f.colorMap)):yf(f.colorMap))})}if(Xu(f)&&(d[f.id]=Ye({offset:0,height:0,triggerTooltip:v},f,{data:j,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?Lf(Ye({values:f.data},f.colorMap)):yf(f.colorMap))})),NE(f.data)){const L=jE(f.data,_,f.tickNumber);d[f.id].valueFormatter=f.valueFormatter??L}return}if(f.scaleType==="band"||f.scaleType==="point")return;const w=l[f.id].tickNumber,S=f,A=S.scaleType??"linear",k=Qq(w,y);d[f.id]=Ye({offset:0,height:0,triggerTooltip:v},S,{data:j,scaleType:A,scale:p,tickNumber:k,colorScale:S.colorMap&&Vq(S.colorMap),valueFormatter:f.valueFormatter??Mme(k,RN(A,N.map(_=>p.invert(_)),N))})}),{axis:d,axisIds:s.map(({id:u})=>u)}}function cge(e){return e!=null}function dge(e,t,a,s){const r=e?.length??0,i=Math.floor(t*r/100),o=Math.ceil(a*r/100);return function(c,d){return(c[s]??e?.[d])==null?!0:d>=i&&d<o}}function uge(e,t,a,s,r){const i=e[0].valueOf(),o=e[1].valueOf(),l=i+t*(o-i)/100,c=i+a*(o-i)/100;return function(u,f){const p=u[s]??r?.[f];return p==null?!0:p>=l&&p<=c}}const mge=e=>({currentAxisId:t,seriesXAxisId:a,seriesYAxisId:s,isDefaultAxis:r})=>(i,o)=>!(t===a?s:a)||r?Object.values(e??{})[0]?.(i,o)??!0:[s,a].filter(d=>d!==t).map(d=>e[d??""]).filter(cge).every(d=>d(i,o)),w6=e=>(t=[])=>t.reduce((a,s)=>{const{zoom:r,id:i,reverse:o}=s,l=QL(r,i,e,o);return l&&(a[i]=l),a},{}),fge=.2;function eG(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a.reverse?[s[1],s[0]]:s}function tG(e,t){const a=[0,1];if(Ku(e)){const i=e.categoryGapRatio??fge;return $N(t,a).paddingInner(i).paddingOuter(i/2)}if(Xu(e))return Kq(t,a);const s=e.scaleType??"linear",r=RN(s,t,a);return $me(e)&&e.constant!=null&&r.constant(e.constant),r}const nG=(e,t)=>{const a=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*a/s,i=e[1]+(100-t[1])*a/s;return[r,i]},hge=(e,t,a,s,r,i,o)=>{const l=a==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return l?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:o})??[1/0,-1/0]};function UN(e,t,a,s,r,i){const o=Object.keys(a).filter(FN);let l=[1/0,-1/0];for(const c of o){const[d,u]=hge(c,e,t,a,s,r,i);l=[Math.min(l[0],d),Math.max(l[1],u)]}return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l}const gge=(e,t,a,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&a===0)return"strict"}return"nice"};function aG(e,t,a){return RN(e??"linear",t,[0,1]).nice(a).domain()}function sG(e,t,a,s,[r,i],o,l){const c=iG(e,t,a,s,l);let d=oG(e,r,i);if(typeof c=="function"){const{min:f,max:p}=c(r.valueOf(),i.valueOf());d[0]=f,d[1]=p}const u=Yq(e,d,o);return c==="nice"&&(d=aG(e.scaleType,d,u)),d=["min"in e?e.min??d[0]:d[0],"max"in e?e.max??d[1]:d[1]],{domain:d,tickNumber:u}}function rG(e,t,a,s,[r,i],o,l){const c=iG(e,t,a,s,l);let d=oG(e,r,i);if(typeof c=="function"){const{min:u,max:f}=c(r.valueOf(),i.valueOf());d[0]=u,d[1]=f}return c==="nice"&&(d=aG(e.scaleType,d,o)),[e.min??d[0],e.max??d[1]]}function iG(e,t,a,s,r){return r?gge(e,t,a,s):e.domainLimit??"nice"}function oG(e,t,a){let s=t,r=a;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class pge{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,a){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(a>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=a}pop(){if(this.length===0)return;const t=this.ids,a=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],o=a[r];let l=0;const c=r>>1;for(;l<c;){const d=(l<<1)+1,u=d+1,f=d+(+(u<r)&+(a[u]<a[d]));if(a[f]>=o)break;t[l]=t[f],a[l]=a[f],l=f}t[l]=i,a[l]=o}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const N6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],d2=3;class C4{static from(t,a=0){if(a%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,a+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==d2)throw new Error(`Got v${i} data when expected v${d2}.`);const o=N6[r&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,a+2,1),[c]=new Uint32Array(t,a+4,1);return new C4(c,l,o,void 0,t,a)}constructor(t,a=16,s=Float64Array,r=ArrayBuffer,i,o=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.byteOffset=o;let l=t,c=l;this._levelBounds=[l*4];do l=Math.ceil(l/this.nodeSize),c+=l,this._levelBounds.push(c*4);while(l!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const d=N6.indexOf(s),u=c*4*s.BYTES_PER_ELEMENT;if(d<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,o+8,c*4),this._indices=new this.IndexArrayType(i,o+8+u,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const f=this.data=new r(8+u+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(f,8,c*4),this._indices=new this.IndexArrayType(f,8+u,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(f,0,2).set([251,(d2<<4)+d]),new Uint16Array(f,2,1)[0]=a,new Uint32Array(f,4,1)[0]=t}this._queue=new pge}add(t,a,s=t,r=a){const i=this._pos>>2,o=this._boxes;return this._indices[i]=i,o[this._pos++]=t,o[this._pos++]=a,o[this._pos++]=s,o[this._pos++]=r,t<this.minX&&(this.minX=t),a<this.minY&&(this.minY=a),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const a=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let o=0,l=0;o<this.numItems;o++){const c=t[l++],d=t[l++],u=t[l++],f=t[l++],p=Math.floor(i*((c+u)/2-this.minX)/a),x=Math.floor(i*((d+f)/2-this.minY)/s);r[o]=bge(p,x)}CE(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,l=0;o<this._levelBounds.length-1;o++){const c=this._levelBounds[o];for(;l<c;){const d=l;let u=t[l++],f=t[l++],p=t[l++],x=t[l++];for(let y=1;y<this.nodeSize&&l<c;y++)u=Math.min(u,t[l++]),f=Math.min(f,t[l++]),p=Math.max(p,t[l++]),x=Math.max(x,t[l++]);this._indices[this._pos>>2]=d,t[this._pos++]=u,t[this._pos++]=f,t[this._pos++]=p,t[this._pos++]=x}}}search(t,a,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const l=[],c=[];for(;o!==void 0;){const d=Math.min(o+this.nodeSize*4,j6(o,this._levelBounds));for(let u=o;u<d;u+=4){if(s<this._boxes[u]||r<this._boxes[u+1]||t>this._boxes[u+2]||a>this._boxes[u+3])continue;const f=this._indices[u>>2]|0;o>=this.numItems*4?l.push(f):(i===void 0||i(f))&&(c.push(f),c.push(this._boxes[u]),c.push(this._boxes[u+1]))}o=l.pop()}return c}neighbors(t,a,s=1/0,r=1/0,i,o=xge){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=this._queue,d=[];e:for(;l!==void 0;){const u=Math.min(l+this.nodeSize*4,j6(l,this._levelBounds));for(let f=l;f<u;f+=4){const p=this._indices[f>>2]|0,x=this._boxes[f],y=this._boxes[f+1],N=this._boxes[f+2],v=this._boxes[f+3],j=t<x?x-t:t>N?t-N:0,w=a<y?y-a:a>v?a-v:0,S=o(j,w);S>r||(l>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(d.push(c.pop()>>1),d.length===s))break e;l=c.length?c.pop()>>1:void 0}return c.clear(),d}}function xge(e,t){return e*e+t*t}function j6(e,t){let a=0,s=t.length-1;for(;a<s;){const r=a+s>>1;t[r]>e?s=r:a=r+1}return t[a]}function CE(e,t,a,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const o=e[s],l=e[s+r>>1],c=e[r];let d=c;const u=Math.max(o,l);c>u?d=u:u===o?d=Math.max(l,c):u===l&&(d=Math.max(o,c));let f=s-1,p=r+1;for(;;){do f++;while(e[f]<d);do p--;while(e[p]>d);if(f>=p)break;yge(e,t,a,f,p)}CE(e,t,a,s,p,i),CE(e,t,a,p+1,r,i)}function yge(e,t,a,s,r){const i=e[s];e[s]=e[r],e[r]=i;const o=4*s,l=4*r,c=t[o],d=t[o+1],u=t[o+2],f=t[o+3];t[o]=t[l],t[o+1]=t[l+1],t[o+2]=t[l+2],t[o+3]=t[l+3],t[l]=c,t[l+1]=d,t[l+2]=u,t[l+3]=f;const p=a[s];a[s]=a[r],a[r]=p}function bge(e,t){let a=e^t,s=65535^a,r=65535^(e|t),i=e&(t^65535),o=a|s>>1,l=a>>1^a,c=r>>1^s&i>>1^r,d=a&r>>1^i>>1^i;a=o,s=l,r=c,i=d,o=a&a>>2^s&s>>2,l=a&s>>2^s&(a^s)>>2,c^=a&r>>2^s&i>>2,d^=s&r>>2^(a^s)&i>>2,a=o,s=l,r=c,i=d,o=a&a>>4^s&s>>4,l=a&s>>4^s&(a^s)>>4,c^=a&r>>4^s&i>>4,d^=s&r>>4^(a^s)&i>>4,a=o,s=l,r=c,i=d,c^=a&r>>8^s&i>>8,d^=s&r>>8^(a^s)&i>>8,a=c^c>>1,s=d^d>>1;let u=e^t,f=s|65535^(u|a);return u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,(f<<1|u)>>>0}const vge=e=>{const t=new Map;return e.forEach(a=>{t.set(a.axisId,a)}),t},lG=e=>e.zoom,wge=Ct(Wo,ec,(e,t)=>e?.some(a=>!!a.zoom)||t?.some(a=>!!a.zoom)||!1),cG=Ct(lG,e=>e?.isInteracting),Cd=Oa(lG,function(t){return t?.zoomData&&vge(t?.zoomData)}),C6=Ct(Cd,(e,t)=>e?.get(t)),Nx=Oa(Wo,ec,function(t,a){return Ye({},w6("x")(t),w6("y")(a))});Ct(Nx,(e,t)=>e[t]);const Nge=Ct(br,function(t){return j4(t.width)}),jge=Ct(br,function(t){return j4(t.height)}),S4=Oa(Wo,pa,qr,_N,Nge,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(Ku(u)||Xu(u)){l[u.id]={domain:u.data};return}const f=UN(u,"x",s,d,a);l[u.id]=sG(u,"x",d,a,f,i,r)}),{axes:t,domains:l}}),_4=Oa(ec,pa,qr,_N,jge,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(Ku(u)||Xu(u)){l[u.id]={domain:u.data};return}const f=UN(u,"y",s,d,a);l[u.id]=sG(u,"y",d,a,f,i,r)}),{axes:t,domains:l}}),dG=Oa(Cd,Nx,S4,_4,function(t,a,{axes:s,domains:r},{axes:i,domains:o}){if(!t||!a)return;let l=!1;const c={},d=[...s??[],...i??[]];for(let u=0;u<d.length;u+=1){const f=d[u];if(!a[f.id]||a[f.id].filterMode!=="discard")continue;const p=t.get(f.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=u<(s?.length??0)?"x":"y";if(f.scaleType==="band"||f.scaleType==="point")c[f.id]=dge(f.data,p.start,p.end,x);else{const{domain:y}=x==="x"?r[f.id]:o[f.id];c[f.id]=uge(y,p.start,p.end,x,f.data)}l=!0}if(l)return mge(c)}),Cge=Oa(pa,qr,Cd,Nx,dG,_N,S4,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,f)=>{const p=c[u.id].domain;if(Ku(u)||Xu(u)){d[u.id]=p;return}const x=s?.get(u.id),y=r?.[u.id],N=x===void 0&&!y?i:void 0;if(!N){d[u.id]=p;return}const v=c[u.id].tickNumber,j=UN(u,"x",a,f,t,N);d[u.id]=rG(u,"x",f,t,j,v,o)}),d}),Sge=Oa(pa,qr,Cd,Nx,dG,_N,_4,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,f)=>{const p=c[u.id].domain;if(Ku(u)||Xu(u)){d[u.id]=p;return}const x=s?.get(u.id),y=r?.[u.id],N=x===void 0&&!y?i:void 0;if(!N){d[u.id]=p;return}const v=c[u.id].tickNumber,j=UN(u,"y",a,f,t,N);d[u.id]=rG(u,"y",f,t,j,v,o)}),d}),uG=Oa(Wo,Cge,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=tG(i,o)}),s}),mG=Oa(ec,Sge,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=tG(i,o)}),s}),_ge=Oa(Wo,uG,br,Cd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=eG(s,"x",l),f=a[l.id].copy(),p=nG(u,d);f.range(p),i[l.id]=f}),i}),Age=Oa(ec,mG,br,Cd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=eG(s,"y",l),f=a[l.id].copy(),p=ys(f)?u.reverse():u,x=nG(p,d);f.range(x),i[l.id]=f}),i}),Ks=Oa(br,pa,qr,Cd,S4,_ge,function(t,a,s,r,{axes:i,domains:o},l){return Jq({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:o})}),Xs=Oa(br,pa,qr,Cd,_4,Age,function(t,a,s,r,{axes:i,domains:o},l){return Jq({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:o})});Ct(Ks,Xs,(e,t,a)=>e?.axis[a]??t?.axis[a]);Ct(Wo,ec,(e,t,a)=>{const s=e?.find(r=>r.id===a)??t?.find(r=>r.id===a)??null;if(s)return s});const Tge=Ct(Wo,e=>e[0].id),Ege=Ct(ec,e=>e[0].id),kge=new Map,Lge=()=>kge,Pge=Oa(pa,uG,mG,Tge,Ege,function(t,a,s,r,i){const o=t.scatter,l=new Map;return o&&o.seriesOrder.forEach(c=>{const{data:d,xAxisId:u=r,yAxisId:f=i}=o.series[c],p=new C4(d.length),x=a[u],y=s[f];for(const N of d)p.add(x(N.x),y(N.y));p.finish(),l.set(c,p)}),l});function Ym(e){return e instanceof Date?e.getTime():e}function Pf(e,t){const{scale:a,data:s,reverse:r}=e;if(!ys(a)){const o=a.invert(t);if(s===void 0)return-1;const l=Ym(o);return s?.findIndex((d,u)=>{const f=Ym(d);return f>l&&(u===0||Math.abs(l-f)<=Math.abs(l-Ym(s[u-1])))||f<=l&&(u===s.length-1||Math.abs(Ym(o)-f)<Math.abs(Ym(o)-Ym(s[u+1])))})}const i=a.bandwidth()===0?Math.floor((t-Math.min(...a.range())+a.step()/2)/a.step()):Math.floor((t-Math.min(...a.range()))/a.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function S6(e,t,a,s){if(!ys(e)){if(s===null){const r=e.invert(a);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function Sp(e,t){const a=e.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a.matrixTransform(e.getScreenCTM().inverse())}const Dge=Object.is;function fG(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let a=0,s=0;for(const r in e)if(a+=1,!Dge(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return a===s}const jx=({store:e})=>{const t=hs(function(){e.set("interaction",Ye({},e.state.interaction,{pointer:null,item:null}))}),a=hs(function(o){const l=e.state.interaction.item;if(!o){l!==null&&e.set("interaction",Ye({},e.state.interaction,{item:null}));return}l===null||Object.keys(o).some(c=>o[c]!==l[c])||e.set("interaction",Ye({},e.state.interaction,{item:null}))}),s=hs(function(o,l){fG(e.state.interaction.item,o)||e.set("interaction",Ye({},e.state.interaction,{lastUpdate:l.interaction,item:o}))}),r=hs(function(o){e.set("interaction",Ye({},e.state.interaction,{pointer:o,lastUpdate:o!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:a,setPointerCoordinate:r}}};jx.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});jx.params={};const BN=e=>e.interaction,Oge=Ct(BN,e=>e!==void 0),hG=Ct(BN,e=>e?.item??null),gG=Ct(BN,e=>e?.pointer??null),Cx=Ct(gG,e=>e&&e.x),Sx=Ct(gG,e=>e&&e.y),Mge=Ct(hG,e=>e!==null),_x=Ct(BN,e=>e?.lastUpdate),Ige=new Set(["bar","line","scatter","pie"]);function pG(e){return Ige.has(e)}function xG(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):-1,o=s.filter(pG);for(let u=0;u<o.length;u+=1){const f=(r+u)%o.length,p=e[o[f]],x=u===0?i+1:0;for(let y=x;y<p.seriesOrder.length;y+=1)if(p.series[p.seriesOrder[y]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[y]}}const l=r,c=e[o[l]],d=i;for(let u=0;u<d;u+=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function yG(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):1,o=s.filter(pG);for(let u=0;u<o.length;u+=1){const f=(o.length+r-u)%o.length,p=e[o[f]],x=u===0?i+1:p.seriesOrder.length;for(let y=1;y<x;y+=1){const N=(p.seriesOrder.length+i-y)%p.seriesOrder.length;if(p.series[p.seriesOrder[N]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[N]}}}const l=r,c=e[o[l]],d=c.seriesOrder;for(let u=d.length-1;u>i;u-=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function bG(e,t,a){if(t==="sankey")return!1;const s=e[t]?.series[a]?.data;return s&&s.length>0}function $ge(e){const t=pa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!bG(t,a,s)){const i=xG(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function Rge(e){const t=pa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!bG(t,a,s)){const i=yG(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function zge(e){const t=pa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=xG(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function Fge(e){const t=pa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=yG(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const HN=({params:e,store:t,svgRef:a})=>{const s=hs(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",Ye({},t.state.keyboardNavigation,{item:null}))});return h.useEffect(()=>{const r=a.current;if(!r||!e.enableKeyboardNavigation)return;function i(o){let l=t.state.keyboardNavigation.item;switch(o.key){case"ArrowRight":l=$ge(t.state);break;case"ArrowLeft":l=Rge(t.state);break;case"ArrowDown":{l=Fge(t.state);break}case"ArrowUp":{l=zge(t.state);break}}l!==t.state.keyboardNavigation.item&&(o.preventDefault(),t.update(Ye({},t.state.highlight&&{highlight:Ye({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:Ye({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:Ye({},t.state.keyboardNavigation,{item:l})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[a,s,e.enableKeyboardNavigation,t]),ss(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",Ye({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};HN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});HN.params={enableKeyboardNavigation:!0};const em=e=>e.keyboardNavigation;Ct(em,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const Uge=Ct(em,e=>e?.item!=null),qN=Ct(em,e=>e?.item?.type),GN=Ct(em,e=>e?.item?.seriesId),WN=Ct(em,e=>e?.item?.dataIndex),Bge=Ct(em,e=>!!e?.enableKeyboardNavigation),vG=e=>(t,a,s,r,i)=>{if(t===void 0||a===void 0||s===void 0)return;const o=i[t]?.series[a];if(!o)return;let l=e==="x"?"xAxisId"in o&&o.xAxisId:"yAxisId"in o&&o.yAxisId;return(l===void 0||l===!1)&&(l=r.axisIds[0]),{axisId:l,dataIndex:s}},Hge=Ct(qN,GN,WN,Ks,pa,vG("x")),qge=Ct(qN,GN,WN,Xs,pa,vG("y")),wG=Ct(em,function(t){if(t?.item==null)return null;const{type:a,seriesId:s}=t.item;return a===void 0||s===void 0?null:t.item}),Gge=Ct(qN,GN,WN,function(t,a,s){return a!==void 0&&s!==void 0}),NG=Ct(_x,hG,wG,(e,t,a)=>e==="keyboard"?a:t??null),Wge=Ct(_x,Mge,Gge,(e,t,a)=>e==="keyboard"?a:t),Vge=Ct(NG,br,qr,Ks,Xs,pa,function(t,a,s,{axis:r,axisIds:i},{axis:o,axisIds:l},c,d="top"){if(!t)return null;const u=c[t.type]?.series[t.seriesId];if(u){const f={},p=kv(u)?u.xAxisId??i[0]:void 0,x=kv(u)?u.yAxisId??l[0]:void 0;return p!==void 0&&(f.x=r[p]),x!==void 0&&(f.y=o[x]),s[u.type].tooltipItemPositionGetter?.({series:c,drawingArea:a,axesConfig:f,identifier:t,placement:d})??null}return null});function bf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!bf(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const o=r[i];if(!bf(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e),s=a.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(let r=0;r<s;r+=1){const i=a[r];if(!bf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function SE(e,t,a=t.axisIds[0]){return Array.isArray(a)?a.map(s=>Pf(t.axis[s],e)):Pf(t.axis[a],e)}const jG=(e,t,a)=>{if(e===null)return null;const s=SE(e,t,a);return s===-1?null:s},A4=Ct(Cx,Ks,jG),T4=Ct(Sx,Xs,jG),Yge=Ct(Cx,Sx,Ks,Xs,(e,t,a,s)=>[...e===null?[]:a.axisIds.map(r=>({axisId:r,dataIndex:SE(e,a,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:SE(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function CG(e,t,a,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const o=t.axis[r];return S6(o.scale,o.data,e,a[i])}):S6(t.axis[s].scale,t.axis[s].data,e,a)}const Qge=Ct(Cx,Ks,A4,(e,t,a,s)=>e===null||t.axisIds.length===0?null:CG(e,t,a,s)),Kge=Ct(Sx,Xs,T4,(e,t,a,s)=>e===null||t.axisIds.length===0?null:CG(e,t,a,s)),SG=[],_G=wN({memoizeOptions:{resultEqualityCheck:bf}})(Cx,Ks,(e,t)=>e===null?SG:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Pf(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),AG=wN({memoizeOptions:{resultEqualityCheck:bf}})(Sx,Xs,(e,t)=>e===null?SG:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Pf(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),Xge=Ct(_G,AG,(e,t)=>e.length>0||t.length>0);function Zge(e){return e.setPointerCoordinate!==void 0}const th=({params:e,store:t,seriesConfig:a,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:o,dataset:l,onHighlightedAxisChange:c}=e,d=Ft(t,br),u=Ft(t,pa),f=Ft(t,Oge),{axis:p,axisIds:x}=Ft(t,Ks),{axis:y,axisIds:N}=Ft(t,Xs);dq({controlled:e.highlightedAxis}),ss(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const v=h.useRef(!0);h.useEffect(()=>{if(v.current){v.current=!1;return}t.set("cartesianAxis",{x:fq(i,l),y:hq(o,l)})},[a,d,i,o,l,t]);const j=x[0],w=N[0];Uue(t,Yge,(A,k)=>{if(c&&!Object.is(A,k)){if(A.length!==k.length){c(k);return}A?.some(({axisId:_,dataIndex:L},T)=>k[T].axisId!==_||k[T].dataIndex!==L)&&c(k)}});const S=Zge(r);return h.useEffect(()=>{const A=s.current;if(!f||!S||!A||e.disableAxisListener)return()=>{};const k=r.addInteractionListener("moveEnd",O=>{O.detail.activeGestures.pan||r.cleanInteraction()}),_=r.addInteractionListener("panEnd",O=>{O.detail.activeGestures.move||r.cleanInteraction()}),L=r.addInteractionListener("quickPressEnd",O=>{!O.detail.activeGestures.move&&!O.detail.activeGestures.pan&&r.cleanInteraction()}),T=O=>{const I=O.detail.srcEvent,B=O.detail.target,ee=Sp(A,I);if(O.detail.srcEvent.buttons>=1&&B?.hasPointerCapture(O.detail.srcEvent.pointerId)&&!B?.closest("[data-charts-zoom-slider]")&&B?.releasePointerCapture(O.detail.srcEvent.pointerId),!r.isPointInside(ee.x,ee.y,B)){r.cleanInteraction?.();return}r.setPointerCoordinate(ee)},M=r.addInteractionListener("move",T),R=r.addInteractionListener("pan",T),z=r.addInteractionListener("quickPress",T);return()=>{M.cleanup(),k.cleanup(),R.cleanup(),_.cleanup(),z.cleanup(),L.cleanup()}},[s,t,p,j,y,w,r,e.disableAxisListener,f,S]),h.useEffect(()=>{const A=s.current,k=e.onAxisClick;if(A===null||!k)return()=>{};const _=r.addInteractionListener("tap",L=>{let T=null,M=!1;const R=Sp(A,L.detail.srcEvent),z=Pf(p[j],R.x);M=z!==-1,T=M?z:Pf(y[w],R.y);const O=M?x[0]:N[0];if(T==null||T===-1)return;const I=(M?p:y)[O].data[T],B={};Object.keys(u).filter(ee=>["bar","line"].includes(ee)).forEach(ee=>{u[ee]?.seriesOrder.forEach(Q=>{const te=u[ee].series[Q],W=te.xAxisId,ae=te.yAxisId,Ee=M?W:ae;(Ee===void 0||Ee===O)&&(B[Q]=te.data[T])})}),k(L.detail.srcEvent,{dataIndex:T,axisValue:I,seriesValues:B})});return()=>{_.cleanup()}},[e.onAxisClick,u,s,p,x,y,N,j,w,r]),{}};th.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};th.getDefaultizedParams=({params:e})=>Ye({},e,{colors:e.colors??iq,theme:e.theme??"light",defaultizedXAxis:fq(e.xAxis,e.dataset),defaultizedYAxis:hq(e.yAxis,e.dataset)});th.getInitialState=e=>Ye({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Vo=e=>e.brush;Ct(Vo,e=>e?.start);Ct(Vo,e=>e?.current);const Jge=Ct(Vo,e=>e?.start?.x??null),epe=Ct(Vo,e=>e?.start?.y??null),tpe=Ct(Vo,e=>e?.current?.x??null),npe=Ct(Vo,e=>e?.current?.y??null);Ct(Jge,epe,tpe,npe,(e,t,a,s)=>e===null||t===null||a===null||s===null?null:{start:{x:e,y:t},current:{x:a,y:s}});const ape=Ct(pa,e=>{let t=!1,a=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(a=!0)}),a?"xy":t?"y":"x"}),spe=Ct(Nx,function(t){let a=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(a=!0)}),a&&s?"xy":s?"y":a?"x":null});Ct(ape,spe,(e,t)=>t??e);const TG=Ct(Vo,e=>e?.enabled||e?.isZoomBrushEnabled),EG=Ct(TG,Vo,(e,t)=>e&&t?.start!==null&&t?.current!==null),VN=Ct(Vo,EG,(e,t)=>t&&e?.preventHighlight),rpe=Ct(Vo,EG,(e,t)=>t&&e?.preventTooltip),Ax=({store:e,svgRef:t,instance:a,params:s})=>{const r=Ft(e,TG);ss(()=>{e.set("brush",Ye({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=hs(function(d){e.set("brush",Ye({},e.state.brush,{start:e.state.brush.start??d,current:d}))}),o=hs(function(){e.set("brush",Ye({},e.state.brush,{start:null,current:null}))}),l=hs(function(d){e.state.brush.isZoomBrushEnabled!==d&&e.set("brush",Ye({},e.state.brush,{isZoomBrushEnabled:d}))});return h.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const d=N=>{if(N.detail.target?.closest("[data-charts-zoom-slider]"))return;const v=Sp(c,{clientX:N.detail.initialCentroid.x,clientY:N.detail.initialCentroid.y});i(v)},u=N=>{const v=Sp(c,{clientX:N.detail.centroid.x,clientY:N.detail.centroid.y});i(v)},f=a.addInteractionListener("brushStart",d),p=a.addInteractionListener("brush",u),x=a.addInteractionListener("brushCancel",o),y=a.addInteractionListener("brushEnd",o);return()=>{f.cleanup(),p.cleanup(),y.cleanup(),x.cleanup()}},[t,a,e,o,i,r]),{instance:{setBrushCoordinates:i,clearBrush:o,setZoomBrushEnabled:l}}};Ax.params={brushConfig:!0};Ax.getDefaultizedParams=({params:e})=>Ye({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});Ax.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const nh=e=>e.controlledCartesianAxisHighlight,kG=(e,t,a,s)=>s?[]:a!==void 0?a.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],LG=Oa(A4,Ks,nh,VN,kG);Oa(T4,Xs,nh,VN,kG);const PG=(e,t,a,s,r,i,o)=>{if(o)return[];if(s!==void 0)return s.map(u=>Ye({},u,{value:a.axis[u.axisId]?.data?.[u.dataIndex]})).filter(({value:u})=>u!==void 0);const l=t!==null&&{axisId:a.axisIds[0],dataIndex:e,value:t},c=r&&a.axis[r.axisId]?.data?.[r.dataIndex],d=r&&c!=null&&Ye({},r,{value:c});if(i==="pointer"){if(l)return[l];if(d)return[d]}if(i==="keyboard"){if(d)return[d];if(l)return[l]}return[]},ipe=Ct(A4,Qge,Ks,nh,Hge,_x,VN,PG),ope=Ct(T4,Kge,Xs,nh,qge,_x,VN,PG),DG=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);Ct(nh,Ks,DG);Ct(nh,Xs,DG);function _6(e,t){return e.id!==void 0?e:Ye({id:t},e)}function A6(e){return e.colorMap?Ye({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?Lf(Ye({values:e.data},e.colorMap)):yf(e.colorMap.type==="continuous"?Ye({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function OG(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const a={},s=[];return e.forEach((r,i)=>{const o=r.dataKey,l=r.id??`defaultized-z-axis-${i}`;if(o===void 0||r.data!==void 0){a[l]=A6(_6(r,l)),s.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");a[l]=A6(_6(Ye({},r,{data:t.map(c=>c[o])}),l)),s.push(l)}),{axis:a,axisIds:s}}const Tx=({params:e,store:t})=>{const{zAxis:a,dataset:s}=e,r=h.useRef(!0);return h.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",OG(a,s))},[a,s,t]),{}};Tx.params={zAxis:!0,dataset:!0};Tx.getInitialState=e=>({zAxis:OG(e.zAxis,e.dataset)});const lpe=e=>e,cpe=Ct(lpe,e=>e.zAxis),Ex=({store:e,params:t})=>{dq({controlled:t.highlightedItem}),ss(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",Ye({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const a=hs(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=hs(r=>{const i=e.getSnapshot().highlight;i.isControlled||fG(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:a,setHighlight:s}}};Ex.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});Ex.params={highlightedItem:!0,onHighlightChange:!0};function Lv(e){let t=1/0,a=-1/0;for(const s of e??[])s<t&&(t=s),s>a&&(a=s);return[t,a]}const T6=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},MG=e=>{const{axis:t,getFilters:a,isDefaultAxis:s}=e,r=a?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((o,l)=>r({x:null,y:null},l)):t.data;return Lv(i??[])},IG=e=>t=>{const{series:a,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(a).filter(o=>{const l=e==="x"?a[o].xAxisId:a[o].yAxisId;return l===s.id||i&&l===void 0}).reduce((o,l)=>{const{stackedData:c}=a[l],d=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:a[l].xAxisId,seriesYAxisId:a[l].yAxisId}),[u,f]=c?.reduce((p,x,y)=>d&&(!d(T6(x[0],e),y)||!d(T6(x[1],e),y))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(u,o[0]),Math.max(f,o[1])]},[1/0,-1/0])},dpe=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?IG("x")(e):MG(e),upe=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?MG(e):IG("y")(e);function bn(e){return function(){return e}}const $G=Math.cos,Pv=Math.sin,eo=Math.sqrt,E6=1e-12,Dv=Math.PI,vu=2*Dv,_E=Math.PI,AE=2*_E,Zd=1e-6,mpe=AE-Zd;function RG(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function fpe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RG;const a=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*a)/a+s[r]}}class hpe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RG:fpe(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,s,r){this._append`Q${+t},${+a},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,a,s,r,i,o){this._append`C${+t},${+a},${+s},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,a,s,r,i){if(t=+t,a=+a,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=r-a,u=o-t,f=l-a,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(p>Zd)if(!(Math.abs(f*c-d*u)>Zd)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let x=s-o,y=r-l,N=c*c+d*d,v=x*x+y*y,j=Math.sqrt(N),w=Math.sqrt(p),S=i*Math.tan((_E-Math.acos((N+p-v)/(2*j*w)))/2),A=S/w,k=S/j;Math.abs(A-1)>Zd&&this._append`L${t+A*u},${a+A*f}`,this._append`A${i},${i},0,0,${+(f*x>u*y)},${this._x1=t+k*c},${this._y1=a+k*d}`}}arc(t,a,s,r,i,o){if(t=+t,a=+a,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(r),c=s*Math.sin(r),d=t+l,u=a+c,f=1^o,p=o?r-i:i-r;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Zd||Math.abs(this._y1-u)>Zd)&&this._append`L${d},${u}`,s&&(p<0&&(p=p%AE+AE),p>mpe?this._append`A${s},${s},0,1,${f},${t-l},${a-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:p>Zd&&this._append`A${s},${s},0,${+(p>=_E)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=a+s*Math.sin(i)}`)}rect(t,a,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function E4(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);t=s}return e},()=>new hpe(t)}function YN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zG(e){this._context=e}zG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function kx(e){return new zG(e)}function FG(e){return e[0]}function UG(e){return e[1]}function k4(e,t){var a=bn(!0),s=null,r=kx,i=null,o=E4(l);e=typeof e=="function"?e:e===void 0?FG:bn(e),t=typeof t=="function"?t:t===void 0?UG:bn(t);function l(c){var d,u=(c=YN(c)).length,f,p=!1,x;for(s==null&&(i=r(x=o())),d=0;d<=u;++d)!(d<u&&a(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:bn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:bn(+c),l):t},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:bn(!!c),l):a},l.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),l):r},l.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),l):s},l}function Fg(e,t,a){var s=null,r=bn(!0),i=null,o=kx,l=null,c=E4(d);e=typeof e=="function"?e:e===void 0?FG:bn(+e),t=typeof t=="function"?t:bn(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?UG:bn(+a);function d(f){var p,x,y,N=(f=YN(f)).length,v,j=!1,w,S=new Array(N),A=new Array(N);for(i==null&&(l=o(w=c())),p=0;p<=N;++p){if(!(p<N&&r(v=f[p],p,f))===j)if(j=!j)x=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=p-1;y>=x;--y)l.point(S[y],A[y]);l.lineEnd(),l.areaEnd()}j&&(S[p]=+e(v,p,f),A[p]=+t(v,p,f),l.point(s?+s(v,p,f):S[p],a?+a(v,p,f):A[p]))}if(w)return l=null,w+""||null}function u(){return k4().defined(r).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:bn(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:bn(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:bn(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:bn(+f),a=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:bn(+f),d):t},d.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:bn(+f),d):a},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(a)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:bn(!!f),d):r},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}function gpe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function ppe(e){return e}function xpe(){var e=ppe,t=gpe,a=null,s=bn(0),r=bn(vu),i=bn(0);function o(l){var c,d=(l=YN(l)).length,u,f,p=0,x=new Array(d),y=new Array(d),N=+s.apply(this,arguments),v=Math.min(vu,Math.max(-vu,r.apply(this,arguments)-N)),j,w=Math.min(Math.abs(v)/d,i.apply(this,arguments)),S=w*(v<0?-1:1),A;for(c=0;c<d;++c)(A=y[x[c]=c]=+e(l[c],c,l))>0&&(p+=A);for(t!=null?x.sort(function(k,_){return t(y[k],y[_])}):a!=null&&x.sort(function(k,_){return a(l[k],l[_])}),c=0,f=p?(v-d*S)/p:0;c<d;++c,N=j)u=x[c],A=y[u],j=N+(A>0?A*f:0)+S,y[u]={data:l[u],index:c,value:A,startAngle:N,endAngle:j,padAngle:w};return y}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:bn(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,a=null,o):t},o.sort=function(l){return arguments.length?(a=l,t=null,o):a},o.startAngle=function(l){return arguments.length?(s=typeof l=="function"?l:bn(+l),o):s},o.endAngle=function(l){return arguments.length?(r=typeof l=="function"?l:bn(+l),o):r},o.padAngle=function(l){return arguments.length?(i=typeof l=="function"?l:bn(+l),o):i},o}class BG{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function HG(e){return new BG(e,!0)}function qG(e){return new BG(e,!1)}const QN={draw(e,t){const a=eo(t/Dv);e.moveTo(a,0),e.arc(0,0,a,0,vu)}},GG={draw(e,t){const a=eo(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},WG=eo(1/3),ype=WG*2,VG={draw(e,t){const a=eo(t/ype),s=a*WG;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},YG={draw(e,t){const a=eo(t),s=-a/2;e.rect(s,s,a,a)}},bpe=.8908130915292852,QG=Pv(Dv/10)/Pv(7*Dv/10),vpe=Pv(vu/10)*QG,wpe=-$G(vu/10)*QG,KG={draw(e,t){const a=eo(t*bpe),s=vpe*a,r=wpe*a;e.moveTo(0,-a),e.lineTo(s,r);for(let i=1;i<5;++i){const o=vu*i/5,l=$G(o),c=Pv(o);e.lineTo(c*a,-l*a),e.lineTo(l*s-c*r,c*s+l*r)}e.closePath()}},u2=eo(3),XG={draw(e,t){const a=-eo(t/(u2*3));e.moveTo(0,a*2),e.lineTo(-u2*a,-a),e.lineTo(u2*a,-a),e.closePath()}},ni=-.5,ai=eo(3)/2,TE=1/eo(12),Npe=(TE/2+1)*3,ZG={draw(e,t){const a=eo(t/Npe),s=a/2,r=a*TE,i=s,o=a*TE+a,l=-i,c=o;e.moveTo(s,r),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ni*s-ai*r,ai*s+ni*r),e.lineTo(ni*i-ai*o,ai*i+ni*o),e.lineTo(ni*l-ai*c,ai*l+ni*c),e.lineTo(ni*s+ai*r,ni*r-ai*s),e.lineTo(ni*i+ai*o,ni*o-ai*i),e.lineTo(ni*l+ai*c,ni*c-ai*l),e.closePath()}},JG=[QN,GG,VG,YG,KG,XG,ZG];function L4(e,t){let a=null,s=E4(r);e=typeof e=="function"?e:bn(e||QN),t=typeof t=="function"?t:bn(t===void 0?64:+t);function r(){let i;if(a||(a=i=s()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),i)return a=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:bn(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:bn(+i),r):t},r.context=function(i){return arguments.length?(a=i??null,r):a},r}function Ov(){}function Mv(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function eW(e){this._context=e}eW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jpe(e){return new eW(e)}function tW(e){this._context=e}tW.prototype={areaStart:Ov,areaEnd:Ov,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Cpe(e){return new tW(e)}function nW(e){this._context=e}nW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:Mv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Spe(e){return new nW(e)}function k6(e,t,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function P4(e,t){this._context=e,this._k=(1-t)/6}P4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:k6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:k6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function a(s){return new P4(s,t)}return a.tension=function(s){return e(+s)},a})(0);function _pe(e,t,a){var s=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>E6){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>E6){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*d+e._y1*e._l23_2a-a*e._l12_2a)/u}e._context.bezierCurveTo(s,r,i,o,e._x2,e._y2)}function aW(e,t){this._context=e,this._alpha=t}aW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:_pe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ape=(function e(t){function a(s){return t?new aW(s,t):new P4(s,0)}return a.alpha=function(s){return e(+s)},a})(.5);function sW(e){this._context=e}sW.prototype={areaStart:Ov,areaEnd:Ov,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Tpe(e){return new sW(e)}function L6(e){return e<0?-1:1}function P6(e,t,a){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(a-e._y1)/(r||s<0&&-0),l=(i*r+o*s)/(s+r);return(L6(i)+L6(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function D6(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function m2(e,t,a){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,r+l*t,i-l,o-l*a,i,o)}function Iv(e){this._context=e}Iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:m2(this,this._t0,D6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,m2(this,D6(this,a=P6(this,e,t)),a);break;default:m2(this,this._t0,a=P6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function rW(e){this._context=new iW(e)}(rW.prototype=Object.create(Iv.prototype)).point=function(e,t){Iv.prototype.point.call(this,t,e)};function iW(e){this._context=e}iW.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,s,r,i){this._context.bezierCurveTo(t,e,s,a,i,r)}};function EE(e){return new Iv(e)}function oW(e){return new rW(e)}function lW(e){this._context=e}lW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var s=O6(e),r=O6(t),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[o],t[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function O6(e){var t,a=e.length-1,s,r=new Array(a),i=new Array(a),o=new Array(a);for(r[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)s=r[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(r[a-1]=o[a-1]/i[a-1],t=a-2;t>=0;--t)r[t]=(o[t]-r[t+1])/i[t];for(i[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function cW(e){return new lW(e)}function KN(e,t){this._context=e,this._t=t}KN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function dW(e){return new KN(e,.5)}function uW(e){return new KN(e,0)}function mW(e){return new KN(e,1)}function dd(e,t){if((o=e.length)>1)for(var a=1,s,r,i=e[t[0]],o,l=i.length;a<o;++a)for(r=i,i=e[t[a]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function Du(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function Epe(e,t){return e[t]}function kpe(e){const t=[];return t.key=e,t}function D4(){var e=bn([]),t=Du,a=dd,s=Epe;function r(i){var o=Array.from(e.apply(this,arguments),kpe),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(f,o[l].key,d,i)]).data=f;for(l=0,u=YN(t(o));l<c;++l)o[u[l]].index=l;return a(o,u),o}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:bn(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:bn(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?Du:typeof i=="function"?i:bn(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(a=i??dd,r):a},r}function fW(e,t){if((s=e.length)>0){for(var a,s,r=0,i=e[0].length,o;r<i;++r){for(o=a=0;a<s;++a)o+=e[a][r][1]||0;if(o)for(a=0;a<s;++a)e[a][r][1]/=o}dd(e,t)}}function Lpe(e,t){if((c=e.length)>0)for(var a,s=0,r,i,o,l,c,d=e[t[0]].length;s<d;++s)for(o=l=0,a=0;a<c;++a)(i=(r=e[t[a]][s])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=l,r[0]=l+=i):(r[0]=0,r[1]=i)}function hW(e,t){if((r=e.length)>0){for(var a=0,s=e[t[0]],r,i=s.length;a<i;++a){for(var o=0,l=0;o<r;++o)l+=e[o][a][1]||0;s[a][1]+=s[a][0]=-l/2}dd(e,t)}}function gW(e,t){if(!(!((o=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var a=0,s=1,r,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[s][1]||0,p=u[s-1][1]||0,x=(f-p)/2,y=0;y<l;++y){var N=e[t[y]],v=N[s][1]||0,j=N[s-1][1]||0;x+=v-j}c+=f,d+=x*f}r[s-1][1]+=r[s-1][0]=a,c&&(a-=d/c)}r[s-1][1]+=r[s-1][0]=a,dd(e,t)}}function pW(e){var t=e.map(Ppe);return Du(e).sort(function(a,s){return t[a]-t[s]})}function Ppe(e){for(var t=-1,a=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,a=t);return a}function xW(e){var t=e.map(yW);return Du(e).sort(function(a,s){return t[a]-t[s]})}function yW(e){for(var t=0,a=-1,s=e.length,r;++a<s;)(r=+e[a][1])&&(t+=r);return t}function Dpe(e){return xW(e).reverse()}function Ope(e){var t=e.length,a,s,r=e.map(yW),i=pW(e),o=0,l=0,c=[],d=[];for(a=0;a<t;++a)s=i[a],o<l?(o+=r[s],c.push(s)):(l+=r[s],d.push(s));return d.reverse().concat(c)}function Mpe(e){return Du(e).reverse()}const f2={appearance:pW,ascending:xW,descending:Dpe,insideOut:Ope,none:Du,reverse:Mpe},h2={expand:fW,diverging:Lpe,none:dd,silhouette:hW,wiggle:gW},bW=e=>{const{series:t,seriesOrder:a,defaultStrategy:s}=e,r=[],i={};return a.forEach(o=>{const{stack:l,stackOrder:c,stackOffset:d}=t[o];l===void 0?r.push({ids:[o],stackingOrder:f2.none,stackingOffset:h2.none}):i[l]===void 0?(i[l]=r.length,r.push({ids:[o],stackingOrder:f2[c??s?.stackOrder??"none"],stackingOffset:h2[d??s?.stackOffset??"diverging"]})):(r[i[l]].ids.push(o),c!==void 0&&(r[i[l]].stackingOrder=f2[c]),d!==void 0&&(r[i[l]].stackingOffset=h2[d]))}),r},Ipe=e=>e==null?"":e.toLocaleString(),$pe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=bW(e),i=t??[];a.forEach(l=>{const c=s[l].data;if(c!==void 0)c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return r.forEach(l=>{const{ids:c,stackingOffset:d,stackingOrder:u}=l,f=D4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const y=s[p].dataKey;o[p]=Ye({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??Ipe},s[p],{data:y?t.map(N=>{const v=N[y];return typeof v=="number"?v:null}):s[p].data,stackedData:f[x].map(([N,v])=>[N,v])})})}),{seriesOrder:a,stackingGroups:r,series:o}};function Vi(e,t){return typeof e=="function"?e(t):e}const Rpe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])};function O4(e){return e.colorGetter?e.colorGetter:()=>e.color}const zpe=(e,t,a)=>{const s=e.layout==="vertical",r=s?t?.colorScale:a?.colorScale,i=s?a?.colorScale:t?.colorScale,o=s?t?.data:a?.data,l=O4(e);return i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d);return u===null?l({value:d,dataIndex:c}):u}:r&&o?c=>{if(c===void 0)return e.color;const d=o[c],u=d===null?l({value:d,dataIndex:c}):r(d);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},Fpe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Upe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Vn(){const e=Gr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function Ai(){const e=Vn();return Ft(e,br)}function XN(){const e=Vn();return Ft(e,dme)}function M4(e){return Zq.getTypes().has(e)}const Bpe=(e,t,a,s,r,i,o)=>{const l=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=o[t]?.series??{},[d,u]=l?.({series:c,axis:a,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[f,p]=e;return[Math.min(d,f),Math.max(u,p)]},Hpe=(e,t,a,s,r)=>{const o=Object.keys(a).filter(M4).reduce((l,c)=>Bpe(l,c,e,t,a,s,r),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Qc=(e,t)=>e===void 0?t:Math.PI*e/180,qpe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(M4).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function Gpe(e,t,a){if(t==="rotation"){if(a.scaleType==="point"){const s=[Qc(a.startAngle,0),Qc(a.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/a.data.length),s}return[Qc(a.startAngle,0),Qc(a.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const Wpe=.2,Vpe=.1;function vW({drawingArea:e,formattedSeries:t,axis:a,seriesConfig:s,axisDirection:r}){if(a===void 0)return{axis:{},axisIds:[]};const i=qpe(r,s,t,a[0].id),o={};return a.forEach((l,c)=>{const d=l,u=Gpe(e,r,d),[f,p]=Hpe(d,r,s,c,t),x=!d.ignoreTooltip&&i.has(d.id),y=d.data??[];if(Ku(d)){const M=d.categoryGapRatio??Wpe,R=d.barGapRatio??Vpe;if(o[d.id]=Ye({offset:0,categoryGapRatio:M,barGapRatio:R,triggerTooltip:x},d,{data:y,scale:$N(d.data,u).paddingInner(M).paddingOuter(M/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Lf(Ye({values:d.data},d.colorMap)):yf(d.colorMap))}),NE(d.data)){const z=jE(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??z}}if(Xu(d)&&(o[d.id]=Ye({offset:0,triggerTooltip:x},d,{data:y,scale:Kq(d.data,u),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Lf(Ye({values:d.data},d.colorMap)):yf(d.colorMap))}),NE(d.data))){const M=jE(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??M}if(!Ime(d))return;const N=d.scaleType??"linear",v=d.domainLimit??"nice",j=[d.min??f,d.max??p];if(typeof v=="function"){const{min:M,max:R}=v(f,p);j[0]=M,j[1]=R}const w=Yq(d,j,j4(Math.abs(u[1]-u[0]))),S=Qq(w,u),A=RN(N,j,u),k=v==="nice"?A.nice(w):A,[_,L]=k.domain(),T=[d.min??_,d.max??L];o[d.id]=Ye({offset:0,triggerTooltip:x},d,{data:y,scaleType:N,scale:k.domain(T),tickNumber:S,colorScale:d.colorMap&&yf(d.colorMap)})}),{axis:o,axisIds:a.map(({id:l})=>l)}}const wW=e=>e.polarAxis,NW=Ct(wW,e=>e?.rotation),Ype=Ct(wW,e=>e?.radius),tm=Ct(NW,br,pa,qr,(e,t,a,s)=>vW({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"rotation"}));Ct(Ype,br,pa,qr,(e,t,a,s)=>vW({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"radius"}));const Qpe=Ct(br,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),Kpe=e=>(t,a)=>Math.atan2(t-e.cx,e.cy-a);function ZN(e){return(e%360+360)%360}const g2=2*Math.PI;function Xpe(e){return(e%g2+g2)%g2}function M6(e,t){const{scale:a,data:s,reverse:r}=e;if(!ys(a))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=Xpe(t-Math.min(...a.range())),o=a.bandwidth()===0?Math.floor((i+a.step()/2)/a.step())%s.length:Math.floor(i/a.step());return o<0||o>=s.length?-1:r?s.length-1-o:o}function vr(){const e=Vn(),{axis:t,axisIds:a}=Ft(e,Ks);return{xAxis:t,xAxisIds:a}}function wr(){const e=Vn(),{axis:t,axisIds:a}=Ft(e,Xs);return{yAxis:t,yAxisIds:a}}function Zpe(e){const t=Vn(),{axis:a,axisIds:s}=Ft(t,Ks),r=s[0];return a[r]}function Jpe(e){const t=Vn(),{axis:a,axisIds:s}=Ft(t,Xs),r=s[0];return a[r]}function jW(){const e=Vn(),{axis:t,axisIds:a}=Ft(e,tm);return{rotationAxis:t,rotationAxisIds:a}}function exe(e){const t=Vn(),{axis:a,axisIds:s}=Ft(t,tm),r=s[0];return a[r]}function ah(e){if(ys(e))return a=>(e(a)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?a=>a===t[0]?e(a):NaN:a=>e(a)}function I4(){const e=Vn(),{axis:t,axisIds:a}=Ft(e,cpe)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:a}}function $4(){const e=Gr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function JN(){const e=Vn();return Ft(e,pa)}const txe=Ct(pa,(e,t)=>e[t]);Oa(pa,(e,t,a)=>{if(!a||Array.isArray(a)&&a.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(a))return e[t]?.series?.[a];const s=[];for(const r of a){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const nxe=e=>{const t=Vn();return Ft(t,txe,e)};function Lx(){return nxe("line")}function axe(){return!1}function CW(e,t){return!e||!t?axe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function sxe(){return!1}function SW(e,t){return!e||!t?sxe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function R4(e,t,a){return e?.highlight==="series"&&t?.seriesId===a}function rxe(e,t,a){return R4(e,t,a)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===a}function _W(e,t,a){return e?.highlight==="item"&&t?.seriesId===a?t.dataIndex:null}function ixe(e,t,a){return R4(e,t,a)||_W(e,t,a)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===a?t.dataIndex:null}const oxe=e=>e.highlight,lxe=Ct(pa,e=>{const t=new Map;return Object.keys(e).forEach(a=>{const s=e[a];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),nc=Oa(oxe,wG,function(t,a){return t.isControlled||t.lastUpdate==="pointer"?t.item:a}),Sd=Ct(lxe,nc,function(t,a){if(!a)return null;const s=t.get(a.seriesId);return s===void 0?null:s}),cxe=Ct(Sd,nc,CW),dxe=Ct(Sd,nc,SW),uxe=Ct(Sd,nc,function(t,a,s){return CW(t,a)(s)});Ct(Sd,nc,R4);Ct(Sd,nc,rxe);Ct(Sd,nc,ixe);Ct(Sd,nc,_W);const mxe=Ct(Sd,nc,function(t,a,s){return SW(t,a)(s)});function AW(e){const t=Vn(),a=Ft(t,uxe,e),s=Ft(t,mxe,e);return{isHighlighted:a,isFaded:!a&&s}}function fxe(){const e=Vn(),t=Ft(e,cxe),a=Ft(e,dxe);return{isHighlighted:t,isFaded:a}}function hxe(e,t){return Object.keys(e).flatMap(a=>{const s=t[a].legendGetter;return s===void 0?[]:s(e[a])})}function gxe(){const e=JN(),t=Vn(),a=Ft(t,qr);return{items:hxe(e,a)}}function z4(){const e=XN();return h.useCallback(t=>`${e}-gradient-${t}`,[e])}function pxe(){const e=XN();return h.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var p2,I6;function xxe(){if(I6)return p2;I6=1;var e=4,t=.001,a=1e-7,s=10,r=11,i=1/(r-1),o=typeof Float32Array=="function";function l(N,v){return 1-3*v+3*N}function c(N,v){return 3*v-6*N}function d(N){return 3*N}function u(N,v,j){return((l(v,j)*N+c(v,j))*N+d(v))*N}function f(N,v,j){return 3*l(v,j)*N*N+2*c(v,j)*N+d(v)}function p(N,v,j,w,S){var A,k,_=0;do k=v+(j-v)/2,A=u(k,w,S)-N,A>0?j=k:v=k;while(Math.abs(A)>a&&++_<s);return k}function x(N,v,j,w){for(var S=0;S<e;++S){var A=f(v,j,w);if(A===0)return v;var k=u(v,j,w)-N;v-=k/A}return v}function y(N){return N}return p2=function(v,j,w,S){if(!(0<=v&&v<=1&&0<=w&&w<=1))throw new Error("bezier x values must be in [0, 1] range");if(v===j&&w===S)return y;for(var A=o?new Float32Array(r):new Array(r),k=0;k<r;++k)A[k]=u(k*i,v,w);function _(L){for(var T=0,M=1,R=r-1;M!==R&&A[M]<=L;++M)T+=i;--M;var z=(L-A[M])/(A[M+1]-A[M]),O=T+z*i,I=f(O,v,w);return I>=t?x(L,O,v,w):I===0?O:p(L,T,T+i,v,w)}return function(T){return T===0?0:T===1?1:u(_(T),j,S)}},p2}var yxe=xxe();const bxe=Zi(yxe),ej=300,F4="cubic-bezier(0.66, 0, 0.34, 1)",vxe=bxe(.66,0,.34,1);var Df=0,Ug=0,pg=0,TW=1e3,$v,Bg,Rv=0,Ou=0,tj=0,_p=typeof performance=="object"&&performance.now?performance:Date,EW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function U4(){return Ou||(EW(wxe),Ou=_p.now()+tj)}function wxe(){Ou=0}function zv(){this._call=this._time=this._next=null}zv.prototype=kW.prototype={constructor:zv,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?U4():+a)+(t==null?0:+t),!this._next&&Bg!==this&&(Bg?Bg._next=this:$v=this,Bg=this),this._call=e,this._time=a,kE()},stop:function(){this._call&&(this._call=null,this._time=1/0,kE())}};function kW(e,t,a){var s=new zv;return s.restart(e,t,a),s}function Nxe(){U4(),++Df;for(var e=$v,t;e;)(t=Ou-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Df}function $6(){Ou=(Rv=_p.now())+tj,Df=Ug=0;try{Nxe()}finally{Df=0,Cxe(),Ou=0}}function jxe(){var e=_p.now(),t=e-Rv;t>TW&&(tj-=t,Rv=e)}function Cxe(){for(var e,t=$v,a,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:$v=a);Bg=e,kE(s)}function kE(e){if(!Df){Ug&&(Ug=clearTimeout(Ug));var t=e-Ou;t>24?(e<1/0&&(Ug=setTimeout($6,e-_p.now()-tj)),pg&&(pg=clearInterval(pg))):(pg||(Rv=_p.now(),pg=setInterval(jxe,TW)),Df=1,EW($6))}}function Sxe(e,t,a){var s=new zv;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,a),s}class _xe{elapsed=0;timer=null;constructor(t,a,s){this.duration=t,this.easingFn=a,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const a=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(a);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=U4()-this.elapsed;return this.timer=kW(a=>this.timerCallback(a),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),Sxe(()=>this.timerCallback(this.duration)),this}}function Axe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r+=1){const i=a[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function Txe(e,{createInterpolator:t,applyProps:a,skip:s,initialProps:r=e}){const i=h.useRef(r),o=h.useRef(null),l=h.useRef(null),c=h.useRef(e);ss(()=>{c.current=e},[e]),ss(()=>{s&&(o.current?.finish(),o.current=null,l.current=null,i.current=e)},[e,s]);const d=h.useCallback(f=>{const p=i.current,x=t(p,e);o.current=new _xe(ej,vxe,y=>{const N=x(y);i.current=N,a(f,N)})},[a,t,e]);return[h.useCallback(f=>{if(f===null){o.current?.stop();return}const p=l.current;if(p===f){if(Axe(c.current,e)){o.current?.resume();return}o.current?.stop()}p&&o.current?.stop(),l.current=f,(o.current||!s)&&d(f)},[d,e,s]),i.current]}function LW(e,{createInterpolator:t,transformProps:a,applyProps:s,skip:r,initialProps:i=e,ref:o}){const l=a??(f=>f),[c,d]=Txe(e,{initialProps:i,createInterpolator:t,applyProps:(f,p)=>s(f,l(p)),skip:r}),u=a(r?e:d);return Ye({},u,{ref:Ro(c,o)})}function Exe(e){return LW({d:e.d},{createInterpolator:(t,a)=>{const s=t4(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function kxe(e){return LW({d:e.d},{createInterpolator:(t,a)=>{const s=t4(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function Lxe(){return Gr().chartRootRef}const Pxe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},Dxe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:Ye({},e)}}}}),PW={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${Pxe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},Oxe=PW;Dxe(PW);const Mxe=["localeText"],LE=h.createContext(null);function Ixe(e){const{localeText:t}=e,a=hn(e,Mxe),{localeText:s}=h.useContext(LE)??{localeText:void 0},r=Si({props:a,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:o}=r,l=h.useMemo(()=>Ye({},Oxe,o,s,t),[o,s,t]),c=h.useMemo(()=>({localeText:l}),[l]);return n.jsx(LE.Provider,{value:c,children:i})}const DW=()=>{const e=h.useContext(LE);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function $xe({bandWidth:e,numberOfGroups:t,gapRatio:a}){if(a===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*a),r=a*s;return{barWidth:s,offset:r}}function Rxe(e,t,a){const s=e&&t>0,r=!e&&t<0,i=s||r;return a?!i:i}function zxe(e){const{verticalLayout:t,xAxisConfig:a,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:o,groupIndex:l}=e,c=t?a:s,d=(t?s.reverse:a.reverse)??!1,{barWidth:u,offset:f}=$xe({bandWidth:c.scale.bandwidth(),numberOfGroups:o,gapRatio:c.barGapRatio}),p=l*(u+f),x=a.scale,y=s.scale,N=c.data[i],v=r.data[i];if(v==null)return null;const w=r.stackedData[i].map(L=>t?y(L):x(L)),S=Math.round(Math.min(...w)),A=Math.round(Math.max(...w)),k=v===0?0:Math.max(r.minBarSize,A-S),_=Rxe(t,v,d)?A-k:S;return{x:t?x(N)+p:_,y:t?_:y(N)+p,height:t?k:u,width:t?u:k}}const Fxe=e=>{const{series:t,identifier:a,axesConfig:s,placement:r}=e;if(!a||a.dataIndex===void 0)return null;const i=t.bar?.series[a.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const o=zxe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:a.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(f=>f.ids.includes(i.id))});if(o==null)return null;const{x:l,y:c,width:d,height:u}=o;switch(r){case"right":return{x:l+d,y:c+u/2};case"bottom":return{x:l+d/2,y:c+u};case"left":return{x:l,y:c+u/2};default:return{x:l+d/2,y:c}}},Uxe=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Bxe={seriesProcessor:$pe,colorProcessor:zpe,legendGetter:Rpe,tooltipGetter:Fpe,tooltipItemPositionGetter:Fxe,axisTooltipGetter:Upe,xExtremumGetter:dpe,yExtremumGetter:upe,getSeriesWithDefaultValues:Uxe},Hxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.x!==null&&(p.x<i&&(i=p.x),p.x>o&&(o=p.x))}}return[i,o]},qxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.y!==null&&(p.y<i&&(i=p.y),p.y>o&&(o=p.y))}}return[i,o]},Gxe=({series:e,seriesOrder:t},a)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const o=i?.datasetKeys,l=["x","y"].filter(d=>typeof o?.[d]!="string");if(i?.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${l.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=o?a?.map(d=>({x:d[o.x]??null,y:d[o.y]??null,z:o.z&&d[o.z],id:o.id&&d[o.id]}))??[]:i.data??[];return[r,Ye({labelMarkType:"circle",markerSize:4},i,{preview:Ye({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:t}),Wxe=(e,t,a,s)=>{const r=s?.colorScale,i=a?.colorScale,o=t?.colorScale,l=O4(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const f=r(s?.data?.[c]);if(f!==null)return f}const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):r(d.z);return u===null?l({value:d,dataIndex:c}):u}:i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d.y);return u===null?l({value:d,dataIndex:c}):u}:o?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):o(d.x);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},Vxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},Yxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Qxe=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Kxe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.scatter?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[a.dataIndex].x,o=r.data?.[a.dataIndex].y;return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},Xxe={seriesProcessor:Gxe,colorProcessor:Wxe,legendGetter:Vxe,tooltipGetter:Yxe,tooltipItemPositionGetter:Kxe,xExtremumGetter:Hxe,yExtremumGetter:qxe,getSeriesWithDefaultValues:Qxe},Zxe=e=>{const{axis:t}=e;return Lv(t.data??[])};function Jxe(e,t,a,s){return a.reduce((r,i,o)=>{if(t[o]===null)return r;const[l,c]=e(i);return s&&(!s({y:l,x:null},o)||!s({y:c,x:null},o))?r:[Math.min(l,c,r[0]),Math.max(l,c,r[1])]},[1/0,-1/0])}const e0e=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const o=t[i].yAxisId;return o===a.id||s&&o===void 0}).reduce((i,o)=>{const{area:l,stackedData:c,data:d}=t[o],u=l!==void 0,f=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),p=u&&a.scaleType!=="log"&&typeof t[o].baseline!="string"?v=>v:v=>[v[1],v[1]],x=Jxe(p,d,c,f),[y,N]=x;return[Math.min(y,i[0]),Math.max(N,i[1])]},[1/0,-1/0])};function t0e(e,t){const a={};return Object.keys(e).forEach(s=>{a[s]=Ye({},e[s],{valueFormatter:e[s].valueFormatter??t})}),a}const n0e=(e,t)=>{const{seriesOrder:a,series:s}=e,r=bW(Ye({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];a.forEach(l=>{const c=s[l].data;c!==void 0&&c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d})});const o={};return r.forEach(l=>{const{ids:c,stackingOrder:d,stackingOffset:u}=l,f=D4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const y=s[p].dataKey;o[p]=Ye({labelMarkType:"line"},s[p],{data:y?t.map(N=>{const v=N[y];return typeof v=="number"?v:null}):s[p].data,stackedData:f[x].map(([N,v])=>[N,v])})})}),{seriesOrder:a,stackingGroups:r,series:t0e(o,l=>l==null?"":l.toLocaleString())}},B4=(e,t,a)=>{const s=a?.colorScale,r=t?.colorScale,i=O4(e);return s?o=>{if(o===void 0)return e.color;const l=e.data[o],c=l===null?i({value:l,dataIndex:o}):s(l);return c===null?i({value:l,dataIndex:o}):c}:r?o=>{if(o===void 0)return e.color;const l=t.data?.[o],c=l===null?i({value:l,dataIndex:o}):r(l);return c===null?i({value:l,dataIndex:o}):c}:o=>{if(o===void 0)return e.color;const l=e.data[o];return i({value:l,dataIndex:o})}},a0e=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},s0e=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},r0e=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),i0e=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),o0e=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.line?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[a.dataIndex],o=r.data[a.dataIndex];return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},l0e={colorProcessor:B4,seriesProcessor:n0e,legendGetter:a0e,tooltipGetter:s0e,tooltipItemPositionGetter:o0e,axisTooltipGetter:r0e,xExtremumGetter:Zxe,yExtremumGetter:e0e,getSeriesWithDefaultValues:i0e},c0e=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,a)=>a-t;case"asc":return(t,a)=>t-a;default:return null}},d0e=e=>{const{seriesOrder:t,series:a}=e,s={};return t.forEach(r=>{const i=xpe().startAngle(Qc(a[r].startAngle??0)).endAngle(Qc(a[r].endAngle??360)).padAngle(Qc(a[r].paddingAngle??0)).sortValues(c0e(a[r].sortingValues??"none"))(a[r].data.map(o=>o.value));s[r]=Ye({labelMarkType:"circle",valueFormatter:o=>o.value.toLocaleString()},a[r],{data:a[r].data.map((o,l)=>Ye({},o,{id:o.id??`auto-generated-pie-id-${r}-${l}`},i[l])).map((o,l)=>Ye({labelMarkType:"circle"},o,{formattedValue:a[r].valueFormatter?.(Ye({},o,{label:Vi(o.label,"arc")}),{dataIndex:l})??o.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},u0e=e=>t=>e.data[t].color,m0e=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>(a[r].data.forEach((i,o)=>{const l=Vi(i.label,"legend");l!==void 0&&s.push({markType:i.labelMarkType??a[r].labelMarkType,id:i.id??o,seriesId:r,color:i.color,label:l,itemId:i.id??o})}),s),[])},f0e=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=Vi(r.label,"tooltip"),o=Ye({},r,{label:i}),l=t.valueFormatter(o,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:i,value:o,formattedValue:l,markType:r.labelMarkType??t.labelMarkType}},h0e=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>Ye({},s,{color:s.color??a[r%a.length]}))});function Fv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*t/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function g0e(e,t){const{height:a,width:s}=t,{cx:r,cy:i}=e,o=Math.min(s,a)/2,l=Fv(r??"50%",s),c=Fv(i??"50%",a);return{cx:l,cy:c,availableRadius:o}}const p0e=e=>{const{series:t,drawingArea:a,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:o,cy:l,availableRadius:c}=g0e({cx:i.cx,cy:i.cy},a),{data:d,innerRadius:u=0,outerRadius:f}=i,p=Math.max(0,Fv(u??0,c)),x=Math.max(0,Fv(f??c,c)),y=d[s.dataIndex];if(!y)return null;const N=[[p,y.startAngle],[p,y.endAngle],[x,y.startAngle],[x,y.endAngle]].map(([A,k])=>({x:o+A*Math.sin(k),y:l-A*Math.cos(k)})),[v,j]=Lv(N.map(A=>A.x)),[w,S]=Lv(N.map(A=>A.y));switch(r){case"bottom":return{x:(j+v)/2,y:S};case"left":return{x:v,y:(S+w)/2};case"right":return{x:j,y:(S+w)/2};default:return{x:(j+v)/2,y:w}}},x0e={colorProcessor:u0e,seriesProcessor:d0e,legendGetter:m0e,tooltipGetter:f0e,tooltipItemPositionGetter:p0e,getSeriesWithDefaultValues:h0e},y0e={bar:Bxe,scatter:Xxe,line:l0e,pie:x0e},b0e=[Tx,jx,th,Ex];function v0e(e){const{children:t,plugins:a=b0e,pluginParams:s={},seriesConfig:r=y0e}=e,{contextValue:i}=kme(a,s,r);return n.jsx(cq.Provider,{value:i,children:t})}const Gr=()=>{const e=h.useContext(cq);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function w0e(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const nj=(e,t)=>{const{instance:a}=Gr(),s=h.useRef(!1),r=hs(()=>{s.current=!0,a.setItemInteraction(e,{interaction:"pointer"}),a.setHighlight(e)}),i=hs(()=>{s.current=!1,a.removeItemInteraction(e),a.clearHighlight()});return h.useEffect(()=>()=>{s.current&&i()},[i]),h.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:w0e}),[t,r,i])};function OW(e){return e.replace(" ","_")}const MW=Sa("MuiAppearingMask",["animate"]),N0e=ln("rect")({animationName:"animate-width",animationTimingFunction:F4,animationDuration:"0s",[`&.${MW.animate}`]:{animationDuration:`${ej}ms`},"@keyframes animate-width":{from:{width:0}}});function IW(e){const t=Ai(),a=XN(),s=OW(`${a}-${e.id}`);return n.jsxs(h.Fragment,{children:[n.jsx("clipPath",{id:s,children:n.jsx(N0e,{className:e.skipAnimation?"":MW.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),n.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const j0e=["skipAnimation","ownerState"];function C0e(e){const{skipAnimation:t,ownerState:a}=e,s=hn(e,j0e),r=Exe(e);return n.jsx(IW,{skipAnimation:t,id:`${a.id}-area-clip`,children:n.jsx("path",Ye({fill:a.gradientId?`url(#${a.gradientId})`:a.color,filter:a.isHighlighted?"brightness(140%)":a.gradientId?void 0:"brightness(120%)",opacity:a.isFaded?.3:1,stroke:"none","data-series":a.id,"data-highlighted":a.isHighlighted||void 0,"data-faded":a.isFaded||void 0},s,r))})}const S0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function _0e(e){return Ga("MuiAreaElement",e)}const A0e=Sa("MuiAreaElement",["root","highlighted","faded","series"]),T0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return qa(i,_0e,t)};function E0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=hn(e,S0e),d=nj({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=AW({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=T0e(p),y=i?.area??C0e,N=zl({elementType:y,externalSlotProps:o?.area,additionalProps:Ye({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(y,Ye({},c,N))}function H4(e){const t=Vn(),a=Ft(t,que);return e||a}function q4(){const e=Vn();return Ft(e,cG)}function $W(e){switch(e){case"catmullRom":return Ape.alpha(.5);case"linear":return kx;case"monotoneX":return EE;case"monotoneY":return oW;case"natural":return cW;case"step":return dW;case"stepBefore":return uW;case"stepAfter":return mW;case"bumpY":return qG;case"bumpX":return HG;default:return EE}}function k0e(e,t){const a=Lx(),s=vr().xAxisIds[0],r=wr().yAxisIds[0],i=z4();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(let p=f.length-1;p>=0;p-=1){const x=f[p],{xAxisId:y=s,yAxisId:N=r,stackedData:v,data:j,connectNulls:w,baseline:S,curve:A,strictStepCurve:k,area:_}=l[x];if(!_||!(y in e)||!(N in t))continue;const L=e[y].scale,T=ah(L),M=t[N].scale,R=e[y].data,z=t[N].colorScale&&i(N)||e[y].colorScale&&i(y)||void 0,O=A?.includes("step")&&!k&&ys(L),I=R?.flatMap((te,W)=>{const ae=j[W]==null;if(O){const Ee=[{x:te,y:v[W],nullData:ae,isExtension:!1}];return!ae&&(W===0||j[W-1]==null)&&Ee.unshift({x:(L(te)??0)-(L.step()-L.bandwidth())/2,y:v[W],nullData:ae,isExtension:!0}),!ae&&(W===j.length-1||j[W+1]==null)&&Ee.push({x:(L(te)??0)+(L.step()+L.bandwidth())/2,y:v[W],nullData:ae,isExtension:!0}),Ee}return{x:te,y:v[W],nullData:ae}})??[],B=w?I.filter(te=>!te.nullData):I,Q=Fg().x(te=>te.isExtension?te.x:T(te.x)).defined(te=>w||!te.nullData||!!te.isExtension).y0(te=>{if(typeof S=="number")return M(S);if(S==="max")return M.range()[1];if(S==="min")return M.range()[0];const W=te.y&&M(te.y[0]);return Number.isNaN(W)?M.range()[0]:W}).y1(te=>te.y&&M(te.y[1])).curve($W(A))(B)||"";d.push({area:l[x].area,color:l[x].color,gradientId:z,d:Q,seriesId:x})}}return d},[a,s,r,e,t,i])}const L0e=["slots","slotProps","onItemClick","skipAnimation"],P0e=ln("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${A0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),D0e=()=>{const{xAxis:e}=vr(),{yAxis:t}=wr();return k0e(e,t)};function O0e(e){const{slots:t,slotProps:a,onItemClick:s,skipAnimation:r}=e,i=hn(e,L0e),o=q4(),l=H4(o||r),c=D0e();return n.jsx(P0e,Ye({},i,{children:c.map(({d,seriesId:u,color:f,area:p,gradientId:x})=>!!p&&n.jsx(E0e,{id:u,d,color:f,gradientId:x,slots:t,slotProps:a,onClick:s&&(y=>s(y,{type:"line",seriesId:u})),skipAnimation:l},u))}))}const M0e=["skipAnimation","ownerState"],I0e=h.forwardRef(function(t,a){const{skipAnimation:s,ownerState:r}=t,i=hn(t,M0e),o=kxe(Ye({},t,{ref:a}));return n.jsx(IW,{skipAnimation:s,id:`${r.id}-line-clip`,children:n.jsx("path",Ye({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,o))})}),$0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function R0e(e){return Ga("MuiLineElement",e)}const z0e=Sa("MuiLineElement",["root","highlighted","faded","series"]),F0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return qa(i,R0e,t)};function U0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=hn(e,$0e),d=nj({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=AW({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=F0e(p),y=i?.line??I0e,N=zl({elementType:y,externalSlotProps:o?.line,additionalProps:Ye({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(y,Ye({},c,N))}function B0e(e,t){const a=Lx(),s=vr().xAxisIds[0],r=wr().yAxisIds[0],i=z4();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(const p of f){const{xAxisId:x=s,yAxisId:y=r,stackedData:N,data:v,connectNulls:j,curve:w,strictStepCurve:S}=l[p];if(!(x in e)||!(y in t))continue;const A=e[x].scale,k=ah(A),_=t[y].scale,L=e[x].data,T=t[y].colorScale&&i(y)||e[x].colorScale&&i(x)||void 0,M=w?.includes("step")&&!S&&ys(A),R=L?.flatMap((B,ee)=>{const Q=v[ee]==null;if(M){const te=[{x:B,y:N[ee],nullData:Q,isExtension:!1}];return!Q&&(ee===0||v[ee-1]==null)&&te.unshift({x:(A(B)??0)-(A.step()-A.bandwidth())/2,y:N[ee],nullData:Q,isExtension:!0}),!Q&&(ee===v.length-1||v[ee+1]==null)&&te.push({x:(A(B)??0)+(A.step()+A.bandwidth())/2,y:N[ee],nullData:Q,isExtension:!0}),te}return{x:B,y:N[ee],nullData:Q}})??[],z=j?R.filter(B=>!B.nullData):R,I=k4().x(B=>B.isExtension?B.x:k(B.x)).defined(B=>j||!B.nullData||!!B.isExtension).y(B=>_(B.y[1])).curve($W(w))(z)||"";d.push({color:l[p].color,gradientId:T,d:I,seriesId:p})}}return d},[a,s,r,e,t,i])}const H0e=["slots","slotProps","skipAnimation","onItemClick"],q0e=ln("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${z0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),G0e=()=>{const{xAxis:e}=vr(),{yAxis:t}=wr();return B0e(e,t)};function W0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=hn(e,H0e),o=q4(),l=H4(o||s),c=G0e();return n.jsx(q0e,Ye({},i,{children:c.map(({d,seriesId:u,color:f,gradientId:p})=>n.jsx(U0e,{id:u,d,color:f,gradientId:p,skipAnimation:l,slots:t,slotProps:a,onClick:r&&(x=>r(x,{type:"line",seriesId:u}))},u))}))}function V0e(e){return Ga("MuiMarkElement",e)}const RW=Sa("MuiMarkElement",["root","highlighted","faded","animate","series"]),zW=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r,skipAnimation:i}=e,o={root:["root",`series-${a}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return qa(o,V0e,t)},Y0e=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],Q0e=ln("circle")({[`&.${RW.animate}`]:{transitionDuration:`${ej}ms`,transitionProperty:"cx, cy",transitionTimingFunction:F4}});function K0e(e){const{x:t,y:a,id:s,classes:r,color:i,dataIndex:o,onClick:l,skipAnimation:c,isFaded:d=!1,isHighlighted:u=!1}=e,f=hn(e,Y0e),p=Go(),x=nj({type:"line",seriesId:s,dataIndex:o}),N=zW({id:s,classes:r,isHighlighted:u,isFaded:d,skipAnimation:c});return n.jsx(Q0e,Ye({},f,{cx:t,cy:a,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:N.root,onClick:l,cursor:l?"pointer":"unset"},x,{"data-highlighted":u||void 0,"data-faded":d||void 0}))}function FW(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const X0e=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],Z0e=ln("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${RW.animate}`]:{transitionDuration:`${ej}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:F4}}));function J0e(e){const{x:t,y:a,id:s,classes:r,color:i,shape:o,dataIndex:l,onClick:c,skipAnimation:d,isFaded:u=!1,isHighlighted:f=!1}=e,p=hn(e,X0e),x=nj({type:"line",seriesId:s,dataIndex:l}),y={id:s,classes:r,isHighlighted:f,isFaded:u,color:i,skipAnimation:d},N=zW(y);return n.jsx(Z0e,Ye({},p,{style:{transform:`translate(${t}px, ${a}px)`,transformOrigin:`${t}px ${a}px`},ownerState:y,className:N.root,d:L4(JG[FW(o)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":f||void 0,"data-faded":u||void 0}))}const eye=["slots","slotProps","skipAnimation","onItemClick"];function tye(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=hn(e,eye),o=q4(),l=H4(o||s),c=Lx(),{xAxis:d,xAxisIds:u}=vr(),{yAxis:f,yAxisIds:p}=wr(),x=XN(),{instance:y,store:N}=Gr(),{isFaded:v,isHighlighted:j}=fxe(),w=Ft(N,LG),S=h.useMemo(()=>{const T={};for(const{dataIndex:M,axisId:R}of w)T[R]===void 0?T[R]=new Set([M]):T[R].add(M);return T},[w]);if(c===void 0)return null;const{series:A,stackingGroups:k}=c,_=u[0],L=p[0];return n.jsx("g",Ye({},i,{children:k.flatMap(({ids:T})=>T.map(M=>{const{xAxisId:R=_,yAxisId:z=L,stackedData:O,data:I,showMark:B=!0,shape:ee="circle"}=A[M];if(B===!1)return null;const Q=ah(d[R].scale),te=f[z].scale,W=d[R].data;if(W===void 0)throw new Error(`MUI X Charts: ${R===CN?"The first `xAxis`":`The x-axis with id "${R}"`} should have data property to be able to display a line plot.`);const ae=OW(`${x}-${M}-line-clip`),Ee=B4(A[M],d[R],f[z]),se=t?.mark??(ee==="circle"?K0e:J0e),Y=j({seriesId:M}),pe=!Y&&v({seriesId:M});return n.jsx("g",{clipPath:`url(#${ae})`,"data-series":M,children:W?.map((Se,me)=>{const ye=I[me]==null?null:O[me][1];return{x:Q(Se),y:ye===null?null:te(ye),position:Se,value:ye,index:me}}).filter(({x:Se,y:me,index:ye,position:re,value:De})=>De===null||me===null||!y.isPointInside(Se,me)?!1:B===!0?!0:B({x:Se,y:me,index:ye,position:re,value:De})).map(({x:Se,y:me,index:ye})=>n.jsx(se,Ye({id:M,dataIndex:ye,shape:ee,color:Ee(ye),x:Se,y:me,skipAnimation:l,onClick:r&&(re=>r(re,{type:"line",seriesId:M,dataIndex:ye})),isHighlighted:S[R]?.has(ye)||Y,isFaded:pe},a?.mark),`${M}-${ye}`))},M)}))}))}function aj(){const[e,t]=h.useState(typeof window<"u"||!1);return h.useEffect(()=>{t(!0)},[]),e}function G4(e){return typeof e=="number"&&!Number.isFinite(e)}const PE={start:0,extremities:0,end:1,middle:.5};function x2(e,t,a){return e(t)-(e.step()-e.bandwidth())/2+PE[a]*e.step()}function nye(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,isInside:l}=e;if(ys(t)){const p=t.domain(),x=o??"middle";if(t.bandwidth()>0){const N=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,v=t.range()[0]>t.range()[1],j=N.findIndex(S=>l(x2(t,S,v?"start":"end"))),w=N.findLastIndex(S=>l(x2(t,S,v?"end":"start")));return[...N.slice(j,w+1).map(S=>{const A=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:A})??A,offset:x2(t,S,i),labelOffset:x==="tick"?0:t.step()*(PE[x]-PE[i])}}),...i==="extremities"&&w===p.length-1&&l(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(N=>{const v=`${N}`;return{value:N,formattedValue:s?.(N,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:v})??v,offset:t(N),labelOffset:0}})}if(t.domain().some(G4))return[];const d=o,u=typeof r=="object"?r:aye(t,a),f=[];for(let p=0;p<u.length;p+=1){const x=u[p],y=t(x);if(l(y)){const N=t.tickFormat(a)(x);f.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:N})??N,offset:y,labelOffset:d==="middle"?t(u[p-1]??0)-(y+t(u[p-1]??0))/2:0})}}return f}function aye(e,t){const a=e.domain();return a[0]===a[1]?[a[0]]:e.ticks(t)}function sj(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,direction:l}=e,{instance:c}=Gr(),d=l==="x"?c.isXInside:c.isYInside;return h.useMemo(()=>nye({scale:t,tickNumber:a,tickPlacement:i,tickInterval:r,tickLabelPlacement:o,valueFormatter:s,isInside:d}),[t,a,i,r,o,s,d])}function sye(e=!1){const[t,a]=h.useState(!1);return ss(()=>{e||a(!0)},[e]),h.useEffect(()=>{e&&a(!0)},[e]),t}const UW=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function rye(e){return e.length}function iye(e){const t=UW.segment(e);let a=0;for(const s of t)a+=1;return a}const oye=UW?iye:rye;function lye(e){return e*(Math.PI/180)}const BW=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function cye(e,t){return e.slice(0,t)}function dye(e,t){const a=BW.segment(e);let s="",r=0;for(const i of a)if(s+=i.segment,r+=1,r>=t)break;return s}const uye=BW?dye:cye,R6="";function HW(e,t){const{width:a,height:s,measureText:r}=t,i=lye(t.angle),o=r(e),l=Math.abs(o.width*Math.cos(i))+Math.abs(o.height*Math.sin(i)),c=Math.abs(o.width*Math.sin(i))+Math.abs(o.height*Math.cos(i));return l<=a&&c<=s}function qW(e,t){if(t(e))return e;let a=e,s=1,r=1/2;const i=oye(e);let o=i,l=i,c=null;do{if(l=o,o=Math.floor(i*r),o===0)break;a=uye(e,o).trim();const d=t(a+R6);s+=1,d?(c=a,r+=1/2**s):r-=1/2**s}while(Math.abs(o-l)!==1);return c?c+R6:""}function GW(){return typeof window>"u"}const Kc=new Map,WW=2e3,mye=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function W4(e,t){return mye.has(e)&&t===+t?`${t}px`:t}const fye=/([A-Z])/g;function V4(e){return String(e).replace(fye,t=>`-${t.toLowerCase()}`)}function VW(e){let t="";for(const a in e)if(Object.hasOwn(e,a)){const s=a,r=e[s];if(r===void 0)continue;t+=`${V4(s)}:${W4(s,r)};`}return t}const Px=(e,t={})=>{if(e==null||GW())return{width:0,height:0};const a=String(e),s=VW(t),r=`${a}-${s}`,i=Kc.get(r);if(i)return i;try{const o=QW(),l=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(d=>(l.style[V4(d)]=W4(d,t[d]),d)),l.textContent=a,o.replaceChildren(l);const c=YW(l);return Kc.set(r,c),Kc.size+1>WW&&Kc.clear(),c}catch{return{width:0,height:0}}};function hye(e,t={}){if(GW())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const a=new Map,s=[],r=VW(t);for(const c of e){const d=`${c}-${r}`,u=Kc.get(d);u?a.set(c,u):s.push(c)}const i=QW(),o=Ye({},t);Object.keys(o).map(c=>(i.style[V4(c)]=W4(c,o[c]),c));const l=[];for(const c of s){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.textContent=`${c}`,l.push(d)}i.replaceChildren(...l);for(let c=0;c<s.length;c+=1){const d=s[c],u=i.children[c],f=YW(u),p=`${d}-${r}`;Kc.set(p,f),a.set(d,f)}return Kc.size+1>WW&&Kc.clear(),a}function YW(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let rr=null;function QW(){return rr===null&&(rr=document.createElementNS("http://www.w3.org/2000/svg","svg"),rr.setAttribute("aria-hidden","true"),rr.style.position="absolute",rr.style.top="-20000px",rr.style.left="0",rr.style.padding="0",rr.style.margin="0",rr.style.border="none",rr.style.pointerEvents="none",rr.style.visibility="hidden",rr.style.contain="strict",document.body.appendChild(rr)),rr}function gye(e,t,a,s,r){const i=new Map,o=ZN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>90&&o<270&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.left+t.width+t.right-d.offset-d.labelOffset)*c),f=p=>HW(p,{width:u,height:a,angle:o,measureText:x=>Px(x,r)});i.set(d,qW(d.formattedValue.toString(),f))}return i}const z6=5;function pye(e,t,a=0){const s=Math.min(Math.abs(a)%180,Math.abs(Math.abs(a)%180-180)%180);if(s<z6)return e;if(s>90-z6)return t;const r=Qc(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function xye(e,{tickLabelStyle:t,tickLabelInterval:a,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:o}){if(typeof a=="function")return new Set(e.filter((f,p)=>a(f.value,p)));let l=0;const c=r?-1:1,d=e.filter(f=>{const{offset:p,labelOffset:x,formattedValue:y}=f;if(y==="")return!1;const N=p+x;return o(N)}),u=bye(d,t);return new Set(d.filter((f,p)=>{const{offset:x,labelOffset:y}=f,N=x+y;if(p>0&&c*N<c*(l+s))return!1;const{width:v,height:j}=i?yye(u,f):{width:0,height:0},w=pye(v,j,t?.angle),S=N-c*w/2;return p>0&&c*S<c*(l+s)?!1:(l=N+c*w/2,!0)}))}function yye(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let a=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(a=Math.max(a,i.width),s+=i.height)}return{width:a,height:s}}function bye(e,t){const a=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>a.add(r));return hye(a,t)}function KW(e){return Ga("MuiChartsAxis",e)}const Qy=Sa("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),XW=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionX",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return qa(r,KW,t)},DE=3,vye=4,ZW={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function wye({style:e,needsComputation:t,text:a}){return a.split(`
`).map(s=>Ye({text:s},t?Px(s,e):{width:0,height:0}))}const Nye=["x","y","style","text","ownerState"],jye=["angle","textAnchor","dominantBaseline"];function rj(e){const{x:t,y:a,style:s,text:r}=e,i=hn(e,Nye),o=s??{},{angle:l,textAnchor:c,dominantBaseline:d}=o,u=hn(o,jye),f=aj(),p=h.useMemo(()=>wye({style:u,needsComputation:f&&r.includes(`
`),text:r}),[u,r,f]);let x;switch(d){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return n.jsx("text",Ye({},i,{transform:l?`rotate(${l}, ${t}, ${a})`:void 0,x:t,y:a,textAnchor:c,dominantBaseline:d,style:u,children:p.map((y,N)=>n.jsx("tspan",{x:t,dy:`${N===0?x:p[0].height}px`,dominantBaseline:d,children:y.text},N))}))}function JW(e){const t=ZN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function eV(e){const t=ZN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function tV(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const Cye=["scale","tickNumber","reverse"];function nV(e){const{xAxis:t,xAxisIds:a}=vr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i,reverse:o}=s,l=hn(s,Cye),c=Si({props:Ye({},l,e),name:"MuiChartsXAxis"}),d=Ye({},ZW,c),{position:u,tickLabelStyle:f,slots:p,slotProps:x}=d,y=Go(),N=gx(),v=XW(d),j=u==="bottom"?1:-1,w=p?.axisTick??"line",S=p?.axisTickLabel??rj,A=JW((u==="bottom"?0:180)-(f?.angle??0)),k=eV((u==="bottom"?0:180)-(f?.angle??0)),_=zl({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:Ye({},y.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:N?tV(A):A,dominantBaseline:k},f)},className:v.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:d,tickNumber:i,positionSign:j,classes:v,Tick:w,TickLabel:S,axisTickLabelProps:_,reverse:o}}function Sye(e){const{axisLabelHeight:t}=e,{xScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d,reverse:u}=nV(e),f=gx(),p=sye(),{disableTicks:x,tickSize:y,valueFormatter:N,slotProps:v,tickInterval:j,tickLabelInterval:w,tickPlacement:S,tickLabelPlacement:A,tickLabelMinGap:k,height:_}=s,L=Ai(),{instance:T}=Gr(),M=aj(),R=x?4:y,z=sj({scale:a,tickNumber:r,valueFormatter:N,tickInterval:j,tickPlacement:S,tickLabelPlacement:A,direction:"x"}),O=xye(z,{tickLabelStyle:d.style,tickLabelInterval:w,tickLabelMinGap:k,reverse:u,isMounted:p,isXInside:T.isXInside}),I=Math.max(0,_-(t>0?t+vye:0)-R-DE),B=M?gye(O,L,I,f,d.style):new Map(Array.from(O).map(ee=>[ee,ee.formattedValue]));return n.jsx(h.Fragment,{children:z.map((ee,Q)=>{const{offset:te,labelOffset:W}=ee,ae=W??0,Ee=i*(R+DE),se=T.isXInside(te),Y=B.get(ee),pe=O.has(ee);return n.jsxs("g",{transform:`translate(${te}, 0)`,className:o.tickContainer,children:[!x&&se&&n.jsx(l,Ye({y2:i*R,className:o.tick},v?.axisTick)),Y!==void 0&&pe&&n.jsx(c,Ye({x:ae,y:Ee},d,{text:Y}))]},Q)})})}const xg={start:0,extremities:0,end:1,middle:.5,tick:0};function aV(e){const{scale:t,tickInterval:a,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return h.useMemo(()=>{const o=t.domain(),l=typeof a=="function"&&o.filter(a)||typeof a=="object"&&a||o;if(t.bandwidth()>0){const c=F6(l,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return F6(l,i,r,s,t)},[t,a,i,r,s])}function F6(e,t,a,s,r){const i=[],o=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let d=0;d<e.length;d+=1){const u=e[d],f=t[c].getValue(u,d),p=i[i.length-1];if(p?.value!==f||p?.groupIndex!==c){l=1;const y=ys(r)?r(u)-(r.step()-r.bandwidth())/2+xg[a]*r.step():r(u),N=r.step()*l*(xg[s]-xg[a]);i.push({value:f,formattedValue:`${f}`,offset:y,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:N}),o.has(d)||o.set(d,new Set);const v=o.get(d);for(const j of v.values())i[j].ignoreTick=!0;v.add(i.length-1)}else{l+=1;const y=r.step()*l*(xg[s]-xg[a]);p.labelOffset=y}}return i}const U6={tickSize:6},_ye=(e,t,a)=>{const s=e[t]??{},r=a??U6.tickSize,i=r*t*2+r;return Ye({},U6,s,{tickSize:s.tickSize??i})};function Aye(e){const{xScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=nV(e);if(!ys(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:y}=a,N=a.groups,{instance:v}=Gr(),j=aV({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:y,groups:N});return n.jsx(h.Fragment,{children:j.map((w,S)=>{const{offset:A,labelOffset:k}=w,_=k??0,L=v.isXInside(A),T=w.formattedValue,M=w.ignoreTick??!1,R=w.groupIndex??0,z=_ye(N,R,d),O=s*z.tickSize,I=s*(z.tickSize+DE);return n.jsxs("g",{transform:`translate(${A}, 0)`,className:r.tickContainer,"data-group-index":R,children:[!c&&!M&&L&&n.jsx(i,Ye({y2:O,className:r.tick},f?.axisTick)),T!==void 0&&n.jsx(o,Ye({x:_,y:I},l,{style:Ye({},l.style,z.tickLabelStyle),text:T}))]},S)})})}const sV=ln("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${Qy.tickLabel}`]:Ye({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Qy.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Qy.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Qy.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),Tye=["axis"],Eye=["scale","tickNumber","reverse"],kye=ln(sV,{name:"MuiChartsXAxis",slot:"Root"})({});function Lye(e){let{axis:t}=e,a=hn(e,Tye);const{scale:s}=t,r=hn(t,Eye),i=Si({props:Ye({},r,a),name:"MuiChartsXAxis"}),o=Ye({},ZW,i),{position:l,labelStyle:c,offset:d,slots:u,slotProps:f,sx:p,disableLine:x,label:y,height:N}=o,v=Go(),j=XW(o),{left:w,top:S,width:A,height:k}=Ai(),_=l==="bottom"?1:-1,L=u?.axisLine??"line",T=u?.axisLabel??rj,M=zl({elementType:T,externalSlotProps:f?.axisLabel,additionalProps:{style:Ye({},v.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:l==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(l==="none")return null;const R=y?Px(y,M.style).height:0,z=s.domain(),I=ys(s)?z.length===0:z.some(G4);let B=null;I||(B="groups"in t&&Array.isArray(t.groups)?n.jsx(Aye,Ye({},a)):n.jsx(Sye,Ye({},a,{axisLabelHeight:R})));const ee={x:w+A/2,y:_*N};return n.jsxs(kye,{transform:`translate(0, ${l==="bottom"?S+k+d:S-d})`,className:j.root,sx:p,children:[!x&&n.jsx(L,Ye({x1:w,x2:w+A,className:j.line},f?.axisLine)),B,y&&n.jsx("g",{className:j.label,children:n.jsx(T,Ye({},ee,M,{text:y}))})]})}function Pye(e){const{xAxis:t,xAxisIds:a}=vr(),s=t[e.axisId??a[0]];return s?n.jsx(Lye,Ye({},e,{axis:s})):(`${e.axisId}`,null)}function Dye(e,t,a,s,r){const i=new Map,o=ZN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>180&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.top+t.height+t.bottom-d.offset-d.labelOffset)*c),f=p=>HW(p,{width:a,height:u,angle:o,measureText:x=>Px(x,r)});i.set(d,qW(d.formattedValue.toString(),f))}return i}const rV=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionY",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return qa(r,KW,t)},OE=2,Oye=2,iV={disableLine:!1,disableTicks:!1,tickSize:6},Mye=["scale","tickNumber","reverse"];function oV(e){const{yAxis:t,yAxisIds:a}=wr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i}=s,o=hn(s,Mye),l=Si({props:Ye({},o,e),name:"MuiChartsYAxis"}),c=Ye({},iV,l),{position:d,tickLabelStyle:u,slots:f,slotProps:p}=c,x=Go(),y=gx(),N=rV(c),v=d==="right"?1:-1,j=typeof u?.fontSize=="number"?u.fontSize:12,w=f?.axisTick??"line",S=f?.axisTickLabel??rj,A=JW((d==="right"?-90:90)-(u?.angle??0)),k=eV((d==="right"?-90:90)-(u?.angle??0)),_=zl({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:Ye({},x.typography.caption,{fontSize:j,textAnchor:y?tV(A):A,dominantBaseline:k},u)},className:N.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:v,classes:N,Tick:w,TickLabel:S,axisTickLabelProps:_}}function Iye(e){const{axisLabelHeight:t}=e,{yScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d}=oV(e),u=gx(),{disableTicks:f,tickSize:p,valueFormatter:x,slotProps:y,tickPlacement:N,tickLabelPlacement:v,tickInterval:j,tickLabelInterval:w,width:S}=s,A=Ai(),{instance:k}=Gr(),_=aj(),L=f?4:p,T=sj({scale:a,tickNumber:r,valueFormatter:x,tickPlacement:N,tickLabelPlacement:v,tickInterval:j,direction:"y"}),M=Math.max(0,S-(t>0?t+Oye:0)-L-OE),R=_?Dye(T,A,M,u,d.style):new Map(Array.from(T).map(z=>[z,z.formattedValue]));return n.jsx(h.Fragment,{children:T.map((z,O)=>{const{offset:I,labelOffset:B,value:ee}=z,Q=i*(L+OE),te=B,W=typeof w=="function"&&!w?.(ee,O),ae=k.isYInside(I),Ee=R.get(z);return ae?n.jsxs("g",{transform:`translate(0, ${I})`,className:o.tickContainer,children:[!f&&n.jsx(l,Ye({x2:i*L,className:o.tick},y?.axisTick)),Ee!==void 0&&!W&&n.jsx(c,Ye({x:Q,y:te,text:Ee},d))]},O):null})})}const B6={tickSize:6},$ye=(e,t,a)=>{const s=e[t]??{},r=a??B6.tickSize,i=r*t*2+r;return Ye({},B6,s,{tickSize:s.tickSize??i})};function Rye(e){const{yScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=oV(e);if(!ys(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:y}=a,N=a.groups,{instance:v}=Gr(),j=aV({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:y,groups:N});return n.jsx(h.Fragment,{children:j.map((w,S)=>{const{offset:A,labelOffset:k}=w,_=k??0,L=v.isYInside(A),T=w.formattedValue,M=w.ignoreTick??!1,R=w.groupIndex??0,z=$ye(N,R,d),O=s*z.tickSize,I=s*(z.tickSize+OE);return n.jsxs("g",{transform:`translate(0, ${A})`,className:r.tickContainer,"data-group-index":R,children:[!c&&!M&&L&&n.jsx(i,Ye({x2:O,className:r.tick},f?.axisTick)),T!==void 0&&n.jsx(o,Ye({x:I,y:_},l,{style:Ye({},l.style,z.tickLabelStyle),text:T}))]},S)})})}const zye=["axis"],Fye=["scale","tickNumber","reverse"],Uye=ln(sV,{name:"MuiChartsYAxis",slot:"Root"})({});function Bye(e){let{axis:t}=e,a=hn(e,zye);const{scale:s}=t,r=hn(t,Fye),i=aj(),o=Si({props:Ye({},r,a),name:"MuiChartsYAxis"}),l=Ye({},iV,o),{position:c,disableLine:d,label:u,labelStyle:f,offset:p,width:x,sx:y,slots:N,slotProps:v}=l,j=Go(),w=rV(l),{left:S,top:A,width:k,height:_}=Ai(),L=c==="right"?1:-1,T=N?.axisLine??"line",M=N?.axisLabel??rj,R=zl({elementType:T,externalSlotProps:v?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),z=zl({elementType:M,externalSlotProps:v?.axisLabel,additionalProps:{style:Ye({},j.typography.body1,{lineHeight:1,fontSize:14,angle:L*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},f)},ownerState:{}});if(c==="none")return null;const O={x:L*x,y:A+_/2},I=u==null?0:Px(u,z.style).height,B=s.domain(),Q=ys(s)?B.length===0:B.some(G4);let te=null;return Q||(te="groups"in t&&Array.isArray(t.groups)?n.jsx(Rye,Ye({},a)):n.jsx(Iye,Ye({},a,{axisLabelHeight:I}))),n.jsxs(Uye,{transform:`translate(${c==="right"?S+k+p:S-p}, 0)`,className:w.root,sx:y,children:[!d&&n.jsx(T,Ye({y1:A,y2:A+_,className:w.line},R)),te,u&&i&&n.jsx("g",{className:w.label,children:n.jsx(M,Ye({},O,z,{text:u}))})]})}function Hye(e){const{yAxis:t,yAxisIds:a}=wr(),s=t[e.axisId??a[0]];return s?n.jsx(Bye,Ye({},e,{axis:s})):(`${e.axisId}`,null)}function qye(e){const{slots:t,slotProps:a}=e,{xAxisIds:s,xAxis:r}=vr(),{yAxisIds:i,yAxis:o}=wr();return n.jsxs(h.Fragment,{children:[s.map(l=>!r[l].position||r[l].position==="none"?null:n.jsx(Pye,{slots:t,slotProps:a,axisId:l},l)),i.map(l=>!o[l].position||o[l].position==="none"?null:n.jsx(Hye,{slots:t,slotProps:a,axisId:l},l))]})}function Gye(e){return Ga("MuiTypography",e)}Sa("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Wye={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Vye=vde(),Yye=e=>{const{align:t,gutterBottom:a,noWrap:s,paragraph:r,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${qn(t)}`,a&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return qa(l,Gye,o)},Qye=ln("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${qn(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(Pu(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,a])=>t!=="inherit"&&a&&typeof a=="object").map(([t,a])=>({props:{variant:t},style:a})),...Object.entries(e.palette).filter(xp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${qn(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),H6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Y4=h.forwardRef(function(t,a){const{color:s,...r}=wd({props:t,name:"MuiTypography"}),i=!Wye[s],o=Vye({...r,...i&&{color:s}}),{align:l="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:f=!1,paragraph:p=!1,variant:x="body1",variantMapping:y=H6,...N}=o,v={...o,align:l,color:s,className:c,component:d,gutterBottom:u,noWrap:f,paragraph:p,variant:x,variantMapping:y},j=d||(p?"p":y[x]||H6[x])||"span",w=Yye(v);return n.jsx(Qye,{as:j,ref:a,className:Lt(w.root,c),...N,ownerState:v,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...N.style}})});function Kye(e){return Ga("MuiChartsTooltip",e)}const of=Sa("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),ij=e=>qa({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},Kye,e);function Xye(){const e=Vn(),t=Ft(e,NG),a=Ft(e,qr),s=JN(),{xAxis:r,xAxisIds:i}=vr(),{yAxis:o,yAxisIds:l}=wr(),{zAxis:c,zAxisIds:d}=I4(),{rotationAxis:u,rotationAxisIds:f}=jW();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=kv(p)?p.xAxisId??i[0]:void 0,y=kv(p)?p.yAxisId??l[0]:void 0,N="zAxisId"in p?p.zAxisId??d[0]:d[0],v=f[0],j=a[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,y!==void 0?o[y]:void 0,N!==void 0?c[N]:void 0)??(()=>""),w={};return x!==void 0&&(w.x=r[x]),y!==void 0&&(w.y=o[y]),v!==void 0&&(w.rotation=u[v]),a[p.type].tooltipGetter({series:p,axesConfig:w,getColor:j,identifier:t})}const ME=ln("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),IE=ln("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${of.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),$E=ln("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),cf=ln(Y4,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${of.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${of.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${of.valueCell}, &.${of.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${of.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function Zye(e){return Ga("MuiChartsLabelMark",e)}const Qm=Sa("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Jye=e=>{const{type:t}=e;return qa({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},Zye,e.classes)},lV=(e,t,a)=>h.forwardRef(function(r,i){const o=Si({props:r,name:e}),l=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},c=Lu(l,o),d=Go(),u=t.classesResolver?.(c,d),f=h.forwardRef(a);return n.jsx(f,Ye({},c,{classes:u,ref:i}))}),ebe=["type","color","className","classes"],tbe=ln("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Qm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Qm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Qm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Qm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Qm.mask} > *`]:{height:"100%",width:"100%"},[`& .${Qm.mask}`]:{height:"100%",width:"100%"}})),Uv=lV("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Jye},function(t,a){const{type:s,color:r,className:i,classes:o}=t,l=hn(t,ebe),c=s;return n.jsx(tbe,Ye({className:Lt(o?.root,i),ownerState:t,"aria-hidden":"true",ref:a},l,{children:n.jsx("div",{className:o?.mask,children:typeof c=="function"?n.jsx(c,{className:o?.fill,color:r}):n.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?n.jsx("circle",{className:o?.fill,r:"12",cx:"12",cy:"12",fill:r}):n.jsx("rect",{className:o?.fill,width:"24",height:"24",fill:r})})})}))});function nbe(e){const{classes:t,sx:a}=e,s=Xye(),r=ij(t);if(!s)return null;if("values"in s){const{label:d,color:u,markType:f}=s;return n.jsx(ME,{sx:a,className:r.paper,children:n.jsxs(IE,{className:r.table,children:[n.jsxs(Y4,{component:"caption",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Uv,{type:f,color:u,className:r.mark})}),d]}),n.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>n.jsxs($E,{className:r.row,children:[n.jsx(cf,{className:Lt(r.labelCell,r.cell),component:"th",children:x}),n.jsx(cf,{className:Lt(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:o,formattedValue:l,markType:c}=s;return n.jsx(ME,{sx:a,className:r.paper,children:n.jsx(IE,{className:r.table,children:n.jsx("tbody",{children:n.jsxs($E,{className:r.row,children:[n.jsxs(cf,{className:Lt(r.labelCell,r.cell),component:"th",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Uv,{type:c,color:i,className:r.mark})}),o]}),n.jsx(cf,{className:Lt(r.valueCell,r.cell),component:"td",children:l})]})})})})}function abe(e){const t=Vn(),a=Ft(t,qr);return h.useMemo(()=>{const r={};return Object.keys(a).forEach(i=>{r[i]=a[i].colorProcessor}),r},[a])}const sbe=I9({themeId:bN});function rbe(){const e=$4(),[t,a]=h.useState(null);return h.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=o=>{o.pointerType!=="mouse"&&a(null)},i=o=>{a({pointerType:o.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function ibe(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const obe="@media (pointer: fine)",lbe=()=>sbe(obe,{defaultMatches:!0}),cV=(e,t)=>t,dV=(e,t)=>t;function uV(e,t,a){return Array.isArray(a)?a.map(s=>M6(t.axis[s],e)):M6(t.axis[a],e)}const mV=Ct(Cx,Sx,Qpe,(e,t,a)=>e===null||t===null?null:Kpe(a)(e,t)),cbe=Ct(mV,tm,cV,(e,t,a=t.axisIds[0])=>e===null?null:uV(e,t,a)),fV=Ct(mV,tm,dV,(e,t,a=t.axisIds)=>e===null?null:uV(e,t,a));Ct(tm,cbe,cV,(e,t,a=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[a]?.data;return s?s[t]:null});Ct(tm,fV,dV,(e,t,a=e.axisIds)=>t===null?null:a.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const hV=wN({memoizeOptions:{resultEqualityCheck:bf}})(fV,tm,(e,t)=>e===null?[]:t.axisIds.map((a,s)=>({axisId:a,dataIndex:e[s]})).filter(({axisId:a,dataIndex:s})=>t.axis[a].triggerTooltip&&s>=0)),dbe=Ct(hV,e=>e.length>0);function y2(e,t,a){const s=e.data?.[t]??null,i=(e.valueFormatter??(o=>e.scaleType==="utc"?ibe(o):o.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:a,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function ube(e={}){const{multipleAxes:t,directions:a}=e,s=Zpe(),r=Jpe(),i=exe(),o=Vn(),l=Ft(o,_G),c=Ft(o,AG),d=Ft(o,hV),u=JN(),{xAxis:f}=vr(),{yAxis:p}=wr(),{zAxis:x,zAxisIds:y}=I4(),{rotationAxis:N}=jW(),v=abe();if(l.length===0&&c.length===0&&d.length===0)return null;const j=[];return(a===void 0||a.includes("x"))&&l.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(y2(f[w],S,"x"))}),(a===void 0||a.includes("y"))&&c.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(y2(p[w],S,"y"))}),(a===void 0||a.includes("rotation"))&&d.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(y2(N[w],S,"rotation"))}),Object.keys(u).filter(FN).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(A=>{const k=S.series[A],_=k.xAxisId??s.id,L=k.yAxisId??r.id,T=j.findIndex(({axisDirection:M,axisId:R})=>M==="x"&&R===_||M==="y"&&R===L);if(T>=0){const M="zAxisId"in k?k.zAxisId:y[0],{dataIndex:R}=j[T],z=v[w]?.(k,f[_],p[L],M?x[M]:void 0)(R)??"",O=k.data[R]??null,I=k.valueFormatter(O,{dataIndex:R}),B=Vi(k.label,"tooltip")??null;j[T].seriesItems.push({seriesId:A,color:z,value:O,formattedValue:I,formattedLabel:B,markType:k.labelMarkType})}}):[]}),Object.keys(u).filter(M4).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(A=>{const k=S.series[A],_=k.rotationAxisId??i?.id,L=j.findIndex(({axisDirection:T,axisId:M})=>T==="rotation"&&M===_);if(L>=0){const{dataIndex:T}=j[L],M=v[w]?.(k)(T)??"",R=k.data[T]??null,z=k.valueFormatter(R,{dataIndex:T}),O=Vi(k.label,"tooltip")??null;j[L].seriesItems.push({seriesId:A,color:M,value:R,formattedValue:z,formattedLabel:O,markType:k.labelMarkType})}}):[]}),t?j:j.length===0?j[0]:null}function mbe(e){return ube(Ye({},e,{multipleAxes:!0}))}function fbe(e){const t=ij(e.classes),a=mbe();return a===null?null:n.jsx(ME,{sx:e.sx,className:t.paper,children:a.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:o,seriesItems:l})=>n.jsxs(IE,{className:t.table,children:[i!=null&&!r.hideTooltip&&n.jsx(Y4,{component:"caption",children:o}),n.jsx("tbody",{children:l.map(({seriesId:c,color:d,formattedValue:u,formattedLabel:f,markType:p})=>u==null?null:n.jsxs($E,{className:t.row,children:[n.jsxs(cf,{className:Lt(t.labelCell,t.cell),component:"th",children:[n.jsx("div",{className:t.markContainer,children:n.jsx(Uv,{type:p,color:d,className:t.mark})}),f||null]}),n.jsx(cf,{className:Lt(t.valueCell,t.cell),component:"td",children:u})]},c))})]},s))})}var gr="top",xi="bottom",yi="right",pr="left",Q4="auto",Dx=[gr,xi,yi,pr],Of="start",Ap="end",hbe="clippingParents",gV="viewport",yg="popper",gbe="reference",q6=Dx.reduce(function(e,t){return e.concat([t+"-"+Of,t+"-"+Ap])},[]),pV=[].concat(Dx,[Q4]).reduce(function(e,t){return e.concat([t,t+"-"+Of,t+"-"+Ap])},[]),pbe="beforeRead",xbe="read",ybe="afterRead",bbe="beforeMain",vbe="main",wbe="afterMain",Nbe="beforeWrite",jbe="write",Cbe="afterWrite",Sbe=[pbe,xbe,ybe,bbe,vbe,wbe,Nbe,jbe,Cbe];function zo(e){return e?(e.nodeName||"").toLowerCase():null}function Fr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Mu(e){var t=Fr(e).Element;return e instanceof t||e instanceof Element}function gi(e){var t=Fr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function K4(e){if(typeof ShadowRoot>"u")return!1;var t=Fr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function _be(e){var t=e.state;Object.keys(t.elements).forEach(function(a){var s=t.styles[a]||{},r=t.attributes[a]||{},i=t.elements[a];!gi(i)||!zo(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(o){var l=r[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function Abe(e){var t=e.state,a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.elements.arrow.style,a.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:a[s]),l=o.reduce(function(c,d){return c[d]="",c},{});!gi(r)||!zo(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Tbe={name:"applyStyles",enabled:!0,phase:"write",fn:_be,effect:Abe,requires:["computeStyles"]};function Po(e){return e.split("-")[0]}var wu=Math.max,Bv=Math.min,Mf=Math.round;function RE(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function xV(){return!/^((?!chrome|android).)*safari/i.test(RE())}function If(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&gi(e)&&(r=e.offsetWidth>0&&Mf(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Mf(s.height)/e.offsetHeight||1);var o=Mu(e)?Fr(e):window,l=o.visualViewport,c=!xV()&&a,d=(s.left+(c&&l?l.offsetLeft:0))/r,u=(s.top+(c&&l?l.offsetTop:0))/i,f=s.width/r,p=s.height/i;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d,x:d,y:u}}function X4(e){var t=If(e),a=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:s}}function yV(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(a&&K4(a)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function ql(e){return Fr(e).getComputedStyle(e)}function Ebe(e){return["table","td","th"].indexOf(zo(e))>=0}function _d(e){return((Mu(e)?e.ownerDocument:e.document)||window.document).documentElement}function oj(e){return zo(e)==="html"?e:e.assignedSlot||e.parentNode||(K4(e)?e.host:null)||_d(e)}function G6(e){return!gi(e)||ql(e).position==="fixed"?null:e.offsetParent}function kbe(e){var t=/firefox/i.test(RE()),a=/Trident/i.test(RE());if(a&&gi(e)){var s=ql(e);if(s.position==="fixed")return null}var r=oj(e);for(K4(r)&&(r=r.host);gi(r)&&["html","body"].indexOf(zo(r))<0;){var i=ql(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Ox(e){for(var t=Fr(e),a=G6(e);a&&Ebe(a)&&ql(a).position==="static";)a=G6(a);return a&&(zo(a)==="html"||zo(a)==="body"&&ql(a).position==="static")?t:a||kbe(e)||t}function Z4(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Zg(e,t,a){return wu(e,Bv(t,a))}function Lbe(e,t,a){var s=Zg(e,t,a);return s>a?a:s}function bV(){return{top:0,right:0,bottom:0,left:0}}function vV(e){return Object.assign({},bV(),e)}function wV(e,t){return t.reduce(function(a,s){return a[s]=e,a},{})}var Pbe=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,vV(typeof t!="number"?t:wV(t,Dx))};function Dbe(e){var t,a=e.state,s=e.name,r=e.options,i=a.elements.arrow,o=a.modifiersData.popperOffsets,l=Po(a.placement),c=Z4(l),d=[pr,yi].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var f=Pbe(r.padding,a),p=X4(i),x=c==="y"?gr:pr,y=c==="y"?xi:yi,N=a.rects.reference[u]+a.rects.reference[c]-o[c]-a.rects.popper[u],v=o[c]-a.rects.reference[c],j=Ox(i),w=j?c==="y"?j.clientHeight||0:j.clientWidth||0:0,S=N/2-v/2,A=f[x],k=w-p[u]-f[y],_=w/2-p[u]/2+S,L=Zg(A,_,k),T=c;a.modifiersData[s]=(t={},t[T]=L,t.centerOffset=L-_,t)}}function Obe(e){var t=e.state,a=e.options,s=a.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||yV(t.elements.popper,r)&&(t.elements.arrow=r))}const Mbe={name:"arrow",enabled:!0,phase:"main",fn:Dbe,effect:Obe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $f(e){return e.split("-")[1]}var Ibe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $be(e,t){var a=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Mf(a*r)/r||0,y:Mf(s*r)/r||0}}function W6(e){var t,a=e.popper,s=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,f=e.isFixed,p=o.x,x=p===void 0?0:p,y=o.y,N=y===void 0?0:y,v=typeof u=="function"?u({x,y:N}):{x,y:N};x=v.x,N=v.y;var j=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),S=pr,A=gr,k=window;if(d){var _=Ox(a),L="clientHeight",T="clientWidth";if(_===Fr(a)&&(_=_d(a),ql(_).position!=="static"&&l==="absolute"&&(L="scrollHeight",T="scrollWidth")),_=_,r===gr||(r===pr||r===yi)&&i===Ap){A=xi;var M=f&&_===k&&k.visualViewport?k.visualViewport.height:_[L];N-=M-s.height,N*=c?1:-1}if(r===pr||(r===gr||r===xi)&&i===Ap){S=yi;var R=f&&_===k&&k.visualViewport?k.visualViewport.width:_[T];x-=R-s.width,x*=c?1:-1}}var z=Object.assign({position:l},d&&Ibe),O=u===!0?$be({x,y:N},Fr(a)):{x,y:N};if(x=O.x,N=O.y,c){var I;return Object.assign({},z,(I={},I[A]=w?"0":"",I[S]=j?"0":"",I.transform=(k.devicePixelRatio||1)<=1?"translate("+x+"px, "+N+"px)":"translate3d("+x+"px, "+N+"px, 0)",I))}return Object.assign({},z,(t={},t[A]=w?N+"px":"",t[S]=j?x+"px":"",t.transform="",t))}function Rbe(e){var t=e.state,a=e.options,s=a.gpuAcceleration,r=s===void 0?!0:s,i=a.adaptive,o=i===void 0?!0:i,l=a.roundOffsets,c=l===void 0?!0:l,d={placement:Po(t.placement),variation:$f(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,W6(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,W6(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const zbe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Rbe,data:{}};var Ky={passive:!0};function Fbe(e){var t=e.state,a=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,l=o===void 0?!0:o,c=Fr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",a.update,Ky)}),l&&c.addEventListener("resize",a.update,Ky),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",a.update,Ky)}),l&&c.removeEventListener("resize",a.update,Ky)}}const Ube={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Fbe,data:{}};var Bbe={left:"right",right:"left",bottom:"top",top:"bottom"};function tv(e){return e.replace(/left|right|bottom|top/g,function(t){return Bbe[t]})}var Hbe={start:"end",end:"start"};function V6(e){return e.replace(/start|end/g,function(t){return Hbe[t]})}function J4(e){var t=Fr(e),a=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:a,scrollTop:s}}function eP(e){return If(_d(e)).left+J4(e).scrollLeft}function qbe(e,t){var a=Fr(e),s=_d(e),r=a.visualViewport,i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;var d=xV();(d||!d&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l+eP(e),y:c}}function Gbe(e){var t,a=_d(e),s=J4(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=wu(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=wu(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+eP(e),c=-s.scrollTop;return ql(r||a).direction==="rtl"&&(l+=wu(a.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function tP(e){var t=ql(e),a=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+s)}function NV(e){return["html","body","#document"].indexOf(zo(e))>=0?e.ownerDocument.body:gi(e)&&tP(e)?e:NV(oj(e))}function Jg(e,t){var a;t===void 0&&(t=[]);var s=NV(e),r=s===((a=e.ownerDocument)==null?void 0:a.body),i=Fr(s),o=r?[i].concat(i.visualViewport||[],tP(s)?s:[]):s,l=t.concat(o);return r?l:l.concat(Jg(oj(o)))}function zE(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Wbe(e,t){var a=If(e,!1,t==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function Y6(e,t,a){return t===gV?zE(qbe(e,a)):Mu(t)?Wbe(t,a):zE(Gbe(_d(e)))}function Vbe(e){var t=Jg(oj(e)),a=["absolute","fixed"].indexOf(ql(e).position)>=0,s=a&&gi(e)?Ox(e):e;return Mu(s)?t.filter(function(r){return Mu(r)&&yV(r,s)&&zo(r)!=="body"}):[]}function Ybe(e,t,a,s){var r=t==="clippingParents"?Vbe(e):[].concat(t),i=[].concat(r,[a]),o=i[0],l=i.reduce(function(c,d){var u=Y6(e,d,s);return c.top=wu(u.top,c.top),c.right=Bv(u.right,c.right),c.bottom=Bv(u.bottom,c.bottom),c.left=wu(u.left,c.left),c},Y6(e,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function jV(e){var t=e.reference,a=e.element,s=e.placement,r=s?Po(s):null,i=s?$f(s):null,o=t.x+t.width/2-a.width/2,l=t.y+t.height/2-a.height/2,c;switch(r){case gr:c={x:o,y:t.y-a.height};break;case xi:c={x:o,y:t.y+t.height};break;case yi:c={x:t.x+t.width,y:l};break;case pr:c={x:t.x-a.width,y:l};break;default:c={x:t.x,y:t.y}}var d=r?Z4(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Of:c[d]=c[d]-(t[u]/2-a[u]/2);break;case Ap:c[d]=c[d]+(t[u]/2-a[u]/2);break}}return c}function Tp(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=s===void 0?e.placement:s,i=a.strategy,o=i===void 0?e.strategy:i,l=a.boundary,c=l===void 0?hbe:l,d=a.rootBoundary,u=d===void 0?gV:d,f=a.elementContext,p=f===void 0?yg:f,x=a.altBoundary,y=x===void 0?!1:x,N=a.padding,v=N===void 0?0:N,j=vV(typeof v!="number"?v:wV(v,Dx)),w=p===yg?gbe:yg,S=e.rects.popper,A=e.elements[y?w:p],k=Ybe(Mu(A)?A:A.contextElement||_d(e.elements.popper),c,u,o),_=If(e.elements.reference),L=jV({reference:_,element:S,placement:r}),T=zE(Object.assign({},S,L)),M=p===yg?T:_,R={top:k.top-M.top+j.top,bottom:M.bottom-k.bottom+j.bottom,left:k.left-M.left+j.left,right:M.right-k.right+j.right},z=e.modifiersData.offset;if(p===yg&&z){var O=z[r];Object.keys(R).forEach(function(I){var B=[yi,xi].indexOf(I)>=0?1:-1,ee=[gr,xi].indexOf(I)>=0?"y":"x";R[I]+=O[ee]*B})}return R}function Qbe(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=a.boundary,i=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,d=c===void 0?pV:c,u=$f(s),f=u?l?q6:q6.filter(function(y){return $f(y)===u}):Dx,p=f.filter(function(y){return d.indexOf(y)>=0});p.length===0&&(p=f);var x=p.reduce(function(y,N){return y[N]=Tp(e,{placement:N,boundary:r,rootBoundary:i,padding:o})[Po(N)],y},{});return Object.keys(x).sort(function(y,N){return x[y]-x[N]})}function Kbe(e){if(Po(e)===Q4)return[];var t=tv(e);return[V6(e),t,V6(t)]}function Xbe(e){var t=e.state,a=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!0:o,c=a.fallbackPlacements,d=a.padding,u=a.boundary,f=a.rootBoundary,p=a.altBoundary,x=a.flipVariations,y=x===void 0?!0:x,N=a.allowedAutoPlacements,v=t.options.placement,j=Po(v),w=j===v,S=c||(w||!y?[tv(v)]:Kbe(v)),A=[v].concat(S).reduce(function(Se,me){return Se.concat(Po(me)===Q4?Qbe(t,{placement:me,boundary:u,rootBoundary:f,padding:d,flipVariations:y,allowedAutoPlacements:N}):me)},[]),k=t.rects.reference,_=t.rects.popper,L=new Map,T=!0,M=A[0],R=0;R<A.length;R++){var z=A[R],O=Po(z),I=$f(z)===Of,B=[gr,xi].indexOf(O)>=0,ee=B?"width":"height",Q=Tp(t,{placement:z,boundary:u,rootBoundary:f,altBoundary:p,padding:d}),te=B?I?yi:pr:I?xi:gr;k[ee]>_[ee]&&(te=tv(te));var W=tv(te),ae=[];if(i&&ae.push(Q[O]<=0),l&&ae.push(Q[te]<=0,Q[W]<=0),ae.every(function(Se){return Se})){M=z,T=!1;break}L.set(z,ae)}if(T)for(var Ee=y?3:1,se=function(me){var ye=A.find(function(re){var De=L.get(re);if(De)return De.slice(0,me).every(function(ve){return ve})});if(ye)return M=ye,"break"},Y=Ee;Y>0;Y--){var pe=se(Y);if(pe==="break")break}t.placement!==M&&(t.modifiersData[s]._skip=!0,t.placement=M,t.reset=!0)}}const Zbe={name:"flip",enabled:!0,phase:"main",fn:Xbe,requiresIfExists:["offset"],data:{_skip:!1}};function Q6(e,t,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-t.height-a.y,right:e.right-t.width+a.x,bottom:e.bottom-t.height+a.y,left:e.left-t.width-a.x}}function K6(e){return[gr,yi,xi,pr].some(function(t){return e[t]>=0})}function Jbe(e){var t=e.state,a=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,o=Tp(t,{elementContext:"reference"}),l=Tp(t,{altBoundary:!0}),c=Q6(o,s),d=Q6(l,r,i),u=K6(c),f=K6(d);t.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const eve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Jbe};function tve(e,t,a){var s=Po(e),r=[pr,gr].indexOf(s)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},t,{placement:e})):a,o=i[0],l=i[1];return o=o||0,l=(l||0)*r,[pr,yi].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function nve(e){var t=e.state,a=e.options,s=e.name,r=a.offset,i=r===void 0?[0,0]:r,o=pV.reduce(function(u,f){return u[f]=tve(f,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=o}const ave={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:nve};function sve(e){var t=e.state,a=e.name;t.modifiersData[a]=jV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const rve={name:"popperOffsets",enabled:!0,phase:"read",fn:sve,data:{}};function ive(e){return e==="x"?"y":"x"}function ove(e){var t=e.state,a=e.options,s=e.name,r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!1:o,c=a.boundary,d=a.rootBoundary,u=a.altBoundary,f=a.padding,p=a.tether,x=p===void 0?!0:p,y=a.tetherOffset,N=y===void 0?0:y,v=Tp(t,{boundary:c,rootBoundary:d,padding:f,altBoundary:u}),j=Po(t.placement),w=$f(t.placement),S=!w,A=Z4(j),k=ive(A),_=t.modifiersData.popperOffsets,L=t.rects.reference,T=t.rects.popper,M=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,R=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),z=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(_){if(i){var I,B=A==="y"?gr:pr,ee=A==="y"?xi:yi,Q=A==="y"?"height":"width",te=_[A],W=te+v[B],ae=te-v[ee],Ee=x?-T[Q]/2:0,se=w===Of?L[Q]:T[Q],Y=w===Of?-T[Q]:-L[Q],pe=t.elements.arrow,Se=x&&pe?X4(pe):{width:0,height:0},me=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:bV(),ye=me[B],re=me[ee],De=Zg(0,L[Q],Se[Q]),ve=S?L[Q]/2-Ee-De-ye-R.mainAxis:se-De-ye-R.mainAxis,ke=S?-L[Q]/2+Ee+De+re+R.mainAxis:Y+De+re+R.mainAxis,Ce=t.elements.arrow&&Ox(t.elements.arrow),de=Ce?A==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,Re=(I=z?.[A])!=null?I:0,Oe=te+ve-Re-de,Ge=te+ke-Re,et=Zg(x?Bv(W,Oe):W,te,x?wu(ae,Ge):ae);_[A]=et,O[A]=et-te}if(l){var mt,Fe=A==="x"?gr:pr,ot=A==="x"?xi:yi,We=_[k],Ke=k==="y"?"height":"width",Ze=We+v[Fe],Me=We-v[ot],je=[gr,pr].indexOf(j)!==-1,ce=(mt=z?.[k])!=null?mt:0,oe=je?Ze:We-L[Ke]-T[Ke]-ce+R.altAxis,U=je?We+L[Ke]+T[Ke]-ce-R.altAxis:Me,V=x&&je?Lbe(oe,We,U):Zg(x?oe:Ze,We,x?U:Me);_[k]=V,O[k]=V-We}t.modifiersData[s]=O}}const lve={name:"preventOverflow",enabled:!0,phase:"main",fn:ove,requiresIfExists:["offset"]};function cve(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function dve(e){return e===Fr(e)||!gi(e)?J4(e):cve(e)}function uve(e){var t=e.getBoundingClientRect(),a=Mf(t.width)/e.offsetWidth||1,s=Mf(t.height)/e.offsetHeight||1;return a!==1||s!==1}function mve(e,t,a){a===void 0&&(a=!1);var s=gi(t),r=gi(t)&&uve(t),i=_d(t),o=If(e,r,a),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!a)&&((zo(t)!=="body"||tP(i))&&(l=dve(t)),gi(t)?(c=If(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=eP(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function fve(e){var t=new Map,a=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){a.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!a.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return e.forEach(function(i){a.has(i.name)||r(i)}),s}function hve(e){var t=fve(e);return Sbe.reduce(function(a,s){return a.concat(t.filter(function(r){return r.phase===s}))},[])}function gve(e){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(e())})})),t}}function pve(e){var t=e.reduce(function(a,s){var r=a[s.name];return a[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,a},{});return Object.keys(t).map(function(a){return t[a]})}var X6={placement:"bottom",modifiers:[],strategy:"absolute"};function Z6(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function xve(e){e===void 0&&(e={});var t=e,a=t.defaultModifiers,s=a===void 0?[]:a,r=t.defaultOptions,i=r===void 0?X6:r;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},X6,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],p=!1,x={state:u,setOptions:function(j){var w=typeof j=="function"?j(u.options):j;N(),u.options=Object.assign({},i,u.options,w),u.scrollParents={reference:Mu(l)?Jg(l):l.contextElement?Jg(l.contextElement):[],popper:Jg(c)};var S=hve(pve([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(A){return A.enabled}),y(),x.update()},forceUpdate:function(){if(!p){var j=u.elements,w=j.reference,S=j.popper;if(Z6(w,S)){u.rects={reference:mve(w,Ox(S),u.options.strategy==="fixed"),popper:X4(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var A=0;A<u.orderedModifiers.length;A++){if(u.reset===!0){u.reset=!1,A=-1;continue}var k=u.orderedModifiers[A],_=k.fn,L=k.options,T=L===void 0?{}:L,M=k.name;typeof _=="function"&&(u=_({state:u,options:T,name:M,instance:x})||u)}}}},update:gve(function(){return new Promise(function(v){x.forceUpdate(),v(u)})}),destroy:function(){N(),p=!0}};if(!Z6(l,c))return x;x.setOptions(d).then(function(v){!p&&d.onFirstUpdate&&d.onFirstUpdate(v)});function y(){u.orderedModifiers.forEach(function(v){var j=v.name,w=v.options,S=w===void 0?{}:w,A=v.effect;if(typeof A=="function"){var k=A({state:u,name:j,instance:x,options:S}),_=function(){};f.push(k||_)}})}function N(){f.forEach(function(v){return v()}),f=[]}return x}}var yve=[Ube,rve,zbe,Tbe,ave,Zbe,lve,Mbe,eve],bve=xve({defaultModifiers:yve});function J6(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function vve(e){return typeof e=="function"?e():e}const wve=h.forwardRef(function(t,a){const{children:s,container:r,disablePortal:i=!1}=t,[o,l]=h.useState(null),c=Ro(h.isValidElement(s)?K9(s):null,a);if(ss(()=>{i||l(vve(r)||document.body)},[r,i]),ss(()=>{if(o&&!i)return J6(a,o),()=>{J6(a,null)}},[a,o,i]),i){if(h.isValidElement(s)){const d={ref:c};return h.cloneElement(s,d)}return s}return o&&Hi.createPortal(s,o)});function Nve(e){return Ga("MuiPopper",e)}Sa("MuiPopper",["root"]);function jve(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function FE(e){return typeof e=="function"?e():e}function Cve(e){return e.nodeType!==void 0}const Sve=e=>{const{classes:t}=e;return qa({root:["root"]},Nve,t)},_ve={},Ave=h.forwardRef(function(t,a){const{anchorEl:s,children:r,direction:i,disablePortal:o,modifiers:l,open:c,placement:d,popperOptions:u,popperRef:f,slotProps:p={},slots:x={},TransitionProps:y,ownerState:N,...v}=t,j=h.useRef(null),w=Ro(j,a),S=h.useRef(null),A=Ro(S,f),k=h.useRef(A);ss(()=>{k.current=A},[A]),h.useImperativeHandle(f,()=>S.current,[]);const _=jve(d,i),[L,T]=h.useState(_),[M,R]=h.useState(FE(s));h.useEffect(()=>{S.current&&S.current.forceUpdate()}),h.useEffect(()=>{s&&R(FE(s))},[s]),ss(()=>{if(!M||!c)return;const ee=W=>{T(W.placement)};let Q=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:W})=>{ee(W)}}];l!=null&&(Q=Q.concat(l)),u&&u.modifiers!=null&&(Q=Q.concat(u.modifiers));const te=bve(M,j.current,{placement:_,...u,modifiers:Q});return k.current(te),()=>{te.destroy(),k.current(null)}},[M,o,l,c,u,_]);const z={placement:L};y!==null&&(z.TransitionProps=y);const O=Sve(t),I=x.root??"div",B=zl({elementType:I,externalSlotProps:p.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:w},ownerState:t,className:O.root});return n.jsx(I,{...B,children:typeof r=="function"?r(z):r})}),Tve=h.forwardRef(function(t,a){const{anchorEl:s,children:r,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:d,open:u,placement:f="bottom",popperOptions:p=_ve,popperRef:x,style:y,transition:N=!1,slotProps:v={},slots:j={},...w}=t,[S,A]=h.useState(!0),k=()=>{A(!1)},_=()=>{A(!0)};if(!c&&!u&&(!N||S))return null;let L;if(i)L=i;else if(s){const R=FE(s);L=R&&Cve(R)?mE(R).body:mE(null).body}const T=!u&&c&&(!N||S)?"none":void 0,M=N?{in:u,onEnter:k,onExited:_}:void 0;return n.jsx(wve,{disablePortal:l,container:L,children:n.jsx(Ave,{anchorEl:s,direction:o,disablePortal:l,modifiers:d,ref:a,open:N?!S:u,placement:f,popperOptions:p,popperRef:x,slotProps:v,slots:j,...w,style:{position:"fixed",top:0,left:0,display:T,...y},TransitionProps:M,children:r})})}),Eve=ln(Tve,{name:"MuiPopper",slot:"Root"})({}),kve=h.forwardRef(function(t,a){const s=gx(),r=wd({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:y,popperOptions:N,popperRef:v,transition:j,slots:w,slotProps:S,...A}=r,k=w?.root??l?.Root,_={anchorEl:i,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:y,popperOptions:N,popperRef:v,transition:j,...A};return n.jsx(Eve,{as:o,direction:s?"rtl":"ltr",slots:{root:k},slotProps:S??c,..._,ref:a})});function Lve(e){const{children:t,defer:a=!1,fallback:s=null}=e,[r,i]=h.useState(!1);return ss(()=>{a||i(!0)},[a]),h.useEffect(()=>{a&&i(!0)},[a]),r?t:s}function eR(e){let t,a;const s=()=>{a=null,e(...t)};function r(...i){t=i,a||(a=requestAnimationFrame(s))}return r.clear=()=>{a&&(cancelAnimationFrame(a),a=null)},r}function Pve(){const e=Vn(),t=Ft(e,NW),a=Ft(e,Wo);return t!==void 0?"polar":a!==void 0?"cartesian":"none"}const Dve=["trigger","position","anchor","classes","children"],tR=()=>!1;function Ove(e,t,a){return a?tR:e==="item"?Wge:t==="polar"?dbe:t==="cartesian"?Xge:tR}const Mve=ln(kve,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function Ive(e){const t=Si({props:e,name:"MuiChartsTooltipContainer"}),{trigger:a="axis",position:s,anchor:r="pointer",classes:i,children:o}=t,l=hn(t,Dve),c=$4(),d=ij(i),u=rbe(),f=lbe(),p=h.useRef(null),x=NN(()=>({x:0,y:0})),y=Pve(),N=Vn(),v=Ft(N,rpe),j=Ft(N,Ove(a,y,v)),S=Ft(N,_x)==="keyboard"?"node":r,A=Ft(N,a==="item"&&S==="node"?Vge:()=>null,s);h.useEffect(()=>{const M=c.current;if(M===null)return()=>{};if(A!==null){const O=eR(()=>{x.current={x:M.getBoundingClientRect().left+(A?.x??0),y:M.getBoundingClientRect().top+(A?.y??0)},p.current?.update()});return O(),()=>O.clear()}const R=eR((O,I)=>{x.current={x:O,y:I},p.current?.update()}),z=O=>{R(O.clientX,O.clientY)};return M.addEventListener("pointerdown",z),M.addEventListener("pointermove",z),M.addEventListener("pointerenter",z),()=>{M.removeEventListener("pointerdown",z),M.removeEventListener("pointermove",z),M.removeEventListener("pointerenter",z),R.clear()}},[c,x,A]);const k=h.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),_=u?.pointerType==="mouse"||f,L=u?.pointerType==="touch"||!f,T=h.useMemo(()=>[{name:"offset",options:{offset:()=>L?[0,64]:[0,8]}},..._?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[_,L]);return a==="none"?null:n.jsx(Lve,{children:j&&n.jsx(Mve,Ye({},l,{className:d?.root,open:j,placement:l.placement??s??(_?"right-start":"top"),popperRef:p,anchorEl:k,modifiers:T,children:o}))})}function $ve(e){const{classes:t,trigger:a="axis"}=e,s=ij(t);return n.jsx(Ive,Ye({},e,{classes:t,children:a==="axis"?n.jsx(fbe,{classes:s}):n.jsx(nbe,{classes:s})}))}const Rve=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function zve(e){return Ga("MuiChartsLegend",e)}const Fve=e=>{const{classes:t,direction:a}=e;return qa({root:["root",a],item:["item"],mark:["mark"],label:["label"],series:["series"]},zve,t)},nR=Sa("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),Uve=["slots","slotProps"],Bve=["ownerState"],Hve=(e,t,a,s)=>{function r(i,o){const l=Si({props:i,name:e}),c=typeof a.defaultProps=="function"?a.defaultProps(l):a.defaultProps??{},d=Lu(c,l),u=d,{slots:f,slotProps:p}=u,x=hn(u,Uve),y=Go(),N=a.classesResolver?.(d,y),v=f?.[t]??s,j=a.propagateSlots&&!f?.[t],w=zl({elementType:v,externalSlotProps:p?.[t],additionalProps:Ye({},x,{classes:N},j&&{slots:f,slotProps:p}),ownerState:{}}),S=hn(w,Bve),A=Ye({},S);for(const k of a.omitProps??[])delete A[k];return n.jsx(v,Ye({},A,{ref:o}))}return h.forwardRef(r)};function qve(e){return Ga("MuiChartsLabel",e)}Sa("MuiChartsLabel",["root"]);const Gve=e=>qa({root:["root"]},qve,e.classes),Wve=["children","className","classes"],Vve=lV("MuiChartsLabel",{classesResolver:Gve},function(t,a){const{children:s,className:r,classes:i}=t,o=hn(t,Wve);return n.jsx("span",Ye({className:Lt(i?.root,r),ref:a},o,{children:s}))}),Yve=["direction","onItemClick","className","classes"],Qve=ln("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>Ye({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${nR.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${nR.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),Kve=Hve("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Fve},h.forwardRef(function(t,a){const s=gxe(),{onItemClick:r,className:i,classes:o}=t,l=hn(t,Yve);if(s.items.length===0)return null;const c=r?"button":"div";return n.jsx(Qve,Ye({className:Lt(o?.root,i),ref:a},l,{ownerState:t,children:s.items.map((d,u)=>n.jsx("li",{className:o?.item,"data-series":d.id,children:n.jsxs(c,{className:o?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(f=>r(f,Rve(d),u)):void 0,children:[n.jsx(Uv,{className:o?.mark,color:d.color,type:d.markType}),n.jsx(Vve,{className:o?.label,children:d.label})]})},d.id))}))}));function Xve(e){return Ga("MuiChartsAxisHighlight",e)}Sa("MuiChartsAxisHighlight",["root"]);const Hv=ln("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:Ye({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:Ye({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function Zve(e){const{type:t,classes:a}=e,{left:s,width:r}=Ai(),i=Vn(),o=Ft(i,ope),l=Ft(i,Xs);return o.length===0?null:o.map(({axisId:c,value:d})=>{const f=l.axis[c].scale,p=ah(f),x=t==="band"&&d!==null&&ys(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Hv,{d:`M ${s} ${f(d)-(f.step()-f.bandwidth())/2} l 0 ${f.step()} l ${r} 0 l 0 ${-f.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Hv,{d:`M ${s} ${p(d)} L ${s+r} ${p(d)}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Jve(e){const{type:t,classes:a}=e,{top:s,height:r}=Ai(),i=Vn(),o=Ft(i,ipe),l=Ft(i,Ks);return o.length===0?null:o.map(({axisId:c,value:d})=>{const f=l.axis[c].scale,p=ah(f),x=t==="band"&&d!==null&&ys(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Hv,{d:`M ${f(d)-(f.step()-f.bandwidth())/2} ${s} l ${f.step()} 0 l 0 ${r} l ${-f.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Hv,{d:`M ${p(d)} ${s} L ${p(d)} ${s+r}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const ewe=()=>qa({root:["root"]},Xve);function twe(e){const{x:t,y:a}=e,s=ewe();return n.jsxs(h.Fragment,{children:[t&&t!=="none"&&n.jsx(Jve,{type:t,classes:s}),a&&a!=="none"&&n.jsx(Zve,{type:a,classes:s})]})}function nwe(e){const{id:t,offset:a}=e,{left:s,top:r,width:i,height:o}=Ai(),l=Ye({top:0,right:0,bottom:0,left:0},a);return n.jsx("clipPath",{id:t,children:n.jsx("rect",{x:s-l.left,y:r-l.top,width:i+l.left+l.right,height:o+l.top+l.bottom})})}const awe=parseInt(h.version,10),swe=["x","y","id","classes","color","shape"];function rwe(e){return Ga("MuiHighlightElement",e)}Sa("MuiHighlightElement",["root"]);const iwe=e=>{const{classes:t,id:a}=e,s={root:["root",`series-${a}`]};return qa(s,rwe,t)};function owe(e){const{x:t,y:a,color:s,shape:r}=e,i=hn(e,swe),o=iwe(e),l=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:L4(JG[FW(r)])()},d=awe>18?{transformOrigin:`${t} ${a}`}:{"transform-origin":`${t} ${a}`};return n.jsx(l,Ye({pointerEvents:"none",className:o.root,transform:`translate(${t} ${a})`,fill:s},d,c,i))}const lwe=["slots","slotProps"];function cwe(e){const{slots:t,slotProps:a}=e,s=hn(e,lwe),r=Lx(),{xAxis:i,xAxisIds:o}=vr(),{yAxis:l,yAxisIds:c}=wr(),{instance:d}=Gr(),u=Vn(),f=Ft(u,LG);if(f.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,y=o[0],N=c[0],v=t?.lineHighlight??owe;return n.jsx("g",Ye({},s,{children:f.flatMap(({dataIndex:j,axisId:w})=>x.flatMap(({ids:S})=>S.flatMap(A=>{const{xAxisId:k=y,yAxisId:_=N,stackedData:L,data:T,disableHighlight:M,shape:R="circle"}=p[A];if(M||T[j]==null||w!==k)return null;const z=ah(i[k].scale),O=l[_].scale,I=i[k].data;if(I===void 0)throw new Error(`MUI X Charts: ${k===CN?"The first `xAxis`":`The x-axis with id "${k}"`} should have data property to be able to display a line plot.`);const B=z(I[j]),ee=O(L[j][1]);if(!d.isPointInside(B,ee))return null;const Q=B4(p[A],i[k],l[_]);return n.jsx(v,Ye({id:A,color:Q(j),x:B,y:ee,shape:R},a?.lineHighlight),`${A}`)})))}))}function dwe(e){return Ga("MuiChartsGrid",e)}const aR=Sa("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),uwe=ln("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${aR.verticalLine}`]:t.verticalLine},{[`&.${aR.horizontalLine}`]:t.horizontalLine},t.root]})({}),CV=ln("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function mwe(e){const{instance:t}=Gr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=sj({scale:o,tickNumber:l,tickInterval:c,direction:"x"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isXInside(f)?n.jsx(CV,{y1:s,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${u?.getTime?.()??u}`):null)})}function fwe(e){const{instance:t}=Gr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=sj({scale:o,tickNumber:l,tickInterval:c,direction:"y"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isYInside(f)?n.jsx(CV,{y1:f,y2:f,x1:s,x2:r,className:i.horizontalLine},`horizontal-${u?.getTime?.()??u}`):null)})}const hwe=["vertical","horizontal"],gwe=({classes:e})=>qa({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},dwe,e);function pwe(e){const t=Si({props:e,name:"MuiChartsGrid"}),a=Ai(),{vertical:s,horizontal:r}=t,i=hn(t,hwe),{xAxis:o,xAxisIds:l}=vr(),{yAxis:c,yAxisIds:d}=wr(),u=gwe(t),f=c[d[0]],p=o[l[0]];return n.jsxs(uwe,Ye({},i,{className:u.root,children:[s&&n.jsx(mwe,{axis:p,start:a.top,end:a.height+a.top,classes:u}),r&&n.jsx(fwe,{axis:f,start:a.left,end:a.width+a.left,classes:u})]}))}const xwe=["message"],ywe=ln("text")(({theme:e})=>Ye({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function bwe(e){const{message:t}=e,a=hn(e,xwe),{top:s,left:r,height:i,width:o}=Ai(),{localeText:l}=DW();return n.jsx(ywe,Ye({x:r+o/2,y:s+i/2},a,{children:t??l.loading}))}const vwe=["message"],wwe=ln("text")(({theme:e})=>Ye({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Nwe(e){const{message:t}=e,a=hn(e,vwe),{top:s,left:r,height:i,width:o}=Ai(),{localeText:l}=DW();return n.jsx(wwe,Ye({x:r+o/2,y:s+i/2},a,{children:t??l.noData}))}function jwe(){const e=JN();return Object.values(e).every(t=>{if(!t)return!0;const{series:a,seriesOrder:s}=t;return s.every(r=>{const i=a[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function Cwe(e){const t=jwe();if(e.loading){const a=e.slots?.loadingOverlay??bwe;return n.jsx(a,Ye({},e.slotProps?.loadingOverlay))}if(t){const a=e.slots?.noDataOverlay??Nwe;return n.jsx(a,Ye({},e.slotProps?.noDataOverlay))}return null}const Swe=[Tx,Ax,jx,th,Ex,HN],_we=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],Awe=e=>{const{xAxis:t,yAxis:a,series:s,width:r,height:i,margin:o,colors:l,dataset:c,sx:d,onAreaClick:u,onLineClick:f,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:y,grid:N,children:v,slots:j,slotProps:w,skipAnimation:S,loading:A,highlightedItem:k,onHighlightChange:_,className:L,brushConfig:T}=e,M=hn(e,_we),z=`${yN()}-clip-path`,O=h.useMemo(()=>s.map(ye=>Ye({disableHighlight:!!y,type:"line"},ye)),[y,s]),I=Ye({},M,{series:O,width:r,height:i,margin:o,colors:l,dataset:c,xAxis:t??[{id:CN,scaleType:"point",data:Array.from({length:Math.max(...s.map(ye=>(ye.data??c??[]).length))},(ye,re)=>re)}],yAxis:a,highlightedItem:k,onHighlightChange:_,disableAxisListener:w?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:L,skipAnimation:S,brushConfig:T,plugins:Swe}),B={vertical:N?.vertical,horizontal:N?.horizontal},ee={clipPath:`url(#${z})`},Q={id:z},te={slots:j,slotProps:w,onItemClick:u},W={slots:j,slotProps:w,onItemClick:f},ae={slots:j,slotProps:w,onItemClick:p,skipAnimation:S},Ee={slots:j,slotProps:w,loading:A},se={slots:j,slotProps:w},Y=Ye({x:"line"},x),pe={slots:j,slotProps:w},Se={slots:j,slotProps:w};return{chartsWrapperProps:{sx:d,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:I,gridProps:B,clipPathProps:Q,clipPathGroupProps:ee,areaPlotProps:te,linePlotProps:W,markPlotProps:ae,overlayProps:Ee,chartsAxisProps:se,axisHighlightProps:Y,lineHighlightPlotProps:pe,legendProps:Se,children:v}};function Twe(e,t,a,s,r,i,o,l,c,d,u,f=1/0,p=1){const x=s.copy(),y=r.copy();x.range([0,1]),y.range([0,1]);const N=function(T){const M=x(a[T].x),R=y(a[T].y);return M>=i&&M<=o&&R>=l&&R<=c},v=s.range()[1]-s.range()[0],j=r.range()[1]-r.range()[0],w=v*v,S=j*j;function A(L,T){return w*L*L+S*T*T}const k=x(sR(s,d,L=>a[L]?.x)),_=y(sR(r,u,L=>a[L]?.y));return e.neighbors(k,_,p,f!=null?f*f:1/0,N,A)}function sR(e,t,a){if(ys(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a(s)}return e.invert(t)}const lj=({svgRef:e,params:t,store:a,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:o}=t,l=Ft(a,br),{axis:c,axisIds:d}=Ft(a,Ks),{axis:u,axisIds:f}=Ft(a,Xs),p=Ft(a,cG),{series:x,seriesOrder:y}=Ft(a,pa)?.scatter??{},N=Ft(a,p?Lge:Pge),v=d[0],j=f[0];ss(()=>{a.set("voronoi",{isVoronoiEnabled:!r})},[a,r]),h.useEffect(()=>{if(e.current===null||r)return;const A=e.current;function k(B){const ee=Sp(A,B);if(!s.isPointInside(ee.x,ee.y))return"outside-chart";let Q;for(const te of y??[]){const W=(x??{})[te],ae=N.get(te);if(!ae)continue;const Ee=W.xAxisId??v,se=W.yAxisId??j,Y=C6(a.getSnapshot(),Ee),pe=C6(a.getSnapshot(),se),Se=i==="item"?W.markerSize:i,me=(Y?.start??0)/100,ye=(Y?.end??100)/100,re=(pe?.start??0)/100,De=(pe?.end??100)/100,ve=c[Ee].scale,ke=u[se].scale,Ce=Twe(ae,l,W.data,ve,ke,me,ye,re,De,ee.x,ee.y,Se)[0];if(Ce===void 0)continue;const de=W.data[Ce],Re=ve(de.x),Oe=ke(de.y),Ge=(Re-ee.x)**2+(Oe-ee.y)**2;(Q===void 0||Ge<Q.distanceSq)&&(Q={dataIndex:Ce,seriesId:te,distanceSq:Ge})}return Q===void 0?"no-point-found":{seriesId:Q.seriesId,dataIndex:Q.dataIndex}}const _=s.addInteractionListener("moveEnd",B=>{B.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),L=s.addInteractionListener("panEnd",B=>{B.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),T=s.addInteractionListener("quickPressEnd",B=>{!B.detail.activeGestures.move&&!B.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),M=B=>{const ee=k(B.detail.srcEvent);if(ee==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(ee==="outside-voronoi-max-radius"||ee==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:Q,dataIndex:te}=ee;s.setItemInteraction?.({type:"scatter",seriesId:Q,dataIndex:te},{interaction:"pointer"}),s.setHighlight?.({seriesId:Q,dataIndex:te})},R=s.addInteractionListener("tap",B=>{const ee=k(B.detail.srcEvent);if(typeof ee!="string"&&o){const{seriesId:Q,dataIndex:te}=ee;o(B.detail.srcEvent,{type:"scatter",seriesId:Q,dataIndex:te})}}),z=s.addInteractionListener("move",M),O=s.addInteractionListener("pan",M),I=s.addInteractionListener("quickPress",M);return()=>{R.cleanup(),z.cleanup(),_.cleanup(),O.cleanup(),L.cleanup(),I.cleanup(),T.cleanup()}},[e,u,c,i,o,r,l,s,y,x,N,v,j,a]);const w=hs(()=>{a.set("voronoi",{isVoronoiEnabled:!0})}),S=hs(()=>{a.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:w,disableVoronoi:S}}};lj.getDefaultizedParams=({params:e})=>Ye({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});lj.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});lj.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const SV=[Tx,Ax,jx,th,Ex,lj,HN],Ewe=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],kwe=(e,t)=>{const a=e,{width:s,height:r,margin:i,children:o,series:l,colors:c,dataset:d,desc:u,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:y,voronoiMaxRadius:N,onItemClick:v,disableAxisListener:j,highlightedItem:w,onHighlightChange:S,sx:A,title:k,xAxis:_,yAxis:L,zAxis:T,rotationAxis:M,radiusAxis:R,skipAnimation:z,seriesConfig:O,plugins:I,localeText:B,slots:ee,slotProps:Q,experimentalFeatures:te,enableKeyboardNavigation:W,brushConfig:ae}=a,Ee=hn(a,Ewe),se=Ye({title:k,desc:u,sx:A,ref:t},Ee);return{chartDataProviderProps:{margin:i,series:l,colors:c,dataset:d,disableAxisListener:j,highlightedItem:w,onHighlightChange:S,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:y,voronoiMaxRadius:N,onItemClick:v,xAxis:_,yAxis:L,zAxis:T,rotationAxis:M,radiusAxis:R,skipAnimation:z,width:s,height:r,localeText:B,seriesConfig:O,experimentalFeatures:te,enableKeyboardNavigation:W,brushConfig:ae,plugins:I??SV,slots:ee,slotProps:Q},chartsSurfaceProps:se,children:o}};function rR(e){try{return e.matches(":focus-visible")}catch{}return!1}class qv{static create(){return new qv}static use(){const t=NN(qv.create).current,[a,s]=h.useState(!1);return t.shouldMount=a,t.setShouldMount=s,h.useEffect(t.mountEffect,[a]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Pwe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Lwe(){return qv.use()}function Pwe(){let e,t;const a=new Promise((s,r)=>{e=s,t=r});return a.resolve=e,a.reject=t,a}class nP{static create(){return new nP}currentId=null;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Dwe(){const e=NN(nP.create).current;return nq(e.disposeEffect),e}function Owe(e){const{className:t,classes:a,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:d}=e,[u,f]=h.useState(!1),p=Lt(t,a.ripple,a.rippleVisible,s&&a.ripplePulsate),x={width:o,height:o,top:-(o/2)+i,left:-(o/2)+r},y=Lt(a.child,u&&a.childLeaving,s&&a.childPulsate);return!l&&!u&&f(!0),h.useEffect(()=>{if(!l&&c!=null){const N=setTimeout(c,d);return()=>{clearTimeout(N)}}},[c,l,d]),n.jsx("span",{className:p,style:x,children:n.jsx("span",{className:y})})}const ci=Sa("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),UE=550,Mwe=80,Iwe=hx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,$we=hx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Rwe=hx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,zwe=ln("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Fwe=ln(Owe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ci.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Iwe};
    animation-duration: ${UE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ci.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ci.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ci.childLeaving} {
    opacity: 0;
    animation-name: ${$we};
    animation-duration: ${UE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ci.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Rwe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Uwe=h.forwardRef(function(t,a){const s=wd({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...l}=s,[c,d]=h.useState([]),u=h.useRef(0),f=h.useRef(null);h.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const p=h.useRef(!1),x=Dwe(),y=h.useRef(null),N=h.useRef(null),v=h.useCallback(A=>{const{pulsate:k,rippleX:_,rippleY:L,rippleSize:T,cb:M}=A;d(R=>[...R,n.jsx(Fwe,{classes:{ripple:Lt(i.ripple,ci.ripple),rippleVisible:Lt(i.rippleVisible,ci.rippleVisible),ripplePulsate:Lt(i.ripplePulsate,ci.ripplePulsate),child:Lt(i.child,ci.child),childLeaving:Lt(i.childLeaving,ci.childLeaving),childPulsate:Lt(i.childPulsate,ci.childPulsate)},timeout:UE,pulsate:k,rippleX:_,rippleY:L,rippleSize:T},u.current)]),u.current+=1,f.current=M},[i]),j=h.useCallback((A={},k={},_=()=>{})=>{const{pulsate:L=!1,center:T=r||k.pulsate,fakeElement:M=!1}=k;if(A?.type==="mousedown"&&p.current){p.current=!1;return}A?.type==="touchstart"&&(p.current=!0);const R=M?null:N.current,z=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let O,I,B;if(T||A===void 0||A.clientX===0&&A.clientY===0||!A.clientX&&!A.touches)O=Math.round(z.width/2),I=Math.round(z.height/2);else{const{clientX:ee,clientY:Q}=A.touches&&A.touches.length>0?A.touches[0]:A;O=Math.round(ee-z.left),I=Math.round(Q-z.top)}if(T)B=Math.sqrt((2*z.width**2+z.height**2)/3),B%2===0&&(B+=1);else{const ee=Math.max(Math.abs((R?R.clientWidth:0)-O),O)*2+2,Q=Math.max(Math.abs((R?R.clientHeight:0)-I),I)*2+2;B=Math.sqrt(ee**2+Q**2)}A?.touches?y.current===null&&(y.current=()=>{v({pulsate:L,rippleX:O,rippleY:I,rippleSize:B,cb:_})},x.start(Mwe,()=>{y.current&&(y.current(),y.current=null)})):v({pulsate:L,rippleX:O,rippleY:I,rippleSize:B,cb:_})},[r,v,x]),w=h.useCallback(()=>{j({},{pulsate:!0})},[j]),S=h.useCallback((A,k)=>{if(x.clear(),A?.type==="touchend"&&y.current){y.current(),y.current=null,x.start(0,()=>{S(A,k)});return}y.current=null,d(_=>_.length>0?_.slice(1):_),f.current=k},[x]);return h.useImperativeHandle(a,()=>({pulsate:w,start:j,stop:S}),[w,j,S]),n.jsx(zwe,{className:Lt(ci.root,i.root,o),ref:N,...l,children:n.jsx(RL,{component:null,exit:!0,children:c})})});function Bwe(e){return Ga("MuiButtonBase",e)}const Hwe=Sa("MuiButtonBase",["root","disabled","focusVisible"]),qwe=e=>{const{disabled:t,focusVisible:a,focusVisibleClassName:s,classes:r}=e,o=qa({root:["root",t&&"disabled",a&&"focusVisible"]},Bwe,r);return a&&s&&(o.root+=` ${s}`),o},Gwe=ln("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Hwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),_V=h.forwardRef(function(t,a){const s=wd({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:y="a",onBlur:N,onClick:v,onContextMenu:j,onDragLeave:w,onFocus:S,onFocusVisible:A,onKeyDown:k,onKeyUp:_,onMouseDown:L,onMouseLeave:T,onMouseUp:M,onTouchEnd:R,onTouchMove:z,onTouchStart:O,tabIndex:I=0,TouchRippleProps:B,touchRippleRef:ee,type:Q,...te}=s,W=h.useRef(null),ae=Lwe(),Ee=Ro(ae.ref,ee),[se,Y]=h.useState(!1);d&&se&&Y(!1),h.useImperativeHandle(r,()=>({focusVisible:()=>{Y(!0),W.current.focus()}}),[]);const pe=ae.shouldMount&&!u&&!d;h.useEffect(()=>{se&&p&&!u&&ae.pulsate()},[u,p,se,ae]);const Se=gl(ae,"start",L,f),me=gl(ae,"stop",j,f),ye=gl(ae,"stop",w,f),re=gl(ae,"stop",M,f),De=gl(ae,"stop",Ze=>{se&&Ze.preventDefault(),T&&T(Ze)},f),ve=gl(ae,"start",O,f),ke=gl(ae,"stop",R,f),Ce=gl(ae,"stop",z,f),de=gl(ae,"stop",Ze=>{rR(Ze.target)||Y(!1),N&&N(Ze)},!1),Re=hs(Ze=>{W.current||(W.current=Ze.currentTarget),rR(Ze.target)&&(Y(!0),A&&A(Ze)),S&&S(Ze)}),Oe=()=>{const Ze=W.current;return c&&c!=="button"&&!(Ze.tagName==="A"&&Ze.href)},Ge=hs(Ze=>{p&&!Ze.repeat&&se&&Ze.key===" "&&ae.stop(Ze,()=>{ae.start(Ze)}),Ze.target===Ze.currentTarget&&Oe()&&Ze.key===" "&&Ze.preventDefault(),k&&k(Ze),Ze.target===Ze.currentTarget&&Oe()&&Ze.key==="Enter"&&!d&&(Ze.preventDefault(),v&&v(Ze))}),et=hs(Ze=>{p&&Ze.key===" "&&se&&!Ze.defaultPrevented&&ae.stop(Ze,()=>{ae.pulsate(Ze)}),_&&_(Ze),v&&Ze.target===Ze.currentTarget&&Oe()&&Ze.key===" "&&!Ze.defaultPrevented&&v(Ze)});let mt=c;mt==="button"&&(te.href||te.to)&&(mt=y);const Fe={};mt==="button"?(Fe.type=Q===void 0?"button":Q,Fe.disabled=d):(!te.href&&!te.to&&(Fe.role="button"),d&&(Fe["aria-disabled"]=d));const ot=Ro(a,W),We={...s,centerRipple:i,component:c,disabled:d,disableRipple:u,disableTouchRipple:f,focusRipple:p,tabIndex:I,focusVisible:se},Ke=qwe(We);return n.jsxs(Gwe,{as:mt,className:Lt(Ke.root,l),ownerState:We,onBlur:de,onClick:v,onContextMenu:me,onFocus:Re,onKeyDown:Ge,onKeyUp:et,onMouseDown:Se,onMouseLeave:De,onMouseUp:re,onDragLeave:ye,onTouchEnd:ke,onTouchMove:Ce,onTouchStart:ve,ref:ot,tabIndex:d?-1:I,type:Q,...Fe,...te,children:[o,pe?n.jsx(Uwe,{ref:Ee,center:i,...B}):null]})});function gl(e,t,a,s=!1){return hs(r=>(a&&a(r),s||e[t](r),!0))}function Wwe(e){return Ga("MuiIconButton",e)}const iR=Sa("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Vwe=e=>{const{classes:t,disabled:a,color:s,edge:r,size:i,loading:o}=e,l={root:["root",o&&"loading",a&&"disabled",s!=="default"&&`color${qn(s)}`,r&&`edge${qn(r)}`,`size${qn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return qa(l,Wwe,t)},Ywe=ln(_V,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.loading&&t.loading,a.color!=="default"&&t[`color${qn(a.color)}`],a.edge&&t[`edge${qn(a.edge)}`],t[`size${qn(a.size)}`]]}})(Pu(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Pu(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(xp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(xp()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${iR.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${iR.loading}`]:{color:"transparent"}}))),Qwe=ln("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Kwe=h.forwardRef(function(t,a){const s=wd({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:f,loading:p=null,loadingIndicator:x,...y}=s,N=yN(f),v=x??n.jsx(zL,{"aria-labelledby":N,color:"inherit",size:16}),j={...s,edge:r,color:l,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:v,size:u},w=Vwe(j);return n.jsxs(Ywe,{id:p?N:f,className:Lt(w.root,o),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:a,...y,ownerState:j,children:[typeof p=="boolean"&&n.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:n.jsx(Qwe,{className:w.loadingIndicator,ownerState:j,children:p&&v})}),i]})});function Xwe(e){return Ga("MuiButton",e)}const Wd=Sa("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Zwe=h.createContext({}),Jwe=h.createContext(void 0),eNe=e=>{const{color:t,disableElevation:a,fullWidth:s,size:r,variant:i,loading:o,loadingPosition:l,classes:c}=e,d={root:["root",o&&"loading",i,`${i}${qn(t)}`,`size${qn(r)}`,`${i}Size${qn(r)}`,`color${qn(t)}`,a&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${qn(l)}`],startIcon:["icon","startIcon",`iconSize${qn(r)}`],endIcon:["icon","endIcon",`iconSize${qn(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=qa(d,Xwe,c);return{...c,...u}},AV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],tNe=ln(_V,{shouldForwardProp:e=>G9(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${qn(a.color)}`],t[`size${qn(a.size)}`],t[`${a.variant}Size${qn(a.size)}`],a.color==="inherit"&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth,a.loading&&t.loading]}})(Pu(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Wd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Wd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Wd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Wd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(xp()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Wd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Wd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Wd.loading}`]:{color:"transparent"}}}]}})),nNe=ln("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,a.loading&&t.startIconLoadingStart,t[`iconSize${qn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...AV]})),aNe=ln("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,a.loading&&t.endIconLoadingEnd,t[`iconSize${qn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...AV]})),sNe=ln("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),oR=ln("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),rNe=h.forwardRef(function(t,a){const s=h.useContext(Zwe),r=h.useContext(Jwe),i=Lu(s,t),o=wd({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:u,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:y,focusVisibleClassName:N,fullWidth:v=!1,id:j,loading:w=null,loadingIndicator:S,loadingPosition:A="center",size:k="medium",startIcon:_,type:L,variant:T="text",...M}=o,R=yN(j),z=S??n.jsx(zL,{"aria-labelledby":R,color:"inherit",size:16}),O={...o,color:c,component:d,disabled:f,disableElevation:p,disableFocusRipple:x,fullWidth:v,loading:w,loadingIndicator:z,loadingPosition:A,size:k,type:L,variant:T},I=eNe(O),B=(_||w&&A==="start")&&n.jsx(nNe,{className:I.startIcon,ownerState:O,children:_||n.jsx(oR,{className:I.loadingIconPlaceholder,ownerState:O})}),ee=(y||w&&A==="end")&&n.jsx(aNe,{className:I.endIcon,ownerState:O,children:y||n.jsx(oR,{className:I.loadingIconPlaceholder,ownerState:O})}),Q=r||"",te=typeof w=="boolean"?n.jsx("span",{className:I.loadingWrapper,style:{display:"contents"},children:w&&n.jsx(sNe,{className:I.loadingIndicator,ownerState:O,children:z})}):null;return n.jsxs(tNe,{ownerState:O,className:Lt(s.className,I.root,u,Q),component:d,disabled:f||w,focusRipple:!x,focusVisibleClassName:Lt(I.focusVisible,N),ref:a,type:L,id:w?R:j,...M,classes:I,children:[B,A!=="end"&&te,l,A==="end"&&te,ee]})}),iNe={baseButton:rNe,baseIconButton:Kwe},oNe={},lNe=Ye({},iNe,oNe),cNe=h.createContext(null);function dNe(e){const{slots:t,slotProps:a={},defaultSlots:s,children:r}=e,i=h.useMemo(()=>({slots:Ye({},s,t),slotProps:a}),[s,t,a]);return n.jsx(cNe.Provider,{value:i,children:r})}const uNe=["children","localeText","plugins","seriesConfig","slots","slotProps"],mNe=e=>{const t=Si({props:e,name:"MuiChartDataProvider"}),{children:a,localeText:s,plugins:r=SV,seriesConfig:i,slots:o,slotProps:l}=t,c=hn(t,uNe),d=Go(),u={plugins:r,seriesConfig:i,pluginParams:Ye({theme:d.palette.mode},c)};return{children:a,localeText:s,chartProviderProps:u,slots:o,slotProps:l}};function fNe(e){const{children:t,localeText:a,chartProviderProps:s,slots:r,slotProps:i}=mNe(e);return n.jsx(v0e,Ye({},s,{children:n.jsx(Ixe,{localeText:a,children:n.jsx(dNe,{slots:r,slotProps:i,defaultSlots:lNe,children:t})})}))}function lR(e){const{isReversed:t,gradientId:a,size:s,direction:r,scale:i,colorMap:o}=e;return s<=0?null:n.jsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((l,c)=>{const d=i(l);if(d===void 0)return null;const u=t?1-d/s:d/s;return Number.isNaN(u)?null:n.jsxs(h.Fragment,{children:[n.jsx("stop",{offset:u,stopColor:o.colors[c],stopOpacity:1}),n.jsx("stop",{offset:u,stopColor:o.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const hNe=10;function cR(e){const{gradientUnits:t,isReversed:a,gradientId:s,size:r,direction:i,scale:o,colorScale:l,colorMap:c}=e,d=[c.min??0,c.max??100],u=d.map(o).filter(y=>y!==void 0);if(u.length!==2)return null;const f=typeof d[0]=="number"?Af(d[0],d[1]):e4(d[0],d[1]),p=Math.round((Math.max(...u)-Math.min(...u))/hNe),x=`${d[0]}-${d[1]}-`;return n.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${a?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(y,N)=>{const v=f(N/p);if(v===void 0)return null;const j=o(v);if(j===void 0)return null;const w=a?1-j/r:j/r,S=l(v);return S===null?null:n.jsx("stop",{offset:w,stopColor:S,stopOpacity:1},x+N)})})}const gNe=10,pNe=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function b2(e){const{isReversed:t,gradientId:a,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],o=typeof i[0]=="number"?Af(i[0],i[1]):e4(i[0],i[1]),l=gNe,c=`${i[0]}-${i[1]}-`;return n.jsx("linearGradient",Ye({id:a},pNe(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(d,u)=>{const f=u/l,p=o(f);if(p===void 0)return null;const x=s(p);return x===null?null:n.jsx("stop",{offset:f,stopColor:x,stopOpacity:1},c+u)})}))}function xNe(){const{top:e,height:t,bottom:a,left:s,width:r,right:i}=Ai(),o=e+t+a,l=s+r+i,c=z4(),d=pxe(),{xAxis:u,xAxisIds:f}=vr(),{yAxis:p,yAxisIds:x}=wr(),{zAxis:y,zAxisIds:N}=I4(),v=x.filter(S=>p[S].colorMap!==void 0),j=f.filter(S=>u[S].colorMap!==void 0),w=N.filter(S=>y[S].colorMap!==void 0);return v.length===0&&j.length===0&&w.length===0?null:n.jsxs("defs",{children:[v.map(S=>{const A=c(S),k=d(S),{colorMap:_,scale:L,colorScale:T,reverse:M}=p[S];return _?.type==="piecewise"?n.jsx(lR,{isReversed:!M,scale:L,colorMap:_,size:o,gradientId:A,direction:"y"},A):_?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(cR,{isReversed:!M,scale:L,colorScale:T,colorMap:_,size:o,gradientId:A,direction:"y"}),n.jsx(b2,{isReversed:M,colorScale:T,colorMap:_,gradientId:k})]},A):null}),j.map(S=>{const A=c(S),k=d(S),{colorMap:_,scale:L,reverse:T,colorScale:M}=u[S];return _?.type==="piecewise"?n.jsx(lR,{isReversed:T,scale:L,colorMap:_,size:l,gradientId:A,direction:"x"},A):_?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(cR,{isReversed:T,scale:L,colorScale:M,colorMap:_,size:l,gradientId:A,direction:"x"}),n.jsx(b2,{isReversed:T,colorScale:M,colorMap:_,gradientId:k})]},A):null}),w.map(S=>{const A=d(S),{colorMap:k,colorScale:_}=y[S];return k?.type==="continuous"?n.jsx(b2,{colorScale:_,colorMap:k,gradientId:A},A):null})]})}function yNe(e){return Ga("MuiChartsSurface",e)}const bNe=()=>qa({root:["root"]},yNe);Sa("MuiChartsSurface",["root"]);const vNe=["children","className","title","desc"],wNe=ln("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),NNe=h.forwardRef(function(t,a){const s=Vn(),r=Ft(s,ame),i=Ft(s,sme),o=Ft(s,sq),l=Ft(s,rq),c=Ft(s,Bge),d=Ft(s,Uge),u=Ft(s,wge),f=$4(),p=Ro(f,a),x=Si({props:t,name:"MuiChartsSurface"}),{children:y,className:N,title:v,desc:j}=x,w=hn(x,vNe),S=bNe(),A=i>0&&r>0;return n.jsxs(wNe,Ye({ownerState:{width:o,height:l,hasZoom:u},viewBox:`0 0 ${r} ${i}`,className:Lt(S.root,N),tabIndex:c?0:void 0,"data-has-focused-item":d||void 0},w,{ref:p,children:[v&&n.jsx("title",{children:v}),j&&n.jsx("desc",{children:j}),n.jsx(xNe,{}),A&&y]}))}),dR=Sa("MuiChartsToolbar",["root"]),jNe=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",CNe=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",SNe=(e,t,a)=>e?'"chart"':t==="vertical"?a?.horizontal==="start"?'"legend chart"':'"chart legend"':a?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,_Ne=(e=!1,t="horizontal",a="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:a==="start"?`auto ${r}`:`${r} auto`},ANe=(e=!1,t="horizontal",a="top")=>t==="vertical"||e?"1fr":a==="bottom"?"1fr auto":"auto 1fr",TNe=ln("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>Jb(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const a=_Ne(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=ANe(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=SNe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:a,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${dR.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${a.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${dR.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:jNe(e.legendPosition),alignItems:CNe(e.legendPosition)}});function ENe(e){const{children:t,sx:a,extendVertically:s}=e,r=Lxe(),i=Vn(),o=Ft(i,sq),l=Ft(i,rq);return n.jsx(TNe,{ref:r,ownerState:e,sx:a,extendVertically:s??l===void 0,width:o,children:t})}function kNe(){const e=Vn(),t=Ft(e,qN),a=Ft(e,GN),s=Ft(e,WN);return h.useMemo(()=>t===void 0||a===void 0||s===void 0?null:{seriesType:t,seriesId:a,dataIndex:s},[t,a,s])}const Xy=6;function LNe(){const e=Go(),t=kNe(),a=Lx(),{xAxis:s,xAxisIds:r}=vr(),{yAxis:i,yAxisIds:o}=wr();if(t===null||t.seriesType!=="line"||!a)return null;const l=a?.series[t.seriesId],c=l.xAxisId??r[0],d=l.yAxisId??o[0];return n.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-Xy,y:i[d].scale(l.stackedData[t.dataIndex][1])-Xy,width:2*Xy,height:2*Xy,rx:3,ry:3})}const cj=h.forwardRef(function(t,a){const s=Si({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:o,clipPathProps:l,clipPathGroupProps:c,areaPlotProps:d,linePlotProps:u,markPlotProps:f,overlayProps:p,chartsAxisProps:x,axisHighlightProps:y,lineHighlightPlotProps:N,legendProps:v,children:j}=Awe(s),{chartDataProviderProps:w,chartsSurfaceProps:S}=kwe(i,a),A=s.slots?.tooltip??$ve,k=s.slots?.toolbar;return n.jsx(fNe,Ye({},w,{children:n.jsxs(ENe,Ye({},r,{children:[s.showToolbar&&k?n.jsx(k,Ye({},s.slotProps?.toolbar)):null,!s.hideLegend&&n.jsx(Kve,Ye({},v)),n.jsxs(NNe,Ye({},S,{children:[n.jsx(pwe,Ye({},o)),n.jsxs("g",Ye({},c,{children:[n.jsx(O0e,Ye({},d)),n.jsx(W0e,Ye({},u)),n.jsx(Cwe,Ye({},p)),n.jsx(twe,Ye({},y))]})),n.jsx(LNe,{}),n.jsx(qye,Ye({},x)),n.jsx("g",{"data-drawing-container":!0,children:n.jsx(tye,Ye({},f))}),n.jsx(cwe,Ye({},N)),n.jsx(nwe,Ye({},l)),j]})),!s.loading&&n.jsx(A,Ye({},s.slotProps?.tooltip))]}))}))});function PNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const dj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function aP(e){return"nodeType"in e}function Zs(e){var t,a;return e?sh(e)?e:aP(e)&&(t=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?t:window:window}function sP(e){const{Document:t}=Zs(e);return e instanceof t}function Mx(e){return sh(e)?!1:e instanceof Zs(e).HTMLElement}function TV(e){return e instanceof Zs(e).SVGElement}function rh(e){return e?sh(e)?e.document:aP(e)?sP(e)?e:Mx(e)||TV(e)?e.ownerDocument:document:document:document}const Yi=dj?h.useLayoutEffect:h.useEffect;function uj(e){const t=h.useRef(e);return Yi(()=>{t.current=e}),h.useCallback(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function DNe(){const e=h.useRef(null),t=h.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),a=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,a]}function Ep(e,t){t===void 0&&(t=[e]);const a=h.useRef(e);return Yi(()=>{a.current!==e&&(a.current=e)},t),a}function Ix(e,t){const a=h.useRef();return h.useMemo(()=>{const s=e(a.current);return a.current=s,s},[...t])}function Gv(e){const t=uj(e),a=h.useRef(null),s=h.useCallback(r=>{r!==a.current&&t?.(r,a.current),a.current=r},[]);return[a,s]}function Wv(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let v2={};function $x(e,t){return h.useMemo(()=>{if(t)return t;const a=v2[e]==null?0:v2[e]+1;return v2[e]=a,e+"-"+a},[e,t])}function EV(e){return function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];return s.reduce((i,o)=>{const l=Object.entries(o);for(const[c,d]of l){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const vf=EV(1),kp=EV(-1);function ONe(e){return"clientX"in e&&"clientY"in e}function mj(e){if(!e)return!1;const{KeyboardEvent:t}=Zs(e.target);return t&&e instanceof t}function MNe(e){if(!e)return!1;const{TouchEvent:t}=Zs(e.target);return t&&e instanceof t}function Vv(e){if(MNe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:a}=e.touches[0];return{x:t,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:a}=e.changedTouches[0];return{x:t,y:a}}}return ONe(e)?{x:e.clientX,y:e.clientY}:null}const ud=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:a}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:a}=e;return"scaleX("+t+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[ud.Translate.toString(e),ud.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:a,easing:s}=e;return t+" "+a+"ms "+s}}}),uR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function INe(e){return e.matches(uR)?e:e.querySelector(uR)}const $Ne={display:"none"};function RNe(e){let{id:t,value:a}=e;return pt.createElement("div",{id:t,style:$Ne},a)}function zNe(e){let{id:t,announcement:a,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return pt.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},a)}function FNe(){const[e,t]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const kV=h.createContext(null);function UNe(e){const t=h.useContext(kV);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function BNe(){const[e]=h.useState(()=>new Set),t=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:r,event:i}=s;e.forEach(o=>{var l;return(l=o[r])==null?void 0:l.call(o,i)})},[e]),t]}const HNe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qNe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was moved over droppable area "+a.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was dropped over droppable area "+a.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function GNe(e){let{announcements:t=qNe,container:a,hiddenTextDescribedById:s,screenReaderInstructions:r=HNe}=e;const{announce:i,announcement:o}=FNe(),l=$x("DndLiveRegion"),[c,d]=h.useState(!1);if(h.useEffect(()=>{d(!0)},[]),UNe(h.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:x}=f;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(f){let{active:p,over:x}=f;i(t.onDragOver({active:p,over:x}))},onDragEnd(f){let{active:p,over:x}=f;i(t.onDragEnd({active:p,over:x}))},onDragCancel(f){let{active:p,over:x}=f;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!c)return null;const u=pt.createElement(pt.Fragment,null,pt.createElement(RNe,{id:s,value:r.draggable}),pt.createElement(zNe,{id:l,announcement:o}));return a?Hi.createPortal(u,a):u}var es;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(es||(es={}));function Yv(){}function Rf(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Rx(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Qi=Object.freeze({x:0,y:0});function LV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function WNe(e,t){const a=Vv(e);if(!a)return"0 0";const s={x:(a.x-t.left)/t.width*100,y:(a.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function PV(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return a-s}function VNe(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return s-a}function mR(e){let{left:t,top:a,height:s,width:r}=e;return[{x:t,y:a},{x:t+r,y:a},{x:t,y:a+s},{x:t+r,y:a+s}]}function DV(e,t){if(!e||e.length===0)return null;const[a]=e;return a[t]}function fR(e,t,a){return t===void 0&&(t=e.left),a===void 0&&(a=e.top),{x:t+e.width*.5,y:a+e.height*.5}}const zx=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=fR(t,t.left,t.top),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=LV(fR(c),r);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(PV)},YNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=mR(t),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=mR(c),u=r.reduce((p,x,y)=>p+LV(d[y],x),0),f=Number((u/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(PV)};function QNe(e,t){const a=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=r-s,l=i-a;if(s<r&&a<i){const c=t.width*t.height,d=e.width*e.height,u=o*l,f=u/(c+d-u);return Number(f.toFixed(4))}return 0}const KNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=[];for(const i of s){const{id:o}=i,l=a.get(o);if(l){const c=QNe(l,t);c>0&&r.push({id:o,data:{droppableContainer:i,value:c}})}}return r.sort(VNe)};function XNe(e,t,a){return{...e,scaleX:t&&a?t.width/a.width:1,scaleY:t&&a?t.height/a.height:1}}function OV(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Qi}function ZNe(e){return function(a){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...a})}}const JNe=ZNe(1);function MV(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function eje(e,t,a){const s=MV(t);if(!s)return e;const{scaleX:r,scaleY:i,x:o,y:l}=s,c=e.left-o-(1-r)*parseFloat(a),d=e.top-l-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),u=r?e.width/r:e.width,f=i?e.height/i:e.height;return{width:u,height:f,top:d,right:c+u,bottom:d+f,left:c}}const tje={ignoreTransform:!1};function ih(e,t){t===void 0&&(t=tje);let a=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=Zs(e).getComputedStyle(e);d&&(a=eje(a,d,u))}const{top:s,left:r,width:i,height:o,bottom:l,right:c}=a;return{top:s,left:r,width:i,height:o,bottom:l,right:c}}function hR(e){return ih(e,{ignoreTransform:!0})}function nje(e){const t=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:t,bottom:a,width:t,height:a}}function aje(e,t){return t===void 0&&(t=Zs(e).getComputedStyle(e)),t.position==="fixed"}function sje(e,t){t===void 0&&(t=Zs(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?a.test(i):!1})}function fj(e,t){const a=[];function s(r){if(t!=null&&a.length>=t||!r)return a;if(sP(r)&&r.scrollingElement!=null&&!a.includes(r.scrollingElement))return a.push(r.scrollingElement),a;if(!Mx(r)||TV(r)||a.includes(r))return a;const i=Zs(e).getComputedStyle(r);return r!==e&&sje(r,i)&&a.push(r),aje(r,i)?a:s(r.parentNode)}return e?s(e):a}function IV(e){const[t]=fj(e,1);return t??null}function w2(e){return!dj||!e?null:sh(e)?e:aP(e)?sP(e)||e===rh(e).scrollingElement?window:Mx(e)?e:null:null}function $V(e){return sh(e)?e.scrollX:e.scrollLeft}function RV(e){return sh(e)?e.scrollY:e.scrollTop}function BE(e){return{x:$V(e),y:RV(e)}}var fs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(fs||(fs={}));function zV(e){return!dj||!e?!1:e===document.scrollingElement}function FV(e){const t={x:0,y:0},a=zV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:r,isLeft:i,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const rje={x:.2,y:.2};function ije(e,t,a,s,r){let{top:i,left:o,right:l,bottom:c}=a;s===void 0&&(s=10),r===void 0&&(r=rje);const{isTop:d,isBottom:u,isLeft:f,isRight:p}=FV(e),x={x:0,y:0},y={x:0,y:0},N={height:t.height*r.y,width:t.width*r.x};return!d&&i<=t.top+N.height?(x.y=fs.Backward,y.y=s*Math.abs((t.top+N.height-i)/N.height)):!u&&c>=t.bottom-N.height&&(x.y=fs.Forward,y.y=s*Math.abs((t.bottom-N.height-c)/N.height)),!p&&l>=t.right-N.width?(x.x=fs.Forward,y.x=s*Math.abs((t.right-N.width-l)/N.width)):!f&&o<=t.left+N.width&&(x.x=fs.Backward,y.x=s*Math.abs((t.left+N.width-o)/N.width)),{direction:x,speed:y}}function oje(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:a,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:a,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function UV(e){return e.reduce((t,a)=>vf(t,BE(a)),Qi)}function lje(e){return e.reduce((t,a)=>t+$V(a),0)}function cje(e){return e.reduce((t,a)=>t+RV(a),0)}function BV(e,t){if(t===void 0&&(t=ih),!e)return;const{top:a,left:s,bottom:r,right:i}=t(e);IV(e)&&(r<=0||i<=0||a>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const dje=[["x",["left","right"],lje],["y",["top","bottom"],cje]];class rP{constructor(t,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=fj(a),r=UV(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of dje)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(s),u=r[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ep{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=t}add(t,a,s){var r;(r=this.target)==null||r.addEventListener(t,a,s),this.listeners.push([t,a,s])}}function uje(e){const{EventTarget:t}=Zs(e);return e instanceof t?e:rh(e)}function N2(e,t){const a=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(a**2+s**2)>t:"x"in t&&"y"in t?a>t.x&&s>t.y:"x"in t?a>t.x:"y"in t?s>t.y:!1}var di;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(di||(di={}));function gR(e){e.preventDefault()}function mje(e){e.stopPropagation()}var xn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(xn||(xn={}));const HV={start:[xn.Space,xn.Enter],cancel:[xn.Esc],end:[xn.Space,xn.Enter,xn.Tab]},fje=(e,t)=>{let{currentCoordinates:a}=t;switch(e.code){case xn.Right:return{...a,x:a.x+25};case xn.Left:return{...a,x:a.x-25};case xn.Down:return{...a,y:a.y+25};case xn.Up:return{...a,y:a.y-25}}};class iP{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:a}}=t;this.props=t,this.listeners=new ep(rh(a)),this.windowListeners=new ep(Zs(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(di.Resize,this.handleCancel),this.windowListeners.add(di.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(di.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:a}=this.props,s=t.node.current;s&&BV(s),a(Qi)}handleKeyDown(t){if(mj(t)){const{active:a,context:s,options:r}=this.props,{keyboardCodes:i=HV,coordinateGetter:o=fje,scrollBehavior:l="smooth"}=r,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:Qi;this.referenceCoordinates||(this.referenceCoordinates=u);const f=o(t,{active:a,context:s.current,currentCoordinates:u});if(f){const p=kp(f,u),x={x:0,y:0},{scrollableAncestors:y}=s.current;for(const N of y){const v=t.code,{isTop:j,isRight:w,isLeft:S,isBottom:A,maxScroll:k,minScroll:_}=FV(N),L=oje(N),T={x:Math.min(v===xn.Right?L.right-L.width/2:L.right,Math.max(v===xn.Right?L.left:L.left+L.width/2,f.x)),y:Math.min(v===xn.Down?L.bottom-L.height/2:L.bottom,Math.max(v===xn.Down?L.top:L.top+L.height/2,f.y))},M=v===xn.Right&&!w||v===xn.Left&&!S,R=v===xn.Down&&!A||v===xn.Up&&!j;if(M&&T.x!==f.x){const z=N.scrollLeft+p.x,O=v===xn.Right&&z<=k.x||v===xn.Left&&z>=_.x;if(O&&!p.y){N.scrollTo({left:z,behavior:l});return}O?x.x=N.scrollLeft-z:x.x=v===xn.Right?N.scrollLeft-k.x:N.scrollLeft-_.x,x.x&&N.scrollBy({left:-x.x,behavior:l});break}else if(R&&T.y!==f.y){const z=N.scrollTop+p.y,O=v===xn.Down&&z<=k.y||v===xn.Up&&z>=_.y;if(O&&!p.x){N.scrollTo({top:z,behavior:l});return}O?x.y=N.scrollTop-z:x.y=v===xn.Down?N.scrollTop-k.y:N.scrollTop-_.y,x.y&&N.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,vf(kp(f,this.referenceCoordinates),x))}}}handleMove(t,a){const{onMove:s}=this.props;t.preventDefault(),s(a)}handleEnd(t){const{onEnd:a}=this.props;t.preventDefault(),this.detach(),a()}handleCancel(t){const{onCancel:a}=this.props;t.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}iP.activators=[{eventName:"onKeyDown",handler:(e,t,a)=>{let{keyboardCodes:s=HV,onActivation:r}=t,{active:i}=a;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function pR(e){return!!(e&&"distance"in e)}function xR(e){return!!(e&&"delay"in e)}class oP{constructor(t,a,s){var r;s===void 0&&(s=uje(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=a;const{event:i}=t,{target:o}=i;this.props=t,this.events=a,this.document=rh(o),this.documentListeners=new ep(this.document),this.listeners=new ep(s),this.windowListeners=new ep(Zs(o)),this.initialCoordinates=(r=Vv(i))!=null?r:Qi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(di.Resize,this.handleCancel),this.windowListeners.add(di.DragStart,gR),this.windowListeners.add(di.VisibilityChange,this.handleCancel),this.windowListeners.add(di.ContextMenu,gR),this.documentListeners.add(di.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(xR(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(pR(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,a){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:t}=this,{onStart:a}=this.props;t&&(this.activated=!0,this.documentListeners.add(di.Click,mje,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(di.SelectionChange,this.removeTextSelection),a(t))}handleMove(t){var a;const{activated:s,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!r)return;const c=(a=Vv(t))!=null?a:Qi,d=kp(r,c);if(!s&&l){if(pR(l)){if(l.tolerance!=null&&N2(d,l.tolerance))return this.handleCancel();if(N2(d,l.distance))return this.handleStart()}if(xR(l)&&N2(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleCancel(){const{onAbort:t,onCancel:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleKeydown(t){t.code===xn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const hje={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nm extends oP{constructor(t){const{event:a}=t,s=rh(a.target);super(t,hje,s)}}nm.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const gje={move:{name:"mousemove"},end:{name:"mouseup"}};var HE;(function(e){e[e.RightClick=2]="RightClick"})(HE||(HE={}));class pje extends oP{constructor(t){super(t,gje,rh(t.event.target))}}pje.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return a.button===HE.RightClick?!1:(s?.({event:a}),!0)}}];const j2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class xje extends oP{constructor(t){super(t,j2)}static setup(){return window.addEventListener(j2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(j2.move.name,t)};function t(){}}}xje.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;const{touches:r}=a;return r.length>1?!1:(s?.({event:a}),!0)}}];var tp;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(tp||(tp={}));var Qv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Qv||(Qv={}));function yje(e){let{acceleration:t,activator:a=tp.Pointer,canScroll:s,draggingRect:r,enabled:i,interval:o=5,order:l=Qv.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:f,threshold:p}=e;const x=vje({delta:f,disabled:!i}),[y,N]=DNe(),v=h.useRef({x:0,y:0}),j=h.useRef({x:0,y:0}),w=h.useMemo(()=>{switch(a){case tp.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case tp.DraggableRect:return r}},[a,r,c]),S=h.useRef(null),A=h.useCallback(()=>{const _=S.current;if(!_)return;const L=v.current.x*j.current.x,T=v.current.y*j.current.y;_.scrollBy(L,T)},[]),k=h.useMemo(()=>l===Qv.TreeOrder?[...d].reverse():d,[l,d]);h.useEffect(()=>{if(!i||!d.length||!w){N();return}for(const _ of k){if(s?.(_)===!1)continue;const L=d.indexOf(_),T=u[L];if(!T)continue;const{direction:M,speed:R}=ije(_,T,w,t,p);for(const z of["x","y"])x[z][M[z]]||(R[z]=0,M[z]=0);if(R.x>0||R.y>0){N(),S.current=_,y(A,o),v.current=R,j.current=M;return}}v.current={x:0,y:0},j.current={x:0,y:0},N()},[t,A,s,N,i,o,JSON.stringify(w),JSON.stringify(x),y,d,k,u,JSON.stringify(p)])}const bje={x:{[fs.Backward]:!1,[fs.Forward]:!1},y:{[fs.Backward]:!1,[fs.Forward]:!1}};function vje(e){let{delta:t,disabled:a}=e;const s=Wv(t);return Ix(r=>{if(a||!s||!r)return bje;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[fs.Backward]:r.x[fs.Backward]||i.x===-1,[fs.Forward]:r.x[fs.Forward]||i.x===1},y:{[fs.Backward]:r.y[fs.Backward]||i.y===-1,[fs.Forward]:r.y[fs.Forward]||i.y===1}}},[a,t,s])}function wje(e,t){const a=t!=null?e.get(t):void 0,s=a?a.node.current:null;return Ix(r=>{var i;return t==null?null:(i=s??r)!=null?i:null},[s,t])}function Nje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{const{sensor:r}=s,i=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...a,...i]},[]),[e,t])}var Lp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Lp||(Lp={}));var qE;(function(e){e.Optimized="optimized"})(qE||(qE={}));const yR=new Map;function jje(e,t){let{dragging:a,dependencies:s,config:r}=t;const[i,o]=h.useState(null),{frequency:l,measure:c,strategy:d}=r,u=h.useRef(e),f=v(),p=Ep(f),x=h.useCallback(function(j){j===void 0&&(j=[]),!p.current&&o(w=>w===null?j:w.concat(j.filter(S=>!w.includes(S))))},[p]),y=h.useRef(null),N=Ix(j=>{if(f&&!a)return yR;if(!j||j===yR||u.current!==e||i!=null){const w=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const A=S.node.current,k=A?new rP(c(A),A):null;S.rect.current=k,k&&w.set(S.id,k)}return w}return j},[e,i,a,f,c]);return h.useEffect(()=>{u.current=e},[e]),h.useEffect(()=>{f||x()},[a,f]),h.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),h.useEffect(()=>{f||typeof l!="number"||y.current!==null||(y.current=setTimeout(()=>{x(),y.current=null},l))},[l,f,x,...s]),{droppableRects:N,measureDroppableContainers:x,measuringScheduled:i!=null};function v(){switch(d){case Lp.Always:return!1;case Lp.BeforeDragging:return a;default:return!a}}}function lP(e,t){return Ix(a=>e?a||(typeof t=="function"?t(e):e):null,[t,e])}function Cje(e,t){return lP(e,t)}function Sje(e){let{callback:t,disabled:a}=e;const s=uj(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function hj(e){let{callback:t,disabled:a}=e;const s=uj(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function _je(e){return new rP(ih(e),e)}function bR(e,t,a){t===void 0&&(t=_je);const[s,r]=h.useState(null);function i(){r(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??a)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=Sje({callback(c){if(e)for(const d of c){const{type:u,target:f}=d;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=hj({callback:i});return Yi(()=>{i(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function Aje(e){const t=lP(e);return OV(e,t)}const vR=[];function Tje(e){const t=h.useRef(e),a=Ix(s=>e?s&&s!==vR&&e&&t.current&&e.parentNode===t.current.parentNode?s:fj(e):vR,[e]);return h.useEffect(()=>{t.current=e},[e]),a}function Eje(e){const[t,a]=h.useState(null),s=h.useRef(e),r=h.useCallback(i=>{const o=w2(i.target);o&&a(l=>l?(l.set(o,BE(o)),new Map(l)):null)},[]);return h.useEffect(()=>{const i=s.current;if(e!==i){o(i);const l=e.map(c=>{const d=w2(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,BE(d)]):null}).filter(c=>c!=null);a(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const d=w2(c);d?.removeEventListener("scroll",r)})}},[r,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>vf(i,o),Qi):UV(e):Qi,[e,t])}function wR(e,t){t===void 0&&(t=[]);const a=h.useRef(null);return h.useEffect(()=>{a.current=null},t),h.useEffect(()=>{const s=e!==Qi;s&&!a.current&&(a.current=e),!s&&a.current&&(a.current=null)},[e]),a.current?kp(e,a.current):Qi}function kje(e){h.useEffect(()=>{if(!dj)return;const t=e.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of t)a?.()}},e.map(t=>{let{sensor:a}=t;return a}))}function Lje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{let{eventName:r,handler:i}=s;return a[r]=o=>{i(o,t)},a},{}),[e,t])}function qV(e){return h.useMemo(()=>e?nje(e):null,[e])}const NR=[];function Pje(e,t){t===void 0&&(t=ih);const[a]=e,s=qV(a?Zs(a):null),[r,i]=h.useState(NR);function o(){i(()=>e.length?e.map(c=>zV(c)?s:new rP(t(c),c)):NR)}const l=hj({callback:o});return Yi(()=>{l?.disconnect(),o(),e.forEach(c=>l?.observe(c))},[e]),r}function GV(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Mx(t)?t:e}function Dje(e){let{measure:t}=e;const[a,s]=h.useState(null),r=h.useCallback(d=>{for(const{target:u}of d)if(Mx(u)){s(f=>{const p=t(u);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=hj({callback:r}),o=h.useCallback(d=>{const u=GV(d);i?.disconnect(),u&&i?.observe(u),s(u?t(u):null)},[t,i]),[l,c]=Gv(o);return h.useMemo(()=>({nodeRef:l,rect:a,setRef:c}),[a,l,c])}const Oje=[{sensor:nm,options:{}},{sensor:iP,options:{}}],Mje={current:{}},nv={draggable:{measure:hR},droppable:{measure:hR,strategy:Lp.WhileDragging,frequency:qE.Optimized},dragOverlay:{measure:ih}};class np extends Map{get(t){var a;return t!=null&&(a=super.get(t))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:a}=t;return!a})}getNodeFor(t){var a,s;return(a=(s=this.get(t))==null?void 0:s.node.current)!=null?a:void 0}}const Ije={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new np,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Yv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nv,measureDroppableContainers:Yv,windowRect:null,measuringScheduled:!1},WV={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Yv,draggableNodes:new Map,over:null,measureDroppableContainers:Yv},Fx=h.createContext(WV),VV=h.createContext(Ije);function $je(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new np}}}function Rje(e,t){switch(t.type){case es.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case es.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case es.DragEnd:case es.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case es.RegisterDroppable:{const{element:a}=t,{id:s}=a,r=new np(e.droppable.containers);return r.set(s,a),{...e,droppable:{...e.droppable,containers:r}}}case es.SetDroppableDisabled:{const{id:a,key:s,disabled:r}=t,i=e.droppable.containers.get(a);if(!i||s!==i.key)return e;const o=new np(e.droppable.containers);return o.set(a,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case es.UnregisterDroppable:{const{id:a,key:s}=t,r=e.droppable.containers.get(a);if(!r||s!==r.key)return e;const i=new np(e.droppable.containers);return i.delete(a),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function zje(e){let{disabled:t}=e;const{active:a,activatorEvent:s,draggableNodes:r}=h.useContext(Fx),i=Wv(s),o=Wv(a?.id);return h.useEffect(()=>{if(!t&&!s&&i&&o!=null){if(!mj(i)||document.activeElement===i.target)return;const l=r.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const f=INe(u);if(f){f.focus();break}}})}},[s,t,r,o,i]),null}function YV(e,t){let{transform:a,...s}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...s}),a):a}function Fje(e){return h.useMemo(()=>({draggable:{...nv.draggable,...e?.draggable},droppable:{...nv.droppable,...e?.droppable},dragOverlay:{...nv.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Uje(e){let{activeNode:t,measure:a,initialRect:s,config:r=!0}=e;const i=h.useRef(!1),{x:o,y:l}=typeof r=="boolean"?{x:r,y:r}:r;Yi(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!s)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const u=a(d),f=OV(u,s);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=IV(d);p&&p.scrollBy({top:f.y,left:f.x})}},[t,o,l,s,a])}const gj=h.createContext({...Qi,scaleX:1,scaleY:1});var Hc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Hc||(Hc={}));const Ux=h.memo(function(t){var a,s,r,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=Oje,collisionDetection:f=KNe,measuring:p,modifiers:x,...y}=t;const N=h.useReducer(Rje,void 0,$je),[v,j]=N,[w,S]=BNe(),[A,k]=h.useState(Hc.Uninitialized),_=A===Hc.Initialized,{draggable:{active:L,nodes:T,translate:M},droppable:{containers:R}}=v,z=L!=null?T.get(L):null,O=h.useRef({initial:null,translated:null}),I=h.useMemo(()=>{var he;return L!=null?{id:L,data:(he=z?.data)!=null?he:Mje,rect:O}:null},[L,z]),B=h.useRef(null),[ee,Q]=h.useState(null),[te,W]=h.useState(null),ae=Ep(y,Object.values(y)),Ee=$x("DndDescribedBy",o),se=h.useMemo(()=>R.getEnabled(),[R]),Y=Fje(p),{droppableRects:pe,measureDroppableContainers:Se,measuringScheduled:me}=jje(se,{dragging:_,dependencies:[M.x,M.y],config:Y.droppable}),ye=wje(T,L),re=h.useMemo(()=>te?Vv(te):null,[te]),De=ue(),ve=Cje(ye,Y.draggable.measure);Uje({activeNode:L!=null?T.get(L):null,config:De.layoutShiftCompensation,initialRect:ve,measure:Y.draggable.measure});const ke=bR(ye,Y.draggable.measure,ve),Ce=bR(ye?ye.parentElement:null),de=h.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=R.getNodeFor((a=de.current.over)==null?void 0:a.id),Oe=Dje({measure:Y.dragOverlay.measure}),Ge=(s=Oe.nodeRef.current)!=null?s:ye,et=_?(r=Oe.rect)!=null?r:ke:null,mt=!!(Oe.nodeRef.current&&Oe.rect),Fe=Aje(mt?null:ke),ot=qV(Ge?Zs(Ge):null),We=Tje(_?Re??ye:null),Ke=Pje(We),Ze=YV(x,{transform:{x:M.x-Fe.x,y:M.y-Fe.y,scaleX:1,scaleY:1},activatorEvent:te,active:I,activeNodeRect:ke,containerNodeRect:Ce,draggingNodeRect:et,over:de.current.over,overlayNodeRect:Oe.rect,scrollableAncestors:We,scrollableAncestorRects:Ke,windowRect:ot}),Me=re?vf(re,M):null,je=Eje(We),ce=wR(je),oe=wR(je,[ke]),U=vf(Ze,ce),V=et?JNe(et,Ze):null,be=I&&V?f({active:I,collisionRect:V,droppableRects:pe,droppableContainers:se,pointerCoordinates:Me}):null,ze=DV(be,"id"),[le,X]=h.useState(null),Ae=mt?Ze:vf(Ze,oe),Pe=XNe(Ae,(i=le?.rect)!=null?i:null,ke),Qe=h.useRef(null),nt=h.useCallback((he,F)=>{let{sensor:G,options:Ne}=F;if(B.current==null)return;const ge=T.get(B.current);if(!ge)return;const fe=he.nativeEvent,Ue=new G({active:B.current,activeNode:ge,event:fe,options:Ne,context:de,onAbort(ne){if(!T.get(ne))return;const{onDragAbort:xe}=ae.current,Ie={id:ne};xe?.(Ie),w({type:"onDragAbort",event:Ie})},onPending(ne,H,xe,Ie){if(!T.get(ne))return;const{onDragPending:ct}=ae.current,bt={id:ne,constraint:H,initialCoordinates:xe,offset:Ie};ct?.(bt),w({type:"onDragPending",event:bt})},onStart(ne){const H=B.current;if(H==null)return;const xe=T.get(H);if(!xe)return;const{onDragStart:Ie}=ae.current,Je={activatorEvent:fe,active:{id:H,data:xe.data,rect:O}};Hi.unstable_batchedUpdates(()=>{Ie?.(Je),k(Hc.Initializing),j({type:es.DragStart,initialCoordinates:ne,active:H}),w({type:"onDragStart",event:Je}),Q(Qe.current),W(fe)})},onMove(ne){j({type:es.DragMove,coordinates:ne})},onEnd:K(es.DragEnd),onCancel:K(es.DragCancel)});Qe.current=Ue;function K(ne){return async function(){const{active:xe,collisions:Ie,over:Je,scrollAdjustedTranslate:ct}=de.current;let bt=null;if(xe&&ct){const{cancelDrop:Pt}=ae.current;bt={activatorEvent:fe,active:xe,collisions:Ie,delta:ct,over:Je},ne===es.DragEnd&&typeof Pt=="function"&&await Promise.resolve(Pt(bt))&&(ne=es.DragCancel)}B.current=null,Hi.unstable_batchedUpdates(()=>{j({type:ne}),k(Hc.Uninitialized),X(null),Q(null),W(null),Qe.current=null;const Pt=ne===es.DragEnd?"onDragEnd":"onDragCancel";if(bt){const Et=ae.current[Pt];Et?.(bt),w({type:Pt,event:bt})}})}}},[T]),wt=h.useCallback((he,F)=>(G,Ne)=>{const ge=G.nativeEvent,fe=T.get(Ne);if(B.current!==null||!fe||ge.dndKit||ge.defaultPrevented)return;const Ue={active:fe};he(G,F.options,Ue)===!0&&(ge.dndKit={capturedBy:F.sensor},B.current=Ne,nt(G,F))},[T,nt]),Te=Nje(u,wt);kje(u),Yi(()=>{ke&&A===Hc.Initializing&&k(Hc.Initialized)},[ke,A]),h.useEffect(()=>{const{onDragMove:he}=ae.current,{active:F,activatorEvent:G,collisions:Ne,over:ge}=de.current;if(!F||!G)return;const fe={active:F,activatorEvent:G,collisions:Ne,delta:{x:U.x,y:U.y},over:ge};Hi.unstable_batchedUpdates(()=>{he?.(fe),w({type:"onDragMove",event:fe})})},[U.x,U.y]),h.useEffect(()=>{const{active:he,activatorEvent:F,collisions:G,droppableContainers:Ne,scrollAdjustedTranslate:ge}=de.current;if(!he||B.current==null||!F||!ge)return;const{onDragOver:fe}=ae.current,Ue=Ne.get(ze),K=Ue&&Ue.rect.current?{id:Ue.id,rect:Ue.rect.current,data:Ue.data,disabled:Ue.disabled}:null,ne={active:he,activatorEvent:F,collisions:G,delta:{x:ge.x,y:ge.y},over:K};Hi.unstable_batchedUpdates(()=>{X(K),fe?.(ne),w({type:"onDragOver",event:ne})})},[ze]),Yi(()=>{de.current={activatorEvent:te,active:I,activeNode:ye,collisionRect:V,collisions:be,droppableRects:pe,draggableNodes:T,draggingNode:Ge,draggingNodeRect:et,droppableContainers:R,over:le,scrollableAncestors:We,scrollAdjustedTranslate:U},O.current={initial:et,translated:V}},[I,ye,be,V,T,Ge,et,pe,R,le,We,U]),yje({...De,delta:M,draggingRect:V,pointerCoordinates:Me,scrollableAncestors:We,scrollableAncestorRects:Ke});const it=h.useMemo(()=>({active:I,activeNode:ye,activeNodeRect:ke,activatorEvent:te,collisions:be,containerNodeRect:Ce,dragOverlay:Oe,draggableNodes:T,droppableContainers:R,droppableRects:pe,over:le,measureDroppableContainers:Se,scrollableAncestors:We,scrollableAncestorRects:Ke,measuringConfiguration:Y,measuringScheduled:me,windowRect:ot}),[I,ye,ke,te,be,Ce,Oe,T,R,pe,le,Se,We,Ke,Y,me,ot]),$e=h.useMemo(()=>({activatorEvent:te,activators:Te,active:I,activeNodeRect:ke,ariaDescribedById:{draggable:Ee},dispatch:j,draggableNodes:T,over:le,measureDroppableContainers:Se}),[te,Te,I,ke,j,Ee,T,le,Se]);return pt.createElement(kV.Provider,{value:S},pt.createElement(Fx.Provider,{value:$e},pt.createElement(VV.Provider,{value:it},pt.createElement(gj.Provider,{value:Pe},d)),pt.createElement(zje,{disabled:l?.restoreFocus===!1})),pt.createElement(GNe,{...l,hiddenTextDescribedById:Ee}));function ue(){const he=ee?.autoScrollEnabled===!1,F=typeof c=="object"?c.enabled===!1:c===!1,G=_&&!he&&!F;return typeof c=="object"?{...c,enabled:G}:{enabled:G}}}),Bje=h.createContext(null),jR="button",Hje="Draggable";function Bx(e){let{id:t,data:a,disabled:s=!1,attributes:r}=e;const i=$x(Hje),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:f,over:p}=h.useContext(Fx),{role:x=jR,roleDescription:y="draggable",tabIndex:N=0}=r??{},v=c?.id===t,j=h.useContext(v?gj:Bje),[w,S]=Gv(),[A,k]=Gv(),_=Lje(o,t),L=Ep(a);Yi(()=>(f.set(t,{id:t,key:i,node:w,activatorNode:A,data:L}),()=>{const M=f.get(t);M&&M.key===i&&f.delete(t)}),[f,t]);const T=h.useMemo(()=>({role:x,tabIndex:N,"aria-disabled":s,"aria-pressed":v&&x===jR?!0:void 0,"aria-roledescription":y,"aria-describedby":u.draggable}),[s,x,N,v,y,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:T,isDragging:v,listeners:s?void 0:_,node:w,over:p,setNodeRef:S,setActivatorNodeRef:k,transform:j}}function QV(){return h.useContext(VV)}const qje="Droppable",Gje={timeout:25};function Hx(e){let{data:t,disabled:a=!1,id:s,resizeObserverConfig:r}=e;const i=$x(qje),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=h.useContext(Fx),u=h.useRef({disabled:a}),f=h.useRef(!1),p=h.useRef(null),x=h.useRef(null),{disabled:y,updateMeasurementsFor:N,timeout:v}={...Gje,...r},j=Ep(N??s),w=h.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(j.current)?j.current:[j.current]),x.current=null},v)},[v]),S=hj({callback:w,disabled:y||!o}),A=h.useCallback((T,M)=>{S&&(M&&(S.unobserve(M),f.current=!1),T&&S.observe(T))},[S]),[k,_]=Gv(A),L=Ep(t);return h.useEffect(()=>{!S||!k.current||(S.disconnect(),f.current=!1,S.observe(k.current))},[k,S]),h.useEffect(()=>(l({type:es.RegisterDroppable,element:{id:s,key:i,disabled:a,node:k,rect:p,data:L}}),()=>l({type:es.UnregisterDroppable,key:i,id:s})),[s]),h.useEffect(()=>{a!==u.current.disabled&&(l({type:es.SetDroppableDisabled,id:s,key:i,disabled:a}),u.current.disabled=a)},[s,i,a,l]),{active:o,rect:p,isOver:c?.id===s,node:k,over:c,setNodeRef:_}}function Wje(e){let{animation:t,children:a}=e;const[s,r]=h.useState(null),[i,o]=h.useState(null),l=Wv(a);return!a&&!s&&l&&r(l),Yi(()=>{if(!i)return;const c=s?.key,d=s?.props.id;if(c==null||d==null){r(null);return}Promise.resolve(t(d,i)).then(()=>{r(null)})},[t,s,i]),pt.createElement(pt.Fragment,null,a,s?h.cloneElement(s,{ref:o}):null)}const Vje={x:0,y:0,scaleX:1,scaleY:1};function Yje(e){let{children:t}=e;return pt.createElement(Fx.Provider,{value:WV},pt.createElement(gj.Provider,{value:Vje},t))}const Qje={position:"fixed",touchAction:"none"},Kje=e=>mj(e)?"transform 250ms ease":void 0,Xje=h.forwardRef((e,t)=>{let{as:a,activatorEvent:s,adjustScale:r,children:i,className:o,rect:l,style:c,transform:d,transition:u=Kje}=e;if(!l)return null;const f=r?d:{...d,scaleX:1,scaleY:1},p={...Qje,width:l.width,height:l.height,top:l.top,left:l.left,transform:ud.Transform.toString(f),transformOrigin:r&&s?WNe(s,l):void 0,transition:typeof u=="function"?u(s):u,...c};return pt.createElement(a,{className:o,style:p,ref:t},i)}),Zje=e=>t=>{let{active:a,dragOverlay:s}=t;const r={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(r[l]=a.node.style.getPropertyValue(l),a.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&s.node.style.setProperty(l,c);return o!=null&&o.active&&a.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[c,d]of Object.entries(r))a.node.style.setProperty(c,d);o!=null&&o.active&&a.node.classList.remove(o.active)}},Jje=e=>{let{transform:{initial:t,final:a}}=e;return[{transform:ud.Transform.toString(t)},{transform:ud.Transform.toString(a)}]},e1e={duration:250,easing:"ease",keyframes:Jje,sideEffects:Zje({styles:{active:{opacity:"0"}}})};function t1e(e){let{config:t,draggableNodes:a,droppableContainers:s,measuringConfiguration:r}=e;return uj((i,o)=>{if(t===null)return;const l=a.get(i);if(!l)return;const c=l.node.current;if(!c)return;const d=GV(o);if(!d)return;const{transform:u}=Zs(o).getComputedStyle(o),f=MV(u);if(!f)return;const p=typeof t=="function"?t:n1e(t);return BV(c,r.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:r.draggable.measure(c)},draggableNodes:a,dragOverlay:{node:o,rect:r.dragOverlay.measure(d)},droppableContainers:s,measuringConfiguration:r,transform:f})})}function n1e(e){const{duration:t,easing:a,sideEffects:s,keyframes:r}={...e1e,...e};return i=>{let{active:o,dragOverlay:l,transform:c,...d}=i;if(!t)return;const u={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-u.x,y:c.y-u.y,...f},x=r({...d,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[y]=x,N=x[x.length-1];if(JSON.stringify(y)===JSON.stringify(N))return;const v=s?.({active:o,dragOverlay:l,...d}),j=l.node.animate(x,{duration:t,easing:a,fill:"forwards"});return new Promise(w=>{j.onfinish=()=>{v?.(),w()}})}}let CR=0;function a1e(e){return h.useMemo(()=>{if(e!=null)return CR++,CR},[e])}const pj=pt.memo(e=>{let{adjustScale:t=!1,children:a,dropAnimation:s,style:r,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:d=999}=e;const{activatorEvent:u,active:f,activeNodeRect:p,containerNodeRect:x,draggableNodes:y,droppableContainers:N,dragOverlay:v,over:j,measuringConfiguration:w,scrollableAncestors:S,scrollableAncestorRects:A,windowRect:k}=QV(),_=h.useContext(gj),L=a1e(f?.id),T=YV(o,{activatorEvent:u,active:f,activeNodeRect:p,containerNodeRect:x,draggingNodeRect:v.rect,over:j,overlayNodeRect:v.rect,scrollableAncestors:S,scrollableAncestorRects:A,transform:_,windowRect:k}),M=lP(p),R=t1e({config:s,draggableNodes:y,droppableContainers:N,measuringConfiguration:w}),z=M?v.setRef:void 0;return pt.createElement(Yje,null,pt.createElement(Wje,{animation:R},f&&L?pt.createElement(Xje,{key:L,id:f.id,ref:z,as:l,activatorEvent:u,adjustScale:t,className:c,transition:i,rect:M,style:{zIndex:d,...r},transform:T},a):null))});function cP(e,t,a){const s=e.slice();return s.splice(a<0?s.length+a:a,0,s.splice(t,1)[0]),s}function s1e(e,t){return e.reduce((a,s,r)=>{const i=t.get(s);return i&&(a[r]=i),a},Array(e.length))}function Zy(e){return e!==null&&e>=0}function r1e(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function i1e(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const dP=e=>{let{rects:t,activeIndex:a,overIndex:s,index:r}=e;const i=cP(t,s,a),o=t[r],l=i[r];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},KV="Sortable",XV=pt.createContext({activeIndex:-1,containerId:KV,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:dP,disabled:{draggable:!1,droppable:!1}});function o1e(e){let{children:t,id:a,items:s,strategy:r=dP,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=QV(),f=$x(KV,a),p=l.rect!==null,x=h.useMemo(()=>s.map(_=>typeof _=="object"&&"id"in _?_.id:_),[s]),y=o!=null,N=o?x.indexOf(o.id):-1,v=d?x.indexOf(d.id):-1,j=h.useRef(x),w=!r1e(x,j.current),S=v!==-1&&N===-1||w,A=i1e(i);Yi(()=>{w&&y&&u(x)},[w,x,y,u]),h.useEffect(()=>{j.current=x},[x]);const k=h.useMemo(()=>({activeIndex:N,containerId:f,disabled:A,disableTransforms:S,items:x,overIndex:v,useDragOverlay:p,sortedRects:s1e(x,c),strategy:r}),[N,f,A.draggable,A.droppable,S,x,v,c,p,r]);return pt.createElement(XV.Provider,{value:k},t)}const l1e=e=>{let{id:t,items:a,activeIndex:s,overIndex:r}=e;return cP(a,s,r).indexOf(t)},c1e=e=>{let{containerId:t,isSorting:a,wasDragging:s,index:r,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!s||l!==i&&r===o?!1:a?!0:o!==r&&t===c},d1e={duration:200,easing:"ease"},ZV="transform",u1e=ud.Transition.toString({property:ZV,duration:0,easing:"linear"}),m1e={roleDescription:"sortable"};function f1e(e){let{disabled:t,index:a,node:s,rect:r}=e;const[i,o]=h.useState(null),l=h.useRef(a);return Yi(()=>{if(!t&&a!==l.current&&s.current){const c=r.current;if(c){const d=ih(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&o(u)}}a!==l.current&&(l.current=a)},[t,a,s,r]),h.useEffect(()=>{i&&o(null)},[i]),i}function h1e(e){let{animateLayoutChanges:t=c1e,attributes:a,disabled:s,data:r,getNewIndex:i=l1e,id:o,strategy:l,resizeObserverConfig:c,transition:d=d1e}=e;const{items:u,containerId:f,activeIndex:p,disabled:x,disableTransforms:y,sortedRects:N,overIndex:v,useDragOverlay:j,strategy:w}=h.useContext(XV),S=g1e(s,x),A=u.indexOf(o),k=h.useMemo(()=>({sortable:{containerId:f,index:A,items:u},...r}),[f,r,A,u]),_=h.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:L,node:T,isOver:M,setNodeRef:R}=Hx({id:o,data:k,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:z,activatorEvent:O,activeNodeRect:I,attributes:B,setNodeRef:ee,listeners:Q,isDragging:te,over:W,setActivatorNodeRef:ae,transform:Ee}=Bx({id:o,data:k,attributes:{...m1e,...a},disabled:S.draggable}),se=PNe(R,ee),Y=!!z,pe=Y&&!y&&Zy(p)&&Zy(v),Se=!j&&te,me=Se&&pe?Ee:null,re=pe?me??(l??w)({rects:N,activeNodeRect:I,activeIndex:p,overIndex:v,index:A}):null,De=Zy(p)&&Zy(v)?i({id:o,items:u,activeIndex:p,overIndex:v}):A,ve=z?.id,ke=h.useRef({activeId:ve,items:u,newIndex:De,containerId:f}),Ce=u!==ke.current.items,de=t({active:z,containerId:f,isDragging:te,isSorting:Y,id:o,index:A,items:u,newIndex:ke.current.newIndex,previousItems:ke.current.items,previousContainerId:ke.current.containerId,transition:d,wasDragging:ke.current.activeId!=null}),Re=f1e({disabled:!de,index:A,node:T,rect:L});return h.useEffect(()=>{Y&&ke.current.newIndex!==De&&(ke.current.newIndex=De),f!==ke.current.containerId&&(ke.current.containerId=f),u!==ke.current.items&&(ke.current.items=u)},[Y,De,f,u]),h.useEffect(()=>{if(ve===ke.current.activeId)return;if(ve!=null&&ke.current.activeId==null){ke.current.activeId=ve;return}const Ge=setTimeout(()=>{ke.current.activeId=ve},50);return()=>clearTimeout(Ge)},[ve]),{active:z,activeIndex:p,attributes:B,data:k,rect:L,index:A,newIndex:De,items:u,isOver:M,isSorting:Y,isDragging:te,listeners:Q,node:T,overIndex:v,over:W,setNodeRef:se,setActivatorNodeRef:ae,setDroppableNodeRef:R,setDraggableNodeRef:ee,transform:Re??re,transition:Oe()};function Oe(){if(Re||Ce&&ke.current.newIndex===A)return u1e;if(!(Se&&!mj(O)||!d)&&(Y||de))return ud.Transition.toString({...d,property:ZV})}}function g1e(e,t){var a,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function Kv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const p1e=[xn.Down,xn.Right,xn.Up,xn.Left],x1e=(e,t)=>{let{context:{active:a,collisionRect:s,droppableRects:r,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(p1e.includes(e.code)){if(e.preventDefault(),!a||!s)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=r.get(f.id);if(p)switch(e.code){case xn.Down:s.top<p.top&&c.push(f);break;case xn.Up:s.top>p.top&&c.push(f);break;case xn.Left:s.left>p.left&&c.push(f);break;case xn.Right:s.left<p.left&&c.push(f);break}});const d=YNe({collisionRect:s,droppableRects:r,droppableContainers:c});let u=DV(d,"id");if(u===o?.id&&d.length>1&&(u=d[1].id),u!=null){const f=i.get(a.id),p=i.get(u),x=p?r.get(p.id):null,y=p?.node.current;if(y&&x&&f&&p){const v=fj(y).some((_,L)=>l[L]!==_),j=JV(f,p),w=y1e(f,p),S=v||!j?{x:0,y:0}:{x:w?s.width-x.width:0,y:w?s.height-x.height:0},A={x:x.left,y:x.top};return S.x&&S.y?A:kp(A,S)}}}};function JV(e,t){return!Kv(e)||!Kv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function y1e(e,t){return!Kv(e)||!Kv(t)||!JV(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Do=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,GE=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",b1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},v1e=(e,t)=>{if(!e||e.length===0)return;const a=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:GE(c.created_at)})),s=Object.keys(a[0]).join(","),r=a.map(c=>Object.values(c).map(d=>typeof d=="string"?`"${d.replace(/"/g,'""')}"`:d).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),o=encodeURI(i),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${t}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},WE=({label:e,count:t,value:a,width:s,color:r,onClick:i,isActive:o,isLead:l,weightedValue:c,currencySymbol:d,conversionRate:u,compact:f=!1})=>n.jsxs("div",{className:"flex flex-col items-center w-full",children:[u&&n.jsx("div",{className:`flex justify-center relative z-0 ${f?"-my-1":"-my-2 mb-1"}`,children:n.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${f?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[n.jsx(XT,{className:"mr-1"})," ",u,"%"]})}),n.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${o?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[n.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${o?"text-blue-700":"text-gray-500"}`,children:e}),n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),n.jsxs("div",{className:`${f?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[n.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:n.jsx("span",{className:`z-10 drop-shadow-md ${f?"text-xs":"text-sm"}`,children:l?t:Do(a,d)})}),!l&&c>0&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/a*parseFloat(s)}%`}})]})]})]}),w1e=({id:e,children:t})=>{const{attributes:a,listeners:s,setNodeRef:r,transform:i,transition:o,isDragging:l}=h1e({id:e}),c={transform:ud.Transform.toString(i),transition:o,zIndex:l?50:"auto",opacity:l?.5:1,position:"relative"};return n.jsx("div",{ref:r,style:c,className:"h-full",children:pt.cloneElement(t,{dragHandleProps:{...a,...s}})})},N1e=({user:e,metrics:t,stages:a,currencySymbol:s,target:r,dragHandleProps:i})=>{const o=t.metrics.CLOSED_WON?.value||0,l=t.metrics.CLOSED_LOST?.value||0,c=t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count,d=c>0?(t.metrics.CLOSED_WON.count/c*100).toFixed(0):0,u=r>0?o/r*100:0;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow relative group",children:[n.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),n.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[n.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",d,"%"]}),n.jsxs("span",{className:"text-red-600 bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:["Lost: ",Do(l,s)]})]})]})]}),i&&n.jsx("button",{...i,className:"p-1.5 text-gray-300 hover:text-blue-500 hover:bg-blue-50 rounded-md cursor-grab active:cursor-grabbing transition-colors touch-none",title:"Drag to reorder",children:n.jsx(Wie,{size:16})})]}),r>0?n.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[n.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),n.jsxs("span",{className:u>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[u.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${u>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(u,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Do(o,s)})]}),n.jsxs("span",{children:["Target: ",Do(r,s)]})]})]}):n.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),n.jsx("div",{className:"flex-grow space-y-2",children:a.map((f,p)=>{const x=t.metrics[f.key];let y=null;if(p>0){const N=a[p-1].key,v=t.metrics[N].count;v>0&&(y=(x.count/v*100).toFixed(0))}return n.jsx(WE,{label:f.label,count:x.count,value:x.value,width:x.width,color:x.color,isLead:!f.isDeal,weightedValue:x.weightedValue,currencySymbol:s,conversionRate:y,compact:!0,onClick:()=>{},isActive:!1},f.key)})})]})},j1e=({data:e,stageKey:t,currencySymbol:a,basePath:s="/admin"})=>{const r=Nt(),[i,o]=h.useState({key:null,direction:"desc"}),l=t==="LEADS",c=t==="CLOSED_WON",d=t==="CLOSED_LOST",u=!l&&!c&&!d,f=h.useMemo(()=>i.key?[...e].sort((y,N)=>{let v=y[i.key],j=N[i.key];return(i.key==="amount"||i.key==="probability")&&(v=parseFloat(y[i.key]||0),j=parseFloat(N[i.key]||0)),v<j?i.direction==="asc"?-1:1:v>j?i.direction==="asc"?1:-1:0}):e,[e,i]),p=y=>{o({key:y,direction:i.key===y&&i.direction==="desc"?"asc":"desc"})},x=({columnKey:y})=>i.key!==y?n.jsx(XT,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):i.direction==="asc"?n.jsx(Rie,{className:"inline ml-1 text-blue-600"}):n.jsx(XT,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[n.jsx(yL,{size:48,className:"mb-4 opacity-50"}),n.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:n.jsx("div",{className:"overflow-x-auto flex-grow",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>p("name"),children:["Name ",n.jsx(x,{columnKey:"name"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),l&&n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>p("amount"),children:["Value ",n.jsx(x,{columnKey:"amount"})]}),n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>p("probability"),children:["Prob. ",n.jsx(x,{columnKey:"probability"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),c&&n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>p("amount"),children:["Booked ",n.jsx(x,{columnKey:"amount"})]}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-red-600 cursor-pointer group",onClick:()=>p("amount"),children:["Lost Value ",n.jsx(x,{columnKey:"amount"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Lost Date"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:f.map(y=>{const N=l?0:b1e(y.stage_updated_at||y.created_at),v=N>30&&u;return n.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>r(l?`${s}/leads/${y.id}`:`${s}/deals/info?id=${y.id}`),children:[n.jsxs("td",{className:"p-4",children:[n.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:l?`${y.first_name} ${y.last_name}`:y.name}),n.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:GE(y.created_at)})]}),n.jsx("td",{className:"p-4 text-sm text-gray-600",children:l?y.company_name:y.account?.name}),l&&n.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[y.email&&n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx(ta,{className:"mr-1"})," ",y.email]}),y.phone&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(kt,{className:"mr-1"})," ",y.phone]})]}),u&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:Do(y.amount,a)}),n.jsx("td",{className:"p-4 text-center",children:n.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${y.probability>=80?"bg-green-100 text-green-700":y.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[y.probability,"%"]})}),n.jsx("td",{className:"p-4 text-center",children:v?n.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[n.jsx(Wi,{size:14,className:"mr-1"}),n.jsxs("span",{className:"text-xs font-bold",children:[N,"d"]})]}):n.jsxs("span",{className:"text-xs text-gray-400",children:[N,"d"]})})]}),c&&n.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:Do(y.amount,a)}),d&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-bold text-red-600 opacity-75",children:Do(y.amount,a)}),n.jsx("td",{className:"p-4 text-center text-xs text-gray-500",children:GE(y.stage_updated_at)})]}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[n.jsx(en,{className:"mr-1"}),l?y.lead_owner?.first_name||y.owner?.first_name||y.assigned_to?.first_name||"Unassigned":y.assigned_deals?.first_name||y.deal_creator?.first_name||"Unassigned"]})})]},y.id)})})]})})})},xj=({leads:e,deals:t,currencySymbol:a,targets:s=[],basePath:r="/admin"})=>{const[i,o]=h.useState("ALL"),[l,c]=h.useState("ALL"),[d,u]=h.useState("ALL"),[f,p]=h.useState("AGGREGATE"),[x,y]=h.useState([]),N=Rx(Rf(nm,{activationConstraint:{distance:5}}),Rf(iP,{coordinateGetter:x1e})),v=h.useMemo(()=>{const T=new Date;if(l==="THIS_MONTH")return{start:new Date(T.getFullYear(),T.getMonth(),1),end:new Date(T.getFullYear(),T.getMonth()+1,0)};if(l==="THIS_QUARTER"){const M=Math.floor(T.getMonth()/3)*3;return{start:new Date(T.getFullYear(),M,1),end:new Date(T.getFullYear(),M+3,0)}}return l==="THIS_YEAR"?{start:new Date(T.getFullYear(),0,1),end:new Date(T.getFullYear(),11,31)}:null},[l]),j=h.useMemo(()=>s.filter(T=>{if(d!=="ALL"){const M=T.user?.id||T.user_id||T.assigned_to;if(parseInt(M)!==parseInt(d))return!1}if(v){const M=new Date(T.start_date),R=new Date(T.end_date);return M<=v.end&&R>=v.start}return!0}),[s,d,v]),w=h.useMemo(()=>{const T=new Map,M=R=>{R&&R.id&&T.set(R.id,`${R.first_name} ${R.last_name}`)};return e.forEach(R=>M(R.lead_owner||R.owner||R.assigned_to)),t.forEach(R=>{M(R.assigned_deals),M(R.deal_creator)}),Array.from(T.entries()).map(([R,z])=>({id:R,name:z}))},[e,t]),S=h.useMemo(()=>{const T=new Date;let M=null;l==="THIS_MONTH"?M=new Date(T.getFullYear(),T.getMonth(),1):l==="THIS_QUARTER"?M=new Date(T.getFullYear(),Math.floor(T.getMonth()/3)*3,1):l==="THIS_YEAR"&&(M=new Date(T.getFullYear(),0,1));const R=te=>{const W=new Date(te.created_at);if(M&&W<M)return!1;if(d!=="ALL"){const ae=parseInt(d);return!!(te.lead_owner&&(te.lead_owner.id||te.lead_owner)===ae||te.assigned_to?.id===ae||te.owner?.id===ae||te.assigned_deals?.id===ae||te.created_by===ae)}return!0},z=e.filter(R),O=t.filter(R),I=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],B=(te,W)=>{const ae=I.reduce((se,Y)=>(se[Y.key]={...Y,count:0,value:0,weightedValue:0,items:[]},se),{});ae.LEADS.count=te.length,ae.LEADS.items=te,W.forEach(se=>{const Y=(se.stage||"").toUpperCase();if(ae[Y]){ae[Y].count++,ae[Y].items.push(se);const pe=parseFloat(se.amount||0);ae[Y].value+=pe,ae[Y].weightedValue+=pe*((se.probability||0)/100)}});const Ee=Math.max(...Object.values(ae).map(se=>se.count),1);return Object.keys(ae).forEach(se=>{const Y=ae[se];Y.width=Y.count===0?"0%":`${Math.max(Y.count/Ee*100,15)}%`}),{metrics:ae,filteredDeals:W,filteredLeads:te}},ee=B(z,O),Q=[];return f==="COMPARE"&&(d==="ALL"?w:w.filter(W=>W.id===parseInt(d))).forEach(W=>{const ae=parseInt(W.id),Ee=z.filter(Se=>(Se.lead_owner?.id||Se.lead_owner||Se.assigned_to?.id||Se.owner?.id)===ae),se=O.filter(Se=>(Se.assigned_deals?.id||Se.created_by)===ae),Y=j.find(Se=>{const me=Se.user?.id||Se.user_id||Se.assigned_to;return parseInt(me)===ae}),pe=parseFloat(Y?.amount||Y?.target_amount||Y?.value||0);(Ee.length>0||se.length>0||pe>0)&&Q.push({user:W,data:B(Ee,se),target:pe})}),{stages:I,aggregate:ee,userGroups:Q}},[t,e,l,d,f,w,j]),A=h.useMemo(()=>{if(!S.userGroups.length)return[];const T=[...S.userGroups];return x.length>0&&T.sort((M,R)=>{const z=x.indexOf(M.user.id),O=x.indexOf(R.user.id);return z!==-1&&O!==-1?z-O:z!==-1?-1:O!==-1?1:0}),T},[S.userGroups,x]),k=T=>{const{active:M,over:R}=T;M.id!==R.id&&y(()=>{const z=A.map(B=>B.user.id),O=z.indexOf(M.id),I=z.indexOf(R.id);return cP(z,O,I)})},_=h.useMemo(()=>{const T=j.reduce((ae,Ee)=>ae+parseFloat(Ee.amount||Ee.target_amount||Ee.value||0),0),M=S.aggregate.metrics,R=M.CLOSED_WON?.value||0,z=M.CLOSED_WON?.count||0,O=M.CLOSED_LOST?.value||0,I=M.CLOSED_LOST?.count||0,B=M.LEADS?.count||0,ee=T>0?R/T*100:0,Q=z+I,te=Q>0?z/Q*100:0,W=B>0?z/B*100:0;return{totalTarget:T,totalWon:R,totalLost:O,progress:ee,winRate:te,conversionRate:W}},[j,S]),L=h.useMemo(()=>i==="ALL"?[]:S.aggregate.metrics[i]?.items||[],[i,S]);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[n.jsx(yL,{className:"mr-2"})," Pipeline Intelligence"]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Analyze pipeline velocity and bottlenecks."})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[n.jsxs("select",{value:l,onChange:T=>c(T.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Time"}),n.jsx("option",{value:"THIS_MONTH",children:"This Month"}),n.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),n.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),n.jsxs("select",{value:d,onChange:T=>u(T.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Users"}),w.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]}),n.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[n.jsx("button",{onClick:()=>p("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${f==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),n.jsx("button",{onClick:()=>p("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${f==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]}),f==="COMPARE"?n.jsx(Ux,{sensors:N,collisionDetection:zx,onDragEnd:k,children:n.jsx(o1e,{items:A.map(T=>T.user.id),strategy:dP,children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[A.map(T=>n.jsx(w1e,{id:T.user.id,children:n.jsx(N1e,{user:T.user,metrics:T.data,stages:S.stages.filter(M=>M.key!=="CLOSED_LOST"),currencySymbol:a,target:T.target})},T.user.id)),A.length===0&&n.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]})})}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[n.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-4 bottom-4 w-0.5 bg-gray-100 -z-0"}),S.stages.filter(T=>T.key!=="CLOSED_LOST").map((T,M)=>{const R=S.aggregate.metrics[T.key];let z=null;if(M>0){const O=S.stages[M-1].key,I=S.aggregate.metrics[O].count;I>0&&(z=(R.count/I*100).toFixed(0))}return n.jsx(WE,{label:T.label,count:R.count,value:R.value,width:R.width,color:R.color,isLead:!T.isDeal,weightedValue:R.weightedValue,currencySymbol:a,isActive:i===T.key,conversionRate:z,onClick:()=>o(T.key)},T.key)})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsx("div",{className:"mb-2 text-xs font-bold text-gray-400 uppercase",children:"Funnel Health"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[n.jsxs("div",{className:"bg-green-50 rounded p-2 border border-green-100",children:[n.jsx("p",{className:"text-[9px] text-green-600 uppercase font-bold",children:"Win Rate"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[_.winRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-100",children:[n.jsx("p",{className:"text-[9px] text-blue-600 uppercase font-bold",children:"Conversion"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[_.conversionRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-red-50 rounded p-2 border border-red-100",children:[n.jsx("p",{className:"text-[9px] text-red-600 uppercase font-bold",children:"Lost Value"}),n.jsx("p",{className:"text-sm font-bold text-gray-800",children:Do(_.totalLost,a)})]})]}),n.jsx(WE,{label:"Closed Lost",count:S.aggregate.metrics.CLOSED_LOST.count,value:S.aggregate.metrics.CLOSED_LOST.value,width:S.aggregate.metrics.CLOSED_LOST.width,color:"bg-red-500 opacity-90",isLead:!1,weightedValue:0,currencySymbol:a,isActive:i==="CLOSED_LOST",onClick:()=>o("CLOSED_LOST")},"CLOSED_LOST"),n.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[n.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[n.jsx(ur,{className:"mr-1"})," Total Target"]}),n.jsxs("span",{className:_.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[_.progress.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${_.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(_.progress,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Do(_.totalWon,a)})]}),n.jsxs("span",{children:["Goal: ",Do(_.totalTarget,a)]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-8 h-[600px] flex flex-col",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:i==="ALL"?n.jsx("span",{children:"Select a stage to view details"}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${S.aggregate.metrics[i]?.color}`}),S.stages.find(T=>T.key===i)?.label," Details",n.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[L.length," records"]})]})}),i!=="ALL"&&L.length>0&&n.jsxs("button",{onClick:()=>v1e(L,`Funnel_${i}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[n.jsx(qo,{className:"mr-1"})," Export"]})]}),i==="ALL"?n.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[n.jsx(Hie,{size:48,className:"mb-4 text-blue-100"}),n.jsx("p",{children:"Click on any stage bar (including Lost Deals) to inspect records."})]}):n.jsx(j1e,{data:L,stageKey:i,currencySymbol:a,basePath:r})]})]})]})},C1e=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e)}`,S1e=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-s)/864e5+1)/7)},yj=({currencySymbol:e=""})=>{const[t,a]=h.useState("month"),[s,r]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!1),f=new Date,p=f.getFullYear(),x=f.getMonth()+1,y=S1e(f),N=h.useCallback(async()=>{u(!0);try{const S=new URLSearchParams;S.append("period_type","MONTHLY"),S.append("period_year",p),S.append("period_number",x);const A=await ie.get(`/targets/leaderboard?${S.toString()}`).catch(()=>({data:{entries:[]}}));o(A.data?.entries||[]);const k=new URLSearchParams;k.append("period_type","ANNUAL"),k.append("period_year",p);const _=await ie.get(`/targets/leaderboard?${k.toString()}`).catch(()=>({data:{entries:[]}}));c(_.data?.entries||[]);const L=new Date,T=new Date;T.setDate(T.getDate()-7);const M=new URLSearchParams;M.append("start_date",T.toISOString().split("T")[0]),M.append("end_date",L.toISOString().split("T")[0]);const R=await ie.get(`/targets/leaderboard?${M.toString()}`).catch(()=>({data:{entries:[]}}));r(R.data?.entries||[])}catch(S){console.error("Error fetching leaderboard data:",S)}finally{u(!1)}},[p,x]);h.useEffect(()=>{N()},[N]);const v=h.useMemo(()=>{let S=[];switch(t){case"week":S=s;break;case"month":S=i;break;case"year":S=l;break;default:S=i}return Array.isArray(S)?S.slice(0,5):[]},[t,s,i,l]),j=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"year",label:"Year"}],w=S=>{switch(S){case 0:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 1:return"bg-gray-100 text-gray-600 border-gray-300";case 2:return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-50 text-gray-500 border-gray-200"}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(rd,{className:"text-blue-500",size:20}),n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Top 5 Performers"})]})}),n.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:j.map(S=>n.jsx("button",{onClick:()=>a(S.id),className:`flex-1 py-1.5 px-3 text-xs font-medium rounded-md transition-all duration-200 ${t===S.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:S.label},S.id))}),d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):v.length>0?n.jsx("div",{className:"space-y-3 flex-1",children:v.map((S,A)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border ${w(A)}`,children:A+1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-[120px]",children:S.user_name||"Unknown Rep"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full ${S.achievement_percentage>=100?"bg-green-500":S.achievement_percentage>=50?"bg-yellow-500":"bg-red-400"}`,style:{width:`${Math.min(S.achievement_percentage,100)}%`}})}),n.jsxs("span",{className:"text-[10px] text-gray-500",children:[S.achievement_percentage?.toFixed(1),"%"]})]})]})]}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:C1e(S.achieved_amount||0,e)})]},S.user_id||A))}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[n.jsx(Tt,{size:32,className:"mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No data for this period"})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:n.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:[t==="week"&&`Week ${y}, ${p}`,t==="month"&&`${f.toLocaleString("default",{month:"long"})} ${p}`,t==="year"&&`Year ${p}`]})})]})},_1e=e=>n.jsx(qt,{...e}),A1e=e=>n.jsx(vd,{...e}),uP=e=>n.jsx(Ws,{...e}),T1e=e=>n.jsx(ox,{...e}),E1e=e=>n.jsx(Jw,{...e}),k1e=e=>n.jsx(Tt,{...e}),L1e=e=>n.jsx(kt,{...e}),P1e=e=>n.jsx(tN,{...e}),eY=e=>n.jsx(eN,{...e}),D1e=e=>n.jsx(na,{...e}),tY=e=>n.jsx(en,{...e}),O1e=e=>n.jsx(Yn,{...e}),nY=e=>n.jsx(Jt,{...e}),M1e=e=>n.jsx(un,{...e}),aY=e=>n.jsx(ur,{...e}),I1e=e=>n.jsx(ga,{...e}),$1e=e=>n.jsx(Tt,{...e}),R1e=e=>n.jsx(Rs,{...e}),z1e=e=>n.jsx(Zl,{...e}),F1e=e=>n.jsx(Ts,{...e}),sY=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},U1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},B1e=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},H1e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},q1e=e=>{switch(e){case"call":return{Icon:L1e,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:P1e,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:k1e,color:"text-blue-500",bgColor:"bg-blue-100"}}},G1e=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},W1e=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=Nt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:A1e,label:"Account"},{icon:tY,label:"Contact"},{icon:O1e,label:"Leads"},{icon:nY,label:"Deals"},{icon:M1e,label:"Quotes"},{icon:aY,label:"Target"},{icon:I1e,label:"Task"},{icon:$1e,label:"Meeting"},{icon:R1e,label:"Call"},{icon:F1e,label:"Audit"},{icon:z1e,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(_1e,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[f.label]&&r(x[f.label])},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},V1e=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=Nt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,y=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},Y1e=({logs:e,loading:t})=>{const a=Nt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(eY,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(V1e,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},Q1e=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),K1e=({revenueData:e,loading:t})=>{const a=Nt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(!e||e.length===0){const N=new Date().getMonth(),v=[],j=[];for(let w=0;w<=N;w++)v.push(s[w]),j.push(0);return{labels:v,revenues:j,maxRevenue:0}}const l={};e.forEach(y=>{const N=y.close_date||y.closeDate||null,v=y.stage||"",j=v.toUpperCase()==="CLOSED_WON"||v==="CLOSED_WON";let w=y.amount;w&&typeof w=="object"&&w.toString?w=parseFloat(w.toString()):w=parseFloat(w)||0;const S=w>0;if(N&&N!==null&&j&&S)try{let A=new Date(N);if(isNaN(A.getTime())){const k=String(N).split("T")[0];A=new Date(k+"T00:00:00")}if(!isNaN(A.getTime())){const k=A.getFullYear(),_=A.getMonth()+1,L=`${k}-${String(_).padStart(2,"0")}`;l[L]||(l[L]=0),l[L]+=w}}catch(A){console.error("Error parsing deal date:",N,A)}});const c=Object.keys(l).map(y=>parseInt(y.split("-")[0])),d=c.length>0?[...new Set(c)].sort():[],u=new Date().getFullYear(),f=[],p=[];for(let y=0;y<12;y++){const N=`${u}-${String(y+1).padStart(2,"0")}`;f.push(s[y]),p.push(l[N]||0)}if(d.length>0){const y=Math.max(...d);if(y>u)for(let N=u+1;N<=y;N++)for(let v=0;v<12;v++){const j=`${N}-${String(v+1).padStart(2,"0")}`,w=l[j]||0;f.push(`${s[v]} ${N}`),p.push(w)}}const x=Math.max(...p,1);return{labels:f,revenues:p,maxRevenue:x}},[e]),i=r.labels,o=r.revenues;return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(eY,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&o&&o.length>0?n.jsx(cj,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},C2=({title:e,items:t,children:a,onSeeAll:s})=>{const r=Nt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},X1e=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=Nt(),{text:l,bg:c}=H1e(s||"Website"),d=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},Z1e=({name:e,amount:t,account:a,stage:s,created_at:r,stage_updated_at:i,id:o,previousAmount:l,currencySymbol:c})=>{const d=Nt(),f={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=B1e(f),y=U1e(i||r),N=y>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",v=parseFloat(t||0),j=l?v>=l?"up":"down":"up",w=j==="up"?T1e:E1e,S=j==="up"?"text-green-400":"text-red-400",A=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>o&&d(`/admin/deals/info?id=${o}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),N&&n.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[n.jsx(uP,{size:10,className:"mr-1"})," ",y," days stuck"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:A}),n.jsx("div",{className:"mt-1 flex items-center space-x-2",children:n.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:f})})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:sY(v,c)}),n.jsx(w,{size:16,className:`${S} mt-1`})]})]})})},J1e=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=Nt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=q1e(f),{text:N,bg:v}=G1e(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const L=new Date(_),M=L-new Date,R=Math.floor(M/864e5);return R===0?`Today, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:L.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/admin/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/admin/meetings/info?id=${o}`)):d("/admin/tasks"):d(f==="call"?`/admin/calls/info?id=${o}`:f==="meeting"?`/admin/meetings/info?id=${o}`:"/admin/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(uP,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(tY,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},eCe=()=>{const e=Nt(),{user:t}=Gt(),a=t?.company?.currency||"",[s,r]=h.useState([]),[i,o]=h.useState(0),[l,c]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState([]),[j,w]=h.useState([]),[S,A]=h.useState(!0),[k,_]=h.useState(null),[L,T]=h.useState(""),[M,R]=h.useState([]),[z,O]=h.useState([]),[I,B]=h.useState([]),[ee,Q]=h.useState(new Date),te=h.useRef(null);h.useRef(null);const W=h.useMemo(()=>{try{if(!L.trim())return[];const Y=L.toLowerCase().trim(),pe=[];return Array.isArray(M)&&M.forEach(Se=>{const me=`${Se.first_name||""} ${Se.last_name||""}`.trim().toLowerCase(),ye=(Se.company_name||"").toLowerCase(),re=(Se.email||"").toLowerCase(),De=(Se.phone||"").toLowerCase();(me.includes(Y)||ye.includes(Y)||re.includes(Y)||De.includes(Y))&&pe.push({id:Se.id,name:`${Se.first_name||""} ${Se.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:Se.company_name||"No company",route:`/admin/leads/${Se.id}`})}),Array.isArray(z)&&z.forEach(Se=>{const me=(Se.name||"").toLowerCase(),ye=(Se.account?.name||"").toLowerCase(),re=(Se.description||"").toLowerCase();(me.includes(Y)||ye.includes(Y)||re.includes(Y))&&pe.push({id:Se.id,name:Se.name||"Unnamed Deal",type:"Deal",details:Se.account?.name||"No account",route:`/admin/deals/info?id=${Se.id}`})}),Array.isArray(I)&&I.forEach(Se=>{const me=(Se.name||"").toLowerCase(),ye=(Se.email||"").toLowerCase(),re=(Se.phone||"").toLowerCase(),De=(Se.website||"").toLowerCase();(me.includes(Y)||ye.includes(Y)||re.includes(Y)||De.includes(Y))&&pe.push({id:Se.id,name:Se.name||"Unnamed Account",type:"Account",details:Se.email||Se.phone||"No contact info",route:"/admin/accounts"})}),pe.slice(0,10)}catch(Y){return console.error("Error in search:",Y),[]}},[L,M,z,I]),ae=Y=>{Y.route&&(e(Y.route),T(""))},Ee=h.useCallback(async()=>{A(!0),_(null);try{const[Y,pe,Se,me,ye,re,De,ve]=await Promise.all([ie.get("/leads/admin/getLeads").catch(ce=>(console.error("Error fetching leads:",ce),{data:[]})),ie.get("/deals/admin/fetch-all").catch(ce=>(console.error("Error fetching deals:",ce),{data:[]})),ie.get("/accounts/admin/fetch-all").catch(ce=>(console.error("Error fetching accounts:",ce),{data:[]})),ie.get("/tasks/all").catch(ce=>(console.error("Error fetching tasks:",ce),{data:[]})),ie.get("/meetings/admin/fetch-all").catch(ce=>(console.error("Error fetching meetings:",ce),{data:[]})),ie.get("/calls/admin/fetch-all").catch(ce=>(console.error("Error fetching calls:",ce),{data:[]})),ie.get("/logs/read-all").catch(ce=>(console.error("Error fetching logs:",ce),{data:[]})),ie.get("/targets/admin/fetch-all").catch(ce=>(console.error("Error fetching targets:",ce),{data:[]}))]),ke=Array.isArray(Y.data)?Y.data:[],Ce=Array.isArray(pe.data)?pe.data:[],de=Array.isArray(Se.data)?Se.data:[],Re=Array.isArray(me.data)?me.data:[],Oe=Array.isArray(ye.data)?ye.data:[],Ge=Array.isArray(re.data)?re.data:[],et=Array.isArray(De.data)?De.data:[],mt=Array.isArray(ve.data)?ve.data:[];R(ke),O(Ce),B(de),r(mt);const Fe=mt.reduce((ce,oe)=>{const U=oe.amount||oe.value||oe.target_amount||0,V=parseFloat(typeof U=="string"?U.replace(/[^\d.-]/g,""):U);return ce+(isNaN(V)?0:V)},0);o(Fe),c({activeLeads:ke.filter(ce=>ce.status&&!["Lost","Converted"].includes(ce.status)).length,totalDeals:Ce.length,activeAccounts:de.length,overdueTasks:Re.filter(ce=>!ce.dueDate||ce.status==="Completed"?!1:new Date(ce.dueDate)<new Date).length});const ot=[...ke].sort((ce,oe)=>new Date(oe.created_at||0)-new Date(ce.created_at||0)).slice(0,5);u(ot);const We=[...Ce].sort((ce,oe)=>new Date(oe.created_at||0)-new Date(ce.created_at||0)).slice(0,5);p(We);const Ke=[];Ge.forEach(ce=>{const oe=ce.due_date||ce.call_time,U=(ce.status||"").toUpperCase();oe&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(U)&&Ke.push({type:"Call",title:ce.subject||"Untitled Call",assignedTo:ce.assigned_to||(ce.call_assign_to?`${ce.call_assign_to.first_name||""} ${ce.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:oe,priority:(ce.priority||"MEDIUM").toUpperCase(),id:ce.id,activityType:"call",fullData:ce})}),Oe.forEach(ce=>{const oe=ce.dueDate||ce.start_time,U=(ce.status||"").toUpperCase();oe&&!["COMPLETED","CANCELLED","DONE"].includes(U)&&Ke.push({type:"Meeting",title:ce.subject||ce.activity||"Untitled Meeting",assignedTo:ce.assignedTo||(ce.meet_assign_to?`${ce.meet_assign_to.first_name||""} ${ce.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:oe,priority:(ce.priority||"MEDIUM").toUpperCase(),id:ce.id,activityType:"meeting",fullData:ce})});const Ze={HIGH:1,MEDIUM:2,LOW:3},Me=Ke.sort((ce,oe)=>{const U=Ze[ce.priority]||3,V=Ze[oe.priority]||3;return U!==V?U-V:new Date(ce.scheduledDate||0)-new Date(oe.scheduledDate||0)}).slice(0,5);y(Me),w(Ce);const je=[...et].sort((ce,oe)=>new Date(oe.timestamp||0)-new Date(ce.timestamp||0));v(je)}catch(Y){console.error("Error fetching dashboard data:",Y),_("Failed to load dashboard data. Please refresh the page.")}finally{A(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",Ee(),te.current=setInterval(()=>{Ee(),Q(new Date)},3e4),()=>{te.current&&clearInterval(te.current)}),[Ee]);const se=[{icon:D1e,title:"Active Leads",value:l.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:aY,title:"Total Targets",value:sY(i,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:nY,title:"Total Deals",value:l.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:uP,title:"Overdue Tasks",value:l.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[k&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:k})}),n.jsx("div",{className:"mb-8",children:n.jsx(W1e,{searchQuery:L,onSearchChange:T,searchResults:W,onSearchResultClick:ae})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:se.map(Y=>n.jsx(Q1e,{...Y,loading:S},Y.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(Y1e,{logs:N,loading:S}),n.jsx(yj,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(xj,{leads:M,deals:z,targets:s,currencySymbol:a})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(K1e,{revenueData:j,loading:S})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(C2,{title:"Latest Leads",children:d.length>0?d.map((Y,pe)=>n.jsx(X1e,{...Y},Y.id||pe)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(C2,{title:"Latest Deals",children:f.length>0?f.map((Y,pe)=>n.jsx(Z1e,{...Y,stage_updated_at:Y.stage_updated_at,currencySymbol:a},Y.id||pe)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(C2,{title:"Upcoming Activities",children:x.length>0?x.map((Y,pe)=>n.jsx(J1e,{...Y},Y.id||pe)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function an({totalItems:e=0,pageSize:t=10,currentPage:a=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:o=[10,20,30,40,50],className:l="",label:c="records"}){const d=e===0?1:Math.ceil(e/t),u=e===0?0:(a-1)*t+1,f=Math.min(a*t,e),p=a<=1||e===0,x=a>=d||e===0,y="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",N="bg-black text-white hover:bg-gray-900",v="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return n.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${l}`,children:[n.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:u,"-",f," of ",e," ",c]}),i&&n.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[n.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),n.jsx("select",{value:t,onChange:j=>i(Number(j.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:o.map(j=>n.jsx("option",{value:j,children:j},j))})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[n.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${y} ${p?v:N}`,children:[n.jsx(Uie,{className:"text-base"}),"Prev"]}),n.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:a," of"," ",e===0?0:d]}),n.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${y} ${x?v:N}`,children:["Next",n.jsx(Dt,{className:"text-base"})]})]})]})}const tCe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nCe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,s)=>s?s.toUpperCase():a.toLowerCase()),SR=e=>{const t=nCe(e);return t.charAt(0).toUpperCase()+t.slice(1)},rY=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim(),aCe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var sCe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rCe=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...sCe,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:rY("lucide",r),...!i&&!aCe(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));const oh=(e,t)=>{const a=h.forwardRef(({className:s,...r},i)=>h.createElement(rCe,{ref:i,iconNode:t,className:rY(`lucide-${tCe(SR(e))}`,`lucide-${e}`,s),...r}));return a.displayName=SR(e),a};const iCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oCe=oh("globe",iCe);const lCe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_R=oh("lock",lCe);const cCe=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],dCe=oh("message-circle",cCe);const uCe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],mCe=oh("message-square",uCe);const fCe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],hCe=oh("send",fCe);const gCe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bj=oh("x",gCe);function _a({comments:e=[],onAddComment:t,currentUser:a}){const[s,r]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(!1),d=async u=>{if(u.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(f){console.error("Failed to add comment:",f)}finally{c(!1)}}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[n.jsx(mCe,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&n.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),n.jsx("div",{className:"mt-4",children:e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(dCe,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),n.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):n.jsx("div",{className:"space-y-3",children:e.map(u=>n.jsxs("div",{className:"flex gap-3 p-3 bg-gray-100 rounded-lg border border-gray-100",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-9 h-9 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:u.comment_creator?.profile_picture?n.jsx("img",{src:`${u.comment_creator.profile_picture}`,alt:`${u.comment_creator?.first_name||u.comment_creator?.email||"User"}'s profile`,className:"w-9 h-9 rounded-full object-cover"}):u.comment_creator?.first_name?.[0]||u.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:u.comment_creator?.first_name||u.comment_creator?.email||"Unknown User"}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),u.is_private&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[n.jsx(_R,{className:"w-3 h-3"}),"Private"]})]}),n.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words text-xs",children:u.comment})]})]},u.id))})}),n.jsxs("form",{onSubmit:d,className:"mt-6 pt-4 border-t border-gray-200 text-sm",children:[n.jsx("div",{className:"relative",children:n.jsx("textarea",{value:s,onChange:u=>r(u.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsx("button",{type:"button",onClick:()=>o(!i),className:`cursor-pointer flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsx(_R,{className:"w-4 h-4"}),"Private"]}):n.jsxs(n.Fragment,{children:[n.jsx(oCe,{className:"w-4 h-4"}),"Public"]})}),n.jsxs("button",{type:"submit",disabled:!s.trim()||l,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n.jsx(hCe,{className:"w-4 h-4"}),l?"Posting...":"Post Comment"]})]})]})]})}async function pCe({relatedType:e,relatedId:t}){const a=await ie.get("/comments",{params:{related_type:e,related_id:t}});return Array.isArray(a.data)?a.data:[]}async function xCe({relatedType:e,relatedId:t,comment:a,isPrivate:s}){return(await ie.post("/comments",{related_type:e,related_id:t,comment:a,is_private:!!s})).data}function Aa({relatedType:e,relatedId:t}){const[a,s]=h.useState([]),[r,i]=h.useState(!1),o=h.useCallback(async()=>{if(!e||!t){s([]);return}i(!0);try{const c=await pCe({relatedType:e,relatedId:t});s(c)}finally{i(!1)}},[e,t]),l=h.useCallback(async({comment:c,is_private:d})=>{!e||!t||(await xCe({relatedType:e,relatedId:t,comment:c,isPrivate:d}),await o())},[e,t,o]);return h.useEffect(()=>{o()},[o]),{comments:a,loading:r,refresh:o,addComment:l}}const S2=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],_2={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},or=e=>e?e.toUpperCase():"",A2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",yCe=e=>{switch(or(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},bCe=e=>{switch(or(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function vCe(){const e=Nt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(_2),[x,y]=h.useState(null),[N,v]=h.useState([]),[j,w]=h.useState(!1),[S,A]=h.useState([]),[k,_]=h.useState(null),[L,T]=h.useState([]),[M,R]=h.useState([]),[z,O]=h.useState("Filter by Status"),[I,B]=h.useState(""),[ee,Q]=h.useState(null),[te,W]=h.useState(!1),[ae,Ee]=h.useState(1),[se,Y]=h.useState(10),[pe,Se]=h.useState("Overview"),[me,ye]=h.useState(""),[re,De]=h.useState(!1),[ve,ke]=h.useState([]),[Ce,de]=h.useState({}),[Re,Oe]=h.useState(null),{comments:Ge,addComment:et,refresh:mt}=Aa({relatedType:"account",relatedId:x?.id});h.useEffect(()=>{x?.id&&mt()},[x?.id,mt]);const Fe=h.useCallback(async(Be=null)=>{w(!0);try{const St=await ie.get("/accounts/admin/fetch-all"),E=[...Array.isArray(St.data)?St.data:[]].sort((Z,_e)=>{const Le=Z?.created_at||Z?.updated_at||0,qe=_e?.created_at||_e?.updated_at||0;return new Date(qe)-new Date(Le)});if(v(E),Be){const Z=E.find(_e=>_e.id===Be);y(Z||null)}}catch(St){console.error(St),v([]),St.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[y]),ot=h.useCallback(async()=>{try{const Be=await ie.get("/users/all");A(Array.isArray(Be.data)?Be.data:[])}catch(Be){console.error(Be),Be.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),We=h.useCallback(async()=>{try{const Be=await ie.get("/territories/fetch");T(Array.isArray(Be.data)?Be.data:[])}catch(Be){console.error(Be),Be.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Ke=h.useCallback(async()=>{try{const Be=await ie.get("/accounts/admin/parent-companies");R(Array.isArray(Be.data)?Be.data:[])}catch(Be){console.error(Be),Be.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),Ze=h.useCallback(async Be=>{try{const St=await ie.get(`/activities/accounts/${Be}`);de(St.data&&typeof St.data=="object"?St.data:{})}catch(St){console.error(St),St.response?.status===404&&(console.warn("No activities found for this account."),de({}))}},[]);h.useEffect(()=>{Fe(),ot(),We(),Ke()},[Fe,ot,We,Ke]),h.useEffect(()=>{Ee(1)},[I,z,se]);const Me=h.useMemo(()=>{const Be=I.toLowerCase(),St=z;return N.filter(P=>{const E=P.name?.toLowerCase().includes(Be)||P.website?.toLowerCase().includes(Be)||P.phone_number?.toLowerCase().includes(Be)||P.industry?.toLowerCase().includes(Be)||P.parent_company?.toLowerCase().includes(Be)||P.territory?.name?.toLowerCase().includes(Be),Z=St==="Filter by Status"||or(P.status)===or(St);return E&&Z})},[N,I,z]),je=Math.max(1,Math.ceil(Me.length/se)||1);h.useEffect(()=>{Ee(Be=>{const St=Math.max(1,Math.ceil(Me.length/se)||1);return Be>St?St:Be})},[Me.length,se]);const ce=h.useMemo(()=>{const Be=(ae-1)*se;return Me.slice(Be,Be+se)},[Me,ae,se]),oe=Be=>{if(Be.target.checked){const St=ce.map(P=>P.id);ke(St)}else ke([])},U=Be=>{ke(St=>St.includes(Be)?St.filter(P=>P!==Be):[...St,Be])},V=async()=>{ve.length!==0&&Q({title:"Delete Accounts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ve.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${ve.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:ve}})};Me.length===0||(ae-1)*se+1,Math.min(ae*se,Me.length);const be=()=>Ee(Be=>Math.max(Be-1,1)),ze=()=>Ee(Be=>Math.min(Be+1,je));h.useEffect(()=>{x&&ye(or(x.status)||"PROSPECT")},[x]);const le=N.length,X=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="customer").length,[N]),Ae=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="prospect").length,[N]),Pe=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="partner").length,[N]),Qe=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="active").length,[N]),nt=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="inactive").length,[N]),wt=h.useMemo(()=>N.filter(Be=>Be.status?.toLowerCase()==="former").length,[N]),Te=h.useMemo(()=>[{title:"Total",value:le,icon:na,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:X,icon:Io,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ae,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Pe,icon:en,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Qe,icon:Io,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:nt,icon:$o,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:wt,icon:$o,color:"text-orange-600",bgColor:"bg-orange-100"}],[le,X,Ae,Pe,Qe,nt,wt]),it=Be=>{y(Be),Se("Overview"),ye(or(Be?.status)||"PROSPECT")},$e=()=>y(null),ue=Be=>{Be.target.id==="accountModalBackdrop"&&!te&&$e()},he=()=>{a(!1),r(!1),u(null),p(_2),o(!1),_(null)},F=Be=>{Be.target.id==="modalBackdrop"&&he()},G=Be=>Be?new Date(Be).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ne=Be=>{const{name:St,value:P}=Be.target;p(E=>({...E,[St]:P}))},ge=()=>{p(_2),r(!1),u(null),a(!0)},fe=Be=>{y(null),Be.assigned_accs?_(Be.assigned_accs):_(null),p({name:Be.name||"",website:Be.website||"",phone_number:Be.phone_number||"",billing_address:Be.billing_address||"",shipping_address:Be.shipping_address||"",parent_company:Be.parent_company||"",industry:Be.industry||"",status:or(Be.status)||"PROSPECT",territory_id:Be.territory?.id?String(Be.territory.id):"",assigned_to:Be.assigned_accs?.id?String(Be.assigned_accs.id):""}),r(!0),u(Be.id),a(!0)},Ue=Be=>{Be&&Q({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:Be.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Be.id,name:Be.name}})},K=async()=>{if(!ee?.action){Q(null);return}const{action:Be}=ee,{type:St,payload:P,targetId:E,name:Z,accountIds:_e}=Be;W(!0);try{if(St==="create"){o(!0);const Le=await ie.post("/accounts/admin",P);Ke(),q.success(`Account "${Z}" created successfully.`);const qe=x?.id||null;he(),await Fe(qe),!x&&Le.data?.id}else if(St==="update"){if(!E)throw new Error("Missing account identifier for update.");o(!0),await ie.put(`/accounts/admin/${E}`,P),q.success(`Account "${Z}" updated successfully.`);const Le=x?.id&&x.id===E?E:null;he(),await Fe(Le),x?.id===E&&y(null)}else if(St==="delete"){if(!E)throw new Error("Missing account identifier for deletion.");const Le=x?.id;c(E),await ie.delete(`/accounts/admin/${E}`),q.success(`Account "${Z}" deleted successfully.`),await Fe(Le&&Le!==E?Le:null),Le===E&&y(null)}else St==="bulk-delete"&&(await ie.delete("/accounts/admin/bulk-delete",{data:{account_ids:_e}}),q.success(`Successfully deleted ${_e.length} accounts`),ke([]),await Fe())}catch(Le){console.error(Le);const qe=St==="create"?"Failed to create account. Please review the details and try again.":St==="update"?"Failed to update account. Please review the details and try again.":St==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Xe=Le.response?.data?.detail||qe;q.error(Xe),(St==="create"||St==="update")&&o(!1),St==="delete"&&c(null)}finally{(St==="create"||St==="update")&&o(!1),St==="delete"&&c(null),W(!1),Q(null)}},ne=()=>{te||Q(null)},H=async()=>{if(!x||!me)return;const Be=or(me),St=or(x.status);if(Be!==St){De(!0);try{await ie.put(`/accounts/admin/${x.id}`,{status:Be}),q.success(`Account status updated to ${A2(Be)}`),v(P=>P.map(E=>E.id===x.id?{...E,status:Be}:E)),y(null)}catch(P){console.error(P);const E=P.response?.data?.detail||"Failed to update account status. Please try again.";q.error(E)}finally{De(!1)}}},[xe,Ie]=h.useState(!1),Je=Be=>{Be.preventDefault(),Ie(!0);const St=f.name.trim();if(!St){q.error("Account name is required.");return}if(!f.assigned_to){q.error("Assigned To is required.");return}const E={name:St,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},Z=s&&d?"update":"create";Q({title:Z==="create"?"Confirm New Account":"Confirm Update",message:Z==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:St}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:St}),"?"]}),confirmLabel:Z==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Z,payload:E,targetId:d||null,name:St}})},ct=[{label:"Filter by Status",value:"Filter by Status"},...S2.map(Be=>({label:Be.label,value:Be.value}))],bt=ee?.action?.type==="delete"?ee.action.targetId:null,Pt=x&&(l===x.id||bt===x.id),Et=x&&l===x.id,Yt=x?yCe(x.status):"",rn=x?n.jsx("div",{id:"accountModalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Be=>Be.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:$e,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Yt}`,children:A2(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(x),disabled:ee?.action?.type==="update"&&ee.action.targetId===x.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ue(x),disabled:!!Pt,children:Et?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(Be=>n.jsx("button",{onClick:()=>Se(Be),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${pe===Be?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Be},Be))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[pe==="Overview"&&n.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:G(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:G(x.updated_at)||"N/A"})]})]})}),n.jsx(_a,{comments:Ge,onAddComment:et})]}),pe==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),pe==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Ce.tasks&&Ce.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Oe(Re==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Ce.tasks.length,")"]})]}),Re==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Re==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.tasks.map((Be,St)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Be.subject||Be.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Be.description||"No description"}),Be.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",Be.assigned_to.first_name," ",Be.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(Be.due_date||Be.created_at)})]},`task-${St}`))})]}),Ce.meetings&&Ce.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Oe(Re==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Ce.meetings.length,")"]})]}),Re==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Re==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.meetings.map((Be,St)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Be.subject||Be.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Be.description||Be.location||"No description"}),Be.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",Be.host.first_name," ",Be.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(Be.start_time||Be.created_at)})]},`meeting-${St}`))})]}),Ce.calls&&Ce.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Oe(Re==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Ce.calls.length,")"]})]}),Re==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Re==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.calls.map((Be,St)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Be.subject||Be.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Be.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(Be.call_time||Be.created_at)})]},`call-${St}`))})]}),Ce.contacts&&Ce.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Oe(Re==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Ce.contacts.length,")"]})]}),Re==="contacts"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Re==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.contacts.map((Be,St)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Be.first_name?`${Be.first_name} `:"",Be.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Be.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(Be.created_at)})]},`contact-${St}`))})]}),Ce.deals&&Ce.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Oe(Re==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Ce.deals.length,")"]})]}),Re==="deals"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Re==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.deals.map((Be,St)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Be.deal_id?Be.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",Be.name||Be.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:Be.stage||Be.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(Be.close_date||Be.created_at)})]},`deal-${St}`))})]}),Ce.quotes&&Ce.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Oe(Re==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Ce.quotes.length,")"]})]}),Re==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Re==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.quotes.map((Be,St)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:Be.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(Be.quote_id?Be.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Be.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(Be.presented_date)||""})]},`quote-${St}`))})]}),(!Ce||(!Ce.tasks||Ce.tasks.length===0)&&(!Ce.meetings||Ce.meetings.length===0)&&(!Ce.calls||Ce.calls.length===0)&&(!Ce.quotes||Ce.quotes.length===0)&&(!Ce.deals||Ce.deals.length===0)&&(!Ce.contacts||Ce.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:me||or(x?.status)||"PROSPECT",onChange:Be=>ye(Be.target.value),children:S2.map(Be=>n.jsx("option",{value:Be.value,children:Be.label},Be.value))}),n.jsx("button",{onClick:H,disabled:re||!me||or(me)===or(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${re||!me||or(me)===or(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:re?"Updating...":"Update"})]})]})]})]})]})}):null,aa=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ge(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Te.map(Be=>n.jsx(wCe,{...Be},Be.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:Be=>B(Be.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:z,onChange:Be=>O(Be.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ct.map(Be=>n.jsx("option",{value:Be.value,children:Be.label},Be.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:ce.length>0&&ce.every(Be=>ve.includes(Be.id)),onChange:oe,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ve.length>0?n.jsx("button",{onClick:V,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ve.length} selected items`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:j?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Me.length>0?ce.map(Be=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{it(Be),Ze(Be.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("input",{type:"checkbox",checked:ve.includes(Be.id),onChange:()=>U(Be.id),onClick:St=>St.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Be.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:Be.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${bCe(Be.status)}`,children:A2(Be.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Be.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Be.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(kt,{className:"text-gray-500"}),n.jsx("span",{children:Be.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Be.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Me.length,pageSize:se,currentPage:ae,onPrev:be,onNext:ze,onPageSizeChange:Be=>{Y(Be),Ee(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Va=t?n.jsx("div",{id:"modalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:Be=>Be.stopPropagation(),children:[n.jsx("button",{onClick:()=>{he(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||te,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Je,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Km,{label:"Name",name:"name",value:f.name,onChange:Ne,placeholder:"Company name",required:!0,isSubmitted:xe})}),n.jsx(TR,{label:"Parent Company",value:f.parent_company,onChange:Be=>{p(St=>({...St,parent_company:Be}))},items:M.map(Be=>({id:Be,name:Be})),getLabel:Be=>Be?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Km,{label:"Website",name:"website",value:f.website,onChange:Ne,placeholder:"https://example.com",disabled:i}),n.jsx(Km,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:Ne,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Km,{label:"Industry",name:"industry",value:f.industry,onChange:Ne,placeholder:"Industry",disabled:i}),n.jsx(Km,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:Ne,placeholder:"Billing address",disabled:i}),n.jsx(Km,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:Ne,placeholder:"Shipping address",disabled:i}),n.jsx(AR,{label:"Status",name:"status",value:f.status,onChange:Ne,options:[{value:"",label:"Select status"},...S2],required:!0,disabled:i}),n.jsx(TR,{label:"Assigned To",value:f.assigned_to,onChange:Be=>{const St=S.find(E=>String(E.id)===String(Be));_(St);let P=null;St&&St.assigned_territory&&St.assigned_territory.length===1&&(P=St.assigned_territory[0].id),p(E=>({...E,assigned_to:Be,territory_id:P}))},items:S||[],getLabel:Be=>`${Be?.first_name??""} ${Be?.last_name??""} (${Be?.role?.toUpperCase()==="CEO"?"Admin":Be?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:xe,disabled:i||S.length===0}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(AR,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:Ne,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(Be=>({value:String(Be.id),label:Be.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{he(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||te,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||te,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,bs=ee?n.jsx(jCe,{open:!0,title:ee.title,message:ee.message,confirmLabel:ee.confirmLabel,cancelLabel:ee.cancelLabel,variant:ee.variant,onConfirm:K,onCancel:ne,loading:te}):null;return n.jsxs(n.Fragment,{children:[aa,rn,Va,bs]})}function wCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Km({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function AR({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function TR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(NCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function NCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(j=>String(j.id)===String(t)),N=y?s(y):t,v=h.useMemo(()=>{const j=f.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:j=>{p(j.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(j=>s(j).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function jCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function qx(e){return _t({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const T2={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},pl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),oo=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function CCe(){const e=Nt(),t=Xt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(!1),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,L]=h.useState(null),[T,M]=h.useState(T2),[R,z]=h.useState(""),[O,I]=h.useState("Filter by Accounts"),[B,ee]=h.useState(null),[Q,te]=h.useState("Overview"),[W,ae]=h.useState(1),[Ee,se]=h.useState(10),[Y,pe]=h.useState({}),[Se,me]=h.useState(null),[ye,re]=h.useState([]),[De,ve]=h.useState(null),{comments:ke,addComment:Ce,refresh:de}=Aa({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&de()},[u?.id,de]),h.useEffect(()=>{const fe=t.state?.contactID;fe&&(ve(fe),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(De&&a.length>0&&!r){const fe=a.find(Ue=>Ue.id===De);fe?f(fe):q.error("Contact not found."),ve(null)}},[De,a,r]);const Re=h.useCallback(async(fe=null)=>{i(!0);try{const Ue=await ie.get("/contacts/admin/fetch-all"),ne=[...Array.isArray(Ue.data)?Ue.data:[]].sort((H,xe)=>{const Ie=H?.created_at||H?.updated_at||0,Je=xe?.created_at||xe?.updated_at||0;return new Date(Je)-new Date(Ie)});if(s(ne),fe){const H=ne.find(xe=>xe.id===fe);f(H||null)}}catch(Ue){console.error(Ue),s([]),Ue.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),Oe=h.useCallback(async()=>{try{const fe=await ie.get("/accounts/admin/fetch-all"),K=[...Array.isArray(fe.data)?fe.data:[]].sort((ne,H)=>(ne?.name||"").localeCompare(H?.name||""));l(K)}catch(fe){console.error(fe),l([]),fe.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Ge=h.useCallback(async()=>{try{const fe=await ie.get("/users/all"),K=[...Array.isArray(fe.data)?fe.data:[]].sort((ne,H)=>pl(ne).localeCompare(pl(H)));d(K)}catch(fe){console.error(fe),d([]),fe.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),et=h.useCallback(async fe=>{try{const Ue=await ie.get(`/activities/contact/${fe}`);pe(Ue.data&&typeof Ue.data=="object"?Ue.data:{})}catch(Ue){console.error(Ue),Ue.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]);h.useEffect(()=>{Re(),Oe(),Ge()},[Re,Oe,Ge]);const mt=h.useMemo(()=>{const fe=new Map;o.forEach(K=>{K?.id&&K?.name&&fe.set(String(K.id),K.name)}),a.forEach(K=>{K?.account_id&&K?.account?.name&&fe.set(String(K.account_id),K.account.name)});const Ue=Array.from(fe.entries()).sort((K,ne)=>K[1].localeCompare(ne[1])).map(([K,ne])=>({value:K,label:ne}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Ue]},[o,a]),Fe=h.useMemo(()=>{const fe=R.trim().toLowerCase(),Ue=O.trim();return a.filter(K=>{const ne=[K?.first_name,K?.last_name,K?.email,K?.title,K?.department,K?.account?.name,K?.account?.status,K?.work_phone,K?.mobile_phone_1,K?.mobile_phone_2,K?.assigned_contact?.first_name,K?.assigned_contact?.last_name,K?.contact_creator?.first_name,K?.contact_creator?.last_name,K?.notes,oo(K?.created_at),oo(K?.updated_at)],H=fe===""||ne.some(Ie=>Ie==null?!1:Ie.toString().toLowerCase().includes(fe)),xe=Ue==="Filter by Accounts"||String(K.account_id)===Ue;return H&&xe})},[a,R,O]),ot=Math.max(1,Math.ceil(Fe.length/Ee)||1);h.useEffect(()=>{ae(1)},[R,O,Ee]),h.useEffect(()=>{ae(fe=>{const Ue=Math.max(1,Math.ceil(Fe.length/Ee)||1);return fe>Ue?Ue:fe})},[Fe.length,Ee]);const We=h.useMemo(()=>{const fe=(W-1)*Ee;return Fe.slice(fe,fe+Ee)},[Fe,W,Ee]),Ke=()=>ae(fe=>Math.max(fe-1,1)),Ze=()=>ae(fe=>Math.min(fe+1,ot)),Me=fe=>{if(fe.target.checked){const Ue=We.map(K=>K.id);re(Ue)}else re([])},je=fe=>{re(Ue=>Ue.includes(fe)?Ue.filter(K=>K!==fe):[...Ue,fe])},ce=async()=>{ye.length!==0&&S({title:"Delete Contacts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ye.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${ye.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:ye}})},oe=h.useCallback(()=>{x(!1),N(!1),L(null),M(T2),j(!1),Ae(!1)},[]),U=fe=>{fe.target.id==="modalBackdrop"&&!v&&!A&&oe()},V=fe=>{const{name:Ue,value:K}=fe.target;M(ne=>({...ne,[Ue]:K}))},be=()=>{M(T2),N(!1),L(null),x(!0)},ze=fe=>{fe&&(M({first_name:fe.first_name||"",last_name:fe.last_name||"",account_id:fe.account_id?String(fe.account_id):"",title:fe.title||"",department:fe.department||"",email:fe.email||"",work_phone:fe.work_phone||"",mobile_phone_1:fe.mobile_phone_1||"",mobile_phone_2:fe.mobile_phone_2||"",notes:fe.notes||"",assigned_to:fe.assigned_to?String(fe.assigned_to):""}),N(!0),L(fe.id),x(!0),f(null))},le=fe=>{if(!fe)return;const Ue=pl(fe)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ue}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:fe.id,name:Ue}})},[X,Ae]=h.useState(!1),Pe=fe=>{fe.preventDefault(),Ae(!0);const Ue=T.last_name.trim();if(!Ue){q.error("Last name is required.");return}if(!T.account_id){q.error("Account is required.");return}if(!T.assigned_to){q.error("Assigned To is required.");return}const ne=T.email?.trim();if(!ne){q.error("Email is required.");return}if(!ne.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ne)){q.error("Please enter a valid email address.");return}const xe=T.first_name?.trim()||"",Ie={first_name:xe,last_name:Ue,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},Je=y&&_?"update":"create",ct=`${xe} ${Ue}`.trim();S({title:Je==="create"?"Confirm New Contact":"Confirm Update",message:Je==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:ct})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ct}),"?"]}),confirmLabel:Je==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Je,payload:Ie,targetId:_||null,name:ct}})},Qe=async()=>{if(!w?.action){S(null);return}const{action:fe}=w,{type:Ue,payload:K,targetId:ne,name:H}=fe;k(!0);try{if(Ue==="create"){j(!0),await ie.post("/contacts/admin",K),q.success(`Contact "${H}" created successfully.`);const xe=u?.id||null;oe(),await Re(xe)}else if(Ue==="update"){if(!ne)throw new Error("Missing contact identifier for update.");j(!0),await ie.put(`/contacts/admin/${ne}`,K),q.success(`Contact "${H}" updated successfully.`);const xe=u?.id&&u.id===ne?ne:u?.id||null;oe(),await Re(xe),u?.id===ne&&f(null)}else if(Ue==="delete"){if(!ne)throw new Error("Missing contact identifier for deletion.");const xe=u?.id;ee(ne),await ie.delete(`/contacts/admin/${ne}`),q.success(`Contact "${H}" deleted successfully.`),await Re(xe&&xe!==ne?xe:null),xe===ne&&f(null)}else if(Ue==="bulk-delete"){const xe=fe.contact_ids;await ie.delete("/contacts/admin/bulk-delete",{data:{contact_ids:xe}}),q.success(`Successfully deleted ${xe.length} contacts`),re([]),await Re()}}catch(xe){console.error(xe);const Ie=Ue==="create"?"Failed to create contact. Please review the details and try again.":Ue==="update"?"Failed to update contact. Please review the details and try again.":Ue==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",Je=xe.response?.data?.detail||Ie;q.error(Je)}finally{(Ue==="create"||Ue==="update")&&j(!1),Ue==="delete"&&ee(null),k(!1),S(null)}},nt=()=>{A||S(null)},wt=fe=>{f(fe),te("Overview")},Te=()=>f(null),it=fe=>{fe.target.id==="contactModalBackdrop"&&!A&&Te()},$e=w?.action?.type==="delete"?w.action.targetId:null,ue=u&&(B===u.id||$e===u.id),he=u&&B===u.id,F=u?n.jsx("div",{id:"contactModalBackdrop",onClick:it,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:fe=>fe.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Te,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:pl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ze(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>le(u),disabled:!!ue,children:he?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(fe=>n.jsx("button",{onClick:()=>te(fe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Q===fe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:fe},fe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Q==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:pl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:oo(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:oo(u.updated_at)||"N/A"})]})]})}),Q==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(_a,{comments:ke,onAddComment:Ce})]}),Q==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Y.tasks&&Y.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Y.tasks.length,")"]})]}),Se==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.tasks.map((fe,Ue)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:fe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.description||"No description"}),fe.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",fe.assigned_to.first_name," ",fe.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(fe.due_date||fe.created_at)})]},`task-${Ue}`))})]}),Y.meetings&&Y.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Y.meetings.length,")"]})]}),Se==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.meetings.map((fe,Ue)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:fe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.description||fe.location||"No description"}),fe.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",fe.host.first_name," ",fe.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(fe.start_time||fe.created_at)})]},`meeting-${Ue}`))})]}),Y.calls&&Y.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Y.calls.length,")"]})]}),Se==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.calls.map((fe,Ue)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:fe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(fe.call_time||fe.created_at)})]},`call-${Ue}`))})]}),Y.deals&&Y.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Y.deals.length,")"]})]}),Se==="deals"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.deals.map((fe,Ue)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:fe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[fe.deal_id?fe.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",fe.name||fe.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:fe.stage||fe.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(fe.close_date||fe.created_at)})]},`deal-${Ue}`))})]}),Y.quotes&&Y.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Y.quotes.length,")"]})]}),Se==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.quotes.map((fe,Ue)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:fe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(fe.quote_id?fe.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fe.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oo(fe.presented_date)||""})]},`quote-${Ue}`))})]}),(!Y||(!Y.tasks||Y.tasks.length===0)&&(!Y.meetings||Y.meetings.length===0)&&(!Y.calls||Y.calls.length===0)&&(!Y.quotes||Y.quotes.length===0)&&(!Y.deals||Y.deals.length===0)&&(!Y.contacts||Y.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const fe=encodeURIComponent(u.email),Ue=encodeURIComponent(""),K=encodeURIComponent(""),ne=`mailto:${fe}?subject=${Ue}&body=${K}`;window.location.href=ne},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,G=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{be(),Ae(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:fe=>z(fe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:O,onChange:fe=>I(fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:mt.map(fe=>n.jsx("option",{value:fe.value,children:fe.label},fe.value??fe.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:We.length>0&&ye.length===We.length,onChange:Me})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ye.length>0?n.jsx("button",{onClick:ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ye.length} selected items`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):Fe.length>0?We.map(fe=>{const Ue=[{Icon:ta,value:fe.email,key:"email"},{Icon:kt,value:fe.work_phone,key:"work_phone"},{Icon:ld,value:fe.mobile_phone_1,key:"mobile_phone_1"},{Icon:ld,value:fe.mobile_phone_2,key:"mobile_phone_2"}].filter(K=>!!K.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:K=>{K.target.closest('input[type="checkbox"]')||K.target.closest("button")||(wt(fe),et(fe.id))},children:[n.jsx("td",{className:"py-3 px-4 text-center align-top",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:ye.includes(fe.id),onChange:()=>je(fe.id)})}),n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:pl(fe)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:fe.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(qx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:fe.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:Ue.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Ue.map(({Icon:K,value:ne,key:H})=>{const xe=pt.createElement(K,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[xe,n.jsx("span",{children:ne})]},H)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Jt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:fe.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:fe.assigned_contact?`${fe.assigned_contact.first_name} ${fe.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Tt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:oo(fe.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${fe.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:fe.status||"Active"})}),n.jsx("td",{className:"py-3 px-4 align-top"})]},fe.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Fe.length,pageSize:Ee,currentPage:W,onPrev:Ke,onNext:Ze,onPageSizeChange:fe=>{se(fe),ae(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Ne=p?n.jsx("div",{id:"modalBackdrop",onClick:U,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:fe=>fe.stopPropagation(),children:[n.jsx("button",{onClick:()=>{oe(),Ae(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||A,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Pe,noValidate:!0,children:[n.jsx(Mc,{label:"First Name",name:"first_name",value:T.first_name,onChange:V,placeholder:"First name",isSubmitted:X}),n.jsx(Mc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:V,placeholder:"Last name",required:!0,isSubmitted:X}),n.jsx(ER,{label:"Account",value:T.account_id,onChange:fe=>M(Ue=>({...Ue,account_id:fe})),items:o||[],getLabel:fe=>fe?.name??"",placeholder:"Search account...",required:!0,isSubmitted:X,disabled:v||o.length===0}),n.jsx(ER,{label:"Assigned To",value:T.assigned_to,onChange:fe=>M(Ue=>({...Ue,assigned_to:fe})),items:c||[],getLabel:fe=>`${fe?.first_name??""} ${fe?.last_name??""} (${fe?.role?.toUpperCase()==="CEO"?"Admin":fe?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:X,disabled:v||c.length===0}),n.jsx(Mc,{label:"Title",name:"title",value:T.title,onChange:V,placeholder:"Job title",disabled:v}),n.jsx(Mc,{label:"Department",name:"department",value:T.department,onChange:V,placeholder:"Department",disabled:v}),n.jsx(Mc,{label:"Email",name:"email",type:"email",value:T.email,onChange:V,placeholder:"example@email.com",required:!0,isSubmitted:X}),n.jsx(Mc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:V,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Mc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:V,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Mc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:V,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(_Ce,{label:"Notes",name:"notes",value:T.notes,onChange:V,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{oe(),Ae(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||A,children:v?"Saving...":y?"Update Contact":"Save Contact"})]})]})]})}):null,ge=w?n.jsx(ACe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Qe,onCancel:nt,loading:A}):null;return n.jsxs(n.Fragment,{children:[G,F,Ne,ge]})}function Mc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function ER({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(SCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function SCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function _Ce({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ACe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const E2=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function iY({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=Nt(),{leadID:c}=Ho(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[v,j]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,L]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),y(e.status||"New");return}if(!c)return;const I=await ie.get(`/leads/get/${c}`);u(I.data),y(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),L({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};h.useEffect(()=>{e?(u(e),y(e.status||"New")):c&&T()},[c,e]);const M=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const I=await ie.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const B={...d,status:I.data.status};u(B),i&&i(B),a&&a(),t&&t()}catch(I){console.error(I),q.error("Failed to update lead status")}},R=async I=>{const B={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",B),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const Q=(await ie.post("/accounts/convertedLead",B)).data.id,te={...A,account_id:Q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},ae=(await ie.post("/contacts/convertedLead",te)).data.id,Ee=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},se=_.amount&&_.amount!==""?parseFloat(_.amount):0,Y={..._,account_id:Q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:ae,probability:Ee(),stage:"Prospecting"},pe=await ie.post("/deals/convertedLead",Y),Se=await ie.put(`/leads/convert/${I.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(ee){console.error("Error during conversion:",ee);const Q=ee.response?.data?.detail||ee.message||"Failed to convert lead. Please try again.";q.error(Q)}},z=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=I=>I.toString().toLowerCase().replace(/\b\w/g,B=>B.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z(d.status)}`,children:O(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E2(I.due_date||I.created_at)})]},`task-${B}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E2(I.start_time||I.created_at)})]},`meeting-${B}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E2(I.call_time||I.created_at)})]},`call-${B}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),B=encodeURIComponent(""),ee=encodeURIComponent(""),Q=`mailto:${I}?subject=${B}&body=${ee}`;window.location.href=Q},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>y(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const TCe=Jf.all(),k2=TCe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),ECe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),kCe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},L2={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function LCe(){const e=Nt(),{leadID:t}=Ho();Fs();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState(""),[A,k]=h.useState(1),[_,L]=h.useState(10),[T,M]=h.useState(L2),[R,z]=h.useState(!1),[O,I]=h.useState(null),[B,ee]=h.useState(!1),[Q,te]=h.useState(null),[W,ae]=h.useState(!1),[Ee,se]=h.useState([]),[Y,pe]=h.useState({});h.useRef(null);const[Se,me]=h.useState(!1),[ye,re]=h.useState(null),[De,ve]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ke,Ce]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[de,Re]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Oe=async()=>{try{const ge=await ie.get("/leads/getUsers");l(ge.data)}catch(ge){console.error(`Error fetching users: ${ge}`)}},Ge=async()=>{x(!0);try{const ge=await ie.get("/leads/admin/getLeads");f(ge.data),console.log(ge.data)}catch(ge){console.error(`Error fetching leads: ${ge}`)}finally{x(!1)}};h.useEffect(()=>{Oe(),Ge()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!R){const ge=u.find(fe=>fe.id===Number(t));ge&&s(ge)}else!t&&!a&&s(null)},[t,u,r,R]),h.useEffect(()=>{if(ye){const fe=(ne=>{if(!ne)return{code:"+63",number:""};const H=ne.match(/^(\+\d+)\s(.+)$/);if(H)return{code:H[1],number:H[2]};if(ne.startsWith("+")){const xe=ne.match(/^(\+\d{1,3})/);if(xe)return{code:xe[1],number:ne.substring(xe[1].length).trim()}}return{code:"+63",number:ne}})(ye.work_phone),Ue=[];ye.work_phone&&Ue.push(`Work: ${ye.work_phone}`),ye.mobile_phone_1&&Ue.push(`Mobile 1: ${ye.mobile_phone_1}`),ye.mobile_phone_2&&Ue.push(`Mobile 2: ${ye.mobile_phone_2}`);const K=Ue.length>0?Ue.join(" | "):"";ve({name:ye.company_name||"",website:"",countryCode:fe.code,phone_number:fe.number,combinedPhoneNumbers:K,billing_address:ye.address||"",shipping_address:ye.address||"",industry:"",status:"Prospect",territory_id:ye.assigned_to?.territory?.id||null,assigned_to:ye.assigned_to?.id||null,created_by:ye.creator?.id||null}),Ce({last_name:ye.last_name||"",first_name:ye.first_name||"",account_id:null,title:ye.title||"",department:ye.department||"",email:ye.email||"",work_phone:ye.work_phone||"",mobile_phone_1:ye.mobile_phone_1||"",mobile_phone_2:ye.mobile_phone_2||"",notes:ye.notes||"",assigned_to:ye.assigned_to?.id||null,created_by:ye.creator?.id||null}),Re({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:ye.assigned_to?.id||null,created_by:ye.creator?.id||null})}},[ye]);const et=ge=>N(ge.target.value),mt=h.useMemo(()=>{let ge=[...u];const fe=y.trim().toLowerCase();fe&&(ge=ge.filter(K=>[K?.first_name,K?.last_name,K?.company_name,K?.title,K?.email,K?.work_phone,K?.assigned_to?`${K.assigned_to.first_name} ${K.assigned_to.last_name}`:""].some(H=>H&&H.toString().toLowerCase().includes(fe))));const Ue=v.trim().toUpperCase();return Ue&&Ue!=="FILTER BY STATUS"?ge=ge.filter(K=>(K.status?K.status.toUpperCase():"")===Ue):ge=ge.filter(K=>(K.status?K.status.toUpperCase():"")!=="CONVERTED"),w&&ge.sort((K,ne)=>{const H=`${K.first_name} ${K.last_name}`,xe=`${ne.first_name} ${ne.last_name}`;return w==="asc"?H.localeCompare(xe):xe.localeCompare(H)}),ge},[u,y,v,w]),Fe=Math.max(1,Math.ceil(mt.length/_)||1);h.useEffect(()=>{k(1)},[y,v]),h.useEffect(()=>{k(ge=>{const fe=Math.max(1,Math.ceil(mt.length/_)||1);return ge>fe?fe:ge})},[mt.length,_]);const ot=h.useMemo(()=>{const ge=(A-1)*_;return mt.slice(ge,ge+_)},[mt,A,_]),We=()=>k(ge=>Math.max(ge-1,1)),Ke=()=>k(ge=>Math.min(ge+1,Fe)),Ze=ge=>{L(ge),k(1)},Me=h.useCallback(async ge=>{try{const fe=await ie.get(`/activities/lead/${ge}`);pe(fe.data&&typeof fe.data=="object"?fe.data:{})}catch(fe){console.error(fe),fe.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]),je=ge=>{s(ge),Me(ge.id)},ce=()=>{s(null),t&&e("/admin/leads",{replace:!0})},oe=()=>{i(!1),M(L2),z(!1),I(null),ee(!1),d(null),sessionStorage.removeItem("editLeadData")},U=ge=>{ge.target.id==="modalBackdrop"&&oe()},V=()=>{M(L2),z(!1),I(null),d(null),i(!0)},be=ge=>{if(!ge){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ge),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const fe=xe=>{if(!xe)return{code:"+63",number:""};const Ie=xe.match(/^(\+\d+)\s(.+)$/);return Ie?{code:Ie[1],number:Ie[2]}:{code:"+63",number:xe}},Ue=fe(ge.work_phone),K=fe(ge.mobile_phone_1),ne=fe(ge.mobile_phone_2);let H="";if(ge.assigned_to){H=String(ge.assigned_to.id);const xe=o?.find(Ie=>Ie.id===ge.assigned_to.id);d(xe)}M({first_name:ge.first_name||"",last_name:ge.last_name||"",company_name:ge.company_name||"",title:ge.title||"",department:ge.department||"",email:ge.email||"",work_ccode:Ue.code,work_phone:Ue.number,m1_ccode:K.code,mobile_phone_1:K.number,m2_ccode:ne.code,mobile_phone_2:ne.number,address:ge.address||"",notes:ge.notes||"",source:ge.source||"",territory_id:ge.territory?.id||null,lead_owner:H,status:ge.status||"New"}),z(!0),I(ge.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},ze=ge=>{if(!ge){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ge);const fe=`${ge.first_name} ${ge.last_name}`||"this lead";te({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:fe}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ge.id,name:fe}})},le=ge=>{const{name:fe,value:Ue}=ge.target;if(M(K=>({...K,[fe]:Ue})),fe==="lead_owner"){const K=o.find(ne=>ne.id===parseInt(Ue));d(K)}},[X,Ae]=h.useState(!1),Pe=ge=>{if(ge.preventDefault(),Ae(!0),!T.last_name?.trim()){q.error("Last name is required.");return}if(!T.company_name?.trim()){q.error("Company is required.");return}if(!T.title?.trim()){q.error("Job title is required.");return}if(!T.email?.trim()){q.error("Email is required.");return}if(!T.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!T.lead_owner){q.error("Please assign a lead owner.");return}const Ue={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},K=R&&O?"update":"create",ne=`${T.first_name} ${T.last_name}`;te({title:K==="create"?"Confirm New Lead":"Confirm Update",message:K==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:ne}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ne}),"?"]}),confirmLabel:K==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:K,payload:Ue,targetId:O||null,name:ne}})},Qe=ge=>{if(ge.target.checked){const fe=ot.map(Ue=>Ue.id);se(fe)}else se([])},nt=ge=>{se(fe=>fe.includes(ge)?fe.filter(Ue=>Ue!==ge):[...fe,ge])},wt=async()=>{Ee.length!==0&&te({title:"Delete Leads",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ee.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${Ee.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:Ee}})},Te=async()=>{if(!Q?.action){te(null);return}const{action:ge}=Q,{type:fe,payload:Ue,targetId:K,name:ne,lead:H,leadIds:xe}=ge;console.log(Ue),ae(!0);try{if(fe==="create")ee(!0),await ie.post("/leads/create",Ue),q.success(`Lead "${ne}" created successfully.`),oe(),await Ge();else if(fe==="update"){if(!K)throw new Error("Missing lead identifier for update.");ee(!0);const Ie=await ie.put(`/leads/${K}`,Ue);q.success(`Lead "${ne}" updated successfully.`),a&&a.id===K&&s(null),oe(),await Ge()}else if(fe==="delete"){if(!K)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${K}`),q.success(`Lead "${ne}" deleted successfully.`),a?.id===K&&s(null),await Ge()}else fe==="bulk-delete"&&(await ie.delete("/leads/admin/bulk-delete",{data:{lead_ids:xe}}),q.success(`Successfully deleted ${xe.length} leads`),se([]),await Ge())}catch(Ie){console.error(Ie);const Je=fe==="create"?"Failed to create lead. Please review the details and try again.":fe==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ct=Ie.response?.data?.detail||Je;q.error(ct)}finally{(fe==="create"||fe==="update")&&ee(!1),fe!=="edit"&&(ae(!1),te(null))}},it=()=>{W||te(null)},$e=u.filter(ge=>ge.status==="New").length,ue=u.filter(ge=>ge.status==="Contacted").length,he=u.filter(ge=>ge.status==="Qualified").length,F=u.filter(ge=>ge.status==="Converted").length,G=u.filter(ge=>ge.status==="Lost").length,Ne=[{title:"New",value:$e,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ue,icon:kt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:he,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:F,icon:Xl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:G,icon:zs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(qo,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{V(),Ae(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ne.map(ge=>n.jsx(DCe,{...ge},ge.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:et,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:ge=>j(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:w,onChange:ge=>S(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"",children:"Sort by Name"}),n.jsx("option",{value:"asc",children:"A-Z"}),n.jsx("option",{value:"desc",children:"Z-A"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ot.length>0&&ot.every(ge=>Ee.includes(ge.id)),onChange:Qe})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ee.length>0?n.jsx("button",{onClick:wt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ee.length} selected leads`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:mt.length>0?ot.map(ge=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:fe=>fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ee.includes(ge.id),onChange:()=>nt(ge.id)})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>je(ge),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ge.first_name," ",ge.last_name]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>je(ge),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ge.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>je(ge),children:ge.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>je(ge),children:ge.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>je(ge),children:ge.assigned_to?`${ge.assigned_to.first_name} ${ge.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>je(ge),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${kCe(ge.status||"New")}`,children:ECe(ge.status||"New")})}),n.jsx("td",{})]},ge.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:mt.length,pageSize:_,currentPage:A,onPrev:We,onNext:Ke,onPageSizeChange:Ze,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:U,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ge=>ge.stopPropagation(),children:[n.jsx("button",{onClick:()=>{oe(),Ae(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:R?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:le,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:T.last_name,onChange:le,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${X&&!T.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:le,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${X&&!T.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:le,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${X&&!T.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:le,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:le,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${X&&!T.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:le,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:k2.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:le,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:le,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:k2.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:le,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:le,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:k2.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:le,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:T.address,onChange:le,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${X&&!T.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(OCe,{items:Array.isArray(o)?o:[],value:T.lead_owner??"",placeholder:"Search a user...",getLabel:ge=>`${ge.first_name} ${ge.last_name}`,onChange:ge=>{const fe=o.find(K=>String(K.id)===String(ge));d(fe);let Ue=null;fe&&fe.assigned_territory&&fe.assigned_territory.length===1&&(Ue=fe.assigned_territory[0].id),M(K=>({...K,lead_owner:ge,territory_id:Ue}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:le,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ge=>n.jsx("option",{value:ge.id,children:ge.name},ge.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:le,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:le,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{oe(),Ae(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:B||W,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Pe,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:B||W,children:B||W?"Processing...":R?"Update Lead":"Save Lead"})]})]})]})}),Q&&n.jsx(PCe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:Te,onCancel:it,loading:W}),a&&!r&&!R&&n.jsx(iY,{relatedActs:Y,lead:a,onBack:ce,fetchLeads:Ge,setSelectedLead:s,onEdit:be,onDelete:ze})]})}function PCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function DCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function OCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}let MCe={data:""},ICe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||MCe},$Ce=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,RCe=/\/\*[^]*?\*\/|  +/g,kR=/\n+/g,Wc=(e,t)=>{let a="",s="",r="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":s+=i[1]=="f"?Wc(o,i):i+"{"+Wc(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=Wc(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Wc.p?Wc.p(i,o):i+":"+o+";")}return a+(t&&r?t+"{"+r+"}":r)+s},xl={},oY=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+oY(e[a]);return t}return e},zCe=(e,t,a,s,r)=>{let i=oY(e),o=xl[i]||(xl[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!xl[o]){let c=i!==e?e:(d=>{let u,f,p=[{}];for(;u=$Ce.exec(d.replace(RCe,""));)u[4]?p.shift():u[3]?(f=u[3].replace(kR," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(kR," ").trim();return p[0]})(e);xl[o]=Wc(r?{["@keyframes "+o]:c}:c,a?"":"."+o)}let l=a&&xl.g?xl.g:null;return a&&(xl.g=xl[o]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(xl[o],t,s,l),o},FCe=(e,t,a)=>e.reduce((s,r,i)=>{let o=t[i];if(o&&o.call){let l=o(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Wc(l,""):l===!1?"":l}return s+r+(o??"")},"");function vj(e){let t=this||{},a=e.call?e(t.p):e;return zCe(a.unshift?a.raw?FCe(a,[].slice.call(arguments,1),t.p):a.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):a,ICe(t.target),t.g,t.o,t.k)}let lY,VE,YE;vj.bind({g:1});let Gl=vj.bind({k:1});function UCe(e,t,a,s){Wc.p=t,lY=e,VE=a,YE=s}function Ad(e,t){let a=this||{};return function(){let s=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;a.p=Object.assign({theme:VE&&VE()},l),a.o=/ *go\d+/.test(c),l.className=vj.apply(a,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),YE&&d[0]&&YE(l),lY(d,l)}return r}}var BCe=e=>typeof e=="function",Xv=(e,t)=>BCe(e)?e(t):e,HCe=(()=>{let e=0;return()=>(++e).toString()})(),cY=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),qCe=20,mP="default",dY=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return dY(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},av=[],uY={toasts:[],pausedAt:void 0,settings:{toastLimit:qCe}},To={},mY=(e,t=mP)=>{To[t]=dY(To[t]||uY,e),av.forEach(([a,s])=>{a===t&&s(To[t])})},fY=e=>Object.keys(To).forEach(t=>mY(e,t)),GCe=e=>Object.keys(To).find(t=>To[t].toasts.some(a=>a.id===e)),wj=(e=mP)=>t=>{mY(t,e)},WCe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},VCe=(e={},t=mP)=>{let[a,s]=h.useState(To[t]||uY),r=h.useRef(To[t]);h.useEffect(()=>(r.current!==To[t]&&s(To[t]),av.push([t,s]),()=>{let o=av.findIndex(([l])=>l===t);o>-1&&av.splice(o,1)}),[t]);let i=a.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||WCe[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...a,toasts:i}},YCe=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||HCe()}),Gx=e=>(t,a)=>{let s=YCe(t,e,a);return wj(s.toasterId||GCe(s.id))({type:2,toast:s}),s.id},ts=(e,t)=>Gx("blank")(e,t);ts.error=Gx("error");ts.success=Gx("success");ts.loading=Gx("loading");ts.custom=Gx("custom");ts.dismiss=(e,t)=>{let a={type:3,toastId:e};t?wj(t)(a):fY(a)};ts.dismissAll=e=>ts.dismiss(void 0,e);ts.remove=(e,t)=>{let a={type:4,toastId:e};t?wj(t)(a):fY(a)};ts.removeAll=e=>ts.remove(void 0,e);ts.promise=(e,t,a)=>{let s=ts.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?Xv(t.success,r):void 0;return i?ts.success(i,{id:s,...a,...a?.success}):ts.dismiss(s),r}).catch(r=>{let i=t.error?Xv(t.error,r):void 0;i?ts.error(i,{id:s,...a,...a?.error}):ts.dismiss(s)}),e};var QCe=1e3,KCe=(e,t="default")=>{let{toasts:a,pausedAt:s}=VCe(e,t),r=h.useRef(new Map).current,i=h.useCallback((f,p=QCe)=>{if(r.has(f))return;let x=setTimeout(()=>{r.delete(f),o({type:4,toastId:f})},p);r.set(f,x)},[]);h.useEffect(()=>{if(s)return;let f=Date.now(),p=a.map(x=>{if(x.duration===1/0)return;let y=(x.duration||0)+x.pauseDuration-(f-x.createdAt);if(y<0){x.visible&&ts.dismiss(x.id);return}return setTimeout(()=>ts.dismiss(x.id,t),y)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[a,s,t]);let o=h.useCallback(wj(t),[t]),l=h.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=h.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),d=h.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),u=h.useCallback((f,p)=>{let{reverseOrder:x=!1,gutter:y=8,defaultPosition:N}=p||{},v=a.filter(S=>(S.position||N)===(f.position||N)&&S.height),j=v.findIndex(S=>S.id===f.id),w=v.filter((S,A)=>A<j&&S.visible).length;return v.filter(S=>S.visible).slice(...x?[w+1]:[0,w]).reduce((S,A)=>S+(A.height||0)+y,0)},[a]);return h.useEffect(()=>{a.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=r.get(f.id);p&&(clearTimeout(p),r.delete(f.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},XCe=Gl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ZCe=Gl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,JCe=Gl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,eSe=Ad("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${XCe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ZCe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${JCe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,tSe=Gl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,nSe=Ad("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${tSe} 1s linear infinite;
`,aSe=Gl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,sSe=Gl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,rSe=Ad("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aSe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${sSe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,iSe=Ad("div")`
  position: absolute;
`,oSe=Ad("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,lSe=Gl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,cSe=Ad("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${lSe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,dSe=({toast:e})=>{let{icon:t,type:a,iconTheme:s}=e;return t!==void 0?typeof t=="string"?h.createElement(cSe,null,t):t:a==="blank"?null:h.createElement(oSe,null,h.createElement(nSe,{...s}),a!=="loading"&&h.createElement(iSe,null,a==="error"?h.createElement(eSe,{...s}):h.createElement(rSe,{...s})))},uSe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,mSe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,fSe="0%{opacity:0;} 100%{opacity:1;}",hSe="0%{opacity:1;} 100%{opacity:0;}",gSe=Ad("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,pSe=Ad("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,xSe=(e,t)=>{let a=e.includes("top")?1:-1,[s,r]=cY()?[fSe,hSe]:[uSe(a),mSe(a)];return{animation:t?`${Gl(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Gl(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ySe=h.memo(({toast:e,position:t,style:a,children:s})=>{let r=e.height?xSe(e.position||t||"top-center",e.visible):{opacity:0},i=h.createElement(dSe,{toast:e}),o=h.createElement(pSe,{...e.ariaProps},Xv(e.message,e));return h.createElement(gSe,{className:e.className,style:{...r,...a,...e.style}},typeof s=="function"?s({icon:i,message:o}):h.createElement(h.Fragment,null,i,o))});UCe(h.createElement);var bSe=({id:e,className:t,style:a,onHeightUpdate:s,children:r})=>{let i=h.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return h.createElement("div",{ref:i,className:t,style:a},r)},vSe=(e,t)=>{let a=e.includes("top"),s=a?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:cY()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...s,...r}},wSe=vj`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jy=16,Wx=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:s,children:r,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=KCe(a,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Jy,left:Jy,right:Jy,bottom:Jy,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),x=vSe(f,p);return h.createElement(bSe,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?wSe:"",style:x},u.type==="custom"?Xv(u.message,u):r?r(u):h.createElement(ySe,{toast:u,position:f}))}))},Vx=ts;function NSe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ie.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",L=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[_,T,k.action,k.entity_type,L,k.description],R=w===""||M.some(O=>O==null?!1:O.toString().toLowerCase().includes(w)),z=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&z}).sort((k,_)=>{const L=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-L})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const y=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!f.length){Vx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),L=document.createElement("a");L.href=_,L.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(_)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Wx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Tt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ts,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(qo,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:y,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var jSe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function fP(e){if(typeof e!="string")return!1;var t=jSe;return t.includes(e)}var CSe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],SSe=new Set(CSe);function hY(e){return typeof e!="string"?!1:SSe.has(e)}function gY(e){return typeof e=="string"&&e.startsWith("data-")}function Ur(e){if(typeof e!="object"||e===null)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(hY(a)||gY(a))&&(t[a]=e[a]);return t}function Iu(e){if(e==null)return null;if(h.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ur(t)}return typeof e=="object"&&!Array.isArray(e)?Ur(e):null}function Vs(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(hY(a)||gY(a)||fP(a))&&(t[a]=e[a]);return t}function _Se(e){return e==null?null:h.isValidElement(e)?Vs(e.props):typeof e=="object"&&!Array.isArray(e)?Vs(e):null}var ASe=["children","width","height","viewBox","className","style","title","desc"];function QE(){return QE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},QE.apply(null,arguments)}function TSe(e,t){if(e==null)return{};var a,s,r=ESe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ESe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var hP=h.forwardRef((e,t)=>{var{children:a,width:s,height:r,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=TSe(e,ASe),f=i||{width:s,height:r,x:0,y:0},p=Lt("recharts-surface",o);return h.createElement("svg",QE({},Vs(u),{className:p,width:s,height:r,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),h.createElement("title",null,c),h.createElement("desc",null,d),a)}),kSe=["children","className"];function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},KE.apply(null,arguments)}function LSe(e,t){if(e==null)return{};var a,s,r=PSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function PSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var ps=h.forwardRef((e,t)=>{var{children:a,className:s}=e,r=LSe(e,kSe),i=Lt("recharts-layer",s);return h.createElement("g",KE({className:i},Vs(r),{ref:t}),a)}),pY=h.createContext(null),DSe=()=>h.useContext(pY),P2={},D2={},LR;function OSe(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==="__proto__"}e.isUnsafeProperty=t})(D2)),D2}var O2={},PR;function xY(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=t})(O2)),O2}var M2={},DR;function gP(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=t})(M2)),M2}var I2={},$2={},OR;function MSe(){return OR||(OR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(t).join(",");const s=String(a);return s==="0"&&Object.is(Number(a),-0)?"-0":s}e.toString=t})($2)),$2}var MR;function pP(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MSe(),a=gP();function s(r){if(Array.isArray(r))return r.map(a.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],o=r.length;if(o===0)return i;let l=0,c="",d="",u=!1;for(r.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const f=r[l];d?f==="\\"&&l+1<o?(l++,c+=r[l]):f===d?d="":c+=f:u?f==='"'||f==="'"?d=f:f==="]"?(u=!1,i.push(c),c=""):c+=f:f==="["?(u=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,l++}return c&&i.push(c),i}e.toPath=s})(I2)),I2}var IR;function xP(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OSe(),a=xY(),s=gP(),r=pP();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?a.isDeepKey(c)?i(l,r.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let f=0;f<c.length;f++){if(u==null||t.isUnsafeProperty(c[f]))return d;u=u[c[f]]}return u===void 0?d:u}e.get=i})(P2)),P2}var R2,$R;function ISe(){return $R||($R=1,R2=xP().get),R2}var $Se=ISe();const $u=Zi($Se);var RSe=4;function Xc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:RSe,a=10**t,s=Math.round(e*a)/a;return Object.is(s,-0)?0:s}function Na(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return e.reduce((r,i,o)=>{var l=a[o-1];return typeof l=="string"?r+l+i:l!==void 0?r+Xc(l)+i:r+i},"")}var gs=e=>e===0?0:e>0?1:-1,Ki=e=>typeof e=="number"&&e!=+e,Wl=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,It=e=>(typeof e=="number"||e instanceof Number)&&!Ki(e),Fo=e=>It(e)||typeof e=="string",zSe=0,Pp=e=>{var t=++zSe;return"".concat(e||"").concat(t)},$s=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!It(t)&&typeof t!="string")return s;var i;if(Wl(t)){if(a==null)return s;var o=t.indexOf("%");i=a*parseFloat(t.slice(0,o))/100}else i=+t;return Ki(i)&&(i=s),r&&a!=null&&i>a&&(i=a),i},yY=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},s=0;s<t;s++)if(!a[String(e[s])])a[String(e[s])]=!0;else return!0;return!1};function oa(e,t,a){return It(e)&&It(t)?Xc(e+a*(t-e)):t}function bY(e,t,a){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):$u(s,t))===a)}var da=e=>e===null||typeof e>"u",Yx=e=>da(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function FSe(e){return e!=null}function Qx(){}var USe=["type","size","sizeType"];function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},XE.apply(null,arguments)}function RR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function zR(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(a),!0).forEach(function(s){BSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function BSe(e,t,a){return(t=HSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HSe(e){var t=qSe(e,"string");return typeof t=="symbol"?t:t+""}function qSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GSe(e,t){if(e==null)return{};var a,s,r=WSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var vY={symbolCircle:QN,symbolCross:GG,symbolDiamond:VG,symbolSquare:YG,symbolStar:KG,symbolTriangle:XG,symbolWye:ZG},VSe=Math.PI/180,YSe=e=>{var t="symbol".concat(Yx(e));return vY[t]||QN},QSe=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*VSe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},KSe=(e,t)=>{vY["symbol".concat(Yx(e))]=t},yP=e=>{var{type:t="circle",size:a=64,sizeType:s="area"}=e,r=GSe(e,USe),i=zR(zR({},r),{},{type:t,size:a,sizeType:s}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var p=YSe(o),x=L4().type(p).size(QSe(a,s,o)),y=x();if(y!==null)return y},{className:c,cx:d,cy:u}=i,f=Vs(i);return It(d)&&It(u)&&It(a)?h.createElement("path",XE({},f,{className:Lt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:l()})):null};yP.registerSymbol=KSe;var wY=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,bP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(h.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(r=>{fP(r)&&(s[r]=(i=>a[r](a,i)))}),s},XSe=(e,t,a)=>s=>(e(t,a,s),null),Kx=(e,t,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];fP(r)&&typeof i=="function"&&(s||(s={}),s[r]=XSe(i,t,a))}),s};function FR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ZSe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?FR(Object(a),!0).forEach(function(s){JSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function JSe(e,t,a){return(t=e2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function e2e(e){var t=t2e(e,"string");return typeof t=="symbol"?t:t+""}function t2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wa(e,t){var a=ZSe({},e),s=t,r=Object.keys(t),i=r.reduce((o,l)=>(o[l]===void 0&&s[l]!==void 0&&(o[l]=s[l]),o),a);return i}function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Zv.apply(null,arguments)}function UR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function n2e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(a),!0).forEach(function(s){a2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function a2e(e,t,a){return(t=s2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s2e(e){var t=r2e(e,"string");return typeof t=="symbol"?t:t+""}function r2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oi=32,i2e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function o2e(e){var{data:t,iconType:a,inactiveColor:s}=e,r=oi/2,i=oi/6,o=oi/3,l=t.inactive?s:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var d;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:r,x2:oi,y2:r,className:"recharts-legend-icon"})}if(c==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(r,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,`
            H`).concat(oi,"M").concat(2*o,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return h.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(oi/8,"h").concat(oi,"v").concat(oi*3/4,"h").concat(-oi,"z"),className:"recharts-legend-icon"});if(h.isValidElement(t.legendIcon)){var u=n2e({},t);return delete u.legendIcon,h.cloneElement(t.legendIcon,u)}return h.createElement(yP,{fill:l,cx:r,cy:r,size:oi,sizeType:"diameter",type:c})}function l2e(e){var{payload:t,iconSize:a,layout:s,formatter:r,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:oi,height:oi},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var p=u.formatter||r,x=Lt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var y=u.inactive?i:u.color,N=p?p(u.value,u,f):u.value;return h.createElement("li",Zv({className:x,style:c,key:"legend-item-".concat(f)},Kx(e,u,f)),h.createElement(hP,{width:a,height:a,viewBox:l,style:d,"aria-label":"".concat(N," legend icon")},h.createElement(o2e,{data:u,iconType:o,inactiveColor:i})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},N))})}var c2e=e=>{var t=Wa(e,i2e),{payload:a,layout:s,align:r}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:i},h.createElement(l2e,Zv({},t,{payload:a})))},z2={},F2={},BR;function d2e(){return BR||(BR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){const r=new Map;for(let i=0;i<a.length;i++){const o=a[i],l=s(o);r.has(l)||r.set(l,o)}return Array.from(r.values())}e.uniqBy=t})(F2)),F2}var U2={},HR;function NY(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a}e.identity=t})(U2)),U2}var B2={},H2={},q2={},qR;function u2e(){return qR||(qR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=t})(q2)),q2}var GR;function vP(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u2e();function a(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=a})(H2)),H2}var G2={},WR;function m2e(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="object"&&a!==null}e.isObjectLike=t})(G2)),G2}var VR;function f2e(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vP(),a=m2e();function s(r){return a.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(B2)),B2}var W2={},V2={},YR;function h2e(){return YR||(YR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xP();function a(s){return function(r){return t.get(r,s)}}e.property=a})(V2)),V2}var Y2={},Q2={},K2={},X2={},QR;function jY(){return QR||(QR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=t})(X2)),X2}var Z2={},KR;function CY(){return KR||(KR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=t})(Z2)),Z2}var J2={},XR;function SY(){return XR||(XR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){return a===s||Number.isNaN(a)&&Number.isNaN(s)}e.eq=t})(J2)),J2}var ZR;function g2e(){return ZR||(ZR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jY(),a=CY(),s=SY();function r(u,f,p){return typeof p!="function"?r(u,f,()=>{}):i(u,f,function x(y,N,v,j,w,S){const A=p(y,N,v,j,w,S);return A!==void 0?!!A:i(y,N,x,S)},new Map)}function i(u,f,p,x){if(f===u)return!0;switch(typeof f){case"object":return o(u,f,p,x);case"function":return Object.keys(f).length>0?i(u,{...f},p,x):s.eq(u,f);default:return t.isObject(u)?typeof f=="string"?f==="":!0:s.eq(u,f)}}function o(u,f,p,x){if(f==null)return!0;if(Array.isArray(f))return c(u,f,p,x);if(f instanceof Map)return l(u,f,p,x);if(f instanceof Set)return d(u,f,p,x);const y=Object.keys(f);if(u==null||a.isPrimitive(u))return y.length===0;if(y.length===0)return!0;if(x?.has(f))return x.get(f)===u;x?.set(f,u);try{for(let N=0;N<y.length;N++){const v=y[N];if(!a.isPrimitive(u)&&!(v in u)||f[v]===void 0&&u[v]!==void 0||f[v]===null&&u[v]!==null||!p(u[v],f[v],v,u,f,x))return!1}return!0}finally{x?.delete(f)}}function l(u,f,p,x){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[y,N]of f.entries()){const v=u.get(y);if(p(v,N,y,u,f,x)===!1)return!1}return!0}function c(u,f,p,x){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const y=new Set;for(let N=0;N<f.length;N++){const v=f[N];let j=!1;for(let w=0;w<u.length;w++){if(y.has(w))continue;const S=u[w];let A=!1;if(p(S,v,N,u,f,x)&&(A=!0),A){y.add(w),j=!0;break}}if(!j)return!1}return!0}function d(u,f,p,x){return f.size===0?!0:u instanceof Set?c([...u],[...f],p,x):!1}e.isMatchWith=r,e.isSetMatch=d})(K2)),K2}var JR;function _Y(){return JR||(JR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g2e();function a(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=a})(Q2)),Q2}var e_={},t_={},n_={},ez;function p2e(){return ez||(ez=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Object.getOwnPropertySymbols(a).filter(s=>Object.prototype.propertyIsEnumerable.call(a,s))}e.getSymbols=t})(n_)),n_}var a_={},tz;function AY(){return tz||(tz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=t})(a_)),a_}var s_={},nz;function TY(){return nz||(nz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",a="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",f="[object Function]",p="[object ArrayBuffer]",x="[object Object]",y="[object Error]",N="[object DataView]",v="[object Uint8Array]",j="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",A="[object BigUint64Array]",k="[object Int8Array]",_="[object Int16Array]",L="[object Int32Array]",T="[object BigInt64Array]",M="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=A,e.booleanTag=r,e.dataViewTag=N,e.dateTag=l,e.errorTag=y,e.float32ArrayTag=M,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=_,e.int32ArrayTag=L,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=d,e.stringTag=a,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=S,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=j})(s_)),s_}var r_={},az;function x2e(){return az||(az=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=t})(r_)),r_}var sz;function EY(){return sz||(sz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p2e(),a=AY(),s=TY(),r=CY(),i=x2e();function o(u,f){return l(u,void 0,u,new Map,f)}function l(u,f,p,x=new Map,y=void 0){const N=y?.(u,f,p,x);if(N!==void 0)return N;if(r.isPrimitive(u))return u;if(x.has(u))return x.get(u);if(Array.isArray(u)){const v=new Array(u.length);x.set(u,v);for(let j=0;j<u.length;j++)v[j]=l(u[j],j,p,x,y);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;x.set(u,v);for(const[j,w]of u)v.set(j,l(w,j,p,x,y));return v}if(u instanceof Set){const v=new Set;x.set(u,v);for(const j of u)v.add(l(j,void 0,p,x,y));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);x.set(u,v);for(let j=0;j<u.length;j++)v[j]=l(u[j],j,p,x,y);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return x.set(u,v),c(v,u,p,x,y),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return x.set(u,v),c(v,u,p,x,y),v}if(typeof Blob<"u"&&u instanceof Blob){const v=new Blob([u],{type:u.type});return x.set(u,v),c(v,u,p,x,y),v}if(u instanceof Error){const v=new u.constructor;return x.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,c(v,u,p,x,y),v}if(u instanceof Boolean){const v=new Boolean(u.valueOf());return x.set(u,v),c(v,u,p,x,y),v}if(u instanceof Number){const v=new Number(u.valueOf());return x.set(u,v),c(v,u,p,x,y),v}if(u instanceof String){const v=new String(u.valueOf());return x.set(u,v),c(v,u,p,x,y),v}if(typeof u=="object"&&d(u)){const v=Object.create(Object.getPrototypeOf(u));return x.set(u,v),c(v,u,p,x,y),v}return u}function c(u,f,p=u,x,y){const N=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<N.length;v++){const j=N[v],w=Object.getOwnPropertyDescriptor(u,j);(w==null||w.writable)&&(u[j]=l(f[j],j,p,x,y))}}function d(u){switch(a.getTag(u)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(t_)),t_}var rz;function y2e(){return rz||(rz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EY();function a(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=a})(e_)),e_}var iz;function b2e(){return iz||(iz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Y(),a=y2e();function s(r){return r=a.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(Y2)),Y2}var i_={},o_={},l_={},oz;function v2e(){return oz||(oz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EY(),a=TY();function s(r,i){return t.cloneDeepWith(r,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!==void 0)return u;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case a.numberTag:case a.stringTag:case a.booleanTag:{const f=new r.constructor(r?.valueOf());return t.copyProperties(f,r),f}case a.argumentsTag:{const f={};return t.copyProperties(f,r),f.length=r.length,f[Symbol.iterator]=r[Symbol.iterator],f}default:return}})}e.cloneDeepWith=s})(l_)),l_}var lz;function w2e(){return lz||(lz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v2e();function a(s){return t.cloneDeepWith(s)}e.cloneDeep=a})(o_)),o_}var c_={},d_={},cz;function kY(){return cz||(cz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function a(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=a})(d_)),d_}var u_={},dz;function N2e(){return dz||(dz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AY();function a(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=a})(u_)),u_}var uz;function j2e(){return uz||(uz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xY(),a=kY(),s=N2e(),r=pP();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const f=c[u];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||s.isArguments(d))&&a.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=i})(c_)),c_}var mz;function C2e(){return mz||(mz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Y(),a=gP(),s=w2e(),r=xP(),i=j2e();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=a.toKey(l);break}}return c=s.cloneDeep(c),function(d){const u=r.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(i_)),i_}var fz;function S2e(){return fz||(fz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NY(),a=h2e(),s=b2e(),r=C2e();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?r.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return a.property(o)}}e.iteratee=i})(W2)),W2}var hz;function _2e(){return hz||(hz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d2e(),a=NY(),s=f2e(),r=S2e();function i(o,l=a.identity){return s.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.iteratee(l)):[]}e.uniqBy=i})(z2)),z2}var m_,gz;function A2e(){return gz||(gz=1,m_=_2e().uniqBy),m_}var T2e=A2e();const pz=Zi(T2e);function LY(e,t,a){return t===!0?pz(e,a):typeof t=="function"?pz(e,t):e}var wP=h.createContext(null),E2e=e=>e,Kn=()=>{var e=h.useContext(wP);return e?e.store.dispatch:E2e},sv=()=>{},k2e=()=>sv,L2e=(e,t)=>e===t;function Rt(e){var t=h.useContext(wP);return tq.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:k2e,t?t.store.getState:sv,t?t.store.getState:sv,t?e:sv,L2e)}var f_={},h_={},g_={},xz;function P2e(){return xz||(xz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const a=(s,r,i)=>{if(s!==r){const o=t(s),l=t(r);if(o===l&&o===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=a})(g_)),g_}var p_={},x_={},yz;function PY(){return yz||(yz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=t})(x_)),x_}var bz;function D2e(){return bz||(bz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PY(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!a.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=r})(p_)),p_}var vz;function O2e(){return vz||(vz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P2e(),a=D2e(),s=pP();function r(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(x=>String(x));const d=(x,y)=>{let N=x;for(let v=0;v<y.length&&N!=null;++v)N=N[y[v]];return N},u=(x,y)=>y==null||x==null?y:typeof x=="object"&&"key"in x?Object.hasOwn(y,x.key)?y[x.key]:d(y,x.path):typeof x=="function"?x(y):Array.isArray(x)?d(y,x):typeof y=="object"?y[x]:y,f=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||a.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:f.map(y=>u(y,x))})).slice().sort((x,y)=>{for(let N=0;N<f.length;N++){const v=t.compareValues(x.criteria[N],y.criteria[N],l[N]);if(v!==0)return v}return 0}).map(x=>x.original)}e.orderBy=r})(h_)),h_}var y_={},wz;function M2e(){return wz||(wz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s=1){const r=[],i=Math.floor(s),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):r.push(u)}};return o(a,0),r}e.flatten=t})(y_)),y_}var b_={},Nz;function DY(){return Nz||(Nz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kY(),a=vP(),s=jY(),r=SY();function i(o,l,c){return s.isObject(c)&&(typeof l=="number"&&a.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],o):!1}e.isIterateeCall=i})(b_)),b_}var jz;function I2e(){return jz||(jz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O2e(),a=M2e(),s=DY();function r(i,...o){const l=o.length;return l>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,a.flatten(o),["asc"])}e.sortBy=r})(f_)),f_}var v_,Cz;function $2e(){return Cz||(Cz=1,v_=I2e().sortBy),v_}var R2e=$2e();const Nj=Zi(R2e);var OY=e=>e.legend.settings,z2e=e=>e.legend.size,F2e=e=>e.legend.payload,U2e=rt([F2e,OY],(e,t)=>{var{itemSorter:a}=t,s=e.flat(1);return a?Nj(s,a):s});function B2e(){return Rt(U2e)}var eb=1;function MY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,a]=h.useState({height:0,left:0,top:0,width:0}),s=h.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>eb||Math.abs(o.left-t.left)>eb||Math.abs(o.top-t.top)>eb||Math.abs(o.width-t.width)>eb)&&a({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function Ss(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var H2e=typeof Symbol=="function"&&Symbol.observable||"@@observable",Sz=H2e,w_=()=>Math.random().toString(36).substring(7).split("").join("."),q2e={INIT:`@@redux/INIT${w_()}`,REPLACE:`@@redux/REPLACE${w_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${w_()}`},Jv=q2e;function NP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function IY(e,t,a){if(typeof e!="function")throw new Error(Ss(2));if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Ss(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Ss(1));return a(IY)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((v,j)=>{o.set(j,v)}))}function u(){if(c)throw new Error(Ss(3));return r}function f(v){if(typeof v!="function")throw new Error(Ss(4));if(c)throw new Error(Ss(5));let j=!0;d();const w=l++;return o.set(w,v),function(){if(j){if(c)throw new Error(Ss(6));j=!1,d(),o.delete(w),i=null}}}function p(v){if(!NP(v))throw new Error(Ss(7));if(typeof v.type>"u")throw new Error(Ss(8));if(typeof v.type!="string")throw new Error(Ss(17));if(c)throw new Error(Ss(9));try{c=!0,r=s(r,v)}finally{c=!1}return(i=o).forEach(w=>{w()}),v}function x(v){if(typeof v!="function")throw new Error(Ss(10));s=v,p({type:Jv.REPLACE})}function y(){const v=f;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Ss(11));function w(){const A=j;A.next&&A.next(u())}return w(),{unsubscribe:v(w)}},[Sz](){return this}}}return p({type:Jv.INIT}),{dispatch:p,subscribe:f,getState:u,replaceReducer:x,[Sz]:y}}function G2e(e){Object.keys(e).forEach(t=>{const a=e[t];if(typeof a(void 0,{type:Jv.INIT})>"u")throw new Error(Ss(12));if(typeof a(void 0,{type:Jv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ss(13))})}function $Y(e){const t=Object.keys(e),a={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(a[o]=e[o])}const s=Object.keys(a);let r;try{G2e(a)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const d={};for(let u=0;u<s.length;u++){const f=s[u],p=a[f],x=o[f],y=p(x,l);if(typeof y>"u")throw l&&l.type,new Error(Ss(14));d[f]=y,c=c||y!==x}return c=c||s.length!==Object.keys(o).length,c?d:o}}function ew(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,a)=>(...s)=>t(a(...s)))}function W2e(...e){return t=>(a,s)=>{const r=t(a,s);let i=()=>{throw new Error(Ss(15))};const o={getState:r.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=ew(...l)(r.dispatch),{...r,dispatch:i}}}function RY(e){return NP(e)&&"type"in e&&typeof e.type=="string"}var zY=Symbol.for("immer-nothing"),_z=Symbol.for("immer-draftable"),Ys=Symbol.for("immer-state");function Ui(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ir=Object,zf=Ir.getPrototypeOf,tw="constructor",jj="prototype",ZE="configurable",nw="enumerable",rv="writable",Dp="value",Vl=e=>!!e&&!!e[Ys];function Xi(e){return e?FY(e)||Cj(e)||!!e[_z]||!!e[tw]?.[_z]||Sj(e)||_j(e):!1}var V2e=Ir[jj][tw].toString(),Az=new WeakMap;function FY(e){if(!e||!jP(e))return!1;const t=zf(e);if(t===null||t===Ir[jj])return!0;const a=Ir.hasOwnProperty.call(t,tw)&&t[tw];if(a===Object)return!0;if(!lf(a))return!1;let s=Az.get(a);return s===void 0&&(s=Function.toString.call(a),Az.set(a,s)),s===V2e}function Xx(e,t,a=!0){Zx(e)===0?(a?Reflect.ownKeys(e):Ir.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function Zx(e){const t=e[Ys];return t?t.type_:Cj(e)?1:Sj(e)?2:_j(e)?3:0}var Tz=(e,t,a=Zx(e))=>a===2?e.has(t):Ir[jj].hasOwnProperty.call(e,t),JE=(e,t,a=Zx(e))=>a===2?e.get(t):e[t],aw=(e,t,a,s=Zx(e))=>{s===2?e.set(t,a):s===3?e.add(a):e[t]=a};function Y2e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Cj=Array.isArray,Sj=e=>e instanceof Map,_j=e=>e instanceof Set,jP=e=>typeof e=="object",lf=e=>typeof e=="function",N_=e=>typeof e=="boolean";function Q2e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Cl=e=>e.copy_||e.base_,CP=e=>e.modified_?e.copy_:e.base_;function ek(e,t){if(Sj(e))return new Map(e);if(_j(e))return new Set(e);if(Cj(e))return Array[jj].slice.call(e);const a=FY(e);if(t===!0||t==="class_only"&&!a){const s=Ir.getOwnPropertyDescriptors(e);delete s[Ys];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l[rv]===!1&&(l[rv]=!0,l[ZE]=!0),(l.get||l.set)&&(s[o]={[ZE]:!0,[rv]:!0,[nw]:l[nw],[Dp]:e[o]})}return Ir.create(zf(e),s)}else{const s=zf(e);if(s!==null&&a)return{...e};const r=Ir.create(s);return Ir.assign(r,e)}}function SP(e,t=!1){return Aj(e)||Vl(e)||!Xi(e)||(Zx(e)>1&&Ir.defineProperties(e,{set:tb,add:tb,clear:tb,delete:tb}),Ir.freeze(e),t&&Xx(e,(a,s)=>{SP(s,!0)},!1)),e}function K2e(){Ui(2)}var tb={[Dp]:K2e};function Aj(e){return e===null||!jP(e)?!0:Ir.isFrozen(e)}var sw="MapSet",tk="Patches",Ez="ArrayMethods",UY={};function Ru(e){const t=UY[e];return t||Ui(0,e),t}var kz=e=>!!UY[e],Op,BY=()=>Op,X2e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:kz(sw)?Ru(sw):void 0,arrayMethodsPlugin_:kz(Ez)?Ru(Ez):void 0});function Lz(e,t){t&&(e.patchPlugin_=Ru(tk),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function nk(e){ak(e),e.drafts_.forEach(Z2e),e.drafts_=null}function ak(e){e===Op&&(Op=e.parent_)}var Pz=e=>Op=X2e(Op,e);function Z2e(e){const t=e[Ys];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Dz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(e!==void 0&&e!==a){a[Ys].modified_&&(nk(t),Ui(4)),Xi(e)&&(e=Oz(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(a[Ys].base_,e,t)}else e=Oz(t,a);return J2e(t,e,!0),nk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==zY?e:void 0}function Oz(e,t){if(Aj(t))return t;const a=t[Ys];if(!a)return _P(t,e.handledSet_,e);if(!Tj(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:s}=a;if(s)for(;s.length>0;)s.pop()(e);GY(a,e)}return a.copy_}function J2e(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&SP(t,a)}function HY(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Tj=(e,t)=>e.scope_===t,e_e=[];function qY(e,t,a,s){const r=Cl(e),i=e.type_;if(s!==void 0&&JE(r,s,i)===t){aw(r,s,a,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Xx(r,(c,d)=>{if(Vl(d)){const u=l.get(d)||[];u.push(c),l.set(d,u)}})}const o=e.draftLocations_.get(t)??e_e;for(const l of o)aw(r,l,a,i)}function t_e(e,t,a){e.callbacks_.push(function(r){const i=t;if(!i||!Tj(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const o=CP(i);qY(e,i.draft_??i,o,a),GY(i,r)})}function GY(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}HY(e)}}function n_e(e,t,a){const{scope_:s}=e;if(Vl(a)){const r=a[Ys];Tj(r,s)&&r.callbacks_.push(function(){iv(e);const o=CP(r);qY(e,a,o,t)})}else Xi(a)&&e.callbacks_.push(function(){const i=Cl(e);JE(i,t,e.type_)===a&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&_P(JE(e.copy_,t,e.type_),s.handledSet_,s)})}function _P(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||Vl(e)||t.has(e)||!Xi(e)||Aj(e)||(t.add(e),Xx(e,(s,r)=>{if(Vl(r)){const i=r[Ys];if(Tj(i,a)){const o=CP(i);aw(e,s,o,e.type_),HY(i)}}else Xi(r)&&_P(r,t,a)})),e}function a_e(e,t){const a=Cj(e),s={type_:a?1:0,scope_:t?t.scope_:BY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=AP;a&&(r=[s],i=Mp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,[l,s]}var AP={get(e,t){if(t===Ys)return e;let a=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&a?.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const r=Cl(e);if(!Tz(r,t,e.type_))return s_e(e,r,t);const i=r[t];if(e.finalized_||!Xi(i)||s&&e.operationMethod&&a?.isMutatingArrayMethod(e.operationMethod)&&Q2e(t))return i;if(i===j_(e.base_,t)){iv(e);const o=e.type_===1?+t:t,l=rk(e.scope_,i,e,o);return e.copy_[o]=l}return i},has(e,t){return t in Cl(e)},ownKeys(e){return Reflect.ownKeys(Cl(e))},set(e,t,a){const s=WY(Cl(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=j_(Cl(e),t),i=r?.[Ys];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(Y2e(a,r)&&(a!==void 0||Tz(e.base_,t,e.type_)))return!0;iv(e),sk(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),n_e(e,t,a)),!0},deleteProperty(e,t){return iv(e),j_(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),sk(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Cl(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{[rv]:!0,[ZE]:e.type_!==1||t!=="length",[nw]:s[nw],[Dp]:a[t]}},defineProperty(){Ui(11)},getPrototypeOf(e){return zf(e.base_)},setPrototypeOf(){Ui(12)}},Mp={};Xx(AP,(e,t)=>{Mp[e]=function(){const a=arguments;return a[0]=a[0][0],t.apply(this,a)}});Mp.deleteProperty=function(e,t){return Mp.set.call(this,e,t,void 0)};Mp.set=function(e,t,a){return AP.set.call(this,e[0],t,a,e[0])};function j_(e,t){const a=e[Ys];return(a?Cl(a):e)[t]}function s_e(e,t,a){const s=WY(t,a);return s?Dp in s?s[Dp]:s.get?.call(e.draft_):void 0}function WY(e,t){if(!(t in e))return;let a=zf(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=zf(a)}}function sk(e){e.modified_||(e.modified_=!0,e.parent_&&sk(e.parent_))}function iv(e){e.copy_||(e.assigned_=new Map,e.copy_=ek(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var r_e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,s,r)=>{if(lf(a)&&!lf(s)){const o=s;s=a;const l=this;return function(d=o,...u){return l.produce(d,f=>s.call(this,f,...u))}}lf(s)||Ui(6),r!==void 0&&!lf(r)&&Ui(7);let i;if(Xi(a)){const o=Pz(this),l=rk(o,a,void 0);let c=!0;try{i=s(l),c=!1}finally{c?nk(o):ak(o)}return Lz(o,r),Dz(i,o)}else if(!a||!jP(a)){if(i=s(a),i===void 0&&(i=a),i===zY&&(i=void 0),this.autoFreeze_&&SP(i,!0),r){const o=[],l=[];Ru(tk).generateReplacementPatches_(a,i,{patches_:o,inversePatches_:l}),r(o,l)}return i}else Ui(1,a)},this.produceWithPatches=(a,s)=>{if(lf(a))return(l,...c)=>this.produceWithPatches(l,d=>a(d,...c));let r,i;return[this.produce(a,s,(l,c)=>{r=l,i=c}),r,i]},N_(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),N_(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),N_(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Xi(t)||Ui(8),Vl(t)&&(t=Gi(t));const a=Pz(this),s=rk(a,t,void 0);return s[Ys].isManual_=!0,ak(a),s}finishDraft(t,a){const s=t&&t[Ys];(!s||!s.isManual_)&&Ui(9);const{scope_:r}=s;return Lz(r,a),Dz(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,a){let s;for(s=a.length-1;s>=0;s--){const i=a[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(a=a.slice(s+1));const r=Ru(tk).applyPatches_;return Vl(t)?r(t,a):this.produce(t,i=>r(i,a))}};function rk(e,t,a,s){const[r,i]=Sj(t)?Ru(sw).proxyMap_(t,a):_j(t)?Ru(sw).proxySet_(t,a):a_e(t,a);return(a?.scope_??BY()).drafts_.push(r),i.callbacks_=a?.callbacks_??[],i.key_=s,a&&s!==void 0?t_e(a,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),r}function Gi(e){return Vl(e)||Ui(10,e),VY(e)}function VY(e){if(!Xi(e)||Aj(e))return e;const t=e[Ys];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=ek(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=ek(e,!0);return Xx(a,(r,i)=>{aw(a,r,VY(i))},s),t&&(t.finalized_=!1),a}var i_e=new r_e,YY=i_e.produce;function QY(e){return({dispatch:a,getState:s})=>r=>i=>typeof i=="function"?i(a,s,e):r(i)}var o_e=QY(),l_e=QY,c_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ew:ew.apply(null,arguments)};function bi(e,t){function a(...s){if(t){let r=t(...s);if(!r)throw new Error(zr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=s=>RY(s)&&s.type===e,a}var KY=class Hg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Hg.prototype)}static get[Symbol.species](){return Hg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Hg(...t[0].concat(this)):new Hg(...t.concat(this))}};function Mz(e){return Xi(e)?YY(e,()=>{}):e}function nb(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}function d_e(e){return typeof e=="boolean"}var u_e=()=>function(t){const{thunk:a=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let o=new KY;return a&&(d_e(a)?o.push(o_e):o.push(l_e(a.extraArgument))),o},XY="RTK_autoBatch",ia=()=>e=>({payload:e,meta:{[XY]:!0}}),Iz=e=>t=>{setTimeout(t,e)},ZY=(e={type:"raf"})=>t=>(...a)=>{const s=t(...a);let r=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Iz(10):e.type==="callback"?e.queueNotification:Iz(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const f=()=>r&&u(),p=s.subscribe(f);return l.add(u),()=>{p(),l.delete(u)}},dispatch(u){try{return r=!u?.meta?.[XY],i=!r,i&&(o||(o=!0,c(d))),s.dispatch(u)}finally{r=!0}}})},m_e=e=>function(a){const{autoBatch:s=!0}=a??{};let r=new KY(e);return s&&r.push(ZY(typeof s=="object"?s:void 0)),r};function f_e(e){const t=u_e(),{reducer:a=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof a=="function")l=a;else if(NP(a))l=$Y(a);else throw new Error(zr(1));let c;typeof s=="function"?c=s(t):c=t();let d=ew;r&&(d=c_e({trace:!1,...typeof r=="object"&&r}));const u=W2e(...c),f=m_e(u);let p=typeof o=="function"?o(f):f();const x=d(...p);return IY(l,i,x)}function JY(e){const t={},a=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(zr(28));if(l in t)throw new Error(zr(29));return t[l]=o,r},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&a.push({matcher:i.settled,reducer:o.settled}),r},addMatcher(i,o){return a.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,a,s]}function h_e(e){return typeof e=="function"}function g_e(e,t){let[a,s,r]=JY(t),i;if(h_e(e))i=()=>Mz(e());else{const l=Mz(e);i=()=>l}function o(l=i(),c){let d=[a[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[r]),d.reduce((u,f)=>{if(f)if(Vl(u)){const x=f(u,c);return x===void 0?u:x}else{if(Xi(u))return YY(u,p=>f(p,c));{const p=f(u,c);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},l)}return o.getInitialState=i,o}var p_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",x_e=(e=21)=>{let t="",a=e;for(;a--;)t+=p_e[Math.random()*64|0];return t},y_e=Symbol.for("rtk-slice-createasyncthunk");function b_e(e,t){return`${e}/${t}`}function v_e({creators:e}={}){const t=e?.asyncThunk?.[y_e];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(zr(11));const o=(typeof s.reducers=="function"?s.reducers(N_e()):s.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,A){const k=typeof S=="string"?S:S.type;if(!k)throw new Error(zr(12));if(k in c.sliceCaseReducersByType)throw new Error(zr(13));return c.sliceCaseReducersByType[k]=A,d},addMatcher(S,A){return c.sliceMatchers.push({matcher:S,reducer:A}),d},exposeAction(S,A){return c.actionCreators[S]=A,d},exposeCaseReducer(S,A){return c.sliceCaseReducersByName[S]=A,d}};l.forEach(S=>{const A=o[S],k={reducerName:S,type:b_e(r,S),createNotation:typeof s.reducers=="function"};C_e(A)?__e(k,A,d,t):j_e(k,A,d)});function u(){const[S={},A=[],k=void 0]=typeof s.extraReducers=="function"?JY(s.extraReducers):[s.extraReducers],_={...S,...c.sliceCaseReducersByType};return g_e(s.initialState,L=>{for(let T in _)L.addCase(T,_[T]);for(let T of c.sliceMatchers)L.addMatcher(T.matcher,T.reducer);for(let T of A)L.addMatcher(T.matcher,T.reducer);k&&L.addDefaultCase(k)})}const f=S=>S,p=new Map,x=new WeakMap;let y;function N(S,A){return y||(y=u()),y(S,A)}function v(){return y||(y=u()),y.getInitialState()}function j(S,A=!1){function k(L){let T=L[S];return typeof T>"u"&&A&&(T=nb(x,k,v)),T}function _(L=f){const T=nb(p,A,()=>new WeakMap);return nb(T,L,()=>{const M={};for(const[R,z]of Object.entries(s.selectors??{}))M[R]=w_e(z,L,()=>nb(x,L,v),A);return M})}return{reducerPath:S,getSelectors:_,get selectors(){return _(k)},selectSlice:k}}const w={name:r,reducer:N,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...j(i),injectInto(S,{reducerPath:A,...k}={}){const _=A??i;return S.inject({reducerPath:_,reducer:N},k),{...w,...j(_,!0)}}};return w}}function w_e(e,t,a,s){function r(i,...o){let l=t(i);return typeof l>"u"&&s&&(l=a()),e(l,...o)}return r.unwrapped=e,r}var Nr=v_e();function N_e(){function e(t,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...a}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...a){return t(...a)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:a}},asyncThunk:e}}function j_e({type:e,reducerName:t,createNotation:a},s,r){let i,o;if("reducer"in s){if(a&&!S_e(s))throw new Error(zr(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?bi(e,o):bi(e))}function C_e(e){return e._reducerDefinitionType==="asyncThunk"}function S_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function __e({type:e,reducerName:t},a,s,r){if(!r)throw new Error(zr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=a,f=r(e,i,u);s.exposeAction(t,f),o&&s.addCase(f.fulfilled,o),l&&s.addCase(f.pending,l),c&&s.addCase(f.rejected,c),d&&s.addMatcher(f.settled,d),s.exposeCaseReducer(t,{fulfilled:o||ab,pending:l||ab,rejected:c||ab,settled:d||ab})}function ab(){}var A_e="task",eQ="listener",tQ="completed",TP="cancelled",T_e=`task-${TP}`,E_e=`task-${tQ}`,ik=`${eQ}-${TP}`,k_e=`${eQ}-${tQ}`,Ej=class{constructor(e){this.code=e,this.message=`${A_e} ${TP} (reason: ${e})`}name="TaskAbortError";message},EP=(e,t)=>{if(typeof e!="function")throw new TypeError(zr(32))},rw=()=>{},nQ=(e,t=rw)=>(e.catch(t),e),aQ=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Nu=e=>{if(e.aborted)throw new Ej(e.reason)};function sQ(e,t){let a=rw;return new Promise((s,r)=>{const i=()=>r(new Ej(e.reason));if(e.aborted){i();return}a=aQ(e,i),t.finally(()=>a()).then(s,r)}).finally(()=>{a=rw})}var L_e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof Ej?"cancelled":"rejected",error:a}}finally{t?.()}},iw=e=>t=>nQ(sQ(e,t).then(a=>(Nu(e),a))),rQ=e=>{const t=iw(e);return a=>t(new Promise(s=>setTimeout(s,a)))},{assign:wf}=Object,$z={},kj="listenerMiddleware",P_e=(e,t)=>{const a=s=>aQ(e,()=>s.abort(e.reason));return(s,r)=>{EP(s);const i=new AbortController;a(i);const o=L_e(async()=>{Nu(e),Nu(i.signal);const l=await s({pause:iw(i.signal),delay:rQ(i.signal),signal:i.signal});return Nu(i.signal),l},()=>i.abort(E_e));return r?.autoJoin&&t.push(o.catch(rw)),{result:iw(e)(o),cancel(){i.abort(T_e)}}}},D_e=(e,t)=>{const a=async(s,r)=>{Nu(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:s,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});i=()=>{u(),d()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await sQ(t,Promise.race(l));return Nu(t),c}finally{i()}};return(s,r)=>nQ(a(s,r))},iQ=e=>{let{type:t,actionCreator:a,matcher:s,predicate:r,effect:i}=e;if(t)r=bi(t).match;else if(a)t=a.type,r=a.match;else if(s)r=s;else if(!r)throw new Error(zr(21));return EP(i),{predicate:r,type:t,effect:i}},oQ=wf(e=>{const{type:t,predicate:a,effect:s}=iQ(e);return{id:x_e(),effect:s,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(zr(22))}}},{withTypes:()=>oQ}),Rz=(e,t)=>{const{type:a,effect:s,predicate:r}=iQ(t);return Array.from(e.values()).find(i=>(typeof a=="string"?i.type===a:i.predicate===r)&&i.effect===s)},ok=e=>{e.pending.forEach(t=>{t.abort(ik)})},O_e=(e,t)=>()=>{for(const a of t.keys())ok(a);e.clear()},zz=(e,t,a)=>{try{e(t,a)}catch(s){setTimeout(()=>{throw s},0)}},lQ=wf(bi(`${kj}/add`),{withTypes:()=>lQ}),M_e=bi(`${kj}/removeAll`),cQ=wf(bi(`${kj}/remove`),{withTypes:()=>cQ}),I_e=(...e)=>{console.error(`${kj}/error`,...e)},Jx=(e={})=>{const t=new Map,a=new Map,s=x=>{const y=a.get(x)??0;a.set(x,y+1)},r=x=>{const y=a.get(x)??1;y===1?a.delete(x):a.set(x,y-1)},{extra:i,onError:o=I_e}=e;EP(o);const l=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),y=>{x.unsubscribe(),y?.cancelActive&&ok(x)}),c=x=>{const y=Rz(t,x)??oQ(x);return l(y)};wf(c,{withTypes:()=>c});const d=x=>{const y=Rz(t,x);return y&&(y.unsubscribe(),x.cancelActive&&ok(y)),!!y};wf(d,{withTypes:()=>d});const u=async(x,y,N,v)=>{const j=new AbortController,w=D_e(c,j.signal),S=[];try{x.pending.add(j),s(x),await Promise.resolve(x.effect(y,wf({},N,{getOriginalState:v,condition:(A,k)=>w(A,k).then(Boolean),take:w,delay:rQ(j.signal),pause:iw(j.signal),extra:i,signal:j.signal,fork:P_e(j.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((A,k,_)=>{A!==j&&(A.abort(ik),_.delete(A))})},cancel:()=>{j.abort(ik),x.pending.delete(j)},throwIfCancelled:()=>{Nu(j.signal)}})))}catch(A){A instanceof Ej||zz(o,A,{raisedBy:"effect"})}finally{await Promise.all(S),j.abort(k_e),r(x),x.pending.delete(j)}},f=O_e(t,a);return{middleware:x=>y=>N=>{if(!RY(N))return y(N);if(lQ.match(N))return c(N.payload);if(M_e.match(N)){f();return}if(cQ.match(N))return d(N.payload);let v=x.getState();const j=()=>{if(v===$z)throw new Error(zr(23));return v};let w;try{if(w=y(N),t.size>0){const S=x.getState(),A=Array.from(t.values());for(const k of A){let _=!1;try{_=k.predicate(N,S,v)}catch(L){_=!1,zz(o,L,{raisedBy:"predicate"})}_&&u(k,N,x,j)}}}finally{v=$z}return w},startListening:c,stopListening:d,clearListeners:f}};function zr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $_e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},dQ=Nr({name:"chartLayout",initialState:$_e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,s,r,i;e.margin.top=(a=t.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:R_e,setLayout:z_e,setChartSize:F_e,setScale:U_e}=dQ.actions,B_e=dQ.reducer;function uQ(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function ha(e){return Number.isFinite(e)}function Uo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Fz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function df(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Fz(Object(a),!0).forEach(function(s){H_e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function H_e(e,t,a){return(t=q_e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q_e(e){var t=G_e(e,"string");return typeof t=="symbol"?t:t+""}function G_e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bn(e,t,a){return da(e)||da(t)?a:Fo(t)?$u(e,t,a):typeof t=="function"?t(e):a}var W_e=(e,t,a)=>{if(t&&a){var{width:s,height:r}=a,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&It(e[i]))return df(df({},e),{},{[i]:e[i]+(s||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&It(e[o]))return df(df({},e),{},{[o]:e[o]+(r||0)})}return e},Td=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",mQ=(e,t,a,s)=>{if(s)return e.map(l=>l.coordinate);var r,i,o=e.map(l=>(l.coordinate===t&&(r=!0),l.coordinate===a&&(i=!0),l.coordinate));return r||o.push(t),i||o.push(a),o},fQ=(e,t,a)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:f,niceTicks:p,axisType:x}=e;if(!o)return null;var y=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,N=r==="category"&&o.bandwidth?o.bandwidth()/y:0;if(N=x==="angleAxis"&&i&&i.length>=2?gs(i[0]-i[1])*2*N:N,f||p){var v=(f||p||[]).map((j,w)=>{var S=s?s.indexOf(j):j;return{coordinate:o(S)+N,value:j,offset:N,index:w}});return v.filter(j=>!Ki(j.coordinate))}return c&&d?d.map((j,w)=>({coordinate:o(j)+N,value:j,index:w,offset:N})):o.ticks&&u!=null?o.ticks(u).map((j,w)=>({coordinate:o(j)+N,value:j,offset:N,index:w})):o.domain().map((j,w)=>({coordinate:o(j)+N,value:s?s[j]:j,index:w,offset:N}))},Uz=1e-4,V_e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var a=t.length,s=e.range(),r=Math.min(s[0],s[1])-Uz,i=Math.max(s[0],s[1])+Uz,o=e(t[0]),l=e(t[a-1]);(o<r||o>i||l<r||l>i)&&e.domain([t[0],t[a-1]])}},Y_e=(e,t)=>{if(!t||t.length!==2||!It(t[0])||!It(t[1]))return e;var a=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!It(e[0])||e[0]<a)&&(r[0]=a),(!It(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<a&&(r[1]=a),r},Q_e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0,l=0;l<a;++l){var c=e[l],d=c?.[r];if(d!=null){var u=d[1],f=d[0],p=Ki(u)?f:u;p>=0?(d[0]=i,d[1]=i+p,i=u):(d[0]=o,d[1]=o+p,o=u)}}}},K_e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0;o<a;++o){var l=e[o],c=l?.[r];if(c!=null){var d=Ki(c[1])?c[0]:c[1];d>=0?(c[0]=i,c[1]=i+d,i=c[1]):(c[0]=0,c[1]=0)}}}},X_e={sign:Q_e,expand:fW,none:dd,silhouette:hW,wiggle:gW,positive:K_e},Z_e=(e,t,a)=>{var s,r=(s=X_e[a])!==null&&s!==void 0?s:dd,i=D4().keys(t).value((l,c)=>Number(Bn(l,c,0))).order(Du).offset(r),o=i(e);return o.forEach((l,c)=>{l.forEach((d,u)=>{var f=Bn(e[u],t[c],0);Array.isArray(f)&&f.length===2&&It(f[0])&&It(f[1])&&(d[0]=f[0],d[1]=f[1])})}),o};function J_e(e){return e==null?void 0:String(e)}function Bz(e){var{axis:t,ticks:a,bandSize:s,entry:r,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!da(r[t.dataKey])){var l=bY(a,"value",r[t.dataKey]);if(l)return l.coordinate+s/2}return a[i]?a[i].coordinate+s/2:null}var c=Bn(r,da(o)?t.dataKey:o);return da(c)?null:t.scale(c)}var Hz=e=>{var{axis:t,ticks:a,offset:s,bandSize:r,entry:i,index:o}=e;if(t.type==="category")return a[o]?a[o].coordinate+s:null;var l=Bn(i,t.dataKey,t.scale.domain()[o]);return da(l)?null:t.scale(l)-r/2+s},eAe=e=>{var{numericAxis:t}=e,a=t.scale.domain();if(t.type==="number"){var s=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return s<=0&&r>=0?0:r<0?r:s}return a[0]},tAe=e=>{var t=e.flat(2).filter(It);return[Math.min(...t),Math.max(...t)]},nAe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],aAe=(e,t,a)=>{if(e!=null)return nAe(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:o}=i,l=o.reduce((c,d)=>{var u=uQ(d,t,a),f=tAe(u);return!ha(f[0])||!ha(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]))},qz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ff=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&t&&t.length>=2){for(var r=Nj(t,u=>u.coordinate),i=1/0,o=1,l=r.length;o<l;o++){var c=r[o],d=r[o-1];i=Math.min((c?.coordinate||0)-(d?.coordinate||0),i)}return i===1/0?0:i}return a?void 0:0};function Wz(e){var{tooltipEntrySettings:t,dataKey:a,payload:s,value:r,name:i}=e;return df(df({},t),{},{dataKey:a,payload:s,value:r,name:i})}function lh(e,t){if(e)return String(e);if(typeof t=="string")return t}var sAe=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},rAe=(e,t)=>t==="centric"?e.angle:e.radius,ac=e=>e.layout.width,sc=e=>e.layout.height,iAe=e=>e.layout.scale,hQ=e=>e.layout.margin,Lj=rt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Pj=rt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),gQ="data-recharts-item-index",pQ="data-recharts-item-id",e0=60;function Vz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function sb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Vz(Object(a),!0).forEach(function(s){oAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oAe(e,t,a){return(t=lAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lAe(e){var t=cAe(e,"string");return typeof t=="symbol"?t:t+""}function cAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dAe=e=>e.brush.height;function uAe(e){var t=Pj(e);return t.reduce((a,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:e0;return a+r}return a},0)}function mAe(e){var t=Pj(e);return t.reduce((a,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:e0;return a+r}return a},0)}function fAe(e){var t=Lj(e);return t.reduce((a,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?a+s.height:a,0)}function hAe(e){var t=Lj(e);return t.reduce((a,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?a+s.height:a,0)}var is=rt([ac,sc,hQ,dAe,uAe,mAe,fAe,hAe,OY,z2e],(e,t,a,s,r,i,o,l,c,d)=>{var u={left:(a.left||0)+r,right:(a.right||0)+i},f={top:(a.top||0)+o,bottom:(a.bottom||0)+l},p=sb(sb({},f),u),x=p.bottom;p.bottom+=s,p=W_e(p,c,d);var y=e-p.left-p.right,N=t-p.top-p.bottom;return sb(sb({brushBottom:x},p),{},{width:Math.max(y,0),height:Math.max(N,0)})}),gAe=rt(is,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),kP=rt(ac,sc,(e,t)=>({x:0,y:0,width:e,height:t})),pAe=h.createContext(null),Us=()=>h.useContext(pAe)!=null,Dj=e=>e.brush,Oj=rt([Dj,is,hQ],(e,t,a)=>({height:e.height,x:It(e.x)?e.x:t.left,y:It(e.y)?e.y:t.top+t.height+t.brushBottom-(a?.bottom||0),width:It(e.width)?e.width:t.width})),C_={},S_={},__={},Yz;function xAe(){return Yz||(Yz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s,{signal:r,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{l!==null&&(a.apply(o,l),o=void 0,l=null)},f=()=>{d&&u(),N()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},s)},y=()=>{p!==null&&(clearTimeout(p),p=null)},N=()=>{y(),o=void 0,l=null},v=()=>{u()},j=function(...w){if(r?.aborted)return;o=this,l=w;const S=p==null;x(),c&&S&&u()};return j.schedule=x,j.cancel=N,j.flush=v,r?.addEventListener("abort",N,{once:!0}),j}e.debounce=t})(__)),__}var Qz;function yAe(){return Qz||(Qz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xAe();function a(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,f=null;const p=t.debounce(function(...N){u=s.apply(this,N),f=null},r,{edges:d}),x=function(...N){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(u=s.apply(this,N),f=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,N),u)},y=()=>(p.flush(),u);return x.cancel=p.cancel,x.flush=y,x}e.debounce=a})(S_)),S_}var Kz;function bAe(){return Kz||(Kz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yAe();function a(s,r=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(s,r,{leading:o,maxWait:r,trailing:l})}e.throttle=a})(C_)),C_}var A_,Xz;function vAe(){return Xz||(Xz=1,A_=bAe().throttle),A_}var wAe=vAe();const NAe=Zi(wAe);var ow=function(t,a){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(a.replace(/%s/g,()=>r[o++]))}},xQ=(e,t,a)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:o}=a,l=Wl(s)?e:Number(s),c=Wl(r)?t:Number(r);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},jAe={width:0,height:0,overflow:"visible"},CAe={width:0,overflowX:"visible"},SAe={height:0,overflowY:"visible"},_Ae={},AAe=e=>{var{width:t,height:a}=e,s=Wl(t),r=Wl(a);return s&&r?jAe:s?CAe:r?SAe:_Ae};function TAe(e){var{width:t,height:a,aspect:s}=e,r=t,i=a;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lk.apply(null,arguments)}function Zz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Jz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Zz(Object(a),!0).forEach(function(s){EAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function EAe(e,t,a){return(t=kAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kAe(e){var t=LAe(e,"string");return typeof t=="symbol"?t:t+""}function LAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yQ=h.createContext({width:-1,height:-1});function PAe(e){return Uo(e.width)&&Uo(e.height)}function bQ(e){var{children:t,width:a,height:s}=e,r=h.useMemo(()=>({width:a,height:s}),[a,s]);return PAe(r)?h.createElement(yQ.Provider,{value:r},t):null}var LP=()=>h.useContext(yQ),DAe=h.forwardRef((e,t)=>{var{aspect:a,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:f,className:p,onResize:x,style:y={}}=e,N=h.useRef(null),v=h.useRef();v.current=x,h.useImperativeHandle(t,()=>N.current);var[j,w]=h.useState({containerWidth:s.width,containerHeight:s.height}),S=h.useCallback((T,M)=>{w(R=>{var z=Math.round(T),O=Math.round(M);return R.containerWidth===z&&R.containerHeight===O?R:{containerWidth:z,containerHeight:O}})},[]);h.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Qx;var T=O=>{var I,{width:B,height:ee}=O[0].contentRect;S(B,ee),(I=v.current)===null||I===void 0||I.call(v,B,ee)};u>0&&(T=NAe(T,u,{trailing:!0,leading:!1}));var M=new ResizeObserver(T),{width:R,height:z}=N.current.getBoundingClientRect();return S(R,z),M.observe(N.current),()=>{M.disconnect()}},[S,u]);var{containerWidth:A,containerHeight:k}=j;ow(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:_,calculatedHeight:L}=xQ(A,k,{width:r,height:i,aspect:a,maxHeight:c});return ow(_!=null&&_>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,L,r,i,o,l,a),h.createElement("div",{id:f?"".concat(f):void 0,className:Lt("recharts-responsive-container",p),style:Jz(Jz({},y),{},{width:r,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:N},h.createElement("div",{style:AAe({width:r,height:i})},h.createElement(bQ,{width:_,height:L},d)))}),T_=h.forwardRef((e,t)=>{var a=LP();if(Uo(a.width)&&Uo(a.height))return e.children;var{width:s,height:r}=TAe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=xQ(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return It(i)&&It(o)?h.createElement(bQ,{width:i,height:o},e.children):h.createElement(DAe,lk({},e,{width:s,height:r,ref:t}))});function vQ(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Mj=()=>{var e,t=Us(),a=Rt(gAe),s=Rt(Oj),r=(e=Rt(Dj))===null||e===void 0?void 0:e.padding;return!t||!s||!r?a:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},OAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},wQ=()=>{var e;return(e=Rt(is))!==null&&e!==void 0?e:OAe},PP=()=>Rt(ac),DP=()=>Rt(sc),MAe=()=>Rt(e=>e.layout.margin),yn=e=>e.layout.layoutType,ch=()=>Rt(yn),IAe=()=>{var e=ch();return e!==void 0},Ij=e=>{var t=Kn(),a=Us(),{width:s,height:r}=e,i=LP(),o=s,l=r;return i&&(o=i.width>0?i.width:s,l=i.height>0?i.height:r),h.useEffect(()=>{!a&&Uo(o)&&Uo(l)&&t(F_e({width:o,height:l}))},[t,a,o,l]),null},NQ=Symbol.for("immer-nothing"),eF=Symbol.for("immer-draftable"),Br=Symbol.for("immer-state");function Bi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ip=Object.getPrototypeOf;function Uf(e){return!!e&&!!e[Br]}function zu(e){return e?jQ(e)||Array.isArray(e)||!!e[eF]||!!e.constructor?.[eF]||t0(e)||Rj(e):!1}var $Ae=Object.prototype.constructor.toString(),tF=new WeakMap;function jQ(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let s=tF.get(a);return s===void 0&&(s=Function.toString.call(a),tF.set(a,s)),s===$Ae}function lw(e,t,a=!0){$j(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function $j(e){const t=e[Br];return t?t.type_:Array.isArray(e)?1:t0(e)?2:Rj(e)?3:0}function ck(e,t){return $j(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function CQ(e,t,a){const s=$j(e);s===2?e.set(t,a):s===3?e.add(a):e[t]=a}function RAe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function t0(e){return e instanceof Map}function Rj(e){return e instanceof Set}function Jd(e){return e.copy_||e.base_}function dk(e,t){if(t0(e))return new Map(e);if(Rj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=jQ(e);if(t===!0||t==="class_only"&&!a){const s=Object.getOwnPropertyDescriptors(e);delete s[Br];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Ip(e),s)}else{const s=Ip(e);if(s!==null&&a)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function OP(e,t=!1){return zj(e)||Uf(e)||!zu(e)||($j(e)>1&&Object.defineProperties(e,{set:rb,add:rb,clear:rb,delete:rb}),Object.freeze(e),t&&Object.values(e).forEach(a=>OP(a,!0))),e}function zAe(){Bi(2)}var rb={value:zAe};function zj(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var FAe={};function Fu(e){const t=FAe[e];return t||Bi(0,e),t}var $p;function SQ(){return $p}function UAe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nF(e,t){t&&(Fu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function uk(e){mk(e),e.drafts_.forEach(BAe),e.drafts_=null}function mk(e){e===$p&&($p=e.parent_)}function aF(e){return $p=UAe($p,e)}function BAe(e){const t=e[Br];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sF(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return e!==void 0&&e!==a?(a[Br].modified_&&(uk(t),Bi(4)),zu(e)&&(e=cw(t,e),t.parent_||dw(t,e)),t.patches_&&Fu("Patches").generateReplacementPatches_(a[Br].base_,e,t.patches_,t.inversePatches_)):e=cw(t,a,[]),uk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NQ?e:void 0}function cw(e,t,a){if(zj(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Br];if(!r)return lw(t,(i,o)=>rF(e,r,t,i,o,a),s),t;if(r.scope_!==e)return t;if(!r.modified_)return dw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),lw(o,(c,d)=>rF(e,r,i,c,d,a,l),s),dw(e,i,!1),a&&e.patches_&&Fu("Patches").generatePatches_(r,a,e.patches_,e.inversePatches_)}return r.copy_}function rF(e,t,a,s,r,i,o){if(r==null||typeof r!="object"&&!o)return;const l=zj(r);if(!(l&&!o)){if(Uf(r)){const c=i&&t&&t.type_!==3&&!ck(t.assigned_,s)?i.concat(s):void 0,d=cw(e,r,c);if(CQ(a,s,d),Uf(d))e.canAutoFreeze_=!1;else return}else o&&a.add(r);if(zu(r)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&l)return;cw(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(t0(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))&&dw(e,r)}}}function dw(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&OP(t,a)}function HAe(e,t){const a=Array.isArray(e),s={type_:a?1:0,scope_:t?t.scope_:SQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=MP;a&&(r=[s],i=Rp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,l}var MP={get(e,t){if(t===Br)return e;const a=Jd(e);if(!ck(a,t))return qAe(e,a,t);const s=a[t];return e.finalized_||!zu(s)?s:s===E_(e.base_,t)?(k_(e),e.copy_[t]=hk(s,e)):s},has(e,t){return t in Jd(e)},ownKeys(e){return Reflect.ownKeys(Jd(e))},set(e,t,a){const s=_Q(Jd(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=E_(Jd(e),t),i=r?.[Br];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(RAe(a,r)&&(a!==void 0||ck(e.base_,t)))return!0;k_(e),fk(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty(e,t){return E_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,k_(e),fk(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Jd(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:a[t]}},defineProperty(){Bi(11)},getPrototypeOf(e){return Ip(e.base_)},setPrototypeOf(){Bi(12)}},Rp={};lw(MP,(e,t)=>{Rp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Rp.deleteProperty=function(e,t){return Rp.set.call(this,e,t,void 0)};Rp.set=function(e,t,a){return MP.set.call(this,e[0],t,a,e[0])};function E_(e,t){const a=e[Br];return(a?Jd(a):e)[t]}function qAe(e,t,a){const s=_Q(t,a);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function _Q(e,t){if(!(t in e))return;let a=Ip(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Ip(a)}}function fk(e){e.modified_||(e.modified_=!0,e.parent_&&fk(e.parent_))}function k_(e){e.copy_||(e.copy_=dk(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var GAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,a,s)=>{if(typeof t=="function"&&typeof a!="function"){const i=a;a=t;const o=this;return function(c=i,...d){return o.produce(c,u=>a.call(this,u,...d))}}typeof a!="function"&&Bi(6),s!==void 0&&typeof s!="function"&&Bi(7);let r;if(zu(t)){const i=aF(this),o=hk(t,void 0);let l=!0;try{r=a(o),l=!1}finally{l?uk(i):mk(i)}return nF(i,s),sF(r,i)}else if(!t||typeof t!="object"){if(r=a(t),r===void 0&&(r=t),r===NQ&&(r=void 0),this.autoFreeze_&&OP(r,!0),s){const i=[],o=[];Fu("Patches").generateReplacementPatches_(t,r,i,o),s(i,o)}return r}else Bi(1,t)},this.produceWithPatches=(t,a)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,r;return[this.produce(t,a,(o,l)=>{s=o,r=l}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){zu(e)||Bi(8),Uf(e)&&(e=WAe(e));const t=aF(this),a=hk(e,void 0);return a[Br].isManual_=!0,mk(t),a}finishDraft(e,t){const a=e&&e[Br];(!a||!a.isManual_)&&Bi(9);const{scope_:s}=a;return nF(s,t),sF(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const r=t[a];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}a>-1&&(t=t.slice(a+1));const s=Fu("Patches").applyPatches_;return Uf(e)?s(e,t):this.produce(e,r=>s(r,t))}};function hk(e,t){const a=t0(e)?Fu("MapSet").proxyMap_(e,t):Rj(e)?Fu("MapSet").proxySet_(e,t):HAe(e,t);return(t?t.scope_:SQ()).drafts_.push(a),a}function WAe(e){return Uf(e)||Bi(10,e),AQ(e)}function AQ(e){if(!zu(e)||zj(e))return e;const t=e[Br];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=dk(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=dk(e,!0);return lw(a,(r,i)=>{CQ(a,r,AQ(i))},s),t&&(t.finalized_=!1),a}var VAe=new GAe;VAe.produce;var YAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},TQ=Nr({name:"legend",initialState:YAe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:ia()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Gi(e).payload.indexOf(a);r>-1&&(e.payload[r]=s)},prepare:ia()},removeLegendPayload:{reducer(e,t){var a=Gi(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:ia()}}}),{setLegendSize:iF,setLegendSettings:QAe,addLegendPayload:EQ,replaceLegendPayload:kQ,removeLegendPayload:LQ}=TQ.actions,KAe=TQ.reducer,XAe=["contextPayload"];function gk(){return gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},gk.apply(null,arguments)}function oF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Bf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oF(Object(a),!0).forEach(function(s){ZAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZAe(e,t,a){return(t=JAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JAe(e){var t=eTe(e,"string");return typeof t=="symbol"?t:t+""}function eTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tTe(e,t){if(e==null)return{};var a,s,r=nTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function nTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function aTe(e){return e.value}function sTe(e){var{contextPayload:t}=e,a=tTe(e,XAe),s=LY(t,e.payloadUniqBy,aTe),r=Bf(Bf({},a),{},{payload:s});return h.isValidElement(e.content)?h.cloneElement(e.content,r):typeof e.content=="function"?h.createElement(e.content,r):h.createElement(c2e,r)}function rTe(e,t,a,s,r,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((s||0)-i.width)/2}:d=l==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((r||0)-i.height)/2}:u=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),Bf(Bf({},d),u)}function iTe(e){var t=Kn();return h.useEffect(()=>{t(QAe(e))},[t,e]),null}function oTe(e){var t=Kn();return h.useEffect(()=>(t(iF(e)),()=>{t(iF({width:0,height:0}))}),[t,e]),null}function lTe(e,t,a,s){return e==="vertical"&&It(t)?{height:t}:e==="horizontal"?{width:a||s}:null}var cTe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function PQ(e){var t=Wa(e,cTe),a=B2e(),s=DSe(),r=MAe(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[d,u]=MY([a]),f=PP(),p=DP();if(f==null||p==null)return null;var x=f-(r?.left||0)-(r?.right||0),y=lTe(t.layout,o,i,x),N=c?l:Bf(Bf({position:"absolute",width:y?.width||i||"auto",height:y?.height||o||"auto"},rTe(l,t,r,f,p,d)),l),v=c??s;if(v==null||a==null)return null;var j=h.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:u},h.createElement(iTe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&h.createElement(oTe,{width:d.width,height:d.height}),h.createElement(sTe,gk({},t,y,{margin:r,chartWidth:f,chartHeight:p,contextPayload:a})));return Hi.createPortal(j,v)}PQ.displayName="Legend";function pk(){return pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pk.apply(null,arguments)}function lF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function L_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lF(Object(a),!0).forEach(function(s){dTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function dTe(e,t,a){return(t=uTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function uTe(e){var t=mTe(e,"string");return typeof t=="symbol"?t:t+""}function mTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fTe(e){return Array.isArray(e)&&Fo(e[0])&&Fo(e[1])?e.join(" ~ "):e}var hTe=e=>{var{separator:t=" : ",contentStyle:a={},itemStyle:s={},labelStyle:r={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var k={padding:0,margin:0},_=(l?Nj(i,l):i).map((L,T)=>{if(L.type==="none")return null;var M=L.formatter||o||fTe,{value:R,name:z}=L,O=R,I=z;if(M){var B=M(R,z,L,T,i);if(Array.isArray(B))[O,I]=B;else if(B!=null)O=B;else return null}var ee=L_({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},s);return h.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:ee},Fo(I)?h.createElement("span",{className:"recharts-tooltip-item-name"},I):null,Fo(I)?h.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,h.createElement("span",{className:"recharts-tooltip-item-value"},O),h.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return h.createElement("ul",{className:"recharts-tooltip-item-list",style:k},_)}return null},y=L_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=L_({margin:0},r),v=!da(u),j=v?u:"",w=Lt("recharts-default-tooltip",c),S=Lt("recharts-tooltip-label",d);v&&f&&i!==void 0&&i!==null&&(j=f(u,i));var A=p?{role:"status","aria-live":"assertive"}:{};return h.createElement("div",pk({className:w,style:y},A),h.createElement("p",{className:S,style:N},h.isValidElement(j)?j:"".concat(j)),x())},bg="recharts-tooltip-wrapper",gTe={visibility:"hidden"};function pTe(e){var{coordinate:t,translateX:a,translateY:s}=e;return Lt(bg,{["".concat(bg,"-right")]:It(a)&&t&&It(t.x)&&a>=t.x,["".concat(bg,"-left")]:It(a)&&t&&It(t.x)&&a<t.x,["".concat(bg,"-bottom")]:It(s)&&t&&It(t.y)&&s>=t.y,["".concat(bg,"-top")]:It(s)&&t&&It(t.y)&&s<t.y})}function cF(e){var{allowEscapeViewBox:t,coordinate:a,key:s,offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&It(i[s]))return i[s];var u=a[s]-l-(r>0?r:0),f=a[s]+r;if(t[s])return o[s]?u:f;var p=c[s];if(p==null)return 0;if(o[s]){var x=u,y=p;return x<y?Math.max(f,p):Math.max(u,p)}if(d==null)return 0;var N=f+l,v=p+d;return N>v?Math.max(u,p):Math.max(f,p)}function xTe(e){var{translateX:t,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function yTe(e){var{allowEscapeViewBox:t,coordinate:a,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,f;return o.height>0&&o.width>0&&a?(u=cF({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=cF({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=xTe({translateX:u,translateY:f,useTranslate3d:l})):d=gTe,{cssProperties:d,cssClasses:pTe({translateX:u,translateY:f,coordinate:a})}}function dF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ib(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?dF(Object(a),!0).forEach(function(s){xk(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xk(e,t,a){return(t=bTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bTe(e){var t=vTe(e,"string");return typeof t=="symbol"?t:t+""}function vTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wTe extends h.PureComponent{constructor(){super(...arguments),xk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xk(this,"handleKeyDown",t=>{if(t.key==="Escape"){var a,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,a;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:a,animationDuration:s,animationEasing:r,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:f,useTranslate3d:p,viewBox:x,wrapperStyle:y,lastBoundingBox:N,innerRef:v,hasPortalFromProps:j}=this.props,{cssClasses:w,cssProperties:S}=yTe({allowEscapeViewBox:a,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:{height:N.height,width:N.width},useTranslate3d:p,viewBox:x}),A=j?{}:ib(ib({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=ib(ib({},A),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},y);return h.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:v},i)}}var DQ=()=>{var e;return(e=Rt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function yk(){return yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yk.apply(null,arguments)}function uF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function mF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?uF(Object(a),!0).forEach(function(s){NTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function NTe(e,t,a){return(t=jTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jTe(e){var t=CTe(e,"string");return typeof t=="symbol"?t:t+""}function CTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fF={curveBasisClosed:Cpe,curveBasisOpen:Spe,curveBasis:jpe,curveBumpX:HG,curveBumpY:qG,curveLinearClosed:Tpe,curveLinear:kx,curveMonotoneX:EE,curveMonotoneY:oW,curveNatural:cW,curveStep:dW,curveStepAfter:mW,curveStepBefore:uW},uw=e=>ha(e.x)&&ha(e.y),hF=e=>e.base!=null&&uw(e.base)&&uw(e),vg=e=>e.x,wg=e=>e.y,STe=(e,t)=>{if(typeof e=="function")return e;var a="curve".concat(Yx(e));return(a==="curveMonotone"||a==="curveBump")&&t?fF["".concat(a).concat(t==="vertical"?"Y":"X")]:fF[a]||kx},_Te=e=>{var{type:t="linear",points:a=[],baseLine:s,layout:r,connectNulls:i=!1}=e,o=STe(t,r),l=i?a.filter(uw):a,c;if(Array.isArray(s)){var d=a.map((x,y)=>mF(mF({},x),{},{base:s[y]}));r==="vertical"?c=Fg().y(wg).x1(vg).x0(x=>x.base.x):c=Fg().x(vg).y1(wg).y0(x=>x.base.y);var u=c.defined(hF).curve(o),f=i?d.filter(hF):d;return u(f)}r==="vertical"&&It(s)?c=Fg().y(wg).x1(vg).x0(s):It(s)?c=Fg().x(vg).y1(wg).y0(s):c=k4().x(vg).y(wg);var p=c.defined(uw).curve(o);return p(l)},IP=e=>{var{className:t,points:a,path:s,pathRef:r}=e,i=ch();if((!a||!a.length)&&!s)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=a&&a.length?_Te(o):s;return h.createElement("path",yk({},Ur(e),bP(e),{className:Lt("recharts-curve",t),d:l===null?void 0:l,ref:r}))},ATe=["x","y","top","left","width","height","className"];function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},bk.apply(null,arguments)}function gF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function TTe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?gF(Object(a),!0).forEach(function(s){ETe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ETe(e,t,a){return(t=kTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kTe(e){var t=LTe(e,"string");return typeof t=="symbol"?t:t+""}function LTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PTe(e,t){if(e==null)return{};var a,s,r=DTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function DTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var OTe=(e,t,a,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(a),MTe=e=>{var{x:t=0,y:a=0,top:s=0,left:r=0,width:i=0,height:o=0,className:l}=e,c=PTe(e,ATe),d=TTe({x:t,y:a,top:s,left:r,width:i,height:o},c);return!It(t)||!It(a)||!It(i)||!It(o)||!It(s)||!It(r)?null:h.createElement("path",bk({},Vs(d),{className:Lt("recharts-cross",l),d:OTe(t,a,i,o,s,r)}))};function ITe(e,t,a,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-r,width:e==="horizontal"?s:a.width-1,height:e==="horizontal"?a.height-1:s}}function pF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?pF(Object(a),!0).forEach(function(s){$Te(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function $Te(e,t,a){return(t=RTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function RTe(e){var t=zTe(e,"string");return typeof t=="symbol"?t:t+""}function zTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FTe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),OQ=(e,t,a)=>e.map(s=>"".concat(FTe(s)," ").concat(t,"ms ").concat(a)).join(","),UTe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((a,s)=>a.filter(r=>s.includes(r))),zp=(e,t)=>Object.keys(t).reduce((a,s)=>xF(xF({},a),{},{[s]:e(s,t[s])}),{});function yF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Qa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?yF(Object(a),!0).forEach(function(s){BTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function BTe(e,t,a){return(t=HTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HTe(e){var t=qTe(e,"string");return typeof t=="symbol"?t:t+""}function qTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mw=(e,t,a)=>e+(t-e)*a,vk=e=>{var{from:t,to:a}=e;return t!==a},MQ=(e,t,a)=>{var s=zp((r,i)=>{if(vk(i)){var[o,l]=e(i.from,i.to,i.velocity);return Qa(Qa({},i),{},{from:o,velocity:l})}return i},t);return a<1?zp((r,i)=>vk(i)&&s[r]!=null?Qa(Qa({},i),{},{velocity:mw(i.velocity,s[r].velocity,a),from:mw(i.from,s[r].from,a)}):i,t):MQ(e,s,a-1)};function GTe(e,t,a,s,r,i){var o,l=s.reduce((p,x)=>Qa(Qa({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>zp((p,x)=>x.from,l),d=()=>!Object.values(l).filter(vk).length,u=null,f=p=>{o||(o=p);var x=p-o,y=x/a.dt;l=MQ(a,l,y),r(Qa(Qa(Qa({},e),t),c())),o=p,d()||(u=i.setTimeout(f))};return()=>(u=i.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}function WTe(e,t,a,s,r,i,o){var l=null,c=r.reduce((f,p)=>{var x=e[p],y=t[p];return x==null||y==null?f:Qa(Qa({},f),{},{[p]:[x,y]})},{}),d,u=f=>{d||(d=f);var p=(f-d)/s,x=zp((N,v)=>mw(...v,a(p)),c);if(i(Qa(Qa(Qa({},e),t),x)),p<1)l=o.setTimeout(u);else{var y=zp((N,v)=>mw(...v,a(1)),c);i(Qa(Qa(Qa({},e),t),y))}};return()=>(l=o.setTimeout(u),()=>{var f;(f=l)===null||f===void 0||f()})}const VTe=(e,t,a,s,r,i)=>{var o=UTe(e,t);return a==null?()=>(r(Qa(Qa({},e),t)),()=>{}):a.isStepper===!0?GTe(e,t,a,o,r,i):WTe(e,t,a,s,o,r,i)};var fw=1e-4,IQ=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],$Q=(e,t)=>e.map((a,s)=>a*t**s).reduce((a,s)=>a+s),bF=(e,t)=>a=>{var s=IQ(e,t);return $Q(s,a)},YTe=(e,t)=>a=>{var s=IQ(e,t),r=[...s.map((i,o)=>i*o).slice(1),0];return $Q(r,a)},QTe=e=>{var t,a=e.split("(");if(a.length!==2||a[0]!=="cubic-bezier")return null;var s=(t=a[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},KTe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=QTe(a[0]);if(r)return r}}return a.length===4?a:[0,0,1,1]},XTe=(e,t,a,s)=>{var r=bF(e,a),i=bF(t,s),o=YTe(e,a),l=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,f=u,p=0;p<8;++p){var x=r(f)-u,y=o(f);if(Math.abs(x-u)<fw||y<fw)return i(f);f=l(f-x/y)}return i(f)};return c.isStepper=!1,c},vF=function(){return XTe(...KTe(...arguments))},ZTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:s=8,dt:r=17}=t,i=(o,l,c)=>{var d=-(o-l)*a,u=c*s,f=c+(d-u)*r/1e3,p=c*r/1e3+o;return Math.abs(p-l)<fw&&Math.abs(f)<fw?[l,0]:[p,f]};return i.isStepper=!0,i.dt=r,i},JTe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return vF(e);case"spring":return ZTe();default:if(e.split("(")[0]==="cubic-bezier")return vF(e)}return typeof e=="function"?e:null};function eEe(e){var t,a=()=>null,s=!1,r=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){r=e.setTimeout(i.bind(null,d),c);return}i(c),r=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,a(t)),typeof o=="object"&&(t=o,a(t)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,r&&(r(),r=null),i(o)},subscribe:o=>(a=o,()=>{a=()=>null}),getTimeoutController:()=>e}}class tEe{setTimeout(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=o=>{o-s>=a?t(o):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function nEe(){return eEe(new tEe)}var aEe=h.createContext(nEe);function sEe(e,t){var a=h.useContext(aEe);return h.useMemo(()=>t??a(e),[e,t,a])}var rEe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Fj={isSsr:rEe()},iEe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},wF={t:0},P_={t:1};function n0(e){var t=Wa(e,iEe),{isActive:a,canBegin:s,duration:r,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=a==="auto"?!Fj.isSsr:a,f=sEe(t.animationId,t.animationManager),[p,x]=h.useState(u?wF:P_),y=h.useRef(null);return h.useEffect(()=>{u||x(P_)},[u]),h.useEffect(()=>{if(!u||!s)return Qx;var N=VTe(wF,P_,JTe(i),r,x,f.getTimeoutController()),v=()=>{y.current=N()};return f.start([c,o,v,r,l]),()=>{f.stop(),y.current&&y.current(),l()}},[u,s,r,i,o,c,l,f]),d(p.t)}function a0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=h.useRef(Pp(t)),s=h.useRef(e);return s.current!==e&&(a.current=Pp(t),s.current=e),a.current}var oEe=["radius"],lEe=["radius"],NF,jF,CF,SF,_F,AF,TF,EF,kF,LF;function PF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function DF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?PF(Object(a),!0).forEach(function(s){cEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function cEe(e,t,a){return(t=dEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dEe(e){var t=uEe(e,"string");return typeof t=="symbol"?t:t+""}function uEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hw(){return hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},hw.apply(null,arguments)}function OF(e,t){if(e==null)return{};var a,s,r=mEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function mEe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function lo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var MF=(e,t,a,s,r)=>{var i=Xc(a),o=Xc(s),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,d=i>=0?1:-1,u=o>=0&&i>=0||o<0&&i<0?1:0,f;if(l>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,y=4;x<y;x++)p[x]=r[x]>l?l:r[x];f=Na(NF||(NF=lo(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=Na(jF||(jF=lo(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+d*p[0],t)),f+=Na(CF||(CF=lo(["L ",",",""])),e+a-d*p[1],t),p[1]>0&&(f+=Na(SF||(SF=lo(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+a,t+c*p[1])),f+=Na(_F||(_F=lo(["L ",",",""])),e+a,t+s-c*p[2]),p[2]>0&&(f+=Na(AF||(AF=lo(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+a-d*p[2],t+s)),f+=Na(TF||(TF=lo(["L ",",",""])),e+d*p[3],t+s),p[3]>0&&(f+=Na(EF||(EF=lo(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+s-c*p[3])),f+="Z"}else if(l>0&&r===+r&&r>0){var N=Math.min(l,r);f=Na(kF||(kF=lo(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*N,N,N,u,e+d*N,t,e+a-d*N,t,N,N,u,e+a,t+c*N,e+a,t+s-c*N,N,N,u,e+a-d*N,t+s,e+d*N,t+s,N,N,u,e,t+s-c*N)}else f=Na(LF||(LF=lo(["M ",","," h "," v "," h "," Z"])),e,t,a,s,-a);return f},IF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RQ=e=>{var t=Wa(e,IF),a=h.useRef(null),[s,r]=h.useState(-1);h.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var te=a.current.getTotalLength();te&&r(te)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:p,animationBegin:x,isAnimationActive:y,isUpdateAnimationActive:N}=t,v=h.useRef(l),j=h.useRef(c),w=h.useRef(i),S=h.useRef(o),A=h.useMemo(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),k=a0(A,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var _=Lt("recharts-rectangle",u);if(!N){var L=Vs(t),{radius:T}=L,M=OF(L,oEe);return h.createElement("path",hw({},M,{x:Xc(i),y:Xc(o),width:Xc(l),height:Xc(c),radius:typeof d=="number"?d:void 0,className:_,d:MF(i,o,l,c,d)}))}var R=v.current,z=j.current,O=w.current,I=S.current,B="0px ".concat(s===-1?1:s,"px"),ee="".concat(s,"px 0px"),Q=OQ(["strokeDasharray"],p,typeof f=="string"?f:IF.animationEasing);return h.createElement(n0,{animationId:k,key:k,canBegin:s>0,duration:p,easing:f,isActive:N,begin:x},te=>{var W=oa(R,l,te),ae=oa(z,c,te),Ee=oa(O,i,te),se=oa(I,o,te);a.current&&(v.current=W,j.current=ae,w.current=Ee,S.current=se);var Y;y?te>0?Y={transition:Q,strokeDasharray:ee}:Y={strokeDasharray:B}:Y={strokeDasharray:ee};var pe=Vs(t),{radius:Se}=pe,me=OF(pe,lEe);return h.createElement("path",hw({},me,{radius:typeof d=="number"?d:void 0,className:_,d:MF(Ee,se,W,ae,d),ref:a,style:DF(DF({},Y),t.style)}))})};function $F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function RF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$F(Object(a),!0).forEach(function(s){fEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$F(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function fEe(e,t,a){return(t=hEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function hEe(e){var t=gEe(e,"string");return typeof t=="symbol"?t:t+""}function gEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gw=Math.PI/180,pEe=e=>e*180/Math.PI,Ua=(e,t,a,s)=>({x:e+Math.cos(-gw*s)*a,y:t+Math.sin(-gw*s)*a}),zQ=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},xEe=(e,t)=>{var{x:a,y:s}=e,{x:r,y:i}=t;return Math.sqrt((a-r)**2+(s-i)**2)},yEe=(e,t)=>{var{x:a,y:s}=e,{cx:r,cy:i}=t,o=xEe({x:a,y:s},{x:r,y:i});if(o<=0)return{radius:o,angle:0};var l=(a-r)/o,c=Math.acos(l);return s>i&&(c=2*Math.PI-c),{radius:o,angle:pEe(c),angleInRadian:c}},bEe=e=>{var{startAngle:t,endAngle:a}=e,s=Math.floor(t/360),r=Math.floor(a/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:a-i*360}},vEe=(e,t)=>{var{startAngle:a,endAngle:s}=t,r=Math.floor(a/360),i=Math.floor(s/360),o=Math.min(r,i);return e+o*360},wEe=(e,t)=>{var{chartX:a,chartY:s}=e,{radius:r,angle:i}=yEe({x:a,y:s},t),{innerRadius:o,outerRadius:l}=t;if(r<o||r>l||r===0)return null;var{startAngle:c,endAngle:d}=bEe(t),u=i,f;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}return f?RF(RF({},t),{},{radius:r,angle:vEe(u,t)}):null};function FQ(e){var{cx:t,cy:a,radius:s,startAngle:r,endAngle:i}=e,o=Ua(t,a,s,r),l=Ua(t,a,s,i);return{points:[o,l],cx:t,cy:a,radius:s,startAngle:r,endAngle:i}}var zF,FF,UF,BF,HF,qF,GF;function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},wk.apply(null,arguments)}function mu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var NEe=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),359.999);return a*s},ob=e=>{var{cx:t,cy:a,radius:s,angle:r,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+s,u=Math.asin(l/d)/gw,f=c?r:r+i*u,p=Ua(t,a,d,f),x=Ua(t,a,s,f),y=c?r-i*u:r,N=Ua(t,a,d*Math.cos(u*gw),y);return{center:p,circleTangency:x,lineTangency:N,theta:u}},UQ=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:i,endAngle:o}=e,l=NEe(i,o),c=i+l,d=Ua(t,a,r,i),u=Ua(t,a,r,c),f=Na(zF||(zF=mu(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(l)>180),+(i>c),u.x,u.y);if(s>0){var p=Ua(t,a,s,i),x=Ua(t,a,s,c);f+=Na(FF||(FF=mu(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(l)>180),+(i<=c),p.x,p.y)}else f+=Na(UF||(UF=mu(["L ",","," Z"])),t,a);return f},jEe=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=gs(d-c),{circleTangency:f,lineTangency:p,theta:x}=ob({cx:t,cy:a,radius:r,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:y,lineTangency:N,theta:v}=ob({cx:t,cy:a,radius:r,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),j=l?Math.abs(c-d):Math.abs(c-d)-x-v;if(j<0)return o?Na(BF||(BF=mu(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):UQ({cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:c,endAngle:d});var w=Na(HF||(HF=mu(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(u<0),f.x,f.y,r,r,+(j>180),+(u<0),y.x,y.y,i,i,+(u<0),N.x,N.y);if(s>0){var{circleTangency:S,lineTangency:A,theta:k}=ob({cx:t,cy:a,radius:s,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:_,lineTangency:L,theta:T}=ob({cx:t,cy:a,radius:s,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),M=l?Math.abs(c-d):Math.abs(c-d)-k-T;if(M<0&&i===0)return"".concat(w,"L").concat(t,",").concat(a,"Z");w+=Na(qF||(qF=mu(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),L.x,L.y,i,i,+(u<0),_.x,_.y,s,s,+(M>180),+(u>0),S.x,S.y,i,i,+(u<0),A.x,A.y)}else w+=Na(GF||(GF=mu(["L",",","Z"])),t,a);return w},CEe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},BQ=e=>{var t=Wa(e,CEe),{cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(i<r||d===u)return null;var p=Lt("recharts-sector",f),x=i-r,y=$s(o,x,0,!0),N;return y>0&&Math.abs(d-u)<360?N=jEe({cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(y,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):N=UQ({cx:a,cy:s,innerRadius:r,outerRadius:i,startAngle:d,endAngle:u}),h.createElement("path",wk({},Vs(t),{className:p,d:N}))};function SEe(e,t,a){if(e==="horizontal")return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(wY(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:o,angle:l}=t,c=Ua(s,r,i,l),d=Ua(s,r,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return FQ(t)}}var D_={},O_={},M_={},WF;function _Ee(){return WF||(WF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PY();function a(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=a})(M_)),M_}var VF;function AEe(){return VF||(VF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Ee();function a(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=a})(O_)),O_}var YF;function TEe(){return YF||(YF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DY(),a=AEe();function s(r,i,o){o&&typeof o!="number"&&t.isIterateeCall(r,i,o)&&(i=o=void 0),r=a.toFinite(r),i===void 0?(i=r,r=0):i=a.toFinite(i),o=o===void 0?r<i?1:-1:a.toFinite(o);const l=Math.max(Math.ceil((i-r)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=r,r+=o;return c}e.range=s})(D_)),D_}var I_,QF;function EEe(){return QF||(QF=1,I_=TEe().range),I_}var kEe=EEe();const HQ=Zi(kEe),qg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:XL,scaleDiverging:qq,scaleDivergingLog:Gq,scaleDivergingPow:N4,scaleDivergingSqrt:ege,scaleDivergingSymlog:Wq,scaleIdentity:_q,scaleImplicit:yE,scaleLinear:kN,scaleLog:Cp,scaleOrdinal:bp,scalePoint:Wme,scalePow:LN,scaleQuantile:kq,scaleQuantize:Lq,scaleRadial:Eq,scaleSequential:v4,scaleSequentialLog:Uq,scaleSequentialPow:w4,scaleSequentialQuantile:Hq,scaleSequentialSqrt:Jhe,scaleSequentialSymlog:Bq,scaleSqrt:Tq,scaleSymlog:l4,scaleThreshold:d4,scaleTime:b4,scaleUtc:Fq,tickFormat:Sq},Symbol.toStringTag,{value:"Module"}));var rc=e=>e.chartData,Uj=rt([rc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),$P=(e,t,a,s)=>s?Uj(e):rc(e),LEe=(e,t,a)=>a?Uj(e):rc(e);function md(e){if(Array.isArray(e)&&e.length===2){var[t,a]=e;if(ha(t)&&ha(a))return!0}return!1}function KF(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function qQ(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,s]=e,r,i;if(ha(a))r=a;else if(typeof a=="function")return;if(ha(s))i=s;else if(typeof s=="function")return;var o=[r,i];if(md(o))return o}}function PEe(e,t,a){if(!(!a&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,a);if(md(s))return KF(s,t,a)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,o,l;if(r==="auto")t!=null&&(o=Math.min(...t));else if(It(r))o=r;else if(typeof r=="function")try{t!=null&&(o=r(t?.[0]))}catch{}else if(typeof r=="string"&&qz.test(r)){var c=qz.exec(r);if(c==null||c[1]==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(It(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&Gz.test(i)){var u=Gz.exec(i);if(u==null||u[1]==null||t==null)l=void 0;else{var f=+u[1];l=t[1]+f}}else l=t?.[1];var p=[o,l];if(md(p))return t==null?p:KF(p,t,a)}}}var dh=1e9,DEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zP,la=!0,vi="[DecimalError] ",ju=vi+"Invalid argument: ",RP=vi+"Exponent out of range: ",uh=Math.floor,eu=Math.pow,OEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr,ms=1e7,ea=7,GQ=9007199254740991,pw=uh(GQ/ea),Ot={};Ot.absoluteValue=Ot.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ot.comparedTo=Ot.cmp=function(e){var t,a,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,a=s<r?s:r;t<a;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};Ot.decimalPlaces=Ot.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*ea;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};Ot.dividedBy=Ot.div=function(e){return Dl(this,new this.constructor(e))};Ot.dividedToIntegerBy=Ot.idiv=function(e){var t=this,a=t.constructor;return Gn(Dl(t,new a(e),0,1),a.precision)};Ot.equals=Ot.eq=function(e){return!this.cmp(e)};Ot.exponent=function(){return Ha(this)};Ot.greaterThan=Ot.gt=function(e){return this.cmp(e)>0};Ot.greaterThanOrEqualTo=Ot.gte=function(e){return this.cmp(e)>=0};Ot.isInteger=Ot.isint=function(){return this.e>this.d.length-2};Ot.isNegative=Ot.isneg=function(){return this.s<0};Ot.isPositive=Ot.ispos=function(){return this.s>0};Ot.isZero=function(){return this.s===0};Ot.lessThan=Ot.lt=function(e){return this.cmp(e)<0};Ot.lessThanOrEqualTo=Ot.lte=function(e){return this.cmp(e)<1};Ot.logarithm=Ot.log=function(e){var t,a=this,s=a.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Mr))throw Error(vi+"NaN");if(a.s<1)throw Error(vi+(a.s?"NaN":"-Infinity"));return a.eq(Mr)?new s(0):(la=!1,t=Dl(Fp(a,i),Fp(e,i),i),la=!0,Gn(t,r))};Ot.minus=Ot.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?YQ(t,e):WQ(t,(e.s=-e.s,e))};Ot.modulo=Ot.mod=function(e){var t,a=this,s=a.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(vi+"NaN");return a.s?(la=!1,t=Dl(a,e,0,1).times(e),la=!0,a.minus(t)):Gn(new s(a),r)};Ot.naturalExponential=Ot.exp=function(){return VQ(this)};Ot.naturalLogarithm=Ot.ln=function(){return Fp(this)};Ot.negated=Ot.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ot.plus=Ot.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WQ(t,e):YQ(t,(e.s=-e.s,e))};Ot.precision=Ot.sd=function(e){var t,a,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ju+e);if(t=Ha(r)+1,s=r.d.length-1,a=s*ea+1,s=r.d[s],s){for(;s%10==0;s/=10)a--;for(s=r.d[0];s>=10;s/=10)a++}return e&&t>a?t:a};Ot.squareRoot=Ot.sqrt=function(){var e,t,a,s,r,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(vi+"NaN")}for(e=Ha(l),la=!1,r=Math.sqrt(+l),r==0||r==1/0?(t=Eo(l.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=uh((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),a=c.precision,r=o=a+3;;)if(i=s,s=i.plus(Dl(l,i,o+2)).times(.5),Eo(i.d).slice(0,o)===(t=Eo(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),r==o&&t=="4999"){if(Gn(i,a+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return la=!0,Gn(s,a)};Ot.times=Ot.mul=function(e){var t,a,s,r,i,o,l,c,d,u=this,f=u.constructor,p=u.d,x=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,a=u.e+e.e,c=p.length,d=x.length,c<d&&(i=p,p=x,x=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,r=c+s;r>s;)l=i[r]+x[s]*p[r-s-1]+t,i[r--]=l%ms|0,t=l/ms|0;i[r]=(i[r]+t)%ms|0}for(;!i[--o];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,la?Gn(e,f.precision):e};Ot.toDecimalPlaces=Ot.todp=function(e,t){var a=this,s=a.constructor;return a=new s(a),e===void 0?a:(Bo(e,0,dh),t===void 0?t=s.rounding:Bo(t,0,8),Gn(a,e+Ha(a)+1,t))};Ot.toExponential=function(e,t){var a,s=this,r=s.constructor;return e===void 0?a=Uu(s,!0):(Bo(e,0,dh),t===void 0?t=r.rounding:Bo(t,0,8),s=Gn(new r(s),e+1,t),a=Uu(s,!0,e+1)),a};Ot.toFixed=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?Uu(r):(Bo(e,0,dh),t===void 0?t=i.rounding:Bo(t,0,8),s=Gn(new i(r),e+Ha(r)+1,t),a=Uu(s.abs(),!1,e+Ha(s)+1),r.isneg()&&!r.isZero()?"-"+a:a)};Ot.toInteger=Ot.toint=function(){var e=this,t=e.constructor;return Gn(new t(e),Ha(e)+1,t.rounding)};Ot.toNumber=function(){return+this};Ot.toPower=Ot.pow=function(e){var t,a,s,r,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Mr);if(l=new c(l),!l.s){if(e.s<1)throw Error(vi+"Infinity");return l}if(l.eq(Mr))return l;if(s=c.precision,e.eq(Mr))return Gn(l,s);if(t=e.e,a=e.d.length-1,o=t>=a,i=l.s,o){if((a=u<0?-u:u)<=GQ){for(r=new c(Mr),t=Math.ceil(s/ea+4),la=!1;a%2&&(r=r.times(l),ZF(r.d,t)),a=uh(a/2),a!==0;)l=l.times(l),ZF(l.d,t);return la=!0,e.s<0?new c(Mr).div(r):Gn(r,s)}}else if(i<0)throw Error(vi+"NaN");return i=i<0&&e.d[Math.max(t,a)]&1?-1:1,l.s=1,la=!1,r=e.times(Fp(l,s+d)),la=!0,r=VQ(r),r.s=i,r};Ot.toPrecision=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?(a=Ha(r),s=Uu(r,a<=i.toExpNeg||a>=i.toExpPos)):(Bo(e,1,dh),t===void 0?t=i.rounding:Bo(t,0,8),r=Gn(new i(r),e,t),a=Ha(r),s=Uu(r,e<=a||a<=i.toExpNeg,e)),s};Ot.toSignificantDigits=Ot.tosd=function(e,t){var a=this,s=a.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Bo(e,1,dh),t===void 0?t=s.rounding:Bo(t,0,8)),Gn(new s(a),e,t)};Ot.toString=Ot.valueOf=Ot.val=Ot.toJSON=Ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ha(e),a=e.constructor;return Uu(e,t<=a.toExpNeg||t>=a.toExpPos)};function WQ(e,t){var a,s,r,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),la?Gn(t,f):t;if(c=e.d,d=t.d,o=e.e,r=t.e,c=c.slice(),i=o-r,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,r=o,l=c.length),o=Math.ceil(f/ea),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),a=0;i;)a=(c[--i]=c[i]+d[i]+a)/ms|0,c[i]%=ms;for(a&&(c.unshift(a),++r),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=r,la?Gn(t,f):t}function Bo(e,t,a){if(e!==~~e||e<t||e>a)throw Error(ju+e)}function Eo(e){var t,a,s,r=e.length-1,i="",o=e[0];if(r>0){for(i+=o,t=1;t<r;t++)s=e[t]+"",a=ea-s.length,a&&(i+=qc(a)),i+=s;o=e[t],s=o+"",a=ea-s.length,a&&(i+=qc(a))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Dl=(function(){function e(s,r){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*r+o,s[l]=i%ms|0,o=i/ms|0;return o&&s.unshift(o),s}function t(s,r,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=r[l]){c=s[l]>r[l]?1:-1;break}return c}function a(s,r,i){for(var o=0;i--;)s[i]-=o,o=s[i]<r[i]?1:0,s[i]=o*ms+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,o){var l,c,d,u,f,p,x,y,N,v,j,w,S,A,k,_,L,T,M=s.constructor,R=s.s==r.s?1:-1,z=s.d,O=r.d;if(!s.s)return new M(s);if(!r.s)throw Error(vi+"Division by zero");for(c=s.e-r.e,L=O.length,k=z.length,x=new M(R),y=x.d=[],d=0;O[d]==(z[d]||0);)++d;if(O[d]>(z[d]||0)&&--c,i==null?w=i=M.precision:o?w=i+(Ha(s)-Ha(r))+1:w=i,w<0)return new M(0);if(w=w/ea+2|0,d=0,L==1)for(u=0,O=O[0],w++;(d<k||u)&&w--;d++)S=u*ms+(z[d]||0),y[d]=S/O|0,u=S%O|0;else{for(u=ms/(O[0]+1)|0,u>1&&(O=e(O,u),z=e(z,u),L=O.length,k=z.length),A=L,N=z.slice(0,L),v=N.length;v<L;)N[v++]=0;T=O.slice(),T.unshift(0),_=O[0],O[1]>=ms/2&&++_;do u=0,l=t(O,N,L,v),l<0?(j=N[0],L!=v&&(j=j*ms+(N[1]||0)),u=j/_|0,u>1?(u>=ms&&(u=ms-1),f=e(O,u),p=f.length,v=N.length,l=t(f,N,p,v),l==1&&(u--,a(f,L<p?T:O,p))):(u==0&&(l=u=1),f=O.slice()),p=f.length,p<v&&f.unshift(0),a(N,f,v),l==-1&&(v=N.length,l=t(O,N,L,v),l<1&&(u++,a(N,L<v?T:O,v))),v=N.length):l===0&&(u++,N=[0]),y[d++]=u,l&&N[0]?N[v++]=z[A]||0:(N=[z[A]],v=1);while((A++<k||N[0]!==void 0)&&w--)}return y[0]||y.shift(),x.e=c,Gn(x,o?i+Ha(x)+1:i)}})();function VQ(e,t){var a,s,r,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(Ha(e)>16)throw Error(RP+Ha(e));if(!e.s)return new u(Mr);for(la=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(eu(2,d))/Math.LN10*2+5|0,l+=s,a=r=i=new u(Mr),u.precision=l;;){if(r=Gn(r.times(e),l),a=a.times(++c),o=i.plus(Dl(r,a,l)),Eo(o.d).slice(0,l)===Eo(i.d).slice(0,l)){for(;d--;)i=Gn(i.times(i),l);return u.precision=f,t==null?(la=!0,Gn(i,f)):i}i=o}}function Ha(e){for(var t=e.e*ea,a=e.d[0];a>=10;a/=10)t++;return t}function $_(e,t,a){if(t>e.LN10.sd())throw la=!0,a&&(e.precision=a),Error(vi+"LN10 precision limit exceeded");return Gn(new e(e.LN10),t)}function qc(e){for(var t="";e--;)t+="0";return t}function Fp(e,t){var a,s,r,i,o,l,c,d,u,f=1,p=10,x=e,y=x.d,N=x.constructor,v=N.precision;if(x.s<1)throw Error(vi+(x.s?"NaN":"-Infinity"));if(x.eq(Mr))return new N(0);if(t==null?(la=!1,d=v):d=t,x.eq(10))return t==null&&(la=!0),$_(N,d);if(d+=p,N.precision=d,a=Eo(y),s=a.charAt(0),i=Ha(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)x=x.times(e),a=Eo(x.d),s=a.charAt(0),f++;i=Ha(x),s>1?(x=new N("0."+a),i++):x=new N(s+"."+a.slice(1))}else return c=$_(N,d+2,v).times(i+""),x=Fp(new N(s+"."+a.slice(1)),d-p).plus(c),N.precision=v,t==null?(la=!0,Gn(x,v)):x;for(l=o=x=Dl(x.minus(Mr),x.plus(Mr),d),u=Gn(x.times(x),d),r=3;;){if(o=Gn(o.times(u),d),c=l.plus(Dl(o,new N(r),d)),Eo(c.d).slice(0,d)===Eo(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus($_(N,d+2,v).times(i+""))),l=Dl(l,new N(f),d),N.precision=v,t==null?(la=!0,Gn(l,v)):l;l=c,r+=2}}function XF(e,t){var a,s,r;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,a=a-s-1,e.e=uh(a/ea),e.d=[],s=(a+1)%ea,a<0&&(s+=ea),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=ea;s<r;)e.d.push(+t.slice(s,s+=ea));t=t.slice(s),s=ea-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),la&&(e.e>pw||e.e<-pw))throw Error(RP+a)}else e.s=0,e.e=0,e.d=[0];return e}function Gn(e,t,a){var s,r,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=ea,r=t,d=f[u=0];else{if(u=Math.ceil((s+1)/ea),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;s%=ea,r=s-ea+o}if(a!==void 0&&(i=eu(10,o-r-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=a<4?(l||c)&&(a==0||a==(e.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(s>0?r>0?d/eu(10,o-r):0:f[u-1])%10&1||a==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ha(e),f.length=1,t=t-i-1,f[0]=eu(10,(ea-t%ea)%ea),e.e=uh(-t/ea)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,i=1,u--):(f.length=u+1,i=eu(10,ea-s),f[u]=r>0?(d/eu(10,o-r)%eu(10,r)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==ms&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=ms)break;f[u--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(la&&(e.e>pw||e.e<-pw))throw Error(RP+Ha(e));return e}function YQ(e,t){var a,s,r,i,o,l,c,d,u,f,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),la?Gn(t,x):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(a=c,o=-o,l=f.length):(a=f,s=d,l=c.length),r=Math.max(Math.ceil(x/ea),l)+2,o>r&&(o=r,a.length=1),a.reverse(),r=o;r--;)a.push(0);a.reverse()}else{for(r=c.length,l=f.length,u=r<l,u&&(l=r),r=0;r<l;r++)if(c[r]!=f[r]){u=c[r]<f[r];break}o=0}for(u&&(a=c,c=f,f=a,t.s=-t.s),l=c.length,r=f.length-l;r>0;--r)c[l++]=0;for(r=f.length;r>o;){if(c[--r]<f[r]){for(i=r;i&&c[--i]===0;)c[i]=ms-1;--c[i],c[r]+=ms}c[r]-=f[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,la?Gn(t,x):t):new p(0)}function Uu(e,t,a){var s,r=Ha(e),i=Eo(e.d),o=i.length;return t?(a&&(s=a-o)>0?i=i.charAt(0)+"."+i.slice(1)+qc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+qc(-r-1)+i,a&&(s=a-o)>0&&(i+=qc(s))):r>=o?(i+=qc(r+1-o),a&&(s=a-r-1)>0&&(i=i+"."+qc(s))):((s=r+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),a&&(s=a-o)>0&&(r+1===o&&(i+="."),i+=qc(s))),e.s<0?"-"+i:i}function ZF(e,t){if(e.length>t)return e.length=t,!0}function QQ(e){var t,a,s;function r(i){var o=this;if(!(o instanceof r))return new r(i);if(o.constructor=r,i instanceof r){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ju+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return XF(o,i.toString())}else if(typeof i!="string")throw Error(ju+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,OEe.test(i))XF(o,i);else throw Error(ju+i)}if(r.prototype=Ot,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=QQ,r.config=r.set=MEe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(a=s[t++])||(e[a]=this[a]);return r.config(e),r}function MEe(e){if(!e||typeof e!="object")throw Error(vi+"Object expected");var t,a,s,r=["precision",1,dh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[a=r[t]])!==void 0)if(uh(s)===s&&s>=r[t+1]&&s<=r[t+2])this[a]=s;else throw Error(ju+a+": "+s);if((s=e[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(ju+a+": "+s);return this}var zP=QQ(DEe);Mr=new zP(1);const In=zP;var IEe=e=>e,KQ={},XQ=e=>e===KQ,JF=e=>function t(){return arguments.length===0||arguments.length===1&&XQ(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},ZQ=(e,t)=>e===1?t:JF(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var i=s.filter(o=>o!==KQ).length;return i>=e?t(...s):ZQ(e-i,JF(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=s.map(u=>XQ(u)?l.shift():u);return t(...d,...l)}))}),$Ee=e=>ZQ(e.length,e),Nk=(e,t)=>{for(var a=[],s=e;s<t;++s)a[s-e]=s;return a},REe=$Ee((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(a=>t[a]).map(e)),zEe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(!a.length)return IEe;var r=a.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function JQ(e){var t;return e===0?t=1:t=Math.floor(new In(e).abs().log(10).toNumber())+1,t}function eK(e,t,a){for(var s=new In(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(a),r++;return i}var tK=e=>{var[t,a]=e,[s,r]=[t,a];return t>a&&([s,r]=[a,t]),[s,r]},nK=(e,t,a)=>{if(e.lte(0))return new In(0);var s=JQ(e.toNumber()),r=new In(10).pow(s),i=e.div(r),o=s!==1?.05:.1,l=new In(Math.ceil(i.div(o).toNumber())).add(a).mul(o),c=l.mul(r);return t?new In(c.toNumber()):new In(Math.ceil(c.toNumber()))},FEe=(e,t,a)=>{var s=new In(1),r=new In(e);if(!r.isint()&&a){var i=Math.abs(e);i<1?(s=new In(10).pow(JQ(e)-1),r=new In(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new In(Math.floor(e)))}else e===0?r=new In(Math.floor((t-1)/2)):a||(r=new In(Math.floor(e)));var o=Math.floor((t-1)/2),l=zEe(REe(c=>r.add(new In(c-o).mul(s)).toNumber()),Nk);return l(0,t)},aK=function(t,a,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-t)/(s-1)))return{step:new In(0),tickMin:new In(0),tickMax:new In(0)};var o=nK(new In(a).sub(t).div(s-1),r,i),l;t<=0&&a>=0?l=new In(0):(l=new In(t).add(a).div(2),l=l.sub(new In(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new In(a).sub(l).div(o).toNumber()),u=c+d+1;return u>s?aK(t,a,s,r,i+1):(u<s&&(d=a>0?d+(s-u):d,c=a>0?c:c+(s-u)),{step:o,tickMin:l.sub(new In(c).mul(o)),tickMax:l.add(new In(d).mul(o))})},UEe=function(t){var[a,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,c]=tK([a,s]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...Nk(0,r-1).map(()=>1/0)]:[...Nk(0,r-1).map(()=>-1/0),c];return a>s?d.reverse():d}if(l===c)return FEe(l,r,i);var{step:u,tickMin:f,tickMax:p}=aK(l,c,o,i,0),x=eK(f,p.add(new In(.1).mul(u)),u);return a>s?x.reverse():x},BEe=function(t,a){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=tK([s,r]);if(o===-1/0||l===1/0)return[s,r];if(o===l)return[o];var c=Math.max(a,2),d=nK(new In(l).sub(o).div(c-1),i,0),u=[...eK(new In(o),new In(l),d),l];return i===!1&&(u=u.map(f=>Math.round(f))),s>r?u.reverse():u},sK=e=>e.rootProps.maxBarSize,HEe=e=>e.rootProps.barGap,rK=e=>e.rootProps.barCategoryGap,qEe=e=>e.rootProps.barSize,s0=e=>e.rootProps.stackOffset,iK=e=>e.rootProps.reverseStackOrder,FP=e=>e.options.chartName,UP=e=>e.rootProps.syncId,oK=e=>e.rootProps.syncMethod,BP=e=>e.options.eventEmitter,Ba={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},_l={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Dr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Bj=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},GEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_l.angleAxisId,includeHidden:!1,name:void 0,reversed:_l.reversed,scale:_l.scale,tick:_l.tick,tickCount:void 0,ticks:void 0,type:_l.type,unit:void 0},WEe={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Dr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,ticks:void 0,type:Dr.type,unit:void 0},VEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:_l.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_l.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_l.scale,tick:_l.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},YEe={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Dr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,ticks:void 0,type:"category",unit:void 0},HP=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?VEe:GEe,qP=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?YEe:WEe,Hj=e=>e.polarOptions,GP=rt([ac,sc,is],zQ),lK=rt([Hj,GP],(e,t)=>{if(e!=null)return $s(e.innerRadius,t,0)}),cK=rt([Hj,GP],(e,t)=>{if(e!=null)return $s(e.outerRadius,t,t*.8)}),QEe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]},dK=rt([Hj],QEe);rt([HP,dK],Bj);var uK=rt([GP,lK,cK],(e,t,a)=>{if(!(e==null||t==null||a==null))return[t,a]});rt([qP,uK],Bj);var mK=rt([yn,Hj,lK,cK,ac,sc],(e,t,a,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||a==null||s==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:$s(o,r,r/2),cy:$s(l,i,i/2),innerRadius:a,outerRadius:s,startAngle:c,endAngle:d,clockWise:!1}}}),fa=(e,t)=>t,r0=(e,t,a)=>a;function WP(e){return e?.id}function fK(e,t,a){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=a,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:s;if(!(d==null||d.length===0)){var u=WP(l);d.forEach((f,p)=>{var x=i==null||r?p:String(Bn(f,i,null)),y=Bn(f,l.dataKey,0),N;o.has(x)?N=o.get(x):N={},Object.assign(N,{[u]:y}),o.set(x,N)})}}),Array.from(o.values())}function qj(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Gj=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Wj(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function KEe(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}var os=e=>{var t=yn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},mh=e=>e.tooltip.settings.axisId;function eU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?eU(Object(a),!0).forEach(function(s){XEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function XEe(e,t,a){return(t=ZEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ZEe(e){var t=JEe(e,"string");return typeof t=="symbol"?t:t+""}function JEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jk=[0,"auto"],ds={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},hK=(e,t)=>e.cartesianAxis.xAxis[t],ic=(e,t)=>{var a=hK(e,t);return a??ds},us={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:jk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:e0},gK=(e,t)=>e.cartesianAxis.yAxis[t],oc=(e,t)=>{var a=gK(e,t);return a??us},eke={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},VP=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return a??eke},xa=(e,t,a)=>{switch(t){case"xAxis":return ic(e,a);case"yAxis":return oc(e,a);case"zAxis":return VP(e,a);case"angleAxis":return HP(e,a);case"radiusAxis":return qP(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},tke=(e,t,a)=>{switch(t){case"xAxis":return ic(e,a);case"yAxis":return oc(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},i0=(e,t,a)=>{switch(t){case"xAxis":return ic(e,a);case"yAxis":return oc(e,a);case"angleAxis":return HP(e,a);case"radiusAxis":return qP(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},pK=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function YP(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var Vj=e=>e.graphicalItems.cartesianItems,nke=rt([fa,r0],YP),QP=(e,t,a)=>e.filter(a).filter(s=>t?.includeHidden===!0?!0:!s.hide),o0=rt([Vj,xa,nke],QP,{memoizeOptions:{resultEqualityCheck:Wj}}),xK=rt([o0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(qj)),yK=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),ake=rt([o0],yK),KP=e=>e.map(t=>t.data).filter(Boolean).flat(1),ske=rt([o0],KP,{memoizeOptions:{resultEqualityCheck:Wj}}),XP=(e,t)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:a.slice(s,r+1)},ZP=rt([ske,$P],XP),JP=(e,t,a)=>t?.dataKey!=null?e.map(s=>({value:Bn(s,t.dataKey)})):a.length>0?a.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:Bn(r,s)}))):e.map(s=>({value:s})),Yj=rt([ZP,xa,o0],JP);function bK(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ov(e){if(Fo(e)||e instanceof Date){var t=Number(e);if(ha(t))return t}}function tU(e){if(Array.isArray(e)){var t=[ov(e[0]),ov(e[1])];return md(t)?t:void 0}var a=ov(e);if(a!=null)return[a,a]}function Yl(e){return e.map(ov).filter(FSe)}function rke(e,t,a){return!a||typeof t!="number"||Ki(t)?[]:a.length?Yl(a.flatMap(s=>{var r=Bn(e,s.dataKey),i,o;if(Array.isArray(r)?[i,o]=r:i=o=r,!(!ha(i)||!ha(o)))return[t-i,t+o]})):[]}var ls=e=>{var t=os(e),a=mh(e);return i0(e,t,a)},l0=rt([ls],e=>e?.dataKey),ike=rt([xK,$P,ls],fK),vK=(e,t,a,s)=>{var r={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=s?[...c].reverse():c,u=d.map(WP);return[l,{stackedData:Z_e(e,u,a),graphicalItems:d}]}))},Ck=rt([ike,xK,s0,iK],vK),wK=(e,t,a,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&a!=="zAxis"){var o=aAe(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},oke=rt([xa],e=>e.allowDataOverflow),eD=e=>{var t;if(e==null||!("domain"in e))return jk;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var a=Yl(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:jk},tD=rt([xa],eD),nD=rt([tD,oke],qQ),lke=rt([Ck,rc,fa,nD],wK,{memoizeOptions:{resultEqualityCheck:Gj}}),Qj=e=>e.errorBars,cke=(e,t,a)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>bK(a,s)),yw=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var r=a.filter(Boolean);if(r.length!==0){var i=r.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},aD=(e,t,a,s,r)=>{var i,o;if(a.length>0&&e.forEach(l=>{a.forEach(c=>{var d,u,f=(d=s[c.id])===null||d===void 0?void 0:d.filter(j=>bK(r,j)),p=Bn(l,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),x=rke(l,p,f);if(x.length>=2){var y=Math.min(...x),N=Math.max(...x);(i==null||y<i)&&(i=y),(o==null||N>o)&&(o=N)}var v=tU(p);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),o=o==null?v[1]:Math.max(o,v[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var c=tU(Bn(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),ha(i)&&ha(o))return[i,o]},dke=rt([ZP,xa,ake,Qj,fa],aD,{memoizeOptions:{resultEqualityCheck:Gj}});function uke(e){var{value:t}=e;if(Fo(t)||t instanceof Date)return t}var mke=(e,t,a)=>{var s=e.map(uke).filter(r=>r!=null);return a&&(t.dataKey==null||t.allowDuplicatedCategory&&yY(s))?HQ(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},NK=e=>e.referenceElements.dots,fh=(e,t,a)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===a:s.yAxisId===a),fke=rt([NK,fa,r0],fh),jK=e=>e.referenceElements.areas,hke=rt([jK,fa,r0],fh),CK=e=>e.referenceElements.lines,gke=rt([CK,fa,r0],fh),SK=(e,t)=>{if(e!=null){var a=Yl(e.map(s=>t==="xAxis"?s.x:s.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},pke=rt(fke,fa,SK),_K=(e,t)=>{if(e!=null){var a=Yl(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},xke=rt([hke,fa],_K);function yke(e){var t;if(e.x!=null)return Yl([e.x]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return a==null||a.length===0?[]:Yl(a)}function bke(e){var t;if(e.y!=null)return Yl([e.y]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return a==null||a.length===0?[]:Yl(a)}var AK=(e,t)=>{if(e!=null){var a=e.flatMap(s=>t==="xAxis"?yke(s):bke(s));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},vke=rt([gke,fa],AK),wke=rt(pke,vke,xke,(e,t,a)=>yw(e,a,t)),sD=(e,t,a,s,r,i,o,l)=>{if(a!=null)return a;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?yw(s,i,r):yw(i,r);return PEe(t,d,e.allowDataOverflow)},Nke=rt([xa,tD,nD,lke,dke,wke,yn,fa],sD,{memoizeOptions:{resultEqualityCheck:Gj}}),jke=[0,1],rD=(e,t,a,s,r,i,o)=>{if(!((e==null||a==null||a.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=Td(t,i);if(d&&l==null){var u;return HQ(0,(u=a?.length)!==null&&u!==void 0?u:0)}return c==="category"?mke(s,e,d):r==="expand"?jke:o}},iD=rt([xa,yn,ZP,Yj,s0,fa,Nke],rD),TK=(e,t,a,s,r)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Yx(i));return l in qg?l:"point"}}},hh=rt([xa,yn,pK,FP,fa],TK);function Cke(e){if(e!=null){if(e in qg)return qg[e]();var t="scale".concat(Yx(e));if(t in qg)return qg[t]()}}function oD(e,t,a,s){if(!(a==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(s);var r=Cke(t);if(r!=null){var i=r.domain(a).range(s);return V_e(i),i}}}var lD=(e,t,a)=>{var s=eD(t);if(!(a!=="auto"&&a!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&md(e))return UEe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&md(e))return BEe(e,t.tickCount,t.allowDecimals)}},cD=rt([iD,i0,hh],lD),dD=(e,t,a,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&md(t)&&Array.isArray(a)&&a.length>0){var r=t[0],i=a[0],o=t[1],l=a[a.length-1];return[Math.min(r,i),Math.max(o,l)]}return t},Ske=rt([xa,iD,cD,fa],dD),_ke=rt(Yj,xa,(e,t)=>{if(!(!t||t.type!=="number")){var a=1/0,s=Array.from(Yl(e.map(f=>f.value))).sort((f,p)=>f-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var o=i-r;if(o===0)return 1/0;for(var l=0;l<s.length-1;l++){var c=s[l],d=s[l+1];if(!(c==null||d==null)){var u=d-c;a=Math.min(a,u)}}return a/o}}),EK=rt(_ke,yn,rK,is,(e,t,a,s,r)=>r,(e,t,a,s,r)=>{if(!ha(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var o=$s(a,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),Ake=(e,t,a)=>{var s=ic(e,t);return s==null||typeof s.padding!="string"?0:EK(e,"xAxis",t,a,s.padding)},Tke=(e,t,a)=>{var s=oc(e,t);return s==null||typeof s.padding!="string"?0:EK(e,"yAxis",t,a,s.padding)},Eke=rt(ic,Ake,(e,t)=>{var a,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((a=r.left)!==null&&a!==void 0?a:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),kke=rt(oc,Tke,(e,t)=>{var a,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((a=r.top)!==null&&a!==void 0?a:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),Lke=rt([is,Eke,Oj,Dj,(e,t,a)=>a],(e,t,a,s,r)=>{var{padding:i}=s;return r?[i.left,a.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Pke=rt([is,yn,kke,Oj,Dj,(e,t,a)=>a],(e,t,a,s,r,i)=>{var{padding:o}=r;return i?[s.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),c0=(e,t,a,s)=>{var r;switch(t){case"xAxis":return Lke(e,a,s);case"yAxis":return Pke(e,a,s);case"zAxis":return(r=VP(e,a))===null||r===void 0?void 0:r.range;case"angleAxis":return dK(e);case"radiusAxis":return uK(e,a);default:return}},kK=rt([xa,c0],Bj),Kj=rt([xa,hh,Ske,kK],oD);rt([o0,Qj,fa],cke);function LK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Xj=(e,t)=>t,Zj=(e,t,a)=>a,Dke=rt(Lj,Xj,Zj,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(LK)),Oke=rt(Pj,Xj,Zj,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(LK)),PK=(e,t)=>({width:e.width,height:t.height}),Mke=(e,t)=>{var a=typeof t.width=="number"?t.width:e0;return{width:a,height:e.height}},DK=rt(is,ic,PK),Ike=(e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},$ke=(e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}},Rke=rt(sc,is,Dke,Xj,Zj,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=PK(t,l);o==null&&(o=Ike(t,s,e));var d=s==="top"&&!r||s==="bottom"&&r;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),zke=rt(ac,is,Oke,Xj,Zj,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=Mke(t,l);o==null&&(o=$ke(t,s,e));var d=s==="left"&&!r||s==="right"&&r;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),Fke=(e,t)=>{var a=ic(e,t);if(a!=null)return Rke(e,a.orientation,a.mirror)},Uke=rt([is,ic,Fke,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),Bke=(e,t)=>{var a=oc(e,t);if(a!=null)return zke(e,a.orientation,a.mirror)},Hke=rt([is,oc,Bke,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),OK=rt(is,oc,(e,t)=>{var a=typeof t.width=="number"?t.width:e0;return{width:a,height:e.height}}),nU=(e,t,a)=>{switch(t){case"xAxis":return DK(e,a).width;case"yAxis":return OK(e,a).height;default:return}},MK=(e,t,a,s)=>{if(a!=null){var{allowDuplicatedCategory:r,type:i,dataKey:o}=a,l=Td(e,s),c=t.map(d=>d.value);if(o&&l&&i==="category"&&r&&yY(c))return c}},uD=rt([yn,Yj,xa,fa],MK),IK=(e,t,a,s)=>{if(!(a==null||a.dataKey==null)){var{type:r,scale:i}=a,o=Td(e,s);if(o&&(r==="number"||i!=="auto"))return t.map(l=>l.value)}},mD=rt([yn,Yj,i0,fa],IK),aU=rt([yn,tke,hh,Kj,uD,mD,c0,cD,fa],(e,t,a,s,r,i,o,l,c)=>{if(t!=null){var d=Td(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:d,niceTicks:l,range:o,realScaleType:a,scale:s}}}),qke=(e,t,a,s,r,i,o,l,c)=>{if(!(t==null||s==null)){var d=Td(e,c),{type:u,ticks:f,tickCount:p}=t,x=a==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,y=u==="category"&&s.bandwidth?s.bandwidth()/x:0;y=c==="angleAxis"&&i!=null&&i.length>=2?gs(i[0]-i[1])*2*y:y;var N=f||r;if(N){var v=N.map((j,w)=>{var S=o?o.indexOf(j):j;return{index:w,coordinate:s(S)+y,value:j,offset:y}});return v.filter(j=>ha(j.coordinate))}return d&&l?l.map((j,w)=>({coordinate:s(j)+y,value:j,index:w,offset:y})).filter(j=>ha(j.coordinate)):s.ticks?s.ticks(p).map(j=>({coordinate:s(j)+y,value:j,offset:y})):s.domain().map((j,w)=>({coordinate:s(j)+y,value:o?o[j]:j,index:w,offset:y}))}},$K=rt([yn,i0,hh,Kj,cD,c0,uD,mD,fa],qke),Gke=(e,t,a,s,r,i,o)=>{if(!(t==null||a==null||s==null||s[0]===s[1])){var l=Td(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&s?.length>=2?gs(s[0]-s[1])*2*d:d,l&&i?i.map((u,f)=>({coordinate:a(u)+d,value:u,index:f,offset:d})):a.ticks?a.ticks(c).map(u=>({coordinate:a(u)+d,value:u,offset:d})):a.domain().map((u,f)=>({coordinate:a(u)+d,value:r?r[u]:u,index:f,offset:d}))}},fd=rt([yn,i0,Kj,c0,uD,mD,fa],Gke),hd=rt(xa,Kj,(e,t)=>{if(!(e==null||t==null))return xw(xw({},e),{},{scale:t})}),Wke=rt([xa,hh,iD,kK],oD);rt((e,t,a)=>VP(e,a),Wke,(e,t)=>{if(!(e==null||t==null))return xw(xw({},e),{},{scale:t})});var Vke=rt([yn,Lj,Pj],(e,t,a)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),RK=e=>e.options.defaultTooltipEventType,zK=e=>e.options.validateTooltipEventTypes;function FK(e,t,a){if(e==null)return t;var s=e?"axis":"item";return a==null?t:a.includes(s)?s:t}function fD(e,t){var a=RK(e),s=zK(e);return FK(t,a,s)}function Yke(e){return Rt(t=>fD(t,e))}var UK=(e,t)=>{var a,s=Number(t);if(!(Ki(s)||t==null))return s>=0?e==null||(a=e[s])===null||a===void 0?void 0:a.value:void 0},Qke=e=>e.tooltip.settings,Vc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Kke={itemInteraction:{click:Vc,hover:Vc},axisInteraction:{click:Vc,hover:Vc},keyboardInteraction:Vc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},BK=Nr({name:"tooltip",initialState:Kke,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:ia()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Gi(e).tooltipItemPayloads.indexOf(a);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:ia()},removeTooltipEntrySettings:{reducer(e,t){var a=Gi(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:ia()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:Xke,replaceTooltipEntrySettings:Zke,removeTooltipEntrySettings:Jke,setTooltipSettingsState:eLe,setActiveMouseOverItemIndex:HK,mouseLeaveItem:tLe,mouseLeaveChart:qK,setActiveClickItemIndex:nLe,setMouseOverAxisIndex:GK,setMouseClickAxisIndex:aLe,setSyncInteraction:Sk,setKeyboardInteraction:_k}=BK.actions,sLe=BK.reducer;function sU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function lb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?sU(Object(a),!0).forEach(function(s){rLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function rLe(e,t,a){return(t=iLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function iLe(e){var t=oLe(e,"string");return typeof t=="symbol"?t:t+""}function oLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lLe(e,t,a){return t==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function cLe(e){return e.index!=null}var WK=(e,t,a,s)=>{if(t==null)return Vc;var r=lLe(e,t,a);if(r==null)return Vc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(cLe(r)){if(i)return lb(lb({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return lb(lb({},Vc),{},{coordinate:r.coordinate})};function dLe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function uLe(e,t){var a=dLe(e),s=t[0],r=t[1];if(a===void 0)return!1;var i=Math.min(s,r),o=Math.max(s,r);return a>=i&&a<=o}function mLe(e,t,a){if(a==null||t==null)return!0;var s=Bn(e,t);return s==null||!md(a)?!0:uLe(s,a)}var hD=(e,t,a,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!ha(i))return r;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),d=t[c];return d==null||mLe(d,a,s)?String(c):null},VK=(e,t,a,s,r,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=r?.[Number(i)];if(u)return a==="horizontal"?{x:u.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:u.coordinate}}},YK=(e,t,a,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(a==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},d0=e=>e.options.tooltipPayloadSearcher,gh=e=>e.tooltip;function rU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function iU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?rU(Object(a),!0).forEach(function(s){fLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function fLe(e,t,a){return(t=hLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function hLe(e){var t=gLe(e,"string");return typeof t=="symbol"?t:t+""}function gLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pLe(e,t){return e??t}var QK=(e,t,a,s,r,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=a,f=[];return e.reduce((p,x)=>{var y,{dataDefinedOnItem:N,settings:v}=x,j=pLe(N,l),w=Array.isArray(j)?uQ(j,d,u):j,S=(y=v?.dataKey)!==null&&y!==void 0?y:s,A=v?.nameKey,k;if(s&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=bY(w,s,r):k=i(w,t,c,A),Array.isArray(k))k.forEach(L=>{var T=iU(iU({},v),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});p.push(Wz({tooltipEntrySettings:T,dataKey:L.dataKey,payload:L.payload,value:Bn(L.payload,L.dataKey),name:L.name}))});else{var _;p.push(Wz({tooltipEntrySettings:v,dataKey:S,payload:k,value:Bn(k,S),name:(_=Bn(k,A))!==null&&_!==void 0?_:v?.name}))}return p},f)}},gD=rt([ls,yn,pK,FP,os],TK),xLe=rt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),yLe=rt([os,mh],YP),ph=rt([xLe,ls,yLe],QP,{memoizeOptions:{resultEqualityCheck:Wj}}),bLe=rt([ph],e=>e.filter(qj)),vLe=rt([ph],KP,{memoizeOptions:{resultEqualityCheck:Wj}}),xh=rt([vLe,rc],XP),wLe=rt([bLe,rc,ls],fK),pD=rt([xh,ls,ph],JP),KK=rt([ls],eD),NLe=rt([ls],e=>e.allowDataOverflow),XK=rt([KK,NLe],qQ),jLe=rt([ph],e=>e.filter(qj)),CLe=rt([wLe,jLe,s0,iK],vK),SLe=rt([CLe,rc,os,XK],wK),_Le=rt([ph],yK),ALe=rt([xh,ls,_Le,Qj,os],aD,{memoizeOptions:{resultEqualityCheck:Gj}}),TLe=rt([NK,os,mh],fh),ELe=rt([TLe,os],SK),kLe=rt([jK,os,mh],fh),LLe=rt([kLe,os],_K),PLe=rt([CK,os,mh],fh),DLe=rt([PLe,os],AK),OLe=rt([ELe,DLe,LLe],yw),MLe=rt([ls,KK,XK,SLe,ALe,OLe,yn,os],sD),u0=rt([ls,yn,xh,pD,s0,os,MLe],rD),ILe=rt([u0,ls,gD],lD),$Le=rt([ls,u0,ILe,os],dD),ZK=e=>{var t=os(e),a=mh(e),s=!1;return c0(e,t,a,s)},JK=rt([ls,ZK],Bj),eX=rt([ls,gD,$Le,JK],oD),RLe=rt([yn,pD,ls,os],MK),zLe=rt([yn,pD,ls,os],IK),FLe=(e,t,a,s,r,i,o,l)=>{if(t){var{type:c}=t,d=Td(e,l);if(s){var u=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=c==="category"&&s.bandwidth?s.bandwidth()/u:0;return f=l==="angleAxis"&&r!=null&&r?.length>=2?gs(r[0]-r[1])*2*f:f,d&&o?o.map((p,x)=>({coordinate:s(p)+f,value:p,index:x,offset:f})):s.domain().map((p,x)=>({coordinate:s(p)+f,value:i?i[p]:p,index:x,offset:f}))}}},lc=rt([yn,ls,gD,eX,ZK,RLe,zLe,os],FLe),xD=rt([RK,zK,Qke],(e,t,a)=>FK(a.shared,e,t)),tX=e=>e.tooltip.settings.trigger,yD=e=>e.tooltip.settings.defaultIndex,m0=rt([gh,xD,tX,yD],WK),gd=rt([m0,xh,l0,u0],hD),nX=rt([lc,gd],UK),bD=rt([m0],e=>{if(e)return e.dataKey}),ULe=rt([m0],e=>{if(e)return e.graphicalItemId}),aX=rt([gh,xD,tX,yD],YK),BLe=rt([ac,sc,yn,is,lc,yD,aX,d0],VK),HLe=rt([m0,BLe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),qLe=rt([m0],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),GLe=rt([aX,gd,rc,l0,nX,d0,xD],QK),WLe=rt([GLe],e=>{if(e!=null){var t=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(t))}});function oU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function lU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oU(Object(a),!0).forEach(function(s){VLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function VLe(e,t,a){return(t=YLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function YLe(e){var t=QLe(e,"string");return typeof t=="symbol"?t:t+""}function QLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KLe=()=>Rt(ls),XLe=()=>{var e=KLe(),t=Rt(lc),a=Rt(eX);return Ff(!e||!a?void 0:lU(lU({},e),{},{scale:a}),t)};function cU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Xm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?cU(Object(a),!0).forEach(function(s){ZLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZLe(e,t,a){return(t=JLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JLe(e){var t=e4e(e,"string");return typeof t=="symbol"?t:t+""}function e4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t4e=(e,t,a,s)=>{var r=t.find(i=>i&&i.index===a);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},n4e=(e,t,a,s)=>{var r=t.find(d=>d&&d.index===a);if(r){if(e==="centric"){var i=r.coordinate,{radius:o}=s;return Xm(Xm(Xm({},s),Ua(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=r.coordinate,{angle:c}=s;return Xm(Xm(Xm({},s),Ua(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function a4e(e,t){var{chartX:a,chartY:s}=e;return a>=t.left&&a<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var sX=(e,t,a,s,r)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,d,u,f,p,x=l>0?(c=a[l-1])===null||c===void 0?void 0:c.coordinate:(d=a[o-1])===null||d===void 0?void 0:d.coordinate,y=(u=a[l])===null||u===void 0?void 0:u.coordinate,N=l>=o-1?(f=a[0])===null||f===void 0?void 0:f.coordinate:(p=a[l+1])===null||p===void 0?void 0:p.coordinate,v=void 0;if(!(x==null||y==null||N==null))if(gs(y-x)!==gs(N-y)){var j=[];if(gs(N-y)===gs(r[1]-r[0])){v=N;var w=y+r[1]-r[0];j[0]=Math.min(w,(w+x)/2),j[1]=Math.max(w,(w+x)/2)}else{v=x;var S=N+r[1]-r[0];j[0]=Math.min(y,(S+y)/2),j[1]=Math.max(y,(S+y)/2)}var A=[Math.min(y,(v+y)/2),Math.max(y,(v+y)/2)];if(e>A[0]&&e<=A[1]||e>=j[0]&&e<=j[1]){var k;return(k=a[l])===null||k===void 0?void 0:k.index}}else{var _=Math.min(x,N),L=Math.max(x,N);if(e>(_+y)/2&&e<=(L+y)/2){var T;return(T=a[l])===null||T===void 0?void 0:T.index}}}else if(t)for(var M=0;M<o;M++){var R=t[M];if(R!=null){var z=t[M+1],O=t[M-1];if(M===0&&z!=null&&e<=(R.coordinate+z.coordinate)/2||M===o-1&&O!=null&&e>(R.coordinate+O.coordinate)/2||M>0&&M<o-1&&O!=null&&z!=null&&e>(R.coordinate+O.coordinate)/2&&e<=(R.coordinate+z.coordinate)/2)return R.index}}return-1},s4e=()=>Rt(FP),vD=(e,t)=>t,rX=(e,t,a)=>a,wD=(e,t,a,s)=>s,r4e=rt(lc,e=>Nj(e,t=>t.coordinate)),ND=rt([gh,vD,rX,wD],WK),jD=rt([ND,xh,l0,u0],hD),i4e=(e,t,a)=>{if(t!=null){var s=gh(e);return t==="axis"?a==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:a==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},iX=rt([gh,vD,rX,wD],YK),bw=rt([ac,sc,yn,is,lc,wD,iX,d0],VK),o4e=rt([ND,bw],(e,t)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:t}),oX=rt([lc,jD],UK),l4e=rt([iX,jD,rc,l0,oX,d0,vD],QK),c4e=rt([ND,jD],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),d4e=(e,t,a,s,r,i,o)=>{if(!(!e||!a||!s||!r)&&a4e(e,o)){var l=sAe(e,t),c=sX(l,i,r,a,s),d=t4e(t,r,c,e);return{activeIndex:String(c),activeCoordinate:d}}},u4e=(e,t,a,s,r,i,o)=>{if(!(!e||!s||!r||!i||!a)){var l=wEe(e,a);if(l){var c=rAe(l,t),d=sX(c,o,i,s,r),u=n4e(t,i,d,l);return{activeIndex:String(d),activeCoordinate:u}}}},m4e=(e,t,a,s,r,i,o,l)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?d4e(e,t,s,r,i,o,l):u4e(e,t,a,s,r,i,o)},f4e=rt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(t!=null){var s=e[t];if(s!=null)return a?s.panoramaElement:s.element}}),h4e=rt(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Ba)),a=Array.from(new Set(t));return a.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:KEe}});function dU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function uU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?dU(Object(a),!0).forEach(function(s){g4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function g4e(e,t,a){return(t=p4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p4e(e){var t=x4e(e,"string");return typeof t=="symbol"?t:t+""}function x4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y4e={},b4e={zIndexMap:Object.values(Ba).reduce((e,t)=>uU(uU({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),y4e)},v4e=new Set(Object.values(Ba));function w4e(e){return v4e.has(e)}var lX=Nr({name:"zIndex",initialState:b4e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ia()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!w4e(a)&&delete e.zIndexMap[a])},prepare:ia()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:s,isPanorama:r}=t.payload;e.zIndexMap[a]?r?e.zIndexMap[a].panoramaElement=s:e.zIndexMap[a].element=s:e.zIndexMap[a]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:ia()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:ia()}}}),{registerZIndexPortal:N4e,unregisterZIndexPortal:j4e,registerZIndexPortalElement:C4e,unregisterZIndexPortalElement:S4e}=lX.actions,_4e=lX.reducer;function jr(e){var{zIndex:t,children:a}=e,s=IAe(),r=s&&t!==void 0&&t!==0,i=Us(),o=Kn();h.useLayoutEffect(()=>r?(o(N4e({zIndex:t})),()=>{o(j4e({zIndex:t}))}):Qx,[o,t,r]);var l=Rt(c=>f4e(c,t,i));return r?l?Hi.createPortal(a,l):null:a}function Ak(){return Ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ak.apply(null,arguments)}function mU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function cb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?mU(Object(a),!0).forEach(function(s){A4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function A4e(e,t,a){return(t=T4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T4e(e){var t=E4e(e,"string");return typeof t=="symbol"?t:t+""}function E4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k4e(e){var{cursor:t,cursorComp:a,cursorProps:s}=e;return h.isValidElement(t)?h.cloneElement(t,s):h.createElement(a,s)}function L4e(e){var t,{coordinate:a,payload:s,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:u}=e,f=a,p=s,x=r;if(!c||!f||u!=="ScatterChart"&&d!=="axis")return null;var y,N,v;if(u==="ScatterChart")y=f,N=MTe,v=Ba.cursorLine;else if(u==="BarChart")y=ITe(l,f,i,o),N=RQ,v=Ba.cursorRectangle;else if(l==="radial"&&wY(f)){var{cx:j,cy:w,radius:S,startAngle:A,endAngle:k}=FQ(f);y={cx:j,cy:w,startAngle:A,endAngle:k,innerRadius:S,outerRadius:S},N=BQ,v=Ba.cursorLine}else y={points:SEe(l,f,i)},N=IP,v=Ba.cursorLine;var _=typeof c=="object"&&"className"in c?c.className:void 0,L=cb(cb(cb(cb({stroke:"#ccc",pointerEvents:"none"},i),y),Iu(c)),{},{payload:p,payloadIndex:x,className:Lt("recharts-tooltip-cursor",_)});return h.createElement(jr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:v},h.createElement(k4e,{cursor:c,cursorComp:N,cursorProps:L}))}function P4e(e){var t=XLe(),a=wQ(),s=ch(),r=s4e();return t==null||a==null||s==null||r==null?null:h.createElement(L4e,Ak({},e,{offset:a,layout:s,tooltipAxisBandSize:t,chartName:r}))}var cX=h.createContext(null),D4e=()=>h.useContext(cX),R_={exports:{}},fU;function O4e(){return fU||(fU=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function r(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new r(u,f||c,p),y=a?a+d:d;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],x]:c._events[y].push(x):(c._events[y]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=a?a+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,x=f.length,y=new Array(x);p<x;p++)y[p]=f[p].fn;return y},l.prototype.listenerCount=function(d){var u=a?a+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,p,x,y){var N=a?a+d:d;if(!this._events[N])return!1;var v=this._events[N],j=arguments.length,w,S;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,p),!0;case 5:return v.fn.call(v.context,u,f,p,x),!0;case 6:return v.fn.call(v.context,u,f,p,x,y),!0}for(S=1,w=new Array(j-1);S<j;S++)w[S-1]=arguments[S];v.fn.apply(v.context,w)}else{var A=v.length,k;for(S=0;S<A;S++)switch(v[S].once&&this.removeListener(d,v[S].fn,void 0,!0),j){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,u);break;case 3:v[S].fn.call(v[S].context,u,f);break;case 4:v[S].fn.call(v[S].context,u,f,p);break;default:if(!w)for(k=1,w=new Array(j-1);k<j;k++)w[k-1]=arguments[k];v[S].fn.apply(v[S].context,w)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,p){var x=a?a+d:d;if(!this._events[x])return this;if(!u)return o(this,x),this;var y=this._events[x];if(y.fn)y.fn===u&&(!p||y.once)&&(!f||y.context===f)&&o(this,x);else{for(var N=0,v=[],j=y.length;N<j;N++)(y[N].fn!==u||p&&!y[N].once||f&&y[N].context!==f)&&v.push(y[N]);v.length?this._events[x]=v.length===1?v[0]:v:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l})(R_)),R_.exports}var M4e=O4e();const I4e=Zi(M4e);var Up=new I4e,Tk="recharts.syncEvent.tooltip",hU="recharts.syncEvent.brush";function CD(e,t){if(t){var a=Number.parseInt(t,10);if(!Ki(a))return e?.[a]}}var $4e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},dX=Nr({name:"options",initialState:$4e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),R4e=dX.reducer,{createEventEmitter:z4e}=dX.actions;function F4e(e){return e.tooltip.syncInteraction}var U4e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},uX=Nr({name:"chartData",initialState:U4e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:s}=t.payload;a!=null&&(e.dataStartIndex=a),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:gU,setDataStartEndIndexes:B4e,setComputedData:PVe}=uX.actions,H4e=uX.reducer,q4e=["x","y"];function pU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Zm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?pU(Object(a),!0).forEach(function(s){G4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function G4e(e,t,a){return(t=W4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function W4e(e){var t=V4e(e,"string");return typeof t=="symbol"?t:t+""}function V4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y4e(e,t){if(e==null)return{};var a,s,r=Q4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Q4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function K4e(){var e=Rt(UP),t=Rt(BP),a=Kn(),s=Rt(oK),r=Rt(lc),i=ch(),o=Mj(),l=Rt(c=>c.rootProps.className);h.useEffect(()=>{if(e==null)return Qx;var c=(d,u,f)=>{if(t!==f&&e===d){if(s==="index"){var p;if(o&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var x=u.payload.coordinate,{x:y,y:N}=x,v=Y4e(x,q4e),{x:j,y:w,width:S,height:A}=u.payload.sourceViewBox,k=Zm(Zm({},v),{},{x:o.x+(S?(y-j)/S:0)*o.width,y:o.y+(A?(N-w)/A:0)*o.height});a(Zm(Zm({},u),{},{payload:Zm(Zm({},u.payload),{},{coordinate:k})}))}else a(u);return}if(r!=null){var _;if(typeof s=="function"){var L={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},T=s(r,L);_=r[T]}else s==="value"&&(_=r.find(Q=>String(Q.value)===u.payload.label));var{coordinate:M}=u.payload;if(_==null||u.payload.active===!1||M==null||o==null){a(Sk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:R,y:z}=M,O=Math.min(R,o.x+o.width),I=Math.min(z,o.y+o.height),B={x:i==="horizontal"?_.coordinate:O,y:i==="horizontal"?I:_.coordinate},ee=Sk({active:u.payload.active,coordinate:B,dataKey:u.payload.dataKey,index:String(_.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});a(ee)}}};return Up.on(Tk,c),()=>{Up.off(Tk,c)}},[l,a,t,e,s,r,i,o])}function X4e(){var e=Rt(UP),t=Rt(BP),a=Kn();h.useEffect(()=>{if(e==null)return Qx;var s=(r,i,o)=>{t!==o&&e===r&&a(B4e(i))};return Up.on(hU,s),()=>{Up.off(hU,s)}},[a,t,e])}function Z4e(){var e=Kn();h.useEffect(()=>{e(z4e())},[e]),K4e(),X4e()}function J4e(e,t,a,s,r,i){var o=Rt(x=>i4e(x,e,t)),l=Rt(BP),c=Rt(UP),d=Rt(oK),u=Rt(F4e),f=u?.active,p=Mj();h.useEffect(()=>{if(!f&&c!=null&&l!=null){var x=Sk({active:i,coordinate:a,dataKey:o,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});Up.emit(Tk,c,x,l)}},[f,a,o,r,s,l,c,d,i,p])}function xU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function yU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?xU(Object(a),!0).forEach(function(s){ePe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ePe(e,t,a){return(t=tPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function tPe(e){var t=nPe(e,"string");return typeof t=="symbol"?t:t+""}function nPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aPe(e){return e.dataKey}function sPe(e,t){return h.isValidElement(e)?h.cloneElement(e,t):typeof e=="function"?h.createElement(e,t):h.createElement(hTe,t)}var bU=[],rPe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function z_(e){var t,a,s=Wa(e,rPe),{active:r,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:f,payloadUniqBy:p,position:x,reverseDirection:y,useTranslate3d:N,wrapperStyle:v,cursor:j,shared:w,trigger:S,defaultIndex:A,portal:k,axisId:_}=s,L=Kn(),T=typeof A=="number"?String(A):A;h.useEffect(()=>{L(eLe({shared:w,trigger:S,axisId:_,active:r,defaultIndex:T}))},[L,w,S,_,r,T]);var M=Mj(),R=DQ(),z=Yke(w),{activeIndex:O,isActive:I}=(t=Rt(re=>c4e(re,z,S,T)))!==null&&t!==void 0?t:{},B=Rt(re=>l4e(re,z,S,T)),ee=Rt(re=>oX(re,z,S,T)),Q=Rt(re=>o4e(re,z,S,T)),te=B,W=D4e(),ae=(a=r??I)!==null&&a!==void 0?a:!1,[Ee,se]=MY([te,ae]),Y=z==="axis"?ee:void 0;J4e(z,S,Q,Y,O,ae);var pe=k??W;if(pe==null||M==null||z==null)return null;var Se=te??bU;ae||(Se=bU),d&&Se.length&&(Se=LY(Se.filter(re=>re.value!=null&&(re.hide!==!0||s.includeHidden)),p,aPe));var me=Se.length>0,ye=h.createElement(wTe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:u,active:ae,coordinate:Q,hasPayload:me,offset:f,position:x,reverseDirection:y,useTranslate3d:N,viewBox:M,wrapperStyle:v,lastBoundingBox:Ee,innerRef:se,hasPortalFromProps:!!k},sPe(c,yU(yU({},s),{},{payload:Se,label:Y,active:ae,activeIndex:O,coordinate:Q,accessibilityLayer:R})));return h.createElement(h.Fragment,null,Hi.createPortal(ye,pe),ae&&h.createElement(P4e,{cursor:j,tooltipEventType:z,coordinate:Q,payload:Se,index:O}))}var Jj=e=>null;Jj.displayName="Cell";function iPe(e,t,a){return(t=oPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oPe(e){var t=lPe(e,"string");return typeof t=="symbol"?t:t+""}function lPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class cPe{constructor(t){iPe(this,"cache",new Map),this.maxSize=t}get(t){var a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function vU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function dPe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?vU(Object(a),!0).forEach(function(s){uPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function uPe(e,t,a){return(t=mPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mPe(e){var t=fPe(e,"string");return typeof t=="symbol"?t:t+""}function fPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hPe={cacheSize:2e3,enableCache:!0},mX=dPe({},hPe),wU=new cPe(mX.cacheSize),gPe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},NU="recharts_measurement_span";function pPe(e,t){var a=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l)}var jU=(e,t)=>{try{var a=document.getElementById(NU);a||(a=document.createElement("span"),a.setAttribute("id",NU),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,gPe,t),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},ap=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Fj.isSsr)return{width:0,height:0};if(!mX.enableCache)return jU(t,a);var s=pPe(t,a),r=wU.get(s);if(r)return r;var i=jU(t,a);return wU.set(s,i),i},fX;function xPe(e,t,a){return(t=yPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yPe(e){var t=bPe(e,"string");return typeof t=="symbol"?t:t+""}function bPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vPe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,wPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,NPe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},jPe=["cm","mm","pt","pc","in","Q","px"];function CPe(e){return jPe.includes(e)}var uf="NaN";function SPe(e,t){return e*NPe[t]}class _s{static parse(t){var a,[,s,r]=(a=wPe.exec(t))!==null&&a!==void 0?a:[];return s==null?_s.NaN:new _s(parseFloat(s),r??"")}constructor(t,a){this.num=t,this.unit=a,this.num=t,this.unit=a,Ki(t)&&(this.unit=""),a!==""&&!vPe.test(a)&&(this.num=NaN,this.unit=""),CPe(a)&&(this.num=SPe(t,a),this.unit="px")}add(t){return this.unit!==t.unit?new _s(NaN,""):new _s(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new _s(NaN,""):new _s(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new _s(NaN,""):new _s(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new _s(NaN,""):new _s(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ki(this.num)}}fX=_s;xPe(_s,"NaN",new fX(NaN,""));function hX(e){if(e==null||e.includes(uf))return uf;for(var t=e;t.includes("*")||t.includes("/");){var a,[,s,r,i]=(a=CU.exec(t))!==null&&a!==void 0?a:[],o=_s.parse(s??""),l=_s.parse(i??""),c=r==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return uf;t=t.replace(CU,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,f,p]=(d=SU.exec(t))!==null&&d!==void 0?d:[],x=_s.parse(u??""),y=_s.parse(p??""),N=f==="+"?x.add(y):x.subtract(y);if(N.isNaN())return uf;t=t.replace(SU,N.toString())}return t}var _U=/\(([^()]*)\)/;function _Pe(e){for(var t=e,a;(a=_U.exec(t))!=null;){var[,s]=a;t=t.replace(_U,hX(s))}return t}function APe(e){var t=e.replace(/\s+/g,"");return t=_Pe(t),t=hX(t),t}function TPe(e){try{return APe(e)}catch{return uf}}function F_(e){var t=TPe(e.slice(5,-1));return t===uf?"":t}var EPe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],kPe=["dx","dy","angle","className","breakAll"];function Ek(){return Ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ek.apply(null,arguments)}function AU(e,t){if(e==null)return{};var a,s,r=LPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var gX=/[ \f\n\r\t\v\u2028\u2029]+/,pX=e=>{var{children:t,breakAll:a,style:s}=e;try{var r=[];da(t)||(a?r=t.toString().split(""):r=t.toString().split(gX));var i=r.map(l=>({word:l,width:ap(l,s).width})),o=a?0:ap("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function PPe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var xX=(e,t,a,s)=>e.reduce((r,i)=>{var{word:o,width:l}=i,c=r[r.length-1];if(c&&l!=null&&(t==null||s||c.width+l+a<Number(t)))c.words.push(o),c.width+=l+a;else{var d={words:[o],width:l};r.push(d)}return r},[]),yX=e=>e.reduce((t,a)=>t.width>a.width?t:a),DPe="",TU=(e,t,a,s,r,i,o,l)=>{var c=e.slice(0,t),d=pX({breakAll:a,style:s,children:c+DPe});if(!d)return[!1,[]];var u=xX(d.wordsWithComputedWidth,i,o,l),f=u.length>r||yX(u).width>Number(i);return[f,u]},OPe=(e,t,a,s,r)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=It(i),u=String(o),f=xX(t,s,a,r);if(!d||r)return f;var p=f.length>i||yX(f).width>Number(s);if(!p)return f;for(var x=0,y=u.length-1,N=0,v;x<=y&&N<=u.length-1;){var j=Math.floor((x+y)/2),w=j-1,[S,A]=TU(u,w,c,l,i,s,a,r),[k]=TU(u,j,c,l,i,s,a,r);if(!S&&!k&&(x=j+1),S&&k&&(y=j-1),!S&&k){v=A;break}N++}return v||f},EU=e=>{var t=da(e)?[]:e.toString().split(gX);return[{words:t,width:void 0}]},MPe=e=>{var{width:t,scaleToFit:a,children:s,style:r,breakAll:i,maxLines:o}=e;if((t||a)&&!Fj.isSsr){var l,c,d=pX({breakAll:i,children:s,style:r});if(d){var{wordsWithComputedWidth:u,spaceWidth:f}=d;l=u,c=f}else return EU(s);return OPe({breakAll:i,children:s,maxLines:o,style:r},l,c,t,!!a)}return EU(s)},bX="#808080",IPe={angle:0,breakAll:!1,capHeight:"0.71em",fill:bX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},e1=h.forwardRef((e,t)=>{var a=Wa(e,IPe),{x:s,y:r,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=a,f=AU(a,EPe),p=h.useMemo(()=>MPe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:x,dy:y,angle:N,className:v,breakAll:j}=f,w=AU(f,kPe);if(!Fo(s)||!Fo(r)||p.length===0)return null;var S=Number(s)+(It(x)?x:0),A=Number(r)+(It(y)?y:0);if(!ha(S)||!ha(A))return null;var k;switch(u){case"start":k=F_("calc(".concat(o,")"));break;case"middle":k=F_("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:k=F_("calc(".concat(p.length-1," * -").concat(i,")"));break}var _=[];if(c){var L=p[0].width,{width:T}=f;_.push("scale(".concat(It(T)&&It(L)?T/L:1,")"))}return N&&_.push("rotate(".concat(N,", ").concat(S,", ").concat(A,")")),_.length&&(w.transform=_.join(" ")),h.createElement("text",Ek({},Vs(w),{ref:t,x:S,y:A,className:Lt("recharts-text",v),textAnchor:d,fill:l.includes("url")?bX:l}),p.map((M,R)=>{var z=M.words.join(j?"":" ");return h.createElement("tspan",{x:S,dy:R===0?k:i,key:"".concat(z,"-").concat(R)},z)}))});e1.displayName="Text";var $Pe=["labelRef"],RPe=["content"];function kU(e,t){if(e==null)return{};var a,s,r=zPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function zPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function LU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ka(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?LU(Object(a),!0).forEach(function(s){FPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):LU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function FPe(e,t,a){return(t=UPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function UPe(e){var t=BPe(e,"string");return typeof t=="symbol"?t:t+""}function BPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Al(){return Al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Al.apply(null,arguments)}var vX=h.createContext(null),HPe=e=>{var{x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o,children:l}=e,c=h.useMemo(()=>({x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o}),[t,a,s,r,i,o]);return h.createElement(vX.Provider,{value:c},l)},wX=()=>{var e=h.useContext(vX),t=Mj();return e||vQ(t)},qPe=h.createContext(null),GPe=()=>{var e=h.useContext(qPe),t=Rt(mK);return e||t},WPe=e=>{var{value:t,formatter:a}=e,s=da(e.children)?t:e.children;return typeof a=="function"?a(s):s},SD=e=>e!=null&&typeof e=="function",VPe=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),360);return a*s},YPe=(e,t,a,s,r)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:f,endAngle:p,clockWise:x}=r,y=(d+u)/2,N=VPe(f,p),v=N>=0?1:-1,j,w;switch(t){case"insideStart":j=f+v*i,w=x;break;case"insideEnd":j=p-v*i,w=!x;break;case"end":j=p+v*i,w=x;break;default:throw new Error("Unsupported position ".concat(t))}w=N<=0?w:!w;var S=Ua(l,c,y,j),A=Ua(l,c,y,j+(w?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(w?0:1,`,
    `).concat(A.x,",").concat(A.y),_=da(e.id)?Pp("recharts-radial-line-"):e.id;return h.createElement("text",Al({},s,{dominantBaseline:"central",className:Lt("recharts-radial-bar-label",o)}),h.createElement("defs",null,h.createElement("path",{id:_,d:k})),h.createElement("textPath",{xlinkHref:"#".concat(_)},a))},QPe=(e,t,a)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(a==="outside"){var{x:u,y:f}=Ua(s,r,o+t,d);return{x:u,y:f,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+o)/2,{x,y}=Ua(s,r,p,d);return{x,y,textAnchor:"middle",verticalAnchor:"middle"}},kk=e=>"cx"in e&&It(e.cx),KPe=(e,t)=>{var{parentViewBox:a,offset:s,position:r}=e,i;a!=null&&!kk(a)&&(i=a);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:u}=t,f=o,p=o+(c-d)/2,x=(f+p)/2,y=(c+d)/2,N=f+c/2,v=u>=0?1:-1,j=v*s,w=v>0?"end":"start",S=v>0?"start":"end",A=c>=0?1:-1,k=A*s,_=A>0?"end":"start",L=A>0?"start":"end";if(r==="top"){var T={x:f+c/2,y:l-j,textAnchor:"middle",verticalAnchor:w};return ka(ka({},T),i?{height:Math.max(l-i.y,0),width:c}:{})}if(r==="bottom"){var M={x:p+d/2,y:l+u+j,textAnchor:"middle",verticalAnchor:S};return ka(ka({},M),i?{height:Math.max(i.y+i.height-(l+u),0),width:d}:{})}if(r==="left"){var R={x:x-k,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return ka(ka({},R),i?{width:Math.max(R.x-i.x,0),height:u}:{})}if(r==="right"){var z={x:x+y+k,y:l+u/2,textAnchor:L,verticalAnchor:"middle"};return ka(ka({},z),i?{width:Math.max(i.x+i.width-z.x,0),height:u}:{})}var O=i?{width:y,height:u}:{};return r==="insideLeft"?ka({x:x+k,y:l+u/2,textAnchor:L,verticalAnchor:"middle"},O):r==="insideRight"?ka({x:x+y-k,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},O):r==="insideTop"?ka({x:f+c/2,y:l+j,textAnchor:"middle",verticalAnchor:S},O):r==="insideBottom"?ka({x:p+d/2,y:l+u-j,textAnchor:"middle",verticalAnchor:w},O):r==="insideTopLeft"?ka({x:f+k,y:l+j,textAnchor:L,verticalAnchor:S},O):r==="insideTopRight"?ka({x:f+c-k,y:l+j,textAnchor:_,verticalAnchor:S},O):r==="insideBottomLeft"?ka({x:p+k,y:l+u-j,textAnchor:L,verticalAnchor:w},O):r==="insideBottomRight"?ka({x:p+d-k,y:l+u-j,textAnchor:_,verticalAnchor:w},O):r&&typeof r=="object"&&(It(r.x)||Wl(r.x))&&(It(r.y)||Wl(r.y))?ka({x:o+$s(r.x,y),y:l+$s(r.y,u),textAnchor:"end",verticalAnchor:"end"},O):ka({x:N,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},O)},XPe={angle:0,offset:5,zIndex:Ba.label,position:"middle",textBreakAll:!1};function Gc(e){var t=Wa(e,XPe),{viewBox:a,position:s,value:r,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=GPe(),f=wX(),p=s==="center"?f:u??f,x,y,N;if(a==null?x=p:kk(a)?x=a:x=vQ(a),!x||da(r)&&da(i)&&!h.isValidElement(o)&&typeof o!="function")return null;var v=ka(ka({},t),{},{viewBox:x});if(h.isValidElement(o)){var{labelRef:j}=v,w=kU(v,$Pe);return h.cloneElement(o,w)}if(typeof o=="function"){var{content:S}=v,A=kU(v,RPe);if(y=h.createElement(o,A),h.isValidElement(y))return y}else y=WPe(t);var k=Vs(t);if(kk(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return YPe(t,s,y,k,x);N=QPe(x,t.offset,t.position)}else N=KPe(t,x);return h.createElement(jr,{zIndex:t.zIndex},h.createElement(e1,Al({ref:d,className:Lt("recharts-label",l)},k,N,{textAnchor:PPe(k.textAnchor)?k.textAnchor:N.textAnchor,breakAll:c}),y))}Gc.displayName="Label";var ZPe=(e,t,a)=>{if(!e)return null;var s={viewBox:t,labelRef:a};return e===!0?h.createElement(Gc,Al({key:"label-implicit"},s)):Fo(e)?h.createElement(Gc,Al({key:"label-implicit",value:e},s)):h.isValidElement(e)?e.type===Gc?h.cloneElement(e,ka({key:"label-implicit"},s)):h.createElement(Gc,Al({key:"label-implicit",content:e},s)):SD(e)?h.createElement(Gc,Al({key:"label-implicit",content:e},s)):e&&typeof e=="object"?h.createElement(Gc,Al({},e,{key:"label-implicit"},s)):null};function JPe(e){var{label:t,labelRef:a}=e,s=wX();return ZPe(t,s,a)||null}var U_={},B_={},PU;function eDe(){return PU||(PU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a[a.length-1]}e.last=t})(B_)),B_}var H_={},DU;function tDe(){return DU||(DU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=t})(H_)),H_}var OU;function nDe(){return OU||(OU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eDe(),a=tDe(),s=vP();function r(i){if(s.isArrayLike(i))return t.last(a.toArray(i))}e.last=r})(U_)),U_}var q_,MU;function aDe(){return MU||(MU=1,q_=nDe().last),q_}var sDe=aDe();const rDe=Zi(sDe);var iDe=["valueAccessor"],oDe=["dataKey","clockWise","id","textBreakAll","zIndex"];function vw(){return vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},vw.apply(null,arguments)}function IU(e,t){if(e==null)return{};var a,s,r=lDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var cDe=e=>Array.isArray(e.value)?rDe(e.value):e.value,NX=h.createContext(void 0),jX=NX.Provider,CX=h.createContext(void 0),dDe=CX.Provider;function uDe(){return h.useContext(NX)}function mDe(){return h.useContext(CX)}function lv(e){var{valueAccessor:t=cDe}=e,a=IU(e,iDe),{dataKey:s,clockWise:r,id:i,textBreakAll:o,zIndex:l}=a,c=IU(a,oDe),d=uDe(),u=mDe(),f=d||u;return!f||!f.length?null:h.createElement(jr,{zIndex:l??Ba.label},h.createElement(ps,{className:"recharts-label-list"},f.map((p,x)=>{var y,N=da(s)?t(p,x):Bn(p&&p.payload,s),v=da(i)?{}:{id:"".concat(i,"-").concat(x)};return h.createElement(Gc,vw({key:"label-".concat(x)},Vs(p),c,v,{fill:(y=a.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:o,viewBox:p.viewBox,index:x,zIndex:0}))})))}lv.displayName="LabelList";function _D(e){var{label:t}=e;return t?t===!0?h.createElement(lv,{key:"labelList-implicit"}):h.isValidElement(t)||SD(t)?h.createElement(lv,{key:"labelList-implicit",content:t}):typeof t=="object"?h.createElement(lv,vw({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Lk(){return Lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Lk.apply(null,arguments)}var SX=e=>{var{cx:t,cy:a,r:s,className:r}=e,i=Lt("recharts-dot",r);return It(t)&&It(a)&&It(s)?h.createElement("circle",Lk({},Ur(e),bP(e),{className:i,cx:t,cy:a,r:s})):null},_X=e=>e.graphicalItems.polarItems,fDe=rt([fa,r0],YP),t1=rt([_X,xa,fDe],QP),hDe=rt([t1],KP),n1=rt([hDe,Uj],XP),gDe=rt([n1,xa,t1],JP);rt([n1,xa,t1],(e,t,a)=>a.length>0?e.flatMap(s=>a.flatMap(r=>{var i,o=Bn(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Bn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var $U=()=>{},pDe=rt([n1,xa,t1,Qj,fa],aD),xDe=rt([xa,tD,nD,$U,pDe,$U,yn,fa],sD),AX=rt([xa,yn,n1,gDe,s0,fa,xDe],rD),yDe=rt([AX,xa,hh],lD);rt([xa,AX,yDe,fa],dD);var bDe={radiusAxis:{},angleAxis:{}},TX=Nr({name:"polarAxis",initialState:bDe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:DVe,removeRadiusAxis:OVe,addAngleAxis:MVe,removeAngleAxis:IVe}=TX.actions,vDe=TX.reducer;function RU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function zU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?RU(Object(a),!0).forEach(function(s){wDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function wDe(e,t,a){return(t=NDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function NDe(e){var t=jDe(e,"string");return typeof t=="symbol"?t:t+""}function jDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CDe=(e,t)=>t,AD=rt([_X,CDe],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),SDe=[],TD=(e,t,a)=>a?.length===0?SDe:a,EX=rt([Uj,AD,TD],(e,t,a)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&a!=null&&(r=a.map(i=>zU(zU({},t.presentationProps),i.props))),r!=null)return r}}),_De=rt([EX,AD,TD],(e,t,a)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,o=Bn(s,t.nameKey,t.name),l;return a!=null&&(i=a[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=a[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?l=s.fill:l=t.fill,{value:lh(o,t.dataKey),color:l,payload:s,type:t.legendType}})}),ADe=rt([EX,AD,TD,is],(e,t,a,s)=>{if(!(t==null||e==null))return _3e({offset:s,pieSettings:t,displayedData:e,cells:a})}),FU=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",UU=null,G_=null,kX=e=>{if(e===UU&&Array.isArray(G_))return G_;var t=[];return h.Children.forEach(e,a=>{da(a)||(wL.isFragment(a)?t=t.concat(kX(a.props.children)):t.push(a))}),G_=t,UU=e,t};function ED(e,t){var a=[],s=[];return Array.isArray(t)?s=t.map(r=>FU(r)):s=[FU(t)],kX(e).forEach(r=>{var i=$u(r,"type.displayName")||$u(r,"type.name");i&&s.indexOf(i)!==-1&&a.push(r)}),a}var LX=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,W_={},BU;function TDe(){return BU||(BU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const r=a[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${r}]`}let s=a;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(a)===s}e.isPlainObject=t})(W_)),W_}var V_,HU;function EDe(){return HU||(HU=1,V_=TDe().isPlainObject),V_}var kDe=EDe();const LDe=Zi(kDe);var qU,GU,WU,VU,YU;function QU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function KU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?QU(Object(a),!0).forEach(function(s){PDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function PDe(e,t,a){return(t=DDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DDe(e){var t=ODe(e,"string");return typeof t=="symbol"?t:t+""}function ODe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ww.apply(null,arguments)}function Ng(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var XU=(e,t,a,s,r)=>{var i=a-s,o;return o=Na(qU||(qU=Ng(["M ",",",""])),e,t),o+=Na(GU||(GU=Ng(["L ",",",""])),e+a,t),o+=Na(WU||(WU=Ng(["L ",",",""])),e+a-i/2,t+r),o+=Na(VU||(VU=Ng(["L ",",",""])),e+a-i/2-s,t+r),o+=Na(YU||(YU=Ng(["L ",","," Z"])),e,t),o},MDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IDe=e=>{var t=Wa(e,MDe),{x:a,y:s,upperWidth:r,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:f}=t,p=h.useRef(null),[x,y]=h.useState(-1),N=h.useRef(r),v=h.useRef(i),j=h.useRef(o),w=h.useRef(a),S=h.useRef(s),A=a0(e,"trapezoid-");if(h.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var B=p.current.getTotalLength();B&&y(B)}catch{}},[]),a!==+a||s!==+s||r!==+r||i!==+i||o!==+o||r===0&&i===0||o===0)return null;var k=Lt("recharts-trapezoid",l);if(!f)return h.createElement("g",null,h.createElement("path",ww({},Vs(t),{className:k,d:XU(a,s,r,i,o)})));var _=N.current,L=v.current,T=j.current,M=w.current,R=S.current,z="0px ".concat(x===-1?1:x,"px"),O="".concat(x,"px 0px"),I=OQ(["strokeDasharray"],d,c);return h.createElement(n0,{animationId:A,key:A,canBegin:x>0,duration:d,easing:c,isActive:f,begin:u},B=>{var ee=oa(_,r,B),Q=oa(L,i,B),te=oa(T,o,B),W=oa(M,a,B),ae=oa(R,s,B);p.current&&(N.current=ee,v.current=Q,j.current=te,w.current=W,S.current=ae);var Ee=B>0?{transition:I,strokeDasharray:O}:{strokeDasharray:z};return h.createElement("path",ww({},Vs(t),{className:k,d:XU(W,ae,ee,Q,te),ref:p,style:KU(KU({},Ee),t.style)}))})},$De=["option","shapeType","activeClassName"];function RDe(e,t){if(e==null)return{};var a,s,r=zDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function zDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function ZU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Nw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ZU(Object(a),!0).forEach(function(s){FDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ZU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function FDe(e,t,a){return(t=UDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function UDe(e){var t=BDe(e,"string");return typeof t=="symbol"?t:t+""}function BDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HDe(e,t){return Nw(Nw({},t),e)}function qDe(e,t){return e==="symbols"}function JU(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return h.createElement(RQ,a);case"trapezoid":return h.createElement(IDe,a);case"sector":return h.createElement(BQ,a);case"symbols":if(qDe(t))return h.createElement(yP,a);break;case"curve":return h.createElement(IP,a);default:return null}}function GDe(e){return h.isValidElement(e)?e.props:e}function kD(e){var{option:t,shapeType:a,activeClassName:s="recharts-active-shape"}=e,r=RDe(e,$De),i;if(h.isValidElement(t))i=h.cloneElement(t,Nw(Nw({},r),GDe(t)));else if(typeof t=="function")i=t(r,r.index);else if(LDe(t)&&typeof t!="boolean"){var o=HDe(t,r);i=h.createElement(JU,{shapeType:a,elementProps:o})}else{var l=r;i=h.createElement(JU,{shapeType:a,elementProps:l})}return r.isActive?h.createElement(ps,{className:s},i):i}var LD=(e,t,a)=>{var s=Kn();return(r,i)=>o=>{e?.(r,i,o),s(HK({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}},PD=e=>{var t=Kn();return(a,s)=>r=>{e?.(a,s,r),t(tLe())}},DD=(e,t,a)=>{var s=Kn();return(r,i)=>o=>{e?.(r,i,o),s(nLe({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}};function OD(e){var{tooltipEntrySettings:t}=e,a=Kn(),s=Us(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(Xke(t)):r.current!==t&&a(Zke({prev:r.current,next:t})),r.current=t)},[t,a,s]),h.useLayoutEffect(()=>()=>{r.current&&(a(Jke(r.current)),r.current=null)},[a]),null}function PX(e){var{legendPayload:t}=e,a=Kn(),s=Us(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(EQ(t)):r.current!==t&&a(kQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(LQ(r.current)),r.current=null)},[a]),null}function WDe(e){var{legendPayload:t}=e,a=Kn(),s=Rt(yn),r=h.useRef(null);return h.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?a(EQ(t)):r.current!==t&&a(kQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(LQ(r.current)),r.current=null)},[a]),null}var Y_,VDe=()=>{var[e]=h.useState(()=>Pp("uid-"));return e},YDe=(Y_=Su.useId)!==null&&Y_!==void 0?Y_:VDe;function QDe(e,t){var a=YDe();return t||(e?"".concat(e,"-").concat(a):a)}var KDe=h.createContext(void 0),MD=e=>{var{id:t,type:a,children:s}=e,r=QDe("recharts-".concat(a),t);return h.createElement(KDe.Provider,{value:r},s(r))},XDe={cartesianItems:[],polarItems:[]},DX=Nr({name:"graphicalItems",initialState:XDe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:ia()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Gi(e).cartesianItems.indexOf(a);r>-1&&(e.cartesianItems[r]=s)},prepare:ia()},removeCartesianGraphicalItem:{reducer(e,t){var a=Gi(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:ia()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:ia()},removePolarGraphicalItem:{reducer(e,t){var a=Gi(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:ia()}}}),{addCartesianGraphicalItem:ZDe,replaceCartesianGraphicalItem:JDe,removeCartesianGraphicalItem:e3e,addPolarGraphicalItem:t3e,removePolarGraphicalItem:n3e}=DX.actions,a3e=DX.reducer,s3e=e=>{var t=Kn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(ZDe(e)):a.current!==e&&t(JDe({prev:a.current,next:e})),a.current=e},[t,e]),h.useLayoutEffect(()=>()=>{a.current&&(t(e3e(a.current)),a.current=null)},[t]),null},OX=h.memo(s3e);function r3e(e){var t=Kn();return h.useLayoutEffect(()=>(t(t3e(e)),()=>{t(n3e(e))}),[t,e]),null}var i3e=["key"],o3e=["onMouseEnter","onClick","onMouseLeave"],l3e=["id"],c3e=["id"];function e7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ja(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?e7(Object(a),!0).forEach(function(s){d3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):e7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function d3e(e,t,a){return(t=u3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u3e(e){var t=m3e(e,"string");return typeof t=="symbol"?t:t+""}function m3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pd.apply(null,arguments)}function a1(e,t){if(e==null)return{};var a,s,r=f3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function f3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function h3e(e){var t=h.useMemo(()=>ED(e.children,Jj),[e.children]),a=Rt(s=>_De(s,e.id,t));return a==null?null:h.createElement(WDe,{legendPayload:a})}var g3e=h.memo(e=>{var{dataKey:t,nameKey:a,sectors:s,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:a,name:lh(l,t),hide:c,type:d,color:o,unit:"",graphicalItemId:u}};return h.createElement(OD,{tooltipEntrySettings:f})}),p3e=(e,t)=>e>t?"start":e<t?"end":"middle",x3e=(e,t,a)=>$s(typeof t=="function"?t(e):t,a,a*.8),y3e=(e,t,a)=>{var{top:s,left:r,width:i,height:o}=t,l=zQ(i,o),c=r+$s(e.cx,i,i/2),d=s+$s(e.cy,o,o/2),u=$s(e.innerRadius,l,0),f=x3e(a,e.outerRadius,l),p=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:f,maxRadius:p}},b3e=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),360);return a*s};function v3e(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var w3e=(e,t)=>{if(h.isValidElement(e))return h.cloneElement(e,t);if(typeof e=="function")return e(t);var a=Lt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=a1(t,i3e);return h.createElement(IP,pd({},r,{type:"linear",className:a}))},N3e=(e,t,a)=>{if(h.isValidElement(e))return h.cloneElement(e,t);var s=a;if(typeof e=="function"&&(s=e(t),h.isValidElement(s)))return s;var r=Lt("recharts-pie-label-text",v3e(e));return h.createElement(e1,pd({},t,{alignmentBaseline:"middle",className:r}),s)};function j3e(e){var{sectors:t,props:a,showLabels:s}=e,{label:r,labelLine:i,dataKey:o}=a;if(!s||!r||!t)return null;var l=Ur(a),c=Iu(r),d=Iu(i),u=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,f=t.map((p,x)=>{var y=(p.startAngle+p.endAngle)/2,N=Ua(p.cx,p.cy,p.outerRadius+u,y),v=ja(ja(ja(ja({},l),p),{},{stroke:"none"},c),{},{index:x,textAnchor:p3e(N.x,p.cx)},N),j=ja(ja(ja(ja({},l),p),{},{fill:"none",stroke:p.fill},d),{},{index:x,points:[Ua(p.cx,p.cy,p.outerRadius,y),N],key:"line"});return h.createElement(jr,{zIndex:Ba.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},h.createElement(ps,null,i&&w3e(i,j),N3e(r,v,Bn(p,o))))});return h.createElement(ps,{className:"recharts-pie-labels"},f)}function C3e(e){var{sectors:t,props:a,showLabels:s}=e,{label:r}=a;return typeof r=="object"&&r!=null&&"position"in r?h.createElement(_D,{label:r}):h.createElement(j3e,{sectors:t,props:a,showLabels:s})}function S3e(e){var{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:r,shape:i,id:o}=e,l=Rt(gd),c=Rt(bD),d=Rt(ULe),{onMouseEnter:u,onClick:f,onMouseLeave:p}=r,x=a1(r,o3e),y=LD(u,r.dataKey,o),N=PD(p),v=DD(f,r.dataKey,o);return t==null||t.length===0?null:h.createElement(h.Fragment,null,t.map((j,w)=>{if(j?.startAngle===0&&j?.endAngle===0&&t.length!==1)return null;var S=d==null||d===o,A=String(w)===l&&(c==null||r.dataKey===c)&&S,k=l?s:null,_=a&&A?a:k,L=ja(ja({},j),{},{stroke:j.stroke,tabIndex:-1,[gQ]:w,[pQ]:o});return h.createElement(ps,pd({key:"sector-".concat(j?.startAngle,"-").concat(j?.endAngle,"-").concat(j.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},Kx(x,j,w),{onMouseEnter:y(j,w),onMouseLeave:N(j,w),onClick:v(j,w)}),h.createElement(kD,pd({option:i??_,index:w,shapeType:"sector",isActive:A},L)))}))}function _3e(e){var t,{pieSettings:a,displayedData:s,cells:r,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:f}=a,p=Math.abs(a.minAngle),x=b3e(l,c),y=Math.abs(x),N=s.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,v=s.filter(_=>Bn(_,d,0)!==0).length,j=(y>=360?v:v-1)*N,w=y-v*p-j,S=s.reduce((_,L)=>{var T=Bn(L,d,0);return _+(It(T)?T:0)},0),A;if(S>0){var k;A=s.map((_,L)=>{var T=Bn(_,d,0),M=Bn(_,u,L),R=y3e(a,i,_),z=(It(T)?T:0)/S,O,I=ja(ja({},_),r&&r[L]&&r[L].props);L?O=k.endAngle+gs(x)*N*(T!==0?1:0):O=l;var B=O+gs(x)*((T!==0?p:0)+z*w),ee=(O+B)/2,Q=(R.innerRadius+R.outerRadius)/2,te=[{name:M,value:T,payload:I,dataKey:d,type:f,graphicalItemId:a.id}],W=Ua(R.cx,R.cy,Q,ee);return k=ja(ja(ja(ja({},a.presentationProps),{},{percent:z,cornerRadius:typeof o=="string"?parseFloat(o):o,name:M,tooltipPayload:te,midAngle:ee,middleRadius:Q,tooltipPosition:W},I),R),{},{value:T,dataKey:d,startAngle:O,endAngle:B,payload:I,paddingAngle:gs(x)*N}),k})}return A}function A3e(e){var{showLabels:t,sectors:a,children:s}=e,r=h.useMemo(()=>!t||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,t]);return h.createElement(dDe,{value:t?r:void 0},s)}function T3e(e){var{props:t,previousSectorsRef:a,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=t,x=a0(t,"recharts-pie-"),y=a.current,[N,v]=h.useState(!1),j=h.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),w=h.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return h.createElement(A3e,{showLabels:!N,sectors:r},h.createElement(n0,{animationId:x,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:w,onAnimationEnd:j,key:x},S=>{var A=[],k=r&&r[0],_=k?.startAngle;return r?.forEach((L,T)=>{var M=y&&y[T],R=T>0?$u(L,"paddingAngle",0):0;if(M){var z=oa(M.endAngle-M.startAngle,L.endAngle-L.startAngle,S),O=ja(ja({},L),{},{startAngle:_+R,endAngle:_+z+R});A.push(O),_=O.endAngle}else{var{endAngle:I,startAngle:B}=L,ee=oa(0,I-B,S),Q=ja(ja({},L),{},{startAngle:_+R,endAngle:_+ee+R});A.push(Q),_=Q.endAngle}}),a.current=A,h.createElement(ps,null,h.createElement(S3e,{sectors:A,activeShape:d,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:s}))}),h.createElement(C3e,{showLabels:!N,sectors:r,props:t}),t.children)}var E3e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ba.area};function k3e(e){var{id:t}=e,a=a1(e,l3e),{hide:s,className:r,rootTabIndex:i}=e,o=h.useMemo(()=>ED(e.children,Jj),[e.children]),l=Rt(u=>ADe(u,t,o)),c=h.useRef(null),d=Lt("recharts-pie",r);return s||l==null?(c.current=null,h.createElement(ps,{tabIndex:i,className:d})):h.createElement(jr,{zIndex:e.zIndex},h.createElement(g3e,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),h.createElement(ps,{tabIndex:i,className:d},h.createElement(T3e,{props:ja(ja({},a),{},{sectors:l}),previousSectorsRef:c,id:t})))}function MX(e){var t=Wa(e,E3e),{id:a}=t,s=a1(t,c3e),r=Ur(s);return h.createElement(MD,{id:a,type:"pie"},i=>h.createElement(h.Fragment,null,h.createElement(r3e,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),h.createElement(h3e,pd({},s,{id:i})),h.createElement(k3e,pd({},s,{id:i}))))}MX.displayName="Pie";var L3e=["points"];function t7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Q_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?t7(Object(a),!0).forEach(function(s){P3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function P3e(e,t,a){return(t=D3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D3e(e){var t=O3e(e,"string");return typeof t=="symbol"?t:t+""}function O3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},jw.apply(null,arguments)}function M3e(e,t){if(e==null)return{};var a,s,r=I3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function I3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function $3e(e){var{option:t,dotProps:a,className:s}=e;if(h.isValidElement(t))return h.cloneElement(t,a);if(typeof t=="function")return t(a);var r=Lt(s,typeof t!="boolean"?t.className:""),i=a??{},{points:o}=i,l=M3e(i,L3e);return h.createElement(SX,jw({},l,{className:r}))}function R3e(e,t){return e==null?!1:t?!0:e.length===1}function z3e(e){var{points:t,dot:a,className:s,dotClassName:r,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:d=Ba.scatter}=e;if(!R3e(t,a))return null;var u=LX(a),f=_Se(a),p=t.map((y,N)=>{var v,j,w=Q_(Q_(Q_({r:3},o),f),{},{index:N,cx:(v=y.x)!==null&&v!==void 0?v:void 0,cy:(j=y.y)!==null&&j!==void 0?j:void 0,dataKey:i,value:y.value,payload:y.payload,points:t});return h.createElement($3e,{key:"dot-".concat(N),option:a,dotProps:w,className:r})}),x={};return l&&c!=null&&(x.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),h.createElement(jr,{zIndex:d},h.createElement(ps,jw({className:s},x),p))}function n7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function a7(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?n7(Object(a),!0).forEach(function(s){F3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function F3e(e,t,a){return(t=U3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function U3e(e){var t=B3e(e,"string");return typeof t=="symbol"?t:t+""}function B3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IX=0,H3e={xAxis:{},yAxis:{},zAxis:{}},$X=Nr({name:"cartesianAxis",initialState:H3e,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:ia()},replaceXAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.xAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:ia()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:ia()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:ia()},replaceYAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.yAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:ia()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:ia()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:ia()},replaceZAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.zAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:ia()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:ia()},updateYAxisWidth(e,t){var{id:a,width:s}=t.payload,r=e.yAxis[a];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var o=[...i,s].slice(-3);e.yAxis[a]=a7(a7({},e.yAxis[a]),{},{width:s,widthHistory:o})}}}}),{addXAxis:q3e,replaceXAxis:G3e,removeXAxis:W3e,addYAxis:V3e,replaceYAxis:Y3e,removeYAxis:Q3e,addZAxis:$Ve,replaceZAxis:RVe,removeZAxis:zVe,updateYAxisWidth:K3e}=$X.actions,X3e=$X.reducer,Z3e=rt([is],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),J3e=rt([Z3e,ac,sc],(e,t,a)=>{if(!(!e||t==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),ID=()=>Rt(J3e),eOe=()=>Rt(WLe);function s7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function K_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?s7(Object(a),!0).forEach(function(s){tOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function tOe(e,t,a){return(t=nOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nOe(e){var t=aOe(e,"string");return typeof t=="symbol"?t:t+""}function aOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sOe=e=>{var{point:t,childIndex:a,mainColor:s,activeDot:r,dataKey:i,clipPath:o}=e;if(r===!1||t.x==null||t.y==null)return null;var l={index:a,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=K_(K_(K_({},l),Iu(r)),bP(r)),d;return h.isValidElement(r)?d=h.cloneElement(r,c):typeof r=="function"?d=r(c):d=h.createElement(SX,c),h.createElement(ps,{className:"recharts-active-dot",clipPath:o},d)};function rOe(e){var{points:t,mainColor:a,activeDot:s,itemDataKey:r,clipPath:i,zIndex:o=Ba.activeDot}=e,l=Rt(gd),c=eOe();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return da(d)?null:h.createElement(jr,{zIndex:o},h.createElement(sOe,{point:d,childIndex:Number(l),mainColor:a,dataKey:r,activeDot:s,clipPath:i}))}var r7=(e,t,a)=>{var s=a??e;if(!da(s))return $s(s,t,0)},iOe=(e,t,a)=>{var s={},r=e.filter(qj),i=e.filter(d=>d.stackId==null),o=r.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),s),l=Object.entries(o).map(d=>{var[u,f]=d,p=f.map(y=>y.dataKey),x=r7(t,a,f[0].barSize);return{stackId:u,dataKeys:p,barSize:x}}),c=i.map(d=>{var u=[d.dataKey].filter(p=>p!=null),f=r7(t,a,d.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...l,...c]};function i7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function db(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?i7(Object(a),!0).forEach(function(s){oOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oOe(e,t,a){return(t=lOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lOe(e){var t=cOe(e,"string");return typeof t=="symbol"?t:t+""}function cOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dOe(e,t,a,s,r){var i=s.length;if(!(i<1)){var o=$s(e,a,0,!0),l,c=[];if(ha(s[0].barSize)){var d=!1,u=a/i,f=s.reduce((j,w)=>j+(w.barSize||0),0);f+=(i-1)*o,f>=a&&(f-=(i-1)*o,o=0),f>=a&&u>0&&(d=!0,u*=.9,f=i*u);var p=(a-f)/2>>0,x={offset:p-o,size:0};l=s.reduce((j,w)=>{var S,A={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+o,size:d?u:(S=w.barSize)!==null&&S!==void 0?S:0}},k=[...j,A];return x=k[k.length-1].position,k},c)}else{var y=$s(t,a,0,!0);a-2*y-(i-1)*o<=0&&(o=0);var N=(a-2*y-(i-1)*o)/i;N>1&&(N>>=0);var v=ha(r)?Math.min(N,r):N;l=s.reduce((j,w,S)=>[...j,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:y+(N+o)*S+(N-v)/2,size:v}}],c)}return l}}var uOe=(e,t,a,s,r,i,o)=>{var l=da(o)?t:o,c=dOe(a,s,r!==i?r:i,e,l);return r!==i&&c!=null&&(c=c.map(d=>db(db({},d),{},{position:db(db({},d.position),{},{offset:d.position.offset-r/2})}))),c},mOe=(e,t)=>{var a=WP(t);if(!(!e||a==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(o=>o.key===a)}}}};function fOe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ha(e.zIndex)?e.zIndex:t}var RX=e=>{var{chartData:t}=e,a=Kn(),s=Us();return h.useEffect(()=>s?()=>{}:(a(gU(t)),()=>{a(gU(void 0))}),[t,a,s]),null},o7={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},zX=Nr({name:"brush",initialState:o7,reducers:{setBrushSettings(e,t){return t.payload==null?o7:t.payload}}}),{setBrushSettings:FVe}=zX.actions,hOe=zX.reducer;function gOe(e,t,a){return(t=pOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pOe(e){var t=xOe(e,"string");return typeof t=="symbol"?t:t+""}function xOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $D{static create(t){return new $D(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:a,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(a){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var a=this.range(),s=a[0],r=a[a.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}gOe($D,"EPS",1e-4);function yOe(e){return(e%180+180)%180}var bOe=function(t){var{width:a,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=yOe(r),o=i*Math.PI/180,l=Math.atan(s/a),c=o>l&&o<Math.PI-l?s/Math.sin(o):a/Math.cos(o);return Math.abs(c)},vOe={dots:[],areas:[],lines:[]},FX=Nr({name:"referenceElements",initialState:vOe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=Gi(e).dots.findIndex(s=>s===t.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=Gi(e).areas.findIndex(s=>s===t.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=Gi(e).lines.findIndex(s=>s===t.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:UVe,removeDot:BVe,addArea:HVe,removeArea:qVe,addLine:GVe,removeLine:WVe}=FX.actions,wOe=FX.reducer,NOe=h.createContext(void 0),jOe=e=>{var{children:t}=e,[a]=h.useState("".concat(Pp("recharts"),"-clip")),s=ID();if(s==null)return null;var{x:r,y:i,width:o,height:l}=s;return h.createElement(NOe.Provider,{value:a},h.createElement("defs",null,h.createElement("clipPath",{id:a},h.createElement("rect",{x:r,y:i,height:l,width:o}))),t)};function UX(e,t){if(t<1)return[];if(t===1)return e;for(var a=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&a.push(r)}return a}function COe(e,t,a){var s={width:e.width+t.width,height:e.height+t.height};return bOe(s,a)}function SOe(e,t,a){var s=a==="width",{x:r,y:i,width:o,height:l}=e;return t===1?{start:s?r:i,end:s?r+o:i+l}:{start:s?r+o:i+l,end:s?r:i}}function Bp(e,t,a,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=a();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function _Oe(e,t){return UX(e,t+1)}function AOe(e,t,a,s,r){for(var i=(s||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,f=function(){var y=s?.[c];if(y===void 0)return{v:UX(s,d)};var N=c,v,j=()=>(v===void 0&&(v=a(y,N)),v),w=y.coordinate,S=c===0||Bp(e,w,j,u,l);S||(c=0,u=o,d+=1),S&&(u=w+e*(j()/2+r),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function TOe(e,t,a,s,r){var i=(s||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,d=1;d<=o;d++){for(var u=(o-1)%d,f=l,p=!0,x=function(){var w=s[y],S=y,A,k=()=>(A===void 0&&(A=a(w,S)),A),_=w.coordinate,L=y===u||Bp(e,_,k,f,c);if(!L)return p=!1,1;L&&(f=_+e*(k()/2+r))},y=u;y<o&&!x();y+=d);if(p){for(var N=[],v=u;v<o;v+=d)N.push(s[v]);return N}}return[]}function l7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ps(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?l7(Object(a),!0).forEach(function(s){EOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function EOe(e,t,a){return(t=kOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kOe(e){var t=LOe(e,"string");return typeof t=="symbol"?t:t+""}function LOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function POe(e,t,a,s,r){for(var i=(s||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(p){var x=i[p],y,N=()=>(y===void 0&&(y=a(x,p)),y);if(p===o-1){var v=e*(x.coordinate+e*N()/2-c);i[p]=x=Ps(Ps({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate})}else i[p]=x=Ps(Ps({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var j=Bp(e,x.tickCoord,N,l,c);j&&(c=x.tickCoord-e*(N()/2+r),i[p]=Ps(Ps({},x),{},{isShow:!0}))}},u=o-1;u>=0;u--)d(u);return i}function DOe(e,t,a,s,r,i){var o=(s||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=s[l-1],f=a(u,l-1),p=e*(u.coordinate+e*f/2-d);if(o[l-1]=u=Ps(Ps({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var x=Bp(e,u.tickCoord,()=>f,c,d);x&&(d=u.tickCoord-e*(f/2+r),o[l-1]=Ps(Ps({},u),{},{isShow:!0}))}}for(var y=i?l-1:l,N=function(w){var S=o[w],A,k=()=>(A===void 0&&(A=a(S,w)),A);if(w===0){var _=e*(S.coordinate-e*k()/2-c);o[w]=S=Ps(Ps({},S),{},{tickCoord:_<0?S.coordinate-_*e:S.coordinate})}else o[w]=S=Ps(Ps({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var L=Bp(e,S.tickCoord,k,c,d);L&&(c=S.tickCoord+e*(k()/2+r),o[w]=Ps(Ps({},S),{},{isShow:!0}))}},v=0;v<y;v++)N(v);return o}function RD(e,t,a){var{tick:s,ticks:r,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!r||!r.length||!s)return[];if(It(c)||Fj.isSsr){var p;return(p=_Oe(r,It(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],y=l==="top"||l==="bottom"?"width":"height",N=u&&y==="width"?ap(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},v=(S,A)=>{var k=typeof d=="function"?d(S.value,A):S.value;return y==="width"?COe(ap(k,{fontSize:t,letterSpacing:a}),N,f):ap(k,{fontSize:t,letterSpacing:a})[y]},j=r.length>=2?gs(r[1].coordinate-r[0].coordinate):1,w=SOe(i,j,y);return c==="equidistantPreserveStart"?AOe(j,w,v,r,o):c==="equidistantPreserveEnd"?TOe(j,w,v,r,o):(c==="preserveStart"||c==="preserveStartEnd"?x=DOe(j,w,v,r,o,c==="preserveStartEnd"):x=POe(j,w,v,r,o),x.filter(S=>S.isShow))}var OOe=e=>{var{ticks:t,label:a,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=a?a.getBoundingClientRect().width:0,c=r+i,d=o+c+l+(a?s:0);return Math.round(d)}return 0},MOe=["axisLine","width","height","className","hide","ticks","axisType"];function IOe(e,t){if(e==null)return{};var a,s,r=$Oe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $Oe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Bu(){return Bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Bu.apply(null,arguments)}function c7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function za(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?c7(Object(a),!0).forEach(function(s){ROe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ROe(e,t,a){return(t=zOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zOe(e){var t=FOe(e,"string");return typeof t=="symbol"?t:t+""}function FOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ol={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ba.axis};function UOe(e){var{x:t,y:a,width:s,height:r,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=za(za(za({},c),Ur(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);d=za(za({},d),{},{x1:t,y1:a+u*r,x2:t+s,y2:a+u*r})}else{var f=+(i==="left"&&!o||i==="right"&&o);d=za(za({},d),{},{x1:t+f*s,y1:a,x2:t+f*s,y2:a+r})}return h.createElement("line",Bu({},d,{className:Lt("recharts-cartesian-axis-line",$u(l,"className"))}))}function BOe(e,t,a,s,r,i,o,l,c){var d,u,f,p,x,y,N=l?-1:1,v=e.tickSize||o,j=It(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=u=e.coordinate,p=a+ +!l*r,f=p-N*v,y=f-N*c,x=j;break;case"left":f=p=e.coordinate,u=t+ +!l*s,d=u-N*v,x=d-N*c,y=j;break;case"right":f=p=e.coordinate,u=t+ +l*s,d=u+N*v,x=d+N*c,y=j;break;default:d=u=e.coordinate,p=a+ +l*r,f=p+N*v,y=f+N*c,x=j;break}return{line:{x1:d,y1:f,x2:u,y2:p},tick:{x,y}}}function HOe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function qOe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function GOe(e){var{option:t,tickProps:a,value:s}=e,r,i=Lt(a.className,"recharts-cartesian-axis-tick-value");if(h.isValidElement(t))r=h.cloneElement(t,za(za({},a),{},{className:i}));else if(typeof t=="function")r=t(za(za({},a),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Lt(o,t?.className)),r=h.createElement(e1,Bu({},a,{className:o}),s)}return r}var WOe=h.forwardRef((e,t)=>{var{ticks:a=[],tick:s,tickLine:r,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:f,x:p,y:x,width:y,height:N,tickSize:v,tickMargin:j,fontSize:w,letterSpacing:S,getTicksConfig:A,events:k,axisType:_}=e,L=RD(za(za({},A),{},{ticks:a}),w,S),T=HOe(u,f),M=qOe(u,f),R=Ur(A),z=Iu(s),O={};typeof r=="object"&&(O=r);var I=za(za({},R),{},{fill:"none"},O),B=L.map(te=>za({entry:te},BOe(te,p,x,y,N,u,v,f,j))),ee=B.map(te=>{var{entry:W,line:ae}=te;return h.createElement(ps,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},r&&h.createElement("line",Bu({},I,ae,{className:Lt("recharts-cartesian-axis-tick-line",$u(r,"className"))})))}),Q=B.map((te,W)=>{var{entry:ae,tick:Ee}=te,se=za(za(za(za({textAnchor:T,verticalAnchor:M},R),{},{stroke:"none",fill:i},z),Ee),{},{index:W,payload:ae,visibleTicksCount:L.length,tickFormatter:o,padding:c},d);return h.createElement(ps,Bu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},Kx(k,ae,W)),s&&h.createElement(GOe,{option:s,tickProps:se,value:"".concat(typeof o=="function"?o(ae.value,W):ae.value).concat(l||"")}))});return h.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},Q.length>0&&h.createElement(jr,{zIndex:Ba.label},h.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:t},Q)),ee.length>0&&h.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},ee))}),VOe=h.forwardRef((e,t)=>{var{axisLine:a,width:s,height:r,className:i,hide:o,ticks:l,axisType:c}=e,d=IOe(e,MOe),[u,f]=h.useState(""),[p,x]=h.useState(""),y=h.useRef(null);h.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return OOe({ticks:y.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=h.useCallback(v=>{if(v){var j=v.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=j;var w=j[0];if(w){var S=window.getComputedStyle(w),A=S.fontSize,k=S.letterSpacing;(A!==u||k!==p)&&(f(A),x(k))}}},[u,p]);return o||s!=null&&s<=0||r!=null&&r<=0?null:h.createElement(jr,{zIndex:e.zIndex},h.createElement(ps,{className:Lt("recharts-cartesian-axis",i)},h.createElement(UOe,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:Ur(e)}),h.createElement(WOe,{ref:N,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),h.createElement(HPe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},h.createElement(JPe,{label:e.label,labelRef:e.labelRef}),e.children)))}),zD=h.forwardRef((e,t)=>{var a=Wa(e,Ol);return h.createElement(VOe,Bu({},a,{ref:t}))});zD.displayName="CartesianAxis";var YOe=["x1","y1","x2","y2","key"],QOe=["offset"],KOe=["xAxisId","yAxisId"],XOe=["xAxisId","yAxisId"];function d7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ds(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?d7(Object(a),!0).forEach(function(s){ZOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZOe(e,t,a){return(t=JOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JOe(e){var t=e5e(e,"string");return typeof t=="symbol"?t:t+""}function e5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},fu.apply(null,arguments)}function Cw(e,t){if(e==null)return{};var a,s,r=t5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function t5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var n5e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:s,y:r,width:i,height:o,ry:l}=e;return h.createElement("rect",{x:s,y:r,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function BX(e){var{option:t,lineItemProps:a}=e,s;if(h.isValidElement(t))s=h.cloneElement(t,a);else if(typeof t=="function")s=t(a);else{var r,{x1:i,y1:o,x2:l,y2:c,key:d}=a,u=Cw(a,YOe),f=(r=Ur(u))!==null&&r!==void 0?r:{},{offset:p}=f,x=Cw(f,QOe);s=h.createElement("line",fu({},x,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return s}function a5e(e){var{x:t,width:a,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Cw(e,KOe),c=r.map((d,u)=>{var f=Ds(Ds({},l),{},{x1:t,y1:d,x2:t+a,y2:d,key:"line-".concat(u),index:u});return h.createElement(BX,{key:"line-".concat(u),option:s,lineItemProps:f})});return h.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function s5e(e){var{y:t,height:a,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Cw(e,XOe),c=r.map((d,u)=>{var f=Ds(Ds({},l),{},{x1:d,y1:t,x2:d,y2:t+a,key:"line-".concat(u),index:u});return h.createElement(BX,{option:s,lineItemProps:f,key:"line-".concat(u)})});return h.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function r5e(e){var{horizontalFill:t,fillOpacity:a,x:s,y:r,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],y=x?r+o-f:d[p+1]-f;if(y<=0)return null;var N=p%t.length;return h.createElement("rect",{key:"react-".concat(p),y:f,x:s,height:y,width:i,stroke:"none",fill:t[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function i5e(e){var{vertical:t=!0,verticalFill:a,fillOpacity:s,x:r,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!a||!a.length)return null;var d=c.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],y=x?r+o-f:d[p+1]-f;if(y<=0)return null;var N=p%a.length;return h.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:y,height:l,stroke:"none",fill:a[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var o5e=(e,t)=>{var{xAxis:a,width:s,height:r,offset:i}=e;return mQ(RD(Ds(Ds(Ds({},Ol),a),{},{ticks:fQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},l5e=(e,t)=>{var{yAxis:a,width:s,height:r,offset:i}=e;return mQ(RD(Ds(Ds(Ds({},Ol),a),{},{ticks:fQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},c5e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ba.grid};function Pk(e){var t=PP(),a=DP(),s=wQ(),r=Ds(Ds({},Wa(e,c5e)),{},{x:It(e.x)?e.x:s.left,y:It(e.y)?e.y:s.top,width:It(e.width)?e.width:s.width,height:It(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:p,verticalValues:x}=r,y=Us(),N=Rt(M=>aU(M,"xAxis",i,y)),v=Rt(M=>aU(M,"yAxis",o,y));if(!Uo(d)||!Uo(u)||!It(l)||!It(c))return null;var j=r.verticalCoordinatesGenerator||o5e,w=r.horizontalCoordinatesGenerator||l5e,{horizontalPoints:S,verticalPoints:A}=r;if((!S||!S.length)&&typeof w=="function"){var k=p&&p.length,_=w({yAxis:v?Ds(Ds({},v),{},{ticks:k?p:v.ticks}):void 0,width:t??d,height:a??u,offset:s},k?!0:f);ow(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(S=_)}if((!A||!A.length)&&typeof j=="function"){var L=x&&x.length,T=j({xAxis:N?Ds(Ds({},N),{},{ticks:L?x:N.ticks}):void 0,width:t??d,height:a??u,offset:s},L?!0:f);ow(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(A=T)}return h.createElement(jr,{zIndex:r.zIndex},h.createElement("g",{className:"recharts-cartesian-grid"},h.createElement(n5e,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),h.createElement(r5e,fu({},r,{horizontalPoints:S})),h.createElement(i5e,fu({},r,{verticalPoints:A})),h.createElement(a5e,fu({},r,{offset:s,horizontalPoints:S,xAxis:N,yAxis:v})),h.createElement(s5e,fu({},r,{offset:s,verticalPoints:A,xAxis:N,yAxis:v}))))}Pk.displayName="CartesianGrid";var d5e={},HX=Nr({name:"errorBars",initialState:d5e,reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:s,next:r}=t.payload;e[a]&&(e[a]=e[a].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]&&(e[a]=e[a].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:VVe,replaceErrorBar:YVe,removeErrorBar:QVe}=HX.actions,u5e=HX.reducer,m5e=["children"];function f5e(e,t){if(e==null)return{};var a,s,r=h5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function h5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var g5e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},p5e=h.createContext(g5e);function qX(e){var{children:t}=e,a=f5e(e,m5e);return h.createElement(p5e.Provider,{value:a},t)}function FD(e,t){var a,s,r=Rt(d=>ic(d,e)),i=Rt(d=>oc(d,t)),o=(a=r?.allowDataOverflow)!==null&&a!==void 0?a:ds.allowDataOverflow,l=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:us.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function GX(e){var{xAxisId:t,yAxisId:a,clipPathId:s}=e,r=ID(),{needClipX:i,needClipY:o,needClip:l}=FD(t,a);if(!l||!r)return null;var{x:c,y:d,width:u,height:f}=r;return h.createElement("clipPath",{id:"clipPath-".concat(s)},h.createElement("rect",{x:i?c:c-u/2,y:o?d:d-f/2,width:i?u:u*2,height:o?f:f*2}))}var WX=(e,t,a,s)=>hd(e,"xAxis",t,s),VX=(e,t,a,s)=>fd(e,"xAxis",t,s),YX=(e,t,a,s)=>hd(e,"yAxis",a,s),QX=(e,t,a,s)=>fd(e,"yAxis",a,s),x5e=rt([yn,WX,YX,VX,QX],(e,t,a,s,r)=>Td(e,"xAxis")?Ff(t,s,!1):Ff(a,r,!1)),y5e=(e,t,a,s,r)=>r;function b5e(e){return e.type==="line"}var v5e=rt([Vj,y5e],(e,t)=>e.filter(b5e).find(a=>a.id===t)),w5e=rt([yn,WX,YX,VX,QX,v5e,x5e,$P],(e,t,a,s,r,i,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(i==null||t==null||a==null||s==null||r==null||s.length===0||r.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(d,u+1),x!=null)return cMe({layout:e,xAxis:t,yAxis:a,xAxisTicks:s,yAxisTicks:r,dataKey:f,bandSize:o,displayedData:x})}});function N5e(e){var t=Iu(e),a=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,o=Number(r),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=a),(Number.isNaN(l)||l<0)&&(l=s),{r:o,strokeWidth:l}}return{r:a,strokeWidth:s}}var X_={exports:{}},Z_={};var u7;function j5e(){if(u7)return Z_;u7=1;var e=Gf();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var a=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return Z_.useSyncExternalStoreWithSelector=function(c,d,u,f,p){var x=r(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=o(function(){function v(k){if(!j){if(j=!0,w=k,k=f(k),p!==void 0&&y.hasValue){var _=y.value;if(p(_,k))return S=_}return S=k}if(_=S,a(w,k))return _;var L=f(k);return p!==void 0&&p(_,L)?(w=k,_):(w=k,S=L)}var j=!1,w,S,A=u===void 0?null:u;return[function(){return v(d())},A===null?void 0:function(){return v(A())}]},[d,u,f,p]);var N=s(c,x[0],x[1]);return i(function(){y.hasValue=!0,y.value=N},[N]),l(N),N},Z_}var m7;function C5e(){return m7||(m7=1,X_.exports=j5e()),X_.exports}var S5e=C5e();function _5e(e){e()}function A5e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){_5e(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let s=e;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0;const r=t={callback:a,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var f7={notify(){},get:()=>[]};function T5e(e,t){let a,s=f7,r=0,i=!1;function o(N){u();const v=s.subscribe(N);let j=!1;return()=>{j||(j=!0,v(),f())}}function l(){s.notify()}function c(){y.onStateChange&&y.onStateChange()}function d(){return i}function u(){r++,a||(a=e.subscribe(c),s=A5e())}function f(){r--,a&&r===0&&(a(),a=void 0,s.clear(),s=f7)}function p(){i||(i=!0,u())}function x(){i&&(i=!1,f())}const y={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return y}var E5e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k5e=E5e(),L5e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",P5e=L5e(),D5e=()=>k5e||P5e?h.useLayoutEffect:h.useEffect,O5e=D5e();function h7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function M5e(e,t){if(h7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r])||!h7(e[a[r]],t[a[r]]))return!1;return!0}var I5e=Symbol.for("react-redux-context"),$5e=typeof globalThis<"u"?globalThis:{};function R5e(){if(!h.createContext)return{};const e=$5e[I5e]??=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var z5e=R5e();function F5e(e){const{children:t,context:a,serverState:s,store:r}=e,i=h.useMemo(()=>{const c=T5e(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=h.useMemo(()=>r.getState(),[r]);O5e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=a||z5e;return h.createElement(l.Provider,{value:i},t)}var U5e=F5e,B5e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function H5e(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function s1(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of a)if(B5e.has(s)){if(e[s]==null&&t[s]==null)continue;if(!M5e(e[s],t[s]))return!1}else if(!H5e(e[s],t[s]))return!1;return!0}var q5e=["id"],G5e=["type","layout","connectNulls","needClip","shape"],W5e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Hp.apply(null,arguments)}function g7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function No(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?g7(Object(a),!0).forEach(function(s){V5e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function V5e(e,t,a){return(t=Y5e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Y5e(e){var t=Q5e(e,"string");return typeof t=="symbol"?t:t+""}function Q5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UD(e,t){if(e==null)return{};var a,s,r=K5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function K5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var X5e=e=>{var{dataKey:t,name:a,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:lh(a,t),payload:e}]},Z5e=h.memo(e=>{var{dataKey:t,data:a,stroke:s,strokeWidth:r,fill:i,name:o,hide:l,unit:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:lh(o,t),hide:l,type:d,color:s,unit:c,graphicalItemId:u}};return h.createElement(OD,{tooltipEntrySettings:f})}),KX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function J5e(e,t){for(var a=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...a];return s}var eMe=(e,t,a)=>{var s=a.reduce((f,p)=>f+p);if(!s)return KX(t,e);for(var r=Math.floor(e/s),i=e%s,o=t-e,l=[],c=0,d=0;c<a.length;d+=a[c],++c)if(d+a[c]>i){l=[...a.slice(0,c),i-d];break}var u=l.length%2===0?[0,o]:[o];return[...J5e(a,r),...l,...u].map(f=>"".concat(f,"px")).join(", ")};function tMe(e){var{clipPathId:t,points:a,props:s}=e,{dot:r,dataKey:i,needClip:o}=s,{id:l}=s,c=UD(s,q5e),d=Ur(c);return h.createElement(z3e,{points:a,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:d,needClip:o,clipPathId:t})}function nMe(e){var{showLabels:t,children:a,points:s}=e,r=h.useMemo(()=>s?.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return No(No({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return h.createElement(jX,{value:t?r:void 0},a)}function p7(e){var{clipPathId:t,pathRef:a,points:s,strokeDasharray:r,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:d,shape:u}=i,f=UD(i,G5e),p=No(No({},Vs(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:s,type:o,layout:l,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return h.createElement(h.Fragment,null,s?.length>1&&h.createElement(kD,Hp({shapeType:"curve",option:u},p,{pathRef:a})),h.createElement(tMe,{points:s,clipPathId:t,props:i}))}function aMe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function sMe(e){var{clipPathId:t,props:a,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,animateNewValues:p,width:x,height:y,onAnimationEnd:N,onAnimationStart:v}=a,j=r.current,w=a0(o,"recharts-line-"),S=h.useRef(w),[A,k]=h.useState(!1),_=!A,L=h.useCallback(()=>{typeof N=="function"&&N(),k(!1)},[N]),T=h.useCallback(()=>{typeof v=="function"&&v(),k(!0)},[v]),M=aMe(s.current),R=h.useRef(0);S.current!==w&&(R.current=i.current,S.current=w);var z=R.current;return h.createElement(nMe,{points:o,showLabels:_},a.children,h.createElement(n0,{animationId:w,begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:L,onAnimationStart:T,key:w},O=>{var I=oa(z,M+z,O),B=Math.min(I,M),ee;if(c)if(l){var Q="".concat(l).split(/[,\s]+/gim).map(ae=>parseFloat(ae));ee=eMe(B,M,Q)}else ee=KX(M,B);else ee=l==null?void 0:String(l);if(O>0&&M>0&&(r.current=o,i.current=Math.max(i.current,B)),j){var te=j.length/o.length,W=O===1?o:o.map((ae,Ee)=>{var se=Math.floor(Ee*te);if(j[se]){var Y=j[se];return No(No({},ae),{},{x:oa(Y.x,ae.x,O),y:oa(Y.y,ae.y,O)})}return p?No(No({},ae),{},{x:oa(x*2,ae.x,O),y:oa(y/2,ae.y,O)}):No(No({},ae),{},{x:ae.x,y:ae.y})});return r.current=W,h.createElement(p7,{props:a,points:W,clipPathId:t,pathRef:s,strokeDasharray:ee})}return h.createElement(p7,{props:a,points:o,clipPathId:t,pathRef:s,strokeDasharray:ee})}),h.createElement(_D,{label:a.label}))}function rMe(e){var{clipPathId:t,props:a}=e,s=h.useRef(null),r=h.useRef(0),i=h.useRef(null);return h.createElement(sMe,{props:a,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var iMe=(e,t)=>{var a,s;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:Bn(e.payload,t)}};class oMe extends h.Component{render(){var{hide:t,dot:a,points:s,className:r,xAxisId:i,yAxisId:o,top:l,left:c,width:d,height:u,id:f,needClip:p,zIndex:x}=this.props;if(t)return null;var y=Lt("recharts-line",r),N=f,{r:v,strokeWidth:j}=N5e(a),w=LX(a),S=v*2+j,A=p?"url(#clipPath-".concat(w?"":"dots-").concat(N,")"):void 0;return h.createElement(jr,{zIndex:x},h.createElement(ps,{className:y},p&&h.createElement("defs",null,h.createElement(GX,{clipPathId:N,xAxisId:i,yAxisId:o}),!w&&h.createElement("clipPath",{id:"clipPath-dots-".concat(N)},h.createElement("rect",{x:c-S/2,y:l-S/2,width:d+S,height:u+S}))),h.createElement(qX,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:iMe,errorBarOffset:0},h.createElement(rMe,{props:this.props,clipPathId:N}))),h.createElement(rOe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var XX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ba.line,type:"linear"};function lMe(e){var t=Wa(e,XX),{activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:f,legendType:p,xAxisId:x,yAxisId:y,id:N}=t,v=UD(t,W5e),{needClip:j}=FD(x,y),w=ID(),S=ch(),A=Us(),k=Rt(R=>w5e(R,x,y,A,N));if(S!=="horizontal"&&S!=="vertical"||k==null||w==null)return null;var{height:_,width:L,x:T,y:M}=w;return h.createElement(oMe,Hp({},v,{id:N,connectNulls:l,dot:c,activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:d,label:f,legendType:p,xAxisId:x,yAxisId:y,points:k,layout:S,height:_,width:L,left:T,top:M,needClip:j}))}function cMe(e){var{layout:t,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var f=Bn(d,o);if(t==="horizontal"){var p=Bz({axis:a,ticks:r,bandSize:l,entry:d,index:u}),x=da(f)?null:s.scale(f);return{x:p,y:x,value:f,payload:d}}var y=da(f)?null:a.scale(f),N=Bz({axis:s,ticks:i,bandSize:l,entry:d,index:u});return y==null||N==null?null:{x:y,y:N,value:f,payload:d}}).filter(Boolean)}function dMe(e){var t=Wa(e,XX),a=Us();return h.createElement(MD,{id:t.id,type:"line"},s=>h.createElement(h.Fragment,null,h.createElement(PX,{legendPayload:X5e(t)}),h.createElement(Z5e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),h.createElement(OX,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),h.createElement(lMe,Hp({},t,{id:s}))))}var Dk=h.memo(dMe,s1);Dk.displayName="Line";function am(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&a!==void 0?a:IX}function sm(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&a!==void 0?a:IX}var uMe="Invariant failed";function mMe(e,t){throw new Error(uMe)}function Ok(){return Ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ok.apply(null,arguments)}function Sw(e){return h.createElement(kD,Ok({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var fMe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(It(t))return t;var i=It(s)||da(s);return i?t(s,r):(i||mMe(),a)}},hMe=(e,t,a)=>a,gMe=(e,t)=>t,f0=rt([Vj,gMe],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),pMe=rt([f0],e=>e?.maxBarSize),xMe=(e,t,a,s)=>s,yMe=rt([yn,Vj,am,sm,hMe],(e,t,a,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),bMe=(e,t,a)=>{var s=yn(e),r=am(e,t),i=sm(e,t);if(!(r==null||i==null))return s==="horizontal"?Ck(e,"yAxis",i,a):Ck(e,"xAxis",r,a)},vMe=(e,t)=>{var a=yn(e),s=am(e,t),r=sm(e,t);if(!(s==null||r==null))return a==="horizontal"?nU(e,"xAxis",s):nU(e,"yAxis",r)},wMe=rt([yMe,qEe,vMe],iOe),NMe=(e,t,a)=>{var s,r,i=f0(e,t);if(i!=null){var o=am(e,t),l=sm(e,t);if(!(o==null||l==null)){var c=yn(e),d=sK(e),{maxBarSize:u}=i,f=da(u)?d:u,p,x;return c==="horizontal"?(p=hd(e,"xAxis",o,a),x=fd(e,"xAxis",o,a)):(p=hd(e,"yAxis",l,a),x=fd(e,"yAxis",l,a)),(s=(r=Ff(p,x,!0))!==null&&r!==void 0?r:f)!==null&&s!==void 0?s:0}}},ZX=(e,t,a)=>{var s=yn(e),r=am(e,t),i=sm(e,t);if(!(r==null||i==null)){var o,l;return s==="horizontal"?(o=hd(e,"xAxis",r,a),l=fd(e,"xAxis",r,a)):(o=hd(e,"yAxis",i,a),l=fd(e,"yAxis",i,a)),Ff(o,l)}},jMe=rt([wMe,sK,HEe,rK,NMe,ZX,pMe],uOe),CMe=(e,t,a)=>{var s=am(e,t);if(s!=null)return hd(e,"xAxis",s,a)},SMe=(e,t,a)=>{var s=sm(e,t);if(s!=null)return hd(e,"yAxis",s,a)},_Me=(e,t,a)=>{var s=am(e,t);if(s!=null)return fd(e,"xAxis",s,a)},AMe=(e,t,a)=>{var s=sm(e,t);if(s!=null)return fd(e,"yAxis",s,a)},TMe=rt([jMe,f0],(e,t)=>{if(!(e==null||t==null)){var a=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),EMe=rt([bMe,f0],mOe),kMe=rt([is,kP,CMe,SMe,_Me,AMe,TMe,yn,LEe,ZX,EMe,f0,xMe],(e,t,a,s,r,i,o,l,c,d,u,f,p)=>{var{chartData:x,dataStartIndex:y,dataEndIndex:N}=c;if(!(f==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||a==null||s==null||r==null||i==null||d==null)){var{data:v}=f,j;if(v!=null&&v.length>0?j=v:j=x?.slice(y,N+1),j!=null)return rIe({layout:l,barSettings:f,pos:o,parentViewBox:t,bandSize:d,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:j,offset:e,cells:p,dataStartIndex:y})}}),LMe=["index"];function Mk(){return Mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Mk.apply(null,arguments)}function PMe(e,t){if(e==null)return{};var a,s,r=DMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function DMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var JX=h.createContext(void 0),OMe=e=>{var t=h.useContext(JX);if(t!=null)return t.stackId;if(e!=null)return J_e(e)},MMe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),IMe=e=>{var t=h.useContext(JX);if(t!=null){var{stackId:a}=t;return"url(#".concat(MMe(a,e),")")}},$Me=e=>{var{index:t}=e,a=PMe(e,LMe),s=IMe(t);return h.createElement(ps,Mk({className:"recharts-bar-stack-layer",clipPath:s},a))},RMe=["onMouseEnter","onMouseLeave","onClick"],zMe=["value","background","tooltipPosition"],FMe=["id"],UMe=["onMouseEnter","onClick","onMouseLeave"];function Ql(){return Ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ql.apply(null,arguments)}function x7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Hs(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?x7(Object(a),!0).forEach(function(s){BMe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function BMe(e,t,a){return(t=HMe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HMe(e){var t=qMe(e,"string");return typeof t=="symbol"?t:t+""}function qMe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _w(e,t){if(e==null)return{};var a,s,r=GMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function GMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var WMe=e=>{var{dataKey:t,name:a,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:lh(a,t),payload:e}]},VMe=h.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:s,fill:r,name:i,hide:o,unit:l,tooltipType:c,id:d}=e,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:lh(i,t),hide:o,type:c,color:r,unit:l,graphicalItemId:d}};return h.createElement(OD,{tooltipEntrySettings:u})});function YMe(e){var t=Rt(gd),{data:a,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=_w(i,RMe),u=LD(o,s,i.id),f=PD(l),p=DD(c,s,i.id);if(!r||a==null)return null;var x=Iu(r);return h.createElement(jr,{zIndex:fOe(r,Ba.barBackground)},a.map((y,N)=>{var{value:v,background:j,tooltipPosition:w}=y,S=_w(y,zMe);if(!j)return null;var A=u(y,N),k=f(y,N),_=p(y,N),L=Hs(Hs(Hs(Hs(Hs({option:r,isActive:String(N)===t},S),{},{fill:"#eee"},j),x),Kx(d,y,N)),{},{onMouseEnter:A,onMouseLeave:k,onClick:_,dataKey:s,index:N,className:"recharts-bar-background-rectangle"});return h.createElement(Sw,Ql({key:"background-bar-".concat(N)},L))}))}function QMe(e){var{showLabels:t,children:a,rects:s}=e,r=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Hs(Hs({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return h.createElement(jX,{value:t?r:void 0},a)}function KMe(e){var{shape:t,activeBar:a,baseProps:s,entry:r,index:i,dataKey:o}=e,l=Rt(gd),c=Rt(bD),d=a&&String(i)===l&&(c==null||o===c),u=d?a:t;return d?h.createElement(jr,{zIndex:Ba.activeBar},h.createElement(Sw,Ql({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))):h.createElement(Sw,Ql({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))}function XMe(e){var{shape:t,baseProps:a,entry:s,index:r,dataKey:i}=e;return h.createElement(Sw,Ql({},a,{name:String(a.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function ZMe(e){var t,{data:a,props:s}=e,r=(t=Ur(s))!==null&&t!==void 0?t:{},{id:i}=r,o=_w(r,FMe),{shape:l,dataKey:c,activeBar:d}=s,{onMouseEnter:u,onClick:f,onMouseLeave:p}=s,x=_w(s,UMe),y=LD(u,c,i),N=PD(p),v=DD(f,c,i);return a?h.createElement(h.Fragment,null,a.map((j,w)=>h.createElement($Me,Ql({index:w,key:"rectangle-".concat(j?.x,"-").concat(j?.y,"-").concat(j?.value,"-").concat(w),className:"recharts-bar-rectangle"},Kx(x,j,w),{onMouseEnter:y(j,w),onMouseLeave:N(j,w),onClick:v(j,w)}),d?h.createElement(KMe,{shape:l,activeBar:d,baseProps:o,entry:j,index:w,dataKey:c}):h.createElement(XMe,{shape:l,baseProps:o,entry:j,index:w,dataKey:c})))):null}function JMe(e){var{props:t,previousRectanglesRef:a}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,f=a.current,p=a0(t,"recharts-bar-"),[x,y]=h.useState(!1),N=!x,v=h.useCallback(()=>{typeof d=="function"&&d(),y(!1)},[d]),j=h.useCallback(()=>{typeof u=="function"&&u(),y(!0)},[u]);return h.createElement(QMe,{showLabels:N,rects:s},h.createElement(n0,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:v,onAnimationStart:j,key:p},w=>{var S=w===1?s:s?.map((A,k)=>{var _=f&&f[k];if(_)return Hs(Hs({},A),{},{x:oa(_.x,A.x,w),y:oa(_.y,A.y,w),width:oa(_.width,A.width,w),height:oa(_.height,A.height,w)});if(r==="horizontal"){var L=oa(0,A.height,w),T=oa(A.stackedBarStart,A.y,w);return Hs(Hs({},A),{},{y:T,height:L})}var M=oa(0,A.width,w),R=oa(A.stackedBarStart,A.x,w);return Hs(Hs({},A),{},{width:M,x:R})});return w>0&&(a.current=S??null),S==null?null:h.createElement(ps,null,h.createElement(ZMe,{props:t,data:S}))}),h.createElement(_D,{label:t.label}),t.children)}function eIe(e){var t=h.useRef(null);return h.createElement(JMe,{previousRectanglesRef:t,props:e})}var eZ=0,tIe=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Bn(e,t)}};class nIe extends h.PureComponent{render(){var{hide:t,data:a,dataKey:s,className:r,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||a==null)return null;var u=Lt("recharts-bar",r),f=d;return h.createElement(ps,{className:u,id:d},l&&h.createElement("defs",null,h.createElement(GX,{clipPathId:f,xAxisId:i,yAxisId:o})),h.createElement(ps,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},h.createElement(YMe,{data:a,dataKey:s,background:c,allOtherBarProps:this.props}),h.createElement(eIe,this.props)))}}var aIe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:eZ,xAxisId:0,yAxisId:0,zIndex:Ba.bar};function sIe(e){var{xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:f}=FD(t,a),p=ch(),x=Us(),y=ED(e.children,Jj),N=Rt(w=>kMe(w,e.id,x,y));if(p!=="vertical"&&p!=="horizontal")return null;var v,j=N?.[0];return j==null||j.height==null||j.width==null?v=0:v=p==="vertical"?j.height/2:j.width/2,h.createElement(qX,{xAxisId:t,yAxisId:a,data:N,dataPointFormatter:tIe,errorBarOffset:v},h.createElement(nIe,Ql({},e,{layout:p,needClip:f,data:N,xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function rIe(e){var{layout:t,barSettings:{dataKey:a,minPointSize:s},pos:r,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:f,offset:p,cells:x,parentViewBox:y,dataStartIndex:N}=e,v=t==="horizontal"?l:o,j=u?v.scale.domain():null,w=eAe({numericAxis:v}),S=v.scale(w);return f.map((A,k)=>{var _,L,T,M,R,z;if(u){var O=u[k+N];if(O==null)return null;_=Y_e(O,j)}else _=Bn(A,a),Array.isArray(_)||(_=[w,_]);var I=fMe(s,eZ)(_[1],k);if(t==="horizontal"){var B,[ee,Q]=[l.scale(_[0]),l.scale(_[1])];L=Hz({axis:o,ticks:c,bandSize:i,offset:r.offset,entry:A,index:k}),T=(B=Q??ee)!==null&&B!==void 0?B:void 0,M=r.size;var te=ee-Q;if(R=Ki(te)?0:te,z={x:L,y:p.top,width:M,height:p.height},Math.abs(I)>0&&Math.abs(R)<Math.abs(I)){var W=gs(R||I)*(Math.abs(I)-Math.abs(R));T-=W,R+=W}}else{var[ae,Ee]=[o.scale(_[0]),o.scale(_[1])];if(L=ae,T=Hz({axis:l,ticks:d,bandSize:i,offset:r.offset,entry:A,index:k}),M=Ee-ae,R=r.size,z={x:p.left,y:T,width:p.width,height:R},Math.abs(I)>0&&Math.abs(M)<Math.abs(I)){var se=gs(M||I)*(Math.abs(I)-Math.abs(M));M+=se}}if(L==null||T==null||M==null||R==null)return null;var Y=Hs(Hs({},A),{},{stackedBarStart:S,x:L,y:T,width:M,height:R,value:u?_:_[1],payload:A,background:z,tooltipPosition:{x:L+M/2,y:T+R/2},parentViewBox:y},x&&x[k]&&x[k].props);return Y}).filter(Boolean)}function iIe(e){var t=Wa(e,aIe),a=OMe(t.stackId),s=Us();return h.createElement(MD,{id:t.id,type:"bar"},r=>h.createElement(h.Fragment,null,h.createElement(PX,{legendPayload:WMe(t)}),h.createElement(VMe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),h.createElement(OX,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),h.createElement(jr,{zIndex:t.zIndex},h.createElement(sIe,Ql({},t,{id:r})))))}var Ik=h.memo(iIe,s1);Ik.displayName="Bar";var oIe=["domain","range"],lIe=["domain","range"];function y7(e,t){if(e==null)return{};var a,s,r=cIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function cIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function b7(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function tZ(e,t){if(e===t)return!0;var{domain:a,range:s}=e,r=y7(e,oIe),{domain:i,range:o}=t,l=y7(t,lIe);return!b7(a,i)||!b7(s,o)?!1:s1(r,l)}var dIe=["dangerouslySetInnerHTML","ticks","scale"],uIe=["id","scale"];function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},$k.apply(null,arguments)}function v7(e,t){if(e==null)return{};var a,s,r=mIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function mIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function fIe(e){var t=Kn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(q3e(e)):a.current!==e&&t(G3e({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(W3e(a.current)),a.current=null)},[t]),null}var hIe=e=>{var{xAxisId:t,className:a}=e,s=Rt(kP),r=Us(),i="xAxis",o=Rt(j=>$K(j,i,t,r)),l=Rt(j=>DK(j,t)),c=Rt(j=>Uke(j,t)),d=Rt(j=>hK(j,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:f,scale:p}=e,x=v7(e,dIe),{id:y,scale:N}=d,v=v7(d,uIe);return h.createElement(zD,$k({},x,v,{x:c.x,y:c.y,width:l.width,height:l.height,className:Lt("recharts-".concat(i," ").concat(i),a),viewBox:s,ticks:o,axisType:i}))},gIe={allowDataOverflow:ds.allowDataOverflow,allowDecimals:ds.allowDecimals,allowDuplicatedCategory:ds.allowDuplicatedCategory,angle:ds.angle,axisLine:Ol.axisLine,height:ds.height,hide:!1,includeHidden:ds.includeHidden,interval:ds.interval,minTickGap:ds.minTickGap,mirror:ds.mirror,orientation:ds.orientation,padding:ds.padding,reversed:ds.reversed,scale:ds.scale,tick:ds.tick,tickCount:ds.tickCount,tickLine:Ol.tickLine,tickSize:Ol.tickSize,type:ds.type,xAxisId:0},pIe=e=>{var t=Wa(e,gIe);return h.createElement(h.Fragment,null,h.createElement(fIe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),h.createElement(hIe,t))},Rk=h.memo(pIe,tZ);Rk.displayName="XAxis";var xIe=["dangerouslySetInnerHTML","ticks","scale"],yIe=["id","scale"];function zk(){return zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},zk.apply(null,arguments)}function w7(e,t){if(e==null)return{};var a,s,r=bIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function vIe(e){var t=Kn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(V3e(e)):a.current!==e&&t(Y3e({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(Q3e(a.current)),a.current=null)},[t]),null}var wIe=e=>{var{yAxisId:t,className:a,width:s,label:r}=e,i=h.useRef(null),o=h.useRef(null),l=Rt(kP),c=Us(),d=Kn(),u="yAxis",f=Rt(_=>OK(_,t)),p=Rt(_=>Hke(_,t)),x=Rt(_=>$K(_,u,t,c)),y=Rt(_=>gK(_,t));if(h.useLayoutEffect(()=>{if(!(s!=="auto"||!f||SD(r)||h.isValidElement(r)||y==null)){var _=i.current;if(_){var L=_.getCalculatedWidth();Math.round(f.width)!==Math.round(L)&&d(K3e({id:t,width:L}))}}},[x,f,d,r,t,s,y]),f==null||p==null||y==null)return null;var{dangerouslySetInnerHTML:N,ticks:v,scale:j}=e,w=w7(e,xIe),{id:S,scale:A}=y,k=w7(y,yIe);return h.createElement(zD,zk({},w,k,{ref:i,labelRef:o,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:f.width,height:f.height,className:Lt("recharts-".concat(u," ").concat(u),a),viewBox:l,ticks:x,axisType:u}))},NIe={allowDataOverflow:us.allowDataOverflow,allowDecimals:us.allowDecimals,allowDuplicatedCategory:us.allowDuplicatedCategory,angle:us.angle,axisLine:Ol.axisLine,hide:!1,includeHidden:us.includeHidden,interval:us.interval,minTickGap:us.minTickGap,mirror:us.mirror,orientation:us.orientation,padding:us.padding,reversed:us.reversed,scale:us.scale,tick:us.tick,tickCount:us.tickCount,tickLine:Ol.tickLine,tickSize:Ol.tickSize,type:us.type,width:us.width,yAxisId:0},jIe=e=>{var t=Wa(e,NIe);return h.createElement(h.Fragment,null,h.createElement(vIe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),h.createElement(wIe,t))},Fk=h.memo(jIe,tZ);Fk.displayName="YAxis";var CIe=(e,t)=>t,BD=rt([CIe,yn,mK,os,JK,lc,r4e,is],m4e),HD=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/s)}},nZ=bi("mouseClick"),aZ=Jx();aZ.startListening({actionCreator:nZ,effect:(e,t)=>{var a=e.payload,s=BD(t.getState(),HD(a));s?.activeIndex!=null&&t.dispatch(aLe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var Uk=bi("mouseMove"),sZ=Jx(),ub=null;sZ.startListening({actionCreator:Uk,effect:(e,t)=>{var a=e.payload;ub!==null&&cancelAnimationFrame(ub);var s=HD(a);ub=requestAnimationFrame(()=>{var r=t.getState(),i=fD(r,r.tooltip.settings.shared);if(i==="axis"){var o=BD(r,s);o?.activeIndex!=null?t.dispatch(GK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(qK())}ub=null})}});function SIe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var N7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},rZ=Nr({name:"rootProps",initialState:N7,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(a=t.payload.barGap)!==null&&a!==void 0?a:N7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),_Ie=rZ.reducer,{updateOptions:AIe}=rZ.actions,iZ=Nr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:TIe}=iZ.actions,EIe=iZ.reducer,oZ=bi("keyDown"),lZ=bi("focus"),qD=Jx();qD.startListening({actionCreator:oZ,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=hD(r,xh(a),l0(a),u0(a)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=lc(a);if(i==="Enter"){var d=bw(a,"axis","hover",String(r.index));t.dispatch(_k({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var u=Vke(a),f=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=l+p*f;if(!(c==null||x>=c.length||x<0)){var y=bw(a,"axis","hover",String(x));t.dispatch(_k({active:!0,activeIndex:x.toString(),activeCoordinate:y}))}}}}}});qD.startListening({actionCreator:lZ,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip;if(!r.active&&r.index==null){var i="0",o=bw(a,"axis","hover",String(i));t.dispatch(_k({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ii=bi("externalEvent"),cZ=Jx(),J_=new Map;cZ.startListening({actionCreator:ii,effect:(e,t)=>{var{handler:a,reactEvent:s}=e.payload;if(a!=null){s.persist();var r=s.type,i=J_.get(r);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:HLe(l),activeDataKey:bD(l),activeIndex:gd(l),activeLabel:nX(l),activeTooltipIndex:gd(l),isTooltipActive:qLe(l)};a(c,s)}finally{J_.delete(r)}});J_.set(r,o)}}});var kIe=rt([gh],e=>e.tooltipItemPayloads),LIe=rt([kIe,d0,(e,t)=>t,(e,t,a)=>a],(e,t,a,s)=>{var r=e.find(l=>l.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var o=t(i,a);return o}}}),dZ=bi("touchMove"),uZ=Jx();uZ.startListening({actionCreator:dZ,effect:(e,t)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var s=t.getState(),r=fD(s,s.tooltip.settings.shared);if(r==="axis"){var i=a.touches[0];if(i==null)return;var o=BD(s,HD({clientX:i.clientX,clientY:i.clientY,currentTarget:a.currentTarget}));o?.activeIndex!=null&&t.dispatch(GK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var l,c=a.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(gQ),f=(l=d.getAttribute(pQ))!==null&&l!==void 0?l:void 0,p=ph(s).find(N=>N.id===f);if(u==null||p==null||f==null)return;var{dataKey:x}=p,y=LIe(s,u,f);t.dispatch(HK({activeDataKey:x,activeIndex:u,activeCoordinate:y,activeGraphicalItemId:f}))}}}});var PIe=$Y({brush:hOe,cartesianAxis:X3e,chartData:H4e,errorBars:u5e,graphicalItems:a3e,layout:B_e,legend:KAe,options:R4e,polarAxis:vDe,polarOptions:EIe,referenceElements:wOe,rootProps:_Ie,tooltip:sLe,zIndex:_4e}),DIe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return f_e({reducer:PIe,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([aZ.middleware,sZ.middleware,qD.middleware,cZ.middleware,uZ.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(ZY({type:"raf"}))},devTools:{serialize:{replacer:SIe},name:"recharts-".concat(a)}})};function mZ(e){var{preloadedState:t,children:a,reduxStoreName:s}=e,r=Us(),i=h.useRef(null);if(r)return a;i.current==null&&(i.current=DIe(t,s));var o=wP;return h.createElement(U5e,{context:o,store:i.current},a)}function OIe(e){var{layout:t,margin:a}=e,s=Kn(),r=Us();return h.useEffect(()=>{r||(s(z_e(t)),s(R_e(a)))},[s,r,t,a]),null}var fZ=h.memo(OIe,s1);function hZ(e){var t=Kn();return h.useEffect(()=>{t(AIe(e))},[t,e]),null}function j7(e){var{zIndex:t,isPanorama:a}=e,s=h.useRef(null),r=Kn();return h.useLayoutEffect(()=>(s.current&&r(C4e({zIndex:t,element:s.current,isPanorama:a})),()=>{r(S4e({zIndex:t,isPanorama:a}))}),[r,t,a]),h.createElement("g",{tabIndex:-1,ref:s})}function C7(e){var{children:t,isPanorama:a}=e,s=Rt(h4e);if(!s||s.length===0)return t;var r=s.filter(o=>o<0),i=s.filter(o=>o>0);return h.createElement(h.Fragment,null,r.map(o=>h.createElement(j7,{key:o,zIndex:o,isPanorama:a})),t,i.map(o=>h.createElement(j7,{key:o,zIndex:o,isPanorama:a})))}var MIe=["children"];function IIe(e,t){if(e==null)return{};var a,s,r=$Ie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $Ie(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Aw.apply(null,arguments)}var RIe={width:"100%",height:"100%",display:"block"},zIe=h.forwardRef((e,t)=>{var a=PP(),s=DP(),r=DQ();if(!Uo(a)||!Uo(s))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=r?0:void 0,typeof o.role=="string"?u=o.role:u=r?"application":void 0),h.createElement(hP,Aw({},o,{title:l,desc:c,role:u,tabIndex:d,width:a,height:s,style:RIe,ref:t}),i)}),FIe=e=>{var{children:t}=e,a=Rt(Oj);if(!a)return null;var{width:s,height:r,y:i,x:o}=a;return h.createElement(hP,{width:s,height:r,x:o,y:i},t)},S7=h.forwardRef((e,t)=>{var{children:a}=e,s=IIe(e,MIe),r=Us();return r?h.createElement(FIe,null,h.createElement(C7,{isPanorama:!0},a)):h.createElement(zIe,Aw({ref:t},s),h.createElement(C7,{isPanorama:!1},a))});function UIe(){var e=Kn(),[t,a]=h.useState(null),s=Rt(iAe);return h.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;ha(i)&&i!==s&&e(U_e(i))}},[t,e,s]),a}function _7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function BIe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?_7(Object(a),!0).forEach(function(s){HIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function HIe(e,t,a){return(t=qIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qIe(e){var t=GIe(e,"string");return typeof t=="symbol"?t:t+""}function GIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hu(){return Hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Hu.apply(null,arguments)}var WIe=()=>(Z4e(),null);function Tw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var VIe=h.forwardRef((e,t)=>{var a,s,r=h.useRef(null),[i,o]=h.useState({containerWidth:Tw((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:Tw((s=e.style)===null||s===void 0?void 0:s.height)}),l=h.useCallback((d,u)=>{o(f=>{var p=Math.round(d),x=Math.round(u);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),c=h.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=d.getBoundingClientRect();l(u,f);var p=y=>{var{width:N,height:v}=y[0].contentRect;l(N,v)},x=new ResizeObserver(p);x.observe(d),r.current=x}},[t,l]);return h.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[l]),h.createElement(h.Fragment,null,h.createElement(Ij,{width:i.containerWidth,height:i.containerHeight}),h.createElement("div",Hu({ref:c},e)))}),YIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e,[r,i]=h.useState({containerWidth:Tw(a),containerHeight:Tw(s)}),o=h.useCallback((c,d)=>{i(u=>{var f=Math.round(c),p=Math.round(d);return u.containerWidth===f&&u.containerHeight===p?u:{containerWidth:f,containerHeight:p}})},[]),l=h.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();o(d,u)}},[t,o]);return h.createElement(h.Fragment,null,h.createElement(Ij,{width:r.containerWidth,height:r.containerHeight}),h.createElement("div",Hu({ref:l},e)))}),QIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return h.createElement(h.Fragment,null,h.createElement(Ij,{width:a,height:s}),h.createElement("div",Hu({ref:t},e)))}),KIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return Wl(a)||Wl(s)?h.createElement(YIe,Hu({},e,{ref:t})):h.createElement(QIe,Hu({},e,{ref:t}))});function XIe(e){return e===!0?VIe:KIe}var ZIe=h.forwardRef((e,t)=>{var{children:a,className:s,height:r,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:p,onTouchEnd:x,onTouchMove:y,onTouchStart:N,style:v,width:j,responsive:w,dispatchTouchEvents:S=!0}=e,A=h.useRef(null),k=Kn(),[_,L]=h.useState(null),[T,M]=h.useState(null),R=UIe(),z=LP(),O=z?.width>0?z.width:j,I=z?.height>0?z.height:r,B=h.useCallback(ve=>{R(ve),typeof t=="function"&&t(ve),L(ve),M(ve),ve!=null&&(A.current=ve)},[R,t,L,M]),ee=h.useCallback(ve=>{k(nZ(ve)),k(ii({handler:i,reactEvent:ve}))},[k,i]),Q=h.useCallback(ve=>{k(Uk(ve)),k(ii({handler:d,reactEvent:ve}))},[k,d]),te=h.useCallback(ve=>{k(qK()),k(ii({handler:u,reactEvent:ve}))},[k,u]),W=h.useCallback(ve=>{k(Uk(ve)),k(ii({handler:f,reactEvent:ve}))},[k,f]),ae=h.useCallback(()=>{k(lZ())},[k]),Ee=h.useCallback(ve=>{k(oZ(ve.key))},[k]),se=h.useCallback(ve=>{k(ii({handler:o,reactEvent:ve}))},[k,o]),Y=h.useCallback(ve=>{k(ii({handler:l,reactEvent:ve}))},[k,l]),pe=h.useCallback(ve=>{k(ii({handler:c,reactEvent:ve}))},[k,c]),Se=h.useCallback(ve=>{k(ii({handler:p,reactEvent:ve}))},[k,p]),me=h.useCallback(ve=>{k(ii({handler:N,reactEvent:ve}))},[k,N]),ye=h.useCallback(ve=>{S&&k(dZ(ve)),k(ii({handler:y,reactEvent:ve}))},[k,S,y]),re=h.useCallback(ve=>{k(ii({handler:x,reactEvent:ve}))},[k,x]),De=XIe(w);return h.createElement(cX.Provider,{value:_},h.createElement(pY.Provider,{value:T},h.createElement(De,{width:O??v?.width,height:I??v?.height,className:Lt("recharts-wrapper",s),style:BIe({position:"relative",cursor:"default",width:O,height:I},v),onClick:ee,onContextMenu:se,onDoubleClick:Y,onFocus:ae,onKeyDown:Ee,onMouseDown:pe,onMouseEnter:Q,onMouseLeave:te,onMouseMove:W,onMouseUp:Se,onTouchEnd:re,onTouchMove:ye,onTouchStart:me,ref:B},h.createElement(WIe,null),a)))}),JIe=["width","height","responsive","children","className","style","compact","title","desc"];function e$e(e,t){if(e==null)return{};var a,s,r=t$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function t$e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var gZ=h.forwardRef((e,t)=>{var{width:a,height:s,responsive:r,children:i,className:o,style:l,compact:c,title:d,desc:u}=e,f=e$e(e,JIe),p=Ur(f);return c?h.createElement(h.Fragment,null,h.createElement(Ij,{width:a,height:s}),h.createElement(S7,{otherAttributes:p,title:d,desc:u},i)):h.createElement(ZIe,{className:o,style:l,width:a,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},h.createElement(S7,{otherAttributes:p,title:d,desc:u,ref:t},h.createElement(jOe,null,i)))});function Bk(){return Bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Bk.apply(null,arguments)}var n$e={top:5,right:5,bottom:5,left:5},a$e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:n$e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},pZ=h.forwardRef(function(t,a){var s,r=Wa(t.categoricalChartProps,a$e),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return h.createElement(mZ,{preloadedState:{options:u},reduxStoreName:(s=d.id)!==null&&s!==void 0?s:i},h.createElement(RX,{chartData:d.data}),h.createElement(fZ,{layout:r.layout,margin:r.margin}),h.createElement(hZ,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(gZ,Bk({},r,{ref:a})))}),s$e=["axis"],r$e=h.forwardRef((e,t)=>h.createElement(pZ,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:s$e,tooltipPayloadSearcher:CD,categoricalChartProps:e,ref:t})),i$e=["axis","item"],o$e=h.forwardRef((e,t)=>h.createElement(pZ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:i$e,tooltipPayloadSearcher:CD,categoricalChartProps:e,ref:t}));function l$e(e){var t=Kn();return h.useEffect(()=>{t(TIe(e))},[t,e]),null}var c$e=["layout"];function Hk(){return Hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Hk.apply(null,arguments)}function d$e(e,t){if(e==null)return{};var a,s,r=u$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function u$e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var m$e={top:5,right:5,bottom:5,left:5},xZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:m$e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},f$e=h.forwardRef(function(t,a){var s,r=Wa(t.categoricalChartProps,xZ),{layout:i}=r,o=d$e(r,c$e),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u}=t,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u,eventEmitter:void 0};return h.createElement(mZ,{preloadedState:{options:f},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:l},h.createElement(RX,{chartData:r.data}),h.createElement(fZ,{layout:i,margin:r.margin}),h.createElement(hZ,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(l$e,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),h.createElement(gZ,Hk({},o,{ref:a})))});function A7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function T7(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?A7(Object(a),!0).forEach(function(s){h$e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function h$e(e,t,a){return(t=g$e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g$e(e){var t=p$e(e,"string");return typeof t=="symbol"?t:t+""}function p$e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x$e=["item"],y$e=T7(T7({},xZ),{},{layout:"centric",startAngle:0,endAngle:360}),b$e=h.forwardRef((e,t)=>{var a=Wa(e,y$e);return h.createElement(f$e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:x$e,tooltipPayloadSearcher:CD,categoricalChartProps:a,ref:t})});const E7={user_id:"",start_date:"",end_date:"",target_amount:"",period_type:"CUSTOM",period_year:new Date().getFullYear(),period_number:1},v$e=[{value:"MONTHLY",label:"Monthly"},{value:"QUARTERLY",label:"Quarterly"},{value:"SEMIANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"},{value:"CUSTOM",label:"Custom"}],k7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function w$e({name:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",required:o=!1,isSubmitted:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=t.find(j=>String(j.id)===String(a)),y=x?r(x):"",N=o&&l&&!a,v=h.useMemo(()=>{const j=u.toLowerCase();return j?t.filter(w=>r(w).toLowerCase().includes(j)):t},[t,u,r]);return h.useEffect(()=>{const j=w=>{p.current&&!p.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),n.jsxs("div",{ref:p,className:"relative flex justify-center w-full",children:[n.jsx("input",{value:c?u:y,placeholder:i,onFocus:()=>d(!0),onChange:j=>{f(j.target.value),d(!0)},className:`w-full border rounded-lg p-1 text-gray-700 focus:outline-none focus:ring-1
          ${N?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`}),c&&n.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:v.length?v.map(j=>n.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(j.id)}}),d(!1),f("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(j)},j.id)):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function r1({currentUserRole:e,currentUserId:t}){const{user:a,mutate:s}=Gt(),r=a?.company?.currency||"",i=r==="$"?pue:yue;h.useEffect(()=>{s&&s()},[s]),h.useEffect(()=>{a?.company&&console.log("Dashboard detected Company Settings:",a.company)},[a]),h.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(!1),[p,x]=h.useState(""),[y,N]=h.useState(1),[v,j]=h.useState(10),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,L]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(E7),[O,I]=h.useState(null),[B,ee]=h.useState(null),[Q,te]=h.useState(!1),[W,ae]=h.useState([]),[Ee,se]=h.useState(!1),[Y,pe]=h.useState("annual"),[Se,me]=h.useState(1),[ye,re]=h.useState("overview"),[De,ve]=h.useState(null),[ke,Ce]=h.useState(!1),[de,Re]=h.useState(null),[Oe,Ge]=h.useState(!1),[et,mt]=h.useState(null),[Fe,ot]=h.useState(null),[We,Ke]=h.useState(new Date().getFullYear()),[Ze,Me]=h.useState(""),[je,ce]=h.useState(1),oe=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER"].includes(e?.toUpperCase()),[e]),U=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER"].includes(e?.toUpperCase()),[e]),V=h.useCallback(async()=>{f(!0);try{const K=await ie.get("/targets/admin/fetch-all");l(K.data)}catch(K){console.error(K),q.error("Failed to load targets.")}finally{f(!1)}},[]),be=h.useCallback(async()=>{try{if(oe){const K=await ie.get("/targets/admin/get-users");d(K.data)}}catch(K){console.error(K)}},[oe]),ze=h.useCallback(async()=>{try{const K=await ie.get("/targets/fiscal-settings");ot(K.data)}catch(K){console.error("Failed to fetch fiscal settings:",K)}},[]),le=h.useCallback(async()=>{Ce(!0);try{const K=new URLSearchParams;Ze&&K.append("period_type",Ze),We&&K.append("period_year",We),je&&K.append("period_number",je);const ne=await ie.get(`/targets/leaderboard?${K.toString()}`);ve(ne.data)}catch(K){console.error(K),q.error("Failed to load leaderboard.")}finally{Ce(!1)}},[Ze,We,je]),X=h.useCallback(async()=>{try{const K=new URLSearchParams;Ze&&K.append("period_type",Ze),We&&K.append("period_year",We),je&&K.append("period_number",je);const ne=await ie.get(`/targets/team-summary?${K.toString()}`);mt(ne.data)}catch(K){console.error(K)}},[Ze,We,je]),Ae=h.useCallback(async K=>{Ge(!0);try{const ne=await ie.get(`/targets/history/${K}`);Re(ne.data)}catch(ne){console.error(ne),q.error("Failed to load user history.")}finally{Ge(!1)}},[]);h.useEffect(()=>{V(),be(),ze()},[V,be,ze]),h.useEffect(()=>{ye==="leaderboard"&&(le(),X())},[ye,le,X]);const Pe=h.useMemo(()=>{const K=o.reduce((Ie,Je)=>Ie+(Number(Je.target_amount)||0),0),ne=o.reduce((Ie,Je)=>Ie+(Number(Je.achieved_amount)||0),0),H=K>0?(ne/K*100).toFixed(1):0,xe=Math.max(0,K-ne);return{totalTarget:K,totalAchieved:ne,achievement:H,remaining:xe,totalCount:o.length}},[o]),Qe=h.useCallback(()=>(ne=>Y==="annual"?ne:ne.filter(H=>{const xe=new Date(H.start_date),Ie=new Date(H.end_date),Je=xe.getMonth(),ct=Ie.getMonth();let bt=!1;if(Y==="semiannual")Se===1?bt=Je<=5&&ct>=0:bt=Je<=11&&ct>=6;else if(Y==="trimester"){const Et=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][Se-1];bt=Je<=Et.end&&ct>=Et.start}else if(Y==="quarterly"){const Et=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][Se-1];bt=Je<=Et.end&&ct>=Et.start}return bt}))(o),[o,Y,Se]),nt=h.useMemo(()=>{const K=Qe(),ne={};K.forEach(Je=>{const ct=Je.user_id,bt=Je.user?`${Je.user.first_name} ${Je.user.last_name}`:"Unknown";ne[ct]||(ne[ct]={userId:ct,name:bt,targetAmount:0,achievedAmount:0}),ne[ct].targetAmount+=Number(Je.target_amount)||0,ne[ct].achievedAmount+=Number(Je.achieved_amount)||0});const H=Object.values(ne).map((Je,ct)=>({...Je,fill:k7[ct%k7.length]})),xe=H.reduce((Je,ct)=>Je+ct.targetAmount,0);return H.map(Je=>({...Je,percentage:xe>0?(Je.targetAmount/xe*100).toFixed(1):0}))},[Qe]),wt=h.useMemo(()=>nt.slice(0,8).map(K=>({name:K.name.split(" ")[0],achievement:Number(K.achievedAmount),target:Number(K.targetAmount)})),[nt]),Te=h.useMemo(()=>{const K=p.toLowerCase();return o.filter(ne=>(ne.user?`${ne.user.first_name} ${ne.user.last_name}`.toLowerCase():"").includes(K)||ne.start_date?.includes(K)||ne.end_date?.includes(K))},[o,p]),it=Math.max(1,Math.ceil(Te.length/v)),$e=h.useMemo(()=>{const K=(y-1)*v;return Te.slice(K,K+v)},[Te,y,v]),ue=K=>{const{name:ne,value:H}=K.target;z(xe=>({...xe,[ne]:H}))},he=()=>{z(E7),k(!1),M(null),se(!1),S(!0)},F=K=>{z({user_id:K.user?.id?String(K.user.id):"",start_date:K.start_date||"",end_date:K.end_date||"",target_amount:K.target_amount?.toString()||"",period_type:K.period_type||"CUSTOM",period_year:K.period_year||new Date().getFullYear(),period_number:K.period_number||1}),k(!0),M(K.id),se(!1),S(!0),I(null)},G=K=>{const ne=K.user?`${K.user.first_name} ${K.user.last_name}`:"Unknown";ee({title:"Delete Target",message:n.jsxs("span",{children:["Are you sure you want to delete the target for"," ",n.jsx("span",{className:"font-semibold",children:ne}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await ie.delete(`/targets/admin/${K.id}`),q.success("Target deleted successfully."),V(),I(null)}})},Ne=()=>{if($e.every(K=>W.includes(K.id)))ae(W.filter(K=>!$e.map(ne=>ne.id).includes(K)));else{const K=$e.map(ne=>ne.id);ae([...new Set([...W,...K])])}},ge=K=>{ae(ne=>ne.includes(K)?ne.filter(H=>H!==K):[...ne,K])},fe=async()=>{W.length!==0&&ee({title:"Delete Targets",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Target(s)`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await ie.post("/targets/admin/bulk-delete",{target_ids:W}),q.success(`Successfully deleted ${W.length} targets`),ae([]),V()}})},Ue=K=>{if(K.preventDefault(),se(!0),!R.user_id){q.error("Assign User is required.");return}if(!R.period_type){q.error("Period Type is required.");return}if(R.period_type==="CUSTOM"){q.error("Period Type cannot be Custom. Please select a valid period type.");return}if(R.period_type!=="CUSTOM"&&R.period_type!=="ANNUAL"&&!R.period_number){q.error("Please select a period.");return}if(!R.target_amount||Number(R.target_amount)<=0){q.error("Target amount must be greater than 0.");return}if(new Date(R.end_date)<new Date(R.start_date)){q.error("End date must be after start date.");return}const ne={user_id:Number(R.user_id),target_amount:Number(R.target_amount),start_date:R.start_date,end_date:R.end_date,period_type:R.period_type||"CUSTOM",period_year:R.period_year||new Date().getFullYear(),period_number:R.period_number||null},H=A?"Update Target":"Create Target";ee({title:H,message:"Are you sure you want to proceed?",confirmLabel:H,cancelLabel:"Cancel",variant:"primary",action:async()=>{L(!0);try{A?(await ie.put(`/targets/admin/${T}`,ne),q.success("Target updated successfully.")):(await ie.post("/targets/admin/create",ne),q.success("Target created successfully.")),S(!1),V()}catch(xe){console.error(xe);const Ie=xe.response?.data?.detail||xe.message||"Operation failed.";q.error(Ie)}finally{L(!1)}}})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&n.jsx(Bt,{message:"Loading targets..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[n.jsx(ur,{className:"mr-2 text-blue-600"})," Targets"]}),oe&&n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:he,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&n.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[n.jsxs("button",{onClick:()=>re("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${ye==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(RI,{className:"inline mr-2"}),"Overview"]}),n.jsxs("button",{onClick:()=>re("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${ye==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(HS,{className:"inline mr-2"}),"Leaderboard"]}),n.jsxs("button",{onClick:()=>re("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${ye==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(Ws,{className:"inline mr-2"}),"History"]})]}),ye==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(Ic,{title:"Total Targets",value:Pe.totalCount,icon:n.jsx(ur,{size:22}),color:"blue"}),n.jsx(Ic,{title:"Target Amount",value:`${r}${Pe.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(i,{size:22}),color:"green"}),n.jsx(Ic,{title:"Achieved Amount",value:`${r}${Pe.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(rd,{size:22}),color:"purple"}),n.jsx(Ic,{title:"Achievement Rate",value:`${Pe.achievement}%`,icon:n.jsx(ur,{size:22}),color:"orange"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"mb-4 text-center",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),n.jsx("div",{className:"h-[38px] w-full invisible"})]}),wt.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(T_,{width:"100%",height:"100%",children:n.jsxs(o$e,{data:wt,children:[n.jsx(Pk,{strokeDasharray:"3 3",vertical:!1}),n.jsx(Rk,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(Fk,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,K=>Math.ceil(K/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(z_,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:K=>`Sales: ${K}`,formatter:(K,ne,H)=>{if(!H||!H.payload)return[K,ne];const xe=H.payload,Ie=Number(xe.achievement)||0,Je=Number(xe.target)||0,ct=Math.max(0,Je-Ie),bt=Je>0?(Ie/Je*100).toFixed(1):0;return ne==="Achieved"?[`${r}${Ie.toLocaleString()} (${bt}%)`,"Achieved"]:ne==="Remaining"?[`${r}${ct.toLocaleString()}`,"Remaining"]:[K,ne]}}),n.jsx(Ik,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:K,y:ne,width:H,value:xe,payload:Ie})=>{if(!Ie||Ie.target===void 0)return null;const Je=(xe/Ie.target*100).toFixed(0),ct=ne-10<0?10:ne-10;return n.jsxs("text",{x:K+H/2,y:ct,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[Je,"%"]})}}),n.jsx(Ik,{dataKey:K=>Math.max(0,K.target-K.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(zie,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[n.jsxs("select",{value:Y,onChange:K=>{pe(K.target.value),me(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"annual",children:"Annual"}),n.jsx("option",{value:"semiannual",children:"Every 6 Months"}),n.jsx("option",{value:"trimester",children:"Every 4 Months"}),n.jsx("option",{value:"quarterly",children:"Quarterly"})]}),Y!=="annual"&&n.jsxs("select",{value:Se,onChange:K=>me(parseInt(K.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Y==="semiannual"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Jun"}),n.jsx("option",{value:2,children:"Jul - Dec"})]}),Y==="trimester"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Apr"}),n.jsx("option",{value:2,children:"May - Aug"}),n.jsx("option",{value:3,children:"Sep - Dec"})]}),Y==="quarterly"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),n.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),n.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),n.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),nt.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(T_,{width:"100%",height:"100%",children:n.jsxs(b$e,{children:[n.jsx(z_,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:K,payload:ne})=>{if(K&&ne&&ne.length>0){const H=ne[0].payload;return n.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:H.name}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[n.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",r,Number(H.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),n.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",H.percentage,"%"]})]})}return null}}),n.jsx(MX,{data:nt,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:K,percentage:ne,fill:H})=>n.jsxs("text",{fill:H,fontSize:12,fontWeight:600,children:[K.split(" ")[0],": ",ne,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(RI,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),oe&&n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search targets...",value:p,onChange:K=>x(K.target.value),className:"w-full outline-none"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:n.jsxs("tr",{children:[U&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:$e.length>0&&$e.every(K=>W.includes(K.id)),onChange:Ne})}),n.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),U&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:W.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected targets`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:$e.length>0?$e.map(K=>{const ne=Number(K.target_amount)>0?(Number(K.achieved_amount)/Number(K.target_amount)*100).toFixed(1):0;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[U&&n.jsx("td",{className:"py-3 px-4",onClick:H=>H.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(K.id),onChange:()=>ge(K.id)})}),n.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>I(K),children:K.user?`${K.user.first_name} ${K.user.last_name}`:"Unknown"}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>I(K),children:[r,Number(K.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>I(K),children:[r,Number(K.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(K),children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${ne>=100?"bg-green-500":ne>=75?"bg-blue-500":ne>=50?"bg-yellow-500":"bg-red-500"}`,children:[ne,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(K),children:K.start_date}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(K),children:K.end_date}),n.jsx("td",{})]},K.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Te.length,pageSize:v,currentPage:y,onPrev:()=>N(K=>Math.max(K-1,1)),onNext:()=>N(K=>Math.min(K+1,it)),onPageSizeChange:K=>{j(K),N(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),ye==="leaderboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),n.jsx("select",{value:We,onChange:K=>Ke(Number(K.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((K,ne)=>{const H=new Date().getFullYear()-ne;return n.jsx("option",{value:H,children:H},H)})}),n.jsxs("select",{value:Ze,onChange:K=>{Me(K.target.value),ce(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"MONTHLY",children:"Monthly"}),n.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),n.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),n.jsx("option",{value:"ANNUAL",children:"Annual"})]}),Ze==="QUARTERLY"&&n.jsxs("select",{value:je,onChange:K=>ce(Number(K.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"Q1"}),n.jsx("option",{value:2,children:"Q2"}),n.jsx("option",{value:3,children:"Q3"}),n.jsx("option",{value:4,children:"Q4"})]}),Ze==="SEMIANNUAL"&&n.jsxs("select",{value:je,onChange:K=>ce(Number(K.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),n.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),Ze==="MONTHLY"&&n.jsx("select",{value:je,onChange:K=>ce(Number(K.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((K,ne)=>n.jsx("option",{value:ne+1,children:K},ne))}),n.jsx("button",{onClick:le,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),et&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ic,{title:"Sales Reps",value:et.total_sales_reps,icon:n.jsx(na,{size:22}),color:"blue"}),n.jsx(Ic,{title:"Met Quota",value:et.above_target_count,icon:n.jsx(rd,{size:22}),color:"green"}),n.jsx(Ic,{title:"Below Quota",value:et.below_target_count,icon:n.jsx(qS,{size:22}),color:"orange"}),n.jsx(Ic,{title:"Team Achievement",value:`${et.overall_achievement}%`,icon:n.jsx(ur,{size:22}),color:"purple"})]}),ke?n.jsx(Bt,{message:"Loading leaderboard..."}):De?.entries?.length>0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[n.jsx(HS,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",De.period_type!=="ALL"&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",De.period_type," ",De.period_year,")"]})]})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),n.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:De.entries.map(K=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${K.rank===1?"bg-yellow-100 text-yellow-700":K.rank===2?"bg-gray-100 text-gray-700":K.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:K.rank})}),n.jsx("td",{className:"py-3 px-4 font-medium",children:K.user_name}),n.jsx("td",{className:"py-3 px-4 text-gray-500",children:K.role}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(K.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(K.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${K.achievement_percentage>=100?"bg-green-500":K.achievement_percentage>=75?"bg-blue-500":K.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[K.achievement_percentage,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("button",{onClick:()=>{Ae(K.user_id),re("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},K.user_id))})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(HS,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"No leaderboard data available for the selected period."})]}),et?.needs_attention?.length>0&&n.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[n.jsx(qS,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:et.needs_attention.map(K=>n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[n.jsx("p",{className:"font-medium text-gray-800",children:K.user_name}),n.jsx("p",{className:"text-sm text-gray-500",children:K.role}),n.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[n.jsxs("span",{className:"text-red-600 font-semibold",children:[K.achievement_percentage,"%"]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[r,Number(K.remaining_amount).toLocaleString()," remaining"]})]})]},K.user_id))})]})]}),ye==="history"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),n.jsx("div",{className:"flex gap-4 flex-wrap",children:n.jsxs("select",{onChange:K=>K.target.value&&Ae(Number(K.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:de?.user_id||"",children:[n.jsx("option",{value:"",children:"-- Select User --"}),c.map(K=>n.jsxs("option",{value:K.id,children:[K.first_name," ",K.last_name]},K.id))]})})]}),Oe?n.jsx(Bt,{message:"Loading history..."}):de?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:de.user_name}),de.current_period&&de.previous_period&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:de.current_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[de.current_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(de.current_period.achieved_amount).toLocaleString()," / ",r,Number(de.current_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:de.previous_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[de.previous_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(de.previous_period.achieved_amount).toLocaleString()," / ",r,Number(de.previous_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:`rounded-lg p-4 ${de.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[n.jsx("p",{className:"text-sm font-medium",style:{color:de.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),n.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${de.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[de.growth_percentage>=0?n.jsx(rd,{className:"mr-2"}):n.jsx(qS,{className:"mr-2"}),de.growth_percentage>=0?"+":"",de.growth_percentage?.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[de.growth_amount>=0?"+":"",r,Number(de.growth_amount||0).toLocaleString()]})]})]}),de.periods?.length>0&&n.jsx("div",{className:"h-64",children:n.jsx(T_,{width:"100%",height:"100%",children:n.jsxs(r$e,{data:[...de.periods].reverse(),children:[n.jsx(Pk,{strokeDasharray:"3 3"}),n.jsx(Rk,{dataKey:"period_label",tick:{fontSize:12}}),n.jsx(Fk,{tick:{fontSize:12}}),n.jsx(z_,{formatter:(K,ne)=>[`${r}${Number(K).toLocaleString()}`,ne==="achieved_amount"?"Achieved":"Target"]}),n.jsx(PQ,{}),n.jsx(Dk,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2}),n.jsx(Dk,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2})]})})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),n.jsx("tbody",{children:de.periods.map((K,ne)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:K.period_label}),n.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[K.start_date," - ",K.end_date]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(K.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(K.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${K.achievement_percentage>=100?"bg-green-500":K.achievement_percentage>=75?"bg-blue-500":K.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[K.achievement_percentage,"%"]})})]},ne))})]})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(Ws,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),O&&n.jsx(N$e,{target:O,currencySymbol:r,onClose:()=>I(null),onEdit:()=>F(O),onDelete:()=>G(O),canEdit:oe,canDelete:U}),w&&oe&&n.jsx(j$e,{formData:R,users:c,isEditing:A,isSubmitting:_,isSubmitted:Ee,onChange:ue,onClose:()=>S(!1),onSubmit:Ue,fiscalSettings:Fe}),B&&n.jsx(C$e,{...B,loading:Q,onConfirm:async()=>{te(!0),await B.action(),te(!1),ee(null)},onCancel:()=>ee(null)})]})}function Ic({title:e,value:t,icon:a,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[n.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:a}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),n.jsx("p",{className:"text-xl font-bold",children:t})]})]})}function N$e({target:e,onClose:t,onEdit:a,onDelete:s,canEdit:r,canDelete:i,currencySymbol:o}){const l=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:c=>c.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),n.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:n.jsx(Qt,{size:25})})]}),r&&n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),i&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"})]}),n.jsxs("div",{className:"p-4 lg:p-6",children:[n.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),n.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),n.jsxs("p",{className:"text-green-600 font-semibold",children:[o,Number(e.target_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),n.jsxs("p",{className:"text-blue-600 font-semibold",children:[o,Number(e.achieved_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),n.jsxs("p",{className:`font-semibold ${l>=100?"text-green-600":l>=75?"text-blue-600":l>=50?"text-yellow-600":"text-red-600"}`,children:[l,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),n.jsx("p",{children:e.start_date})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),n.jsx("p",{children:e.end_date})]})]})})]})]})})}function j$e({formData:e,users:t,isEditing:a,isSubmitting:s,onChange:r,onClose:i,onSubmit:o,fiscalSettings:l,isSubmitted:c}){const d=l?.fiscal_start_month||1,u=c&&(!e.target_amount||Number(e.target_amount)<=0),f=c&&(e.period_type==="CUSTOM"||!e.period_type),p=j=>{const w=j.getFullYear(),S=String(j.getMonth()+1).padStart(2,"0"),A=String(j.getDate()).padStart(2,"0");return`${w}-${S}-${A}`},x=(j,w,S)=>{let A,k;if(j==="MONTHLY")A=new Date(w,S-1,1),k=new Date(w,S,0);else if(j==="QUARTERLY"){const _=(S-1)*3,L=(d-1+_)%12;let T=w;d>1&&(L>=d-1?T=w-1:T=w),A=new Date(T,L,1);const M=(L+2)%12,R=L+2>=12?T+1:T;k=new Date(R,M+1,0)}else if(j==="SEMIANNUAL"){const _=(S-1)*6,L=(d-1+_)%12;let T=w;d>1&&(L>=d-1?T=w-1:T=w),A=new Date(T,L,1);const M=(L+5)%12,R=L+5>=12?T+1:T;k=new Date(R,M+1,0)}else if(j==="ANNUAL"){const _=d-1;let L=d>1?w-1:w;A=new Date(L,_,1);const T=(d-2+12)%12;k=new Date(L+1,T+1,0)}return{startDate:A,endDate:k}},y=j=>{const w=j.target.value;if(r({target:{name:"period_type",value:w}}),w!=="CUSTOM"){const S=e.period_year||new Date().getFullYear(),A=e.period_number||1,{startDate:k,endDate:_}=x(w,S,A);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}},N=j=>{const w=Number(j.target.value);r({target:{name:"period_number",value:w}});const S=e.period_year||new Date().getFullYear(),A=e.period_type;if(A!=="CUSTOM"){const{startDate:k,endDate:_}=x(A,S,w);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}},v=j=>{const w=Number(j.target.value);r({target:{name:"period_year",value:w}});const S=e.period_type,A=e.period_number||1;if(S!=="CUSTOM"){const{startDate:k,endDate:_}=x(S,w,A);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}};return h.useEffect(()=>{if(e.period_type!=="CUSTOM"&&!e.start_date){const j=e.period_year||new Date().getFullYear(),w=e.period_number||1,{startDate:S,endDate:A}=x(e.period_type,j,w);S&&A&&(r({target:{name:"start_date",value:p(S)}}),r({target:{name:"end_date",value:p(A)}}))}},[l]),n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:n.jsx(Qt,{size:24})}),n.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:a?"Edit Target":"Add New Target"}),n.jsxs("form",{onSubmit:o,noValidate:!0,className:"grid gap-4 text-base",children:[n.jsxs("div",{className:"flex flex-col gap-1 relative",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Assign User ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(w$e,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:j=>`${j.first_name} ${j.last_name}`,placeholder:"Search user...",required:!0,isSubmitted:c})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Period Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:"period_type",value:e.period_type,onChange:y,isSubmitted:c,className:`w-full border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                ${f?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`,children:v$e.map(j=>n.jsx("option",{value:j.value,children:j.label},j.value))})]}),e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),n.jsxs("select",{name:"period_number",value:e.period_number,onChange:N,required:!0,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((j,w)=>n.jsx("option",{value:w+1,children:j},w)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(j=>n.jsxs("option",{value:j,children:["Q",j," ",l?.quarters?.[`Q${j}`]?`(${l.quarters[`Q${j}`]})`:""]},j)),e.period_type==="SEMIANNUAL"&&[1,2].map(j=>n.jsxs("option",{value:j,children:["H",j," ",l?.halves?.[`H${j}`]?`(${l.halves[`H${j}`]})`:`(${j===1?"Jan-Jun":"Jul-Dec"})`]},j))]})]}),e.period_type!=="CUSTOM"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:d!==1?"Fiscal Year":"Year"}),n.jsx("select",{name:"period_year",value:e.period_year,onChange:v,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((j,w)=>{const S=new Date().getFullYear()+1-w;return n.jsx("option",{value:S,children:d!==1?`FY${S}`:S},S)})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Target Amount ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
        ${u?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Start Date ",e.period_type!=="CUSTOM"&&n.jsx("span",{className:"text-gray-400 text-xs",children:"(auto-calculated)"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":"Save Target"})]})]})]})})}function C$e({title:e,message:t,confirmLabel:a,cancelLabel:s,variant:r,loading:i,onConfirm:o,onCancel:l}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),n.jsx("button",{onClick:o,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":a})]})]})})}function S$e(){const{userRole:e}=Qs();return n.jsx(r1,{currentUserRole:e,currentUserId:null})}const L7=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],eA={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},mb=e=>{const t=parseFloat(e.quantity)||0,a=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*a,i=r*(s/100),o=r-i;return{discount_amount:i,line_total:o}},$c=(e,t="")=>{const a=parseFloat(e)||0;return`${t}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function xd({items:e=[],onChange:t,currencySymbol:a="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:o=0,onTotalsChange:l}){const[c,d]=h.useState(null),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState({...eA});h.useEffect(()=>{if(l){const T=e.reduce((I,B)=>I+(parseFloat(B.line_total)||0),0);let M=0;i==="percentage"&&o?M=T*(parseFloat(o)/100):i==="fixed"&&o&&(M=parseFloat(o));const R=T-M,z=R*(parseFloat(r)/100),O=R+z;l({subtotal:T,discount_amount:M,tax_amount:z,total_amount:O})}},[e,r,i,o,l]);const v=h.useCallback(()=>{if(!y.name.trim()){q.error("Item name is required");return}if(parseFloat(y.unit_price)<=0){q.error("Unit price must be greater than 0");return}if(parseFloat(y.quantity)<=0){q.error("Quantity must be greater than 0");return}const T=mb(y),M={...y,...T,sort_order:e.length};t([...e,M]),N({...eA}),x(!1),q.success("Item added")},[y,e,t]),j=T=>{if(!u){q.error("No item being edited");return}if(!u.name.trim()){q.error("Item name is required");return}if(parseFloat(u.unit_price)<=0){q.error("Unit price must be greater than 0");return}if(parseFloat(u.quantity)<=0){q.error("Quantity must be greater than 0");return}const M=mb(u),R={...u,...M},z=e.map((O,I)=>I===T?R:O);t(z),d(null),f(null),q.success("Item updated")},w=h.useCallback(T=>{const M=e.filter((R,z)=>z!==T);M.forEach((R,z)=>{R.sort_order=z}),t(M),q.success("Item removed")},[e,t]),S=h.useCallback((T,M)=>{const R=M==="up"?T-1:T+1;if(R<0||R>=e.length)return;const z=[...e];[z[T],z[R]]=[z[R],z[T]],z.forEach((O,I)=>{O.sort_order=I}),t(z)},[e,t]),A=T=>{d(T),f({...e[T]})},k=()=>{d(null),f(null)},_=e.reduce((T,M)=>T+(parseFloat(M.line_total)||0),0),L=(T,M)=>c===M&&!s?n.jsxs("tr",{className:"bg-blue-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("select",{value:u.item_type,onChange:z=>f(O=>({...O,item_type:z.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:L7.map(z=>n.jsx("option",{value:z.value,children:z.label},z.value))})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("input",{type:"text",value:u.name,onChange:z=>f(O=>({...O,name:z.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),n.jsx("input",{type:"text",value:u.variant||"",onChange:z=>f(O=>({...O,variant:z.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"text",value:u.sku||"",onChange:z=>f(O=>({...O,sku:z.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"number",value:u.quantity,onChange:z=>f(O=>({...O,quantity:z.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:u.unit||"",onChange:z=>f(O=>({...O,unit:z.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"number",value:u.unit_price,onChange:z=>f(O=>({...O,unit_price:z.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"number",value:u.discount_percent||0,onChange:z=>f(O=>({...O,discount_percent:z.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),n.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:$c(mb(u).line_total,a)}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>j(M),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:n.jsx(xL,{size:16})}),n.jsx("button",{type:"button",onClick:k,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:n.jsx(Qt,{size:16})})]})})]},T.id||`edit-${M}`):n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${T.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:T.item_type})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("div",{className:"font-medium text-gray-900",children:T.name}),T.variant&&n.jsx("div",{className:"text-xs text-gray-500",children:T.variant}),T.description&&n.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:T.description})]}),n.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:T.sku||"-"}),n.jsxs("td",{className:"px-3 py-2 text-center",children:[n.jsx("span",{className:"font-medium",children:parseFloat(T.quantity).toLocaleString()}),T.unit&&n.jsx("span",{className:"text-gray-500 text-sm ml-1",children:T.unit})]}),n.jsx("td",{className:"px-3 py-2 text-right",children:$c(T.unit_price,a)}),n.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(T.discount_percent)>0?n.jsxs("span",{className:"text-red-600",children:["-",parseFloat(T.discount_percent).toFixed(1),"%"]}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:$c(T.line_total,a)}),!s&&n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>S(M,"up"),disabled:M===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:n.jsx(Bie,{size:14})}),n.jsx("button",{type:"button",onClick:()=>S(M,"down"),disabled:M===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:n.jsx(At,{size:14})}),n.jsx("button",{type:"button",onClick:()=>A(M),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:n.jsx(ua,{size:14})}),n.jsx("button",{type:"button",onClick:()=>w(M),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:n.jsx(Kt,{size:14})})]})})]},T.id||`row-${M}`);return n.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-300",children:[n.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&n.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&n.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[n.jsx(gn,{size:14}),"Add Item"]})]}),p&&!s&&n.jsxs("div",{className:"p-4 bg-blue-50 border border-gray-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),n.jsx("select",{value:y.item_type,onChange:T=>N({...y,item_type:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",children:L7.map(T=>n.jsx("option",{value:T.value,children:T.label},T.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:y.name,onChange:T=>N({...y,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),n.jsx("input",{type:"text",value:y.sku,onChange:T=>N({...y,sku:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),n.jsx("input",{type:"text",value:y.variant,onChange:T=>N({...y,variant:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:y.quantity,onChange:T=>N({...y,quantity:T.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:y.unit,onChange:T=>N({...y,unit:T.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:a}),n.jsx("input",{type:"number",value:y.unit_price,onChange:T=>N({...y,unit_price:T.target.value}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),n.jsx("input",{type:"number",value:y.discount_percent,onChange:T=>N({...y,discount_percent:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),n.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:$c(mb(y).line_total,a)})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),n.jsx("textarea",{value:y.description,onChange:T=>N({...y,description:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[n.jsx("button",{onClick:()=>{x(!1),N({...eA})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),n.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&n.jsx("th",{className:"px-3 py-2 w-28"})]})}),n.jsx("tbody",{children:e.map((T,M)=>L(T,M))})]})}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("p",{children:"No items added yet."}),!s&&n.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&n.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"w-64 space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium",children:$c(_,a)})]}),parseFloat(o)>0&&n.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[n.jsxs("span",{children:["Discount (",i==="percentage"?`${o}%`:"Fixed","):"]}),n.jsxs("span",{children:["-",$c(i==="percentage"?_*(parseFloat(o)/100):parseFloat(o),a)]})]}),parseFloat(r)>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),n.jsx("span",{children:$c((_-(i==="percentage"?_*(parseFloat(o)/100):parseFloat(o)||0))*(parseFloat(r)/100),a)})]}),n.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:$c((()=>{let T=0;i==="percentage"&&o?T=_*(parseFloat(o)/100):i==="fixed"&&o&&(T=parseFloat(o));const M=_-T,R=M*(parseFloat(r)/100);return M+R})(),a)})]})]})})})]})}const tA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],nA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Mi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},aA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",_$e=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},A$e=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},fb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",jg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",T$e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},sA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},P7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},rA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Ew=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},E$e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Ew(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Ew(t);return a||null},k$e=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},L$e=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function P$e(){const e=Nt(),t=Xt(),{user:a}=Gt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,N]=h.useState([]),[v,j]=h.useState(null),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,L]=h.useState(!1),[T,M]=h.useState(!1),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState(!1),[Q,te]=h.useState(null),[W,ae]=h.useState(nA),[Ee,se]=h.useState(""),[Y,pe]=h.useState("Filter by Status"),[Se,me]=h.useState(null),ye=h.useCallback(async()=>{if(w)try{ee(!0);const E=(await ie.get("/company/invoice-info"))?.data;e(`/admin/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:E}})}catch(P){const E=P?.response?.data?.detail||P?.message||"Failed to open print page.";q.error(E)}finally{ee(!1)}},[w,s]),[re,De]=h.useState(1),[ve,ke]=h.useState(10),[Ce,de]=h.useState("Overview"),[Re,Oe]=h.useState("Draft"),[Ge,et]=h.useState([]),[mt,Fe]=h.useState(null),{comments:ot,addComment:We,refresh:Ke}=Aa({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&Ke()},[w?.id,Ke]),h.useEffect(()=>{const E=t.state?.quoteID;if(E){Fe(E),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(mt&&r.length>0&&!o){const P=r.find(E=>E.id===mt);P?S(P):q.error("Quote not found."),Fe(null)}},[mt,p,o]),h.useEffect(()=>{let P=!0;return(async()=>{const Z=E$e();if(Z&&P){j(Z);return}try{const _e=await ie.get("/auth/me"),Le=Ew(_e?.data);if(Le&&P){j(Le);return}}catch{}try{const _e=await ie.get("/users/me"),Le=Ew(_e?.data);if(Le&&P){j(Le);return}}catch{}P&&j(null)})(),()=>{P=!1}},[]);const Ze=h.useCallback(P=>P&&u.find(Z=>String(Z.id)===String(P))?.name||"",[u]),Me=h.useCallback(P=>{if(!P)return"";const E=p.find(Z=>String(Z.id)===String(P));return E?`${E.first_name} ${E.last_name}`.trim():""},[p]),je=h.useCallback(P=>{if(!P)return"--";const E=c.find(Z=>String(Z.id)===String(P));return E?.deal_name||E?.name||`Deal #${P7(P)}`},[c]),ce=h.useCallback(P=>{const E=c.find(Le=>String(Le.id)===String(P)),Z=k$e(E);let _e=L$e(E);if(!_e&&Z){const Le=p.filter(qe=>String(qe.account_id||"")===String(Z));if(Le.length>0){const qe=[...Le].sort((Xe,jt)=>{const vt=`${Xe.first_name||""} ${Xe.last_name||""}`.trim().toLowerCase(),Ut=`${jt.first_name||""} ${jt.last_name||""}`.trim().toLowerCase();return vt.localeCompare(Ut)});_e=String(qe[0].id)}}if(Z&&_e){const Le=p.find(qe=>String(qe.id)===String(_e));Le?.account_id&&String(Le.account_id)!==String(Z)&&(_e="")}return{accountId:Z||"",contactId:_e||""}},[c,p]),oe=h.useCallback(P=>{if(!P)return"--";if(P.deal?.deal_name)return P.deal.deal_name;if(P.deal?.name)return P.deal.name;const E=P.deal_id||P.deal?.id;return E?je(E):"--"},[je]),U=h.useCallback(P=>{if(!P)return"--";if(P.account?.name)return P.account.name;let E=P.account_id||P.account?.id;if(!E){const Z=P.deal_id||P.deal?.id;Z&&(E=ce(Z).accountId)}return E?Ze(E)||`Account #${E}`:"--"},[ce,Ze]),V=h.useCallback(P=>{if(!P)return"--";if(P.contact?.first_name||P.contact?.last_name)return`${P.contact?.first_name||""} ${P.contact?.last_name||""}`.trim()||"--";let E=P.contact_id||P.contact?.id;if(!E){const _e=P.deal_id||P.deal?.id;_e&&(E=ce(_e).contactId)}return(E?Me(E):"")||(E?`Contact #${E}`:"--")},[ce,Me]),be=h.useCallback(async(P=null)=>{l(!0);try{const E=await ie.get("/quotes/admin/fetch-all"),_e=[...Array.isArray(E.data)?E.data:[]].sort((Le,qe)=>{const Xe=Le?.created_at||Le?.updated_at||0,jt=qe?.created_at||qe?.updated_at||0;return new Date(jt)-new Date(Xe)});if(i(_e),P){const Le=_e.find(qe=>qe.id===P);S(Le||null)}}catch(E){console.error(E),i([]),E.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ze=h.useCallback(async()=>{try{const P=await ie.get("/deals/admin/fetch-all");d(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),le=h.useCallback(async()=>{try{const P=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),X=h.useCallback(async()=>{try{const P=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const P=await ie.get("/users/all");N(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{be(),ze(),le(),X(),Ae()},[be,ze,le,X,Ae]);const Pe=h.useMemo(()=>{const P=Ee.trim().toLowerCase(),E=Y.trim();return r.filter(Z=>{const _e=oe(Z),Le=U(Z),qe=V(Z),Xe=sA(Z.presented_date,Z.validity_days),jt=[Z.quote_id,_e,Le,qe,Z.total_amount?.toString(),Z.validity_days?.toString(),Z.presented_date?jg(Z.presented_date):"",Xe?jg(Xe):"",Z.assigned_user?.first_name,Z.assigned_user?.last_name,Z.creator?.first_name,Z.creator?.last_name,Z.status,Z.notes,fb(Z.created_at),fb(Z.updated_at)],vt=P===""||jt.some(An=>An==null?!1:An.toString().toLowerCase().includes(P)),Ut=E==="Filter by Status"||Mi(Z.status)===E;return vt&&Ut})},[r,Ee,Y,oe,U,V]),Qe=Math.max(1,Math.ceil(Pe.length/ve)||1);h.useEffect(()=>De(1),[Ee,Y]),h.useEffect(()=>{De(P=>{const E=Math.max(1,Math.ceil(Pe.length/ve)||1);return P>E?E:P})},[Pe.length,ve]);const nt=h.useMemo(()=>{const P=(re-1)*ve;return Pe.slice(P,P+ve)},[Pe,re,ve]),wt=()=>De(P=>Math.max(P-1,1)),Te=()=>De(P=>Math.min(P+1,Qe)),it=P=>{S(P),de("Overview"),Oe(Mi(P?.status)||"Draft")},$e=()=>{S(null),de("Overview")},ue=P=>{P.target.id==="quoteModalBackdrop"&&!O&&$e()},he=h.useCallback(()=>{k(!1),L(!1),te(null),ae(nA),M(!1)},[]),F=P=>{P.target.id==="modalBackdrop"&&!T&&!O&&he()},G=P=>{const{name:E,value:Z}=P.target;if(E==="deal_id"){const{accountId:_e,contactId:Le}=ce(Z);ae(qe=>({...qe,deal_id:Z,account_id:_e,contact_id:Le}));return}ae(_e=>({..._e,[E]:Z}))},Ne=()=>{const P=a?.company?.tax_rate??0;ae({...nA,tax_rate:P}),L(!1),te(null),k(!0)},ge=P=>{if(!P)return;S(null);const E=P.deal?.id?String(P.deal.id):P.deal_id?String(P.deal_id):"",Z=E?ce(E):{accountId:"",contactId:""},_e=P.account?.id?String(P.account.id):P.account_id?String(P.account_id):Z.accountId,Le=P.contact?.id?String(P.contact.id):P.contact_id?String(P.contact_id):Z.contactId,qe=P.assigned_user?.id?String(P.assigned_user.id):P.assigned_to?String(P.assigned_to):"";ae({deal_id:E,account_id:_e||"",contact_id:Le||"",total_amount:P.total_amount?.toString()||"",presented_date:T$e(P.presented_date),validity_days:P.validity_days!==null&&P.validity_days!==void 0?String(P.validity_days):"",status:Mi(P.status)||"Draft",assigned_to:qe,notes:P.notes||"",subtotal:parseFloat(P.subtotal)||0,tax_rate:parseFloat(P.tax_rate)||0,tax_amount:parseFloat(P.tax_amount)||0,discount_type:P.discount_type||"",discount_value:parseFloat(P.discount_value)||0,discount_amount:parseFloat(P.discount_amount)||0,currency:P.currency||"PHP",items:Array.isArray(P.items)?P.items.map(Xe=>({id:Xe.id,item_type:Xe.item_type||"Product",name:Xe.name||"",description:Xe.description||"",sku:Xe.sku||"",variant:Xe.variant||"",unit:Xe.unit||"pcs",quantity:parseFloat(Xe.quantity)||1,unit_price:parseFloat(Xe.unit_price)||0,discount_percent:parseFloat(Xe.discount_percent)||0,discount_amount:parseFloat(Xe.discount_amount)||0,line_total:parseFloat(Xe.line_total)||0,sort_order:Xe.sort_order||0})):[]}),L(!0),te(P.id),k(!0)},fe=P=>{if(P.target.checked){const E=nt.map(Z=>Z.id);et(E)}else et([])},Ue=P=>{et(E=>E.includes(P)?E.filter(Z=>Z!==P):[...E,P])},K=P=>{if(!P)return;const E=P.quote_id||"this quote";z({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:E}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:E}})},ne=async()=>{Ge.length!==0&&z({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ge.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ge.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ge}})},[H,xe]=h.useState(!1),Ie=P=>{if(P.preventDefault(),xe(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){q.error("Deal is required.");return}if(!W.assigned_to){q.error("Assigned To is required.");return}const Z=ce(W.deal_id),_e=W.items.map((vt,Ut)=>({item_type:vt.item_type||"Product",name:vt.name,description:vt.description||null,sku:vt.sku||null,variant:vt.variant||null,unit:vt.unit||null,quantity:parseFloat(vt.quantity)||1,unit_price:parseFloat(vt.unit_price)||0,discount_percent:parseFloat(vt.discount_percent)||0,sort_order:vt.sort_order??Ut})),Le={deal_id:Number(W.deal_id),account_id:Z.accountId?Number(Z.accountId):null,contact_id:Z.contactId?Number(Z.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:_e},qe=_&&Q?"update":"create",Xe=je(W.deal_id),jt=qe==="create"?{...Le,created_by_id:Number(v)}:Le;z({title:qe==="create"?"Confirm New Quote":"Confirm Update",message:qe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Xe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Xe}),"?"]}),confirmLabel:qe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:qe,payload:jt,targetId:Q||null,name:Xe}})},Je=async()=>{if(!R?.action){z(null);return}const{action:P}=R,{type:E,payload:Z,targetId:_e,name:Le}=P;I(!0);try{if(E==="create")M(!0),await ie.post("/quotes/admin",Z),q.success("Quote created successfully."),he(),await be();else if(E==="update"){if(!_e)throw new Error("Missing quote identifier for update.");M(!0),await ie.put(`/quotes/admin/${_e}`,Z),q.success("Quote updated successfully."),he(),await be(),w?.id===_e&&S(null)}else if(E==="delete"){if(!_e)throw new Error("Missing quote identifier for deletion.");const qe=w?.id;me(_e),await ie.delete(`/quotes/admin/${_e}`),q.success(`Quote "${Le}" deleted successfully.`),await be(qe&&qe!==_e?qe:null),qe===_e&&S(null)}else E==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:Ge}),q.success(`Successfully deleted ${Ge.length} quotes`),et([]),await be())}catch(qe){console.error(qe);const Xe=E==="create"?"Failed to create quote. Please review the details and try again.":E==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Xe),(E==="create"||E==="update")&&M(!1),E==="delete"&&me(null)}finally{(E==="create"||E==="update")&&M(!1),E==="delete"&&me(null),I(!1),z(null)}},ct=()=>{O||z(null)},bt=h.useCallback((P,E)=>{const Z=P?.deal_id??P?.deal?.id??"",_e=Z?Number(Z):null,Le=_e?ce(String(_e)):{accountId:"",contactId:""},qe=P?.account_id??P?.account?.id??Le.accountId??null,Xe=P?.contact_id??P?.contact?.id??Le.contactId??null,jt=P?.total_amount??0,vt=P?.assigned_to??P?.assigned_user?.id??null;return{deal_id:_e,account_id:qe!=null&&String(qe).trim()!==""?Number(qe):null,contact_id:Xe!=null&&String(Xe).trim()!==""?Number(Xe):null,total_amount:Number(jt),presented_date:P?.presented_date||null,validity_days:P?.validity_days===""||P?.validity_days===void 0||P?.validity_days===null?null:Number(P.validity_days),status:E,assigned_to:vt!=null&&String(vt).trim()!==""?Number(vt):null,notes:P?.notes?.trim()||null}},[ce]),Pt=h.useCallback(async()=>{if(!w?.id)return;const P=Mi(Re),E=[P,P.toLowerCase()],Z=async _e=>ie.patch(`/quotes/admin/${w.id}/status`,{status:_e},{headers:{"Content-Type":"application/json"}});try{let _e=!1;for(const Le of E)try{await Z(Le),_e=!0;break}catch(qe){if(qe?.response?.status===422)continue;throw qe}if(!_e){const Le=bt(w,P);if(!Le.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Le.total_amount||Le.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${w.id}`,Le)}q.success(`Quote status updated to ${P}`),S(null),de("Overview"),await be()}catch(_e){console.error(_e);const Le=_e?.response?.data?.message||(_e?.response?.data?.errors?Object.values(_e.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(Le)}},[w,Re,be,bt]),Et=[{label:"Filter by Status",value:"Filter by Status"},...tA.map(P=>({label:P.label,value:P.value}))],Yt=R?.action?.type==="delete"?R.action.targetId:null,rn=w&&(Se===w.id||Yt===w.id),aa=w&&Se===w.id,Va=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:$e,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Qn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:oe(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${A$e(w.status)}`,children:aA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:ye,disabled:B||T||O,children:[n.jsx(un,{className:"mr-2"}),B?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ge(w),disabled:O||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>K(w),disabled:!!rn,children:aa?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(P=>n.jsx("button",{onClick:()=>de(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:rA(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:oe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:U(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:V(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:jg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:jg(sA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:aA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:fb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:fb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(xd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(_a,{comments:ot,onAddComment:We})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${rA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Re||Mi(w.status)||"Draft",onChange:P=>Oe(P.target.value),children:tA.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))}),n.jsx("button",{onClick:Pt,disabled:Mi(Re)===Mi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Mi(Re)===Mi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,bs=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(un,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ne(),xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Ee,onChange:P=>se(P.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:Y,onChange:P=>pe(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Et.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:nt.length>0&&Ge.length===nt.length,onChange:fe,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ge.length>0?n.jsx("button",{onClick:ne,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ge.length} selected items`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Pe.length>0?nt.map(P=>{const E=sA(P.presented_date,P.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>it(P),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Z=>Z.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ge.includes(P.id),onChange:()=>Ue(P.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:rA(P.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:oe(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:U(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:V(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:P.total_amount?`${s}${Number(P.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${_$e(P.status)}`,children:aA(P.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:P.assigned_user?`${P.assigned_user.first_name} ${P.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:jg(E)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},P.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Pe.length,pageSize:ve,currentPage:re,onPrev:wt,onNext:Te,onPageSizeChange:P=>{ke(P),De(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Be=A?n.jsx("div",{id:"modalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[n.jsx("button",{onClick:()=>{he(),xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||O,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ie,children:[n.jsx(M7,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:P=>{const{accountId:E,contactId:Z}=ce(P);ae(_e=>({..._e,deal_id:P,account_id:E,contact_id:Z}))},items:Array.isArray(c)?c:[],getLabel:P=>`${P7(P?.deal_id??"")} ${P?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:H,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(O7,{label:"Account",value:Ze(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(O7,{label:"Contact",value:Me(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(xd,{items:W.items,onChange:P=>ae(E=>({...E,items:P})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:P=>{ae(E=>({...E,subtotal:P.subtotal,discount_amount:P.discount_amount,tax_amount:P.tax_amount,total_amount:P.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:P=>ae(E=>({...E,discount_type:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:P=>ae(E=>({...E,discount_value:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate??"",onChange:P=>ae(E=>({...E,tax_rate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(D7,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:G,disabled:T}),n.jsx(D7,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:G,placeholder:"30",disabled:T}),n.jsx(M7,{label:"Assigned To",value:W.assigned_to||"",onChange:P=>ae(E=>({...E,assigned_to:P})),items:Array.isArray(y)?y:[],getLabel:P=>{const E=`${P?.first_name??""} ${P?.last_name??""}`.trim();if(!E)return P?.email||"";const Z=P?.role?.toUpperCase()==="CEO"?"Admin":P?.role;return Z?`${E} (${Z})`:E},placeholder:"Search assignee...",required:!0,isSubmitted:H,disabled:T}),n.jsx(D$e,{label:"Status",name:"status",value:W.status,onChange:G,options:tA,required:!0,disabled:T}),n.jsx(M$e,{label:"Notes",name:"notes",value:W.notes,onChange:G,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{he(),xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||O,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||O,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,St=R?n.jsx(I$e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Je,onCancel:ct,loading:O}):null;return n.jsxs(n.Fragment,{children:[w?Va:bs,Be,St]})}function D7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function O7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function D$e({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function M7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(O$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function O$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function M$e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function I$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const i1=[{value:"CEO",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Cg={firstName:"",lastName:"",email:"",password:"",role:""},$$e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Co=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",R$e=e=>{const t=Co(e),a=i1.find(s=>Co(s.value)===t);return a?a.value:e||""},qk=e=>{const t=Co(e),a=i1.find(s=>Co(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},I7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},iA=(e,{size:t="sm"}={})=>{const a=Co(e),s=$$e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:qk(e)})},z$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},$7=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function F$e(){const{user:e,loading:t}=Gt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(Cg),[A,k]=h.useState(!1),[_,L]=h.useState(null),[T,M]=h.useState(!1),[R,z]=h.useState(1),[O,I]=h.useState(10),[B,ee]=h.useState("Overview"),[Q,te]=h.useState(""),[W,ae]=h.useState(!1),[Ee,se]=h.useState([]),Y=Co(e?.role),pe=["ADMIN","CEO"].includes(Y),Se=!t&&pe,me=h.useMemo(()=>{const le=i1.filter(X=>Co(X.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...le]},[]),ye=h.useCallback(le=>{le&&(s(X=>X.map(Ae=>Ae.id===le?{...Ae,highlight:!0}:Ae)),setTimeout(()=>{s(X=>X.map(Ae=>Ae.id===le?{...Ae,highlight:!1}:Ae))},2e3))},[]),re=h.useCallback(async()=>{i(!0);try{const le=await ie.get("/users/all"),X=Array.isArray(le.data)?le.data:[],Ae=$7(X);s(Ae),f(Pe=>Pe&&(Ae.find(nt=>nt.id===Pe.id)||null)),console.log(le.data)}catch(le){console.error("Error fetching users:",le);const X=le.response?.data?.detail||"Failed to load users. Please try again later.";q.error(X)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!pe&&e&&q.error("You are not authorized to access User Management.")},[pe,t,e]),h.useEffect(()=>{t||!pe||re()},[t,pe,re]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const De=h.useMemo(()=>{const le=o.trim().toLowerCase(),X=Co(c);return $7(a.filter(Ae=>{if(!Ae)return!1;const Pe=le===""||[Ae.first_name,Ae.last_name,`${Ae.first_name||""} ${Ae.last_name||""}`,Ae.email,qk(Ae.role)].filter(Boolean).some(nt=>nt.toString().toLowerCase().includes(le)),Qe=X===""||X==="CEO"&&["CEO","ADMIN"].includes(Co(Ae.role))||Co(Ae.role)===X;return Pe&&Qe}))},[a,o,c]),ve=Math.max(1,Math.ceil(De.length/O)||1);h.useEffect(()=>{z(1)},[o,c,O]),h.useEffect(()=>{z(le=>{const X=Math.max(1,Math.ceil(De.length/O)||1);return le>X?X:le})},[De.length,O]);const ke=h.useMemo(()=>{const le=(R-1)*O;return De.slice(le,le+O)},[De,R,O]);De.length===0||(R-1)*O+1,Math.min(R*O,De.length);const Ce=()=>z(le=>Math.max(le-1,1)),de=()=>z(le=>Math.min(le+1,ve)),Re=()=>{S(Cg),N(!1),j(null),x(!0)},Oe=le=>{f(le),ee("Overview"),te(le?.is_active?"Active":"Inactive")},Ge=le=>{le.target.id==="userModalBackdrop"&&!T&&et()},et=()=>{f(null)},mt=(le,X)=>{S(Ae=>({...Ae,[le]:X}))},Fe=()=>{const le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let X="";for(let Ae=0;Ae<10;Ae+=1)X+=le.charAt(Math.floor(Math.random()*le.length));mt("password",X)},ot=()=>{A||T||(x(!1),S(Cg),j(null),N(!1))},We=le=>{S({firstName:le.first_name||"",lastName:le.last_name||"",email:le.email||"",password:"",role:R$e(le.role)}),N(!0),j(le.id),x(!0),f(null)},Ke=le=>{L({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[le.first_name," ",le.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:le.id,name:`${le.first_name||""} ${le.last_name||""}`.trim()||le.email||"user"}})},Ze=le=>{le.preventDefault();const X=w.firstName.trim(),Ae=w.lastName.trim(),Pe=w.email.trim(),Qe=w.password.trim(),nt=w.role,wt=!(y&&v);if(!X||!Pe||!nt){q.warn("Please fill in all required fields.");return}if(wt&&!Qe){q.warn("Please fill in all required fields.");return}if(Qe&&Qe.length<8){q.warn("Password should be at least 8 characters long.");return}const Te={first_name:X,last_name:Ae,email:Pe,role:nt};(wt||Qe)&&(Te.password=Qe);const it=`${X} ${Ae}`.trim(),$e=wt?"create":"update";L({title:$e==="create"?"Confirm New User":"Confirm User Update",message:$e==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:it})," with role"," ",n.jsx("span",{className:"font-semibold",children:qk(nt)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:it||Pe}),"?"]}),confirmLabel:$e==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:$e,payload:Te,targetId:v,name:it||Pe}})},Me=async()=>{Ee.length!==0&&L({title:"Delete Users",message:n.jsxs("span",{children:["Are you sure you want to deactivate"," ",n.jsx("span",{className:"font-semibold",children:Ee.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${Ee.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:Ee}})},je=le=>{if(le.target.checked){const X=ke.map(Ae=>Ae.id);se(X)}else se([])},ce=le=>{se(X=>X.includes(le)?X.filter(Ae=>Ae!==le):[...X,le])},oe=async()=>{if(!_?.action){L(null);return}const{action:le}=_,{type:X,payload:Ae,targetId:Pe,name:Qe}=le;M(!0),(X==="create"||X==="update")&&k(!0);try{if(X==="create"){const wt=(await ie.post("/users/createuser",Ae)).data;await re(),ye(wt.id),q.success(`User "${Qe}" created successfully.`),x(!1),S(Cg),j(null),N(!1)}else if(X==="update"){if(!Pe)throw new Error("Missing user identifier for update.");const wt=(await ie.put(`/users/updateuser/${Pe}`,Ae)).data;await re(),f(null),ye(wt.id),q.success(`User "${Qe}" updated successfully.`),x(!1),S(Cg),j(null),N(!1)}else if(X==="delete"){if(!Pe)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${Pe}`),s(nt=>nt.map(wt=>wt.id===Pe?{...wt,is_active:!1}:wt)),u&&u.id===Pe&&(f(null),te("")),q.success(`User "${Qe}" deactivated successfully.`)}else X==="bulk-delete"&&(await ie.delete("/users/admin/bulk-delete",{data:{user_ids:le.user_ids}}),s(nt=>nt.map(wt=>le.user_ids.includes(wt.id)?{...wt,is_active:!1}:wt)),u&&le.user_ids.includes(u.id)&&(f(null),te("")),q.success(`Successfully deactivated ${le.user_ids.length} users`),se([]))}catch(nt){console.error("User management error:",nt);const wt=X==="create"?"Failed to create user. Please review the details and try again.":X==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Te=nt.response?.data?.detail||wt;q.error(Te)}finally{(X==="create"||X==="update")&&k(!1),M(!1),L(null)}},U=()=>{T||L(null)},V=async()=>{if(!u||!Q)return;const le=u.is_active?"Active":"Inactive";if(Q===le)return;const X=Q==="Active";ae(!0);try{const Pe=(await ie.put(`/users/updateuser/${u.id}`,{is_active:X})).data;s(Qe=>Qe.map(nt=>nt.id===Pe.id?Pe:nt)),f(null),te(""),q.success(`User status updated to ${Q}`)}catch(Ae){console.error("Failed to update user status:",Ae);const Pe=Ae.response?.data?.detail||"Failed to update user status. Please try again.";q.error(Pe)}finally{ae(!1)}},be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!Se)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(nN,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Re,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:le=>l(le.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:le=>d(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:me.map(le=>n.jsx("option",{value:le.value,children:le.label},le.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ke.length>0&&ke.every(le=>Ee.includes(le.id)),onChange:je})}),n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ee.length>0?n.jsx("button",{onClick:Me,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${Ee.length} selected users`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):De.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):ke.map(le=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${le.highlight?"bg-green-50":""} ${le.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4",onClick:X=>X.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ee.includes(le.id),onChange:()=>ce(le.id)})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Oe(le),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[le.first_name," ",le.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Oe(le),children:le.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Oe(le),children:iA(le.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Oe(le),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${le.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:le.is_active?"Active":"Inactive"})})]},le.id))})]})}),n.jsx(an,{className:"mt-4",totalItems:De.length,pageSize:O,currentPage:R,onPrev:Ce,onNext:de,onPageSizeChange:le=>{I(le),z(1)},label:"users"})]}),ze=u?n.jsx("div",{id:"userModalBackdrop",onClick:Ge,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:et,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Qn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:z$e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),iA(u.role,{size:"md"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>We(u),disabled:T,children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ke(u),disabled:T,children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(le=>n.jsx("button",{onClick:()=>ee(le),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${B===le?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:le},le))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:B==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:iA(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,le=>le.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:I7(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?I7(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const le=encodeURIComponent(u.email),X=encodeURIComponent(""),Ae=encodeURIComponent(""),Pe=`https://mail.google.com/mail/?view=cm&fs=1&to=${le}&su=${X}&body=${Ae}`;window.open(Pe,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Q||(u.is_active?"Active":"Inactive"),onChange:le=>te(le.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:V,disabled:W||Q===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||Q===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[be,ze,n.jsx(U$e,{open:p,isEditing:y,isSubmitting:A,confirmProcessing:T,formData:w,onClose:ot,onSubmit:Ze,onChange:mt,onGeneratePassword:Fe}),n.jsx(B$e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:oe,onCancel:U})]})}function U$e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(hb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(hb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(hb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(hb,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...i1],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function hb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function B$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const H$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function q$e(){const{user:e,loading:t,fetchUser:a}=Gt(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,y]=h.useState(null),[N,v]=h.useState(null),j=h.useRef(null),[w,S]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[A,k]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const _=(z,O)=>{S(I=>({...I,[z]:O}))},L=(z,O)=>{k(I=>({...I,[z]:O}))},T=z=>{const O=z.target.files?.[0];if(!O)return;if(!O.type.startsWith("image/")){q.error("Please select an image file");return}if(O.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const I=new FileReader;I.onloadend=()=>{y(I.result),v(I.result)},I.readAsDataURL(O)},M=async z=>{if(z.preventDefault(),!w.firstName.trim()||!w.lastName.trim()){q.warn("Please fill in all required fields.");return}r(!0);try{const O={first_name:w.firstName.trim(),last_name:w.lastName.trim(),phone_number:w.phoneNumber.trim()||null};x!==null&&(O.profile_picture=x),await ie.put("/users/me",O),await a(),o(!1),y(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(O){console.error("Error updating account:",O);const I=O.response?.data?.detail||"Failed to update account information. Please try again.";q.error(I)}finally{r(!1)}},R=async z=>{if(z.preventDefault(),!A.newPassword||!A.confirmPassword){q.warn("Please fill in all password fields.");return}if(A.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(A.newPassword!==A.confirmPassword){q.warn("New password and confirm password do not match.");return}p(!0);try{const O={password:A.newPassword};await ie.put("/users/me",O),await a(),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),q.success("Password changed successfully!")}catch(O){console.error("Error changing password:",O);const I=O.response?.data?.detail||"Failed to change password. Please try again.";q.error(I)}finally{p(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Bt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Profile"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(en,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&n.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ua,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[N?n.jsx("div",{className:"relative",children:n.jsx("img",{src:N,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:H$e(e.first_name,e.last_name)}),i&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:j,accept:"image/*",onChange:T,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(l9,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?w.firstName:e.first_name," ",i?w.lastName:e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role.toUpperCase()==="CEO"&&"Admin"})]})]}),i?n.jsxs("form",{onSubmit:M,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.firstName,onChange:z=>_("firstName",z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.lastName,onChange:z=>_("lastName",z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(ta,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:w.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:w.phoneNumber,onChange:z=>_("phoneNumber",z.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{o(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),y(null),v(e.profile_picture||null),j.current&&(j.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[n.jsx(bL,{}),s?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(Ao,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:R,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:l?void 0:{WebkitTextSecurity:"disc"},value:A.newPassword,onChange:z=>L("newPassword",z.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>c(z=>!z),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?n.jsx(Tu,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:d?void 0:{WebkitTextSecurity:"disc"},value:A.confirmPassword,onChange:z=>L("confirmPassword",z.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>u(z=>!z),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":d?"Hide password":"Show password",children:d?n.jsx(Tu,{className:"size-5"}):n.jsx(Eu,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:f,children:[n.jsx(Ao,{}),f?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(d9,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function yZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=Nt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const u=e.id;o(!0);try{await ie.put(`/deals/admin/${u}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(f){console.error(f);const p=f.response?.data?.detail||"Failed to update deal status";q.error(p)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const u=encodeURIComponent(e.contact.email),f=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${u}?subject=${f}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:u=>r(u.target.value),disabled:i,children:c.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))}),n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function bZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l,relatedActs:c}){const d=Nt(),[u]=Fs(),f=u.get("id"),[p,x]=h.useState(e||null),[y,N]=h.useState(s||"Overview"),[v,j]=h.useState(null),[w,S]=h.useState(""),{userRole:A}=Qs(),{comments:k,addComment:_,refresh:L}=Aa({relatedType:"deal",relatedId:p?.id});h.useEffect(()=>{p?.id&&L()},[p?.id,L]);const T=s!==void 0?s:y;if(h.useEffect(()=>{A.toLowerCase()==="ceo"||A.toLowerCase()==="admin"?S("admin"):A.toLowerCase()==="group manager"||A.toLowerCase()==="group_manager"?S("group-manager"):A.toLowerCase()==="manager"?S("manager"):A.toLowerCase()==="sales"?S("sales"):S("guest")},[A]),h.useEffect(()=>{(async()=>{if(f&&!e)try{const B=((await ie.get("/deals/admin/fetch-all")).data||[]).find(ee=>ee.id===parseInt(f));if(B){const ee={...B,amount:typeof B.amount=="number"?B.amount:parseFloat(B.amount||0),probability:B.probability||0};x(ee)}else console.warn("Deal not found with ID:",f)}catch(O){console.error("Error fetching deal:",O)}})()},[f,e]),!p&&!f||f&&!p)return null;const M=z=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[z]||"bg-gray-100 text-gray-700";function R(z){return z?new Date(z).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${M(p.stage)}`,children:p.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",R(p.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Kt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>n.jsx("button",{onClick:()=>{r?r(z):N(z)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${T===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[T==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",p.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const z=(p?.stage||"PROSPECTING").toUpperCase(),I=(ee=>ee==="PROSPECTING"?0:ee==="QUALIFICATION"?1:ee==="PROPOSAL"?2:ee==="NEGOTIATION"?3:ee==="CLOSED_WON"||ee==="CLOSED_LOST"?4:-1)(z);return[0,1,2,3,4].map(ee=>I===ee?"orange":I>ee?"green":"gray").map((ee,Q)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${ee==="green"?"bg-green-500 border-green-500":ee==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),Q<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},Q))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((z,O)=>n.jsx("span",{className:"text-center flex-1 break-words",children:z},O))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",p.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),T==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),n.jsx(_a,{comments:k,onAddComment:_})]}),s==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),v==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map((z,O)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/tasks`,{state:{taskID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||"No description"}),z.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",z.assigned_to.first_name," ",z.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R(z.due_date||z.created_at)})]},`task-${O}`))})]}),c.meetings&&c.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),v==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map((z,O)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/meetings`,{state:{meetingID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||z.location||"No description"}),z.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",z.host.first_name," ",z.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R(z.start_time||z.created_at)})]},`meeting-${O}`))})]}),c.calls&&c.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),v==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map((z,O)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/calls`,{state:{callID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R(z.call_time||z.created_at)})]},`call-${O}`))})]}),c.quotes&&c.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),v==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map((z,O)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/quotes`,{state:{quoteID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(z.quote_id?z.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R(z.presented_date)||""})]},`quote-${O}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]}),T==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(yZ,{selectedDeal:p,onStatusUpdate:l,onClose:a})})]})]})]})})}function G$e(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=Nt(),t=Xt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,N]=h.useState(null),[v,j]=h.useState(!1),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,L]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(!1),[O,I]=h.useState([]),[B,ee]=h.useState(!1),[Q,te]=h.useState(null),[W,ae]=h.useState([]),[Ee,se]=h.useState([]),[Y,pe]=h.useState([]),[Se,me]=h.useState({}),[ye,re]=h.useState(null);h.useEffect(()=>{const he=t.state,F=he?.dealID;if(F&&!he?.openDealModal){re(F),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(ye&&y?.length>0&&!v){const he=y.find(F=>F.id===ye);he?d(he):q.error("Deal not found."),re(null)}},[ye,y,v]);const[De,ve]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ke={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Ce=he=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[he]||he||"--",de=he=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[he]||"bg-gray-100 text-gray-700",Re=h.useCallback(async he=>{try{const F=await ie.get(`/activities/deal/${he}`);me(F.data&&typeof F.data=="object"?F.data:{})}catch(F){console.error(F),F.response?.status===404&&(console.warn("No activities found for this account."),me({}))}},[]),Oe=h.useMemo(()=>{const he=a.trim().toLowerCase(),F=r.trim(),G=o.trim();return(y??[]).filter(Ne=>{const ge=[Ne?.name,Ne?.description,Ne?.account?.name,Ne?.contact?.first_name,Ne?.contact?.last_name,Ne?.assigned_deals?.first_name,Ne?.assigned_deals?.last_name],fe=he===""||ge.some(ne=>ne==null||ne===""?!1:ne.toString().toLowerCase().includes(he)),Ue=F==="Filter by Stage"||F===""||Ne.stage===ke[F]||Ne.stage===F,K=G==="Filter by Owner"||G===""||`${Ne.assigned_deals?.first_name||""} ${Ne.assigned_deals?.last_name||""}`.trim().toLowerCase()===G.toLowerCase();return fe&&Ue&&K})},[y,a,r,o]),Ge=Math.max(1,Math.ceil(Oe.length/A)||1);h.useEffect(()=>{S(1)},[a,r,o,A]),h.useEffect(()=>{S(he=>{const F=Math.max(1,Math.ceil(Oe.length/A)||1);return he>F?F:he})},[Oe.length,A]);const et=h.useMemo(()=>{const he=(w-1)*A;return Oe.slice(he,he+A)},[Oe,w,A]),mt=()=>S(he=>Math.max(he-1,1)),Fe=()=>S(he=>Math.min(he+1,Ge)),ot=()=>{ve({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ee(!1),te(null),x(!0)},We=async()=>{j(!0);try{const he=await ie.get("/deals/admin/fetch-all"),G=[...Array.isArray(he.data)?he.data:[]].sort((Ne,ge)=>{const fe=Ne?.created_at?new Date(Ne.created_at).getTime():0;return(ge?.created_at?new Date(ge.created_at).getTime():0)-fe});N(G)}catch(he){he.response&&he.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(he)}finally{j(!1)}},Ke=async()=>{try{const he=await ie.get("/accounts/admin/fetch-all");ae(Array.isArray(he.data)?he.data:[])}catch(he){console.error(he),he.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},Ze=async()=>{try{const he=await ie.get("/contacts/admin/fetch-all");se(Array.isArray(he.data)?he.data:[])}catch(he){console.error(he),he.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},Me=async()=>{try{const he=await ie.get("/users/all");pe(Array.isArray(he.data)?he.data:[])}catch(he){console.error(he),he.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{We(),Ke(),Ze(),Me()},[]);const je=he=>{he&&(ve({id:he.id||null,name:he.name||"",account_id:he.account_id?.toString()||"",primary_contact_id:he.primary_contact_id?.toString()||"",stage:he.stage||"PROPOSAL",amount:he.amount?.toString()||"",close_date:he.close_date?new Date(he.close_date).toISOString().split("T")[0]:"",assigned_to:he.assigned_to?.toString()||"",currency:he.currency||"PHP",description:he.description||""}),ee(!0),te(he.id),d(null),x(!0))},ce=async(he=!1)=>{try{const F=await ie.get("/deals/admin/fetch-all"),Ne=[...Array.isArray(F.data)?F.data:[]].sort((ge,fe)=>{const Ue=ge?.created_at?new Date(ge.created_at).getTime():0;return(fe?.created_at?new Date(fe.created_at).getTime():0)-Ue});if(N(Ne),!he&&c&&c.id){const ge=Ne.find(fe=>fe.id===c.id);ge&&d({...ge})}}catch(F){console.error("Failed to refresh deal data:",F),await We()}},oe=he=>{const F=he.name.trim();if(!F){q.error("Deal name is required.");return}if(!he.account_id){q.error("Account is required.");return}const G=B&&Q?"update":"create",Ne=F;M({title:G==="create"?"Confirm New Deal":"Confirm Update",message:G==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:Ne}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Ne}),"?"]}),confirmLabel:G==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:G,formData:he,targetId:Q||null,name:Ne}})},U=he=>{if(!he)return;const F=he.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:F}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:he.id,name:F}})},V=he=>{if(he.target.checked){const F=et.map(G=>G.id);I(F)}else I([])},be=he=>{I(F=>F.includes(he)?F.filter(G=>G!==he):[...F,he])},ze=async()=>{O.length!==0&&M({title:"Delete Deals",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:O.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${O.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:O}})},le=async()=>{if(!T?.action){M(null);return}const{action:he}=T,{type:F,formData:G,targetId:Ne,name:ge}=he;z(!0);try{if(F==="create"){L(!0);const fe={name:G.name.trim(),account_id:parseInt(G.account_id),primary_contact_id:G.primary_contact_id?parseInt(G.primary_contact_id):null,stage:G.stage,amount:G.amount?parseFloat(G.amount):null,currency:G.currency||"PHP",close_date:G.close_date||null,description:G.description||null,assigned_to:G.assigned_to?parseInt(G.assigned_to):null};await ie.post("/deals/admin/create",fe),q.success(`Deal "${ge}" created successfully.`),x(!1),await We()}else if(F==="update"){if(!Ne)throw new Error("Missing deal identifier for update.");L(!0);const fe={};G.name!==void 0&&(fe.name=G.name.trim()),G.account_id!==void 0&&G.account_id!==""&&(fe.account_id=parseInt(G.account_id)),G.primary_contact_id!==void 0&&(fe.primary_contact_id=G.primary_contact_id?parseInt(G.primary_contact_id):null),G.stage!==void 0&&(fe.stage=G.stage),G.amount!==void 0&&G.amount!==""&&(fe.amount=parseFloat(G.amount)),G.currency!==void 0&&(fe.currency=G.currency),G.close_date!==void 0&&(fe.close_date=G.close_date||null),G.description!==void 0&&(fe.description=G.description||null),G.assigned_to!==void 0&&(fe.assigned_to=G.assigned_to?parseInt(G.assigned_to):null),await ie.put(`/deals/admin/${Ne}`,fe),q.success(`Deal "${ge}" updated successfully.`),x(!1),await We()}else if(F==="delete"){if(!Ne)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${Ne}`),q.success(`Deal "${ge}" deleted successfully.`),c?.id===Ne&&d(null),await We()}else if(F==="bulk-delete"){const{dealIds:fe}=he;await ie.delete("/deals/admin/bulk-delete",{data:{deal_ids:fe}}),q.success(`Successfully deleted ${fe.length} deals`),I([]),await We()}}catch(fe){console.error(fe);const Ue=F==="create"?"Failed to create deal. Please review the details and try again.":F==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",K=fe.response?.data?.detail||Ue;q.error(K)}finally{(F==="create"||F==="update")&&L(!1),z(!1),M(null)}},X=()=>{R||M(null)},Ae=()=>{x(!1),ve({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ee(!1),te(null),L(!1)},Pe=(y??[]).filter(he=>he.stage==="PROSPECTING").length,Qe=(y??[]).filter(he=>he.stage==="QUALIFICATION").length,nt=(y??[]).filter(he=>he.stage==="PROPOSAL").length,wt=(y??[]).filter(he=>he.stage==="NEGOTIATION").length,Te=(y??[]).filter(he=>he.stage==="CLOSED_WON").length,it=(y??[]).filter(he=>he.stage==="CLOSED_LOST").length,$e=(y??[]).filter(he=>he.stage==="CLOSED_CANCELLED").length,ue=[{title:"Prospecting",value:Pe,icon:aN,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Qe,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:nt,icon:Jt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:wt,icon:rd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Te,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:it,icon:zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:$e,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Jt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:ot,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ue.map(he=>n.jsx(V$e,{...he},he.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:he=>s(he.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:he=>i(he.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:he=>l(he.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(he=>`${he.assigned_deals?.first_name} ${he.assigned_deals?.last_name}`))].map((he,F)=>n.jsx("option",{value:he,children:he},F))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:et.length>0&&et.every(he=>O.includes(he.id)),onChange:V})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:O.length>0?n.jsx("button",{onClick:ze,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${O.length} selected items`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:Oe.length>0?et.map(he=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...he}),Re(he.id)},children:[n.jsx("td",{className:"py-3 px-4",onClick:F=>F.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:O.includes(he.id),onChange:()=>be(he.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:he.deal_id?he.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:he.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:he.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:he.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:he.contact?.first_name&&he.contact?.last_name?`${he.contact.first_name} ${he.contact.last_name}`:he.contact?.first_name||he.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${de(he.stage)}`,children:Ce(he.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",he.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:he.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:he.assigned_deals?.first_name&&he.assigned_deals?.last_name?`${he.assigned_deals.first_name} ${he.assigned_deals.last_name}`:he.assigned_deals?.first_name||he.assigned_deals?.last_name||"--"})]},he.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Oe.length,pageSize:A,currentPage:w,onPrev:mt,onNext:Fe,onPageSizeChange:he=>{k(he),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(Y$e,{onClose:Ae,formData:De,setFormData:ve,isEditing:B,onSubmit:oe,isSubmitting:_||R,accounts:W,contacts:Ee,users:Y}),c&&n.jsx(bZ,{relatedActs:Se,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:je,onDelete:U,onStatusUpdate:ce}),T&&n.jsx(W$e,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:le,onCancel:X,loading:R})]})}function W$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function V$e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Y$e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[]}){const[d,u]=h.useState(!1),f=y=>{if(y.preventDefault(),u(!0),!t.name?.trim()){q.error("Deal name is required.");return}const N=Number(t.amount);if(!t.amount||isNaN(N)||N<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},p=y=>{y.target.id==="modalBackdrop"&&e()},x=h.useMemo(()=>{const y=String(t.account_id||"").trim(),N=Array.isArray(l)?l:[];return y?N.filter(v=>{const w=[v?.account_id,v?.accountId,v?.account?.id,v?.account?.account_id,v?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return w?String(w)===y:!1}):N},[l,t.account_id]);return h.useEffect(()=>{const y=String(t.account_id||"").trim(),N=String(t.primary_contact_id||"").trim();if(!N||!y)return;x.some(j=>String(j?.id)===N)||a(j=>({...j,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,a]),n.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:y=>y.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:f,noValidate:!0,children:[n.jsx(oA,{label:"Deal Name",name:"name",value:t.name,onChange:y=>a({...t,name:y.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(lA,{label:"Account",value:t.account_id||"",onChange:y=>a({...t,account_id:y}),items:o||[],getLabel:y=>y?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:d}),n.jsx(lA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:y=>a({...t,primary_contact_id:y}),items:x||[],getLabel:y=>`${y?.first_name??""} ${y?.last_name??""}`.trim()||y?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:d,disabled:i}),n.jsx(R7,{label:"Stage",name:"stage",value:t.stage,onChange:y=>a({...t,stage:y.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(oA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:y=>a({...t,amount:y.target.value}),placeholder:"0",required:!0,isSubmitted:d}),n.jsx(R7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:y=>a({...t,currency:y.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(oA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:y=>a({...t,close_date:y.target.value}),disabled:i}),n.jsx(lA,{label:"Assign To",value:t.assigned_to||"",onChange:y=>a({...t,assigned_to:y}),items:c||[],getLabel:y=>`${y?.first_name??""} ${y?.last_name??""}`.trim()||y?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(K$e,{label:"Description",name:"description",value:t.description,onChange:y=>a({...t,description:y.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function oA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function R7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function lA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Q$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function Q$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function K$e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var X$e=Object.defineProperty,Z$e=(e,t,a)=>t in e?X$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,cA=(e,t,a)=>(Z$e(e,typeof t!="symbol"?t+"":t,a),a);let J$e=class{constructor(){cA(this,"current",this.detect()),cA(this,"handoffState","pending"),cA(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Oo=new J$e;function h0(e){var t;return Oo.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function Gk(e){var t,a;return Oo.isServer?null:e==null?document:(a=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?a:document}function vZ(e){var t,a;return(a=(t=Gk(e))==null?void 0:t.activeElement)!=null?a:null}function e6e(e){return vZ(e)===e}function o1(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function cc(){let e=[],t={addEventListener(a,s,r,i){return a.addEventListener(s,r,i),t.add(()=>a.removeEventListener(s,r,i))},requestAnimationFrame(...a){let s=requestAnimationFrame(...a);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...a){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...a))},setTimeout(...a){let s=setTimeout(...a);return t.add(()=>clearTimeout(s))},microTask(...a){let s={current:!0};return o1(()=>{s.current&&a[0]()}),t.add(()=>{s.current=!1})},style(a,s,r){let i=a.style.getPropertyValue(s);return Object.assign(a.style,{[s]:r}),this.add(()=>{Object.assign(a.style,{[s]:i})})},group(a){let s=cc();return a(s),this.add(()=>s.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let s=e.indexOf(a);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let a of e.splice(0))a()}};return t}function l1(){let[e]=h.useState(cc);return h.useEffect(()=>()=>e.dispose(),[e]),e}let xr=(e,t)=>{Oo.isServer?h.useEffect(e,t):h.useLayoutEffect(e,t)};function rm(e){let t=h.useRef(e);return xr(()=>{t.current=e},[e]),t}let Wn=function(e){let t=rm(e);return pt.useCallback((...a)=>t.current(...a),[t])};function g0(e){return h.useMemo(()=>e,Object.values(e))}let t6e=h.createContext(void 0);function n6e(){return h.useContext(t6e)}function Wk(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Kl(e,t,...a){if(e in t){let r=t[e];return typeof r=="function"?r(...a):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Kl),s}var kw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(kw||{}),Zc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Zc||{});function Ti(){let e=s6e();return h.useCallback(t=>a6e({mergeRefs:e,...t}),[e])}function a6e({ourProps:e,theirProps:t,slot:a,defaultTag:s,features:r,visible:i=!0,name:o,mergeRefs:l}){l=l??r6e;let c=wZ(t,e);if(i)return gb(c,a,s,o,l);let d=r??0;if(d&2){let{static:u=!1,...f}=c;if(u)return gb(f,a,s,o,l)}if(d&1){let{unmount:u=!0,...f}=c;return Kl(u?0:1,{0(){return null},1(){return gb({...f,hidden:!0,style:{display:"none"}},a,s,o,l)}})}return gb(c,a,s,o,l)}function gb(e,t={},a,s,r){let{as:i=a,children:o,refName:l="ref",...c}=dA(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},u=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let p=!1,x=[];for(let[y,N]of Object.entries(t))typeof N=="boolean"&&(p=!0),N===!0&&x.push(y.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(p){f["data-headlessui-state"]=x.join(" ");for(let y of x)f[`data-${y}`]=""}}if(sp(i)&&(Object.keys(tu(c)).length>0||Object.keys(tu(f)).length>0))if(!h.isValidElement(u)||Array.isArray(u)&&u.length>1||o6e(u)){if(Object.keys(tu(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(tu(c)).concat(Object.keys(tu(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,x=p?.className,y=typeof x=="function"?(...j)=>Wk(x(...j),c.className):Wk(x,c.className),N=y?{className:y}:{},v=wZ(u.props,tu(dA(c,["ref"])));for(let j in f)j in v&&delete f[j];return h.cloneElement(u,Object.assign({},v,f,d,{ref:r(i6e(u),d.ref)},N))}return h.createElement(i,Object.assign({},dA(c,["ref"]),!sp(i)&&d,!sp(i)&&f),u)}function s6e(){let e=h.useRef([]),t=h.useCallback(a=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(a):s.current=a)},[]);return(...a)=>{if(!a.every(s=>s==null))return e.current=a,t}}function r6e(...e){return e.every(t=>t==null)?void 0:t=>{for(let a of e)a!=null&&(typeof a=="function"?a(t):a.current=t)}}function wZ(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(a[r]!=null||(a[r]=[]),a[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(a[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in a)Object.assign(t,{[s](r,...i){let o=a[s];for(let l of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function Cr(e){var t;return Object.assign(h.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function tu(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function dA(e,t=[]){let a=Object.assign({},e);for(let s of t)s in a&&delete a[s];return a}function i6e(e){return pt.version.split(".")[0]>="19"?e.props.ref:e.ref}function sp(e){return e===h.Fragment||e===Symbol.for("react.fragment")}function o6e(e){return sp(e.type)}let l6e="span";var Lw=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Lw||{});function c6e(e,t){var a;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(a=r["aria-hidden"])!=null?a:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Ti()({ourProps:i,theirProps:r,slot:{},defaultTag:l6e,name:"Hidden"})}let Vk=Cr(c6e);function d6e(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function id(e){return d6e(e)&&"tagName"in e}function qu(e){return id(e)&&"accessKey"in e}function Jc(e){return id(e)&&"tabIndex"in e}function u6e(e){return id(e)&&"style"in e}function m6e(e){return qu(e)&&e.nodeName==="IFRAME"}function f6e(e){return qu(e)&&e.nodeName==="INPUT"}let NZ=Symbol();function h6e(e,t=!0){return Object.assign(e,{[NZ]:t})}function Yo(...e){let t=h.useRef(e);h.useEffect(()=>{t.current=e},[e]);let a=Wn(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[NZ])?void 0:a}let GD=h.createContext(null);GD.displayName="DescriptionContext";function jZ(){let e=h.useContext(GD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,jZ),t}return e}function g6e(){let[e,t]=h.useState([]);return[e.length>0?e.join(" "):void 0,h.useMemo(()=>function(a){let s=Wn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=h.useMemo(()=>({register:s,slot:a.slot,name:a.name,props:a.props,value:a.value}),[s,a.slot,a.name,a.props,a.value]);return pt.createElement(GD.Provider,{value:r},a.children)},[t])]}let p6e="p";function x6e(e,t){let a=h.useId(),s=n6e(),{id:r=`headlessui-description-${a}`,...i}=e,o=jZ(),l=Yo(t);xr(()=>o.register(r),[r,o.register]);let c=g0({...o.slot,disabled:s||!1}),d={ref:l,...o.props,id:r};return Ti()({ourProps:d,theirProps:i,slot:c,defaultTag:p6e,name:o.name||"Description"})}let y6e=Cr(x6e),b6e=Object.assign(y6e,{});var CZ=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(CZ||{});let v6e=h.createContext(()=>{});function w6e({value:e,children:t}){return pt.createElement(v6e.Provider,{value:e},t)}let SZ=class extends Map{constructor(t){super(),this.factory=t}get(t){let a=super.get(t);return a===void 0&&(a=this.factory(t),this.set(t,a)),a}};var N6e=Object.defineProperty,j6e=(e,t,a)=>t in e?N6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,C6e=(e,t,a)=>(j6e(e,t+"",a),a),_Z=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},si=(e,t,a)=>(_Z(e,t,"read from private field"),a?a.call(e):t.get(e)),uA=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},z7=(e,t,a,s)=>(_Z(e,t,"write to private field"),t.set(e,a),a),xo,Gg,Wg;let S6e=class{constructor(t){uA(this,xo,{}),uA(this,Gg,new SZ(()=>new Set)),uA(this,Wg,new Set),C6e(this,"disposables",cc()),z7(this,xo,t),Oo.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return si(this,xo)}subscribe(t,a){if(Oo.isServer)return()=>{};let s={selector:t,callback:a,current:t(si(this,xo))};return si(this,Wg).add(s),this.disposables.add(()=>{si(this,Wg).delete(s)})}on(t,a){return Oo.isServer?()=>{}:(si(this,Gg).get(t).add(a),this.disposables.add(()=>{si(this,Gg).get(t).delete(a)}))}send(t){let a=this.reduce(si(this,xo),t);if(a!==si(this,xo)){z7(this,xo,a);for(let s of si(this,Wg)){let r=s.selector(si(this,xo));AZ(s.current,r)||(s.current=r,s.callback(r))}for(let s of si(this,Gg).get(t.type))s(si(this,xo),t)}}};xo=new WeakMap,Gg=new WeakMap,Wg=new WeakMap;function AZ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:mA(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:mA(e.entries(),t.entries()):F7(e)&&F7(t)?mA(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function mA(e,t){do{let a=e.next(),s=t.next();if(a.done&&s.done)return!0;if(a.done||s.done||!Object.is(a.value,s.value))return!1}while(!0)}function F7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var _6e=Object.defineProperty,A6e=(e,t,a)=>t in e?_6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,U7=(e,t,a)=>(A6e(e,typeof t!="symbol"?t+"":t,a),a),T6e=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(T6e||{});let E6e={0(e,t){let a=t.id,s=e.stack,r=e.stack.indexOf(a);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(a),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,a]}},1(e,t){let a=t.id,s=e.stack.indexOf(a);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},k6e=class TZ extends S6e{constructor(){super(...arguments),U7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),U7(this,"selectors",{isTop:(t,a)=>t.stack[t.stack.length-1]===a,inStack:(t,a)=>t.stack.includes(a)})}static new(){return new TZ({stack:[]})}reduce(t,a){return Kl(a.type,E6e,t,a)}};const EZ=new SZ(()=>k6e.new());function kZ(e,t,a=AZ){return S5e.useSyncExternalStoreWithSelector(Wn(s=>e.subscribe(L6e,s)),Wn(()=>e.state),Wn(()=>e.state),Wn(t),a)}function L6e(e){return e}function p0(e,t){let a=h.useId(),s=EZ.get(t),[r,i]=kZ(s,h.useCallback(o=>[s.selectors.isTop(o,a),s.selectors.inStack(o,a)],[s,a]));return xr(()=>{if(e)return s.actions.push(a),()=>s.actions.pop(a)},[s,e,a]),e?i?r:!0:!1}let Yk=new Map,rp=new Map;function B7(e){var t;let a=(t=rp.get(e))!=null?t:0;return rp.set(e,a+1),a!==0?()=>H7(e):(Yk.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>H7(e))}function H7(e){var t;let a=(t=rp.get(e))!=null?t:1;if(a===1?rp.delete(e):rp.set(e,a-1),a!==1)return;let s=Yk.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,Yk.delete(e))}function P6e(e,{allowed:t,disallowed:a}={}){let s=p0(e,"inert-others");xr(()=>{var r,i;if(!s)return;let o=cc();for(let c of(r=a?.())!=null?r:[])c&&o.add(B7(c));let l=(i=t?.())!=null?i:[];for(let c of l){if(!c)continue;let d=h0(c);if(!d)continue;let u=c.parentElement;for(;u&&u!==d.body;){for(let f of u.children)l.some(p=>f.contains(p))||o.add(B7(f));u=u.parentElement}}return o.dispose},[s,t,a])}function D6e(e,t,a){let s=rm(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});h.useEffect(()=>{if(!e)return;let r=t===null?null:qu(t)?t:t.current;if(!r)return;let i=cc();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,s,e])}let Pw=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),O6e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Tl=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Tl||{}),Qk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Qk||{}),M6e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(M6e||{});function I6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Pw)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function $6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(O6e)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var LZ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(LZ||{});function R6e(e,t=0){var a;return e===((a=h0(e))==null?void 0:a.body)?!1:Kl(t,{0(){return e.matches(Pw)},1(){let s=e;for(;s!==null;){if(s.matches(Pw))return!0;s=s.parentElement}return!1}})}var z6e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(z6e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ml(e){e?.focus({preventScroll:!0})}let F6e=["textarea","input"].join(",");function U6e(e){var t,a;return(a=(t=e?.matches)==null?void 0:t.call(e,F6e))!=null?a:!1}function B6e(e,t=a=>a){return e.slice().sort((a,s)=>{let r=t(a),i=t(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ip(e,t,{sorted:a=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?Gk(e[0]):document:Gk(e),o=Array.isArray(e)?a?B6e(e):e:t&64?$6e(e):I6e(e);r.length>0&&o.length>1&&(o=o.filter(x=>!r.some(y=>y!=null&&"current"in y?y?.current===x:y===x))),s=s??i?.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},u=0,f=o.length,p;do{if(u>=f||u+f<=0)return 0;let x=c+u;if(t&16)x=(x+f)%f;else{if(x<0)return 3;if(x>=f)return 1}p=o[x],p?.focus(d),u+=l}while(p!==vZ(p));return t&6&&U6e(p)&&p.select(),2}function PZ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function H6e(){return/Android/gi.test(window.navigator.userAgent)}function q7(){return PZ()||H6e()}function pb(e,t,a,s){let r=rm(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function DZ(e,t,a,s){let r=rm(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const G7=30;function q6e(e,t,a){let s=rm(a),r=h.useCallback(function(l,c){if(l.defaultPrevented)return;let d=c(l);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of u)if(f!==null&&(f.contains(d)||l.composed&&l.composedPath().includes(f)))return;return!R6e(d,LZ.Loose)&&d.tabIndex!==-1&&l.preventDefault(),s.current(l,d)},[s,t]),i=h.useRef(null);pb(e,"pointerdown",l=>{var c,d;q7()||(i.current=((d=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:d[0])||l.target)},!0),pb(e,"pointerup",l=>{if(q7()||!i.current)return;let c=i.current;return i.current=null,r(l,()=>c)},!0);let o=h.useRef({x:0,y:0});pb(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),pb(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=G7||Math.abs(c.y-o.current.y)>=G7))return r(l,()=>Jc(l.target)?l.target:null)},!0),DZ(e,"blur",l=>r(l,()=>m6e(window.document.activeElement)?window.document.activeElement:null),!0)}function WD(...e){return h.useMemo(()=>h0(...e),[...e])}function OZ(e,t,a,s){let r=rm(a);h.useEffect(()=>{e=e??window;function i(o){r.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function G6e(e){return h.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function W6e(e,t){let a=e(),s=new Set;return{getSnapshot(){return a},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let o=t[r].call(a,...i);o&&(a=o,s.forEach(l=>l()))}}}function V6e(){let e;return{before({doc:t}){var a;let s=t.documentElement,r=(a=t.defaultView)!=null?a:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:a}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);a.style(s,"paddingRight",`${i}px`)}}}function Y6e(){return PZ()?{before({doc:e,d:t,meta:a}){function s(r){for(let i of a().containers)for(let o of i())if(o.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=cc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(Jc(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),u=e.querySelector(d);Jc(u)&&!s(u)&&(o=u)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),Jc(c.target)&&u6e(c.target))if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;l.style(d,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(Jc(l.target)){if(f6e(l.target))return;if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Q6e(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function W7(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let hu=W6e(()=>new Map,{PUSH(e,t){var a;let s=(a=this.get(e))!=null?a:{doc:e,count:0,d:cc(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=W7(s.meta),this.set(e,s),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t),a.computedMeta=W7(a.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[Y6e(),V6e(),Q6e()];a.forEach(({before:s})=>s?.(t)),a.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});hu.subscribe(()=>{let e=hu.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let s=t.get(a.doc)==="hidden",r=a.count!==0;(r&&!s||!r&&s)&&hu.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&hu.dispatch("TEARDOWN",a)}});function K6e(e,t,a=()=>({containers:[]})){let s=G6e(hu),r=t?s.get(t):void 0,i=r?r.count>0:!1;return xr(()=>{if(!(!t||!e))return hu.dispatch("PUSH",t,a),()=>hu.dispatch("POP",t,a)},[e,t]),i}function X6e(e,t,a=()=>[document.body]){let s=p0(e,"scroll-lock");K6e(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],a]}})}function Z6e(e=0){let[t,a]=h.useState(e),s=h.useCallback(c=>a(c),[]),r=h.useCallback(c=>a(d=>d|c),[]),i=h.useCallback(c=>(t&c)===c,[t]),o=h.useCallback(c=>a(d=>d&~c),[]),l=h.useCallback(c=>a(d=>d^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:l}}var J6e={},V7,Y7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((V7=process==null?void 0:J6e)==null?void 0:V7.NODE_ENV)==="test"&&typeof((Y7=Element?.prototype)==null?void 0:Y7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var eRe=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(eRe||{});function tRe(e){let t={};for(let a in e)e[a]===!0&&(t[`data-${a}`]="");return t}function nRe(e,t,a,s){let[r,i]=h.useState(a),{hasFlag:o,addFlag:l,removeFlag:c}=Z6e(e&&r?3:0),d=h.useRef(!1),u=h.useRef(!1),f=l1();return xr(()=>{var p;if(e){if(a&&i(!0),!t){a&&l(3);return}return(p=s?.start)==null||p.call(s,a),aRe(t,{inFlight:d,prepare(){u.current?u.current=!1:u.current=d.current,d.current=!0,!u.current&&(a?(l(3),c(4)):(l(4),c(2)))},run(){u.current?a?(c(3),l(4)):(c(4),l(3)):a?c(1):l(1)},done(){var x;u.current&&iRe(t)||(d.current=!1,c(7),a||i(!1),(x=s?.end)==null||x.call(s,a))}})}},[e,a,t,f]),e?[r,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function aRe(e,{prepare:t,run:a,done:s,inFlight:r}){let i=cc();return rRe(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(sRe(e,s))})}),i.dispose}function sRe(e,t){var a,s;let r=cc();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let o=(s=(a=e.getAnimations)==null?void 0:a.call(e).filter(l=>l instanceof CSSTransition))!=null?s:[];return o.length===0?(t(),r.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),r.dispose)}function rRe(e,{inFlight:t,prepare:a}){if(t!=null&&t.current){a();return}let s=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=s}function iRe(e){var t,a;return((a=(t=e.getAnimations)==null?void 0:t.call(e))!=null?a:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function VD(e,t){let a=h.useRef([]),s=Wn(e);h.useEffect(()=>{let r=[...a.current];for(let[i,o]of t.entries())if(a.current[i]!==o){let l=s(t,r);return a.current=t,l}},[s,...t])}let c1=h.createContext(null);c1.displayName="OpenClosedContext";var qi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(qi||{});function d1(){return h.useContext(c1)}function oRe({value:e,children:t}){return pt.createElement(c1.Provider,{value:e},t)}function lRe({children:e}){return pt.createElement(c1.Provider,{value:null},e)}function cRe(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Yc=[];cRe(()=>{function e(t){if(!Jc(t.target)||t.target===document.body||Yc[0]===t.target)return;let a=t.target;a=a.closest(Pw),Yc.unshift(a??t.target),Yc=Yc.filter(s=>s!=null&&s.isConnected),Yc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function MZ(e){let t=Wn(e),a=h.useRef(!1);h.useEffect(()=>(a.current=!1,()=>{a.current=!0,o1(()=>{a.current&&t()})}),[t])}let IZ=h.createContext(!1);function dRe(){return h.useContext(IZ)}function Q7(e){return pt.createElement(IZ.Provider,{value:e.force},e.children)}function uRe(e){let t=dRe(),a=h.useContext(RZ),[s,r]=h.useState(()=>{var i;if(!t&&a!==null)return(i=a.current)!=null?i:null;if(Oo.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return h.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),h.useEffect(()=>{t||a!==null&&r(a.current)},[a,r,t]),s}let $Z=h.Fragment,mRe=Cr(function(e,t){let{ownerDocument:a=null,...s}=e,r=h.useRef(null),i=Yo(h6e(p=>{r.current=p}),t),o=WD(r.current),l=a??o,c=uRe(l),d=h.useContext(Kk),u=l1(),f=Ti();return MZ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Hi.createPortal(pt.createElement("div",{"data-headlessui-portal":"",ref:p=>{u.dispose(),d&&p&&u.add(d.register(p))}},f({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:$Z,name:"Portal"})),c):null});function fRe(e,t){let a=Yo(t),{enabled:s=!0,ownerDocument:r,...i}=e,o=Ti();return s?pt.createElement(mRe,{...i,ownerDocument:r,ref:a}):o({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:$Z,name:"Portal"})}let hRe=h.Fragment,RZ=h.createContext(null);function gRe(e,t){let{target:a,...s}=e,r={ref:Yo(t)},i=Ti();return pt.createElement(RZ.Provider,{value:a},i({ourProps:r,theirProps:s,defaultTag:hRe,name:"Popover.Group"}))}let Kk=h.createContext(null);function pRe(){let e=h.useContext(Kk),t=h.useRef([]),a=Wn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Wn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),r=h.useMemo(()=>({register:a,unregister:s,portals:t}),[a,s,t]);return[t,h.useMemo(()=>function({children:i}){return pt.createElement(Kk.Provider,{value:r},i)},[r])]}let xRe=Cr(fRe),zZ=Cr(gRe),yRe=Object.assign(xRe,{Group:zZ});function bRe(e,t=typeof document<"u"?document.defaultView:null,a){let s=p0(e,"escape");OZ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===CZ.Escape&&a(r))})}function vRe(){var e;let[t]=h.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,s]=h.useState((e=t?.matches)!=null?e:!1);return xr(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),a}function wRe({defaultContainers:e=[],portals:t,mainTreeNode:a}={}){let s=Wn(()=>{var r,i;let o=h0(a),l=[];for(let c of e)c!==null&&(id(c)?l.push(c):"current"in c&&id(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(r=o?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&id(c)&&c.id!=="headlessui-portal-root"&&(a&&(c.contains(a)||c.contains((i=a?.getRootNode())==null?void 0:i.host))||l.some(d=>c.contains(d))||l.push(c));return l});return{resolveContainers:s,contains:Wn(r=>s().some(i=>i.contains(r)))}}let FZ=h.createContext(null);function K7({children:e,node:t}){let[a,s]=h.useState(null),r=UZ(t??a);return pt.createElement(FZ.Provider,{value:r},e,r===null&&pt.createElement(Vk,{features:Lw.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=h0(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&id(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function UZ(e=null){var t;return(t=h.useContext(FZ))!=null?t:e}function NRe(){let e=typeof document>"u";return"useSyncExternalStore"in Su?(t=>t.useSyncExternalStore)(Su)(()=>()=>{},()=>!1,()=>!e):!1}function u1(){let e=NRe(),[t,a]=h.useState(Oo.isHandoffComplete);return t&&Oo.isHandoffComplete===!1&&a(!1),h.useEffect(()=>{t!==!0&&a(!0)},[t]),h.useEffect(()=>Oo.handoff(),[]),e?!1:t}function YD(){let e=h.useRef(!1);return xr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Vg=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Vg||{});function jRe(){let e=h.useRef(0);return DZ(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function BZ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let a of e.current)id(a.current)&&t.add(a.current);return t}let CRe="div";var ru=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ru||{});function SRe(e,t){let a=h.useRef(null),s=Yo(a,t),{initialFocus:r,initialFocusFallback:i,containers:o,features:l=15,...c}=e;u1()||(l=0);let d=WD(a.current);ERe(l,{ownerDocument:d});let u=kRe(l,{ownerDocument:d,container:a,initialFocus:r,initialFocusFallback:i});LRe(l,{ownerDocument:d,container:a,containers:o,previousActiveElement:u});let f=jRe(),p=Wn(w=>{if(!qu(a.current))return;let S=a.current;(A=>A())(()=>{Kl(f.current,{[Vg.Forwards]:()=>{ip(S,Tl.First,{skipElements:[w.relatedTarget,i]})},[Vg.Backwards]:()=>{ip(S,Tl.Last,{skipElements:[w.relatedTarget,i]})}})})}),x=p0(!!(l&2),"focus-trap#tab-lock"),y=l1(),N=h.useRef(!1),v={ref:s,onKeyDown(w){w.key=="Tab"&&(N.current=!0,y.requestAnimationFrame(()=>{N.current=!1}))},onBlur(w){if(!(l&4))return;let S=BZ(o);qu(a.current)&&S.add(a.current);let A=w.relatedTarget;Jc(A)&&A.dataset.headlessuiFocusGuard!=="true"&&(HZ(S,A)||(N.current?ip(a.current,Kl(f.current,{[Vg.Forwards]:()=>Tl.Next,[Vg.Backwards]:()=>Tl.Previous})|Tl.WrapAround,{relativeTo:w.target}):Jc(w.target)&&Ml(w.target)))}},j=Ti();return pt.createElement(pt.Fragment,null,x&&pt.createElement(Vk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Lw.Focusable}),j({ourProps:v,theirProps:c,defaultTag:CRe,name:"FocusTrap"}),x&&pt.createElement(Vk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Lw.Focusable}))}let _Re=Cr(SRe),ARe=Object.assign(_Re,{features:ru});function TRe(e=!0){let t=h.useRef(Yc.slice());return VD(([a],[s])=>{s===!0&&a===!1&&o1(()=>{t.current.splice(0)}),s===!1&&a===!0&&(t.current=Yc.slice())},[e,Yc,t]),Wn(()=>{var a;return(a=t.current.find(s=>s!=null&&s.isConnected))!=null?a:null})}function ERe(e,{ownerDocument:t}){let a=!!(e&8),s=TRe(a);VD(()=>{a||e6e(t?.body)&&Ml(s())},[a]),MZ(()=>{a&&Ml(s())})}function kRe(e,{ownerDocument:t,container:a,initialFocus:s,initialFocusFallback:r}){let i=h.useRef(null),o=p0(!!(e&1),"focus-trap#initial-focus"),l=YD();return VD(()=>{if(e===0)return;if(!o){r!=null&&r.current&&Ml(r.current);return}let c=a.current;c&&o1(()=>{if(!l.current)return;let d=t?.activeElement;if(s!=null&&s.current){if(s?.current===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(s!=null&&s.current)Ml(s.current);else{if(e&16){if(ip(c,Tl.First|Tl.AutoFocus)!==Qk.Error)return}else if(ip(c,Tl.First)!==Qk.Error)return;if(r!=null&&r.current&&(Ml(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,o,e]),i}function LRe(e,{ownerDocument:t,container:a,containers:s,previousActiveElement:r}){let i=YD(),o=!!(e&4);OZ(t?.defaultView,"focus",l=>{if(!o||!i.current)return;let c=BZ(s);qu(a.current)&&c.add(a.current);let d=r.current;if(!d)return;let u=l.target;qu(u)?HZ(c,u)?(r.current=u,Ml(u)):(l.preventDefault(),l.stopPropagation(),Ml(d)):Ml(r.current)},!0)}function HZ(e,t){for(let a of e)if(a.contains(t))return!0;return!1}function qZ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!sp((t=e.as)!=null?t:WZ)||pt.Children.count(e.children)===1}let m1=h.createContext(null);m1.displayName="TransitionContext";var PRe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(PRe||{});function DRe(){let e=h.useContext(m1);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ORe(){let e=h.useContext(f1);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let f1=h.createContext(null);f1.displayName="NestingContext";function h1(e){return"children"in e?h1(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function GZ(e,t){let a=rm(e),s=h.useRef([]),r=YD(),i=l1(),o=Wn((x,y=Zc.Hidden)=>{let N=s.current.findIndex(({el:v})=>v===x);N!==-1&&(Kl(y,{[Zc.Unmount](){s.current.splice(N,1)},[Zc.Hidden](){s.current[N].state="hidden"}}),i.microTask(()=>{var v;!h1(s)&&r.current&&((v=a.current)==null||v.call(a))}))}),l=Wn(x=>{let y=s.current.find(({el:N})=>N===x);return y?y.state!=="visible"&&(y.state="visible"):s.current.push({el:x,state:"visible"}),()=>o(x,Zc.Unmount)}),c=h.useRef([]),d=h.useRef(Promise.resolve()),u=h.useRef({enter:[],leave:[]}),f=Wn((x,y,N)=>{c.current.splice(0),t&&(t.chains.current[y]=t.chains.current[y].filter(([v])=>v!==x)),t?.chains.current[y].push([x,new Promise(v=>{c.current.push(v)})]),t?.chains.current[y].push([x,new Promise(v=>{Promise.all(u.current[y].map(([j,w])=>w)).then(()=>v())})]),y==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>N(y)):N(y)}),p=Wn((x,y,N)=>{Promise.all(u.current[y].splice(0).map(([v,j])=>j)).then(()=>{var v;(v=c.current.shift())==null||v()}).then(()=>N(y))});return h.useMemo(()=>({children:s,register:l,unregister:o,onStart:f,onStop:p,wait:d,chains:u}),[l,o,s,f,p,u,d])}let WZ=h.Fragment,VZ=kw.RenderStrategy;function MRe(e,t){var a,s;let{transition:r=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:d,enterFrom:u,enterTo:f,entered:p,leave:x,leaveFrom:y,leaveTo:N,...v}=e,[j,w]=h.useState(null),S=h.useRef(null),A=qZ(e),k=Yo(...A?[S,t,w]:t===null?[]:[t]),_=(a=v.unmount)==null||a?Zc.Unmount:Zc.Hidden,{show:L,appear:T,initial:M}=DRe(),[R,z]=h.useState(L?"visible":"hidden"),O=ORe(),{register:I,unregister:B}=O;xr(()=>I(S),[I,S]),xr(()=>{if(_===Zc.Hidden&&S.current){if(L&&R!=="visible"){z("visible");return}return Kl(R,{hidden:()=>B(S),visible:()=>I(S)})}},[R,S,I,B,L,_]);let ee=u1();xr(()=>{if(A&&ee&&R==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,R,ee,A]);let Q=M&&!T,te=T&&L&&M,W=h.useRef(!1),ae=GZ(()=>{W.current||(z("hidden"),B(S))},O),Ee=Wn(re=>{W.current=!0;let De=re?"enter":"leave";ae.onStart(S,De,ve=>{ve==="enter"?i?.():ve==="leave"&&l?.()})}),se=Wn(re=>{let De=re?"enter":"leave";W.current=!1,ae.onStop(S,De,ve=>{ve==="enter"?o?.():ve==="leave"&&c?.()}),De==="leave"&&!h1(ae)&&(z("hidden"),B(S))});h.useEffect(()=>{A&&r||(Ee(L),se(L))},[L,A,r]);let Y=!(!r||!A||!ee||Q),[,pe]=nRe(Y,j,L,{start:Ee,end:se}),Se=tu({ref:k,className:((s=Wk(v.className,te&&d,te&&u,pe.enter&&d,pe.enter&&pe.closed&&u,pe.enter&&!pe.closed&&f,pe.leave&&x,pe.leave&&!pe.closed&&y,pe.leave&&pe.closed&&N,!pe.transition&&L&&p))==null?void 0:s.trim())||void 0,...tRe(pe)}),me=0;R==="visible"&&(me|=qi.Open),R==="hidden"&&(me|=qi.Closed),L&&R==="hidden"&&(me|=qi.Opening),!L&&R==="visible"&&(me|=qi.Closing);let ye=Ti();return pt.createElement(f1.Provider,{value:ae},pt.createElement(oRe,{value:me},ye({ourProps:Se,theirProps:v,defaultTag:WZ,features:VZ,visible:R==="visible",name:"Transition.Child"})))}function IRe(e,t){let{show:a,appear:s=!1,unmount:r=!0,...i}=e,o=h.useRef(null),l=qZ(e),c=Yo(...l?[o,t]:t===null?[]:[t]);u1();let d=d1();if(a===void 0&&d!==null&&(a=(d&qi.Open)===qi.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=h.useState(a?"visible":"hidden"),p=GZ(()=>{a||f("hidden")}),[x,y]=h.useState(!0),N=h.useRef([a]);xr(()=>{x!==!1&&N.current[N.current.length-1]!==a&&(N.current.push(a),y(!1))},[N,a]);let v=h.useMemo(()=>({show:a,appear:s,initial:x}),[a,s,x]);xr(()=>{a?f("visible"):!h1(p)&&o.current!==null&&f("hidden")},[a,p]);let j={unmount:r},w=Wn(()=>{var k;x&&y(!1),(k=e.beforeEnter)==null||k.call(e)}),S=Wn(()=>{var k;x&&y(!1),(k=e.beforeLeave)==null||k.call(e)}),A=Ti();return pt.createElement(f1.Provider,{value:p},pt.createElement(m1.Provider,{value:v},A({ourProps:{...j,as:h.Fragment,children:pt.createElement(YZ,{ref:c,...j,...i,beforeEnter:w,beforeLeave:S})},theirProps:{},defaultTag:h.Fragment,features:VZ,visible:u==="visible",name:"Transition"})))}function $Re(e,t){let a=h.useContext(m1)!==null,s=d1()!==null;return pt.createElement(pt.Fragment,null,!a&&s?pt.createElement(Xk,{ref:t,...e}):pt.createElement(YZ,{ref:t,...e}))}let Xk=Cr(IRe),YZ=Cr(MRe),QD=Cr($Re),cv=Object.assign(Xk,{Child:QD,Root:Xk});var RRe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(RRe||{}),zRe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(zRe||{});let FRe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},KD=h.createContext(null);KD.displayName="DialogContext";function g1(e){let t=h.useContext(KD);if(t===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,g1),a}return t}function URe(e,t){return Kl(t.type,FRe,e,t)}let X7=Cr(function(e,t){let a=h.useId(),{id:s=`headlessui-dialog-${a}`,open:r,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:u=!1,...f}=e,p=h.useRef(!1);l=(function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=d1();r===void 0&&x!==null&&(r=(x&qi.Open)===qi.Open);let y=h.useRef(null),N=Yo(y,t),v=WD(y.current),j=r?0:1,[w,S]=h.useReducer(URe,{titleId:null,descriptionId:null,panelRef:h.createRef()}),A=Wn(()=>i(!1)),k=Wn(pe=>S({type:0,id:pe})),_=u1()?j===0:!1,[L,T]=pRe(),M={get current(){var pe;return(pe=w.panelRef.current)!=null?pe:y.current}},R=UZ(),{resolveContainers:z}=wRe({mainTreeNode:R,portals:L,defaultContainers:[M]}),O=x!==null?(x&qi.Closing)===qi.Closing:!1;P6e(d||O?!1:_,{allowed:Wn(()=>{var pe,Se;return[(Se=(pe=y.current)==null?void 0:pe.closest("[data-headlessui-portal]"))!=null?Se:null]}),disallowed:Wn(()=>{var pe;return[(pe=R?.closest("body > *:not(#headlessui-portal-root)"))!=null?pe:null]})});let I=EZ.get(null);xr(()=>{if(_)return I.actions.push(s),()=>I.actions.pop(s)},[I,s,_]);let B=kZ(I,h.useCallback(pe=>I.selectors.isTop(pe,s),[I,s]));q6e(B,z,pe=>{pe.preventDefault(),A()}),bRe(B,v?.defaultView,pe=>{pe.preventDefault(),pe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),A()}),X6e(d||O?!1:_,v,z),D6e(_,y,A);let[ee,Q]=g6e(),te=h.useMemo(()=>[{dialogState:j,close:A,setTitleId:k,unmount:u},w],[j,A,k,u,w]),W=g0({open:j===0}),ae={ref:N,id:s,role:l,tabIndex:-1,"aria-modal":d?void 0:j===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":ee,unmount:u},Ee=!vRe(),se=ru.None;_&&!d&&(se|=ru.RestoreFocus,se|=ru.TabLock,c&&(se|=ru.AutoFocus),Ee&&(se|=ru.InitialFocus));let Y=Ti();return pt.createElement(lRe,null,pt.createElement(Q7,{force:!0},pt.createElement(yRe,null,pt.createElement(KD.Provider,{value:te},pt.createElement(zZ,{target:y},pt.createElement(Q7,{force:!1},pt.createElement(Q,{slot:W},pt.createElement(T,null,pt.createElement(ARe,{initialFocus:o,initialFocusFallback:y,containers:z,features:se},pt.createElement(w6e,{value:A},Y({ourProps:ae,theirProps:f,slot:W,defaultTag:BRe,features:HRe,visible:j===0,name:"Dialog"})))))))))))}),BRe="div",HRe=kw.RenderStrategy|kw.Static;function qRe(e,t){let{transition:a=!1,open:s,...r}=e,i=d1(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||a)&&!r.static?pt.createElement(K7,null,pt.createElement(cv,{show:s,transition:a,unmount:r.unmount},pt.createElement(X7,{ref:t,...r}))):pt.createElement(K7,null,pt.createElement(X7,{ref:t,open:s,...r}))}let GRe="div";function WRe(e,t){let a=h.useId(),{id:s=`headlessui-dialog-panel-${a}`,transition:r=!1,...i}=e,[{dialogState:o,unmount:l},c]=g1("Dialog.Panel"),d=Yo(t,c.panelRef),u=g0({open:o===0}),f=Wn(v=>{v.stopPropagation()}),p={ref:d,id:s,onClick:f},x=r?QD:h.Fragment,y=r?{unmount:l}:{},N=Ti();return pt.createElement(x,{...y},N({ourProps:p,theirProps:i,slot:u,defaultTag:GRe,name:"Dialog.Panel"}))}let VRe="div";function YRe(e,t){let{transition:a=!1,...s}=e,[{dialogState:r,unmount:i}]=g1("Dialog.Backdrop"),o=g0({open:r===0}),l={ref:t,"aria-hidden":!0},c=a?QD:h.Fragment,d=a?{unmount:i}:{},u=Ti();return pt.createElement(c,{...d},u({ourProps:l,theirProps:s,slot:o,defaultTag:VRe,name:"Dialog.Backdrop"}))}let QRe="h2";function KRe(e,t){let a=h.useId(),{id:s=`headlessui-dialog-title-${a}`,...r}=e,[{dialogState:i,setTitleId:o}]=g1("Dialog.Title"),l=Yo(t);h.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=g0({open:i===0}),d={ref:l,id:s};return Ti()({ourProps:d,theirProps:r,slot:c,defaultTag:QRe,name:"Dialog.Title"})}let XRe=Cr(qRe),ZRe=Cr(WRe);Cr(YRe);let JRe=Cr(KRe),Z7=Object.assign(XRe,{Panel:ZRe,Title:JRe,Description:b6e});function x0({isOpen:e,onClose:t,onSave:a,onEdit:s,setFormData:r,formData:i,isEditing:o=!1,viewMode:l=!1,users:c=[],currentUser:d,onDelete:u}){const[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState({}),{comments:j,addComment:w,refresh:S}=Aa({relatedType:"task",relatedId:i?.id});h.useEffect(()=>{i?.id&&S()},[i?.id,S]);const A=R=>{if(!R)return"";const z=String(R).split("-");return z.length===3?`${z[0]}-${z[2]}`:String(R)},k=R=>{const{name:z,value:O}=R.target;z==="subject"&&O.trim()&&v(I=>({...I,subject:!1})),r(I=>{const B={...I,[z]:O};return z==="relatedType1"&&(B.relatedTo1="",O==="Lead"?(B.relatedType2=null,B.relatedTo2=null,y([])):O==="Account"&&(B.relatedType2="Contact")),z==="relatedType2"&&(B.relatedTo2=""),B})};h.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let z;i.relatedType1==="Lead"?z=await ie.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(z=await ie.get("/accounts/admin/fetch-all"));let O=[];if(z&&Array.isArray(z.data)&&(O=z.data),o&&i.relatedTo1)try{let I;i.relatedType1==="Lead"?I=await ie.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(I=await ie.get(`/accounts/get/${i.relatedTo1}`)),I&&I.data&&(O.some(ee=>String(ee.id)===String(i.relatedTo1))||(O=[I.data,...O]))}catch(I){console.error("Error fetching specific related item:",I)}p(O)}catch(z){console.error("Error fetching related 1 data:",z),p([])}})()},[i.relatedType1,e,o,i.relatedTo1]),h.useEffect(()=>{if(!e||l)return;(async()=>{try{if(y([]),i.relatedType1==="Account"&&i.relatedTo1){let z;i.relatedType2==="Contact"?z=await ie.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"?z=await ie.get(`/deals/from-acc/${i.relatedTo1}`):i.relatedType2==="Quote"&&(z=await ie.get(`/quotes/from-acc/${i.relatedTo1}`));let O=[];if(z&&Array.isArray(z.data)&&(O=z.data),o&&i.relatedTo2)try{let I;i.relatedType2==="Contact"?I=await ie.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"?I=await ie.get(`/deals/get/${i.relatedTo2}`):i.relatedType2==="Quote"&&(I=await ie.get(`/quotes/get/${i.relatedTo2}`)),I&&I.data&&(O.some(ee=>String(ee.id)===String(i.relatedTo2))||(O=[I.data,...O]))}catch(I){console.error("Error fetching specific related item:",I)}y(O)}}catch(z){console.error("Error fetching related 2 data:",z),y([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,l,o]);const[_,L]=h.useState(!1);h.useEffect(()=>{e&&(L(!1),v({}))},[e]);const T=R=>{R.preventDefault(),L(!0);const z={};i.subject?.trim()||(z.subject=!0,q.error("Title is required")),v(z),i.relatedTo1||(z.relatedTo1=!0,q.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||(z.assignedTo=!0,q.error("Assigned To is required.")),!(Object.keys(z).length>0)&&a?.(i)},M=l?"Task Details":o?"Edit Task":"Create Task";return n.jsx(cv,{appear:!0,show:e,as:h.Fragment,children:n.jsxs(Z7,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(cv.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/40"})}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:n.jsx(cv.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsx(Z7.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:n.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[n.jsx("button",{onClick:()=>{t(),L(!1),v({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qn,{size:25})}),n.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:M}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:R=>R.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),n.jsx("button",{onClick:()=>{t(),L(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsx("div",{className:"p-6 lg:p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[String(i?.createdById)===String(d?.id)&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),String(i?.createdById)===String(d?.id)&&n.jsx(n.Fragment,{children:d?.role==="Sales"?n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400 cursor-pointer",onClick:()=>u(i),children:[n.jsx(kn,{className:"mr-2"}),"Archive"]}):n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>u(i),children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),n.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),n.jsx("p",{children:i.relatedTo2Text})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:i.assignedToName||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:i.createdBy||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Priority:"}),n.jsx("p",{children:i.priority||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:i.status||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Due Date:"}),n.jsx("p",{children:i.dueDate||""})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"font-semibold",children:"Description:"}),n.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]}),n.jsx(_a,{comments:j,onAddComment:w})]})]})]})}),!l&&n.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title"," ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:k,disabled:l,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${N.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${l?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:k,value:i.relatedType1,disabled:l,className:"w-full pr-6 rounded-md text-sm mb-2",children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(fA,{disabled:!1,items:Array.isArray(f)?f:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:R=>i.relatedType1==="Lead"?R.title:R.name??"",onChange:R=>r(z=>({...z,relatedTo1:R})),required:!0,isSubmitted:_})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:k,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:l||i.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(fA,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:R=>i.relatedType2==="Contact"?`${R.first_name??""} ${R.last_name??""}`.trim():i.relatedType2==="Quote"?A(R.quote_id)??"":R.name??"",onChange:R=>r(z=>({...z,relatedTo2:R}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),n.jsx("textarea",{name:"description",value:i.description,onChange:k,disabled:l,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Normal",children:"Normal"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),n.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To"," ",d?.role!=="Sales"&&n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(fA,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:d?.role==="Sales"?`${d.first_name} ${d.last_name}`:"Search an account...",getLabel:R=>`${R.first_name} ${R.last_name}`,onChange:R=>r(z=>({...z,assignedTo:R})),disabled:l||d?.role==="Sales",required:d?.role!=="Sales",isSubmitted:_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",value:i.status,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Not started",children:"Not started"}),n.jsx("option",{value:"In progress",children:"In Progress"}),n.jsx("option",{value:"Deferred",children:"Deferred"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),!l&&n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{t(),L(!1),v({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:o?"Update Task":"Create Task"})]})]})]})})})})})]})})}function fA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const J7=["Not started","In progress","Deferred","Completed"],e8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},QZ=e=>e&&(e8[e]||e8[String(e).toUpperCase()])||"Not started",eze=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},hA=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},tze=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),QZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},nze=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=B=>{if(!B)return"";const ee=String(B).split("-");return ee.length===3?`${ee[0]}-${ee[2]}`:String(B)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",k="",_="Lead",L="",T="",M="";const R=c(),z=y(),O=l(),I=x();if(R){w="Account",_="Account",L=z,S=String(R);const B=d(),ee=u(),Q=N(),te=v(),W=f(),ae=j();B?(A="Contact",T="Contact",M=Q,k=String(B)):ee?(T="Deal",A="Deal",M=te,k=String(ee)):W&&(T="Quote",A="Quote",M=ae,k=String(W))}else O?(_="Lead",L=I,w="Lead",S=String(O)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:QZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:L,relatedType2Text:T,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:k}};function aze(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,L]=h.useState(1),[T,M]=h.useState(10),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState([]),[Q,te]=h.useState(null),W=Nt(),ae=Xt(),[Ee,se]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[Y,pe]=h.useState(null),Se=Rx(Rf(nm,{activationConstraint:{distance:8}})),me=U=>{const{active:V}=U,be=u.find(ze=>ze.id===V.id);te(be)},ye=async U=>{const{active:V,over:be}=U;if(te(null),!be)return;const ze=V.id,le=be.id,X=u.find(Ae=>Ae.id===ze);if(!(!X||X.status===le)){f(Ae=>Ae.map(Pe=>Pe.id===ze?{...Pe,status:le}:Pe));try{const Ae={title:X.title,description:X.description||"",priority:X.priority||"Normal",status:le,due_date:X.dueDate||null,assigned_to:X.assignedToId||null,related_type_1:X.relatedType1||null,related_to_1:X.relatedTo1?parseInt(X.relatedTo1,10):null,related_type_2:X.relatedType2||null,related_to_2:X.relatedTo2?parseInt(X.relatedTo2,10):null};(!Ae.related_to_1||isNaN(Ae.related_to_1))&&(Ae.related_to_1=null),(!Ae.related_to_2||isNaN(Ae.related_to_2))&&(Ae.related_to_2=null),await ie.put(`/tasks/${ze}`,Ae),q.success(`Task moved to "${le}"`)}catch(Ae){console.error("Failed to update task status:",Ae),q.error("Failed to update task status"),f(Pe=>Pe.map(Qe=>Qe.id===ze?{...Qe,status:X.status}:Qe))}}},re=()=>{te(null)};h.useEffect(()=>{const U=ae.state?.openTaskModal,V=ae.state?.initialTaskData,be=ae.state?.taskID;U?(i(!0),V&&se(ze=>({...ze,...V})),W(ae.pathname,{replace:!0,state:{}})):be&&(pe(be),W(ae.pathname,{replace:!0,state:{}}))},[ae,W]),h.useEffect(()=>{if(Y&&u.length>0&&!p){const U=u.find(V=>V.id===Y);U?Ce(U,!0):q.error("Task not found."),pe(null)}},[Y,u,p]);const De=async()=>{try{const U=await ie.get("/users/all");k(Array.isArray(U.data)?U.data:[])}catch(U){console.error("Failed to fetch users:",U),q.error("Failed to fetch users.")}},ve=async()=>{try{x(!0);const U=await ie.get("/tasks/all"),be=(Array.isArray(U.data)?U.data:[]).map(nze);be.sort((ze,le)=>{const X=ze.createdAt?new Date(ze.createdAt):0;return(le.createdAt?new Date(le.createdAt):0)-X}),f(be),a==="list"&&L(1)}catch(U){console.error("Failed to load tasks:",U),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){De(),ve();const U=vN(e.id),V=new WebSocket(U);return V.onopen=()=>{console.log(" Connected to task notifications")},V.onmessage=be=>{try{const ze=JSON.parse(be.data);ze.type==="task_status_updated"&&(q.info(` ${ze.message}`,{position:"top-right",autoClose:4e3}),ve())}catch(ze){console.error("Error parsing notification:",ze)}},V.onerror=be=>{console.error(" WebSocket error:",be)},V.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{V&&V.readyState===WebSocket.OPEN&&V.close()}}},[t,e]);const ke=()=>{l(null),se({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ce=(U=null,V=!1)=>{l(U),d(V),U?se({id:U.id,subject:U.title||"",description:U.description||"",priority:U.priority||"Normal",status:U.status||"Not started",dueDate:eze(U.dueDate),assignedTo:U.assignedToId?String(U.assignedToId):"",assignedToName:U.assignedToName||"",createdBy:U.createdBy||"",notes:U.notes||"",relatedType1Text:U.relatedType1Text||"",relatedTo1Text:U.relatedTo1Text||"",relatedType2Text:U.relatedType2Text||"",relatedTo2Text:U.relatedTo2Text||"",relatedType1:U.relatedType1||"",relatedTo1:U.relatedTo1||"",relatedType2:U.relatedType2||"",relatedTo2:U.relatedTo2||""}):ke(),i(!0)},de=()=>{i(!1),l(null),d(!1),ke()},Re=async U=>{const V=tze(U);try{o&&!c?(await ie.put(`/tasks/${o.id}`,V),q.success("Task updated successfully.")):(await ie.post("/tasks/create",V),q.success("Task created successfully.")),i(!1),await ve()}catch(be){console.error("Failed to save task:",be);const ze=be.response?.data?.detail||"Failed to save task.";q.error(ze)}},Oe=U=>{U&&z({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:U.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id}})},Ge=()=>{if(Ke.every(U=>B.includes(U.id)))ee(B.filter(U=>!Ke.map(V=>V.id).includes(U)));else{const U=Ke.map(V=>V.id);ee([...new Set([...B,...U])])}},et=U=>{ee(V=>V.includes(U)?V.filter(be=>be!==U):[...V,U])},mt=async()=>{B.length!==0&&z({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:B.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${B.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:B}})},Fe=async()=>{if(!R?.action){z(null);return}const{action:U}=R;I(!0);try{U.type==="delete"?(await ie.delete(`/tasks/${U.targetId}`),q.success("Task deleted successfully."),await ve()):U.type==="bulk-delete"&&(await ie.delete("/tasks/admin/bulk-delete",{data:{task_ids:U.task_ids}}),q.success(`Successfully deleted ${U.task_ids.length} tasks`),ee([]),await ve())}catch(V){console.error("Task action failed:",V),q.error("Failed to delete task.")}finally{I(!1),z(null)}},ot=()=>{O||z(null)},We=h.useMemo(()=>{const U=y.trim().toLowerCase();return[...u].sort((be,ze)=>{const le=be.createdAt?new Date(be.createdAt):0;return(ze.createdAt?new Date(ze.createdAt):0)-le}).filter(be=>{const ze=U===""||be.title?.toLowerCase().includes(U)||be.description?.toLowerCase().includes(U)||be.assignedToName?.toLowerCase().includes(U)||be.createdBy?.toLowerCase().includes(U),le=v==="Filter by Status"||be.status===v,X=w==="Filter by Priority"||be.priority===w;return ze&&le&&X})},[u,y,v,w]);h.useEffect(()=>{L(1)},[y,v,w,a,T]),h.useEffect(()=>{if(a==="list"){const U=We.length===0?1:Math.ceil(We.length/T);_>U&&L(U)}},[We.length,_,a,T]);const Ke=h.useMemo(()=>{if(a==="board")return We;const U=(_-1)*T;return We.slice(U,U+T)},[We,_,a,T]),Ze=h.useMemo(()=>{const U=new Date;return[{title:"To Do",value:u.filter(V=>V.status==="Not started").length,icon:Ws,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(V=>V.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(V=>V.status==="Completed").length,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(V=>V.dueDate&&new Date(V.dueDate)<U&&V.status!=="Completed").length,icon:Vu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(V=>V.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Me=U=>U.dueDate&&new Date(U.dueDate)<new Date&&U.status!=="Completed",je=U=>{switch(U.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ce=U=>{switch(U){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},oe=U=>{switch(U){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ce(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(gn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ze.map(U=>n.jsx(sze,{...U},U.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:U=>N(U.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:U=>j(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),J7.map(U=>n.jsx("option",{children:U},U))]}),n.jsxs("select",{value:w,onChange:U=>S(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(We.length>0?n.jsxs(Ux,{sensors:Se,collisionDetection:zx,onDragStart:me,onDragEnd:ye,onDragCancel:re,children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:J7.map(U=>{const V=Ke.filter(be=>be.status===U);return n.jsx(ize,{column:U,columnTasks:V,getTaskCardColor:je,isTaskOverdue:Me,formatDateDisplay:hA,handleOpenModal:Ce,handleDeleteTask:Oe},U)})}),n.jsx(pj,{children:Q?n.jsx(lze,{task:Q,getTaskCardColor:je,isTaskOverdue:Me,formatDateDisplay:hA}):null})]}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ke.length>0&&Ke.every(U=>B.includes(U.id)),onChange:Ge})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:B.length>0?n.jsx("button",{onClick:mt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${B.length} selected tasks`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ke.length>0?Ke.map(U=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:V=>V.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:B.includes(U.id),onChange:()=>et(U.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ce(U,!0),children:U.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ce(U,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ce(U.status||"Not started")}`,children:U.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ce(U,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${oe(U.priority||"Low")}`,children:U.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ce(U,!0),children:U.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Me(U)?"text-red-600 font-medium":""}`,onClick:()=>Ce(U,!0),children:U.dateAssigned?hA(U.dateAssigned):""}),n.jsx("td",{})]},U.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(an,{className:"mt-6",totalItems:We.length,pageSize:T,currentPage:We.length===0?0:_,onPrev:()=>L(U=>Math.max(U-1,1)),onNext:()=>L(U=>Math.min(U+1,Math.max(1,Math.ceil(We.length/T)||1))),onPageSizeChange:U=>{M(U),L(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(x0,{isOpen:r,onClose:de,onSave:Re,onEdit:()=>d(!1),setFormData:se,formData:Ee,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Oe}),R&&n.jsx(rze,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Fe,onCancel:ot,loading:O})]})}function sze({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function rze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function ize({column:e,columnTasks:t,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Hx({id:e});return n.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:e}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),n.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(d=>n.jsx(oze,{task:d,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},d.id)):n.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function oze({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:d,isDragging:u}=Bx({id:e.id}),f=d?{transform:`translate3d(${d.x}px, ${d.y}px, 0)`}:void 0;return n.jsxs("div",{ref:c,style:f,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${u?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[n.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ua,{})}),n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:n.jsx(Kt,{})})]})]})}function lze({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s}){return n.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}function cze(e){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const gA={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function dze({label:e,options:t,selectedValues:a,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:o=!1,required:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null);h.useEffect(()=>{function j(w){p.current&&!p.current.contains(w.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const x=t.filter(j=>j.label.toLowerCase().includes(u.toLowerCase())),y=j=>{const w=a.includes(j);let S;w?S=a.filter(A=>A!==j):S=[...a,j],s(S)},N=(j,w)=>{j.stopPropagation(),s(a.filter(S=>S!==w))},v=t.filter(j=>a.includes(j.value));return n.jsxs("div",{className:"relative",ref:p,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsxs("div",{onClick:()=>!r&&d(!c),className:`w-full border ${l&&o&&a.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[a.length===0&&n.jsx("span",{className:"text-gray-400 select-none",children:i}),v.map(j=>n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[j.label,!r&&n.jsx(Qt,{className:"cursor-pointer hover:text-indigo-900",onClick:w=>N(w,j.value)})]},j.value)),n.jsx("div",{className:"ml-auto text-gray-400",children:n.jsx(At,{})})]}),c&&!r&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[n.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:n.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[n.jsx(qt,{className:"text-gray-400 mr-2"}),n.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:u,onChange:j=>f(j.target.value),autoFocus:!0})]})}),n.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(j=>{const w=a.includes(j.value);return n.jsxs("div",{onClick:()=>y(j.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${w?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[n.jsx("span",{children:j.label}),w&&n.jsx(xL,{className:"text-indigo-600"})]},j.value)}):n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function Rc(){h.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=Nt(),{id:t}=Ho(),[a,s]=h.useState(""),[r,i]=h.useState(""),[o,l]=h.useState(""),[c,d]=h.useState(null),[u,f]=h.useState(!1),[p,x]=h.useState([]),[y,N]=h.useState(!1),[v,j]=h.useState([]),[w,S]=h.useState(gA),[A,k]=h.useState(!1),[_,L]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(null),[O,I]=h.useState("board"),[B,ee]=h.useState(null),[Q,te]=h.useState(!1),[W,ae]=h.useState(null),[Ee,se]=h.useState(1),[Y,pe]=h.useState(10),[Se,me]=h.useState([]),ye=h.useRef(!1),{userRole:re}=Qs(),De=h.useMemo(()=>{const le=new Map;return p.forEach(X=>{const Ae=`${X.name}-${X.manager_id||"no-manager"}`;if(!le.has(Ae))le.set(Ae,{...X,assigned_users_list:X.assigned_to?[X.assigned_to]:[]});else{const Pe=le.get(Ae);X.assigned_to&&(Pe.assigned_users_list.some(Qe=>Qe.id===X.assigned_to.id)||Pe.assigned_users_list.push(X.assigned_to))}}),Array.from(le.values())},[p]),ve=h.useMemo(()=>{const le=a.trim().toLowerCase(),X=r.trim().toLowerCase(),Ae=o.trim();return[...De].sort((Qe,nt)=>{const wt=Qe?.created_at?new Date(Qe.created_at):0;return(nt?.created_at?new Date(nt.created_at):0)-wt}).filter(Qe=>{const nt=Qe.name?.toLowerCase()||"",wt=Qe.description?.toLowerCase()||"",Te=Qe.managed_by?`${Qe.managed_by.first_name} ${Qe.managed_by.last_name}`.toLowerCase():"",it=Qe.status?.toString().toLowerCase()||"",$e=Qe.assigned_users_list.map(Ne=>`${Ne.first_name} ${Ne.last_name}`.toLowerCase()).join(" "),he=le===""||[nt,wt,Te,it,$e].some(Ne=>Ne&&Ne.includes(le)),F=X===""||it===X,G=Ae===""||String(Qe.managed_by?.id||"")===Ae||Qe.assigned_users_list.some(Ne=>String(Ne.id)===Ae);return he&&F&&G})},[De,a,r,o]);h.useEffect(()=>{if(ye.current){ye.current=!1;return}if(t&&De.length>0&&!A&&!u&&!_){const le=De.find(X=>X.id===parseInt(t));le&&d(le)}!t&&!A&&!u&&d(null)},[t,De,A,u,_]),h.useEffect(()=>{se(1)},[a,r,o]),h.useEffect(()=>{se(le=>{const X=Math.max(1,Math.ceil(ve.length/Y)||1);return le>X?X:le})},[ve.length,Y]);const ke=async()=>{try{const le=await ie.get("/users/read/territory");j(le.data)}catch(le){console.error("Error fetching users:",le)}},Ce=async()=>{N(!0);try{const le=await ie.get("/territories/fetch"),X=Array.isArray(le.data)?le.data:[];x(X),console.log(le.data)}catch(le){console.error("Error fetching territories:",le)}finally{N(!1)}};h.useEffect(()=>{ke(),Ce()},[]);const de=le=>{const{name:X,value:Ae}=le.target;S(Pe=>({...Pe,[X]:Ae}))},Re=le=>{S(X=>({...X,user_ids:le}))},Oe=()=>{S(gA),k(!1),M(null),f(!0)},Ge=(le=!0)=>{f(!1),k(!1),M(null),S(gA)},et=le=>{if(!le)return;const X=le.assigned_users_list?le.assigned_users_list.map(Ae=>String(Ae.id)):[];S({name:le.name||"",description:le.description||"",manager_id:le.managed_by?String(le.managed_by.id):"",user_ids:X,company_id:le.company_id?String(le.company_id):""}),k(!0),M(le.id),d(null),f(!0)},[mt,Fe]=h.useState(!1),ot=le=>{le.preventDefault(),Fe(!0);const X=w.name.trim();if(!X){q.error("Territory name is required.");return}if(!w.manager_id){q.error("Territory manager is required.");return}if(w.user_ids.length===0){q.error("Please assign at least one user.");return}let Ae=w.company_id?Number(w.company_id):null;if(!Ae&&w.user_ids.length>0){const nt=w.user_ids[0],wt=v.find(Te=>String(Te.id)===String(nt));wt&&wt.company&&(Ae=wt.company.id)}const Pe={name:X,description:w.description?.trim()||"",manager_id:w.manager_id?Number(w.manager_id):null,user_ids:w.user_ids.map(nt=>Number(nt)),company_id:Ae},Qe=A&&T?"update":"create";ee({title:Qe==="create"?"Confirm New Territory":"Confirm Update",message:n.jsxs("span",{children:[Qe==="create"?"Create":"Update"," territory ",n.jsx("span",{className:"font-semibold",children:X})," with ",Pe.user_ids.length," assigned users?"]}),confirmLabel:Qe==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:Pe,targetId:T,name:X}})},We=le=>{le&&ee({title:"Delete Territory Group",message:n.jsxs("span",{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:le.name}),"?",n.jsx("br",{}),n.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",le.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:le.id,name:le.name}})},Ke=async()=>{Se.length!==0&&ee({title:"Delete Territories",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Se.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${Se.length} Territory(ies)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:Se}})},Ze=le=>{if(le.target.checked){const X=oe.map(Ae=>Ae.id);me(X)}else me([])},Me=le=>{me(X=>X.includes(le)?X.filter(Ae=>Ae!==le):[...X,le])},je=async()=>{if(!B?.action){ee(null);return}const{action:le}=B,{type:X,payload:Ae,targetId:Pe,name:Qe}=le;te(!0);try{X==="create"?(L(!0),await ie.post("/territories/assign",Ae),q.success(`Territory "${Qe}" created.`),await Ce(),await ke(),Ge(!1)):X==="update"?(L(!0),await ie.put(`/territories/${Pe}`,Ae),q.success(`Territory "${Qe}" updated.`),ye.current=!0,Ge(!1),d(null),t&&e("/admin/territory"),await Ce(),await ke()):X==="delete"?(ae(Pe),await ie.delete(`/territories/${Pe}`),q.success(`Territory "${Qe}" deleted.`),await Ce(),c?.id===Pe&&d(null)):X==="bulk-delete"&&(await ie.delete("/territories/admin/bulk-delete",{data:{territory_ids:le.territory_ids}}),q.success(`Successfully deleted ${le.territory_ids.length} territories`),me([]),await Ce())}catch(nt){console.error(nt),q.error("An error occurred.")}finally{L(!1),Fe(!1),ae(null),te(!1),ee(null)}},ce=()=>{Q||ee(null)},oe=h.useMemo(()=>{if(O==="board")return ve;const le=(Ee-1)*Y;return ve.slice(le,le+Y)},[ve,Ee,Y,O]),U=ve.length>0,V=()=>se(le=>Math.max(le-1,1)),be=()=>se(le=>Math.min(le+1,Math.ceil(ve.length/Y)||1)),ze=le=>!le||le.length===0?"Unassigned":le.length===1?`${le[0].first_name} ${le[0].last_name}`:`${le[0].first_name} ${le[0].last_name} +${le.length-1} more`;return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[y&&n.jsx(Bt,{message:"Loading territories..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[n.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[n.jsx(Zl,{className:"mr-2 text-blue-600"})," Territory"]}),n.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(re.toLowerCase())&&(Array.isArray(v)&&v.length>0?n.jsxs("button",{onClick:Oe,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[n.jsx(gn,{})," Create Territory"]}):n.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[n.jsx(cze,{})," Add users to assign territories"]}))})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:a,onChange:le=>s(le.target.value)})]}),re.toLowerCase()!=="sales"&&n.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:n.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:o,onChange:le=>l(le.target.value),children:[n.jsx("option",{value:"",children:"Filter by Users"}),v.map(le=>n.jsxs("option",{value:String(le.id),children:[le.first_name," ",le.last_name]},le.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>I("board"),className:`px-4 py-2 rounded-full text-sm ${O==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),n.jsx("button",{onClick:()=>I("list"),className:`px-4 py-2 rounded-full text-sm ${O==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),O==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:U?oe.map(le=>n.jsxs("div",{onClick:()=>{d(le);let X;re.toLowerCase()==="ceo"||re.toLowerCase()==="admin"?X="admin":re.toLowerCase()==="group manager"||re.toLowerCase()==="group_manager"?X="group-manager":re.toLowerCase()==="manager"?X="manager":X="sales",e(`/${X}/territory/${le.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:le.name}),le.description&&n.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:le.description}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[n.jsx(en,{})," ",ze(le.assigned_users_list)]}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),n.jsx("div",{className:"text-gray-400 text-xs text-right",children:le.created_at?new Date(le.created_at).toLocaleDateString():""})]},le.id)):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),O==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[!["sales","manager"].includes(re.toLowerCase())&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:oe.length>0&&oe.every(le=>Se.includes(le.id)),onChange:Ze})}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Manager"}),!["sales","manager"].includes(re.toLowerCase())&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Se.length>0?n.jsx("button",{onClick:Ke,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Se.length} selected territories`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:U?oe.map(le=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[!["sales","manager"].includes(re.toLowerCase())&&n.jsx("td",{className:"py-3 px-4",onClick:X=>X.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Se.includes(le.id),onChange:()=>Me(le.id)})}),n.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{d(le);let X;re.toLowerCase()==="ceo"||re.toLowerCase()==="admin"?X="admin":re.toLowerCase()==="group manager"||re.toLowerCase()==="group_manager"?X="group-manager":re.toLowerCase()==="manager"?X="manager":X="sales",e(`/${X}/territory/${le.id}`)},children:le.name}),n.jsx("td",{className:"py-3 px-4",children:ze(le.assigned_users_list)}),n.jsx("td",{className:"py-3 px-4",children:le.managed_by?`${le.managed_by.first_name}`:""}),n.jsx("td",{})]},le.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[n.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{d(null);let le;re.toLowerCase()==="ceo"||re.toLowerCase()==="admin"?le="admin":re.toLowerCase()==="group manager"||re.toLowerCase()==="group_manager"?le="group-manager":re.toLowerCase()==="manager"?le="manager":le="sales",e(`/${le}/territory`)},children:n.jsx(Qt,{size:24})}),n.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),n.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Manager"}),n.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Assigned To"}),n.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(le=>n.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[n.jsx(en,{})," ",le.first_name," ",le.last_name]},le.id)):"Unassigned"})]})]}),!["sales","manager"].includes(re.toLowerCase())&&n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:()=>et(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(ua,{})," Edit"]}),n.jsxs("button",{onClick:()=>We(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(Kt,{})," Delete"]})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[n.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{Ge(),Fe(!1)},children:[n.jsx(Qt,{size:22})," "]}),n.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:A?"Edit Territory":"Create Territory"}),n.jsxs("form",{className:"space-y-4",onSubmit:ot,noValidate:!0,children:[n.jsx(uze,{label:"Territory Name",name:"name",value:w.name,onChange:de,required:!0,isSubmitted:mt}),n.jsx(mze,{label:"Territory Manager",name:"manager_id",value:w.manager_id,onChange:de,options:[{value:"",label:"Assign Manager"},...v.map(le=>({value:String(le.id),label:`${le.first_name} ${le.last_name}`}))],required:!0,isSubmitted:mt}),n.jsx(dze,{label:n.jsxs(n.Fragment,{children:["Assign Users ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:v.map(le=>({value:String(le.id),label:`${le.first_name} ${le.last_name}`})),selectedValues:w.user_ids,onChange:Re,required:!0,isSubmitted:mt}),n.jsx(fze,{label:"Description",name:"description",value:w.description,onChange:de}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>{Ge(),Fe(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-tertiary text-white rounded",children:_?"Saving...":"Save Territory"})]})]})]})}),O==="list"&&n.jsx(an,{className:"mt-4",totalItems:ve.length,pageSize:Y,currentPage:Ee,onPrev:V,onNext:be,onPageSizeChange:le=>{pe(le),se(1)},label:"territories"}),B&&n.jsx(hze,{open:!0,title:B.title,message:B.message,confirmLabel:B.confirmLabel,cancelLabel:B.cancelLabel,variant:B.variant,onConfirm:je,onCancel:ce,loading:Q})]})})}function uze({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${d}
`})]})}function mze({label:e,name:t,value:a,onChange:s,options:r,disabled:i=!1,required:o=!1,isSubmitted:l=!1}){const c=l&&o&&!a;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))})]})}function fze({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function hze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const gze=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"},{value:"INACTIVE",label:"INACTIVE"}],pze=e=>e?String(e).toUpperCase():"",iu=e=>{const t=pze(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":t==="INACTIVE"?"INACTIVE":"PLANNED"},pA=e=>{const t=iu(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":t==="INACTIVE"?"INACTIVE":"--"},t8=e=>{switch(iu(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";case"INACTIVE":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},n8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function a8(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,L]=h.useState("PLANNED"),[T,M]=h.useState(!1),[R,z]=h.useState(!1),[O,I]=h.useState(10),[B,ee]=h.useState(1),[Q,te]=h.useState([]),[W,ae]=h.useState(null),{comments:Ee,addComment:se,refresh:Y}=Aa({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&Y()},[a?.id,Y]),Fs();const pe=Nt(),Se=Xt(),me=G=>{if(!G)return"";const Ne=String(G).split("-");return Ne.length===3?`${Ne[0]}-${Ne[2]}`:String(G)},re={subject:"",call_time:(()=>{const G=new Date,Ne=G.getFullYear(),ge=String(G.getMonth()+1).padStart(2,"0"),fe=String(G.getDate()).padStart(2,"0");return`${Ne}-${ge}-${fe}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[De,ve]=h.useState(re);h.useEffect(()=>{const G=Se.state,Ne=G?.callID;if(Ne&&!G?.openCallModal){ae(Ne),pe(Se.pathname,{replace:!0,state:{}});return}!G?.openCallModal||!G?.initialCallData||G.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||G.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),ve(ge=>({...ge,...G.initialCallData,relatedTo1:G.initialCallData.relatedTo1?String(G.initialCallData.relatedTo1):"",relatedTo2:G.initialCallData.relatedTo2?String(G.initialCallData.relatedTo2):""})),pe(Se.pathname,{replace:!0,state:{}}))},[Se.state,o]),h.useEffect(()=>{if(W&&u.length>0&&!R){const G=u.find(Ne=>Ne.id===W);G?s(G):q.error("Call not found."),ae(null)}},[W,u,R]);const ke=async()=>{try{z(!0);const G=await ie.get("/calls/admin/fetch-all"),ge=[...Array.isArray(G.data)?G.data:[]].sort((fe,Ue)=>{const K=fe?.created_at?new Date(fe.created_at):0;return(Ue?.created_at?new Date(Ue.created_at):0)-K});f(ge)}catch(G){console.error("Error fetching calls:",G),q.error("Failed to load calls")}finally{z(!1)}},Ce=async()=>{try{const G=await ie.get("/users/all");x(G.data)}catch(G){console.error("Error fetching users: ",G)}};h.useEffect(()=>{Ce(),ke()},[]);const[de,Re]=h.useState(""),[Oe,Ge]=h.useState("Filter by Status"),[et,mt]=h.useState("Filter by Users");h.useEffect(()=>{ee(1)},[de,Oe,et,O]);const Fe=h.useMemo(()=>u.filter(G=>{const Ne=!de||[G.subject,G.notes,G.lead?.title,G.account?.name,G.contact?.first_name,G.contact?.last_name,G.deal?.name].some(K=>K&&String(K).toLowerCase().includes(de.toLowerCase())),ge=Oe==="Filter by Status"||iu(G.status)===Oe,fe=G.call_assign_to?`${G.call_assign_to.first_name} ${G.call_assign_to.last_name}`:"";return Ne&&ge&&(et==="Filter by Users"||fe===et)}),[u,de,Oe,et]),ot=h.useMemo(()=>{const G=(B-1)*O;return Fe.slice(G,G+O)},[Fe,B,O]),We=Array.isArray(p)?p.map(G=>({id:G.id,name:`${G.first_name} ${G.last_name}`})):[],Ke=()=>ee(G=>Math.max(1,G-1)),Ze=()=>ee(G=>Math.min(G+1,Math.ceil(Fe.length/O)||1)),Me=G=>{if(G.target.checked){const Ne=ot.map(ge=>ge.id);te(Ne)}else te([])},je=G=>{te(Ne=>Ne.includes(G)?Ne.filter(ge=>ge!==G):[...Ne,G])},ce=u.length,oe=u.filter(G=>iu(G.status)==="PLANNED").length,U=u.filter(G=>iu(G.status)==="HELD").length,V=u.filter(G=>iu(G.status)==="NOT_HELD").length,be=[{title:"Total",value:ce,icon:Rs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:oe,icon:Ws,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:U,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:V,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}],[ze,le]=h.useState("Overview"),X=G=>{const{name:Ne,value:ge}=G.target;ve(fe=>{const Ue={...fe,[Ne]:ge};return Ne==="relatedType1"&&(Ue.relatedTo1="",ge==="Lead"?(Ue.relatedType2=null,Ue.relatedTo2=null,d([])):ge==="Account"&&(Ue.relatedType2="Contact")),Ne==="relatedType2"&&(Ue.relatedTo2=""),Ue})};h.useEffect(()=>{const G=async()=>{try{l([]);let Ne;De.relatedType1==="Lead"?Ne=await ie.get("/leads/admin/getLeads"):De.relatedType1==="Account"&&(Ne=await ie.get("/accounts/admin/fetch-all")),Ne&&Array.isArray(Ne.data)?l(Ne.data):l([])}catch(Ne){console.error("Error fetching data:",Ne),l([])}};De.relatedType1&&G()},[De.relatedType1]),h.useEffect(()=>{const G=async()=>{try{d([]);let Ne;if(De.relatedType1==="Account"&&De.relatedTo1)De.relatedType2==="Contact"?Ne=await ie.get(`/contacts/from-acc/${De.relatedTo1}`):De.relatedType2==="Deal"?Ne=await ie.get(`/deals/from-acc/${De.relatedTo1}`):De.relatedType2==="Quote"&&(Ne=await ie.get(`/quotes/from-acc/${De.relatedTo1}`));else{d([]);return}Ne&&Array.isArray(Ne.data)?d(Ne.data):d([])}catch(Ne){console.error("Error fetching data:",Ne),d([])}};De.relatedType2&&G()},[De.relatedType2,De.relatedTo1,De.relatedType1]);const[Ae,Pe]=h.useState(!1),Qe=G=>{G.preventDefault(),Pe(!0);const Ne=De.subject;if(!Ne||Ne.trim()===""){q.error("Subject is required.");return}if(!De.relatedTo1){q.error(`Please select a ${De.relatedType1||"Lead/Account"}.`);return}if(!De.assigned_to){q.error("Subject is required.");return}const fe={...De,duration_minutes:De.duration_minutes?parseInt(De.duration_minutes,10):null,relatedTo1:De.relatedTo1?parseInt(De.relatedTo1,10):null,relatedTo2:De.relatedType1==="Lead"?null:De.relatedTo2?parseInt(De.relatedTo2,10):null,relatedType2:De.relatedType1==="Lead"?null:De.relatedType2,assigned_to:De.assigned_to?parseInt(De.assigned_to,10):null},Ue=y&&v?"update":"create",K=(De.subject||"").trim()||"Untitled Call";i({title:Ue==="create"?"Confirm New Call":"Confirm Update",message:Ue==="create"?`Create "${K}"?`:`Save changes to "${K}"?`,confirmLabel:Ue==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Ue,payload:fe,targetId:v||null,name:K}})},nt=G=>s(G),wt=()=>{t(!1),N(!1),j(null)},Te=async()=>{Q.length!==0&&i({title:"Delete Calls",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Q.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${Q.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:Q}})},it=async()=>{if(!r?.action){i(null);return}const{action:G}=r,{type:Ne,payload:ge,targetId:fe,name:Ue}=G;k(!0);try{if(Ne==="create")S(!0),await ie.post("/calls/create",ge),q.success(`Call "${Ue}" created successfully.`),t(!1),ve(re),N(!1),j(null),await ke();else if(Ne==="update"){if(!fe)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${fe}`,ge),q.success(`Call "${Ue}" updated successfully.`),t(!1),ve(re),N(!1),j(null),await ke()}else if(Ne==="delete"){if(!fe)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${fe}`),q.success(`Call "${Ue}" deleted successfully.`),a?.id===fe&&s(null),await ke()}else Ne==="bulk-delete"&&(await ie.delete("/calls/admin/bulk-delete",{data:{call_ids:Q}}),q.success(`Successfully deleted ${Q.length} calls`),te([]),await ke())}catch(K){const ne=Ne==="create"?"Failed to create call. Please review the details and try again.":Ne==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",H=K?.response?.data?.detail||ne;q.error(H)}finally{(Ne==="create"||Ne==="update")&&S(!1),k(!1),i(null)}},$e=()=>{A||i(null)},ue=async()=>{if(a?.id)try{M(!0),await ie.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${pA(_)}`),f(G=>Array.isArray(G)?G.map(Ne=>Ne.id===a.id?{...Ne,status:_}:Ne):G),s(null)}catch(G){const Ne=G.response?.data?.detail||"Failed to update status.";q.error(Ne)}finally{M(!1)}};h.useEffect(()=>{a&&L(iu(a.status))},[a]);const he=a?n.jsxs("div",{id:"callModalBackdrop",onClick:G=>G.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Qn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${t8(a.status)}`,children:pA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const G=K=>{if(!K)return"";const ne=new Date(K),H=ne.getFullYear(),xe=String(ne.getMonth()+1).padStart(2,"0"),Ie=String(ne.getDate()).padStart(2,"0"),Je=String(ne.getHours()).padStart(2,"0"),ct=String(ne.getMinutes()).padStart(2,"0");return`${H}-${xe}-${Ie}T${Je}:${ct}`},Ne=a.lead?"Lead":a.account?"Account":"Lead",ge=a.lead?a.lead.id:a.account?a.account.id:null,fe=Ne==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",Ue=Ne==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;ve({subject:a.subject||"",call_time:G(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:Ne,relatedType2:fe,relatedTo1:ge?String(ge):"",relatedTo2:Ue?String(Ue):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const G=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${G}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:G}})},children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(G=>n.jsx("button",{onClick:()=>le(G),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ze===G?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:G},G))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ze==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(co,{label:"Call Time",value:n8(a.call_time)}),n.jsx(co,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(co,{label:"Direction",value:a.direction||"--"}),n.jsx(co,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(co,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(co,{label:"Account",value:a.account.name}),a.contact&&n.jsx(co,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(co,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(co,{label:"Quote",value:me(a.quote.quote_id)}),n.jsx(co,{label:"Created At",value:n8(a.created_at)})]})}),ze==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(_a,{comments:Ee,onAddComment:se})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:G=>L(G.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ue,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,F=e?n.jsx("div",{id:"modalBackdrop",onClick:G=>G.target.id==="modalBackdrop"&&wt(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{wt(),Pe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Qe,noValidate:!0,children:[n.jsx(yze,{label:"Subject",className:"md:col-span-2",name:"subject",value:De.subject,onChange:X,isSubmitted:Ae,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:X,value:De.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w||y,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(xA,{items:Array.isArray(o)?o:[],value:De.relatedTo1??"",placeholder:`Search ${De.relatedType1||"here"}...`,getLabel:G=>De.relatedType1==="Lead"?G.title:G.name??"",onChange:G=>ve(Ne=>({...Ne,relatedTo1:G})),required:!0,isSubmitted:Ae,disabled:w||y})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:X,value:De.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:De.relatedType1==="Lead"||w||y,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(xA,{disabled:De.relatedType1==="Lead"||w||y,items:Array.isArray(c)?c:[],value:De.relatedTo2??"",placeholder:De.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${De.relatedType2||"Contact"}...`:`No ${De.relatedType2||""} data found`,getLabel:G=>De.relatedType2==="Contact"?`${G.first_name??""} ${G.last_name??""}`.trim():De.relatedType2==="Quote"?me(G.quote_id)??"":G.name??"",onChange:G=>ve(Ne=>({...Ne,relatedTo2:G}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:De.call_time,onChange:X,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:De.duration_minutes,onChange:X,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" ","Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(xA,{items:Array.isArray(p)?p:[],value:De.assigned_to??"",placeholder:"Search an account...",getLabel:G=>`${G.first_name} ${G.last_name}`,onChange:G=>ve(Ne=>({...Ne,assigned_to:G})),required:!0,isSubmitted:Ae})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:X,value:De.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:X,value:De.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(bze,{className:"col-span-2",label:"Notes",value:De.notes,onChange:X,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{wt(),Pe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Rs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ve(re),N(!1),j(null),t(!0),Pe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:be.map(G=>n.jsx(xze,{...G},G.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:de,onChange:G=>Re(G.target.value)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:Oe,onChange:G=>Ge(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),gze.map(G=>n.jsx("option",{value:G.value,children:G.label},G.value))]}),n.jsxs("select",{value:et,onChange:G=>mt(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),We.map(G=>n.jsx("option",{value:G.name,children:G.name},G.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ot.length>0&&Q.length===ot.length,onChange:Me,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Q.length>0?n.jsx("button",{onClick:Te,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Q.length} selected calls`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):ot.length>0?ot.map(G=>n.jsxs("tr",{onClick:()=>nt(G),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Ne=>Ne.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Q.includes(G.id),onChange:()=>je(G.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:G.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[G.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.lead.title}),G.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.account.name}),G.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[G.contact.first_name," ",G.contact.last_name]}),G.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.deal.name}),G.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:me(G.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:G.call_time?new Date(G.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:G?.call_assign_to?`${G.call_assign_to.first_name} ${G.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t8(G.status)}`,children:pA(G.status)})}),n.jsx("td",{className:"py-3 px-4"})]},G.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(an,{totalItems:Fe.length,pageSize:O,currentPage:B,onPrev:Ke,onNext:Ze,onPageSizeChange:G=>{I(G),ee(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),he,F,r&&n.jsx(vze,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:it,onCancel:$e,loading:A})]})}function xze({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function yze({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function bze(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function co({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function vze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function xA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const p1=({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:o=[]})=>{const c=(()=>{const L=new Date,T=L.getFullYear(),M=String(L.getMonth()+1).padStart(2,"0"),R=String(L.getDate()).padStart(2,"0");return{startTime:`${T}-${M}-${R}T08:00`,endTime:`${T}-${M}-${R}T09:00`}})(),[d,u]=h.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[f,p]=h.useState([]),[x,y]=h.useState([]);h.useEffect(()=>{t!==void 0&&a&&(!t.startTime||!t.endTime)&&a(L=>({...L,startTime:L.startTime||c.startTime,endTime:L.endTime||c.endTime}))},[]);const N=L=>{if(!L)return"";const T=String(L).split("-");return T.length===3?`${T[0]}-${T[2]}`:String(L)},v=t!==void 0?t:d,j=a||u,{userRole:w}=Qs();h.useEffect(()=>{const L=async()=>{try{p([]);let T;v.relatedType1==="Lead"?T=await ie.get("/leads/admin/getLeads"):v.relatedType1==="Account"&&(T=await ie.get("/accounts/admin/fetch-all"));let M=[];if(T&&Array.isArray(T.data)&&(M=T.data),s&&v.relatedTo1)try{let R;v.relatedType1==="Lead"?R=await ie.get(`/leads/get/${v.relatedTo1}`):v.relatedType1==="Account"&&(R=await ie.get(`/accounts/get/${v.relatedTo1}`)),R&&R.data&&(M.some(O=>String(O.id)===String(v.relatedTo1))||(M=[R.data,...M]))}catch(R){console.error("Error fetching specific related item:",R)}p(M)}catch(T){console.error("Error fetching relatedTo1 data:",T),p([])}};v.relatedType1&&L()},[v.relatedType1,w,s,v.relatedTo1]),h.useEffect(()=>{const L=async()=>{try{if(y([]),v.relatedType1==="Account"&&v.relatedTo1){let T;v.relatedType2==="Contact"?T=await ie.get(`/contacts/from-acc/${v.relatedTo1}`):v.relatedType2==="Deal"?T=await ie.get(`/deals/from-acc/${v.relatedTo1}`):v.relatedType2==="Quote"&&(T=await ie.get(`/quotes/from-acc/${v.relatedTo1}`)),T&&Array.isArray(T.data)?y(T.data):y([])}else y([])}catch(T){console.error("Error fetching relatedTo2 data:",T),y([])}};v.relatedType2&&L()},[v.relatedType2,v.relatedTo1,v.relatedType1]);const S=L=>{const{name:T,value:M}=L.target;j(R=>{const z={...R,[T]:M};return T==="relatedType1"&&(R.relatedType1!==M&&(z.relatedTo1=""),M==="Lead"?(z.relatedType2=null,z.relatedTo2=null,y([])):M==="Account"&&(z.relatedType2="Contact",z.relatedTo2="")),T==="relatedType2"&&R.relatedType2!==M&&(z.relatedTo2=""),z})},[A,k]=h.useState(!1),_=L=>{if(L.preventDefault(),k(!0),v.status==="--"){q.warn("Please select a valid status.");return}const T=v.subject;if(!T||T.trim()===""){q.error("Subject is required.");return}if(!v.assignedTo){q.error("Assigned To is required.");return}if(!v.relatedTo1){q.error(`Please select a ${v.relatedType1||"Lead/Account"}.`);return}r?r(v):e()};return n.jsx("div",{id:"modalBackdrop",onClick:L=>L.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:_,noValidate:!0,children:[n.jsx(xb,{label:"Subject",name:"subject",value:v.subject,onChange:S,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:A,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:S,value:v.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400",disabled:i,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-8 pl-8 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(yA,{items:Array.isArray(f)?f:[],disabled:i,value:v.relatedTo1??"",placeholder:`Search ${v.relatedType1||"here"}...`,getLabel:L=>v.relatedType1==="Lead"?L.title:L.name??"",onChange:L=>j(T=>({...T,relatedTo1:L})),required:!0,isSubmitted:A})]}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsx("div",{className:"relative w-25",children:n.jsxs("select",{name:"relatedType2",onChange:S,value:v.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||v.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]})}),n.jsx(yA,{items:Array.isArray(x)?x:[],value:v.relatedTo2??"",placeholder:v.relatedType1==="Lead"?"":x?.length?`Search ${v.relatedType2}...`:`No ${v.relatedType2} data found`,getLabel:L=>v.relatedType2==="Contact"?`${L.first_name??""} ${L.last_name??""}`.trim():v.relatedType2==="Quote"?N(L.quote_id)??"":L.name??"",onChange:L=>j(T=>({...T,relatedTo2:L})),disabled:v.relatedType1==="Lead"})]}),n.jsx(xb,{label:"Location",name:"location",className:"md:col-span-2",value:v.location,onChange:S,disabled:i}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[n.jsx(xb,{label:"Start Time",name:"startTime",type:"datetime-local",value:v.startTime,onChange:S,disabled:i}),n.jsx(xb,{label:"End Time",name:"endTime",type:"datetime-local",value:v.endTime,onChange:S,disabled:i})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(yA,{items:Array.isArray(o)?o:[],value:v.assignedTo??"",placeholder:"Search an account...",getLabel:L=>`${L.first_name} ${L.last_name}`,onChange:L=>j(T=>({...T,assignedTo:L})),disabled:w==="Sales",required:!0,isSubmitted:A})]}),n.jsx(wze,{label:"Status",name:"status",value:v.status,onChange:S,options:["--","Planned","Held","Not held"].map(L=>({value:L,label:L.replace("_"," ")})),disabled:i}),n.jsx(Nze,{label:"Notes",name:"notes",value:v.notes,onChange:S,rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function xb({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function wze({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l="",isSubmitted:c=!1}){const d=c&&i&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,hasError:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))})]})}function Nze({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function yA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const yd=({meeting:e,onClose:t,onEdit:a,onDelete:s,onStatusUpdate:r,currentUser:i,isSalesView:o=!1})=>{Nt();const[l,c]=h.useState("Overview");h.useEffect(()=>{console.log("AdminMeetingInformation - checking permissions:"),console.log("meeting.created_by:",e?.created_by),console.log("currentUser?.id:",i?.id),console.log("Match:",e?.created_by===i?.id)},[e,i]);const d=A=>{if(!A)return"";const k=String(A).split("-");return k.length===3?`${k[0]}-${k[2]}`:String(A)},u=A=>{const k=(A||"").toUpperCase();return k==="PLANNED"||k==="IN PROGRESS"?"PLANNED":k==="HELD"||k==="DONE"?"HELD":k==="NOT HELD"?"NOT_HELD":"PLANNED"},f=A=>{const k=(A||"").toUpperCase();return k==="PLANNED"?"PLANNED":k==="HELD"?"HELD":k==="NOT HELD"||k==="NOT_HELD"?"NOT HELD":"PENDING"},[p,x]=h.useState(u(e?.status||"PENDING")),[y,N]=h.useState(!1),{comments:v,addComment:j,refresh:w}=Aa({relatedType:"meeting",relatedId:e?.id});if(h.useEffect(()=>{e?.id&&w()},[e?.id,w]),!e)return null;const S=A=>{const k=(A||"").toUpperCase(),_=k==="PLANNED"?"PENDING":k==="HELD"?"COMPLETED":k==="NOT_HELD"?"CANCELLED":k;switch(k){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(_){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),n.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${S(u(e.status))}`,children:u(e.status||"PENDING").replace("_"," ")})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:(!["MANAGER","GROUP MANAGER","SALES"].includes(i?.role?.toUpperCase())||e?.created_by===i?.id)&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{console.log("Edit button clicked"),a&&a(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{console.log("Archive button clicked"),s&&s(e)},className:`inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm text-white transition focus:outline-none ${o?"bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-400":"bg-red-500 hover:bg-red-600 focus:ring-2 focus:ring-red-400"}`,children:[o?n.jsx(kn,{className:"mr-2"}):n.jsx(Kt,{className:"mr-2"}),o?"Archive":"Delete"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(A=>n.jsx("button",{onClick:()=>c(A),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${l===A?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:A},A))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[l==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Start Time:"}),n.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"End Time:"}),n.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),n.jsx("p",{children:e.subject||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Location:"}),n.jsx("p",{children:e.location||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Lead:"}),n.jsx("p",{children:e.lead.title})]}),e.account&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:e.account.name})]}),e.contact&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:e.deal.name})]}),e.quote&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote:"}),n.jsx("p",{children:d(e.quote.quote_id)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u(e.status||"PENDING").replace("_"," ")})]})]})}),l==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]}),n.jsx(_a,{comments:v,onAddComment:j})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:A=>x(A.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const A=f(p);if(u(e.status)!==p){N(!0);try{await r(e.id,A)}catch(k){console.error("Failed to update status:",k)}finally{N(!1)}}},disabled:p===e.status||y,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===e.status||y?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:y?"Updating...":"Update"})]})]})]})]})})})},KZ=e=>e?e.toUpperCase():"",yb=e=>{const t=KZ(e);return t==="INACTIVE"?"INACTIVE":t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},jze=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},Cze=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Sze=e=>{const t=KZ(e);if(t==="INACTIVE")return"bg-gray-200 text-gray-700";switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},bA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},s8=()=>{const e=Nt(),t=Xt(),[a]=Fs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[N,v]=h.useState(!1),[j,w]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[L,T]=h.useState(bA),[M,R]=h.useState(!1),[z,O]=h.useState(null),[I,B]=h.useState(!1),[ee,Q]=h.useState(null),[te,W]=h.useState(!1),[ae,Ee]=h.useState([]),[se,Y]=h.useState(null);h.useEffect(()=>{const Fe=t.state?.openMeetingModal,ot=t.state?.initialMeetingData?.relatedTo||a.get("id"),We=t.state?.meetingID;Fe||ot?(v(!0),t.state?.initialMeetingData&&T(Ke=>({...Ke,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):We&&(Y(We),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(se&&i.length>0&&!l){const Fe=i.find(ot=>ot.id===se);Fe?w(Fe):q.error("Meeting not found."),Y(null)}},[se,i,l]);const pe=async()=>{if(s&&r){const Fe=sessionStorage.getItem("meetingDetailData");if(Fe)try{const ot=JSON.parse(Fe);if(ot.id===parseInt(s)){w(ot),sessionStorage.removeItem("meetingDetailData");return}}catch(ot){console.error(ot)}}c(!0);try{const Fe=await ie.get("/meetings/admin/fetch-all"),We=[...Array.isArray(Fe.data)?Fe.data:[]].sort((Ke,Ze)=>{const Me=Ke?.created_at?new Date(Ke.created_at).getTime():0;return(Ze?.created_at?new Date(Ze.created_at).getTime():0)-Me});if(o(We),s&&!j){const Ke=We.find(Ze=>Ze.id===parseInt(s));Ke&&w(Ke)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},Se=async()=>{try{const Fe=await ie.get("/users/all");u(Array.isArray(Fe.data)?Fe.data:[])}catch(Fe){console.error(Fe)}};h.useEffect(()=>{pe(),Se()},[]);const me=Fe=>p(Fe.target.value),ye=Fe=>{if(Fe.target.checked){const ot=ve.map(We=>We.id);Ee(ot)}else Ee([])},re=Fe=>{Ee(ot=>ot.includes(Fe)?ot.filter(We=>We!==Fe):[...ot,Fe])},De=h.useMemo(()=>{const Fe=f.trim().toLowerCase(),ot=x.trim().toUpperCase();return i.filter(We=>{const Ke=[We?.activity,We?.description,We?.relatedTo,We?.assignedTo],Ze=Fe===""||Ke.some(je=>je&&je.toString().toLowerCase().includes(Fe)),Me=ot==="FILTER BY STATUS"||yb(We.status||"PENDING")===ot;return Ze&&Me})},[i,f,x]);h.useEffect(()=>{A(1)},[f,x,k]);const ve=h.useMemo(()=>{const Fe=(S-1)*k;return De.slice(Fe,Fe+k)},[De,S,k]),ke=()=>{v(!1),T(bA),R(!1),O(null),B(!1)},Ce=()=>{T(bA),R(!1),O(null),v(!0)},de=Fe=>{let ot="";if(Fe.meet_assign_to?.id)ot=String(Fe.meet_assign_to.id);else if(Fe.assignedTo){const V=d.find(be=>`${be.first_name} ${be.last_name}`===Fe.assignedTo);ot=V?String(V.id):""}const We=V=>{if(!V)return"";try{const be=new Date(V),ze=be.getTimezoneOffset()*6e4;return new Date(be.getTime()-ze).toISOString().slice(0,16)}catch{return""}};let Ke="Lead",Ze="",Me="Contact",je="";if(Fe.lead)Ke="Lead",Ze=String(Fe.lead.id);else if(Fe.account)Ke="Account",Ze=String(Fe.account.id),Fe.contact?(Me="Contact",je=String(Fe.contact.id)):Fe.deal?(Me="Deal",je=String(Fe.deal.id)):Fe.quote&&(Me="Quote",je=String(Fe.quote.id));else if(Fe.relatedType||Fe.related_type){const V=Fe.relatedType||Fe.related_type,be=Fe.related_to||Fe.relatedToId;V==="Lead"?(Ke="Lead",Ze=String(be)):(Ke="Account",Ze=Fe.account_id?String(Fe.account_id):"")}const ce={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},oe=yb(Fe.status),U=ce[oe]||"Planned";T({subject:Fe.subject||Fe.activity||"",location:Fe.location||"",startTime:We(Fe.start_time||Fe.startTime),endTime:We(Fe.end_time||Fe.endTime),status:U,notes:Fe.description||Fe.notes||"",assignedTo:ot,relatedType1:Ke,relatedTo1:Ze,relatedType2:Me,relatedTo2:je}),R(!0),O(Fe.id),w(null),v(!0)},Re=Fe=>{if(!Fe.subject?.trim())return q.error("Subject is required.");if(!Fe.startTime)return q.error("Start time is required.");if(Fe.endTime&&!(new Date(Fe.endTime)-new Date(Fe.startTime)>0))return q.error("End time must be after start time.");Fe.relatedType1,Fe.relatedTo1,Fe.relatedType1==="Account"&&Fe.relatedType2&&Fe.relatedTo2&&(Fe.relatedType2,Fe.relatedTo2);const ot={...Fe,assignedTo:parseInt(Fe.assignedTo),relatedTo1:parseInt(Fe.relatedTo1),relatedTo2:parseInt(Fe.relatedTo2)},We=M&&z?"update":"create";Q({title:We==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${We} "${ot.subject}"?`,confirmLabel:We==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:We,payload:ot,targetId:z,name:ot.subject}})},Oe=async()=>{if(!ee?.action)return;const{type:Fe,payload:ot,targetId:We,name:Ke}=ee.action;W(!0);try{if(Fe==="create")B(!0),await ie.post("/meetings/create",ot),q.success(`Meeting "${Ke}" created.`),ke(),await pe();else if(Fe==="update")B(!0),await ie.put(`/meetings/${We}`,ot),q.success(`Meeting "${Ke}" updated.`),ke(),await pe();else if(Fe==="delete")await ie.delete(`/meetings/${We}`),q.success(`Meeting "${Ke}" deleted.`),j?.id===We&&w(null),await pe();else if(Fe==="bulk-delete"){const{meeting_ids:Ze}=ee.action;await ie.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:Ze}}),q.success(`${Ze.length} meetings deleted.`),Ee([]),await pe()}}catch(Ze){const Me=Ze.response?.data?.detail||"Action failed.";q.error(typeof Me=="string"?Me:JSON.stringify(Me)),console.error(Me)}finally{B(!1),W(!1),Q(null)}},Ge=async()=>{ae.length!==0&&Q({title:"Delete Meetings",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ae.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${ae.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:ae}})},et=Fe=>{Q({title:"Delete Meeting",message:`Permanently delete "${Fe.subject}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:Fe.id,name:Fe.subject}})},mt=async(Fe,ot)=>{try{await ie.put(`/meetings/${Fe}`,{status:ot}),q.success("Status updated"),pe(),w(null)}catch{q.error("Failed to update status")}};return r&&s?j?n.jsx(yd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:de,onDelete:et,onStatusUpdate:mt,isSalesView:!1}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Tt,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Ce,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(gn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:me,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:Fe=>y(Fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ve.length>0&&ae.length===ve.length,onChange:ye,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ae.length>0?n.jsx("button",{onClick:Ge,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ae.length} selected items`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:ve.length>0?ve.map(Fe=>n.jsxs("tr",{onClick:()=>w(Fe),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:ot=>ot.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:ae.includes(Fe.id),onChange:()=>re(Fe.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Fe.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Fe.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Fe.lead.title}),Fe.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Fe.account.name}),Fe.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Fe.contact.first_name," ",Fe.contact.last_name]}),Fe.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Fe.deal.name}),Fe.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Cze(Fe.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:jze(Fe.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Fe.meet_assign_to.first_name," ",Fe.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Sze(yb(Fe.status))}`,children:yb(Fe.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Fe.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(an,{totalItems:De.length,pageSize:k,currentPage:S,onPrev:()=>A(Fe=>Math.max(1,Fe-1)),onNext:()=>A(Fe=>Math.min(Fe+1,Math.ceil(De.length/k)||1)),onPageSizeChange:_,label:"meetings"}),N&&n.jsx(p1,{onClose:ke,formData:L,setFormData:T,isEditing:M,onSubmit:Re,isSubmitting:I||te,users:d}),j&&n.jsx(yd,{meeting:j,onClose:()=>w(null),onEdit:de,onDelete:et,onStatusUpdate:mt,isSalesView:!1}),ee&&n.jsx(_ze,{open:!0,title:ee.title,message:ee.message,confirmLabel:ee.confirmLabel,variant:ee.variant,onConfirm:Oe,onCancel:()=>Q(null),loading:te})]})};function _ze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}function Aze(){const{user:e,mutate:t}=Gt(),a=h.useRef(null),[s,r]=h.useState(""),[i,o]=h.useState(""),[l,c]=h.useState("January"),[d,u]=h.useState(0),[f,p]=h.useState(null),[x,y]=h.useState(null),[N,v]=h.useState(""),[j,w]=h.useState(!1),[S,A]=h.useState(!1),[k,_]=h.useState({type:"",text:""}),L=["January","February","March","April","May","June","July","August","September","October","November","December"];h.useEffect(()=>{e?.company&&(e.company.company_name&&r(e.company.company_name),e.company.currency&&o(e.company.currency),e.company.quota_period&&c(e.company.quota_period),e.company.tax_rate!==void 0&&u(e.company.tax_rate),e.company.company_logo&&p(e.company.company_logo),e.company.address&&v(e.company.address))},[e]);const T=I=>{const B=I.target.files?.[0];if(!B)return;if(!B.type.startsWith("image/")){_({type:"error",text:"Please select an image file"});return}if(B.size>2*1024*1024){_({type:"error",text:"Image size should be less than 2MB"});return}const ee=new FileReader;ee.onloadend=()=>{y(ee.result)},ee.readAsDataURL(B)},M=()=>{y(""),p(null)},R=async I=>{I.preventDefault(),w(!0),_({type:"",text:""});try{const B={company_name:s,currency:i,quota_period:l,tax_rate:parseFloat(d),address:N};x!==null&&(B.company_logo=x),await ie.put("/company/update-name",B),t&&await t(),y(null),_({type:"success",text:"Company settings updated successfully!"})}catch(B){console.error("Update error:",B);const ee=B.response?.data?.detail||"Failed to update settings.";_({type:"error",text:ee})}finally{w(!1)}},z=async()=>{A(!0),_({type:"",text:""});try{const I=await ie.get("/admin/backup/csv",{responseType:"blob"}),B=I.headers?.["content-disposition"]||"",Q=/filename="?([^";]+)"?/i.exec(B)?.[1]||"crm-backup.zip",te=window.URL.createObjectURL(new Blob([I.data])),W=document.createElement("a");W.href=te,W.setAttribute("download",Q),document.body.appendChild(W),W.click(),W.remove(),window.URL.revokeObjectURL(te)}catch(I){console.error("Backup download error:",I);const B=I?.response?.data?.detail||"Failed to download backup. Please try again.";_({type:"error",text:B})}finally{A(!1)}},O=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return n.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[n.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[n.jsx(Jt,{})," Company Details"]}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),n.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[!O&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[n.jsx(Vu,{}),n.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),n.jsx("input",{type:"text",value:s,onChange:I=>r(I.target.value),disabled:!O||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(Gie,{className:"text-gray-500"})," Company Address"]}),n.jsx("textarea",{value:N,onChange:I=>v(I.target.value),disabled:!O||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed resize-none",placeholder:"Enter company address",rows:3})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(II,{className:"text-gray-500"})," Company Logo"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:x||f?n.jsx("img",{src:x||f,alt:"Company Logo",className:"w-16 h-16 object-contain border border-gray-200 rounded-lg bg-gray-50"}):n.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",children:n.jsx(II,{className:"text-gray-400 text-xl"})})}),O&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("input",{type:"file",ref:a,accept:"image/*",onChange:T,className:"hidden",id:"company-logo-upload"}),n.jsxs("button",{type:"button",onClick:()=>a.current?.click(),disabled:j,className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:[n.jsx(Yie,{className:"text-gray-500"}),x||f?"Change Logo":"Upload Logo"]}),(x||f)&&n.jsx("button",{type:"button",onClick:M,disabled:j,className:"text-xs text-red-600 hover:text-red-700 transition",children:"Remove Logo"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Max 2MB, PNG or JPG"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(Tt,{className:"text-gray-500"})," Fiscal Year Start"]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:l,onChange:I=>c(I.target.value),disabled:!O||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:L.map(I=>n.jsx("option",{value:I,children:I},I))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(Vie,{className:"text-gray-500"})," Default Tax Rate"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",step:"0.01",value:d,onChange:I=>u(I.target.value),disabled:!O||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50",placeholder:"0.00"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-8 pointer-events-none text-gray-400 font-medium",children:"%"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[n.jsx(c9,{className:"text-gray-500"})," Currency"]}),n.jsxs("div",{className:"flex gap-3 max-w-xs",children:[n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!O||j?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"",checked:i==="",onChange:()=>o(""),disabled:!O||j,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!O||j?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"$",checked:i==="$",onChange:()=>o("$"),disabled:!O||j,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]}),k.text&&n.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${k.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:k.text}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:O&&n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs("button",{type:"button",onClick:z,disabled:j||S,className:"flex items-center gap-2 border border-gray-300 bg-white text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-50 disabled:opacity-50 transition active:scale-95",children:[n.jsx(qo,{}),S?"Preparing...":"Download Backup (CSV)"]}),n.jsxs("button",{type:"submit",disabled:j||S,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[n.jsx(bL,{}),j?"Updating...":"Save Settings"]})]})})]})]})}function Tze(){const[e,t]=h.useState(null),[a,s]=h.useState({subject:"",category:"",description:"",priority:"medium"}),[r,i]=h.useState(""),[o,l]=h.useState(!1),[c,d]=h.useState([{id:1,sender:"support",message:"Hello! Welcome to Sari-Sari CRM Support. How can I help you today?",timestamp:new Date}]),[u,f]=h.useState(""),[p,x]=h.useState(!1),y=h.useRef(null);h.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[c]),h.useEffect(()=>{document.title="Help Center | Sari-Sari CRM"},[]);const N=[{id:1,category:"Getting Started",title:"How to create your first account?",content:"Navigate to the Accounts page from the sidebar, click the 'Add Account' button, fill in the required information such as company name, email, and phone number, then click Save."},{id:2,category:"Getting Started",title:"How to add new contacts?",content:"Go to Contacts in the sidebar, click 'Add Contact', enter the contact details including name, email, phone, and associated account, then save the contact."},{id:3,category:"Leads & Deals",title:"How to convert a lead to a deal?",content:"Open the lead you want to convert, click on the 'Convert to Deal' button, review the pre-filled information, make any necessary adjustments, and confirm the conversion."},{id:4,category:"Leads & Deals",title:"How to manage deal stages?",content:"Deals progress through stages: Prospecting, Qualification, Proposal, Negotiation, and Closed. Update the stage by editing the deal and selecting the appropriate stage from the dropdown."},{id:5,category:"Tasks & Activities",title:"How to create and assign tasks?",content:"Navigate to Tasks, click 'Add Task', fill in the task details, assign it to a team member, set the due date and priority, then save. The assigned user will be notified."},{id:6,category:"Tasks & Activities",title:"How to schedule meetings?",content:"Go to Meetings, click 'Schedule Meeting', select participants, set the date and time, add an agenda, and save. All participants will receive calendar invites."},{id:7,category:"Reports & Analytics",title:"How to view sales performance?",content:"Access the Dashboard to see key metrics. For detailed reports, navigate to Targets to view individual and team performance against set goals."},{id:8,category:"Account Settings",title:"How to manage user permissions?",content:"Go to Users in the sidebar, select a user, and edit their role. Different roles (Admin, Manager, Sales, Marketing) have different access levels and permissions."}],v=["Technical Issue","Login Problem","Data Issue","Feature Request","Performance Issue","Other"],w=N.filter(M=>M.title.toLowerCase().includes(r.toLowerCase())||M.content.toLowerCase().includes(r.toLowerCase())||M.category.toLowerCase().includes(r.toLowerCase())).reduce((M,R)=>(M[R.category]||(M[R.category]=[]),M[R.category].push(R),M),{}),S=(M,R)=>{s(z=>({...z,[M]:R}))},A=async M=>{if(M.preventDefault(),!a.subject.trim()||!a.category||!a.description.trim()){q.warn("Please fill in all required fields.");return}l(!0),setTimeout(()=>{q.success("Your issue has been submitted successfully! We'll get back to you soon."),s({subject:"",category:"",description:"",priority:"medium"}),t(null),l(!1)},1500)},[k,_]=h.useState(null),L=M=>{if(M.preventDefault(),!u.trim())return;const R={id:c.length+1,sender:"user",message:u.trim(),timestamp:new Date};d(z=>[...z,R]),f(""),x(!0),setTimeout(()=>{const z=["Thank you for your message. Let me look into that for you.","I understand your concern. Can you provide more details?","That's a great question! Here's what I can help you with...","I'm checking our system now. Please hold on for a moment.","Thanks for reaching out! I'll make sure to assist you with this."],O=z[Math.floor(Math.random()*z.length)];d(I=>[...I,{id:I.length+1,sender:"support",message:O,timestamp:new Date}]),x(!1)},1500)},T=M=>new Date(M).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8 text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Help Center"}),n.jsx("p",{className:"text-gray-600",children:"How can we help you today?"})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{onClick:()=>t(e==="report"?null:"report"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="report"?"border-red-400 ring-2 ring-red-100":"border-transparent hover:border-red-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Vu,{className:"w-7 h-7 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Report an Issue"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Having a problem? Let us know"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="report"?"rotate-90":""}`})]})})}),n.jsx("div",{onClick:()=>t(e==="solutions"?null:"solutions"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="solutions"?"border-blue-400 ring-2 ring-blue-100":"border-transparent hover:border-blue-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Fie,{className:"w-7 h-7 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Browse Solutions"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Find answers to common questions"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="solutions"?"rotate-90":""}`})]})})}),n.jsx("div",{onClick:()=>t(e==="chat"?null:"chat"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="chat"?"border-green-400 ring-2 ring-green-100":"border-transparent hover:border-green-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center relative",children:[n.jsx(Iy,{className:"w-7 h-7 text-green-600"}),n.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Live Chat Support"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Chat with our support team"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="chat"?"rotate-90":""}`})]})})})]}),e==="report"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx($I,{className:"text-red-500"}),"Report an Issue"]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:n.jsx(Qt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("form",{onSubmit:A,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a.subject,onChange:M=>S("subject",M.target.value),placeholder:"Brief description of the issue",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:a.category,onChange:M=>S("category",M.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition bg-white",children:[n.jsx("option",{value:"",children:"Select a category"}),v.map(M=>n.jsx("option",{value:M,children:M},M))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("div",{className:"flex gap-3",children:["low","medium","high"].map(M=>n.jsx("button",{type:"button",onClick:()=>S("priority",M),className:`px-4 py-2 rounded-lg border transition capitalize ${a.priority===M?M==="high"?"bg-red-500 text-white border-red-500":M==="medium"?"bg-yellow-500 text-white border-yellow-500":"bg-green-500 text-white border-green-500":"bg-white text-gray-600 border-gray-300 hover:border-gray-400"}`,children:M},M))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:a.description,onChange:M=>S("description",M.target.value),placeholder:"Please describe the issue in detail. Include steps to reproduce if applicable.",rows:5,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition resize-none"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:o,className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-6 py-2.5 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ZT,{className:"w-4 h-4"}),"Submit Issue"]})})})]})]}),e==="solutions"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(qie,{className:"text-blue-500"}),"Browse Solutions"]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:n.jsx(Qt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(qt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:r,onChange:M=>i(M.target.value),placeholder:"Search for solutions...",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-400 outline-none transition"})]}),n.jsx("div",{className:"space-y-6",children:Object.keys(w).length>0?Object.entries(w).map(([M,R])=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:M}),n.jsx("div",{className:"space-y-2",children:R.map(z=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>_(k===z.id?null:z.id),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition text-left",children:[n.jsx("span",{className:"font-medium text-gray-700",children:z.title}),n.jsx(Dt,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${k===z.id?"rotate-90":""}`})]}),k===z.id&&n.jsxs("div",{className:"px-4 py-3 bg-white border-t border-gray-200",children:[n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:z.content}),n.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-500",children:[n.jsx(ga,{className:"text-green-500"}),"Was this helpful?",n.jsx("button",{className:"text-blue-500 hover:underline ml-1",children:"Yes"}),n.jsx("span",{children:"|"}),n.jsx("button",{className:"text-blue-500 hover:underline",children:"No"})]})]})]},z.id))})]},M)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(qt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsxs("p",{className:"text-gray-500",children:['No solutions found matching "',r,'"']}),n.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Try a different search term or"," ",n.jsx("button",{onClick:()=>t("report"),className:"text-blue-500 hover:underline",children:"report an issue"})]})]})})]}),e==="chat"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md mb-8 animate-fade-in overflow-hidden",children:[n.jsxs("div",{className:"bg-green-500 text-white p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Iy,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Live Chat Support"}),n.jsxs("p",{className:"text-green-100 text-xs flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Online - Typically replies in minutes"]})]})]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-white/10 rounded-full transition",children:n.jsx(Qt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"h-80 overflow-y-auto p-4 bg-gray-50 space-y-4",children:[c.map(M=>n.jsx("div",{className:`flex ${M.sender==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`flex items-end gap-2 max-w-[80%] ${M.sender==="user"?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${M.sender==="user"?"bg-blue-500 text-white":"bg-green-500 text-white"}`,children:M.sender==="user"?n.jsx(en,{className:"w-4 h-4"}):n.jsx(Iy,{className:"w-4 h-4"})}),n.jsxs("div",{className:`px-4 py-2.5 rounded-2xl ${M.sender==="user"?"bg-blue-500 text-white rounded-br-md":"bg-white shadow-sm border border-gray-200 text-gray-700 rounded-bl-md"}`,children:[n.jsx("p",{className:"text-sm",children:M.message}),n.jsx("p",{className:`text-[10px] mt-1 ${M.sender==="user"?"text-blue-100":"text-gray-400"}`,children:T(M.timestamp)})]})]})},M.id)),p&&n.jsx("div",{className:"flex justify-start",children:n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center",children:n.jsx(Iy,{className:"w-4 h-4"})}),n.jsx("div",{className:"bg-white shadow-sm border border-gray-200 px-4 py-3 rounded-2xl rounded-bl-md",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),n.jsx("div",{ref:y})]}),n.jsx("form",{onSubmit:L,className:"p-4 border-t border-gray-200 bg-white",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"text",value:u,onChange:M=>f(M.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-full focus:ring-2 focus:ring-green-200 focus:border-green-400 outline-none transition"}),n.jsxs("button",{type:"submit",disabled:!u.trim(),className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(ZT,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]})})]}),!e&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Need more help?"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Contact our support team for personalized assistance"}),n.jsx("div",{className:"flex justify-center gap-4",children:n.jsxs("a",{href:"mailto:support@example.com",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md transition text-gray-700",children:[n.jsx($I,{className:"w-4 h-4"}),"Email Support"]})})]})]})}function Eze({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Xt(),p=Nt(),{logout:x}=Qs(),{user:y,fetchUser:N}=Gt(),j={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[f.pathname]||"Sales Panel";h.useEffect(()=>{N();const _=()=>{N()};return window.addEventListener("userProfileUpdated",_),()=>{window.removeEventListener("userProfileUpdated",_)}},[]),h.useEffect(()=>{const _=async()=>{try{const L=await ie.get("/logs/notifications");console.log(" Fetched notifications from DB:",L.data);const T=(L.data||[]).map(M=>{const R=M.entity_id||M.new_data?.id,z=(M.entity_type||"").toLowerCase();return S({id:M.id,type:M.notif_type||M.notification_type||M.type||w(M),title:M.title||M.description,assignedBy:M.assignedBy||M.name,createdAt:M.createdAt||M.timestamp,read:M.is_read??M.read??!1,leadId:z==="lead"?R:M.leadId||M.lead_id,taskId:z==="task"?R:M.taskId||M.task_id,contactId:z==="contact"?R:M.contactId||M.contact_id,dealId:z==="deal"?R:M.dealId||M.deal_id,accountId:z==="account"?R:M.accountId||M.account_id})});o(T),c(T.filter(M=>!M.read).length)}catch(L){console.error("Failed to load history notifications",L)}};y?.id&&_()},[y?.id]);const w=_=>{const L=String(_.action||_.type||"").toUpperCase(),T={TASK_ASSIGNMENT:"task_assignment",LEAD_ASSIGNMENT:"lead_assignment",LEAD_UPDATE:"lead_update",CONTACT_ASSIGNMENT:"contact_assignment",CONTACT_UPDATE:"contact_update",DEAL_ASSIGNMENT:"deal_assignment",DEAL_UPDATE:"deal_update",ACCOUNT_ASSIGNMENT:"account_assignment",ACCOUNT_UPDATE:"account_update",TERRITORY_ASSIGNMENT:"territory_assignment",CREATE:"create",UPDATE:"update",DELETE:"delete"};if(T[L])return T[L];const M=String(_.title||_.description||"").toLowerCase(),R=String(_.entity_type||"").toLowerCase(),z=L.includes("UPDATE"),O=L.includes("CREATE");return L.includes("DELETE"),M.includes("task")||R==="task"?z?"task_update":"task_assignment":M.includes("territory")||R==="territory"?"territory_assignment":M.includes("lead")||R==="lead"?z?"lead_update":O?"lead_assignment":"lead_update":M.includes("contact")||R==="contact"?z?"contact_update":O?"contact_assignment":"contact_update":M.includes("deal")||R==="deal"?z?"deal_update":O?"deal_assignment":"deal_update":M.includes("account")||R==="account"?z?"account_update":O?"account_assignment":"account_update":M.includes("quote")||R==="quote"?"quote":M.includes("meeting")||R==="meeting"?"meeting":M.includes("call")||R==="call"?"call":"info"},S=_=>{const L={..._};switch(L.read=!!L.read,L.type){case"territory_assignment":L.title=L.title||`You have been assigned to ${L.territoryName||"a territory"}`;break;case"lead_assigned":L.type="lead_assignment",L.title=L.title||`New lead assigned: ${L.leadName||L.company||"Lead"}`;break;case"lead_assignment":L.title=L.title||`New lead assigned: ${L.leadName||L.company||"Lead"}`;break;case"lead_update":L.title=L.title||`Lead updated: ${L.leadName||L.company||"Lead"}`;break;case"task_assignment":case"task_update":L.title=L.title||`Task: ${L.taskTitle||"Task"}`;break;case"contact_assignment":L.title=L.title||`New contact assigned: ${L.contactName||L.contact||"Contact"}`;break;case"contact_update":L.title=L.title||`Contact updated: ${L.contactName||L.contact||"Contact"}`;break;case"deal_assignment":L.title=L.title||`New deal assigned: ${L.dealName||L.name||"Deal"}`;break;case"deal_update":L.title=L.title||`Deal updated: ${L.dealName||L.name||"Deal"}`;break;case"account_assignment":L.title=L.title||`New account assigned: ${L.accountName||L.name||"Account"}`;break;case"account_update":L.title=L.title||`Account updated: ${L.accountName||L.name||"Account"}`;break;case"quote":L.title=L.title||"Quote activity";break;case"meeting":L.title=L.title||"Meeting activity";break;case"call":L.title=L.title||"Call activity";break;default:L.title=L.title||"Activity"}return L},A=_=>{switch(_.type){case"task_assignment":p(`/sales/tasks/${_.taskId||_.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${_.leadId||_.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${_.contactId||_.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${_.dealId||_.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${_.accountId||_.account_id||""}`);break;default:p("/sales/overview")}},k=async _=>{if(_.read){A(_);return}try{await ie.patch(`/logs/mark-read/${_.id}`),o(L=>L.map(T=>T.id===_.id?{...T,read:!0}:T)),c(L=>L>0?L-1:0),A(_)}catch(L){console.error("Failed to mark notification as read",L),A(_)}};return h.useEffect(()=>{if(!y?.id)return;const _=vN(y.id);console.log(" Connecting to WebSocket:",_);const L=new WebSocket(_);let T;const M=()=>{T=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return L.onopen=()=>{console.log(" Sales WS Connected to:",_),clearTimeout(T)},L.onmessage=R=>{try{const z=JSON.parse(R.data);console.log(" Notification received:",z);const O=S(z);o(I=>[O,...I]),c(I=>I+1)}catch(z){console.error("Error parsing notification:",z)}},L.onclose=()=>{console.log(" Sales WS Disconnected"),M()},L.onerror=R=>{console.error(" Sales WS Error:",R)},()=>{clearTimeout(T),L&&L.readyState===WebSocket.OPEN&&L.close()}},[y?.id]),h.useEffect(()=>{function _(L){d.current&&!d.current.contains(L.target)&&a(!1),u.current&&!u.current.contains(L.target)&&r(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Xf,{className:"text-2xl"})}),y?.company?.company_logo&&n.jsx("img",{src:y.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(lx,{className:"text-xl sm:text-2xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&n.jsx("button",{onClick:async()=>{try{await ie.patch("/logs/mark-all-read"),o(_=>_.map(L=>({...L,read:!0}))),c(0)}catch(_){console.error("Failed to mark all notifications as read",_)}},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((_,L)=>n.jsxs("div",{onClick:()=>k(_),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${_.read?"bg-gray-50":"bg-white"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${_.type==="task_assignment"||_.type==="task_update"?"bg-purple-100 text-purple-700":_.type==="lead_assignment"||_.type==="lead_update"?"bg-green-100 text-green-700":_.type==="contact_assignment"||_.type==="contact_update"?"bg-amber-100 text-amber-700":_.type==="deal_assignment"||_.type==="deal_update"?"bg-indigo-100 text-indigo-700":_.type==="account_assignment"||_.type==="account_update"?"bg-cyan-100 text-cyan-700":_.type==="territory_assignment"?"bg-blue-100 text-blue-700":_.type==="quote"?"bg-pink-100 text-pink-700":_.type==="meeting"?"bg-teal-100 text-teal-700":_.type==="call"?"bg-red-100 text-red-700":_.type==="create"?"bg-emerald-100 text-emerald-700":_.type==="update"?"bg-yellow-100 text-yellow-700":_.type==="delete"?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"}`,children:_.type==="task_assignment"||_.type==="task_update"?"Task":_.type==="lead_assignment"?"Lead":_.type==="lead_update"?"Lead Update":_.type==="contact_assignment"?"Contact":_.type==="contact_update"?"Contact Update":_.type==="deal_assignment"?"Deal":_.type==="deal_update"?"Deal Update":_.type==="account_assignment"?"Account":_.type==="account_update"?"Account Update":_.type==="territory_assignment"?"Territory":_.type==="quote"?"Quote":_.type==="meeting"?"Meeting":_.type==="call"?"Call":_.type==="create"?"Created":_.type==="update"?"Updated":_.type==="delete"?"Deleted":"Activity"}),!_.read&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:_.title}),n.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:_.assignedBy?`Assigned by ${_.assignedBy}`:"System"}),n.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:_.createdAt?new Date(_.createdAt).toLocaleString():""})]})]},_.id??L)):n.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]}),y?.company&&n.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100 w-full justify-center",children:[y.company.company_logo&&n.jsx("img",{src:y.company.company_logo,alt:"Company Logo",className:"w-6 h-6 object-contain rounded"}),n.jsx("span",{className:"text-xs text-gray-500 truncate",children:y.company.company_name})]})]}),n.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[n.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),a(!1)},children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function kze(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),{user:r}=Gt(),[i,o]=h.useState(!1);h.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const l=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Xt();l.includes(c.pathname);const d="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",u="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/sales/overview",className:({isActive:f})=>f?d:u,children:[n.jsx(cx,{})," Dashboard"]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>o(!i),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-lg"}),"Sales"]}),n.jsx(At,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/sales/accounts",className:({isActive:f})=>f?d:u,children:[n.jsx(vd,{})," Accounts"]}),n.jsxs($t,{to:"/sales/contacts",className:({isActive:f})=>f?d:u,children:[n.jsx(en,{})," Contacts"]}),n.jsxs($t,{to:"/sales/leads",className:({isActive:f})=>f?d:u,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs($t,{to:"/sales/deals",className:({isActive:f})=>f?d:u,children:[n.jsx(Jt,{})," Deals"]}),n.jsxs($t,{to:"/sales/quotes",className:({isActive:f})=>f?d:u,children:[n.jsx(un,{})," Quotes"]}),n.jsxs($t,{to:"/sales/targets",className:({isActive:f})=>f?d:u,children:[n.jsx(ur,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(At,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/sales/tasks",className:({isActive:f})=>f?d:u,children:[n.jsx(Vt,{})," Tasks"]}),n.jsxs($t,{to:"/sales/meetings",className:({isActive:f})=>f?d:u,children:[n.jsx(Tt,{})," Meetings"]}),n.jsxs($t,{to:"/sales/calls",className:({isActive:f})=>f?d:u,children:[n.jsx(Rs,{})," Calls"]}),n.jsxs($t,{to:"/sales/audit",className:({isActive:f})=>f?d:u,children:[n.jsx(Ts,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/sales/territory",className:({isActive:f})=>f?d:u,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"text-lg"}),"Territory"]})})}),n.jsxs($t,{to:"/sales/manage-account",className:({isActive:f})=>f?d:u,children:[n.jsx(en,{className:"text-lg"}),n.jsx("span",{children:"Your Profile"})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Eze,{toggleSidebar:()=>t(!0)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(ex,{})})]})]})}const Lze=e=>n.jsx(qt,{...e}),Pze=e=>n.jsx(vd,{...e}),XZ=e=>n.jsx(Ws,{...e}),Dze=e=>n.jsx(ox,{...e}),Oze=e=>n.jsx(Jw,{...e}),Mze=e=>n.jsx(Tt,{...e}),Ize=e=>n.jsx(kt,{...e}),$ze=e=>n.jsx(tN,{...e}),ZZ=e=>n.jsx(eN,{...e}),Rze=e=>n.jsx(na,{...e}),JZ=e=>n.jsx(en,{...e}),zze=e=>n.jsx(Yn,{...e}),eJ=e=>n.jsx(Jt,{...e}),Fze=e=>n.jsx(un,{...e}),tJ=e=>n.jsx(ur,{...e}),Uze=e=>n.jsx(ga,{...e}),Bze=e=>n.jsx(Tt,{...e}),Hze=e=>n.jsx(Rs,{...e}),qze=e=>n.jsx(Zl,{...e}),Gze=e=>n.jsx(Ts,{...e}),nJ=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},Wze=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Vze=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Yze=e=>{switch(e){case"call":return{Icon:Ize,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:$ze,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:Mze,color:"text-blue-500",bgColor:"bg-blue-100"}}},Qze=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Kze=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=Nt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:Pze,label:"Account"},{icon:JZ,label:"Contact"},{icon:zze,label:"Leads"},{icon:eJ,label:"Deals"},{icon:Fze,label:"Quotes"},{icon:tJ,label:"Target"},{icon:Uze,label:"Task"},{icon:Bze,label:"Meeting"},{icon:Hze,label:"Call"},{icon:Gze,label:"Audit"},{icon:qze,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(Lze,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},Xze=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=Nt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,y=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},Zze=({logs:e,loading:t})=>{const a=Nt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(ZZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(Xze,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},Jze=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),eFe=({revenueData:e,loading:t})=>{const a=Nt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let A=0;A<=j;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",A=v.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const L=_>0;if(k&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:L,willBeAdded:S&&L,allFields:Object.keys(v)})),S&&k&&L)try{let T=new Date(w);if(isNaN(T.getTime())){const M=String(w).split("T")[0];T=new Date(M+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const M=T.getFullYear(),R=T.getMonth()+1,z=`${M}-${String(R).padStart(2,"0")}`;l[z]||(l[z]=0),l[z]+=_,c++,console.log(` Added deal ${v.id} to month ${z}: ${_}, total: ${l[z]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${z} (Year: ${M}, Month: ${R})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:L,closeDate:w,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(v=>parseInt(v.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;y.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${j}`),y.push(A),A>0&&console.log(`Month ${s[w]} ${j} (${S}): ${A}`)}}const N=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:N,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(ZZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(cj,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},vA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=Nt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},tFe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=Nt(),{text:l,bg:c}=Vze(s||"Website"),d=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},nFe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=Nt(),u={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:f,bg:p}=Wze(u),x=parseFloat(t||0),y=o?x>=o?"up":"down":"up",N=y==="up"?Dze:Oze,v=y==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/sales/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${p} px-2 py-0.5 rounded-full`,children:u})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:nJ(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},aFe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=Nt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=Yze(f),{text:N,bg:v}=Qze(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const L=new Date(_),M=L-new Date,R=Math.floor(M/864e5);return R===0?`Today, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:L.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/sales/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/sales/meetings/info?id=${o}`)):d("/sales/tasks"):d(f==="call"?`/sales/calls/info?id=${o}`:f==="meeting"?`/sales/meetings/info?id=${o}`:"/sales/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(XZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(JZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},sFe=()=>{const e=Nt(),{user:t}=Gt(),a=t?.company?.currency||"",[s,r]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState([]),[j,w]=h.useState(!0),[S,A]=h.useState(null),[k,_]=h.useState(""),[L,T]=h.useState([]),[M,R]=h.useState([]),[z,O]=h.useState([]),[I,B]=h.useState([]),[ee,Q]=h.useState(0),[te,W]=h.useState(new Date),ae=h.useRef(null),Ee=h.useRef(null),se=h.useMemo(()=>{try{if(!k.trim())return[];const me=k.toLowerCase().trim(),ye=[];return Array.isArray(L)&&L.forEach(re=>{const De=`${re.first_name||""} ${re.last_name||""}`.trim().toLowerCase(),ve=(re.company_name||"").toLowerCase(),ke=(re.email||"").toLowerCase(),Ce=(re.phone||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me)||Ce.includes(me))&&ye.push({id:re.id,name:`${re.first_name||""} ${re.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:re.company_name||"No company",route:`/sales/leads/${re.id}`})}),Array.isArray(M)&&M.forEach(re=>{const De=(re.name||"").toLowerCase(),ve=(re.account?.name||"").toLowerCase(),ke=(re.description||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me))&&ye.push({id:re.id,name:re.name||"Unnamed Deal",type:"Deal",details:re.account?.name||"No account",route:`/sales/deals/info?id=${re.id}`})}),Array.isArray(z)&&z.forEach(re=>{const De=(re.name||"").toLowerCase(),ve=(re.email||"").toLowerCase(),ke=(re.phone||"").toLowerCase(),Ce=(re.website||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me)||Ce.includes(me))&&ye.push({id:re.id,name:re.name||"Unnamed Account",type:"Account",details:re.email||re.phone||"No contact info",route:"/sales/accounts"})}),ye.slice(0,10)}catch(me){return console.error("Error in search:",me),[]}},[k,L,M,z]),Y=me=>{me.route&&(e(me.route),_(""))},pe=h.useCallback(async()=>{w(!0),A(null);try{const[me,ye,re,De,ve,ke,Ce,de]=await Promise.all([ie.get("/leads/admin/getLeads").catch(X=>(console.error("Error fetching leads:",X),{data:[]})),ie.get("/deals/admin/fetch-all").catch(X=>(console.error("Error fetching deals:",X),{data:[]})),ie.get("/accounts/admin/fetch-all").catch(X=>(console.error("Error fetching accounts:",X),{data:[]})),ie.get("/tasks/all").catch(X=>(console.error("Error fetching tasks:",X),{data:[]})),ie.get("/meetings/admin/fetch-all").catch(X=>(console.error("Error fetching meetings:",X),{data:[]})),ie.get("/calls/admin/fetch-all").catch(X=>(console.error("Error fetching calls:",X),{data:[]})),ie.get("/logs/read-all").catch(X=>(console.error("Error fetching logs:",X),{data:[]})),ie.get("/targets/admin/fetch-all").catch(X=>(console.error("Error fetching targets:",X),{data:[]}))]),Re=Array.isArray(me.data)?me.data:[],Oe=Array.isArray(ye.data)?ye.data:[],Ge=Array.isArray(re.data)?re.data:[],et=Array.isArray(De.data)?De.data:[],mt=Array.isArray(ve.data)?ve.data:[],Fe=Array.isArray(ke.data)?ke.data:[],ot=Array.isArray(Ce.data)?Ce.data:[],We=Array.isArray(de.data)?de.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Oe.length),Oe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Oe[0],null,2)),console.log("First deal keys:",Object.keys(Oe[0]))),T(Re),R(Oe),O(Ge),B(We);const Ke=We.reduce((X,Ae)=>{const Pe=Ae.amount||Ae.value||Ae.target_amount||0,Qe=parseFloat(typeof Pe=="string"?Pe.replace(/[^\d.-]/g,""):Pe);return X+(Number.isFinite(Qe)?Qe:0)},0);Q(Ke);const Ze=Re.filter(X=>X.status&&!["Lost","Converted"].includes(X.status)).length,Me=et.filter(X=>!X.dueDate||X.status==="Completed"?!1:new Date(X.dueDate)<new Date).length;r({activeLeads:Ze,totalDeals:Oe.length,activeAccounts:Ge.length,overdueTasks:Me});const je=[...Re].sort((X,Ae)=>new Date(Ae.created_at||0)-new Date(X.created_at||0)).slice(0,5);o(je);const ce=[...Oe].sort((X,Ae)=>new Date(Ae.created_at||0)-new Date(X.created_at||0)).slice(0,5);c(ce);const oe=new Date,U=[];Fe.forEach(X=>{const Ae=X.due_date||X.call_time,Pe=(X.status||"").toUpperCase();if(Ae){const Qe=new Date(Ae);Pe==="COMPLETED"||Pe==="MISSED"||Pe==="NOT_HELD"||Pe==="HELD"||U.push({type:"Call",title:X.subject||"Untitled Call",assignedTo:X.assigned_to||(X.call_assign_to?`${X.call_assign_to.first_name||""} ${X.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ae,priority:(X.priority||"MEDIUM").toUpperCase(),id:X.id,activityType:"call",fullData:X})}}),mt.forEach(X=>{const Ae=X.dueDate||X.start_time,Pe=(X.status||"").toUpperCase();if(Ae){const Qe=new Date(Ae);Pe==="COMPLETED"||Pe==="CANCELLED"||Pe==="DONE"||U.push({type:"Meeting",title:X.subject||X.activity||"Untitled Meeting",assignedTo:X.assignedTo||(X.meet_assign_to?`${X.meet_assign_to.first_name||""} ${X.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ae,priority:(X.priority||"MEDIUM").toUpperCase(),id:X.id,activityType:"meeting",fullData:X})}});const V={HIGH:1,MEDIUM:2,LOW:3},be=U.sort((X,Ae)=>{const Pe=V[X.priority]||3,Qe=V[Ae.priority]||3;if(Pe!==Qe)return Pe-Qe;const nt=new Date(X.scheduledDate||0),wt=new Date(Ae.scheduledDate||0);return nt-wt}).slice(0,5);u(be),p(Oe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Oe.length);const ze=Oe.filter(X=>(X.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",ze.length),ze.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),ze.forEach((X,Ae)=>{let Pe=X.amount;Pe&&typeof Pe=="object"?Pe.toString?Pe=parseFloat(Pe.toString()):Pe=parseFloat(Pe):Pe=parseFloat(Pe)||0,console.log(`Deal ${Ae+1}:`,{id:X.id,name:X.name,stage:X.stage,stage_upper:(X.stage||"").toUpperCase(),amount:X.amount,amount_parsed:Pe,amount_type:typeof X.amount,close_date:X.close_date,close_date_type:typeof X.close_date,close_date_value:X.close_date?new Date(X.close_date):null,has_close_date:!!X.close_date,has_amount:Pe>0,all_keys:Object.keys(X),full_deal:X})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Oe.map(X=>X.stage))),v(Oe);const le=[...ot].sort((X,Ae)=>new Date(Ae.timestamp||0)-new Date(X.timestamp||0));y(le)}catch(me){console.error("Error fetching dashboard data:",me),A("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),pe(),ae.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),pe(),W(new Date)},3e4),()=>{ae.current&&clearInterval(ae.current)}),[pe]),h.useEffect(()=>{if(!t||!t.id)return;let me=0;const ye=3;let re=null;const De=()=>{const ve=window.location.protocol==="https:"?"wss:":"ws:",ke=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ce=`${ve}//${ke}/ws/notifications?user_id=${t.id}`;try{const de=new WebSocket(Ce);Ee.current=de,de.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),me=0},de.onmessage=Re=>{try{const Oe=JSON.parse(Re.data);console.log(" Real-time notification received:",Oe),Oe.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(Oe.event)&&(console.log(" Refreshing dashboard due to:",Oe.event),pe(),W(new Date))}catch(Oe){console.error("Error parsing WebSocket message:",Oe)}},de.onerror=Re=>{me===0&&console.warn(" WebSocket connection unavailable (this is optional)")},de.onclose=()=>{me<ye&&(me++,re=setTimeout(()=>{t&&t.id&&De()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return De(),()=>{re&&clearTimeout(re),Ee.current&&(Ee.current.close(),Ee.current=null)}},[t,pe]);const Se=[{icon:Rze,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:tJ,title:"Total Targets",value:nJ(ee,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/sales/targets")},{icon:eJ,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:XZ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")}];return console.log("SalesOverview rendering, loading:",j,"error:",S),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[j&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:S})}),n.jsx("div",{className:"mb-8",children:n.jsx(Kze,{searchQuery:k,onSearchChange:_,searchResults:se,onSearchResultClick:Y})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:Se.map(me=>n.jsx(Jze,{...me,loading:j},me.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(Zze,{logs:x,loading:j}),n.jsx(yj,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(xj,{leads:L,deals:M,targets:I,currencySymbol:a,basePath:"/sales"})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(eFe,{revenueData:N,loading:j})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(vA,{title:"Latest Leads",children:i.length>0?i.map((me,ye)=>n.jsx(tFe,{...me},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(vA,{title:"Latest Deals",children:j?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((me,ye)=>n.jsx(nFe,{...me,currencySymbol:a},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(vA,{title:"Upcoming Activities",children:d.length>0?d.map((me,ye)=>n.jsx(aFe,{...me},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},wA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],NA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Pr=e=>e?e.toUpperCase():"",jA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",rFe=e=>{switch(Pr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},iFe=e=>{switch(Pr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function oFe(){const e=Nt(),{user:t}=Gt(),a=t?.role==="Sales";h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(null),[f,p]=h.useState(null),[x,y]=h.useState(NA),[N,v]=h.useState(null),[j,w]=h.useState([]),[S,A]=h.useState(!1),[k,_]=h.useState([]),[L,T]=h.useState(null),[M,R]=h.useState([]),[z,O]=h.useState([]),[I,B]=h.useState("Filter by Status"),[ee,Q]=h.useState(""),[te,W]=h.useState(null),[ae,Ee]=h.useState(!1),[se,Y]=h.useState(1),[pe,Se]=h.useState(10),[me,ye]=h.useState("Overview"),[re,De]=h.useState(""),[ve,ke]=h.useState(!1),[Ce,de]=h.useState([]),[Re,Oe]=h.useState({}),[Ge,et]=h.useState(null);h.useEffect(()=>{s&&!i&&a&&t&&!x.assigned_to&&(y(P=>({...P,assigned_to:t.id})),T(t))},[s,i,a,t,x.assigned_to]);const{comments:mt,addComment:Fe,refresh:ot}=Aa({relatedType:"account",relatedId:N?.id});h.useEffect(()=>{N?.id&&ot()},[N?.id,ot]);const We=h.useCallback(async(P=null)=>{A(!0);try{const E=await ie.get("/accounts/admin/fetch-all"),_e=[...Array.isArray(E.data)?E.data:[]].sort((Le,qe)=>{const Xe=Le?.created_at||Le?.updated_at||0,jt=qe?.created_at||qe?.updated_at||0;return new Date(jt)-new Date(Xe)});if(w(_e),P){const Le=_e.find(qe=>qe.id===P);v(Le||null)}}catch(E){console.error(E),w([]),E.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{A(!1)}},[v]),Ke=h.useCallback(async()=>{try{const P=await ie.get("/users/all");_(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Ze=h.useCallback(async()=>{try{const P=await ie.get("/territories/fetch");R(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Me=h.useCallback(async()=>{try{const P=await ie.get("/accounts/admin/parent-companies");O(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),je=h.useCallback(async P=>{try{const E=await ie.get(`/activities/accounts/${P}`);Oe(E.data&&typeof E.data=="object"?E.data:{})}catch(E){console.error(E),E.response?.status===404&&(console.warn("No activities found for this account."),Oe({}))}},[]);h.useEffect(()=>{We(),Ke(),Ze(),Me()},[We,Ke,Ze,Me]),h.useEffect(()=>{N&&De(Pr(N.status)||"PROSPECT")},[N]);const ce=h.useMemo(()=>{const P=ee.trim().toLowerCase(),E=I.trim().toUpperCase();return j.filter(Z=>{if(!(t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER")&&Z.status?.toUpperCase()==="INACTIVE")return!1;const Le=[Z?.name,Z?.website,Z?.industry,Z?.territory?.name,Z?.phone_number],qe=P===""||Le.some(jt=>jt==null?!1:jt.toString().toLowerCase().includes(P)),Xe=E==="FILTER BY STATUS"||Pr(Z.status)===E;return qe&&Xe})},[j,ee,I,t]),oe=h.useMemo(()=>ce.length,[ce]),U=h.useMemo(()=>ce.filter(P=>P.status?.toLowerCase()==="customer").length,[ce]),V=h.useMemo(()=>ce.filter(P=>P.status?.toLowerCase()==="prospect").length,[ce]),be=h.useMemo(()=>ce.filter(P=>P.status?.toLowerCase()==="partner").length,[ce]),ze=h.useMemo(()=>ce.filter(P=>P.status?.toLowerCase()==="active").length,[ce]),le=h.useMemo(()=>ce.filter(P=>P.status?.toLowerCase()==="inactive").length,[ce]),X=h.useMemo(()=>ce.filter(P=>P.status?.toLowerCase()==="former").length,[ce]),Ae=h.useMemo(()=>[{title:"Total",value:oe,icon:na,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:U,icon:Io,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:V,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:be,icon:en,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:ze,icon:Io,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:le,icon:$o,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:X,icon:$o,color:"text-orange-600",bgColor:"bg-orange-100"}],[oe,U,V,be,ze,le,X]),Pe=Math.max(1,Math.ceil(ce.length/pe)||1);h.useEffect(()=>{Y(1)},[ee,I]),h.useEffect(()=>{Y(P=>{const E=Math.max(1,Math.ceil(ce.length/pe)||1);return P>E?E:P})},[ce.length,pe]);const Qe=h.useMemo(()=>{const P=(se-1)*pe;return ce.slice(P,P+pe)},[ce,se,pe]),nt=P=>{if(P.target.checked){const E=Qe.filter(Z=>Z.assigned_accs?.id===t?.id&&Z.acc_creator?.id===t?.id).map(Z=>Z.id);de(E)}else de([])},wt=P=>{de(E=>E.includes(P)?E.filter(Z=>Z!==P):[...E,P])},Te=async()=>{if(Ce.length===0)return;const P=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",E=P?"delete":"archive",Z=P?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",_e=!P;W({title:`${E.charAt(0).toUpperCase()+E.slice(1)} Accounts`,message:n.jsxs("span",{children:["Are you sure you want to ",E," ",n.jsx("span",{className:"font-semibold",children:Ce.length})," selected accounts? ",Z]}),confirmLabel:`${E.charAt(0).toUpperCase()+E.slice(1)} ${Ce.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:_e?kn:null,isArchive:_e,action:{type:"bulk-delete",accountIds:Ce}})};ce.length===0||(se-1)*pe+1,Math.min(se*pe,ce.length);const it=()=>Y(P=>Math.max(P-1,1)),$e=()=>Y(P=>Math.min(P+1,Pe)),ue=P=>{v(P),ye("Overview"),De(Pr(P?.status)||"PROSPECT")},he=()=>v(null),F=P=>{P.target.id==="accountModalBackdrop"&&!ae&&he()},G=()=>{r(!1),o(!1),p(null),y(NA),c(!1),T(null)},Ne=P=>{P.target.id==="modalBackdrop"&&G()},ge=P=>P?new Date(P).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",fe=P=>{const{name:E,value:Z}=P.target;y(_e=>({..._e,[E]:Z}))},Ue=()=>{y(NA),o(!1),p(null),r(!0)},K=P=>{v(null);let E=null;P.assigned_accs&&(E=k.find(Z=>Z.id===P.assigned_accs.id),E||(E=P.assigned_accs)),T(E),y({name:P.name||"",website:P.website||"",phone_number:P.phone_number||"",billing_address:P.billing_address||"",shipping_address:P.shipping_address||"",parent_company:P.parent_company||"",industry:P.industry||"",status:Pr(P.status)||"PROSPECT",territory_id:P.territory?.id?String(P.territory.id):"",assigned_to:P.assigned_accs?.id?String(P.assigned_accs.id):""}),o(!0),p(P.id),r(!0)},ne=P=>{if(!P)return;const E=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Z=E?"delete":"archive",_e=E?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",Le=!E;W({title:`${Z.charAt(0).toUpperCase()+Z.slice(1)} Account`,message:n.jsxs("span",{children:["Are you sure you want to ",Z," the account"," ",n.jsx("span",{className:"font-semibold",children:P.name}),"? ",_e]}),confirmLabel:`${Z.charAt(0).toUpperCase()+Z.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:Le?kn:null,isArchive:Le,action:{type:"delete",targetId:P.id,name:P.name}})},H=async()=>{if(!te?.action){W(null);return}const{action:P}=te,{type:E,payload:Z,targetId:_e,name:Le}=P;Ee(!0);try{if(E==="create"){c(!0);const qe=await ie.post("/accounts/admin",Z);Me(),q.success(`Account "${Le}" created successfully.`);const Xe=N?.id||null;G(),await We(Xe),!N&&qe.data?.id}else if(E==="update"){if(!_e)throw new Error("Missing account identifier for update.");c(!0),await ie.put(`/accounts/admin/${_e}`,Z),q.success(`Account "${Le}" updated successfully.`);const qe=N?.id&&N.id===_e?_e:null;G(),await We(qe),N?.id===_e&&v(null)}else if(E==="delete"){if(!_e)throw new Error("Missing account identifier for deletion.");const qe=N?.id;u(_e);const jt=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?`Account "${Le}" deleted successfully.`:`Account "${Le}" archived successfully.`;await ie.delete(`/accounts/admin/${_e}`),q.success(jt),await We(qe&&qe!==_e?qe:null),qe===_e&&v(null)}else if(E==="bulk-delete"){const{accountIds:qe}=P,jt=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?"deleted":"archived";await ie.delete("/accounts/admin/bulk-delete",{data:{account_ids:qe}}),q.success(`Successfully ${jt} ${qe.length} accounts`),de([]),await We()}}catch(qe){console.error(qe);const Xe=E==="create"?"Failed to create account. Please review the details and try again.":E==="update"?"Failed to update account. Please review the details and try again.":E==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",jt=qe.response?.data?.detail||Xe;q.error(jt),(E==="create"||E==="update")&&c(!1),E==="delete"&&u(null)}finally{(E==="create"||E==="update")&&c(!1),E==="delete"&&u(null),Ee(!1),W(null)}},xe=()=>{ae||W(null)},Ie=async()=>{if(!N||!re)return;const P=Pr(re),E=Pr(N.status);if(P!==E){ke(!0);try{await ie.put(`/accounts/admin/${N.id}`,{status:P}),q.success(`Account status updated to ${jA(P)}`),w(Z=>Z.map(_e=>_e.id===N.id?{..._e,status:P}:_e)),v(null)}catch(Z){console.error(Z);const _e=Z.response?.data?.detail||"Failed to update account status. Please try again.";q.error(_e)}finally{ke(!1)}}},[Je,ct]=h.useState(!1),bt=P=>{P.preventDefault(),ct(!0);const E=x.name.trim();if(!E){q.error("Account name is required.");return}if(!x.assigned_to){q.error("Assigned To is required.");return}const _e={name:E,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},Le=i&&f?"update":"create";W({title:Le==="create"?"Confirm New Account":"Confirm Update",message:Le==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:E}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:E}),"?"]}),confirmLabel:Le==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Le,payload:_e,targetId:f||null,name:E}})},Pt=[{label:"Filter by Status",value:"Filter by Status"},...wA.map(P=>({label:P.label,value:P.value}))],Et=te?.action?.type==="delete"?te.action.targetId:null,Yt=N&&(d===N.id||Et===N.id),rn=N&&d===N.id,aa=N?rFe(N.status):"",Va=N?n.jsx("div",{id:"accountModalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:he,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:N.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${aa}`,children:jA(N.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:N.assigned_accs&&N.assigned_accs.id===t?.id&&N.acc_creator&&N.acc_creator.id===t?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>K(N),disabled:te?.action?.type==="update"&&te.action.targetId===N.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>ne(N),disabled:!!Yt,children:rn?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(P=>n.jsx("button",{onClick:()=>ye(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${me===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[me==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:N.website?n.jsx("a",{href:N.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:N.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:N.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:N.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:N.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:N.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:N.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:N.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_accs?`${N.assigned_accs.first_name} ${N.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.acc_creator?`${N.acc_creator.first_name} ${N.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ge(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ge(N.updated_at)||"N/A"})]})]}),n.jsx(_a,{comments:mt,onAddComment:Fe})]}),me==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:j.notes||"No notes available."})]})]}),me==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Re.tasks&&Re.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>et(Ge==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Re.tasks.length,")"]})]}),Ge==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ge==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Re.tasks.map((P,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:P.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:P.subject||P.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:P.description||"No description"}),P.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",P.assigned_to.first_name," ",P.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ge(P.due_date||P.created_at)})]},`task-${E}`))})]}),Re.meetings&&Re.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>et(Ge==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Re.meetings.length,")"]})]}),Ge==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ge==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Re.meetings.map((P,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:P.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:P.subject||P.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:P.description||P.location||"No description"}),P.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",P.host.first_name," ",P.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ge(P.start_time||P.created_at)})]},`meeting-${E}`))})]}),Re.calls&&Re.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>et(Ge==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Re.calls.length,")"]})]}),Ge==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ge==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Re.calls.map((P,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:P.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:P.subject||P.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:P.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ge(P.call_time||P.created_at)})]},`call-${E}`))})]}),Re.contacts&&Re.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>et(Ge==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Re.contacts.length,")"]})]}),Ge==="contacts"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ge==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Re.contacts.map((P,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:P.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[P.first_name?`${P.first_name} `:"",P.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:P.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ge(P.created_at)})]},`contact-${E}`))})]}),Re.deals&&Re.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>et(Ge==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Re.deals.length,")"]})]}),Ge==="deals"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ge==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Re.deals.map((P,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:P.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[P.deal_id?P.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",P.name||P.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:P.stage||P.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ge(P.close_date||P.created_at)})]},`deal-${E}`))})]}),Re.quotes&&Re.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>et(Ge==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Re.quotes.length,")"]})]}),Ge==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ge==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Re.quotes.map((P,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:P.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(P.quote_id?P.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:P.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ge(P.presented_date)||""})]},`quote-${E}`))})]}),(!Re||(!Re.tasks||Re.tasks.length===0)&&(!Re.meetings||Re.meetings.length===0)&&(!Re.calls||Re.calls.length===0)&&(!Re.quotes||Re.quotes.length===0)&&(!Re.deals||Re.deals.length===0)&&(!Re.contacts||Re.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assignedTo:N.assigned_accs?.id?String(N.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:re||Pr(N?.status)||"PROSPECT",onChange:P=>De(P.target.value),children:wA.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))}),n.jsx("button",{onClick:Ie,disabled:ve||!re||Pr(re)===Pr(N?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ve||!re||Pr(re)===Pr(N?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ve?"Updating...":"Update"})]})]})]})]})]})}):null,bs=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ue(),ct(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(P=>n.jsx(lFe,{...P},P.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:ee,onChange:P=>Q(P.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:I,onChange:P=>B(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Pt.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Qe.length>0&&Qe.filter(P=>P.assigned_accs?.id===t?.id&&P.acc_creator?.id===t?.id).every(P=>Ce.includes(P.id))&&Qe.some(P=>P.assigned_accs?.id===t?.id&&P.acc_creator?.id===t?.id),onChange:nt,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ce.length>0?n.jsx("button",{onClick:Te,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Ce.length} selected accounts`,children:n.jsx(kn,{size:18})}):""})]})}),n.jsx("tbody",{children:S?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):ce.length>0?Qe.map(P=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ue(P),je(P.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:P.assigned_accs?.id===t?.id&&P.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:Ce.includes(P.id),onChange:()=>wt(P.id),onClick:E=>E.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:P.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:P.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${iFe(P.status)}`,children:jA(P.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:P.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:P.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(kt,{className:"text-gray-500"}),n.jsx("span",{children:P.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},P.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:ce.length,pageSize:pe,currentPage:se,onPrev:it,onNext:$e,onPageSizeChange:P=>{Se(P),Y(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Be=s?n.jsx("div",{id:"modalBackdrop",onClick:Ne,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:P=>P.stopPropagation(),children:[n.jsx("button",{onClick:()=>{G(),ct(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:l||ae,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:bt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Jm,{label:"Name",name:"name",value:x.name,onChange:fe,placeholder:"Company name",required:!0,isSubmitted:Je})}),n.jsx(i8,{label:"Parent Company",value:x.parent_company,onChange:P=>{y(E=>({...E,parent_company:P}))},items:z.map(P=>({id:P,name:P})),getLabel:P=>P?.name||"",placeholder:"Select parent company...",disabled:l}),n.jsx(Jm,{label:"Website",name:"website",value:x.website,onChange:fe,placeholder:"https://example.com",disabled:l}),n.jsx(Jm,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:fe,placeholder:"09xx xxx xxxx",type:"tel",disabled:l}),n.jsx(Jm,{label:"Industry",name:"industry",value:x.industry,onChange:fe,placeholder:"Industry",disabled:l}),n.jsx(Jm,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:fe,placeholder:"Billing address",disabled:l}),n.jsx(Jm,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:fe,placeholder:"Shipping address",disabled:l}),n.jsx(r8,{label:"Status",name:"status",value:x.status,onChange:fe,options:[{value:"",label:"Select status"},...wA],required:!0,disabled:l}),n.jsx(i8,{label:"Assigned To",value:x.assigned_to,onChange:P=>{const E=k.find(Z=>String(Z.id)===String(P));T(E),y(Z=>({...Z,assigned_to:P}))},items:k||[],getLabel:P=>`${P?.first_name??""} ${P?.last_name??""} (${P?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Je,disabled:l||k.length===0||a}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(r8,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:fe,options:[{value:"",label:L?L.assigned_territory&&L.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...L&&L.assigned_territory&&L.assigned_territory.map(P=>({value:String(P.id),label:P.name}))||[]],disabled:l||!L||!L.assigned_territory||L.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{G(),ct(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:l||ae,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:l||ae,children:l?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,St=te?n.jsx(dFe,{open:!0,title:te.title,message:te.message,confirmLabel:te.confirmLabel,cancelLabel:te.cancelLabel,variant:te.variant,onConfirm:H,onCancel:xe,loading:ae,icon:te.icon,isArchive:te.isArchive}):null;return n.jsxs(n.Fragment,{children:[bs,Va,Be,St]})}function lFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Jm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function r8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,disabled:l.value==="",children:l.label},l.value))})]})}function i8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(cFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function cFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(j=>String(j.id)===String(t)),N=y?s(y):t,v=h.useMemo(()=>{const j=f.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:j=>{p(j.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(j=>s(j).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function dFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const CA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},yl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Oi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function uFe(){const e=Nt(),t=Xt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(!1),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,L]=h.useState(null),[T,M]=h.useState(CA),[R,z]=h.useState(""),[O,I]=h.useState("Filter by Accounts"),[B,ee]=h.useState(null),[Q,te]=h.useState("Overview"),[W,ae]=h.useState(1),[Ee,se]=h.useState(10),[Y,pe]=h.useState({}),[Se,me]=h.useState(null),[ye,re]=h.useState(null),[De,ve]=h.useState(null),[ke,Ce]=h.useState([]),{comments:de,addComment:Re,refresh:Oe}=Aa({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&Oe()},[u?.id,Oe]),h.useEffect(()=>{const ne=t.state?.contactID;ne&&(ve(ne),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(De&&a.length>0&&!r){const ne=a.find(H=>H.id===De);ne?f(ne):q.error("Contact not found."),ve(null)}},[De,a,r]),h.useEffect(()=>{async function ne(){try{const H=await ie.get("/auth/me");re(H.data)}catch(H){console.error("Failed to fetch current user",H)}}ne()},[]);const Ge=h.useCallback(async(ne=null)=>{i(!0);try{const H=await ie.get("/contacts/admin/fetch-all"),Ie=[...Array.isArray(H.data)?H.data:[]].sort((Je,ct)=>{const bt=Je?.created_at||Je?.updated_at||0,Pt=ct?.created_at||ct?.updated_at||0;return new Date(Pt)-new Date(bt)});if(s(Ie),ne){const Je=Ie.find(ct=>ct.id===ne);f(Je||null)}}catch(H){console.error(H),s([]),H.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),et=h.useCallback(async()=>{try{const ne=await ie.get("/accounts/admin/fetch-all"),xe=[...Array.isArray(ne.data)?ne.data:[]].sort((Ie,Je)=>(Ie?.name||"").localeCompare(Je?.name||""));l(xe)}catch(ne){console.error(ne),l([]),ne.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),mt=h.useCallback(async()=>{try{const ne=await ie.get("/users/all"),xe=[...Array.isArray(ne.data)?ne.data:[]].sort((Ie,Je)=>yl(Ie).localeCompare(yl(Je)));d(xe)}catch(ne){console.error(ne),d([]),ne.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Fe=h.useCallback(async ne=>{try{const H=await ie.get(`/activities/contact/${ne}`);pe(H.data&&typeof H.data=="object"?H.data:{})}catch(H){console.error(H),H.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]);h.useEffect(()=>{Ge(),et(),mt()},[Ge,et,mt]);const ot=h.useMemo(()=>{const ne=new Map;o.forEach(xe=>{xe?.id&&xe?.name&&ne.set(String(xe.id),xe.name)}),a.forEach(xe=>{xe?.account_id&&xe?.account?.name&&ne.set(String(xe.account_id),xe.account.name)});const H=Array.from(ne.entries()).sort((xe,Ie)=>xe[1].localeCompare(Ie[1])).map(([xe,Ie])=>({value:xe,label:Ie}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...H]},[o,a]),We=h.useMemo(()=>{const ne=R.trim().toLowerCase(),H=O.trim();return a.filter(xe=>{const Ie=[xe?.first_name,xe?.last_name,xe?.email,xe?.title,xe?.department,xe?.account?.name,xe?.account?.status,xe?.work_phone,xe?.mobile_phone_1,xe?.mobile_phone_2,xe?.assigned_contact?.first_name,xe?.assigned_contact?.last_name,xe?.contact_creator?.first_name,xe?.contact_creator?.last_name,xe?.notes,Oi(xe?.created_at),Oi(xe?.updated_at)],Je=ne===""||Ie.some(bt=>bt==null?!1:bt.toString().toLowerCase().includes(ne)),ct=H==="Filter by Accounts"||String(xe.account_id)===H;return Je&&ct})},[a,R,O]),Ke=Math.max(1,Math.ceil(We.length/Ee)||1);h.useEffect(()=>{ae(1)},[R,O]),h.useEffect(()=>{ae(ne=>{const H=Math.max(1,Math.ceil(We.length/Ee)||1);return ne>H?H:ne})},[We.length,Ee]);const Ze=h.useMemo(()=>{const ne=(W-1)*Ee;return We.slice(ne,ne+Ee)},[We,W,Ee]),Me=()=>ae(ne=>Math.max(ne-1,1)),je=()=>ae(ne=>Math.min(ne+1,Ke)),ce=h.useMemo(()=>{if(!y||!_)return o;const ne=a.find(xe=>xe.id===_);return!ne||!ne.account||o.some(xe=>xe.id===ne.account.id)?o:[...o,ne.account]},[o,y,_,a]),oe=h.useCallback(()=>{x(!1),N(!1),L(null),M(CA),j(!1),nt(!1)},[]),U=ne=>{ne.target.id==="modalBackdrop"&&!v&&!A&&oe()},V=ne=>{const{name:H,value:xe}=ne.target;M(Ie=>({...Ie,[H]:xe}))},be=()=>{M(CA),N(!1),L(null),x(!0),ye?.role==="Sales"&&M(ne=>({...ne,assigned_to:ye.id}))},ze=async ne=>{if(!ne)return;const H=await ie.get(`/accounts/get/${ne.account_id}`);M({first_name:ne.first_name||"",last_name:ne.last_name||"",account_id:H.data.id?H.data.id:"",title:ne.title||"",department:ne.department||"",email:ne.email||"",work_phone:ne.work_phone||"",mobile_phone_1:ne.mobile_phone_1||"",mobile_phone_2:ne.mobile_phone_2||"",notes:ne.notes||"",assigned_to:ne.assigned_to?String(ne.assigned_to):""}),N(!0),L(ne.id),x(!0),f(null)},le=ne=>{if(!ne)return;const H=yl(ne)||"this contact",xe=ye?.role==="Admin"||ye?.role==="CEO"||ye?.role==="MANAGER"||ye?.role==="GROUP MANAGER",Ie=xe?"delete":"archive",Je=xe?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",ct=!xe;S({title:`${Ie.charAt(0).toUpperCase()+Ie.slice(1)} Contact`,message:n.jsxs("span",{children:["Are you sure you want to ",Ie," ",n.jsx("span",{className:"font-semibold",children:H}),"? ",Je]}),confirmLabel:`${Ie.charAt(0).toUpperCase()+Ie.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:ct?kn:null,isArchive:ct,action:{type:"delete",targetId:ne.id,name:H}})},X=()=>{const ne=Ze.filter(H=>H.assigned_contact?.id===ye?.id&&H.contact_creator?.id===ye?.id);ke.length===ne.length&&ne.length>0?Ce([]):Ce(ne.map(H=>H.id))},Ae=ne=>{Ce(H=>H.includes(ne)?H.filter(xe=>xe!==ne):[...H,ne])},Pe=async()=>{if(ke.length===0)return;const ne=ye?.role==="Admin"||ye?.role==="CEO"||ye?.role==="MANAGER"||ye?.role==="GROUP MANAGER",H=ne?"delete":"archive",xe=ne?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",Ie=!ne;S({title:`${H.charAt(0).toUpperCase()+H.slice(1)} Contacts`,message:n.jsxs("span",{children:["Are you sure you want to ",H," ",n.jsx("span",{className:"font-semibold",children:ke.length})," selected contacts? ",xe]}),confirmLabel:`${H.charAt(0).toUpperCase()+H.slice(1)} ${ke.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:Ie?kn:null,isArchive:Ie,action:{type:"bulk-delete",contactIds:ke}})},[Qe,nt]=h.useState(!1),wt=ne=>{ne.preventDefault(),nt(!0);const H=T.first_name.trim(),xe=T.last_name.trim();if(!H||!xe){q.error("First name and last name are required.");return}if(!T.account_id){q.error("Account is required.");return}if(!T.assigned_to){q.error("Assigned To is required.");return}const Je=T.email?.trim();if(!Je){q.error("Email is required.");return}if(!Je.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Je)){q.error("Please enter a valid email address.");return}const bt={first_name:H,last_name:xe,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},Pt=y&&_?"update":"create",Et=`${H} ${xe}`.trim();S({title:Pt==="create"?"Confirm New Contact":"Confirm Update",message:Pt==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Et})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Et}),"?"]}),confirmLabel:Pt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Pt,payload:bt,targetId:_||null,name:Et}})},Te=async()=>{if(!w?.action){S(null);return}const{action:ne}=w,{type:H,payload:xe,targetId:Ie,name:Je}=ne;k(!0);try{if(H==="create"){j(!0),await ie.post("/contacts/admin",xe),q.success(`Contact "${Je}" created successfully.`);const ct=u?.id||null;oe(),await Ge(ct)}else if(H==="update"){if(!Ie)throw new Error("Missing contact identifier for update.");j(!0),await ie.put(`/contacts/admin/${Ie}`,xe),q.success(`Contact "${Je}" updated successfully.`);const ct=u?.id&&u.id===Ie?Ie:u?.id||null;oe(),await Ge(ct),u?.id===Ie&&f(null)}else if(H==="delete"){if(!Ie)throw new Error("Missing contact identifier for deletion.");const ct=u?.id;ee(Ie);const Pt=ye?.role==="Admin"||ye?.role==="CEO"||ye?.role==="MANAGER"||ye?.role==="GROUP MANAGER"?`Contact "${Je}" deleted successfully.`:`Contact "${Je}" archived successfully.`;await ie.delete(`/contacts/admin/${Ie}`),q.success(Pt),await Ge(ct&&ct!==Ie?ct:null),ct===Ie&&f(null)}else if(H==="bulk-delete"){const{contactIds:ct}=ne;if(!ct||ct.length===0)throw new Error("No contacts provided for bulk deletion.");const Pt=ye?.role==="Admin"||ye?.role==="CEO"||ye?.role==="MANAGER"||ye?.role==="GROUP MANAGER"?`Successfully deleted ${ct.length} contact(s).`:`Successfully archived ${ct.length} contact(s).`;await ie.delete("/contacts/admin/bulk-delete",{data:{contact_ids:ct}}),q.success(Pt),Ce([]),await Ge(),f(null)}}catch(ct){console.error(ct);const bt=H==="create"?"Failed to create contact. Please review the details and try again.":H==="update"?"Failed to update contact. Please review the details and try again.":H==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",Pt=ct.response?.data?.detail||bt;q.error(Pt)}finally{(H==="create"||H==="update")&&j(!1),H==="delete"&&ee(null),k(!1),S(null)}},it=()=>{A||S(null)},$e=ne=>{f(ne),te("Overview")},ue=()=>f(null),he=ne=>{ne.target.id==="contactModalBackdrop"&&!A&&ue()},F=w?.action?.type==="delete"?w.action.targetId:null,G=u&&(B===u.id||F===u.id),Ne=u&&B===u.id,ge=u?n.jsx("div",{id:"contactModalBackdrop",onClick:he,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ne=>ne.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:ue,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:yl(u)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:u.assigned_contact&&u.assigned_contact.id===ye?.id&&u.contact_creator&&u.contact_creator.id===ye?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ze(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>le(u),disabled:!!G,children:Ne?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(ne=>n.jsx("button",{onClick:()=>te(ne),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Q===ne?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ne},ne))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Q==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:yl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Oi(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Oi(u.updated_at)||"N/A"})]})]})}),Q==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(_a,{comments:de,onAddComment:Re})]}),Q==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Y.tasks&&Y.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Y.tasks.length,")"]})]}),Se==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.tasks.map((ne,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ne.subject||ne.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ne.description||"No description"}),ne.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",ne.assigned_to.first_name," ",ne.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(ne.due_date||ne.created_at)})]},`task-${H}`))})]}),Y.meetings&&Y.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Y.meetings.length,")"]})]}),Se==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.meetings.map((ne,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ne.subject||ne.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ne.description||ne.location||"No description"}),ne.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",ne.host.first_name," ",ne.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(ne.start_time||ne.created_at)})]},`meeting-${H}`))})]}),Y.calls&&Y.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Y.calls.length,")"]})]}),Se==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.calls.map((ne,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ne.subject||ne.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ne.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(ne.call_time||ne.created_at)})]},`call-${H}`))})]}),Y.contacts&&Y.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Y.contacts.length,")"]})]}),Se==="contacts"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.contacts.map((ne,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[ne.first_name?`${ne.first_name} `:"",ne.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ne.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(ne.created_at)})]},`contact-${H}`))})]}),Y.deals&&Y.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Y.deals.length,")"]})]}),Se==="deals"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.deals.map((ne,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[ne.deal_id?ne.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",ne.name||ne.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:ne.stage||ne.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(ne.close_date||ne.created_at)})]},`deal-${H}`))})]}),Y.quotes&&Y.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>me(Se==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Y.quotes.length,")"]})]}),Se==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Se==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Y.quotes.map((ne,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(ne.quote_id?ne.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ne.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(ne.presented_date)||""})]},`quote-${H}`))})]}),(!Y||(!Y.tasks||Y.tasks.length===0)&&(!Y.meetings||Y.meetings.length===0)&&(!Y.calls||Y.calls.length===0)&&(!Y.quotes||Y.quotes.length===0)&&(!Y.deals||Y.deals.length===0)&&(!Y.contacts||Y.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${yl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const ne=encodeURIComponent(u.email),H=encodeURIComponent(""),xe=encodeURIComponent(""),Ie=`mailto:${ne}?subject=${H}&body=${xe}`;window.location.href=Ie},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${yl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${yl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,fe=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{be(),nt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:ne=>z(ne.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:O,onChange:ne=>I(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ot.map(ne=>n.jsx("option",{value:ne.value,children:ne.label},ne.value??ne.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Ze.length>0&&Ze.filter(ne=>ne.assigned_contact?.id===ye?.id&&ne.contact_creator?.id===ye?.id).every(ne=>ke.includes(ne.id))&&Ze.some(ne=>ne.assigned_contact?.id===ye?.id&&ne.contact_creator?.id===ye?.id),onChange:X,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ke.length>0?n.jsx("button",{onClick:Pe,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${ke.length} selected contacts`,children:n.jsx(kn,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):We.length>0?Ze.map(ne=>{const H=[{Icon:ta,value:ne.email,key:"email"},{Icon:kt,value:ne.work_phone,key:"work_phone"},{Icon:ld,value:ne.mobile_phone_1,key:"mobile_phone_1"},{Icon:ld,value:ne.mobile_phone_2,key:"mobile_phone_2"}].filter(xe=>!!xe.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:xe=>xe.stopPropagation(),children:ne.assigned_contact&&ne.assigned_contact.id===ye?.id&&ne.contact_creator&&ne.contact_creator.id===ye?.id?n.jsx("input",{type:"checkbox",checked:ke.includes(ne.id),onChange:()=>Ae(ne.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:xe=>xe.stopPropagation()}):null}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{$e(ne),Fe(ne.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:yl(ne)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:ne.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{$e(ne),Fe(ne.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(qx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:ne.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{$e(ne),Fe(ne.id)},children:H.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:H.map(({Icon:xe,value:Ie,key:Je})=>{const ct=pt.createElement(xe,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[ct,n.jsx("span",{children:Ie})]},Je)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{$e(ne),Fe(ne.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Jt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:ne.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{$e(ne),Fe(ne.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:ne.assigned_contact?`${ne.assigned_contact.first_name} ${ne.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{$e(ne),Fe(ne.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Tt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:Oi(ne.created_at)||"--"})]})})]},ne.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:We.length,pageSize:Ee,currentPage:W,onPrev:Me,onNext:je,onPageSizeChange:ne=>{se(ne),ae(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Ue=p?n.jsx("div",{id:"modalBackdrop",onClick:U,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ne=>ne.stopPropagation(),children:[n.jsx("button",{onClick:()=>{oe(),nt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||A,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:wt,noValidate:!0,children:[n.jsx(zc,{label:"First Name",name:"first_name",value:T.first_name,onChange:V,placeholder:"First name",required:!0,isSubmitted:Qe}),n.jsx(zc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:V,placeholder:"Last name",required:!0,isSubmitted:Qe}),n.jsx(o8,{label:"Account",value:T.account_id,onChange:ne=>M(H=>({...H,account_id:ne})),items:y?ce:o||[],getLabel:ne=>ne?.name??"",placeholder:"Search account...",disabled:v||(y?ce.length===0:o.length===0),required:!0,isSubmitted:Qe}),n.jsx(o8,{label:"Assigned To",value:T.assigned_to,onChange:ne=>M(H=>({...H,assigned_to:ne})),items:c||[],getLabel:ne=>`${ne?.first_name??""} ${ne?.last_name??""} (${ne?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Qe,disabled:v||c.length===0||ye?.role==="Sales"}),n.jsx(zc,{label:"Title",name:"title",value:T.title,onChange:V,placeholder:"Job title",disabled:v}),n.jsx(zc,{label:"Department",name:"department",value:T.department,onChange:V,placeholder:"Department",disabled:v}),n.jsx(zc,{label:"Email",name:"email",type:"email",value:T.email,onChange:V,placeholder:"example@email.com",required:!0,isSubmitted:Qe}),n.jsx(zc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:V,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(zc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:V,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(zc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:V,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(fFe,{label:"Notes",name:"notes",value:T.notes,onChange:V,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{oe(),nt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||A,children:v?"Saving...":y?"Update Contact":"Save Contact"})]})]})]})}):null,K=w?n.jsx(hFe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Te,onCancel:it,loading:A,icon:w.icon,isArchive:w.isArchive}):null;return n.jsxs(n.Fragment,{children:[fe,ge,Ue,K]})}function zc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function o8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(mFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function mFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function fFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function hFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const SA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function aJ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=Nt(),{leadID:c}=Ho(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[v,j]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,L]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),y(e.status||"New");return}if(!c)return;const I=await ie.get(`/leads/get/${c}`);u(I.data),y(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),L({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};h.useEffect(()=>{e?(u(e),y(e.status||"New")):c&&T()},[c,e]);const M=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const I=await ie.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const B={...d,status:I.data.status};u(B),i&&i(B),a&&a(),t&&t()}catch(I){console.error(I),q.error("Failed to update lead status")}},R=async I=>{const B={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",B),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const Q=(await ie.post("/accounts/convertedLead",B)).data.id,te={...A,account_id:Q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},ae=(await ie.post("/contacts/convertedLead",te)).data.id,Ee=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},se=_.amount&&_.amount!==""?parseFloat(_.amount):0,Y={..._,account_id:Q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:ae,probability:Ee(),stage:"Prospecting"},pe=await ie.post("/deals/convertedLead",Y),Se=await ie.put(`/leads/convert/${I.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(ee){console.error("Error during conversion:",ee);const Q=ee.response?.data?.detail||ee.message||"Failed to convert lead. Please try again.";q.error(Q)}},z=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=I=>I.toString().toLowerCase().replace(/\b\w/g,B=>B.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z(d.status)}`,children:O(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:SA(I.due_date||I.created_at)})]},`task-${B}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:SA(I.start_time||I.created_at)})]},`meeting-${B}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:SA(I.call_time||I.created_at)})]},`call-${B}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),B=encodeURIComponent(""),ee=encodeURIComponent(""),Q=`mailto:${I}?subject=${B}&body=${ee}`;window.location.href=Q},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>y(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const gFe=Jf.all(),_A=gFe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),pFe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),xFe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},AA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function yFe(){const e=Nt(),{leadID:t}=Ho();Fs();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,L]=h.useState(AA),[T,M]=h.useState(!1),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState(null),[Q,te]=h.useState(!1),[W,ae]=h.useState({});h.useRef(null);const[Ee,se]=h.useState(!1),[Y,pe]=h.useState(null),[Se,me]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ye,re]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[De,ve]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const ke=async()=>{try{const $e=await ie.get("/leads/getUsers");l($e.data)}catch($e){console.error(`Error fetching users: ${$e}`)}},Ce=async()=>{x(!0);try{const $e=await ie.get("/leads/admin/getLeads");f($e.data),console.log($e.data)}catch($e){console.error(`Error fetching leads: ${$e}`)}finally{x(!1)}};h.useEffect(()=>{ke(),Ce()},[]);const{user:de}=Gt(),Re=de?.role==="Sales";h.useEffect(()=>{r&&!T&&Re&&de&&!_.lead_owner&&(L($e=>({...$e,lead_owner:de.id})),d(de))},[r,T,Re,de,_.lead_owner]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const $e=u.find(ue=>ue.id===Number(t));$e&&s($e)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(Y){const ue=(G=>{if(!G)return{code:"+63",number:""};const Ne=G.match(/^(\+\d+)\s(.+)$/);if(Ne)return{code:Ne[1],number:Ne[2]};if(G.startsWith("+")){const ge=G.match(/^(\+\d{1,3})/);if(ge)return{code:ge[1],number:G.substring(ge[1].length).trim()}}return{code:"+63",number:G}})(Y.work_phone),he=[];Y.work_phone&&he.push(`Work: ${Y.work_phone}`),Y.mobile_phone_1&&he.push(`Mobile 1: ${Y.mobile_phone_1}`),Y.mobile_phone_2&&he.push(`Mobile 2: ${Y.mobile_phone_2}`);const F=he.length>0?he.join(" | "):"";me({name:Y.company_name||"",website:"",countryCode:ue.code,phone_number:ue.number,combinedPhoneNumbers:F,billing_address:Y.address||"",shipping_address:Y.address||"",industry:"",status:"Prospect",territory_id:Y.assigned_to?.territory?.id||null,assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null}),re({last_name:Y.last_name||"",first_name:Y.first_name||"",account_id:null,title:Y.title||"",department:Y.department||"",email:Y.email||"",work_phone:Y.work_phone||"",mobile_phone_1:Y.mobile_phone_1||"",mobile_phone_2:Y.mobile_phone_2||"",notes:Y.notes||"",assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null}),ve({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null})}},[Y]);const Oe=$e=>N($e.target.value),Ge=h.useMemo(()=>{const $e=y.trim().toLowerCase(),ue=v.trim().toUpperCase();return u.filter(he=>{const F=[he?.first_name,he?.last_name,he?.company_name,he?.title,he?.email,he?.work_phone,he?.assigned_to?`${he.assigned_to.first_name} ${he.assigned_to.last_name}`:""],G=$e===""||F.some(ge=>ge==null||ge===""?!1:ge.toString().toLowerCase().includes($e));let Ne=!1;return ue==="FILTER BY STATUS"?Ne=(he.status?he.status.toUpperCase():"")!=="CONVERTED":Ne=(he.status?he.status.toUpperCase():"")===ue,G&&Ne})},[u,y,v]),et=Math.max(1,Math.ceil(Ge.length/A)||1);h.useEffect(()=>{S(1)},[y,v]),h.useEffect(()=>{S($e=>{const ue=Math.max(1,Math.ceil(Ge.length/A)||1);return $e>ue?ue:$e})},[Ge.length,A]);const mt=h.useMemo(()=>{const $e=(w-1)*A;return Ge.slice($e,$e+A)},[Ge,w,A]),Fe=()=>S($e=>Math.max($e-1,1)),ot=()=>S($e=>Math.min($e+1,et)),We=h.useCallback(async $e=>{try{const ue=await ie.get(`/activities/lead/${$e}`);ae(ue.data&&typeof ue.data=="object"?ue.data:{})}catch(ue){console.error(ue),ue.response?.status===404&&(console.warn("No activities found for this account."),ae({}))}},[]),Ke=$e=>{s($e),We($e.id)},Ze=()=>{s(null),t&&e("/admin/leads",{replace:!0})},Me=()=>{i(!1),L(AA),M(!1),z(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},je=$e=>{$e.target.id==="modalBackdrop"&&Me()},ce=()=>{L(AA),M(!1),z(null),d(null),i(!0)},oe=$e=>{if(!$e){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",$e),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const ue=ge=>{if(!ge)return{code:"+63",number:""};const fe=ge.match(/^(\+\d+)\s(.+)$/);return fe?{code:fe[1],number:fe[2]}:{code:"+63",number:ge}},he=ue($e.work_phone),F=ue($e.mobile_phone_1),G=ue($e.mobile_phone_2);let Ne="";if($e.assigned_to){Ne=String($e.assigned_to.id);const ge=o?.find(fe=>fe.id===$e.assigned_to.id);d(ge)}L({first_name:$e.first_name||"",last_name:$e.last_name||"",company_name:$e.company_name||"",title:$e.title||"",department:$e.department||"",email:$e.email||"",work_ccode:he.code,work_phone:he.number,m1_ccode:F.code,mobile_phone_1:F.number,m2_ccode:G.code,mobile_phone_2:G.number,address:$e.address||"",notes:$e.notes||"",source:$e.source||"",territory_id:$e.territory?.id||null,lead_owner:Ne,status:$e.status||"New"}),M(!0),z($e.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},U=$e=>{if(!$e){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",$e);const ue=`${$e.first_name} ${$e.last_name}`||"this lead";ee({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:ue}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$e.id,name:ue}})},V=$e=>{const{name:ue,value:he}=$e.target;if(L(F=>({...F,[ue]:he})),ue==="lead_owner"){const F=o.find(G=>G.id===parseInt(he));d(F)}},[be,ze]=h.useState(!1),le=$e=>{if($e.preventDefault(),ze(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const he={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},F=T&&R?"update":"create",G=`${_.first_name} ${_.last_name}`;ee({title:F==="create"?"Confirm New Lead":"Confirm Update",message:F==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:G}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:G}),"?"]}),confirmLabel:F==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:F,payload:he,targetId:R||null,name:G}})},X=async()=>{if(!B?.action){ee(null);return}const{action:$e}=B,{type:ue,payload:he,targetId:F,name:G,lead:Ne}=$e;console.log(he),te(!0);try{if(ue==="create")I(!0),await ie.post("/leads/create",he),q.success(`Lead "${G}" created successfully.`),Me(),await Ce();else if(ue==="update"){if(!F)throw new Error("Missing lead identifier for update.");I(!0);const ge=await ie.put(`/leads/${F}`,he);q.success(`Lead "${G}" updated successfully.`),a&&a.id===F&&s(null),Me(),await Ce()}else if(ue==="delete"){if(!F)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${F}`),q.success(`Lead "${G}" deleted successfully.`),a?.id===F&&s(null),await Ce()}}catch(ge){console.error(ge);const fe=ue==="create"?"Failed to create lead. Please review the details and try again.":ue==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",Ue=ge.response?.data?.detail||fe;q.error(Ue)}finally{(ue==="create"||ue==="update")&&I(!1),ue!=="edit"&&(te(!1),ee(null))}},Ae=()=>{Q||ee(null)},Pe=u.filter($e=>$e.status==="New").length,Qe=u.filter($e=>$e.status==="Contacted").length,nt=u.filter($e=>$e.status==="Qualified").length,wt=u.filter($e=>$e.status==="Converted").length,Te=u.filter($e=>$e.status==="Lost").length,it=[{title:"New",value:Pe,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Qe,icon:kt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:nt,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:wt,icon:Xl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Te,icon:zs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ce(),ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:it.map($e=>n.jsx(vFe,{...$e},$e.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:Oe,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:$e=>j($e.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Ge.length>0?mt.map($e=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Ke($e),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[$e.first_name," ",$e.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:$e.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$e.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$e.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$e.assigned_to?`${$e.assigned_to.first_name} ${$e.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${xFe($e.status||"New")}`,children:pFe($e.status||"New")})})]},$e.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Ge.length,pageSize:A,currentPage:w,onPrev:Fe,onNext:ot,onPageSizeChange:$e=>{k($e),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$e=>$e.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Me(),ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:V,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:V,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${be&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:V,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${be&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:V,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${be&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:V,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:V,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${be&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:V,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:_A.map($e=>n.jsx("option",{value:$e.code,children:$e.code},$e.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:V,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:V,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:_A.map($e=>n.jsx("option",{value:$e.code,children:$e.code},$e.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:V,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:V,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:_A.map($e=>n.jsx("option",{value:$e.code,children:$e.code},$e.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:V,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:V,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${be&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(wFe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",disabled:O||Re,getLabel:$e=>`${$e.first_name} ${$e.last_name}`,onChange:$e=>{const ue=o.find(F=>String(F.id)===String($e));d(ue);let he=null;ue&&ue.assigned_territory&&ue.assigned_territory.length===1&&(he=ue.assigned_territory[0].id),L(F=>({...F,lead_owner:$e,territory_id:he}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:V,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map($e=>n.jsx("option",{value:$e.id,children:$e.name},$e.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:V,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:V,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{Me(),ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:O||Q,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:le,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:O||Q,children:O||Q?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),B&&n.jsx(bFe,{open:!0,title:B.title,message:B.message,confirmLabel:B.confirmLabel,cancelLabel:B.cancelLabel,variant:B.variant,onConfirm:X,onCancel:Ae,loading:Q}),a&&!r&&!T&&n.jsx(aJ,{relatedActs:W,lead:a,onBack:Ze,fetchLeads:Ce,setSelectedLead:s,onEdit:oe,onDelete:U})]})}function bFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function vFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function wFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const bb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ka=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),NFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ka,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ka,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ka,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ka,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ka,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),jFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ka,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ka,{label:"Department",name:"department",value:e.department}),n.jsx(Ka,{label:"Title",name:"title",value:e.title}),n.jsx(Ka,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ka,{label:"Email",name:"email",value:e.email}),n.jsx(Ka,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ka,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),CFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ka,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ka,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ka,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"Description",name:"description",value:e.description}),n.jsx(Ka,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function SFe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(NFe,{data:bb});case 2:return n.jsx(jFe,{data:bb});case 3:return n.jsx(CFe,{data:bb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:bb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(bj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function sJ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=Nt(),{user:c}=Gt();h.useEffect(()=>{console.log("SalesDealsQuickAction mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;o(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function rJ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=Nt(),[d]=Fs(),u=d.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:N}=Gt(),{comments:v,addComment:j,refresh:w}=Aa({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const M=((await ie.get("/deals/admin/fetch-all")).data||[]).find(R=>R.id===parseInt(u));if(M){const R={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(R)}else console.warn("Deal not found with ID:",u)}catch(L){console.error("Error fetching deal:",L)}})()},[u,e]),!f&&!u||u&&!f)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Kt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):y(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(R=>R==="PROSPECTING"?0:R==="QUALIFICATION"?1:R==="PROPOSAL"?2:R==="NEGOTIATION"?3:R==="CLOSED_WON"||R==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(R=>T===R?"orange":T>R?"green":"gray").map((R,z)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${R==="green"?"bg-green-500 border-green-500":R==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,L)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},L))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(_a,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:kt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Tt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,L)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},L))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(sJ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function _Fe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=Nt(),t=Xt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,N]=h.useState(null),[v,j]=h.useState(!1),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,L]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(!1),[O,I]=h.useState(!1),[B,ee]=h.useState(null),[Q,te]=h.useState([]),[W,ae]=h.useState([]),[Ee,se]=h.useState([]),[Y,pe]=h.useState({}),[Se,me]=h.useState(null);h.useEffect(()=>{const F=t.state,G=F?.dealID;if(G&&!F?.openDealModal){me(G),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Se&&y?.length>0&&!v){const F=y.find(G=>G.id===Se);F?d(F):q.error("Deal not found."),me(null)}},[Se,y,v]);const[ye,re]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[De,ve]=h.useState(null),[ke,Ce]=h.useState(null),de={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Re=F=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[F]||F||"--",Oe=F=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[F]||"bg-gray-100 text-gray-700",Ge=h.useCallback(async F=>{try{const G=await ie.get(`/activities/deal/${F}`);pe(G.data&&typeof G.data=="object"?G.data:{})}catch(G){console.error(G),G.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]),et=h.useMemo(()=>{const F=a.trim().toLowerCase(),G=r.trim(),Ne=o.trim();return(y??[]).filter(ge=>{const fe=[ge?.name,ge?.description,ge?.account?.name,ge?.contact?.first_name,ge?.contact?.last_name,ge?.assigned_deals?.first_name,ge?.assigned_deals?.last_name],Ue=F===""||fe.some(H=>H==null||H===""?!1:H.toString().toLowerCase().includes(F)),K=G==="Filter by Stage"||G===""||ge.stage===de[G]||ge.stage===G,ne=Ne==="Filter by Owner"||Ne===""||`${ge.assigned_deals?.first_name||""} ${ge.assigned_deals?.last_name||""}`.trim().toLowerCase()===Ne.toLowerCase();return Ue&&K&&ne})},[y,a,r,o]),mt=Math.max(1,Math.ceil(et.length/A)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(F=>{const G=Math.max(1,Math.ceil(et.length/A)||1);return F>G?G:F})},[et.length,A]);const Fe=h.useMemo(()=>{const F=(w-1)*A;return et.slice(F,F+A)},[et,w,A]),ot=()=>S(F=>Math.max(F-1,1)),We=()=>S(F=>Math.min(F+1,mt)),Ke=()=>{re({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),ee(null),x(!0)},Ze=async()=>{j(!0);try{const F=await ie.get("/deals/admin/fetch-all"),Ne=[...Array.isArray(F.data)?F.data:[]].sort((ge,fe)=>{const Ue=ge?.created_at?new Date(ge.created_at).getTime():0;return(fe?.created_at?new Date(fe.created_at).getTime():0)-Ue});N(Ne)}catch(F){F.response&&F.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(F)}finally{j(!1)}},Me=async()=>{try{const F=await ie.get("/accounts/admin/fetch-all");te(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},je=async()=>{try{const F=await ie.get("/contacts/admin/fetch-all");ae(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},ce=async()=>{try{const F=await ie.get("/users/all");se(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ze(),Me(),je(),ce()},[]);const{user:oe}=Gt(),U=oe?.role==="Sales";h.useEffect(()=>{p&&!O&&U&&oe&&!ye.assigned_to&&re(F=>({...F,assigned_to:oe.id}))},[p,O,U,oe,ye.assigned_to]);const V=async F=>{F&&(re({id:F.id||null,name:F.name||"",account_id:F.account_id?.toString()||"",primary_contact_id:F.primary_contact_id?.toString()||"",stage:F.stage||"PROPOSAL",amount:F.amount?.toString()||"",close_date:F.close_date?new Date(F.close_date).toISOString().split("T")[0]:"",assigned_to:F.assigned_to?.toString()||"",currency:F.currency||"PHP",description:F.description||""}),ve(F.account||null),Ce(F.contact||null),I(!0),ee(F.id),d(null),x(!0))},be=async(F=!1)=>{try{const G=await ie.get("/deals/admin/fetch-all"),ge=[...Array.isArray(G.data)?G.data:[]].sort((fe,Ue)=>{const K=fe?.created_at?new Date(fe.created_at).getTime():0;return(Ue?.created_at?new Date(Ue.created_at).getTime():0)-K});if(N(ge),!F&&c&&c.id){const fe=ge.find(Ue=>Ue.id===c.id);fe&&d({...fe})}}catch(G){console.error("Failed to refresh deal data:",G),await Ze()}},ze=F=>{const G=F.name.trim();if(!G){q.error("Deal name is required.");return}if(!F.account_id){q.error("Account is required.");return}const Ne=O&&B?"update":"create",ge=G;M({title:Ne==="create"?"Confirm New Deal":"Confirm Update",message:Ne==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:ge}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ge}),"?"]}),confirmLabel:Ne==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:Ne,formData:F,targetId:B||null,name:ge}})},le=F=>{if(!F)return;const G=F.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:G}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:G}})},X=async()=>{if(!T?.action){M(null);return}const{action:F}=T,{type:G,formData:Ne,targetId:ge,name:fe}=F;z(!0);try{if(G==="create"){L(!0);const Ue={name:Ne.name.trim(),account_id:parseInt(Ne.account_id),primary_contact_id:Ne.primary_contact_id?parseInt(Ne.primary_contact_id):null,stage:Ne.stage,amount:Ne.amount?parseFloat(Ne.amount):null,currency:Ne.currency||"PHP",close_date:Ne.close_date||null,description:Ne.description||null,assigned_to:Ne.assigned_to?parseInt(Ne.assigned_to):null};await ie.post("/deals/admin/create",Ue),q.success(`Deal "${fe}" created successfully.`),x(!1),await Ze()}else if(G==="update"){if(!ge)throw new Error("Missing deal identifier for update.");L(!0);const Ue={};Ne.name!==void 0&&(Ue.name=Ne.name.trim()),Ne.account_id!==void 0&&Ne.account_id!==""&&(Ue.account_id=parseInt(Ne.account_id)),Ne.primary_contact_id!==void 0&&(Ue.primary_contact_id=Ne.primary_contact_id?parseInt(Ne.primary_contact_id):null),Ne.stage!==void 0&&(Ue.stage=Ne.stage),Ne.amount!==void 0&&Ne.amount!==""&&(Ue.amount=parseFloat(Ne.amount)),Ne.currency!==void 0&&(Ue.currency=Ne.currency),Ne.close_date!==void 0&&(Ue.close_date=Ne.close_date||null),Ne.description!==void 0&&(Ue.description=Ne.description||null),Ne.assigned_to!==void 0&&(Ue.assigned_to=Ne.assigned_to?parseInt(Ne.assigned_to):null),await ie.put(`/deals/admin/${ge}`,Ue),q.success(`Deal "${fe}" updated successfully.`),x(!1),await Ze()}else if(G==="delete"){if(!ge)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${ge}`),q.success(`Deal "${fe}" deleted successfully.`),c?.id===ge&&d(null),await Ze()}}catch(Ue){console.error(Ue);const K=G==="create"?"Failed to create deal. Please review the details and try again.":G==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",ne=Ue.response?.data?.detail||K;q.error(ne)}finally{(G==="create"||G==="update")&&L(!1),z(!1),M(null)}},Ae=()=>{R||M(null)},Pe=()=>{x(!1),re({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ve(null),Ce(null),I(!1),ee(null),L(!1)},Qe=(y??[]).filter(F=>F.stage==="PROSPECTING").length,nt=(y??[]).filter(F=>F.stage==="QUALIFICATION").length,wt=(y??[]).filter(F=>F.stage==="PROPOSAL").length,Te=(y??[]).filter(F=>F.stage==="NEGOTIATION").length,it=(y??[]).filter(F=>F.stage==="CLOSED_WON").length,$e=(y??[]).filter(F=>F.stage==="CLOSED_LOST").length,ue=(y??[]).filter(F=>F.stage==="CLOSED_CANCELLED").length,he=[{title:"Prospecting",value:Qe,icon:aN,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:nt,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:wt,icon:Jt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Te,icon:rd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:it,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:$e,icon:zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ue,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Jt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:he.map(F=>n.jsx(TFe,{...F},F.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:F=>s(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:F=>i(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:F=>l(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(F=>`${F.assigned_deals?.first_name} ${F.assigned_deals?.last_name}`))].map((F,G)=>n.jsx("option",{value:F,children:F},G))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:et.length>0?Fe.map(F=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...F}),Ge(F.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.deal_id?F.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:F.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:F.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.contact?.first_name&&F.contact?.last_name?`${F.contact.first_name} ${F.contact.last_name}`:F.contact?.first_name||F.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Oe(F.stage)}`,children:Re(F.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",F.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.assigned_deals?.first_name&&F.assigned_deals?.last_name?`${F.assigned_deals.first_name} ${F.assigned_deals.last_name}`:F.assigned_deals?.first_name||F.assigned_deals?.last_name||"--"})]},F.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:et.length,pageSize:A,currentPage:w,onPrev:ot,onNext:We,onPageSizeChange:F=>{k(F),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(EFe,{onClose:Pe,formData:ye,setFormData:re,isEditing:O,onSubmit:ze,isSubmitting:_||R,accounts:Q,contacts:W,users:Ee,currentAccount:De,currentContact:ke}),c&&n.jsx(rJ,{relatedActs:Y,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:V,onDelete:le,onStatusUpdate:be}),T&&n.jsx(AFe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:X,onCancel:Ae,loading:R})]})}function AFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function TFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function EFe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const{user:f}=Gt(),p=f?.role==="Sales";h.useEffect(()=>{!s&&p&&f&&!t.assigned_to&&a(w=>({...w,assigned_to:f.id}))},[s,p,f,t.assigned_to,a]);const[x,y]=h.useState(!1),N=w=>{if(w.preventDefault(),y(!0),!t.name?.trim()){q.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}r?.(t)},v=w=>{w.target.id==="modalBackdrop"&&e()},j=h.useMemo(()=>{const w=String(t.account_id||"").trim(),S=Array.isArray(l)?l:[];return w?S.filter(A=>{const _=[A?.account_id,A?.accountId,A?.account?.id,A?.account?.account_id,A?.account?.accountId].find(L=>L!=null&&String(L).trim()!=="");return _?String(_)===w:!1}):S},[l,t.account_id]);return h.useEffect(()=>{const w=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!w)return;j.some(k=>String(k?.id)===S)||a(k=>({...k,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,j,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:w=>w.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:N,noValidate:!0,children:[n.jsx(TA,{label:"Deal Name",name:"name",value:t.name,onChange:w=>a({...t,name:w.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),n.jsx(EA,{label:"Account",value:t.account_id||"",onChange:w=>a({...t,account_id:w}),items:o||[],getLabel:w=>w?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:x}),n.jsx(EA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:w=>a({...t,primary_contact_id:w}),items:j||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:x}),n.jsx(l8,{label:"Stage",name:"stage",value:t.stage,onChange:w=>a({...t,stage:w.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(TA,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:w=>a({...t,amount:w.target.value}),placeholder:"0",required:!0,isSubmitted:x}),n.jsx(l8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:w=>a({...t,currency:w.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(TA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:w=>a({...t,close_date:w.target.value}),disabled:i}),n.jsx(EA,{label:"Assign To",value:t.assigned_to||"",onChange:w=>a({...t,assigned_to:w}),items:c||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||p,className:"md:col-span-2"}),n.jsx(LFe,{label:"Description",name:"description",value:t.description,onChange:w=>a({...t,description:w.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function TA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function l8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function EA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(kFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function kFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c={hasError:c}}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function LFe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const kA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],LA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ii=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},PA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",PFe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},DFe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},vb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Sg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",OFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},DA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},c8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},OA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Dw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},MFe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Dw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Dw(t);return a||null},IFe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},$Fe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function RFe(){const e=Nt(),t=Xt(),{user:a}=Gt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,N]=h.useState([]),[v,j]=h.useState(null),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,L]=h.useState(!1),[T,M]=h.useState(!1),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState(!1),[Q,te]=h.useState(null),[W,ae]=h.useState(LA),[Ee,se]=h.useState(""),[Y,pe]=h.useState("Filter by Status"),[Se,me]=h.useState(null),ye=h.useCallback(async()=>{if(w)try{ee(!0);const E=(await ie.get("/company/invoice-info"))?.data;e(`/sales/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:E}})}catch(P){const E=P?.response?.data?.detail||P?.message||"Failed to open print page.";q.error(E)}finally{ee(!1)}},[w,e]),[re,De]=h.useState(1),[ve,ke]=h.useState(10),[Ce,de]=h.useState("Overview"),[Re,Oe]=h.useState("Draft"),[Ge,et]=h.useState([]),[mt,Fe]=h.useState(null),{comments:ot,addComment:We,refresh:Ke}=Aa({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&Ke()},[w?.id,Ke]),h.useEffect(()=>{const E=t.state?.quoteID;if(E){Fe(E),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(mt&&r.length>0&&!o){const P=r.find(E=>E.id===mt);P?S(P):q.error("Quote not found."),Fe(null)}},[mt,r,o]),h.useEffect(()=>{let P=!0;return(async()=>{const Z=MFe();if(Z&&P){j(Z);return}try{const _e=await ie.get("/auth/me"),Le=Dw(_e?.data);if(Le&&P){j(Le);return}}catch{}try{const _e=await ie.get("/users/me"),Le=Dw(_e?.data);if(Le&&P){j(Le);return}}catch{}P&&j(null)})(),()=>{P=!1}},[]);const Ze=h.useCallback(P=>P&&u.find(Z=>String(Z.id)===String(P))?.name||"",[u]),Me=h.useCallback(P=>{if(!P)return"";const E=p.find(Z=>String(Z.id)===String(P));return E?`${E.first_name} ${E.last_name}`.trim():""},[p]),je=h.useCallback(P=>{if(!P)return"--";const E=c.find(Z=>String(Z.id)===String(P));return E?.deal_name||E?.name||`Deal #${c8(P)}`},[c]),ce=h.useCallback(P=>{const E=c.find(Le=>String(Le.id)===String(P)),Z=IFe(E);let _e=$Fe(E);if(!_e&&Z){const Le=p.filter(qe=>String(qe.account_id||"")===String(Z));if(Le.length>0){const qe=[...Le].sort((Xe,jt)=>{const vt=`${Xe.first_name||""} ${Xe.last_name||""}`.trim().toLowerCase(),Ut=`${jt.first_name||""} ${jt.last_name||""}`.trim().toLowerCase();return vt.localeCompare(Ut)});_e=String(qe[0].id)}}if(Z&&_e){const Le=p.find(qe=>String(qe.id)===String(_e));Le?.account_id&&String(Le.account_id)!==String(Z)&&(_e="")}return{accountId:Z||"",contactId:_e||""}},[c,p]),oe=h.useCallback(P=>{if(!P)return"--";if(P.deal?.deal_name)return P.deal.deal_name;if(P.deal?.name)return P.deal.name;const E=P.deal_id||P.deal?.id;return E?je(E):"--"},[je]),U=h.useCallback(P=>{if(!P)return"--";if(P.account?.name)return P.account.name;let E=P.account_id||P.account?.id;if(!E){const Z=P.deal_id||P.deal?.id;Z&&(E=ce(Z).accountId)}return E?Ze(E)||`Account #${E}`:"--"},[ce,Ze]),V=h.useCallback(P=>{if(!P)return"--";if(P.contact?.first_name||P.contact?.last_name)return`${P.contact?.first_name||""} ${P.contact?.last_name||""}`.trim()||"--";let E=P.contact_id||P.contact?.id;if(!E){const _e=P.deal_id||P.deal?.id;_e&&(E=ce(_e).contactId)}return(E?Me(E):"")||(E?`Contact #${E}`:"--")},[ce,Me]),be=h.useCallback(async(P=null)=>{l(!0);try{const E=await ie.get("/quotes/admin/fetch-all"),_e=[...Array.isArray(E.data)?E.data:[]].sort((Le,qe)=>{const Xe=Le?.created_at||Le?.updated_at||0,jt=qe?.created_at||qe?.updated_at||0;return new Date(jt)-new Date(Xe)});if(i(_e),P){const Le=_e.find(qe=>qe.id===P);S(Le||null)}}catch(E){console.error(E),i([]),E.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ze=h.useCallback(async()=>{try{const P=await ie.get("/deals/admin/fetch-all");d(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),le=h.useCallback(async()=>{try{const P=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),X=h.useCallback(async()=>{try{const P=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const P=await ie.get("/users/all");N(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{be(),ze(),le(),X(),Ae()},[be,ze,le,X,Ae]);const Pe=h.useMemo(()=>{const P=Ee.trim().toLowerCase(),E=Y.trim();return r.filter(Z=>{const _e=oe(Z),Le=U(Z),qe=V(Z),Xe=DA(Z.presented_date,Z.validity_days),jt=[Z.quote_id,_e,Le,qe,Z.total_amount?.toString(),Z.validity_days?.toString(),Z.presented_date?Sg(Z.presented_date):"",Xe?Sg(Xe):"",Z.assigned_user?.first_name,Z.assigned_user?.last_name,Z.creator?.first_name,Z.creator?.last_name,Z.status,Z.notes,vb(Z.created_at),vb(Z.updated_at)],vt=P===""||jt.some(An=>An==null?!1:An.toString().toLowerCase().includes(P)),Ut=E==="Filter by Status"||Ii(Z.status)===E;return vt&&Ut})},[r,Ee,Y,oe,U,V]),Qe=Math.max(1,Math.ceil(Pe.length/ve)||1);h.useEffect(()=>De(1),[Ee,Y]),h.useEffect(()=>{De(P=>{const E=Math.max(1,Math.ceil(Pe.length/ve)||1);return P>E?E:P})},[Pe.length,ve]);const nt=h.useMemo(()=>{const P=(re-1)*ve;return Pe.slice(P,P+ve)},[Pe,re,ve]),wt=()=>De(P=>Math.max(P-1,1)),Te=()=>De(P=>Math.min(P+1,Qe)),it=P=>{S(P),de("Overview"),Oe(Ii(P?.status)||"Draft")},$e=()=>{S(null),de("Overview")},ue=P=>{P.target.id==="quoteModalBackdrop"&&!O&&$e()},he=h.useCallback(()=>{k(!1),L(!1),te(null),ae(LA),M(!1)},[]),F=P=>{P.target.id==="modalBackdrop"&&!T&&!O&&he()},G=P=>{const{name:E,value:Z}=P.target;if(E==="deal_id"){const{accountId:_e,contactId:Le}=ce(Z);ae(qe=>({...qe,deal_id:Z,account_id:_e,contact_id:Le}));return}ae(_e=>({..._e,[E]:Z}))},Ne=()=>{const P={...LA};a?.role?.toUpperCase()==="SALES"&&v&&(P.assigned_to=String(v)),ae(P),L(!1),te(null),k(!0)},ge=P=>{if(!P)return;S(null);const E=P.deal?.id?String(P.deal.id):P.deal_id?String(P.deal_id):"",Z=E?ce(E):{accountId:"",contactId:""},_e=P.account?.id?String(P.account.id):P.account_id?String(P.account_id):Z.accountId,Le=P.contact?.id?String(P.contact.id):P.contact_id?String(P.contact_id):Z.contactId,qe=P.assigned_user?.id?String(P.assigned_user.id):P.assigned_to?String(P.assigned_to):"";ae({deal_id:E,account_id:_e||"",contact_id:Le||"",total_amount:P.total_amount?.toString()||"",presented_date:OFe(P.presented_date),validity_days:P.validity_days!==null&&P.validity_days!==void 0?String(P.validity_days):"",status:Ii(P.status)||"Draft",assigned_to:qe,notes:P.notes||"",subtotal:parseFloat(P.subtotal)||0,tax_rate:parseFloat(P.tax_rate)||0,tax_amount:parseFloat(P.tax_amount)||0,discount_type:P.discount_type||"",discount_value:parseFloat(P.discount_value)||0,discount_amount:parseFloat(P.discount_amount)||0,currency:P.currency||"PHP",items:Array.isArray(P.items)?P.items.map(Xe=>({id:Xe.id,item_type:Xe.item_type||"Product",name:Xe.name||"",description:Xe.description||"",sku:Xe.sku||"",variant:Xe.variant||"",unit:Xe.unit||"pcs",quantity:parseFloat(Xe.quantity)||1,unit_price:parseFloat(Xe.unit_price)||0,discount_percent:parseFloat(Xe.discount_percent)||0,discount_amount:parseFloat(Xe.discount_amount)||0,line_total:parseFloat(Xe.line_total)||0,sort_order:Xe.sort_order||0})):[]}),L(!0),te(P.id),k(!0)},fe=P=>{if(P.target.checked){const E=nt.map(Z=>Z.id);et(E)}else et([])},Ue=P=>{et(E=>E.includes(P)?E.filter(Z=>Z!==P):[...E,P])},K=P=>{if(!P)return;const E=P.quote_id||"this quote";z({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:E}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:E}})},ne=async()=>{Ge.length!==0&&z({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ge.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ge.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ge}})},[H,xe]=h.useState(!1),Ie=P=>{if(P.preventDefault(),xe(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){q.error("Deal is required.");return}if(!W.assigned_to&&a?.role?.toUpperCase()!=="SALES"){q.error("Assigned To is required.");return}const Z=ce(W.deal_id),_e=W.items.map((vt,Ut)=>({item_type:vt.item_type||"Product",name:vt.name,description:vt.description||null,sku:vt.sku||null,variant:vt.variant||null,unit:vt.unit||null,quantity:parseFloat(vt.quantity)||1,unit_price:parseFloat(vt.unit_price)||0,discount_percent:parseFloat(vt.discount_percent)||0,sort_order:vt.sort_order??Ut})),Le={deal_id:Number(W.deal_id),account_id:Z.accountId?Number(Z.accountId):null,contact_id:Z.contactId?Number(Z.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:_e},qe=_&&Q?"update":"create",Xe=je(W.deal_id),jt=qe==="create"?{...Le,created_by_id:Number(v)}:Le;z({title:qe==="create"?"Confirm New Quote":"Confirm Update",message:qe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Xe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Xe}),"?"]}),confirmLabel:qe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:qe,payload:jt,targetId:Q||null,name:Xe}})},Je=async()=>{if(!R?.action){z(null);return}const{action:P}=R,{type:E,payload:Z,targetId:_e,name:Le}=P;I(!0);try{if(E==="create")M(!0),await ie.post("/quotes/admin",Z),q.success("Quote created successfully."),he(),await be();else if(E==="update"){if(!_e)throw new Error("Missing quote identifier for update.");M(!0),await ie.put(`/quotes/admin/${_e}`,Z),q.success("Quote updated successfully."),he(),await be(),w?.id===_e&&S(null)}else if(E==="delete"){if(!_e)throw new Error("Missing quote identifier for deletion.");const qe=w?.id;me(_e),await ie.delete(`/quotes/admin/${_e}`),q.success(`Quote "${Le}" deleted successfully.`),await be(qe&&qe!==_e?qe:null),qe===_e&&S(null)}else E==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:Ge}),q.success(`Successfully deleted ${Ge.length} quotes`),et([]),await be())}catch(qe){console.error(qe);const Xe=E==="create"?"Failed to create quote. Please review the details and try again.":E==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Xe),(E==="create"||E==="update")&&M(!1),E==="delete"&&me(null)}finally{(E==="create"||E==="update")&&M(!1),E==="delete"&&me(null),I(!1),z(null)}},ct=()=>{O||z(null)},bt=h.useCallback((P,E)=>{const Z=P?.deal_id??P?.deal?.id??"",_e=Z?Number(Z):null,Le=_e?ce(String(_e)):{accountId:"",contactId:""},qe=P?.account_id??P?.account?.id??Le.accountId??null,Xe=P?.contact_id??P?.contact?.id??Le.contactId??null,jt=P?.total_amount??0,vt=P?.assigned_to??P?.assigned_user?.id??null;return{deal_id:_e,account_id:qe!=null&&String(qe).trim()!==""?Number(qe):null,contact_id:Xe!=null&&String(Xe).trim()!==""?Number(Xe):null,total_amount:Number(jt),presented_date:P?.presented_date||null,validity_days:P?.validity_days===""||P?.validity_days===void 0||P?.validity_days===null?null:Number(P.validity_days),status:E,assigned_to:vt!=null&&String(vt).trim()!==""?Number(vt):null,notes:P?.notes?.trim()||null}},[ce]),Pt=h.useCallback(async()=>{if(!w?.id)return;const P=Ii(Re),E=[P,P.toLowerCase()],Z=async _e=>ie.patch(`/quotes/admin/${w.id}/status`,{status:_e},{headers:{"Content-Type":"application/json"}});try{let _e=!1;for(const Le of E)try{await Z(Le),_e=!0;break}catch(qe){if(qe?.response?.status===422)continue;throw qe}if(!_e){const Le=bt(w,P);if(!Le.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Le.total_amount||Le.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${w.id}`,Le)}q.success(`Quote status updated to ${P}`),S(null),de("Overview"),await be()}catch(_e){console.error(_e);const Le=_e?.response?.data?.message||(_e?.response?.data?.errors?Object.values(_e.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(Le)}},[w,Re,be,bt]),Et=[{label:"Filter by Status",value:"Filter by Status"},...kA.map(P=>({label:P.label,value:P.value}))],Yt=R?.action?.type==="delete"?R.action.targetId:null,rn=w&&(Se===w.id||Yt===w.id),aa=w&&Se===w.id,Va=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:$e,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Qn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:oe(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${DFe(w.status)}`,children:PA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:ye,disabled:B||T||O,children:[n.jsx(un,{className:"mr-2"}),B?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ge(w),disabled:O||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>K(w),disabled:!!rn,children:aa?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(P=>n.jsx("button",{onClick:()=>de(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:OA(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:oe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:U(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:V(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:Sg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:Sg(DA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:PA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:vb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:vb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(xd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(_a,{comments:ot,onAddComment:We})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${OA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Re||Ii(w.status)||"Draft",onChange:P=>Oe(P.target.value),children:kA.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))}),n.jsx("button",{onClick:Pt,disabled:Ii(Re)===Ii(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ii(Re)===Ii(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,bs=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(un,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ne(),xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Ee,onChange:P=>se(P.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:Y,onChange:P=>pe(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Et.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:nt.length>0&&Ge.length===nt.length,onChange:fe,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ge.length>0?n.jsx("button",{onClick:ne,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ge.length} selected items`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Pe.length>0?nt.map(P=>{const E=DA(P.presented_date,P.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>it(P),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Z=>Z.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ge.includes(P.id),onChange:()=>Ue(P.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:OA(P.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:oe(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:U(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:V(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:P.total_amount?`${s}${Number(P.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${PFe(P.status)}`,children:PA(P.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:P.assigned_user?`${P.assigned_user.first_name} ${P.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:Sg(E)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},P.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Pe.length,pageSize:ve,currentPage:re,onPrev:wt,onNext:Te,onPageSizeChange:P=>{ke(P),De(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Be=A?n.jsx("div",{id:"modalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[n.jsx("button",{onClick:()=>{he(),xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||O,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ie,children:[n.jsx(m8,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:P=>{const{accountId:E,contactId:Z}=ce(P);ae(_e=>({..._e,deal_id:P,account_id:E,contact_id:Z}))},items:Array.isArray(c)?c:[],getLabel:P=>`${c8(P?.deal_id??"")} ${P?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:H,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(u8,{label:"Account",value:Ze(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(u8,{label:"Contact",value:Me(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(xd,{items:W.items,onChange:P=>ae(E=>({...E,items:P})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:P=>{ae(E=>({...E,subtotal:P.subtotal,discount_amount:P.discount_amount,tax_amount:P.tax_amount,total_amount:P.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:P=>ae(E=>({...E,discount_type:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:P=>ae(E=>({...E,discount_value:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:P=>ae(E=>({...E,tax_rate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(d8,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:G,disabled:T}),n.jsx(d8,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:G,placeholder:"30",disabled:T}),a?.role?.toUpperCase()==="SALES"?n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assigned To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white text-black font-medium",children:(()=>{const P=y.find(E=>String(E.id)===W.assigned_to);return P?`${P.first_name} ${P.last_name}`:"Assigning..."})()})]}):n.jsx(m8,{label:"Assigned To",value:W.assigned_to||"",onChange:P=>ae(E=>({...E,assigned_to:P})),items:Array.isArray(y)?y:[],getLabel:P=>{const E=`${P?.first_name??""} ${P?.last_name??""}`.trim();return E?P?.role?`${E} (${P.role})`:E:P?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:H,disabled:T}),n.jsx(zFe,{label:"Status",name:"status",value:W.status,onChange:G,options:kA,required:!0,disabled:T}),n.jsx(UFe,{label:"Notes",name:"notes",value:W.notes,onChange:G,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{he(),xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||O,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||O,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,St=R?n.jsx(BFe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Je,onCancel:ct,loading:O}):null;return n.jsxs(n.Fragment,{children:[w?Va:bs,Be,St]})}function d8({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function u8({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function zFe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function m8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(FFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function FFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function UFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function BFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function HFe(){const{userRole:e}=Qs();return n.jsx(r1,{currentUserRole:e,currentUserId:null})}function qFe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ie.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",L=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[_,T,k.action,k.entity_type,L,k.description],R=w===""||M.some(O=>O==null?!1:O.toString().toLowerCase().includes(w)),z=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&z}).sort((k,_)=>{const L=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-L})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const y=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!f.length){Vx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),L=document.createElement("a");L.href=_,L.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(_)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Wx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Tt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ts,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(qo,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:y,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const f8=["Not started","In progress","Deferred","Completed"],h8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},iJ=e=>e&&(h8[e]||h8[String(e).toUpperCase()])||"Not started",GFe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},MA=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},WFe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),iJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},VFe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=B=>{if(!B)return"";const ee=String(B).split("-");return ee.length===3?`${ee[0]}-${ee[2]}`:String(B)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",k="",_="Lead",L="",T="",M="";const R=c(),z=y(),O=l(),I=x();if(R){w="Account",_="Account",L=z,S=String(R);const B=d(),ee=u(),Q=N(),te=v(),W=f(),ae=j();B?(A="Contact",T="Contact",M=Q,k=String(B)):ee?(T="Deal",A="Deal",M=te,k=String(ee)):W&&(T="Quote",A="Quote",M=ae,k=String(W))}else O?(_="Lead",L=I,w="Lead",S=String(O)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:iJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.task_creator?.id??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:L,relatedType2Text:T,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:k}};function YFe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,L]=h.useState(1),[T,M]=h.useState(10),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState([]),[Q,te]=h.useState(null),W=Nt(),ae=Xt(),[Ee,se]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",createdById:null,relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[Y,pe]=h.useState(null),Se=Rx(Rf(nm,{activationConstraint:{distance:8}})),me=V=>{const{active:be}=V,ze=u.find(le=>le.id===be.id);te(ze)},ye=async V=>{const{active:be,over:ze}=V;if(te(null),!ze)return;const le=be.id,X=ze.id,Ae=u.find(Pe=>Pe.id===le);if(!(!Ae||Ae.status===X)){f(Pe=>Pe.map(Qe=>Qe.id===le?{...Qe,status:X}:Qe));try{const Pe={title:Ae.title,description:Ae.description||"",priority:Ae.priority||"Normal",status:X,due_date:Ae.dueDate||null,assigned_to:Ae.assignedToId||null,related_type_1:Ae.relatedType1||null,related_to_1:Ae.relatedTo1?parseInt(Ae.relatedTo1,10):null,related_type_2:Ae.relatedType2||null,related_to_2:Ae.relatedTo2?parseInt(Ae.relatedTo2,10):null};(!Pe.related_to_1||isNaN(Pe.related_to_1))&&(Pe.related_to_1=null),(!Pe.related_to_2||isNaN(Pe.related_to_2))&&(Pe.related_to_2=null),await ie.put(`/tasks/${le}`,Pe),q.success(`Task moved to "${X}"`)}catch(Pe){console.error("Failed to update task status:",Pe),q.error("Failed to update task status"),f(Qe=>Qe.map(nt=>nt.id===le?{...nt,status:Ae.status}:nt))}}},re=()=>{te(null)};h.useEffect(()=>{const V=ae.state?.openTaskModal,be=ae.state?.initialTaskData,ze=ae.state?.taskID;V?(i(!0),be&&se(le=>({...le,...be})),W(ae.pathname,{replace:!0,state:{}})):ze&&(pe(ze),W(ae.pathname,{replace:!0,state:{}}))},[ae,W]),h.useEffect(()=>{if(Y&&u.length>0&&!p){const V=u.find(be=>be.id===Y);V?Ce(V,!0):q.error("Task not found."),pe(null)}},[Y,u,p]);const De=async()=>{try{const V=await ie.get("/users/all");k(Array.isArray(V.data)?V.data:[])}catch(V){console.error("Failed to fetch users:",V),q.error("Failed to fetch users.")}},ve=async()=>{try{x(!0);const V=await ie.get("/tasks/all"),ze=(Array.isArray(V.data)?V.data:[]).map(VFe);ze.sort((le,X)=>{const Ae=le.createdAt?new Date(le.createdAt):0;return(X.createdAt?new Date(X.createdAt):0)-Ae}),f(ze),a==="list"&&L(1)}catch(V){console.error("Failed to load tasks:",V),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){De(),ve();const V=vN(e.id),be=new WebSocket(V);return be.onopen=()=>{console.log(" Connected to task notifications")},be.onmessage=ze=>{try{const le=JSON.parse(ze.data);le.type==="task_status_updated"&&(q.info(` ${le.message}`,{position:"top-right",autoClose:4e3}),ve())}catch(le){console.error("Error parsing notification:",le)}},be.onerror=ze=>{console.error(" WebSocket error:",ze)},be.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{be.readyState===WebSocket.OPEN&&be.close()}}},[t,e]);const ke=()=>{l(null),se({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:e?.role==="Sales"?String(e.id):"",notes:"",createdById:null,relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ce=(V=null,be=!1)=>{l(V),d(be),V?se({id:V.id,subject:V.title||"",description:V.description||"",priority:V.priority||"Normal",status:V.status||"Not started",dueDate:GFe(V.dueDate),assignedTo:V.assignedToId?String(V.assignedToId):"",assignedToName:V.assignedToName||"",createdBy:V.createdBy||"",notes:V.notes||"",createdById:V.createdById||null,relatedType1Text:V.relatedType1Text||"",relatedTo1Text:V.relatedTo1Text||"",relatedType2Text:V.relatedType2Text||"",relatedTo2Text:V.relatedTo2Text||"",relatedType1:V.relatedType1||"",relatedTo1:V.relatedTo1||"",relatedType2:V.relatedType2||"",relatedTo2:V.relatedTo2||""}):ke(),i(!0)},de=()=>{i(!1),l(null),d(!1),ke()},Re=async V=>{const be=WFe(V);try{o&&!c?(await ie.put(`/tasks/${o.id}`,be),q.success("Task updated successfully.")):(await ie.post("/tasks/create",be),q.success("Task created successfully.")),i(!1),await ve()}catch(ze){console.error("Failed to save task:",ze);const le=ze.response?.data?.detail||"Failed to save task.";q.error(le)}},Oe=V=>{V&&z({title:"Archive Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to archive ",n.jsx("span",{className:"font-semibold",children:V.title}),"?"]}),confirmLabel:"Archive Task",cancelLabel:"Cancel",variant:"warning",action:{type:"archive",targetId:V.id}})},Ge=()=>Ze.filter(V=>String(V.createdById)===String(e?.id)),et=()=>{const V=Ge();if(V.length!==0)if(V.every(be=>B.includes(be.id)))ee(B.filter(be=>!V.map(ze=>ze.id).includes(be)));else{const be=V.map(ze=>ze.id);ee([...new Set([...B,...be])])}},mt=V=>{const be=Ze.find(ze=>ze.id===V);String(be?.createdById)===String(e?.id)&&ee(ze=>ze.includes(V)?ze.filter(le=>le!==V):[...ze,V])},Fe=async()=>{B.length!==0&&z({title:"Archive Tasks",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:B.length})," selected tasks?"]}),confirmLabel:`Archive ${B.length} Task(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-archive",task_ids:B}})},ot=async()=>{if(!R?.action){z(null);return}const{action:V}=R;I(!0);try{V.type==="archive"?(await ie.delete(`/tasks/${V.targetId}`),q.success("Task archived successfully."),await ve()):V.type==="bulk-archive"&&(await ie.post("/tasks/bulk-archive",{task_ids:V.task_ids}),q.success(`Successfully archived ${V.task_ids.length} tasks`),ee([]),await ve())}catch(be){console.error("Task action failed:",be);const ze=be.response?.data?.detail||"Failed to archive task.";q.error(ze)}finally{I(!1),z(null)}},We=()=>{O||z(null)},Ke=h.useMemo(()=>{const V=y.trim().toLowerCase();return[...u].sort((ze,le)=>{const X=ze.createdAt?new Date(ze.createdAt):0;return(le.createdAt?new Date(le.createdAt):0)-X}).filter(ze=>{const le=V===""||ze.title?.toLowerCase().includes(V)||ze.description?.toLowerCase().includes(V)||ze.assignedToName?.toLowerCase().includes(V)||ze.createdBy?.toLowerCase().includes(V),X=v==="Filter by Status"||ze.status===v,Ae=w==="Filter by Priority"||ze.priority===w;return le&&X&&Ae})},[u,y,v,w]);h.useEffect(()=>{L(1)},[y,v,w,a,T]),h.useEffect(()=>{if(a==="list"){const V=Ke.length===0?1:Math.ceil(Ke.length/T);_>V&&L(V)}},[Ke.length,_,a,T]);const Ze=h.useMemo(()=>{if(a==="board")return Ke;const V=(_-1)*T;return Ke.slice(V,V+T)},[Ke,_,a,T]),Me=h.useMemo(()=>{const V=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:Ws,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<V&&be.status!=="Completed").length,icon:Vu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),je=V=>V.dueDate&&new Date(V.dueDate)<new Date&&V.status!=="Completed",ce=V=>{switch(V.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},oe=V=>{switch(V){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},U=V=>{switch(V){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ce(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(gn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(V=>n.jsx(QFe,{...V},V.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:V=>N(V.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:V=>j(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),f8.map(V=>n.jsx("option",{children:V},V))]}),n.jsxs("select",{value:w,onChange:V=>S(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ke.length>0?n.jsxs(Ux,{sensors:Se,collisionDetection:zx,onDragStart:me,onDragEnd:ye,onDragCancel:re,children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:f8.map(V=>{const be=Ze.filter(ze=>ze.status===V);return n.jsx(XFe,{column:V,columnTasks:be,getTaskCardColor:ce,isTaskOverdue:je,formatDateDisplay:MA,handleOpenModal:Ce,handleArchiveTask:Oe,currentUser:e},V)})}),n.jsx(pj,{children:Q?n.jsx(JFe,{task:Q,getTaskCardColor:ce,isTaskOverdue:je,formatDateDisplay:MA}):null})]}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ge().length>0&&Ge().every(V=>B.includes(V.id)),onChange:et})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:B.length>0?n.jsx("button",{onClick:Fe,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${B.length} selected tasks`,children:n.jsx(kn,{size:18})}):""})]})}),n.jsx("tbody",{children:Ze.length>0?Ze.map(V=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:String(V.createdById)===String(e?.id)?n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:B.includes(V.id),onChange:()=>mt(V.id)}):null}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ce(V,!0),children:V.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ce(V,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${oe(V.status||"Not started")}`,children:V.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ce(V,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${U(V.priority||"Low")}`,children:V.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ce(V,!0),children:V.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${je(V)?"text-red-600 font-medium":""}`,onClick:()=>Ce(V,!0),children:V.dateAssigned?MA(V.dateAssigned):""}),n.jsx("td",{})]},V.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(an,{className:"mt-6",totalItems:Ke.length,pageSize:T,currentPage:Ke.length===0?0:_,onPrev:()=>L(V=>Math.max(V-1,1)),onNext:()=>L(V=>Math.min(V+1,Math.max(1,Math.ceil(Ke.length/T)||1))),onPageSizeChange:V=>{M(V),L(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(x0,{isOpen:r,onClose:de,onSave:Re,onEdit:()=>d(!1),setFormData:se,formData:Ee,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Oe}),R&&n.jsx(KFe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:ot,onCancel:We,loading:O})]})}function QFe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function KFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function XFe({column:e,columnTasks:t,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleArchiveTask:o,currentUser:l}){const{isOver:c,setNodeRef:d}=Hx({id:e});return n.jsxs("div",{ref:d,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${c?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:e}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),n.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(u=>n.jsx(ZFe,{task:u,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleArchiveTask:o,currentUser:l},u.id)):n.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${c?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:c?"Drop here":"No tasks"})})]})}function ZFe({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s,handleOpenModal:r,handleArchiveTask:i,currentUser:o}){const{attributes:l,listeners:c,setNodeRef:d,transform:u,isDragging:f}=Bx({id:e.id}),p=u?{transform:`translate3d(${u.x}px, ${u.y}px, 0)`}:void 0;return n.jsxs("div",{ref:d,style:p,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${f?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...c,...l,children:[n.jsxs("div",{className:"text-left flex-1",onClick:x=>{x.stopPropagation(),r(e,!0)},children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),n.jsx("div",{className:"flex items-center gap-2 ml-3",onClick:x=>x.stopPropagation(),children:(String(e.createdById)===String(o?.id)||o?.role!=="Sales")&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ua,{})}),n.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),i(e)},className:"text-orange-500 hover:text-orange-700",children:n.jsx(kn,{})})]})})]})}function JFe({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s}){return n.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const oJ=e=>e?e.toUpperCase():"",wb=e=>{const t=oJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},eUe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},tUe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},nUe=e=>{const t=oJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},IA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},aUe=()=>{const e=Nt(),t=Xt(),{user:a}=Gt(),s=a?.role==="Sales",[r]=Fs(),i=r.get("id"),o=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[l,c]=h.useState([]),[d,u]=h.useState(!1),[f,p]=h.useState([]),[x,y]=h.useState(""),[N,v]=h.useState("Filter by Status"),[j,w]=h.useState(!1),[S,A]=h.useState(null),[k,_]=h.useState(1),[L,T]=h.useState(10),[M,R]=h.useState(IA),[z,O]=h.useState(!1),[I,B]=h.useState(null),[ee,Q]=h.useState(!1),[te,W]=h.useState(null),[ae,Ee]=h.useState(!1),[se,Y]=h.useState(null),[pe,Se]=h.useState([]),[me,ye]=h.useState(null);h.useEffect(()=>{j&&!z&&s&&a&&!M.assignedTo&&R(Me=>({...Me,assignedTo:a.id}))},[j,z,a,s]),h.useEffect(()=>{const Me=t.state?.openMeetingModal,je=t.state?.initialMeetingData?.relatedTo||r.get("id"),ce=t.state?.meetingID;Me||je?(w(!0),t.state?.initialMeetingData&&R(oe=>({...oe,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ce&&(Y(ce),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),h.useEffect(()=>{if(se&&l.length>0&&!d){const Me=l.find(je=>je.id===se);Me?A(Me):q.error("Meeting not found."),Y(null)}},[se,l,d]);const re=async()=>{if(i&&o){const Me=sessionStorage.getItem("meetingDetailData");if(Me)try{const je=JSON.parse(Me);if(je.id===parseInt(i)){A(je),sessionStorage.removeItem("meetingDetailData");return}}catch(je){console.error(je)}}u(!0);try{const Me=await ie.get("/meetings/admin/fetch-all"),ce=[...Array.isArray(Me.data)?Me.data:[]].sort((oe,U)=>{const V=oe?.created_at?new Date(oe.created_at).getTime():0;return(U?.created_at?new Date(U.created_at).getTime():0)-V});if(c(ce),i&&!S){const oe=ce.find(U=>U.id===parseInt(i));oe&&A(oe)}}catch{q.error("Failed to load meetings.")}finally{u(!1)}},De=async()=>{try{const Me=await ie.get("/users/all");p(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me)}};h.useEffect(()=>{async function Me(){try{const je=await ie.get("/auth/me");ye(je.data)}catch(je){console.error("Failed to fetch current user",je)}}Me()},[]),h.useEffect(()=>{re(),De()},[]);const ve=Me=>y(Me.target.value),ke=h.useMemo(()=>{const Me=x.trim().toLowerCase(),je=N.trim().toUpperCase();return l.filter(ce=>{const oe=[ce?.activity,ce?.description,ce?.relatedTo,ce?.assignedTo],U=Me===""||oe.some(be=>be&&be.toString().toLowerCase().includes(Me)),V=je==="FILTER BY STATUS"||wb(ce.status||"PENDING")===je;return U&&V})},[l,x,N]),Ce=h.useMemo(()=>{const Me=(k-1)*L;return ke.slice(Me,Me+L)},[ke,k,L]),de=()=>{w(!1),R(IA),O(!1),B(null),Q(!1)},Re=()=>{R(IA),O(!1),B(null),w(!0)},Oe=Me=>{let je="";if(Me.meet_assign_to?.id)je=String(Me.meet_assign_to.id);else if(Me.assignedTo){const Ae=f.find(Pe=>`${Pe.first_name} ${Pe.last_name}`===Me.assignedTo);je=Ae?String(Ae.id):""}const ce=Ae=>{if(!Ae)return"";try{const Pe=new Date(Ae),Qe=Pe.getTimezoneOffset()*6e4;return new Date(Pe.getTime()-Qe).toISOString().slice(0,16)}catch{return""}};let oe="Lead",U="",V="Contact",be="";if(Me.lead)oe="Lead",U=String(Me.lead.id);else if(Me.account)oe="Account",U=String(Me.account.id),Me.contact?(V="Contact",be=String(Me.contact.id)):Me.deal?(V="Deal",be=String(Me.deal.id)):Me.quote&&(V="Quote",be=String(Me.quote.id));else if(Me.relatedType||Me.related_type){const Ae=Me.relatedType||Me.related_type,Pe=Me.related_to||Me.relatedToId;Ae==="Lead"?(oe="Lead",U=String(Pe)):(oe="Account",U=Me.account_id?String(Me.account_id):"")}const ze={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},le=wb(Me.status),X=ze[le]||"Planned";R({subject:Me.subject||Me.activity||"",location:Me.location||"",startTime:ce(Me.start_time||Me.startTime),endTime:ce(Me.end_time||Me.endTime),status:X,notes:Me.description||Me.notes||"",assignedTo:je,relatedType1:oe,relatedTo1:U,relatedType2:V,relatedTo2:be}),O(!0),B(Me.id),A(null),w(!0)},Ge=Me=>{if(!Me.subject?.trim())return q.error("Subject is required.");if(!Me.startTime)return q.error("Start time is required.");if(Me.endTime&&!(new Date(Me.endTime)-new Date(Me.startTime)>0))return q.error("End time must be after start time.");Me.relatedType1,Me.relatedTo1,Me.relatedType1==="Account"&&Me.relatedType2&&Me.relatedTo2&&(Me.relatedType2,Me.relatedTo2);const je={...Me,assignedTo:parseInt(Me.assignedTo),relatedTo1:parseInt(Me.relatedTo1),relatedTo2:parseInt(Me.relatedTo2)},ce=z&&I?"update":"create";W({title:ce==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ce} "${je.subject}"?`,confirmLabel:ce==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ce,payload:je,targetId:I,name:je.subject}})},et=async()=>{if(!te?.action)return;const{type:Me,payload:je,targetId:ce,name:oe}=te.action;Ee(!0);try{Me==="create"?(Q(!0),await ie.post("/meetings/create",je),q.success(`Meeting "${oe}" created.`),de(),await re()):Me==="update"?(Q(!0),await ie.put(`/meetings/${ce}`,je),q.success(`Meeting "${oe}" updated.`),de(),await re()):Me==="delete"?(await ie.delete(`/meetings/${ce}`),q.success(`Meeting "${oe}" archived.`),S?.id===ce&&A(null),await re()):Me==="bulk-delete"&&(await ie.post("/meetings/sales/bulk-delete",{meeting_ids:te.action.meetingIds}),q.success(`Successfully archived ${te.action.meetingIds.length} meeting(s)`),Se([]),await re())}catch(U){const V=U.response?.data?.detail||"Action failed.";q.error(typeof V=="string"?V:JSON.stringify(V)),console.error(V)}finally{Q(!1),Ee(!1),W(null)}},mt=Me=>{We("single")},Fe=()=>{const Me=Ce.filter(je=>je.created_by===me?.id);pe.length===Me.length&&Me.length>0?Se([]):Se(Me.map(je=>je.id))},ot=Me=>{Se(je=>je.includes(Me)?je.filter(ce=>ce!==Me):[...je,Me])},We=Me=>{if(Me==="single"){const je=S.subject||"this meeting";W({title:"Archive Meeting",message:`Are you sure you want to archive "${je}"?`,confirmLabel:"Archive Meeting",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:S.id,name:je}})}else if(Me==="bulk"){if(pe.length===0)return;W({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:pe.length})," selected meetings?"]}),confirmLabel:`Archive ${pe.length} meeting(s)`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",meetingIds:pe}})}},Ke=()=>{We("bulk")},Ze=async(Me,je)=>{try{await ie.put(`/meetings/${Me}`,{status:je}),q.success("Status updated"),re(),A(null)}catch{q.error("Failed to update status")}};return o&&i?S?n.jsx(yd,{meeting:S,onClose:()=>{A(null),e("/admin/dashboard")},onEdit:Oe,onDelete:mt,onStatusUpdate:Ze,currentUser:me,isSalesView:!0}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[d&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Tt,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Re,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(gn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:ve,className:"w-full outline-none"})]}),n.jsxs("select",{value:N,onChange:Me=>v(Me.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Ce.length>0&&Ce.filter(Me=>Me.created_by===me?.id).every(Me=>pe.includes(Me.id))&&Ce.some(Me=>Me.created_by===me?.id),onChange:Fe,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:pe.length>0?n.jsx("button",{onClick:Ke,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${pe.length} selected meetings`,children:n.jsx(kn,{size:18})}):""})]})}),n.jsx("tbody",{children:Ce.length>0?Ce.map(Me=>n.jsxs("tr",{onClick:()=>A(Me),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-center",onClick:je=>je.stopPropagation(),children:me&&Me.created_by===me.id?n.jsx("input",{type:"checkbox",checked:pe.includes(Me.id),onChange:()=>ot(Me.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:je=>je.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Me.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Me.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Me.lead.title}),Me.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Me.account.name}),Me.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Me.contact.first_name," ",Me.contact.last_name]}),Me.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Me.deal.name}),Me.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:eUe(Me.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:tUe(Me.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Me.meet_assign_to.first_name," ",Me.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${nUe(wb(Me.status))}`,children:wb(Me.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4"})]},Me.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(an,{totalItems:ke.length,pageSize:L,currentPage:k,onPrev:()=>_(Me=>Math.max(1,Me-1)),onNext:()=>_(Me=>Me+1),onPageSizeChange:Me=>{T(Me),_(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),j&&n.jsx(p1,{onClose:de,formData:M,setFormData:R,isEditing:z,onSubmit:Ge,isSubmitting:ee||ae,users:f,currentUser:a}),S&&n.jsx(yd,{meeting:S,onClose:()=>A(null),onEdit:Oe,onDelete:mt,onStatusUpdate:Ze,currentUser:me,isSalesView:!0}),te&&n.jsx(sUe,{open:!0,title:te.title,message:te.message,confirmLabel:te.confirmLabel,variant:te.variant,onConfirm:et,onCancel:()=>W(null),loading:ae})]})};function sUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const rUe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],iUe=e=>e?String(e).toUpperCase():"",mf=e=>{const t=iUe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},$A=e=>{const t=mf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},g8=e=>{switch(mf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},RA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},p8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function oUe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,L]=h.useState("PLANNED"),[T,M]=h.useState(!1),[R,z]=h.useState(!1),[O,I]=h.useState(1),[B,ee]=h.useState(10),[Q,te]=h.useState(null),[W,ae]=h.useState([]),[Ee,se]=h.useState(null),{comments:Y,addComment:pe,refresh:Se}=Aa({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&Se()},[a?.id,Se]),Fs();const me=Nt(),ye=Xt(),{user:re}=Gt(),De=re?.role==="Sales",ke={subject:"",call_time:(()=>{const F=new Date,G=F.getFullYear(),Ne=String(F.getMonth()+1).padStart(2,"0"),ge=String(F.getDate()).padStart(2,"0");return`${G}-${Ne}-${ge}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Ce,de]=h.useState(ke);h.useEffect(()=>{e&&!y&&De&&re&&!Ce.assigned_to&&de(F=>({...F,assigned_to:re.id}))},[e,y,re,De]),h.useEffect(()=>{const F=ye.state,G=F?.callID;if(G&&!F?.openCallModal){te(G),me(ye.pathname,{replace:!0,state:{}});return}!F?.openCallModal||!F?.initialCallData||F.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||F.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),de(Ne=>({...Ne,...F.initialCallData,relatedTo1:F.initialCallData.relatedTo1?String(F.initialCallData.relatedTo1):"",relatedTo2:F.initialCallData.relatedTo2?String(F.initialCallData.relatedTo2):""})),me(ye.pathname,{replace:!0,state:{}}))},[ye.state,o]),h.useEffect(()=>{if(Q&&u.length>0&&!R){const F=u.find(G=>G.id===Q);F?s(F):q.error("Call not found."),te(null)}},[Q,u,R]);const Re=async()=>{try{z(!0);const F=await ie.get("/calls/admin/fetch-all"),Ne=[...Array.isArray(F.data)?F.data:[]].sort((ge,fe)=>{const Ue=ge?.created_at?new Date(ge.created_at):0;return(fe?.created_at?new Date(fe.created_at):0)-Ue});f(Ne)}catch(F){console.error("Error fetching calls:",F),q.error("Failed to load calls")}finally{z(!1)}},Oe=async()=>{try{const F=await ie.get("/users/all");x(F.data)}catch(F){console.error("Error fetching users: ",F)}};h.useEffect(()=>{async function F(){try{const G=await ie.get("/auth/me");se(G.data)}catch(G){console.error("Failed to fetch current user",G)}}F()},[]),h.useEffect(()=>{Oe(),Re()},[]);const Ge=[],et="",mt="Filter by Status",Fe="Filter by Users",ot=u,We=h.useMemo(()=>{const F=(O-1)*B;return ot.slice(F,F+B)},[ot,O,B]),Ke=u.length,Ze=u.filter(F=>mf(F.status)==="PLANNED").length,Me=u.filter(F=>mf(F.status)==="HELD").length,je=u.filter(F=>mf(F.status)==="NOT_HELD").length,ce=[{title:"Total",value:Ke,icon:Rs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Ze,icon:Ws,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Me,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:je,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}],[oe,U]=h.useState("Overview"),V=F=>{const{name:G,value:Ne}=F.target;de(ge=>{const fe={...ge,[G]:Ne};return G==="relatedType1"&&(fe.relatedTo1="",Ne==="Lead"?(fe.relatedType2=null,fe.relatedTo2=null,d([])):Ne==="Account"&&(fe.relatedType2="Contact")),G==="relatedType2"&&(fe.relatedTo2=""),fe})};h.useEffect(()=>{const F=async()=>{try{l([]);let G;Ce.relatedType1==="Lead"?G=await ie.get("/leads/admin/getLeads"):Ce.relatedType1==="Account"&&(G=await ie.get("/accounts/admin/fetch-all"));let Ne=[];if(G&&Array.isArray(G.data)?Ne=G.data:Ne=[],y&&Ce.relatedTo1)try{let ge;Ce.relatedType1==="Lead"?ge=await ie.get(`/leads/get/${Ce.relatedTo1}`):Ce.relatedType1==="Account"&&(ge=await ie.get(`/accounts/get/${Ce.relatedTo1}`)),ge&&ge.data&&(Ne.some(Ue=>String(Ue.id)===String(Ce.relatedTo1))||(Ne=[ge.data,...Ne]))}catch(ge){console.error("Error fetching specific related item:",ge)}l(Ne)}catch(G){console.error("Error fetching data:",G),l([])}};Ce.relatedType1&&F()},[Ce.relatedType1,y,Ce.relatedTo1]),h.useEffect(()=>{const F=async()=>{try{d([]);let G;if(Ce.relatedType1==="Account"&&Ce.relatedTo1)Ce.relatedType2==="Contact"?G=await ie.get(`/contacts/from-acc/${Ce.relatedTo1}`):Ce.relatedType2==="Deal"?G=await ie.get(`/deals/from-acc/${Ce.relatedTo1}`):Ce.relatedType2==="Quote"&&(G=await ie.get(`/quotes/from-acc/${Ce.relatedTo1}`));else{d([]);return}G&&Array.isArray(G.data)?d(G.data):d([])}catch(G){console.error("Error fetching data:",G),d([])}};Ce.relatedType2&&F()},[Ce.relatedType2,Ce.relatedTo1,Ce.relatedType1]);const[be,ze]=h.useState(!1),le=F=>{F.preventDefault(),ze(!0);const G=Ce.subject;if(!G||G.trim()===""){q.error("Subject is required.");return}if(!Ce.relatedTo1){q.error(`Please select a ${Ce.relatedType1||"Lead/Account"}.`);return}if(!Ce.assigned_to){q.error("Subject is required.");return}const ge={...Ce,duration_minutes:Ce.duration_minutes?parseInt(Ce.duration_minutes,10):null,relatedTo1:Ce.relatedTo1?parseInt(Ce.relatedTo1,10):null,relatedTo2:Ce.relatedType1==="Lead"?null:Ce.relatedTo2?parseInt(Ce.relatedTo2,10):null,relatedType2:Ce.relatedType1==="Lead"?null:Ce.relatedType2,assigned_to:Ce.assigned_to?parseInt(Ce.assigned_to,10):null},fe=y&&v?"update":"create",Ue=(Ce.subject||"").trim()||"Untitled Call";i({title:fe==="create"?"Confirm New Call":"Confirm Update",message:fe==="create"?`Create "${Ue}"?`:`Save changes to "${Ue}"?`,confirmLabel:fe==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:fe,payload:ge,targetId:v||null,name:Ue}})},X=F=>s(F),Ae=()=>{t(!1),N(!1),j(null)},Pe=async()=>{if(!r?.action){i(null);return}const{action:F}=r,{type:G,payload:Ne,targetId:ge,name:fe,callIds:Ue}=F;k(!0);try{if(G==="bulk-delete")await ie.post("/calls/bulk-delete",{call_ids:Ue}),q.success(`Successfully archived ${Ue.length} call(s).`),ae([]),await Re();else if(G==="create")S(!0),await ie.post("/calls/create",Ne),q.success(`Call "${fe}" created successfully.`),t(!1),de(ke),N(!1),j(null),await Re();else if(G==="update"){if(!ge)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${ge}`,Ne),q.success(`Call "${fe}" updated successfully.`),t(!1),de(ke),N(!1),j(null),await Re()}else if(G==="delete"){if(!ge)throw new Error("Missing call identifier for archival.");await ie.delete(`/calls/${ge}`),q.success(`Call "${fe}" archived successfully.`),a?.id===ge&&s(null),await Re()}}catch(K){const ne=G==="create"?"Failed to create call. Please review the details and try again.":G==="update"?"Failed to update call. Please review the details and try again.":"Failed to archive call. Please try again.",H=K?.response?.data?.detail||ne;q.error(H)}finally{(G==="create"||G==="update")&&S(!1),k(!1),i(null)}},Qe=()=>{A||i(null)},nt=async()=>{if(a?.id)try{M(!0),await ie.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${$A(_)}`),f(F=>Array.isArray(F)?F.map(G=>G.id===a.id?{...G,status:_}:G):F),s(null)}catch(F){const G=F.response?.data?.detail||"Failed to update status.";q.error(G)}finally{M(!1)}},wt=()=>{const F=We.filter(G=>G.call_creator?.id===Ee?.id);W.length===F.length&&F.length>0?ae([]):ae(F.map(G=>G.id))},Te=F=>{ae(G=>G.includes(F)?G.filter(Ne=>Ne!==F):[...G,F])},it=F=>{if(F==="single"){const G=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${G}"? This call will be hidden from your view but admins can still see it.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"warning",action:{type:"delete",targetId:a.id,name:G}})}else if(F==="bulk"){if(W.length===0)return;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected calls? These calls will be hidden from your view but admins can still see them."]}),confirmLabel:`Archive ${W.length} call(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-delete",callIds:W}})}},$e=()=>{it("bulk")};h.useEffect(()=>{a&&L(mf(a.status))},[a]);const ue=a?n.jsxs("div",{id:"callModalBackdrop",onClick:F=>F.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Qn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${g8(a.status)}`,children:$A(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a.call_creator?.id===Ee?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const F=Ue=>{if(!Ue)return"";const K=new Date(Ue),ne=K.getFullYear(),H=String(K.getMonth()+1).padStart(2,"0"),xe=String(K.getDate()).padStart(2,"0"),Ie=String(K.getHours()).padStart(2,"0"),Je=String(K.getMinutes()).padStart(2,"0");return`${ne}-${H}-${xe}T${Ie}:${Je}`},G=a.lead?"Lead":a.account?"Account":"Lead",Ne=a.lead?a.lead.id:a.account?a.account.id:null,ge=G==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",fe=G==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;de({subject:a.subject||"",call_time:F(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:G,relatedType2:ge,relatedTo1:Ne?String(Ne):"",relatedTo2:fe?String(fe):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>it("single"),children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(F=>n.jsx("button",{onClick:()=>U(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${oe===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[oe==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(uo,{label:"Call Time",value:p8(a.call_time)}),n.jsx(uo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(uo,{label:"Direction",value:a.direction||"--"}),n.jsx(uo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(uo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(uo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(uo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(uo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(uo,{label:"Quote",value:RA(a.quote.quote_id)}),n.jsx(uo,{label:"Created At",value:p8(a.created_at)})]})}),oe==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(_a,{comments:Y,onAddComment:pe})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:F=>L(F.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:nt,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,he=e?n.jsx("div",{id:"modalBackdrop",onClick:F=>F.target.id==="modalBackdrop"&&Ae(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Ae(),ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:le,noValidate:!0,children:[n.jsx(cUe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Ce.subject,onChange:V,isSubmitted:be,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:V,value:Ce.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(zA,{items:Array.isArray(o)?o:[],value:Ce.relatedTo1??"",placeholder:`Search ${Ce.relatedType1||"here"}...`,getLabel:F=>Ce.relatedType1==="Lead"?F.title:F.name??"",onChange:F=>de(G=>({...G,relatedTo1:F})),required:!0,isSubmitted:be,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:V,value:Ce.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Ce.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(zA,{disabled:Ce.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:Ce.relatedTo2??"",placeholder:Ce.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Ce.relatedType2||"Contact"}...`:`No ${Ce.relatedType2||""} data found`,getLabel:F=>Ce.relatedType2==="Contact"?`${F.first_name??""} ${F.last_name??""}`.trim():Ce.relatedType2==="Quote"?RA(F.quote_id)??"":F.name??"",onChange:F=>de(G=>({...G,relatedTo2:F}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Ce.call_time,onChange:V,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Ce.duration_minutes,onChange:V,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(zA,{items:Array.isArray(p)?p:[],value:Ce.assigned_to??"",placeholder:"Search an account...",getLabel:F=>`${F.first_name} ${F.last_name}`,onChange:F=>de(G=>({...G,assigned_to:F})),disabled:De,required:!0,isSubmitted:be})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:V,value:Ce.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:V,value:Ce.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(dUe,{className:"col-span-2",label:"Notes",value:Ce.notes,onChange:V,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ae(),ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Rs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{de(ke),N(!1),j(null),t(!0),ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ce.map(F=>n.jsx(lUe,{...F},F.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:et})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:mt,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),rUe.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))]}),n.jsxs("select",{defaultValue:Fe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ge.map(F=>n.jsx("option",{value:F.name,children:F.name},F.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:We.length>0&&We.filter(F=>F.call_creator?.id===Ee?.id).every(F=>W.includes(F.id))&&We.some(F=>F.call_creator?.id===Ee?.id),onChange:wt,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:W.length>0?n.jsx("button",{onClick:$e,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${W.length} selected calls`,children:n.jsx(kn,{size:18})}):""})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):We.length>0?We.map(F=>n.jsxs("tr",{onClick:()=>X(F),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:G=>G.stopPropagation(),children:F.call_creator?.id===Ee?.id?n.jsx("input",{type:"checkbox",checked:W.includes(F.id),onChange:()=>Te(F.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:G=>G.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:F.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[F.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.lead.title}),F.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.account.name}),F.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[F.contact.first_name," ",F.contact.last_name]}),F.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.deal.name}),F.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:RA(F.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:F.call_time?new Date(F.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:F?.call_assign_to?`${F.call_assign_to.first_name} ${F.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g8(F.status)}`,children:$A(F.status)})}),n.jsx("td",{})]},F.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(an,{totalItems:ot.length,pageSize:B,currentPage:O,onPrev:()=>I(F=>Math.max(F-1,1)),onNext:()=>I(F=>Math.min(F+1,Math.max(1,Math.ceil(ot.length/B)||1))),onPageSizeChange:F=>{ee(F),I(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),ue,he,r&&n.jsx(uUe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,variant:r.variant,onConfirm:Pe,onCancel:Qe,loading:A})]})}function lUe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function cUe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function dUe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function uo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function uUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function zA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function mUe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Xt(),p=Nt(),{logout:x}=Qs(),{user:y,fetchUser:N}=Gt(),j={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[f.pathname]||"Manager Panel";return h.useEffect(()=>{N()},[]),h.useEffect(()=>{const w=()=>N();return window.addEventListener("userProfileUpdated",w),()=>window.removeEventListener("userProfileUpdated",w)},[N]),h.useEffect(()=>{if(!y?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",A=w?"localhost:8000":window.location.host,k=`${S}//${A}/ws/notifications?user_id=${y.id}`,_=new WebSocket(k);return _.onmessage=L=>{const T=JSON.parse(L.data);o(M=>[T,...M]),c(M=>M+1)},()=>_.close()},[y?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Xf,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(lx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function fUe(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Xt(),{user:d}=Gt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/manager/dashboard",className:({isActive:x})=>x?u:f,children:[n.jsx(cx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-lg"}),"Sales"]}),n.jsx(At,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/accounts",className:({isActive:x})=>x?u:f,children:[n.jsx(vd,{})," Accounts"]}),n.jsxs($t,{to:"/manager/contacts",className:({isActive:x})=>x?u:f,children:[n.jsx(en,{})," Contacts"]}),n.jsxs($t,{to:"/manager/leads",className:({isActive:x})=>x?u:f,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs($t,{to:"/manager/deals",className:({isActive:x})=>x?u:f,children:[n.jsx(Jt,{})," Deals"]}),n.jsxs($t,{to:"/manager/quotes",className:({isActive:x})=>x?u:f,children:[n.jsx(un,{})," Quotes"]}),n.jsxs($t,{to:"/manager/targets",className:({isActive:x})=>x?u:f,children:[n.jsx(ur,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(At,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/tasks",className:({isActive:x})=>x?u:f,children:[n.jsx(Vt,{})," Tasks"]}),n.jsxs($t,{to:"/manager/meetings",className:({isActive:x})=>x?u:f,children:[n.jsx(Tt,{})," Meetings"]}),n.jsxs($t,{to:"/manager/calls",className:({isActive:x})=>x?u:f,children:[n.jsx(Rs,{})," Calls"]}),n.jsxs($t,{to:"/manager/audit",className:({isActive:x})=>x?u:f,children:[n.jsx(Ts,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/manager/territory",className:({isActive:x})=>x?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(vL,{className:"text-lg"}),"Settings"]}),n.jsx(At,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/users",className:({isActive:x})=>x?u:f,children:[n.jsx(na,{})," Users"]}),n.jsxs($t,{to:"/manager/manage-account",className:({isActive:x})=>x?u:f,children:[n.jsx(en,{})," Your Profile"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(mUe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(ex,{})})]})]})}const hUe=e=>n.jsx(qt,{...e}),gUe=e=>n.jsx(vd,{...e}),lJ=e=>n.jsx(Ws,{...e}),pUe=e=>n.jsx(ox,{...e}),xUe=e=>n.jsx(Jw,{...e}),yUe=e=>n.jsx(Tt,{...e}),bUe=e=>n.jsx(kt,{...e}),vUe=e=>n.jsx(tN,{...e}),cJ=e=>n.jsx(eN,{...e}),wUe=e=>n.jsx(na,{...e}),dJ=e=>n.jsx(en,{...e}),NUe=e=>n.jsx(Yn,{...e}),uJ=e=>n.jsx(Jt,{...e}),jUe=e=>n.jsx(un,{...e}),mJ=e=>n.jsx(ur,{...e}),CUe=e=>n.jsx(ga,{...e}),SUe=e=>n.jsx(Tt,{...e}),_Ue=e=>n.jsx(Rs,{...e}),AUe=e=>n.jsx(Zl,{...e}),TUe=e=>n.jsx(Ts,{...e}),fJ=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},EUe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},kUe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},LUe=e=>{switch(e){case"call":return{Icon:bUe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:vUe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:yUe,color:"text-blue-500",bgColor:"bg-blue-100"}}},PUe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},DUe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=Nt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:gUe,label:"Account"},{icon:dJ,label:"Contact"},{icon:NUe,label:"Leads"},{icon:uJ,label:"Deals"},{icon:jUe,label:"Quotes"},{icon:mJ,label:"Target"},{icon:CUe,label:"Task"},{icon:SUe,label:"Meeting"},{icon:_Ue,label:"Call"},{icon:TUe,label:"Audit"},{icon:AUe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(hUe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},OUe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=Nt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,y=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},MUe=({logs:e,loading:t})=>{const a=Nt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(cJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(OUe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},IUe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),$Ue=({revenueData:e,loading:t})=>{const a=Nt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let A=0;A<=j;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",A=v.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const L=_>0;if(k&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:L,willBeAdded:S&&L,allFields:Object.keys(v)})),S&&k&&L)try{let T=new Date(w);if(isNaN(T.getTime())){const M=String(w).split("T")[0];T=new Date(M+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const M=T.getFullYear(),R=T.getMonth()+1,z=`${M}-${String(R).padStart(2,"0")}`;l[z]||(l[z]=0),l[z]+=_,c++,console.log(` Added deal ${v.id} to month ${z}: ${_}, total: ${l[z]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${z} (Year: ${M}, Month: ${R})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:L,closeDate:w,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(v=>parseInt(v.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;y.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${j}`),y.push(A),A>0&&console.log(`Month ${s[w]} ${j} (${S}): ${A}`)}}const N=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:N,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(cJ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(cj,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},FA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=Nt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},RUe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=Nt(),{text:l,bg:c}=kUe(s||"Website"),d=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},zUe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=Nt(),u={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:f,bg:p}=EUe(u),x=parseFloat(t||0),y=o?x>=o?"up":"down":"up",N=y==="up"?pUe:xUe,v=y==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${p} px-2 py-0.5 rounded-full`,children:u})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:fJ(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},FUe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=Nt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=LUe(f),{text:N,bg:v}=PUe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const L=new Date(_),M=L-new Date,R=Math.floor(M/864e5);return R===0?`Today, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:L.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/manager/meetings/info?id=${o}`)):d("/manager/tasks"):d(f==="call"?`/manager/calls/info?id=${o}`:f==="meeting"?`/manager/meetings/info?id=${o}`:"/manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(lJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(dJ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},UUe=()=>{const e=Nt(),{user:t}=Gt(),a=t?.company?.currency||"",[s,r]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState([]),[j,w]=h.useState(!0),[S,A]=h.useState(null),[k,_]=h.useState(""),[L,T]=h.useState([]),[M,R]=h.useState([]),[z,O]=h.useState([]),[I,B]=h.useState([]),[ee,Q]=h.useState(0),[te,W]=h.useState(new Date),ae=h.useRef(null),Ee=h.useRef(null),se=h.useMemo(()=>{try{if(!k.trim())return[];const me=k.toLowerCase().trim(),ye=[];return Array.isArray(L)&&L.forEach(re=>{const De=`${re.first_name||""} ${re.last_name||""}`.trim().toLowerCase(),ve=(re.company_name||"").toLowerCase(),ke=(re.email||"").toLowerCase(),Ce=(re.phone||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me)||Ce.includes(me))&&ye.push({id:re.id,name:`${re.first_name||""} ${re.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:re.company_name||"No company",route:`/manager/leads/${re.id}`})}),Array.isArray(M)&&M.forEach(re=>{const De=(re.name||"").toLowerCase(),ve=(re.account?.name||"").toLowerCase(),ke=(re.description||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me))&&ye.push({id:re.id,name:re.name||"Unnamed Deal",type:"Deal",details:re.account?.name||"No account",route:`/manager/deals/info?id=${re.id}`})}),Array.isArray(z)&&z.forEach(re=>{const De=(re.name||"").toLowerCase(),ve=(re.email||"").toLowerCase(),ke=(re.phone||"").toLowerCase(),Ce=(re.website||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me)||Ce.includes(me))&&ye.push({id:re.id,name:re.name||"Unnamed Account",type:"Account",details:re.email||re.phone||"No contact info",route:"/manager/accounts"})}),ye.slice(0,10)}catch(me){return console.error("Error in search:",me),[]}},[k,L,M,z]),Y=me=>{me.route&&(e(me.route),_(""))},pe=h.useCallback(async()=>{w(!0),A(null);try{const[me,ye,re,De,ve,ke,Ce,de]=await Promise.all([ie.get("/leads/admin/getLeads").catch(X=>(console.error("Error fetching leads:",X),{data:[]})),ie.get("/deals/admin/fetch-all").catch(X=>(console.error("Error fetching deals:",X),{data:[]})),ie.get("/accounts/admin/fetch-all").catch(X=>(console.error("Error fetching accounts:",X),{data:[]})),ie.get("/tasks/all").catch(X=>(console.error("Error fetching tasks:",X),{data:[]})),ie.get("/meetings/admin/fetch-all").catch(X=>(console.error("Error fetching meetings:",X),{data:[]})),ie.get("/calls/admin/fetch-all").catch(X=>(console.error("Error fetching calls:",X),{data:[]})),ie.get("/logs/read-all").catch(X=>(console.error("Error fetching logs:",X),{data:[]})),ie.get("/targets/admin/fetch-all").catch(X=>(console.error("Error fetching targets:",X),{data:[]}))]),Re=Array.isArray(me.data)?me.data:[],Oe=Array.isArray(ye.data)?ye.data:[],Ge=Array.isArray(re.data)?re.data:[],et=Array.isArray(De.data)?De.data:[],mt=Array.isArray(ve.data)?ve.data:[],Fe=Array.isArray(ke.data)?ke.data:[],ot=Array.isArray(Ce.data)?Ce.data:[],We=Array.isArray(de.data)?de.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Oe.length),Oe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Oe[0],null,2)),console.log("First deal keys:",Object.keys(Oe[0]))),T(Re),R(Oe),O(Ge),B(We);const Ke=We.reduce((X,Ae)=>{const Pe=Ae.amount||Ae.value||Ae.target_amount||0,Qe=parseFloat(typeof Pe=="string"?Pe.replace(/[^\d.-]/g,""):Pe);return X+(Number.isFinite(Qe)?Qe:0)},0);Q(Ke);const Ze=Re.filter(X=>X.status&&!["Lost","Converted"].includes(X.status)).length,Me=et.filter(X=>!X.dueDate||X.status==="Completed"?!1:new Date(X.dueDate)<new Date).length;r({activeLeads:Ze,totalDeals:Oe.length,activeAccounts:Ge.length,overdueTasks:Me});const je=[...Re].sort((X,Ae)=>new Date(Ae.created_at||0)-new Date(X.created_at||0)).slice(0,5);o(je);const ce=[...Oe].sort((X,Ae)=>new Date(Ae.created_at||0)-new Date(X.created_at||0)).slice(0,5);c(ce);const oe=new Date,U=[];Fe.forEach(X=>{const Ae=X.due_date||X.call_time,Pe=(X.status||"").toUpperCase();if(Ae){const Qe=new Date(Ae);Pe==="COMPLETED"||Pe==="MISSED"||Pe==="NOT_HELD"||Pe==="HELD"||U.push({type:"Call",title:X.subject||"Untitled Call",assignedTo:X.assigned_to||(X.call_assign_to?`${X.call_assign_to.first_name||""} ${X.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ae,priority:(X.priority||"MEDIUM").toUpperCase(),id:X.id,activityType:"call",fullData:X})}}),mt.forEach(X=>{const Ae=X.dueDate||X.start_time,Pe=(X.status||"").toUpperCase();if(Ae){const Qe=new Date(Ae);Pe==="COMPLETED"||Pe==="CANCELLED"||Pe==="DONE"||U.push({type:"Meeting",title:X.subject||X.activity||"Untitled Meeting",assignedTo:X.assignedTo||(X.meet_assign_to?`${X.meet_assign_to.first_name||""} ${X.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ae,priority:(X.priority||"MEDIUM").toUpperCase(),id:X.id,activityType:"meeting",fullData:X})}});const V={HIGH:1,MEDIUM:2,LOW:3},be=U.sort((X,Ae)=>{const Pe=V[X.priority]||3,Qe=V[Ae.priority]||3;if(Pe!==Qe)return Pe-Qe;const nt=new Date(X.scheduledDate||0),wt=new Date(Ae.scheduledDate||0);return nt-wt}).slice(0,5);u(be),p(Oe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Oe.length);const ze=Oe.filter(X=>(X.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",ze.length),ze.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),ze.forEach((X,Ae)=>{let Pe=X.amount;Pe&&typeof Pe=="object"?Pe.toString?Pe=parseFloat(Pe.toString()):Pe=parseFloat(Pe):Pe=parseFloat(Pe)||0,console.log(`Deal ${Ae+1}:`,{id:X.id,name:X.name,stage:X.stage,stage_upper:(X.stage||"").toUpperCase(),amount:X.amount,amount_parsed:Pe,amount_type:typeof X.amount,close_date:X.close_date,close_date_type:typeof X.close_date,close_date_value:X.close_date?new Date(X.close_date):null,has_close_date:!!X.close_date,has_amount:Pe>0,all_keys:Object.keys(X),full_deal:X})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Oe.map(X=>X.stage))),v(Oe);const le=[...ot].sort((X,Ae)=>new Date(Ae.timestamp||0)-new Date(X.timestamp||0));y(le)}catch(me){console.error("Error fetching dashboard data:",me),A("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),pe(),ae.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),pe(),W(new Date)},3e4),()=>{ae.current&&clearInterval(ae.current)}),[pe]),h.useEffect(()=>{if(!t||!t.id)return;let me=0;const ye=3;let re=null;const De=()=>{const ve=window.location.protocol==="https:"?"wss:":"ws:",ke=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ce=`${ve}//${ke}/ws/notifications?user_id=${t.id}`;try{const de=new WebSocket(Ce);Ee.current=de,de.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),me=0},de.onmessage=Re=>{try{const Oe=JSON.parse(Re.data);console.log(" Real-time notification received:",Oe),Oe.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(Oe.event)&&(console.log(" Refreshing dashboard due to:",Oe.event),pe(),W(new Date))}catch(Oe){console.error("Error parsing WebSocket message:",Oe)}},de.onerror=Re=>{me===0&&console.warn(" WebSocket connection unavailable (this is optional)")},de.onclose=()=>{me<ye&&(me++,re=setTimeout(()=>{t&&t.id&&De()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return De(),()=>{re&&clearTimeout(re),Ee.current&&(Ee.current.close(),Ee.current=null)}},[t,pe]);const Se=[{icon:wUe,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:mJ,title:"Total Targets",value:fJ(ee,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/manager/targets")},{icon:uJ,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:lJ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",j,"error:",S),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[j&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:S})}),n.jsx("div",{className:"mb-8",children:n.jsx(DUe,{searchQuery:k,onSearchChange:_,searchResults:se,onSearchResultClick:Y})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:Se.map(me=>n.jsx(IUe,{...me,loading:j},me.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(MUe,{logs:x,loading:j}),n.jsx(yj,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(xj,{leads:L,deals:M,targets:I,currencySymbol:a,basePath:"/manager"})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx($Ue,{revenueData:N,loading:j})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(FA,{title:"Latest Leads",children:i.length>0?i.map((me,ye)=>n.jsx(RUe,{...me},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(FA,{title:"Latest Deals",children:j?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((me,ye)=>n.jsx(zUe,{...me,currencySymbol:a},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(FA,{title:"Upcoming Activities",children:d.length>0?d.map((me,ye)=>n.jsx(FUe,{...me},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},UA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],BA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},lr=e=>e?e.toUpperCase():"",HA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",BUe=e=>{switch(lr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},HUe=e=>{switch(lr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function qUe(){const e=Nt(),{user:t}=Gt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),[c,d]=h.useState(null),[u,f]=h.useState(null),[p,x]=h.useState(BA),[y,N]=h.useState(null),[v,j]=h.useState([]),[w,S]=h.useState(!1),[A,k]=h.useState([]),[_,L]=h.useState(null),[T,M]=h.useState([]),[R,z]=h.useState([]),[O,I]=h.useState("Filter by Status"),[B,ee]=h.useState(""),[Q,te]=h.useState(null),[W,ae]=h.useState(!1),[Ee,se]=h.useState(1),[Y,pe]=h.useState(10),[Se,me]=h.useState("Overview"),[ye,re]=h.useState(""),[De,ve]=h.useState(!1),[ke,Ce]=h.useState({}),[de,Re]=h.useState(null),[Oe,Ge]=h.useState(new Set),[et,mt]=h.useState(!1),{comments:Fe,addComment:ot,refresh:We}=Aa({relatedType:"account",relatedId:y?.id});h.useEffect(()=>{y?.id&&We()},[y?.id,We]);const Ke=h.useCallback(async(E=null)=>{S(!0);try{const Z=await ie.get("/accounts/admin/fetch-all"),Le=[...Array.isArray(Z.data)?Z.data:[]].sort((qe,Xe)=>{const jt=qe?.created_at||qe?.updated_at||0,vt=Xe?.created_at||Xe?.updated_at||0;return new Date(vt)-new Date(jt)});if(j(Le),E){const qe=Le.find(Xe=>Xe.id===E);N(qe||null)}}catch(Z){console.error(Z),j([]),Z.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{S(!1)}},[N]),Ze=h.useCallback(async()=>{try{const E=await ie.get("/users/all");k(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Me=h.useCallback(async()=>{try{const E=await ie.get("/territories/fetch");M(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),je=h.useCallback(async()=>{try{const E=await ie.get("/accounts/admin/parent-companies");z(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),ce=h.useCallback(async E=>{try{const Z=await ie.get(`/activities/accounts/${E}`);Ce(Z.data&&typeof Z.data=="object"?Z.data:{})}catch(Z){console.error(Z),Z.response?.status===404&&(console.warn("No activities found for this account."),Ce({}))}},[]);h.useEffect(()=>{Ke(),Ze(),Me(),je()},[Ke,Ze,Me,je]),h.useEffect(()=>{y&&re(lr(y.status)||"PROSPECT")},[y]);const oe=v.length,U=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="customer").length,[v]),V=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="prospect").length,[v]),be=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="partner").length,[v]),ze=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="active").length,[v]),le=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="inactive").length,[v]),X=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="former").length,[v]),Ae=h.useMemo(()=>[{title:"Total",value:oe,icon:na,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:U,icon:Io,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:V,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:be,icon:en,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:ze,icon:Io,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:le,icon:$o,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:X,icon:$o,color:"text-orange-600",bgColor:"bg-orange-100"}],[oe,U,V,be,ze,le,X]),Pe=h.useMemo(()=>{const E=B.trim().toLowerCase(),Z=O.trim().toUpperCase();return v.filter(_e=>{const Le=[_e?.name,_e?.website,_e?.industry,_e?.territory?.name,_e?.phone_number],qe=E===""||Le.some(Ut=>Ut==null?!1:Ut.toString().toLowerCase().includes(E)),Xe=Z==="FILTER BY STATUS"||lr(_e.status)===Z,vt=lr(_e.status)==="INACTIVE"&&Z!=="INACTIVE";return qe&&Xe&&!vt})},[v,B,O]),Qe=Math.max(1,Math.ceil(Pe.length/Y)||1);h.useEffect(()=>{se(1)},[B,O]),h.useEffect(()=>{se(E=>{const Z=Math.max(1,Math.ceil(Pe.length/Y)||1);return E>Z?Z:E})},[Pe.length]);const nt=h.useMemo(()=>{const E=(Ee-1)*Y;return Pe.slice(E,E+Y)},[Pe,Ee]);Pe.length===0||(Ee-1)*Y+1,Math.min(Ee*Y,Pe.length);const wt=()=>se(E=>Math.max(E-1,1)),Te=()=>se(E=>Math.min(E+1,Qe)),it=E=>{N(E),me("Overview"),re(lr(E?.status)||"PROSPECT")},$e=()=>N(null),ue=E=>{E.target.id==="accountModalBackdrop"&&!W&&$e()},he=()=>{s(!1),i(!1),f(null),x(BA),l(!1),L(null)},F=E=>{E.target.id==="modalBackdrop"&&he()},G=E=>E?new Date(E).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ne=E=>{const{name:Z,value:_e}=E.target;x(Le=>({...Le,[Z]:_e}))},ge=()=>{x(BA),i(!1),f(null),s(!0)},fe=E=>{N(null),E.assigned_accs?L(E.assigned_accs):L(null),x({name:E.name||"",website:E.website||"",phone_number:E.phone_number||"",billing_address:E.billing_address||"",shipping_address:E.shipping_address||"",parent_company:E.parent_company||"",industry:E.industry||"",status:lr(E.status)||"PROSPECT",territory_id:E.territory?.id?String(E.territory.id):"",assigned_to:E.assigned_accs?.id?String(E.assigned_accs.id):""}),i(!0),f(E.id),s(!0)},Ue=E=>{E&&te({title:"Archive Account",message:n.jsxs("span",{children:["Are you sure you want to archive the account"," ",n.jsx("span",{className:"font-semibold",children:E.name}),"? You can restore it later if needed."]}),confirmLabel:"Archive Account",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:E.id,name:E.name}})},K=E=>{const Z=nt.find(_e=>_e.id===E);Z&&Z.acc_creator?.id===t?.id&&Ge(_e=>{const Le=new Set(_e);return Le.has(E)?Le.delete(E):Le.add(E),Le})},ne=()=>{const E=nt.filter(Z=>Z.acc_creator?.id===t?.id);Oe.size===E.length&&E.length>0?Ge(new Set):Ge(new Set(E.map(Z=>Z.id)))},H=()=>{if(Oe.size===0)return;const E=Oe.size;te({title:"Archive Accounts",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:E})," account",E!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${E} Account${E!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(Oe),count:E}})},xe=async()=>{if(!Q?.action){te(null);return}const{action:E}=Q,{type:Z,payload:_e,targetId:Le,name:qe,targetIds:Xe,count:jt}=E;ae(!0);try{if(Z==="create"){l(!0);const vt=await ie.post("/accounts/admin",_e);je(),q.success(`Account "${qe}" created successfully.`);const Ut=y?.id||null;he(),await Ke(Ut),!y&&vt.data?.id}else if(Z==="update"){if(!Le)throw new Error("Missing account identifier for update.");l(!0),await ie.put(`/accounts/admin/${Le}`,_e),q.success(`Account "${qe}" updated successfully.`);const vt=y?.id&&y.id===Le?Le:null;he(),await Ke(vt),y?.id===Le&&N(null)}else if(Z==="archive"){if(!Le)throw new Error("Missing account identifier for archiving.");const vt=y?.id;d(Le),await ie.put(`/accounts/admin/${Le}`,{status:"INACTIVE"}),q.success(`Account "${qe}" archived successfully.`),await Ke(vt&&vt!==Le?vt:null),vt===Le&&N(null)}else if(Z==="bulk-archive"){if(!Xe||Xe.length===0)throw new Error("Missing account identifiers for bulk archiving.");mt(!0),await Promise.all(Xe.map(vt=>ie.put(`/accounts/admin/${vt}`,{status:"INACTIVE"}))),q.success(`${jt} account${jt!==1?"s":""} archived successfully.`),Ge(new Set),await Ke(),N(null)}}catch(vt){console.error(vt);const Ut=Z==="create"?"Failed to create account. Please review the details and try again.":Z==="update"?"Failed to update account. Please review the details and try again.":Z==="bulk-archive"?"Failed to archive accounts. Please try again.":"Failed to archive account. Please try again.",An=vt.response?.data?.detail||Ut;q.error(An),(Z==="create"||Z==="update")&&l(!1),Z==="archive"&&d(null),Z==="bulk-archive"&&mt(!1)}finally{(Z==="create"||Z==="update")&&l(!1),Z==="archive"&&d(null),Z==="bulk-archive"&&mt(!1),ae(!1),te(null)}},Ie=()=>{W||te(null)},Je=async()=>{if(!y||!ye)return;const E=lr(ye),Z=lr(y.status);if(E!==Z){ve(!0);try{await ie.put(`/accounts/admin/${y.id}`,{status:E}),q.success(`Account status updated to ${HA(E)}`),j(_e=>_e.map(Le=>Le.id===y.id?{...Le,status:E}:Le)),N(null)}catch(_e){console.error(_e);const Le=_e.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Le)}finally{ve(!1)}}},[ct,bt]=h.useState(!1),Pt=E=>{E.preventDefault(),bt(!0);const Z=p.name.trim();if(!Z){q.error("Account name is required.");return}if(!p.assigned_to){q.error("Assigned To is required.");return}const Le={name:Z,website:p.website?.trim()||null,phone_number:p.phone_number?.trim()||null,billing_address:p.billing_address?.trim()||null,shipping_address:p.shipping_address?.trim()||null,industry:p.industry?.trim()||null,parent_company:p.parent_company?.trim()||null,status:p.status||"PROSPECT",territory_id:p.territory_id?Number(p.territory_id):null,assigned_to:p.assigned_to?Number(p.assigned_to):null},qe=r&&u?"update":"create";te({title:qe==="create"?"Confirm New Account":"Confirm Update",message:qe==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}),confirmLabel:qe==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:qe,payload:Le,targetId:u||null,name:Z}})},Et=[{label:"Filter by Status",value:"Filter by Status"},...UA.map(E=>({label:E.label,value:E.value}))],Yt=Q?.action?.type==="delete"?Q.action.targetId:null,rn=y&&(c===y.id||Yt===y.id),aa=y&&c===y.id,Va=y?BUe(y.status):"",bs=y?n.jsx("div",{id:"accountModalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:E=>E.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:$e,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:y.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Va}`,children:HA(y.status)})]}),t?.id===y?.acc_creator?.id&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(y),disabled:Q?.action?.type==="update"&&Q.action.targetId===y.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Ue(y),disabled:!!rn,children:aa?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(E=>n.jsx("button",{onClick:()=>me(E),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Se===E?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:E},E))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Se==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:y.website?n.jsx("a",{href:y.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:y.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:y.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:y.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:y.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:y.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:y.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:y.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:y.assigned_accs?`${y.assigned_accs.first_name} ${y.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:y.acc_creator?`${y.acc_creator.first_name} ${y.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:G(y.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:G(y.updated_at)||"N/A"})]})]}),n.jsx(_a,{comments:Fe,onAddComment:ot})]}),Se==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:v.notes||"No notes available."})]})]}),Se==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ke.tasks&&ke.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ke.tasks.length,")"]})]}),de==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.tasks.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.description||"No description"}),E.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",E.assigned_to.first_name," ",E.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.due_date||E.created_at)})]},`task-${Z}`))})]}),ke.meetings&&ke.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ke.meetings.length,")"]})]}),de==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.meetings.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.description||E.location||"No description"}),E.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",E.host.first_name," ",E.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.start_time||E.created_at)})]},`meeting-${Z}`))})]}),ke.calls&&ke.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ke.calls.length,")"]})]}),de==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.calls.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.call_time||E.created_at)})]},`call-${Z}`))})]}),ke.contacts&&ke.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ke.contacts.length,")"]})]}),de==="contacts"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.contacts.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[E.first_name?`${E.first_name} `:"",E.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.created_at)})]},`contact-${Z}`))})]}),ke.deals&&ke.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ke.deals.length,")"]})]}),de==="deals"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.deals.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[E.deal_id?E.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",E.name||E.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:E.stage||E.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.close_date||E.created_at)})]},`deal-${Z}`))})]}),ke.quotes&&ke.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ke.quotes.length,")"]})]}),de==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.quotes.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(E.quote_id?E.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.presented_date)||""})]},`quote-${Z}`))})]}),(!ke||(!ke.tasks||ke.tasks.length===0)&&(!ke.meetings||ke.meetings.length===0)&&(!ke.calls||ke.calls.length===0)&&(!ke.quotes||ke.quotes.length===0)&&(!ke.deals||ke.deals.length===0)&&(!ke.contacts||ke.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assigned_to:y.assigned_accs?.id?String(y.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assignedTo:y.assigned_accs?.id?String(y.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assignedTo:y.assigned_accs?.id?String(y.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ye||lr(y?.status)||"PROSPECT",onChange:E=>re(E.target.value),children:UA.map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))}),n.jsx("button",{onClick:Je,disabled:De||!ye||lr(ye)===lr(y?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${De||!ye||lr(ye)===lr(y?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:De?"Updating...":"Update"})]})]})]})]})]})}):null,Be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ge(),bt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(E=>n.jsx(GUe,{...E},E.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:B,onChange:E=>ee(E.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:O,onChange:E=>I(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Et.map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Oe.size>0&&Oe.size===nt.filter(E=>E.acc_creator?.id===t?.id).length&&nt.filter(E=>E.acc_creator?.id===t?.id).length>0,onChange:ne,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 w-12",children:Oe.size>0&&n.jsx("button",{onClick:H,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected accounts",children:n.jsx(kn,{size:18})})})]})}),n.jsx("tbody",{children:w?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Pe.length>0?nt.map(E=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs",children:[n.jsx("td",{className:"py-3 px-4",children:E.acc_creator?.id===t?.id&&n.jsx("input",{type:"checkbox",checked:Oe.has(E.id),onChange:Z=>{Z.stopPropagation(),K(E.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{it(E),ce(E.id)},children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:E.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:E.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{it(E),ce(E.id)},children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${HUe(E.status)}`,children:HA(E.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm cursor-pointer",onClick:()=>{it(E),ce(E.id)},children:E.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm cursor-pointer",onClick:()=>{it(E),ce(E.id)},children:E.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{it(E),ce(E.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(kt,{className:"text-gray-500"}),n.jsx("span",{children:E.phone_number||"--"})]})})]},E.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Pe.length,pageSize:Y,currentPage:Ee,onPrev:wt,onNext:Te,onPageSizeChange:E=>{pe(E),se(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),St=a?n.jsx("div",{id:"modalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{onClick:()=>{he(),bt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:o||W,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Pt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(ef,{label:"Name",name:"name",value:p.name,onChange:Ne,placeholder:"Company name",required:!0,isSubmitted:ct})}),n.jsx(y8,{label:"Parent Company",value:p.parent_company,onChange:E=>{x(Z=>({...Z,parent_company:E}))},items:R.map(E=>({id:E,name:E})),getLabel:E=>E?.name||"",placeholder:"Select parent company...",disabled:o}),n.jsx(ef,{label:"Website",name:"website",value:p.website,onChange:Ne,placeholder:"https://example.com",disabled:o}),n.jsx(ef,{label:"Phone Number",name:"phone_number",value:p.phone_number,onChange:Ne,placeholder:"09xx xxx xxxx",type:"tel",disabled:o}),n.jsx(ef,{label:"Industry",name:"industry",value:p.industry,onChange:Ne,placeholder:"Industry",disabled:o}),n.jsx(ef,{label:"Billing Address",name:"billing_address",value:p.billing_address,onChange:Ne,placeholder:"Billing address",disabled:o}),n.jsx(ef,{label:"Shipping Address",name:"shipping_address",value:p.shipping_address,onChange:Ne,placeholder:"Shipping address",disabled:o}),n.jsx(x8,{label:"Status",name:"status",value:p.status,onChange:Ne,options:[{value:"",label:"Select status"},...UA],required:!0,disabled:o}),n.jsx(y8,{label:"Assigned To",value:p.assigned_to,onChange:E=>{const Z=A.find(Le=>String(Le.id)===String(E));L(Z);let _e=null;Z&&Z.assigned_territory&&Z.assigned_territory.length===1&&(_e=Z.assigned_territory[0].id),x(Le=>({...Le,assigned_to:E,territory_id:_e}))},items:A||[],getLabel:E=>`${E?.first_name??""} ${E?.last_name??""} (${E?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ct,disabled:o||A.length===0}),n.jsx(x8,{label:"Territory",name:"territory_id",value:p.territory_id||"",onChange:Ne,options:[{value:"",label:_?_.assigned_territory&&_.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},..._&&_.assigned_territory&&_.assigned_territory.map(E=>({value:String(E.id),label:E.name}))||[]],disabled:o||!_||!_.assigned_territory||_.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{he(),bt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:o||W,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:o||W,children:o?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,P=Q?n.jsx(VUe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:xe,onCancel:Ie,loading:W}):null;return n.jsxs(n.Fragment,{children:[Be,bs,St,P]})}function GUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function ef({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function x8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function y8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(WUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function WUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(j=>String(j.id)===String(t)),N=y?s(y):t,v=h.useMemo(()=>{const j=f.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:j=>{p(j.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(j=>s(j).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function VUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const qA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},bl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),mo=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function YUe(){const e=Nt(),t=Xt(),{user:a}=Gt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[s,r]=h.useState([]),[i,o]=h.useState(!1),[l,c]=h.useState([]),[d,u]=h.useState([]),[f,p]=h.useState(null),[x,y]=h.useState(!1),[N,v]=h.useState(!1),[j,w]=h.useState(!1),[S,A]=h.useState(null),[k,_]=h.useState(!1),[L,T]=h.useState(null),[M,R]=h.useState(qA),[z,O]=h.useState(""),[I,B]=h.useState("Filter by Accounts"),[ee,Q]=h.useState(null),[te,W]=h.useState("Overview"),[ae,Ee]=h.useState(1),[se,Y]=h.useState(10),[pe,Se]=h.useState({}),[me,ye]=h.useState(null),[re,De]=h.useState(null),[ve,ke]=h.useState(new Set),[Ce,de]=h.useState(!1),{comments:Re,addComment:Oe,refresh:Ge}=Aa({relatedType:"contact",relatedId:f?.id});h.useEffect(()=>{f?.id&&Ge()},[f?.id,Ge]),h.useEffect(()=>{const H=t.state?.contactID;H&&(De(H),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(re&&s.length>0&&!i){const H=s.find(xe=>xe.id===re);H?p(H):q.error("Contact not found."),De(null)}},[re,s,i]);const et=h.useCallback(async(H=null)=>{o(!0);try{const xe=await ie.get("/contacts/admin/fetch-all"),Je=[...Array.isArray(xe.data)?xe.data:[]].sort((ct,bt)=>{const Pt=ct?.created_at||ct?.updated_at||0,Et=bt?.created_at||bt?.updated_at||0;return new Date(Et)-new Date(Pt)});if(r(Je),H){const ct=Je.find(bt=>bt.id===H);p(ct||null)}}catch(xe){console.error(xe),r([]),xe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{o(!1)}},[p]),mt=h.useCallback(async()=>{try{const H=await ie.get("/accounts/admin/fetch-all"),Ie=[...Array.isArray(H.data)?H.data:[]].sort((Je,ct)=>(Je?.name||"").localeCompare(ct?.name||""));c(Ie)}catch(H){console.error(H),c([]),H.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Fe=h.useCallback(async()=>{try{const H=await ie.get("/users/all"),Ie=[...Array.isArray(H.data)?H.data:[]].sort((Je,ct)=>bl(Je).localeCompare(bl(ct)));u(Ie)}catch(H){console.error(H),u([]),H.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ot=h.useCallback(async H=>{try{const xe=await ie.get(`/activities/contact/${H}`);Se(xe.data&&typeof xe.data=="object"?xe.data:{})}catch(xe){console.error(xe),xe.response?.status===404&&(console.warn("No activities found for this account."),Se({}))}},[]);h.useEffect(()=>{et(),mt(),Fe()},[et,mt,Fe]);const We=h.useMemo(()=>{const H=new Map;l.forEach(Ie=>{Ie?.id&&Ie?.name&&H.set(String(Ie.id),Ie.name)}),s.forEach(Ie=>{Ie?.account_id&&Ie?.account?.name&&H.set(String(Ie.account_id),Ie.account.name)});const xe=Array.from(H.entries()).sort((Ie,Je)=>Ie[1].localeCompare(Je[1])).map(([Ie,Je])=>({value:Ie,label:Je}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...xe]},[l,s]),Ke=h.useMemo(()=>{const H=z.trim().toLowerCase(),xe=I.trim();return s.filter(Ie=>{const Je=[Ie?.first_name,Ie?.last_name,Ie?.email,Ie?.title,Ie?.department,Ie?.account?.name,Ie?.account?.status,Ie?.work_phone,Ie?.mobile_phone_1,Ie?.mobile_phone_2,Ie?.assigned_contact?.first_name,Ie?.assigned_contact?.last_name,Ie?.contact_creator?.first_name,Ie?.contact_creator?.last_name,Ie?.notes,mo(Ie?.created_at),mo(Ie?.updated_at)],ct=H===""||Je.some(Et=>Et==null?!1:Et.toString().toLowerCase().includes(H)),bt=xe==="Filter by Accounts"||String(Ie.account_id)===xe,Pt=Ie?.status!=="Inactive";return ct&&bt&&Pt})},[s,z,I]),Ze=Math.max(1,Math.ceil(Ke.length/se)||1);h.useEffect(()=>{Ee(1)},[z,I]),h.useEffect(()=>{Ee(H=>{const xe=Math.max(1,Math.ceil(Ke.length/se)||1);return H>xe?xe:H})},[Ke.length]);const Me=h.useMemo(()=>{const H=(ae-1)*se;return Ke.slice(H,H+se)},[Ke,ae,se]),je=()=>Ee(H=>Math.max(H-1,1)),ce=()=>Ee(H=>Math.min(H+1,Ze)),oe=h.useMemo(()=>{if(!N||!L)return l;const H=s.find(Ie=>Ie.id===L);return!H||!H.account||l.some(Ie=>Ie.id===H.account.id)?l:[...l,H.account]},[l,N,L,s]),U=h.useCallback(()=>{y(!1),v(!1),T(null),R(qA),w(!1),wt(!1)},[]),V=H=>{H.target.id==="modalBackdrop"&&!j&&!k&&U()},be=H=>{const{name:xe,value:Ie}=H.target;R(Je=>({...Je,[xe]:Ie}))},ze=()=>{R(qA),v(!1),T(null),y(!0)},le=async H=>{if(!H)return;const xe=await ie.get(`/accounts/get/${H.account_id}`);R({first_name:H.first_name||"",last_name:H.last_name||"",account_id:xe.data.id?xe.data.id:"",title:H.title||"",department:H.department||"",email:H.email||"",work_phone:H.work_phone||"",mobile_phone_1:H.mobile_phone_1||"",mobile_phone_2:H.mobile_phone_2||"",notes:H.notes||"",assigned_to:H.assigned_to?String(H.assigned_to):""}),v(!0),T(H.id),y(!0),p(null)},X=H=>{if(!H)return;const xe=bl(H)||"this contact";A({title:"Archive Contact",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:xe}),"? You can restore it later if needed."]}),confirmLabel:"Archive Contact",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:H.id,name:xe}})},Ae=H=>{const xe=Me.find(Ie=>Ie.id===H);xe&&xe.contact_creator?.id===a?.id&&ke(Ie=>{const Je=new Set(Ie);return Je.has(H)?Je.delete(H):Je.add(H),Je})},Pe=()=>{const H=Me.filter(xe=>xe.contact_creator?.id===a?.id);ve.size===H.length&&H.length>0?ke(new Set):ke(new Set(H.map(xe=>xe.id)))},Qe=()=>{if(ve.size===0)return;const H=ve.size;A({title:"Archive Contacts",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:H})," contact",H!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${H} Contact${H!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(ve),count:H}})},[nt,wt]=h.useState(!1),Te=H=>{H.preventDefault(),wt(!0);const xe=M.first_name.trim(),Ie=M.last_name.trim();if(!xe||!Ie){q.error("First name and last name are required.");return}if(!M.account_id){q.error("Account is required.");return}if(!M.assigned_to){q.error("Assigned To is required.");return}const ct=M.email?.trim();if(!ct){q.error("Email is required.");return}if(!ct.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ct)){q.error("Please enter a valid email address.");return}const Pt={first_name:xe,last_name:Ie,account_id:Number(M.account_id),title:M.title?.trim()||null,department:M.department?.trim()||null,email:M.email?.trim().toLowerCase()||null,work_phone:M.work_phone?.trim()||null,mobile_phone_1:M.mobile_phone_1?.trim()||null,mobile_phone_2:M.mobile_phone_2?.trim()||null,notes:M.notes?.trim()||null,assigned_to:M.assigned_to?Number(M.assigned_to):null},Et=N&&L?"update":"create",Yt=`${xe} ${Ie}`.trim();A({title:Et==="create"?"Confirm New Contact":"Confirm Update",message:Et==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Yt})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Yt}),"?"]}),confirmLabel:Et==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Et,payload:Pt,targetId:L||null,name:Yt}})},it=async()=>{if(!S?.action){A(null);return}const{action:H}=S,{type:xe,payload:Ie,targetId:Je,name:ct}=H;_(!0);try{if(xe==="create"){w(!0),await ie.post("/contacts/admin",Ie),q.success(`Contact "${ct}" created successfully.`);const bt=f?.id||null;U(),await et(bt)}else if(xe==="update"){if(!Je)throw new Error("Missing contact identifier for update.");w(!0),await ie.put(`/contacts/admin/${Je}`,Ie),q.success(`Contact "${ct}" updated successfully.`);const bt=f?.id&&f.id===Je?Je:f?.id||null;U(),await et(bt),f?.id===Je&&p(null)}else if(xe==="archive"){if(!Je)throw new Error("Missing contact identifier for archiving.");const bt=f?.id;Q(Je),await ie.put(`/contacts/admin/${Je}`,{status:"Inactive"}),q.success(`Contact "${ct}" archived successfully.`),await et(bt&&bt!==Je?bt:null),bt===Je&&p(null)}else if(xe==="bulk-archive"){const{targetIds:bt,count:Pt}=H;if(!bt||bt.length===0)throw new Error("Missing contact identifiers for bulk archiving.");de(!0),await Promise.all(bt.map(Et=>ie.put(`/contacts/admin/${Et}`,{status:"Inactive"}))),q.success(`${Pt} contact${Pt!==1?"s":""} archived successfully.`),ke(new Set),await et(),p(null)}}catch(bt){console.error(bt);const Pt=xe==="create"?"Failed to create contact. Please review the details and try again.":xe==="update"?"Failed to update contact. Please review the details and try again.":xe==="bulk-archive"?"Failed to archive contacts. Please try again.":"Failed to archive contact. Please try again.",Et=bt.response?.data?.detail||Pt;q.error(Et)}finally{(xe==="create"||xe==="update")&&w(!1),xe==="archive"&&Q(null),xe==="bulk-archive"&&de(!1),_(!1),A(null)}},$e=()=>{k||A(null)},ue=H=>{p(H),W("Overview")},he=()=>p(null),F=H=>{H.target.id==="contactModalBackdrop"&&!k&&he()},G=S?.action?.type==="delete"?S.action.targetId:null,Ne=f&&(ee===f.id||G===f.id),ge=f&&ee===f.id,fe=f?n.jsx("div",{id:"contactModalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:H=>H.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:he,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:bl(f)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a?.id===f?.contact_creator?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>le(f),disabled:k||S?.action?.type==="update"&&S.action.targetId===f.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>X(f),disabled:!!Ne,children:ge?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:f.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(H=>n.jsx("button",{onClick:()=>W(H),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${te===H?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:H},H))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[te==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:bl(f)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:f.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:f.email?n.jsx("a",{href:`mailto:${f.email}`,className:"text-blue-600 hover:underline break-all",children:f.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:f.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:f.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:f.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:f.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:f.assigned_contact?`${f.assigned_contact.first_name} ${f.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:f.contact_creator?`${f.contact_creator.first_name} ${f.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:mo(f.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:mo(f.updated_at)||"N/A"})]})]})}),te==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.notes||"No notes available."})]}),n.jsx(_a,{comments:Re,onAddComment:Oe})]}),te==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[pe.tasks&&pe.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",pe.tasks.length,")"]})]}),me==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.tasks.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.description||"No description"}),H.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",H.assigned_to.first_name," ",H.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(H.due_date||H.created_at)})]},`task-${xe}`))})]}),pe.meetings&&pe.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",pe.meetings.length,")"]})]}),me==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.meetings.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.description||H.location||"No description"}),H.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",H.host.first_name," ",H.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(H.start_time||H.created_at)})]},`meeting-${xe}`))})]}),pe.calls&&pe.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",pe.calls.length,")"]})]}),me==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.calls.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(H.call_time||H.created_at)})]},`call-${xe}`))})]}),pe.deals&&pe.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",pe.deals.length,")"]})]}),me==="deals"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.deals.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[H.deal_id?H.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",H.name||H.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:H.stage||H.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(H.close_date||H.created_at)})]},`deal-${xe}`))})]}),pe.quotes&&pe.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",pe.quotes.length,")"]})]}),me==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.quotes.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(H.quote_id?H.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:H.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:mo(H.presented_date)||""})]},`quote-${xe}`))})]}),(!pe||(!pe.tasks||pe.tasks.length===0)&&(!pe.meetings||pe.meetings.length===0)&&(!pe.calls||pe.calls.length===0)&&(!pe.quotes||pe.quotes.length===0)&&(!pe.deals||pe.deals.length===0)&&(!pe.contacts||pe.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${bl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assigned_to:f?.assigned_contact?.id?String(f.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!f?.email){alert("No email address available");return}const H=encodeURIComponent(f.email),xe=encodeURIComponent(""),Ie=encodeURIComponent(""),Je=`mailto:${H}?subject=${xe}&body=${Ie}`;window.location.href=Je},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${bl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assignedTo:f?.assigned_contact?.id?String(f.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${bl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assignedTo:f?.assigned_contact?.id?String(f.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Ue=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[i&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ze(),wt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:H=>O(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:I,onChange:H=>B(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:We.map(H=>n.jsx("option",{value:H.value,children:H.label},H.value??H.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ve.size>0&&ve.size===Me.filter(H=>H.contact_creator?.id===a?.id).length&&Me.filter(H=>H.contact_creator?.id===a?.id).length>0,onChange:Pe,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 w-12",children:ve.size>0&&n.jsx("button",{onClick:Qe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected contacts",disabled:Ce,children:n.jsx(kn,{size:18})})})]})}),n.jsx("tbody",{children:i?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Ke.length>0?Me.map(H=>{const xe=[{Icon:ta,value:H.email,key:"email"},{Icon:kt,value:H.work_phone,key:"work_phone"},{Icon:ld,value:H.mobile_phone_1,key:"mobile_phone_1"},{Icon:ld,value:H.mobile_phone_2,key:"mobile_phone_2"}].filter(Ie=>!!Ie.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4",children:a?.id===H.contact_creator?.id&&n.jsx("input",{type:"checkbox",checked:ve.has(H.id),onChange:Ie=>{Ie.stopPropagation(),Ae(H.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:bl(H)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:H.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(qx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:H.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:xe.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:xe.map(({Icon:Ie,value:Je,key:ct})=>{const bt=pt.createElement(Ie,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[bt,n.jsx("span",{children:Je})]},ct)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Jt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:H.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:H.assigned_contact?`${H.assigned_contact.first_name} ${H.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Tt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:mo(H.created_at)||"--"})]})})]},H.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Ke.length,pageSize:se,currentPage:ae,onPrev:je,onNext:ce,onPageSizeChange:H=>{Y(H),Ee(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),K=x?n.jsx("div",{id:"modalBackdrop",onClick:V,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:H=>H.stopPropagation(),children:[n.jsx("button",{onClick:()=>{U(),wt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:j||k,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:N?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Te,noValidate:!0,children:[n.jsx(Fc,{label:"First Name",name:"first_name",value:M.first_name,onChange:be,placeholder:"First name",required:!0,isSubmitted:nt}),n.jsx(Fc,{label:"Last Name",name:"last_name",value:M.last_name,onChange:be,placeholder:"Last name",required:!0,isSubmitted:nt}),n.jsx(b8,{label:"Account",value:M.account_id,onChange:H=>R(xe=>({...xe,account_id:H})),items:N?oe:l||[],getLabel:H=>H?.name??"",placeholder:"Search account...",disabled:j||(N?oe.length===0:l.length===0),required:!0,isSubmitted:nt}),n.jsx(b8,{label:"Assigned To",value:M.assigned_to,onChange:H=>R(xe=>({...xe,assigned_to:H})),items:d||[],getLabel:H=>`${H?.first_name??""} ${H?.last_name??""} (${H?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:nt,disabled:j||d.length===0}),n.jsx(Fc,{label:"Title",name:"title",value:M.title,onChange:be,placeholder:"Job title",disabled:j}),n.jsx(Fc,{label:"Department",name:"department",value:M.department,onChange:be,placeholder:"Department",disabled:j}),n.jsx(Fc,{label:"Email",name:"email",type:"email",value:M.email,onChange:be,placeholder:"example@email.com",required:!0,isSubmitted:nt}),n.jsx(Fc,{label:"Work Phone",name:"work_phone",value:M.work_phone,onChange:be,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(Fc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:M.mobile_phone_1,onChange:be,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(Fc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:M.mobile_phone_2,onChange:be,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(KUe,{label:"Notes",name:"notes",value:M.notes,onChange:be,placeholder:"Additional details...",rows:3,disabled:j,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{U(),wt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:j||k,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:j||k,children:j?"Saving...":N?"Update Contact":"Save Contact"})]})]})]})}):null,ne=S?n.jsx(XUe,{open:!0,title:S.title,message:S.message,confirmLabel:S.confirmLabel,cancelLabel:S.cancelLabel,variant:S.variant,onConfirm:it,onCancel:$e,loading:k}):null;return n.jsxs(n.Fragment,{children:[Ue,fe,K,ne]})}function Fc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function b8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(QUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function QUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function KUe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function XUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const GA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function hJ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=Nt(),{leadID:c}=Ho(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[v,j]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,L]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),y(e.status||"New");return}if(!c)return;const I=await ie.get(`/leads/get/${c}`);u(I.data),y(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),L({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};h.useEffect(()=>{e?(u(e),y(e.status||"New")):c&&T()},[c,e]);const M=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const I=await ie.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const B={...d,status:I.data.status};u(B),i&&i(B),a&&a(),t&&t()}catch(I){console.error(I),q.error("Failed to update lead status")}},R=async I=>{const B={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",B),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const Q=(await ie.post("/accounts/convertedLead",B)).data.id,te={...A,account_id:Q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},ae=(await ie.post("/contacts/convertedLead",te)).data.id,Ee=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},se=_.amount&&_.amount!==""?parseFloat(_.amount):0,Y={..._,account_id:Q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:ae,probability:Ee(),stage:"Prospecting"},pe=await ie.post("/deals/convertedLead",Y),Se=await ie.put(`/leads/convert/${I.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(ee){console.error("Error during conversion:",ee);const Q=ee.response?.data?.detail||ee.message||"Failed to convert lead. Please try again.";q.error(Q)}},z=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=I=>I.toString().toLowerCase().replace(/\b\w/g,B=>B.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z(d.status)}`,children:O(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:GA(I.due_date||I.created_at)})]},`task-${B}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:GA(I.start_time||I.created_at)})]},`meeting-${B}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:GA(I.call_time||I.created_at)})]},`call-${B}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),B=encodeURIComponent(""),ee=encodeURIComponent(""),Q=`mailto:${I}?subject=${B}&body=${ee}`;window.location.href=Q},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>y(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const ZUe=Jf.all(),WA=ZUe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),JUe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),e7e=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},VA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function t7e(){const e=Nt(),{leadID:t}=Ho();Fs();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,L]=h.useState(VA),[T,M]=h.useState(!1),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState(null),[Q,te]=h.useState(!1),[W,ae]=h.useState({});h.useRef(null);const[Ee,se]=h.useState(!1),[Y,pe]=h.useState(null),[Se,me]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ye,re]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[De,ve]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const ke=async()=>{try{const Te=await ie.get("/leads/getUsers");l(Te.data)}catch(Te){console.error(`Error fetching users: ${Te}`)}},Ce=async()=>{x(!0);try{const Te=await ie.get("/leads/admin/getLeads");f(Te.data),console.log(Te.data)}catch(Te){console.error(`Error fetching leads: ${Te}`)}finally{x(!1)}};h.useEffect(()=>{ke(),Ce()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const Te=u.find(it=>it.id===Number(t));Te&&s(Te)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(Y){const it=(he=>{if(!he)return{code:"+63",number:""};const F=he.match(/^(\+\d+)\s(.+)$/);if(F)return{code:F[1],number:F[2]};if(he.startsWith("+")){const G=he.match(/^(\+\d{1,3})/);if(G)return{code:G[1],number:he.substring(G[1].length).trim()}}return{code:"+63",number:he}})(Y.work_phone),$e=[];Y.work_phone&&$e.push(`Work: ${Y.work_phone}`),Y.mobile_phone_1&&$e.push(`Mobile 1: ${Y.mobile_phone_1}`),Y.mobile_phone_2&&$e.push(`Mobile 2: ${Y.mobile_phone_2}`);const ue=$e.length>0?$e.join(" | "):"";me({name:Y.company_name||"",website:"",countryCode:it.code,phone_number:it.number,combinedPhoneNumbers:ue,billing_address:Y.address||"",shipping_address:Y.address||"",industry:"",status:"Prospect",territory_id:Y.assigned_to?.territory?.id||null,assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null}),re({last_name:Y.last_name||"",first_name:Y.first_name||"",account_id:null,title:Y.title||"",department:Y.department||"",email:Y.email||"",work_phone:Y.work_phone||"",mobile_phone_1:Y.mobile_phone_1||"",mobile_phone_2:Y.mobile_phone_2||"",notes:Y.notes||"",assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null}),ve({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null})}},[Y]);const de=Te=>N(Te.target.value),Re=h.useMemo(()=>{const Te=y.trim().toLowerCase(),it=v.trim().toUpperCase();return u.filter($e=>{const ue=[$e?.first_name,$e?.last_name,$e?.company_name,$e?.title,$e?.email,$e?.work_phone,$e?.assigned_to?`${$e.assigned_to.first_name} ${$e.assigned_to.last_name}`:""],he=Te===""||ue.some(G=>G==null||G===""?!1:G.toString().toLowerCase().includes(Te));let F=!1;return it==="FILTER BY STATUS"?F=($e.status?$e.status.toUpperCase():"")!=="CONVERTED":F=($e.status?$e.status.toUpperCase():"")===it,he&&F})},[u,y,v]),Oe=Math.max(1,Math.ceil(Re.length/A)||1);h.useEffect(()=>{S(1)},[y,v]),h.useEffect(()=>{S(Te=>{const it=Math.max(1,Math.ceil(Re.length/A)||1);return Te>it?it:Te})},[Re.length]);const Ge=h.useMemo(()=>{const Te=(w-1)*A;return Re.slice(Te,Te+A)},[Re,w]),et=()=>S(Te=>Math.max(Te-1,1)),mt=()=>S(Te=>Math.min(Te+1,Oe)),Fe=h.useCallback(async Te=>{try{const it=await ie.get(`/activities/lead/${Te}`);ae(it.data&&typeof it.data=="object"?it.data:{})}catch(it){console.error(it),it.response?.status===404&&(console.warn("No activities found for this account."),ae({}))}},[]),ot=Te=>{s(Te),Fe(Te.id)},We=()=>{s(null),t&&e("/admin/leads",{replace:!0})},Ke=()=>{i(!1),L(VA),M(!1),z(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},Ze=Te=>{Te.target.id==="modalBackdrop"&&Ke()},Me=()=>{L(VA),M(!1),z(null),d(null),i(!0)},je=Te=>{if(!Te){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Te),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const it=G=>{if(!G)return{code:"+63",number:""};const Ne=G.match(/^(\+\d+)\s(.+)$/);return Ne?{code:Ne[1],number:Ne[2]}:{code:"+63",number:G}},$e=it(Te.work_phone),ue=it(Te.mobile_phone_1),he=it(Te.mobile_phone_2);let F="";if(Te.assigned_to){F=String(Te.assigned_to.id);const G=o?.find(Ne=>Ne.id===Te.assigned_to.id);d(G)}L({first_name:Te.first_name||"",last_name:Te.last_name||"",company_name:Te.company_name||"",title:Te.title||"",department:Te.department||"",email:Te.email||"",work_ccode:$e.code,work_phone:$e.number,m1_ccode:ue.code,mobile_phone_1:ue.number,m2_ccode:he.code,mobile_phone_2:he.number,address:Te.address||"",notes:Te.notes||"",source:Te.source||"",territory_id:Te.territory?.id||null,lead_owner:F,status:Te.status||"New"}),M(!0),z(Te.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},ce=Te=>{if(!Te){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Te);const it=`${Te.first_name} ${Te.last_name}`||"this lead";ee({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:it}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Te.id,name:it}})},oe=Te=>{const{name:it,value:$e}=Te.target;if(L(ue=>({...ue,[it]:$e})),it==="lead_owner"){const ue=o.find(he=>he.id===parseInt($e));d(ue)}},[U,V]=h.useState(!1),be=Te=>{if(Te.preventDefault(),V(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const $e={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},ue=T&&R?"update":"create",he=`${_.first_name} ${_.last_name}`;ee({title:ue==="create"?"Confirm New Lead":"Confirm Update",message:ue==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:he}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:he}),"?"]}),confirmLabel:ue==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:ue,payload:$e,targetId:R||null,name:he}})},ze=async()=>{if(!B?.action){ee(null);return}const{action:Te}=B,{type:it,payload:$e,targetId:ue,name:he,lead:F}=Te;console.log($e),te(!0);try{if(it==="create")I(!0),await ie.post("/leads/create",$e),q.success(`Lead "${he}" created successfully.`),Ke(),await Ce();else if(it==="update"){if(!ue)throw new Error("Missing lead identifier for update.");I(!0);const G=await ie.put(`/leads/${ue}`,$e);q.success(`Lead "${he}" updated successfully.`),a&&a.id===ue&&s(null),Ke(),await Ce()}else if(it==="delete"){if(!ue)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${ue}`),q.success(`Lead "${he}" deleted successfully.`),a?.id===ue&&s(null),await Ce()}}catch(G){console.error(G);const Ne=it==="create"?"Failed to create lead. Please review the details and try again.":it==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ge=G.response?.data?.detail||Ne;q.error(ge)}finally{(it==="create"||it==="update")&&I(!1),it!=="edit"&&(te(!1),ee(null))}},le=()=>{Q||ee(null)},X=u.filter(Te=>Te.status==="New").length,Ae=u.filter(Te=>Te.status==="Contacted").length,Pe=u.filter(Te=>Te.status==="Qualified").length,Qe=u.filter(Te=>Te.status==="Converted").length,nt=u.filter(Te=>Te.status==="Lost").length,wt=[{title:"New",value:X,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Ae,icon:kt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Pe,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Qe,icon:Xl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:nt,icon:zs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Me(),V(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:wt.map(Te=>n.jsx(a7e,{...Te},Te.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:de,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:Te=>j(Te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Re.length>0?Ge.map(Te=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>ot(Te),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Te.first_name," ",Te.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Te.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Te.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Te.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Te.assigned_to?`${Te.assigned_to.first_name} ${Te.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${e7e(Te.status||"New")}`,children:JUe(Te.status||"New")})})]},Te.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Re.length,pageSize:A,currentPage:w,onPrev:et,onNext:mt,onPageSizeChange:Te=>{k(Te),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Ze,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Te=>Te.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ke(),V(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:oe,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:oe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${U&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:oe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${U&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:oe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${U&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:oe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:oe,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${U&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:oe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:WA.map(Te=>n.jsx("option",{value:Te.code,children:Te.code},Te.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:oe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:oe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:WA.map(Te=>n.jsx("option",{value:Te.code,children:Te.code},Te.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:oe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:oe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:WA.map(Te=>n.jsx("option",{value:Te.code,children:Te.code},Te.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:oe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:oe,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${U&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(s7e,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:Te=>`${Te.first_name} ${Te.last_name}`,onChange:Te=>{const it=o.find(ue=>String(ue.id)===String(Te));d(it);let $e=null;it&&it.assigned_territory&&it.assigned_territory.length===1&&($e=it.assigned_territory[0].id),L(ue=>({...ue,lead_owner:Te,territory_id:$e}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:oe,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(Te=>n.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:oe,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:oe,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{Ke(),V(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:O||Q,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:be,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:O||Q,children:O||Q?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),B&&n.jsx(n7e,{open:!0,title:B.title,message:B.message,confirmLabel:B.confirmLabel,cancelLabel:B.cancelLabel,variant:B.variant,onConfirm:ze,onCancel:le,loading:Q}),a&&!r&&!T&&n.jsx(hJ,{relatedActs:W,lead:a,onBack:We,fetchLeads:Ce,setSelectedLead:s,onEdit:je,onDelete:ce})]})}function n7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function a7e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function s7e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Nb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Xa=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),r7e=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Xa,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Xa,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Xa,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Xa,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Xa,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),i7e=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Xa,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Xa,{label:"Department",name:"department",value:e.department}),n.jsx(Xa,{label:"Title",name:"title",value:e.title}),n.jsx(Xa,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Xa,{label:"Email",name:"email",value:e.email}),n.jsx(Xa,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Xa,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),o7e=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Xa,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Xa,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Xa,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"Description",name:"description",value:e.description}),n.jsx(Xa,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function l7e({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(r7e,{data:Nb});case 2:return n.jsx(i7e,{data:Nb});case 3:return n.jsx(o7e,{data:Nb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Nb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(bj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function gJ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=Nt(),{user:c}=Gt();h.useEffect(()=>{console.log("ManagerDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;o(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function pJ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=Nt(),[d]=Fs(),u=d.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:N}=Gt(),{comments:v,addComment:j,refresh:w}=Aa({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const M=((await ie.get("/deals/admin/fetch-all")).data||[]).find(R=>R.id===parseInt(u));if(M){const R={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(R)}else console.warn("Deal not found with ID:",u)}catch(L){console.error("Error fetching deal:",L)}})()},[u,e]),!f&&!u||u&&!f)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Kt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):y(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(R=>R==="PROSPECTING"?0:R==="QUALIFICATION"?1:R==="PROPOSAL"?2:R==="NEGOTIATION"?3:R==="CLOSED_WON"||R==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(R=>T===R?"orange":T>R?"green":"gray").map((R,z)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${R==="green"?"bg-green-500 border-green-500":R==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,L)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},L))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(_a,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:kt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Tt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,L)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},L))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(gJ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function c7e(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=Nt(),t=Xt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,N]=h.useState(null),[v,j]=h.useState(!1),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,L]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(!1),[O,I]=h.useState(!1),[B,ee]=h.useState(null),[Q,te]=h.useState([]),[W,ae]=h.useState([]),[Ee,se]=h.useState([]),[Y,pe]=h.useState({}),[Se,me]=h.useState(null);h.useEffect(()=>{const ue=t.state,he=ue?.dealID;if(he&&!ue?.openDealModal){me(he),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Se&&y?.length>0&&!v){const ue=y.find(he=>he.id===Se);ue?d(ue):q.error("Deal not found."),me(null)}},[Se,y,v]);const[ye,re]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[De,ve]=h.useState(null),[ke,Ce]=h.useState(null),de={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Re=ue=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[ue]||ue||"--",Oe=ue=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[ue]||"bg-gray-100 text-gray-700",Ge=h.useCallback(async ue=>{try{const he=await ie.get(`/activities/deal/${ue}`);pe(he.data&&typeof he.data=="object"?he.data:{})}catch(he){console.error(he),he.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]),et=h.useMemo(()=>{const ue=a.trim().toLowerCase(),he=r.trim(),F=o.trim();return(y??[]).filter(G=>{const Ne=[G?.name,G?.description,G?.account?.name,G?.contact?.first_name,G?.contact?.last_name,G?.assigned_deals?.first_name,G?.assigned_deals?.last_name],ge=ue===""||Ne.some(K=>K==null||K===""?!1:K.toString().toLowerCase().includes(ue)),fe=he==="Filter by Stage"||he===""||G.stage===de[he]||G.stage===he,Ue=F==="Filter by Owner"||F===""||`${G.assigned_deals?.first_name||""} ${G.assigned_deals?.last_name||""}`.trim().toLowerCase()===F.toLowerCase();return ge&&fe&&Ue})},[y,a,r,o]),mt=Math.max(1,Math.ceil(et.length/A)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(ue=>{const he=Math.max(1,Math.ceil(et.length/A)||1);return ue>he?he:ue})},[et.length]);const Fe=h.useMemo(()=>{const ue=(w-1)*A;return et.slice(ue,ue+A)},[et,w]),ot=()=>S(ue=>Math.max(ue-1,1)),We=()=>S(ue=>Math.min(ue+1,mt)),Ke=()=>{re({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),ee(null),x(!0)},Ze=async()=>{j(!0);try{const ue=await ie.get("/deals/admin/fetch-all"),F=[...Array.isArray(ue.data)?ue.data:[]].sort((G,Ne)=>{const ge=G?.created_at?new Date(G.created_at).getTime():0;return(Ne?.created_at?new Date(Ne.created_at).getTime():0)-ge});N(F)}catch(ue){ue.response&&ue.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(ue)}finally{j(!1)}},Me=async()=>{try{const ue=await ie.get("/accounts/admin/fetch-all");te(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},je=async()=>{try{const ue=await ie.get("/contacts/admin/fetch-all");ae(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},ce=async()=>{try{const ue=await ie.get("/users/all");se(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ze(),Me(),je(),ce()},[]);const oe=async ue=>{ue&&(re({id:ue.id||null,name:ue.name||"",account_id:ue.account_id?.toString()||"",primary_contact_id:ue.primary_contact_id?.toString()||"",stage:ue.stage||"PROPOSAL",amount:ue.amount?.toString()||"",close_date:ue.close_date?new Date(ue.close_date).toISOString().split("T")[0]:"",assigned_to:ue.assigned_to?.toString()||"",currency:ue.currency||"PHP",description:ue.description||""}),ve(ue.account||null),Ce(ue.contact||null),I(!0),ee(ue.id),d(null),x(!0))},U=async(ue=!1)=>{try{const he=await ie.get("/deals/admin/fetch-all"),G=[...Array.isArray(he.data)?he.data:[]].sort((Ne,ge)=>{const fe=Ne?.created_at?new Date(Ne.created_at).getTime():0;return(ge?.created_at?new Date(ge.created_at).getTime():0)-fe});if(N(G),!ue&&c&&c.id){const Ne=G.find(ge=>ge.id===c.id);Ne&&d({...Ne})}}catch(he){console.error("Failed to refresh deal data:",he),await Ze()}},V=ue=>{const he=ue.name.trim();if(!he){q.error("Deal name is required.");return}if(!ue.account_id){q.error("Account is required.");return}const F=O&&B?"update":"create",G=he;M({title:F==="create"?"Confirm New Deal":"Confirm Update",message:F==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:G}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:G}),"?"]}),confirmLabel:F==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:F,formData:ue,targetId:B||null,name:G}})},be=ue=>{if(!ue)return;const he=ue.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:he}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:he}})},ze=async()=>{if(!T?.action){M(null);return}const{action:ue}=T,{type:he,formData:F,targetId:G,name:Ne}=ue;z(!0);try{if(he==="create"){L(!0);const ge={name:F.name.trim(),account_id:parseInt(F.account_id),primary_contact_id:F.primary_contact_id?parseInt(F.primary_contact_id):null,stage:F.stage,amount:F.amount?parseFloat(F.amount):null,currency:F.currency||"PHP",close_date:F.close_date||null,description:F.description||null,assigned_to:F.assigned_to?parseInt(F.assigned_to):null};await ie.post("/deals/admin/create",ge),q.success(`Deal "${Ne}" created successfully.`),x(!1),await Ze()}else if(he==="update"){if(!G)throw new Error("Missing deal identifier for update.");L(!0);const ge={};F.name!==void 0&&(ge.name=F.name.trim()),F.account_id!==void 0&&F.account_id!==""&&(ge.account_id=parseInt(F.account_id)),F.primary_contact_id!==void 0&&(ge.primary_contact_id=F.primary_contact_id?parseInt(F.primary_contact_id):null),F.stage!==void 0&&(ge.stage=F.stage),F.amount!==void 0&&F.amount!==""&&(ge.amount=parseFloat(F.amount)),F.currency!==void 0&&(ge.currency=F.currency),F.close_date!==void 0&&(ge.close_date=F.close_date||null),F.description!==void 0&&(ge.description=F.description||null),F.assigned_to!==void 0&&(ge.assigned_to=F.assigned_to?parseInt(F.assigned_to):null),await ie.put(`/deals/admin/${G}`,ge),q.success(`Deal "${Ne}" updated successfully.`),x(!1),await Ze()}else if(he==="delete"){if(!G)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${G}`),q.success(`Deal "${Ne}" deleted successfully.`),c?.id===G&&d(null),await Ze()}}catch(ge){console.error(ge);const fe=he==="create"?"Failed to create deal. Please review the details and try again.":he==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Ue=ge.response?.data?.detail||fe;q.error(Ue)}finally{(he==="create"||he==="update")&&L(!1),z(!1),M(null)}},le=()=>{R||M(null)},X=()=>{x(!1),re({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ve(null),Ce(null),I(!1),ee(null),L(!1)},Ae=(y??[]).filter(ue=>ue.stage==="PROSPECTING").length,Pe=(y??[]).filter(ue=>ue.stage==="QUALIFICATION").length,Qe=(y??[]).filter(ue=>ue.stage==="PROPOSAL").length,nt=(y??[]).filter(ue=>ue.stage==="NEGOTIATION").length,wt=(y??[]).filter(ue=>ue.stage==="CLOSED_WON").length,Te=(y??[]).filter(ue=>ue.stage==="CLOSED_LOST").length,it=(y??[]).filter(ue=>ue.stage==="CLOSED_CANCELLED").length,$e=[{title:"Prospecting",value:Ae,icon:aN,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Pe,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Qe,icon:Jt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:nt,icon:rd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:wt,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Te,icon:zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:it,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Jt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:$e.map(ue=>n.jsx(u7e,{...ue},ue.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:ue=>s(ue.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:ue=>i(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:ue=>l(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(ue=>`${ue.assigned_deals?.first_name} ${ue.assigned_deals?.last_name}`))].map((ue,he)=>n.jsx("option",{value:ue,children:ue},he))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:et.length>0?Fe.map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...ue}),Ge(ue.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.deal_id?ue.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:ue.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:ue.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.contact?.first_name&&ue.contact?.last_name?`${ue.contact.first_name} ${ue.contact.last_name}`:ue.contact?.first_name||ue.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Oe(ue.stage)}`,children:Re(ue.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",ue.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.assigned_deals?.first_name&&ue.assigned_deals?.last_name?`${ue.assigned_deals.first_name} ${ue.assigned_deals.last_name}`:ue.assigned_deals?.first_name||ue.assigned_deals?.last_name||"--"})]},ue.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:et.length,pageSize:A,currentPage:w,onPrev:ot,onNext:We,onPageSizeChange:ue=>{k(ue),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(m7e,{onClose:X,formData:ye,setFormData:re,isEditing:O,onSubmit:V,isSubmitting:_||R,accounts:Q,contacts:W,users:Ee,currentAccount:De,currentContact:ke}),c&&n.jsx(pJ,{relatedActs:Y,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:oe,onDelete:be,onStatusUpdate:U}),T&&n.jsx(d7e,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ze,onCancel:le,loading:R})]})}function d7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function u7e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function m7e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){q.error("Deal name is required.");return}const j=Number(t.amount);if(!t.amount||isNaN(j)||j<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},y=v=>{v.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const v=String(t.account_id||"").trim(),j=Array.isArray(l)?l:[];return v?j.filter(w=>{const A=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return A?String(A)===v:!1}):j},[l,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),j=String(t.primary_contact_id||"").trim();if(!j||!v)return;N.some(S=>String(S?.id)===j)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(YA,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(QA,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(QA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:N||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(v8,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(YA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(v8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(YA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(QA,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(h7e,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function YA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function v8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function QA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(f7e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function f7e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function h7e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const KA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],XA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},$i=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},ZA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",g7e=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},p7e=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},jb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",_g=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",x7e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},JA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},w8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},eT=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Ow=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},y7e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Ow(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Ow(t);return a||null},b7e=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},v7e=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function w7e(){const e=Nt(),t=Xt(),{user:a}=Gt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,N]=h.useState([]),[v,j]=h.useState(null),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,L]=h.useState(!1),[T,M]=h.useState(!1),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState(!1),[Q,te]=h.useState(null),[W,ae]=h.useState(XA),[Ee,se]=h.useState(""),[Y,pe]=h.useState("Filter by Status"),[Se,me]=h.useState(null),ye=h.useCallback(async()=>{if(w)try{ee(!0);const E=(await ie.get("/company/invoice-info"))?.data;e(`/manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:E}})}catch(P){const E=P?.response?.data?.detail||P?.message||"Failed to open print page.";q.error(E)}finally{ee(!1)}},[w,e]),[re,De]=h.useState(1),[ve,ke]=h.useState(10),[Ce,de]=h.useState("Overview"),[Re,Oe]=h.useState("Draft"),[Ge,et]=h.useState([]),[mt,Fe]=h.useState(null),{comments:ot,addComment:We,refresh:Ke}=Aa({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&Ke()},[w?.id,Ke]),h.useEffect(()=>{const E=t.state?.quoteID;if(E){Fe(E),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(mt&&r.length>0&&!o){const P=r.find(E=>E.id===mt);P?S(P):q.error("Quote not found."),Fe(null)}},[mt,r,o]),h.useEffect(()=>{let P=!0;return(async()=>{const Z=y7e();if(Z&&P){j(Z);return}try{const _e=await ie.get("/auth/me"),Le=Ow(_e?.data);if(Le&&P){j(Le);return}}catch{}try{const _e=await ie.get("/users/me"),Le=Ow(_e?.data);if(Le&&P){j(Le);return}}catch{}P&&j(null)})(),()=>{P=!1}},[]);const Ze=h.useCallback(P=>P&&u.find(Z=>String(Z.id)===String(P))?.name||"",[u]),Me=h.useCallback(P=>{if(!P)return"";const E=p.find(Z=>String(Z.id)===String(P));return E?`${E.first_name} ${E.last_name}`.trim():""},[p]),je=h.useCallback(P=>{if(!P)return"--";const E=c.find(Z=>String(Z.id)===String(P));return E?.deal_name||E?.name||`Deal #${w8(P)}`},[c]),ce=h.useCallback(P=>{const E=c.find(Le=>String(Le.id)===String(P)),Z=b7e(E);let _e=v7e(E);if(!_e&&Z){const Le=p.filter(qe=>String(qe.account_id||"")===String(Z));if(Le.length>0){const qe=[...Le].sort((Xe,jt)=>{const vt=`${Xe.first_name||""} ${Xe.last_name||""}`.trim().toLowerCase(),Ut=`${jt.first_name||""} ${jt.last_name||""}`.trim().toLowerCase();return vt.localeCompare(Ut)});_e=String(qe[0].id)}}if(Z&&_e){const Le=p.find(qe=>String(qe.id)===String(_e));Le?.account_id&&String(Le.account_id)!==String(Z)&&(_e="")}return{accountId:Z||"",contactId:_e||""}},[c,p]),oe=h.useCallback(P=>{if(!P)return"--";if(P.deal?.deal_name)return P.deal.deal_name;if(P.deal?.name)return P.deal.name;const E=P.deal_id||P.deal?.id;return E?je(E):"--"},[je]),U=h.useCallback(P=>{if(!P)return"--";if(P.account?.name)return P.account.name;let E=P.account_id||P.account?.id;if(!E){const Z=P.deal_id||P.deal?.id;Z&&(E=ce(Z).accountId)}return E?Ze(E)||`Account #${E}`:"--"},[ce,Ze]),V=h.useCallback(P=>{if(!P)return"--";if(P.contact?.first_name||P.contact?.last_name)return`${P.contact?.first_name||""} ${P.contact?.last_name||""}`.trim()||"--";let E=P.contact_id||P.contact?.id;if(!E){const _e=P.deal_id||P.deal?.id;_e&&(E=ce(_e).contactId)}return(E?Me(E):"")||(E?`Contact #${E}`:"--")},[ce,Me]),be=h.useCallback(async(P=null)=>{l(!0);try{const E=await ie.get("/quotes/admin/fetch-all"),_e=[...Array.isArray(E.data)?E.data:[]].sort((Le,qe)=>{const Xe=Le?.created_at||Le?.updated_at||0,jt=qe?.created_at||qe?.updated_at||0;return new Date(jt)-new Date(Xe)});if(i(_e),P){const Le=_e.find(qe=>qe.id===P);S(Le||null)}}catch(E){console.error(E),i([]),E.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ze=h.useCallback(async()=>{try{const P=await ie.get("/deals/admin/fetch-all");d(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),le=h.useCallback(async()=>{try{const P=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),X=h.useCallback(async()=>{try{const P=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const P=await ie.get("/users/all");N(Array.isArray(P.data)?P.data:[])}catch(P){console.error(P),P.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{be(),ze(),le(),X(),Ae()},[be,ze,le,X,Ae]);const Pe=h.useMemo(()=>{const P=Ee.trim().toLowerCase(),E=Y.trim();return r.filter(Z=>{const _e=oe(Z),Le=U(Z),qe=V(Z),Xe=JA(Z.presented_date,Z.validity_days),jt=[Z.quote_id,_e,Le,qe,Z.total_amount?.toString(),Z.validity_days?.toString(),Z.presented_date?_g(Z.presented_date):"",Xe?_g(Xe):"",Z.assigned_user?.first_name,Z.assigned_user?.last_name,Z.creator?.first_name,Z.creator?.last_name,Z.status,Z.notes,jb(Z.created_at),jb(Z.updated_at)],vt=P===""||jt.some(An=>An==null?!1:An.toString().toLowerCase().includes(P)),Ut=E==="Filter by Status"||$i(Z.status)===E;return vt&&Ut})},[r,Ee,Y,oe,U,V]),Qe=Math.max(1,Math.ceil(Pe.length/ve)||1);h.useEffect(()=>De(1),[Ee,Y]),h.useEffect(()=>{De(P=>{const E=Math.max(1,Math.ceil(Pe.length/ve)||1);return P>E?E:P})},[Pe.length,ve]);const nt=h.useMemo(()=>{const P=(re-1)*ve;return Pe.slice(P,P+ve)},[Pe,re,ve]),wt=()=>De(P=>Math.max(P-1,1)),Te=()=>De(P=>Math.min(P+1,Qe)),it=P=>{S(P),de("Overview"),Oe($i(P?.status)||"Draft")},$e=()=>{S(null),de("Overview")},ue=P=>{P.target.id==="quoteModalBackdrop"&&!O&&$e()},he=h.useCallback(()=>{k(!1),L(!1),te(null),ae(XA),M(!1)},[]),F=P=>{P.target.id==="modalBackdrop"&&!T&&!O&&he()},G=P=>{const{name:E,value:Z}=P.target;if(E==="deal_id"){const{accountId:_e,contactId:Le}=ce(Z);ae(qe=>({...qe,deal_id:Z,account_id:_e,contact_id:Le}));return}ae(_e=>({..._e,[E]:Z}))},Ne=()=>{ae(XA),L(!1),te(null),k(!0)},ge=P=>{if(!P)return;S(null);const E=P.deal?.id?String(P.deal.id):P.deal_id?String(P.deal_id):"",Z=E?ce(E):{accountId:"",contactId:""},_e=P.account?.id?String(P.account.id):P.account_id?String(P.account_id):Z.accountId,Le=P.contact?.id?String(P.contact.id):P.contact_id?String(P.contact_id):Z.contactId,qe=P.assigned_user?.id?String(P.assigned_user.id):P.assigned_to?String(P.assigned_to):"";ae({deal_id:E,account_id:_e||"",contact_id:Le||"",total_amount:P.total_amount?.toString()||"",presented_date:x7e(P.presented_date),validity_days:P.validity_days!==null&&P.validity_days!==void 0?String(P.validity_days):"",status:$i(P.status)||"Draft",assigned_to:qe,notes:P.notes||"",subtotal:parseFloat(P.subtotal)||0,tax_rate:parseFloat(P.tax_rate)||0,tax_amount:parseFloat(P.tax_amount)||0,discount_type:P.discount_type||"",discount_value:parseFloat(P.discount_value)||0,discount_amount:parseFloat(P.discount_amount)||0,currency:P.currency||"PHP",items:Array.isArray(P.items)?P.items.map(Xe=>({id:Xe.id,item_type:Xe.item_type||"Product",name:Xe.name||"",description:Xe.description||"",sku:Xe.sku||"",variant:Xe.variant||"",unit:Xe.unit||"pcs",quantity:parseFloat(Xe.quantity)||1,unit_price:parseFloat(Xe.unit_price)||0,discount_percent:parseFloat(Xe.discount_percent)||0,discount_amount:parseFloat(Xe.discount_amount)||0,line_total:parseFloat(Xe.line_total)||0,sort_order:Xe.sort_order||0})):[]}),L(!0),te(P.id),k(!0)},fe=P=>{if(P.target.checked){const E=nt.map(Z=>Z.id);et(E)}else et([])},Ue=P=>{et(E=>E.includes(P)?E.filter(Z=>Z!==P):[...E,P])},K=P=>{if(!P)return;const E=P.quote_id||"this quote";z({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:E}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:E}})},ne=async()=>{Ge.length!==0&&z({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ge.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ge.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ge}})},[H,xe]=h.useState(!1),Ie=P=>{if(P.preventDefault(),xe(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){q.error("Deal is required.");return}if(!W.assigned_to){q.error("Assigned To is required.");return}const Z=ce(W.deal_id),_e=W.items.map((vt,Ut)=>({item_type:vt.item_type||"Product",name:vt.name,description:vt.description||null,sku:vt.sku||null,variant:vt.variant||null,unit:vt.unit||null,quantity:parseFloat(vt.quantity)||1,unit_price:parseFloat(vt.unit_price)||0,discount_percent:parseFloat(vt.discount_percent)||0,sort_order:vt.sort_order??Ut})),Le={deal_id:Number(W.deal_id),account_id:Z.accountId?Number(Z.accountId):null,contact_id:Z.contactId?Number(Z.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:_e},qe=_&&Q?"update":"create",Xe=je(W.deal_id),jt=qe==="create"?{...Le,created_by_id:Number(v)}:Le;z({title:qe==="create"?"Confirm New Quote":"Confirm Update",message:qe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Xe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Xe}),"?"]}),confirmLabel:qe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:qe,payload:jt,targetId:Q||null,name:Xe}})},Je=async()=>{if(!R?.action){z(null);return}const{action:P}=R,{type:E,payload:Z,targetId:_e,name:Le}=P;I(!0);try{if(E==="create")M(!0),await ie.post("/quotes/admin",Z),q.success("Quote created successfully."),he(),await be();else if(E==="update"){if(!_e)throw new Error("Missing quote identifier for update.");M(!0),await ie.put(`/quotes/admin/${_e}`,Z),q.success("Quote updated successfully."),he(),await be(),w?.id===_e&&S(null)}else if(E==="delete"){if(!_e)throw new Error("Missing quote identifier for deletion.");const qe=w?.id;me(_e),await ie.delete(`/quotes/admin/${_e}`),q.success(`Quote "${Le}" deleted successfully.`),await be(qe&&qe!==_e?qe:null),qe===_e&&S(null)}else E==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:Ge}),q.success(`Successfully deleted ${Ge.length} quotes`),et([]),await be())}catch(qe){console.error(qe);const Xe=E==="create"?"Failed to create quote. Please review the details and try again.":E==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Xe),(E==="create"||E==="update")&&M(!1),E==="delete"&&me(null)}finally{(E==="create"||E==="update")&&M(!1),E==="delete"&&me(null),I(!1),z(null)}},ct=()=>{O||z(null)},bt=h.useCallback((P,E)=>{const Z=P?.deal_id??P?.deal?.id??"",_e=Z?Number(Z):null,Le=_e?ce(String(_e)):{accountId:"",contactId:""},qe=P?.account_id??P?.account?.id??Le.accountId??null,Xe=P?.contact_id??P?.contact?.id??Le.contactId??null,jt=P?.total_amount??0,vt=P?.assigned_to??P?.assigned_user?.id??null;return{deal_id:_e,account_id:qe!=null&&String(qe).trim()!==""?Number(qe):null,contact_id:Xe!=null&&String(Xe).trim()!==""?Number(Xe):null,total_amount:Number(jt),presented_date:P?.presented_date||null,validity_days:P?.validity_days===""||P?.validity_days===void 0||P?.validity_days===null?null:Number(P.validity_days),status:E,assigned_to:vt!=null&&String(vt).trim()!==""?Number(vt):null,notes:P?.notes?.trim()||null}},[ce]),Pt=h.useCallback(async()=>{if(!w?.id)return;const P=$i(Re),E=[P,P.toLowerCase()],Z=async _e=>ie.patch(`/quotes/admin/${w.id}/status`,{status:_e},{headers:{"Content-Type":"application/json"}});try{let _e=!1;for(const Le of E)try{await Z(Le),_e=!0;break}catch(qe){if(qe?.response?.status===422)continue;throw qe}if(!_e){const Le=bt(w,P);if(!Le.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Le.total_amount||Le.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${w.id}`,Le)}q.success(`Quote status updated to ${P}`),S(null),de("Overview"),await be()}catch(_e){console.error(_e);const Le=_e?.response?.data?.message||(_e?.response?.data?.errors?Object.values(_e.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(Le)}},[w,Re,be,bt]),Et=[{label:"Filter by Status",value:"Filter by Status"},...KA.map(P=>({label:P.label,value:P.value}))],Yt=R?.action?.type==="delete"?R.action.targetId:null,rn=w&&(Se===w.id||Yt===w.id),aa=w&&Se===w.id,Va=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:$e,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Qn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:oe(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${p7e(w.status)}`,children:ZA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:ye,disabled:B||T||O,children:[n.jsx(un,{className:"mr-2"}),B?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ge(w),disabled:O||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>K(w),disabled:!!rn,children:aa?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(P=>n.jsx("button",{onClick:()=>de(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:eT(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:oe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:U(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:V(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:_g(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:_g(JA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:ZA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:jb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:jb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(xd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(_a,{comments:ot,onAddComment:We})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${eT(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Re||$i(w.status)||"Draft",onChange:P=>Oe(P.target.value),children:KA.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))}),n.jsx("button",{onClick:Pt,disabled:$i(Re)===$i(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${$i(Re)===$i(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,bs=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(un,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ne(),xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Ee,onChange:P=>se(P.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:Y,onChange:P=>pe(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Et.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:nt.length>0&&Ge.length===nt.length,onChange:fe,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ge.length>0?n.jsx("button",{onClick:ne,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ge.length} selected items`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Pe.length>0?nt.map(P=>{const E=JA(P.presented_date,P.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>it(P),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Z=>Z.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ge.includes(P.id),onChange:()=>Ue(P.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:eT(P.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:oe(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:U(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:V(P)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:P.total_amount?`${s}${Number(P.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${g7e(P.status)}`,children:ZA(P.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:P.assigned_user?`${P.assigned_user.first_name} ${P.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:_g(E)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},P.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Pe.length,pageSize:ve,currentPage:re,onPrev:wt,onNext:Te,onPageSizeChange:P=>{ke(P),De(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Be=A?n.jsx("div",{id:"modalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[n.jsx("button",{onClick:()=>{he(),xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||O,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ie,children:[n.jsx(C8,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:P=>{const{accountId:E,contactId:Z}=ce(P);ae(_e=>({..._e,deal_id:P,account_id:E,contact_id:Z}))},items:Array.isArray(c)?c:[],getLabel:P=>`${w8(P?.deal_id??"")} ${P?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:H,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(j8,{label:"Account",value:Ze(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(j8,{label:"Contact",value:Me(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(xd,{items:W.items,onChange:P=>ae(E=>({...E,items:P})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:P=>{ae(E=>({...E,subtotal:P.subtotal,discount_amount:P.discount_amount,tax_amount:P.tax_amount,total_amount:P.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:P=>ae(E=>({...E,discount_type:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:P=>ae(E=>({...E,discount_value:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:P=>ae(E=>({...E,tax_rate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(N8,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:G,disabled:T}),n.jsx(N8,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:G,placeholder:"30",disabled:T}),n.jsx(C8,{label:"Assigned To",value:W.assigned_to||"",onChange:P=>ae(E=>({...E,assigned_to:P})),items:Array.isArray(y)?y:[],getLabel:P=>{const E=`${P?.first_name??""} ${P?.last_name??""}`.trim();return E?P?.role?`${E} (${P.role})`:E:P?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:H,disabled:T}),n.jsx(N7e,{label:"Status",name:"status",value:W.status,onChange:G,options:KA,required:!0,disabled:T}),n.jsx(C7e,{label:"Notes",name:"notes",value:W.notes,onChange:G,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{he(),xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||O,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||O,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,St=R?n.jsx(S7e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Je,onCancel:ct,loading:O}):null;return n.jsxs(n.Fragment,{children:[w?Va:bs,Be,St]})}function N8({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function j8({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function N7e({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function C8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(j7e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function j7e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function C7e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function S7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function _7e(){const{userRole:e}=Qs();return n.jsx(r1,{currentUserRole:e,currentUserId:null})}function A7e(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ie.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",L=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[_,T,k.action,k.entity_type,L,k.description],R=w===""||M.some(O=>O==null?!1:O.toString().toLowerCase().includes(w)),z=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&z}).sort((k,_)=>{const L=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-L})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const y=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!f.length){Vx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),L=document.createElement("a");L.href=_,L.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(_)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Wx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Tt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ts,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(qo,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:y,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const T7e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],E7e=e=>e?String(e).toUpperCase():"",ff=e=>{const t=E7e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},tT=e=>{const t=ff(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},S8=e=>{switch(ff(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},_8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function k7e(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,L]=h.useState("PLANNED"),[T,M]=h.useState(!1),[R,z]=h.useState(!1),[O,I]=h.useState(null),[B,ee]=h.useState(new Set),[Q,te]=h.useState(!1),{user:W}=Gt(),{comments:ae,addComment:Ee,refresh:se}=Aa({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&se()},[a?.id,se]),Fs();const Y=Nt(),pe=Xt(),Se=F=>{if(!F)return"";const G=String(F).split("-");return G.length===3?`${G[0]}-${G[2]}`:String(F)},ye={subject:"",call_time:(()=>{const F=new Date,G=F.getFullYear(),Ne=String(F.getMonth()+1).padStart(2,"0"),ge=String(F.getDate()).padStart(2,"0");return`${G}-${Ne}-${ge}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[re,De]=h.useState(ye);h.useEffect(()=>{const F=pe.state,G=F?.callID;if(G&&!F?.openCallModal){I(G),Y(pe.pathname,{replace:!0,state:{}});return}!F?.openCallModal||!F?.initialCallData||F.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||F.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),De(Ne=>({...Ne,...F.initialCallData,relatedTo1:F.initialCallData.relatedTo1?String(F.initialCallData.relatedTo1):"",relatedTo2:F.initialCallData.relatedTo2?String(F.initialCallData.relatedTo2):""})),Y(pe.pathname,{replace:!0,state:{}}))},[pe.state,o]),h.useEffect(()=>{if(O&&u.length>0&&!R){const F=u.find(G=>G.id===O);F?s(F):q.error("Call not found."),I(null)}},[O,u,R]);const ve=async()=>{try{z(!0);const F=await ie.get("/calls/admin/fetch-all"),Ne=[...Array.isArray(F.data)?F.data:[]].sort((ge,fe)=>{const Ue=ge?.created_at?new Date(ge.created_at):0;return(fe?.created_at?new Date(fe.created_at):0)-Ue});f(Ne)}catch(F){console.error("Error fetching calls:",F),q.error("Failed to load calls")}finally{z(!1)}},ke=async()=>{try{const F=await ie.get("/users/all");x(F.data)}catch(F){console.error("Error fetching users: ",F)}};h.useEffect(()=>{ke(),ve()},[]);const Ce=[],de="",Re="Filter by Status",Oe="Filter by Users",[Ge,et]=h.useState(1),[mt,Fe]=h.useState(10),We=["GROUP MANAGER","MANAGER","SALES"].includes(W?.role?.toUpperCase())?u.filter(F=>F.status!=="INACTIVE"):u,Ke=We,Ze=We.length,Me=We.filter(F=>ff(F.status)==="PLANNED").length,je=We.filter(F=>ff(F.status)==="HELD").length,ce=We.filter(F=>ff(F.status)==="NOT_HELD").length,oe=[{title:"Total",value:Ze,icon:Rs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Me,icon:Ws,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:je,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ce,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}],[U,V]=h.useState("Overview"),be=F=>{const{name:G,value:Ne}=F.target;De(ge=>{const fe={...ge,[G]:Ne};return G==="relatedType1"&&(fe.relatedTo1="",Ne==="Lead"?(fe.relatedType2=null,fe.relatedTo2=null,d([])):Ne==="Account"&&(fe.relatedType2="Contact")),G==="relatedType2"&&(fe.relatedTo2=""),fe})};h.useEffect(()=>{const F=async()=>{try{l([]);let G;re.relatedType1==="Lead"?G=await ie.get("/leads/admin/getLeads"):re.relatedType1==="Account"&&(G=await ie.get("/accounts/admin/fetch-all"));let Ne=[];if(G&&Array.isArray(G.data)?Ne=G.data:Ne=[],y&&re.relatedTo1)try{let ge;re.relatedType1==="Lead"?ge=await ie.get(`/leads/get/${re.relatedTo1}`):re.relatedType1==="Account"&&(ge=await ie.get(`/accounts/get/${re.relatedTo1}`)),ge&&ge.data&&(Ne.some(Ue=>String(Ue.id)===String(re.relatedTo1))||(Ne=[ge.data,...Ne]))}catch(ge){console.error("Error fetching specific related item:",ge)}l(Ne)}catch(G){console.error("Error fetching data:",G),l([])}};re.relatedType1&&F()},[re.relatedType1,y,re.relatedTo1]),h.useEffect(()=>{const F=async()=>{try{d([]);let G;if(re.relatedType1==="Account"&&re.relatedTo1)re.relatedType2==="Contact"?G=await ie.get(`/contacts/from-acc/${re.relatedTo1}`):re.relatedType2==="Deal"?G=await ie.get(`/deals/from-acc/${re.relatedTo1}`):re.relatedType2==="Quote"&&(G=await ie.get(`/quotes/from-acc/${re.relatedTo1}`));else{d([]);return}G&&Array.isArray(G.data)?d(G.data):d([])}catch(G){console.error("Error fetching data:",G),d([])}};re.relatedType2&&F()},[re.relatedType2,re.relatedTo1,re.relatedType1]);const[ze,le]=h.useState(!1),X=F=>{F.preventDefault(),le(!0);const G=re.subject;if(!G||G.trim()===""){q.error("Subject is required.");return}if(!re.relatedTo1){q.error(`Please select a ${re.relatedType1||"Lead/Account"}.`);return}if(!re.assigned_to){q.error("Subject is required.");return}const ge={...re,duration_minutes:re.duration_minutes?parseInt(re.duration_minutes,10):null,relatedTo1:re.relatedTo1?parseInt(re.relatedTo1,10):null,relatedTo2:re.relatedType1==="Lead"?null:re.relatedTo2?parseInt(re.relatedTo2,10):null,relatedType2:re.relatedType1==="Lead"?null:re.relatedType2,assigned_to:re.assigned_to?parseInt(re.assigned_to,10):null},fe=y&&v?"update":"create",Ue=(re.subject||"").trim()||"Untitled Call";i({title:fe==="create"?"Confirm New Call":"Confirm Update",message:fe==="create"?`Create "${Ue}"?`:`Save changes to "${Ue}"?`,confirmLabel:fe==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:fe,payload:ge,targetId:v||null,name:Ue}})},Ae=F=>s(F),Pe=()=>{t(!1),N(!1),j(null)},Qe=async()=>{if(!r?.action){i(null);return}const{action:F}=r,{type:G,payload:Ne,targetId:ge,name:fe}=F;k(!0);try{if(G==="create")S(!0),await ie.post("/calls/create",Ne),q.success(`Call "${fe}" created successfully.`),t(!1),De(ye),N(!1),j(null),await ve();else if(G==="update"){if(!ge)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${ge}`,Ne),q.success(`Call "${fe}" updated successfully.`),t(!1),De(ye),N(!1),j(null),await ve()}else if(G==="delete"){if(!ge)throw new Error("Missing call identifier for archiving.");await ie.put(`/calls/${ge}`,{status:"INACTIVE"}),q.success(`Call "${fe}" archived successfully.`),a?.id===ge&&s(null),await ve()}else if(G==="bulk-delete"){const{targetIds:Ue,count:K}=F;if(!Ue||Ue.length===0)throw new Error("Missing call identifiers for bulk archiving.");te(!0),await ie.put("/calls/bulk-archive",{call_ids:Ue}),q.success(`${K} call${K!==1?"s":""} archived successfully.`),ee(new Set),await ve(),a&&B.has(a.id)&&s(null)}}catch(Ue){const K=G==="create"?"Failed to create call. Please review the details and try again.":G==="update"?"Failed to update call. Please review the details and try again.":G==="bulk-delete"?"Failed to archive calls. Please try again.":"Failed to archive call. Please try again.",ne=Ue?.response?.data?.detail||K;q.error(ne)}finally{(G==="create"||G==="update")&&S(!1),G==="bulk-delete"&&te(!1),k(!1),i(null)}},nt=()=>{A||i(null)},wt=async()=>{if(a?.id)try{M(!0),await ie.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${tT(_)}`),f(F=>Array.isArray(F)?F.map(G=>G.id===a.id?{...G,status:_}:G):F),s(null)}catch(F){const G=F.response?.data?.detail||"Failed to update status.";q.error(G)}finally{M(!1)}},Te=F=>{const G=Ke.find(Ne=>Ne.id===F);G&&G.call_creator?.id===W?.id&&ee(Ne=>{const ge=new Set(Ne);return ge.has(F)?ge.delete(F):ge.add(F),ge})},it=()=>{const F=Ke.filter(G=>G.call_creator?.id===W?.id);B.size===F.length&&F.length>0?ee(new Set):ee(new Set(F.map(G=>G.id)))},$e=()=>{if(B.size===0)return;const F=B.size;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:F})," call",F!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${F} Call${F!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(B),count:F}})};h.useEffect(()=>{a&&L(ff(a.status))},[a]);const ue=a?n.jsxs("div",{id:"callModalBackdrop",onClick:F=>F.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Qn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${S8(a.status)}`,children:tT(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:W?.id===a?.call_creator?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const F=Ue=>{if(!Ue)return"";const K=new Date(Ue),ne=K.getFullYear(),H=String(K.getMonth()+1).padStart(2,"0"),xe=String(K.getDate()).padStart(2,"0"),Ie=String(K.getHours()).padStart(2,"0"),Je=String(K.getMinutes()).padStart(2,"0");return`${ne}-${H}-${xe}T${Ie}:${Je}`},G=a.lead?"Lead":a.account?"Account":"Lead",Ne=a.lead?a.lead.id:a.account?a.account.id:null,ge=G==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",fe=G==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;De({subject:a.subject||"",call_time:F(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:G,relatedType2:ge,relatedTo1:Ne?String(Ne):"",relatedTo2:fe?String(fe):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>{const F=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${F}"? You can restore it later if needed.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:a.id,name:F}})},children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(F=>n.jsx("button",{onClick:()=>V(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${U===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[U==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(fo,{label:"Call Time",value:_8(a.call_time)}),n.jsx(fo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(fo,{label:"Direction",value:a.direction||"--"}),n.jsx(fo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(fo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(fo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(fo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(fo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(fo,{label:"Quote",value:Se(a.quote.quote_id)}),n.jsx(fo,{label:"Created At",value:_8(a.created_at)})]})}),U==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(_a,{comments:ae,onAddComment:Ee})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:F=>L(F.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:wt,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,he=e?n.jsx("div",{id:"modalBackdrop",onClick:F=>F.target.id==="modalBackdrop"&&Pe(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Pe(),le(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:X,noValidate:!0,children:[n.jsx(P7e,{label:"Subject",className:"md:col-span-2",name:"subject",value:re.subject,onChange:be,isSubmitted:ze,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:be,value:re.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(nT,{items:Array.isArray(o)?o:[],value:re.relatedTo1??"",placeholder:`Search ${re.relatedType1||"here"}...`,getLabel:F=>re.relatedType1==="Lead"?F.title:F.name??"",onChange:F=>De(G=>({...G,relatedTo1:F})),required:!0,isSubmitted:ze,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:be,value:re.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:re.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(nT,{disabled:re.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:re.relatedTo2??"",placeholder:re.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${re.relatedType2||"Contact"}...`:`No ${re.relatedType2||""} data found`,getLabel:F=>re.relatedType2==="Contact"?`${F.first_name??""} ${F.last_name??""}`.trim():re.relatedType2==="Quote"?Se(F.quote_id)??"":F.name??"",onChange:F=>De(G=>({...G,relatedTo2:F}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:re.call_time,onChange:be,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:re.duration_minutes,onChange:be,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(nT,{items:Array.isArray(p)?p:[],value:re.assigned_to??"",placeholder:"Search an account...",getLabel:F=>`${F.first_name} ${F.last_name}`,onChange:F=>De(G=>({...G,assigned_to:F})),required:!0,isSubmitted:ze})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:be,value:re.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:be,value:re.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(D7e,{className:"col-span-2",label:"Notes",value:re.notes,onChange:be,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Pe(),le(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Rs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{De(ye),N(!1),j(null),t(!0),le(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:oe.map(F=>n.jsx(L7e,{...F},F.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:de})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:Re,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),T7e.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))]}),n.jsxs("select",{defaultValue:Oe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ce.map(F=>n.jsx("option",{value:F.name,children:F.name},F.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:B.size>0&&B.size===Ke.filter(F=>F.call_creator?.id===W?.id).length&&Ke.filter(F=>F.call_creator?.id===W?.id).length>0,onChange:it,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:B.size>0&&n.jsx("button",{onClick:$e,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected calls",disabled:Q,children:n.jsx(kn,{size:18})})})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):Ke.length>0?Ke.map(F=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4",children:W?.id===F.call_creator?.id&&n.jsx("input",{type:"checkbox",checked:B.has(F.id),onChange:G=>{G.stopPropagation(),Te(F.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",onClick:()=>Ae(F),children:F.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",onClick:()=>Ae(F),children:[F.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.lead.title}),F.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.account.name}),F.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[F.contact.first_name," ",F.contact.last_name]}),F.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.deal.name}),F.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Se(F.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",onClick:()=>Ae(F),children:F.call_time?new Date(F.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",onClick:()=>Ae(F),children:F?.call_assign_to?`${F.call_assign_to.first_name} ${F.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Ae(F),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S8(F.status)}`,children:tT(F.status)})}),n.jsx("td",{className:"py-3 px-4"})]},F.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(an,{totalItems:We.length,pageSize:mt,currentPage:Ge,onPrev:()=>et(F=>Math.max(1,F-1)),onNext:()=>et(F=>F+1),onPageSizeChange:F=>{Fe(F),et(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),ue,he,r&&n.jsx(O7e,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Qe,onCancel:nt,loading:A})]})}function L7e({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function P7e({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function D7e(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function fo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function O7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function nT({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const A8=["Not started","In progress","Deferred","Completed"],T8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},xJ=e=>e&&(T8[e]||T8[String(e).toUpperCase()])||"Not started",M7e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},aT=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},I7e=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),xJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},$7e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=B=>{if(!B)return"";const ee=String(B).split("-");return ee.length===3?`${ee[0]}-${ee[2]}`:String(B)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",k="",_="Lead",L="",T="",M="";const R=c(),z=y(),O=l(),I=x();if(R){w="Account",_="Account",L=z,S=String(R);const B=d(),ee=u(),Q=N(),te=v(),W=f(),ae=j();B?(A="Contact",T="Contact",M=Q,k=String(B)):ee?(T="Deal",A="Deal",M=te,k=String(ee)):W&&(T="Quote",A="Quote",M=ae,k=String(W))}else O?(_="Lead",L=I,w="Lead",S=String(O)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:xJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:L,relatedType2Text:T,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:k}};function R7e(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,L]=h.useState(1),[T,M]=h.useState(10),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState([]),[Q,te]=h.useState(null),W=Nt(),ae=Xt(),[Ee,se]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[Y,pe]=h.useState(null),Se=Rx(Rf(nm,{activationConstraint:{distance:8}})),me=U=>{const{active:V}=U,be=u.find(ze=>ze.id===V.id);te(be)},ye=async U=>{const{active:V,over:be}=U;if(te(null),!be)return;const ze=V.id,le=be.id,X=u.find(Ae=>Ae.id===ze);if(!(!X||X.status===le)){f(Ae=>Ae.map(Pe=>Pe.id===ze?{...Pe,status:le}:Pe));try{const Ae={title:X.title,description:X.description||"",priority:X.priority||"Normal",status:le,due_date:X.dueDate||null,assigned_to:X.assignedToId||null,related_type_1:X.relatedType1||null,related_to_1:X.relatedTo1?parseInt(X.relatedTo1,10):null,related_type_2:X.relatedType2||null,related_to_2:X.relatedTo2?parseInt(X.relatedTo2,10):null};(!Ae.related_to_1||isNaN(Ae.related_to_1))&&(Ae.related_to_1=null),(!Ae.related_to_2||isNaN(Ae.related_to_2))&&(Ae.related_to_2=null),await ie.put(`/tasks/${ze}`,Ae),q.success(`Task moved to "${le}"`)}catch(Ae){console.error("Failed to update task status:",Ae),q.error("Failed to update task status"),f(Pe=>Pe.map(Qe=>Qe.id===ze?{...Qe,status:X.status}:Qe))}}},re=()=>{te(null)};h.useEffect(()=>{const U=ae.state?.openTaskModal,V=ae.state?.initialTaskData,be=ae.state?.taskID;U?(i(!0),V&&se(ze=>({...ze,...V})),W(ae.pathname,{replace:!0,state:{}})):be&&(pe(be),W(ae.pathname,{replace:!0,state:{}}))},[ae,W]),h.useEffect(()=>{if(Y&&u.length>0&&!p){const U=u.find(V=>V.id===Y);U?Ce(U,!0):q.error("Task not found."),pe(null)}},[Y,u,p]);const De=async()=>{try{const U=await ie.get("/users/all");k(Array.isArray(U.data)?U.data:[])}catch(U){console.error("Failed to fetch users:",U),q.error("Failed to fetch users.")}},ve=async()=>{try{x(!0);const U=await ie.get("/tasks/all"),be=(Array.isArray(U.data)?U.data:[]).map($7e);be.sort((ze,le)=>{const X=ze.createdAt?new Date(ze.createdAt):0;return(le.createdAt?new Date(le.createdAt):0)-X}),f(be),a==="list"&&L(1)}catch(U){console.error("Failed to load tasks:",U),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(De(),ve())},[t,e]);const ke=()=>{l(null),se({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ce=(U=null,V=!1)=>{l(U),d(V),U?se({id:U.id,subject:U.title||"",description:U.description||"",priority:U.priority||"Normal",status:U.status||"Not started",dueDate:M7e(U.dueDate),assignedTo:U.assignedToId?String(U.assignedToId):"",assignedToName:U.assignedToName||"",createdBy:U.createdBy||"",notes:U.notes||"",relatedType1Text:U.relatedType1Text||"",relatedTo1Text:U.relatedTo1Text||"",relatedType2Text:U.relatedType2Text||"",relatedTo2Text:U.relatedTo2Text||"",relatedType1:U.relatedType1||"",relatedTo1:U.relatedTo1||"",relatedType2:U.relatedType2||"",relatedTo2:U.relatedTo2||""}):ke(),i(!0)},de=()=>{i(!1),l(null),d(!1),ke()},Re=async U=>{const V=I7e(U);try{o&&!c?(await ie.put(`/tasks/${o.id}`,V),q.success("Task updated successfully.")):(await ie.post("/tasks/create",V),q.success("Task created successfully.")),i(!1),await ve()}catch(be){console.error("Failed to save task:",be);const ze=be.response?.data?.detail||"Failed to save task.";q.error(ze)}},Oe=U=>{U&&z({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:U.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id}})},Ge=()=>{if(Ke.every(U=>B.includes(U.id)))ee(B.filter(U=>!Ke.map(V=>V.id).includes(U)));else{const U=Ke.map(V=>V.id);ee([...new Set([...B,...U])])}},et=U=>{ee(V=>V.includes(U)?V.filter(be=>be!==U):[...V,U])},mt=async()=>{B.length!==0&&z({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:B.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${B.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:B}})},Fe=async()=>{if(!R?.action){z(null);return}const{action:U}=R;I(!0);try{U.type==="delete"?(await ie.delete(`/tasks/${U.targetId}`),q.success("Task deleted successfully."),await ve()):U.type==="bulk-delete"&&(await ie.delete("/tasks/admin/bulk-delete",{data:{task_ids:U.task_ids}}),q.success(`Successfully deleted ${U.task_ids.length} tasks`),ee([]),await ve())}catch(V){console.error("Task action failed:",V),q.error("Failed to delete task.")}finally{I(!1),z(null)}},ot=()=>{O||z(null)},We=h.useMemo(()=>{const U=y.trim().toLowerCase();return[...u].sort((be,ze)=>{const le=be.createdAt?new Date(be.createdAt):0;return(ze.createdAt?new Date(ze.createdAt):0)-le}).filter(be=>{const ze=U===""||be.title?.toLowerCase().includes(U)||be.description?.toLowerCase().includes(U)||be.assignedToName?.toLowerCase().includes(U)||be.createdBy?.toLowerCase().includes(U),le=v==="Filter by Status"||be.status===v,X=w==="Filter by Priority"||be.priority===w;return ze&&le&&X})},[u,y,v,w]);h.useEffect(()=>{L(1)},[y,v,w,a,T]),h.useEffect(()=>{if(a==="list"){const U=We.length===0?1:Math.ceil(We.length/T);_>U&&L(U)}},[We.length,_,a,T]);const Ke=h.useMemo(()=>{if(a==="board")return We;const U=(_-1)*T;return We.slice(U,U+T)},[We,_,a,T]),Ze=h.useMemo(()=>{const U=new Date;return[{title:"To Do",value:u.filter(V=>V.status==="Not started").length,icon:Ws,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(V=>V.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(V=>V.status==="Completed").length,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(V=>V.dueDate&&new Date(V.dueDate)<U&&V.status!=="Completed").length,icon:Vu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(V=>V.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Me=U=>U.dueDate&&new Date(U.dueDate)<new Date&&U.status!=="Completed",je=U=>{switch(U.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ce=U=>{switch(U){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},oe=U=>{switch(U){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ce(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(gn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ze.map(U=>n.jsx(z7e,{...U},U.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:U=>N(U.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:U=>j(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),A8.map(U=>n.jsx("option",{children:U},U))]}),n.jsxs("select",{value:w,onChange:U=>S(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(We.length>0?n.jsxs(Ux,{sensors:Se,collisionDetection:zx,onDragStart:me,onDragEnd:ye,onDragCancel:re,children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:A8.map(U=>{const V=Ke.filter(be=>be.status===U);return n.jsx(U7e,{column:U,columnTasks:V,getTaskCardColor:je,isTaskOverdue:Me,formatDateDisplay:aT,handleOpenModal:Ce,handleDeleteTask:Oe},U)})}),n.jsx(pj,{children:Q?n.jsx(H7e,{task:Q,getTaskCardColor:je,isTaskOverdue:Me,formatDateDisplay:aT}):null})]}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ke.length>0&&Ke.every(U=>B.includes(U.id)),onChange:Ge})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:B.length>0?n.jsx("button",{onClick:mt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${B.length} selected tasks`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ke.length>0?Ke.map(U=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:V=>V.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:B.includes(U.id),onChange:()=>et(U.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ce(U,!0),children:U.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ce(U,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ce(U.status||"Not started")}`,children:U.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ce(U,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${oe(U.priority||"Low")}`,children:U.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ce(U,!0),children:U.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Me(U)?"text-red-600 font-medium":""}`,onClick:()=>Ce(U,!0),children:U.dateAssigned?aT(U.dateAssigned):""}),n.jsx("td",{})]},U.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(an,{className:"mt-6",totalItems:We.length,pageSize:T,currentPage:We.length===0?0:_,onPrev:()=>L(U=>Math.max(U-1,1)),onNext:()=>L(U=>Math.min(U+1,Math.max(1,Math.ceil(We.length/T)||1))),onPageSizeChange:U=>{M(U),L(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(x0,{isOpen:r,onClose:de,onSave:Re,onEdit:()=>d(!1),setFormData:se,formData:Ee,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Oe}),R&&n.jsx(F7e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Fe,onCancel:ot,loading:O})]})}function z7e({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function F7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function U7e({column:e,columnTasks:t,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Hx({id:e});return n.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:e}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),n.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(d=>n.jsx(B7e,{task:d,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},d.id)):n.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function B7e({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:d,isDragging:u}=Bx({id:e.id}),f=d?{transform:`translate3d(${d.x}px, ${d.y}px, 0)`}:void 0;return n.jsxs("div",{ref:c,style:f,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${u?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[n.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ua,{})}),n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:n.jsx(Kt,{})})]})]})}function H7e({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s}){return n.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const yJ=e=>e?e.toUpperCase():"",Cb=e=>{const t=yJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},q7e=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},G7e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},W7e=e=>{const t=yJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},sT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},V7e=()=>{const e=Nt(),t=Xt(),[a]=Fs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[N,v]=h.useState(!1),[j,w]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[L,T]=h.useState(sT),[M,R]=h.useState(!1),[z,O]=h.useState(null),[I,B]=h.useState(!1),[ee,Q]=h.useState(null),[te,W]=h.useState(!1),[ae,Ee]=h.useState(null),[se,Y]=h.useState(new Set),[pe,Se]=h.useState(!1),{user:me}=Gt();h.useEffect(()=>{const je=t.state?.openMeetingModal,ce=t.state?.initialMeetingData?.relatedTo||a.get("id"),oe=t.state?.meetingID;je||ce?(v(!0),t.state?.initialMeetingData&&T(U=>({...U,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):oe&&(Ee(oe),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{console.log("ManagerMeetings - Current User:",me),console.log("Current User Role:",me?.role),console.log("Is non-admin:",["GROUP MANAGER","MANAGER","SALES"].includes(me?.role?.toUpperCase()))},[me]),h.useEffect(()=>{if(ae&&i.length>0&&!l){const je=i.find(ce=>ce.id===ae);je?w(je):q.error("Meeting not found."),Ee(null)}},[ae,i,l]);const ye=async()=>{if(s&&r){const je=sessionStorage.getItem("meetingDetailData");if(je)try{const ce=JSON.parse(je);if(ce.id===parseInt(s)){w(ce),sessionStorage.removeItem("meetingDetailData");return}}catch(ce){console.error(ce)}}c(!0);try{console.log("=== FETCH MEETINGS START ===");const je=await ie.get("/meetings/admin/fetch-all"),ce=Array.isArray(je.data)?je.data:[];console.log("Total meetings fetched:",ce.length),console.log("Meeting statuses:",ce.map(U=>({id:U.id,subject:U.subject,status:U.status})));const oe=[...ce].sort((U,V)=>{const be=U?.created_at?new Date(U.created_at).getTime():0;return(V?.created_at?new Date(V.created_at).getTime():0)-be});if(o(oe),console.log("Meetings set after sort"),console.log("=== FETCH MEETINGS COMPLETE ==="),s&&!j){const U=oe.find(V=>V.id===parseInt(s));U&&w(U)}}catch(je){console.error("fetchMeetings error:",je),q.error("Failed to load meetings.")}finally{c(!1)}},re=async()=>{try{const je=await ie.get("/users/all");u(Array.isArray(je.data)?je.data:[])}catch(je){console.error(je)}};h.useEffect(()=>{ye(),re()},[]);const De=je=>p(je.target.value),ke=["GROUP MANAGER","MANAGER","SALES"].includes(me?.role?.toUpperCase()),Ce=ke?i.filter(je=>{const ce=je.status?.toUpperCase()==="INACTIVE";return ce&&console.log(`Filtering out INACTIVE meeting: ${je.subject} (status: ${je.status})`),!ce}):i;console.log("=== FILTER SUMMARY ==="),console.log("User role:",me?.role),console.log("Is non-admin:",ke),console.log("Total meetings:",i.length),console.log("Visible meetings after filter:",Ce.length),console.log("=== END FILTER SUMMARY ===");const de=h.useMemo(()=>{const je=f.trim().toLowerCase(),ce=x.trim().toUpperCase();return Ce.filter(oe=>{const U=[oe?.activity,oe?.description,oe?.relatedTo,oe?.assignedTo],V=je===""||U.some(ze=>ze&&ze.toString().toLowerCase().includes(je)),be=ce==="FILTER BY STATUS"||Cb(oe.status||"PENDING")===ce;return V&&be})},[Ce,f,x]),Re=h.useMemo(()=>{const je=(S-1)*k;return de.slice(je,je+k)},[de,S]),Oe=()=>{v(!1),T(sT),R(!1),O(null),B(!1)},Ge=()=>{T(sT),R(!1),O(null),v(!0)},et=je=>{let ce="";if(je.meet_assign_to?.id)ce=String(je.meet_assign_to.id);else if(je.assignedTo){const Pe=d.find(Qe=>`${Qe.first_name} ${Qe.last_name}`===je.assignedTo);ce=Pe?String(Pe.id):""}const oe=Pe=>{if(!Pe)return"";try{const Qe=new Date(Pe),nt=Qe.getTimezoneOffset()*6e4;return new Date(Qe.getTime()-nt).toISOString().slice(0,16)}catch{return""}};let U="Lead",V="",be="Contact",ze="";if(je.lead)U="Lead",V=String(je.lead.id);else if(je.account)U="Account",V=String(je.account.id),je.contact?(be="Contact",ze=String(je.contact.id)):je.deal?(be="Deal",ze=String(je.deal.id)):je.quote&&(be="Quote",ze=String(je.quote.id));else if(je.relatedType||je.related_type){const Pe=je.relatedType||je.related_type,Qe=je.related_to||je.relatedToId;Pe==="Lead"?(U="Lead",V=String(Qe)):(U="Account",V=je.account_id?String(je.account_id):"")}const le={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},X=Cb(je.status),Ae=le[X]||"Planned";T({subject:je.subject||je.activity||"",location:je.location||"",startTime:oe(je.start_time||je.startTime),endTime:oe(je.end_time||je.endTime),status:Ae,notes:je.description||je.notes||"",assignedTo:ce,relatedType1:U,relatedTo1:V,relatedType2:be,relatedTo2:ze}),R(!0),O(je.id),w(null),v(!0)},mt=je=>{if(!je.subject?.trim())return q.error("Subject is required.");if(!je.startTime)return q.error("Start time is required.");if(je.endTime&&!(new Date(je.endTime)-new Date(je.startTime)>0))return q.error("End time must be after start time.");je.relatedType1,je.relatedTo1,je.relatedType1==="Account"&&je.relatedType2&&je.relatedTo2&&(je.relatedType2,je.relatedTo2);const ce={...je,assignedTo:parseInt(je.assignedTo),relatedTo1:parseInt(je.relatedTo1),relatedTo2:parseInt(je.relatedTo2)},oe=M&&z?"update":"create";Q({title:oe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${oe} "${ce.subject}"?`,confirmLabel:oe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:oe,payload:ce,targetId:z,name:ce.subject}})},Fe=async()=>{if(!ee?.action)return;const{type:je,payload:ce,targetId:oe,name:U,targetIds:V,count:be}=ee.action;W(!0);try{if(je==="create")B(!0),await ie.post("/meetings/create",ce),q.success(`Meeting "${U}" created.`),Oe(),await ye();else if(je==="update")B(!0),await ie.put(`/meetings/${oe}`,ce),q.success(`Meeting "${U}" updated.`),Oe(),await ye();else if(je==="delete"){console.log("=== ARCHIVE FLOW START ==="),console.log("Archiving meeting:",oe),console.log("Meeting name:",U);try{const ze=await ie.delete(`/meetings/${oe}`);console.log("Archive API response:",ze),console.log("Response data:",ze.data),q.success(`Meeting "${U}" archived successfully.`),j?.id===oe&&w(null),console.log("Calling fetchMeetings to refresh list..."),await ye(),console.log("=== ARCHIVE FLOW COMPLETE ===")}catch(ze){throw console.error("Archive failed:",ze),ze}}else if(je==="bulk-delete"){if(!V||V.length===0)throw new Error("Missing meeting identifiers for bulk archiving.");console.log("Bulk archiving meetings:",V),Se(!0),await ie.put("/meetings/bulk-archive",{meeting_ids:V}),q.success(`${be} meeting${be!==1?"s":""} archived successfully.`),Y(new Set),await ye(),j&&se.has(j.id)&&w(null)}}catch(ze){console.error("Error in handleConfirmAction:",ze),console.error("Error response:",ze?.response),console.error("Error details:",ze?.response?.data);const le=je==="create"?"Failed to create meeting. Please review the details and try again.":je==="update"?"Failed to update meeting. Please review the details and try again.":je==="bulk-delete"?"Failed to archive meetings. Please try again.":"Failed to delete meeting. Please try again.",X=ze?.response?.data?.detail||le;q.error(X)}finally{(je==="create"||je==="update")&&B(!1),je==="bulk-delete"&&Se(!1),W(!1),Q(null)}},ot=je=>{console.log("Delete button clicked for meeting:",je),console.log("Meeting created_by:",je.created_by),console.log("Current user ID:",me?.id),console.log("Can delete?:",je.created_by===me?.id),Q({title:"Archive Meeting",message:`Are you sure you want to archive "${je.subject||je.activity}"? You can restore it later if needed.`,confirmLabel:"Archive",variant:"archive",action:{type:"delete",targetId:je.id,name:je.subject||je.activity}})},We=async(je,ce)=>{try{await ie.put(`/meetings/${je}`,{status:ce}),q.success("Status updated"),ye(),w(null)}catch{q.error("Failed to update status")}},Ke=je=>{const ce=Re.find(oe=>oe.id===je);ce&&ce.created_by===me?.id&&Y(oe=>{const U=new Set(oe);return U.has(je)?U.delete(je):U.add(je),U})},Ze=()=>{const je=Re.filter(ce=>ce.created_by===me?.id);se.size===je.length?Y(new Set):Y(new Set(je.map(ce=>ce.id)))},Me=()=>{if(se.size===0)return;const je=se.size;Q({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:je})," meeting",je!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${je} Meeting${je!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(se),count:je}})};return r&&s?j?n.jsx(yd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:et,onDelete:ot,onStatusUpdate:We,currentUser:me,isSalesView:!0}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Tt,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Ge,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(gn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:De,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:je=>y(je.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:se.size===Re.filter(je=>je.created_by===me?.id).length&&Re.filter(je=>je.created_by===me?.id).length>0,onChange:Ze,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:se.size>0&&n.jsx("button",{onClick:Me,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected meetings",disabled:pe,children:n.jsx(kn,{size:18})})})]})}),n.jsx("tbody",{children:Re.length>0?Re.map(je=>n.jsxs("tr",{onClick:()=>w(je),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4",onClick:ce=>ce.stopPropagation(),children:me?.id===je.created_by&&n.jsx("input",{type:"checkbox",checked:se.has(je.id),onChange:ce=>{ce.stopPropagation(),Ke(je.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:je.subject}),n.jsxs("td",{className:"py-3 px-4",children:[je.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:je.lead.title}),je.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:je.account.name}),je.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[je.contact.first_name," ",je.contact.last_name]}),je.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:je.deal.name}),je.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:q7e(je.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:G7e(je.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[je.meet_assign_to.first_name," ",je.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W7e(Cb(je.status))}`,children:Cb(je.status).replace("_"," ")})})]},je.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(an,{totalItems:de.length,pageSize:k,currentPage:S,onPrev:()=>A(je=>Math.max(1,je-1)),onNext:()=>A(je=>je+1),onPageSizeChange:je=>{_(je),A(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),N&&n.jsx(p1,{onClose:Oe,formData:L,setFormData:T,isEditing:M,onSubmit:mt,isSubmitting:I||te,users:d}),j&&n.jsx(yd,{meeting:j,onClose:()=>w(null),onEdit:et,onDelete:ot,onStatusUpdate:We,currentUser:me,isSalesView:!0}),ee&&n.jsx(Y7e,{open:!0,title:ee.title,message:ee.message,confirmLabel:ee.confirmLabel,variant:ee.variant,onConfirm:Fe,onCancel:()=>Q(null),loading:te})]})};function Y7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const x1=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Ag={firstName:"",lastName:"",email:"",password:"",role:""},Q7e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},So=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",K7e=e=>{const t=So(e),a=x1.find(s=>So(s.value)===t);return a?a.value:e||""},Zk=e=>{const t=So(e),a=x1.find(s=>So(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},E8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},rT=(e,{size:t="sm"}={})=>{const a=So(e),s=Q7e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Zk(e)})},X7e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},k8=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function Z7e(){const{user:e,loading:t}=Gt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(Ag),[A,k]=h.useState(!1),[_,L]=h.useState(null),[T,M]=h.useState(!1),[R,z]=h.useState(1),[O,I]=h.useState(10),[B,ee]=h.useState("Overview"),[Q,te]=h.useState(""),[W,ae]=h.useState(!1),Ee=So(e?.role),se=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(Ee),Y=!t&&se,pe=h.useMemo(()=>{const oe=x1.filter(U=>So(U.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...oe]},[]),Se=h.useCallback(oe=>{oe&&(s(U=>U.map(V=>V.id===oe?{...V,highlight:!0}:V)),setTimeout(()=>{s(U=>U.map(V=>V.id===oe?{...V,highlight:!1}:V))},2e3))},[]),me=h.useCallback(async()=>{i(!0);try{const oe=await ie.get("/users/all"),U=Array.isArray(oe.data)?oe.data:[],V=k8(U);s(V),f(be=>be&&(V.find(le=>le.id===be.id)||null)),console.log(oe.data)}catch(oe){console.error("Error fetching users:",oe);const U=oe.response?.data?.detail||"Failed to load users. Please try again later.";q.error(U)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!se&&e&&q.error("You are not authorized to access User Management.")},[se,t,e]),h.useEffect(()=>{t||!se||me()},[t,se,me]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const ye=h.useMemo(()=>{const oe=o.trim().toLowerCase(),U=So(c);return k8(a.filter(V=>{if(!V)return!1;const be=oe===""||[V.first_name,V.last_name,`${V.first_name||""} ${V.last_name||""}`,V.email,Zk(V.role)].filter(Boolean).some(le=>le.toString().toLowerCase().includes(oe)),ze=U===""||U==="CEO"&&["CEO","ADMIN"].includes(So(V.role))||So(V.role)===U;return be&&ze}))},[a,o,c]),re=Math.max(1,Math.ceil(ye.length/O)||1);h.useEffect(()=>{z(1)},[o,c]),h.useEffect(()=>{z(oe=>{const U=Math.max(1,Math.ceil(ye.length/O)||1);return oe>U?U:oe})},[ye.length]);const De=h.useMemo(()=>{const oe=(R-1)*O;return ye.slice(oe,oe+O)},[ye,R]);ye.length===0||(R-1)*O+1,Math.min(R*O,ye.length);const ve=()=>z(oe=>Math.max(oe-1,1)),ke=()=>z(oe=>Math.min(oe+1,re)),Ce=()=>{S(Ag),N(!1),j(null),x(!0)},de=oe=>{console.log(oe),f(oe),ee("Overview"),te(oe?.is_active?"Active":"Inactive")},Re=oe=>{oe.target.id==="userModalBackdrop"&&!T&&Oe()},Oe=()=>{f(null)},Ge=(oe,U)=>{S(V=>({...V,[oe]:U}))},et=()=>{const oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let U="";for(let V=0;V<10;V+=1)U+=oe.charAt(Math.floor(Math.random()*oe.length));Ge("password",U)},mt=()=>{A||T||(x(!1),S(Ag),j(null),N(!1))},Fe=oe=>{S({firstName:oe.first_name||"",lastName:oe.last_name||"",email:oe.email||"",password:"",role:K7e(oe.role)}),N(!0),j(oe.id),x(!0),f(null)},ot=oe=>{L({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[oe.first_name," ",oe.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:oe.id,name:`${oe.first_name||""} ${oe.last_name||""}`.trim()||oe.email||"user"}})},We=oe=>{oe.preventDefault();const U=w.firstName.trim(),V=w.lastName.trim(),be=w.email.trim(),ze=w.password.trim(),le="Sales",X=!(y&&v);if(!U||!be||!le){q.warn("Please fill in all required fields.");return}if(X&&!ze){q.warn("Please fill in all required fields.");return}if(ze&&ze.length<8){q.warn("Password should be at least 8 characters long.");return}const Ae={first_name:U,last_name:V,email:be,role:le};console.log(Ae),(X||ze)&&(Ae.password=ze);const Pe=`${U} ${V}`.trim(),Qe=X?"create":"update";L({title:Qe==="create"?"Confirm New User":"Confirm User Update",message:Qe==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Pe})," with role"," ",n.jsx("span",{className:"font-semibold",children:Zk(le)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Pe||be}),"?"]}),confirmLabel:Qe==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:Ae,targetId:v,name:Pe||be}})},Ke=async()=>{if(!_?.action){L(null);return}const{action:oe}=_,{type:U,payload:V,targetId:be,name:ze}=oe;M(!0),(U==="create"||U==="update")&&k(!0);try{if(U==="create"){const X=(await ie.post("/users/createuser",V)).data;await me(),Se(X.id),q.success(`User "${ze}" created successfully.`),x(!1),S(Ag),j(null),N(!1)}else if(U==="update"){if(!be)throw new Error("Missing user identifier for update.");const X=(await ie.put(`/users/updateuser/${be}`,V)).data;await me(),f(null),Se(X.id),q.success(`User "${ze}" updated successfully.`),x(!1),S(Ag),j(null),N(!1)}else if(U==="delete"){if(!be)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${be}`),s(le=>le.map(X=>X.id===be?{...X,is_active:!1}:X)),u&&u.id===be&&(f(null),te("")),q.success(`User "${ze}" deactivated successfully.`)}}catch(le){console.error("User management error:",le);const X=U==="create"?"Failed to create user. Please review the details and try again.":U==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Ae=le.response?.data?.detail||X;q.error(Ae)}finally{(U==="create"||U==="update")&&k(!1),M(!1),L(null)}},Ze=()=>{T||L(null)},Me=async()=>{if(!u||!Q)return;const oe=u.is_active?"Active":"Inactive";if(Q===oe)return;const U=Q==="Active";ae(!0);try{const be=(await ie.put(`/users/updateuser/${u.id}`,{is_active:U})).data;s(ze=>ze.map(le=>le.id===be.id?be:le)),f(null),te(""),q.success(`User status updated to ${Q}`)}catch(V){console.error("Failed to update user status:",V);const be=V.response?.data?.detail||"Failed to update user status. Please try again.";q.error(be)}finally{ae(!1)}},je=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!Y)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(nN,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Ce,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:oe=>l(oe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:oe=>d(oe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:pe.map(oe=>n.jsx("option",{value:oe.value,children:oe.label},oe.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):ye.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):De.map(oe=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${oe.highlight?"bg-green-50":""} ${oe.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>de(oe),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[oe.first_name," ",oe.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>de(oe),children:oe.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>de(oe),children:rT(oe.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>de(oe),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${oe.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:oe.is_active?"Active":"Inactive"})})]},oe.id))})]})}),n.jsx(an,{className:"mt-4",totalItems:ye.length,pageSize:O,currentPage:R,onPrev:ve,onNext:ke,onPageSizeChange:oe=>{I(oe),z(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),ce=u?n.jsx("div",{id:"userModalBackdrop",onClick:Re,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Oe,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Qn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:X7e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),rT(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Fe(u),disabled:T,children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ot(u),disabled:T,children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(oe=>n.jsx("button",{onClick:()=>ee(oe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${B===oe?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:oe},oe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:B==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:rT(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,oe=>oe.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:E8(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?E8(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const oe=encodeURIComponent(u.email),U=encodeURIComponent(""),V=encodeURIComponent(""),be=`https://mail.google.com/mail/?view=cm&fs=1&to=${oe}&su=${U}&body=${V}`;window.open(be,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Q||(u.is_active?"Active":"Inactive"),onChange:oe=>te(oe.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Me,disabled:W||Q===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||Q===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[je,ce,n.jsx(J7e,{open:p,isEditing:y,isSubmitting:A,confirmProcessing:T,formData:w,onClose:mt,onSubmit:We,onChange:Ge,onGeneratePassword:et}),n.jsx(e8e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:Ke,onCancel:Ze})]})}function J7e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(Sb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(Sb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(Sb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(Sb,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...x1],required:!0}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Sb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function e8e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function t8e({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Xt(),{logout:i}=Qs(),{user:o,fetchUser:l}=Gt(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};h.useEffect(()=>{l()},[]);const d=c[r.pathname]||"Marketing Panel";return h.useEffect(()=>{function u(f){s.current&&!s.current.contains(f.target)&&a(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Xf,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:d})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(lx,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:o?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),n.jsx("div",{className:"border-t my-1"}),n.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function n8e(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Xt(),{fetchUser:d}=Gt();h.useEffect(()=>{d()},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],y=["/marketing/tasks"],N=p.includes(c.pathname),v=x.includes(c.pathname),j=y.includes(c.pathname);return h.useEffect(()=>{N&&t(!0),v&&s(!0),j&&i(!0)},[N,v,j]),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsxs($t,{to:"/marketing/dashboard",className:({isActive:w})=>w?u:f,children:[n.jsx(cx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-lg"}),"Sales"]}),n.jsx(At,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/marketing/accounts",className:({isActive:w})=>w?u:f,children:[n.jsx(na,{})," Accounts"]}),n.jsxs($t,{to:"/marketing/contacts",className:({isActive:w})=>w?u:f,children:[n.jsx(en,{})," Contacts"]}),n.jsxs($t,{to:"/marketing/leads",className:({isActive:w})=>w?u:f,children:[n.jsx(Yn,{})," Leads"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ur,{className:"text-lg"}),"Tools"]}),n.jsx(At,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/marketing/campaigns",className:({isActive:w})=>w?u:f,children:[n.jsx(ZT,{})," Campaign"]}),n.jsxs($t,{to:"/marketing/templates",className:({isActive:w})=>w?u:f,children:[n.jsx(yL,{})," Templates"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(At,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsx("div",{className:"ml-6 mt-2 space-y-1",children:n.jsxs($t,{to:"/marketing/tasks",className:({isActive:w})=>w?u:f,children:[n.jsx(Vt,{})," Tasks"]})})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(t8e,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:n.jsx(ex,{})})]})]})}function y0(e){return e+.5|0}const ed=(e,t,a)=>Math.max(Math.min(e,a),t);function Yg(e){return ed(y0(e*2.55),0,255)}function od(e){return ed(y0(e*255),0,255)}function Sl(e){return ed(y0(e/2.55)/100,0,1)}function L8(e){return ed(y0(e*100),0,100)}const ri={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Jk=[..."0123456789ABCDEF"],a8e=e=>Jk[e&15],s8e=e=>Jk[(e&240)>>4]+Jk[e&15],_b=e=>(e&240)>>4===(e&15),r8e=e=>_b(e.r)&&_b(e.g)&&_b(e.b)&&_b(e.a);function i8e(e){var t=e.length,a;return e[0]==="#"&&(t===4||t===5?a={r:255&ri[e[1]]*17,g:255&ri[e[2]]*17,b:255&ri[e[3]]*17,a:t===5?ri[e[4]]*17:255}:(t===7||t===9)&&(a={r:ri[e[1]]<<4|ri[e[2]],g:ri[e[3]]<<4|ri[e[4]],b:ri[e[5]]<<4|ri[e[6]],a:t===9?ri[e[7]]<<4|ri[e[8]]:255})),a}const o8e=(e,t)=>e<255?t(e):"";function l8e(e){var t=r8e(e)?a8e:s8e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+o8e(e.a,t):void 0}const c8e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bJ(e,t,a){const s=t*Math.min(a,1-a),r=(i,o=(i+e/30)%12)=>a-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function d8e(e,t,a){const s=(r,i=(r+e/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function u8e(e,t,a){const s=bJ(e,1,.5);let r;for(t+a>1&&(r=1/(t+a),t*=r,a*=r),r=0;r<3;r++)s[r]*=1-t-a,s[r]+=t;return s}function m8e(e,t,a,s,r){return e===r?(t-a)/s+(t<a?6:0):t===r?(a-e)/s+2:(e-t)/s+4}function XD(e){const a=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(a,s,r),o=Math.min(a,s,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=m8e(a,s,r,u,i),c=c*60+.5),[c|0,d||0,l]}function ZD(e,t,a,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,a,s)).map(od)}function JD(e,t,a){return ZD(bJ,e,t,a)}function f8e(e,t,a){return ZD(u8e,e,t,a)}function h8e(e,t,a){return ZD(d8e,e,t,a)}function vJ(e){return(e%360+360)%360}function g8e(e){const t=c8e.exec(e);let a=255,s;if(!t)return;t[5]!==s&&(a=t[6]?Yg(+t[5]):od(+t[5]));const r=vJ(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=f8e(r,i,o):t[1]==="hsv"?s=h8e(r,i,o):s=JD(r,i,o),{r:s[0],g:s[1],b:s[2],a}}function p8e(e,t){var a=XD(e);a[0]=vJ(a[0]+t),a=JD(a),e.r=a[0],e.g=a[1],e.b=a[2]}function x8e(e){if(!e)return;const t=XD(e),a=t[0],s=L8(t[1]),r=L8(t[2]);return e.a<255?`hsla(${a}, ${s}%, ${r}%, ${Sl(e.a)})`:`hsl(${a}, ${s}%, ${r}%)`}const P8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},D8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function y8e(){const e={},t=Object.keys(D8),a=Object.keys(P8);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<a.length;r++)i=a[r],l=l.replace(i,P8[i]);i=parseInt(D8[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let Ab;function b8e(e){Ab||(Ab=y8e(),Ab.transparent=[0,0,0,0]);const t=Ab[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const v8e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function w8e(e){const t=v8e.exec(e);let a=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];a=t[8]?Yg(o):ed(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?Yg(s):ed(s,0,255)),r=255&(t[4]?Yg(r):ed(r,0,255)),i=255&(t[6]?Yg(i):ed(i,0,255)),{r:s,g:r,b:i,a}}}function N8e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Sl(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const iT=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,tf=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function j8e(e,t,a){const s=tf(Sl(e.r)),r=tf(Sl(e.g)),i=tf(Sl(e.b));return{r:od(iT(s+a*(tf(Sl(t.r))-s))),g:od(iT(r+a*(tf(Sl(t.g))-r))),b:od(iT(i+a*(tf(Sl(t.b))-i))),a:e.a+a*(t.a-e.a)}}function Tb(e,t,a){if(e){let s=XD(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*a,t===0?360:1)),s=JD(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function wJ(e,t){return e&&Object.assign(t||{},e)}function O8(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=od(e[3]))):(t=wJ(e,{r:0,g:0,b:0,a:1}),t.a=od(t.a)),t}function C8e(e){return e.charAt(0)==="r"?w8e(e):g8e(e)}class qp{constructor(t){if(t instanceof qp)return t;const a=typeof t;let s;a==="object"?s=O8(t):a==="string"&&(s=i8e(t)||b8e(t)||C8e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=wJ(this._rgb);return t&&(t.a=Sl(t.a)),t}set rgb(t){this._rgb=O8(t)}rgbString(){return this._valid?N8e(this._rgb):void 0}hexString(){return this._valid?l8e(this._rgb):void 0}hslString(){return this._valid?x8e(this._rgb):void 0}mix(t,a){if(t){const s=this.rgb,r=t.rgb;let i;const o=a===i?.5:a,l=2*o-1,c=s.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*r.r+.5,s.g=255&d*s.g+i*r.g+.5,s.b=255&d*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,a){return t&&(this._rgb=j8e(this._rgb,t._rgb,a)),this}clone(){return new qp(this.rgb)}alpha(t){return this._rgb.a=od(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=y0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Tb(this._rgb,2,t),this}darken(t){return Tb(this._rgb,2,-t),this}saturate(t){return Tb(this._rgb,1,t),this}desaturate(t){return Tb(this._rgb,1,-t),this}rotate(t){return p8e(this._rgb,t),this}}function vl(){}const S8e=(()=>{let e=0;return()=>e++})();function En(e){return e==null}function ns(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function vn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function wi(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ho(e,t){return wi(e)?e:t}function on(e,t){return typeof e>"u"?t:e}const _8e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,NJ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Jn(e,t,a){if(e&&typeof e.call=="function")return e.apply(a,t)}function Mn(e,t,a,s){let r,i,o;if(ns(e))for(i=e.length,r=0;r<i;r++)t.call(a,e[r],r);else if(vn(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(a,e[o[r]],o[r])}function Mw(e,t){let a,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;++a)if(r=e[a],i=t[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Iw(e){if(ns(e))return e.map(Iw);if(vn(e)){const t=Object.create(null),a=Object.keys(e),s=a.length;let r=0;for(;r<s;++r)t[a[r]]=Iw(e[a[r]]);return t}return e}function jJ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function A8e(e,t,a,s){if(!jJ(e))return;const r=t[e],i=a[e];vn(r)&&vn(i)?Gp(r,i,s):t[e]=Iw(i)}function Gp(e,t,a){const s=ns(t)?t:[t],r=s.length;if(!vn(e))return e;a=a||{};const i=a.merger||A8e;let o;for(let l=0;l<r;++l){if(o=s[l],!vn(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],e,o,a)}return e}function op(e,t){return Gp(e,t,{merger:T8e})}function T8e(e,t,a){if(!jJ(e))return;const s=t[e],r=a[e];vn(s)&&vn(r)?op(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Iw(r))}const M8={"":e=>e,x:e=>e.x,y:e=>e.y};function E8e(e){const t=e.split("."),a=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}function k8e(e){const t=E8e(e);return a=>{for(const s of t){if(s==="")break;a=a&&a[s]}return a}}function Gu(e,t){return(M8[t]||(M8[t]=k8e(t)))(e)}function e3(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Wp=e=>typeof e<"u",bd=e=>typeof e=="function",I8=(e,t)=>{if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0};function L8e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const $n=Math.PI,Ca=2*$n,P8e=Ca+$n,$w=Number.POSITIVE_INFINITY,D8e=$n/180,as=$n/2,Vd=$n/4,$8=$n*2/3,CJ=Math.log10,Mo=Math.sign;function lp(e,t,a){return Math.abs(e-t)<a}function R8(e){const t=Math.round(e);e=lp(e,t,e/1e3)?t:e;const a=Math.pow(10,Math.floor(CJ(e))),s=e/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function O8e(e){const t=[],a=Math.sqrt(e);let s;for(s=1;s<a;s++)e%s===0&&(t.push(s),t.push(e/s));return a===(a|0)&&t.push(a),t.sort((r,i)=>r-i).pop(),t}function M8e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Vp(e){return!M8e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function I8e(e,t){const a=Math.round(e);return a-t<=e&&a+t>=e}function $8e(e,t,a){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Ll(e){return e*($n/180)}function R8e(e){return e*(180/$n)}function z8(e){if(!wi(e))return;let t=1,a=0;for(;Math.round(e*t)/t!==e;)t*=10,a++;return a}function SJ(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.sqrt(a*a+s*s);let i=Math.atan2(s,a);return i<-.5*$n&&(i+=Ca),{angle:i,distance:r}}function eL(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function z8e(e,t){return(e-t+P8e)%Ca-$n}function zi(e){return(e%Ca+Ca)%Ca}function Yp(e,t,a,s){const r=zi(e),i=zi(t),o=zi(a),l=zi(i-r),c=zi(o-r),d=zi(r-i),u=zi(r-o);return r===i||r===o||s&&i===o||l>c&&d<u}function Ms(e,t,a){return Math.max(t,Math.min(a,e))}function F8e(e){return Ms(e,-32768,32767)}function td(e,t,a,s=1e-6){return e>=Math.min(t,a)-s&&e<=Math.max(t,a)+s}function t3(e,t,a){a=a||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,a(i)?r=i:s=i;return{lo:r,hi:s}}const gu=(e,t,a,s)=>t3(e,a,s?r=>{const i=e[r][t];return i<a||i===a&&e[r+1][t]===a}:r=>e[r][t]<a),U8e=(e,t,a)=>t3(e,a,s=>e[s][t]>=a);function B8e(e,t,a){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>a;)r--;return s>0||r<e.length?e.slice(s,r):e}const _J=["push","pop","shift","splice","unshift"];function H8e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),_J.forEach(a=>{const s="_onData"+e3(a),r=e[a];Object.defineProperty(e,a,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function F8(e,t){const a=e._chartjs;if(!a)return;const s=a.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(_J.forEach(i=>{delete e[i]}),delete e._chartjs)}function AJ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const TJ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function EJ(e,t){let a=[],s=!1;return function(...r){a=r,s||(s=!0,TJ.call(window,()=>{s=!1,e.apply(t,a)}))}}function q8e(e,t){let a;return function(...s){return t?(clearTimeout(a),a=setTimeout(e,t,s)):e.apply(this,s),t}}const n3=e=>e==="start"?"left":e==="end"?"right":"center",Ls=(e,t,a)=>e==="start"?t:e==="end"?a:(t+a)/2,G8e=(e,t,a,s)=>e===(s?"left":"right")?a:e==="center"?(t+a)/2:t;function W8e(e,t,a){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:x,maxDefined:y}=o.getUserBounds();if(x){if(r=Math.min(gu(c,u,f).lo,a?s:gu(t,u,o.getPixelForValue(f)).lo),d){const N=c.slice(0,r+1).reverse().findIndex(v=>!En(v[l.axis]));r-=Math.max(0,N)}r=Ms(r,0,s-1)}if(y){let N=Math.max(gu(c,o.axis,p,!0).hi+1,a?0:gu(t,u,o.getPixelForValue(p),!0).hi+1);if(d){const v=c.slice(N-1).findIndex(j=>!En(j[l.axis]));N+=Math.max(0,v)}i=Ms(N,r,s)-r}else i=s-r}return{start:r,count:i}}function V8e(e){const{xScale:t,yScale:a,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==a.min||s.ymax!==a.max;return Object.assign(s,r),i}const Eb=e=>e===0||e===1,U8=(e,t,a)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ca/a)),B8=(e,t,a)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ca/a)+1,cp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*as)+1,easeOutSine:e=>Math.sin(e*as),easeInOutSine:e=>-.5*(Math.cos($n*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Eb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Eb(e)?e:U8(e,.075,.3),easeOutElastic:e=>Eb(e)?e:B8(e,.075,.3),easeInOutElastic(e){return Eb(e)?e:e<.5?.5*U8(e*2,.1125,.45):.5+.5*B8(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-cp.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?cp.easeInBounce(e*2)*.5:cp.easeOutBounce(e*2-1)*.5+.5};function a3(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function H8(e){return a3(e)?e:new qp(e)}function oT(e){return a3(e)?e:new qp(e).saturate(.5).darken(.1).hexString()}const Y8e=["x","y","borderWidth","radius","tension"],Q8e=["color","borderColor","backgroundColor"];function K8e(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Q8e},numbers:{type:"number",properties:Y8e}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function X8e(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const q8=new Map;function Z8e(e,t){t=t||{};const a=e+JSON.stringify(t);let s=q8.get(a);return s||(s=new Intl.NumberFormat(e,t),q8.set(a,s)),s}function s3(e,t,a){return Z8e(t,a).format(e)}const J8e={values(e){return ns(e)?e:""+e},numeric(e,t,a){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(a.length>1){const d=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=eBe(e,a)}const o=CJ(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),s3(e,s,c)}};function eBe(e,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e)),a}var kJ={formatters:J8e};function tBe(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kJ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Wu=Object.create(null),tL=Object.create(null);function dp(e,t){if(!t)return e;const a=t.split(".");for(let s=0,r=a.length;s<r;++s){const i=a[s];e=e[i]||(e[i]=Object.create(null))}return e}function lT(e,t,a){return typeof t=="string"?Gp(dp(e,t),a):Gp(dp(e,""),t)}class nBe{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>oT(r.backgroundColor),this.hoverBorderColor=(s,r)=>oT(r.borderColor),this.hoverColor=(s,r)=>oT(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return lT(this,t,a)}get(t){return dp(this,t)}describe(t,a){return lT(tL,t,a)}override(t,a){return lT(Wu,t,a)}route(t,a,s,r){const i=dp(this,t),o=dp(this,s),l="_"+a;Object.defineProperties(i,{[l]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[l],d=o[r];return vn(c)?Object.assign({},d,c):on(c,d)},set(c){this[l]=c}}})}apply(t){t.forEach(a=>a(this))}}var La=new nBe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[K8e,X8e,tBe]);function aBe(e){return!e||En(e.size)||En(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function G8(e,t,a,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>s&&(s=i),s}function Yd(e,t,a){const s=e.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((t-r)*s)/s+r}function W8(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function nL(e,t,a,s){LJ(e,t,a,s,null)}function LJ(e,t,a,s,r){let i,o,l,c,d,u,f,p;const x=t.pointStyle,y=t.rotation,N=t.radius;let v=(y||0)*D8e;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(a,s),e.rotate(v),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(N)||N<=0)){switch(e.beginPath(),x){default:r?e.ellipse(a,s,r/2,N,0,0,Ca):e.arc(a,s,N,0,Ca),e.closePath();break;case"triangle":u=r?r/2:N,e.moveTo(a+Math.sin(v)*u,s-Math.cos(v)*N),v+=$8,e.lineTo(a+Math.sin(v)*u,s-Math.cos(v)*N),v+=$8,e.lineTo(a+Math.sin(v)*u,s-Math.cos(v)*N),e.closePath();break;case"rectRounded":d=N*.516,c=N-d,o=Math.cos(v+Vd)*c,f=Math.cos(v+Vd)*(r?r/2-d:c),l=Math.sin(v+Vd)*c,p=Math.sin(v+Vd)*(r?r/2-d:c),e.arc(a-f,s-l,d,v-$n,v-as),e.arc(a+p,s-o,d,v-as,v),e.arc(a+f,s+l,d,v,v+as),e.arc(a-p,s+o,d,v+as,v+$n),e.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*N,u=r?r/2:c,e.rect(a-u,s-c,2*u,2*c);break}v+=Vd;case"rectRot":f=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+p,s-o),e.lineTo(a+f,s+l),e.lineTo(a-p,s+o),e.closePath();break;case"crossRot":v+=Vd;case"cross":f=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"star":f=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o),v+=Vd,f=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"line":o=r?r/2:Math.cos(v)*N,l=Math.sin(v)*N,e.moveTo(a-o,s-l),e.lineTo(a+o,s+l);break;case"dash":e.moveTo(a,s),e.lineTo(a+Math.cos(v)*(r?r/2:N),s+Math.sin(v)*N);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Qp(e,t,a){return a=a||.5,!t||e&&e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a}function r3(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function i3(e){e.restore()}function sBe(e,t,a,s,r){if(!t)return e.lineTo(a.x,a.y);if(r==="middle"){const i=(t.x+a.x)/2;e.lineTo(i,t.y),e.lineTo(i,a.y)}else r==="after"!=!!s?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}function rBe(e,t,a,s){if(!t)return e.lineTo(a.x,a.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function iBe(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),En(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function oBe(e,t,a,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,d=a+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(l,u),e.stroke()}}function lBe(e,t){const a=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=a}function Kp(e,t,a,s,r,i={}){const o=ns(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=r.string,iBe(e,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&lBe(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),En(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,a,s,i.maxWidth)),e.fillText(d,a,s,i.maxWidth),oBe(e,a,s,d,i),s+=Number(r.lineHeight);e.restore()}function Rw(e,t){const{x:a,y:s,w:r,h:i,radius:o}=t;e.arc(a+o.topLeft,s+o.topLeft,o.topLeft,1.5*$n,$n,!0),e.lineTo(a,s+i-o.bottomLeft),e.arc(a+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,$n,as,!0),e.lineTo(a+r-o.bottomRight,s+i),e.arc(a+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,as,0,!0),e.lineTo(a+r,s+o.topRight),e.arc(a+r-o.topRight,s+o.topRight,o.topRight,0,-as,!0),e.lineTo(a+o.topLeft,s)}const cBe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,dBe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function uBe(e,t){const a=(""+e).match(cBe);if(!a||a[1]==="normal")return t*1.2;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return t*e}const mBe=e=>+e||0;function o3(e,t){const a={},s=vn(t),r=s?Object.keys(t):t,i=vn(e)?s?o=>on(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)a[o]=mBe(i(o));return a}function PJ(e){return o3(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Nf(e){return o3(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ni(e){const t=PJ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Is(e,t){e=e||{},t=t||La.font;let a=on(e.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let s=on(e.style,t.style);s&&!(""+s).match(dBe)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:on(e.family,t.family),lineHeight:uBe(on(e.lineHeight,t.lineHeight),a),size:a,style:s,weight:on(e.weight,t.weight),string:""};return r.string=aBe(r),r}function kb(e,t,a,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function fBe(e,t,a){const{min:s,max:r}=e,i=NJ(t,(r-s)/2),o=(l,c)=>a&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function im(e,t){return Object.assign(Object.create(e),t)}function l3(e,t=[""],a,s,r=()=>e[0]){const i=a||e;typeof s>"u"&&(s=IJ("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>l3([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return OJ(l,c,()=>wBe(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return Y8(l).includes(c)},ownKeys(l){return Y8(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Hf(e,t,a,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:a,_stack:new Set,_descriptors:DJ(e,s),setContext:i=>Hf(e,i,a,s),override:i=>Hf(e.override(i),t,a,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return OJ(i,o,()=>gBe(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function DJ(e,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:a,indexable:s,isScriptable:bd(a)?a:()=>a,isIndexable:bd(s)?s:()=>s}}const hBe=(e,t)=>e?e+e3(t):t,c3=(e,t)=>vn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function OJ(e,t,a){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=a();return e[t]=s,s}function gBe(e,t,a){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return bd(l)&&o.isScriptable(t)&&(l=pBe(t,l,e,a)),ns(l)&&l.length&&(l=xBe(t,l,e,o.isIndexable)),c3(t,l)&&(l=Hf(l,r,i&&i[t],o)),l}function pBe(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=a;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),c3(e,c)&&(c=d3(r._scopes,r,e,c)),c}function xBe(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=a;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(vn(t[0])){const c=t,d=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const f=d3(d,r,e,u);t.push(Hf(f,i,o&&o[e],l))}}return t}function MJ(e,t,a){return bd(e)?e(t,a):e}const yBe=(e,t)=>e===!0?t:typeof e=="string"?Gu(t,e):void 0;function bBe(e,t,a,s,r){for(const i of t){const o=yBe(a,i);if(o){e.add(o);const l=MJ(o._fallback,a,r);if(typeof l<"u"&&l!==a&&l!==s)return l}else if(o===!1&&typeof s<"u"&&a!==s)return null}return!1}function d3(e,t,a,s){const r=t._rootScopes,i=MJ(t._fallback,a,s),o=[...e,...r],l=new Set;l.add(s);let c=V8(l,o,a,i||a,s);return c===null||typeof i<"u"&&i!==a&&(c=V8(l,o,i,c,s),c===null)?!1:l3(Array.from(l),[""],r,i,()=>vBe(t,a,s))}function V8(e,t,a,s,r){for(;a;)a=bBe(e,t,a,s,r);return a}function vBe(e,t,a){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return ns(r)&&vn(a)?a:r||{}}function wBe(e,t,a,s){let r;for(const i of t)if(r=IJ(hBe(i,e),a),typeof r<"u")return c3(e,r)?d3(a,s,e,r):r}function IJ(e,t){for(const a of t){if(!a)continue;const s=a[e];if(typeof s<"u")return s}}function Y8(e){let t=e._keys;return t||(t=e._keys=NBe(e._scopes)),t}function NBe(e){const t=new Set;for(const a of e)for(const s of Object.keys(a).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const jBe=Number.EPSILON||1e-14,qf=(e,t)=>t<e.length&&!e[t].skip&&e[t],$J=e=>e==="x"?"y":"x";function CBe(e,t,a,s){const r=e.skip?t:e,i=t,o=a.skip?t:a,l=eL(i,r),c=eL(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const f=s*d,p=s*u;return{previous:{x:i.x-f*(o.x-r.x),y:i.y-f*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function SBe(e,t,a){const s=e.length;let r,i,o,l,c,d=qf(e,0);for(let u=0;u<s-1;++u)if(c=d,d=qf(e,u+1),!(!c||!d)){if(lp(t[u],0,jBe)){a[u]=a[u+1]=0;continue}r=a[u]/t[u],i=a[u+1]/t[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),a[u]=r*o*t[u],a[u+1]=i*o*t[u])}}function _Be(e,t,a="x"){const s=$J(a),r=e.length;let i,o,l,c=qf(e,0);for(let d=0;d<r;++d){if(o=l,l=c,c=qf(e,d+1),!l)continue;const u=l[a],f=l[s];o&&(i=(u-o[a])/3,l[`cp1${a}`]=u-i,l[`cp1${s}`]=f-i*t[d]),c&&(i=(c[a]-u)/3,l[`cp2${a}`]=u+i,l[`cp2${s}`]=f+i*t[d])}}function ABe(e,t="x"){const a=$J(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,l,c,d=qf(e,0);for(o=0;o<s;++o)if(l=c,c=d,d=qf(e,o+1),!!c){if(d){const u=d[t]-c[t];r[o]=u!==0?(d[a]-c[a])/u:0}i[o]=l?d?Mo(r[o-1])!==Mo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}SBe(e,r,i),_Be(e,i,t)}function Lb(e,t,a){return Math.max(Math.min(e,a),t)}function TBe(e,t){let a,s,r,i,o,l=Qp(e[0],t);for(a=0,s=e.length;a<s;++a)o=i,i=l,l=a<s-1&&Qp(e[a+1],t),i&&(r=e[a],o&&(r.cp1x=Lb(r.cp1x,t.left,t.right),r.cp1y=Lb(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=Lb(r.cp2x,t.left,t.right),r.cp2y=Lb(r.cp2y,t.top,t.bottom)))}function EBe(e,t,a,s,r){let i,o,l,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")ABe(e,r);else{let d=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=CBe(d,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}t.capBezierPoints&&TBe(e,a)}function u3(){return typeof window<"u"&&typeof document<"u"}function m3(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function zw(e,t,a){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[a])):s=e,s}const y1=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function kBe(e,t){return y1(e).getPropertyValue(t)}const LBe=["top","right","bottom","left"];function Cu(e,t,a){const s={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=LBe[r];s[i]=parseFloat(e[t+"-"+i+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const PBe=(e,t,a)=>(e>0||t>0)&&(!a||!a.shadowRoot);function DBe(e,t){const a=e.touches,s=a&&a.length?a[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(PBe(r,i,e.target))l=r,c=i;else{const d=t.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function nu(e,t){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:s}=t,r=y1(a),i=r.boxSizing==="border-box",o=Cu(r,"padding"),l=Cu(r,"border","width"),{x:c,y:d,box:u}=DBe(e,a),f=o.left+(u&&l.left),p=o.top+(u&&l.top);let{width:x,height:y}=t;return i&&(x-=o.width+l.width,y-=o.height+l.height),{x:Math.round((c-f)/x*a.width/s),y:Math.round((d-p)/y*a.height/s)}}function OBe(e,t,a){let s,r;if(t===void 0||a===void 0){const i=e&&m3(e);if(!i)t=e.clientWidth,a=e.clientHeight;else{const o=i.getBoundingClientRect(),l=y1(i),c=Cu(l,"border","width"),d=Cu(l,"padding");t=o.width-d.width-c.width,a=o.height-d.height-c.height,s=zw(l.maxWidth,i,"clientWidth"),r=zw(l.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:s||$w,maxHeight:r||$w}}const nd=e=>Math.round(e*10)/10;function MBe(e,t,a,s){const r=y1(e),i=Cu(r,"margin"),o=zw(r.maxWidth,e,"clientWidth")||$w,l=zw(r.maxHeight,e,"clientHeight")||$w,c=OBe(e,t,a);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const p=Cu(r,"border","width"),x=Cu(r,"padding");d-=x.width+p.width,u-=x.height+p.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=nd(Math.min(d,o,c.maxWidth)),u=nd(Math.min(u,l,c.maxHeight)),d&&!u&&(u=nd(d/2)),(t!==void 0||a!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=nd(Math.floor(u*s))),{width:d,height:u}}function Q8(e,t,a){const s=t||1,r=nd(e.height*s),i=nd(e.width*s);e.height=nd(e.height),e.width=nd(e.width);const o=e.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const IBe=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};u3()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function K8(e,t){const a=kBe(e,t),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function au(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}}function $Be(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:s==="middle"?a<.5?e.y:t.y:s==="after"?a<1?e.y:t.y:a>0?t.y:e.y}}function RBe(e,t,a,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=au(e,r,a),l=au(r,i,a),c=au(i,t,a),d=au(o,l,a),u=au(l,c,a);return au(d,u,a)}const zBe=function(e,t){return{x(a){return e+e+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,s){return a-s},leftForLtr(a,s){return a-s}}},FBe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function jf(e,t,a){return e?zBe(t,a):FBe()}function RJ(e,t){let a,s;(t==="ltr"||t==="rtl")&&(a=e.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=s)}function zJ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function FJ(e){return e==="angle"?{between:Yp,compare:z8e,normalize:zi}:{between:td,compare:(t,a)=>t-a,normalize:t=>t}}function X8({start:e,end:t,count:a,loop:s,style:r}){return{start:e%a,end:t%a,loop:s&&(t-e+1)%a===0,style:r}}function UBe(e,t,a){const{property:s,start:r,end:i}=a,{between:o,normalize:l}=FJ(s),c=t.length;let{start:d,end:u,loop:f}=e,p,x;if(f){for(d+=c,u+=c,p=0,x=c;p<x&&o(l(t[d%c][s]),r,i);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:e.style}}function BBe(e,t,a){if(!a)return[e];const{property:s,start:r,end:i}=a,o=t.length,{compare:l,between:c,normalize:d}=FJ(s),{start:u,end:f,loop:p,style:x}=UBe(e,t,a),y=[];let N=!1,v=null,j,w,S;const A=()=>c(r,S,j)&&l(r,S)!==0,k=()=>l(i,j)===0||c(i,S,j),_=()=>N||A(),L=()=>!N||k();for(let T=u,M=u;T<=f;++T)w=t[T%o],!w.skip&&(j=d(w[s]),j!==S&&(N=c(j,r,i),v===null&&_()&&(v=l(j,r)===0?T:M),v!==null&&L()&&(y.push(X8({start:v,end:T,loop:p,count:o,style:x})),v=null),M=T,S=j));return v!==null&&y.push(X8({start:v,end:f,loop:p,count:o,style:x})),y}function HBe(e,t){const a=[],s=e.segments;for(let r=0;r<s.length;r++){const i=BBe(s[r],e.points,t);i.length&&a.push(...i)}return a}function qBe(e,t,a,s){let r=0,i=t-1;if(a&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,a&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function GBe(e,t,a,s){const r=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=a;++c){const d=e[c%r];d.skip||d.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=o=d.stop?c:null):(o=c,l.skip&&(t=c)),l=d}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function WBe(e,t){const a=e.points,s=e.options.spanGaps,r=a.length;if(!r)return[];const i=!!e._loop,{start:o,end:l}=qBe(a,r,i,s);if(s===!0)return Z8(e,[{start:o,end:l,loop:i}],a,t);const c=l<o?l+r:l,d=!!e._fullLoop&&o===0&&l===r-1;return Z8(e,GBe(a,o,c,d),a,t)}function Z8(e,t,a,s){return!s||!s.setContext||!a?t:VBe(e,t,a,s)}function VBe(e,t,a,s){const r=e._chart.getContext(),i=J8(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=a.length,d=[];let u=i,f=t[0].start,p=f;function x(y,N,v,j){const w=l?-1:1;if(y!==N){for(y+=c;a[y%c].skip;)y-=w;for(;a[N%c].skip;)N+=w;y%c!==N%c&&(d.push({start:y%c,end:N%c,loop:v,style:j}),u=j,f=N%c)}}for(const y of t){f=l?f:y.start;let N=a[f%c],v;for(p=f+1;p<=y.end;p++){const j=a[p%c];v=J8(s.setContext(im(r,{type:"segment",p0:N,p1:j,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),YBe(v,u)&&x(f,p-1,y.loop,u),N=j,u=v}f<p-1&&x(f,p-1,y.loop,u)}return d}function J8(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function YBe(e,t){if(!t)return!1;const a=[],s=function(r,i){return a3(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Pb(e,t,a){return e.options.clip?e[a]:t[a]}function QBe(e,t){const{xScale:a,yScale:s}=e;return a&&s?{left:Pb(a,t,"left"),right:Pb(a,t,"right"),top:Pb(s,t,"top"),bottom:Pb(s,t,"bottom")}:t}function KBe(e,t){const a=t._clip;if(a.disabled)return!1;const s=QBe(t,e.chartArea);return{left:a.left===!1?0:s.left-(a.left===!0?0:a.left),right:a.right===!1?e.width:s.right+(a.right===!0?0:a.right),top:a.top===!1?0:s.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?e.height:s.bottom+(a.bottom===!0?0:a.bottom)}}class XBe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,s,r){const i=a.listeners[r],o=a.duration;i.forEach(l=>l({chart:t,initial:a.initial,numSteps:o,currentStep:Math.min(s-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=TJ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let s=a.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,s)),s}listen(t,a,s){this._getAnims(t).listeners[a].push(s)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const s=a.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Nl=new XBe;const eB="transparent",ZBe={boolean(e,t,a){return a>.5?t:e},color(e,t,a){const s=H8(e||eB),r=s.valid&&H8(t||eB);return r&&r.valid?r.mix(s,a).hexString():t},number(e,t,a){return e+(t-e)*a}};class JBe{constructor(t,a,s,r){const i=a[s];r=kb([t.to,r,i,t.from]);const o=kb([t.from,i,r]);this._active=!0,this._fn=t.fn||ZBe[t.type||typeof o],this._easing=cp[t.easing]||cp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,a,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=kb([t.to,a,r,t.from]),this._from=kb([t.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||a<s),!this._active){this._target[r]=l,this._notify(!0);return}if(a<0){this._target[r]=i;return}c=a/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,s)=>{t.push({res:a,rej:s})})}_notify(t){const a=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][a]()}}class UJ{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!vn(t))return;const a=Object.keys(La.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!vn(i))return;const o={};for(const l of a)o[l]=i[l];(ns(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,a){const s=a.options,r=tHe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&eHe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,a){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(a),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,a));continue}const u=a[d];let f=i[d];const p=s.get(d);if(f)if(p&&f.active()){f.update(p,u,l);continue}else f.cancel();if(!p||!p.duration){t[d]=u;continue}i[d]=f=new JBe(p,t,d,u),r.push(f)}return r}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const s=this._createAnimations(t,a);if(s.length)return Nl.add(this._chart,s),!0}}function eHe(e,t){const a=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function tHe(e,t){if(!t)return;let a=e.options;if(!a){e.options=t;return}return a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function tB(e,t){const a=e&&e.options||{},s=a.reverse,r=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function nHe(e,t,a){if(a===!1)return!1;const s=tB(e,a),r=tB(t,a);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function aHe(e){let t,a,s,r;return vn(e)?(t=e.top,a=e.right,s=e.bottom,r=e.left):t=a=s=r=e,{top:t,right:a,bottom:s,left:r,disabled:e===!1}}function BJ(e,t){const a=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)a.push(s[r].index);return a}function nB(e,t,a,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,d;if(t===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===a){if(u=!0,s.all)continue;break}d=e.values[c],wi(d)&&(i||t===0||Mo(t)===Mo(d))&&(t+=d)}return!u&&!s.all?0:t}function sHe(e,t){const{iScale:a,vScale:s}=t,r=a.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:e[u]};return l}function cT(e,t){const a=e&&e.options.stacked;return a||a===void 0&&t.stack!==void 0}function rHe(e,t,a){return`${e.id}.${t.id}.${a.stack||a.type}`}function iHe(e){const{min:t,max:a,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function oHe(e,t,a){const s=e[t]||(e[t]={});return s[a]||(s[a]={})}function aB(e,t,a,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function sB(e,t){const{chart:a,_cachedMeta:s}=e,r=a._stacks||(a._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,d=o.axis,u=rHe(i,o,s),f=t.length;let p;for(let x=0;x<f;++x){const y=t[x],{[c]:N,[d]:v}=y,j=y._stacks||(y._stacks={});p=j[d]=oHe(r,u,N),p[l]=v,p._top=aB(p,o,!0,s.type),p._bottom=aB(p,o,!1,s.type);const w=p._visualValues||(p._visualValues={});w[l]=v}}function dT(e,t){const a=e.scales;return Object.keys(a).filter(s=>a[s].axis===t).shift()}function lHe(e,t){return im(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function cHe(e,t,a){return im(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function Tg(e,t){const a=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][a]===void 0)return;delete i[s][a],i[s]._visualValues!==void 0&&i[s]._visualValues[a]!==void 0&&delete i[s]._visualValues[a]}}}const uT=e=>e==="reset"||e==="none",rB=(e,t)=>t?e:Object.assign({},e),dHe=(e,t,a)=>e&&!t.hidden&&t._stacked&&{keys:BJ(a,!0),values:null};class b1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=cT(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Tg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,s=this.getDataset(),r=(f,p,x,y)=>f==="x"?p:f==="r"?y:x,i=a.xAxisID=on(s.xAxisID,dT(t,"x")),o=a.yAxisID=on(s.yAxisID,dT(t,"y")),l=a.rAxisID=on(s.rAxisID,dT(t,"r")),c=a.indexAxis,d=a.iAxisID=r(c,i,o,l),u=a.vAxisID=r(c,o,i,l);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(l),a.iScale=this.getScaleForId(d),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&F8(this._data,this),t._stacked&&Tg(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),s=this._data;if(vn(a)){const r=this._cachedMeta;this._data=sHe(a,r)}else if(s!==a){if(s){F8(s,this);const r=this._cachedMeta;Tg(r),r._parsed=[]}a&&Object.isExtensible(a)&&H8e(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=cT(a.vScale,a),a.stack!==s.stack&&(r=!0,Tg(a),a.stack=s.stack),this._resyncElements(t),(r||i!==a._stacked)&&(sB(this,a._parsed),a._stacked=cT(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&a===r.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,f,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{ns(r[t])?p=this.parseArrayData(s,r,t,a):vn(r[t])?p=this.parseObjectData(s,r,t,a):p=this.parsePrimitiveData(s,r,t,a);const x=()=>f[l]===null||d&&f[l]<d[l];for(u=0;u<a;++u)s._parsed[u+t]=f=p[u],c&&(x()&&(c=!1),d=f);s._sorted=c}o&&sB(this,p)}parsePrimitiveData(t,a,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,f=new Array(r);let p,x,y;for(p=0,x=r;p<x;++p)y=p+s,f[p]={[l]:u||i.parse(d[y],y),[c]:o.parse(a[y],y)};return f}parseArrayData(t,a,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,d,u,f;for(c=0,d=r;c<d;++c)u=c+s,f=a[u],l[c]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return l}parseObjectData(t,a,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,f,p,x;for(u=0,f=r;u<f;++u)p=u+s,x=a[p],d[u]={x:i.parse(Gu(x,l),p),y:o.parse(Gu(x,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,s){const r=this.chart,i=this._cachedMeta,o=a[t.axis],l={keys:BJ(r,!0),values:a._stacks[t.axis]._visualValues};return nB(l,o,i.index,{mode:s})}updateRangeFromParsed(t,a,s,r){const i=s[a.axis];let o=i===null?NaN:i;const l=r&&s._stacks[a.axis];r&&l&&(r.values=l,o=nB(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,a){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=dHe(a,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=iHe(l);let p,x;function y(){x=r[p];const N=x[l.axis];return!wi(x[t.axis])||u>N||f<N}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(d,t,x,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(d,t,x,c);break}}return d}getAllParsedValues(t){const a=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=a.length;r<i;++r)o=a[r][t.axis],wi(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,s=a.iScale,r=a.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=aHe(on(this.options.clip,nHe(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,s=this._cachedMeta,r=s.data||[],i=a.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,l,c),u=l;u<l+c;++u){const f=r[u];f.hidden||(f.active&&d?o.push(f):f.draw(t,i))}for(u=0;u<o.length;++u)o[u].draw(t,i)}getStyle(t,a){const s=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,a,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=cHe(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=lHe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",s){const r=a==="active",i=this._cachedDataOpts,o=t+"-"+a,l=i[o],c=this.enableOptionSharing&&Wp(s);if(l)return rB(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),u),x=Object.keys(La.elements[t]),y=()=>this.getContext(s,r,a),N=d.resolveNamedOptions(p,x,y,f);return N.$shared&&(N.$shared=c,i[o]=Object.freeze(rB(N,c))),N}_resolveAnimations(t,a,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${a}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,a),p=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(p,this.getContext(t,s,a))}const d=new UJ(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||uT(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const s=this.resolveDataElementOptions(t,a),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,s),{sharedOptions:i,includeOptions:o}}updateElement(t,a,s,r){uT(r)?Object.assign(t,s):this._resolveAnimations(a,r).update(t,s)}updateSharedOptions(t,a,s){t&&!uT(a)&&this._resolveAnimations(void 0,a).update(t,s)}_setStyle(t,a,s,r){t.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,a,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=s.length,i=a.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,a,s=!0){const r=this._cachedMeta,i=r.data,o=t+a;let l;const c=d=>{for(d.length+=a,l=d.length-1;l>=o;l--)d[l]=d[l-a]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,a),s&&this.updateElements(i,t,a,"reset")}updateElements(t,a,s,r){}_removeElements(t,a){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,a);s._stacked&&Tg(s,r)}s.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,s,r]=t;this[a](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function uHe(e,t){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=a.length;r<i;r++)s=s.concat(a[r].controller.getAllParsedValues(e));e._cache.$bar=AJ(s.sort((r,i)=>r-i))}return e._cache.$bar}function mHe(e){const t=e.iScale,a=uHe(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Wp(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=a.length;r<i;++r)o=t.getPixelForValue(a[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function fHe(e,t,a,s){const r=a.barThickness;let i,o;return En(r)?(i=t.min*a.categoryPercentage,o=a.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function hHe(e,t,a,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=a.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:a.barPercentage,start:d}}function gHe(e,t,a,s){const r=a.parse(e[0],s),i=a.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),t[a.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function HJ(e,t,a,s){return ns(e)?gHe(e,t,a,s):t[a.axis]=a.parse(e,s),t}function iB(e,t,a,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let d,u,f,p;for(d=a,u=a+s;d<u;++d)p=t[d],f={},f[r.axis]=l||r.parse(o[d],d),c.push(HJ(p,f,i,d));return c}function mT(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function pHe(e,t,a){return e!==0?Mo(e):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function xHe(e){let t,a,s,r,i;return e.horizontal?(t=e.base>e.x,a="left",s="right"):(t=e.base<e.y,a="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:a,end:s,reverse:t,top:r,bottom:i}}function yHe(e,t,a,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=xHe(e);r==="middle"&&a&&(e.enableBorderRadius=!0,(a._top||0)===s?r=d:(a._bottom||0)===s?r=u:(i[oB(u,o,l,c)]=!0,r=d)),i[oB(r,o,l,c)]=!0,e.borderSkipped=i}function oB(e,t,a,s){return s?(e=bHe(e,t,a),e=lB(e,a,t)):e=lB(e,t,a),e}function bHe(e,t,a){return e===t?a:e===a?t:e}function lB(e,t,a){return e==="start"?t:e==="end"?a:e}function vHe(e,{inflateAmount:t},a){e.inflateAmount=t==="auto"?a===1?.33:0:t}class wHe extends b1{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,a,s,r){return iB(t,a,s,r)}parseArrayData(t,a,s,r){return iB(t,a,s,r)}parseObjectData(t,a,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,f=[];let p,x,y,N;for(p=s,x=s+r;p<x;++p)N=a[p],y={},y[i.axis]=i.parse(Gu(N,d),p),f.push(HJ(Gu(N,u),y,o,p));return f}updateRangeFromParsed(t,a,s,r){super.updateRangeFromParsed(t,a,s,r);const i=s._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:s,vScale:r}=a,i=this.getParsed(t),o=i._custom,l=mT(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(a,r);for(let x=a;x<a+s;x++){const y=this.getParsed(x),N=i||En(y[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),v=this._calculateBarIndexPixels(x,u),j=(y._stacks||{})[l.axis],w={horizontal:d,base:N.base,enableBorderRadius:!j||mT(y._custom)||o===j._top||o===j._bottom,x:d?N.head:v.center,y:d?v.center:N.head,height:d?v.size:Math.abs(N.size),width:d?Math.abs(N.size):v.size};p&&(w.options=f||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=w.options||t[x].options;yHe(w,S,j,o),vHe(w,S,u.ratio),this.updateElement(t[x],x,w,r)}}_getStacks(t,a){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(a),c=l&&l[s.axis],d=u=>{const f=u._parsed.find(x=>x[s.axis]===c),p=f&&f[u.vScale.axis];if(En(p)||isNaN(p))return!0};for(const u of r)if(!(a!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[on(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,s){const r=this._getStacks(t,s),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,s=a.iScale,r=[];let i,o;for(i=0,o=a.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||mHe(a),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),d=c._custom,u=mT(d);let f=c[a.axis],p=0,x=s?this.applyStack(a,c,s):f,y,N;x!==f&&(p=x-f,x=f),u&&(f=d.barStart,x=d.barEnd-d.barStart,f!==0&&Mo(f)!==Mo(d.barEnd)&&(p=0),p+=f);const v=!En(i)&&!u?i:p;let j=a.getPixelForValue(v);if(this.chart.getDataVisibility(t)?y=a.getPixelForValue(p+x):y=j,N=y-j,Math.abs(N)<o){N=pHe(N,a,l)*o,f===l&&(j-=N/2);const w=a.getPixelForDecimal(0),S=a.getPixelForDecimal(1),A=Math.min(w,S),k=Math.max(w,S);j=Math.max(Math.min(j,k),A),y=j+N,s&&!u&&(c._stacks[a.axis]._visualValues[r]=a.getValueForPixel(y)-a.getValueForPixel(j))}if(j===a.getPixelForValue(l)){const w=Mo(N)*a.getLineWidthForValue(l)/2;j+=w,N-=w}return{size:N,base:j,head:y,center:y+N/2}}_calculateBarIndexPixels(t,a){const s=a.scale,r=this.options,i=r.skipNull,o=on(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(a.grouped){const u=i?this._getStackCount(t):a.stackCount,f=r.barThickness==="flex"?hHe(t,a,r,u*d):fHe(t,a,r,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(on(p,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;l=f.start+f.chunk*y+f.chunk/2,c=Math.min(o,f.chunk*f.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,a.min*a.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,a=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function NHe(e,t,a){let s=1,r=1,i=0,o=0;if(t<Ca){const l=e,c=l+t,d=Math.cos(l),u=Math.sin(l),f=Math.cos(c),p=Math.sin(c),x=(S,A,k)=>Yp(S,l,c,!0)?1:Math.max(A,A*a,k,k*a),y=(S,A,k)=>Yp(S,l,c,!0)?-1:Math.min(A,A*a,k,k*a),N=x(0,d,f),v=x(as,u,p),j=y($n,d,f),w=y($n+as,u,p);s=(N-j)/2,r=(v-w)/2,i=-(N+j)/2,o=-(v+w)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class jHe extends b1{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((c,d)=>{const f=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(l||f.borderRadius),index:d}}):[]}},onClick(t,a,s){s.chart.toggleDataVisibility(a.index),s.chart.update()}}}};constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(vn(s[t])){const{key:c="value"}=this._parsing;i=d=>+Gu(s[d],c)}let o,l;for(o=t,l=t+a;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return Ll(this.options.rotation-90)}_getCircumference(){return Ll(this.options.circumference)}_getRotationExtents(){let t=Ca,a=-Ca;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),a=Math.max(a,i+o)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:s}=a,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(_8e(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:y,offsetY:N}=NHe(f,u,c),v=(s.width-o)/p,j=(s.height-o)/x,w=Math.max(Math.min(v,j)/2,0),S=NJ(this.options.radius,w),A=Math.max(S*c,0),k=(S-A)/this._getVisibleDatasetWeightTotal();this.offsetX=y*S,this.offsetY=N*S,r.total=this.calculateTotal(),this.outerRadius=S-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Ca)}updateElements(t,a,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,f=(l.top+l.bottom)/2,p=i&&d.animateScale,x=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:N,includeOptions:v}=this._getSharedOptions(a,r);let j=this._getRotation(),w;for(w=0;w<a;++w)j+=this._circumference(w,i);for(w=a;w<a+s;++w){const S=this._circumference(w,i),A=t[w],k={x:u+this.offsetX,y:f+this.offsetY,startAngle:j,endAngle:j+S,circumference:S,outerRadius:y,innerRadius:x};v&&(k.options=N||this.resolveDataElementOptions(w,A.active?"active":r)),j+=S,this.updateElement(A,w,k,r)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let s=0,r;for(r=0;r<a.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?Ca*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=s3(a._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(a+=this._getRingWeight(s));return a}_getRingWeight(t){return Math.max(on(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class CHe extends b1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=a,o=this.chart._animationsDisabled;let{start:l,count:c}=W8e(a,r,o);this._drawStart=l,this._drawCount=c,V8e(a)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},t),this.updateElements(r,l,c,t)}updateElements(t,a,s,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(a,r),p=o.axis,x=l.axis,{spanGaps:y,segment:N}=this.options,v=Vp(y)?y:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||i||r==="none",w=a+s,S=t.length;let A=a>0&&this.getParsed(a-1);for(let k=0;k<S;++k){const _=t[k],L=j?_:{};if(k<a||k>=w){L.skip=!0;continue}const T=this.getParsed(k),M=En(T[x]),R=L[p]=o.getPixelForValue(T[p],k),z=L[x]=i||M?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,T,c):T[x],k);L.skip=isNaN(R)||isNaN(z)||M,L.stop=k>0&&Math.abs(T[p]-A[p])>v,N&&(L.parsed=T,L.raw=d.data[k]),f&&(L.options=u||this.resolveDataElementOptions(k,_.active?"active":r)),j||this.updateElement(_,k,L,r),A=T}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,s=a.options&&a.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class SHe extends jHe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Qd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class f3{static override(t){Object.assign(f3.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Qd()}parse(){return Qd()}format(){return Qd()}add(){return Qd()}diff(){return Qd()}startOf(){return Qd()}endOf(){return Qd()}}var _He={_date:f3};function AHe(e,t,a,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const d=l._reversePixels?U8e:gu;if(s){if(r._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const p=d(i,t,a-f),x=d(i,t,a+f);return{lo:p.lo,hi:x.hi}}}}else{const u=d(i,t,a);if(c){const{vScale:f}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,u.lo+1).reverse().findIndex(N=>!En(N[f.axis]));u.lo-=Math.max(0,x);const y=p.slice(u.hi).findIndex(N=>!En(N[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:i.length-1}}function v1(e,t,a,s,r){const i=e.getSortedVisibleDatasetMetas(),o=a[t];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:f,hi:p}=AHe(i[l],t,o,r);for(let x=f;x<=p;++x){const y=u[x];y.skip||s(y,d,x)}}}function THe(e){const t=e.indexOf("x")!==-1,a=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=a?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function fT(e,t,a,s,r){const i=[];return!r&&!e.isPointInArea(t)||v1(e,a,t,function(l,c,d){!r&&!Qp(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function EHe(e,t,a,s){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=SJ(o,{x:t.x,y:t.y});Yp(f,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return v1(e,a,t,i),r}function kHe(e,t,a,s,r,i){let o=[];const l=THe(a);let c=Number.POSITIVE_INFINITY;function d(u,f,p){const x=u.inRange(t.x,t.y,r);if(s&&!x)return;const y=u.getCenterPoint(r);if(!(!!i||e.isPointInArea(y))&&!x)return;const v=l(t,y);v<c?(o=[{element:u,datasetIndex:f,index:p}],c=v):v===c&&o.push({element:u,datasetIndex:f,index:p})}return v1(e,a,t,d),o}function hT(e,t,a,s,r,i){return!i&&!e.isPointInArea(t)?[]:a==="r"&&!s?EHe(e,t,a,r):kHe(e,t,a,s,r,i)}function cB(e,t,a,s,r){const i=[],o=a==="x"?"inXRange":"inYRange";let l=!1;return v1(e,a,t,(c,d,u)=>{c[o]&&c[o](t[a],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var LHe={modes:{index(e,t,a,s){const r=nu(t,e),i=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?fT(e,r,i,s,o):hT(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,a,s){const r=nu(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?fT(e,r,i,s,o):hT(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=e.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(e,t,a,s){const r=nu(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return fT(e,r,i,s,o)},nearest(e,t,a,s){const r=nu(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return hT(e,r,i,a.intersect,s,o)},x(e,t,a,s){const r=nu(t,e);return cB(e,r,"x",a.intersect,s)},y(e,t,a,s){const r=nu(t,e);return cB(e,r,"y",a.intersect,s)}}};const qJ=["left","top","right","bottom"];function Eg(e,t){return e.filter(a=>a.pos===t)}function dB(e,t){return e.filter(a=>qJ.indexOf(a.pos)===-1&&a.box.axis===t)}function kg(e,t){return e.sort((a,s)=>{const r=t?s:a,i=t?a:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function PHe(e){const t=[];let a,s,r,i,o,l;for(a=0,s=(e||[]).length;a<s;++a)r=e[a],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function DHe(e){const t={};for(const a of e){const{stack:s,pos:r,stackWeight:i}=a;if(!s||!qJ.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function OHe(e,t){const a=DHe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,d=a[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=u?u*r:c&&t.availableHeight)}return a}function MHe(e){const t=PHe(e),a=kg(t.filter(d=>d.box.fullSize),!0),s=kg(Eg(t,"left"),!0),r=kg(Eg(t,"right")),i=kg(Eg(t,"top"),!0),o=kg(Eg(t,"bottom")),l=dB(t,"x"),c=dB(t,"y");return{fullSize:a,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Eg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function uB(e,t,a,s){return Math.max(e[a],t[a])+Math.max(e[s],t[s])}function GJ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function IHe(e,t,a,s){const{pos:r,box:i}=a,o=e.maxPadding;if(!vn(r)){a.size&&(e[r]-=a.size);const f=s[a.stack]||{size:0,count:1};f.size=Math.max(f.size,a.horizontal?i.height:i.width),a.size=f.size/f.count,e[r]+=a.size}i.getPadding&&GJ(o,i.getPadding());const l=Math.max(0,t.outerWidth-uB(o,e,"left","right")),c=Math.max(0,t.outerHeight-uB(o,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function $He(e){const t=e.maxPadding;function a(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function RHe(e,t){const a=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],a[o])}),i}return s(e?["left","right"]:["top","bottom"])}function Qg(e,t,a,s){const r=[];let i,o,l,c,d,u;for(i=0,o=e.length,d=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,RHe(l.horizontal,t));const{same:f,other:p}=IHe(t,a,l,s);d|=f&&r.length,u=u||p,c.fullSize||r.push(l)}return d&&Qg(r,t,a,s)||u}function Db(e,t,a,s,r){e.top=a,e.left=t,e.right=t+s,e.bottom=a+r,e.width=s,e.height=r}function mB(e,t,a,s){const r=a.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,d=s[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const f=t.w*u,p=d.size||c.height;Wp(d.start)&&(o=d.start),c.fullSize?Db(c,r.left,o,a.outerWidth-r.right-r.left,p):Db(c,t.left+d.placed,o,f,p),d.start=o,d.placed+=f,o=c.bottom}else{const f=t.h*u,p=d.size||c.width;Wp(d.start)&&(i=d.start),c.fullSize?Db(c,i,r.top,p,a.outerHeight-r.bottom-r.top):Db(c,i,t.top+d.placed,p,f),d.start=i,d.placed+=f,i=c.right}}t.x=i,t.y=o}var fi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},e.boxes.push(t)},removeBox(e,t){const a=e.boxes?e.boxes.indexOf(t):-1;a!==-1&&e.boxes.splice(a,1)},configure(e,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(e,t,a,s){if(!e)return;const r=Ni(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(a-r.height,0),l=MHe(e.boxes),c=l.vertical,d=l.horizontal;Mn(e.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const u=c.reduce((N,v)=>v.box.options&&v.box.options.display===!1?N:N+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},r);GJ(p,Ni(s));const x=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),y=OHe(c.concat(d),f);Qg(l.fullSize,x,f,y),Qg(c,x,f,y),Qg(d,x,f,y)&&Qg(c,x,f,y),$He(x),mB(l.leftAndTop,x,f,y),x.x+=x.w,x.y+=x.h,mB(l.rightAndBottom,x,f,y),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},Mn(l.chartArea,N=>{const v=N.box;Object.assign(v,e.chartArea),v.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class WJ{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,s){}removeEventListener(t,a,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,s,r){return a=Math.max(0,a||t.width),s=s||t.height,{width:a,height:Math.max(0,r?Math.floor(a/r):s)}}isAttached(t){return!0}updateConfig(t){}}class zHe extends WJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const dv="$chartjs",FHe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fB=e=>e===null||e==="";function UHe(e,t){const a=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[dv]={initial:{height:s,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",fB(r)){const i=K8(e,"width");i!==void 0&&(e.width=i)}if(fB(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=K8(e,"height");i!==void 0&&(e.height=i)}return e}const VJ=IBe?{passive:!0}:!1;function BHe(e,t,a){e&&e.addEventListener(t,a,VJ)}function HHe(e,t,a){e&&e.canvas&&e.canvas.removeEventListener(t,a,VJ)}function qHe(e,t){const a=FHe[e.type]||e.type,{x:s,y:r}=nu(e,t);return{type:a,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Fw(e,t){for(const a of e)if(a===t||a.contains(t))return!0}function GHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Fw(l.addedNodes,s),o=o&&!Fw(l.removedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function WHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Fw(l.removedNodes,s),o=o&&!Fw(l.addedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const Xp=new Map;let hB=0;function YJ(){const e=window.devicePixelRatio;e!==hB&&(hB=e,Xp.forEach((t,a)=>{a.currentDevicePixelRatio!==e&&t()}))}function VHe(e,t){Xp.size||window.addEventListener("resize",YJ),Xp.set(e,t)}function YHe(e){Xp.delete(e),Xp.size||window.removeEventListener("resize",YJ)}function QHe(e,t,a){const s=e.canvas,r=s&&m3(s);if(!r)return;const i=EJ((l,c)=>{const d=r.clientWidth;a(l,c),d<r.clientWidth&&a()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),VHe(e,i),o}function gT(e,t,a){a&&a.disconnect(),t==="resize"&&YHe(e)}function KHe(e,t,a){const s=e.canvas,r=EJ(i=>{e.ctx!==null&&a(qHe(i,e))},e);return BHe(s,t,r),r}class XHe extends WJ{acquireContext(t,a){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(UHe(t,a),s):null}releaseContext(t){const a=t.canvas;if(!a[dv])return!1;const s=a[dv].initial;["height","width"].forEach(i=>{const o=s[i];En(o)?a.removeAttribute(i):a.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[dv],!0}addEventListener(t,a,s){this.removeEventListener(t,a);const r=t.$proxies||(t.$proxies={}),o={attach:GHe,detach:WHe,resize:QHe}[a]||KHe;r[a]=o(t,a,s)}removeEventListener(t,a){const s=t.$proxies||(t.$proxies={}),r=s[a];if(!r)return;({attach:gT,detach:gT,resize:gT}[a]||HHe)(t,a,r),s[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,s,r){return MBe(t,a,s,r)}isAttached(t){const a=t&&m3(t);return!!(a&&a.isConnected)}}function ZHe(e){return!u3()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?zHe:XHe}let dc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}hasValue(){return Vp(this.x)&&Vp(this.y)}getProps(t,a){const s=this.$animations;if(!a||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function JHe(e,t){const a=e.options.ticks,s=e9e(e),r=Math.min(a.maxTicksLimit||s,s),i=a.major.enabled?n9e(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return a9e(t,d,i,o/r),d;const u=t9e(i,t,r);if(o>0){let f,p;const x=o>1?Math.round((c-l)/(o-1)):null;for(Ob(t,d,u,En(x)?0:l-x,l),f=0,p=o-1;f<p;f++)Ob(t,d,u,i[f],i[f+1]);return Ob(t,d,u,c,En(x)?t.length:c+x),d}return Ob(t,d,u),d}function e9e(e){const t=e.options.offset,a=e._tickSize(),s=e._length/a+(t?0:1),r=e._maxLength/a;return Math.floor(Math.min(s,r))}function t9e(e,t,a){const s=s9e(e),r=t.length/a;if(!s)return Math.max(r,1);const i=O8e(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function n9e(e){const t=[];let a,s;for(a=0,s=e.length;a<s;a++)e[a].major&&t.push(a);return t}function a9e(e,t,a,s){let r=0,i=a[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=a[r*s])}function Ob(e,t,a,s,r){const i=on(s,0),o=Math.min(on(r,e.length),e.length);let l=0,c,d,u;for(a=Math.ceil(a),r&&(c=r-s,a=c/Math.floor(c/a)),u=i;u<0;)l++,u=Math.round(i+l*a);for(d=Math.max(i,0);d<o;d++)d===u&&(t.push(e[d]),l++,u=Math.round(i+l*a))}function s9e(e){const t=e.length;let a,s;if(t<2)return!1;for(s=e[0],a=1;a<t;++a)if(e[a]-e[a-1]!==s)return!1;return s}const r9e=e=>e==="left"?"right":e==="right"?"left":e,gB=(e,t,a)=>t==="top"||t==="left"?e[t]+a:e[t]-a,pB=(e,t)=>Math.min(t||e,e);function xB(e,t){const a=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)a.push(e[Math.floor(i)]);return a}function i9e(e,t,a){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),d;if(!(a&&(s===1?d=Math.max(c-i,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(r-1))/2,c+=r<t?d:-d,c<i-l||c>o+l)))return c}function o9e(e,t){Mn(e,a=>{const s=a.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete a.data[s[i]];s.splice(0,r)}})}function Lg(e){return e.drawTicks?e.tickLength:0}function yB(e,t){if(!e.display)return 0;const a=Is(e.font,t),s=Ni(e.padding);return(ns(e.text)?e.text.length:1)*a.lineHeight+s.height}function l9e(e,t){return im(e,{scale:t,type:"scale"})}function c9e(e,t,a){return im(e,{tick:a,index:t,type:"tick"})}function d9e(e,t,a){let s=n3(e);return(a&&t!=="right"||!a&&t==="right")&&(s=r9e(s)),s}function u9e(e,t,a,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let f=0,p,x,y;const N=o-r,v=l-i;if(e.isHorizontal()){if(x=Ls(s,i,l),vn(a)){const j=Object.keys(a)[0],w=a[j];y=u[j].getPixelForValue(w)+N-t}else a==="center"?y=(d.bottom+d.top)/2+N-t:y=gB(e,a,t);p=l-i}else{if(vn(a)){const j=Object.keys(a)[0],w=a[j];x=u[j].getPixelForValue(w)-v+t}else a==="center"?x=(d.left+d.right)/2-v+t:x=gB(e,a,t);y=Ls(s,o,r),f=a==="left"?-as:as}return{titleX:x,titleY:y,maxWidth:p,rotation:f}}class yh extends dc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:s,_suggestedMax:r}=this;return t=ho(t,Number.POSITIVE_INFINITY),a=ho(a,Number.NEGATIVE_INFINITY),s=ho(s,Number.POSITIVE_INFINITY),r=ho(r,Number.NEGATIVE_INFINITY),{min:ho(t,s),max:ho(a,r),minDefined:wi(t),maxDefined:wi(a)}}getMinMax(t){let{min:a,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:a,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,t),r||(a=Math.min(a,o.min)),i||(s=Math.max(s,o.max));return a=i&&a>s?s:a,s=r&&a>s?a:s,{min:ho(a,ho(s,a)),max:ho(s,ho(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Jn(this.options.beforeUpdate,[this])}update(t,a,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=fBe(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?xB(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=JHe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,s;this.isHorizontal()?(a=this.left,s=this.right):(a=this.top,s=this.bottom,t=!t),this._startPixel=a,this._endPixel=s,this._reversePixels=t,this._length=s-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Jn(this.options.afterUpdate,[this])}beforeSetDimensions(){Jn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Jn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Jn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Jn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=Jn(a.callback,[i.value,s,t],this)}afterTickToLabelConversion(){Jn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Jn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,s=pB(this.ticks.length,t.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!a.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,x=Ms(this.chart.width-f,0,this.maxWidth);l=t.offset?this.maxWidth/s:x/(s-1),f+6>l&&(l=x/(s-(t.offset?.5:1)),c=this.maxHeight-Lg(t.grid)-a.padding-yB(t.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),o=R8e(Math.min(Math.asin(Ms((u.highest.height+6)/l,-1,1)),Math.asin(Ms(c/d,-1,1))-Math.asin(Ms(p/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Jn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Jn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=yB(r,a.options.font);if(l?(t.width=this.maxWidth,t.height=Lg(i)+c):(t.height=this.maxHeight,t.width=Lg(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:f,highest:p}=this._getLabelSizes(),x=s.padding*2,y=Ll(this.labelRotation),N=Math.cos(y),v=Math.sin(y);if(l){const j=s.mirror?0:v*f.width+N*p.height;t.height=Math.min(this.maxHeight,t.height+j+x)}else{const j=s.mirror?0:N*f.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+j+x)}this._calculatePadding(d,u,v,N)}}this._handleMargins(),l?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?d?(p=r*t.width,x=s*a.height):(p=s*t.height,x=r*a.width):i==="start"?x=a.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=a.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-f+o)*this.width/(this.width-f),0)}else{let u=a.height/2,f=t.height/2;i==="start"?(u=0,f=t.height):i==="end"&&(u=a.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Jn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,s;for(a=0,s=t.length;a<s;a++)En(t[a].label)&&(t.splice(a,1),s--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let s=this.ticks;a<s.length&&(s=xB(s,a)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(a/pB(a,s));let d=0,u=0,f,p,x,y,N,v,j,w,S,A,k;for(f=0;f<a;f+=c){if(y=t[f].label,N=this._resolveTickFontOptions(f),r.font=v=N.string,j=i[v]=i[v]||{data:{},gc:[]},w=N.lineHeight,S=A=0,!En(y)&&!ns(y))S=G8(r,j.data,j.gc,S,y),A=w;else if(ns(y))for(p=0,x=y.length;p<x;++p)k=y[p],!En(k)&&!ns(k)&&(S=G8(r,j.data,j.gc,S,k),A+=w);o.push(S),l.push(A),d=Math.max(S,d),u=Math.max(A,u)}o9e(i,a);const _=o.indexOf(d),L=l.indexOf(u),T=M=>({width:o[M]||0,height:l[M]||0});return{first:T(0),last:T(a-1),widest:T(_),highest:T(L),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return F8e(this._alignToPixels?Yd(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const s=a[t];return s.$context||(s.$context=c9e(this.getContext(),t,s))}return this.$context||(this.$context=l9e(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=Ll(this.labelRotation),s=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=Lg(i),x=[],y=l.setContext(this.getContext()),N=y.display?y.width:0,v=N/2,j=function(Q){return Yd(s,Q,N)};let w,S,A,k,_,L,T,M,R,z,O,I;if(o==="top")w=j(this.bottom),L=this.bottom-p,M=w-v,z=j(t.top)+v,I=t.bottom;else if(o==="bottom")w=j(this.top),z=t.top,I=j(t.bottom)-v,L=w+v,M=this.top+p;else if(o==="left")w=j(this.right),_=this.right-p,T=w-v,R=j(t.left)+v,O=t.right;else if(o==="right")w=j(this.left),R=t.left,O=j(t.right)-v,_=w+v,T=this.left+p;else if(a==="x"){if(o==="center")w=j((t.top+t.bottom)/2+.5);else if(vn(o)){const Q=Object.keys(o)[0],te=o[Q];w=j(this.chart.scales[Q].getPixelForValue(te))}z=t.top,I=t.bottom,L=w+v,M=L+p}else if(a==="y"){if(o==="center")w=j((t.left+t.right)/2);else if(vn(o)){const Q=Object.keys(o)[0],te=o[Q];w=j(this.chart.scales[Q].getPixelForValue(te))}_=w-v,T=_-p,R=t.left,O=t.right}const B=on(r.ticks.maxTicksLimit,f),ee=Math.max(1,Math.ceil(f/B));for(S=0;S<f;S+=ee){const Q=this.getContext(S),te=i.setContext(Q),W=l.setContext(Q),ae=te.lineWidth,Ee=te.color,se=W.dash||[],Y=W.dashOffset,pe=te.tickWidth,Se=te.tickColor,me=te.tickBorderDash||[],ye=te.tickBorderDashOffset;A=i9e(this,S,c),A!==void 0&&(k=Yd(s,A,ae),d?_=T=R=O=k:L=M=z=I=k,x.push({tx1:_,ty1:L,tx2:T,ty2:M,x1:R,y1:z,x2:O,y2:I,width:ae,color:Ee,borderDash:se,borderDashOffset:Y,tickWidth:pe,tickColor:Se,tickBorderDash:me,tickBorderDashOffset:ye}))}return this._ticksLength=f,this._borderValue=w,x}_computeLabelItems(t){const a=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=i,p=Lg(s.grid),x=p+u,y=f?-u:x,N=-Ll(this.labelRotation),v=[];let j,w,S,A,k,_,L,T,M,R,z,O,I="middle";if(r==="top")_=this.bottom-y,L=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+y,L=this._getXAxisLabelAlignment();else if(r==="left"){const ee=this._getYAxisLabelAlignment(p);L=ee.textAlign,k=ee.x}else if(r==="right"){const ee=this._getYAxisLabelAlignment(p);L=ee.textAlign,k=ee.x}else if(a==="x"){if(r==="center")_=(t.top+t.bottom)/2+x;else if(vn(r)){const ee=Object.keys(r)[0],Q=r[ee];_=this.chart.scales[ee].getPixelForValue(Q)+x}L=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")k=(t.left+t.right)/2-x;else if(vn(r)){const ee=Object.keys(r)[0],Q=r[ee];k=this.chart.scales[ee].getPixelForValue(Q)}L=this._getYAxisLabelAlignment(p).textAlign}a==="y"&&(c==="start"?I="top":c==="end"&&(I="bottom"));const B=this._getLabelSizes();for(j=0,w=l.length;j<w;++j){S=l[j],A=S.label;const ee=i.setContext(this.getContext(j));T=this.getPixelForTick(j)+i.labelOffset,M=this._resolveTickFontOptions(j),R=M.lineHeight,z=ns(A)?A.length:1;const Q=z/2,te=ee.color,W=ee.textStrokeColor,ae=ee.textStrokeWidth;let Ee=L;o?(k=T,L==="inner"&&(j===w-1?Ee=this.options.reverse?"left":"right":j===0?Ee=this.options.reverse?"right":"left":Ee="center"),r==="top"?d==="near"||N!==0?O=-z*R+R/2:d==="center"?O=-B.highest.height/2-Q*R+R:O=-B.highest.height+R/2:d==="near"||N!==0?O=R/2:d==="center"?O=B.highest.height/2-Q*R:O=B.highest.height-z*R,f&&(O*=-1),N!==0&&!ee.showLabelBackdrop&&(k+=R/2*Math.sin(N))):(_=T,O=(1-z)*R/2);let se;if(ee.showLabelBackdrop){const Y=Ni(ee.backdropPadding),pe=B.heights[j],Se=B.widths[j];let me=O-Y.top,ye=0-Y.left;switch(I){case"middle":me-=pe/2;break;case"bottom":me-=pe;break}switch(L){case"center":ye-=Se/2;break;case"right":ye-=Se;break;case"inner":j===w-1?ye-=Se:j>0&&(ye-=Se/2);break}se={left:ye,top:me,width:Se+Y.width,height:pe+Y.height,color:ee.backdropColor}}v.push({label:A,font:M,textOffset:O,options:{rotation:N,color:te,strokeColor:W,strokeWidth:ae,textAlign:Ee,textBaseline:I,translation:[k,_],backdrop:se}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-Ll(this.labelRotation))return t==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let d,u;return a==="left"?r?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):a==="right"?r?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:s,top:r,width:i,height:o}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const a=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(a.display)for(i=0,o=r.length;i<o;++i){const c=r[i];a.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,f,p;this.isHorizontal()?(d=Yd(t,this.left,o)-o/2,u=Yd(t,this.right,l)+l/2,f=p=c):(f=Yd(t,this.top,o)-o/2,p=Yd(t,this.bottom,l)+l/2,d=u=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(d,f),a.lineTo(u,p),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&r3(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;Kp(s,d,0,u,c,l)}r&&i3(s)}drawTitle(){const{ctx:t,options:{position:a,title:s,reverse:r}}=this;if(!s.display)return;const i=Is(s.font),o=Ni(s.padding),l=s.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||vn(a)?(c+=o.bottom,ns(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:f,rotation:p}=u9e(this,c,a,l);Kp(t,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:p,textAlign:d9e(l,a,r),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,s=on(t.grid&&t.grid.z,-1),r=on(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==yh.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=a.length;i<o;++i){const l=a[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return Is(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Mb{constructor(t,a,s){this.type=t,this.scope=a,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let s;h9e(a)&&(s=this.register(a));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,m9e(t,o,s),this.override&&La.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const a=this.items,s=t.id,r=this.scope;s in a&&delete a[s],r&&s in La[r]&&(delete La[r][s],this.override&&delete Wu[s])}}function m9e(e,t,a){const s=Gp(Object.create(null),[a?La.get(a):{},La.get(t),e.defaults]);La.set(t,s),e.defaultRoutes&&f9e(t,e.defaultRoutes),e.descriptors&&La.describe(t,e.descriptors)}function f9e(e,t){Object.keys(t).forEach(a=>{const s=a.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[a].split("."),l=o.pop(),c=o.join(".");La.route(i,r,c,l)})}function h9e(e){return"id"in e&&"defaults"in e}class g9e{constructor(){this.controllers=new Mb(b1,"datasets",!0),this.elements=new Mb(dc,"elements"),this.plugins=new Mb(Object,"plugins"),this.scales=new Mb(yh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,s){[...a].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Mn(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,a,s){const r=e3(t);Jn(s["before"+r],[],s),a[t](s),Jn(s["after"+r],[],s)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const s=this._typedRegistries[a];if(s.isForType(t))return s}return this.plugins}_get(t,a,s){const r=a.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var bo=new g9e;class p9e{constructor(){this._init=void 0}notify(t,a,s,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,a,s);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,a,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[a,r,i.options];if(Jn(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){En(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const s=t&&t.config,r=on(s.options&&s.options.plugins,{}),i=x9e(s);return r===!1&&!a?[]:b9e(t,i,r,a)}_notifyStateChanges(t){const a=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(a,s),t,"stop"),this._notify(r(s,a),t,"start")}}function x9e(e){const t={},a=[],s=Object.keys(bo.plugins.items);for(let i=0;i<s.length;i++)a.push(bo.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];a.indexOf(o)===-1&&(a.push(o),t[o.id]=!0)}return{plugins:a,localIds:t}}function y9e(e,t){return!t&&e===!1?null:e===!0?{}:e}function b9e(e,{plugins:t,localIds:a},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,d=y9e(s[c],r);d!==null&&i.push({plugin:l,options:v9e(e.config,{plugin:l,local:a[c]},d,o)})}return i}function v9e(e,{plugin:t,local:a},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return a&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function aL(e,t){const a=La.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function w9e(e,t){let a=e;return e==="_index_"?a=t:e==="_value_"&&(a=t==="x"?"y":"x"),a}function N9e(e,t){return e===t?"_index_":"_value_"}function bB(e){if(e==="x"||e==="y"||e==="r")return e}function j9e(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function sL(e,...t){if(bB(e))return e;for(const a of t){const s=a.axis||j9e(a.position)||e.length>1&&bB(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function vB(e,t,a){if(a[t+"AxisID"]===e)return{axis:t}}function C9e(e,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(a.length)return vB(e,"x",a[0])||vB(e,"y",a[0])}return{}}function S9e(e,t){const a=Wu[e.type]||{scales:{}},s=t.scales||{},r=aL(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!vn(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=sL(o,l,C9e(o,e),La.scales[l.type]),d=N9e(c,r),u=a.scales||{};i[o]=op(Object.create(null),[{axis:c},l,u[c],u[d]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||aL(l,t),u=(Wu[l]||{}).scales||{};Object.keys(u).forEach(f=>{const p=w9e(f,c),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),op(i[x],[{axis:p},s[x],u[f]])})}),Object.keys(i).forEach(o=>{const l=i[o];op(l,[La.scales[l.type],La.scale])}),i}function QJ(e){const t=e.options||(e.options={});t.plugins=on(t.plugins,{}),t.scales=S9e(e,t)}function KJ(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function _9e(e){return e=e||{},e.data=KJ(e.data),QJ(e),e}const wB=new Map,XJ=new Set;function Ib(e,t){let a=wB.get(e);return a||(a=t(),wB.set(e,a),XJ.add(a)),a}const Pg=(e,t,a)=>{const s=Gu(t,a);s!==void 0&&e.add(s)};class A9e{constructor(t){this._config=_9e(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=KJ(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),QJ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ib(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return Ib(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return Ib(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,s=this.type;return Ib(`${s}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const s=this._scopeCache;let r=s.get(t);return(!r||a)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,a,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(a);if(l)return l;const c=new Set;a.forEach(u=>{t&&(c.add(t),u.forEach(f=>Pg(c,t,f))),u.forEach(f=>Pg(c,r,f)),u.forEach(f=>Pg(c,Wu[i]||{},f)),u.forEach(f=>Pg(c,La,f)),u.forEach(f=>Pg(c,tL,f))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),XJ.has(a)&&o.set(a,d),d}chartOptionScopes(){const{options:t,type:a}=this;return[t,Wu[a]||{},La.datasets[a]||{},{type:a},La,tL]}resolveNamedOptions(t,a,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=NB(this._resolverCache,t,r);let c=o;if(E9e(o,a)){i.$shared=!1,s=bd(s)?s():s;const d=this.createResolver(t,s,l);c=Hf(o,s,d)}for(const d of a)i[d]=c[d];return i}createResolver(t,a,s=[""],r){const{resolver:i}=NB(this._resolverCache,t,s);return vn(a)?Hf(i,a,void 0,r):i}}function NB(e,t,a){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=a.join();let i=s.get(r);return i||(i={resolver:l3(t,a),subPrefixes:a.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const T9e=e=>vn(e)&&Object.getOwnPropertyNames(e).some(t=>bd(e[t]));function E9e(e,t){const{isScriptable:a,isIndexable:s}=DJ(e);for(const r of t){const i=a(r),o=s(r),l=(o||i)&&e[r];if(i&&(bd(l)||T9e(l))||o&&ns(l))return!0}return!1}var k9e="4.5.1";const L9e=["top","bottom","left","right","chartArea"];function jB(e,t){return e==="top"||e==="bottom"||L9e.indexOf(e)===-1&&t==="x"}function CB(e,t){return function(a,s){return a[e]===s[e]?a[t]-s[t]:a[e]-s[e]}}function SB(e){const t=e.chart,a=t.options.animation;t.notifyPlugins("afterRender"),Jn(a&&a.onComplete,[e],t)}function P9e(e){const t=e.chart,a=t.options.animation;Jn(a&&a.onProgress,[e],t)}function ZJ(e){return u3()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const uv={},_B=e=>{const t=ZJ(e);return Object.values(uv).filter(a=>a.canvas===t).pop()};function D9e(e,t,a){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(a>0||i>t)&&(e[i+a]=o)}}}function O9e(e,t,a,s){return!a||e.type==="mouseout"?null:s?t:e}let w1=class{static defaults=La;static instances=uv;static overrides=Wu;static registry=bo;static version=k9e;static getChart=_B;static register(...t){bo.add(...t),AB()}static unregister(...t){bo.remove(...t),AB()}constructor(t,a){const s=this.config=new A9e(a),r=ZJ(t),i=_B(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||ZHe(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=S8e(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new p9e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=q8e(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],uv[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Nl.listen(this,"complete",SB),Nl.listen(this,"progress",P9e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:s,height:r,_aspectRatio:i}=this;return En(t)?a&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return bo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Q8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return W8(this.canvas,this.ctx),this}stop(){return Nl.stop(this),this}resize(t,a){Nl.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,a,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Q8(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Jn(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};Mn(a,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,a=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];a&&(i=i.concat(Object.keys(a).map(o=>{const l=a[o],c=sL(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Mn(i,o=>{const l=o.options,c=l.id,d=sL(c,l),u=on(l.type,o.dtype);(l.position===void 0||jB(l.position,d)!==jB(o.dposition))&&(l.position=o.dposition),r[c]=!0;let f=null;if(c in s&&s[c].type===u)f=s[c];else{const p=bo.getScale(u);f=new p({id:c,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(l,t)}),Mn(r,(o,l)=>{o||delete s[l]}),Mn(s,o=>{fi.configure(this,o,o.options),fi.addBox(this,o)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>a){for(let r=a;r<s;++r)this._destroyDatasetMeta(r);t.splice(a,s-a)}this._sortedMetasets=t.slice(0).sort(CB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((s,r)=>{a.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=a.length;s<r;s++){const i=a[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||aL(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=bo.getController(l),{datasetElementType:d,dataElementType:u}=La.datasets[l];Object.assign(c,{dataElementType:bo.getElement(u),datasetElementType:d&&bo.getElement(d)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Mn(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const s=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:f}=this.getDatasetMeta(d),p=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||Mn(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(CB("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Mn(this.scales,t=>{fi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!I8(a,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of a){const o=s==="_removeElements"?-i:i;D9e(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<a;i++)if(!I8(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fi.update(this,this.width,this.height,t);const a=this.chartArea,s=a.width<=0||a.height<=0;this._layers=[],Mn(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,s=this.data.datasets.length;a<s;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,s=this.data.datasets.length;a<s;++a)this._updateDataset(a,bd(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Nl.has(this)?this.attached&&!Nl.running(this)&&Nl.start(this):(this.draw(),SB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,s=[];let r,i;for(r=0,i=a.length;r<i;++r){const o=a[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=KBe(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&r3(a,r),t.controller.draw(),r&&i3(a),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Qp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,s,r){const i=LHe.modes[a];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const a=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=im(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!a.hidden}setDatasetVisibility(t,a){const s=this.getDatasetMeta(t);s.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);Wp(a)?(i.data[a].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),Nl.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),W8(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete uv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,s=(i,o)=>{a.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Mn(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,s=(c,d)=>{a.addEventListener(this,c,d),t[c]=d},r=(c,d)=>{t[c]&&(a.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},a.isAttached(this.canvas)?l():o()}unbindEvents(){Mn(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},Mn(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,s){const r=s?"set":"remove";let i,o,l,c;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Mw(s,a)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,a))}notifyPlugins(t,a,s){return this._plugins.notify(this,t,a,s)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,s){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(a,t),l=s?t:i(t,a);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,a){const s={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,a,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,a,s){const{_active:r=[],options:i}=this,o=a,l=this._getActiveElements(t,r,s,o),c=L8e(t),d=O9e(t,this._lastEvent,s,c);s&&(this._lastEvent=null,Jn(i.onHover,[t,l,this],this),c&&Jn(i.onClick,[t,l,this],this));const u=!Mw(l,r);return(u||a)&&(this._active=l,this._updateHoverStyles(l,r,a)),this._lastEvent=d,u}_getActiveElements(t,a,s,r){if(t.type==="mouseout")return[];if(!s)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function AB(){return Mn(w1.instances,e=>e._plugins.invalidate())}function M9e(e,t,a){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,f=Math.min(d/o,zi(s-a));if(e.beginPath(),e.arc(r,i,o-d/2,s+f/2,a-f/2),l>0){const p=Math.min(d/l,zi(s-a));e.arc(r,i,l+d/2,a-p/2,s+p/2,!0)}else{const p=Math.min(d/2,o*zi(s-a));if(u==="round")e.arc(r,i,p,a-$n/2,s+$n/2,!0);else if(u==="bevel"){const x=2*p*p,y=-x*Math.cos(a+$n/2)+r,N=-x*Math.sin(a+$n/2)+i,v=x*Math.cos(s+$n/2)+r,j=x*Math.sin(s+$n/2)+i;e.lineTo(y,N),e.lineTo(v,j)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function I9e(e,t,a){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=r/l;e.beginPath(),e.arc(i,o,l,s-d,a+d),c>r?(d=r/c,e.arc(i,o,c,a+d,s-d,!0)):e.arc(i,o,r,a+as,s-as),e.closePath(),e.clip()}function $9e(e){return o3(e,["outerStart","outerEnd","innerStart","innerEnd"])}function R9e(e,t,a,s){const r=$9e(e.options.borderRadius),i=(a-t)/2,o=Math.min(i,s*t/2),l=c=>{const d=(a-Math.min(i,c))*s/2;return Ms(c,0,Math.min(i,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Ms(r.innerStart,0,o),innerEnd:Ms(r.innerEnd,0,o)}}function nf(e,t,a,s){return{x:a+e*Math.cos(t),y:s+e*Math.sin(t)}}function Uw(e,t,a,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=t,f=Math.max(t.outerRadius+s+a-d,0),p=u>0?u+s+a+d:0;let x=0;const y=r-c;if(s){const ee=u>0?u-s:0,Q=f>0?f-s:0,te=(ee+Q)/2,W=te!==0?y*te/(te+s):y;x=(y-W)/2}const N=Math.max(.001,y*f-a/$n)/f,v=(y-N)/2,j=c+v+x,w=r-v-x,{outerStart:S,outerEnd:A,innerStart:k,innerEnd:_}=R9e(t,p,f,w-j),L=f-S,T=f-A,M=j+S/L,R=w-A/T,z=p+k,O=p+_,I=j+k/z,B=w-_/O;if(e.beginPath(),i){const ee=(M+R)/2;if(e.arc(o,l,f,M,ee),e.arc(o,l,f,ee,R),A>0){const ae=nf(T,R,o,l);e.arc(ae.x,ae.y,A,R,w+as)}const Q=nf(O,w,o,l);if(e.lineTo(Q.x,Q.y),_>0){const ae=nf(O,B,o,l);e.arc(ae.x,ae.y,_,w+as,B+Math.PI)}const te=(w-_/p+(j+k/p))/2;if(e.arc(o,l,p,w-_/p,te,!0),e.arc(o,l,p,te,j+k/p,!0),k>0){const ae=nf(z,I,o,l);e.arc(ae.x,ae.y,k,I+Math.PI,j-as)}const W=nf(L,j,o,l);if(e.lineTo(W.x,W.y),S>0){const ae=nf(L,M,o,l);e.arc(ae.x,ae.y,S,j-as,M)}}else{e.moveTo(o,l);const ee=Math.cos(M)*f+o,Q=Math.sin(M)*f+l;e.lineTo(ee,Q);const te=Math.cos(R)*f+o,W=Math.sin(R)*f+l;e.lineTo(te,W)}e.closePath()}function z9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){Uw(e,t,a,s,c,r);for(let d=0;d<i;++d)e.fill();isNaN(l)||(c=o+(l%Ca||Ca))}return Uw(e,t,a,s,c,r),e.fill(),c}function F9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:p,borderRadius:x}=c,y=c.borderAlign==="inner";if(!d)return;e.setLineDash(f||[]),e.lineDashOffset=p,y?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let N=t.endAngle;if(i){Uw(e,t,a,s,N,r);for(let v=0;v<i;++v)e.stroke();isNaN(l)||(N=o+(l%Ca||Ca))}y&&I9e(e,t,N),c.selfJoin&&N-o>=$n&&x===0&&u!=="miter"&&M9e(e,t,N),i||(Uw(e,t,a,s,N,r),e.stroke())}class U9e extends dc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.getProps(["x","y"],s),{angle:i,distance:o}=SJ(r,{x:t,y:a}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=on(f,c-l),y=Yp(i,l,c)&&l!==c,N=x>=Ca||y,v=td(o,d+p,u+p);return N&&v}getCenterPoint(t){const{x:a,y:s,startAngle:r,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:d}=this.options,u=(r+i)/2,f=(o+l+d+c)/2;return{x:a+Math.cos(u)*f,y:s+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:a,circumference:s}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=s>Ca?Math.floor(s/Ca):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min($n,s||0)),d=r*c;t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,z9e(t,this,d,i,o),F9e(t,this,d,i,o),t.restore()}}function JJ(e,t,a=t){e.lineCap=on(a.borderCapStyle,t.borderCapStyle),e.setLineDash(on(a.borderDash,t.borderDash)),e.lineDashOffset=on(a.borderDashOffset,t.borderDashOffset),e.lineJoin=on(a.borderJoinStyle,t.borderJoinStyle),e.lineWidth=on(a.borderWidth,t.borderWidth),e.strokeStyle=on(a.borderColor,t.borderColor)}function B9e(e,t,a){e.lineTo(a.x,a.y)}function H9e(e){return e.stepped?sBe:e.tension||e.cubicInterpolationMode==="monotone"?rBe:B9e}function eee(e,t,a={}){const s=e.length,{start:r=0,end:i=s-1}=a,{start:o,end:l}=t,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:d<c&&!u?s+d-c:d-c}}function q9e(e,t,a,s){const{points:r,options:i}=t,{count:o,start:l,loop:c,ilen:d}=eee(r,a,s),u=H9e(i);let{move:f=!0,reverse:p}=s||{},x,y,N;for(x=0;x<=d;++x)y=r[(l+(p?d-x:x))%o],!y.skip&&(f?(e.moveTo(y.x,y.y),f=!1):u(e,N,y,p,i.stepped),N=y);return c&&(y=r[(l+(p?d:0))%o],u(e,N,y,p,i.stepped)),!!c}function G9e(e,t,a,s){const r=t.points,{count:i,start:o,ilen:l}=eee(r,a,s),{move:c=!0,reverse:d}=s||{};let u=0,f=0,p,x,y,N,v,j;const w=A=>(o+(d?l-A:A))%i,S=()=>{N!==v&&(e.lineTo(u,v),e.lineTo(u,N),e.lineTo(u,j))};for(c&&(x=r[w(0)],e.moveTo(x.x,x.y)),p=0;p<=l;++p){if(x=r[w(p)],x.skip)continue;const A=x.x,k=x.y,_=A|0;_===y?(k<N?N=k:k>v&&(v=k),u=(f*u+A)/++f):(S(),e.lineTo(A,k),y=_,f=0,N=v=k),j=k}S()}function rL(e){const t=e.options,a=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?G9e:q9e}function W9e(e){return e.stepped?$Be:e.tension||e.cubicInterpolationMode==="monotone"?RBe:au}function V9e(e,t,a,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,a,s)&&r.closePath()),JJ(e,t.options),e.stroke(r)}function Y9e(e,t,a,s){const{segments:r,options:i}=t,o=rL(t);for(const l of r)JJ(e,i,l.style),e.beginPath(),o(e,t,l,{start:a,end:a+s-1})&&e.closePath(),e.stroke()}const Q9e=typeof Path2D=="function";function K9e(e,t,a,s){Q9e&&!t.options.segment?V9e(e,t,a,s):Y9e(e,t,a,s)}class X9e extends dc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;EBe(this._points,s,t,r,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=WBe(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,s=t.length;return s&&a[t[s-1].end]}interpolate(t,a){const s=this.options,r=t[a],i=this.points,o=HBe(this,{property:a,start:r,end:r});if(!o.length)return;const l=[],c=W9e(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:f,end:p}=o[d],x=i[f],y=i[p];if(x===y){l.push(x);continue}const N=Math.abs((r-x[a])/(y[a]-x[a])),v=c(x,y,N,s.stepped);v[a]=t[a],l.push(v)}return l.length===1?l[0]:l}pathSegment(t,a,s){return rL(this)(t,this,a,s)}path(t,a,s){const r=this.segments,i=rL(this);let o=this._loop;a=a||0,s=s||this.points.length-a;for(const l of r)o&=i(t,this,l,{start:a,end:a+s-1});return!!o}draw(t,a,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),K9e(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function TB(e,t,a,s){const r=e.options,{[a]:i}=e.getProps([a],s);return Math.abs(t-i)<r.radius+r.hitRadius}class Z9e extends dc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(a-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,a){return TB(this,t,"x",a)}inYRange(t,a){return TB(this,t,"y",a)}getCenterPoint(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}size(t){t=t||this.options||{};let a=t.radius||0;a=Math.max(a,a&&t.hoverRadius||0);const s=a&&t.borderWidth||0;return(a+s)*2}draw(t,a){const s=this.options;this.skip||s.radius<.1||!Qp(this,a,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,nL(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function tee(e,t){const{x:a,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,d,u,f;return e.horizontal?(f=o/2,l=Math.min(a,r),c=Math.max(a,r),d=s-f,u=s+f):(f=i/2,l=a-f,c=a+f,d=Math.min(s,r),u=Math.max(s,r)),{left:l,top:d,right:c,bottom:u}}function ad(e,t,a,s){return e?0:Ms(t,a,s)}function J9e(e,t,a){const s=e.options.borderWidth,r=e.borderSkipped,i=PJ(s);return{t:ad(r.top,i.top,0,a),r:ad(r.right,i.right,0,t),b:ad(r.bottom,i.bottom,0,a),l:ad(r.left,i.left,0,t)}}function eqe(e,t,a){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=Nf(r),o=Math.min(t,a),l=e.borderSkipped,c=s||vn(r);return{topLeft:ad(!c||l.top||l.left,i.topLeft,0,o),topRight:ad(!c||l.top||l.right,i.topRight,0,o),bottomLeft:ad(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:ad(!c||l.bottom||l.right,i.bottomRight,0,o)}}function tqe(e){const t=tee(e),a=t.right-t.left,s=t.bottom-t.top,r=J9e(e,a/2,s/2),i=eqe(e,a/2,s/2);return{outer:{x:t.left,y:t.top,w:a,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function pT(e,t,a,s){const r=t===null,i=a===null,l=e&&!(r&&i)&&tee(e,s);return l&&(r||td(t,l.left,l.right))&&(i||td(a,l.top,l.bottom))}function nqe(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function aqe(e,t){e.rect(t.x,t.y,t.w,t.h)}function xT(e,t,a={}){const s=e.x!==a.x?-t:0,r=e.y!==a.y?-t:0,i=(e.x+e.w!==a.x+a.w?t:0)-s,o=(e.y+e.h!==a.y+a.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class sqe extends dc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=tqe(this),l=nqe(o.radius)?Rw:aqe;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,xT(o,a,i)),t.clip(),l(t,xT(i,-a,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,xT(i,a)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,a,s){return pT(this,t,a,s)}inXRange(t,a){return pT(this,t,null,a)}inYRange(t,a){return pT(this,null,t,a)}getCenterPoint(t){const{x:a,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+r)/2:a,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const EB=(e,t)=>{let{boxHeight:a=t,boxWidth:s=t}=e;return e.usePointStyle&&(a=Math.min(a,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(t,a)}},rqe=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class kB extends dc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,s){this.maxWidth=t,this.maxHeight=a,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=Jn(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(s=>t.filter(s,this.chart.data))),t.sort&&(a=a.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Is(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=EB(s,i);let d,u;a.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,a,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-u;return this.legendItems.forEach((y,N)=>{const v=s+a/2+i.measureText(y.text).width;(N===0||d[d.length-1]+v+2*l>o)&&(f+=u,d[d.length-(N>0?0:1)]=0,x+=u,p++),c[N]={left:0,top:x,row:p,width:v,height:r},d[d.length-1]+=v+l}),f}_fitCols(t,a,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-t;let f=l,p=0,x=0,y=0,N=0;return this.legendItems.forEach((v,j)=>{const{itemWidth:w,itemHeight:S}=iqe(s,a,i,v,r);j>0&&x+S+2*l>u&&(f+=p+l,d.push({width:p,height:x}),y+=p+l,N++,p=x=0),c[j]={left:y,top:x,col:N,width:w,height:S},p=Math.max(p,w),x+=S+l}),f+=p,d.push({width:p,height:x}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:s,labels:{padding:r},rtl:i}}=this,o=jf(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ls(s,this.left+r,this.right-this.lineWidths[l]);for(const d of a)l!==d.row&&(l=d.row,c=Ls(s,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+t+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=Ls(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const d of a)d.col!==l&&(l=d.col,c=Ls(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;r3(t,this),this._draw(),i3(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=La.color,c=jf(t.rtl,this.left,this.width),d=Is(o.font),{padding:u}=o,f=d.size,p=f/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:y,boxHeight:N,itemHeight:v}=EB(o,f),j=function(_,L,T){if(isNaN(y)||y<=0||isNaN(N)||N<0)return;r.save();const M=on(T.lineWidth,1);if(r.fillStyle=on(T.fillStyle,l),r.lineCap=on(T.lineCap,"butt"),r.lineDashOffset=on(T.lineDashOffset,0),r.lineJoin=on(T.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=on(T.strokeStyle,l),r.setLineDash(on(T.lineDash,[])),o.usePointStyle){const R={radius:N*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:M},z=c.xPlus(_,y/2),O=L+p;LJ(r,R,z,O,o.pointStyleWidth&&y)}else{const R=L+Math.max((f-N)/2,0),z=c.leftForLtr(_,y),O=Nf(T.borderRadius);r.beginPath(),Object.values(O).some(I=>I!==0)?Rw(r,{x:z,y:R,w:y,h:N,radius:O}):r.rect(z,R,y,N),r.fill(),M!==0&&r.stroke()}r.restore()},w=function(_,L,T){Kp(r,T.text,_,L+v/2,d,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},S=this.isHorizontal(),A=this._computeTitleHeight();S?x={x:Ls(i,this.left+u,this.right-s[0]),y:this.top+u+A,line:0}:x={x:this.left+u,y:Ls(i,this.top+A+u,this.bottom-a[0].height),line:0},RJ(this.ctx,t.textDirection);const k=v+u;this.legendItems.forEach((_,L)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const T=r.measureText(_.text).width,M=c.textAlign(_.textAlign||(_.textAlign=o.textAlign)),R=y+p+T;let z=x.x,O=x.y;c.setWidth(this.width),S?L>0&&z+R+u>this.right&&(O=x.y+=k,x.line++,z=x.x=Ls(i,this.left+u,this.right-s[x.line])):L>0&&O+k>this.bottom&&(z=x.x=z+a[x.line].width+u,x.line++,O=x.y=Ls(i,this.top+A+u,this.bottom-a[x.line].height));const I=c.x(z);if(j(I,O,_),z=G8e(M,z+y+p,S?z+R:this.right,t.rtl),w(c.x(z),O,_),S)x.x+=R+u;else if(typeof _.text!="string"){const B=d.lineHeight;x.y+=nee(_,B)+u}else x.y+=k}),zJ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,s=Is(a.font),r=Ni(a.padding);if(!a.display)return;const i=jf(t.rtl,this.left,this.width),o=this.ctx,l=a.position,c=s.size/2,d=r.top+c;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,f=Ls(t.align,f,this.right-p);else{const y=this.columnSizes.reduce((N,v)=>Math.max(N,v.height),0);u=d+Ls(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const x=Ls(l,f,f+p);o.textAlign=i.textAlign(n3(l)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=s.string,Kp(o,a.text,x,u,s)}_computeTitleHeight(){const t=this.options.title,a=Is(t.font),s=Ni(t.padding);return t.display?a.lineHeight+s.height:0}_getLegendItemAt(t,a){let s,r,i;if(td(t,this.left,this.right)&&td(a,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],td(t,r.left,r.left+r.width)&&td(a,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const a=this.options;if(!cqe(t.type,a))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=rqe(r,s);r&&!i&&Jn(a.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&Jn(a.onHover,[t,s,this],this)}else s&&Jn(a.onClick,[t,s,this],this)}}function iqe(e,t,a,s,r){const i=oqe(s,e,t,a),o=lqe(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function oqe(e,t,a,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+a.size/2+s.measureText(r).width}function lqe(e,t,a){let s=e;return typeof t.text!="string"&&(s=nee(t,a)),s}function nee(e,t){const a=e.text?e.text.length:0;return t*a}function cqe(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var dqe={id:"legend",_element:kB,start(e,t,a){const s=e.legend=new kB({ctx:e.ctx,options:a,chart:e});fi.configure(e,s,a),fi.addBox(e,s)},stop(e){fi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,a){const s=e.legend;fi.configure(e,s,a),s.options=a},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,a){const s=t.datasetIndex,r=a.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(a?0:void 0),u=Ni(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class aee extends dc{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const r=ns(s.text)?s.text.length:1;this._padding=Ni(s.padding);const i=r*Is(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,u,f;return this.isHorizontal()?(u=Ls(l,s,i),f=a+t,d=i-s):(o.position==="left"?(u=s+t,f=Ls(l,r,a),c=$n*-.5):(u=i-t,f=Ls(l,a,r),c=$n*.5),d=r-a),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const s=Is(a.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Kp(t,a.text,0,0,s,{color:a.color,maxWidth:c,rotation:d,textAlign:n3(a.align),textBaseline:"middle",translation:[o,l]})}}function uqe(e,t){const a=new aee({ctx:e.ctx,options:t,chart:e});fi.configure(e,a,t),fi.addBox(e,a),e.titleBlock=a}var mqe={id:"title",_element:aee,start(e,t,a){uqe(e,a)},stop(e){const t=e.titleBlock;fi.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,a){const s=e.titleBlock;fi.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Kg={average(e){if(!e.length)return!1;let t,a,s=new Set,r=0,i=0;for(t=0,a=e.length;t<a;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let a=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=eL(t,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();a=c.x,s=c.y}return{x:a,y:s}}};function yo(e,t){return t&&(ns(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function jl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function fqe(e,t){const{element:a,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:a}}function LB(e,t){const a=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=Is(t.bodyFont),d=Is(t.titleFont),u=Is(t.footerFont),f=i.length,p=r.length,x=s.length,y=Ni(t.padding);let N=y.height,v=0,j=s.reduce((A,k)=>A+k.before.length+k.lines.length+k.after.length,0);if(j+=e.beforeBody.length+e.afterBody.length,f&&(N+=f*d.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),j){const A=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;N+=x*A+(j-x)*c.lineHeight+(j-1)*t.bodySpacing}p&&(N+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let w=0;const S=function(A){v=Math.max(v,a.measureText(A).width+w)};return a.save(),a.font=d.string,Mn(e.title,S),a.font=c.string,Mn(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,Mn(s,A=>{Mn(A.before,S),Mn(A.lines,S),Mn(A.after,S)}),w=0,a.font=u.string,Mn(e.footer,S),a.restore(),v+=y.width,{width:v,height:N}}function hqe(e,t){const{y:a,height:s}=t;return a<s/2?"top":a>e.height-s/2?"bottom":"center"}function gqe(e,t,a,s){const{x:r,width:i}=s,o=a.caretSize+a.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function pqe(e,t,a,s){const{x:r,width:i}=a,{width:o,chartArea:{left:l,right:c}}=e;let d="center";return s==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),gqe(d,e,t,a)&&(d="center"),d}function PB(e,t,a){const s=a.yAlign||t.yAlign||hqe(e,a);return{xAlign:a.xAlign||t.xAlign||pqe(e,t,a,s),yAlign:s}}function xqe(e,t){let{x:a,width:s}=e;return t==="right"?a-=s:t==="center"&&(a-=s/2),a}function yqe(e,t,a){let{y:s,height:r}=e;return t==="top"?s+=a:t==="bottom"?s-=r+a:s-=r/2,s}function DB(e,t,a,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=a,d=r+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:x}=Nf(o);let y=xqe(t,l);const N=yqe(t,c,d);return c==="center"?l==="left"?y+=d:l==="right"&&(y-=d):l==="left"?y-=Math.max(u,p)+r:l==="right"&&(y+=Math.max(f,x)+r),{x:Ms(y,0,s.width-t.width),y:Ms(N,0,s.height-t.height)}}function $b(e,t,a){const s=Ni(a.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function OB(e){return yo([],jl(e))}function bqe(e,t,a){return im(e,{tooltip:t,tooltipItems:a,type:"tooltip"})}function MB(e,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?e.override(a):e}const see={beforeTitle:vl,title(e){if(e.length>0){const t=e[0],a=t.chart.data.labels,s=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return a[t.dataIndex]}return""},afterTitle:vl,beforeBody:vl,beforeLabel:vl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const a=e.formattedValue;return En(a)||(t+=a),t},labelColor(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:vl,afterBody:vl,beforeFooter:vl,footer:vl,afterFooter:vl};function ir(e,t,a,s){const r=e[t].call(a,s);return typeof r>"u"?see[t].call(a,s):r}class IB extends dc{static positioners=Kg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&a.options.animation&&s.animations,i=new UJ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=bqe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:s}=a,r=ir(s,"beforeTitle",this,t),i=ir(s,"title",this,t),o=ir(s,"afterTitle",this,t);let l=[];return l=yo(l,jl(r)),l=yo(l,jl(i)),l=yo(l,jl(o)),l}getBeforeBody(t,a){return OB(ir(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:s}=a,r=[];return Mn(t,i=>{const o={before:[],lines:[],after:[]},l=MB(s,i);yo(o.before,jl(ir(l,"beforeLabel",this,i))),yo(o.lines,ir(l,"label",this,i)),yo(o.after,jl(ir(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,a){return OB(ir(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:s}=a,r=ir(s,"beforeFooter",this,t),i=ir(s,"footer",this,t),o=ir(s,"afterFooter",this,t);let l=[];return l=yo(l,jl(r)),l=yo(l,jl(i)),l=yo(l,jl(o)),l}_createItems(t){const a=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=a.length;c<d;++c)l.push(fqe(this.chart,a[c]));return t.filter&&(l=l.filter((u,f,p)=>t.filter(u,f,p,s))),t.itemSort&&(l=l.sort((u,f)=>t.itemSort(u,f,s))),Mn(l,u=>{const f=MB(t.callbacks,u);r.push(ir(f,"labelColor",this,u)),i.push(ir(f,"labelPointStyle",this,u)),o.push(ir(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,a){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Kg[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=LB(this,s),d=Object.assign({},l,c),u=PB(this.chart,s,d),f=DB(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,s,r){const i=this.getCaretPosition(t,s,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=Nf(l),{x:p,y:x}=t,{width:y,height:N}=a;let v,j,w,S,A,k;return i==="center"?(A=x+N/2,r==="left"?(v=p,j=v-o,S=A+o,k=A-o):(v=p+y,j=v+o,S=A-o,k=A+o),w=v):(r==="left"?j=p+Math.max(c,u)+o:r==="right"?j=p+y-Math.max(d,f)-o:j=this.caretX,i==="top"?(S=x,A=S-o,v=j-o,w=j+o):(S=x+N,A=S+o,v=j+o,w=j-o),k=S),{x1:v,x2:j,x3:w,y1:S,y2:A,y3:k}}drawTitle(t,a,s){const r=this.title,i=r.length;let o,l,c;if(i){const d=jf(s.rtl,this.x,this.width);for(t.x=$b(this,s.titleAlign,s),a.textAlign=d.textAlign(s.titleAlign),a.textBaseline="middle",o=Is(s.titleFont),l=s.titleSpacing,a.fillStyle=s.titleColor,a.font=o.string,c=0;c<i;++c)a.fillText(r[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,a,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=Is(i.bodyFont),f=$b(this,"left",i),p=r.x(f),x=c<u.lineHeight?(u.lineHeight-c)/2:0,y=a.y+x;if(i.usePointStyle){const N={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=r.leftForLtr(p,d)+d/2,j=y+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,nL(t,N,v,j),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,nL(t,N,v,j)}else{t.lineWidth=vn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const N=r.leftForLtr(p,d),v=r.leftForLtr(r.xPlus(p,1),d-2),j=Nf(o.borderRadius);Object.values(j).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Rw(t,{x:N,y,w:d,h:c,radius:j}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Rw(t,{x:v,y:y+1,w:d-2,h:c-2,radius:j}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(N,y,d,c),t.strokeRect(N,y,d,c),t.fillStyle=o.backgroundColor,t.fillRect(v,y+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,a,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,f=Is(s.bodyFont);let p=f.lineHeight,x=0;const y=jf(s.rtl,this.x,this.width),N=function(T){a.fillText(T,y.x(t.x+x),t.y+p/2),t.y+=p+i},v=y.textAlign(o);let j,w,S,A,k,_,L;for(a.textAlign=o,a.textBaseline="middle",a.font=f.string,t.x=$b(this,v,s),a.fillStyle=s.bodyColor,Mn(this.beforeBody,N),x=l&&v!=="right"?o==="center"?d/2+u:d+2+u:0,A=0,_=r.length;A<_;++A){for(j=r[A],w=this.labelTextColors[A],a.fillStyle=w,Mn(j.before,N),S=j.lines,l&&S.length&&(this._drawColorBox(a,t,A,y,s),p=Math.max(f.lineHeight,c)),k=0,L=S.length;k<L;++k)N(S[k]),p=f.lineHeight;Mn(j.after,N)}x=0,p=f.lineHeight,Mn(this.afterBody,N),t.y-=i}drawFooter(t,a,s){const r=this.footer,i=r.length;let o,l;if(i){const c=jf(s.rtl,this.x,this.width);for(t.x=$b(this,s.footerAlign,s),t.y+=s.footerMarginTop,a.textAlign=c.textAlign(s.footerAlign),a.textBaseline="middle",o=Is(s.footerFont),a.fillStyle=s.footerColor,a.font=o.string,l=0;l<i;++l)a.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,a,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:d,height:u}=s,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:y}=Nf(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(l+f,c),o==="top"&&this.drawCaret(t,a,s,r),a.lineTo(l+d-p,c),a.quadraticCurveTo(l+d,c,l+d,c+p),o==="center"&&i==="right"&&this.drawCaret(t,a,s,r),a.lineTo(l+d,c+u-y),a.quadraticCurveTo(l+d,c+u,l+d-y,c+u),o==="bottom"&&this.drawCaret(t,a,s,r),a.lineTo(l+x,c+u),a.quadraticCurveTo(l,c+u,l,c+u-x),o==="center"&&i==="left"&&this.drawCaret(t,a,s,r),a.lineTo(l,c+f),a.quadraticCurveTo(l,c,l+f,c),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Kg[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=LB(this,t),c=Object.assign({},o,this._size),d=PB(a,t,c),u=DB(t,c,d,a);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Ni(a.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,a),RJ(t,a.textDirection),i.y+=o.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),zJ(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Mw(s,r),o=this._positionChanged(r,a);(i||o)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,s=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,a,s),l=this._positionChanged(o,t),c=a||!Mw(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),c}_getActiveElements(t,a,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return a.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,a){const{caretX:s,caretY:r,options:i}=this,o=Kg[i.position].call(this,t,a);return o!==!1&&(s!==o.x||r!==o.y)}}var vqe={id:"tooltip",_element:IB,positioners:Kg,afterInit(e,t,a){a&&(e.tooltip=new IB({chart:e,options:a}))},beforeUpdate(e,t,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,t,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,t){if(e.tooltip){const a=t.replay;e.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:see},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const wqe=(e,t,a,s)=>(typeof t=="string"?(a=e.push(t)-1,s.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function Nqe(e,t,a,s){const r=e.indexOf(t);if(r===-1)return wqe(e,t,a,s);const i=e.lastIndexOf(t);return r!==i?a:r}const jqe=(e,t)=>e===null?null:Ms(Math.round(e),0,t);function $B(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Cqe extends yh{static id="category";static defaults={ticks:{callback:$B}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const s=this.getLabels();for(const{index:r,label:i}of a)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(En(t))return null;const s=this.getLabels();return a=isFinite(a)&&s[a]===t?a:Nqe(s,t,on(a,t),this._addedLabels),jqe(a,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),a||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,a=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=a;o++)r.push({value:o});return r}getLabelForValue(t){return $B.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Sqe(e,t){const a=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:p}=e,x=i||1,y=u-1,{min:N,max:v}=t,j=!En(o),w=!En(l),S=!En(d),A=(v-N)/(f+1);let k=R8((v-N)/y/x)*x,_,L,T,M;if(k<1e-14&&!j&&!w)return[{value:N},{value:v}];M=Math.ceil(v/k)-Math.floor(N/k),M>y&&(k=R8(M*k/y/x)*x),En(c)||(_=Math.pow(10,c),k=Math.ceil(k*_)/_),r==="ticks"?(L=Math.floor(N/k)*k,T=Math.ceil(v/k)*k):(L=N,T=v),j&&w&&i&&I8e((l-o)/i,k/1e3)?(M=Math.round(Math.min((l-o)/k,u)),k=(l-o)/M,L=o,T=l):S?(L=j?o:L,T=w?l:T,M=d-1,k=(T-L)/M):(M=(T-L)/k,lp(M,Math.round(M),k/1e3)?M=Math.round(M):M=Math.ceil(M));const R=Math.max(z8(k),z8(L));_=Math.pow(10,En(c)?R:c),L=Math.round(L*_)/_,T=Math.round(T*_)/_;let z=0;for(j&&(p&&L!==o?(a.push({value:o}),L<o&&z++,lp(Math.round((L+z*k)*_)/_,o,RB(o,A,e))&&z++):L<o&&z++);z<M;++z){const O=Math.round((L+z*k)*_)/_;if(w&&O>l)break;a.push({value:O})}return w&&p&&T!==l?a.length&&lp(a[a.length-1].value,l,RB(l,A,e))?a[a.length-1].value=l:a.push({value:l}):(!w||T===l)&&a.push({value:T}),a}function RB(e,t,{horizontal:a,minRotation:s}){const r=Ll(s),i=(a?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class _qe extends yh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return En(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=a?r:c,l=c=>i=s?i:c;if(t){const c=Mo(r),d=Mo(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,o=Sqe(r,i);return t.bounds==="ticks"&&$8e(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let a=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-a)/Math.max(t.length-1,1)/2;a-=r,s+=r}this._startValue=a,this._endValue=s,this._valueRange=s-a}getLabelForValue(t){return s3(t,this.chart.options.locale,this.options.ticks.format)}}class Aqe extends _qe{static id="linear";static defaults={ticks:{callback:kJ.formatters.numeric}};determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=wi(t)?t:0,this.max=wi(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,s=Ll(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const N1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},dr=Object.keys(N1);function zB(e,t){return e-t}function FB(e,t){if(En(t))return null;const a=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),wi(o)||(o=typeof s=="string"?a.parse(o,s):a.parse(o)),o===null?null:(r&&(o=r==="week"&&(Vp(i)||i===!0)?a.startOf(o,"isoWeek",i):a.startOf(o,r)),+o)}function UB(e,t,a,s){const r=dr.length;for(let i=dr.indexOf(e);i<r-1;++i){const o=N1[dr[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-t)/(l*o.size))<=s)return dr[i]}return dr[r-1]}function Tqe(e,t,a,s,r){for(let i=dr.length-1;i>=dr.indexOf(a);i--){const o=dr[i];if(N1[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return dr[a?dr.indexOf(a):0]}function Eqe(e){for(let t=dr.indexOf(e)+1,a=dr.length;t<a;++t)if(N1[dr[t]].common)return dr[t]}function BB(e,t,a){if(!a)e[t]=!0;else if(a.length){const{lo:s,hi:r}=t3(a,t),i=a[s]>=t?a[s]:a[r];e[i]=!0}}function kqe(e,t,a,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=a[l],c>=0&&(t[c].major=!0);return t}function HB(e,t,a){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!a?s:kqe(e,s,r,a)}class qB extends yh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const s=t.time||(t.time={}),r=this._adapter=new _He._date(t.adapters.date);r.init(a),op(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:FB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=wi(r)&&!isNaN(r)?r:+a.startOf(Date.now(),s),i=wi(i)&&!isNaN(i)?i:+a.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],s=t[t.length-1]),{min:a,max:s}}buildTicks(){const t=this.options,a=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=B8e(r,i,o);return this._unit=a.unit||(s.autoSkip?UB(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):Tqe(this,l.length,a.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Eqe(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),HB(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?a=1-r:a=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;a=Ms(a,0,o),s=Ms(s,0,o),this._offsets={start:a,end:s,factor:1/(a+1+s)}}_generate(){const t=this._adapter,a=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||UB(i.minUnit,a,s,this._getLabelCapacity(a)),l=on(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=Vp(c)||c===!0,u={};let f=a,p,x;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":o),t.diff(s,a,o)>1e5*l)throw new Error(a+" and "+s+" are too far apart with stepSize of "+l+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,x=0;p<s;p=+t.add(p,l,o),x++)BB(u,p,y);return(p===s||r.bounds==="ticks"||x===1)&&BB(u,p,y),Object.keys(u).sort(zB).map(N=>+N)}getLabelForValue(t){const a=this._adapter,s=this.options.time;return s.tooltipFormat?a.format(t,s.tooltipFormat):a.format(t,s.displayFormats.datetime)}format(t,a){const r=this.options.time.displayFormats,i=this._unit,o=a||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,a,s,r){const i=this.options,o=i.ticks.callback;if(o)return Jn(o,[t,a,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],f=d&&l[d],p=s[a],x=d&&f&&p&&p.major;return this._adapter.format(t,r||(x?f:u))}generateTickLabels(t){let a,s,r;for(a=0,s=t.length;a<s;++a)r=t[a],r.label=this._tickFormatFunction(r.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+s)*a.factor)}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,s=this.ctx.measureText(t).width,r=Ll(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const a=this.options.time,s=a.displayFormats,r=s[a.unit]||s.millisecond,i=this._tickFormatFunction(t,0,HB(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],a,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,s=r.length;a<s;++a)t=t.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,s;if(t.length)return t;const r=this.getLabels();for(a=0,s=r.length;a<s;++a)t.push(FB(this,r[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return AJ(t.sort(zB))}}function Rb(e,t,a){let s=0,r=e.length-1,i,o,l,c;a?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=gu(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=gu(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const d=o-i;return d?l+(c-l)*(t-i)/d:l}class tYe extends qB{static id="timeseries";static defaults=qB.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=Rb(a,this.min),this._tableRange=Rb(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:s}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=t.length;o<l;++o)d=t[o],d>=a&&d<=s&&r.push(d);if(r.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const t=this.min,a=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(a)||s.length===1)&&s.push(a),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),s=this.getLabelTimestamps();return a.length&&s.length?t=this.normalize(a.concat(s)):t=a.length?a:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Rb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return Rb(this._table,s*this._tableRange+this._minPos,!0)}}const ree="label";function GB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Lqe(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function iee(e,t){e.labels=t}function oee(e,t,a=ree){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[a]===r[a]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function Pqe(e,t=ree){const a={labels:[],datasets:[]};return iee(a,e.labels),oee(a,e.datasets,t),a}function Dqe(e,t){const{height:a=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:f,...p}=e,x=h.useRef(null),y=h.useRef(null),N=()=>{x.current&&(y.current=new w1(x.current,{type:o,data:Pqe(l,i),options:c&&{...c},plugins:d}),GB(t,y.current))},v=()=>{GB(t,null),y.current&&(y.current.destroy(),y.current=null)};return h.useEffect(()=>{!r&&y.current&&c&&Lqe(y.current,c)},[r,c]),h.useEffect(()=>{!r&&y.current&&iee(y.current.config.data,l.labels)},[r,l.labels]),h.useEffect(()=>{!r&&y.current&&l.datasets&&oee(y.current.config.data,l.datasets,i)},[r,l.datasets]),h.useEffect(()=>{y.current&&(r?(v(),setTimeout(N)):y.current.update(f))},[r,c,l.labels,l.datasets,f]),h.useEffect(()=>{y.current&&(v(),setTimeout(N))},[o]),h.useEffect(()=>(N(),()=>v()),[]),n.jsx("canvas",{ref:x,role:"img",height:a,width:s,...p,children:u})}const Oqe=h.forwardRef(Dqe);function h3(e,t){return w1.register(t),h.forwardRef((a,s)=>n.jsx(Oqe,{...a,ref:s,type:e}))}const Mqe=h3("line",CHe),Iqe=h3("bar",wHe),$qe=h3("pie",SHe);w1.register(Cqe,Aqe,sqe,X9e,Z9e,U9e,mqe,vqe,dqe);const lee=e=>n.jsx(na,{...e}),Rqe=e=>n.jsx(c9,{...e}),zqe=e=>n.jsx(ox,{...e}),Fqe=e=>n.jsx(ga,{...e}),cee=e=>n.jsx(un,{...e}),Uqe=e=>n.jsx(xue,{...e}),Bqe=[{icon:lee,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:cee,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:zqe,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:Rqe,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],Hqe=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],qqe={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},Gqe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},Wqe={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},Vqe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},Yqe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Qqe=()=>{const e=[{icon:lee,label:"New Contact"},{icon:cee,label:"New Campaign"},{icon:Fqe,label:"New Task"},{icon:Uqe,label:"New Leads"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,a)=>n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:n.jsx(t.icon,{size:20})}),n.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},a))})]})},Kqe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]}),Xqe=({name:e,company:t,assignedBy:a,source:s,date:r})=>{const{text:i,bg:o}=Yqe(s);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-xs text-gray-500",children:t}),a&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",n.jsx("span",{className:"font-semibold text-gray-700",children:a})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:r}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${o} px-2 py-0.5 rounded-full`,children:s})]})]})})},Zqe=({title:e,children:t})=>n.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),Jqe=({title:e,chartData:t,chartOptions:a})=>{const[s,r]=h.useState("bar"),i=s==="pie"?Wqe:t,o=s==="pie"?Vqe:a,l=s==="line"?Mqe:s==="pie"?$qe:Iqe,c=s==="pie"?250:300;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsxs("select",{value:s,onChange:d=>r(d.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[n.jsx("option",{value:"bar",children:"Bar"}),n.jsx("option",{value:"line",children:"Line"}),n.jsx("option",{value:"pie",children:"Pie"})]})]}),n.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:n.jsx(l,{data:i,options:o})})]})};function eGe(){const{user:e}=Gt();return h.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),n.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:n.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),n.jsx(Qqe,{}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:Bqe.map(t=>n.jsx(Kqe,{...t},t.title))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsx(Jqe,{title:"Leads & Conversions",chartData:qqe,chartOptions:Gqe}),n.jsx(Zqe,{title:"Latest Leads",children:Hqe.map((t,a)=>n.jsx(Xqe,{...t},a))})]})]})})}function tGe(){h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("All Statuses"),o=h.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),l=f=>t(f),c=()=>t(null),d=h.useMemo(()=>[{title:"Total Accounts",value:o.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:na},{title:"Customers",value:o.filter(f=>f.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Io},{title:"Prospects",value:o.filter(f=>f.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Yn},{title:"Partners",value:o.filter(f=>f.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:en},{title:"Active",value:o.filter(f=>f.status==="CUSTOMER"||f.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Io},{title:"Inactive",value:o.filter(f=>f.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:$o},{title:"Former",value:o.filter(f=>f.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:$o}],[o]);if(e)return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Yu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:n.jsx("div",{children:n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,n.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Website:"})," ",n.jsx("br",{}),n.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Industry:"})," ",n.jsx("br",{}),e.industry]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Territory:"})," ",n.jsx("br",{}),e.territory]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",n.jsx("br",{}),e.phone_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",n.jsx("br",{}),e.billing_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",n.jsx("br",{}),e.shipping_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),e.created_by," on ",e.created_date]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),e.last_updated]})]})]})]});const u=o.filter(f=>{const p=f.company.toLowerCase().includes(a.toLowerCase())||f.url.toLowerCase().includes(a.toLowerCase())||f.industry.toLowerCase().includes(a.toLowerCase())||f.territory.toLowerCase().includes(a.toLowerCase())||f.phone_number.toLowerCase().includes(a.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(f.status==="CUSTOMER"||f.status==="PARTNER")||r==="Inactive"&&f.status==="INACTIVE"||r==="Former"&&f.status==="FORMER"||f.status.toLowerCase()===r.toLowerCase();return p&&x});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[n.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:d.map(f=>n.jsx(nGe,{...f},f.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:a,onChange:f=>s(f.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Customer"}),n.jsx("option",{children:"Prospect"}),n.jsx("option",{children:"Partner"}),n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Inactive"}),n.jsx("option",{children:"Former"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsxs("tbody",{children:[u.map((f,p)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>l(f),children:[n.jsx("td",{className:"py-3 px-4 break-words",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:f.company}),n.jsx("div",{className:"text-gray-500 text-xs break-words",children:f.url})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="CUSTOMER"?"bg-green-100 text-green-700":f.status==="PROSPECT"?"bg-purple-100 text-purple-700":f.status==="PARTNER"?"bg-pink-100 text-pink-700":f.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:f.status})}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.industry}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.territory}),n.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[n.jsx(kt,{className:"text-gray-500"}),n.jsx("span",{children:f.phone_number})]})]},p)),u.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const nGe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]});function aGe(){h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All Contacts"),[u,f]=h.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=h.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),y=k=>{k.target.id==="modalBackdrop"&&t(!1)},N=k=>{s(k)},v=()=>{s(null)},j=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},w=(k,_)=>{_.stopPropagation(),i(!0),x(k),t(!0)},S=k=>{const{name:_,value:L}=k.target;x(T=>({...T,[_]:L}))},A=k=>{if(k.preventDefault(),r)f(_=>_.map(L=>L.id===p.id?{...p}:L));else{const _={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};f(L=>[...L,_])}t(!1)};return a?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:v,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Yu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.account}),n.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:n.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[n.jsx(qo,{}),"Export"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",n.jsx("br",{}),a.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",n.jsx("br",{}),a.email]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),a.createdBy," on ",a.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.jsx("br",{}),a.title]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",n.jsx("br",{}),a.assigned]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",n.jsx("br",{}),a.workPhone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Account:"})," ",n.jsx("br",{}),a.account]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",n.jsx("br",{}),a.phone1]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),a.lastUpdated]})]}),n.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[n.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.notes?a.notes:"No additional notes were provided for this contact."})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts...",value:o,onChange:k=>l(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Contacts"}),n.jsx("option",{children:"Option 1"}),n.jsx("option",{children:"Option 2"}),n.jsx("option",{children:"Option 3"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-xs text-gray-700",children:u.map((k,_)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>N(k),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:k.name}),n.jsx("div",{className:"text-xs text-gray-500",children:k.title})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(qx,{className:"text-gray-500"}),n.jsx("span",{children:k.account})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ta,{className:"text-gray-500"}),n.jsx("span",{children:k.email})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(kt,{className:"text-gray-500"}),n.jsx("span",{children:k.phone1})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(kt,{className:"text-gray-500"}),n.jsx("span",{children:k.phone2})]})]})}),n.jsx("td",{className:"py-3 px-4",children:k.department}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(en,{className:"text-gray-500"}),n.jsx("span",{children:k.assigned})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tt,{className:"text-gray-500"}),n.jsx("span",{children:k.created})]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:L=>w(k,L),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})})})})]},_))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),n.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),n.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),n.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),n.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),n.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",children:"Assign To"}),n.jsx("option",{value:"Smith",children:"Smith"}),n.jsx("option",{value:"Doe",children:"Doe"}),n.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),n.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const zb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Za=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),sGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Za,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Za,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Za,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Za,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Za,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),rGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Za,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Za,{label:"Department",name:"department",value:e.department}),n.jsx(Za,{label:"Title",name:"title",value:e.title}),n.jsx(Za,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Za,{label:"Email",name:"email",value:e.email}),n.jsx(Za,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Za,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),iGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Za,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Za,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Za,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Description",name:"description",value:e.description}),n.jsx(Za,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function dee({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(sGe,{data:zb});case 2:return n.jsx(rGe,{data:zb});case 3:return n.jsx(iGe,{data:zb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:zb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(bj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const oGe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function uee({lead:e=oGe,onBack:t}){const[a,s]=h.useState(!1);return e?n.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Yu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),n.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),n.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:n.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsx("p",{children:e.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:e.company})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:e.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:e.department})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:e.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:e.territory})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assign To:"}),n.jsx("p",{children:e.assignedTo})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:e.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:e.workPhone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:e.phone1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:e.phone2})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:e.source})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),n.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",n.jsx("br",{}),e.addressLine2," ",n.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),n.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),n.jsx(dee,{isOpen:a,onClose:()=>s(!1)})]}):null}const lGe=Jf.all(),yT=lGe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function cGe(){const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,d]=h.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[u,f]=h.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=L=>t(L),x=()=>t(null),[y,N]=h.useState(""),[v,j]=h.useState("All Accounts"),w=()=>{s(!1),i(null),f({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=L=>{i(L),s(!0),f({work_ccode:L.work_ccode||"+63",work_phone:L.workPhone||"",m1_ccode:L.m1_ccode||"+63",mobile_phone_1:L.phone1||"",m2_ccode:L.m2_ccode||"+63",mobile_phone_2:L.phone2||""})},A=L=>{window.confirm("Are you sure you want to delete this lead?")&&d(c.filter(T=>T.id!==L))},k=L=>{const{name:T,value:M}=L.target;f(R=>({...R,[T]:M}))},_=L=>{L.preventDefault();const T=new FormData(L.target),M=Object.fromEntries(T.entries());M.name=`${M.firstName} ${M.lastName}`,M.assignedTo=o.find(R=>R.id.toString()===M.assignedTo)?.first_name+" "+o.find(R=>R.id.toString()===M.assignedTo)?.last_name,M.work_ccode=u.work_ccode,M.workPhone=u.work_phone,M.m1_ccode=u.m1_ccode,M.phone1=u.mobile_phone_1,M.m2_ccode=u.m2_ccode,M.phone2=u.mobile_phone_2,d(r?c.map(R=>R.id===r.id?{...R,...M}:R):[...c,{...M,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),w()};return e?n.jsx(uee,{lead:e,onBack:x}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"})," Leads"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[n.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[n.jsx(qo,{})," Download"]}),n.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Leads...",value:y,onChange:L=>N(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:L=>j(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Leads"}),n.jsx("option",{children:"New"}),n.jsx("option",{children:"Contacted"}),n.jsx("option",{children:"Qualified"}),n.jsx("option",{children:"Converted"}),n.jsx("option",{children:"Lost"})]})})]}),n.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[n.jsx("div",{children:"Name"}),n.jsx("div",{children:"Account"}),n.jsx("div",{children:"Title"}),n.jsx("div",{children:"Department"}),n.jsx("div",{children:"Email"}),n.jsx("div",{children:"Work Phone"}),n.jsx("div",{children:"Assigned To"}),n.jsx("div",{children:"Updated"}),n.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(L=>n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(L),children:[n.jsx("div",{className:"truncate",children:L.name}),n.jsx("div",{className:"truncate",children:L.company}),n.jsx("div",{className:"truncate",children:L.title}),n.jsx("div",{className:"truncate",children:L.department}),n.jsx("div",{className:"truncate",children:L.email}),n.jsxs("div",{className:"truncate",children:[L.work_ccode," ",L.workPhone]}),n.jsx("div",{className:"truncate",children:L.assignedTo}),n.jsx("div",{className:"truncate",children:L.lastUpdated}),n.jsxs("div",{className:"flex justify-center space-x-2",children:[n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:T=>{T.stopPropagation(),S(L)},children:n.jsx(ma,{})}),n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:T=>{T.stopPropagation(),A(L.id)},children:n.jsx(Kt,{})})]})]},L.id))]}),a&&n.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:w,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:_,children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),n.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),n.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),n.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),n.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),n.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),n.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"work_ccode",value:u.work_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:yT.map(L=>n.jsx("option",{value:L.code,children:L.code},L.code))}),n.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:u.work_phone,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m1_ccode",value:u.m1_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:yT.map(L=>n.jsx("option",{value:L.code,children:L.code},L.code))}),n.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:u.mobile_phone_1,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m2_ccode",value:u.m2_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:yT.map(L=>n.jsx("option",{value:L.code,children:L.code},L.code))}),n.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:u.mobile_phone_2,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),n.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),n.jsxs("select",{name:"assignedTo",defaultValue:o.find(L=>`${L.first_name} ${L.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",disabled:!0,children:"Select user"}),o.map(L=>n.jsxs("option",{value:L.id,children:[L.first_name," ",L.last_name]},L.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),n.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),n.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),n.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const WB=["To Do","In Progress","Review","Completed"],Dg=10,dGe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},VB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},uGe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,u=o?"Contact":l?"Deal":i?"Account":r?"Lead":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},mGe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,y=()=>e.deal?.name||e.deal_id;let N="Lead",v="",j="",w="",S="Lead",A="",k="",_="";const L=l(),T=p(),M=o(),R=f();if(L){N="Account",S="Account",A=T,v=String(L);const z=c(),O=d(),I=x(),B=y();z?(j="Contact",k="Contact",_=I,w=String(z)):O&&(k="Deal",j="Deal",_=B,w=String(O))}else M?(S="Lead",A=R,N="Lead",v=String(M)):e.related_type==="Account"&&(N="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:A,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:N,relatedTo1:v,relatedType2:j,relatedTo2:w}};function fGe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,L]=h.useState(1),[T,M]=h.useState(null),[R,z]=h.useState(!1),O=Nt(),I=Xt(),[B,ee]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const de=I.state?.openTaskModal,Re=I.state?.initialTaskData;de&&(i(!0),Re&&ee(Oe=>({...Oe,...Re})),O(I.pathname,{replace:!0,state:{}}))},[I,O]);const Q=async()=>{try{const de=await ie.get("/users/all");k(Array.isArray(de.data)?de.data:[])}catch(de){console.error("Failed to fetch users:",de),q.error("Failed to fetch users.")}},te=async()=>{try{x(!0);const de=await ie.get("/tasks/all"),Oe=(Array.isArray(de.data)?de.data:[]).map(mGe);Oe.sort((Ge,et)=>{const mt=Ge.createdAt?new Date(Ge.createdAt):0;return(et.createdAt?new Date(et.createdAt):0)-mt}),console.log("Fetched Tasks:",Oe),f(Oe),a==="list"&&L(1)}catch(de){console.error("Failed to load tasks:",de),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(Q(),te())},[t,e]);const W=()=>{l(null),ee({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ae=(de=null,Re=!1)=>{l(de),d(Re),de?ee({id:de.id,subject:de.title||"",description:de.description||"",priority:de.priority||"Normal",status:de.status||"Not started",dueDate:dGe(de.dueDate),assignedTo:de.assignedToId?String(de.assignedToId):"",notes:de.notes||"",relatedType1Text:de.relatedType1Text||"",relatedTo1Text:de.relatedTo1Text||"",relatedType2Text:de.relatedType2Text||"",relatedTo2Text:de.relatedTo2Text||"",relatedType1:de.relatedType1||"",relatedTo1:de.relatedTo1||"",relatedType2:de.relatedType2||"",relatedTo2:de.relatedTo2||""}):W(),i(!0)},Ee=()=>{i(!1),l(null),d(!1),W()},se=async de=>{const Re=uGe(de);try{o&&!c?(await ie.put(`/tasks/${o.id}`,Re),q.success("Task updated successfully.")):(await ie.post("/tasks/create",Re),q.success("Task created successfully.")),i(!1),await te()}catch(Oe){console.error("Failed to save task:",Oe);const Ge=Oe.response?.data?.detail||"Failed to save task.";q.error(Ge)}},Y=de=>{de&&M({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:de.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:de.id}})},pe=async()=>{if(!T?.action){M(null);return}const{action:de}=T;z(!0);try{de.type==="delete"&&(await ie.delete(`/tasks/${de.targetId}`),q.success("Task deleted successfully."),await te())}catch(Re){console.error("Task action failed:",Re),q.error("Failed to delete task.")}finally{z(!1),M(null)}},Se=()=>{R||M(null)},me=h.useMemo(()=>{const de=y.trim().toLowerCase();return[...u].sort((Oe,Ge)=>{const et=Oe.createdAt?new Date(Oe.createdAt):0;return(Ge.createdAt?new Date(Ge.createdAt):0)-et}).filter(Oe=>{const Ge=de===""||Oe.title?.toLowerCase().includes(de)||Oe.description?.toLowerCase().includes(de)||Oe.assignedToName?.toLowerCase().includes(de)||Oe.createdBy?.toLowerCase().includes(de),et=v==="Filter by Status"||Oe.status===v,mt=w==="Filter by Priority"||Oe.priority===w;return Ge&&et&&mt})},[u,y,v,w]);h.useEffect(()=>{L(1)},[y,v,w,a]),h.useEffect(()=>{if(a==="list"){const de=me.length===0?1:Math.ceil(me.length/Dg);_>de&&L(de)}},[me.length,_,a]);const ye=h.useMemo(()=>{if(a==="board")return me;const de=(_-1)*Dg;return me.slice(de,de+Dg)},[me,_,a]),re=h.useMemo(()=>{const de=new Date;return[{title:"To Do",value:u.filter(Re=>Re.status==="Not started").length,icon:Ws,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(Re=>Re.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(Re=>Re.status==="Completed").length,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(Re=>Re.dueDate&&new Date(Re.dueDate)<de&&Re.status!=="Completed").length,icon:Vu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(Re=>Re.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),De=de=>de.dueDate&&new Date(de.dueDate)<new Date&&de.status!=="Completed",ve=de=>{switch(de.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ke=de=>{switch(de){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ce=de=>{switch(de){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>ae(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(gn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:re.map(de=>n.jsx(hGe,{...de},de.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:de=>N(de.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:de=>j(de.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),WB.map(de=>n.jsx("option",{children:de},de))]}),n.jsxs("select",{value:w,onChange:de=>S(de.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&me.length===0&&n.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&me.length>0&&a==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:WB.map(de=>{const Re=ye.filter(Oe=>Oe.status===de);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:de}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:Re.length})]}),n.jsx("div",{className:`space-y-3 ${Re.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:Re.length>0?Re.map(Oe=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${ve(Oe)}`,onClick:()=>ae(Oe,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Oe.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Oe.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Oe.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:De(Oe)?"text-red-600":"text-gray-600",children:Oe.dateAssigned?VB(Oe.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Ge=>{Ge.stopPropagation(),ae(Oe)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ua,{})}),n.jsx("button",{type:"button",onClick:Ge=>{Ge.stopPropagation(),Y(Oe)},className:"text-red-500 hover:text-red-700",children:n.jsx(Kt,{})})]})]},Oe.id)):n.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},de)})}),!p&&!t&&me.length>0&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:ye.map(de=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",de),ae(de,!0)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:de.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ke(de.status||"To Do")}`,children:de.status||"To Do"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(de.priority||"Low")}`,children:de.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:de.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${De(de)?"text-red-600 font-medium":""}`,children:de.dateAssigned?VB(de.dateAssigned):""}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",onClick:Re=>Re.stopPropagation(),children:[n.jsxs("button",{type:"button",onClick:()=>ae(de),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(ua,{})," Edit"]}),n.jsxs("button",{type:"button",onClick:()=>Y(de),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[n.jsx(Kt,{})," Delete"]})]})})]},de.id))})]})})}),!p&&!t&&a==="list"&&n.jsx(an,{className:"mt-6",totalItems:me.length,pageSize:Dg,currentPage:me.length===0?0:_,onPrev:()=>L(de=>Math.max(de-1,1)),onNext:()=>L(de=>Math.min(de+1,Math.max(1,Math.ceil(me.length/Dg)||1))),label:"tasks"}),n.jsx(x0,{isOpen:r,onClose:Ee,onSave:se,onEdit:()=>d(!1),setFormData:ee,formData:B,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Y}),T&&n.jsx(gGe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:pe,onCancel:Se,loading:R})]})}function hGe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function gGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function pGe(){h.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(""),[c,d]=h.useState("All Statuses"),[u,f]=h.useState({show:!1,action:null,campaign:null}),[p,x]=h.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[y,N]=h.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),v=p.filter(z=>{const O=c==="All Statuses"||z.status===c,I=z.name.toLowerCase().includes(o.toLowerCase())||z.subject.toLowerCase().includes(o.toLowerCase());return O&&I}),j=()=>{s(!1),N({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},w=(z,O)=>{O.stopPropagation(),s(!0),N(z),t(!0)},S=(z,O)=>{O.stopPropagation(),f({show:!0,action:"delete",campaign:z})},A=z=>{z.preventDefault(),f({show:!0,action:a?"edit":"add",campaign:{...y}})},k=()=>{if(u.action==="add"){const z={...u.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(O=>[...O,z]),t(!1)}else u.action==="edit"?(x(z=>z.map(O=>O.id===u.campaign.id?{...u.campaign}:O)),t(!1)):u.action==="delete"&&x(z=>z.filter(O=>O.id!==u.campaign.id));f({show:!1,action:null,campaign:null})},_=()=>{f({show:!1,action:null,campaign:null})},L=z=>i(z),T=()=>i(null),M=z=>{const{name:O,value:I}=z.target;N(B=>({...B,[O]:I}))},R=z=>{z.target.id==="modalBackdrop"&&t(!1)};return r?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:T,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[n.jsx(Yu,{className:"mr-1 w-5 h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),n.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Subject:"})," ",n.jsx("br",{}),r.subject]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),r.createdBy]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created On:"})," ",n.jsx("br",{}),r.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",n.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),n.jsxs("p",{className:"sm:col-span-2",children:[n.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",n.jsx("br",{}),r.content]}),r.status==="Scheduled"&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",n.jsx("br",{}),r.recipients]})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(ta,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),n.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:o,onChange:z=>l(z.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:z=>d(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Draft"}),n.jsx("option",{children:"Scheduled"}),n.jsx("option",{children:"Sent"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),n.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Recipients"}),n.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-sm text-gray-700",children:v.map((z,O)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>L(z),children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:z.name}),n.jsx("td",{className:"py-3 px-4",children:z.subject}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${z.status==="Scheduled"?"bg-yellow-100 text-yellow-700":z.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:z.status})}),n.jsx("td",{className:"py-3 px-4",children:z.recipients?`${z.recipients} emails`:""}),n.jsx("td",{className:"py-3 px-4",children:z.scheduleDate?new Date(z.scheduleDate).toLocaleString():""}),n.jsx("td",{className:"py-3 px-4 text-center",onClick:I=>I.stopPropagation(),children:n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx("button",{onClick:I=>w(z,I),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})}),n.jsx("button",{onClick:I=>S(z,I),className:"text-red-500 hover:text-red-700",children:n.jsx(Kt,{})})]})})]},O))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:R,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:z=>z.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:a?"Edit Campaign":"Add New Campaign"}),n.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:y.name,onChange:M,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:y.subject,onChange:M,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"status",value:y.status,onChange:M,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Sent",children:"Sent"})]})]}),y.status==="Scheduled"&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",name:"scheduleDate",value:y.scheduleDate,onChange:M,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"recipients",value:y.recipients,onChange:M,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"content",rows:4,value:y.content,onChange:M,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),u.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:_,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:u.action==="delete"?"Confirm Delete":u.action==="edit"?"Confirm Edit":"Confirm Add"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:u.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):u.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):n.jsxs(n.Fragment,{children:["Add new campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const xGe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],YB={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function yGe(){h.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=h.useState(xGe),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(""),[u,f]=h.useState("All Categories"),[p,x]=h.useState({name:"",category:"",subject:"",body:""}),[y,N]=h.useState({show:!1,action:null,template:null}),v=()=>{l(null),i(null),s(!1)},j=O=>{x({...p,[O.target.name]:O.target.value})},w=()=>{N({show:!0,action:"add",template:{...p}})},S=O=>{i(O),x({name:O.name,category:O.category,subject:O.subject,body:O.body})},A=()=>{N({show:!0,action:"edit",template:{...p,id:r.id}})},k=O=>{N({show:!0,action:"delete",template:O})},_=O=>{Vx.success(`Template "${O.name}" selected for use!`),N({show:!1,action:null,template:null})},L=()=>{const O=y.template;if(y.action==="add"){const I={...O,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(B=>[I,...B]),s(!1),x({name:"",category:"",subject:"",body:""})}else y.action==="edit"?(t(I=>I.map(B=>B.id===O.id?{...O}:B).sort((B,ee)=>new Date(ee.date).getTime()-new Date(B.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),l(null)):y.action==="delete"&&(t(I=>I.filter(B=>B.id!==O.id)),l(null));N({show:!1,action:null,template:null})},T=()=>{N({show:!1,action:null,template:null})},M=O=>l(O),R=e.filter(O=>O.name.toLowerCase().includes(c.toLowerCase())&&(u==="All Categories"||O.category===u)),z=(O,I=!1)=>n.jsxs("div",{className:"flex flex-col justify-between h-full",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:O.name}),n.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${YB[O.category]||YB.default}`,children:O.category})]}),n.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:O.subject}),n.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${I?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:I?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:O.body})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!I&&n.jsxs("button",{onClick:B=>{B.stopPropagation(),_(O)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(un,{})," Use Template"]}),I&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:B=>{B.stopPropagation(),S(O)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(ua,{})," Edit"]}),n.jsxs("button",{onClick:B=>{B.stopPropagation(),k(O)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[n.jsx(Kt,{})," Delete"]})]}),n.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",O.createdBy," | ",O.date]})]})]});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[n.jsx(Wx,{position:"top-center",reverseOrder:!1}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(un,{className:"mr-2 text-black"})," Templates"]}),n.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:O=>d(O.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:u,onChange:O=>f(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Categories"}),n.jsx("option",{children:"Welcome"}),n.jsx("option",{children:"Follow-up"}),n.jsx("option",{children:"Newsletter"}),n.jsx("option",{children:"Promotional"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:R.map(O=>n.jsxs("div",{onClick:()=>M(O),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow",children:z(O)})]},O.id))}),(a||r)&&n.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:O=>O.stopPropagation(),children:[n.jsx("button",{onClick:v,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),n.jsxs("form",{onSubmit:O=>{O.preventDefault(),r?A():w()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:j,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"category",value:p.category,onChange:j,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"Welcome",children:"Welcome"}),n.jsx("option",{value:"Follow-up",children:"Follow-up"}),n.jsx("option",{value:"Newsletter",children:"Newsletter"}),n.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:j,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:j,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),o&&!r&&n.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:O=>O.stopPropagation(),children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:z(o,!0)})]})}),y.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:T,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:y.action==="delete"?"Confirm Delete":y.action==="edit"?"Confirm Update":y.action==="add"?"Confirm Add":"Confirm Use"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:y.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):y.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):y.action==="add"?n.jsxs(n.Fragment,{children:["Add new template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]}):n.jsxs(n.Fragment,{children:["Use template"," ",n.jsx("span",{className:"font-semibold",children:y.template.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:L,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const mv=e=>{if(e==null||e==="")return 0;const t=Number(e);return Number.isFinite(t)?t:0},af=(e,t="")=>{const a=mv(e);return`${t}${a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},QB=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},bGe=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"2-digit"})},vGe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},KB=(e,t,a)=>{const s=new Date,r=e?.contact?`${e.contact.first_name||""} ${e.contact.last_name||""}`.trim():"",i=e?.validity_days?String(e.validity_days):"";return{issuedDate:QB(e?.presented_date)||QB(s),subject:"Price Quotation",forName:e?.account?.name||"",attn:r,intro:"We are pleased to submit our proposal as follows:",notes:e?.notes||"",terms:{validity:i?`${i} days from the date of quotation.`:"",payment:"",deliveryPeriod:"",deliveryPoint:""},preparedBy:t?`${t.first_name||""} ${t.last_name||""}`.trim():"",approvedBy:a?.ceo_name||"Admin"}};function Fb(){const e=Nt(),t=Xt(),{quoteId:a}=Ho(),{user:s}=Gt(),r=s?.company?.currency||"",i=h.useMemo(()=>`quote-print:${a||""}`,[a]),[o,l]=h.useState(()=>{const A=t.state?.quote;return A&&String(A.id)===String(a)?A:null}),[c,d]=h.useState(()=>t.state?.companyInfo||null),[u,f]=h.useState(!1),[p,x]=h.useState(()=>{try{const A=sessionStorage.getItem(i);return A?JSON.parse(A):null}catch{return null}});h.useEffect(()=>{if(!a)return;let A=!0;return(async()=>{try{f(!0);const L=!c?await ie.get("/company/invoice-info"):null;if(!A)return;if(L?.data&&d(L.data),!o){const T=await ie.get("/quotes/admin/fetch-all"),R=(Array.isArray(T?.data)?T.data:[]).find(z=>String(z.id)===String(a));R&&l(R)}}catch(_){const L=_?.response?.data?.detail||_?.message||"Failed to load quotation.";q.error(L)}finally{A&&f(!1)}})(),()=>{A=!1}},[a]),h.useEffect(()=>{o&&x(A=>{if(A)return A;try{const _=sessionStorage.getItem(i);if(_)return JSON.parse(_)}catch{}const k=KB(o,s,c);try{sessionStorage.setItem(i,JSON.stringify(k))}catch{}return k})},[o,s,c,i]);const y=A=>{x(A);try{sessionStorage.setItem(i,JSON.stringify(A))}catch{}},N=Array.isArray(o?.items)?o.items:[],v=mv(o?.discount_amount),j=mv(o?.tax_rate);if(!p)return n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-gray-700",children:u?"Loading...":""})});const w=p.preparedBy||(s?`${s.first_name||""} ${s.last_name||""}`.trim():""),S=p.approvedBy||c?.ceo_name||"CEO";return n.jsxs("div",{className:"min-h-screen bg-gray-50 quote-print-root",children:[n.jsx("style",{children:`
        @page { size: A4; margin: 5mm; }
        @media print {
          html, body { margin: 0 !important; padding: 0 !important; }
          .no-print { display: none !important; }
          .print-surface { box-shadow: none !important; border: none !important; }
          body { background: white !important; }
          .quote-print-root { background: white !important; }

          /* Remove screen gutters/max-width so print is tight */
          .quote-print-page { max-width: none !important; margin: 0 !important; padding: 0 !important; }

          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

          /* Keep the quote meta proportions while printing (left 2 cols + fixed quotation col) */
          .quote-meta-grid { grid-template-columns: 1fr 1fr 240px !important; padding: 0px; }
        }
      `}),n.jsx("div",{className:"no-print sticky top-0 z-10 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3",children:[n.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>e(-1),children:"Back"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>{if(!o)return;const A=KB(o,s,c);y(A)},disabled:!o,children:"Reset fields"}),n.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 text-sm disabled:opacity-70",onClick:()=>window.print(),disabled:!o||u,children:"Print"})]})]})}),n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6 quote-print-page",children:[n.jsx("div",{className:"no-print bg-white border border-gray-200 rounded-xl p-4 mb-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Date"}),n.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.issuedDate||"",onChange:A=>y({...p,issuedDate:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.subject||"",onChange:A=>y({...p,subject:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"For"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.forName||"",onChange:A=>y({...p,forName:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attn"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.attn||"",onChange:A=>y({...p,attn:A.target.value})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Intro"}),n.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.intro||"",onChange:A=>y({...p,intro:A.target.value})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.notes||"",onChange:A=>y({...p,notes:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Validity"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.validity||"",onChange:A=>y({...p,terms:{...p.terms,validity:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Payment"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.payment||"",onChange:A=>y({...p,terms:{...p.terms,payment:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Period"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPeriod||"",onChange:A=>y({...p,terms:{...p.terms,deliveryPeriod:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Point"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPoint||"",onChange:A=>y({...p,terms:{...p.terms,deliveryPoint:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Approved by"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.approvedBy||"",onChange:A=>y({...p,approvedBy:A.target.value})})]})]})}),n.jsxs("div",{className:"print-surface bg-white border border-gray-200 rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-gray-300 pb-3",children:[n.jsxs("div",{className:"min-w-0 w-4/5",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900 uppercase",children:c?.company_name||""}),c?.address?n.jsx("div",{className:"text-sm text-gray-700",children:c.address}):null,c?.company_number?n.jsx("div",{className:"text-sm text-gray-700",children:c.company_number}):null,c?.ceo_email?n.jsxs("div",{className:"text-sm text-gray-700",children:["Email: ",c.ceo_email]}):null,c?.company_website?n.jsxs("div",{className:"text-sm text-gray-700",children:["Web: ",c.company_website]}):null]}),n.jsx("div",{className:"flex items-start gap-3 w-1/6",children:c?.company_logo?n.jsx("img",{src:c.company_logo,alt:"Company logo",className:"w-full h-auto object-contain"}):null})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"quote-meta-grid grid grid-cols-3 text-sm border border-gray-300",children:[n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"For:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.forName||""})]}),n.jsx("div",{className:"quote-meta-quote justify-center text-center p-1 border-b border-t border-r border-gray-300",children:n.jsx("div",{className:"text-xl font-bold text-gray-900",children:"QUOTATION"})}),n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"Attn:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.attn||""})]}),n.jsx("div",{className:"quote-meta-quote justify-center text-center p-2 border-t border-r border-gray-300",children:n.jsxs("div",{className:"text-sm text-gray-700",children:["No."," ",n.jsx("span",{className:"font-semibold",children:vGe(o?.quote_id||o?.id)})]})}),n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"Subject:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.subject||""})]}),n.jsx("div",{className:"quote-meta-quote md:justify-center border-r border-b border-gray-300 text-center p-2",children:n.jsx("div",{className:"text-sm text-gray-700",children:bGe(p.issuedDate)})})]}),n.jsx("div",{className:"mt-4 text-sm text-gray-900 whitespace-pre-wrap",children:p.intro||""})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border border-gray-400 border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-14",children:"Item"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 text-left",children:"Description"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Qty"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Unit"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Unit Price"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Total Cost"})]})}),n.jsx("tbody",{children:N.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"border border-gray-400 px-2 py-4 text-center text-gray-600",children:"No line items."})}):N.map((A,k)=>{const _=A?.name?String(A.name).trim():"",L=A?.description?String(A.description).trim():"",T=A?.variant?String(A.variant).trim():"",M=A?.sku?String(A.sku).trim():"",R=T&&M?`${T} (${M})`:M?`(${M})`:T,O=[_,L,R].map(I=>I?String(I).trim():"").filter(Boolean).join(`
`);return n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:k+1}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 whitespace-pre-wrap",children:O}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:mv(A?.quantity)||""}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:A?.unit||""}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:af(A?.unit_price,r)}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:af(A?.line_total,r)})]},A?.id??k)})})]})}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("table",{className:"text-sm border border-gray-400 border-collapse min-w-[280px]",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"SUB TOTAL"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:af(o?.subtotal,r)})]}),v>0?n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"Less: Discount"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:af(o?.discount_amount,r)})]}):null,n.jsxs("tr",{children:[n.jsxs("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:["Tax ",j.toFixed(0),"%"]}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:af(o?.tax_amount,r)})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-bold",children:"TOTAL"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right font-bold",children:af(o?.total_amount,r)})]})]})})}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"TERMS & CONDITIONS:"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Validity"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.validity||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Payment"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.payment||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Delivery Period"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPeriod||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Delivery Point"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPoint||""]})]})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"NOTE:"}),n.jsx("div",{className:"text-sm whitespace-pre-wrap text-gray-900",children:p.notes||""})]})]}),n.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-10 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-700",children:"Prepared by:"}),n.jsx("div",{className:"mt-8 border-b border-gray-400"}),n.jsx("div",{className:"mt-2 font-semibold",children:w})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-700",children:"Approved by:"}),n.jsx("div",{className:"mt-8 border-b border-gray-400"}),n.jsx("div",{className:"mt-2 font-semibold",children:S})]})]}),n.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"Generated from Sari-Sari CRM quotation."})]})]})]})}function wGe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Xt(),p=Nt(),{logout:x}=Qs(),{user:y,fetchUser:N}=Gt(),j={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"}[f.pathname]||"Group Manager Panel";return h.useEffect(()=>{N()},[]),h.useEffect(()=>{const w=()=>{N()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[N]),h.useEffect(()=>{if(!y?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",A=w?"localhost:8000":window.location.host,k=`${S}//${A}/ws/notifications?user_id=${y.id}`,_=new WebSocket(k);return _.onmessage=L=>{const T=JSON.parse(L.data);o(M=>[T,...M]),c(M=>M+1)},()=>_.close()},[y?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(Xf,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(lx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[y?.first_name," ",y?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:y?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[y?.first_name," ",y?.middle_name," ",y?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/group-manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/group-manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function NGe(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Xt(),{user:d}=Gt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/group-manager/dashboard",className:({isActive:x})=>x?u:f,children:[n.jsx(cx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-lg"}),"Sales"]}),n.jsx(At,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/accounts",className:({isActive:x})=>x?u:f,children:[n.jsx(vd,{})," Accounts"]}),n.jsxs($t,{to:"/group-manager/contacts",className:({isActive:x})=>x?u:f,children:[n.jsx(en,{})," Contacts"]}),n.jsxs($t,{to:"/group-manager/leads",className:({isActive:x})=>x?u:f,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs($t,{to:"/group-manager/deals",className:({isActive:x})=>x?u:f,children:[n.jsx(Jt,{})," Deals"]}),n.jsxs($t,{to:"/group-manager/quotes",className:({isActive:x})=>x?u:f,children:[n.jsx(un,{})," Quotes"]}),n.jsxs($t,{to:"/group-manager/targets",className:({isActive:x})=>x?u:f,children:[n.jsx(ur,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(At,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/tasks",className:({isActive:x})=>x?u:f,children:[n.jsx(Vt,{})," Tasks"]}),n.jsxs($t,{to:"/group-manager/meetings",className:({isActive:x})=>x?u:f,children:[n.jsx(Tt,{})," Meetings"]}),n.jsxs($t,{to:"/group-manager/calls",className:({isActive:x})=>x?u:f,children:[n.jsx(Rs,{})," Calls"]}),n.jsxs($t,{to:"/group-manager/audit",className:({isActive:x})=>x?u:f,children:[n.jsx(Ts,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/group-manager/territory",className:({isActive:x})=>x?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(vL,{className:"text-lg"}),"Settings"]}),n.jsx(At,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/users",className:({isActive:x})=>x?u:f,children:[n.jsx(na,{})," Users"]}),n.jsxs($t,{to:"/group-manager/manage-account",className:({isActive:x})=>x?u:f,children:[n.jsx(en,{})," Your Profile"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(wGe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(ex,{})})]})]})}const jGe=e=>n.jsx(qt,{...e}),CGe=e=>n.jsx(vd,{...e}),mee=e=>n.jsx(Ws,{...e}),SGe=e=>n.jsx(ox,{...e}),_Ge=e=>n.jsx(Jw,{...e}),AGe=e=>n.jsx(Tt,{...e}),TGe=e=>n.jsx(kt,{...e}),EGe=e=>n.jsx(tN,{...e}),fee=e=>n.jsx(eN,{...e}),kGe=e=>n.jsx(na,{...e}),hee=e=>n.jsx(en,{...e}),LGe=e=>n.jsx(Yn,{...e}),gee=e=>n.jsx(Jt,{...e}),PGe=e=>n.jsx(un,{...e}),pee=e=>n.jsx(ur,{...e}),DGe=e=>n.jsx(ga,{...e}),OGe=e=>n.jsx(Tt,{...e}),MGe=e=>n.jsx(Rs,{...e}),IGe=e=>n.jsx(Zl,{...e}),$Ge=e=>n.jsx(Ts,{...e}),xee=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},RGe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},zGe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},FGe=e=>{switch(e){case"call":return{Icon:TGe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:EGe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:AGe,color:"text-blue-500",bgColor:"bg-blue-100"}}},UGe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},BGe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=Nt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:CGe,label:"Account"},{icon:hee,label:"Contact"},{icon:LGe,label:"Leads"},{icon:gee,label:"Deals"},{icon:PGe,label:"Quotes"},{icon:pee,label:"Target"},{icon:DGe,label:"Task"},{icon:OGe,label:"Meeting"},{icon:MGe,label:"Call"},{icon:$Ge,label:"Audit"},{icon:IGe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(jGe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},HGe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=Nt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,y=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return y<1?"Just now":y<60?`${y} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},qGe=({logs:e,loading:t})=>{const a=Nt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(fee,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(HGe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},GGe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),WGe=({revenueData:e,loading:t})=>{const a=Nt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let A=0;A<=j;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",A=v.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const L=_>0;if(k&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:L,willBeAdded:S&&L,allFields:Object.keys(v)})),S&&k&&L)try{let T=new Date(w);if(isNaN(T.getTime())){const M=String(w).split("T")[0];T=new Date(M+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const M=T.getFullYear(),R=T.getMonth()+1,z=`${M}-${String(R).padStart(2,"0")}`;l[z]||(l[z]=0),l[z]+=_,c++,console.log(` Added deal ${v.id} to month ${z}: ${_}, total: ${l[z]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${z} (Year: ${M}, Month: ${R})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:L,closeDate:w,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(v=>parseInt(v.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],y=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;y.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(f.length>0){const v=Math.max(...f);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${j}`),y.push(A),A>0&&console.log(`Month ${s[w]} ${j} (${S}): ${A}`)}}const N=Math.max(...y,1);return console.log("Final chart data:",{labels:x,revenues:y,maxRevenue:N,hasData:y.some(v=>v>0)}),{labels:x,revenues:y,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(fee,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(cj,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},bT=({title:e,items:t,children:a,onSeeAll:s})=>{const r=Nt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},VGe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=Nt(),{text:l,bg:c}=zGe(s||"Website"),d=x=>{if(!x)return"Unknown";const y=new Date(x),v=new Date-y,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?y.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},YGe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=Nt(),u={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:f,bg:p}=RGe(u),x=parseFloat(t||0),y=o?x>=o?"up":"down":"up",N=y==="up"?SGe:_Ge,v=y==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/group-manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${p} px-2 py-0.5 rounded-full`,children:u})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:xee(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},QGe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=Nt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:y}=FGe(f),{text:N,bg:v}=UGe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const L=new Date(_),M=L-new Date,R=Math.floor(M/864e5);return R===0?`Today, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:L.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/group-manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/group-manager/meetings/info?id=${o}`)):d("/group-manager/tasks"):d(f==="call"?`/group-manager/calls/info?id=${o}`:f==="meeting"?`/group-manager/meetings/info?id=${o}`:"/group-manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${y} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(mee,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(hee,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},KGe=()=>{const e=Nt(),{user:t}=Gt(),a=t?.company?.currency||"",[s,r]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,y]=h.useState([]),[N,v]=h.useState([]),[j,w]=h.useState(!0),[S,A]=h.useState(null),[k,_]=h.useState(""),[L,T]=h.useState([]),[M,R]=h.useState([]),[z,O]=h.useState([]),[I,B]=h.useState([]),[ee,Q]=h.useState(0),[te,W]=h.useState(new Date),ae=h.useRef(null),Ee=h.useRef(null),se=h.useMemo(()=>{try{if(!k.trim())return[];const me=k.toLowerCase().trim(),ye=[];return Array.isArray(L)&&L.forEach(re=>{const De=`${re.first_name||""} ${re.last_name||""}`.trim().toLowerCase(),ve=(re.company_name||"").toLowerCase(),ke=(re.email||"").toLowerCase(),Ce=(re.phone||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me)||Ce.includes(me))&&ye.push({id:re.id,name:`${re.first_name||""} ${re.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:re.company_name||"No company",route:`/group-manager/leads/${re.id}`})}),Array.isArray(M)&&M.forEach(re=>{const De=(re.name||"").toLowerCase(),ve=(re.account?.name||"").toLowerCase(),ke=(re.description||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me))&&ye.push({id:re.id,name:re.name||"Unnamed Deal",type:"Deal",details:re.account?.name||"No account",route:`/group-manager/deals/info?id=${re.id}`})}),Array.isArray(z)&&z.forEach(re=>{const De=(re.name||"").toLowerCase(),ve=(re.email||"").toLowerCase(),ke=(re.phone||"").toLowerCase(),Ce=(re.website||"").toLowerCase();(De.includes(me)||ve.includes(me)||ke.includes(me)||Ce.includes(me))&&ye.push({id:re.id,name:re.name||"Unnamed Account",type:"Account",details:re.email||re.phone||"No contact info",route:"/group-manager/accounts"})}),ye.slice(0,10)}catch(me){return console.error("Error in search:",me),[]}},[k,L,M,z]),Y=me=>{me.route&&(e(me.route),_(""))},pe=h.useCallback(async()=>{w(!0),A(null);try{const[me,ye,re,De,ve,ke,Ce,de]=await Promise.all([ie.get("/leads/admin/getLeads").catch(X=>(console.error("Error fetching leads:",X),{data:[]})),ie.get("/deals/admin/fetch-all").catch(X=>(console.error("Error fetching deals:",X),{data:[]})),ie.get("/accounts/admin/fetch-all").catch(X=>(console.error("Error fetching accounts:",X),{data:[]})),ie.get("/tasks/all").catch(X=>(console.error("Error fetching tasks:",X),{data:[]})),ie.get("/meetings/admin/fetch-all").catch(X=>(console.error("Error fetching meetings:",X),{data:[]})),ie.get("/calls/admin/fetch-all").catch(X=>(console.error("Error fetching calls:",X),{data:[]})),ie.get("/logs/read-all").catch(X=>(console.error("Error fetching logs:",X),{data:[]})),ie.get("/targets/admin/fetch-all").catch(X=>(console.error("Error fetching targets:",X),{data:[]}))]),Re=Array.isArray(me.data)?me.data:[],Oe=Array.isArray(ye.data)?ye.data:[],Ge=Array.isArray(re.data)?re.data:[],et=Array.isArray(De.data)?De.data:[],mt=Array.isArray(ve.data)?ve.data:[],Fe=Array.isArray(ke.data)?ke.data:[],ot=Array.isArray(Ce.data)?Ce.data:[],We=Array.isArray(de.data)?de.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Oe.length),Oe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Oe[0],null,2)),console.log("First deal keys:",Object.keys(Oe[0]))),T(Re),R(Oe),O(Ge),B(We);const Ke=We.reduce((X,Ae)=>{const Pe=Ae.amount||Ae.value||Ae.target_amount||0,Qe=parseFloat(typeof Pe=="string"?Pe.replace(/[^\d.-]/g,""):Pe);return X+(Number.isFinite(Qe)?Qe:0)},0);Q(Ke);const Ze=Re.filter(X=>X.status&&!["Lost","Converted"].includes(X.status)).length,Me=et.filter(X=>!X.dueDate||X.status==="Completed"?!1:new Date(X.dueDate)<new Date).length;r({activeLeads:Ze,totalDeals:Oe.length,activeAccounts:Ge.length,overdueTasks:Me});const je=[...Re].sort((X,Ae)=>new Date(Ae.created_at||0)-new Date(X.created_at||0)).slice(0,5);o(je);const ce=[...Oe].sort((X,Ae)=>new Date(Ae.created_at||0)-new Date(X.created_at||0)).slice(0,5);c(ce);const oe=new Date,U=[];Fe.forEach(X=>{const Ae=X.due_date||X.call_time,Pe=(X.status||"").toUpperCase();if(Ae){const Qe=new Date(Ae);Pe==="COMPLETED"||Pe==="MISSED"||Pe==="NOT_HELD"||Pe==="HELD"||U.push({type:"Call",title:X.subject||"Untitled Call",assignedTo:X.assigned_to||(X.call_assign_to?`${X.call_assign_to.first_name||""} ${X.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ae,priority:(X.priority||"MEDIUM").toUpperCase(),id:X.id,activityType:"call",fullData:X})}}),mt.forEach(X=>{const Ae=X.dueDate||X.start_time,Pe=(X.status||"").toUpperCase();if(Ae){const Qe=new Date(Ae);Pe==="COMPLETED"||Pe==="CANCELLED"||Pe==="DONE"||U.push({type:"Meeting",title:X.subject||X.activity||"Untitled Meeting",assignedTo:X.assignedTo||(X.meet_assign_to?`${X.meet_assign_to.first_name||""} ${X.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ae,priority:(X.priority||"MEDIUM").toUpperCase(),id:X.id,activityType:"meeting",fullData:X})}});const V={HIGH:1,MEDIUM:2,LOW:3},be=U.sort((X,Ae)=>{const Pe=V[X.priority]||3,Qe=V[Ae.priority]||3;if(Pe!==Qe)return Pe-Qe;const nt=new Date(X.scheduledDate||0),wt=new Date(Ae.scheduledDate||0);return nt-wt}).slice(0,5);u(be),p(Oe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Oe.length);const ze=Oe.filter(X=>(X.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",ze.length),ze.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),ze.forEach((X,Ae)=>{let Pe=X.amount;Pe&&typeof Pe=="object"?Pe.toString?Pe=parseFloat(Pe.toString()):Pe=parseFloat(Pe):Pe=parseFloat(Pe)||0,console.log(`Deal ${Ae+1}:`,{id:X.id,name:X.name,stage:X.stage,stage_upper:(X.stage||"").toUpperCase(),amount:X.amount,amount_parsed:Pe,amount_type:typeof X.amount,close_date:X.close_date,close_date_type:typeof X.close_date,close_date_value:X.close_date?new Date(X.close_date):null,has_close_date:!!X.close_date,has_amount:Pe>0,all_keys:Object.keys(X),full_deal:X})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Oe.map(X=>X.stage))),v(Oe);const le=[...ot].sort((X,Ae)=>new Date(Ae.timestamp||0)-new Date(X.timestamp||0));y(le)}catch(me){console.error("Error fetching dashboard data:",me),A("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),pe(),ae.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),pe(),W(new Date)},3e4),()=>{ae.current&&clearInterval(ae.current)}),[pe]),h.useEffect(()=>{if(!t||!t.id)return;let me=0;const ye=3;let re=null;const De=()=>{const ve=window.location.protocol==="https:"?"wss:":"ws:",ke=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ce=`${ve}//${ke}/ws/notifications?user_id=${t.id}`;try{const de=new WebSocket(Ce);Ee.current=de,de.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),me=0},de.onmessage=Re=>{try{const Oe=JSON.parse(Re.data);console.log(" Real-time notification received:",Oe),Oe.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(Oe.event)&&(console.log(" Refreshing dashboard due to:",Oe.event),pe(),W(new Date))}catch(Oe){console.error("Error parsing WebSocket message:",Oe)}},de.onerror=Re=>{me===0&&console.warn(" WebSocket connection unavailable (this is optional)")},de.onclose=()=>{me<ye&&(me++,re=setTimeout(()=>{t&&t.id&&De()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return De(),()=>{re&&clearTimeout(re),Ee.current&&(Ee.current.close(),Ee.current=null)}},[t,pe]);const Se=[{icon:kGe,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:pee,title:"Total Targets",value:xee(ee,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/group-manager/targets")},{icon:gee,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:mee,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",j,"error:",S),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[j&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:S})}),n.jsx("div",{className:"mb-8",children:n.jsx(BGe,{searchQuery:k,onSearchChange:_,searchResults:se,onSearchResultClick:Y})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:Se.map(me=>n.jsx(GGe,{...me,loading:j},me.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(qGe,{logs:x,loading:j}),n.jsx(yj,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(xj,{leads:L,deals:M,targets:I,currencySymbol:a,basePath:"/group-manager"})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(WGe,{revenueData:N,loading:j})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(bT,{title:"Latest Leads",children:i.length>0?i.map((me,ye)=>n.jsx(VGe,{...me},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(bT,{title:"Latest Deals",children:j?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((me,ye)=>n.jsx(YGe,{...me,currencySymbol:a},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(bT,{title:"Upcoming Activities",children:d.length>0?d.map((me,ye)=>n.jsx(QGe,{...me},me.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},vT=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],wT={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},cr=e=>e?e.toUpperCase():"",NT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",XGe=e=>{switch(cr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},ZGe=e=>{switch(cr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function JGe(){const e=Nt(),{user:t}=Gt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),[c,d]=h.useState(null),[u,f]=h.useState(null),[p,x]=h.useState(wT),[y,N]=h.useState(null),[v,j]=h.useState([]),[w,S]=h.useState(!1),[A,k]=h.useState([]),[_,L]=h.useState(null),[T,M]=h.useState([]),[R,z]=h.useState([]),[O,I]=h.useState("Filter by Status"),[B,ee]=h.useState(""),[Q,te]=h.useState(null),[W,ae]=h.useState(!1),[Ee,se]=h.useState(1),[Y,pe]=h.useState(10),[Se,me]=h.useState("Overview"),[ye,re]=h.useState(""),[De,ve]=h.useState(!1),[ke,Ce]=h.useState({}),[de,Re]=h.useState(null),[Oe,Ge]=h.useState(new Set),[et,mt]=h.useState(!1),{comments:Fe,addComment:ot,refresh:We}=Aa({relatedType:"account",relatedId:y?.id});h.useEffect(()=>{y?.id&&We()},[y?.id,We]);const Ke=h.useCallback(async(E=null)=>{S(!0);try{const Z=await ie.get("/accounts/admin/fetch-all"),Le=[...Array.isArray(Z.data)?Z.data:[]].sort((qe,Xe)=>{const jt=qe?.created_at||qe?.updated_at||0,vt=Xe?.created_at||Xe?.updated_at||0;return new Date(vt)-new Date(jt)});if(j(Le),E){const qe=Le.find(Xe=>Xe.id===E);N(qe||null)}}catch(Z){console.error(Z),j([]),Z.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{S(!1)}},[N]),Ze=h.useCallback(async()=>{try{const E=await ie.get("/users/all");k(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Me=h.useCallback(async()=>{try{const E=await ie.get("/territories/fetch");M(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),je=h.useCallback(async()=>{try{const E=await ie.get("/accounts/admin/parent-companies");z(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),ce=h.useCallback(async E=>{try{const Z=await ie.get(`/activities/accounts/${E}`);Ce(Z.data&&typeof Z.data=="object"?Z.data:{})}catch(Z){console.error(Z),Z.response?.status===404&&(console.warn("No activities found for this account."),Ce({}))}},[]);h.useEffect(()=>{Ke(),Ze(),Me(),je()},[Ke,Ze,Me,je]),h.useEffect(()=>{y&&re(cr(y.status)||"PROSPECT")},[y]);const oe=v.length,U=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="customer").length,[v]),V=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="prospect").length,[v]),be=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="partner").length,[v]),ze=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="active").length,[v]),le=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="inactive").length,[v]),X=h.useMemo(()=>v.filter(E=>E.status?.toLowerCase()==="former").length,[v]),Ae=h.useMemo(()=>[{title:"Total",value:oe,icon:na,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:U,icon:Io,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:V,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:be,icon:en,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:ze,icon:Io,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:le,icon:$o,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:X,icon:$o,color:"text-orange-600",bgColor:"bg-orange-100"}],[oe,U,V,be,ze,le,X]),Pe=h.useMemo(()=>{const E=B.trim().toLowerCase(),Z=O.trim().toUpperCase();return v.filter(_e=>{const Le=[_e?.name,_e?.website,_e?.industry,_e?.territory?.name,_e?.phone_number],qe=E===""||Le.some(Ei=>Ei==null?!1:Ei.toString().toLowerCase().includes(E)),Xe=Z==="FILTER BY STATUS"||cr(_e.status)===Z;let jt=!0;const vt=t?.role?.toUpperCase();if(vt!=="GROUP MANAGER"&&vt!=="CEO"&&vt!=="ADMIN"){const Ei=_e?.assigned_to?.id===t?.id||_e?.assigned_to===t?.id,b0=_e?.acc_creator?.id===t?.id;jt=Ei||b0}const An=cr(_e.status)==="INACTIVE"&&Z!=="INACTIVE";return qe&&Xe&&jt&&!An})},[v,B,O,t?.id]),Qe=Math.max(1,Math.ceil(Pe.length/Y)||1);h.useEffect(()=>{se(1)},[B,O,Y]),h.useEffect(()=>{se(E=>{const Z=Math.max(1,Math.ceil(Pe.length/Y)||1);return E>Z?Z:E})},[Pe.length,Y]);const nt=h.useMemo(()=>{const E=(Ee-1)*Y;return Pe.slice(E,E+Y)},[Pe,Ee,Y]);Pe.length===0||(Ee-1)*Y+1,Math.min(Ee*Y,Pe.length);const wt=()=>se(E=>Math.max(E-1,1)),Te=()=>se(E=>Math.min(E+1,Qe)),it=E=>{N(E),me("Overview"),re(cr(E?.status)||"PROSPECT")},$e=()=>N(null),ue=E=>{E.target.id==="accountModalBackdrop"&&!W&&$e()},he=()=>{s(!1),i(!1),f(null),x(wT),l(!1),L(null)},F=E=>{E.target.id==="modalBackdrop"&&he()},G=E=>E?new Date(E).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ne=E=>{const{name:Z,value:_e}=E.target;x(Le=>({...Le,[Z]:_e}))},ge=()=>{x(wT),i(!1),f(null),s(!0)},fe=E=>{N(null),E.assigned_accs?L(E.assigned_accs):L(null),x({name:E.name||"",website:E.website||"",phone_number:E.phone_number||"",billing_address:E.billing_address||"",shipping_address:E.shipping_address||"",parent_company:E.parent_company||"",industry:E.industry||"",status:cr(E.status)||"PROSPECT",territory_id:E.territory?.id?String(E.territory.id):"",assigned_to:E.assigned_accs?.id?String(E.assigned_accs.id):""}),i(!0),f(E.id),s(!0)},Ue=E=>{E&&te({title:"Archive Account",message:n.jsxs("span",{children:["Are you sure you want to archive the account"," ",n.jsx("span",{className:"font-semibold",children:E.name}),"? You can restore it later if needed."]}),confirmLabel:"Archive Account",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:E.id,name:E.name}})},K=E=>{const Z=nt.find(_e=>_e.id===E);Z&&Z.acc_creator?.id===t?.id&&Ge(_e=>{const Le=new Set(_e);return Le.has(E)?Le.delete(E):Le.add(E),Le})},ne=()=>{const E=nt.filter(Z=>Z.acc_creator?.id===t?.id);Oe.size===E.length&&E.length>0?Ge(new Set):Ge(new Set(E.map(Z=>Z.id)))},H=()=>{if(Oe.size===0)return;const E=Oe.size;te({title:"Archive Accounts",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:E})," account",E!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${E} Account${E!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(Oe),count:E}})},xe=async()=>{if(!Q?.action){te(null);return}const{action:E}=Q,{type:Z,payload:_e,targetId:Le,name:qe,targetIds:Xe,count:jt}=E;ae(!0);try{if(Z==="create"){l(!0);const vt=await ie.post("/accounts/admin",_e);je(),q.success(`Account "${qe}" created successfully.`);const Ut=y?.id||null;he(),await Ke(Ut),!y&&vt.data?.id}else if(Z==="update"){if(!Le)throw new Error("Missing account identifier for update.");l(!0),await ie.put(`/accounts/admin/${Le}`,_e),q.success(`Account "${qe}" updated successfully.`);const vt=y?.id&&y.id===Le?Le:null;he(),await Ke(vt),y?.id===Le&&N(null)}else if(Z==="archive"){if(!Le)throw new Error("Missing account identifier for archiving.");const vt=y?.id;d(Le),await ie.put(`/accounts/admin/${Le}`,{status:"INACTIVE"}),q.success(`Account "${qe}" archived successfully.`),await Ke(vt&&vt!==Le?vt:null),vt===Le&&N(null)}else if(Z==="bulk-archive"){if(!Xe||Xe.length===0)throw new Error("Missing account identifiers for bulk archiving.");mt(!0),await Promise.all(Xe.map(vt=>ie.put(`/accounts/admin/${vt}`,{status:"INACTIVE"}))),q.success(`${jt} account${jt!==1?"s":""} archived successfully.`),Ge(new Set),await Ke(),N(null)}}catch(vt){console.error(vt);const Ut=Z==="create"?"Failed to create account. Please review the details and try again.":Z==="update"?"Failed to update account. Please review the details and try again.":Z==="bulk-archive"?"Failed to archive accounts. Please try again.":"Failed to archive account. Please try again.",An=vt.response?.data?.detail||Ut;q.error(An),(Z==="create"||Z==="update")&&l(!1),Z==="archive"&&d(null),Z==="bulk-archive"&&mt(!1)}finally{(Z==="create"||Z==="update")&&l(!1),Z==="archive"&&d(null),Z==="bulk-archive"&&mt(!1),ae(!1),te(null)}},Ie=()=>{W||te(null)},Je=async()=>{if(!y||!ye)return;const E=cr(ye),Z=cr(y.status);if(E!==Z){ve(!0);try{await ie.put(`/accounts/admin/${y.id}`,{status:E}),q.success(`Account status updated to ${NT(E)}`),j(_e=>_e.map(Le=>Le.id===y.id?{...Le,status:E}:Le)),N(null)}catch(_e){console.error(_e);const Le=_e.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Le)}finally{ve(!1)}}},[ct,bt]=h.useState(!1),Pt=E=>{E.preventDefault(),bt(!0);const Z=p.name.trim();if(!Z){q.error("Account name is required.");return}if(!p.assigned_to){q.error("Assigned To is required.");return}const Le={name:Z,website:p.website?.trim()||null,phone_number:p.phone_number?.trim()||null,billing_address:p.billing_address?.trim()||null,shipping_address:p.shipping_address?.trim()||null,industry:p.industry?.trim()||null,parent_company:p.parent_company?.trim()||null,status:p.status||"PROSPECT",territory_id:p.territory_id?Number(p.territory_id):null,assigned_to:p.assigned_to?Number(p.assigned_to):null},qe=r&&u?"update":"create";te({title:qe==="create"?"Confirm New Account":"Confirm Update",message:qe==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}),confirmLabel:qe==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:qe,payload:Le,targetId:u||null,name:Z}})},Et=[{label:"Filter by Status",value:"Filter by Status"},...vT.map(E=>({label:E.label,value:E.value}))],Yt=Q?.action?.type==="delete"?Q.action.targetId:null,rn=y&&(c===y.id||Yt===y.id),aa=y&&c===y.id,Va=y?XGe(y.status):"",bs=y?n.jsx("div",{id:"accountModalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:E=>E.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:$e,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:y.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Va}`,children:NT(y.status)})]}),t?.id===y?.acc_creator?.id&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(y),disabled:Q?.action?.type==="update"&&Q.action.targetId===y.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Ue(y),disabled:!!rn,children:aa?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(E=>n.jsx("button",{onClick:()=>me(E),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Se===E?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:E},E))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Se==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:y.website?n.jsx("a",{href:y.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:y.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:y.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:y.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:y.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:y.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:y.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:y.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:y.assigned_accs?`${y.assigned_accs.first_name} ${y.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:y.acc_creator?`${y.acc_creator.first_name} ${y.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:G(y.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:G(y.updated_at)||"N/A"})]})]}),n.jsx(_a,{comments:Fe,onAddComment:ot})]}),Se==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:v.notes||"No notes available."})]})]}),Se==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ke.tasks&&ke.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ke.tasks.length,")"]})]}),de==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.tasks.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.description||"No description"}),E.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",E.assigned_to.first_name," ",E.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.due_date||E.created_at)})]},`task-${Z}`))})]}),ke.meetings&&ke.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ke.meetings.length,")"]})]}),de==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.meetings.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.description||E.location||"No description"}),E.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",E.host.first_name," ",E.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.start_time||E.created_at)})]},`meeting-${Z}`))})]}),ke.calls&&ke.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ke.calls.length,")"]})]}),de==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.calls.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.call_time||E.created_at)})]},`call-${Z}`))})]}),ke.contacts&&ke.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ke.contacts.length,")"]})]}),de==="contacts"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.contacts.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[E.first_name?`${E.first_name} `:"",E.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.created_at)})]},`contact-${Z}`))})]}),ke.deals&&ke.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ke.deals.length,")"]})]}),de==="deals"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.deals.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[E.deal_id?E.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",E.name||E.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:E.stage||E.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.close_date||E.created_at)})]},`deal-${Z}`))})]}),ke.quotes&&ke.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(de==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ke.quotes.length,")"]})]}),de==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),de==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.quotes.map((E,Z)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:E.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(E.quote_id?E.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:E.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G(E.presented_date)||""})]},`quote-${Z}`))})]}),(!ke||(!ke.tasks||ke.tasks.length===0)&&(!ke.meetings||ke.meetings.length===0)&&(!ke.calls||ke.calls.length===0)&&(!ke.quotes||ke.quotes.length===0)&&(!ke.deals||ke.deals.length===0)&&(!ke.contacts||ke.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assigned_to:y.assigned_accs?.id?String(y.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assignedTo:y.assigned_accs?.id?String(y.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${y.name}`,relatedType1:"Account",relatedTo1:String(y.id),relatedType2:null,relatedTo2:null,assignedTo:y.assigned_accs?.id?String(y.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ye||cr(y?.status)||"PROSPECT",onChange:E=>re(E.target.value),children:vT.map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))}),n.jsx("button",{onClick:Je,disabled:De||!ye||cr(ye)===cr(y?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${De||!ye||cr(ye)===cr(y?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:De?"Updating...":"Update"})]})]})]})]})]})}):null,Be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ge(),bt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(E=>n.jsx(eWe,{...E},E.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:B,onChange:E=>ee(E.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:O,onChange:E=>I(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Et.map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Oe.size>0&&Oe.size===nt.filter(E=>E.acc_creator?.id===t?.id).length&&nt.filter(E=>E.acc_creator?.id===t?.id).length>0,onChange:ne,className:"w-4 h-4 cursor-pointer rounded border-gray-300",title:nt.some(E=>E.acc_creator?.id===t?.id)?Oe.size===nt.filter(E=>E.acc_creator?.id===t?.id).length?"Deselect all":"Select all":"No accounts to select"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 w-12",children:Oe.size>0&&n.jsx("button",{onClick:H,disabled:et,title:`Archive ${Oe.size} account${Oe.size!==1?"s":""}`,className:"text-orange-500 hover:text-orange-700 disabled:opacity-50 transition",children:n.jsx(kn,{size:18})})})]})}),n.jsx("tbody",{children:w?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Pe.length>0?nt.map(E=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",children:E.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:Oe.has(E.id),onChange:Z=>{Z.stopPropagation(),K(E.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",onClick:()=>{it(E),ce(E.id)},children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:E.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:E.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>{it(E),ce(E.id)},children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ZGe(E.status)}`,children:NT(E.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",onClick:()=>{it(E),ce(E.id)},children:E.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",onClick:()=>{it(E),ce(E.id)},children:E.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>{it(E),ce(E.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(kt,{className:"text-gray-500"}),n.jsx("span",{children:E.phone_number||"--"})]})})]},E.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Pe.length,pageSize:Y,currentPage:Ee,onPrev:wt,onNext:Te,onPageSizeChange:pe,label:"accounts"})]}),St=a?n.jsx("div",{id:"modalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{onClick:()=>{he(),bt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:o||W,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Pt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(sf,{label:"Name",name:"name",value:p.name,onChange:Ne,placeholder:"Company name",required:!0,isSubmitted:ct})}),n.jsx(ZB,{label:"Parent Company",value:p.parent_company,onChange:E=>{x(Z=>({...Z,parent_company:E}))},items:R.map(E=>({id:E,name:E})),getLabel:E=>E?.name||"",placeholder:"Select parent company...",disabled:o}),n.jsx(sf,{label:"Website",name:"website",value:p.website,onChange:Ne,placeholder:"https://example.com",disabled:o}),n.jsx(sf,{label:"Phone Number",name:"phone_number",value:p.phone_number,onChange:Ne,placeholder:"09xx xxx xxxx",type:"tel",disabled:o}),n.jsx(sf,{label:"Industry",name:"industry",value:p.industry,onChange:Ne,placeholder:"Industry",disabled:o}),n.jsx(sf,{label:"Billing Address",name:"billing_address",value:p.billing_address,onChange:Ne,placeholder:"Billing address",disabled:o}),n.jsx(sf,{label:"Shipping Address",name:"shipping_address",value:p.shipping_address,onChange:Ne,placeholder:"Shipping address",disabled:o}),n.jsx(XB,{label:"Status",name:"status",value:p.status,onChange:Ne,options:[{value:"",label:"Select status"},...vT],required:!0,disabled:o}),n.jsx(ZB,{label:"Assigned To",value:p.assigned_to,onChange:E=>{const Z=A.find(Le=>String(Le.id)===String(E));L(Z);let _e=null;Z&&Z.assigned_territory&&Z.assigned_territory.length===1&&(_e=Z.assigned_territory[0].id),x(Le=>({...Le,assigned_to:E,territory_id:_e}))},items:A||[],getLabel:E=>`${E?.first_name??""} ${E?.last_name??""} (${E?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ct,disabled:o||A.length===0}),n.jsx(XB,{label:"Territory",name:"territory_id",value:p.territory_id||"",onChange:Ne,options:[{value:"",label:_?_.assigned_territory&&_.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},..._&&_.assigned_territory&&_.assigned_territory.map(E=>({value:String(E.id),label:E.name}))||[]],disabled:o||!_||!_.assigned_territory||_.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{he(),bt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:o||W,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:o||W,children:o?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,P=Q?n.jsx(nWe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:xe,onCancel:Ie,loading:W}):null;return n.jsxs(n.Fragment,{children:[Be,bs,St,P]})}function eWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function sf({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function XB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function ZB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(tWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function tWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(j=>String(j.id)===String(t)),N=y?s(y):t,v=h.useMemo(()=>{const j=f.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:j=>{p(j.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!v.some(j=>s(j).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function nWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const jT={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},wl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),go=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function aWe(){const e=Nt(),t=Xt(),{user:a}=Gt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[s,r]=h.useState([]),[i,o]=h.useState(!1),[l,c]=h.useState([]),[d,u]=h.useState([]),[f,p]=h.useState(null),[x,y]=h.useState(!1),[N,v]=h.useState(!1),[j,w]=h.useState(!1),[S,A]=h.useState(null),[k,_]=h.useState(!1),[L,T]=h.useState(null),[M,R]=h.useState(jT),[z,O]=h.useState(""),[I,B]=h.useState("Filter by Accounts"),[ee,Q]=h.useState(null),[te,W]=h.useState("Overview"),[ae,Ee]=h.useState(1),[se,Y]=h.useState(10),[pe,Se]=h.useState({}),[me,ye]=h.useState(null),[re,De]=h.useState(null),[ve,ke]=h.useState(new Set),[Ce,de]=h.useState(!1),{comments:Re,addComment:Oe,refresh:Ge}=Aa({relatedType:"contact",relatedId:f?.id});h.useEffect(()=>{f?.id&&Ge()},[f?.id,Ge]),h.useEffect(()=>{const H=t.state?.contactID;H&&(De(H),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(re&&s.length>0&&!i){const H=s.find(xe=>xe.id===re);H?p(H):q.error("Contact not found."),De(null)}},[re,s,i]);const et=h.useCallback(async(H=null)=>{o(!0);try{const xe=await ie.get("/contacts/admin/fetch-all"),Je=[...Array.isArray(xe.data)?xe.data:[]].sort((ct,bt)=>{const Pt=ct?.created_at||ct?.updated_at||0,Et=bt?.created_at||bt?.updated_at||0;return new Date(Et)-new Date(Pt)});if(r(Je),H){const ct=Je.find(bt=>bt.id===H);p(ct||null)}}catch(xe){console.error(xe),r([]),xe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{o(!1)}},[p]),mt=h.useCallback(async()=>{try{const H=await ie.get("/accounts/admin/fetch-all"),Ie=[...Array.isArray(H.data)?H.data:[]].sort((Je,ct)=>(Je?.name||"").localeCompare(ct?.name||""));c(Ie)}catch(H){console.error(H),c([]),H.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Fe=h.useCallback(async()=>{try{const H=await ie.get("/users/all"),Ie=[...Array.isArray(H.data)?H.data:[]].sort((Je,ct)=>wl(Je).localeCompare(wl(ct)));u(Ie)}catch(H){console.error(H),u([]),H.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ot=h.useCallback(async H=>{try{const xe=await ie.get(`/activities/contact/${H}`);Se(xe.data&&typeof xe.data=="object"?xe.data:{})}catch(xe){console.error(xe),xe.response?.status===404&&(console.warn("No activities found for this account."),Se({}))}},[]);h.useEffect(()=>{et(),mt(),Fe()},[et,mt,Fe]);const We=h.useMemo(()=>{const H=new Map;l.forEach(Ie=>{Ie?.id&&Ie?.name&&H.set(String(Ie.id),Ie.name)}),s.forEach(Ie=>{Ie?.account_id&&Ie?.account?.name&&H.set(String(Ie.account_id),Ie.account.name)});const xe=Array.from(H.entries()).sort((Ie,Je)=>Ie[1].localeCompare(Je[1])).map(([Ie,Je])=>({value:Ie,label:Je}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...xe]},[l,s]),Ke=h.useMemo(()=>{const H=z.trim().toLowerCase(),xe=I.trim();return s.filter(Ie=>{const Je=[Ie?.first_name,Ie?.last_name,Ie?.email,Ie?.title,Ie?.department,Ie?.account?.name,Ie?.account?.status,Ie?.work_phone,Ie?.mobile_phone_1,Ie?.mobile_phone_2,Ie?.assigned_contact?.first_name,Ie?.assigned_contact?.last_name,Ie?.contact_creator?.first_name,Ie?.contact_creator?.last_name,Ie?.notes,go(Ie?.created_at),go(Ie?.updated_at)],ct=H===""||Je.some(rn=>rn==null?!1:rn.toString().toLowerCase().includes(H)),bt=xe==="Filter by Accounts"||String(Ie.account_id)===xe,Pt=Ie?.status!=="Inactive";let Et=!0;const Yt=a?.role?.toUpperCase();if(Yt!=="GROUP MANAGER"&&Yt!=="CEO"&&Yt!=="ADMIN"){const rn=Ie?.assigned_to===a?.id,aa=Ie?.created_by===a?.id;Et=rn||aa}return ct&&bt&&Pt&&Et})},[s,z,I,a?.id]),Ze=Math.max(1,Math.ceil(Ke.length/se)||1);h.useEffect(()=>{Ee(1)},[z,I,se]),h.useEffect(()=>{Ee(H=>{const xe=Math.max(1,Math.ceil(Ke.length/se)||1);return H>xe?xe:H})},[Ke.length,se]);const Me=h.useMemo(()=>{const H=(ae-1)*se;return Ke.slice(H,H+se)},[Ke,ae,se]),je=()=>Ee(H=>Math.max(H-1,1)),ce=()=>Ee(H=>Math.min(H+1,Ze)),oe=h.useMemo(()=>{if(!N||!L)return l;const H=s.find(Ie=>Ie.id===L);return!H||!H.account||l.some(Ie=>Ie.id===H.account.id)?l:[...l,H.account]},[l,N,L,s]),U=h.useCallback(()=>{y(!1),v(!1),T(null),R(jT),w(!1),wt(!1)},[]),V=H=>{H.target.id==="modalBackdrop"&&!j&&!k&&U()},be=H=>{const{name:xe,value:Ie}=H.target;R(Je=>({...Je,[xe]:Ie}))},ze=()=>{R(jT),v(!1),T(null),y(!0)},le=async H=>{if(!H)return;const xe=await ie.get(`/accounts/get/${H.account_id}`);R({first_name:H.first_name||"",last_name:H.last_name||"",account_id:xe.data.id?xe.data.id:"",title:H.title||"",department:H.department||"",email:H.email||"",work_phone:H.work_phone||"",mobile_phone_1:H.mobile_phone_1||"",mobile_phone_2:H.mobile_phone_2||"",notes:H.notes||"",assigned_to:H.assigned_to?String(H.assigned_to):""}),v(!0),T(H.id),y(!0),p(null)},X=H=>{if(!H)return;const xe=wl(H)||"this contact";A({title:"Archive Contact",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:xe}),"? You can restore it later if needed."]}),confirmLabel:"Archive Contact",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:H.id,name:xe}})},Ae=H=>{const xe=Me.find(Ie=>Ie.id===H);xe&&xe.contact_creator?.id===a?.id&&ke(Ie=>{const Je=new Set(Ie);return Je.has(H)?Je.delete(H):Je.add(H),Je})},Pe=()=>{const H=Me.filter(xe=>xe.contact_creator?.id===a?.id);ve.size===H.length&&H.length>0?ke(new Set):ke(new Set(H.map(xe=>xe.id)))},Qe=()=>{if(ve.size===0)return;const H=ve.size;A({title:"Archive Contacts",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:H})," contact",H!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${H} Contact${H!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(ve),count:H}})},[nt,wt]=h.useState(!1),Te=H=>{H.preventDefault(),wt(!0);const xe=M.first_name.trim(),Ie=M.last_name.trim();if(!xe||!Ie){q.error("First name and last name are required.");return}if(!M.account_id){q.error("Account is required.");return}if(!M.assigned_to){q.error("Assigned To is required.");return}const ct=M.email?.trim();if(!ct){q.error("Email is required.");return}if(!ct.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ct)){q.error("Please enter a valid email address.");return}const Pt={first_name:xe,last_name:Ie,account_id:Number(M.account_id),title:M.title?.trim()||null,department:M.department?.trim()||null,email:M.email?.trim().toLowerCase()||null,work_phone:M.work_phone?.trim()||null,mobile_phone_1:M.mobile_phone_1?.trim()||null,mobile_phone_2:M.mobile_phone_2?.trim()||null,notes:M.notes?.trim()||null,assigned_to:M.assigned_to?Number(M.assigned_to):null},Et=N&&L?"update":"create",Yt=`${xe} ${Ie}`.trim();A({title:Et==="create"?"Confirm New Contact":"Confirm Update",message:Et==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Yt})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Yt}),"?"]}),confirmLabel:Et==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Et,payload:Pt,targetId:L||null,name:Yt}})},it=async()=>{if(!S?.action){A(null);return}const{action:H}=S,{type:xe,payload:Ie,targetId:Je,name:ct}=H;_(!0);try{if(xe==="create"){w(!0),await ie.post("/contacts/admin",Ie),q.success(`Contact "${ct}" created successfully.`);const bt=f?.id||null;U(),await et(bt)}else if(xe==="update"){if(!Je)throw new Error("Missing contact identifier for update.");w(!0),await ie.put(`/contacts/admin/${Je}`,Ie),q.success(`Contact "${ct}" updated successfully.`);const bt=f?.id&&f.id===Je?Je:f?.id||null;U(),await et(bt),f?.id===Je&&p(null)}else if(xe==="archive"){if(!Je)throw new Error("Missing contact identifier for archiving.");const bt=f?.id;Q(Je),await ie.put(`/contacts/admin/${Je}`,{status:"Inactive"}),q.success(`Contact "${ct}" archived successfully.`),await et(bt&&bt!==Je?bt:null),bt===Je&&p(null)}else if(xe==="bulk-archive"){const{targetIds:bt,count:Pt}=H;if(!bt||bt.length===0)throw new Error("Missing contact identifiers for bulk archiving.");de(!0),await Promise.all(bt.map(Et=>ie.put(`/contacts/admin/${Et}`,{status:"Inactive"}))),q.success(`${Pt} contact${Pt!==1?"s":""} archived successfully.`),ke(new Set),await et(),p(null)}}catch(bt){console.error(bt);const Pt=xe==="create"?"Failed to create contact. Please review the details and try again.":xe==="update"?"Failed to update contact. Please review the details and try again.":xe==="bulk-archive"?"Failed to archive contacts. Please try again.":"Failed to archive contact. Please try again.",Et=bt.response?.data?.detail||Pt;q.error(Et)}finally{(xe==="create"||xe==="update")&&w(!1),xe==="archive"&&Q(null),xe==="bulk-archive"&&de(!1),_(!1),A(null)}},$e=()=>{k||A(null)},ue=H=>{p(H),W("Overview")},he=()=>p(null),F=H=>{H.target.id==="contactModalBackdrop"&&!k&&he()},G=S?.action?.type==="delete"?S.action.targetId:null,Ne=f&&(ee===f.id||G===f.id),ge=f&&ee===f.id,fe=f?n.jsx("div",{id:"contactModalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:H=>H.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:he,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Qn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:wl(f)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a?.id===f?.contact_creator?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>le(f),disabled:k||S?.action?.type==="update"&&S.action.targetId===f.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>X(f),disabled:!!Ne,children:ge?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:f.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(H=>n.jsx("button",{onClick:()=>W(H),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${te===H?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:H},H))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[te==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:wl(f)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:f.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:f.email?n.jsx("a",{href:`mailto:${f.email}`,className:"text-blue-600 hover:underline break-all",children:f.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:f.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:f.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:f.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:f.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:f.assigned_contact?`${f.assigned_contact.first_name} ${f.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:f.contact_creator?`${f.contact_creator.first_name} ${f.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:go(f.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:go(f.updated_at)||"N/A"})]})]})}),te==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.notes||"No notes available."})]}),n.jsx(_a,{comments:Re,onAddComment:Oe})]}),te==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[pe.tasks&&pe.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",pe.tasks.length,")"]})]}),me==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.tasks.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.description||"No description"}),H.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",H.assigned_to.first_name," ",H.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(H.due_date||H.created_at)})]},`task-${xe}`))})]}),pe.meetings&&pe.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",pe.meetings.length,")"]})]}),me==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.meetings.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.description||H.location||"No description"}),H.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",H.host.first_name," ",H.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(H.start_time||H.created_at)})]},`meeting-${xe}`))})]}),pe.calls&&pe.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",pe.calls.length,")"]})]}),me==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.calls.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(H.call_time||H.created_at)})]},`call-${xe}`))})]}),pe.deals&&pe.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",pe.deals.length,")"]})]}),me==="deals"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.deals.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Jt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[H.deal_id?H.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",H.name||H.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:H.stage||H.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(H.close_date||H.created_at)})]},`deal-${xe}`))})]}),pe.quotes&&pe.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ye(me==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(un,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",pe.quotes.length,")"]})]}),me==="quotes"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),me==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.quotes.map((H,xe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(un,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(H.quote_id?H.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:H.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:go(H.presented_date)||""})]},`quote-${xe}`))})]}),(!pe||(!pe.tasks||pe.tasks.length===0)&&(!pe.meetings||pe.meetings.length===0)&&(!pe.calls||pe.calls.length===0)&&(!pe.quotes||pe.quotes.length===0)&&(!pe.deals||pe.deals.length===0)&&(!pe.contacts||pe.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${wl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assigned_to:f?.assigned_contact?.id?String(f.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!f?.email){alert("No email address available");return}const H=encodeURIComponent(f.email),xe=encodeURIComponent(""),Ie=encodeURIComponent(""),Je=`mailto:${H}?subject=${xe}&body=${Ie}`;window.location.href=Je},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${wl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assignedTo:f?.assigned_contact?.id?String(f.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${wl(f)||""}`.trim(),relatedType1:"Account",relatedTo1:f?.account_id?String(f.account_id):f?.account?.id?String(f.account.id):"",relatedType2:"Contact",relatedTo2:f?.id?String(f.id):"",assignedTo:f?.assigned_contact?.id?String(f.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Ue=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[i&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ze(),wt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:H=>O(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:I,onChange:H=>B(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:We.map(H=>n.jsx("option",{value:H.value,children:H.label},H.value??H.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ve.size>0&&ve.size===Me.filter(H=>H.contact_creator?.id===a?.id).length&&Me.filter(H=>H.contact_creator?.id===a?.id).length>0,onChange:Pe,className:"w-4 h-4 cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 w-12",children:ve.size>0&&n.jsx("button",{onClick:Qe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected contacts",disabled:Ce,children:n.jsx(kn,{size:18})})})]})}),n.jsx("tbody",{children:i?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Ke.length>0?Me.map(H=>{const xe=[{Icon:ta,value:H.email,key:"email"},{Icon:kt,value:H.work_phone,key:"work_phone"},{Icon:ld,value:H.mobile_phone_1,key:"mobile_phone_1"},{Icon:ld,value:H.mobile_phone_2,key:"mobile_phone_2"}].filter(Ie=>!!Ie.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4",children:a?.id===H.contact_creator?.id&&n.jsx("input",{type:"checkbox",checked:ve.has(H.id),onChange:Ie=>{Ie.stopPropagation(),Ae(H.id)},className:"w-4 h-4 cursor-pointer"})}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:wl(H)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:H.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(qx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:H.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:xe.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:xe.map(({Icon:Ie,value:Je,key:ct})=>{const bt=pt.createElement(Ie,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[bt,n.jsx("span",{children:Je})]},ct)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Jt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:H.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:H.assigned_contact?`${H.assigned_contact.first_name} ${H.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ue(H),ot(H.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Tt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:go(H.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},H.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Ke.length,pageSize:se,currentPage:ae,onPrev:je,onNext:ce,onPageSizeChange:Y,label:"contacts"})]}),K=x?n.jsx("div",{id:"modalBackdrop",onClick:V,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:H=>H.stopPropagation(),children:[n.jsx("button",{onClick:()=>{U(),wt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:j||k,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:N?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Te,noValidate:!0,children:[n.jsx(Uc,{label:"First Name",name:"first_name",value:M.first_name,onChange:be,placeholder:"First name",required:!0,isSubmitted:nt}),n.jsx(Uc,{label:"Last Name",name:"last_name",value:M.last_name,onChange:be,placeholder:"Last name",required:!0,isSubmitted:nt}),n.jsx(JB,{label:"Account",value:M.account_id,onChange:H=>R(xe=>({...xe,account_id:H})),items:N?oe:l||[],getLabel:H=>H?.name??"",placeholder:"Search account...",disabled:j||(N?oe.length===0:l.length===0),required:!0,isSubmitted:nt}),n.jsx(JB,{label:"Assigned To",value:M.assigned_to,onChange:H=>R(xe=>({...xe,assigned_to:H})),items:d||[],getLabel:H=>`${H?.first_name??""} ${H?.last_name??""} (${H?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:nt,disabled:j||d.length===0}),n.jsx(Uc,{label:"Title",name:"title",value:M.title,onChange:be,placeholder:"Job title",disabled:j}),n.jsx(Uc,{label:"Department",name:"department",value:M.department,onChange:be,placeholder:"Department",disabled:j}),n.jsx(Uc,{label:"Email",name:"email",type:"email",value:M.email,onChange:be,placeholder:"example@email.com",required:!0,isSubmitted:nt}),n.jsx(Uc,{label:"Work Phone",name:"work_phone",value:M.work_phone,onChange:be,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(Uc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:M.mobile_phone_1,onChange:be,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(Uc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:M.mobile_phone_2,onChange:be,placeholder:"09xx xxx xxxx",disabled:j}),n.jsx(rWe,{label:"Notes",name:"notes",value:M.notes,onChange:be,placeholder:"Additional details...",rows:3,disabled:j,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{U(),wt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:j||k,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:j||k,children:j?"Saving...":N?"Update Contact":"Save Contact"})]})]})]})}):null,ne=S?n.jsx(iWe,{open:!0,title:S.title,message:S.message,confirmLabel:S.confirmLabel,cancelLabel:S.cancelLabel,variant:S.variant,onConfirm:it,onCancel:$e,loading:k}):null;return n.jsxs(n.Fragment,{children:[Ue,fe,K,ne]})}function Uc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function JB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(sWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function sWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function rWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function iWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const CT=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function yee({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=Nt(),{leadID:c}=Ho(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,y]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[v,j]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,L]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),y(e.status||"New");return}if(!c)return;const I=await ie.get(`/leads/get/${c}`);u(I.data),y(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),L({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};h.useEffect(()=>{e?(u(e),y(e.status||"New")):c&&T()},[c,e]);const M=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const I=await ie.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const B={...d,status:I.data.status};u(B),i&&i(B),a&&a(),t&&t()}catch(I){console.error(I),q.error("Failed to update lead status")}},R=async I=>{const B={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",B),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const Q=(await ie.post("/accounts/convertedLead",B)).data.id,te={...A,account_id:Q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},ae=(await ie.post("/contacts/convertedLead",te)).data.id,Ee=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},se=_.amount&&_.amount!==""?parseFloat(_.amount):0,Y={..._,account_id:Q,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:ae,probability:Ee(),stage:"Prospecting"},pe=await ie.post("/deals/convertedLead",Y),Se=await ie.put(`/leads/convert/${I.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(ee){console.error("Error during conversion:",ee);const Q=ee.response?.data?.detail||ee.message||"Failed to convert lead. Please try again.";q.error(Q)}},z=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=I=>I.toString().toLowerCase().replace(/\b\w/g,B=>B.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z(d.status)}`,children:O(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Vt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:CT(I.due_date||I.created_at)})]},`task-${B}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Tt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:CT(I.start_time||I.created_at)})]},`meeting-${B}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(At,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:CT(I.call_time||I.created_at)})]},`call-${B}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),B=encodeURIComponent(""),ee=encodeURIComponent(""),Q=`mailto:${I}?subject=${B}&body=${ee}`;window.location.href=Q},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>y(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const oWe=Jf.all(),ST=oWe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),lWe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),cWe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},_T={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function dWe(){const e=Nt(),{leadID:t}=Ho();Fs();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,L]=h.useState(_T),[T,M]=h.useState(!1),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState(null),[Q,te]=h.useState(!1),[W,ae]=h.useState({});h.useRef(null);const[Ee,se]=h.useState(!1),[Y,pe]=h.useState(null),[Se,me]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ye,re]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[De,ve]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const ke=async()=>{try{const Te=await ie.get("/leads/getUsers");l(Te.data)}catch(Te){console.error(`Error fetching users: ${Te}`)}},Ce=async()=>{x(!0);try{const Te=await ie.get("/leads/admin/getLeads");f(Te.data),console.log(Te.data)}catch(Te){console.error(`Error fetching leads: ${Te}`)}finally{x(!1)}};h.useEffect(()=>{ke(),Ce()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const Te=u.find(it=>it.id===Number(t));Te&&s(Te)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(Y){const it=(he=>{if(!he)return{code:"+63",number:""};const F=he.match(/^(\+\d+)\s(.+)$/);if(F)return{code:F[1],number:F[2]};if(he.startsWith("+")){const G=he.match(/^(\+\d{1,3})/);if(G)return{code:G[1],number:he.substring(G[1].length).trim()}}return{code:"+63",number:he}})(Y.work_phone),$e=[];Y.work_phone&&$e.push(`Work: ${Y.work_phone}`),Y.mobile_phone_1&&$e.push(`Mobile 1: ${Y.mobile_phone_1}`),Y.mobile_phone_2&&$e.push(`Mobile 2: ${Y.mobile_phone_2}`);const ue=$e.length>0?$e.join(" | "):"";me({name:Y.company_name||"",website:"",countryCode:it.code,phone_number:it.number,combinedPhoneNumbers:ue,billing_address:Y.address||"",shipping_address:Y.address||"",industry:"",status:"Prospect",territory_id:Y.assigned_to?.territory?.id||null,assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null}),re({last_name:Y.last_name||"",first_name:Y.first_name||"",account_id:null,title:Y.title||"",department:Y.department||"",email:Y.email||"",work_phone:Y.work_phone||"",mobile_phone_1:Y.mobile_phone_1||"",mobile_phone_2:Y.mobile_phone_2||"",notes:Y.notes||"",assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null}),ve({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Y.assigned_to?.id||null,created_by:Y.creator?.id||null})}},[Y]);const de=Te=>N(Te.target.value),Re=h.useMemo(()=>{const Te=y.trim().toLowerCase(),it=v.trim().toUpperCase();return u.filter($e=>{const ue=[$e?.first_name,$e?.last_name,$e?.company_name,$e?.title,$e?.email,$e?.work_phone,$e?.assigned_to?`${$e.assigned_to.first_name} ${$e.assigned_to.last_name}`:""],he=Te===""||ue.some(G=>G==null||G===""?!1:G.toString().toLowerCase().includes(Te));let F=!1;return it==="FILTER BY STATUS"?F=($e.status?$e.status.toUpperCase():"")!=="CONVERTED":F=($e.status?$e.status.toUpperCase():"")===it,he&&F})},[u,y,v]),Oe=Math.max(1,Math.ceil(Re.length/A)||1);h.useEffect(()=>{S(1)},[y,v,A]),h.useEffect(()=>{S(Te=>{const it=Math.max(1,Math.ceil(Re.length/A)||1);return Te>it?it:Te})},[Re.length,A]);const Ge=h.useMemo(()=>{const Te=(w-1)*A;return Re.slice(Te,Te+A)},[Re,w,A]),et=()=>S(Te=>Math.max(Te-1,1)),mt=()=>S(Te=>Math.min(Te+1,Oe)),Fe=h.useCallback(async Te=>{try{const it=await ie.get(`/activities/lead/${Te}`);ae(it.data&&typeof it.data=="object"?it.data:{})}catch(it){console.error(it),it.response?.status===404&&(console.warn("No activities found for this account."),ae({}))}},[]),ot=Te=>{s(Te),Fe(Te.id)},We=()=>{s(null),t&&e("/admin/leads",{replace:!0})},Ke=()=>{i(!1),L(_T),M(!1),z(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},Ze=Te=>{Te.target.id==="modalBackdrop"&&Ke()},Me=()=>{L(_T),M(!1),z(null),d(null),i(!0)},je=Te=>{if(!Te){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Te),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const it=G=>{if(!G)return{code:"+63",number:""};const Ne=G.match(/^(\+\d+)\s(.+)$/);return Ne?{code:Ne[1],number:Ne[2]}:{code:"+63",number:G}},$e=it(Te.work_phone),ue=it(Te.mobile_phone_1),he=it(Te.mobile_phone_2);let F="";if(Te.assigned_to){F=String(Te.assigned_to.id);const G=o?.find(Ne=>Ne.id===Te.assigned_to.id);d(G)}L({first_name:Te.first_name||"",last_name:Te.last_name||"",company_name:Te.company_name||"",title:Te.title||"",department:Te.department||"",email:Te.email||"",work_ccode:$e.code,work_phone:$e.number,m1_ccode:ue.code,mobile_phone_1:ue.number,m2_ccode:he.code,mobile_phone_2:he.number,address:Te.address||"",notes:Te.notes||"",source:Te.source||"",territory_id:Te.territory?.id||null,lead_owner:F,status:Te.status||"New"}),M(!0),z(Te.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},ce=Te=>{if(!Te){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Te);const it=`${Te.first_name} ${Te.last_name}`||"this lead";ee({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:it}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Te.id,name:it}})},oe=Te=>{const{name:it,value:$e}=Te.target;if(L(ue=>({...ue,[it]:$e})),it==="lead_owner"){const ue=o.find(he=>he.id===parseInt($e));d(ue)}},[U,V]=h.useState(!1),be=Te=>{if(Te.preventDefault(),V(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.title?.trim()){q.error("Job title is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const $e={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},ue=T&&R?"update":"create",he=`${_.first_name} ${_.last_name}`;ee({title:ue==="create"?"Confirm New Lead":"Confirm Update",message:ue==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:he}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:he}),"?"]}),confirmLabel:ue==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:ue,payload:$e,targetId:R||null,name:he}})},ze=async()=>{if(!B?.action){ee(null);return}const{action:Te}=B,{type:it,payload:$e,targetId:ue,name:he,lead:F}=Te;console.log($e),te(!0);try{if(it==="create")I(!0),await ie.post("/leads/create",$e),q.success(`Lead "${he}" created successfully.`),Ke(),await Ce();else if(it==="update"){if(!ue)throw new Error("Missing lead identifier for update.");I(!0);const G=await ie.put(`/leads/${ue}`,$e);q.success(`Lead "${he}" updated successfully.`),a&&a.id===ue&&s(null),Ke(),await Ce()}else if(it==="delete"){if(!ue)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${ue}`),q.success(`Lead "${he}" deleted successfully.`),a?.id===ue&&s(null),await Ce()}}catch(G){console.error(G);const Ne=it==="create"?"Failed to create lead. Please review the details and try again.":it==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ge=G.response?.data?.detail||Ne;q.error(ge)}finally{(it==="create"||it==="update")&&I(!1),it!=="edit"&&(te(!1),ee(null))}},le=()=>{Q||ee(null)},X=u.filter(Te=>Te.status==="New").length,Ae=u.filter(Te=>Te.status==="Contacted").length,Pe=u.filter(Te=>Te.status==="Qualified").length,Qe=u.filter(Te=>Te.status==="Converted").length,nt=u.filter(Te=>Te.status==="Lost").length,wt=[{title:"New",value:X,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Ae,icon:kt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Pe,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Qe,icon:Xl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:nt,icon:zs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(qo,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{Me(),V(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:wt.map(Te=>n.jsx(mWe,{...Te},Te.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:y,onChange:de,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:Te=>j(Te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Re.length>0?Ge.map(Te=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>ot(Te),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Te.first_name," ",Te.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Te.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Te.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Te.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Te.assigned_to?`${Te.assigned_to.first_name} ${Te.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${cWe(Te.status||"New")}`,children:lWe(Te.status||"New")})})]},Te.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Re.length,pageSize:A,currentPage:w,onPrev:et,onNext:mt,onPageSizeChange:k,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Ze,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Te=>Te.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ke(),V(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:oe,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:oe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${U&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:oe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${U&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:oe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${U&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:oe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:oe,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${U&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:oe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:ST.map(Te=>n.jsx("option",{value:Te.code,children:Te.code},Te.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:oe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:oe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:ST.map(Te=>n.jsx("option",{value:Te.code,children:Te.code},Te.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:oe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:oe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:ST.map(Te=>n.jsx("option",{value:Te.code,children:Te.code},Te.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:oe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:oe,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${U&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(fWe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:Te=>`${Te.first_name} ${Te.last_name}`,onChange:Te=>{const it=o.find(ue=>String(ue.id)===String(Te));d(it);let $e=null;it&&it.assigned_territory&&it.assigned_territory.length===1&&($e=it.assigned_territory[0].id),L(ue=>({...ue,lead_owner:Te,territory_id:$e}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:oe,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(Te=>n.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:oe,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:oe,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{Ke(),V(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:O||Q,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:be,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:O||Q,children:O||Q?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),B&&n.jsx(uWe,{open:!0,title:B.title,message:B.message,confirmLabel:B.confirmLabel,cancelLabel:B.cancelLabel,variant:B.variant,onConfirm:ze,onCancel:le,loading:Q}),a&&!r&&!T&&n.jsx(yee,{relatedActs:W,lead:a,onBack:We,fetchLeads:Ce,setSelectedLead:s,onEdit:je,onDelete:ce})]})}function uWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function mWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function fWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",y=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:y.length>0?y.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Ub={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ja=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),hWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ja,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ja,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ja,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ja,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ja,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),gWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ja,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ja,{label:"Department",name:"department",value:e.department}),n.jsx(Ja,{label:"Title",name:"title",value:e.title}),n.jsx(Ja,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ja,{label:"Email",name:"email",value:e.email}),n.jsx(Ja,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ja,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),pWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ja,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ja,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ja,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Description",name:"description",value:e.description}),n.jsx(Ja,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function xWe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(hWe,{data:Ub});case 2:return n.jsx(gWe,{data:Ub});case 3:return n.jsx(pWe,{data:Ub});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Ub.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(bj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function bee({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=Nt(),{user:c}=Gt();h.useEffect(()=>{console.log("Group Manager DealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;o(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),y=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function vee({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=Nt(),[d]=Fs(),u=d.get("id"),[f,p]=h.useState(e||null),[x,y]=h.useState(s||"Overview"),{user:N}=Gt(),{comments:v,addComment:j,refresh:w}=Aa({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const M=((await ie.get("/deals/admin/fetch-all")).data||[]).find(R=>R.id===parseInt(u));if(M){const R={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(R)}else console.warn("Deal not found with ID:",u)}catch(L){console.error("Error fetching deal:",L)}})()},[u,e]),!f&&!u||u&&!f)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ua,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Kt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):y(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(R=>R==="PROSPECTING"?0:R==="QUALIFICATION"?1:R==="PROPOSAL"?2:R==="NEGOTIATION"?3:R==="CLOSED_WON"||R==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(R=>T===R?"orange":T>R?"green":"gray").map((R,z)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${R==="green"?"bg-green-500 border-green-500":R==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,L)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},L))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(_a,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:kt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Tt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,L)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},L))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(bee,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}const yWe=10;function bWe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=Nt(),t=Xt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[y,N]=h.useState(null),[v,j]=h.useState(!1),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,L]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(!1),[O,I]=h.useState(!1),[B,ee]=h.useState(null),[Q,te]=h.useState([]),[W,ae]=h.useState([]),[Ee,se]=h.useState([]),[Y,pe]=h.useState({}),[Se,me]=h.useState(null);h.useEffect(()=>{const ue=t.state,he=ue?.dealID;if(he&&!ue?.openDealModal){me(he),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Se&&y?.length>0&&!v){const ue=y.find(he=>he.id===Se);ue?d(ue):q.error("Deal not found."),me(null)}},[Se,y,v]);const[ye,re]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[De,ve]=h.useState(null),[ke,Ce]=h.useState(null),de={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Re=ue=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[ue]||ue||"--",Oe=ue=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[ue]||"bg-gray-100 text-gray-700",Ge=h.useCallback(async ue=>{try{const he=await ie.get(`/activities/deal/${ue}`);pe(he.data&&typeof he.data=="object"?he.data:{})}catch(he){console.error(he),he.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]),et=h.useMemo(()=>{const ue=a.trim().toLowerCase(),he=r.trim(),F=o.trim();return(y??[]).filter(G=>{const Ne=[G?.name,G?.description,G?.account?.name,G?.contact?.first_name,G?.contact?.last_name,G?.assigned_deals?.first_name,G?.assigned_deals?.last_name],ge=ue===""||Ne.some(K=>K==null||K===""?!1:K.toString().toLowerCase().includes(ue)),fe=he==="Filter by Stage"||he===""||G.stage===de[he]||G.stage===he,Ue=F==="Filter by Owner"||F===""||`${G.assigned_deals?.first_name||""} ${G.assigned_deals?.last_name||""}`.trim().toLowerCase()===F.toLowerCase();return ge&&fe&&Ue})},[y,a,r,o]),mt=Math.max(1,Math.ceil(et.length/yWe)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(ue=>{const he=Math.max(1,Math.ceil(et.length/A)||1);return ue>he?he:ue})},[et.length,A]);const Fe=h.useMemo(()=>{const ue=(w-1)*A;return et.slice(ue,ue+A)},[et,w,A]),ot=()=>S(ue=>Math.max(ue-1,1)),We=()=>S(ue=>Math.min(ue+1,mt)),Ke=()=>{re({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),ee(null),x(!0)},Ze=async()=>{j(!0);try{const ue=await ie.get("/deals/admin/fetch-all"),F=[...Array.isArray(ue.data)?ue.data:[]].sort((G,Ne)=>{const ge=G?.created_at?new Date(G.created_at).getTime():0;return(Ne?.created_at?new Date(Ne.created_at).getTime():0)-ge});N(F)}catch(ue){ue.response&&ue.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(ue)}finally{j(!1)}},Me=async()=>{try{const ue=await ie.get("/accounts/admin/fetch-all");te(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},je=async()=>{try{const ue=await ie.get("/contacts/admin/fetch-all");ae(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},ce=async()=>{try{const ue=await ie.get("/users/all");se(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ze(),Me(),je(),ce()},[]);const oe=async ue=>{ue&&(re({id:ue.id||null,name:ue.name||"",account_id:ue.account_id?.toString()||"",primary_contact_id:ue.primary_contact_id?.toString()||"",stage:ue.stage||"PROPOSAL",amount:ue.amount?.toString()||"",close_date:ue.close_date?new Date(ue.close_date).toISOString().split("T")[0]:"",assigned_to:ue.assigned_to?.toString()||"",currency:ue.currency||"PHP",description:ue.description||""}),ve(ue.account||null),Ce(ue.contact||null),I(!0),ee(ue.id),d(null),x(!0))},U=async(ue=!1)=>{try{const he=await ie.get("/deals/admin/fetch-all"),G=[...Array.isArray(he.data)?he.data:[]].sort((Ne,ge)=>{const fe=Ne?.created_at?new Date(Ne.created_at).getTime():0;return(ge?.created_at?new Date(ge.created_at).getTime():0)-fe});if(N(G),!ue&&c&&c.id){const Ne=G.find(ge=>ge.id===c.id);Ne&&d({...Ne})}}catch(he){console.error("Failed to refresh deal data:",he),await Ze()}},V=ue=>{const he=ue.name.trim();if(!he){q.error("Deal name is required.");return}if(!ue.account_id){q.error("Account is required.");return}const F=O&&B?"update":"create",G=he;M({title:F==="create"?"Confirm New Deal":"Confirm Update",message:F==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:G}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:G}),"?"]}),confirmLabel:F==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:F,formData:ue,targetId:B||null,name:G}})},be=ue=>{if(!ue)return;const he=ue.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:he}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:he}})},ze=async()=>{if(!T?.action){M(null);return}const{action:ue}=T,{type:he,formData:F,targetId:G,name:Ne}=ue;z(!0);try{if(he==="create"){L(!0);const ge={name:F.name.trim(),account_id:parseInt(F.account_id),primary_contact_id:F.primary_contact_id?parseInt(F.primary_contact_id):null,stage:F.stage,amount:F.amount?parseFloat(F.amount):null,currency:F.currency||"PHP",close_date:F.close_date||null,description:F.description||null,assigned_to:F.assigned_to?parseInt(F.assigned_to):null};await ie.post("/deals/admin/create",ge),q.success(`Deal "${Ne}" created successfully.`),x(!1),await Ze()}else if(he==="update"){if(!G)throw new Error("Missing deal identifier for update.");L(!0);const ge={};F.name!==void 0&&(ge.name=F.name.trim()),F.account_id!==void 0&&F.account_id!==""&&(ge.account_id=parseInt(F.account_id)),F.primary_contact_id!==void 0&&(ge.primary_contact_id=F.primary_contact_id?parseInt(F.primary_contact_id):null),F.stage!==void 0&&(ge.stage=F.stage),F.amount!==void 0&&F.amount!==""&&(ge.amount=parseFloat(F.amount)),F.currency!==void 0&&(ge.currency=F.currency),F.close_date!==void 0&&(ge.close_date=F.close_date||null),F.description!==void 0&&(ge.description=F.description||null),F.assigned_to!==void 0&&(ge.assigned_to=F.assigned_to?parseInt(F.assigned_to):null),await ie.put(`/deals/admin/${G}`,ge),q.success(`Deal "${Ne}" updated successfully.`),x(!1),await Ze()}else if(he==="delete"){if(!G)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${G}`),q.success(`Deal "${Ne}" deleted successfully.`),c?.id===G&&d(null),await Ze()}}catch(ge){console.error(ge);const fe=he==="create"?"Failed to create deal. Please review the details and try again.":he==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Ue=ge.response?.data?.detail||fe;q.error(Ue)}finally{(he==="create"||he==="update")&&L(!1),z(!1),M(null)}},le=()=>{R||M(null)},X=()=>{x(!1),re({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ve(null),Ce(null),I(!1),ee(null),L(!1)},Ae=(y??[]).filter(ue=>ue.stage==="PROSPECTING").length,Pe=(y??[]).filter(ue=>ue.stage==="QUALIFICATION").length,Qe=(y??[]).filter(ue=>ue.stage==="PROPOSAL").length,nt=(y??[]).filter(ue=>ue.stage==="NEGOTIATION").length,wt=(y??[]).filter(ue=>ue.stage==="CLOSED_WON").length,Te=(y??[]).filter(ue=>ue.stage==="CLOSED_LOST").length,it=(y??[]).filter(ue=>ue.stage==="CLOSED_CANCELLED").length,$e=[{title:"Prospecting",value:Ae,icon:aN,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Pe,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Qe,icon:Jt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:nt,icon:rd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:wt,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Te,icon:zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:it,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Jt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:$e.map(ue=>n.jsx(wWe,{...ue},ue.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:ue=>s(ue.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:ue=>i(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:ue=>l(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(ue=>`${ue.assigned_deals?.first_name} ${ue.assigned_deals?.last_name}`))].map((ue,he)=>n.jsx("option",{value:ue,children:ue},he))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:et.length>0?Fe.map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...ue}),Ge(ue.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.deal_id?ue.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:ue.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:ue.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.contact?.first_name&&ue.contact?.last_name?`${ue.contact.first_name} ${ue.contact.last_name}`:ue.contact?.first_name||ue.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Oe(ue.stage)}`,children:Re(ue.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",ue.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ue.assigned_deals?.first_name&&ue.assigned_deals?.last_name?`${ue.assigned_deals.first_name} ${ue.assigned_deals.last_name}`:ue.assigned_deals?.first_name||ue.assigned_deals?.last_name||"--"})]},ue.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:et.length,pageSize:A,currentPage:w,onPrev:ot,onNext:We,onPageSizeChange:k,label:"deals"}),p&&n.jsx(NWe,{onClose:X,formData:ye,setFormData:re,isEditing:O,onSubmit:V,isSubmitting:_||R,accounts:Q,contacts:W,users:Ee,currentAccount:De,currentContact:ke}),c&&n.jsx(vee,{relatedActs:Y,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:oe,onDelete:be,onStatusUpdate:U}),T&&n.jsx(vWe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ze,onCancel:le,loading:R})]})}function vWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function wWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function NWe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){q.error("Deal name is required.");return}const j=Number(t.amount);if(!t.amount||isNaN(j)||j<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},y=v=>{v.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const v=String(t.account_id||"").trim(),j=Array.isArray(l)?l:[];return v?j.filter(w=>{const A=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return A?String(A)===v:!1}):j},[l,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),j=String(t.primary_contact_id||"").trim();if(!j||!v)return;N.some(S=>String(S?.id)===j)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:y,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(AT,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(TT,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(TT,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:N||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(eH,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(AT,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(eH,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(AT,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(TT,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(CWe,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function AT({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function eH({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function TT({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(jWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function jWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function CWe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const ET=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],kT={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ri=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},LT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",SWe=e=>{switch(Ri(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},_We=e=>{switch(Ri(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Bb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Og=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",AWe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},PT=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},tH=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},DT=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Bw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},TWe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Bw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Bw(t);return a||null},EWe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},kWe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},LWe=e=>{if(!e)return"";const a=[e.assigned_user?.id,e.assigned_to?.id,e.assigned_to,e.assigned_user_id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function PWe(){const e=Nt(),t=Xt(),{user:a}=Gt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[y,N]=h.useState([]),[v,j]=h.useState(null),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,L]=h.useState(!1),[T,M]=h.useState(!1),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState(!1),[Q,te]=h.useState(null),[W,ae]=h.useState(kT),[Ee,se]=h.useState(""),[Y,pe]=h.useState("Filter by Status"),[Se,me]=h.useState(null),ye=h.useCallback(async()=>{if(w)try{ee(!0);const Z=(await ie.get("/company/invoice-info"))?.data;e(`/group-manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:Z}})}catch(E){const Z=E?.response?.data?.detail||E?.message||"Failed to open print page.";q.error(Z)}finally{ee(!1)}},[w,e]),[re,De]=h.useState(1),[ve,ke]=h.useState(10),[Ce,de]=h.useState("Overview"),[Re,Oe]=h.useState("Draft"),[Ge,et]=h.useState([]),[mt,Fe]=h.useState(null),ot=h.useMemo(()=>LWe(w),[w]),{comments:We,addComment:Ke,refresh:Ze}=Aa({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&Ze()},[w?.id,Ze]),h.useEffect(()=>{const Z=t.state?.quoteID;if(Z){Fe(Z),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(mt&&r.length>0&&!o){const E=r.find(Z=>Z.id===mt);E?S(E):q.error("Quote not found."),Fe(null)}},[mt,r,o]),h.useEffect(()=>{let E=!0;return(async()=>{const _e=TWe();if(_e&&E){j(_e);return}try{const Le=await ie.get("/auth/me"),qe=Bw(Le?.data);if(qe&&E){j(qe);return}}catch{}try{const Le=await ie.get("/users/me"),qe=Bw(Le?.data);if(qe&&E){j(qe);return}}catch{}E&&j(null)})(),()=>{E=!1}},[]);const Me=h.useCallback(E=>E&&u.find(_e=>String(_e.id)===String(E))?.name||"",[u]),je=h.useCallback(E=>{if(!E)return"";const Z=p.find(_e=>String(_e.id)===String(E));return Z?`${Z.first_name} ${Z.last_name}`.trim():""},[p]),ce=h.useCallback(E=>{if(!E)return"--";const Z=c.find(_e=>String(_e.id)===String(E));return Z?.deal_name||Z?.name||`Deal #${tH(E)}`},[c]),oe=h.useCallback(E=>{const Z=c.find(qe=>String(qe.id)===String(E)),_e=EWe(Z);let Le=kWe(Z);if(!Le&&_e){const qe=p.filter(Xe=>String(Xe.account_id||"")===String(_e));if(qe.length>0){const Xe=[...qe].sort((jt,vt)=>{const Ut=`${jt.first_name||""} ${jt.last_name||""}`.trim().toLowerCase(),An=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return Ut.localeCompare(An)});Le=String(Xe[0].id)}}if(_e&&Le){const qe=p.find(Xe=>String(Xe.id)===String(Le));qe?.account_id&&String(qe.account_id)!==String(_e)&&(Le="")}return{accountId:_e||"",contactId:Le||""}},[c,p]),U=h.useCallback(E=>{if(!E)return"--";if(E.deal?.deal_name)return E.deal.deal_name;if(E.deal?.name)return E.deal.name;const Z=E.deal_id||E.deal?.id;return Z?ce(Z):"--"},[ce]),V=h.useCallback(E=>{if(!E)return"--";if(E.account?.name)return E.account.name;let Z=E.account_id||E.account?.id;if(!Z){const _e=E.deal_id||E.deal?.id;_e&&(Z=oe(_e).accountId)}return Z?Me(Z)||`Account #${Z}`:"--"},[oe,Me]),be=h.useCallback(E=>{if(!E)return"--";if(E.contact?.first_name||E.contact?.last_name)return`${E.contact?.first_name||""} ${E.contact?.last_name||""}`.trim()||"--";let Z=E.contact_id||E.contact?.id;if(!Z){const Le=E.deal_id||E.deal?.id;Le&&(Z=oe(Le).contactId)}return(Z?je(Z):"")||(Z?`Contact #${Z}`:"--")},[oe,je]),ze=h.useCallback(async(E=null)=>{l(!0);try{const Z=await ie.get("/quotes/admin/fetch-all"),Le=[...Array.isArray(Z.data)?Z.data:[]].sort((qe,Xe)=>{const jt=qe?.created_at||qe?.updated_at||0,vt=Xe?.created_at||Xe?.updated_at||0;return new Date(vt)-new Date(jt)});if(i(Le),E){const qe=Le.find(Xe=>Xe.id===E);S(qe||null)}}catch(Z){console.error(Z),i([]),Z.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),le=h.useCallback(async()=>{try{const E=await ie.get("/deals/admin/fetch-all");d(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),X=h.useCallback(async()=>{try{const E=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const E=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Pe=h.useCallback(async()=>{try{const E=await ie.get("/users/all");N(Array.isArray(E.data)?E.data:[])}catch(E){console.error(E),E.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{ze(),le(),X(),Ae(),Pe()},[ze,le,X,Ae,Pe]);const Qe=h.useMemo(()=>{const E=Ee.trim().toLowerCase(),Z=Y.trim();return r.filter(_e=>{const Le=U(_e),qe=V(_e),Xe=be(_e),jt=PT(_e.presented_date,_e.validity_days),vt=[_e.quote_id,Le,qe,Xe,_e.total_amount?.toString(),_e.validity_days?.toString(),_e.presented_date?Og(_e.presented_date):"",jt?Og(jt):"",_e.assigned_user?.first_name,_e.assigned_user?.last_name,_e.creator?.first_name,_e.creator?.last_name,_e.status,_e.notes,Bb(_e.created_at),Bb(_e.updated_at)],Ut=E===""||vt.some(Ei=>Ei==null?!1:Ei.toString().toLowerCase().includes(E)),An=Z==="Filter by Status"||Ri(_e.status)===Z;return Ut&&An})},[r,Ee,Y,U,V,be]),nt=Math.max(1,Math.ceil(Qe.length/ve)||1);h.useEffect(()=>De(1),[Ee,Y]),h.useEffect(()=>{De(E=>{const Z=Math.max(1,Math.ceil(Qe.length/ve)||1);return E>Z?Z:E})},[Qe.length,ve]);const wt=h.useMemo(()=>{const E=(re-1)*ve;return Qe.slice(E,E+ve)},[Qe,re,ve]),Te=()=>De(E=>Math.max(E-1,1)),it=()=>De(E=>Math.min(E+1,nt)),$e=E=>{S(E),de("Overview"),Oe(Ri(E?.status)||"Draft")},ue=()=>{S(null),de("Overview")},he=E=>{E.target.id==="quoteModalBackdrop"&&!O&&ue()},F=h.useCallback(()=>{k(!1),L(!1),te(null),ae(kT),M(!1)},[]),G=E=>{E.target.id==="modalBackdrop"&&!T&&!O&&F()},Ne=E=>{const{name:Z,value:_e}=E.target;if(Z==="deal_id"){const{accountId:Le,contactId:qe}=oe(_e);ae(Xe=>({...Xe,deal_id:_e,account_id:Le,contact_id:qe}));return}ae(Le=>({...Le,[Z]:_e}))},ge=()=>{ae(kT),L(!1),te(null),k(!0)},fe=E=>{if(!E)return;S(null);const Z=E.deal?.id?String(E.deal.id):E.deal_id?String(E.deal_id):"",_e=Z?oe(Z):{accountId:"",contactId:""},Le=E.account?.id?String(E.account.id):E.account_id?String(E.account_id):_e.accountId,qe=E.contact?.id?String(E.contact.id):E.contact_id?String(E.contact_id):_e.contactId,Xe=E.assigned_user?.id?String(E.assigned_user.id):E.assigned_to?String(E.assigned_to):"";ae({deal_id:Z,account_id:Le||"",contact_id:qe||"",total_amount:E.total_amount?.toString()||"",presented_date:AWe(E.presented_date),validity_days:E.validity_days!==null&&E.validity_days!==void 0?String(E.validity_days):"",status:Ri(E.status)||"Draft",assigned_to:Xe,notes:E.notes||"",subtotal:parseFloat(E.subtotal)||0,tax_rate:parseFloat(E.tax_rate)||0,tax_amount:parseFloat(E.tax_amount)||0,discount_type:E.discount_type||"",discount_value:parseFloat(E.discount_value)||0,discount_amount:parseFloat(E.discount_amount)||0,currency:E.currency||"PHP",items:Array.isArray(E.items)?E.items.map(jt=>({id:jt.id,item_type:jt.item_type||"Product",name:jt.name||"",description:jt.description||"",sku:jt.sku||"",variant:jt.variant||"",unit:jt.unit||"pcs",quantity:parseFloat(jt.quantity)||1,unit_price:parseFloat(jt.unit_price)||0,discount_percent:parseFloat(jt.discount_percent)||0,discount_amount:parseFloat(jt.discount_amount)||0,line_total:parseFloat(jt.line_total)||0,sort_order:jt.sort_order||0})):[]}),L(!0),te(E.id),k(!0)},Ue=E=>{if(E.target.checked){const Z=wt.map(_e=>_e.id);et(Z)}else et([])},K=E=>{et(Z=>Z.includes(E)?Z.filter(_e=>_e!==E):[...Z,E])},ne=E=>{if(!E)return;const Z=E.quote_id||"this quote";z({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Z}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:E.id,name:Z}})},H=async()=>{Ge.length!==0&&z({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ge.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ge.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ge}})},[xe,Ie]=h.useState(!1),Je=E=>{if(E.preventDefault(),Ie(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){q.error("Deal is required.");return}if(!W.assigned_to){q.error("Assigned To is required.");return}const _e=oe(W.deal_id),Le=W.items.map((Ut,An)=>({item_type:Ut.item_type||"Product",name:Ut.name,description:Ut.description||null,sku:Ut.sku||null,variant:Ut.variant||null,unit:Ut.unit||null,quantity:parseFloat(Ut.quantity)||1,unit_price:parseFloat(Ut.unit_price)||0,discount_percent:parseFloat(Ut.discount_percent)||0,sort_order:Ut.sort_order??An})),qe={deal_id:Number(W.deal_id),account_id:_e.accountId?Number(_e.accountId):null,contact_id:_e.contactId?Number(_e.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:Le},Xe=_&&Q?"update":"create",jt=ce(W.deal_id),vt=Xe==="create"?{...qe,created_by_id:Number(v)}:qe;z({title:Xe==="create"?"Confirm New Quote":"Confirm Update",message:Xe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:jt}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:jt}),"?"]}),confirmLabel:Xe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Xe,payload:vt,targetId:Q||null,name:jt}})},ct=async()=>{if(!R?.action){z(null);return}const{action:E}=R,{type:Z,payload:_e,targetId:Le,name:qe}=E;I(!0);try{if(Z==="create")M(!0),await ie.post("/quotes/admin",_e),q.success("Quote created successfully."),F(),await ze();else if(Z==="update"){if(!Le)throw new Error("Missing quote identifier for update.");M(!0),await ie.put(`/quotes/admin/${Le}`,_e),q.success("Quote updated successfully."),F(),await ze(),w?.id===Le&&S(null)}else if(Z==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Xe=w?.id;me(Le),await ie.delete(`/quotes/admin/${Le}`),q.success(`Quote "${qe}" deleted successfully.`),await ze(Xe&&Xe!==Le?Xe:null),Xe===Le&&S(null)}else Z==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:Ge}),q.success(`Successfully deleted ${Ge.length} quotes`),et([]),await ze())}catch(Xe){console.error(Xe);const jt=Z==="create"?"Failed to create quote. Please review the details and try again.":Z==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(jt),(Z==="create"||Z==="update")&&M(!1),Z==="delete"&&me(null)}finally{(Z==="create"||Z==="update")&&M(!1),Z==="delete"&&me(null),I(!1),z(null)}},bt=()=>{O||z(null)},Pt=h.useCallback((E,Z)=>{const _e=E?.deal_id??E?.deal?.id??"",Le=_e?Number(_e):null,qe=Le?oe(String(Le)):{accountId:"",contactId:""},Xe=E?.account_id??E?.account?.id??qe.accountId??null,jt=E?.contact_id??E?.contact?.id??qe.contactId??null,vt=E?.total_amount??0,Ut=E?.assigned_to??E?.assigned_user?.id??null;return{deal_id:Le,account_id:Xe!=null&&String(Xe).trim()!==""?Number(Xe):null,contact_id:jt!=null&&String(jt).trim()!==""?Number(jt):null,total_amount:Number(vt),presented_date:E?.presented_date||null,validity_days:E?.validity_days===""||E?.validity_days===void 0||E?.validity_days===null?null:Number(E.validity_days),status:Z,assigned_to:Ut!=null&&String(Ut).trim()!==""?Number(Ut):null,notes:E?.notes?.trim()||null}},[oe]),Et=h.useCallback(async()=>{if(!w?.id)return;const E=Ri(Re),Z=[E,E.toLowerCase()],_e=async Le=>ie.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const qe of Z)try{await _e(qe),Le=!0;break}catch(Xe){if(Xe?.response?.status===422)continue;throw Xe}if(!Le){const qe=Pt(w,E);if(!qe.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!qe.total_amount||qe.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${w.id}`,qe)}q.success(`Quote status updated to ${E}`),S(null),de("Overview"),await ze()}catch(Le){console.error(Le);const qe=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(qe)}},[w,Re,ze,Pt]),Yt=[{label:"Filter by Status",value:"Filter by Status"},...ET.map(E=>({label:E.label,value:E.value}))],rn=R?.action?.type==="delete"?R.action.targetId:null,aa=w&&(Se===w.id||rn===w.id),Va=w&&Se===w.id,bs=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:he,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:E=>E.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ue,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Qn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:U(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${_We(w.status)}`,children:LT(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:ye,disabled:B||T||O,children:[n.jsx(un,{className:"mr-2"}),B?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(w),disabled:O||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ne(w),disabled:!!aa,children:Va?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(E=>n.jsx("button",{onClick:()=>de(E),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===E?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:E},E))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:DT(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:U(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:V(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:be(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:Og(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:Og(PT(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:LT(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Bb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Bb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(xd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(_a,{comments:We,onAddComment:Ke})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${DT(w.quote_id)}`,assigned_to:ot,direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(kt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:ot,status:"Planned"}}}),children:[n.jsx(Tt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:ot,priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Vt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Re||Ri(w.status)||"Draft",onChange:E=>Oe(E.target.value),children:ET.map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))}),n.jsx("button",{onClick:Et,disabled:Ri(Re)===Ri(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ri(Re)===Ri(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Be=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(un,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ge(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Ee,onChange:E=>se(E.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:Y,onChange:E=>pe(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Yt.map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:wt.length>0&&Ge.length===wt.length,onChange:Ue,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ge.length>0?n.jsx("button",{onClick:H,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ge.length} selected items`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Qe.length>0?wt.map(E=>{const Z=PT(E.presented_date,E.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>$e(E),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:_e=>_e.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ge.includes(E.id),onChange:()=>K(E.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:DT(E.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:U(E)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:V(E)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:be(E)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:E.total_amount?`${s}${Number(E.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${SWe(E.status)}`,children:LT(E.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:E.assigned_user?`${E.assigned_user.first_name} ${E.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:Og(Z)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},E.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:Qe.length,pageSize:ve,currentPage:re,onPrev:Te,onNext:it,onPageSizeChange:E=>{ke(E),De(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),St=A?n.jsx("div",{id:"modalBackdrop",onClick:G,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{onClick:()=>{F(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||O,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Je,children:[n.jsx(sH,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:E=>{const{accountId:Z,contactId:_e}=oe(E);ae(Le=>({...Le,deal_id:E,account_id:Z,contact_id:_e}))},items:Array.isArray(c)?c:[],getLabel:E=>`${tH(E?.deal_id??"")} ${E?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:xe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(aH,{label:"Account",value:Me(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(aH,{label:"Contact",value:je(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(xd,{items:W.items,onChange:E=>ae(Z=>({...Z,items:E})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:E=>{ae(Z=>({...Z,subtotal:E.subtotal,discount_amount:E.discount_amount,tax_amount:E.tax_amount,total_amount:E.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:E=>ae(Z=>({...Z,discount_type:E.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:E=>ae(Z=>({...Z,discount_value:E.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:E=>ae(Z=>({...Z,tax_rate:E.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(nH,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:Ne,disabled:T}),n.jsx(nH,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:Ne,placeholder:"30",disabled:T}),n.jsx(sH,{label:"Assigned To",value:W.assigned_to||"",onChange:E=>ae(Z=>({...Z,assigned_to:E})),items:Array.isArray(y)?y:[],getLabel:E=>{const Z=`${E?.first_name??""} ${E?.last_name??""}`.trim();return Z?E?.role?`${Z} (${E.role})`:Z:E?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:xe,disabled:T}),n.jsx(DWe,{label:"Status",name:"status",value:W.status,onChange:Ne,options:ET,required:!0,disabled:T}),n.jsx(MWe,{label:"Notes",name:"notes",value:W.notes,onChange:Ne,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{F(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||O,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||O,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,P=R?n.jsx(IWe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:ct,onCancel:bt,loading:O}):null;return n.jsxs(n.Fragment,{children:[w?bs:Be,St,P]})}function nH({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function aH({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function DWe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function sH({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(OWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function OWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(v=>String(v.id)===String(t)),y=x?s(x):"",N=h.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:y,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{f(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function MWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function IWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function $We(){const{userRole:e}=Qs();return n.jsx(r1,{currentUserRole:e,currentUserId:null})}const rH=["Not started","In progress","Deferred","Completed"],iH={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},wee=e=>e&&(iH[e]||iH[String(e).toUpperCase()])||"Not started",RWe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},OT=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},zWe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),wee(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},FWe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=B=>{if(!B)return"";const ee=String(B).split("-");return ee.length===3?`${ee[0]}-${ee[2]}`:String(B)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",k="",_="Lead",L="",T="",M="";const R=c(),z=y(),O=l(),I=x();if(R){w="Account",_="Account",L=z,S=String(R);const B=d(),ee=u(),Q=N(),te=v(),W=f(),ae=j();B?(A="Contact",T="Contact",M=Q,k=String(B)):ee?(T="Deal",A="Deal",M=te,k=String(ee)):W&&(T="Quote",A="Quote",M=ae,k=String(W))}else O?(_="Lead",L=I,w="Lead",S=String(O)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:wee(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:L,relatedType2Text:T,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:k}};function UWe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[y,N]=h.useState(""),[v,j]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,L]=h.useState(1),[T,M]=h.useState(10),[R,z]=h.useState(null),[O,I]=h.useState(!1),[B,ee]=h.useState([]),[Q,te]=h.useState(null),W=Nt(),ae=Xt(),[Ee,se]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[Y,pe]=h.useState(null),Se=Rx(Rf(nm,{activationConstraint:{distance:8}})),me=U=>{const{active:V}=U,be=u.find(ze=>ze.id===V.id);te(be)},ye=async U=>{const{active:V,over:be}=U;if(te(null),!be)return;const ze=V.id,le=be.id,X=u.find(Ae=>Ae.id===ze);if(!(!X||X.status===le)){f(Ae=>Ae.map(Pe=>Pe.id===ze?{...Pe,status:le}:Pe));try{const Ae={title:X.title,description:X.description||"",priority:X.priority||"Normal",status:le,due_date:X.dueDate||null,assigned_to:X.assignedToId||null,related_type_1:X.relatedType1||null,related_to_1:X.relatedTo1?parseInt(X.relatedTo1,10):null,related_type_2:X.relatedType2||null,related_to_2:X.relatedTo2?parseInt(X.relatedTo2,10):null};(!Ae.related_to_1||isNaN(Ae.related_to_1))&&(Ae.related_to_1=null),(!Ae.related_to_2||isNaN(Ae.related_to_2))&&(Ae.related_to_2=null),await ie.put(`/tasks/${ze}`,Ae),q.success(`Task moved to "${le}"`)}catch(Ae){console.error("Failed to update task status:",Ae),q.error("Failed to update task status"),f(Pe=>Pe.map(Qe=>Qe.id===ze?{...Qe,status:X.status}:Qe))}}},re=()=>{te(null)};h.useEffect(()=>{const U=ae.state?.openTaskModal,V=ae.state?.initialTaskData,be=ae.state?.taskID;U?(i(!0),V&&se(ze=>({...ze,...V})),W(ae.pathname,{replace:!0,state:{}})):be&&(pe(be),W(ae.pathname,{replace:!0,state:{}}))},[ae,W]),h.useEffect(()=>{if(Y&&u.length>0&&!p){const U=u.find(V=>V.id===Y);U?Ce(U,!0):q.error("Task not found."),pe(null)}},[Y,u,p]);const De=async()=>{try{const U=await ie.get("/users/all");k(Array.isArray(U.data)?U.data:[])}catch(U){console.error("Failed to fetch users:",U),q.error("Failed to fetch users.")}},ve=async()=>{try{x(!0);const U=await ie.get("/tasks/all"),be=(Array.isArray(U.data)?U.data:[]).map(FWe);be.sort((ze,le)=>{const X=ze.createdAt?new Date(ze.createdAt):0;return(le.createdAt?new Date(le.createdAt):0)-X}),f(be),a==="list"&&L(1)}catch(U){console.error("Failed to load tasks:",U),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(De(),ve())},[t,e]);const ke=()=>{l(null),se({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ce=(U=null,V=!1)=>{l(U),d(V),U?se({id:U.id,subject:U.title||"",description:U.description||"",priority:U.priority||"Normal",status:U.status||"Not started",dueDate:RWe(U.dueDate),assignedTo:U.assignedToId?String(U.assignedToId):"",assignedToName:U.assignedToName||"",createdBy:U.createdBy||"",notes:U.notes||"",relatedType1Text:U.relatedType1Text||"",relatedTo1Text:U.relatedTo1Text||"",relatedType2Text:U.relatedType2Text||"",relatedTo2Text:U.relatedTo2Text||"",relatedType1:U.relatedType1||"",relatedTo1:U.relatedTo1||"",relatedType2:U.relatedType2||"",relatedTo2:U.relatedTo2||""}):ke(),i(!0)},de=()=>{i(!1),l(null),d(!1),ke()},Re=async U=>{const V=zWe(U);try{o&&!c?(await ie.put(`/tasks/${o.id}`,V),q.success("Task updated successfully.")):(await ie.post("/tasks/create",V),q.success("Task created successfully.")),i(!1),await ve()}catch(be){console.error("Failed to save task:",be);const ze=be.response?.data?.detail||"Failed to save task.";q.error(ze)}},Oe=U=>{U&&z({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:U.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id}})},Ge=()=>{if(Ke.every(U=>B.includes(U.id)))ee(B.filter(U=>!Ke.map(V=>V.id).includes(U)));else{const U=Ke.map(V=>V.id);ee([...new Set([...B,...U])])}},et=U=>{ee(V=>V.includes(U)?V.filter(be=>be!==U):[...V,U])},mt=async()=>{B.length!==0&&z({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:B.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${B.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:B}})},Fe=async()=>{if(!R?.action){z(null);return}const{action:U}=R;I(!0);try{U.type==="delete"?(await ie.delete(`/tasks/${U.targetId}`),q.success("Task deleted successfully."),await ve()):U.type==="bulk-delete"&&(await ie.delete("/tasks/admin/bulk-delete",{data:{task_ids:U.task_ids}}),q.success(`Successfully deleted ${U.task_ids.length} tasks`),ee([]),await ve())}catch(V){console.error("Task action failed:",V),q.error("Failed to delete task.")}finally{I(!1),z(null)}},ot=()=>{O||z(null)},We=h.useMemo(()=>{const U=y.trim().toLowerCase();return[...u].sort((be,ze)=>{const le=be.createdAt?new Date(be.createdAt):0;return(ze.createdAt?new Date(ze.createdAt):0)-le}).filter(be=>{const ze=U===""||be.title?.toLowerCase().includes(U)||be.description?.toLowerCase().includes(U)||be.assignedToName?.toLowerCase().includes(U)||be.createdBy?.toLowerCase().includes(U),le=v==="Filter by Status"||be.status===v,X=w==="Filter by Priority"||be.priority===w;return ze&&le&&X})},[u,y,v,w]);h.useEffect(()=>{L(1)},[y,v,w,a,T]),h.useEffect(()=>{if(a==="list"){const U=We.length===0?1:Math.ceil(We.length/T);_>U&&L(U)}},[We.length,_,a,T]);const Ke=h.useMemo(()=>{if(a==="board")return We;const U=(_-1)*T;return We.slice(U,U+T)},[We,_,a,T]),Ze=h.useMemo(()=>{const U=new Date;return[{title:"To Do",value:u.filter(V=>V.status==="Not started").length,icon:Ws,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(V=>V.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(V=>V.status==="Completed").length,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(V=>V.dueDate&&new Date(V.dueDate)<U&&V.status!=="Completed").length,icon:Vu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(V=>V.priority==="High").length,icon:Xl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Me=U=>U.dueDate&&new Date(U.dueDate)<new Date&&U.status!=="Completed",je=U=>{switch(U.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ce=U=>{switch(U){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},oe=U=>{switch(U){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ce(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(gn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ze.map(U=>n.jsx(BWe,{...U},U.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:y,onChange:U=>N(U.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:U=>j(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),rH.map(U=>n.jsx("option",{children:U},U))]}),n.jsxs("select",{value:w,onChange:U=>S(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(We.length>0?n.jsxs(Ux,{sensors:Se,collisionDetection:zx,onDragStart:me,onDragEnd:ye,onDragCancel:re,children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:rH.map(U=>{const V=Ke.filter(be=>be.status===U);return n.jsx(qWe,{column:U,columnTasks:V,getTaskCardColor:je,isTaskOverdue:Me,formatDateDisplay:OT,handleOpenModal:Ce,handleDeleteTask:Oe},U)})}),n.jsx(pj,{children:Q?n.jsx(WWe,{task:Q,getTaskCardColor:je,isTaskOverdue:Me,formatDateDisplay:OT}):null})]}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ke.length>0&&Ke.every(U=>B.includes(U.id)),onChange:Ge})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:B.length>0?n.jsx("button",{onClick:mt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${B.length} selected tasks`,children:n.jsx(Kt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ke.length>0?Ke.map(U=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:V=>V.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:B.includes(U.id),onChange:()=>et(U.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ce(U,!0),children:U.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ce(U,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ce(U.status||"Not started")}`,children:U.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ce(U,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${oe(U.priority||"Low")}`,children:U.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ce(U,!0),children:U.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Me(U)?"text-red-600 font-medium":""}`,onClick:()=>Ce(U,!0),children:U.dateAssigned?OT(U.dateAssigned):""}),n.jsx("td",{})]},U.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(an,{className:"mt-6",totalItems:We.length,pageSize:T,currentPage:We.length===0?0:_,onPrev:()=>L(U=>Math.max(U-1,1)),onNext:()=>L(U=>Math.min(U+1,Math.max(1,Math.ceil(We.length/T)||1))),onPageSizeChange:U=>{M(U),L(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(x0,{isOpen:r,onClose:de,onSave:Re,onEdit:()=>d(!1),setFormData:se,formData:Ee,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Oe}),R&&n.jsx(HWe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Fe,onCancel:ot,loading:O})]})}function BWe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function HWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function qWe({column:e,columnTasks:t,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Hx({id:e});return n.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:e}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),n.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(d=>n.jsx(GWe,{task:d,getTaskCardColor:a,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},d.id)):n.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function GWe({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:d,isDragging:u}=Bx({id:e.id}),f=d?{transform:`translate3d(${d.x}px, ${d.y}px, 0)`}:void 0;return n.jsxs("div",{ref:c,style:f,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${u?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[n.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ua,{})}),n.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:n.jsx(Kt,{})})]})]})}function WWe({task:e,getTaskCardColor:t,isTaskOverdue:a,formatDateDisplay:s}){return n.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:a(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const Nee=e=>e?e.toUpperCase():"",Hb=e=>{const t=Nee(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},VWe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},YWe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},QWe=e=>{const t=Nee(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},MT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},KWe=()=>{const e=Nt(),t=Xt(),[a]=Fs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,y]=h.useState("Filter by Status"),[N,v]=h.useState(!1),[j,w]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[L,T]=h.useState(MT),[M,R]=h.useState(!1),[z,O]=h.useState(null),[I,B]=h.useState(!1),[ee,Q]=h.useState(null),[te,W]=h.useState(!1),[ae,Ee]=h.useState(null),[se,Y]=h.useState(new Set),[pe,Se]=h.useState(!1),{user:me}=Gt();h.useEffect(()=>{const ce=t.state?.openMeetingModal,oe=t.state?.initialMeetingData?.relatedTo||a.get("id"),U=t.state?.meetingID;ce||oe?(v(!0),t.state?.initialMeetingData&&T(V=>({...V,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):U&&(Ee(U),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(ae&&i.length>0&&!l){const ce=i.find(oe=>oe.id===ae);ce?w(ce):q.error("Meeting not found."),Ee(null)}},[ae,i,l]);const ye=async()=>{if(s&&r){const ce=sessionStorage.getItem("meetingDetailData");if(ce)try{const oe=JSON.parse(ce);if(oe.id===parseInt(s)){w(oe),sessionStorage.removeItem("meetingDetailData");return}}catch(oe){console.error(oe)}}c(!0);try{const ce=await ie.get("/meetings/admin/fetch-all"),U=[...Array.isArray(ce.data)?ce.data:[]].sort((V,be)=>{const ze=V?.created_at?new Date(V.created_at).getTime():0;return(be?.created_at?new Date(be.created_at).getTime():0)-ze});if(o(U),s&&!j){const V=U.find(be=>be.id===parseInt(s));V&&w(V)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},re=async()=>{try{const ce=await ie.get("/users/all");u(Array.isArray(ce.data)?ce.data:[])}catch(ce){console.error(ce)}};h.useEffect(()=>{ye(),re()},[]);const De=ce=>p(ce.target.value),ve=h.useMemo(()=>{if(!me?.id)return[];const ce=me?.role?.toUpperCase();return ce==="GROUP MANAGER"||ce==="CEO"||ce==="ADMIN"?i:i.filter(oe=>oe.created_by===me.id||oe.meet_assign_to?.id===me.id)},[i,me?.id,me?.role]),de=["GROUP MANAGER","MANAGER","SALES"].includes(me?.role?.toUpperCase())?ve.filter(ce=>!(ce.status?.toUpperCase()==="INACTIVE")):ve,Re=h.useMemo(()=>{const ce=f.trim().toLowerCase(),oe=x.trim().toUpperCase();return de.filter(U=>{const V=[U?.activity,U?.description,U?.relatedTo,U?.assignedTo],be=ce===""||V.some(le=>le&&le.toString().toLowerCase().includes(ce)),ze=oe==="FILTER BY STATUS"||Hb(U.status||"PENDING")===oe;return be&&ze})},[de,f,x]),Oe=h.useMemo(()=>{const ce=(S-1)*k;return Re.slice(ce,ce+k)},[Re,S,k]),Ge=()=>{v(!1),T(MT),R(!1),O(null),B(!1)},et=()=>{T(MT),R(!1),O(null),v(!0)},mt=ce=>{let oe="";if(ce.meet_assign_to?.id)oe=String(ce.meet_assign_to.id);else if(ce.assignedTo){const Qe=d.find(nt=>`${nt.first_name} ${nt.last_name}`===ce.assignedTo);oe=Qe?String(Qe.id):""}const U=Qe=>{if(!Qe)return"";try{const nt=new Date(Qe),wt=nt.getTimezoneOffset()*6e4;return new Date(nt.getTime()-wt).toISOString().slice(0,16)}catch{return""}};let V="Lead",be="",ze="Contact",le="";if(ce.lead)V="Lead",be=String(ce.lead.id);else if(ce.account)V="Account",be=String(ce.account.id),ce.contact?(ze="Contact",le=String(ce.contact.id)):ce.deal?(ze="Deal",le=String(ce.deal.id)):ce.quote&&(ze="Quote",le=String(ce.quote.id));else if(ce.relatedType||ce.related_type){const Qe=ce.relatedType||ce.related_type,nt=ce.related_to||ce.relatedToId;Qe==="Lead"?(V="Lead",be=String(nt)):(V="Account",be=ce.account_id?String(ce.account_id):"")}const X={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ae=Hb(ce.status),Pe=X[Ae]||"Planned";T({subject:ce.subject||ce.activity||"",location:ce.location||"",startTime:U(ce.start_time||ce.startTime),endTime:U(ce.end_time||ce.endTime),status:Pe,notes:ce.description||ce.notes||"",assignedTo:oe,relatedType1:V,relatedTo1:be,relatedType2:ze,relatedTo2:le}),R(!0),O(ce.id),w(null),v(!0)},Fe=ce=>{if(!ce.subject?.trim())return q.error("Subject is required.");if(!ce.startTime)return q.error("Start time is required.");if(ce.endTime&&!(new Date(ce.endTime)-new Date(ce.startTime)>0))return q.error("End time must be after start time.");ce.relatedType1,ce.relatedTo1,ce.relatedType1==="Account"&&ce.relatedType2&&ce.relatedTo2&&(ce.relatedType2,ce.relatedTo2);const oe={...ce,assignedTo:parseInt(ce.assignedTo),relatedTo1:parseInt(ce.relatedTo1),relatedTo2:parseInt(ce.relatedTo2)},U=M&&z?"update":"create";Q({title:U==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${U} "${oe.subject}"?`,confirmLabel:U==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:U,payload:oe,targetId:z,name:oe.subject}})},ot=async()=>{if(!ee?.action)return;const{type:ce,payload:oe,targetId:U,name:V,targetIds:be,count:ze}=ee.action;W(!0);try{if(ce==="create")B(!0),await ie.post("/meetings/create",oe),q.success(`Meeting "${V}" created.`),Ge(),await ye();else if(ce==="update")B(!0),await ie.put(`/meetings/${U}`,oe),q.success(`Meeting "${V}" updated.`),Ge(),await ye();else if(ce==="delete")await ie.put("/meetings/bulk-archive",{meeting_ids:[U]}),q.success(`Meeting "${V}" archived successfully.`),j?.id===U&&w(null),await ye();else if(ce==="bulk-delete"){if(!be||be.length===0)throw new Error("Missing meeting identifiers for bulk archiving.");Se(!0),await ie.put("/meetings/bulk-archive",{meeting_ids:be}),q.success(`${ze} meeting${ze!==1?"s":""} archived successfully.`),Y(new Set),await ye(),j&&se.has(j.id)&&w(null)}}catch(le){const X=ce==="create"?"Failed to create meeting. Please review the details and try again.":ce==="update"?"Failed to update meeting. Please review the details and try again.":ce==="bulk-delete"?"Failed to archive meetings. Please try again.":"Failed to archive meeting. Please try again.",Ae=le?.response?.data?.detail||X;q.error(Ae),console.error(le)}finally{(ce==="create"||ce==="update")&&B(!1),ce==="bulk-delete"&&Se(!1),W(!1),Q(null)}},We=ce=>{Q({title:"Archive Meeting",message:`Are you sure you want to archive "${ce.subject||ce.activity}"? You can restore it later if needed.`,confirmLabel:"Archive",variant:"archive",action:{type:"delete",targetId:ce.id,name:ce.subject||ce.activity}})},Ke=ce=>{const oe=Oe.find(U=>U.id===ce);oe&&oe.created_by===me?.id&&Y(U=>{const V=new Set(U);return V.has(ce)?V.delete(ce):V.add(ce),V})},Ze=()=>{const ce=Oe.filter(oe=>oe.created_by===me?.id);se.size===ce.length?Y(new Set):Y(new Set(ce.map(oe=>oe.id)))},Me=()=>{if(se.size===0)return;const ce=se.size;Q({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:ce})," meeting",ce!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${ce} Meeting${ce!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(se),count:ce}})},je=async(ce,oe)=>{try{await ie.put(`/meetings/${ce}`,{status:oe}),q.success("Status updated"),ye(),w(null)}catch{q.error("Failed to update status")}};return r&&s?j?n.jsx(yd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:mt,onDelete:We,onStatusUpdate:je,currentUser:me,isSalesView:!0}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Tt,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:et,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(gn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:De,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ce=>y(ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:se.size===Oe.filter(ce=>ce.created_by===me?.id).length&&Oe.filter(ce=>ce.created_by===me?.id).length>0,onChange:Ze,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:se.size>0&&n.jsx("button",{onClick:Me,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected meetings",disabled:pe,children:n.jsx(kn,{size:18})})})]})}),n.jsx("tbody",{children:Oe.length>0?Oe.map(ce=>n.jsxs("tr",{onClick:()=>w(ce),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4",onClick:oe=>oe.stopPropagation(),children:me?.id===ce.created_by&&n.jsx("input",{type:"checkbox",checked:se.has(ce.id),onChange:oe=>{oe.stopPropagation(),Ke(ce.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ce.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ce.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.lead.title}),ce.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.account.name}),ce.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ce.contact.first_name," ",ce.contact.last_name]}),ce.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.deal.name}),ce.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:VWe(ce.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:YWe(ce.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ce.meet_assign_to.first_name," ",ce.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${QWe(Hb(ce.status))}`,children:Hb(ce.status).replace("_"," ")})})]},ce.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(an,{totalItems:Re.length,pageSize:k,currentPage:S,onPrev:()=>A(ce=>Math.max(1,ce-1)),onNext:()=>A(ce=>ce+1),onPageSizeChange:_,label:"meetings"}),N&&n.jsx(p1,{onClose:Ge,formData:L,setFormData:T,isEditing:M,onSubmit:Fe,isSubmitting:I||te,users:d}),j&&n.jsx(yd,{meeting:j,onClose:()=>w(null),onEdit:mt,onDelete:We,onStatusUpdate:je,currentUser:me,isSalesView:!0}),ee&&n.jsx(XWe,{open:!0,title:ee.title,message:ee.message,confirmLabel:ee.confirmLabel,variant:ee.variant,onConfirm:ot,onCancel:()=>Q(null),loading:te})]})};function XWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const ZWe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],JWe=e=>e?String(e).toUpperCase():"",hf=e=>{const t=JWe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},IT=e=>{const t=hf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},oH=e=>{switch(hf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},lH=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function eVe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,L]=h.useState("PLANNED"),[T,M]=h.useState(!1),[R,z]=h.useState(!1),[O,I]=h.useState(null),[B,ee]=h.useState(new Set),[Q,te]=h.useState(!1),{user:W}=Gt(),{comments:ae,addComment:Ee,refresh:se}=Aa({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&se()},[a?.id,se]),Fs();const Y=Nt(),pe=Xt(),Se=K=>{if(!K)return"";const ne=String(K).split("-");return ne.length===3?`${ne[0]}-${ne[2]}`:String(K)},ye={subject:"",call_time:(()=>{const K=new Date,ne=K.getFullYear(),H=String(K.getMonth()+1).padStart(2,"0"),xe=String(K.getDate()).padStart(2,"0");return`${ne}-${H}-${xe}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[re,De]=h.useState(ye);h.useEffect(()=>{const K=pe.state,ne=K?.callID;if(ne&&!K?.openCallModal){I(ne),Y(pe.pathname,{replace:!0,state:{}});return}!K?.openCallModal||!K?.initialCallData||K.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||K.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),De(H=>({...H,...K.initialCallData,relatedTo1:K.initialCallData.relatedTo1?String(K.initialCallData.relatedTo1):"",relatedTo2:K.initialCallData.relatedTo2?String(K.initialCallData.relatedTo2):""})),Y(pe.pathname,{replace:!0,state:{}}))},[pe.state,o]),h.useEffect(()=>{if(O&&u.length>0&&!R){const K=u.find(ne=>ne.id===O);K?s(K):q.error("Call not found."),I(null)}},[O,u,R]);const ve=async()=>{try{z(!0);const K=await ie.get("/calls/admin/fetch-all"),H=[...Array.isArray(K.data)?K.data:[]].sort((xe,Ie)=>{const Je=xe?.created_at?new Date(xe.created_at):0;return(Ie?.created_at?new Date(Ie.created_at):0)-Je});f(H)}catch(K){console.error("Error fetching calls:",K),q.error("Failed to load calls")}finally{z(!1)}},ke=async()=>{try{const K=await ie.get("/users/all");x(K.data)}catch(K){console.error("Error fetching users: ",K)}};h.useEffect(()=>{ke(),ve()},[]);const Ce=[],[de,Re]=h.useState(""),[Oe,Ge]=h.useState("Filter by Status"),[et,mt]=h.useState("Filter by Users"),[Fe,ot]=h.useState(1),[We,Ke]=h.useState(10),Me=["GROUP MANAGER","MANAGER","SALES"].includes(W?.role?.toUpperCase())?u.filter(K=>K.status!=="INACTIVE"):u,je=Math.max(1,Math.ceil(Me.length/We)||1);h.useEffect(()=>{ot(1)},[de,Oe,We]),h.useEffect(()=>{ot(K=>{const ne=Math.max(1,Math.ceil(Me.length/We)||1);return K>ne?ne:K})},[Me.length,We]);const ce=h.useMemo(()=>{const K=(Fe-1)*We;return Me.slice(K,K+We)},[Me,Fe,We]),oe=()=>ot(K=>Math.max(K-1,1)),U=()=>ot(K=>Math.min(K+1,je)),V=u.length,be=u.filter(K=>hf(K.status)==="PLANNED").length,ze=u.filter(K=>hf(K.status)==="HELD").length,le=u.filter(K=>hf(K.status)==="NOT_HELD").length,X=[{title:"Total",value:V,icon:Rs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:be,icon:Ws,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:ze,icon:ga,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:le,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}],[Ae,Pe]=h.useState("Overview"),Qe=K=>{const{name:ne,value:H}=K.target;De(xe=>{const Ie={...xe,[ne]:H};return ne==="relatedType1"&&(Ie.relatedTo1="",H==="Lead"?(Ie.relatedType2=null,Ie.relatedTo2=null,d([])):H==="Account"&&(Ie.relatedType2="Contact")),ne==="relatedType2"&&(Ie.relatedTo2=""),Ie})};h.useEffect(()=>{const K=async()=>{try{l([]);let ne;re.relatedType1==="Lead"?ne=await ie.get("/leads/admin/getLeads"):re.relatedType1==="Account"&&(ne=await ie.get("/accounts/admin/fetch-all"));let H=[];if(ne&&Array.isArray(ne.data)?H=ne.data:H=[],y&&re.relatedTo1)try{let xe;re.relatedType1==="Lead"?xe=await ie.get(`/leads/get/${re.relatedTo1}`):re.relatedType1==="Account"&&(xe=await ie.get(`/accounts/get/${re.relatedTo1}`)),xe&&xe.data&&(H.some(Je=>String(Je.id)===String(re.relatedTo1))||(H=[xe.data,...H]))}catch(xe){console.error("Error fetching specific related item:",xe)}l(H)}catch(ne){console.error("Error fetching data:",ne),l([])}};re.relatedType1&&K()},[re.relatedType1,y,re.relatedTo1]),h.useEffect(()=>{const K=async()=>{try{d([]);let ne;if(re.relatedType1==="Account"&&re.relatedTo1)re.relatedType2==="Contact"?ne=await ie.get(`/contacts/from-acc/${re.relatedTo1}`):re.relatedType2==="Deal"?ne=await ie.get(`/deals/from-acc/${re.relatedTo1}`):re.relatedType2==="Quote"&&(ne=await ie.get(`/quotes/from-acc/${re.relatedTo1}`));else{d([]);return}let H=[];if(ne&&Array.isArray(ne.data)?H=ne.data:H=[],y&&re.relatedTo2)try{let xe;re.relatedType2==="Contact"?xe=await ie.get(`/contacts/get/${re.relatedTo2}`):re.relatedType2==="Deal"?xe=await ie.get(`/deals/get/${re.relatedTo2}`):re.relatedType2==="Quote"&&(xe=await ie.get(`/quotes/get/${re.relatedTo2}`)),xe&&xe.data&&(H.some(Je=>String(Je.id)===String(re.relatedTo2))||(H=[xe.data,...H]))}catch(xe){console.error("Error fetching specific related item:",xe)}d(H)}catch(ne){console.error("Error fetching data:",ne),d([])}};re.relatedType2&&K()},[re.relatedType2,re.relatedTo1,re.relatedType1,y,re.relatedTo2]);const[nt,wt]=h.useState(!1),Te=K=>{K.preventDefault(),wt(!0);const ne=re.subject;if(!ne||ne.trim()===""){q.error("Subject is required.");return}if(!re.relatedTo1){q.error(`Please select a ${re.relatedType1||"Lead/Account"}.`);return}if(!re.assigned_to){q.error("Subject is required.");return}const xe={...re,duration_minutes:re.duration_minutes?parseInt(re.duration_minutes,10):null,relatedTo1:re.relatedTo1?parseInt(re.relatedTo1,10):null,relatedTo2:re.relatedType1==="Lead"?null:re.relatedTo2?parseInt(re.relatedTo2,10):null,relatedType2:re.relatedType1==="Lead"?null:re.relatedType2,assigned_to:re.assigned_to?parseInt(re.assigned_to,10):null},Ie=y&&v?"update":"create",Je=(re.subject||"").trim()||"Untitled Call";i({title:Ie==="create"?"Confirm New Call":"Confirm Update",message:Ie==="create"?`Create "${Je}"?`:`Save changes to "${Je}"?`,confirmLabel:Ie==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Ie,payload:xe,targetId:v||null,name:Je}})},it=K=>s(K),$e=()=>{t(!1),N(!1),j(null)},ue=async()=>{if(!r?.action){i(null);return}const{action:K}=r,{type:ne,payload:H,targetId:xe,name:Ie}=K;k(!0);try{if(ne==="create")S(!0),await ie.post("/calls/create",H),q.success(`Call "${Ie}" created successfully.`),t(!1),De(ye),N(!1),j(null),await ve();else if(ne==="update"){if(!xe)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${xe}`,H),q.success(`Call "${Ie}" updated successfully.`),t(!1),De(ye),N(!1),j(null),await ve()}else if(ne==="delete"){if(!xe)throw new Error("Missing call identifier for archiving.");await ie.put(`/calls/${xe}`,{status:"INACTIVE"}),q.success(`Call "${Ie}" archived successfully.`),a?.id===xe&&s(null),await ve()}else if(ne==="bulk-delete"){const{targetIds:Je,count:ct}=K;if(!Je||Je.length===0)throw new Error("Missing call identifiers for bulk archiving.");te(!0),await ie.put("/calls/bulk-archive",{call_ids:Je}),q.success(`${ct} call${ct!==1?"s":""} archived successfully.`),ee(new Set),await ve(),a&&B.has(a.id)&&s(null)}}catch(Je){const ct=ne==="create"?"Failed to create call. Please review the details and try again.":ne==="update"?"Failed to update call. Please review the details and try again.":ne==="bulk-delete"?"Failed to archive calls. Please try again.":"Failed to archive call. Please try again.",bt=Je?.response?.data?.detail||ct;q.error(bt)}finally{(ne==="create"||ne==="update")&&S(!1),ne==="bulk-delete"&&te(!1),k(!1),i(null)}},he=()=>{A||i(null)},F=K=>{const ne=ce.find(H=>H.id===K);ne&&ne.call_creator?.id===W?.id&&ee(H=>{const xe=new Set(H);return xe.has(K)?xe.delete(K):xe.add(K),xe})},G=()=>{const K=ce.filter(ne=>ne.call_creator?.id===W?.id);B.size===K.length?ee(new Set):ee(new Set(K.map(ne=>ne.id)))},Ne=()=>{if(B.size===0)return;const K=B.size;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:K})," call",K!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${K} Call${K!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(B),count:K}})},ge=async()=>{if(a?.id)try{M(!0),await ie.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${IT(_)}`),f(K=>Array.isArray(K)?K.map(ne=>ne.id===a.id?{...ne,status:_}:ne):K),s(null)}catch(K){const ne=K.response?.data?.detail||"Failed to update status.";q.error(ne)}finally{M(!1)}};h.useEffect(()=>{a&&L(hf(a.status))},[a]);const fe=a?n.jsxs("div",{id:"callModalBackdrop",onClick:K=>K.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Qn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${oH(a.status)}`,children:IT(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:W?.id===a.call_creator?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const K=Je=>{if(!Je)return"";const ct=new Date(Je),bt=ct.getFullYear(),Pt=String(ct.getMonth()+1).padStart(2,"0"),Et=String(ct.getDate()).padStart(2,"0"),Yt=String(ct.getHours()).padStart(2,"0"),rn=String(ct.getMinutes()).padStart(2,"0");return`${bt}-${Pt}-${Et}T${Yt}:${rn}`},ne=a.lead?"Lead":a.account?"Account":"Lead",H=a.lead?a.lead.id:a.account?a.account.id:null,xe=ne==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",Ie=ne==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;De({subject:a.subject||"",call_time:K(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:ne,relatedType2:xe,relatedTo1:H?String(H):"",relatedTo2:Ie?String(Ie):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>{const K=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${K}"? You can restore it later if needed.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:a.id,name:K}})},children:[n.jsx(kn,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(K=>n.jsx("button",{onClick:()=>Pe(K),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Ae===K?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:K},K))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ae==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(po,{label:"Call Time",value:lH(a.call_time)}),n.jsx(po,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(po,{label:"Direction",value:a.direction||"--"}),n.jsx(po,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(po,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(po,{label:"Account",value:a.account.name}),a.contact&&n.jsx(po,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(po,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(po,{label:"Quote",value:Se(a.quote.quote_id)}),n.jsx(po,{label:"Created At",value:lH(a.created_at)})]})}),Ae==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(_a,{comments:ae,onAddComment:Ee})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:K=>L(K.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ge,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,Ue=e?n.jsx("div",{id:"modalBackdrop",onClick:K=>K.target.id==="modalBackdrop"&&$e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{$e(),wt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:y?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Te,noValidate:!0,children:[n.jsx(nVe,{label:"Subject",className:"md:col-span-2",name:"subject",value:re.subject,onChange:Qe,isSubmitted:nt,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Qe,value:re.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx($T,{items:Array.isArray(o)?o:[],value:re.relatedTo1??"",placeholder:`Search ${re.relatedType1||"here"}...`,getLabel:K=>re.relatedType1==="Lead"?K.title:K.name??"",onChange:K=>De(ne=>({...ne,relatedTo1:K})),required:!0,isSubmitted:nt,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Qe,value:re.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:re.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx($T,{disabled:re.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:re.relatedTo2??"",placeholder:re.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${re.relatedType2||"Contact"}...`:`No ${re.relatedType2||""} data found`,getLabel:K=>re.relatedType2==="Contact"?`${K.first_name??""} ${K.last_name??""}`.trim():re.relatedType2==="Quote"?Se(K.quote_id)??"":K.name??"",onChange:K=>De(ne=>({...ne,relatedTo2:K}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:re.call_time,onChange:Qe,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:re.duration_minutes,onChange:Qe,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx($T,{items:Array.isArray(p)?p:[],value:re.assigned_to??"",placeholder:"Search an account...",getLabel:K=>`${K.first_name} ${K.last_name}`,onChange:K=>De(ne=>({...ne,assigned_to:K})),required:!0,isSubmitted:nt})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Qe,value:re.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Qe,value:re.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(aVe,{className:"col-span-2",label:"Notes",value:re.notes,onChange:Qe,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{$e(),wt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":y?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Rs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{De(ye),N(!1),j(null),t(!0),wt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(gn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:X.map(K=>n.jsx(tVe,{...K},K.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:de})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:Oe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),ZWe.map(K=>n.jsx("option",{value:K.value,children:K.label},K.value))]}),n.jsxs("select",{defaultValue:et,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ce.map(K=>n.jsx("option",{value:K.name,children:K.name},K.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:B.size===ce.filter(K=>K.call_creator?.id===W?.id).length&&ce.filter(K=>K.call_creator?.id===W?.id).length>0,onChange:G,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 w-12",children:B.size>0&&n.jsx("button",{onClick:Ne,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected calls",disabled:Q,children:n.jsx(kn,{size:18})})})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):ce.length>0?ce.map(K=>n.jsxs("tr",{onClick:()=>it(K),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4",onClick:ne=>ne.stopPropagation(),children:W?.id===K.call_creator?.id&&n.jsx("input",{type:"checkbox",checked:B.has(K.id),onChange:ne=>{ne.stopPropagation(),F(K.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:K.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[K.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:K.lead.title}),K.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:K.account.name}),K.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[K.contact.first_name," ",K.contact.last_name]}),K.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:K.deal.name}),K.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Se(K.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:K.call_time?new Date(K.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:K?.call_assign_to?`${K.call_assign_to.first_name} ${K.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${oH(K.status)}`,children:IT(K.status)})})]},K.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(an,{totalItems:Me.length,pageSize:We,currentPage:Fe,onPrev:oe,onNext:U,onPageSizeChange:Ke,label:"calls"})]}),fe,Ue,r&&n.jsx(sVe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:ue,onCancel:he,loading:A})]})}function tVe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function nVe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function aVe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function po({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function sVe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function $T({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),y=e.find(w=>String(w.id)===String(t)),N=y?s(y):"",v=l&&c&&!t,j=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function rVe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ie.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",L=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[_,T,k.action,k.entity_type,L,k.description],R=w===""||M.some(O=>O==null?!1:O.toString().toLowerCase().includes(w)),z=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&z}).sort((k,_)=>{const L=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-L})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,c]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const y=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!f.length){Vx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),L=document.createElement("a");L.href=_,L.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(_)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Wx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Tt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ts,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(qo,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(an,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:y,onNext:N,onPageSizeChange:d,label:"logs"})]})}const j1=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Mg={firstName:"",lastName:"",email:"",password:"",role:""},iVe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},_o=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",oVe=e=>{const t=_o(e),a=j1.find(s=>_o(s.value)===t);return a?a.value:e||""},iL=e=>{const t=_o(e),a=j1.find(s=>_o(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},cH=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},RT=(e,{size:t="sm"}={})=>{const a=_o(e),s=iVe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:iL(e)})},lVe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},dH=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function cVe(){const{user:e,loading:t}=Gt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[y,N]=h.useState(!1),[v,j]=h.useState(null),[w,S]=h.useState(Mg),[A,k]=h.useState(!1),[_,L]=h.useState(null),[T,M]=h.useState(!1),[R,z]=h.useState(1),[O,I]=h.useState(10),[B,ee]=h.useState("Overview"),[Q,te]=h.useState(""),[W,ae]=h.useState(!1),Ee=_o(e?.role);console.log("meow",e);const se=["ADMIN","CEO","GROUP_MANAGER"].includes(Ee),Y=!t&&se,pe=h.useMemo(()=>{const oe=j1.filter(U=>_o(U.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...oe]},[]),Se=h.useCallback(oe=>{oe&&(s(U=>U.map(V=>V.id===oe?{...V,highlight:!0}:V)),setTimeout(()=>{s(U=>U.map(V=>V.id===oe?{...V,highlight:!1}:V))},2e3))},[]),me=h.useCallback(async()=>{i(!0);try{const oe=await ie.get("/users/all"),U=Array.isArray(oe.data)?oe.data:[],V=dH(U);s(V),f(be=>be&&(V.find(le=>le.id===be.id)||null)),console.log(oe.data)}catch(oe){console.error("Error fetching users:",oe);const U=oe.response?.data?.detail||"Failed to load users. Please try again later.";q.error(U)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!se&&e&&q.error("You are not authorized to access User Management.")},[se,t,e]),h.useEffect(()=>{t||!se||me()},[t,se,me]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const ye=h.useMemo(()=>{const oe=o.trim().toLowerCase(),U=_o(c);return dH(a.filter(V=>{if(!V)return!1;const be=oe===""||[V.first_name,V.last_name,`${V.first_name||""} ${V.last_name||""}`,V.email,iL(V.role)].filter(Boolean).some(le=>le.toString().toLowerCase().includes(oe)),ze=U===""||U==="CEO"&&["CEO","ADMIN"].includes(_o(V.role))||_o(V.role)===U;return be&&ze}))},[a,o,c]),re=Math.max(1,Math.ceil(ye.length/O)||1);h.useEffect(()=>{z(1)},[o,c,O]),h.useEffect(()=>{z(oe=>{const U=Math.max(1,Math.ceil(ye.length/O)||1);return oe>U?U:oe})},[ye.length,O]);const De=h.useMemo(()=>{const oe=(R-1)*O;return ye.slice(oe,oe+O)},[ye,R,O]);ye.length===0||(R-1)*O+1,Math.min(R*O,ye.length);const ve=()=>z(oe=>Math.max(oe-1,1)),ke=()=>z(oe=>Math.min(oe+1,re)),Ce=()=>{S(Mg),N(!1),j(null),x(!0)},de=oe=>{f(oe),ee("Overview"),te(oe?.is_active?"Active":"Inactive")},Re=oe=>{oe.target.id==="userModalBackdrop"&&!T&&Oe()},Oe=()=>{f(null)},Ge=(oe,U)=>{S(V=>({...V,[oe]:U}))},et=()=>{const oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let U="";for(let V=0;V<10;V+=1)U+=oe.charAt(Math.floor(Math.random()*oe.length));Ge("password",U)},mt=()=>{A||T||(x(!1),S(Mg),j(null),N(!1))},Fe=oe=>{S({firstName:oe.first_name||"",lastName:oe.last_name||"",email:oe.email||"",password:"",role:oVe(oe.role)}),N(!0),j(oe.id),x(!0),f(null)},ot=oe=>{L({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[oe.first_name," ",oe.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:oe.id,name:`${oe.first_name||""} ${oe.last_name||""}`.trim()||oe.email||"user"}})},We=oe=>{oe.preventDefault();const U=w.firstName.trim(),V=w.lastName.trim(),be=w.email.trim(),ze=w.password.trim(),le=w.role,X=!(y&&v);if(!U||!be||!le){q.warn("Please fill in all required fields.");return}if(X&&!ze){q.warn("Please fill in all required fields.");return}if(ze&&ze.length<8){q.warn("Password should be at least 8 characters long.");return}const Ae={first_name:U,last_name:V,email:be,role:le};(X||ze)&&(Ae.password=ze);const Pe=`${U} ${V}`.trim(),Qe=X?"create":"update";L({title:Qe==="create"?"Confirm New User":"Confirm User Update",message:Qe==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Pe})," with role"," ",n.jsx("span",{className:"font-semibold",children:iL(le)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Pe||be}),"?"]}),confirmLabel:Qe==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:Ae,targetId:v,name:Pe||be}})},Ke=async()=>{if(!_?.action){L(null);return}const{action:oe}=_,{type:U,payload:V,targetId:be,name:ze}=oe;M(!0),(U==="create"||U==="update")&&k(!0);try{if(U==="create"){const X=(await ie.post("/users/createuser",V)).data;await me(),Se(X.id),q.success(`User "${ze}" created successfully.`),x(!1),S(Mg),j(null),N(!1)}else if(U==="update"){if(!be)throw new Error("Missing user identifier for update.");const X=(await ie.put(`/users/updateuser/${be}`,V)).data;await me(),f(null),Se(X.id),q.success(`User "${ze}" updated successfully.`),x(!1),S(Mg),j(null),N(!1)}else if(U==="delete"){if(!be)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${be}`),s(le=>le.map(X=>X.id===be?{...X,is_active:!1}:X)),u&&u.id===be&&(f(null),te("")),q.success(`User "${ze}" deactivated successfully.`)}}catch(le){console.error("User management error:",le);const X=U==="create"?"Failed to create user. Please review the details and try again.":U==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Ae=le.response?.data?.detail||X;q.error(Ae)}finally{(U==="create"||U==="update")&&k(!1),M(!1),L(null)}},Ze=()=>{T||L(null)},Me=async()=>{if(!u||!Q)return;const oe=u.is_active?"Active":"Inactive";if(Q===oe)return;const U=Q==="Active";ae(!0);try{const be=(await ie.put(`/users/updateuser/${u.id}`,{is_active:U})).data;s(ze=>ze.map(le=>le.id===be.id?be:le)),f(null),te(""),q.success(`User status updated to ${Q}`)}catch(V){console.error("Failed to update user status:",V);const be=V.response?.data?.detail||"Failed to update user status. Please try again.";q.error(be)}finally{ae(!1)}},je=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!Y)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(nN,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Ce,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:oe=>l(oe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:oe=>d(oe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:pe.map(oe=>n.jsx("option",{value:oe.value,children:oe.label},oe.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):ye.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):De.map(oe=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${oe.highlight?"bg-green-50":""} ${oe.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>de(oe),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[oe.first_name," ",oe.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>de(oe),children:oe.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>de(oe),children:RT(oe.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>de(oe),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${oe.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:oe.is_active?"Active":"Inactive"})})]},oe.id))})]})}),n.jsx(an,{className:"mt-4",totalItems:ye.length,pageSize:O,currentPage:R,onPrev:ve,onNext:ke,onPageSizeChange:I,label:"users"})]}),ce=u?n.jsx("div",{id:"userModalBackdrop",onClick:Re,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Oe,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Qn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:lVe(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),RT(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Fe(u),disabled:T,children:[n.jsx(ua,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ot(u),disabled:T,children:[n.jsx(Kt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(oe=>n.jsx("button",{onClick:()=>ee(oe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${B===oe?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:oe},oe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:B==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:RT(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,oe=>oe.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:cH(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?cH(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const oe=encodeURIComponent(u.email),U=encodeURIComponent(""),V=encodeURIComponent(""),be=`https://mail.google.com/mail/?view=cm&fs=1&to=${oe}&su=${U}&body=${V}`;window.open(be,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(ta,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Q||(u.is_active?"Active":"Inactive"),onChange:oe=>te(oe.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Me,disabled:W||Q===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||Q===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[je,ce,n.jsx(dVe,{open:p,isEditing:y,isSubmitting:A,confirmProcessing:T,formData:w,onClose:mt,onSubmit:We,onChange:Ge,onGeneratePassword:et}),n.jsx(uVe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:Ke,onCancel:Ze})]})}function dVe({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(qb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(qb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(qb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(qb,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...j1],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function qb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function uVe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function mVe(){return n.jsxs(dse,{children:[n.jsx(Jse,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),n.jsxs(zae,{children:[n.jsx(yt,{path:"/",element:n.jsx(soe,{})}),n.jsx(yt,{path:"/header",element:n.jsx(u9,{})}),n.jsx(yt,{path:"/signup",element:n.jsx(aue,{})}),n.jsx(yt,{path:"/login",element:n.jsx(rue,{})}),n.jsx(yt,{path:"/forgot-password",element:n.jsx(lue,{})}),n.jsx(yt,{path:"/resources",element:n.jsx(uue,{})}),n.jsx(yt,{path:"/legal",element:n.jsx(fue,{})}),n.jsx(yt,{path:"/admin/quotes/:quoteId/print",element:n.jsx(fl,{requiredRole:"ceo",children:n.jsx(Fb,{})})}),n.jsx(yt,{path:"/sales/quotes/:quoteId/print",element:n.jsx(fl,{requiredRole:"sales",children:n.jsx(Fb,{})})}),n.jsx(yt,{path:"/manager/quotes/:quoteId/print",element:n.jsx(fl,{requiredRole:"manager",children:n.jsx(Fb,{})})}),n.jsx(yt,{path:"/group-manager/quotes/:quoteId/print",element:n.jsx(fl,{requiredRole:"group manager",children:n.jsx(Fb,{})})}),n.jsxs(yt,{path:"/admin",element:n.jsx(fl,{requiredRole:"ceo",children:n.jsx(gue,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(eCe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(vCe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(CCe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(LCe,{})}),n.jsx(yt,{path:"leads/:leadID",element:n.jsx(iY,{})}),n.jsx(yt,{path:"audit",element:n.jsx(NSe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(S$e,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(P$e,{})}),n.jsx(yt,{path:"users",element:n.jsx(F$e,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(q$e,{})}),n.jsx(yt,{path:"company-details",element:n.jsx(Aze,{})}),n.jsx(yt,{path:"deals",element:n.jsx(G$e,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(bZ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(yZ,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(aze,{})}),n.jsxs(yt,{path:"/admin/territory",children:[n.jsx(yt,{index:!0,element:n.jsx(Rc,{})}),n.jsx(yt,{path:":id",element:n.jsx(Rc,{})})]}),n.jsx(yt,{path:"calls",element:n.jsx(a8,{})}),n.jsx(yt,{path:"calls/info",element:n.jsx(a8,{})}),n.jsx(yt,{path:"meetings",element:n.jsx(s8,{})}),n.jsx(yt,{path:"meetings/info",element:n.jsx(s8,{})}),n.jsx(yt,{path:"help",element:n.jsx(Tze,{})})]}),n.jsxs(yt,{path:"/sales",element:n.jsx(fl,{requiredRole:"sales",children:n.jsx(kze,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"overview",replace:!0})}),n.jsx(yt,{path:"overview",element:n.jsx(sFe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(oFe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(uFe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(yFe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(aJ,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(SFe,{})}),n.jsx(yt,{path:"deals",element:n.jsx(_Fe,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(rJ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(sJ,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(RFe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(HFe,{})}),n.jsx(yt,{path:"audit",element:n.jsx(qFe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(By,{})}),n.jsxs(yt,{path:"/sales/territory",children:[n.jsx(yt,{index:!0,element:n.jsx(Rc,{})}),n.jsx(yt,{path:":id",element:n.jsx(Rc,{})})]}),n.jsx(yt,{path:"meetings",element:n.jsx(aUe,{})}),n.jsx(yt,{path:"calls",element:n.jsx(oUe,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(YFe,{})})]}),n.jsxs(yt,{path:"/manager",element:n.jsx(fl,{requiredRole:"manager",children:n.jsx(fUe,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(UUe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(qUe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(YUe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(t7e,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(hJ,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(l7e,{})}),n.jsx(yt,{path:"deals",element:n.jsx(c7e,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(pJ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(gJ,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(w7e,{})}),n.jsx(yt,{path:"targets",element:n.jsx(_7e,{})}),n.jsx(yt,{path:"meetings",element:n.jsx(V7e,{})}),n.jsx(yt,{path:"audit",element:n.jsx(A7e,{})}),n.jsx(yt,{path:"calls",element:n.jsx(k7e,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(R7e,{})}),n.jsxs(yt,{path:"/manager/territory",children:[n.jsx(yt,{index:!0,element:n.jsx(Rc,{})}),n.jsx(yt,{path:":id",element:n.jsx(Rc,{})})]}),n.jsx(yt,{path:"users",element:n.jsx(Z7e,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(By,{})})]}),n.jsx(yt,{children:n.jsxs(yt,{path:"/marketing",element:n.jsx(fl,{requiredRole:"marketing",children:n.jsx(n8e,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(eGe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(tGe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(aGe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(cGe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(uee,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(dee,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(fGe,{})}),n.jsx(yt,{path:"campaigns",element:n.jsx(pGe,{})}),n.jsx(yt,{path:"templates",element:n.jsx(yGe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(By,{})})]})}),n.jsxs(yt,{path:"/group-manager",element:n.jsx(fl,{requiredRole:"group manager",children:n.jsx(NGe,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(KGe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(JGe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(aWe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(dWe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(yee,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(xWe,{})}),n.jsx(yt,{path:"deals",element:n.jsx(bWe,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(vee,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(bee,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(PWe,{})}),n.jsx(yt,{path:"targets",element:n.jsx($We,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(UWe,{})}),n.jsxs(yt,{path:"/group-manager/territory",children:[n.jsx(yt,{index:!0,element:n.jsx(Rc,{})}),n.jsx(yt,{path:":id",element:n.jsx(Rc,{})})]}),n.jsx(yt,{path:"meetings",element:n.jsx(KWe,{})}),n.jsx(yt,{path:"calls",element:n.jsx(eVe,{})}),n.jsx(yt,{path:"audit",element:n.jsx(rVe,{})}),n.jsx(yt,{path:"users",element:n.jsx(cVe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(By,{})})]})]})]})}Fne.createRoot(document.getElementById("root")).render(n.jsx(h.StrictMode,{children:n.jsx(mVe,{})}));
