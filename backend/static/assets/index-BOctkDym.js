function yne(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function Ki(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xS={exports:{}},ng={};var BM;function bne(){if(BM)return ng;BM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var l in r)l!=="key"&&(i[l]=r[l])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:o,ref:r!==void 0?r:null,props:i}}return ng.Fragment=t,ng.jsx=a,ng.jsxs=a,ng}var HM;function vne(){return HM||(HM=1,xS.exports=bne()),xS.exports}var n=vne(),yS={exports:{}},Jt={};var qM;function wne(){if(qM)return Jt;qM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function x(ee){return ee===null||typeof ee!="object"?null:(ee=p&&ee[p]||ee["@@iterator"],typeof ee=="function"?ee:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,v={};function j(ee,U,je){this.props=ee,this.context=U,this.refs=v,this.updater=je||b}j.prototype.isReactComponent={},j.prototype.setState=function(ee,U){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,U,"setState")},j.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function w(){}w.prototype=j.prototype;function S(ee,U,je){this.props=ee,this.context=U,this.refs=v,this.updater=je||b}var A=S.prototype=new w;A.constructor=S,N(A,j.prototype),A.isPureReactComponent=!0;var E=Array.isArray;function _(){}var k={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function O(ee,U,je){var be=je.ref;return{$$typeof:e,type:ee,key:U,ref:be!==void 0?be:null,props:je}}function $(ee,U){return O(ee.type,U,ee.props)}function R(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===e}function P(ee){var U={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(je){return U[je]})}var I=/\/+/g;function H(ee,U){return typeof ee=="object"&&ee!==null&&ee.key!=null?P(""+ee.key):U.toString(36)}function Q(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(_,_):(ee.status="pending",ee.then(function(U){ee.status==="pending"&&(ee.status="fulfilled",ee.value=U)},function(U){ee.status==="pending"&&(ee.status="rejected",ee.reason=U)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function G(ee,U,je,be,le){var Ce=typeof ee;(Ce==="undefined"||Ce==="boolean")&&(ee=null);var Se=!1;if(ee===null)Se=!0;else switch(Ce){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(ee.$$typeof){case e:case t:Se=!0;break;case u:return Se=ee._init,G(Se(ee._payload),U,je,be,le)}}if(Se)return le=le(ee),Se=be===""?"."+H(ee,0):be,E(le)?(je="",Se!=null&&(je=Se.replace(I,"$&/")+"/"),G(le,U,je,"",function(He){return He})):le!=null&&(R(le)&&(le=$(le,je+(le.key==null||ee&&ee.key===le.key?"":(""+le.key).replace(I,"$&/")+"/")+Se)),U.push(le)),1;Se=0;var Oe=be===""?".":be+":";if(E(ee))for(var ge=0;ge<ee.length;ge++)be=ee[ge],Ce=Oe+H(be,ge),Se+=G(be,U,je,Ce,le);else if(ge=x(ee),typeof ge=="function")for(ee=ge.call(ee),ge=0;!(be=ee.next()).done;)be=be.value,Ce=Oe+H(be,ge++),Se+=G(be,U,je,Ce,le);else if(Ce==="object"){if(typeof ee.then=="function")return G(Q(ee),U,je,be,le);throw U=String(ee),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Se}function K(ee,U,je){if(ee==null)return ee;var be=[],le=0;return G(ee,be,"","",function(Ce){return U.call(je,Ce,le++)}),be}function W(ee){if(ee._status===-1){var U=ee._result;U=U(),U.then(function(je){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=je)},function(je){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=je)}),ee._status===-1&&(ee._status=0,ee._result=U)}if(ee._status===1)return ee._result.default;throw ee._result}var J=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)},Te={map:K,forEach:function(ee,U,je){K(ee,function(){U.apply(this,arguments)},je)},count:function(ee){var U=0;return K(ee,function(){U++}),U},toArray:function(ee){return K(ee,function(U){return U})||[]},only:function(ee){if(!R(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}};return Jt.Activity=h,Jt.Children=Te,Jt.Component=j,Jt.Fragment=a,Jt.Profiler=r,Jt.PureComponent=S,Jt.StrictMode=s,Jt.Suspense=c,Jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Jt.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return k.H.useMemoCache(ee)}},Jt.cache=function(ee){return function(){return ee.apply(null,arguments)}},Jt.cacheSignal=function(){return null},Jt.cloneElement=function(ee,U,je){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var be=N({},ee.props),le=ee.key;if(U!=null)for(Ce in U.key!==void 0&&(le=""+U.key),U)!T.call(U,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&U.ref===void 0||(be[Ce]=U[Ce]);var Ce=arguments.length-2;if(Ce===1)be.children=je;else if(1<Ce){for(var Se=Array(Ce),Oe=0;Oe<Ce;Oe++)Se[Oe]=arguments[Oe+2];be.children=Se}return O(ee.type,le,be)},Jt.createContext=function(ee){return ee={$$typeof:o,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:i,_context:ee},ee},Jt.createElement=function(ee,U,je){var be,le={},Ce=null;if(U!=null)for(be in U.key!==void 0&&(Ce=""+U.key),U)T.call(U,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(le[be]=U[be]);var Se=arguments.length-2;if(Se===1)le.children=je;else if(1<Se){for(var Oe=Array(Se),ge=0;ge<Se;ge++)Oe[ge]=arguments[ge+2];le.children=Oe}if(ee&&ee.defaultProps)for(be in Se=ee.defaultProps,Se)le[be]===void 0&&(le[be]=Se[be]);return O(ee,Ce,le)},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(ee){return{$$typeof:l,render:ee}},Jt.isValidElement=R,Jt.lazy=function(ee){return{$$typeof:u,_payload:{_status:-1,_result:ee},_init:W}},Jt.memo=function(ee,U){return{$$typeof:d,type:ee,compare:U===void 0?null:U}},Jt.startTransition=function(ee){var U=k.T,je={};k.T=je;try{var be=ee(),le=k.S;le!==null&&le(je,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(_,J)}catch(Ce){J(Ce)}finally{U!==null&&je.types!==null&&(U.types=je.types),k.T=U}},Jt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Jt.use=function(ee){return k.H.use(ee)},Jt.useActionState=function(ee,U,je){return k.H.useActionState(ee,U,je)},Jt.useCallback=function(ee,U){return k.H.useCallback(ee,U)},Jt.useContext=function(ee){return k.H.useContext(ee)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(ee,U){return k.H.useDeferredValue(ee,U)},Jt.useEffect=function(ee,U){return k.H.useEffect(ee,U)},Jt.useEffectEvent=function(ee){return k.H.useEffectEvent(ee)},Jt.useId=function(){return k.H.useId()},Jt.useImperativeHandle=function(ee,U,je){return k.H.useImperativeHandle(ee,U,je)},Jt.useInsertionEffect=function(ee,U){return k.H.useInsertionEffect(ee,U)},Jt.useLayoutEffect=function(ee,U){return k.H.useLayoutEffect(ee,U)},Jt.useMemo=function(ee,U){return k.H.useMemo(ee,U)},Jt.useOptimistic=function(ee,U){return k.H.useOptimistic(ee,U)},Jt.useReducer=function(ee,U,je){return k.H.useReducer(ee,U,je)},Jt.useRef=function(ee){return k.H.useRef(ee)},Jt.useState=function(ee){return k.H.useState(ee)},Jt.useSyncExternalStore=function(ee,U,je){return k.H.useSyncExternalStore(ee,U,je)},Jt.useTransition=function(){return k.H.useTransition()},Jt.version="19.2.0",Jt}var WM;function Uf(){return WM||(WM=1,yS.exports=wne()),yS.exports}var f=Uf();const bt=Ki(f),ju=yne({__proto__:null,default:bt},[f]);var bS={exports:{}},ag={},vS={exports:{}},wS={};var GM;function Nne(){return GM||(GM=1,(function(e){function t(G,K){var W=G.length;G.push(K);e:for(;0<W;){var J=W-1>>>1,Te=G[J];if(0<r(Te,K))G[J]=K,G[W]=Te,W=J;else break e}}function a(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var K=G[0],W=G.pop();if(W!==K){G[0]=W;e:for(var J=0,Te=G.length,ee=Te>>>1;J<ee;){var U=2*(J+1)-1,je=G[U],be=U+1,le=G[be];if(0>r(je,W))be<Te&&0>r(le,je)?(G[J]=le,G[be]=W,J=be):(G[J]=je,G[U]=W,J=U);else if(be<Te&&0>r(le,W))G[J]=le,G[be]=W,J=be;else break e}}return K}function r(G,K){var W=G.sortIndex-K.sortIndex;return W!==0?W:G.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,x=!1,b=!1,N=!1,v=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function A(G){for(var K=a(d);K!==null;){if(K.callback===null)s(d);else if(K.startTime<=G)s(d),K.sortIndex=K.expirationTime,t(c,K);else break;K=a(d)}}function E(G){if(N=!1,A(G),!b)if(a(c)!==null)b=!0,_||(_=!0,P());else{var K=a(d);K!==null&&Q(E,K.startTime-G)}}var _=!1,k=-1,T=5,O=-1;function $(){return v?!0:!(e.unstable_now()-O<T)}function R(){if(v=!1,_){var G=e.unstable_now();O=G;var K=!0;try{e:{b=!1,N&&(N=!1,w(k),k=-1),x=!0;var W=p;try{t:{for(A(G),h=a(c);h!==null&&!(h.expirationTime>G&&$());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var Te=J(h.expirationTime<=G);if(G=e.unstable_now(),typeof Te=="function"){h.callback=Te,A(G),K=!0;break t}h===a(c)&&s(c),A(G)}else s(c);h=a(c)}if(h!==null)K=!0;else{var ee=a(d);ee!==null&&Q(E,ee.startTime-G),K=!1}}break e}finally{h=null,p=W,x=!1}K=void 0}}finally{K?P():_=!1}}}var P;if(typeof S=="function")P=function(){S(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,H=I.port2;I.port1.onmessage=R,P=function(){H.postMessage(null)}}else P=function(){j(R,0)};function Q(G,K){k=j(function(){G(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(G){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var W=p;p=K;try{return G()}finally{p=W}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=p;p=G;try{return K()}finally{p=W}},e.unstable_scheduleCallback=function(G,K,W){var J=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,G){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=W+Te,G={id:u++,callback:K,priorityLevel:G,startTime:W,expirationTime:Te,sortIndex:-1},W>J?(G.sortIndex=W,t(d,G),a(c)===null&&G===a(d)&&(N?(w(k),k=-1):N=!0,Q(E,W-J))):(G.sortIndex=Te,t(c,G),b||x||(b=!0,_||(_=!0,P()))),G},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(G){var K=p;return function(){var W=p;p=K;try{return G.apply(this,arguments)}finally{p=W}}}})(wS)),wS}var VM;function jne(){return VM||(VM=1,vS.exports=Nne()),vS.exports}var NS={exports:{}},Ts={};var YM;function Cne(){if(YM)return Ts;YM=1;var e=Uf();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,d,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ts.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},Ts.flushSync=function(c){var d=o.T,u=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=d,s.p=u,s.d.f()}},Ts.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(c,d))},Ts.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Ts.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?s.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:x}):u==="script"&&s.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ts.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);s.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(c)},Ts.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin);s.d.L(c,u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ts.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);s.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(c)},Ts.requestFormReset=function(c){s.d.r(c)},Ts.unstable_batchedUpdates=function(c,d){return c(d)},Ts.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},Ts.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ts.version="19.2.0",Ts}var QM;function nH(){if(QM)return NS.exports;QM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),NS.exports=Cne(),NS.exports}var KM;function Sne(){if(KM)return ag;KM=1;var e=jne(),t=Uf(),a=nH();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,y=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(y=g.return),m=g.return;while(m)}return g.tag===3?y:null}function o(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function l(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function d(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var y=m,C=g;;){var L=y.return;if(L===null)break;var M=L.alternate;if(M===null){if(C=L.return,C!==null){y=C;continue}break}if(L.child===M.child){for(M=L.child;M;){if(M===y)return c(L),m;if(M===C)return c(L),g;M=M.sibling}throw Error(s(188))}if(y.return!==C.return)y=L,C=M;else{for(var Y=!1,we=L.child;we;){if(we===y){Y=!0,y=L,C=M;break}if(we===C){Y=!0,C=L,y=M;break}we=we.sibling}if(!Y){for(we=M.child;we;){if(we===y){Y=!0,y=M,C=L;break}if(we===C){Y=!0,C=M,y=L;break}we=we.sibling}if(!Y)throw Error(s(189))}}if(y.alternate!==C)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?m:g}function u(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=u(m),g!==null)return g;m=m.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function P(m){return m===null||typeof m!="object"?null:(m=R&&m[R]||m["@@iterator"],typeof m=="function"?m:null)}var I=Symbol.for("react.client.reference");function H(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===I?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case N:return"Fragment";case j:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case _:return"SuspenseList";case O:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case b:return"Portal";case S:return m.displayName||"Context";case w:return(m._context.displayName||"Context")+".Consumer";case A:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case k:return g=m.displayName||null,g!==null?g:H(m.type)||"Memo";case T:g=m._payload,m=m._init;try{return H(m(g))}catch{}}return null}var Q=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},J=[],Te=-1;function ee(m){return{current:m}}function U(m){0>Te||(m.current=J[Te],J[Te]=null,Te--)}function je(m,g){Te++,J[Te]=m.current,m.current=g}var be=ee(null),le=ee(null),Ce=ee(null),Se=ee(null);function Oe(m,g){switch(je(Ce,g),je(le,m),je(be,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?uM(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=uM(g),m=mM(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}U(be),je(be,m)}function ge(){U(be),U(le),U(Ce)}function He(m){m.memoizedState!==null&&je(Se,m);var g=be.current,y=mM(g,m.type);g!==y&&(je(le,m),je(be,y))}function Ne(m){le.current===m&&(U(be),U(le)),Se.current===m&&(U(Se),Zh._currentValue=W)}var he,Z;function _e(m){if(he===void 0)try{throw Error()}catch(y){var g=y.stack.trim().match(/\n( *(at )?)/);he=g&&g[1]||"",Z=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+m+Z}var ke=!1;function ze(m,g){if(!m||ke)return"";ke=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(g){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(dt){var ot=dt}Reflect.construct(m,[],xt)}else{try{xt.call()}catch(dt){ot=dt}m.call(xt.prototype)}}else{try{throw Error()}catch(dt){ot=dt}(xt=m())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(dt){if(dt&&ot&&typeof dt.stack=="string")return[dt.stack,ot.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=C.DetermineComponentFrameRoot(),Y=M[0],we=M[1];if(Y&&we){var Ue=Y.split(`
`),st=we.split(`
`);for(L=C=0;C<Ue.length&&!Ue[C].includes("DetermineComponentFrameRoot");)C++;for(;L<st.length&&!st[L].includes("DetermineComponentFrameRoot");)L++;if(C===Ue.length||L===st.length)for(C=Ue.length-1,L=st.length-1;1<=C&&0<=L&&Ue[C]!==st[L];)L--;for(;1<=C&&0<=L;C--,L--)if(Ue[C]!==st[L]){if(C!==1||L!==1)do if(C--,L--,0>L||Ue[C]!==st[L]){var mt=`
`+Ue[C].replace(" at new "," at ");return m.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",m.displayName)),mt}while(1<=C&&0<=L);break}}}finally{ke=!1,Error.prepareStackTrace=y}return(y=m?m.displayName||m.name:"")?_e(y):""}function tt(m,g){switch(m.tag){case 26:case 27:case 5:return _e(m.type);case 16:return _e("Lazy");case 13:return m.child!==g&&g!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return ze(m.type,!1);case 11:return ze(m.type.render,!1);case 1:return ze(m.type,!0);case 31:return _e("Activity");default:return""}}function De(m){try{var g="",y=null;do g+=tt(m,y),y=m,m=m.return;while(m);return g}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var at=Object.prototype.hasOwnProperty,et=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,ne=e.unstable_shouldYield,se=e.unstable_requestPaint,Ee=e.unstable_now,Ie=e.unstable_getCurrentPriorityLevel,pe=e.unstable_ImmediatePriority,Be=e.unstable_UserBlockingPriority,$e=e.unstable_NormalPriority,Ve=e.unstable_LowPriority,ut=e.unstable_IdlePriority,ve=e.log,ae=e.unstable_setDisableYieldValue,Fe=null,ye=null;function We(m){if(typeof ve=="function"&&ae(m),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(Fe,m)}catch{}}var it=Math.clz32?Math.clz32:Je,ht=Math.log,Ae=Math.LN2;function Je(m){return m>>>=0,m===0?32:31-(ht(m)/Ae|0)|0}var ce=256,X=262144,de=4194304;function D(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function B(m,g,y){var C=m.pendingLanes;if(C===0)return 0;var L=0,M=m.suspendedLanes,Y=m.pingedLanes;m=m.warmLanes;var we=C&134217727;return we!==0?(C=we&~M,C!==0?L=D(C):(Y&=we,Y!==0?L=D(Y):y||(y=we&~m,y!==0&&(L=D(y))))):(we=C&~M,we!==0?L=D(we):Y!==0?L=D(Y):y||(y=C&~m,y!==0&&(L=D(y)))),L===0?0:g!==0&&g!==L&&(g&M)===0&&(M=L&-L,y=g&-g,M>=y||M===32&&(y&4194048)!==0)?g:L}function oe(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function ue(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ie(){var m=de;return de<<=1,(de&62914560)===0&&(de=4194304),m}function Pe(m){for(var g=[],y=0;31>y;y++)g.push(m);return g}function xe(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function fe(m,g,y,C,L,M){var Y=m.pendingLanes;m.pendingLanes=y,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=y,m.entangledLanes&=y,m.errorRecoveryDisabledLanes&=y,m.shellSuspendCounter=0;var we=m.entanglements,Ue=m.expirationTimes,st=m.hiddenUpdates;for(y=Y&~y;0<y;){var mt=31-it(y),xt=1<<mt;we[mt]=0,Ue[mt]=-1;var ot=st[mt];if(ot!==null)for(st[mt]=null,mt=0;mt<ot.length;mt++){var dt=ot[mt];dt!==null&&(dt.lane&=-536870913)}y&=~xt}C!==0&&qe(m,C,0),M!==0&&L===0&&m.tag!==0&&(m.suspendedLanes|=M&~(Y&~g))}function qe(m,g,y){m.pendingLanes|=g,m.suspendedLanes&=~g;var C=31-it(g);m.entangledLanes|=g,m.entanglements[C]=m.entanglements[C]|1073741824|y&261930}function Ze(m,g){var y=m.entangledLanes|=g;for(m=m.entanglements;y;){var C=31-it(y),L=1<<C;L&g|m[C]&g&&(m[C]|=g),y&=~L}}function pt(m,g){var y=g&-g;return y=(y&42)!==0?1:Nt(y),(y&(m.suspendedLanes|g))!==0?0:y}function Nt(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function St(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function Ht(){var m=K.p;return m!==0?m:(m=window.event,m===void 0?32:MM(m.type))}function on(m,g){var y=K.p;try{return K.p=m,g()}finally{K.p=y}}var cn=Math.random().toString(36).slice(2),re="__reactFiber$"+cn,lt="__reactProps$"+cn,zt="__reactContainer$"+cn,kt="__reactEvents$"+cn,Kt="__reactListeners$"+cn,Me="__reactHandles$"+cn,vt="__reactResources$"+cn,F="__reactMarker$"+cn;function z(m){delete m[re],delete m[lt],delete m[kt],delete m[Kt],delete m[Me]}function me(m){var g=m[re];if(g)return g;for(var y=m.parentNode;y;){if(g=y[zt]||y[re]){if(y=g.alternate,g.child!==null||y!==null&&y.child!==null)for(m=bM(m);m!==null;){if(y=m[re])return y;m=bM(m)}return g}m=y,y=m.parentNode}return null}function Le(m){if(m=m[re]||m[zt]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function Re(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function Qe(m){var g=m[vt];return g||(g=m[vt]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ke(m){m[F]=!0}var At=new Set,Ct={};function Xt(m,g){sa(m,g),sa(m+"Capture",g)}function sa(m,g){for(Ct[m]=g,m=0;m<g.length;m++)At.add(g[m])}var hh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),t3={},n3={};function dee(m){return at.call(n3,m)?!0:at.call(t3,m)?!1:hh.test(m)?n3[m]=!0:(t3[m]=!0,!1)}function u0(m,g,y){if(dee(g))if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var C=g.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+y)}}function m0(m,g,y){if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+y)}}function Vo(m,g,y,C){if(C===null)m.removeAttribute(y);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(y);return}m.setAttributeNS(g,y,""+C)}}function Gr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function a3(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function uee(m,g,y){var C=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var L=C.get,M=C.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return L.call(this)},set:function(Y){y=""+Y,M.call(this,Y)}}),Object.defineProperty(m,g,{enumerable:C.enumerable}),{getValue:function(){return y},setValue:function(Y){y=""+Y},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function d1(m){if(!m._valueTracker){var g=a3(m)?"checked":"value";m._valueTracker=uee(m,g,""+m[g])}}function s3(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var y=g.getValue(),C="";return m&&(C=a3(m)?m.checked?"true":"false":m.value),m=C,m!==y?(g.setValue(m),!0):!1}function f0(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var mee=/[\n"\\]/g;function Vr(m){return m.replace(mee,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function u1(m,g,y,C,L,M,Y,we){m.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?m.type=Y:m.removeAttribute("type"),g!=null?Y==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+Gr(g)):m.value!==""+Gr(g)&&(m.value=""+Gr(g)):Y!=="submit"&&Y!=="reset"||m.removeAttribute("value"),g!=null?m1(m,Y,Gr(g)):y!=null?m1(m,Y,Gr(y)):C!=null&&m.removeAttribute("value"),L==null&&M!=null&&(m.defaultChecked=!!M),L!=null&&(m.checked=L&&typeof L!="function"&&typeof L!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?m.name=""+Gr(we):m.removeAttribute("name")}function r3(m,g,y,C,L,M,Y,we){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(m.type=M),g!=null||y!=null){if(!(M!=="submit"&&M!=="reset"||g!=null)){d1(m);return}y=y!=null?""+Gr(y):"",g=g!=null?""+Gr(g):y,we||g===m.value||(m.value=g),m.defaultValue=g}C=C??L,C=typeof C!="function"&&typeof C!="symbol"&&!!C,m.checked=we?m.checked:!!C,m.defaultChecked=!!C,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(m.name=Y),d1(m)}function m1(m,g,y){g==="number"&&f0(m.ownerDocument)===m||m.defaultValue===""+y||(m.defaultValue=""+y)}function sm(m,g,y,C){if(m=m.options,g){g={};for(var L=0;L<y.length;L++)g["$"+y[L]]=!0;for(y=0;y<m.length;y++)L=g.hasOwnProperty("$"+m[y].value),m[y].selected!==L&&(m[y].selected=L),L&&C&&(m[y].defaultSelected=!0)}else{for(y=""+Gr(y),g=null,L=0;L<m.length;L++){if(m[L].value===y){m[L].selected=!0,C&&(m[L].defaultSelected=!0);return}g!==null||m[L].disabled||(g=m[L])}g!==null&&(g.selected=!0)}}function i3(m,g,y){if(g!=null&&(g=""+Gr(g),g!==m.value&&(m.value=g),y==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=y!=null?""+Gr(y):""}function o3(m,g,y,C){if(g==null){if(C!=null){if(y!=null)throw Error(s(92));if(Q(C)){if(1<C.length)throw Error(s(93));C=C[0]}y=C}y==null&&(y=""),g=y}y=Gr(g),m.defaultValue=y,C=m.textContent,C===y&&C!==""&&C!==null&&(m.value=C),d1(m)}function rm(m,g){if(g){var y=m.firstChild;if(y&&y===m.lastChild&&y.nodeType===3){y.nodeValue=g;return}}m.textContent=g}var fee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function l3(m,g,y){var C=g.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?C?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":C?m.setProperty(g,y):typeof y!="number"||y===0||fee.has(g)?g==="float"?m.cssFloat=y:m[g]=(""+y).trim():m[g]=y+"px"}function c3(m,g,y){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,y!=null){for(var C in y)!y.hasOwnProperty(C)||g!=null&&g.hasOwnProperty(C)||(C.indexOf("--")===0?m.setProperty(C,""):C==="float"?m.cssFloat="":m[C]="");for(var L in g)C=g[L],g.hasOwnProperty(L)&&y[L]!==C&&l3(m,L,C)}else for(var M in g)g.hasOwnProperty(M)&&l3(m,M,g[M])}function f1(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function h0(m){return gee.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Yo(){}var h1=null;function g1(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var im=null,om=null;function d3(m){var g=Le(m);if(g&&(m=g.stateNode)){var y=m[lt]||null;e:switch(m=g.stateNode,g.type){case"input":if(u1(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),g=y.name,y.type==="radio"&&g!=null){for(y=m;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Vr(""+g)+'"][type="radio"]'),g=0;g<y.length;g++){var C=y[g];if(C!==m&&C.form===m.form){var L=C[lt]||null;if(!L)throw Error(s(90));u1(C,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(g=0;g<y.length;g++)C=y[g],C.form===m.form&&s3(C)}break e;case"textarea":i3(m,y.value,y.defaultValue);break e;case"select":g=y.value,g!=null&&sm(m,!!y.multiple,g,!1)}}}var p1=!1;function u3(m,g,y){if(p1)return m(g,y);p1=!0;try{var C=m(g);return C}finally{if(p1=!1,(im!==null||om!==null)&&(ty(),im&&(g=im,m=om,om=im=null,d3(g),m)))for(g=0;g<m.length;g++)d3(m[g])}}function gh(m,g){var y=m.stateNode;if(y===null)return null;var C=y[lt]||null;if(C===null)return null;y=C[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(m=m.type,C=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!C;break e;default:m=!1}if(m)return null;if(y&&typeof y!="function")throw Error(s(231,g,typeof y));return y}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x1=!1;if(Qo)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){x1=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{x1=!1}var dc=null,y1=null,g0=null;function m3(){if(g0)return g0;var m,g=y1,y=g.length,C,L="value"in dc?dc.value:dc.textContent,M=L.length;for(m=0;m<y&&g[m]===L[m];m++);var Y=y-m;for(C=1;C<=Y&&g[y-C]===L[M-C];C++);return g0=L.slice(m,1<C?1-C:void 0)}function p0(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function x0(){return!0}function f3(){return!1}function Zs(m){function g(y,C,L,M,Y){this._reactName=y,this._targetInst=L,this.type=C,this.nativeEvent=M,this.target=Y,this.currentTarget=null;for(var we in m)m.hasOwnProperty(we)&&(y=m[we],this[we]=y?y(M):M[we]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?x0:f3,this.isPropagationStopped=f3,this}return h(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=x0)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=x0)},persist:function(){},isPersistent:x0}),g}var Ad={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y0=Zs(Ad),xh=h({},Ad,{view:0,detail:0}),pee=Zs(xh),b1,v1,yh,b0=h({},xh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N1,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==yh&&(yh&&m.type==="mousemove"?(b1=m.screenX-yh.screenX,v1=m.screenY-yh.screenY):v1=b1=0,yh=m),b1)},movementY:function(m){return"movementY"in m?m.movementY:v1}}),h3=Zs(b0),xee=h({},b0,{dataTransfer:0}),yee=Zs(xee),bee=h({},xh,{relatedTarget:0}),w1=Zs(bee),vee=h({},Ad,{animationName:0,elapsedTime:0,pseudoElement:0}),wee=Zs(vee),Nee=h({},Ad,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),jee=Zs(Nee),Cee=h({},Ad,{data:0}),g3=Zs(Cee),See={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_ee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tee(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=Aee[m])?!!g[m]:!1}function N1(){return Tee}var Eee=h({},xh,{key:function(m){if(m.key){var g=See[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=p0(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?_ee[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N1,charCode:function(m){return m.type==="keypress"?p0(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?p0(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),kee=Zs(Eee),Lee=h({},b0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p3=Zs(Lee),Pee=h({},xh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N1}),Dee=Zs(Pee),Oee=h({},Ad,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mee=Zs(Oee),Iee=h({},b0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),$ee=Zs(Iee),Ree=h({},Ad,{newState:0,oldState:0}),zee=Zs(Ree),Fee=[9,13,27,32],j1=Qo&&"CompositionEvent"in window,bh=null;Qo&&"documentMode"in document&&(bh=document.documentMode);var Uee=Qo&&"TextEvent"in window&&!bh,x3=Qo&&(!j1||bh&&8<bh&&11>=bh),y3=" ",b3=!1;function v3(m,g){switch(m){case"keyup":return Fee.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w3(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var lm=!1;function Bee(m,g){switch(m){case"compositionend":return w3(g);case"keypress":return g.which!==32?null:(b3=!0,y3);case"textInput":return m=g.data,m===y3&&b3?null:m;default:return null}}function Hee(m,g){if(lm)return m==="compositionend"||!j1&&v3(m,g)?(m=m3(),g0=y1=dc=null,lm=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return x3&&g.locale!=="ko"?null:g.data;default:return null}}var qee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N3(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!qee[m.type]:g==="textarea"}function j3(m,g,y,C){im?om?om.push(C):om=[C]:im=C,g=ly(g,"onChange"),0<g.length&&(y=new y0("onChange","change",null,y,C),m.push({event:y,listeners:g}))}var vh=null,wh=null;function Wee(m){rM(m,0)}function v0(m){var g=Re(m);if(s3(g))return m}function C3(m,g){if(m==="change")return g}var S3=!1;if(Qo){var C1;if(Qo){var S1="oninput"in document;if(!S1){var _3=document.createElement("div");_3.setAttribute("oninput","return;"),S1=typeof _3.oninput=="function"}C1=S1}else C1=!1;S3=C1&&(!document.documentMode||9<document.documentMode)}function A3(){vh&&(vh.detachEvent("onpropertychange",T3),wh=vh=null)}function T3(m){if(m.propertyName==="value"&&v0(wh)){var g=[];j3(g,wh,m,g1(m)),u3(Wee,g)}}function Gee(m,g,y){m==="focusin"?(A3(),vh=g,wh=y,vh.attachEvent("onpropertychange",T3)):m==="focusout"&&A3()}function Vee(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return v0(wh)}function Yee(m,g){if(m==="click")return v0(g)}function Qee(m,g){if(m==="input"||m==="change")return v0(g)}function Kee(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var jr=typeof Object.is=="function"?Object.is:Kee;function Nh(m,g){if(jr(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var y=Object.keys(m),C=Object.keys(g);if(y.length!==C.length)return!1;for(C=0;C<y.length;C++){var L=y[C];if(!at.call(g,L)||!jr(m[L],g[L]))return!1}return!0}function E3(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function k3(m,g){var y=E3(m);m=0;for(var C;y;){if(y.nodeType===3){if(C=m+y.textContent.length,m<=g&&C>=g)return{node:y,offset:g-m};m=C}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=E3(y)}}function L3(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?L3(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function P3(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=f0(m.document);g instanceof m.HTMLIFrameElement;){try{var y=typeof g.contentWindow.location.href=="string"}catch{y=!1}if(y)m=g.contentWindow;else break;g=f0(m.document)}return g}function _1(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var Xee=Qo&&"documentMode"in document&&11>=document.documentMode,cm=null,A1=null,jh=null,T1=!1;function D3(m,g,y){var C=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;T1||cm==null||cm!==f0(C)||(C=cm,"selectionStart"in C&&_1(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),jh&&Nh(jh,C)||(jh=C,C=ly(A1,"onSelect"),0<C.length&&(g=new y0("onSelect","select",null,g,y),m.push({event:g,listeners:C}),g.target=cm)))}function Td(m,g){var y={};return y[m.toLowerCase()]=g.toLowerCase(),y["Webkit"+m]="webkit"+g,y["Moz"+m]="moz"+g,y}var dm={animationend:Td("Animation","AnimationEnd"),animationiteration:Td("Animation","AnimationIteration"),animationstart:Td("Animation","AnimationStart"),transitionrun:Td("Transition","TransitionRun"),transitionstart:Td("Transition","TransitionStart"),transitioncancel:Td("Transition","TransitionCancel"),transitionend:Td("Transition","TransitionEnd")},E1={},O3={};Qo&&(O3=document.createElement("div").style,"AnimationEvent"in window||(delete dm.animationend.animation,delete dm.animationiteration.animation,delete dm.animationstart.animation),"TransitionEvent"in window||delete dm.transitionend.transition);function Ed(m){if(E1[m])return E1[m];if(!dm[m])return m;var g=dm[m],y;for(y in g)if(g.hasOwnProperty(y)&&y in O3)return E1[m]=g[y];return m}var M3=Ed("animationend"),I3=Ed("animationiteration"),$3=Ed("animationstart"),Zee=Ed("transitionrun"),Jee=Ed("transitionstart"),ete=Ed("transitioncancel"),R3=Ed("transitionend"),z3=new Map,k1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");k1.push("scrollEnd");function Ei(m,g){z3.set(m,g),Xt(g,[m])}var w0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Yr=[],um=0,L1=0;function N0(){for(var m=um,g=L1=um=0;g<m;){var y=Yr[g];Yr[g++]=null;var C=Yr[g];Yr[g++]=null;var L=Yr[g];Yr[g++]=null;var M=Yr[g];if(Yr[g++]=null,C!==null&&L!==null){var Y=C.pending;Y===null?L.next=L:(L.next=Y.next,Y.next=L),C.pending=L}M!==0&&F3(y,L,M)}}function j0(m,g,y,C){Yr[um++]=m,Yr[um++]=g,Yr[um++]=y,Yr[um++]=C,L1|=C,m.lanes|=C,m=m.alternate,m!==null&&(m.lanes|=C)}function P1(m,g,y,C){return j0(m,g,y,C),C0(m)}function kd(m,g){return j0(m,null,null,g),C0(m)}function F3(m,g,y){m.lanes|=y;var C=m.alternate;C!==null&&(C.lanes|=y);for(var L=!1,M=m.return;M!==null;)M.childLanes|=y,C=M.alternate,C!==null&&(C.childLanes|=y),M.tag===22&&(m=M.stateNode,m===null||m._visibility&1||(L=!0)),m=M,M=M.return;return m.tag===3?(M=m.stateNode,L&&g!==null&&(L=31-it(y),m=M.hiddenUpdates,C=m[L],C===null?m[L]=[g]:C.push(g),g.lane=y|536870912),M):null}function C0(m){if(50<Wh)throw Wh=0,UC=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var mm={};function tte(m,g,y,C){this.tag=m,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(m,g,y,C){return new tte(m,g,y,C)}function D1(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Ko(m,g){var y=m.alternate;return y===null?(y=Cr(m.tag,g,m.key,m.mode),y.elementType=m.elementType,y.type=m.type,y.stateNode=m.stateNode,y.alternate=m,m.alternate=y):(y.pendingProps=g,y.type=m.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=m.flags&65011712,y.childLanes=m.childLanes,y.lanes=m.lanes,y.child=m.child,y.memoizedProps=m.memoizedProps,y.memoizedState=m.memoizedState,y.updateQueue=m.updateQueue,g=m.dependencies,y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},y.sibling=m.sibling,y.index=m.index,y.ref=m.ref,y.refCleanup=m.refCleanup,y}function U3(m,g){m.flags&=65011714;var y=m.alternate;return y===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,g=y.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function S0(m,g,y,C,L,M){var Y=0;if(C=m,typeof m=="function")D1(m)&&(Y=1);else if(typeof m=="string")Y=ine(m,y,be.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case O:return m=Cr(31,y,g,L),m.elementType=O,m.lanes=M,m;case N:return Ld(y.children,L,M,g);case v:Y=8,L|=24;break;case j:return m=Cr(12,y,g,L|2),m.elementType=j,m.lanes=M,m;case E:return m=Cr(13,y,g,L),m.elementType=E,m.lanes=M,m;case _:return m=Cr(19,y,g,L),m.elementType=_,m.lanes=M,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:Y=10;break e;case w:Y=9;break e;case A:Y=11;break e;case k:Y=14;break e;case T:Y=16,C=null;break e}Y=29,y=Error(s(130,m===null?"null":typeof m,"")),C=null}return g=Cr(Y,y,g,L),g.elementType=m,g.type=C,g.lanes=M,g}function Ld(m,g,y,C){return m=Cr(7,m,C,g),m.lanes=y,m}function O1(m,g,y){return m=Cr(6,m,null,g),m.lanes=y,m}function B3(m){var g=Cr(18,null,null,0);return g.stateNode=m,g}function M1(m,g,y){return g=Cr(4,m.children!==null?m.children:[],m.key,g),g.lanes=y,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var H3=new WeakMap;function Qr(m,g){if(typeof m=="object"&&m!==null){var y=H3.get(m);return y!==void 0?y:(g={value:m,source:g,stack:De(g)},H3.set(m,g),g)}return{value:m,source:g,stack:De(g)}}var fm=[],hm=0,_0=null,Ch=0,Kr=[],Xr=0,uc=null,Ji=1,eo="";function Xo(m,g){fm[hm++]=Ch,fm[hm++]=_0,_0=m,Ch=g}function q3(m,g,y){Kr[Xr++]=Ji,Kr[Xr++]=eo,Kr[Xr++]=uc,uc=m;var C=Ji;m=eo;var L=32-it(C)-1;C&=~(1<<L),y+=1;var M=32-it(g)+L;if(30<M){var Y=L-L%5;M=(C&(1<<Y)-1).toString(32),C>>=Y,L-=Y,Ji=1<<32-it(g)+L|y<<L|C,eo=M+m}else Ji=1<<M|y<<L|C,eo=m}function I1(m){m.return!==null&&(Xo(m,1),q3(m,1,0))}function $1(m){for(;m===_0;)_0=fm[--hm],fm[hm]=null,Ch=fm[--hm],fm[hm]=null;for(;m===uc;)uc=Kr[--Xr],Kr[Xr]=null,eo=Kr[--Xr],Kr[Xr]=null,Ji=Kr[--Xr],Kr[Xr]=null}function W3(m,g){Kr[Xr++]=Ji,Kr[Xr++]=eo,Kr[Xr++]=uc,Ji=g.id,eo=g.overflow,uc=m}var bs=null,Zn=null,bn=!1,mc=null,Zr=!1,R1=Error(s(519));function fc(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sh(Qr(g,m)),R1}function G3(m){var g=m.stateNode,y=m.type,C=m.memoizedProps;switch(g[re]=m,g[lt]=C,y){case"dialog":fn("cancel",g),fn("close",g);break;case"iframe":case"object":case"embed":fn("load",g);break;case"video":case"audio":for(y=0;y<Vh.length;y++)fn(Vh[y],g);break;case"source":fn("error",g);break;case"img":case"image":case"link":fn("error",g),fn("load",g);break;case"details":fn("toggle",g);break;case"input":fn("invalid",g),r3(g,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":fn("invalid",g);break;case"textarea":fn("invalid",g),o3(g,C.value,C.defaultValue,C.children)}y=C.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||g.textContent===""+y||C.suppressHydrationWarning===!0||cM(g.textContent,y)?(C.popover!=null&&(fn("beforetoggle",g),fn("toggle",g)),C.onScroll!=null&&fn("scroll",g),C.onScrollEnd!=null&&fn("scrollend",g),C.onClick!=null&&(g.onclick=Yo),g=!0):g=!1,g||fc(m,!0)}function V3(m){for(bs=m.return;bs;)switch(bs.tag){case 5:case 31:case 13:Zr=!1;return;case 27:case 3:Zr=!0;return;default:bs=bs.return}}function gm(m){if(m!==bs)return!1;if(!bn)return V3(m),bn=!0,!1;var g=m.tag,y;if((y=g!==3&&g!==27)&&((y=g===5)&&(y=m.type,y=!(y!=="form"&&y!=="button")||nS(m.type,m.memoizedProps)),y=!y),y&&Zn&&fc(m),V3(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Zn=yM(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Zn=yM(m)}else g===27?(g=Zn,Ac(m.type)?(m=oS,oS=null,Zn=m):Zn=g):Zn=bs?ei(m.stateNode.nextSibling):null;return!0}function Pd(){Zn=bs=null,bn=!1}function z1(){var m=mc;return m!==null&&(nr===null?nr=m:nr.push.apply(nr,m),mc=null),m}function Sh(m){mc===null?mc=[m]:mc.push(m)}var F1=ee(null),Dd=null,Zo=null;function hc(m,g,y){je(F1,g._currentValue),g._currentValue=y}function Jo(m){m._currentValue=F1.current,U(F1)}function U1(m,g,y){for(;m!==null;){var C=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,C!==null&&(C.childLanes|=g)):C!==null&&(C.childLanes&g)!==g&&(C.childLanes|=g),m===y)break;m=m.return}}function B1(m,g,y,C){var L=m.child;for(L!==null&&(L.return=m);L!==null;){var M=L.dependencies;if(M!==null){var Y=L.child;M=M.firstContext;e:for(;M!==null;){var we=M;M=L;for(var Ue=0;Ue<g.length;Ue++)if(we.context===g[Ue]){M.lanes|=y,we=M.alternate,we!==null&&(we.lanes|=y),U1(M.return,y,m),C||(Y=null);break e}M=we.next}}else if(L.tag===18){if(Y=L.return,Y===null)throw Error(s(341));Y.lanes|=y,M=Y.alternate,M!==null&&(M.lanes|=y),U1(Y,y,m),Y=null}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===m){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}}function pm(m,g,y,C){m=null;for(var L=g,M=!1;L!==null;){if(!M){if((L.flags&524288)!==0)M=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var Y=L.alternate;if(Y===null)throw Error(s(387));if(Y=Y.memoizedProps,Y!==null){var we=L.type;jr(L.pendingProps.value,Y.value)||(m!==null?m.push(we):m=[we])}}else if(L===Se.current){if(Y=L.alternate,Y===null)throw Error(s(387));Y.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(m!==null?m.push(Zh):m=[Zh])}L=L.return}m!==null&&B1(g,m,y,C),g.flags|=262144}function A0(m){for(m=m.firstContext;m!==null;){if(!jr(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Od(m){Dd=m,Zo=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function vs(m){return Y3(Dd,m)}function T0(m,g){return Dd===null&&Od(m),Y3(m,g)}function Y3(m,g){var y=g._currentValue;if(g={context:g,memoizedValue:y,next:null},Zo===null){if(m===null)throw Error(s(308));Zo=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else Zo=Zo.next=g;return y}var nte=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(y,C){m.push(C)}};this.abort=function(){g.aborted=!0,m.forEach(function(y){return y()})}},ate=e.unstable_scheduleCallback,ste=e.unstable_NormalPriority,Ia={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function H1(){return{controller:new nte,data:new Map,refCount:0}}function _h(m){m.refCount--,m.refCount===0&&ate(ste,function(){m.controller.abort()})}var Ah=null,q1=0,xm=0,ym=null;function rte(m,g){if(Ah===null){var y=Ah=[];q1=0,xm=VC(),ym={status:"pending",value:void 0,then:function(C){y.push(C)}}}return q1++,g.then(Q3,Q3),g}function Q3(){if(--q1===0&&Ah!==null){ym!==null&&(ym.status="fulfilled");var m=Ah;Ah=null,xm=0,ym=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function ite(m,g){var y=[],C={status:"pending",value:null,reason:null,then:function(L){y.push(L)}};return m.then(function(){C.status="fulfilled",C.value=g;for(var L=0;L<y.length;L++)(0,y[L])(g)},function(L){for(C.status="rejected",C.reason=L,L=0;L<y.length;L++)(0,y[L])(void 0)}),C}var K3=G.S;G.S=function(m,g){D5=Ee(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&rte(m,g),K3!==null&&K3(m,g)};var Md=ee(null);function W1(){var m=Md.current;return m!==null?m:qn.pooledCache}function E0(m,g){g===null?je(Md,Md.current):je(Md,g.pool)}function X3(){var m=W1();return m===null?null:{parent:Ia._currentValue,pool:m}}var bm=Error(s(460)),G1=Error(s(474)),k0=Error(s(542)),L0={then:function(){}};function Z3(m){return m=m.status,m==="fulfilled"||m==="rejected"}function J3(m,g,y){switch(y=m[y],y===void 0?m.push(g):y!==g&&(g.then(Yo,Yo),g=y),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,tO(m),m;default:if(typeof g.status=="string")g.then(Yo,Yo);else{if(m=qn,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(C){if(g.status==="pending"){var L=g;L.status="fulfilled",L.value=C}},function(C){if(g.status==="pending"){var L=g;L.status="rejected",L.reason=C}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,tO(m),m}throw $d=g,bm}}function Id(m){try{var g=m._init;return g(m._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?($d=y,bm):y}}var $d=null;function eO(){if($d===null)throw Error(s(459));var m=$d;return $d=null,m}function tO(m){if(m===bm||m===k0)throw Error(s(483))}var vm=null,Th=0;function P0(m){var g=Th;return Th+=1,vm===null&&(vm=[]),J3(vm,m,g)}function Eh(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function D0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function nO(m){function g(Xe,Ge){if(m){var nt=Xe.deletions;nt===null?(Xe.deletions=[Ge],Xe.flags|=16):nt.push(Ge)}}function y(Xe,Ge){if(!m)return null;for(;Ge!==null;)g(Xe,Ge),Ge=Ge.sibling;return null}function C(Xe){for(var Ge=new Map;Xe!==null;)Xe.key!==null?Ge.set(Xe.key,Xe):Ge.set(Xe.index,Xe),Xe=Xe.sibling;return Ge}function L(Xe,Ge){return Xe=Ko(Xe,Ge),Xe.index=0,Xe.sibling=null,Xe}function M(Xe,Ge,nt){return Xe.index=nt,m?(nt=Xe.alternate,nt!==null?(nt=nt.index,nt<Ge?(Xe.flags|=67108866,Ge):nt):(Xe.flags|=67108866,Ge)):(Xe.flags|=1048576,Ge)}function Y(Xe){return m&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function we(Xe,Ge,nt,gt){return Ge===null||Ge.tag!==6?(Ge=O1(nt,Xe.mode,gt),Ge.return=Xe,Ge):(Ge=L(Ge,nt),Ge.return=Xe,Ge)}function Ue(Xe,Ge,nt,gt){var qt=nt.type;return qt===N?mt(Xe,Ge,nt.props.children,gt,nt.key):Ge!==null&&(Ge.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===T&&Id(qt)===Ge.type)?(Ge=L(Ge,nt.props),Eh(Ge,nt),Ge.return=Xe,Ge):(Ge=S0(nt.type,nt.key,nt.props,null,Xe.mode,gt),Eh(Ge,nt),Ge.return=Xe,Ge)}function st(Xe,Ge,nt,gt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==nt.containerInfo||Ge.stateNode.implementation!==nt.implementation?(Ge=M1(nt,Xe.mode,gt),Ge.return=Xe,Ge):(Ge=L(Ge,nt.children||[]),Ge.return=Xe,Ge)}function mt(Xe,Ge,nt,gt,qt){return Ge===null||Ge.tag!==7?(Ge=Ld(nt,Xe.mode,gt,qt),Ge.return=Xe,Ge):(Ge=L(Ge,nt),Ge.return=Xe,Ge)}function xt(Xe,Ge,nt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=O1(""+Ge,Xe.mode,nt),Ge.return=Xe,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case x:return nt=S0(Ge.type,Ge.key,Ge.props,null,Xe.mode,nt),Eh(nt,Ge),nt.return=Xe,nt;case b:return Ge=M1(Ge,Xe.mode,nt),Ge.return=Xe,Ge;case T:return Ge=Id(Ge),xt(Xe,Ge,nt)}if(Q(Ge)||P(Ge))return Ge=Ld(Ge,Xe.mode,nt,null),Ge.return=Xe,Ge;if(typeof Ge.then=="function")return xt(Xe,P0(Ge),nt);if(Ge.$$typeof===S)return xt(Xe,T0(Xe,Ge),nt);D0(Xe,Ge)}return null}function ot(Xe,Ge,nt,gt){var qt=Ge!==null?Ge.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return qt!==null?null:we(Xe,Ge,""+nt,gt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case x:return nt.key===qt?Ue(Xe,Ge,nt,gt):null;case b:return nt.key===qt?st(Xe,Ge,nt,gt):null;case T:return nt=Id(nt),ot(Xe,Ge,nt,gt)}if(Q(nt)||P(nt))return qt!==null?null:mt(Xe,Ge,nt,gt,null);if(typeof nt.then=="function")return ot(Xe,Ge,P0(nt),gt);if(nt.$$typeof===S)return ot(Xe,Ge,T0(Xe,nt),gt);D0(Xe,nt)}return null}function dt(Xe,Ge,nt,gt,qt){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return Xe=Xe.get(nt)||null,we(Ge,Xe,""+gt,qt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case x:return Xe=Xe.get(gt.key===null?nt:gt.key)||null,Ue(Ge,Xe,gt,qt);case b:return Xe=Xe.get(gt.key===null?nt:gt.key)||null,st(Ge,Xe,gt,qt);case T:return gt=Id(gt),dt(Xe,Ge,nt,gt,qt)}if(Q(gt)||P(gt))return Xe=Xe.get(nt)||null,mt(Ge,Xe,gt,qt,null);if(typeof gt.then=="function")return dt(Xe,Ge,nt,P0(gt),qt);if(gt.$$typeof===S)return dt(Xe,Ge,nt,T0(Ge,gt),qt);D0(Ge,gt)}return null}function Mt(Xe,Ge,nt,gt){for(var qt=null,Cn=null,Ft=Ge,ln=Ge=0,pn=null;Ft!==null&&ln<nt.length;ln++){Ft.index>ln?(pn=Ft,Ft=null):pn=Ft.sibling;var Sn=ot(Xe,Ft,nt[ln],gt);if(Sn===null){Ft===null&&(Ft=pn);break}m&&Ft&&Sn.alternate===null&&g(Xe,Ft),Ge=M(Sn,Ge,ln),Cn===null?qt=Sn:Cn.sibling=Sn,Cn=Sn,Ft=pn}if(ln===nt.length)return y(Xe,Ft),bn&&Xo(Xe,ln),qt;if(Ft===null){for(;ln<nt.length;ln++)Ft=xt(Xe,nt[ln],gt),Ft!==null&&(Ge=M(Ft,Ge,ln),Cn===null?qt=Ft:Cn.sibling=Ft,Cn=Ft);return bn&&Xo(Xe,ln),qt}for(Ft=C(Ft);ln<nt.length;ln++)pn=dt(Ft,Xe,ln,nt[ln],gt),pn!==null&&(m&&pn.alternate!==null&&Ft.delete(pn.key===null?ln:pn.key),Ge=M(pn,Ge,ln),Cn===null?qt=pn:Cn.sibling=pn,Cn=pn);return m&&Ft.forEach(function(Pc){return g(Xe,Pc)}),bn&&Xo(Xe,ln),qt}function Vt(Xe,Ge,nt,gt){if(nt==null)throw Error(s(151));for(var qt=null,Cn=null,Ft=Ge,ln=Ge=0,pn=null,Sn=nt.next();Ft!==null&&!Sn.done;ln++,Sn=nt.next()){Ft.index>ln?(pn=Ft,Ft=null):pn=Ft.sibling;var Pc=ot(Xe,Ft,Sn.value,gt);if(Pc===null){Ft===null&&(Ft=pn);break}m&&Ft&&Pc.alternate===null&&g(Xe,Ft),Ge=M(Pc,Ge,ln),Cn===null?qt=Pc:Cn.sibling=Pc,Cn=Pc,Ft=pn}if(Sn.done)return y(Xe,Ft),bn&&Xo(Xe,ln),qt;if(Ft===null){for(;!Sn.done;ln++,Sn=nt.next())Sn=xt(Xe,Sn.value,gt),Sn!==null&&(Ge=M(Sn,Ge,ln),Cn===null?qt=Sn:Cn.sibling=Sn,Cn=Sn);return bn&&Xo(Xe,ln),qt}for(Ft=C(Ft);!Sn.done;ln++,Sn=nt.next())Sn=dt(Ft,Xe,ln,Sn.value,gt),Sn!==null&&(m&&Sn.alternate!==null&&Ft.delete(Sn.key===null?ln:Sn.key),Ge=M(Sn,Ge,ln),Cn===null?qt=Sn:Cn.sibling=Sn,Cn=Sn);return m&&Ft.forEach(function(xne){return g(Xe,xne)}),bn&&Xo(Xe,ln),qt}function Un(Xe,Ge,nt,gt){if(typeof nt=="object"&&nt!==null&&nt.type===N&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case x:e:{for(var qt=nt.key;Ge!==null;){if(Ge.key===qt){if(qt=nt.type,qt===N){if(Ge.tag===7){y(Xe,Ge.sibling),gt=L(Ge,nt.props.children),gt.return=Xe,Xe=gt;break e}}else if(Ge.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===T&&Id(qt)===Ge.type){y(Xe,Ge.sibling),gt=L(Ge,nt.props),Eh(gt,nt),gt.return=Xe,Xe=gt;break e}y(Xe,Ge);break}else g(Xe,Ge);Ge=Ge.sibling}nt.type===N?(gt=Ld(nt.props.children,Xe.mode,gt,nt.key),gt.return=Xe,Xe=gt):(gt=S0(nt.type,nt.key,nt.props,null,Xe.mode,gt),Eh(gt,nt),gt.return=Xe,Xe=gt)}return Y(Xe);case b:e:{for(qt=nt.key;Ge!==null;){if(Ge.key===qt)if(Ge.tag===4&&Ge.stateNode.containerInfo===nt.containerInfo&&Ge.stateNode.implementation===nt.implementation){y(Xe,Ge.sibling),gt=L(Ge,nt.children||[]),gt.return=Xe,Xe=gt;break e}else{y(Xe,Ge);break}else g(Xe,Ge);Ge=Ge.sibling}gt=M1(nt,Xe.mode,gt),gt.return=Xe,Xe=gt}return Y(Xe);case T:return nt=Id(nt),Un(Xe,Ge,nt,gt)}if(Q(nt))return Mt(Xe,Ge,nt,gt);if(P(nt)){if(qt=P(nt),typeof qt!="function")throw Error(s(150));return nt=qt.call(nt),Vt(Xe,Ge,nt,gt)}if(typeof nt.then=="function")return Un(Xe,Ge,P0(nt),gt);if(nt.$$typeof===S)return Un(Xe,Ge,T0(Xe,nt),gt);D0(Xe,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,Ge!==null&&Ge.tag===6?(y(Xe,Ge.sibling),gt=L(Ge,nt),gt.return=Xe,Xe=gt):(y(Xe,Ge),gt=O1(nt,Xe.mode,gt),gt.return=Xe,Xe=gt),Y(Xe)):y(Xe,Ge)}return function(Xe,Ge,nt,gt){try{Th=0;var qt=Un(Xe,Ge,nt,gt);return vm=null,qt}catch(Ft){if(Ft===bm||Ft===k0)throw Ft;var Cn=Cr(29,Ft,null,Xe.mode);return Cn.lanes=gt,Cn.return=Xe,Cn}}}var Rd=nO(!0),aO=nO(!1),gc=!1;function V1(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Y1(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function pc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function xc(m,g,y){var C=m.updateQueue;if(C===null)return null;if(C=C.shared,(An&2)!==0){var L=C.pending;return L===null?g.next=g:(g.next=L.next,L.next=g),C.pending=g,g=C0(m),F3(m,null,y),g}return j0(m,C,g,y),C0(m)}function kh(m,g,y){if(g=g.updateQueue,g!==null&&(g=g.shared,(y&4194048)!==0)){var C=g.lanes;C&=m.pendingLanes,y|=C,g.lanes=y,Ze(m,y)}}function Q1(m,g){var y=m.updateQueue,C=m.alternate;if(C!==null&&(C=C.updateQueue,y===C)){var L=null,M=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};M===null?L=M=Y:M=M.next=Y,y=y.next}while(y!==null);M===null?L=M=g:M=M.next=g}else L=M=g;y={baseState:C.baseState,firstBaseUpdate:L,lastBaseUpdate:M,shared:C.shared,callbacks:C.callbacks},m.updateQueue=y;return}m=y.lastBaseUpdate,m===null?y.firstBaseUpdate=g:m.next=g,y.lastBaseUpdate=g}var K1=!1;function Lh(){if(K1){var m=ym;if(m!==null)throw m}}function Ph(m,g,y,C){K1=!1;var L=m.updateQueue;gc=!1;var M=L.firstBaseUpdate,Y=L.lastBaseUpdate,we=L.shared.pending;if(we!==null){L.shared.pending=null;var Ue=we,st=Ue.next;Ue.next=null,Y===null?M=st:Y.next=st,Y=Ue;var mt=m.alternate;mt!==null&&(mt=mt.updateQueue,we=mt.lastBaseUpdate,we!==Y&&(we===null?mt.firstBaseUpdate=st:we.next=st,mt.lastBaseUpdate=Ue))}if(M!==null){var xt=L.baseState;Y=0,mt=st=Ue=null,we=M;do{var ot=we.lane&-536870913,dt=ot!==we.lane;if(dt?(gn&ot)===ot:(C&ot)===ot){ot!==0&&ot===xm&&(K1=!0),mt!==null&&(mt=mt.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Mt=m,Vt=we;ot=g;var Un=y;switch(Vt.tag){case 1:if(Mt=Vt.payload,typeof Mt=="function"){xt=Mt.call(Un,xt,ot);break e}xt=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Vt.payload,ot=typeof Mt=="function"?Mt.call(Un,xt,ot):Mt,ot==null)break e;xt=h({},xt,ot);break e;case 2:gc=!0}}ot=we.callback,ot!==null&&(m.flags|=64,dt&&(m.flags|=8192),dt=L.callbacks,dt===null?L.callbacks=[ot]:dt.push(ot))}else dt={lane:ot,tag:we.tag,payload:we.payload,callback:we.callback,next:null},mt===null?(st=mt=dt,Ue=xt):mt=mt.next=dt,Y|=ot;if(we=we.next,we===null){if(we=L.shared.pending,we===null)break;dt=we,we=dt.next,dt.next=null,L.lastBaseUpdate=dt,L.shared.pending=null}}while(!0);mt===null&&(Ue=xt),L.baseState=Ue,L.firstBaseUpdate=st,L.lastBaseUpdate=mt,M===null&&(L.shared.lanes=0),Nc|=Y,m.lanes=Y,m.memoizedState=xt}}function sO(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function rO(m,g){var y=m.callbacks;if(y!==null)for(m.callbacks=null,m=0;m<y.length;m++)sO(y[m],g)}var wm=ee(null),O0=ee(0);function iO(m,g){m=ll,je(O0,m),je(wm,g),ll=m|g.baseLanes}function X1(){je(O0,ll),je(wm,wm.current)}function Z1(){ll=O0.current,U(wm),U(O0)}var Sr=ee(null),Jr=null;function yc(m){var g=m.alternate;je(Ea,Ea.current&1),je(Sr,m),Jr===null&&(g===null||wm.current!==null||g.memoizedState!==null)&&(Jr=m)}function J1(m){je(Ea,Ea.current),je(Sr,m),Jr===null&&(Jr=m)}function oO(m){m.tag===22?(je(Ea,Ea.current),je(Sr,m),Jr===null&&(Jr=m)):bc()}function bc(){je(Ea,Ea.current),je(Sr,Sr.current)}function _r(m){U(Sr),Jr===m&&(Jr=null),U(Ea)}var Ea=ee(0);function M0(m){for(var g=m;g!==null;){if(g.tag===13){var y=g.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||rS(y)||iS(y)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var el=0,an=null,zn=null,$a=null,I0=!1,Nm=!1,zd=!1,$0=0,Dh=0,jm=null,ote=0;function ba(){throw Error(s(321))}function eC(m,g){if(g===null)return!1;for(var y=0;y<g.length&&y<m.length;y++)if(!jr(m[y],g[y]))return!1;return!0}function tC(m,g,y,C,L,M){return el=M,an=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,G.H=m===null||m.memoizedState===null?qO:pC,zd=!1,M=y(C,L),zd=!1,Nm&&(M=cO(g,y,C,L)),lO(m),M}function lO(m){G.H=Ih;var g=zn!==null&&zn.next!==null;if(el=0,$a=zn=an=null,I0=!1,Dh=0,jm=null,g)throw Error(s(300));m===null||Ra||(m=m.dependencies,m!==null&&A0(m)&&(Ra=!0))}function cO(m,g,y,C){an=m;var L=0;do{if(Nm&&(jm=null),Dh=0,Nm=!1,25<=L)throw Error(s(301));if(L+=1,$a=zn=null,m.updateQueue!=null){var M=m.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}G.H=WO,M=g(y,C)}while(Nm);return M}function lte(){var m=G.H,g=m.useState()[0];return g=typeof g.then=="function"?Oh(g):g,m=m.useState()[0],(zn!==null?zn.memoizedState:null)!==m&&(an.flags|=1024),g}function nC(){var m=$0!==0;return $0=0,m}function aC(m,g,y){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~y}function sC(m){if(I0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}I0=!1}el=0,$a=zn=an=null,Nm=!1,Dh=$0=0,jm=null}function Us(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $a===null?an.memoizedState=$a=m:$a=$a.next=m,$a}function ka(){if(zn===null){var m=an.alternate;m=m!==null?m.memoizedState:null}else m=zn.next;var g=$a===null?an.memoizedState:$a.next;if(g!==null)$a=g,zn=m;else{if(m===null)throw an.alternate===null?Error(s(467)):Error(s(310));zn=m,m={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},$a===null?an.memoizedState=$a=m:$a=$a.next=m}return $a}function R0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oh(m){var g=Dh;return Dh+=1,jm===null&&(jm=[]),m=J3(jm,m,g),g=an,($a===null?g.memoizedState:$a.next)===null&&(g=g.alternate,G.H=g===null||g.memoizedState===null?qO:pC),m}function z0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Oh(m);if(m.$$typeof===S)return vs(m)}throw Error(s(438,String(m)))}function rC(m){var g=null,y=an.updateQueue;if(y!==null&&(g=y.memoCache),g==null){var C=an.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(g={data:C.data.map(function(L){return L.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),y===null&&(y=R0(),an.updateQueue=y),y.memoCache=g,y=g.data[g.index],y===void 0)for(y=g.data[g.index]=Array(m),C=0;C<m;C++)y[C]=$;return g.index++,y}function tl(m,g){return typeof g=="function"?g(m):g}function F0(m){var g=ka();return iC(g,zn,m)}function iC(m,g,y){var C=m.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=y;var L=m.baseQueue,M=C.pending;if(M!==null){if(L!==null){var Y=L.next;L.next=M.next,M.next=Y}g.baseQueue=L=M,C.pending=null}if(M=m.baseState,L===null)m.memoizedState=M;else{g=L.next;var we=Y=null,Ue=null,st=g,mt=!1;do{var xt=st.lane&-536870913;if(xt!==st.lane?(gn&xt)===xt:(el&xt)===xt){var ot=st.revertLane;if(ot===0)Ue!==null&&(Ue=Ue.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),xt===xm&&(mt=!0);else if((el&ot)===ot){st=st.next,ot===xm&&(mt=!0);continue}else xt={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Ue===null?(we=Ue=xt,Y=M):Ue=Ue.next=xt,an.lanes|=ot,Nc|=ot;xt=st.action,zd&&y(M,xt),M=st.hasEagerState?st.eagerState:y(M,xt)}else ot={lane:xt,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Ue===null?(we=Ue=ot,Y=M):Ue=Ue.next=ot,an.lanes|=xt,Nc|=xt;st=st.next}while(st!==null&&st!==g);if(Ue===null?Y=M:Ue.next=we,!jr(M,m.memoizedState)&&(Ra=!0,mt&&(y=ym,y!==null)))throw y;m.memoizedState=M,m.baseState=Y,m.baseQueue=Ue,C.lastRenderedState=M}return L===null&&(C.lanes=0),[m.memoizedState,C.dispatch]}function oC(m){var g=ka(),y=g.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=m;var C=y.dispatch,L=y.pending,M=g.memoizedState;if(L!==null){y.pending=null;var Y=L=L.next;do M=m(M,Y.action),Y=Y.next;while(Y!==L);jr(M,g.memoizedState)||(Ra=!0),g.memoizedState=M,g.baseQueue===null&&(g.baseState=M),y.lastRenderedState=M}return[M,C]}function dO(m,g,y){var C=an,L=ka(),M=bn;if(M){if(y===void 0)throw Error(s(407));y=y()}else y=g();var Y=!jr((zn||L).memoizedState,y);if(Y&&(L.memoizedState=y,Ra=!0),L=L.queue,dC(fO.bind(null,C,L,m),[m]),L.getSnapshot!==g||Y||$a!==null&&$a.memoizedState.tag&1){if(C.flags|=2048,Cm(9,{destroy:void 0},mO.bind(null,C,L,y,g),null),qn===null)throw Error(s(349));M||(el&127)!==0||uO(C,g,y)}return y}function uO(m,g,y){m.flags|=16384,m={getSnapshot:g,value:y},g=an.updateQueue,g===null?(g=R0(),an.updateQueue=g,g.stores=[m]):(y=g.stores,y===null?g.stores=[m]:y.push(m))}function mO(m,g,y,C){g.value=y,g.getSnapshot=C,hO(g)&&gO(m)}function fO(m,g,y){return y(function(){hO(g)&&gO(m)})}function hO(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!jr(m,y)}catch{return!0}}function gO(m){var g=kd(m,2);g!==null&&ar(g,m,2)}function lC(m){var g=Us();if(typeof m=="function"){var y=m;if(m=y(),zd){We(!0);try{y()}finally{We(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:m},g}function pO(m,g,y,C){return m.baseState=y,iC(m,zn,typeof C=="function"?C:tl)}function cte(m,g,y,C,L){if(H0(m))throw Error(s(485));if(m=g.action,m!==null){var M={payload:L,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){M.listeners.push(Y)}};G.T!==null?y(!0):M.isTransition=!1,C(M),y=g.pending,y===null?(M.next=g.pending=M,xO(g,M)):(M.next=y.next,g.pending=y.next=M)}}function xO(m,g){var y=g.action,C=g.payload,L=m.state;if(g.isTransition){var M=G.T,Y={};G.T=Y;try{var we=y(L,C),Ue=G.S;Ue!==null&&Ue(Y,we),yO(m,g,we)}catch(st){cC(m,g,st)}finally{M!==null&&Y.types!==null&&(M.types=Y.types),G.T=M}}else try{M=y(L,C),yO(m,g,M)}catch(st){cC(m,g,st)}}function yO(m,g,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(C){bO(m,g,C)},function(C){return cC(m,g,C)}):bO(m,g,y)}function bO(m,g,y){g.status="fulfilled",g.value=y,vO(g),m.state=y,g=m.pending,g!==null&&(y=g.next,y===g?m.pending=null:(y=y.next,g.next=y,xO(m,y)))}function cC(m,g,y){var C=m.pending;if(m.pending=null,C!==null){C=C.next;do g.status="rejected",g.reason=y,vO(g),g=g.next;while(g!==C)}m.action=null}function vO(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function wO(m,g){return g}function NO(m,g){if(bn){var y=qn.formState;if(y!==null){e:{var C=an;if(bn){if(Zn){t:{for(var L=Zn,M=Zr;L.nodeType!==8;){if(!M){L=null;break t}if(L=ei(L.nextSibling),L===null){L=null;break t}}M=L.data,L=M==="F!"||M==="F"?L:null}if(L){Zn=ei(L.nextSibling),C=L.data==="F!";break e}}fc(C)}C=!1}C&&(g=y[0])}}return y=Us(),y.memoizedState=y.baseState=g,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wO,lastRenderedState:g},y.queue=C,y=UO.bind(null,an,C),C.dispatch=y,C=lC(!1),M=gC.bind(null,an,!1,C.queue),C=Us(),L={state:g,dispatch:null,action:m,pending:null},C.queue=L,y=cte.bind(null,an,L,M,y),L.dispatch=y,C.memoizedState=m,[g,y,!1]}function jO(m){var g=ka();return CO(g,zn,m)}function CO(m,g,y){if(g=iC(m,g,wO)[0],m=F0(tl)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var C=Oh(g)}catch(Y){throw Y===bm?k0:Y}else C=g;g=ka();var L=g.queue,M=L.dispatch;return y!==g.memoizedState&&(an.flags|=2048,Cm(9,{destroy:void 0},dte.bind(null,L,y),null)),[C,M,m]}function dte(m,g){m.action=g}function SO(m){var g=ka(),y=zn;if(y!==null)return CO(g,y,m);ka(),g=g.memoizedState,y=ka();var C=y.queue.dispatch;return y.memoizedState=m,[g,C,!1]}function Cm(m,g,y,C){return m={tag:m,create:y,deps:C,inst:g,next:null},g=an.updateQueue,g===null&&(g=R0(),an.updateQueue=g),y=g.lastEffect,y===null?g.lastEffect=m.next=m:(C=y.next,y.next=m,m.next=C,g.lastEffect=m),m}function _O(){return ka().memoizedState}function U0(m,g,y,C){var L=Us();an.flags|=m,L.memoizedState=Cm(1|g,{destroy:void 0},y,C===void 0?null:C)}function B0(m,g,y,C){var L=ka();C=C===void 0?null:C;var M=L.memoizedState.inst;zn!==null&&C!==null&&eC(C,zn.memoizedState.deps)?L.memoizedState=Cm(g,M,y,C):(an.flags|=m,L.memoizedState=Cm(1|g,M,y,C))}function AO(m,g){U0(8390656,8,m,g)}function dC(m,g){B0(2048,8,m,g)}function ute(m){an.flags|=4;var g=an.updateQueue;if(g===null)g=R0(),an.updateQueue=g,g.events=[m];else{var y=g.events;y===null?g.events=[m]:y.push(m)}}function TO(m){var g=ka().memoizedState;return ute({ref:g,nextImpl:m}),function(){if((An&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function EO(m,g){return B0(4,2,m,g)}function kO(m,g){return B0(4,4,m,g)}function LO(m,g){if(typeof g=="function"){m=m();var y=g(m);return function(){typeof y=="function"?y():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function PO(m,g,y){y=y!=null?y.concat([m]):null,B0(4,4,LO.bind(null,g,m),y)}function uC(){}function DO(m,g){var y=ka();g=g===void 0?null:g;var C=y.memoizedState;return g!==null&&eC(g,C[1])?C[0]:(y.memoizedState=[m,g],m)}function OO(m,g){var y=ka();g=g===void 0?null:g;var C=y.memoizedState;if(g!==null&&eC(g,C[1]))return C[0];if(C=m(),zd){We(!0);try{m()}finally{We(!1)}}return y.memoizedState=[C,g],C}function mC(m,g,y){return y===void 0||(el&1073741824)!==0&&(gn&261930)===0?m.memoizedState=g:(m.memoizedState=y,m=M5(),an.lanes|=m,Nc|=m,y)}function MO(m,g,y,C){return jr(y,g)?y:wm.current!==null?(m=mC(m,y,C),jr(m,g)||(Ra=!0),m):(el&42)===0||(el&1073741824)!==0&&(gn&261930)===0?(Ra=!0,m.memoizedState=y):(m=M5(),an.lanes|=m,Nc|=m,g)}function IO(m,g,y,C,L){var M=K.p;K.p=M!==0&&8>M?M:8;var Y=G.T,we={};G.T=we,gC(m,!1,g,y);try{var Ue=L(),st=G.S;if(st!==null&&st(we,Ue),Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var mt=ite(Ue,C);Mh(m,g,mt,Er(m))}else Mh(m,g,C,Er(m))}catch(xt){Mh(m,g,{then:function(){},status:"rejected",reason:xt},Er())}finally{K.p=M,Y!==null&&we.types!==null&&(Y.types=we.types),G.T=Y}}function mte(){}function fC(m,g,y,C){if(m.tag!==5)throw Error(s(476));var L=$O(m).queue;IO(m,L,g,W,y===null?mte:function(){return RO(m),y(C)})}function $O(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:W},next:null};var y={};return g.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:y},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function RO(m){var g=$O(m);g.next===null&&(g=m.alternate.memoizedState),Mh(m,g.next.queue,{},Er())}function hC(){return vs(Zh)}function zO(){return ka().memoizedState}function FO(){return ka().memoizedState}function fte(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var y=Er();m=pc(y);var C=xc(g,m,y);C!==null&&(ar(C,g,y),kh(C,g,y)),g={cache:H1()},m.payload=g;return}g=g.return}}function hte(m,g,y){var C=Er();y={lane:C,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},H0(m)?BO(g,y):(y=P1(m,g,y,C),y!==null&&(ar(y,m,C),HO(y,g,C)))}function UO(m,g,y){var C=Er();Mh(m,g,y,C)}function Mh(m,g,y,C){var L={lane:C,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(H0(m))BO(g,L);else{var M=m.alternate;if(m.lanes===0&&(M===null||M.lanes===0)&&(M=g.lastRenderedReducer,M!==null))try{var Y=g.lastRenderedState,we=M(Y,y);if(L.hasEagerState=!0,L.eagerState=we,jr(we,Y))return j0(m,g,L,0),qn===null&&N0(),!1}catch{}if(y=P1(m,g,L,C),y!==null)return ar(y,m,C),HO(y,g,C),!0}return!1}function gC(m,g,y,C){if(C={lane:2,revertLane:VC(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},H0(m)){if(g)throw Error(s(479))}else g=P1(m,y,C,2),g!==null&&ar(g,m,2)}function H0(m){var g=m.alternate;return m===an||g!==null&&g===an}function BO(m,g){Nm=I0=!0;var y=m.pending;y===null?g.next=g:(g.next=y.next,y.next=g),m.pending=g}function HO(m,g,y){if((y&4194048)!==0){var C=g.lanes;C&=m.pendingLanes,y|=C,g.lanes=y,Ze(m,y)}}var Ih={readContext:vs,use:z0,useCallback:ba,useContext:ba,useEffect:ba,useImperativeHandle:ba,useLayoutEffect:ba,useInsertionEffect:ba,useMemo:ba,useReducer:ba,useRef:ba,useState:ba,useDebugValue:ba,useDeferredValue:ba,useTransition:ba,useSyncExternalStore:ba,useId:ba,useHostTransitionStatus:ba,useFormState:ba,useActionState:ba,useOptimistic:ba,useMemoCache:ba,useCacheRefresh:ba};Ih.useEffectEvent=ba;var qO={readContext:vs,use:z0,useCallback:function(m,g){return Us().memoizedState=[m,g===void 0?null:g],m},useContext:vs,useEffect:AO,useImperativeHandle:function(m,g,y){y=y!=null?y.concat([m]):null,U0(4194308,4,LO.bind(null,g,m),y)},useLayoutEffect:function(m,g){return U0(4194308,4,m,g)},useInsertionEffect:function(m,g){U0(4,2,m,g)},useMemo:function(m,g){var y=Us();g=g===void 0?null:g;var C=m();if(zd){We(!0);try{m()}finally{We(!1)}}return y.memoizedState=[C,g],C},useReducer:function(m,g,y){var C=Us();if(y!==void 0){var L=y(g);if(zd){We(!0);try{y(g)}finally{We(!1)}}}else L=g;return C.memoizedState=C.baseState=L,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:L},C.queue=m,m=m.dispatch=hte.bind(null,an,m),[C.memoizedState,m]},useRef:function(m){var g=Us();return m={current:m},g.memoizedState=m},useState:function(m){m=lC(m);var g=m.queue,y=UO.bind(null,an,g);return g.dispatch=y,[m.memoizedState,y]},useDebugValue:uC,useDeferredValue:function(m,g){var y=Us();return mC(y,m,g)},useTransition:function(){var m=lC(!1);return m=IO.bind(null,an,m.queue,!0,!1),Us().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,y){var C=an,L=Us();if(bn){if(y===void 0)throw Error(s(407));y=y()}else{if(y=g(),qn===null)throw Error(s(349));(gn&127)!==0||uO(C,g,y)}L.memoizedState=y;var M={value:y,getSnapshot:g};return L.queue=M,AO(fO.bind(null,C,M,m),[m]),C.flags|=2048,Cm(9,{destroy:void 0},mO.bind(null,C,M,y,g),null),y},useId:function(){var m=Us(),g=qn.identifierPrefix;if(bn){var y=eo,C=Ji;y=(C&~(1<<32-it(C)-1)).toString(32)+y,g="_"+g+"R_"+y,y=$0++,0<y&&(g+="H"+y.toString(32)),g+="_"}else y=ote++,g="_"+g+"r_"+y.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:hC,useFormState:NO,useActionState:NO,useOptimistic:function(m){var g=Us();g.memoizedState=g.baseState=m;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=y,g=gC.bind(null,an,!0,y),y.dispatch=g,[m,g]},useMemoCache:rC,useCacheRefresh:function(){return Us().memoizedState=fte.bind(null,an)},useEffectEvent:function(m){var g=Us(),y={impl:m};return g.memoizedState=y,function(){if((An&2)!==0)throw Error(s(440));return y.impl.apply(void 0,arguments)}}},pC={readContext:vs,use:z0,useCallback:DO,useContext:vs,useEffect:dC,useImperativeHandle:PO,useInsertionEffect:EO,useLayoutEffect:kO,useMemo:OO,useReducer:F0,useRef:_O,useState:function(){return F0(tl)},useDebugValue:uC,useDeferredValue:function(m,g){var y=ka();return MO(y,zn.memoizedState,m,g)},useTransition:function(){var m=F0(tl)[0],g=ka().memoizedState;return[typeof m=="boolean"?m:Oh(m),g]},useSyncExternalStore:dO,useId:zO,useHostTransitionStatus:hC,useFormState:jO,useActionState:jO,useOptimistic:function(m,g){var y=ka();return pO(y,zn,m,g)},useMemoCache:rC,useCacheRefresh:FO};pC.useEffectEvent=TO;var WO={readContext:vs,use:z0,useCallback:DO,useContext:vs,useEffect:dC,useImperativeHandle:PO,useInsertionEffect:EO,useLayoutEffect:kO,useMemo:OO,useReducer:oC,useRef:_O,useState:function(){return oC(tl)},useDebugValue:uC,useDeferredValue:function(m,g){var y=ka();return zn===null?mC(y,m,g):MO(y,zn.memoizedState,m,g)},useTransition:function(){var m=oC(tl)[0],g=ka().memoizedState;return[typeof m=="boolean"?m:Oh(m),g]},useSyncExternalStore:dO,useId:zO,useHostTransitionStatus:hC,useFormState:SO,useActionState:SO,useOptimistic:function(m,g){var y=ka();return zn!==null?pO(y,zn,m,g):(y.baseState=m,[m,y.queue.dispatch])},useMemoCache:rC,useCacheRefresh:FO};WO.useEffectEvent=TO;function xC(m,g,y,C){g=m.memoizedState,y=y(C,g),y=y==null?g:h({},g,y),m.memoizedState=y,m.lanes===0&&(m.updateQueue.baseState=y)}var yC={enqueueSetState:function(m,g,y){m=m._reactInternals;var C=Er(),L=pc(C);L.payload=g,y!=null&&(L.callback=y),g=xc(m,L,C),g!==null&&(ar(g,m,C),kh(g,m,C))},enqueueReplaceState:function(m,g,y){m=m._reactInternals;var C=Er(),L=pc(C);L.tag=1,L.payload=g,y!=null&&(L.callback=y),g=xc(m,L,C),g!==null&&(ar(g,m,C),kh(g,m,C))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var y=Er(),C=pc(y);C.tag=2,g!=null&&(C.callback=g),g=xc(m,C,y),g!==null&&(ar(g,m,y),kh(g,m,y))}};function GO(m,g,y,C,L,M,Y){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(C,M,Y):g.prototype&&g.prototype.isPureReactComponent?!Nh(y,C)||!Nh(L,M):!0}function VO(m,g,y,C){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(y,C),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(y,C),g.state!==m&&yC.enqueueReplaceState(g,g.state,null)}function Fd(m,g){var y=g;if("ref"in g){y={};for(var C in g)C!=="ref"&&(y[C]=g[C])}if(m=m.defaultProps){y===g&&(y=h({},y));for(var L in m)y[L]===void 0&&(y[L]=m[L])}return y}function YO(m){w0(m)}function QO(m){console.error(m)}function KO(m){w0(m)}function q0(m,g){try{var y=m.onUncaughtError;y(g.value,{componentStack:g.stack})}catch(C){setTimeout(function(){throw C})}}function XO(m,g,y){try{var C=m.onCaughtError;C(y.value,{componentStack:y.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function bC(m,g,y){return y=pc(y),y.tag=3,y.payload={element:null},y.callback=function(){q0(m,g)},y}function ZO(m){return m=pc(m),m.tag=3,m}function JO(m,g,y,C){var L=y.type.getDerivedStateFromError;if(typeof L=="function"){var M=C.value;m.payload=function(){return L(M)},m.callback=function(){XO(g,y,C)}}var Y=y.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(m.callback=function(){XO(g,y,C),typeof L!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var we=C.stack;this.componentDidCatch(C.value,{componentStack:we!==null?we:""})})}function gte(m,g,y,C,L){if(y.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(g=y.alternate,g!==null&&pm(g,y,L,!0),y=Sr.current,y!==null){switch(y.tag){case 31:case 13:return Jr===null?ny():y.alternate===null&&va===0&&(va=3),y.flags&=-257,y.flags|=65536,y.lanes=L,C===L0?y.flags|=16384:(g=y.updateQueue,g===null?y.updateQueue=new Set([C]):g.add(C),qC(m,C,L)),!1;case 22:return y.flags|=65536,C===L0?y.flags|=16384:(g=y.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([C])},y.updateQueue=g):(y=g.retryQueue,y===null?g.retryQueue=new Set([C]):y.add(C)),qC(m,C,L)),!1}throw Error(s(435,y.tag))}return qC(m,C,L),ny(),!1}if(bn)return g=Sr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=L,C!==R1&&(m=Error(s(422),{cause:C}),Sh(Qr(m,y)))):(C!==R1&&(g=Error(s(423),{cause:C}),Sh(Qr(g,y))),m=m.current.alternate,m.flags|=65536,L&=-L,m.lanes|=L,C=Qr(C,y),L=bC(m.stateNode,C,L),Q1(m,L),va!==4&&(va=2)),!1;var M=Error(s(520),{cause:C});if(M=Qr(M,y),qh===null?qh=[M]:qh.push(M),va!==4&&(va=2),g===null)return!0;C=Qr(C,y),y=g;do{switch(y.tag){case 3:return y.flags|=65536,m=L&-L,y.lanes|=m,m=bC(y.stateNode,C,m),Q1(y,m),!1;case 1:if(g=y.type,M=y.stateNode,(y.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(jc===null||!jc.has(M))))return y.flags|=65536,L&=-L,y.lanes|=L,L=ZO(L),JO(L,m,y,C),Q1(y,L),!1}y=y.return}while(y!==null);return!1}var vC=Error(s(461)),Ra=!1;function ws(m,g,y,C){g.child=m===null?aO(g,null,y,C):Rd(g,m.child,y,C)}function e5(m,g,y,C,L){y=y.render;var M=g.ref;if("ref"in C){var Y={};for(var we in C)we!=="ref"&&(Y[we]=C[we])}else Y=C;return Od(g),C=tC(m,g,y,Y,M,L),we=nC(),m!==null&&!Ra?(aC(m,g,L),nl(m,g,L)):(bn&&we&&I1(g),g.flags|=1,ws(m,g,C,L),g.child)}function t5(m,g,y,C,L){if(m===null){var M=y.type;return typeof M=="function"&&!D1(M)&&M.defaultProps===void 0&&y.compare===null?(g.tag=15,g.type=M,n5(m,g,M,C,L)):(m=S0(y.type,null,C,g,g.mode,L),m.ref=g.ref,m.return=g,g.child=m)}if(M=m.child,!TC(m,L)){var Y=M.memoizedProps;if(y=y.compare,y=y!==null?y:Nh,y(Y,C)&&m.ref===g.ref)return nl(m,g,L)}return g.flags|=1,m=Ko(M,C),m.ref=g.ref,m.return=g,g.child=m}function n5(m,g,y,C,L){if(m!==null){var M=m.memoizedProps;if(Nh(M,C)&&m.ref===g.ref)if(Ra=!1,g.pendingProps=C=M,TC(m,L))(m.flags&131072)!==0&&(Ra=!0);else return g.lanes=m.lanes,nl(m,g,L)}return wC(m,g,y,C,L)}function a5(m,g,y,C){var L=C.children,M=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((g.flags&128)!==0){if(M=M!==null?M.baseLanes|y:y,m!==null){for(C=g.child=m.child,L=0;C!==null;)L=L|C.lanes|C.childLanes,C=C.sibling;C=L&~M}else C=0,g.child=null;return s5(m,g,M,y,C)}if((y&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&E0(g,M!==null?M.cachePool:null),M!==null?iO(g,M):X1(),oO(g);else return C=g.lanes=536870912,s5(m,g,M!==null?M.baseLanes|y:y,y,C)}else M!==null?(E0(g,M.cachePool),iO(g,M),bc(),g.memoizedState=null):(m!==null&&E0(g,null),X1(),bc());return ws(m,g,L,y),g.child}function $h(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function s5(m,g,y,C,L){var M=W1();return M=M===null?null:{parent:Ia._currentValue,pool:M},g.memoizedState={baseLanes:y,cachePool:M},m!==null&&E0(g,null),X1(),oO(g),m!==null&&pm(m,g,C,!0),g.childLanes=L,null}function W0(m,g){return g=V0({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function r5(m,g,y){return Rd(g,m.child,null,y),m=W0(g,g.pendingProps),m.flags|=2,_r(g),g.memoizedState=null,m}function pte(m,g,y){var C=g.pendingProps,L=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(bn){if(C.mode==="hidden")return m=W0(g,C),g.lanes=536870912,$h(null,m);if(J1(g),(m=Zn)?(m=xM(m,Zr),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:uc!==null?{id:Ji,overflow:eo}:null,retryLane:536870912,hydrationErrors:null},y=B3(m),y.return=g,g.child=y,bs=g,Zn=null)):m=null,m===null)throw fc(g);return g.lanes=536870912,null}return W0(g,C)}var M=m.memoizedState;if(M!==null){var Y=M.dehydrated;if(J1(g),L)if(g.flags&256)g.flags&=-257,g=r5(m,g,y);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if(Ra||pm(m,g,y,!1),L=(y&m.childLanes)!==0,Ra||L){if(C=qn,C!==null&&(Y=pt(C,y),Y!==0&&Y!==M.retryLane))throw M.retryLane=Y,kd(m,Y),ar(C,m,Y),vC;ny(),g=r5(m,g,y)}else m=M.treeContext,Zn=ei(Y.nextSibling),bs=g,bn=!0,mc=null,Zr=!1,m!==null&&W3(g,m),g=W0(g,C),g.flags|=4096;return g}return m=Ko(m.child,{mode:C.mode,children:C.children}),m.ref=g.ref,g.child=m,m.return=g,m}function G0(m,g){var y=g.ref;if(y===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(s(284));(m===null||m.ref!==y)&&(g.flags|=4194816)}}function wC(m,g,y,C,L){return Od(g),y=tC(m,g,y,C,void 0,L),C=nC(),m!==null&&!Ra?(aC(m,g,L),nl(m,g,L)):(bn&&C&&I1(g),g.flags|=1,ws(m,g,y,L),g.child)}function i5(m,g,y,C,L,M){return Od(g),g.updateQueue=null,y=cO(g,C,y,L),lO(m),C=nC(),m!==null&&!Ra?(aC(m,g,M),nl(m,g,M)):(bn&&C&&I1(g),g.flags|=1,ws(m,g,y,M),g.child)}function o5(m,g,y,C,L){if(Od(g),g.stateNode===null){var M=mm,Y=y.contextType;typeof Y=="object"&&Y!==null&&(M=vs(Y)),M=new y(C,M),g.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=yC,g.stateNode=M,M._reactInternals=g,M=g.stateNode,M.props=C,M.state=g.memoizedState,M.refs={},V1(g),Y=y.contextType,M.context=typeof Y=="object"&&Y!==null?vs(Y):mm,M.state=g.memoizedState,Y=y.getDerivedStateFromProps,typeof Y=="function"&&(xC(g,y,Y,C),M.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(Y=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),Y!==M.state&&yC.enqueueReplaceState(M,M.state,null),Ph(g,C,M,L),Lh(),M.state=g.memoizedState),typeof M.componentDidMount=="function"&&(g.flags|=4194308),C=!0}else if(m===null){M=g.stateNode;var we=g.memoizedProps,Ue=Fd(y,we);M.props=Ue;var st=M.context,mt=y.contextType;Y=mm,typeof mt=="object"&&mt!==null&&(Y=vs(mt));var xt=y.getDerivedStateFromProps;mt=typeof xt=="function"||typeof M.getSnapshotBeforeUpdate=="function",we=g.pendingProps!==we,mt||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(we||st!==Y)&&VO(g,M,C,Y),gc=!1;var ot=g.memoizedState;M.state=ot,Ph(g,C,M,L),Lh(),st=g.memoizedState,we||ot!==st||gc?(typeof xt=="function"&&(xC(g,y,xt,C),st=g.memoizedState),(Ue=gc||GO(g,y,Ue,C,ot,st,Y))?(mt||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(g.flags|=4194308)):(typeof M.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=C,g.memoizedState=st),M.props=C,M.state=st,M.context=Y,C=Ue):(typeof M.componentDidMount=="function"&&(g.flags|=4194308),C=!1)}else{M=g.stateNode,Y1(m,g),Y=g.memoizedProps,mt=Fd(y,Y),M.props=mt,xt=g.pendingProps,ot=M.context,st=y.contextType,Ue=mm,typeof st=="object"&&st!==null&&(Ue=vs(st)),we=y.getDerivedStateFromProps,(st=typeof we=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Y!==xt||ot!==Ue)&&VO(g,M,C,Ue),gc=!1,ot=g.memoizedState,M.state=ot,Ph(g,C,M,L),Lh();var dt=g.memoizedState;Y!==xt||ot!==dt||gc||m!==null&&m.dependencies!==null&&A0(m.dependencies)?(typeof we=="function"&&(xC(g,y,we,C),dt=g.memoizedState),(mt=gc||GO(g,y,mt,C,ot,dt,Ue)||m!==null&&m.dependencies!==null&&A0(m.dependencies))?(st||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(C,dt,Ue),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(C,dt,Ue)),typeof M.componentDidUpdate=="function"&&(g.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof M.componentDidUpdate!="function"||Y===m.memoizedProps&&ot===m.memoizedState||(g.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Y===m.memoizedProps&&ot===m.memoizedState||(g.flags|=1024),g.memoizedProps=C,g.memoizedState=dt),M.props=C,M.state=dt,M.context=Ue,C=mt):(typeof M.componentDidUpdate!="function"||Y===m.memoizedProps&&ot===m.memoizedState||(g.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Y===m.memoizedProps&&ot===m.memoizedState||(g.flags|=1024),C=!1)}return M=C,G0(m,g),C=(g.flags&128)!==0,M||C?(M=g.stateNode,y=C&&typeof y.getDerivedStateFromError!="function"?null:M.render(),g.flags|=1,m!==null&&C?(g.child=Rd(g,m.child,null,L),g.child=Rd(g,null,y,L)):ws(m,g,y,L),g.memoizedState=M.state,m=g.child):m=nl(m,g,L),m}function l5(m,g,y,C){return Pd(),g.flags|=256,ws(m,g,y,C),g.child}var NC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jC(m){return{baseLanes:m,cachePool:X3()}}function CC(m,g,y){return m=m!==null?m.childLanes&~y:0,g&&(m|=Tr),m}function c5(m,g,y){var C=g.pendingProps,L=!1,M=(g.flags&128)!==0,Y;if((Y=M)||(Y=m!==null&&m.memoizedState===null?!1:(Ea.current&2)!==0),Y&&(L=!0,g.flags&=-129),Y=(g.flags&32)!==0,g.flags&=-33,m===null){if(bn){if(L?yc(g):bc(),(m=Zn)?(m=xM(m,Zr),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:uc!==null?{id:Ji,overflow:eo}:null,retryLane:536870912,hydrationErrors:null},y=B3(m),y.return=g,g.child=y,bs=g,Zn=null)):m=null,m===null)throw fc(g);return iS(m)?g.lanes=32:g.lanes=536870912,null}var we=C.children;return C=C.fallback,L?(bc(),L=g.mode,we=V0({mode:"hidden",children:we},L),C=Ld(C,L,y,null),we.return=g,C.return=g,we.sibling=C,g.child=we,C=g.child,C.memoizedState=jC(y),C.childLanes=CC(m,Y,y),g.memoizedState=NC,$h(null,C)):(yc(g),SC(g,we))}var Ue=m.memoizedState;if(Ue!==null&&(we=Ue.dehydrated,we!==null)){if(M)g.flags&256?(yc(g),g.flags&=-257,g=_C(m,g,y)):g.memoizedState!==null?(bc(),g.child=m.child,g.flags|=128,g=null):(bc(),we=C.fallback,L=g.mode,C=V0({mode:"visible",children:C.children},L),we=Ld(we,L,y,null),we.flags|=2,C.return=g,we.return=g,C.sibling=we,g.child=C,Rd(g,m.child,null,y),C=g.child,C.memoizedState=jC(y),C.childLanes=CC(m,Y,y),g.memoizedState=NC,g=$h(null,C));else if(yc(g),iS(we)){if(Y=we.nextSibling&&we.nextSibling.dataset,Y)var st=Y.dgst;Y=st,C=Error(s(419)),C.stack="",C.digest=Y,Sh({value:C,source:null,stack:null}),g=_C(m,g,y)}else if(Ra||pm(m,g,y,!1),Y=(y&m.childLanes)!==0,Ra||Y){if(Y=qn,Y!==null&&(C=pt(Y,y),C!==0&&C!==Ue.retryLane))throw Ue.retryLane=C,kd(m,C),ar(Y,m,C),vC;rS(we)||ny(),g=_C(m,g,y)}else rS(we)?(g.flags|=192,g.child=m.child,g=null):(m=Ue.treeContext,Zn=ei(we.nextSibling),bs=g,bn=!0,mc=null,Zr=!1,m!==null&&W3(g,m),g=SC(g,C.children),g.flags|=4096);return g}return L?(bc(),we=C.fallback,L=g.mode,Ue=m.child,st=Ue.sibling,C=Ko(Ue,{mode:"hidden",children:C.children}),C.subtreeFlags=Ue.subtreeFlags&65011712,st!==null?we=Ko(st,we):(we=Ld(we,L,y,null),we.flags|=2),we.return=g,C.return=g,C.sibling=we,g.child=C,$h(null,C),C=g.child,we=m.child.memoizedState,we===null?we=jC(y):(L=we.cachePool,L!==null?(Ue=Ia._currentValue,L=L.parent!==Ue?{parent:Ue,pool:Ue}:L):L=X3(),we={baseLanes:we.baseLanes|y,cachePool:L}),C.memoizedState=we,C.childLanes=CC(m,Y,y),g.memoizedState=NC,$h(m.child,C)):(yc(g),y=m.child,m=y.sibling,y=Ko(y,{mode:"visible",children:C.children}),y.return=g,y.sibling=null,m!==null&&(Y=g.deletions,Y===null?(g.deletions=[m],g.flags|=16):Y.push(m)),g.child=y,g.memoizedState=null,y)}function SC(m,g){return g=V0({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function V0(m,g){return m=Cr(22,m,null,g),m.lanes=0,m}function _C(m,g,y){return Rd(g,m.child,null,y),m=SC(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function d5(m,g,y){m.lanes|=g;var C=m.alternate;C!==null&&(C.lanes|=g),U1(m.return,g,y)}function AC(m,g,y,C,L,M){var Y=m.memoizedState;Y===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:C,tail:y,tailMode:L,treeForkCount:M}:(Y.isBackwards=g,Y.rendering=null,Y.renderingStartTime=0,Y.last=C,Y.tail=y,Y.tailMode=L,Y.treeForkCount=M)}function u5(m,g,y){var C=g.pendingProps,L=C.revealOrder,M=C.tail;C=C.children;var Y=Ea.current,we=(Y&2)!==0;if(we?(Y=Y&1|2,g.flags|=128):Y&=1,je(Ea,Y),ws(m,g,C,y),C=bn?Ch:0,!we&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&d5(m,y,g);else if(m.tag===19)d5(m,y,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(L){case"forwards":for(y=g.child,L=null;y!==null;)m=y.alternate,m!==null&&M0(m)===null&&(L=y),y=y.sibling;y=L,y===null?(L=g.child,g.child=null):(L=y.sibling,y.sibling=null),AC(g,!1,L,y,M,C);break;case"backwards":case"unstable_legacy-backwards":for(y=null,L=g.child,g.child=null;L!==null;){if(m=L.alternate,m!==null&&M0(m)===null){g.child=L;break}m=L.sibling,L.sibling=y,y=L,L=m}AC(g,!0,y,null,M,C);break;case"together":AC(g,!1,null,null,void 0,C);break;default:g.memoizedState=null}return g.child}function nl(m,g,y){if(m!==null&&(g.dependencies=m.dependencies),Nc|=g.lanes,(y&g.childLanes)===0)if(m!==null){if(pm(m,g,y,!1),(y&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,y=Ko(m,m.pendingProps),g.child=y,y.return=g;m.sibling!==null;)m=m.sibling,y=y.sibling=Ko(m,m.pendingProps),y.return=g;y.sibling=null}return g.child}function TC(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&A0(m)))}function xte(m,g,y){switch(g.tag){case 3:Oe(g,g.stateNode.containerInfo),hc(g,Ia,m.memoizedState.cache),Pd();break;case 27:case 5:He(g);break;case 4:Oe(g,g.stateNode.containerInfo);break;case 10:hc(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,J1(g),null;break;case 13:var C=g.memoizedState;if(C!==null)return C.dehydrated!==null?(yc(g),g.flags|=128,null):(y&g.child.childLanes)!==0?c5(m,g,y):(yc(g),m=nl(m,g,y),m!==null?m.sibling:null);yc(g);break;case 19:var L=(m.flags&128)!==0;if(C=(y&g.childLanes)!==0,C||(pm(m,g,y,!1),C=(y&g.childLanes)!==0),L){if(C)return u5(m,g,y);g.flags|=128}if(L=g.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),je(Ea,Ea.current),C)break;return null;case 22:return g.lanes=0,a5(m,g,y,g.pendingProps);case 24:hc(g,Ia,m.memoizedState.cache)}return nl(m,g,y)}function m5(m,g,y){if(m!==null)if(m.memoizedProps!==g.pendingProps)Ra=!0;else{if(!TC(m,y)&&(g.flags&128)===0)return Ra=!1,xte(m,g,y);Ra=(m.flags&131072)!==0}else Ra=!1,bn&&(g.flags&1048576)!==0&&q3(g,Ch,g.index);switch(g.lanes=0,g.tag){case 16:e:{var C=g.pendingProps;if(m=Id(g.elementType),g.type=m,typeof m=="function")D1(m)?(C=Fd(m,C),g.tag=1,g=o5(null,g,m,C,y)):(g.tag=0,g=wC(null,g,m,C,y));else{if(m!=null){var L=m.$$typeof;if(L===A){g.tag=11,g=e5(null,g,m,C,y);break e}else if(L===k){g.tag=14,g=t5(null,g,m,C,y);break e}}throw g=H(m)||m,Error(s(306,g,""))}}return g;case 0:return wC(m,g,g.type,g.pendingProps,y);case 1:return C=g.type,L=Fd(C,g.pendingProps),o5(m,g,C,L,y);case 3:e:{if(Oe(g,g.stateNode.containerInfo),m===null)throw Error(s(387));C=g.pendingProps;var M=g.memoizedState;L=M.element,Y1(m,g),Ph(g,C,null,y);var Y=g.memoizedState;if(C=Y.cache,hc(g,Ia,C),C!==M.cache&&B1(g,[Ia],y,!0),Lh(),C=Y.element,M.isDehydrated)if(M={element:C,isDehydrated:!1,cache:Y.cache},g.updateQueue.baseState=M,g.memoizedState=M,g.flags&256){g=l5(m,g,C,y);break e}else if(C!==L){L=Qr(Error(s(424)),g),Sh(L),g=l5(m,g,C,y);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,Zn=ei(m.firstChild),bs=g,bn=!0,mc=null,Zr=!0,y=aO(g,null,C,y),g.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Pd(),C===L){g=nl(m,g,y);break e}ws(m,g,C,y)}g=g.child}return g;case 26:return G0(m,g),m===null?(y=jM(g.type,null,g.pendingProps,null))?g.memoizedState=y:bn||(y=g.type,m=g.pendingProps,C=cy(Ce.current).createElement(y),C[re]=g,C[lt]=m,Ns(C,y,m),Ke(C),g.stateNode=C):g.memoizedState=jM(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return He(g),m===null&&bn&&(C=g.stateNode=vM(g.type,g.pendingProps,Ce.current),bs=g,Zr=!0,L=Zn,Ac(g.type)?(oS=L,Zn=ei(C.firstChild)):Zn=L),ws(m,g,g.pendingProps.children,y),G0(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&bn&&((L=C=Zn)&&(C=Vte(C,g.type,g.pendingProps,Zr),C!==null?(g.stateNode=C,bs=g,Zn=ei(C.firstChild),Zr=!1,L=!0):L=!1),L||fc(g)),He(g),L=g.type,M=g.pendingProps,Y=m!==null?m.memoizedProps:null,C=M.children,nS(L,M)?C=null:Y!==null&&nS(L,Y)&&(g.flags|=32),g.memoizedState!==null&&(L=tC(m,g,lte,null,null,y),Zh._currentValue=L),G0(m,g),ws(m,g,C,y),g.child;case 6:return m===null&&bn&&((m=y=Zn)&&(y=Yte(y,g.pendingProps,Zr),y!==null?(g.stateNode=y,bs=g,Zn=null,m=!0):m=!1),m||fc(g)),null;case 13:return c5(m,g,y);case 4:return Oe(g,g.stateNode.containerInfo),C=g.pendingProps,m===null?g.child=Rd(g,null,C,y):ws(m,g,C,y),g.child;case 11:return e5(m,g,g.type,g.pendingProps,y);case 7:return ws(m,g,g.pendingProps,y),g.child;case 8:return ws(m,g,g.pendingProps.children,y),g.child;case 12:return ws(m,g,g.pendingProps.children,y),g.child;case 10:return C=g.pendingProps,hc(g,g.type,C.value),ws(m,g,C.children,y),g.child;case 9:return L=g.type._context,C=g.pendingProps.children,Od(g),L=vs(L),C=C(L),g.flags|=1,ws(m,g,C,y),g.child;case 14:return t5(m,g,g.type,g.pendingProps,y);case 15:return n5(m,g,g.type,g.pendingProps,y);case 19:return u5(m,g,y);case 31:return pte(m,g,y);case 22:return a5(m,g,y,g.pendingProps);case 24:return Od(g),C=vs(Ia),m===null?(L=W1(),L===null&&(L=qn,M=H1(),L.pooledCache=M,M.refCount++,M!==null&&(L.pooledCacheLanes|=y),L=M),g.memoizedState={parent:C,cache:L},V1(g),hc(g,Ia,L)):((m.lanes&y)!==0&&(Y1(m,g),Ph(g,null,null,y),Lh()),L=m.memoizedState,M=g.memoizedState,L.parent!==C?(L={parent:C,cache:C},g.memoizedState=L,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=L),hc(g,Ia,C)):(C=M.cache,hc(g,Ia,C),C!==L.cache&&B1(g,[Ia],y,!0))),ws(m,g,g.pendingProps.children,y),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function al(m){m.flags|=4}function EC(m,g,y,C,L){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(L&335544128)===L)if(m.stateNode.complete)m.flags|=8192;else if(z5())m.flags|=8192;else throw $d=L0,G1}else m.flags&=-16777217}function f5(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!TM(g))if(z5())m.flags|=8192;else throw $d=L0,G1}function Y0(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?ie():536870912,m.lanes|=g,Tm|=g)}function Rh(m,g){if(!bn)switch(m.tailMode){case"hidden":g=m.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?m.tail=null:y.sibling=null;break;case"collapsed":y=m.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:C.sibling=null}}function Jn(m){var g=m.alternate!==null&&m.alternate.child===m.child,y=0,C=0;if(g)for(var L=m.child;L!==null;)y|=L.lanes|L.childLanes,C|=L.subtreeFlags&65011712,C|=L.flags&65011712,L.return=m,L=L.sibling;else for(L=m.child;L!==null;)y|=L.lanes|L.childLanes,C|=L.subtreeFlags,C|=L.flags,L.return=m,L=L.sibling;return m.subtreeFlags|=C,m.childLanes=y,g}function yte(m,g,y){var C=g.pendingProps;switch($1(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(g),null;case 1:return Jn(g),null;case 3:return y=g.stateNode,C=null,m!==null&&(C=m.memoizedState.cache),g.memoizedState.cache!==C&&(g.flags|=2048),Jo(Ia),ge(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(m===null||m.child===null)&&(gm(g)?al(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,z1())),Jn(g),null;case 26:var L=g.type,M=g.memoizedState;return m===null?(al(g),M!==null?(Jn(g),f5(g,M)):(Jn(g),EC(g,L,null,C,y))):M?M!==m.memoizedState?(al(g),Jn(g),f5(g,M)):(Jn(g),g.flags&=-16777217):(m=m.memoizedProps,m!==C&&al(g),Jn(g),EC(g,L,m,C,y)),null;case 27:if(Ne(g),y=Ce.current,L=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==C&&al(g);else{if(!C){if(g.stateNode===null)throw Error(s(166));return Jn(g),null}m=be.current,gm(g)?G3(g):(m=vM(L,C,y),g.stateNode=m,al(g))}return Jn(g),null;case 5:if(Ne(g),L=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==C&&al(g);else{if(!C){if(g.stateNode===null)throw Error(s(166));return Jn(g),null}if(M=be.current,gm(g))G3(g);else{var Y=cy(Ce.current);switch(M){case 1:M=Y.createElementNS("http://www.w3.org/2000/svg",L);break;case 2:M=Y.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;default:switch(L){case"svg":M=Y.createElementNS("http://www.w3.org/2000/svg",L);break;case"math":M=Y.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;case"script":M=Y.createElement("div"),M.innerHTML="<script><\/script>",M=M.removeChild(M.firstChild);break;case"select":M=typeof C.is=="string"?Y.createElement("select",{is:C.is}):Y.createElement("select"),C.multiple?M.multiple=!0:C.size&&(M.size=C.size);break;default:M=typeof C.is=="string"?Y.createElement(L,{is:C.is}):Y.createElement(L)}}M[re]=g,M[lt]=C;e:for(Y=g.child;Y!==null;){if(Y.tag===5||Y.tag===6)M.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===g)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===g)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}g.stateNode=M;e:switch(Ns(M,L,C),L){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&al(g)}}return Jn(g),EC(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,y),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==C&&al(g);else{if(typeof C!="string"&&g.stateNode===null)throw Error(s(166));if(m=Ce.current,gm(g)){if(m=g.stateNode,y=g.memoizedProps,C=null,L=bs,L!==null)switch(L.tag){case 27:case 5:C=L.memoizedProps}m[re]=g,m=!!(m.nodeValue===y||C!==null&&C.suppressHydrationWarning===!0||cM(m.nodeValue,y)),m||fc(g,!0)}else m=cy(m).createTextNode(C),m[re]=g,g.stateNode=m}return Jn(g),null;case 31:if(y=g.memoizedState,m===null||m.memoizedState!==null){if(C=gm(g),y!==null){if(m===null){if(!C)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[re]=g}else Pd(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Jn(g),m=!1}else y=z1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=y),m=!0;if(!m)return g.flags&256?(_r(g),g):(_r(g),null);if((g.flags&128)!==0)throw Error(s(558))}return Jn(g),null;case 13:if(C=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(L=gm(g),C!==null&&C.dehydrated!==null){if(m===null){if(!L)throw Error(s(318));if(L=g.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));L[re]=g}else Pd(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Jn(g),L=!1}else L=z1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=L),L=!0;if(!L)return g.flags&256?(_r(g),g):(_r(g),null)}return _r(g),(g.flags&128)!==0?(g.lanes=y,g):(y=C!==null,m=m!==null&&m.memoizedState!==null,y&&(C=g.child,L=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(L=C.alternate.memoizedState.cachePool.pool),M=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(M=C.memoizedState.cachePool.pool),M!==L&&(C.flags|=2048)),y!==m&&y&&(g.child.flags|=8192),Y0(g,g.updateQueue),Jn(g),null);case 4:return ge(),m===null&&XC(g.stateNode.containerInfo),Jn(g),null;case 10:return Jo(g.type),Jn(g),null;case 19:if(U(Ea),C=g.memoizedState,C===null)return Jn(g),null;if(L=(g.flags&128)!==0,M=C.rendering,M===null)if(L)Rh(C,!1);else{if(va!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(M=M0(m),M!==null){for(g.flags|=128,Rh(C,!1),m=M.updateQueue,g.updateQueue=m,Y0(g,m),g.subtreeFlags=0,m=y,y=g.child;y!==null;)U3(y,m),y=y.sibling;return je(Ea,Ea.current&1|2),bn&&Xo(g,C.treeForkCount),g.child}m=m.sibling}C.tail!==null&&Ee()>J0&&(g.flags|=128,L=!0,Rh(C,!1),g.lanes=4194304)}else{if(!L)if(m=M0(M),m!==null){if(g.flags|=128,L=!0,m=m.updateQueue,g.updateQueue=m,Y0(g,m),Rh(C,!0),C.tail===null&&C.tailMode==="hidden"&&!M.alternate&&!bn)return Jn(g),null}else 2*Ee()-C.renderingStartTime>J0&&y!==536870912&&(g.flags|=128,L=!0,Rh(C,!1),g.lanes=4194304);C.isBackwards?(M.sibling=g.child,g.child=M):(m=C.last,m!==null?m.sibling=M:g.child=M,C.last=M)}return C.tail!==null?(m=C.tail,C.rendering=m,C.tail=m.sibling,C.renderingStartTime=Ee(),m.sibling=null,y=Ea.current,je(Ea,L?y&1|2:y&1),bn&&Xo(g,C.treeForkCount),m):(Jn(g),null);case 22:case 23:return _r(g),Z1(),C=g.memoizedState!==null,m!==null?m.memoizedState!==null!==C&&(g.flags|=8192):C&&(g.flags|=8192),C?(y&536870912)!==0&&(g.flags&128)===0&&(Jn(g),g.subtreeFlags&6&&(g.flags|=8192)):Jn(g),y=g.updateQueue,y!==null&&Y0(g,y.retryQueue),y=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),C=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==y&&(g.flags|=2048),m!==null&&U(Md),null;case 24:return y=null,m!==null&&(y=m.memoizedState.cache),g.memoizedState.cache!==y&&(g.flags|=2048),Jo(Ia),Jn(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function bte(m,g){switch($1(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Jo(Ia),ge(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return Ne(g),null;case 31:if(g.memoizedState!==null){if(_r(g),g.alternate===null)throw Error(s(340));Pd()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(_r(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Pd()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return U(Ea),null;case 4:return ge(),null;case 10:return Jo(g.type),null;case 22:case 23:return _r(g),Z1(),m!==null&&U(Md),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return Jo(Ia),null;case 25:return null;default:return null}}function h5(m,g){switch($1(g),g.tag){case 3:Jo(Ia),ge();break;case 26:case 27:case 5:Ne(g);break;case 4:ge();break;case 31:g.memoizedState!==null&&_r(g);break;case 13:_r(g);break;case 19:U(Ea);break;case 10:Jo(g.type);break;case 22:case 23:_r(g),Z1(),m!==null&&U(Md);break;case 24:Jo(Ia)}}function zh(m,g){try{var y=g.updateQueue,C=y!==null?y.lastEffect:null;if(C!==null){var L=C.next;y=L;do{if((y.tag&m)===m){C=void 0;var M=y.create,Y=y.inst;C=M(),Y.destroy=C}y=y.next}while(y!==L)}}catch(we){Dn(g,g.return,we)}}function vc(m,g,y){try{var C=g.updateQueue,L=C!==null?C.lastEffect:null;if(L!==null){var M=L.next;C=M;do{if((C.tag&m)===m){var Y=C.inst,we=Y.destroy;if(we!==void 0){Y.destroy=void 0,L=g;var Ue=y,st=we;try{st()}catch(mt){Dn(L,Ue,mt)}}}C=C.next}while(C!==M)}}catch(mt){Dn(g,g.return,mt)}}function g5(m){var g=m.updateQueue;if(g!==null){var y=m.stateNode;try{rO(g,y)}catch(C){Dn(m,m.return,C)}}}function p5(m,g,y){y.props=Fd(m.type,m.memoizedProps),y.state=m.memoizedState;try{y.componentWillUnmount()}catch(C){Dn(m,g,C)}}function Fh(m,g){try{var y=m.ref;if(y!==null){switch(m.tag){case 26:case 27:case 5:var C=m.stateNode;break;case 30:C=m.stateNode;break;default:C=m.stateNode}typeof y=="function"?m.refCleanup=y(C):y.current=C}}catch(L){Dn(m,g,L)}}function to(m,g){var y=m.ref,C=m.refCleanup;if(y!==null)if(typeof C=="function")try{C()}catch(L){Dn(m,g,L)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(L){Dn(m,g,L)}else y.current=null}function x5(m){var g=m.type,y=m.memoizedProps,C=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":y.autoFocus&&C.focus();break e;case"img":y.src?C.src=y.src:y.srcSet&&(C.srcset=y.srcSet)}}catch(L){Dn(m,m.return,L)}}function kC(m,g,y){try{var C=m.stateNode;Ute(C,m.type,y,g),C[lt]=g}catch(L){Dn(m,m.return,L)}}function y5(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&Ac(m.type)||m.tag===4}function LC(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||y5(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&Ac(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function PC(m,g,y){var C=m.tag;if(C===5||C===6)m=m.stateNode,g?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(m,g):(g=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,g.appendChild(m),y=y._reactRootContainer,y!=null||g.onclick!==null||(g.onclick=Yo));else if(C!==4&&(C===27&&Ac(m.type)&&(y=m.stateNode,g=null),m=m.child,m!==null))for(PC(m,g,y),m=m.sibling;m!==null;)PC(m,g,y),m=m.sibling}function Q0(m,g,y){var C=m.tag;if(C===5||C===6)m=m.stateNode,g?y.insertBefore(m,g):y.appendChild(m);else if(C!==4&&(C===27&&Ac(m.type)&&(y=m.stateNode),m=m.child,m!==null))for(Q0(m,g,y),m=m.sibling;m!==null;)Q0(m,g,y),m=m.sibling}function b5(m){var g=m.stateNode,y=m.memoizedProps;try{for(var C=m.type,L=g.attributes;L.length;)g.removeAttributeNode(L[0]);Ns(g,C,y),g[re]=m,g[lt]=y}catch(M){Dn(m,m.return,M)}}var sl=!1,za=!1,DC=!1,v5=typeof WeakSet=="function"?WeakSet:Set,cs=null;function vte(m,g){if(m=m.containerInfo,eS=py,m=P3(m),_1(m)){if("selectionStart"in m)var y={start:m.selectionStart,end:m.selectionEnd};else e:{y=(y=m.ownerDocument)&&y.defaultView||window;var C=y.getSelection&&y.getSelection();if(C&&C.rangeCount!==0){y=C.anchorNode;var L=C.anchorOffset,M=C.focusNode;C=C.focusOffset;try{y.nodeType,M.nodeType}catch{y=null;break e}var Y=0,we=-1,Ue=-1,st=0,mt=0,xt=m,ot=null;t:for(;;){for(var dt;xt!==y||L!==0&&xt.nodeType!==3||(we=Y+L),xt!==M||C!==0&&xt.nodeType!==3||(Ue=Y+C),xt.nodeType===3&&(Y+=xt.nodeValue.length),(dt=xt.firstChild)!==null;)ot=xt,xt=dt;for(;;){if(xt===m)break t;if(ot===y&&++st===L&&(we=Y),ot===M&&++mt===C&&(Ue=Y),(dt=xt.nextSibling)!==null)break;xt=ot,ot=xt.parentNode}xt=dt}y=we===-1||Ue===-1?null:{start:we,end:Ue}}else y=null}y=y||{start:0,end:0}}else y=null;for(tS={focusedElem:m,selectionRange:y},py=!1,cs=g;cs!==null;)if(g=cs,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,cs=m;else for(;cs!==null;){switch(g=cs,M=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(y=0;y<m.length;y++)L=m[y],L.ref.impl=L.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&M!==null){m=void 0,y=g,L=M.memoizedProps,M=M.memoizedState,C=y.stateNode;try{var Mt=Fd(y.type,L);m=C.getSnapshotBeforeUpdate(Mt,M),C.__reactInternalSnapshotBeforeUpdate=m}catch(Vt){Dn(y,y.return,Vt)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,y=m.nodeType,y===9)sS(m);else if(y===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":sS(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,cs=m;break}cs=g.return}}function w5(m,g,y){var C=y.flags;switch(y.tag){case 0:case 11:case 15:il(m,y),C&4&&zh(5,y);break;case 1:if(il(m,y),C&4)if(m=y.stateNode,g===null)try{m.componentDidMount()}catch(Y){Dn(y,y.return,Y)}else{var L=Fd(y.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(L,g,m.__reactInternalSnapshotBeforeUpdate)}catch(Y){Dn(y,y.return,Y)}}C&64&&g5(y),C&512&&Fh(y,y.return);break;case 3:if(il(m,y),C&64&&(m=y.updateQueue,m!==null)){if(g=null,y.child!==null)switch(y.child.tag){case 27:case 5:g=y.child.stateNode;break;case 1:g=y.child.stateNode}try{rO(m,g)}catch(Y){Dn(y,y.return,Y)}}break;case 27:g===null&&C&4&&b5(y);case 26:case 5:il(m,y),g===null&&C&4&&x5(y),C&512&&Fh(y,y.return);break;case 12:il(m,y);break;case 31:il(m,y),C&4&&C5(m,y);break;case 13:il(m,y),C&4&&S5(m,y),C&64&&(m=y.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(y=Ete.bind(null,y),Qte(m,y))));break;case 22:if(C=y.memoizedState!==null||sl,!C){g=g!==null&&g.memoizedState!==null||za,L=sl;var M=za;sl=C,(za=g)&&!M?ol(m,y,(y.subtreeFlags&8772)!==0):il(m,y),sl=L,za=M}break;case 30:break;default:il(m,y)}}function N5(m){var g=m.alternate;g!==null&&(m.alternate=null,N5(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&z(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var ra=null,Js=!1;function rl(m,g,y){for(y=y.child;y!==null;)j5(m,g,y),y=y.sibling}function j5(m,g,y){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(Fe,y)}catch{}switch(y.tag){case 26:za||to(y,g),rl(m,g,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:za||to(y,g);var C=ra,L=Js;Ac(y.type)&&(ra=y.stateNode,Js=!1),rl(m,g,y),Qh(y.stateNode),ra=C,Js=L;break;case 5:za||to(y,g);case 6:if(C=ra,L=Js,ra=null,rl(m,g,y),ra=C,Js=L,ra!==null)if(Js)try{(ra.nodeType===9?ra.body:ra.nodeName==="HTML"?ra.ownerDocument.body:ra).removeChild(y.stateNode)}catch(M){Dn(y,g,M)}else try{ra.removeChild(y.stateNode)}catch(M){Dn(y,g,M)}break;case 18:ra!==null&&(Js?(m=ra,gM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,y.stateNode),Im(m)):gM(ra,y.stateNode));break;case 4:C=ra,L=Js,ra=y.stateNode.containerInfo,Js=!0,rl(m,g,y),ra=C,Js=L;break;case 0:case 11:case 14:case 15:vc(2,y,g),za||vc(4,y,g),rl(m,g,y);break;case 1:za||(to(y,g),C=y.stateNode,typeof C.componentWillUnmount=="function"&&p5(y,g,C)),rl(m,g,y);break;case 21:rl(m,g,y);break;case 22:za=(C=za)||y.memoizedState!==null,rl(m,g,y),za=C;break;default:rl(m,g,y)}}function C5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{Im(m)}catch(y){Dn(g,g.return,y)}}}function S5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Im(m)}catch(y){Dn(g,g.return,y)}}function wte(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new v5),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new v5),g;default:throw Error(s(435,m.tag))}}function K0(m,g){var y=wte(m);g.forEach(function(C){if(!y.has(C)){y.add(C);var L=kte.bind(null,m,C);C.then(L,L)}})}function er(m,g){var y=g.deletions;if(y!==null)for(var C=0;C<y.length;C++){var L=y[C],M=m,Y=g,we=Y;e:for(;we!==null;){switch(we.tag){case 27:if(Ac(we.type)){ra=we.stateNode,Js=!1;break e}break;case 5:ra=we.stateNode,Js=!1;break e;case 3:case 4:ra=we.stateNode.containerInfo,Js=!0;break e}we=we.return}if(ra===null)throw Error(s(160));j5(M,Y,L),ra=null,Js=!1,M=L.alternate,M!==null&&(M.return=null),L.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)_5(g,m),g=g.sibling}var ki=null;function _5(m,g){var y=m.alternate,C=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:er(g,m),tr(m),C&4&&(vc(3,m,m.return),zh(3,m),vc(5,m,m.return));break;case 1:er(g,m),tr(m),C&512&&(za||y===null||to(y,y.return)),C&64&&sl&&(m=m.updateQueue,m!==null&&(C=m.callbacks,C!==null&&(y=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=y===null?C:y.concat(C))));break;case 26:var L=ki;if(er(g,m),tr(m),C&512&&(za||y===null||to(y,y.return)),C&4){var M=y!==null?y.memoizedState:null;if(C=m.memoizedState,y===null)if(C===null)if(m.stateNode===null){e:{C=m.type,y=m.memoizedProps,L=L.ownerDocument||L;t:switch(C){case"title":M=L.getElementsByTagName("title")[0],(!M||M[F]||M[re]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=L.createElement(C),L.head.insertBefore(M,L.querySelector("head > title"))),Ns(M,C,y),M[re]=m,Ke(M),C=M;break e;case"link":var Y=_M("link","href",L).get(C+(y.href||""));if(Y){for(var we=0;we<Y.length;we++)if(M=Y[we],M.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&M.getAttribute("rel")===(y.rel==null?null:y.rel)&&M.getAttribute("title")===(y.title==null?null:y.title)&&M.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Y.splice(we,1);break t}}M=L.createElement(C),Ns(M,C,y),L.head.appendChild(M);break;case"meta":if(Y=_M("meta","content",L).get(C+(y.content||""))){for(we=0;we<Y.length;we++)if(M=Y[we],M.getAttribute("content")===(y.content==null?null:""+y.content)&&M.getAttribute("name")===(y.name==null?null:y.name)&&M.getAttribute("property")===(y.property==null?null:y.property)&&M.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&M.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Y.splice(we,1);break t}}M=L.createElement(C),Ns(M,C,y),L.head.appendChild(M);break;default:throw Error(s(468,C))}M[re]=m,Ke(M),C=M}m.stateNode=C}else AM(L,m.type,m.stateNode);else m.stateNode=SM(L,C,m.memoizedProps);else M!==C?(M===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):M.count--,C===null?AM(L,m.type,m.stateNode):SM(L,C,m.memoizedProps)):C===null&&m.stateNode!==null&&kC(m,m.memoizedProps,y.memoizedProps)}break;case 27:er(g,m),tr(m),C&512&&(za||y===null||to(y,y.return)),y!==null&&C&4&&kC(m,m.memoizedProps,y.memoizedProps);break;case 5:if(er(g,m),tr(m),C&512&&(za||y===null||to(y,y.return)),m.flags&32){L=m.stateNode;try{rm(L,"")}catch(Mt){Dn(m,m.return,Mt)}}C&4&&m.stateNode!=null&&(L=m.memoizedProps,kC(m,L,y!==null?y.memoizedProps:L)),C&1024&&(DC=!0);break;case 6:if(er(g,m),tr(m),C&4){if(m.stateNode===null)throw Error(s(162));C=m.memoizedProps,y=m.stateNode;try{y.nodeValue=C}catch(Mt){Dn(m,m.return,Mt)}}break;case 3:if(my=null,L=ki,ki=dy(g.containerInfo),er(g,m),ki=L,tr(m),C&4&&y!==null&&y.memoizedState.isDehydrated)try{Im(g.containerInfo)}catch(Mt){Dn(m,m.return,Mt)}DC&&(DC=!1,A5(m));break;case 4:C=ki,ki=dy(m.stateNode.containerInfo),er(g,m),tr(m),ki=C;break;case 12:er(g,m),tr(m);break;case 31:er(g,m),tr(m),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,K0(m,C)));break;case 13:er(g,m),tr(m),m.child.flags&8192&&m.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Z0=Ee()),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,K0(m,C)));break;case 22:L=m.memoizedState!==null;var Ue=y!==null&&y.memoizedState!==null,st=sl,mt=za;if(sl=st||L,za=mt||Ue,er(g,m),za=mt,sl=st,tr(m),C&8192)e:for(g=m.stateNode,g._visibility=L?g._visibility&-2:g._visibility|1,L&&(y===null||Ue||sl||za||Ud(m)),y=null,g=m;;){if(g.tag===5||g.tag===26){if(y===null){Ue=y=g;try{if(M=Ue.stateNode,L)Y=M.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{we=Ue.stateNode;var xt=Ue.memoizedProps.style,ot=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;we.style.display=ot==null||typeof ot=="boolean"?"":(""+ot).trim()}}catch(Mt){Dn(Ue,Ue.return,Mt)}}}else if(g.tag===6){if(y===null){Ue=g;try{Ue.stateNode.nodeValue=L?"":Ue.memoizedProps}catch(Mt){Dn(Ue,Ue.return,Mt)}}}else if(g.tag===18){if(y===null){Ue=g;try{var dt=Ue.stateNode;L?pM(dt,!0):pM(Ue.stateNode,!1)}catch(Mt){Dn(Ue,Ue.return,Mt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;y===g&&(y=null),g=g.return}y===g&&(y=null),g.sibling.return=g.return,g=g.sibling}C&4&&(C=m.updateQueue,C!==null&&(y=C.retryQueue,y!==null&&(C.retryQueue=null,K0(m,y))));break;case 19:er(g,m),tr(m),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,K0(m,C)));break;case 30:break;case 21:break;default:er(g,m),tr(m)}}function tr(m){var g=m.flags;if(g&2){try{for(var y,C=m.return;C!==null;){if(y5(C)){y=C;break}C=C.return}if(y==null)throw Error(s(160));switch(y.tag){case 27:var L=y.stateNode,M=LC(m);Q0(m,M,L);break;case 5:var Y=y.stateNode;y.flags&32&&(rm(Y,""),y.flags&=-33);var we=LC(m);Q0(m,we,Y);break;case 3:case 4:var Ue=y.stateNode.containerInfo,st=LC(m);PC(m,st,Ue);break;default:throw Error(s(161))}}catch(mt){Dn(m,m.return,mt)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function A5(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;A5(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function il(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)w5(m,g.alternate,g),g=g.sibling}function Ud(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:vc(4,g,g.return),Ud(g);break;case 1:to(g,g.return);var y=g.stateNode;typeof y.componentWillUnmount=="function"&&p5(g,g.return,y),Ud(g);break;case 27:Qh(g.stateNode);case 26:case 5:to(g,g.return),Ud(g);break;case 22:g.memoizedState===null&&Ud(g);break;case 30:Ud(g);break;default:Ud(g)}m=m.sibling}}function ol(m,g,y){for(y=y&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var C=g.alternate,L=m,M=g,Y=M.flags;switch(M.tag){case 0:case 11:case 15:ol(L,M,y),zh(4,M);break;case 1:if(ol(L,M,y),C=M,L=C.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(st){Dn(C,C.return,st)}if(C=M,L=C.updateQueue,L!==null){var we=C.stateNode;try{var Ue=L.shared.hiddenCallbacks;if(Ue!==null)for(L.shared.hiddenCallbacks=null,L=0;L<Ue.length;L++)sO(Ue[L],we)}catch(st){Dn(C,C.return,st)}}y&&Y&64&&g5(M),Fh(M,M.return);break;case 27:b5(M);case 26:case 5:ol(L,M,y),y&&C===null&&Y&4&&x5(M),Fh(M,M.return);break;case 12:ol(L,M,y);break;case 31:ol(L,M,y),y&&Y&4&&C5(L,M);break;case 13:ol(L,M,y),y&&Y&4&&S5(L,M);break;case 22:M.memoizedState===null&&ol(L,M,y),Fh(M,M.return);break;case 30:break;default:ol(L,M,y)}g=g.sibling}}function OC(m,g){var y=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==y&&(m!=null&&m.refCount++,y!=null&&_h(y))}function MC(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&_h(m))}function Li(m,g,y,C){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)T5(m,g,y,C),g=g.sibling}function T5(m,g,y,C){var L=g.flags;switch(g.tag){case 0:case 11:case 15:Li(m,g,y,C),L&2048&&zh(9,g);break;case 1:Li(m,g,y,C);break;case 3:Li(m,g,y,C),L&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&_h(m)));break;case 12:if(L&2048){Li(m,g,y,C),m=g.stateNode;try{var M=g.memoizedProps,Y=M.id,we=M.onPostCommit;typeof we=="function"&&we(Y,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(Ue){Dn(g,g.return,Ue)}}else Li(m,g,y,C);break;case 31:Li(m,g,y,C);break;case 13:Li(m,g,y,C);break;case 23:break;case 22:M=g.stateNode,Y=g.alternate,g.memoizedState!==null?M._visibility&2?Li(m,g,y,C):Uh(m,g):M._visibility&2?Li(m,g,y,C):(M._visibility|=2,Sm(m,g,y,C,(g.subtreeFlags&10256)!==0||!1)),L&2048&&OC(Y,g);break;case 24:Li(m,g,y,C),L&2048&&MC(g.alternate,g);break;default:Li(m,g,y,C)}}function Sm(m,g,y,C,L){for(L=L&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var M=m,Y=g,we=y,Ue=C,st=Y.flags;switch(Y.tag){case 0:case 11:case 15:Sm(M,Y,we,Ue,L),zh(8,Y);break;case 23:break;case 22:var mt=Y.stateNode;Y.memoizedState!==null?mt._visibility&2?Sm(M,Y,we,Ue,L):Uh(M,Y):(mt._visibility|=2,Sm(M,Y,we,Ue,L)),L&&st&2048&&OC(Y.alternate,Y);break;case 24:Sm(M,Y,we,Ue,L),L&&st&2048&&MC(Y.alternate,Y);break;default:Sm(M,Y,we,Ue,L)}g=g.sibling}}function Uh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var y=m,C=g,L=C.flags;switch(C.tag){case 22:Uh(y,C),L&2048&&OC(C.alternate,C);break;case 24:Uh(y,C),L&2048&&MC(C.alternate,C);break;default:Uh(y,C)}g=g.sibling}}var Bh=8192;function _m(m,g,y){if(m.subtreeFlags&Bh)for(m=m.child;m!==null;)E5(m,g,y),m=m.sibling}function E5(m,g,y){switch(m.tag){case 26:_m(m,g,y),m.flags&Bh&&m.memoizedState!==null&&one(y,ki,m.memoizedState,m.memoizedProps);break;case 5:_m(m,g,y);break;case 3:case 4:var C=ki;ki=dy(m.stateNode.containerInfo),_m(m,g,y),ki=C;break;case 22:m.memoizedState===null&&(C=m.alternate,C!==null&&C.memoizedState!==null?(C=Bh,Bh=16777216,_m(m,g,y),Bh=C):_m(m,g,y));break;default:_m(m,g,y)}}function k5(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Hh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var C=g[y];cs=C,P5(C,m)}k5(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)L5(m),m=m.sibling}function L5(m){switch(m.tag){case 0:case 11:case 15:Hh(m),m.flags&2048&&vc(9,m,m.return);break;case 3:Hh(m);break;case 12:Hh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,X0(m)):Hh(m);break;default:Hh(m)}}function X0(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var C=g[y];cs=C,P5(C,m)}k5(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:vc(8,g,g.return),X0(g);break;case 22:y=g.stateNode,y._visibility&2&&(y._visibility&=-3,X0(g));break;default:X0(g)}m=m.sibling}}function P5(m,g){for(;cs!==null;){var y=cs;switch(y.tag){case 0:case 11:case 15:vc(8,y,g);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var C=y.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:_h(y.memoizedState.cache)}if(C=y.child,C!==null)C.return=y,cs=C;else e:for(y=m;cs!==null;){C=cs;var L=C.sibling,M=C.return;if(N5(C),C===y){cs=null;break e}if(L!==null){L.return=M,cs=L;break e}cs=M}}}var Nte={getCacheForType:function(m){var g=vs(Ia),y=g.data.get(m);return y===void 0&&(y=m(),g.data.set(m,y)),y},cacheSignal:function(){return vs(Ia).controller.signal}},jte=typeof WeakMap=="function"?WeakMap:Map,An=0,qn=null,mn=null,gn=0,Pn=0,Ar=null,wc=!1,Am=!1,IC=!1,ll=0,va=0,Nc=0,Bd=0,$C=0,Tr=0,Tm=0,qh=null,nr=null,RC=!1,Z0=0,D5=0,J0=1/0,ey=null,jc=null,Ya=0,Cc=null,Em=null,cl=0,zC=0,FC=null,O5=null,Wh=0,UC=null;function Er(){return(An&2)!==0&&gn!==0?gn&-gn:G.T!==null?VC():Ht()}function M5(){if(Tr===0)if((gn&536870912)===0||bn){var m=X;X<<=1,(X&3932160)===0&&(X=262144),Tr=m}else Tr=536870912;return m=Sr.current,m!==null&&(m.flags|=32),Tr}function ar(m,g,y){(m===qn&&(Pn===2||Pn===9)||m.cancelPendingCommit!==null)&&(km(m,0),Sc(m,gn,Tr,!1)),xe(m,y),((An&2)===0||m!==qn)&&(m===qn&&((An&2)===0&&(Bd|=y),va===4&&Sc(m,gn,Tr,!1)),no(m))}function I5(m,g,y){if((An&6)!==0)throw Error(s(327));var C=!y&&(g&127)===0&&(g&m.expiredLanes)===0||oe(m,g),L=C?_te(m,g):HC(m,g,!0),M=C;do{if(L===0){Am&&!C&&Sc(m,g,0,!1);break}else{if(y=m.current.alternate,M&&!Cte(y)){L=HC(m,g,!1),M=!1;continue}if(L===2){if(M=g,m.errorRecoveryDisabledLanes&M)var Y=0;else Y=m.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){g=Y;e:{var we=m;L=qh;var Ue=we.current.memoizedState.isDehydrated;if(Ue&&(km(we,Y).flags|=256),Y=HC(we,Y,!1),Y!==2){if(IC&&!Ue){we.errorRecoveryDisabledLanes|=M,Bd|=M,L=4;break e}M=nr,nr=L,M!==null&&(nr===null?nr=M:nr.push.apply(nr,M))}L=Y}if(M=!1,L!==2)continue}}if(L===1){km(m,0),Sc(m,g,0,!0);break}e:{switch(C=m,M=L,M){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:Sc(C,g,Tr,!wc);break e;case 2:nr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(L=Z0+300-Ee(),10<L)){if(Sc(C,g,Tr,!wc),B(C,0,!0)!==0)break e;cl=g,C.timeoutHandle=fM($5.bind(null,C,y,nr,ey,RC,g,Tr,Bd,Tm,wc,M,"Throttled",-0,0),L);break e}$5(C,y,nr,ey,RC,g,Tr,Bd,Tm,wc,M,null,-0,0)}}break}while(!0);no(m)}function $5(m,g,y,C,L,M,Y,we,Ue,st,mt,xt,ot,dt){if(m.timeoutHandle=-1,xt=g.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yo},E5(g,M,xt);var Mt=(M&62914560)===M?Z0-Ee():(M&4194048)===M?D5-Ee():0;if(Mt=lne(xt,Mt),Mt!==null){cl=M,m.cancelPendingCommit=Mt(W5.bind(null,m,g,M,y,C,L,Y,we,Ue,mt,xt,null,ot,dt)),Sc(m,M,Y,!st);return}}W5(m,g,M,y,C,L,Y,we,Ue)}function Cte(m){for(var g=m;;){var y=g.tag;if((y===0||y===11||y===15)&&g.flags&16384&&(y=g.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var C=0;C<y.length;C++){var L=y[C],M=L.getSnapshot;L=L.value;try{if(!jr(M(),L))return!1}catch{return!1}}if(y=g.child,g.subtreeFlags&16384&&y!==null)y.return=g,g=y;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Sc(m,g,y,C){g&=~$C,g&=~Bd,m.suspendedLanes|=g,m.pingedLanes&=~g,C&&(m.warmLanes|=g),C=m.expirationTimes;for(var L=g;0<L;){var M=31-it(L),Y=1<<M;C[M]=-1,L&=~Y}y!==0&&qe(m,y,g)}function ty(){return(An&6)===0?(Gh(0),!1):!0}function BC(){if(mn!==null){if(Pn===0)var m=mn.return;else m=mn,Zo=Dd=null,sC(m),vm=null,Th=0,m=mn;for(;m!==null;)h5(m.alternate,m),m=m.return;mn=null}}function km(m,g){var y=m.timeoutHandle;y!==-1&&(m.timeoutHandle=-1,qte(y)),y=m.cancelPendingCommit,y!==null&&(m.cancelPendingCommit=null,y()),cl=0,BC(),qn=m,mn=y=Ko(m.current,null),gn=g,Pn=0,Ar=null,wc=!1,Am=oe(m,g),IC=!1,Tm=Tr=$C=Bd=Nc=va=0,nr=qh=null,RC=!1,(g&8)!==0&&(g|=g&32);var C=m.entangledLanes;if(C!==0)for(m=m.entanglements,C&=g;0<C;){var L=31-it(C),M=1<<L;g|=m[L],C&=~M}return ll=g,N0(),y}function R5(m,g){an=null,G.H=Ih,g===bm||g===k0?(g=eO(),Pn=3):g===G1?(g=eO(),Pn=4):Pn=g===vC?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Ar=g,mn===null&&(va=1,q0(m,Qr(g,m.current)))}function z5(){var m=Sr.current;return m===null?!0:(gn&4194048)===gn?Jr===null:(gn&62914560)===gn||(gn&536870912)!==0?m===Jr:!1}function F5(){var m=G.H;return G.H=Ih,m===null?Ih:m}function U5(){var m=G.A;return G.A=Nte,m}function ny(){va=4,wc||(gn&4194048)!==gn&&Sr.current!==null||(Am=!0),(Nc&134217727)===0&&(Bd&134217727)===0||qn===null||Sc(qn,gn,Tr,!1)}function HC(m,g,y){var C=An;An|=2;var L=F5(),M=U5();(qn!==m||gn!==g)&&(ey=null,km(m,g)),g=!1;var Y=va;e:do try{if(Pn!==0&&mn!==null){var we=mn,Ue=Ar;switch(Pn){case 8:BC(),Y=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(g=!0);var st=Pn;if(Pn=0,Ar=null,Lm(m,we,Ue,st),y&&Am){Y=0;break e}break;default:st=Pn,Pn=0,Ar=null,Lm(m,we,Ue,st)}}Ste(),Y=va;break}catch(mt){R5(m,mt)}while(!0);return g&&m.shellSuspendCounter++,Zo=Dd=null,An=C,G.H=L,G.A=M,mn===null&&(qn=null,gn=0,N0()),Y}function Ste(){for(;mn!==null;)B5(mn)}function _te(m,g){var y=An;An|=2;var C=F5(),L=U5();qn!==m||gn!==g?(ey=null,J0=Ee()+500,km(m,g)):Am=oe(m,g);e:do try{if(Pn!==0&&mn!==null){g=mn;var M=Ar;t:switch(Pn){case 1:Pn=0,Ar=null,Lm(m,g,M,1);break;case 2:case 9:if(Z3(M)){Pn=0,Ar=null,H5(g);break}g=function(){Pn!==2&&Pn!==9||qn!==m||(Pn=7),no(m)},M.then(g,g);break e;case 3:Pn=7;break e;case 4:Pn=5;break e;case 7:Z3(M)?(Pn=0,Ar=null,H5(g)):(Pn=0,Ar=null,Lm(m,g,M,7));break;case 5:var Y=null;switch(mn.tag){case 26:Y=mn.memoizedState;case 5:case 27:var we=mn;if(Y?TM(Y):we.stateNode.complete){Pn=0,Ar=null;var Ue=we.sibling;if(Ue!==null)mn=Ue;else{var st=we.return;st!==null?(mn=st,ay(st)):mn=null}break t}}Pn=0,Ar=null,Lm(m,g,M,5);break;case 6:Pn=0,Ar=null,Lm(m,g,M,6);break;case 8:BC(),va=6;break e;default:throw Error(s(462))}}Ate();break}catch(mt){R5(m,mt)}while(!0);return Zo=Dd=null,G.H=C,G.A=L,An=y,mn!==null?0:(qn=null,gn=0,N0(),va)}function Ate(){for(;mn!==null&&!ne();)B5(mn)}function B5(m){var g=m5(m.alternate,m,ll);m.memoizedProps=m.pendingProps,g===null?ay(m):mn=g}function H5(m){var g=m,y=g.alternate;switch(g.tag){case 15:case 0:g=i5(y,g,g.pendingProps,g.type,void 0,gn);break;case 11:g=i5(y,g,g.pendingProps,g.type.render,g.ref,gn);break;case 5:sC(g);default:h5(y,g),g=mn=U3(g,ll),g=m5(y,g,ll)}m.memoizedProps=m.pendingProps,g===null?ay(m):mn=g}function Lm(m,g,y,C){Zo=Dd=null,sC(g),vm=null,Th=0;var L=g.return;try{if(gte(m,L,g,y,gn)){va=1,q0(m,Qr(y,m.current)),mn=null;return}}catch(M){if(L!==null)throw mn=L,M;va=1,q0(m,Qr(y,m.current)),mn=null;return}g.flags&32768?(bn||C===1?m=!0:Am||(gn&536870912)!==0?m=!1:(wc=m=!0,(C===2||C===9||C===3||C===6)&&(C=Sr.current,C!==null&&C.tag===13&&(C.flags|=16384))),q5(g,m)):ay(g)}function ay(m){var g=m;do{if((g.flags&32768)!==0){q5(g,wc);return}m=g.return;var y=yte(g.alternate,g,ll);if(y!==null){mn=y;return}if(g=g.sibling,g!==null){mn=g;return}mn=g=m}while(g!==null);va===0&&(va=5)}function q5(m,g){do{var y=bte(m.alternate,m);if(y!==null){y.flags&=32767,mn=y;return}if(y=m.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!g&&(m=m.sibling,m!==null)){mn=m;return}mn=m=y}while(m!==null);va=6,mn=null}function W5(m,g,y,C,L,M,Y,we,Ue){m.cancelPendingCommit=null;do sy();while(Ya!==0);if((An&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if(M=g.lanes|g.childLanes,M|=L1,fe(m,y,M,Y,we,Ue),m===qn&&(mn=qn=null,gn=0),Em=g,Cc=m,cl=y,zC=M,FC=L,O5=C,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,Lte($e,function(){return K5(),null})):(m.callbackNode=null,m.callbackPriority=0),C=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||C){C=G.T,G.T=null,L=K.p,K.p=2,Y=An,An|=4;try{vte(m,g,y)}finally{An=Y,K.p=L,G.T=C}}Ya=1,G5(),V5(),Y5()}}function G5(){if(Ya===1){Ya=0;var m=Cc,g=Em,y=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||y){y=G.T,G.T=null;var C=K.p;K.p=2;var L=An;An|=4;try{_5(g,m);var M=tS,Y=P3(m.containerInfo),we=M.focusedElem,Ue=M.selectionRange;if(Y!==we&&we&&we.ownerDocument&&L3(we.ownerDocument.documentElement,we)){if(Ue!==null&&_1(we)){var st=Ue.start,mt=Ue.end;if(mt===void 0&&(mt=st),"selectionStart"in we)we.selectionStart=st,we.selectionEnd=Math.min(mt,we.value.length);else{var xt=we.ownerDocument||document,ot=xt&&xt.defaultView||window;if(ot.getSelection){var dt=ot.getSelection(),Mt=we.textContent.length,Vt=Math.min(Ue.start,Mt),Un=Ue.end===void 0?Vt:Math.min(Ue.end,Mt);!dt.extend&&Vt>Un&&(Y=Un,Un=Vt,Vt=Y);var Xe=k3(we,Vt),Ge=k3(we,Un);if(Xe&&Ge&&(dt.rangeCount!==1||dt.anchorNode!==Xe.node||dt.anchorOffset!==Xe.offset||dt.focusNode!==Ge.node||dt.focusOffset!==Ge.offset)){var nt=xt.createRange();nt.setStart(Xe.node,Xe.offset),dt.removeAllRanges(),Vt>Un?(dt.addRange(nt),dt.extend(Ge.node,Ge.offset)):(nt.setEnd(Ge.node,Ge.offset),dt.addRange(nt))}}}}for(xt=[],dt=we;dt=dt.parentNode;)dt.nodeType===1&&xt.push({element:dt,left:dt.scrollLeft,top:dt.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<xt.length;we++){var gt=xt[we];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}py=!!eS,tS=eS=null}finally{An=L,K.p=C,G.T=y}}m.current=g,Ya=2}}function V5(){if(Ya===2){Ya=0;var m=Cc,g=Em,y=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||y){y=G.T,G.T=null;var C=K.p;K.p=2;var L=An;An|=4;try{w5(m,g.alternate,g)}finally{An=L,K.p=C,G.T=y}}Ya=3}}function Y5(){if(Ya===4||Ya===3){Ya=0,se();var m=Cc,g=Em,y=cl,C=O5;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ya=5:(Ya=0,Em=Cc=null,Q5(m,m.pendingLanes));var L=m.pendingLanes;if(L===0&&(jc=null),St(y),g=g.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(Fe,g,void 0,(g.current.flags&128)===128)}catch{}if(C!==null){g=G.T,L=K.p,K.p=2,G.T=null;try{for(var M=m.onRecoverableError,Y=0;Y<C.length;Y++){var we=C[Y];M(we.value,{componentStack:we.stack})}}finally{G.T=g,K.p=L}}(cl&3)!==0&&sy(),no(m),L=m.pendingLanes,(y&261930)!==0&&(L&42)!==0?m===UC?Wh++:(Wh=0,UC=m):Wh=0,Gh(0)}}function Q5(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,_h(g)))}function sy(){return G5(),V5(),Y5(),K5()}function K5(){if(Ya!==5)return!1;var m=Cc,g=zC;zC=0;var y=St(cl),C=G.T,L=K.p;try{K.p=32>y?32:y,G.T=null,y=FC,FC=null;var M=Cc,Y=cl;if(Ya=0,Em=Cc=null,cl=0,(An&6)!==0)throw Error(s(331));var we=An;if(An|=4,L5(M.current),T5(M,M.current,Y,y),An=we,Gh(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(Fe,M)}catch{}return!0}finally{K.p=L,G.T=C,Q5(m,g)}}function X5(m,g,y){g=Qr(y,g),g=bC(m.stateNode,g,2),m=xc(m,g,2),m!==null&&(xe(m,2),no(m))}function Dn(m,g,y){if(m.tag===3)X5(m,m,y);else for(;g!==null;){if(g.tag===3){X5(g,m,y);break}else if(g.tag===1){var C=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(jc===null||!jc.has(C))){m=Qr(y,m),y=ZO(2),C=xc(g,y,2),C!==null&&(JO(y,C,g,m),xe(C,2),no(C));break}}g=g.return}}function qC(m,g,y){var C=m.pingCache;if(C===null){C=m.pingCache=new jte;var L=new Set;C.set(g,L)}else L=C.get(g),L===void 0&&(L=new Set,C.set(g,L));L.has(y)||(IC=!0,L.add(y),m=Tte.bind(null,m,g,y),g.then(m,m))}function Tte(m,g,y){var C=m.pingCache;C!==null&&C.delete(g),m.pingedLanes|=m.suspendedLanes&y,m.warmLanes&=~y,qn===m&&(gn&y)===y&&(va===4||va===3&&(gn&62914560)===gn&&300>Ee()-Z0?(An&2)===0&&km(m,0):$C|=y,Tm===gn&&(Tm=0)),no(m)}function Z5(m,g){g===0&&(g=ie()),m=kd(m,g),m!==null&&(xe(m,g),no(m))}function Ete(m){var g=m.memoizedState,y=0;g!==null&&(y=g.retryLane),Z5(m,y)}function kte(m,g){var y=0;switch(m.tag){case 31:case 13:var C=m.stateNode,L=m.memoizedState;L!==null&&(y=L.retryLane);break;case 19:C=m.stateNode;break;case 22:C=m.stateNode._retryCache;break;default:throw Error(s(314))}C!==null&&C.delete(g),Z5(m,y)}function Lte(m,g){return et(m,g)}var ry=null,Pm=null,WC=!1,iy=!1,GC=!1,_c=0;function no(m){m!==Pm&&m.next===null&&(Pm===null?ry=Pm=m:Pm=Pm.next=m),iy=!0,WC||(WC=!0,Dte())}function Gh(m,g){if(!GC&&iy){GC=!0;do for(var y=!1,C=ry;C!==null;){if(m!==0){var L=C.pendingLanes;if(L===0)var M=0;else{var Y=C.suspendedLanes,we=C.pingedLanes;M=(1<<31-it(42|m)+1)-1,M&=L&~(Y&~we),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(y=!0,nM(C,M))}else M=gn,M=B(C,C===qn?M:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(M&3)===0||oe(C,M)||(y=!0,nM(C,M));C=C.next}while(y);GC=!1}}function Pte(){J5()}function J5(){iy=WC=!1;var m=0;_c!==0&&Hte()&&(m=_c);for(var g=Ee(),y=null,C=ry;C!==null;){var L=C.next,M=eM(C,g);M===0?(C.next=null,y===null?ry=L:y.next=L,L===null&&(Pm=y)):(y=C,(m!==0||(M&3)!==0)&&(iy=!0)),C=L}Ya!==0&&Ya!==5||Gh(m),_c!==0&&(_c=0)}function eM(m,g){for(var y=m.suspendedLanes,C=m.pingedLanes,L=m.expirationTimes,M=m.pendingLanes&-62914561;0<M;){var Y=31-it(M),we=1<<Y,Ue=L[Y];Ue===-1?((we&y)===0||(we&C)!==0)&&(L[Y]=ue(we,g)):Ue<=g&&(m.expiredLanes|=we),M&=~we}if(g=qn,y=gn,y=B(m,m===g?y:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),C=m.callbackNode,y===0||m===g&&(Pn===2||Pn===9)||m.cancelPendingCommit!==null)return C!==null&&C!==null&&V(C),m.callbackNode=null,m.callbackPriority=0;if((y&3)===0||oe(m,y)){if(g=y&-y,g===m.callbackPriority)return g;switch(C!==null&&V(C),St(y)){case 2:case 8:y=Be;break;case 32:y=$e;break;case 268435456:y=ut;break;default:y=$e}return C=tM.bind(null,m),y=et(y,C),m.callbackPriority=g,m.callbackNode=y,g}return C!==null&&C!==null&&V(C),m.callbackPriority=2,m.callbackNode=null,2}function tM(m,g){if(Ya!==0&&Ya!==5)return m.callbackNode=null,m.callbackPriority=0,null;var y=m.callbackNode;if(sy()&&m.callbackNode!==y)return null;var C=gn;return C=B(m,m===qn?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),C===0?null:(I5(m,C,g),eM(m,Ee()),m.callbackNode!=null&&m.callbackNode===y?tM.bind(null,m):null)}function nM(m,g){if(sy())return null;I5(m,g,!0)}function Dte(){Wte(function(){(An&6)!==0?et(pe,Pte):J5()})}function VC(){if(_c===0){var m=xm;m===0&&(m=ce,ce<<=1,(ce&261888)===0&&(ce=256)),_c=m}return _c}function aM(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:h0(""+m)}function sM(m,g){var y=g.ownerDocument.createElement("input");return y.name=g.name,y.value=g.value,m.id&&y.setAttribute("form",m.id),g.parentNode.insertBefore(y,g),m=new FormData(m),y.parentNode.removeChild(y),m}function Ote(m,g,y,C,L){if(g==="submit"&&y&&y.stateNode===L){var M=aM((L[lt]||null).action),Y=C.submitter;Y&&(g=(g=Y[lt]||null)?aM(g.formAction):Y.getAttribute("formAction"),g!==null&&(M=g,Y=null));var we=new y0("action","action",null,C,L);m.push({event:we,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(_c!==0){var Ue=Y?sM(L,Y):new FormData(L);fC(y,{pending:!0,data:Ue,method:L.method,action:M},null,Ue)}}else typeof M=="function"&&(we.preventDefault(),Ue=Y?sM(L,Y):new FormData(L),fC(y,{pending:!0,data:Ue,method:L.method,action:M},M,Ue))},currentTarget:L}]})}}for(var YC=0;YC<k1.length;YC++){var QC=k1[YC],Mte=QC.toLowerCase(),Ite=QC[0].toUpperCase()+QC.slice(1);Ei(Mte,"on"+Ite)}Ei(M3,"onAnimationEnd"),Ei(I3,"onAnimationIteration"),Ei($3,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Zee,"onTransitionRun"),Ei(Jee,"onTransitionStart"),Ei(ete,"onTransitionCancel"),Ei(R3,"onTransitionEnd"),sa("onMouseEnter",["mouseout","mouseover"]),sa("onMouseLeave",["mouseout","mouseover"]),sa("onPointerEnter",["pointerout","pointerover"]),sa("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$te=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vh));function rM(m,g){g=(g&4)!==0;for(var y=0;y<m.length;y++){var C=m[y],L=C.event;C=C.listeners;e:{var M=void 0;if(g)for(var Y=C.length-1;0<=Y;Y--){var we=C[Y],Ue=we.instance,st=we.currentTarget;if(we=we.listener,Ue!==M&&L.isPropagationStopped())break e;M=we,L.currentTarget=st;try{M(L)}catch(mt){w0(mt)}L.currentTarget=null,M=Ue}else for(Y=0;Y<C.length;Y++){if(we=C[Y],Ue=we.instance,st=we.currentTarget,we=we.listener,Ue!==M&&L.isPropagationStopped())break e;M=we,L.currentTarget=st;try{M(L)}catch(mt){w0(mt)}L.currentTarget=null,M=Ue}}}}function fn(m,g){var y=g[kt];y===void 0&&(y=g[kt]=new Set);var C=m+"__bubble";y.has(C)||(iM(g,m,2,!1),y.add(C))}function KC(m,g,y){var C=0;g&&(C|=4),iM(y,m,C,g)}var oy="_reactListening"+Math.random().toString(36).slice(2);function XC(m){if(!m[oy]){m[oy]=!0,At.forEach(function(y){y!=="selectionchange"&&($te.has(y)||KC(y,!1,m),KC(y,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[oy]||(g[oy]=!0,KC("selectionchange",!1,g))}}function iM(m,g,y,C){switch(MM(g)){case 2:var L=une;break;case 8:L=mne;break;default:L=mS}y=L.bind(null,g,y,m),L=void 0,!x1||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(L=!0),C?L!==void 0?m.addEventListener(g,y,{capture:!0,passive:L}):m.addEventListener(g,y,!0):L!==void 0?m.addEventListener(g,y,{passive:L}):m.addEventListener(g,y,!1)}function ZC(m,g,y,C,L){var M=C;if((g&1)===0&&(g&2)===0&&C!==null)e:for(;;){if(C===null)return;var Y=C.tag;if(Y===3||Y===4){var we=C.stateNode.containerInfo;if(we===L)break;if(Y===4)for(Y=C.return;Y!==null;){var Ue=Y.tag;if((Ue===3||Ue===4)&&Y.stateNode.containerInfo===L)return;Y=Y.return}for(;we!==null;){if(Y=me(we),Y===null)return;if(Ue=Y.tag,Ue===5||Ue===6||Ue===26||Ue===27){C=M=Y;continue e}we=we.parentNode}}C=C.return}u3(function(){var st=M,mt=g1(y),xt=[];e:{var ot=z3.get(m);if(ot!==void 0){var dt=y0,Mt=m;switch(m){case"keypress":if(p0(y)===0)break e;case"keydown":case"keyup":dt=kee;break;case"focusin":Mt="focus",dt=w1;break;case"focusout":Mt="blur",dt=w1;break;case"beforeblur":case"afterblur":dt=w1;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=h3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=yee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Dee;break;case M3:case I3:case $3:dt=wee;break;case R3:dt=Mee;break;case"scroll":case"scrollend":dt=pee;break;case"wheel":dt=$ee;break;case"copy":case"cut":case"paste":dt=jee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=p3;break;case"toggle":case"beforetoggle":dt=zee}var Vt=(g&4)!==0,Un=!Vt&&(m==="scroll"||m==="scrollend"),Xe=Vt?ot!==null?ot+"Capture":null:ot;Vt=[];for(var Ge=st,nt;Ge!==null;){var gt=Ge;if(nt=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||nt===null||Xe===null||(gt=gh(Ge,Xe),gt!=null&&Vt.push(Yh(Ge,gt,nt))),Un)break;Ge=Ge.return}0<Vt.length&&(ot=new dt(ot,Mt,null,y,mt),xt.push({event:ot,listeners:Vt}))}}if((g&7)===0){e:{if(ot=m==="mouseover"||m==="pointerover",dt=m==="mouseout"||m==="pointerout",ot&&y!==h1&&(Mt=y.relatedTarget||y.fromElement)&&(me(Mt)||Mt[zt]))break e;if((dt||ot)&&(ot=mt.window===mt?mt:(ot=mt.ownerDocument)?ot.defaultView||ot.parentWindow:window,dt?(Mt=y.relatedTarget||y.toElement,dt=st,Mt=Mt?me(Mt):null,Mt!==null&&(Un=i(Mt),Vt=Mt.tag,Mt!==Un||Vt!==5&&Vt!==27&&Vt!==6)&&(Mt=null)):(dt=null,Mt=st),dt!==Mt)){if(Vt=h3,gt="onMouseLeave",Xe="onMouseEnter",Ge="mouse",(m==="pointerout"||m==="pointerover")&&(Vt=p3,gt="onPointerLeave",Xe="onPointerEnter",Ge="pointer"),Un=dt==null?ot:Re(dt),nt=Mt==null?ot:Re(Mt),ot=new Vt(gt,Ge+"leave",dt,y,mt),ot.target=Un,ot.relatedTarget=nt,gt=null,me(mt)===st&&(Vt=new Vt(Xe,Ge+"enter",Mt,y,mt),Vt.target=nt,Vt.relatedTarget=Un,gt=Vt),Un=gt,dt&&Mt)t:{for(Vt=Rte,Xe=dt,Ge=Mt,nt=0,gt=Xe;gt;gt=Vt(gt))nt++;gt=0;for(var qt=Ge;qt;qt=Vt(qt))gt++;for(;0<nt-gt;)Xe=Vt(Xe),nt--;for(;0<gt-nt;)Ge=Vt(Ge),gt--;for(;nt--;){if(Xe===Ge||Ge!==null&&Xe===Ge.alternate){Vt=Xe;break t}Xe=Vt(Xe),Ge=Vt(Ge)}Vt=null}else Vt=null;dt!==null&&oM(xt,ot,dt,Vt,!1),Mt!==null&&Un!==null&&oM(xt,Un,Mt,Vt,!0)}}e:{if(ot=st?Re(st):window,dt=ot.nodeName&&ot.nodeName.toLowerCase(),dt==="select"||dt==="input"&&ot.type==="file")var Cn=C3;else if(N3(ot))if(S3)Cn=Qee;else{Cn=Vee;var Ft=Gee}else dt=ot.nodeName,!dt||dt.toLowerCase()!=="input"||ot.type!=="checkbox"&&ot.type!=="radio"?st&&f1(st.elementType)&&(Cn=C3):Cn=Yee;if(Cn&&(Cn=Cn(m,st))){j3(xt,Cn,y,mt);break e}Ft&&Ft(m,ot,st),m==="focusout"&&st&&ot.type==="number"&&st.memoizedProps.value!=null&&m1(ot,"number",ot.value)}switch(Ft=st?Re(st):window,m){case"focusin":(N3(Ft)||Ft.contentEditable==="true")&&(cm=Ft,A1=st,jh=null);break;case"focusout":jh=A1=cm=null;break;case"mousedown":T1=!0;break;case"contextmenu":case"mouseup":case"dragend":T1=!1,D3(xt,y,mt);break;case"selectionchange":if(Xee)break;case"keydown":case"keyup":D3(xt,y,mt)}var ln;if(j1)e:{switch(m){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else lm?v3(m,y)&&(pn="onCompositionEnd"):m==="keydown"&&y.keyCode===229&&(pn="onCompositionStart");pn&&(x3&&y.locale!=="ko"&&(lm||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&lm&&(ln=m3()):(dc=mt,y1="value"in dc?dc.value:dc.textContent,lm=!0)),Ft=ly(st,pn),0<Ft.length&&(pn=new g3(pn,m,null,y,mt),xt.push({event:pn,listeners:Ft}),ln?pn.data=ln:(ln=w3(y),ln!==null&&(pn.data=ln)))),(ln=Uee?Bee(m,y):Hee(m,y))&&(pn=ly(st,"onBeforeInput"),0<pn.length&&(Ft=new g3("onBeforeInput","beforeinput",null,y,mt),xt.push({event:Ft,listeners:pn}),Ft.data=ln)),Ote(xt,m,st,y,mt)}rM(xt,g)})}function Yh(m,g,y){return{instance:m,listener:g,currentTarget:y}}function ly(m,g){for(var y=g+"Capture",C=[];m!==null;){var L=m,M=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||M===null||(L=gh(m,y),L!=null&&C.unshift(Yh(m,L,M)),L=gh(m,g),L!=null&&C.push(Yh(m,L,M))),m.tag===3)return C;m=m.return}return[]}function Rte(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function oM(m,g,y,C,L){for(var M=g._reactName,Y=[];y!==null&&y!==C;){var we=y,Ue=we.alternate,st=we.stateNode;if(we=we.tag,Ue!==null&&Ue===C)break;we!==5&&we!==26&&we!==27||st===null||(Ue=st,L?(st=gh(y,M),st!=null&&Y.unshift(Yh(y,st,Ue))):L||(st=gh(y,M),st!=null&&Y.push(Yh(y,st,Ue)))),y=y.return}Y.length!==0&&m.push({event:g,listeners:Y})}var zte=/\r\n?/g,Fte=/\u0000|\uFFFD/g;function lM(m){return(typeof m=="string"?m:""+m).replace(zte,`
`).replace(Fte,"")}function cM(m,g){return g=lM(g),lM(m)===g}function Fn(m,g,y,C,L,M){switch(y){case"children":typeof C=="string"?g==="body"||g==="textarea"&&C===""||rm(m,C):(typeof C=="number"||typeof C=="bigint")&&g!=="body"&&rm(m,""+C);break;case"className":m0(m,"class",C);break;case"tabIndex":m0(m,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":m0(m,y,C);break;case"style":c3(m,C,M);break;case"data":if(g!=="object"){m0(m,"data",C);break}case"src":case"href":if(C===""&&(g!=="a"||y!=="href")){m.removeAttribute(y);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){m.removeAttribute(y);break}C=h0(""+C),m.setAttribute(y,C);break;case"action":case"formAction":if(typeof C=="function"){m.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(y==="formAction"?(g!=="input"&&Fn(m,g,"name",L.name,L,null),Fn(m,g,"formEncType",L.formEncType,L,null),Fn(m,g,"formMethod",L.formMethod,L,null),Fn(m,g,"formTarget",L.formTarget,L,null)):(Fn(m,g,"encType",L.encType,L,null),Fn(m,g,"method",L.method,L,null),Fn(m,g,"target",L.target,L,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){m.removeAttribute(y);break}C=h0(""+C),m.setAttribute(y,C);break;case"onClick":C!=null&&(m.onclick=Yo);break;case"onScroll":C!=null&&fn("scroll",m);break;case"onScrollEnd":C!=null&&fn("scrollend",m);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(s(61));if(y=C.__html,y!=null){if(L.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"multiple":m.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":m.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){m.removeAttribute("xlink:href");break}y=h0(""+C),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(y,""+C):m.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(y,""):m.removeAttribute(y);break;case"capture":case"download":C===!0?m.setAttribute(y,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(y,C):m.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?m.setAttribute(y,C):m.removeAttribute(y);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?m.removeAttribute(y):m.setAttribute(y,C);break;case"popover":fn("beforetoggle",m),fn("toggle",m),u0(m,"popover",C);break;case"xlinkActuate":Vo(m,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":Vo(m,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":Vo(m,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":Vo(m,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":Vo(m,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":Vo(m,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":u0(m,"is",C);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=hee.get(y)||y,u0(m,y,C))}}function JC(m,g,y,C,L,M){switch(y){case"style":c3(m,C,M);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(s(61));if(y=C.__html,y!=null){if(L.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"children":typeof C=="string"?rm(m,C):(typeof C=="number"||typeof C=="bigint")&&rm(m,""+C);break;case"onScroll":C!=null&&fn("scroll",m);break;case"onScrollEnd":C!=null&&fn("scrollend",m);break;case"onClick":C!=null&&(m.onclick=Yo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ct.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(L=y.endsWith("Capture"),g=y.slice(2,L?y.length-7:void 0),M=m[lt]||null,M=M!=null?M[y]:null,typeof M=="function"&&m.removeEventListener(g,M,L),typeof C=="function")){typeof M!="function"&&M!==null&&(y in m?m[y]=null:m.hasAttribute(y)&&m.removeAttribute(y)),m.addEventListener(g,C,L);break e}y in m?m[y]=C:C===!0?m.setAttribute(y,""):u0(m,y,C)}}}function Ns(m,g,y){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fn("error",m),fn("load",m);var C=!1,L=!1,M;for(M in y)if(y.hasOwnProperty(M)){var Y=y[M];if(Y!=null)switch(M){case"src":C=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Fn(m,g,M,Y,y,null)}}L&&Fn(m,g,"srcSet",y.srcSet,y,null),C&&Fn(m,g,"src",y.src,y,null);return;case"input":fn("invalid",m);var we=M=Y=L=null,Ue=null,st=null;for(C in y)if(y.hasOwnProperty(C)){var mt=y[C];if(mt!=null)switch(C){case"name":L=mt;break;case"type":Y=mt;break;case"checked":Ue=mt;break;case"defaultChecked":st=mt;break;case"value":M=mt;break;case"defaultValue":we=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(s(137,g));break;default:Fn(m,g,C,mt,y,null)}}r3(m,M,we,Ue,st,Y,L,!1);return;case"select":fn("invalid",m),C=Y=M=null;for(L in y)if(y.hasOwnProperty(L)&&(we=y[L],we!=null))switch(L){case"value":M=we;break;case"defaultValue":Y=we;break;case"multiple":C=we;default:Fn(m,g,L,we,y,null)}g=M,y=Y,m.multiple=!!C,g!=null?sm(m,!!C,g,!1):y!=null&&sm(m,!!C,y,!0);return;case"textarea":fn("invalid",m),M=L=C=null;for(Y in y)if(y.hasOwnProperty(Y)&&(we=y[Y],we!=null))switch(Y){case"value":C=we;break;case"defaultValue":L=we;break;case"children":M=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(91));break;default:Fn(m,g,Y,we,y,null)}o3(m,C,L,M);return;case"option":for(Ue in y)y.hasOwnProperty(Ue)&&(C=y[Ue],C!=null)&&(Ue==="selected"?m.selected=C&&typeof C!="function"&&typeof C!="symbol":Fn(m,g,Ue,C,y,null));return;case"dialog":fn("beforetoggle",m),fn("toggle",m),fn("cancel",m),fn("close",m);break;case"iframe":case"object":fn("load",m);break;case"video":case"audio":for(C=0;C<Vh.length;C++)fn(Vh[C],m);break;case"image":fn("error",m),fn("load",m);break;case"details":fn("toggle",m);break;case"embed":case"source":case"link":fn("error",m),fn("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in y)if(y.hasOwnProperty(st)&&(C=y[st],C!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Fn(m,g,st,C,y,null)}return;default:if(f1(g)){for(mt in y)y.hasOwnProperty(mt)&&(C=y[mt],C!==void 0&&JC(m,g,mt,C,y,void 0));return}}for(we in y)y.hasOwnProperty(we)&&(C=y[we],C!=null&&Fn(m,g,we,C,y,null))}function Ute(m,g,y,C){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,M=null,Y=null,we=null,Ue=null,st=null,mt=null;for(dt in y){var xt=y[dt];if(y.hasOwnProperty(dt)&&xt!=null)switch(dt){case"checked":break;case"value":break;case"defaultValue":Ue=xt;default:C.hasOwnProperty(dt)||Fn(m,g,dt,null,C,xt)}}for(var ot in C){var dt=C[ot];if(xt=y[ot],C.hasOwnProperty(ot)&&(dt!=null||xt!=null))switch(ot){case"type":M=dt;break;case"name":L=dt;break;case"checked":st=dt;break;case"defaultChecked":mt=dt;break;case"value":Y=dt;break;case"defaultValue":we=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,g));break;default:dt!==xt&&Fn(m,g,ot,dt,C,xt)}}u1(m,Y,we,Ue,st,mt,M,L);return;case"select":dt=Y=we=ot=null;for(M in y)if(Ue=y[M],y.hasOwnProperty(M)&&Ue!=null)switch(M){case"value":break;case"multiple":dt=Ue;default:C.hasOwnProperty(M)||Fn(m,g,M,null,C,Ue)}for(L in C)if(M=C[L],Ue=y[L],C.hasOwnProperty(L)&&(M!=null||Ue!=null))switch(L){case"value":ot=M;break;case"defaultValue":we=M;break;case"multiple":Y=M;default:M!==Ue&&Fn(m,g,L,M,C,Ue)}g=we,y=Y,C=dt,ot!=null?sm(m,!!y,ot,!1):!!C!=!!y&&(g!=null?sm(m,!!y,g,!0):sm(m,!!y,y?[]:"",!1));return;case"textarea":dt=ot=null;for(we in y)if(L=y[we],y.hasOwnProperty(we)&&L!=null&&!C.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Fn(m,g,we,null,C,L)}for(Y in C)if(L=C[Y],M=y[Y],C.hasOwnProperty(Y)&&(L!=null||M!=null))switch(Y){case"value":ot=L;break;case"defaultValue":dt=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:L!==M&&Fn(m,g,Y,L,C,M)}i3(m,ot,dt);return;case"option":for(var Mt in y)ot=y[Mt],y.hasOwnProperty(Mt)&&ot!=null&&!C.hasOwnProperty(Mt)&&(Mt==="selected"?m.selected=!1:Fn(m,g,Mt,null,C,ot));for(Ue in C)ot=C[Ue],dt=y[Ue],C.hasOwnProperty(Ue)&&ot!==dt&&(ot!=null||dt!=null)&&(Ue==="selected"?m.selected=ot&&typeof ot!="function"&&typeof ot!="symbol":Fn(m,g,Ue,ot,C,dt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in y)ot=y[Vt],y.hasOwnProperty(Vt)&&ot!=null&&!C.hasOwnProperty(Vt)&&Fn(m,g,Vt,null,C,ot);for(st in C)if(ot=C[st],dt=y[st],C.hasOwnProperty(st)&&ot!==dt&&(ot!=null||dt!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(s(137,g));break;default:Fn(m,g,st,ot,C,dt)}return;default:if(f1(g)){for(var Un in y)ot=y[Un],y.hasOwnProperty(Un)&&ot!==void 0&&!C.hasOwnProperty(Un)&&JC(m,g,Un,void 0,C,ot);for(mt in C)ot=C[mt],dt=y[mt],!C.hasOwnProperty(mt)||ot===dt||ot===void 0&&dt===void 0||JC(m,g,mt,ot,C,dt);return}}for(var Xe in y)ot=y[Xe],y.hasOwnProperty(Xe)&&ot!=null&&!C.hasOwnProperty(Xe)&&Fn(m,g,Xe,null,C,ot);for(xt in C)ot=C[xt],dt=y[xt],!C.hasOwnProperty(xt)||ot===dt||ot==null&&dt==null||Fn(m,g,xt,ot,C,dt)}function dM(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bte(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,y=performance.getEntriesByType("resource"),C=0;C<y.length;C++){var L=y[C],M=L.transferSize,Y=L.initiatorType,we=L.duration;if(M&&we&&dM(Y)){for(Y=0,we=L.responseEnd,C+=1;C<y.length;C++){var Ue=y[C],st=Ue.startTime;if(st>we)break;var mt=Ue.transferSize,xt=Ue.initiatorType;mt&&dM(xt)&&(Ue=Ue.responseEnd,Y+=mt*(Ue<we?1:(we-st)/(Ue-st)))}if(--C,g+=8*(M+Y)/(L.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var eS=null,tS=null;function cy(m){return m.nodeType===9?m:m.ownerDocument}function uM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mM(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function nS(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var aS=null;function Hte(){var m=window.event;return m&&m.type==="popstate"?m===aS?!1:(aS=m,!0):(aS=null,!1)}var fM=typeof setTimeout=="function"?setTimeout:void 0,qte=typeof clearTimeout=="function"?clearTimeout:void 0,hM=typeof Promise=="function"?Promise:void 0,Wte=typeof queueMicrotask=="function"?queueMicrotask:typeof hM<"u"?function(m){return hM.resolve(null).then(m).catch(Gte)}:fM;function Gte(m){setTimeout(function(){throw m})}function Ac(m){return m==="head"}function gM(m,g){var y=g,C=0;do{var L=y.nextSibling;if(m.removeChild(y),L&&L.nodeType===8)if(y=L.data,y==="/$"||y==="/&"){if(C===0){m.removeChild(L),Im(g);return}C--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")C++;else if(y==="html")Qh(m.ownerDocument.documentElement);else if(y==="head"){y=m.ownerDocument.head,Qh(y);for(var M=y.firstChild;M;){var Y=M.nextSibling,we=M.nodeName;M[F]||we==="SCRIPT"||we==="STYLE"||we==="LINK"&&M.rel.toLowerCase()==="stylesheet"||y.removeChild(M),M=Y}}else y==="body"&&Qh(m.ownerDocument.body);y=L}while(y);Im(g)}function pM(m,g){var y=m;m=0;do{var C=y.nextSibling;if(y.nodeType===1?g?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(g?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),C&&C.nodeType===8)if(y=C.data,y==="/$"){if(m===0)break;m--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||m++;y=C}while(y)}function sS(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var y=g;switch(g=g.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":sS(y),z(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}m.removeChild(y)}}function Vte(m,g,y,C){for(;m.nodeType===1;){var L=y;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!C&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(C){if(!m[F])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(M=m.getAttribute("rel"),M==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(M!==L.rel||m.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||m.getAttribute("title")!==(L.title==null?null:L.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(M=m.getAttribute("src"),(M!==(L.src==null?null:L.src)||m.getAttribute("type")!==(L.type==null?null:L.type)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&M&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var M=L.name==null?null:""+L.name;if(L.type==="hidden"&&m.getAttribute("name")===M)return m}else return m;if(m=ei(m.nextSibling),m===null)break}return null}function Yte(m,g,y){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!y||(m=ei(m.nextSibling),m===null))return null;return m}function xM(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=ei(m.nextSibling),m===null))return null;return m}function rS(m){return m.data==="$?"||m.data==="$~"}function iS(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function Qte(m,g){var y=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||y.readyState!=="loading")g();else{var C=function(){g(),y.removeEventListener("DOMContentLoaded",C)};y.addEventListener("DOMContentLoaded",C),m._reactRetry=C}}function ei(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var oS=null;function yM(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="/$"||y==="/&"){if(g===0)return ei(m.nextSibling);g--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||g++}m=m.nextSibling}return null}function bM(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(g===0)return m;g--}else y!=="/$"&&y!=="/&"||g++}m=m.previousSibling}return null}function vM(m,g,y){switch(g=cy(y),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function Qh(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);z(m)}var ti=new Map,wM=new Set;function dy(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var dl=K.d;K.d={f:Kte,r:Xte,D:Zte,C:Jte,L:ene,m:tne,X:ane,S:nne,M:sne};function Kte(){var m=dl.f(),g=ty();return m||g}function Xte(m){var g=Le(m);g!==null&&g.tag===5&&g.type==="form"?RO(g):dl.r(m)}var Dm=typeof document>"u"?null:document;function NM(m,g,y){var C=Dm;if(C&&typeof g=="string"&&g){var L=Vr(g);L='link[rel="'+m+'"][href="'+L+'"]',typeof y=="string"&&(L+='[crossorigin="'+y+'"]'),wM.has(L)||(wM.add(L),m={rel:m,crossOrigin:y,href:g},C.querySelector(L)===null&&(g=C.createElement("link"),Ns(g,"link",m),Ke(g),C.head.appendChild(g)))}}function Zte(m){dl.D(m),NM("dns-prefetch",m,null)}function Jte(m,g){dl.C(m,g),NM("preconnect",m,g)}function ene(m,g,y){dl.L(m,g,y);var C=Dm;if(C&&m&&g){var L='link[rel="preload"][as="'+Vr(g)+'"]';g==="image"&&y&&y.imageSrcSet?(L+='[imagesrcset="'+Vr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(L+='[imagesizes="'+Vr(y.imageSizes)+'"]')):L+='[href="'+Vr(m)+'"]';var M=L;switch(g){case"style":M=Om(m);break;case"script":M=Mm(m)}ti.has(M)||(m=h({rel:"preload",href:g==="image"&&y&&y.imageSrcSet?void 0:m,as:g},y),ti.set(M,m),C.querySelector(L)!==null||g==="style"&&C.querySelector(Kh(M))||g==="script"&&C.querySelector(Xh(M))||(g=C.createElement("link"),Ns(g,"link",m),Ke(g),C.head.appendChild(g)))}}function tne(m,g){dl.m(m,g);var y=Dm;if(y&&m){var C=g&&typeof g.as=="string"?g.as:"script",L='link[rel="modulepreload"][as="'+Vr(C)+'"][href="'+Vr(m)+'"]',M=L;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=Mm(m)}if(!ti.has(M)&&(m=h({rel:"modulepreload",href:m},g),ti.set(M,m),y.querySelector(L)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Xh(M)))return}C=y.createElement("link"),Ns(C,"link",m),Ke(C),y.head.appendChild(C)}}}function nne(m,g,y){dl.S(m,g,y);var C=Dm;if(C&&m){var L=Qe(C).hoistableStyles,M=Om(m);g=g||"default";var Y=L.get(M);if(!Y){var we={loading:0,preload:null};if(Y=C.querySelector(Kh(M)))we.loading=5;else{m=h({rel:"stylesheet",href:m,"data-precedence":g},y),(y=ti.get(M))&&lS(m,y);var Ue=Y=C.createElement("link");Ke(Ue),Ns(Ue,"link",m),Ue._p=new Promise(function(st,mt){Ue.onload=st,Ue.onerror=mt}),Ue.addEventListener("load",function(){we.loading|=1}),Ue.addEventListener("error",function(){we.loading|=2}),we.loading|=4,uy(Y,g,C)}Y={type:"stylesheet",instance:Y,count:1,state:we},L.set(M,Y)}}}function ane(m,g){dl.X(m,g);var y=Dm;if(y&&m){var C=Qe(y).hoistableScripts,L=Mm(m),M=C.get(L);M||(M=y.querySelector(Xh(L)),M||(m=h({src:m,async:!0},g),(g=ti.get(L))&&cS(m,g),M=y.createElement("script"),Ke(M),Ns(M,"link",m),y.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},C.set(L,M))}}function sne(m,g){dl.M(m,g);var y=Dm;if(y&&m){var C=Qe(y).hoistableScripts,L=Mm(m),M=C.get(L);M||(M=y.querySelector(Xh(L)),M||(m=h({src:m,async:!0,type:"module"},g),(g=ti.get(L))&&cS(m,g),M=y.createElement("script"),Ke(M),Ns(M,"link",m),y.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},C.set(L,M))}}function jM(m,g,y,C){var L=(L=Ce.current)?dy(L):null;if(!L)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(g=Om(y.href),y=Qe(L).hoistableStyles,C=y.get(g),C||(C={type:"style",instance:null,count:0,state:null},y.set(g,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){m=Om(y.href);var M=Qe(L).hoistableStyles,Y=M.get(m);if(Y||(L=L.ownerDocument||L,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(m,Y),(M=L.querySelector(Kh(m)))&&!M._p&&(Y.instance=M,Y.state.loading=5),ti.has(m)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ti.set(m,y),M||rne(L,m,y,Y.state))),g&&C===null)throw Error(s(528,""));return Y}if(g&&C!==null)throw Error(s(529,""));return null;case"script":return g=y.async,y=y.src,typeof y=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Mm(y),y=Qe(L).hoistableScripts,C=y.get(g),C||(C={type:"script",instance:null,count:0,state:null},y.set(g,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function Om(m){return'href="'+Vr(m)+'"'}function Kh(m){return'link[rel="stylesheet"]['+m+"]"}function CM(m){return h({},m,{"data-precedence":m.precedence,precedence:null})}function rne(m,g,y,C){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?C.loading=1:(g=m.createElement("link"),C.preload=g,g.addEventListener("load",function(){return C.loading|=1}),g.addEventListener("error",function(){return C.loading|=2}),Ns(g,"link",y),Ke(g),m.head.appendChild(g))}function Mm(m){return'[src="'+Vr(m)+'"]'}function Xh(m){return"script[async]"+m}function SM(m,g,y){if(g.count++,g.instance===null)switch(g.type){case"style":var C=m.querySelector('style[data-href~="'+Vr(y.href)+'"]');if(C)return g.instance=C,Ke(C),C;var L=h({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return C=(m.ownerDocument||m).createElement("style"),Ke(C),Ns(C,"style",L),uy(C,y.precedence,m),g.instance=C;case"stylesheet":L=Om(y.href);var M=m.querySelector(Kh(L));if(M)return g.state.loading|=4,g.instance=M,Ke(M),M;C=CM(y),(L=ti.get(L))&&lS(C,L),M=(m.ownerDocument||m).createElement("link"),Ke(M);var Y=M;return Y._p=new Promise(function(we,Ue){Y.onload=we,Y.onerror=Ue}),Ns(M,"link",C),g.state.loading|=4,uy(M,y.precedence,m),g.instance=M;case"script":return M=Mm(y.src),(L=m.querySelector(Xh(M)))?(g.instance=L,Ke(L),L):(C=y,(L=ti.get(M))&&(C=h({},y),cS(C,L)),m=m.ownerDocument||m,L=m.createElement("script"),Ke(L),Ns(L,"link",C),m.head.appendChild(L),g.instance=L);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(C=g.instance,g.state.loading|=4,uy(C,y.precedence,m));return g.instance}function uy(m,g,y){for(var C=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=C.length?C[C.length-1]:null,M=L,Y=0;Y<C.length;Y++){var we=C[Y];if(we.dataset.precedence===g)M=we;else if(M!==L)break}M?M.parentNode.insertBefore(m,M.nextSibling):(g=y.nodeType===9?y.head:y,g.insertBefore(m,g.firstChild))}function lS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function cS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var my=null;function _M(m,g,y){if(my===null){var C=new Map,L=my=new Map;L.set(y,C)}else L=my,C=L.get(y),C||(C=new Map,L.set(y,C));if(C.has(m))return C;for(C.set(m,null),y=y.getElementsByTagName(m),L=0;L<y.length;L++){var M=y[L];if(!(M[F]||M[re]||m==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=M.getAttribute(g)||"";Y=m+Y;var we=C.get(Y);we?we.push(M):C.set(Y,[M])}}return C}function AM(m,g,y){m=m.ownerDocument||m,m.head.insertBefore(y,g==="title"?m.querySelector("head > title"):null)}function ine(m,g,y){if(y===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function TM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function one(m,g,y,C){if(y.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var L=Om(C.href),M=g.querySelector(Kh(L));if(M){g=M._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=fy.bind(m),g.then(m,m)),y.state.loading|=4,y.instance=M,Ke(M);return}M=g.ownerDocument||g,C=CM(C),(L=ti.get(L))&&lS(C,L),M=M.createElement("link"),Ke(M);var Y=M;Y._p=new Promise(function(we,Ue){Y.onload=we,Y.onerror=Ue}),Ns(M,"link",C),y.instance=M}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(y,g),(g=y.state.preload)&&(y.state.loading&3)===0&&(m.count++,y=fy.bind(m),g.addEventListener("load",y),g.addEventListener("error",y))}}var dS=0;function lne(m,g){return m.stylesheets&&m.count===0&&gy(m,m.stylesheets),0<m.count||0<m.imgCount?function(y){var C=setTimeout(function(){if(m.stylesheets&&gy(m,m.stylesheets),m.unsuspend){var M=m.unsuspend;m.unsuspend=null,M()}},6e4+g);0<m.imgBytes&&dS===0&&(dS=62500*Bte());var L=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&gy(m,m.stylesheets),m.unsuspend)){var M=m.unsuspend;m.unsuspend=null,M()}},(m.imgBytes>dS?50:800)+g);return m.unsuspend=y,function(){m.unsuspend=null,clearTimeout(C),clearTimeout(L)}}:null}function fy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gy(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var hy=null;function gy(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,hy=new Map,g.forEach(cne,m),hy=null,fy.call(m))}function cne(m,g){if(!(g.state.loading&4)){var y=hy.get(m);if(y)var C=y.get(null);else{y=new Map,hy.set(m,y);for(var L=m.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<L.length;M++){var Y=L[M];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(y.set(Y.dataset.precedence,Y),C=Y)}C&&y.set(null,C)}L=g.instance,Y=L.getAttribute("data-precedence"),M=y.get(Y)||C,M===C&&y.set(null,L),y.set(Y,L),this.count++,C=fy.bind(this),L.addEventListener("load",C),L.addEventListener("error",C),M?M.parentNode.insertBefore(L,M.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(L,m.firstChild)),g.state.loading|=4}}var Zh={$$typeof:S,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function dne(m,g,y,C,L,M,Y,we,Ue){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=C,this.onUncaughtError=L,this.onCaughtError=M,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ue,this.incompleteTransitions=new Map}function EM(m,g,y,C,L,M,Y,we,Ue,st,mt,xt){return m=new dne(m,g,y,Y,Ue,st,mt,xt,we),g=1,M===!0&&(g|=24),M=Cr(3,null,null,g),m.current=M,M.stateNode=m,g=H1(),g.refCount++,m.pooledCache=g,g.refCount++,M.memoizedState={element:C,isDehydrated:y,cache:g},V1(M),m}function kM(m){return m?(m=mm,m):mm}function LM(m,g,y,C,L,M){L=kM(L),C.context===null?C.context=L:C.pendingContext=L,C=pc(g),C.payload={element:y},M=M===void 0?null:M,M!==null&&(C.callback=M),y=xc(m,C,g),y!==null&&(ar(y,m,g),kh(y,m,g))}function PM(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var y=m.retryLane;m.retryLane=y!==0&&y<g?y:g}}function uS(m,g){PM(m,g),(m=m.alternate)&&PM(m,g)}function DM(m){if(m.tag===13||m.tag===31){var g=kd(m,67108864);g!==null&&ar(g,m,67108864),uS(m,67108864)}}function OM(m){if(m.tag===13||m.tag===31){var g=Er();g=Nt(g);var y=kd(m,g);y!==null&&ar(y,m,g),uS(m,g)}}var py=!0;function une(m,g,y,C){var L=G.T;G.T=null;var M=K.p;try{K.p=2,mS(m,g,y,C)}finally{K.p=M,G.T=L}}function mne(m,g,y,C){var L=G.T;G.T=null;var M=K.p;try{K.p=8,mS(m,g,y,C)}finally{K.p=M,G.T=L}}function mS(m,g,y,C){if(py){var L=fS(C);if(L===null)ZC(m,g,C,xy,y),IM(m,C);else if(hne(L,m,g,y,C))C.stopPropagation();else if(IM(m,C),g&4&&-1<fne.indexOf(m)){for(;L!==null;){var M=Le(L);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var Y=D(M.pendingLanes);if(Y!==0){var we=M;for(we.pendingLanes|=2,we.entangledLanes|=2;Y;){var Ue=1<<31-it(Y);we.entanglements[1]|=Ue,Y&=~Ue}no(M),(An&6)===0&&(J0=Ee()+500,Gh(0))}}break;case 31:case 13:we=kd(M,2),we!==null&&ar(we,M,2),ty(),uS(M,2)}if(M=fS(C),M===null&&ZC(m,g,C,xy,y),M===L)break;L=M}L!==null&&C.stopPropagation()}else ZC(m,g,C,null,y)}}function fS(m){return m=g1(m),hS(m)}var xy=null;function hS(m){if(xy=null,m=me(m),m!==null){var g=i(m);if(g===null)m=null;else{var y=g.tag;if(y===13){if(m=o(g),m!==null)return m;m=null}else if(y===31){if(m=l(g),m!==null)return m;m=null}else if(y===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return xy=m,null}function MM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case pe:return 2;case Be:return 8;case $e:case Ve:return 32;case ut:return 268435456;default:return 32}default:return 32}}var gS=!1,Tc=null,Ec=null,kc=null,Jh=new Map,eg=new Map,Lc=[],fne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function IM(m,g){switch(m){case"focusin":case"focusout":Tc=null;break;case"dragenter":case"dragleave":Ec=null;break;case"mouseover":case"mouseout":kc=null;break;case"pointerover":case"pointerout":Jh.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":eg.delete(g.pointerId)}}function tg(m,g,y,C,L,M){return m===null||m.nativeEvent!==M?(m={blockedOn:g,domEventName:y,eventSystemFlags:C,nativeEvent:M,targetContainers:[L]},g!==null&&(g=Le(g),g!==null&&DM(g)),m):(m.eventSystemFlags|=C,g=m.targetContainers,L!==null&&g.indexOf(L)===-1&&g.push(L),m)}function hne(m,g,y,C,L){switch(g){case"focusin":return Tc=tg(Tc,m,g,y,C,L),!0;case"dragenter":return Ec=tg(Ec,m,g,y,C,L),!0;case"mouseover":return kc=tg(kc,m,g,y,C,L),!0;case"pointerover":var M=L.pointerId;return Jh.set(M,tg(Jh.get(M)||null,m,g,y,C,L)),!0;case"gotpointercapture":return M=L.pointerId,eg.set(M,tg(eg.get(M)||null,m,g,y,C,L)),!0}return!1}function $M(m){var g=me(m.target);if(g!==null){var y=i(g);if(y!==null){if(g=y.tag,g===13){if(g=o(y),g!==null){m.blockedOn=g,on(m.priority,function(){OM(y)});return}}else if(g===31){if(g=l(y),g!==null){m.blockedOn=g,on(m.priority,function(){OM(y)});return}}else if(g===3&&y.stateNode.current.memoizedState.isDehydrated){m.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}m.blockedOn=null}function yy(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var y=fS(m.nativeEvent);if(y===null){y=m.nativeEvent;var C=new y.constructor(y.type,y);h1=C,y.target.dispatchEvent(C),h1=null}else return g=Le(y),g!==null&&DM(g),m.blockedOn=y,!1;g.shift()}return!0}function RM(m,g,y){yy(m)&&y.delete(g)}function gne(){gS=!1,Tc!==null&&yy(Tc)&&(Tc=null),Ec!==null&&yy(Ec)&&(Ec=null),kc!==null&&yy(kc)&&(kc=null),Jh.forEach(RM),eg.forEach(RM)}function by(m,g){m.blockedOn===g&&(m.blockedOn=null,gS||(gS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gne)))}var vy=null;function zM(m){vy!==m&&(vy=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){vy===m&&(vy=null);for(var g=0;g<m.length;g+=3){var y=m[g],C=m[g+1],L=m[g+2];if(typeof C!="function"){if(hS(C||y)===null)continue;break}var M=Le(y);M!==null&&(m.splice(g,3),g-=3,fC(M,{pending:!0,data:L,method:y.method,action:C},C,L))}}))}function Im(m){function g(Ue){return by(Ue,m)}Tc!==null&&by(Tc,m),Ec!==null&&by(Ec,m),kc!==null&&by(kc,m),Jh.forEach(g),eg.forEach(g);for(var y=0;y<Lc.length;y++){var C=Lc[y];C.blockedOn===m&&(C.blockedOn=null)}for(;0<Lc.length&&(y=Lc[0],y.blockedOn===null);)$M(y),y.blockedOn===null&&Lc.shift();if(y=(m.ownerDocument||m).$$reactFormReplay,y!=null)for(C=0;C<y.length;C+=3){var L=y[C],M=y[C+1],Y=L[lt]||null;if(typeof M=="function")Y||zM(y);else if(Y){var we=null;if(M&&M.hasAttribute("formAction")){if(L=M,Y=M[lt]||null)we=Y.formAction;else if(hS(L)!==null)continue}else we=Y.action;typeof we=="function"?y[C+1]=we:(y.splice(C,3),C-=3),zM(y)}}}function FM(){function m(M){M.canIntercept&&M.info==="react-transition"&&M.intercept({handler:function(){return new Promise(function(Y){return L=Y})},focusReset:"manual",scroll:"manual"})}function g(){L!==null&&(L(),L=null),C||setTimeout(y,20)}function y(){if(!C&&!navigation.transition){var M=navigation.currentEntry;M&&M.url!=null&&navigation.navigate(M.url,{state:M.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,L=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(y,100),function(){C=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),L!==null&&(L(),L=null)}}}function pS(m){this._internalRoot=m}wy.prototype.render=pS.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var y=g.current,C=Er();LM(y,C,m,g,null,null)},wy.prototype.unmount=pS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;LM(m.current,2,null,m,null,null),ty(),g[zt]=null}};function wy(m){this._internalRoot=m}wy.prototype.unstable_scheduleHydration=function(m){if(m){var g=Ht();m={blockedOn:null,target:m,priority:g};for(var y=0;y<Lc.length&&g!==0&&g<Lc[y].priority;y++);Lc.splice(y,0,m),y===0&&$M(m)}};var UM=t.version;if(UM!=="19.2.0")throw Error(s(527,UM,"19.2.0"));K.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=d(g),m=m!==null?u(m):null,m=m===null?null:m.stateNode,m};var pne={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ny.isDisabled&&Ny.supportsFiber)try{Fe=Ny.inject(pne),ye=Ny}catch{}}return ag.createRoot=function(m,g){if(!r(m))throw Error(s(299));var y=!1,C="",L=YO,M=QO,Y=KO;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(L=g.onUncaughtError),g.onCaughtError!==void 0&&(M=g.onCaughtError),g.onRecoverableError!==void 0&&(Y=g.onRecoverableError)),g=EM(m,1,!1,null,null,y,C,null,L,M,Y,FM),m[zt]=g.current,XC(m),new pS(g)},ag.hydrateRoot=function(m,g,y){if(!r(m))throw Error(s(299));var C=!1,L="",M=YO,Y=QO,we=KO,Ue=null;return y!=null&&(y.unstable_strictMode===!0&&(C=!0),y.identifierPrefix!==void 0&&(L=y.identifierPrefix),y.onUncaughtError!==void 0&&(M=y.onUncaughtError),y.onCaughtError!==void 0&&(Y=y.onCaughtError),y.onRecoverableError!==void 0&&(we=y.onRecoverableError),y.formState!==void 0&&(Ue=y.formState)),g=EM(m,1,!0,g,y??null,C,L,Ue,M,Y,we,FM),g.context=kM(null),y=g.current,C=Er(),C=Nt(C),L=pc(C),L.callback=null,xc(y,L,C),y=C,g.current.lanes=y,xe(g,y),no(g),m[zt]=g.current,XC(m),new wy(g)},ag.version="19.2.0",ag}var XM;function _ne(){if(XM)return bS.exports;XM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bS.exports=Sne(),bS.exports}var Ane=_ne();var ZM="popstate";function Tne(e={}){function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return wT("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(s,r){return typeof r=="string"?r:op(r)}return kne(t,a,null,e)}function da(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ene(){return Math.random().toString(36).substring(2,10)}function JM(e,t){return{usr:e.state,key:e.key,idx:t}}function wT(e,t,a=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Bf(t):t,state:a,key:t&&t.key||s||Ene()}}function op({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Bf(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function kne(e,t,a,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let v=u(),j=v==null?null:v-d;d=v,c&&c({action:l,location:N.location,delta:j})}function p(v,j){l="PUSH";let w=wT(N.location,v,j);d=u()+1;let S=JM(w,d),A=N.createHref(w);try{o.pushState(S,"",A)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;r.location.assign(A)}i&&c&&c({action:l,location:N.location,delta:1})}function x(v,j){l="REPLACE";let w=wT(N.location,v,j);d=u();let S=JM(w,d),A=N.createHref(w);o.replaceState(S,"",A),i&&c&&c({action:l,location:N.location,delta:0})}function b(v){return Lne(v)}let N={get action(){return l},get location(){return e(r,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(ZM,h),c=v,()=>{r.removeEventListener(ZM,h),c=null}},createHref(v){return t(r,v)},createURL:b,encodeLocation(v){let j=b(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:p,replace:x,go(v){return o.go(v)}};return N}function Lne(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),da(a,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:op(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function aH(e,t,a="/"){return Pne(e,t,a,!1)}function Pne(e,t,a,s){let r=typeof t=="string"?Bf(t):t,i=Ol(r.pathname||"/",a);if(i==null)return null;let o=sH(e);Dne(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=qne(i);l=Bne(o[c],d,s)}return l}function sH(e,t=[],a=[],s="",r=!1){let i=(o,l,c=r,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;da(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let h=kl([s,u.relativePath]),p=a.concat(u);o.children&&o.children.length>0&&(da(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),sH(o.children,t,p,h,c)),!(o.path==null&&!o.index)&&t.push({path:h,score:Fne(h,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of rH(o.path))i(o,l,!0,c)}),t}function rH(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=rH(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Dne(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:Une(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var One=/^:[\w-]+$/,Mne=3,Ine=2,$ne=1,Rne=10,zne=-2,eI=e=>e==="*";function Fne(e,t){let a=e.split("/"),s=a.length;return a.some(eI)&&(s+=zne),t&&(s+=Ine),a.filter(r=>!eI(r)).reduce((r,i)=>r+(One.test(i)?Mne:i===""?$ne:Rne),s)}function Une(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function Bne(e,t,a=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=sv({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!h&&d&&a&&!s[s.length-1].route.index&&(h=sv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:kl([i,h.pathname]),pathnameBase:Yne(kl([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=kl([i,h.pathnameBase]))}return o}function sv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=Hne(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:h},p)=>{if(u==="*"){let b=l[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[p];return h&&!x?d[u]=void 0:d[u]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function Hne(e,t=!1,a=!0){pi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function qne(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ol(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}var Wne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Gne(e,t="/"){let{pathname:a,search:s="",hash:r=""}=typeof e=="string"?Bf(e):e,i;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?i=tI(a.substring(1),"/"):i=tI(a,t)):i=t,{pathname:i,search:Qne(s),hash:Kne(r)}}function tI(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function jS(e,t,a,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Vne(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function Wk(e){let t=Vne(e);return t.map((a,s)=>s===t.length-1?a.pathname:a.pathnameBase)}function Gk(e,t,a,s=!1){let r;typeof e=="string"?r=Bf(e):(r={...e},da(!r.pathname||!r.pathname.includes("?"),jS("?","pathname","search",r)),da(!r.pathname||!r.pathname.includes("#"),jS("#","pathname","hash",r)),da(!r.search||!r.search.includes("#"),jS("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=a;else{let h=t.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;r.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=Gne(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var kl=e=>e.join("/").replace(/\/\/+/g,"/"),Yne=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Qne=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Kne=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Xne=class{constructor(e,t,a,s=!1){this.status=e,this.statusText=t||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function Zne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Jne(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var iH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function oH(e,t){let a=e;if(typeof a!="string"||!Wne.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,r=!1;if(iH)try{let i=new URL(window.location.href),o=a.startsWith("//")?new URL(i.protocol+a):new URL(a),l=Ol(o.pathname,t);o.origin===i.origin&&l!=null?a=l+o.search+o.hash:r=!0}catch{pi(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lH=["POST","PUT","PATCH","DELETE"];new Set(lH);var eae=["GET",...lH];new Set(eae);var Hf=f.createContext(null);Hf.displayName="DataRouter";var Pw=f.createContext(null);Pw.displayName="DataRouterState";var tae=f.createContext(!1),cH=f.createContext({isTransitioning:!1});cH.displayName="ViewTransition";var nae=f.createContext(new Map);nae.displayName="Fetchers";var aae=f.createContext(null);aae.displayName="Await";var Hr=f.createContext(null);Hr.displayName="Navigation";var Qp=f.createContext(null);Qp.displayName="Location";var ji=f.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var Vk=f.createContext(null);Vk.displayName="RouteError";var dH="REACT_ROUTER_ERROR",sae="REDIRECT",rae="ROUTE_ERROR_RESPONSE";function iae(e){if(e.startsWith(`${dH}:${sae}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function oae(e){if(e.startsWith(`${dH}:${rae}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Xne(t.status,t.statusText,t.data)}catch{}}function lae(e,{relative:t}={}){da(qf(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=f.useContext(Hr),{hash:r,pathname:i,search:o}=Kp(e,{relative:t}),l=i;return a!=="/"&&(l=i==="/"?a:kl([a,i])),s.createHref({pathname:l,search:o,hash:r})}function qf(){return f.useContext(Qp)!=null}function Zt(){return da(qf(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(Qp).location}var uH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mH(e){f.useContext(Hr).static||f.useLayoutEffect(e)}function wt(){let{isDataRoute:e}=f.useContext(ji);return e?jae():cae()}function cae(){da(qf(),"useNavigate() may be used only in the context of a <Router> component.");let e=f.useContext(Hf),{basename:t,navigator:a}=f.useContext(Hr),{matches:s}=f.useContext(ji),{pathname:r}=Zt(),i=JSON.stringify(Wk(s)),o=f.useRef(!1);return mH(()=>{o.current=!0}),f.useCallback((c,d={})=>{if(pi(o.current,uH),!o.current)return;if(typeof c=="number"){a.go(c);return}let u=Gk(c,JSON.parse(i),r,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:kl([t,u.pathname])),(d.replace?a.replace:a.push)(u,d.state,d)},[t,a,i,r,e])}var dae=f.createContext(null);function uae(e){let t=f.useContext(ji).outlet;return f.useMemo(()=>t&&f.createElement(dae.Provider,{value:e},t),[t,e])}function Bo(){let{matches:e}=f.useContext(ji),t=e[e.length-1];return t?t.params:{}}function Kp(e,{relative:t}={}){let{matches:a}=f.useContext(ji),{pathname:s}=Zt(),r=JSON.stringify(Wk(a));return f.useMemo(()=>Gk(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function mae(e,t){return fH(e,t)}function fH(e,t,a,s,r){da(qf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=f.useContext(Hr),{matches:o}=f.useContext(ji),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let w=h&&h.path||"";gH(d,!h||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Zt(),x;if(t){let w=typeof t=="string"?Bf(t):t;da(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=p;let b=x.pathname||"/",N=b;if(u!=="/"){let w=u.replace(/^\//,"").split("/");N="/"+b.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=aH(e,{pathname:N});pi(h||v!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),pi(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=xae(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:kl([u,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:kl([u,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,a,s,r);return t&&j?f.createElement(Qp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},j):j}function fae(){let e=Nae(),t=Zne(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:i},"ErrorBoundary")," or"," ",f.createElement("code",{style:i},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),a?f.createElement("pre",{style:r},a):null,o)}var hae=f.createElement(fae,null),hH=class extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=oae(e.digest);a&&(e=a)}let t=e!==void 0?f.createElement(ji.Provider,{value:this.props.routeContext},f.createElement(Vk.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?f.createElement(gae,{error:e},t):t}};hH.contextType=tae;var CS=new WeakMap;function gae({children:e,error:t}){let{basename:a}=f.useContext(Hr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=iae(t.digest);if(s){let r=CS.get(t);if(r)throw r;let i=oH(s.location,a);if(iH&&!CS.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw CS.set(t,o),o}return f.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function pae({routeContext:e,match:t,children:a}){let s=f.useContext(Hf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),f.createElement(ji.Provider,{value:e},a)}function xae(e,t=[],a=null,s=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,o=a?.errors;if(o!=null){let u=i.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);da(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(a)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:x}=a,b=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!x||x[h.route.id]===void 0);if(h.route.lazy||b){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=a&&s?(u,h)=>{s(u,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:Jne(a.matches),errorInfo:h})}:void 0;return i.reduceRight((u,h,p)=>{let x,b=!1,N=null,v=null;a&&(x=o&&h.route.id?o[h.route.id]:void 0,N=h.route.errorElement||hae,l&&(c<0&&p===0?(gH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):c===p&&(b=!0,v=h.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,p+1)),w=()=>{let S;return x?S=N:b?S=v:h.route.Component?S=f.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=u,f.createElement(pae,{match:h,routeContext:{outlet:u,matches:j,isDataRoute:a!=null},children:S})};return a&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?f.createElement(hH,{location:a.location,revalidation:a.revalidation,component:N,error:x,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:d}):w()},null)}function Yk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yae(e){let t=f.useContext(Hf);return da(t,Yk(e)),t}function bae(e){let t=f.useContext(Pw);return da(t,Yk(e)),t}function vae(e){let t=f.useContext(ji);return da(t,Yk(e)),t}function Qk(e){let t=vae(e),a=t.matches[t.matches.length-1];return da(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function wae(){return Qk("useRouteId")}function Nae(){let e=f.useContext(Vk),t=bae("useRouteError"),a=Qk("useRouteError");return e!==void 0?e:t.errors?.[a]}function jae(){let{router:e}=yae("useNavigate"),t=Qk("useNavigate"),a=f.useRef(!1);return mH(()=>{a.current=!0}),f.useCallback(async(r,i={})=>{pi(a.current,uH),a.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var nI={};function gH(e,t,a){!t&&!nI[e]&&(nI[e]=!0,pi(!1,a))}f.memo(Cae);function Cae({routes:e,future:t,state:a,onError:s}){return fH(e,void 0,a,s,t)}function li({to:e,replace:t,state:a,relative:s}){da(qf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=f.useContext(Hr);pi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=f.useContext(ji),{pathname:o}=Zt(),l=wt(),c=Gk(e,Wk(i),o,s==="path"),d=JSON.stringify(c);return f.useEffect(()=>{l(JSON.parse(d),{replace:t,state:a,relative:s})},[l,d,s,t,a]),null}function Xp(e){return uae(e.context)}function yt(e){da(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Sae({basename:e="/",children:t=null,location:a,navigationType:s="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){da(!qf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:l,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[l,r,i,o]);typeof a=="string"&&(a=Bf(a));let{pathname:d="/",search:u="",hash:h="",state:p=null,key:x="default"}=a,b=f.useMemo(()=>{let N=Ol(d,l);return N==null?null:{location:{pathname:N,search:u,hash:h,state:p,key:x},navigationType:s}},[l,d,u,h,p,x,s]);return pi(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:f.createElement(Hr.Provider,{value:c},f.createElement(Qp.Provider,{children:t,value:b}))}function _ae({children:e,location:t}){return mae(NT(e),t)}function NT(e,t=[]){let a=[];return f.Children.forEach(e,(s,r)=>{if(!f.isValidElement(s))return;let i=[...t,r];if(s.type===f.Fragment){a.push.apply(a,NT(s.props.children,i));return}da(s.type===yt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),da(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=NT(s.props.children,i)),a.push(o)}),a}var Ib="get",$b="application/x-www-form-urlencoded";function Dw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Aae(e){return Dw(e)&&e.tagName.toLowerCase()==="button"}function Tae(e){return Dw(e)&&e.tagName.toLowerCase()==="form"}function Eae(e){return Dw(e)&&e.tagName.toLowerCase()==="input"}function kae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Lae(e,t){return e.button===0&&(!t||t==="_self")&&!kae(e)}function jT(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let s=e[a];return t.concat(Array.isArray(s)?s.map(r=>[a,r]):[[a,s]])},[]))}function Pae(e,t){let a=jT(e);return t&&t.forEach((s,r)=>{a.has(r)||t.getAll(r).forEach(i=>{a.append(r,i)})}),a}var jy=null;function Dae(){if(jy===null)try{new FormData(document.createElement("form"),0),jy=!1}catch{jy=!0}return jy}var Oae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function SS(e){return e!=null&&!Oae.has(e)?(pi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$b}"`),null):e}function Mae(e,t){let a,s,r,i,o;if(Tae(e)){let l=e.getAttribute("action");s=l?Ol(l,t):null,a=e.getAttribute("method")||Ib,r=SS(e.getAttribute("enctype"))||$b,i=new FormData(e)}else if(Aae(e)||Eae(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Ol(c,t):null,a=e.getAttribute("formmethod")||l.getAttribute("method")||Ib,r=SS(e.getAttribute("formenctype"))||SS(l.getAttribute("enctype"))||$b,i=new FormData(l,e),!Dae()){let{name:d,type:u,value:h}=e;if(u==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,h)}}else{if(Dw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Ib,s=null,r=$b,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:a.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Kk(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Iae(e,t,a,s){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&Ol(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function $ae(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Rae(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function zae(e,t,a){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await $ae(i,a);return o.links?o.links():[]}return[]}));return Hae(s.flat(1).filter(Rae).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function aI(e,t,a,s,r,i){let o=(c,d)=>a[d]?c.route.id!==a[d].route.id:!0,l=(c,d)=>a[d].pathname!==c.pathname||a[d].route.path?.endsWith("*")&&a[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Fae(e,t,{includeHydrateFallback:a}={}){return Uae(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Uae(e){return[...new Set(e)]}function Bae(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}function Hae(e,t){let a=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(Bae(r));return a.has(i)||(a.add(i),s.push({key:i,link:r})),s},[])}function pH(){let e=f.useContext(Hf);return Kk(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function qae(){let e=f.useContext(Pw);return Kk(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Xk=f.createContext(void 0);Xk.displayName="FrameworkContext";function xH(){let e=f.useContext(Xk);return Kk(e,"You must render this element inside a <HydratedRouter> element"),e}function Wae(e,t){let a=f.useContext(Xk),[s,r]=f.useState(!1),[i,o]=f.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,p=f.useRef(null);f.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let N=j=>{j.forEach(w=>{o(w.isIntersecting)})},v=new IntersectionObserver(N,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[e]),f.useEffect(()=>{if(s){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[s]);let x=()=>{r(!0)},b=()=>{r(!1),o(!1)};return a?e!=="intent"?[i,p,{}]:[i,p,{onFocus:sg(l,x),onBlur:sg(c,b),onMouseEnter:sg(d,x),onMouseLeave:sg(u,b),onTouchStart:sg(h,x)}]:[!1,p,{}]}function sg(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function Gae({page:e,...t}){let{router:a}=pH(),s=f.useMemo(()=>aH(a.routes,e,a.basename),[a.routes,e,a.basename]);return s?f.createElement(Yae,{page:e,matches:s,...t}):null}function Vae(e){let{manifest:t,routeModules:a}=xH(),[s,r]=f.useState([]);return f.useEffect(()=>{let i=!1;return zae(e,t,a).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,a]),s}function Yae({page:e,matches:t,...a}){let s=Zt(),{future:r,manifest:i,routeModules:o}=xH(),{basename:l}=pH(),{loaderData:c,matches:d}=qae(),u=f.useMemo(()=>aI(e,t,d,i,s,"data"),[e,t,d,i,s]),h=f.useMemo(()=>aI(e,t,d,i,s,"assets"),[e,t,d,i,s]),p=f.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let N=new Set,v=!1;if(t.forEach(w=>{let S=i.routes[w.route.id];!S||!S.hasLoader||(!u.some(A=>A.route.id===w.route.id)&&w.route.id in c&&o[w.route.id]?.shouldRevalidate||S.hasClientLoader?v=!0:N.add(w.route.id))}),N.size===0)return[];let j=Iae(e,l,r.unstable_trailingSlashAwareDataRequests,"data");return v&&N.size>0&&j.searchParams.set("_routes",t.filter(w=>N.has(w.route.id)).map(w=>w.route.id).join(",")),[j.pathname+j.search]},[l,r.unstable_trailingSlashAwareDataRequests,c,s,i,u,t,e,o]),x=f.useMemo(()=>Fae(h,i),[h,i]),b=Vae(h);return f.createElement(f.Fragment,null,p.map(N=>f.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...a})),x.map(N=>f.createElement("link",{key:N,rel:"modulepreload",href:N,...a})),b.map(({key:N,link:v})=>f.createElement("link",{key:N,nonce:a.nonce,...v,crossOrigin:v.crossOrigin??a.crossOrigin})))}function Qae(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var Kae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kae&&(window.__reactRouterVersion="7.13.0")}catch{}function Xae({basename:e,children:t,unstable_useTransitions:a,window:s}){let r=f.useRef();r.current==null&&(r.current=Tne({window:s,v5Compat:!0}));let i=r.current,[o,l]=f.useState({action:i.action,location:i.location}),c=f.useCallback(d=>{a===!1?l(d):f.startTransition(()=>l(d))},[a]);return f.useLayoutEffect(()=>i.listen(c),[i,c]),f.createElement(Sae,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:a})}var yH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ad=f.forwardRef(function({onClick:t,discover:a="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:p,...x},b){let{basename:N,unstable_useTransitions:v}=f.useContext(Hr),j=typeof d=="string"&&yH.test(d),w=oH(d,N);d=w.to;let S=lae(d,{relative:r}),[A,E,_]=Wae(s,x),k=ese(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:v});function T($){t&&t($),$.defaultPrevented||k($)}let O=f.createElement("a",{...x,..._,href:w.absoluteURL||S,onClick:w.isExternal||i?t:T,ref:Qae(b,E),target:c,"data-discover":!j&&a==="render"?"true":void 0});return A&&!j?f.createElement(f.Fragment,null,O,f.createElement(Gae,{page:S})):O});ad.displayName="Link";var $t=f.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=Kp(o,{relative:d.relative}),p=Zt(),x=f.useContext(Pw),{navigator:b,basename:N}=f.useContext(Hr),v=x!=null&&rse(h)&&l===!0,j=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,w=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(w=w.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&N&&(S=Ol(S,N)||S);const A=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let E=w===j||!r&&w.startsWith(j)&&w.charAt(A)==="/",_=S!=null&&(S===j||!r&&S.startsWith(j)&&S.charAt(j.length)==="/"),k={isActive:E,isPending:_,isTransitioning:v},T=E?t:void 0,O;typeof s=="function"?O=s(k):O=[s,E?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let $=typeof i=="function"?i(k):i;return f.createElement(ad,{...d,"aria-current":T,className:O,ref:u,style:$,to:o,viewTransition:l},typeof c=="function"?c(k):c)});$t.displayName="NavLink";var Zae=f.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:s,replace:r,state:i,method:o=Ib,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:p,...x},b)=>{let{unstable_useTransitions:N}=f.useContext(Hr),v=ase(),j=sse(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&yH.test(l),A=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let _=E.nativeEvent.submitter,k=_?.getAttribute("formmethod")||o,T=()=>v(_||E.currentTarget,{fetcherKey:t,method:k,navigate:a,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:p});N&&a!==!1?f.startTransition(()=>T()):T()};return f.createElement("form",{ref:b,method:w,action:j,onSubmit:s?c:A,...x,"data-discover":!S&&e==="render"?"true":void 0})});Zae.displayName="Form";function Jae(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bH(e){let t=f.useContext(Hf);return da(t,Jae(e)),t}function ese(e,{target:t,replace:a,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=wt(),u=Zt(),h=Kp(e,{relative:i});return f.useCallback(p=>{if(Lae(p,t)){p.preventDefault();let x=a!==void 0?a:op(u)===op(h),b=()=>d(e,{replace:x,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?f.startTransition(()=>b()):b()}},[u,d,h,a,s,t,e,r,i,o,l,c])}function zs(e){pi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=f.useRef(jT(e)),a=f.useRef(!1),s=Zt(),r=f.useMemo(()=>Pae(s.search,a.current?null:t.current),[s.search]),i=wt(),o=f.useCallback((l,c)=>{const d=jT(typeof l=="function"?l(new URLSearchParams(r)):l);a.current=!0,i("?"+d,c)},[i,r]);return[r,o]}var tse=0,nse=()=>`__${String(++tse)}__`;function ase(){let{router:e}=bH("useSubmit"),{basename:t}=f.useContext(Hr),a=wae(),s=e.fetch,r=e.navigate;return f.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:u,body:h}=Mae(i,t);if(o.navigate===!1){let p=o.fetcherKey||nse();await s(p,a,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await r(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,r,t,a])}function sse(e,{relative:t}={}){let{basename:a}=f.useContext(Hr),s=f.useContext(ji);da(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Kp(e||".",{relative:t})},o=Zt();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:kl([a,i.pathname])),op(i)}function rse(e,{relative:t}={}){let a=f.useContext(cH);da(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=bH("useViewTransitionState"),r=Kp(e,{relative:t});if(!a.isTransitioning)return!1;let i=Ol(a.currentLocation.pathname,s)||a.currentLocation.pathname,o=Ol(a.nextLocation.pathname,s)||a.nextLocation.pathname;return sv(r.pathname,o)!=null||sv(r.pathname,i)!=null}var Bi=nH();const Cy=Ki(Bi);function vH(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(a=vH(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Pt(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=vH(e))&&(s&&(s+=" "),s+=t);return s}function ise(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}ise(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Zp=e=>typeof e=="number"&&!isNaN(e),Cu=e=>typeof e=="string",Ml=e=>typeof e=="function",ose=e=>Cu(e)||Zp(e),CT=e=>Cu(e)||Ml(e)?e:null,lse=(e,t)=>e===!1||Zp(e)&&e>0?e:t,ST=e=>f.isValidElement(e)||Cu(e)||Ml(e)||Zp(e);function cse(e,t,a=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,a)})})}function dse({enter:e,exit:t,appendPosition:a=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:d,isIn:u,playToast:h}){let p=a?`${e}--${o}`:e,x=a?`${t}--${o}`:t,b=f.useRef(0);return f.useLayoutEffect(()=>{let N=d.current,v=p.split(" "),j=w=>{w.target===d.current&&(h(),N.removeEventListener("animationend",j),N.removeEventListener("animationcancel",j),b.current===0&&w.type!=="animationcancel"&&N.classList.remove(...v))};N.classList.add(...v),N.addEventListener("animationend",j),N.addEventListener("animationcancel",j)},[]),f.useEffect(()=>{let N=d.current,v=()=>{N.removeEventListener("animationend",v),s?cse(N,c,r):c()};u||(l?v():(b.current=1,N.className+=` ${x}`,N.addEventListener("animationend",v)))},[u]),bt.createElement(bt.Fragment,null,i)}}function sI(e,t){return{content:wH(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function wH(e,t,a=!1){return f.isValidElement(e)&&!Cu(e.type)?f.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):Ml(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):e}function use({closeToast:e,theme:t,ariaLabel:a="close"}){return bt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":a},bt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},bt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function mse({delay:e,isRunning:t,closeToast:a,type:s="default",hide:r,className:i,controlledProgress:o,progress:l,rtl:c,isIn:d,theme:u}){let h=r||o&&l===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(p.transform=`scaleX(${l})`);let x=Pt("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),b=Ml(i)?i({rtl:c,type:s,defaultClassName:x}):Pt(x,i),N={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{d&&a()}};return bt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},bt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),bt.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:b,style:p,...N}))}var fse=1,NH=()=>`${fse++}`;function hse(e,t,a){let s=1,r=0,i=[],o=[],l=t,c=new Map,d=new Set,u=w=>(d.add(w),()=>d.delete(w)),h=()=>{o=Array.from(c.values()),d.forEach(w=>w())},p=({containerId:w,toastId:S,updateId:A})=>{let E=w?w!==e:e!==1,_=c.has(S)&&A==null;return E||_},x=(w,S)=>{c.forEach(A=>{var E;(S==null||S===A.props.toastId)&&((E=A.toggle)==null||E.call(A,w))})},b=w=>{var S,A;(A=(S=w.props)==null?void 0:S.onClose)==null||A.call(S,w.removalReason),w.isActive=!1},N=w=>{if(w==null)c.forEach(b);else{let S=c.get(w);S&&b(S)}h()},v=()=>{r-=i.length,i=[]},j=w=>{var S,A;let{toastId:E,updateId:_}=w.props,k=_==null;w.staleId&&c.delete(w.staleId),w.isActive=!0,c.set(E,w),h(),a(sI(w,k?"added":"updated")),k&&((A=(S=w.props).onOpen)==null||A.call(S))};return{id:e,props:l,observe:u,toggle:x,removeToast:N,toasts:c,clearQueue:v,buildToast:(w,S)=>{if(p(S))return;let{toastId:A,updateId:E,data:_,staleId:k,delay:T}=S,O=E==null;O&&r++;let $={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([P,I])=>I!=null)),toastId:A,updateId:E,data:_,isIn:!1,className:CT(S.className||l.toastClassName),progressClassName:CT(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:lse(S.autoClose,l.autoClose),closeToast(P){c.get(A).removalReason=P,N(A)},deleteToast(){let P=c.get(A);if(P!=null){if(a(sI(P,"removed")),c.delete(A),r--,r<0&&(r=0),i.length>0){j(i.shift());return}h()}}};$.closeButton=l.closeButton,S.closeButton===!1||ST(S.closeButton)?$.closeButton=S.closeButton:S.closeButton===!0&&($.closeButton=ST(l.closeButton)?l.closeButton:!0);let R={content:w,props:$,staleId:k};l.limit&&l.limit>0&&r>l.limit&&O?i.push(R):Zp(T)?setTimeout(()=>{j(R)},T):j(R)},setProps(w){l=w},setToggle:(w,S)=>{let A=c.get(w);A&&(A.toggle=S)},isToastActive:w=>{var S;return(S=c.get(w))==null?void 0:S.isActive},getSnapshot:()=>o}}var Hs=new Map,lp=[],_T=new Set,gse=e=>_T.forEach(t=>t(e)),jH=()=>Hs.size>0;function pse(){lp.forEach(e=>SH(e.content,e.options)),lp=[]}var xse=(e,{containerId:t})=>{var a;return(a=Hs.get(t||1))==null?void 0:a.toasts.get(e)};function CH(e,t){var a;if(t)return!!((a=Hs.get(t))!=null&&a.isToastActive(e));let s=!1;return Hs.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function yse(e){if(!jH()){lp=lp.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||ose(e))Hs.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Hs.get(e.containerId);t?t.removeToast(e.id):Hs.forEach(a=>{a.removeToast(e.id)})}}var bse=(e={})=>{Hs.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function SH(e,t){ST(e)&&(jH()||lp.push({content:e,options:t}),Hs.forEach(a=>{a.buildToast(e,t)}))}function vse(e){var t;(t=Hs.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function _H(e,t){Hs.forEach(a=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===a.id)&&a.toggle(e,t?.id)})}function wse(e){let t=e.containerId||1;return{subscribe(a){let s=hse(t,e,gse);Hs.set(t,s);let r=s.observe(a);return pse(),()=>{r(),Hs.delete(t)}},setProps(a){var s;(s=Hs.get(t))==null||s.setProps(a)},getSnapshot(){var a;return(a=Hs.get(t))==null?void 0:a.getSnapshot()}}}function Nse(e){return _T.add(e),()=>{_T.delete(e)}}function jse(e){return e&&(Cu(e.toastId)||Zp(e.toastId))?e.toastId:NH()}function Jp(e,t){return SH(e,t),t.toastId}function Ow(e,t){return{...t,type:t&&t.type||e,toastId:jse(t)}}function Mw(e){return(t,a)=>Jp(t,Ow(e,a))}function q(e,t){return Jp(e,Ow("default",t))}q.loading=(e,t)=>Jp(e,Ow("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Cse(e,{pending:t,error:a,success:s},r){let i;t&&(i=Cu(t)?q.loading(t,r):q.loading(t.render,{...r,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,u,h)=>{if(u==null){q.dismiss(i);return}let p={type:d,...o,...r,data:h},x=Cu(u)?{render:u}:u;return i?q.update(i,{...p,...x}):q(x.render,{...p,...x}),h},c=Ml(e)?e():e;return c.then(d=>l("success",s,d)).catch(d=>l("error",a,d)),c}q.promise=Cse;q.success=Mw("success");q.info=Mw("info");q.error=Mw("error");q.warning=Mw("warning");q.warn=q.warning;q.dark=(e,t)=>Jp(e,Ow("default",{theme:"dark",...t}));function Sse(e){yse(e)}q.dismiss=Sse;q.clearWaitingQueue=bse;q.isActive=CH;q.update=(e,t={})=>{let a=xse(e,t);if(a){let{props:s,content:r}=a,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:NH()};i.toastId!==e&&(i.staleId=e);let o=i.render||r;delete i.render,Jp(o,i)}};q.done=e=>{q.update(e,{progress:1})};q.onChange=Nse;q.play=e=>_H(!0,e);q.pause=e=>_H(!1,e);function _se(e){var t;let{subscribe:a,getSnapshot:s,setProps:r}=f.useRef(wse(e)).current;r(e);let i=(t=f.useSyncExternalStore(a,s,s))==null?void 0:t.slice();function o(l){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:u}=d.props;c.has(u)||c.set(u,[]),c.get(u).push(d)}),Array.from(c,d=>l(d[0],d[1]))}return{getToastToRender:o,isToastActive:CH,count:i?.length}}function Ase(e){let[t,a]=f.useState(!1),[s,r]=f.useState(!1),i=f.useRef(null),o=f.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:h}=e;vse({id:e.toastId,containerId:e.containerId,fn:a}),f.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||j(),window.addEventListener("focus",v),window.addEventListener("blur",j)}function x(){window.removeEventListener("focus",v),window.removeEventListener("blur",j)}function b(k){if(e.draggable===!0||e.draggable===k.pointerType){w();let T=i.current;o.canCloseOnClick=!0,o.canDrag=!0,T.style.transition="none",e.draggableDirection==="x"?(o.start=k.clientX,o.removalDistance=T.offsetWidth*(e.draggablePercent/100)):(o.start=k.clientY,o.removalDistance=T.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function N(k){let{top:T,bottom:O,left:$,right:R}=i.current.getBoundingClientRect();k.nativeEvent.type!=="touchend"&&e.pauseOnHover&&k.clientX>=$&&k.clientX<=R&&k.clientY>=T&&k.clientY<=O?j():v()}function v(){a(!0)}function j(){a(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",A),document.addEventListener("pointerup",E)}function S(){document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",E)}function A(k){let T=i.current;if(o.canDrag&&T){o.didMove=!0,t&&j(),e.draggableDirection==="x"?o.delta=k.clientX-o.start:o.delta=k.clientY-o.start,o.start!==k.clientX&&(o.canCloseOnClick=!1);let O=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;T.style.transform=`translate3d(${O},0)`,T.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function E(){S();let k=i.current;if(o.canDrag&&o.didMove&&k){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}k.style.transition="transform 0.2s, opacity 0.2s",k.style.removeProperty("transform"),k.style.removeProperty("opacity")}}let _={onPointerDown:b,onPointerUp:N};return l&&c&&(_.onMouseEnter=j,e.stacked||(_.onMouseLeave=v)),h&&(_.onClick=k=>{u&&u(k),o.canCloseOnClick&&d(!0)}),{playToast:v,pauseToast:j,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:_}}var Tse=typeof window<"u"?f.useLayoutEffect:f.useEffect,Iw=({theme:e,type:t,isLoading:a,...s})=>bt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function Ese(e){return bt.createElement(Iw,{...e},bt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function kse(e){return bt.createElement(Iw,{...e},bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Lse(e){return bt.createElement(Iw,{...e},bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Pse(e){return bt.createElement(Iw,{...e},bt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Dse(){return bt.createElement("div",{className:"Toastify__spinner"})}var AT={info:kse,warning:Ese,success:Lse,error:Pse,spinner:Dse},Ose=e=>e in AT;function Mse({theme:e,type:t,isLoading:a,icon:s}){let r=null,i={theme:e,type:t};return s===!1||(Ml(s)?r=s({...i,isLoading:a}):f.isValidElement(s)?r=f.cloneElement(s,i):a?r=AT.spinner():Ose(t)&&(r=AT[t](i))),r}var Ise=e=>{let{isRunning:t,preventExitTransition:a,toastRef:s,eventHandlers:r,playToast:i}=Ase(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:h,closeToast:p,transition:x,position:b,className:N,style:v,progressClassName:j,updateId:w,role:S,progress:A,rtl:E,toastId:_,deleteToast:k,isIn:T,isLoading:O,closeOnClick:$,theme:R,ariaLabel:P}=e,I=Pt("Toastify__toast",`Toastify__toast-theme--${R}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":E},{"Toastify__toast--close-on-click":$}),H=Ml(N)?N({rtl:E,position:b,type:u,defaultClassName:I}):Pt(I,N),Q=Mse(e),G=!!A||!c,K={closeToast:p,type:u,theme:R},W=null;return o===!1||(Ml(o)?W=o(K):f.isValidElement(o)?W=f.cloneElement(o,K):W=use(K)),bt.createElement(x,{isIn:T,done:k,position:b,preventExitTransition:a,nodeRef:s,playToast:i},bt.createElement("div",{id:_,tabIndex:0,onClick:d,"data-in":T,className:H,...r,style:v,ref:s,...T&&{role:S,"aria-label":P}},Q!=null&&bt.createElement("div",{className:Pt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!O})},Q),wH(l,e,!t),W,!e.customProgressBar&&bt.createElement(mse,{...w&&!G?{key:`p-${w}`}:{},rtl:E,theme:R,delay:c,isRunning:t,isIn:T,closeToast:p,hide:h,type:u,className:j,controlledProgress:G,progress:A||0})))},$se=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Rse=dse($se("bounce",!0)),zse={position:"top-right",transition:Rse,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function Fse(e){let t={...zse,...e},a=e.stacked,[s,r]=f.useState(!0),i=f.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=_se(t),{className:d,style:u,rtl:h,containerId:p,hotKeys:x}=t;function b(v){let j=Pt("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":h});return Ml(d)?d({position:v,rtl:h,defaultClassName:j}):Pt(j,CT(d))}function N(){a&&(r(!0),q.play())}return Tse(()=>{var v;if(a){let j=i.current.querySelectorAll('[data-in="true"]'),w=12,S=(v=t.position)==null?void 0:v.includes("top"),A=0,E=0;Array.from(j).reverse().forEach((_,k)=>{let T=_;T.classList.add("Toastify__toast--stacked"),k>0&&(T.dataset.collapsed=`${s}`),T.dataset.pos||(T.dataset.pos=S?"top":"bot");let O=A*(s?.2:1)+(s?0:w*k);T.style.setProperty("--y",`${S?O:O*-1}px`),T.style.setProperty("--g",`${w}`),T.style.setProperty("--s",`${1-(s?E:0)}`),A+=T.offsetHeight,E+=.025})}},[s,c,a]),f.useEffect(()=>{function v(j){var w;let S=i.current;x(j)&&((w=S.querySelector('[tabIndex="0"]'))==null||w.focus(),r(!1),q.pause()),j.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),q.play())}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[x]),bt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{a&&(r(!1),q.pause())},onMouseLeave:N,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((v,j)=>{let w=j.length?{...u}:{...u,pointerEvents:"none"};return bt.createElement("div",{tabIndex:-1,className:b(v),"data-stacked":a,style:w,key:`c-${v}`},j.map(({content:S,props:A})=>bt.createElement(Ise,{...A,stacked:a,collapseAll:N,isIn:l(A.toastId,A.containerId),key:`t-${A.key}`},S)))}))}function AH(e,t){return function(){return e.apply(t,arguments)}}const{toString:Use}=Object.prototype,{getPrototypeOf:Zk}=Object,{iterator:$w,toStringTag:TH}=Symbol,Rw=(e=>t=>{const a=Use.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Xi=e=>(e=e.toLowerCase(),t=>Rw(t)===e),zw=e=>t=>typeof t===e,{isArray:Wf}=Array,wf=zw("undefined");function ex(e){return e!==null&&!wf(e)&&e.constructor!==null&&!wf(e.constructor)&&dr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const EH=Xi("ArrayBuffer");function Bse(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&EH(e.buffer),t}const Hse=zw("string"),dr=zw("function"),kH=zw("number"),tx=e=>e!==null&&typeof e=="object",qse=e=>e===!0||e===!1,Rb=e=>{if(Rw(e)!=="object")return!1;const t=Zk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(TH in e)&&!($w in e)},Wse=e=>{if(!tx(e)||ex(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Gse=Xi("Date"),Vse=Xi("File"),Yse=Xi("Blob"),Qse=Xi("FileList"),Kse=e=>tx(e)&&dr(e.pipe),Xse=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||dr(e.append)&&((t=Rw(e))==="formdata"||t==="object"&&dr(e.toString)&&e.toString()==="[object FormData]"))},Zse=Xi("URLSearchParams"),[Jse,ere,tre,nre]=["ReadableStream","Request","Response","Headers"].map(Xi),are=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nx(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Wf(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(ex(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function LH(e,t){if(ex(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s=a.length,r;for(;s-- >0;)if(r=a[s],t===r.toLowerCase())return r;return null}const ru=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,PH=e=>!wf(e)&&e!==ru;function TT(){const{caseless:e,skipUndefined:t}=PH(this)&&this||{},a={},s=(r,i)=>{const o=e&&LH(a,i)||i;Rb(a[o])&&Rb(r)?a[o]=TT(a[o],r):Rb(r)?a[o]=TT({},r):Wf(r)?a[o]=r.slice():(!t||!wf(r))&&(a[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&nx(arguments[r],s);return a}const sre=(e,t,a,{allOwnKeys:s}={})=>(nx(t,(r,i)=>{a&&dr(r)?e[i]=AH(r,a):e[i]=r},{allOwnKeys:s}),e),rre=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ire=(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},ore=(e,t,a,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=a!==!1&&Zk(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},lre=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return s!==-1&&s===a},cre=e=>{if(!e)return null;if(Wf(e))return e;let t=e.length;if(!kH(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},dre=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Zk(Uint8Array)),ure=(e,t)=>{const s=(e&&e[$w]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},mre=(e,t)=>{let a;const s=[];for(;(a=e.exec(t))!==null;)s.push(a);return s},fre=Xi("HTMLFormElement"),hre=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,r){return s.toUpperCase()+r}),rI=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),gre=Xi("RegExp"),DH=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};nx(a,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},pre=e=>{DH(e,(t,a)=>{if(dr(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(dr(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},xre=(e,t)=>{const a={},s=r=>{r.forEach(i=>{a[i]=!0})};return Wf(e)?s(e):s(String(e).split(t)),a},yre=()=>{},bre=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function vre(e){return!!(e&&dr(e.append)&&e[TH]==="FormData"&&e[$w])}const wre=e=>{const t=new Array(10),a=(s,r)=>{if(tx(s)){if(t.indexOf(s)>=0)return;if(ex(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Wf(s)?[]:{};return nx(s,(o,l)=>{const c=a(o,r+1);!wf(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return a(e,0)},Nre=Xi("AsyncFunction"),jre=e=>e&&(tx(e)||dr(e))&&dr(e.then)&&dr(e.catch),OH=((e,t)=>e?setImmediate:t?((a,s)=>(ru.addEventListener("message",({source:r,data:i})=>{r===ru&&i===a&&s.length&&s.shift()()},!1),r=>{s.push(r),ru.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",dr(ru.postMessage)),Cre=typeof queueMicrotask<"u"?queueMicrotask.bind(ru):typeof process<"u"&&process.nextTick||OH,Sre=e=>e!=null&&dr(e[$w]),ct={isArray:Wf,isArrayBuffer:EH,isBuffer:ex,isFormData:Xse,isArrayBufferView:Bse,isString:Hse,isNumber:kH,isBoolean:qse,isObject:tx,isPlainObject:Rb,isEmptyObject:Wse,isReadableStream:Jse,isRequest:ere,isResponse:tre,isHeaders:nre,isUndefined:wf,isDate:Gse,isFile:Vse,isBlob:Yse,isRegExp:gre,isFunction:dr,isStream:Kse,isURLSearchParams:Zse,isTypedArray:dre,isFileList:Qse,forEach:nx,merge:TT,extend:sre,trim:are,stripBOM:rre,inherits:ire,toFlatObject:ore,kindOf:Rw,kindOfTest:Xi,endsWith:lre,toArray:cre,forEachEntry:ure,matchAll:mre,isHTMLForm:fre,hasOwnProperty:rI,hasOwnProp:rI,reduceDescriptors:DH,freezeMethods:pre,toObjectSet:xre,toCamelCase:hre,noop:yre,toFiniteNumber:bre,findKey:LH,global:ru,isContextDefined:PH,isSpecCompliantForm:vre,toJSONObject:wre,isAsyncFn:Nre,isThenable:jre,setImmediate:OH,asap:Cre,isIterable:Sre};function sn(e,t,a,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}ct.inherits(sn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ct.toJSONObject(this.config),code:this.code,status:this.status}}});const MH=sn.prototype,IH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{IH[e]={value:e}});Object.defineProperties(sn,IH);Object.defineProperty(MH,"isAxiosError",{value:!0});sn.from=(e,t,a,s,r,i)=>{const o=Object.create(MH);ct.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return sn.call(o,l,c,a,s,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const _re=null;function ET(e){return ct.isPlainObject(e)||ct.isArray(e)}function $H(e){return ct.endsWith(e,"[]")?e.slice(0,-2):e}function iI(e,t,a){return e?e.concat(t).map(function(r,i){return r=$H(r),!a&&i?"["+r+"]":r}).join(a?".":""):t}function Are(e){return ct.isArray(e)&&!e.some(ET)}const Tre=ct.toFlatObject(ct,{},null,function(t){return/^is[A-Z]/.test(t)});function Fw(e,t,a){if(!ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=ct.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,v){return!ct.isUndefined(v[N])});const s=a.metaTokens,r=a.visitor||u,i=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&ct.isSpecCompliantForm(t);if(!ct.isFunction(r))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(ct.isDate(b))return b.toISOString();if(ct.isBoolean(b))return b.toString();if(!c&&ct.isBlob(b))throw new sn("Blob is not supported. Use a Buffer instead.");return ct.isArrayBuffer(b)||ct.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function u(b,N,v){let j=b;if(b&&!v&&typeof b=="object"){if(ct.endsWith(N,"{}"))N=s?N:N.slice(0,-2),b=JSON.stringify(b);else if(ct.isArray(b)&&Are(b)||(ct.isFileList(b)||ct.endsWith(N,"[]"))&&(j=ct.toArray(b)))return N=$H(N),j.forEach(function(S,A){!(ct.isUndefined(S)||S===null)&&t.append(o===!0?iI([N],A,i):o===null?N:N+"[]",d(S))}),!1}return ET(b)?!0:(t.append(iI(v,N,i),d(b)),!1)}const h=[],p=Object.assign(Tre,{defaultVisitor:u,convertValue:d,isVisitable:ET});function x(b,N){if(!ct.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+N.join("."));h.push(b),ct.forEach(b,function(j,w){(!(ct.isUndefined(j)||j===null)&&r.call(t,j,ct.isString(w)?w.trim():w,N,p))===!0&&x(j,N?N.concat(w):[w])}),h.pop()}}if(!ct.isObject(e))throw new TypeError("data must be an object");return x(e),t}function oI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Jk(e,t){this._pairs=[],e&&Fw(e,this,t)}const RH=Jk.prototype;RH.append=function(t,a){this._pairs.push([t,a])};RH.toString=function(t){const a=t?function(s){return t.call(this,s,oI)}:oI;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function Ere(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function zH(e,t,a){if(!t)return e;const s=a&&a.encode||Ere;ct.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(t,a):i=ct.isURLSearchParams(t)?t.toString():new Jk(t,a).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class lI{constructor(){this.handlers=[]}use(t,a,s){return this.handlers.push({fulfilled:t,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ct.forEach(this.handlers,function(s){s!==null&&t(s)})}}const FH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kre=typeof URLSearchParams<"u"?URLSearchParams:Jk,Lre=typeof FormData<"u"?FormData:null,Pre=typeof Blob<"u"?Blob:null,Dre={isBrowser:!0,classes:{URLSearchParams:kre,FormData:Lre,Blob:Pre},protocols:["http","https","file","blob","url","data"]},eL=typeof window<"u"&&typeof document<"u",kT=typeof navigator=="object"&&navigator||void 0,Ore=eL&&(!kT||["ReactNative","NativeScript","NS"].indexOf(kT.product)<0),Mre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ire=eL&&window.location.href||"http://localhost",$re=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:eL,hasStandardBrowserEnv:Ore,hasStandardBrowserWebWorkerEnv:Mre,navigator:kT,origin:Ire},Symbol.toStringTag,{value:"Module"})),Ds={...$re,...Dre};function Rre(e,t){return Fw(e,new Ds.classes.URLSearchParams,{visitor:function(a,s,r,i){return Ds.isNode&&ct.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function zre(e){return ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Fre(e){const t={},a=Object.keys(e);let s;const r=a.length;let i;for(s=0;s<r;s++)i=a[s],t[i]=e[i];return t}function UH(e){function t(a,s,r,i){let o=a[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=a.length;return o=!o&&ct.isArray(r)?r.length:o,c?(ct.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!ct.isObject(r[o]))&&(r[o]=[]),t(a,s,r[o],i)&&ct.isArray(r[o])&&(r[o]=Fre(r[o])),!l)}if(ct.isFormData(e)&&ct.isFunction(e.entries)){const a={};return ct.forEachEntry(e,(s,r)=>{t(zre(s),r,a,0)}),a}return null}function Ure(e,t,a){if(ct.isString(e))try{return(t||JSON.parse)(e),ct.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const ax={transitional:FH,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const s=a.getContentType()||"",r=s.indexOf("application/json")>-1,i=ct.isObject(t);if(i&&ct.isHTMLForm(t)&&(t=new FormData(t)),ct.isFormData(t))return r?JSON.stringify(UH(t)):t;if(ct.isArrayBuffer(t)||ct.isBuffer(t)||ct.isStream(t)||ct.isFile(t)||ct.isBlob(t)||ct.isReadableStream(t))return t;if(ct.isArrayBufferView(t))return t.buffer;if(ct.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Rre(t,this.formSerializer).toString();if((l=ct.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Fw(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),Ure(t)):t}],transformResponse:[function(t){const a=this.transitional||ax.transitional,s=a&&a.forcedJSONParsing,r=this.responseType==="json";if(ct.isResponse(t)||ct.isReadableStream(t))return t;if(t&&ct.isString(t)&&(s&&!this.responseType||r)){const o=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?sn.from(l,sn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ds.classes.FormData,Blob:Ds.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ct.forEach(["delete","get","head","post","put","patch"],e=>{ax.headers[e]={}});const Bre=ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hre=e=>{const t={};let a,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),a=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!a||t[a]&&Bre[a])&&(a==="set-cookie"?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t},cI=Symbol("internals");function rg(e){return e&&String(e).trim().toLowerCase()}function zb(e){return e===!1||e==null?e:ct.isArray(e)?e.map(zb):String(e)}function qre(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}const Wre=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function _S(e,t,a,s,r){if(ct.isFunction(s))return s.call(this,t,a);if(r&&(t=a),!!ct.isString(t)){if(ct.isString(s))return t.indexOf(s)!==-1;if(ct.isRegExp(s))return s.test(t)}}function Gre(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,s)=>a.toUpperCase()+s)}function Vre(e,t){const a=ct.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let ur=class{constructor(t){t&&this.set(t)}set(t,a,s){const r=this;function i(l,c,d){const u=rg(c);if(!u)throw new Error("header name must be a non-empty string");const h=ct.findKey(r,u);(!h||r[h]===void 0||d===!0||d===void 0&&r[h]!==!1)&&(r[h||c]=zb(l))}const o=(l,c)=>ct.forEach(l,(d,u)=>i(d,u,c));if(ct.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(ct.isString(t)&&(t=t.trim())&&!Wre(t))o(Hre(t),a);else if(ct.isObject(t)&&ct.isIterable(t)){let l={},c,d;for(const u of t){if(!ct.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?ct.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,a)}else t!=null&&i(a,t,s);return this}get(t,a){if(t=rg(t),t){const s=ct.findKey(this,t);if(s){const r=this[s];if(!a)return r;if(a===!0)return qre(r);if(ct.isFunction(a))return a.call(this,r,s);if(ct.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=rg(t),t){const s=ct.findKey(this,t);return!!(s&&this[s]!==void 0&&(!a||_S(this,this[s],s,a)))}return!1}delete(t,a){const s=this;let r=!1;function i(o){if(o=rg(o),o){const l=ct.findKey(s,o);l&&(!a||_S(s,s[l],l,a))&&(delete s[l],r=!0)}}return ct.isArray(t)?t.forEach(i):i(t),r}clear(t){const a=Object.keys(this);let s=a.length,r=!1;for(;s--;){const i=a[s];(!t||_S(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const a=this,s={};return ct.forEach(this,(r,i)=>{const o=ct.findKey(s,i);if(o){a[o]=zb(r),delete a[i];return}const l=t?Gre(i):String(i).trim();l!==i&&delete a[i],a[l]=zb(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return ct.forEach(this,(s,r)=>{s!=null&&s!==!1&&(a[r]=t&&ct.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const s=new this(t);return a.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[cI]=this[cI]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=rg(o);s[l]||(Vre(r,o),s[l]=!0)}return ct.isArray(t)?t.forEach(i):i(t),this}};ur.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ct.reduceDescriptors(ur.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[a]=s}}});ct.freezeMethods(ur);function AS(e,t){const a=this||ax,s=t||a,r=ur.from(s.headers);let i=s.data;return ct.forEach(e,function(l){i=l.call(a,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function BH(e){return!!(e&&e.__CANCEL__)}function Gf(e,t,a){sn.call(this,e??"canceled",sn.ERR_CANCELED,t,a),this.name="CanceledError"}ct.inherits(Gf,sn,{__CANCEL__:!0});function HH(e,t,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):t(new sn("Request failed with status code "+a.status,[sn.ERR_BAD_REQUEST,sn.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Yre(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Qre(e,t){e=e||10;const a=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];o||(o=d),a[r]=c,s[r]=d;let h=i,p=0;for(;h!==r;)p+=a[h++],h=h%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),d-o<t)return;const x=u&&d-u;return x?Math.round(p*1e3/x):void 0}}function Kre(e,t){let a=0,s=1e3/t,r,i;const o=(d,u=Date.now())=>{a=u,r=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),h=u-a;h>=s?o(d,u):(r=d,i||(i=setTimeout(()=>{i=null,o(r)},s-h)))},()=>r&&o(r)]}const rv=(e,t,a=3)=>{let s=0;const r=Qre(50,250);return Kre(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,d=r(c),u=o<=l;s=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},a)},dI=(e,t)=>{const a=e!=null;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},uI=e=>(...t)=>ct.asap(()=>e(...t)),Xre=Ds.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,Ds.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(Ds.origin),Ds.navigator&&/(msie|trident)/i.test(Ds.navigator.userAgent)):()=>!0,Zre=Ds.hasStandardBrowserEnv?{write(e,t,a,s,r,i){const o=[e+"="+encodeURIComponent(t)];ct.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),ct.isString(s)&&o.push("path="+s),ct.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Jre(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function eie(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function qH(e,t,a){let s=!Jre(t);return e&&(s||a==!1)?eie(e,t):t}const mI=e=>e instanceof ur?{...e}:e;function Su(e,t){t=t||{};const a={};function s(d,u,h,p){return ct.isPlainObject(d)&&ct.isPlainObject(u)?ct.merge.call({caseless:p},d,u):ct.isPlainObject(u)?ct.merge({},u):ct.isArray(u)?u.slice():u}function r(d,u,h,p){if(ct.isUndefined(u)){if(!ct.isUndefined(d))return s(void 0,d,h,p)}else return s(d,u,h,p)}function i(d,u){if(!ct.isUndefined(u))return s(void 0,u)}function o(d,u){if(ct.isUndefined(u)){if(!ct.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,h){if(h in t)return s(d,u);if(h in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>r(mI(d),mI(u),h,!0)};return ct.forEach(Object.keys({...e,...t}),function(u){const h=c[u]||r,p=h(e[u],t[u],u);ct.isUndefined(p)&&h!==l||(a[u]=p)}),a}const WH=e=>{const t=Su({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=ur.from(o),t.url=zH(qH(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ct.isFormData(a)){if(Ds.hasStandardBrowserEnv||Ds.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ct.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{d.includes(u.toLowerCase())&&o.set(u,h)})}}if(Ds.hasStandardBrowserEnv&&(s&&ct.isFunction(s)&&(s=s(t)),s||s!==!1&&Xre(t.url))){const c=r&&i&&Zre.read(i);c&&o.set(r,c)}return t},tie=typeof XMLHttpRequest<"u",nie=tie&&function(e){return new Promise(function(a,s){const r=WH(e);let i=r.data;const o=ur.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=r,u,h,p,x,b;function N(){x&&x(),b&&b(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function j(){if(!v)return;const S=ur.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:e,request:v};HH(function(k){a(k),N()},function(k){s(k),N()},E),v=null}"onloadend"in v?v.onloadend=j:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(j)},v.onabort=function(){v&&(s(new sn("Request aborted",sn.ECONNABORTED,e,v)),v=null)},v.onerror=function(A){const E=A&&A.message?A.message:"Network Error",_=new sn(E,sn.ERR_NETWORK,e,v);_.event=A||null,s(_),v=null},v.ontimeout=function(){let A=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const E=r.transitional||FH;r.timeoutErrorMessage&&(A=r.timeoutErrorMessage),s(new sn(A,E.clarifyTimeoutError?sn.ETIMEDOUT:sn.ECONNABORTED,e,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&ct.forEach(o.toJSON(),function(A,E){v.setRequestHeader(E,A)}),ct.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),l&&l!=="json"&&(v.responseType=r.responseType),d&&([p,b]=rv(d,!0),v.addEventListener("progress",p)),c&&v.upload&&([h,x]=rv(c),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(u=S=>{v&&(s(!S||S.type?new Gf(null,e,v):S),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const w=Yre(r.url);if(w&&Ds.protocols.indexOf(w)===-1){s(new sn("Unsupported protocol "+w+":",sn.ERR_BAD_REQUEST,e));return}v.send(i||null)})},aie=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let s=new AbortController,r;const i=function(d){if(!r){r=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof sn?u:new Gf(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new sn(`timeout ${t} of ms exceeded`,sn.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>ct.asap(l),c}},sie=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let s=0,r;for(;s<a;)r=s+t,yield e.slice(s,r),s=r},rie=async function*(e,t){for await(const a of iie(e))yield*sie(a,t)},iie=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:s}=await t.read();if(a)break;yield s}}finally{await t.cancel()}},fI=(e,t,a,s)=>{const r=rie(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await r.next();if(d){l(),c.close();return}let h=u.byteLength;if(a){let p=i+=h;a(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},hI=64*1024,{isFunction:Sy}=ct,oie=(({Request:e,Response:t})=>({Request:e,Response:t}))(ct.global),{ReadableStream:gI,TextEncoder:pI}=ct.global,xI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},lie=e=>{e=ct.merge.call({skipUndefined:!0},oie,e);const{fetch:t,Request:a,Response:s}=e,r=t?Sy(t):typeof fetch=="function",i=Sy(a),o=Sy(s);if(!r)return!1;const l=r&&Sy(gI),c=r&&(typeof pI=="function"?(b=>N=>b.encode(N))(new pI):async b=>new Uint8Array(await new a(b).arrayBuffer())),d=i&&l&&xI(()=>{let b=!1;const N=new a(Ds.origin,{body:new gI,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!N}),u=o&&l&&xI(()=>ct.isReadableStream(new s("").body)),h={stream:u&&(b=>b.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!h[b]&&(h[b]=(N,v)=>{let j=N&&N[b];if(j)return j.call(N);throw new sn(`Response type '${b}' is not supported`,sn.ERR_NOT_SUPPORT,v)})});const p=async b=>{if(b==null)return 0;if(ct.isBlob(b))return b.size;if(ct.isSpecCompliantForm(b))return(await new a(Ds.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(ct.isArrayBufferView(b)||ct.isArrayBuffer(b))return b.byteLength;if(ct.isURLSearchParams(b)&&(b=b+""),ct.isString(b))return(await c(b)).byteLength},x=async(b,N)=>{const v=ct.toFiniteNumber(b.getContentLength());return v??p(N)};return async b=>{let{url:N,method:v,data:j,signal:w,cancelToken:S,timeout:A,onDownloadProgress:E,onUploadProgress:_,responseType:k,headers:T,withCredentials:O="same-origin",fetchOptions:$}=WH(b),R=t||fetch;k=k?(k+"").toLowerCase():"text";let P=aie([w,S&&S.toAbortSignal()],A),I=null;const H=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let Q;try{if(_&&d&&v!=="get"&&v!=="head"&&(Q=await x(T,j))!==0){let ee=new a(N,{method:"POST",body:j,duplex:"half"}),U;if(ct.isFormData(j)&&(U=ee.headers.get("content-type"))&&T.setContentType(U),ee.body){const[je,be]=dI(Q,rv(uI(_)));j=fI(ee.body,hI,je,be)}}ct.isString(O)||(O=O?"include":"omit");const G=i&&"credentials"in a.prototype,K={...$,signal:P,method:v.toUpperCase(),headers:T.normalize().toJSON(),body:j,duplex:"half",credentials:G?O:void 0};I=i&&new a(N,K);let W=await(i?R(I,$):R(N,K));const J=u&&(k==="stream"||k==="response");if(u&&(E||J&&H)){const ee={};["status","statusText","headers"].forEach(le=>{ee[le]=W[le]});const U=ct.toFiniteNumber(W.headers.get("content-length")),[je,be]=E&&dI(U,rv(uI(E),!0))||[];W=new s(fI(W.body,hI,je,()=>{be&&be(),H&&H()}),ee)}k=k||"text";let Te=await h[ct.findKey(h,k)||"text"](W,b);return!J&&H&&H(),await new Promise((ee,U)=>{HH(ee,U,{data:Te,headers:ur.from(W.headers),status:W.status,statusText:W.statusText,config:b,request:I})})}catch(G){throw H&&H(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new sn("Network Error",sn.ERR_NETWORK,b,I),{cause:G.cause||G}):sn.from(G,G&&G.code,b,I)}}},cie=new Map,GH=e=>{let t=e?e.env:{};const{fetch:a,Request:s,Response:r}=t,i=[s,r,a];let o=i.length,l=o,c,d,u=cie;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:lie(t)),u=d;return d};GH();const LT={http:_re,xhr:nie,fetch:{get:GH}};ct.forEach(LT,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const yI=e=>`- ${e}`,die=e=>ct.isFunction(e)||e===null||e===!1,VH={getAdapter:(e,t)=>{e=ct.isArray(e)?e:[e];const{length:a}=e;let s,r;const i={};for(let o=0;o<a;o++){s=e[o];let l;if(r=s,!die(s)&&(r=LT[(l=String(s)).toLowerCase()],r===void 0))throw new sn(`Unknown adapter '${l}'`);if(r&&(ct.isFunction(r)||(r=r.get(t))))break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(yI).join(`
`):" "+yI(o[0]):"as no adapter specified";throw new sn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:LT};function TS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gf(null,e)}function bI(e){return TS(e),e.headers=ur.from(e.headers),e.data=AS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),VH.getAdapter(e.adapter||ax.adapter,e)(e).then(function(s){return TS(e),s.data=AS.call(e,e.transformResponse,s),s.headers=ur.from(s.headers),s},function(s){return BH(s)||(TS(e),s&&s.response&&(s.response.data=AS.call(e,e.transformResponse,s.response),s.response.headers=ur.from(s.response.headers))),Promise.reject(s)})}const YH="1.12.2",Uw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Uw[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const vI={};Uw.transitional=function(t,a,s){function r(i,o){return"[Axios v"+YH+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new sn(r(o," has been removed"+(a?" in "+a:"")),sn.ERR_DEPRECATED);return a&&!vI[o]&&(vI[o]=!0,console.warn(r(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,l):!0}};Uw.spelling=function(t){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function uie(e,t,a){if(typeof e!="object")throw new sn("options must be an object",sn.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new sn("option "+i+" must be "+c,sn.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new sn("Unknown option "+i,sn.ERR_BAD_OPTION)}}const Fb={assertOptions:uie,validators:Uw},ao=Fb.validators;let hu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new lI,response:new lI}}async request(t,a){try{return await this._request(t,a)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Su(this.defaults,a);const{transitional:s,paramsSerializer:r,headers:i}=a;s!==void 0&&Fb.assertOptions(s,{silentJSONParsing:ao.transitional(ao.boolean),forcedJSONParsing:ao.transitional(ao.boolean),clarifyTimeoutError:ao.transitional(ao.boolean)},!1),r!=null&&(ct.isFunction(r)?a.paramsSerializer={serialize:r}:Fb.assertOptions(r,{encode:ao.function,serialize:ao.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Fb.assertOptions(a,{baseUrl:ao.spelling("baseURL"),withXsrfToken:ao.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&ct.merge(i.common,i[a.method]);i&&ct.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),a.headers=ur.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(c=c&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let u,h=0,p;if(!c){const b=[bI.bind(this),void 0];for(b.unshift(...l),b.push(...d),p=b.length,u=Promise.resolve(a);h<p;)u=u.then(b[h++],b[h++]);return u}p=l.length;let x=a;for(;h<p;){const b=l[h++],N=l[h++];try{x=b(x)}catch(v){N.call(this,v);break}}try{u=bI.call(this,x)}catch(b){return Promise.reject(b)}for(h=0,p=d.length;h<p;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=Su(this.defaults,t);const a=qH(t.baseURL,t.url,t.allowAbsoluteUrls);return zH(a,t.params,t.paramsSerializer)}};ct.forEach(["delete","get","head","options"],function(t){hu.prototype[t]=function(a,s){return this.request(Su(s||{},{method:t,url:a,data:(s||{}).data}))}});ct.forEach(["post","put","patch"],function(t){function a(s){return function(i,o,l){return this.request(Su(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}hu.prototype[t]=a(),hu.prototype[t+"Form"]=a(!0)});let mie=class QH{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Gf(i,o,l),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=s=>{t.abort(s)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new QH(function(r){t=r}),cancel:t}}};function fie(e){return function(a){return e.apply(null,a)}}function hie(e){return ct.isObject(e)&&e.isAxiosError===!0}const PT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PT).forEach(([e,t])=>{PT[t]=e});function KH(e){const t=new hu(e),a=AH(hu.prototype.request,t);return ct.extend(a,hu.prototype,t,{allOwnKeys:!0}),ct.extend(a,t,null,{allOwnKeys:!0}),a.create=function(r){return KH(Su(e,r))},a}const Da=KH(ax);Da.Axios=hu;Da.CanceledError=Gf;Da.CancelToken=mie;Da.isCancel=BH;Da.VERSION=YH;Da.toFormData=Fw;Da.AxiosError=sn;Da.Cancel=Da.CanceledError;Da.all=function(t){return Promise.all(t)};Da.spread=fie;Da.isAxiosError=hie;Da.mergeConfig=Su;Da.AxiosHeaders=ur;Da.formToJSON=e=>UH(ct.isHTMLForm(e)?new FormData(e):e);Da.getAdapter=VH.getAdapter;Da.HttpStatusCode=PT;Da.default=Da;const{Axios:BGe,AxiosError:HGe,CanceledError:qGe,isCancel:WGe,CancelToken:GGe,VERSION:VGe,all:YGe,Cancel:QGe,isAxiosError:KGe,spread:XGe,toFormData:ZGe,AxiosHeaders:JGe,HttpStatusCode:eVe,formToJSON:tVe,getAdapter:nVe,mergeConfig:aVe}=Da,gie="https://crm.sari-sari.com",te=Da.create({baseURL:`${gie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});te.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));te.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const pie="isLoggedIn",_y="userRole",Qs=()=>{const[e,t]=f.useState(!!localStorage.getItem(_y)),[a,s]=f.useState(localStorage.getItem(_y)||""),r=wt();f.useEffect(()=>{const d=localStorage.getItem(_y);d?(t(!0),s(d)):o()},[]);const i=d=>{localStorage.setItem(_y,d.role),localStorage.setItem(pie,!0),t(!0),s(d.role)},o=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await te.post("/auth/logout")}catch(d){console.log("Failed to logout from server:",d)}o(),r("/")},userRole:a,setUserRole:s,login:d=>{i(d),d.role==="CEO"||d.role==="Admin"?r("/admin"):d.role==="Manager"?r("/manager/dashboard"):r("/")}}},ul=({children:e,requiredRole:t})=>{const{isLoggedIn:a,userRole:s}=Qs();if(!a)return n.jsx(li,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?n.jsx(li,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?n.jsx(li,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?n.jsx(li,{to:"/manager/dashboard",replace:!0}):s==="SALES"?n.jsx(li,{to:"/sales/dashboard",replace:!0}):n.jsx(li,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?n.jsx(li,{to:"/",replace:!0}):e};var XH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wI=bt.createContext&&bt.createContext(XH),xie=["attr","size","title"];function yie(e,t){if(e==null)return{};var a=bie(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function bie(e,t){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},iv.apply(this,arguments)}function NI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ov(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(a),!0).forEach(function(s){vie(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NI(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vie(e,t,a){return t=wie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wie(e){var t=Nie(e,"string");return typeof t=="symbol"?t:t+""}function Nie(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZH(e){return e&&e.map((t,a)=>bt.createElement(t.tag,ov({key:a},t.attr),ZH(t.child)))}function _t(e){return t=>bt.createElement(jie,iv({attr:ov({},e.attr)},t),ZH(e.child))}function jie(e){var t=a=>{var{attr:s,size:r,title:i}=e,o=yie(e,xie),l=r||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),bt.createElement("svg",iv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,o,{className:c,style:ov(ov({color:e.color||a.color},a.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&bt.createElement("title",null,i),e.children)};return wI!==void 0?bt.createElement(wI.Consumer,null,a=>t(a)):t(XH)}function Wi(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Wu(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function qs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function Bw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function DT(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function Cie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function Hw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function sx(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function Sie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function ES(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function _ie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function rx(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function Aie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(e)}function qw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function tn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Et(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function JH(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function pa(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Yt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function tL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function Tt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function Tie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Dt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Eie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function As(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function Gs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function e9(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Ql(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function ma(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function fa(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function _u(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function Au(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function hn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function kie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Ay(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 18v-6a9 9 0 0 1 18 0v6"},child:[]},{tag:"path",attr:{d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"},child:[]}]})(e)}function Lie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function ix(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function jI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(e)}function t9(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function nL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function So(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function na(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Pie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function ox(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function CI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Die(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function Oie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"},child:[]}]})(e)}function $s(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Lt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function SI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function yn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function aL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function Wt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function OT(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function sL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function Ww(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function od(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function Kl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function lr(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Gt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function kS(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function sd(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Mie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Oo(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Qn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function Mo(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function nn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function aa(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Rs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Qt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const n9=()=>{const[e,t]=f.useState(!1),a=f.useRef(null);return f.useEffect(()=>{const s=r=>{a.current&&!a.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),f.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),n.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:" CRM"})]})}),n.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[n.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),n.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[n.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),n.jsxs("div",{className:"flex sm:hidden items-center relative",ref:a,children:[n.jsx("button",{onClick:()=>t(!e),children:e?n.jsx(Qt,{className:"w-6 h-6 text-white"}):n.jsx(ox,{className:"w-6 h-6 text-white"})}),e&&n.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:n.jsxs("nav",{className:"flex flex-col",children:[n.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),n.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function Iie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function Xl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function $ie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function Gw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function Rie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function zie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const Fie=()=>{const e=["/image/crm1.png","/image/crm2.png","/image/crm3.png","/image/crm4.png","/image/crm5.png","/image/crm7.png","/image/crm6.png"],[t,a]=f.useState(0),[s,r]=f.useState(!1),i=f.useRef(null),[o,l]=f.useState(0),[c,d]=f.useState(0);f.useEffect(()=>(s||(i.current=setInterval(()=>{a(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const u=x=>l(x.targetTouches[0].clientX),h=x=>d(x.targetTouches[0].clientX),p=()=>{o-c>75&&a(x=>(x+1)%e.length),c-o>75&&a(x=>(x-1+e.length)%e.length)};return n.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"lg:text-left text-center",children:[n.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",n.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),n.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),n.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:u,onTouchMove:h,onTouchEnd:p,children:[e.map((x,b)=>n.jsx("img",{src:x,alt:`Slide ${b+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${b===t?"opacity-100":"opacity-0"}`},b)),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,b)=>n.jsx("button",{onClick:()=>a(b),className:`w-3 h-3 rounded-full transition-all ${b===t?"bg-accent":"bg-gray-400 opacity-50"}`},b))})]})]})]})})},Uie=({Icon:e,title:t,description:a})=>n.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[n.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:n.jsx(e,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),n.jsx("p",{className:"text-gray-400",children:a})]}),Bie=()=>{const e=[{Icon:zie,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:Iie,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:Rie,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:$ie,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return n.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),n.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,a)=>n.jsx(Uie,{...t},a))})]})})},Hie=()=>n.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),n.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),n.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),qie=()=>n.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-5 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsx("p",{className:"text-sm text-white mt-4",children:" 2026 Sari-Sari CRM"})]}),[{title:"Resources",links:["Security","Support"],href:"/resources"},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"],href:"/legal"}].map((e,t)=>n.jsxs("div",{children:[n.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),n.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((a,s)=>n.jsx("li",{children:n.jsx("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"hover:text-accent",children:a})},s))})]},t))]})}),Wie=()=>(f.useEffect(()=>{document.title="Sari-Sari CRM"},[]),n.jsxs("main",{className:"font-inter",children:[n.jsx(n9,{}),n.jsx(Fie,{}),n.jsx(Bie,{}),n.jsx(Hie,{}),n.jsx(qie,{})]}));function Gu(e){return _t({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Kn(e){return _t({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function yd(e){return _t({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class Pg extends Error{}Pg.prototype.name="InvalidTokenError";function Gie(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,a)=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function Vie(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Gie(t)}catch{return atob(t)}}function a9(e,t){if(typeof e!="string")throw new Pg("Invalid token specified: must be a string");t||(t={});const a=t.header===!0?0:1,s=e.split(".")[a];if(typeof s!="string")throw new Pg(`Invalid token specified: missing part #${a+1}`);let r;try{r=Vie(s)}catch(i){throw new Pg(`Invalid token specified: invalid base64 for part #${a+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new Pg(`Invalid token specified: invalid json for part #${a+1} (${i.message})`)}}function Wa(e,t,a=void 0){const s={};for(const r in e){const i=e[r];let o="",l=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(o+=(l===!0?"":" ")+t(d),l=!1,a&&a[d]&&(o+=" "+a[d]))}s[r]=o}return s}function Tu(e,...t){const a=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${a} for the full message.`}function Wn(e){if(typeof e!="string")throw new Error(Tu(7));return e.charAt(0).toUpperCase()+e.slice(1)}var LS={exports:{}},Bn={};var _I;function Yie(){if(_I)return Bn;_I=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function b(N){if(typeof N=="object"&&N!==null){var v=N.$$typeof;switch(v){case e:switch(N=N.type,N){case a:case r:case s:case c:case d:case p:return N;default:switch(N=N&&N.$$typeof,N){case o:case l:case h:case u:return N;case i:return N;default:return v}}case t:return v}}}return Bn.ContextConsumer=i,Bn.ContextProvider=o,Bn.Element=e,Bn.ForwardRef=l,Bn.Fragment=a,Bn.Lazy=h,Bn.Memo=u,Bn.Portal=t,Bn.Profiler=r,Bn.StrictMode=s,Bn.Suspense=c,Bn.SuspenseList=d,Bn.isContextConsumer=function(N){return b(N)===i},Bn.isContextProvider=function(N){return b(N)===o},Bn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Bn.isForwardRef=function(N){return b(N)===l},Bn.isFragment=function(N){return b(N)===a},Bn.isLazy=function(N){return b(N)===h},Bn.isMemo=function(N){return b(N)===u},Bn.isPortal=function(N){return b(N)===t},Bn.isProfiler=function(N){return b(N)===r},Bn.isStrictMode=function(N){return b(N)===s},Bn.isSuspense=function(N){return b(N)===c},Bn.isSuspenseList=function(N){return b(N)===d},Bn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===a||N===r||N===s||N===c||N===d||typeof N=="object"&&N!==null&&(N.$$typeof===h||N.$$typeof===u||N.$$typeof===o||N.$$typeof===i||N.$$typeof===l||N.$$typeof===x||N.getModuleId!==void 0)},Bn.typeOf=b,Bn}var AI;function Qie(){return AI||(AI=1,LS.exports=Yie()),LS.exports}var rL=Qie();function wo(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s9(e){if(f.isValidElement(e)||rL.isValidElementType(e)||!wo(e))return e;const t={};return Object.keys(e).forEach(a=>{t[a]=s9(e[a])}),t}function $r(e,t,a={clone:!0}){const s=a.clone?{...e}:e;return wo(e)&&wo(t)&&Object.keys(t).forEach(r=>{f.isValidElement(t[r])||rL.isValidElementType(t[r])?s[r]=t[r]:wo(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&wo(e[r])?s[r]=$r(e[r],t[r],a):a.clone?s[r]=wo(t[r])?s9(t[r]):t[r]:s[r]=t[r]}),s}function Vg(e,t){return t?$r(e,t,{clone:!1}):e}function TI(e,t){if(!e.containerQueries)return t;const a=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return a.length?a.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function Kie(e,t){return t==="@"||t.startsWith("@")&&(e.some(a=>t.startsWith(`@${a}`))||!!t.match(/^@\d/))}function Xie(e,t){const a=t.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,r]=a,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function Zie(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function a(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(a(s,i),s);return a(r),{...e,containerQueries:r}}const Vw={xs:0,sm:600,md:900,lg:1200,xl:1536},EI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Vw[e]}px)`},Jie={containerQueries:e=>({up:t=>{let a=typeof t=="number"?t:Vw[t]||t;return typeof a=="number"&&(a=`${a}px`),e?`@container ${e} (min-width:${a})`:`@container (min-width:${a})`}})};function Il(e,t,a){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||EI;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=a(t[c]),o),{})}if(typeof t=="object"){const i=s.breakpoints||EI;return Object.keys(t).reduce((o,l)=>{if(Kie(i.keys,l)){const c=Xie(s.containerQueries?s:Jie,l);c&&(o[c]=a(t[l],l))}else if(Object.keys(i.values||Vw).includes(l)){const c=i.up(l);o[c]=a(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return a(t)}function eoe(e={}){return e.keys?.reduce((a,s)=>{const r=e.up(s);return a[r]={},a},{})||{}}function kI(e,t){return e.reduce((a,s)=>{const r=a[s];return(!r||Object.keys(r).length===0)&&delete a[s],a},t)}function Yw(e,t,a=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&a){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function lv(e,t,a,s=a){let r;return typeof e=="function"?r=e(a):Array.isArray(e)?r=e[a]||s:r=Yw(e,a)||s,t&&(r=t(r,s,e)),r}function Oa(e){const{prop:t,cssProperty:a=e.prop,themeKey:s,transform:r}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,d=Yw(c,s)||{};return Il(o,l,h=>{let p=lv(d,r,h);return h===p&&typeof h=="string"&&(p=lv(d,r,`${t}${h==="default"?"":Wn(h)}`,h)),a===!1?p:{[a]:p}})};return i.propTypes={},i.filterProps=[t],i}function toe(e){const t={};return a=>(t[a]===void 0&&(t[a]=e(a)),t[a])}const noe={m:"margin",p:"padding"},aoe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},LI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},soe=toe(e=>{if(e.length>2)if(LI[e])e=LI[e];else return[e];const[t,a]=e.split(""),s=noe[t],r=aoe[a]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),iL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],oL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...iL,...oL];function lx(e,t,a,s){const r=Yw(e,t,!0)??a;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=r[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof r=="function"?r:()=>{}}function lL(e){return lx(e,"spacing",8)}function cx(e,t){return typeof t=="string"||t==null?t:e(t)}function roe(e,t){return a=>e.reduce((s,r)=>(s[r]=cx(t,a),s),{})}function ioe(e,t,a,s){if(!t.includes(a))return null;const r=soe(a),i=roe(r,s),o=e[a];return Il(e,o,i)}function r9(e,t){const a=lL(e.theme);return Object.keys(e).map(s=>ioe(e,t,s,a)).reduce(Vg,{})}function wa(e){return r9(e,iL)}wa.propTypes={};wa.filterProps=iL;function Na(e){return r9(e,oL)}Na.propTypes={};Na.filterProps=oL;function Qw(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),a=s=>Object.keys(s).reduce((r,i)=>t[i]?Vg(r,t[i](s)):r,{});return a.propTypes={},a.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),a}function ui(e){return typeof e!="number"?e:`${e}px solid`}function Ci(e,t){return Oa({prop:e,themeKey:"borders",transform:t})}const ooe=Ci("border",ui),loe=Ci("borderTop",ui),coe=Ci("borderRight",ui),doe=Ci("borderBottom",ui),uoe=Ci("borderLeft",ui),moe=Ci("borderColor"),foe=Ci("borderTopColor"),hoe=Ci("borderRightColor"),goe=Ci("borderBottomColor"),poe=Ci("borderLeftColor"),xoe=Ci("outline",ui),yoe=Ci("outlineColor"),Kw=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=lx(e.theme,"shape.borderRadius",4),a=s=>({borderRadius:cx(t,s)});return Il(e,e.borderRadius,a)}return null};Kw.propTypes={};Kw.filterProps=["borderRadius"];Qw(ooe,loe,coe,doe,uoe,moe,foe,hoe,goe,poe,Kw,xoe,yoe);const Xw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=lx(e.theme,"spacing",8),a=s=>({gap:cx(t,s)});return Il(e,e.gap,a)}return null};Xw.propTypes={};Xw.filterProps=["gap"];const Zw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=lx(e.theme,"spacing",8),a=s=>({columnGap:cx(t,s)});return Il(e,e.columnGap,a)}return null};Zw.propTypes={};Zw.filterProps=["columnGap"];const Jw=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=lx(e.theme,"spacing",8),a=s=>({rowGap:cx(t,s)});return Il(e,e.rowGap,a)}return null};Jw.propTypes={};Jw.filterProps=["rowGap"];const boe=Oa({prop:"gridColumn"}),voe=Oa({prop:"gridRow"}),woe=Oa({prop:"gridAutoFlow"}),Noe=Oa({prop:"gridAutoColumns"}),joe=Oa({prop:"gridAutoRows"}),Coe=Oa({prop:"gridTemplateColumns"}),Soe=Oa({prop:"gridTemplateRows"}),_oe=Oa({prop:"gridTemplateAreas"}),Aoe=Oa({prop:"gridArea"});Qw(Xw,Zw,Jw,boe,voe,woe,Noe,joe,Coe,Soe,_oe,Aoe);function mf(e,t){return t==="grey"?t:e}const Toe=Oa({prop:"color",themeKey:"palette",transform:mf}),Eoe=Oa({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:mf}),koe=Oa({prop:"backgroundColor",themeKey:"palette",transform:mf});Qw(Toe,Eoe,koe);function Or(e){return e<=1&&e!==0?`${e*100}%`:e}const Loe=Oa({prop:"width",transform:Or}),cL=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=a=>{const s=e.theme?.breakpoints?.values?.[a]||Vw[a];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Or(a)}};return Il(e,e.maxWidth,t)}return null};cL.filterProps=["maxWidth"];const Poe=Oa({prop:"minWidth",transform:Or}),Doe=Oa({prop:"height",transform:Or}),Ooe=Oa({prop:"maxHeight",transform:Or}),Moe=Oa({prop:"minHeight",transform:Or});Oa({prop:"size",cssProperty:"width",transform:Or});Oa({prop:"size",cssProperty:"height",transform:Or});const Ioe=Oa({prop:"boxSizing"});Qw(Loe,cL,Poe,Doe,Ooe,Moe,Ioe);const dx={border:{themeKey:"borders",transform:ui},borderTop:{themeKey:"borders",transform:ui},borderRight:{themeKey:"borders",transform:ui},borderBottom:{themeKey:"borders",transform:ui},borderLeft:{themeKey:"borders",transform:ui},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ui},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Kw},color:{themeKey:"palette",transform:mf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:mf},backgroundColor:{themeKey:"palette",transform:mf},p:{style:Na},pt:{style:Na},pr:{style:Na},pb:{style:Na},pl:{style:Na},px:{style:Na},py:{style:Na},padding:{style:Na},paddingTop:{style:Na},paddingRight:{style:Na},paddingBottom:{style:Na},paddingLeft:{style:Na},paddingX:{style:Na},paddingY:{style:Na},paddingInline:{style:Na},paddingInlineStart:{style:Na},paddingInlineEnd:{style:Na},paddingBlock:{style:Na},paddingBlockStart:{style:Na},paddingBlockEnd:{style:Na},m:{style:wa},mt:{style:wa},mr:{style:wa},mb:{style:wa},ml:{style:wa},mx:{style:wa},my:{style:wa},margin:{style:wa},marginTop:{style:wa},marginRight:{style:wa},marginBottom:{style:wa},marginLeft:{style:wa},marginX:{style:wa},marginY:{style:wa},marginInline:{style:wa},marginInlineStart:{style:wa},marginInlineEnd:{style:wa},marginBlock:{style:wa},marginBlockStart:{style:wa},marginBlockEnd:{style:wa},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Xw},rowGap:{style:Jw},columnGap:{style:Zw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Or},maxWidth:{style:cL},minWidth:{transform:Or},height:{transform:Or},maxHeight:{transform:Or},minHeight:{transform:Or},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function $oe(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),a=new Set(t);return e.every(s=>a.size===Object.keys(s).length)}function Roe(e,t){return typeof e=="function"?e(t):e}function zoe(){function e(a,s,r,i){const o={[a]:s,theme:r},l=i[a];if(!l)return{[a]:s};const{cssProperty:c=a,themeKey:d,transform:u,style:h}=l;if(s==null)return null;if(d==="typography"&&s==="inherit")return{[a]:s};const p=Yw(r,d)||{};return h?h(o):Il(o,s,b=>{let N=lv(p,u,b);return b===N&&typeof b=="string"&&(N=lv(p,u,`${a}${b==="default"?"":Wn(b)}`,b)),c===!1?N:{[c]:N}})}function t(a){const{sx:s,theme:r={},nested:i}=a||{};if(!s)return null;const o=r.unstable_sxConfig??dx;function l(c){let d=c;if(typeof c=="function")d=c(r);else if(typeof c!="object")return c;if(!d)return null;const u=eoe(r.breakpoints),h=Object.keys(u);let p=u;return Object.keys(d).forEach(x=>{const b=Roe(d[x],r);if(b!=null)if(typeof b=="object")if(o[x])p=Vg(p,e(x,b,r,o));else{const N=Il({theme:r},b,v=>({[x]:v}));$oe(N,b)?p[x]=t({sx:b,theme:r,nested:!0}):p=Vg(p,N)}else p=Vg(p,e(x,b,r,o))}),!i&&r.modularCssLayers?{"@layer sx":TI(r,kI(h,p))}:TI(r,kI(h,p))}return Array.isArray(s)?s.map(l):l(s)}return t}const Nf=zoe();Nf.filterProps=["sx"];const Foe=e=>{const t={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??dx;return Object.keys(e).forEach(s=>{a[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function Uoe(e){const{sx:t,...a}=e,{systemProps:s,otherProps:r}=Foe(a);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return wo(l)?{...s,...l}:s}:i={...s,...t},{...r,sx:i}}function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ye.apply(null,arguments)}function Boe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Hoe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var qoe=(function(){function e(a){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Hoe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Boe(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),Es="-ms-",cv="-moz-",Tn="-webkit-",i9="comm",dL="rule",uL="decl",Woe="@import",o9="@keyframes",Goe="@layer",Voe=Math.abs,eN=String.fromCharCode,Yoe=Object.assign;function Qoe(e,t){return _s(e,0)^45?(((t<<2^_s(e,0))<<2^_s(e,1))<<2^_s(e,2))<<2^_s(e,3):0}function l9(e){return e.trim()}function Koe(e,t){return(e=t.exec(e))?e[0]:e}function En(e,t,a){return e.replace(t,a)}function MT(e,t){return e.indexOf(t)}function _s(e,t){return e.charCodeAt(t)|0}function cp(e,t,a){return e.slice(t,a)}function yo(e){return e.length}function mL(e){return e.length}function Ty(e,t){return t.push(e),e}function Xoe(e,t){return e.map(t).join("")}var tN=1,jf=1,c9=0,gr=0,Ua=0,Vf="";function nN(e,t,a,s,r,i,o){return{value:e,root:t,parent:a,type:s,props:r,children:i,line:tN,column:jf,length:o,return:""}}function ig(e,t){return Yoe(nN("",null,null,"",null,null,0),e,{length:-e.length},t)}function Zoe(){return Ua}function Joe(){return Ua=gr>0?_s(Vf,--gr):0,jf--,Ua===10&&(jf=1,tN--),Ua}function Rr(){return Ua=gr<c9?_s(Vf,gr++):0,jf++,Ua===10&&(jf=1,tN++),Ua}function To(){return _s(Vf,gr)}function Ub(){return gr}function ux(e,t){return cp(Vf,e,t)}function dp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function d9(e){return tN=jf=1,c9=yo(Vf=e),gr=0,[]}function u9(e){return Vf="",e}function Bb(e){return l9(ux(gr-1,IT(e===91?e+2:e===40?e+1:e)))}function ele(e){for(;(Ua=To())&&Ua<33;)Rr();return dp(e)>2||dp(Ua)>3?"":" "}function tle(e,t){for(;--t&&Rr()&&!(Ua<48||Ua>102||Ua>57&&Ua<65||Ua>70&&Ua<97););return ux(e,Ub()+(t<6&&To()==32&&Rr()==32))}function IT(e){for(;Rr();)switch(Ua){case e:return gr;case 34:case 39:e!==34&&e!==39&&IT(Ua);break;case 40:e===41&&IT(e);break;case 92:Rr();break}return gr}function nle(e,t){for(;Rr()&&e+Ua!==57;)if(e+Ua===84&&To()===47)break;return"/*"+ux(t,gr-1)+"*"+eN(e===47?e:Rr())}function ale(e){for(;!dp(To());)Rr();return ux(e,gr)}function sle(e){return u9(Hb("",null,null,null,[""],e=d9(e),0,[0],e))}function Hb(e,t,a,s,r,i,o,l,c){for(var d=0,u=0,h=o,p=0,x=0,b=0,N=1,v=1,j=1,w=0,S="",A=r,E=i,_=s,k=S;v;)switch(b=w,w=Rr()){case 40:if(b!=108&&_s(k,h-1)==58){MT(k+=En(Bb(w),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:k+=Bb(w);break;case 9:case 10:case 13:case 32:k+=ele(b);break;case 92:k+=tle(Ub()-1,7);continue;case 47:switch(To()){case 42:case 47:Ty(rle(nle(Rr(),Ub()),t,a),c);break;default:k+="/"}break;case 123*N:l[d++]=yo(k)*j;case 125*N:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+u:j==-1&&(k=En(k,/\f/g,"")),x>0&&yo(k)-h&&Ty(x>32?DI(k+";",s,a,h-1):DI(En(k," ","")+";",s,a,h-2),c);break;case 59:k+=";";default:if(Ty(_=PI(k,t,a,d,u,r,l,S,A=[],E=[],h),i),w===123)if(u===0)Hb(k,t,_,_,A,i,h,l,E);else switch(p===99&&_s(k,3)===110?100:p){case 100:case 108:case 109:case 115:Hb(e,_,_,s&&Ty(PI(e,_,_,0,0,r,l,S,r,A=[],h),E),r,E,h,l,s?A:E);break;default:Hb(k,_,_,_,[""],E,0,l,E)}}d=u=x=0,N=j=1,S=k="",h=o;break;case 58:h=1+yo(k),x=b;default:if(N<1){if(w==123)--N;else if(w==125&&N++==0&&Joe()==125)continue}switch(k+=eN(w),w*N){case 38:j=u>0?1:(k+="\f",-1);break;case 44:l[d++]=(yo(k)-1)*j,j=1;break;case 64:To()===45&&(k+=Bb(Rr())),p=To(),u=h=yo(S=k+=ale(Ub())),w++;break;case 45:b===45&&yo(k)==2&&(N=0)}}return i}function PI(e,t,a,s,r,i,o,l,c,d,u){for(var h=r-1,p=r===0?i:[""],x=mL(p),b=0,N=0,v=0;b<s;++b)for(var j=0,w=cp(e,h+1,h=Voe(N=o[b])),S=e;j<x;++j)(S=l9(N>0?p[j]+" "+w:En(w,/&\f/g,p[j])))&&(c[v++]=S);return nN(e,t,a,r===0?dL:l,c,d,u)}function rle(e,t,a){return nN(e,t,a,i9,eN(Zoe()),cp(e,2,-2),0)}function DI(e,t,a,s){return nN(e,t,a,uL,cp(e,0,s),cp(e,s+1,-1),s)}function ff(e,t){for(var a="",s=mL(e),r=0;r<s;r++)a+=t(e[r],r,e,t)||"";return a}function ile(e,t,a,s){switch(e.type){case Goe:if(e.children.length)break;case Woe:case uL:return e.return=e.return||e.value;case i9:return"";case o9:return e.return=e.value+"{"+ff(e.children,s)+"}";case dL:e.value=e.props.join(",")}return yo(a=ff(e.children,s))?e.return=e.value+"{"+a+"}":""}function ole(e){var t=mL(e);return function(a,s,r,i){for(var o="",l=0;l<t;l++)o+=e[l](a,s,r,i)||"";return o}}function lle(e){return function(t){t.root||(t=t.return)&&e(t)}}function m9(e){var t=Object.create(null);return function(a){return t[a]===void 0&&(t[a]=e(a)),t[a]}}var cle=function(t,a,s){for(var r=0,i=0;r=i,i=To(),r===38&&i===12&&(a[s]=1),!dp(i);)Rr();return ux(t,gr)},dle=function(t,a){var s=-1,r=44;do switch(dp(r)){case 0:r===38&&To()===12&&(a[s]=1),t[s]+=cle(gr-1,a,s);break;case 2:t[s]+=Bb(r);break;case 4:if(r===44){t[++s]=To()===58?"&\f":"",a[s]=t[s].length;break}default:t[s]+=eN(r)}while(r=Rr());return t},ule=function(t,a){return u9(dle(d9(t),a))},OI=new WeakMap,mle=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var a=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&a.charCodeAt(0)!==58&&!OI.get(s))&&!r){OI.set(t,!0);for(var i=[],o=ule(a,i),l=s.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},fle=function(t){if(t.type==="decl"){var a=t.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(t.return="",t.value="")}};function f9(e,t){switch(Qoe(e,t)){case 5103:return Tn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Tn+e+cv+e+Es+e+e;case 6828:case 4268:return Tn+e+Es+e+e;case 6165:return Tn+e+Es+"flex-"+e+e;case 5187:return Tn+e+En(e,/(\w+).+(:[^]+)/,Tn+"box-$1$2"+Es+"flex-$1$2")+e;case 5443:return Tn+e+Es+"flex-item-"+En(e,/flex-|-self/,"")+e;case 4675:return Tn+e+Es+"flex-line-pack"+En(e,/align-content|flex-|-self/,"")+e;case 5548:return Tn+e+Es+En(e,"shrink","negative")+e;case 5292:return Tn+e+Es+En(e,"basis","preferred-size")+e;case 6060:return Tn+"box-"+En(e,"-grow","")+Tn+e+Es+En(e,"grow","positive")+e;case 4554:return Tn+En(e,/([^-])(transform)/g,"$1"+Tn+"$2")+e;case 6187:return En(En(En(e,/(zoom-|grab)/,Tn+"$1"),/(image-set)/,Tn+"$1"),e,"")+e;case 5495:case 3959:return En(e,/(image-set\([^]*)/,Tn+"$1$`$1");case 4968:return En(En(e,/(.+:)(flex-)?(.*)/,Tn+"box-pack:$3"+Es+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tn+e+e;case 4095:case 3583:case 4068:case 2532:return En(e,/(.+)-inline(.+)/,Tn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(yo(e)-1-t>6)switch(_s(e,t+1)){case 109:if(_s(e,t+4)!==45)break;case 102:return En(e,/(.+:)(.+)-([^]+)/,"$1"+Tn+"$2-$3$1"+cv+(_s(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~MT(e,"stretch")?f9(En(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(_s(e,t+1)!==115)break;case 6444:switch(_s(e,yo(e)-3-(~MT(e,"!important")&&10))){case 107:return En(e,":",":"+Tn)+e;case 101:return En(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tn+(_s(e,14)===45?"inline-":"")+"box$3$1"+Tn+"$2$3$1"+Es+"$2box$3")+e}break;case 5936:switch(_s(e,t+11)){case 114:return Tn+e+Es+En(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Tn+e+Es+En(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Tn+e+Es+En(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Tn+e+Es+e+e}return e}var hle=function(t,a,s,r){if(t.length>-1&&!t.return)switch(t.type){case uL:t.return=f9(t.value,t.length);break;case o9:return ff([ig(t,{value:En(t.value,"@","@"+Tn)})],r);case dL:if(t.length)return Xoe(t.props,function(i){switch(Koe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ff([ig(t,{props:[En(i,/:(read-\w+)/,":"+cv+"$1")]})],r);case"::placeholder":return ff([ig(t,{props:[En(i,/:(plac\w+)/,":"+Tn+"input-$1")]}),ig(t,{props:[En(i,/:(plac\w+)/,":"+cv+"$1")]}),ig(t,{props:[En(i,/:(plac\w+)/,Es+"input-$1")]})],r)}return""})}},gle=[hle],ple=function(t){var a=t.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(N){var v=N.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var r=t.stylisPlugins||gle,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(N){for(var v=N.getAttribute("data-emotion").split(" "),j=1;j<v.length;j++)i[v[j]]=!0;l.push(N)});var c,d=[mle,fle];{var u,h=[ile,lle(function(N){u.insert(N)})],p=ole(d.concat(r,h)),x=function(v){return ff(sle(v),p)};c=function(v,j,w,S){u=w,x(v?v+"{"+j.styles+"}":j.styles),S&&(b.inserted[j.name]=!0)}}var b={key:a,sheet:new qoe({key:a,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return b.sheet.hydrate(l),b},PS={exports:{}},kn={};var MI;function xle(){if(MI)return kn;MI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,b=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(E){if(typeof E=="object"&&E!==null){var _=E.$$typeof;switch(_){case t:switch(E=E.type,E){case c:case d:case s:case i:case r:case h:return E;default:switch(E=E&&E.$$typeof,E){case l:case u:case b:case x:case o:return E;default:return _}}case a:return _}}}function A(E){return S(E)===d}return kn.AsyncMode=c,kn.ConcurrentMode=d,kn.ContextConsumer=l,kn.ContextProvider=o,kn.Element=t,kn.ForwardRef=u,kn.Fragment=s,kn.Lazy=b,kn.Memo=x,kn.Portal=a,kn.Profiler=i,kn.StrictMode=r,kn.Suspense=h,kn.isAsyncMode=function(E){return A(E)||S(E)===c},kn.isConcurrentMode=A,kn.isContextConsumer=function(E){return S(E)===l},kn.isContextProvider=function(E){return S(E)===o},kn.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},kn.isForwardRef=function(E){return S(E)===u},kn.isFragment=function(E){return S(E)===s},kn.isLazy=function(E){return S(E)===b},kn.isMemo=function(E){return S(E)===x},kn.isPortal=function(E){return S(E)===a},kn.isProfiler=function(E){return S(E)===i},kn.isStrictMode=function(E){return S(E)===r},kn.isSuspense=function(E){return S(E)===h},kn.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===s||E===d||E===i||E===r||E===h||E===p||typeof E=="object"&&E!==null&&(E.$$typeof===b||E.$$typeof===x||E.$$typeof===o||E.$$typeof===l||E.$$typeof===u||E.$$typeof===v||E.$$typeof===j||E.$$typeof===w||E.$$typeof===N)},kn.typeOf=S,kn}var II;function yle(){return II||(II=1,PS.exports=xle()),PS.exports}var DS,$I;function ble(){if($I)return DS;$I=1;var e=yle(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function o(b){return e.isMemo(b)?r:i[b.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;function x(b,N,v){if(typeof N!="string"){if(p){var j=h(N);j&&j!==p&&x(b,j,v)}var w=c(N);d&&(w=w.concat(d(N)));for(var S=o(b),A=o(N),E=0;E<w.length;++E){var _=w[E];if(!a[_]&&!(v&&v[_])&&!(A&&A[_])&&!(S&&S[_])){var k=u(N,_);try{l(b,_,k)}catch{}}}}return b}return DS=x,DS}ble();var vle=!0;function h9(e,t,a){var s="";return a.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var fL=function(t,a,s){var r=t.key+"-"+a.name;(s===!1||vle===!1)&&t.registered[r]===void 0&&(t.registered[r]=a.styles)},g9=function(t,a,s){fL(t,a,s);var r=t.key+"-"+a.name;if(t.inserted[a.name]===void 0){var i=a;do t.insert(a===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function wle(e){for(var t=0,a,s=0,r=e.length;r>=4;++s,r-=4)a=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,t=(a&65535)*1540483477+((a>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Nle={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jle=/[A-Z]|^ms/g,Cle=/_EMO_([^_]+?)_([^]*?)_EMO_/g,p9=function(t){return t.charCodeAt(1)===45},RI=function(t){return t!=null&&typeof t!="boolean"},OS=m9(function(e){return p9(e)?e:e.replace(jle,"-$&").toLowerCase()}),zI=function(t,a){switch(t){case"animation":case"animationName":if(typeof a=="string")return a.replace(Cle,function(s,r,i){return bo={name:r,styles:i,next:bo},r})}return Nle[t]!==1&&!p9(t)&&typeof a=="number"&&a!==0?a+"px":a};function up(e,t,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var r=a;if(r.anim===1)return bo={name:r.name,styles:r.styles,next:bo},r.name;var i=a;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)bo={name:o.name,styles:o.styles,next:bo},o=o.next;var l=i.styles+";";return l}return Sle(e,t,a)}case"function":{if(e!==void 0){var c=bo,d=a(e);return bo=c,up(e,t,d)}break}}var u=a;if(t==null)return u;var h=t[u];return h!==void 0?h:u}function Sle(e,t,a){var s="";if(Array.isArray(a))for(var r=0;r<a.length;r++)s+=up(e,t,a[r])+";";else for(var i in a){var o=a[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=i+"{"+t[l]+"}":RI(l)&&(s+=OS(i)+":"+zI(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)RI(o[c])&&(s+=OS(i)+":"+zI(i,o[c])+";");else{var d=up(e,t,o);switch(i){case"animation":case"animationName":{s+=OS(i)+":"+d+";";break}default:s+=i+"{"+d+"}"}}}return s}var FI=/label:\s*([^\s;{]+)\s*(;|$)/g,bo;function aN(e,t,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";bo=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=up(a,t,i);else{var o=i;r+=o[0]}for(var l=1;l<e.length;l++)if(r+=up(a,t,e[l]),s){var c=i;r+=c[l]}FI.lastIndex=0;for(var d="",u;(u=FI.exec(r))!==null;)d+="-"+u[1];var h=wle(r)+d;return{name:h,styles:r,next:bo}}var _le=function(t){return t()},Ale=ju.useInsertionEffect?ju.useInsertionEffect:!1,x9=Ale||_le,y9=f.createContext(typeof HTMLElement<"u"?ple({key:"css"}):null);y9.Provider;var b9=function(t){return f.forwardRef(function(a,s){var r=f.useContext(y9);return t(a,r,s)})},hL=f.createContext({}),gL={}.hasOwnProperty,$T="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Tle=function(t,a){var s={};for(var r in a)gL.call(a,r)&&(s[r]=a[r]);return s[$T]=t,s},Ele=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return fL(a,s,r),x9(function(){return g9(a,s,r)}),null},kle=b9(function(e,t,a){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[$T],i=[s],o="";typeof e.className=="string"?o=h9(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=aN(i,void 0,f.useContext(hL));o+=t.key+"-"+l.name;var c={};for(var d in e)gL.call(e,d)&&d!=="css"&&d!==$T&&(c[d]=e[d]);return c.className=o,a&&(c.ref=a),f.createElement(f.Fragment,null,f.createElement(Ele,{cache:t,serialized:l,isStringTag:typeof r=="string"}),f.createElement(r,c))}),Lle=kle,UI=function(t,a){var s=arguments;if(a==null||!gL.call(a,"css"))return f.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=Lle,i[1]=Tle(t,a);for(var o=2;o<r;o++)i[o]=s[o];return f.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(UI||(UI={}));function pL(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return aN(t)}function mx(){var e=pL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Ple=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Dle=m9(function(e){return Ple.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Ole=Dle,Mle=function(t){return t!=="theme"},BI=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Ole:Mle},HI=function(t,a,s){var r;if(a){var i=a.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},Ile=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return fL(a,s,r),x9(function(){return g9(a,s,r)}),null},$le=function e(t,a){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,o;a!==void 0&&(i=a.label,o=a.target);var l=HI(t,a,s),c=l||BI(r),d=!c("as");return function(){var u=arguments,h=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{var p=u[0];h.push(p[0]);for(var x=u.length,b=1;b<x;b++)h.push(u[b],p[b])}var N=b9(function(v,j,w){var S=d&&v.as||r,A="",E=[],_=v;if(v.theme==null){_={};for(var k in v)_[k]=v[k];_.theme=f.useContext(hL)}typeof v.className=="string"?A=h9(j.registered,E,v.className):v.className!=null&&(A=v.className+" ");var T=aN(h.concat(E),j.registered,_);A+=j.key+"-"+T.name,o!==void 0&&(A+=" "+o);var O=d&&l===void 0?BI(S):c,$={};for(var R in v)d&&R==="as"||O(R)&&($[R]=v[R]);return $.className=A,w&&($.ref=w),f.createElement(f.Fragment,null,f.createElement(Ile,{cache:j,serialized:T,isStringTag:typeof S=="string"}),f.createElement(S,$))});return N.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=r,N.__emotion_styles=h,N.__emotion_forwardProp=l,Object.defineProperty(N,"toString",{value:function(){return"."+o}}),N.withComponent=function(v,j){var w=e(v,Ye({},a,j,{shouldForwardProp:HI(N,j,!0)}));return w.apply(void 0,h)},N}},Rle=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],RT=$le.bind(null);Rle.forEach(function(e){RT[e]=RT(e)});function zle(e,t){return RT(e,t)}function Fle(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const qI=[];function gu(e){return qI[0]=e,aN(qI)}const Ule=e=>{const t=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return t.sort((a,s)=>a.val-s.val),t.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function Ble(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...r}=e,i=Ule(t),o=Object.keys(i);function l(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${a})`}function d(p,x){const b=o.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a}) and (max-width:${(b!==-1&&typeof t[o[b]]=="number"?t[o[b]]:x)-s/100}${a})`}function u(p){return o.indexOf(p)+1<o.length?d(p,o[o.indexOf(p)+1]):l(p)}function h(p){const x=o.indexOf(p);return x===0?l(o[1]):x===o.length-1?c(o[x]):d(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:d,only:u,not:h,unit:a,...r}}const Hle={borderRadius:4};function v9(e=8,t=lL({spacing:e})){if(e.mui)return e;const a=(...s)=>(s.length===0?[1]:s).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return a.mui=!0,a}function qle(e,t){const a=this;if(a.vars){if(!a.colorSchemes?.[e]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return a.palette.mode===e?t:{}}function xL(e={},...t){const{breakpoints:a={},palette:s={},spacing:r,shape:i={},...o}=e,l=Ble(a),c=v9(r);let d=$r({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...Hle,...i}},o);return d=Zie(d),d.applyStyles=qle,d=t.reduce((u,h)=>$r(u,h),d),d.unstable_sxConfig={...dx,...o?.unstable_sxConfig},d.unstable_sx=function(h){return Nf({sx:h,theme:this})},d}function Wle(e){return Object.keys(e).length===0}function w9(e=null){const t=f.useContext(hL);return!t||Wle(t)?e:t}const Gle=xL();function N9(e=Gle){return w9(e)}const WI=e=>e,Vle=()=>{let e=WI;return{configure(t){e=t},generate(t){return e(t)},reset(){e=WI}}},Yle=Vle(),Qle={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ga(e,t,a="Mui"){const s=Qle[t];return s?`${a}-${s}`:`${Yle.generate(e)}-${t}`}function _a(e,t,a="Mui"){const s={};return t.forEach(r=>{s[r]=Ga(e,r,a)}),s}function j9(e){const{variants:t,...a}=e,s={variants:t,style:gu(a),isProcessed:!0};return s.style===a||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=gu(r.style))}),s}const Kle=xL();function qb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function iu(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Xle(e){return e?(t,a)=>a[e]:null}function Zle(e,t,a){e.theme=tce(e.theme)?a:e.theme[t]||e.theme}function Wb(e,t,a){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>Wb(e,r,a));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=a?iu(s.style,a):s.style;else{const{variants:i,...o}=s;r=a?iu(gu(o),a):o}return C9(e,s.variants,[r],a)}return s?.isProcessed?a?iu(gu(s.style),a):s.style:a?iu(gu(s),a):s}function C9(e,t,a=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(r))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&e.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},a.push(s?iu(gu(o.style(r)),s):o.style(r))):a.push(s?iu(gu(o.style),s):o.style)}return a}function Jle(e={}){const{themeId:t,defaultTheme:a=Kle,rootShouldForwardProp:s=qb,slotShouldForwardProp:r=qb}=e;function i(l){Zle(l,t,a)}return(l,c={})=>{Fle(l,_=>_.filter(k=>k!==Nf));const{name:d,slot:u,skipVariantsResolver:h,skipSx:p,overridesResolver:x=Xle(ace(u)),...b}=c,N=d&&d.startsWith("Mui")||u?"components":"custom",v=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,j=p||!1;let w=qb;u==="Root"||u==="root"?w=s:u?w=r:nce(l)&&(w=void 0);const S=zle(l,{shouldForwardProp:w,label:ece(),...b}),A=_=>{if(_.__emotion_real===_)return _;if(typeof _=="function")return function(T){return Wb(T,_,T.theme.modularCssLayers?N:void 0)};if(wo(_)){const k=j9(_);return function(O){return k.variants?Wb(O,k,O.theme.modularCssLayers?N:void 0):O.theme.modularCssLayers?iu(k.style,N):k.style}}return _},E=(..._)=>{const k=[],T=_.map(A),O=[];if(k.push(i),d&&x&&O.push(function(I){const Q=I.theme.components?.[d]?.styleOverrides;if(!Q)return null;const G={};for(const K in Q)G[K]=Wb(I,Q[K],I.theme.modularCssLayers?"theme":void 0);return x(I,G)}),d&&!v&&O.push(function(I){const Q=I.theme?.components?.[d]?.variants;return Q?C9(I,Q,[],I.theme.modularCssLayers?"theme":void 0):null}),j||O.push(Nf),Array.isArray(T[0])){const P=T.shift(),I=new Array(k.length).fill(""),H=new Array(O.length).fill("");let Q;Q=[...I,...P,...H],Q.raw=[...I,...P.raw,...H],k.unshift(Q)}const $=[...k,...T,...O],R=S(...$);return l.muiName&&(R.muiName=l.muiName),R};return S.withConfig&&(E.withConfig=S.withConfig),E}}function ece(e,t){return void 0}function tce(e){for(const t in e)return!1;return!0}function nce(e){return typeof e=="string"&&e.charCodeAt(0)>96}function ace(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Eu(e,t,a=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)s[i]=o||{};else if(!o)s[i]=l;else{s[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=c;s[i][d]=Eu(o[d],l[d],a)}}}else i==="className"&&a&&t.className?s.className=Pt(e?.className,t?.className):i==="style"&&a&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function S9(e){const{theme:t,name:a,props:s}=e;return!t||!t.components||!t.components[a]||!t.components[a].defaultProps?s:Eu(t.components[a].defaultProps,s)}function sce({props:e,name:t,defaultTheme:a,themeId:s}){let r=N9(a);return r=r[s]||r,S9({theme:r,name:t,props:e})}const ss=typeof window<"u"?f.useLayoutEffect:f.useEffect;function rce(e,t,a,s,r){const[i,o]=f.useState(()=>r&&a?a(e).matches:s?s(e).matches:t);return ss(()=>{if(!a)return;const l=a(e),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[e,a]),i}const ice={...ju},_9=ice.useSyncExternalStore;function oce(e,t,a,s,r){const i=f.useCallback(()=>t,[t]),o=f.useMemo(()=>{if(r&&a)return()=>a(e).matches;if(s!==null){const{matches:u}=s(e);return()=>u}return i},[i,e,s,r,a]),[l,c]=f.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const u=a(e);return[()=>u.matches,h=>(u.addEventListener("change",h),()=>{u.removeEventListener("change",h)})]},[i,a,e]);return _9(c,l,o)}function A9(e={}){const{themeId:t}=e;return function(s,r={}){let i=w9();i&&t&&(i=i[t]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=S9({name:"MuiUseMediaQuery",props:r,theme:i});let h=typeof s=="function"?s(i):s;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(_9!==void 0?oce:rce)(h,l,c,d,u)}}A9();function lce(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}function yL(e,t=0,a=1){return lce(e,t,a)}function cce(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function ld(e){if(e.type)return e;if(e.charAt(0)==="#")return ld(cce(e));const t=e.indexOf("("),a=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(Tu(9,e));let s=e.substring(t+1,e.length-1),r;if(a==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Tu(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:a,values:s,colorSpace:r}}const dce=e=>{const t=ld(e);return t.values.slice(0,3).map((a,s)=>t.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},Dg=(e,t)=>{try{return dce(e)}catch{return e}};function sN(e){const{type:t,colorSpace:a}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function T9(e){e=ld(e);const{values:t}=e,a=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),o=(d,u=(d+a/30)%12)=>r-i*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),sN({type:l,values:c})}function zT(e){e=ld(e);let t=e.type==="hsl"||e.type==="hsla"?ld(T9(e)).values:e.values;return t=t.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function uce(e,t){const a=zT(e),s=zT(t);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function E9(e,t){return e=ld(e),t=yL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,sN(e)}function Hd(e,t,a){try{return E9(e,t)}catch{return e}}function rN(e,t){if(e=ld(e),t=yL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]*=1-t;return sN(e)}function On(e,t,a){try{return rN(e,t)}catch{return e}}function iN(e,t){if(e=ld(e),t=yL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*t;else if(e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*t;return sN(e)}function Mn(e,t,a){try{return iN(e,t)}catch{return e}}function mce(e,t=.15){return zT(e)>.5?rN(e,t):iN(e,t)}function Ey(e,t,a){try{return mce(e,t)}catch{return e}}const fce=f.createContext(),fx=()=>f.useContext(fce)??!1,hce=f.createContext(void 0);function gce(e){const{theme:t,name:a,props:s}=e;if(!t||!t.components||!t.components[a])return s;const r=t.components[a];return r.defaultProps?Eu(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?Eu(r,s,t.components.mergeClassNameAndStyle):s}function pce({props:e,name:t}){const a=f.useContext(hce);return gce({props:e,name:t,theme:{components:a}})}let GI=0;function xce(e){const[t,a]=f.useState(e),s=e||t;return f.useEffect(()=>{t==null&&(GI+=1,a(`mui-${GI}`))},[t]),s}const yce={...ju},VI=yce.useId;function oN(e){if(VI!==void 0){const t=VI();return e??t}return xce(e)}const YI={theme:void 0};function bce(e){let t,a;return function(r){let i=t;return(i===void 0||r.theme!==a)&&(YI.theme=r.theme,i=j9(e(YI)),t=i,a=r.theme),i}}function vce(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const QI=(e,t,a,s=[])=>{let r=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(r)?r[Number(i)]=a:r&&typeof r=="object"&&(r[i]=a):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},wce=(e,t,a)=>{function s(r,i=[],o=[]){Object.entries(r).forEach(([l,c])=>{(!a||a&&!a([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}s(e)},Nce=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function MS(e,t){const{prefix:a,shouldSkipGeneratingVar:s}=t||{},r={},i={},o={};return wce(e,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const u=`--${a?`${a}-`:""}${l.join("-")}`,h=Nce(l,c);Object.assign(r,{[u]:h}),QI(i,l,`var(${u})`,d),QI(o,l,`var(${u}, ${h})`,d)}},l=>l[0]==="vars"),{css:r,vars:i,varsWithDefaults:o}}function jce(e,t={}){const{getSelector:a=j,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...d}=e,{vars:u,css:h,varsWithDefaults:p}=MS(d,t);let x=p;const b={},{[c]:N,...v}=o;if(Object.entries(v||{}).forEach(([A,E])=>{const{vars:_,css:k,varsWithDefaults:T}=MS(E,t);x=$r(x,T),b[A]={css:k,vars:_}}),N){const{css:A,vars:E,varsWithDefaults:_}=MS(N,t);x=$r(x,_),b[c]={css:A,vars:E}}function j(A,E){let _=r;if(r==="class"&&(_=".%s"),r==="data"&&(_="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(_=`[${r}="%s"]`),A){if(_==="media")return e.defaultColorScheme===A?":root":{[`@media (prefers-color-scheme: ${o[A]?.palette?.mode||A})`]:{":root":E}};if(_)return e.defaultColorScheme===A?`:root, ${_.replace("%s",String(A))}`:_.replace("%s",String(A))}return":root"}return{vars:x,generateThemeVars:()=>{let A={...u};return Object.entries(b).forEach(([,{vars:E}])=>{A=$r(A,E)}),A},generateStyleSheets:()=>{const A=[],E=e.defaultColorScheme||"light";function _(O,$){Object.keys($).length&&A.push(typeof O=="string"?{[O]:{...$}}:O)}_(a(void 0,{...h}),h);const{[E]:k,...T}=b;if(k){const{css:O}=k,$=o[E]?.palette?.mode,R=!s&&$?{colorScheme:$,...O}:{...O};_(a(E,{...R}),R)}return Object.entries(T).forEach(([O,{css:$}])=>{const R=o[O]?.palette?.mode,P=!s&&R?{colorScheme:R,...$}:{...$};_(a(O,{...P}),P)}),i&&A.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),A}}}function Cce(e){return function(a){return e==="media"?`@media (prefers-color-scheme: ${a})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${a}"] &`:e==="class"?`.${a} &`:e==="data"?`[data-${a}] &`:`${e.replace("%s",a)} &`:"&"}}const mp={black:"#000",white:"#fff"},Sce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$m={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Rm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},og={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},zm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Fm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Um={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function k9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:mp.white,default:mp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const L9=k9();function P9(){return{text:{primary:mp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:mp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const FT=P9();function KI(e,t,a,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(a)?e[t]=e[a]:t==="light"?e.light=iN(e.main,r):t==="dark"&&(e.dark=rN(e.main,i)))}function XI(e,t,a,s,r){const i=r.light||r,o=r.dark||r*1.5;t[a]||(t.hasOwnProperty(s)?t[a]=t[s]:a==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function _ce(e="light"){return e==="dark"?{main:zm[200],light:zm[50],dark:zm[400]}:{main:zm[700],light:zm[400],dark:zm[800]}}function Ace(e="light"){return e==="dark"?{main:$m[200],light:$m[50],dark:$m[400]}:{main:$m[500],light:$m[300],dark:$m[700]}}function Tce(e="light"){return e==="dark"?{main:Rm[500],light:Rm[300],dark:Rm[700]}:{main:Rm[700],light:Rm[400],dark:Rm[800]}}function Ece(e="light"){return e==="dark"?{main:Fm[400],light:Fm[300],dark:Fm[700]}:{main:Fm[700],light:Fm[500],dark:Fm[900]}}function kce(e="light"){return e==="dark"?{main:Um[400],light:Um[300],dark:Um[700]}:{main:Um[800],light:Um[500],dark:Um[900]}}function Lce(e="light"){return e==="dark"?{main:og[400],light:og[300],dark:og[700]}:{main:"#ed6c02",light:og[500],dark:og[900]}}function Pce(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function bL(e){const{mode:t="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:r,...i}=e,o=e.primary||_ce(t),l=e.secondary||Ace(t),c=e.error||Tce(t),d=e.info||Ece(t),u=e.success||kce(t),h=e.warning||Lce(t);function p(v){return r?Pce(v):uce(v,FT.text.primary)>=a?FT.text.primary:L9.text.primary}const x=({color:v,name:j,mainShade:w=500,lightShade:S=300,darkShade:A=700})=>{if(v={...v},!v.main&&v[w]&&(v.main=v[w]),!v.hasOwnProperty("main"))throw new Error(Tu(11,j?` (${j})`:"",w));if(typeof v.main!="string")throw new Error(Tu(12,j?` (${j})`:"",JSON.stringify(v.main)));return r?(XI(r,v,"light",S,s),XI(r,v,"dark",A,s)):(KI(v,"light",S,s),KI(v,"dark",A,s)),v.contrastText||(v.contrastText=p(v.main)),v};let b;return t==="light"?b=k9():t==="dark"&&(b=P9()),$r({common:{...mp},mode:t,primary:x({color:o,name:"primary"}),secondary:x({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:h,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:u,name:"success"}),grey:Sce,contrastThreshold:a,getContrastText:p,augmentColor:x,tonalOffset:s,...b},i)}function Dce(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function Oce(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Mce(e){return Math.round(e*1e5)/1e5}const ZI={textTransform:"uppercase"},JI='"Roboto", "Helvetica", "Arial", sans-serif';function Ice(e,t){const{fontFamily:a=JI,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...h}=typeof t=="function"?t(e):t,p=s/14,x=u||(v=>`${v/c*p}rem`),b=(v,j,w,S,A)=>({fontFamily:a,fontWeight:v,fontSize:x(j),lineHeight:w,...a===JI?{letterSpacing:`${Mce(S/j)}em`}:{},...A,...d}),N={h1:b(r,96,1.167,-1.5),h2:b(r,60,1.2,-.5),h3:b(i,48,1.167,0),h4:b(i,34,1.235,.25),h5:b(i,24,1.334,0),h6:b(o,20,1.6,.15),subtitle1:b(i,16,1.75,.15),subtitle2:b(o,14,1.57,.1),body1:b(i,16,1.5,.15),body2:b(i,14,1.43,.15),button:b(o,14,1.75,.4,ZI),caption:b(i,12,1.66,.4),overline:b(i,12,2.66,1,ZI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return $r({htmlFontSize:c,pxToRem:x,fontFamily:a,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...N},h,{clone:!1})}const $ce=.2,Rce=.14,zce=.12;function ia(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${$ce})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Rce})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${zce})`].join(",")}const Fce=["none",ia(0,2,1,-1,0,1,1,0,0,1,3,0),ia(0,3,1,-2,0,2,2,0,0,1,5,0),ia(0,3,3,-2,0,3,4,0,0,1,8,0),ia(0,2,4,-1,0,4,5,0,0,1,10,0),ia(0,3,5,-1,0,5,8,0,0,1,14,0),ia(0,3,5,-1,0,6,10,0,0,1,18,0),ia(0,4,5,-2,0,7,10,1,0,2,16,1),ia(0,5,5,-3,0,8,10,1,0,3,14,2),ia(0,5,6,-3,0,9,12,1,0,3,16,2),ia(0,6,6,-3,0,10,14,1,0,4,18,3),ia(0,6,7,-4,0,11,15,1,0,4,20,3),ia(0,7,8,-4,0,12,17,2,0,5,22,4),ia(0,7,8,-4,0,13,19,2,0,5,24,4),ia(0,7,9,-4,0,14,21,2,0,5,26,4),ia(0,8,9,-5,0,15,22,2,0,6,28,5),ia(0,8,10,-5,0,16,24,2,0,6,30,5),ia(0,8,11,-5,0,17,26,2,0,6,32,5),ia(0,9,11,-5,0,18,28,2,0,7,34,6),ia(0,9,12,-6,0,19,29,2,0,7,36,6),ia(0,10,13,-6,0,20,31,3,0,8,38,7),ia(0,10,13,-6,0,21,33,3,0,8,40,7),ia(0,10,14,-6,0,22,35,3,0,8,42,7),ia(0,11,14,-7,0,23,36,3,0,9,44,8),ia(0,11,15,-7,0,24,38,3,0,9,46,8)],Uce={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Bce={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function e$(e){return`${Math.round(e)}ms`}function Hce(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function qce(e){const t={...Uce,...e.easing},a={...Bce,...e.duration};return{getAutoHeightDuration:Hce,create:(r=["all"],i={})=>{const{duration:o=a.standard,easing:l=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof o=="string"?o:e$(o)} ${l} ${typeof c=="string"?c:e$(c)}`).join(",")},...e,easing:t,duration:a}}const Wce={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Gce(e){return wo(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function D9(e={}){const t={...e};function a(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[o,l]=r[i];!Gce(l)||o.startsWith("unstable_")?delete s[o]:wo(l)&&(s[o]={...l},a(s[o]))}}return a(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function t$(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const Vce=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let a=0;for(let s=0;s<t.length;s+=1)a+=+t[s];return a};function Yce(e){Object.assign(e,{alpha(t,a){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:E9(t,Vce(a))},lighten(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${t$(a)})`:iN(t,a)},darken(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${t$(a)})`:rN(t,a)}})}function UT(e={},...t){const{breakpoints:a,mixins:s={},spacing:r,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:d,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Tu(20));const h=bL({...i,colorSpace:d}),p=xL(e);let x=$r(p,{mixins:Oce(p.breakpoints,s),palette:h,shadows:Fce.slice(),typography:Ice(h,l),transitions:qce(o),zIndex:{...Wce}});return x=$r(x,u),x=t.reduce((b,N)=>$r(b,N),x),x.unstable_sxConfig={...dx,...u?.unstable_sxConfig},x.unstable_sx=function(N){return Nf({sx:N,theme:this})},x.toRuntimeSource=D9,Yce(x),x}function Qce(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Kce=[...Array(25)].map((e,t)=>{if(t===0)return"none";const a=Qce(t);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function O9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function M9(e){return e==="dark"?Kce:[]}function Xce(e){const{palette:t={mode:"light"},opacity:a,overlays:s,colorSpace:r,...i}=e,o=bL({...t,colorSpace:r});return{palette:o,opacity:{...O9(o.mode),...a},overlays:s||M9(o.mode),...i}}function Zce(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Jce=e=>[...[...Array(25)].map((t,a)=>`--${e?`${e}-`:""}overlays-${a}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],ede=e=>(t,a)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return Jce(e.cssVarPrefix).forEach(l=>{o[l]=a[l],delete a[l]}),i==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:o}}:i?{[i.replace("%s",t)]:o,[`${s}, ${i.replace("%s",t)}`]:a}:{[s]:{...a,...o}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:a}};if(i)return i.replace("%s",String(t))}return s};function tde(e,t){t.forEach(a=>{e[a]||(e[a]={})})}function ft(e,t,a){!e[t]&&a&&(e[t]=a)}function Og(e){return typeof e!="string"||!e.startsWith("hsl")?e:T9(e)}function ml(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Dg(Og(e[t])))}function nde(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const so=e=>{try{return e()}catch{}},ade=(e="mui")=>vce(e);function IS(e,t,a,s,r){if(!a)return;a=a===!0?{}:a;const i=r==="dark"?"dark":"light";if(!s){t[r]=Xce({...a,palette:{mode:i,...a?.palette},colorSpace:e});return}const{palette:o,...l}=UT({...s,palette:{mode:i,...a?.palette},colorSpace:e});return t[r]={...a,palette:o,opacity:{...O9(i),...a?.opacity},overlays:a?.overlays||M9(i)},l}function sde(e={},...t){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=Zce,colorSchemeSelector:c=a.light&&a.dark?"media":void 0,rootSelector:d=":root",...u}=e,h=Object.keys(a)[0],p=s||(a.light&&h!=="light"?"light":h),x=ade(i),{[p]:b,light:N,dark:v,...j}=a,w={...j};let S=b;if((p==="dark"&&!("dark"in a)||p==="light"&&!("light"in a))&&(S=!0),!S)throw new Error(Tu(21,p));let A;o&&(A="oklch");const E=IS(A,w,S,u,p);N&&!w.light&&IS(A,w,N,void 0,"light"),v&&!w.dark&&IS(A,w,v,void 0,"dark");let _={defaultColorScheme:p,...E,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:w,font:{...Dce(E.typography),...E.font},spacing:nde(u.spacing)};Object.keys(_.colorSchemes).forEach(R=>{const P=_.colorSchemes[R].palette,I=Q=>{const G=Q.split("-"),K=G[1],W=G[2];return x(Q,P[K][W])};P.mode==="light"&&(ft(P.common,"background","#fff"),ft(P.common,"onBackground","#000")),P.mode==="dark"&&(ft(P.common,"background","#000"),ft(P.common,"onBackground","#fff"));function H(Q,G,K){if(A){let W;return Q===Hd&&(W=`transparent ${((1-K)*100).toFixed(0)}%`),Q===On&&(W=`#000 ${(K*100).toFixed(0)}%`),Q===Mn&&(W=`#fff ${(K*100).toFixed(0)}%`),`color-mix(in ${A}, ${G}, ${W})`}return Q(G,K)}if(tde(P,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),P.mode==="light"){ft(P.Alert,"errorColor",H(On,P.error.light,.6)),ft(P.Alert,"infoColor",H(On,P.info.light,.6)),ft(P.Alert,"successColor",H(On,P.success.light,.6)),ft(P.Alert,"warningColor",H(On,P.warning.light,.6)),ft(P.Alert,"errorFilledBg",I("palette-error-main")),ft(P.Alert,"infoFilledBg",I("palette-info-main")),ft(P.Alert,"successFilledBg",I("palette-success-main")),ft(P.Alert,"warningFilledBg",I("palette-warning-main")),ft(P.Alert,"errorFilledColor",so(()=>P.getContrastText(P.error.main))),ft(P.Alert,"infoFilledColor",so(()=>P.getContrastText(P.info.main))),ft(P.Alert,"successFilledColor",so(()=>P.getContrastText(P.success.main))),ft(P.Alert,"warningFilledColor",so(()=>P.getContrastText(P.warning.main))),ft(P.Alert,"errorStandardBg",H(Mn,P.error.light,.9)),ft(P.Alert,"infoStandardBg",H(Mn,P.info.light,.9)),ft(P.Alert,"successStandardBg",H(Mn,P.success.light,.9)),ft(P.Alert,"warningStandardBg",H(Mn,P.warning.light,.9)),ft(P.Alert,"errorIconColor",I("palette-error-main")),ft(P.Alert,"infoIconColor",I("palette-info-main")),ft(P.Alert,"successIconColor",I("palette-success-main")),ft(P.Alert,"warningIconColor",I("palette-warning-main")),ft(P.AppBar,"defaultBg",I("palette-grey-100")),ft(P.Avatar,"defaultBg",I("palette-grey-400")),ft(P.Button,"inheritContainedBg",I("palette-grey-300")),ft(P.Button,"inheritContainedHoverBg",I("palette-grey-A100")),ft(P.Chip,"defaultBorder",I("palette-grey-400")),ft(P.Chip,"defaultAvatarColor",I("palette-grey-700")),ft(P.Chip,"defaultIconColor",I("palette-grey-700")),ft(P.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ft(P.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ft(P.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ft(P.LinearProgress,"primaryBg",H(Mn,P.primary.main,.62)),ft(P.LinearProgress,"secondaryBg",H(Mn,P.secondary.main,.62)),ft(P.LinearProgress,"errorBg",H(Mn,P.error.main,.62)),ft(P.LinearProgress,"infoBg",H(Mn,P.info.main,.62)),ft(P.LinearProgress,"successBg",H(Mn,P.success.main,.62)),ft(P.LinearProgress,"warningBg",H(Mn,P.warning.main,.62)),ft(P.Skeleton,"bg",A?H(Hd,P.text.primary,.11):`rgba(${I("palette-text-primaryChannel")} / 0.11)`),ft(P.Slider,"primaryTrack",H(Mn,P.primary.main,.62)),ft(P.Slider,"secondaryTrack",H(Mn,P.secondary.main,.62)),ft(P.Slider,"errorTrack",H(Mn,P.error.main,.62)),ft(P.Slider,"infoTrack",H(Mn,P.info.main,.62)),ft(P.Slider,"successTrack",H(Mn,P.success.main,.62)),ft(P.Slider,"warningTrack",H(Mn,P.warning.main,.62));const Q=A?H(On,P.background.default,.6825):Ey(P.background.default,.8);ft(P.SnackbarContent,"bg",Q),ft(P.SnackbarContent,"color",so(()=>A?FT.text.primary:P.getContrastText(Q))),ft(P.SpeedDialAction,"fabHoverBg",Ey(P.background.paper,.15)),ft(P.StepConnector,"border",I("palette-grey-400")),ft(P.StepContent,"border",I("palette-grey-400")),ft(P.Switch,"defaultColor",I("palette-common-white")),ft(P.Switch,"defaultDisabledColor",I("palette-grey-100")),ft(P.Switch,"primaryDisabledColor",H(Mn,P.primary.main,.62)),ft(P.Switch,"secondaryDisabledColor",H(Mn,P.secondary.main,.62)),ft(P.Switch,"errorDisabledColor",H(Mn,P.error.main,.62)),ft(P.Switch,"infoDisabledColor",H(Mn,P.info.main,.62)),ft(P.Switch,"successDisabledColor",H(Mn,P.success.main,.62)),ft(P.Switch,"warningDisabledColor",H(Mn,P.warning.main,.62)),ft(P.TableCell,"border",H(Mn,H(Hd,P.divider,1),.88)),ft(P.Tooltip,"bg",H(Hd,P.grey[700],.92))}if(P.mode==="dark"){ft(P.Alert,"errorColor",H(Mn,P.error.light,.6)),ft(P.Alert,"infoColor",H(Mn,P.info.light,.6)),ft(P.Alert,"successColor",H(Mn,P.success.light,.6)),ft(P.Alert,"warningColor",H(Mn,P.warning.light,.6)),ft(P.Alert,"errorFilledBg",I("palette-error-dark")),ft(P.Alert,"infoFilledBg",I("palette-info-dark")),ft(P.Alert,"successFilledBg",I("palette-success-dark")),ft(P.Alert,"warningFilledBg",I("palette-warning-dark")),ft(P.Alert,"errorFilledColor",so(()=>P.getContrastText(P.error.dark))),ft(P.Alert,"infoFilledColor",so(()=>P.getContrastText(P.info.dark))),ft(P.Alert,"successFilledColor",so(()=>P.getContrastText(P.success.dark))),ft(P.Alert,"warningFilledColor",so(()=>P.getContrastText(P.warning.dark))),ft(P.Alert,"errorStandardBg",H(On,P.error.light,.9)),ft(P.Alert,"infoStandardBg",H(On,P.info.light,.9)),ft(P.Alert,"successStandardBg",H(On,P.success.light,.9)),ft(P.Alert,"warningStandardBg",H(On,P.warning.light,.9)),ft(P.Alert,"errorIconColor",I("palette-error-main")),ft(P.Alert,"infoIconColor",I("palette-info-main")),ft(P.Alert,"successIconColor",I("palette-success-main")),ft(P.Alert,"warningIconColor",I("palette-warning-main")),ft(P.AppBar,"defaultBg",I("palette-grey-900")),ft(P.AppBar,"darkBg",I("palette-background-paper")),ft(P.AppBar,"darkColor",I("palette-text-primary")),ft(P.Avatar,"defaultBg",I("palette-grey-600")),ft(P.Button,"inheritContainedBg",I("palette-grey-800")),ft(P.Button,"inheritContainedHoverBg",I("palette-grey-700")),ft(P.Chip,"defaultBorder",I("palette-grey-700")),ft(P.Chip,"defaultAvatarColor",I("palette-grey-300")),ft(P.Chip,"defaultIconColor",I("palette-grey-300")),ft(P.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ft(P.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ft(P.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ft(P.LinearProgress,"primaryBg",H(On,P.primary.main,.5)),ft(P.LinearProgress,"secondaryBg",H(On,P.secondary.main,.5)),ft(P.LinearProgress,"errorBg",H(On,P.error.main,.5)),ft(P.LinearProgress,"infoBg",H(On,P.info.main,.5)),ft(P.LinearProgress,"successBg",H(On,P.success.main,.5)),ft(P.LinearProgress,"warningBg",H(On,P.warning.main,.5)),ft(P.Skeleton,"bg",A?H(Hd,P.text.primary,.13):`rgba(${I("palette-text-primaryChannel")} / 0.13)`),ft(P.Slider,"primaryTrack",H(On,P.primary.main,.5)),ft(P.Slider,"secondaryTrack",H(On,P.secondary.main,.5)),ft(P.Slider,"errorTrack",H(On,P.error.main,.5)),ft(P.Slider,"infoTrack",H(On,P.info.main,.5)),ft(P.Slider,"successTrack",H(On,P.success.main,.5)),ft(P.Slider,"warningTrack",H(On,P.warning.main,.5));const Q=A?H(Mn,P.background.default,.985):Ey(P.background.default,.98);ft(P.SnackbarContent,"bg",Q),ft(P.SnackbarContent,"color",so(()=>A?L9.text.primary:P.getContrastText(Q))),ft(P.SpeedDialAction,"fabHoverBg",Ey(P.background.paper,.15)),ft(P.StepConnector,"border",I("palette-grey-600")),ft(P.StepContent,"border",I("palette-grey-600")),ft(P.Switch,"defaultColor",I("palette-grey-300")),ft(P.Switch,"defaultDisabledColor",I("palette-grey-600")),ft(P.Switch,"primaryDisabledColor",H(On,P.primary.main,.55)),ft(P.Switch,"secondaryDisabledColor",H(On,P.secondary.main,.55)),ft(P.Switch,"errorDisabledColor",H(On,P.error.main,.55)),ft(P.Switch,"infoDisabledColor",H(On,P.info.main,.55)),ft(P.Switch,"successDisabledColor",H(On,P.success.main,.55)),ft(P.Switch,"warningDisabledColor",H(On,P.warning.main,.55)),ft(P.TableCell,"border",H(On,H(Hd,P.divider,1),.68)),ft(P.Tooltip,"bg",H(Hd,P.grey[700],.92))}ml(P.background,"default"),ml(P.background,"paper"),ml(P.common,"background"),ml(P.common,"onBackground"),ml(P,"divider"),Object.keys(P).forEach(Q=>{const G=P[Q];Q!=="tonalOffset"&&G&&typeof G=="object"&&(G.main&&ft(P[Q],"mainChannel",Dg(Og(G.main))),G.light&&ft(P[Q],"lightChannel",Dg(Og(G.light))),G.dark&&ft(P[Q],"darkChannel",Dg(Og(G.dark))),G.contrastText&&ft(P[Q],"contrastTextChannel",Dg(Og(G.contrastText))),Q==="text"&&(ml(P[Q],"primary"),ml(P[Q],"secondary")),Q==="action"&&(G.active&&ml(P[Q],"active"),G.selected&&ml(P[Q],"selected")))})}),_=t.reduce((R,P)=>$r(R,P),_);const k={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:l,getSelector:ede(_),enableContrastVars:o},{vars:T,generateThemeVars:O,generateStyleSheets:$}=jce(_,k);return _.vars=T,Object.entries(_.colorSchemes[_.defaultColorScheme]).forEach(([R,P])=>{_[R]=P}),_.generateThemeVars=O,_.generateStyleSheets=$,_.generateSpacing=function(){return v9(u.spacing,lL(this))},_.getColorSchemeSelector=Cce(c),_.spacing=_.generateSpacing(),_.shouldSkipGeneratingVar=l,_.unstable_sxConfig={...dx,...u?.unstable_sxConfig},_.unstable_sx=function(P){return Nf({sx:P,theme:this})},_.toRuntimeSource=D9,_}function n$(e,t,a){e.colorSchemes&&a&&(e.colorSchemes[t]={...a!==!0&&a,palette:bL({...a===!0?{}:a.palette,mode:t})})}function rde(e={},...t){const{palette:a,cssVariables:s=!1,colorSchemes:r=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...o}=e,l=i||"light",c=r?.[l],d={...r,...a?{[l]:{...typeof c!="boolean"&&c,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in e))return UT(e,...t);let u=a;"palette"in e||d[l]&&(d[l]!==!0?u=d[l].palette:l==="dark"&&(u={mode:"dark"}));const h=UT({...e,palette:u},...t);return h.defaultColorScheme=l,h.colorSchemes=d,h.palette.mode==="light"&&(h.colorSchemes.light={...d.light!==!0&&d.light,palette:h.palette},n$(h,"dark",d.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:h.palette},n$(h,"light",d.light)),h}return!a&&!("light"in d)&&l==="light"&&(d.light=!0),sde({...o,colorSchemes:d,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const vL=rde(),lN="$$material";function Ho(){const e=N9(vL);return e[lN]||e}function ide(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const I9=e=>ide(e)&&e!=="classes",un=Jle({themeId:lN,defaultTheme:vL,rootShouldForwardProp:I9});function ode(){return Uoe}function bd(e){return pce(e)}function Io(...e){const t=f.useRef(void 0),a=f.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return f.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=a(s))},e)}function lde(e){return typeof e=="string"}function $9(e,t,a){return e===void 0||lde(e)?t:{...t,ownerState:{...t.ownerState,...a}}}function R9(e,t,a){return typeof e=="function"?e(t,a):e}function cde(e,t=[]){if(e===void 0)return{};const a={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{a[s]=e[s]}),a}function a$(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(a=>!(a.match(/^on[A-Z]/)&&typeof e[a]=="function")).forEach(a=>{t[a]=e[a]}),t}function z9(e){const{getSlotProps:t,additionalProps:a,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=Pt(a?.className,i,r?.className,s?.className),b={...a?.style,...r?.style,...s?.style},N={...a,...r,...s};return x.length>0&&(N.className=x),Object.keys(b).length>0&&(N.style=b),{props:N,internalRef:void 0}}const o=cde({...r,...s}),l=a$(s),c=a$(r),d=t(o),u=Pt(d?.className,a?.className,i,r?.className,s?.className),h={...d?.style,...a?.style,...r?.style,...s?.style},p={...d,...a,...c,...l};return u.length>0&&(p.className=u),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:d.ref}}function s$(e,t){const{className:a,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:d,slots:u={[e]:void 0},slotProps:h={[e]:void 0},...p}=i,x=u[e]||s,b=R9(h[e],r),{props:{component:N,...v},internalRef:j}=z9({className:a,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:b}),w=Io(j,b?.ref,t.ref),S=e==="root"?N||d:N,A=$9(x,{...e==="root"&&!d&&!u[e]&&o,...e!=="root"&&!u[e]&&o,...v,...S&&!l&&{as:S},...S&&l&&{component:S},ref:w},r);return[x,A]}function xn(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function BT(e,t){return BT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},BT(e,t)}function F9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,BT(e,t)}const r$={disabled:!1},dv=bt.createContext(null);var dde=function(t){return t.scrollTop},Mg="unmounted",Yd="exited",Qd="entering",nf="entered",HT="exiting",Zl=(function(e){F9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=r,l=o&&!o.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?l?(c=Yd,i.appearStatus=Qd):c=nf:s.unmountOnExit||s.mountOnEnter?c=Mg:c=Yd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var o=r.in;return o&&i.status===Mg?{status:Yd}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(r){var i=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Qd&&o!==nf&&(i=Qd):(o===Qd||o===nf)&&(i=HT)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var r=this.props.timeout,i,o,l;return i=o=l=r,r!=null&&typeof r!="number"&&(i=r.exit,o=r.enter,l=r.appear!==void 0?r.appear:o),{exit:i,enter:o,appear:l}},a.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Qd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Cy.findDOMNode(this);o&&dde(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Yd&&this.setState({status:Mg})},a.performEnter=function(r){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:r,c=this.props.nodeRef?[l]:[Cy.findDOMNode(this),l],d=c[0],u=c[1],h=this.getTimeouts(),p=l?h.appear:h.enter;if(!r&&!o||r$.disabled){this.safeSetState({status:nf},function(){i.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:Qd},function(){i.props.onEntering(d,u),i.onTransitionEnd(p,function(){i.safeSetState({status:nf},function(){i.props.onEntered(d,u)})})})},a.performExit=function(){var r=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:Cy.findDOMNode(this);if(!i||r$.disabled){this.safeSetState({status:Yd},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:HT},function(){r.props.onExiting(l),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Yd},function(){r.props.onExited(l)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},a.setNextCallback=function(r){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,r(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},a.onTransitionEnd=function(r,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Cy.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}r!=null&&setTimeout(this.nextCallback,r)},a.render=function(){var r=this.state.status;if(r===Mg)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=xn(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bt.createElement(dv.Provider,{value:null},typeof o=="function"?o(r,l):bt.cloneElement(bt.Children.only(o),l))},t})(bt.Component);Zl.contextType=dv;Zl.propTypes={};function Bm(){}Zl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bm,onEntering:Bm,onEntered:Bm,onExit:Bm,onExiting:Bm,onExited:Bm};Zl.UNMOUNTED=Mg;Zl.EXITED=Yd;Zl.ENTERING=Qd;Zl.ENTERED=nf;Zl.EXITING=HT;function ude(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wL(e,t){var a=function(i){return t&&f.isValidElement(i)?t(i):i},s=Object.create(null);return e&&f.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=a(r)}),s}function mde(e,t){e=e||{},t=t||{};function a(u){return u in t?t[u]:e[u]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var d=s[c][o];l[s[c][o]]=a(d)}l[c]=a(c)}for(o=0;o<r.length;o++)l[r[o]]=a(r[o]);return l}function ou(e,t,a){return a[t]!=null?a[t]:e.props[t]}function fde(e,t){return wL(e.children,function(a){return f.cloneElement(a,{onExited:t.bind(null,a),in:!0,appear:ou(a,"appear",e),enter:ou(a,"enter",e),exit:ou(a,"exit",e)})})}function hde(e,t,a){var s=wL(e.children),r=mde(t,s);return Object.keys(r).forEach(function(i){var o=r[i];if(f.isValidElement(o)){var l=i in t,c=i in s,d=t[i],u=f.isValidElement(d)&&!d.props.in;c&&(!l||u)?r[i]=f.cloneElement(o,{onExited:a.bind(null,o),in:!0,exit:ou(o,"exit",e),enter:ou(o,"enter",e)}):!c&&l&&!u?r[i]=f.cloneElement(o,{in:!1}):c&&l&&f.isValidElement(d)&&(r[i]=f.cloneElement(o,{onExited:a.bind(null,o),in:d.props.in,exit:ou(o,"exit",e),enter:ou(o,"enter",e)}))}}),r}var gde=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},pde={component:"div",childFactory:function(t){return t}},NL=(function(e){F9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=i.handleExited.bind(ude(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?fde(r,l):hde(r,o,l),firstRender:!1}},a.handleExited=function(r,i){var o=wL(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(l){var c=Ye({},l.children);return delete c[r.key],{children:c}}))},a.render=function(){var r=this.props,i=r.component,o=r.childFactory,l=xn(r,["component","childFactory"]),c=this.state.contextValue,d=gde(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?bt.createElement(dv.Provider,{value:c},d):bt.createElement(dv.Provider,{value:c},bt.createElement(i,l,d))},t})(bt.Component);NL.propTypes={};NL.defaultProps=pde;function U9(e){return parseInt(f.version,10)>=19?e?.props?.ref||null:e?.ref||null}const xde=e=>e.scrollTop;function i$(e,t){const{timeout:a,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof a=="number"?a:a[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const yde={entering:{opacity:1},entered:{opacity:1}},bde=f.forwardRef(function(t,a){const s=Ho(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:d,onEnter:u,onEntered:h,onEntering:p,onExit:x,onExited:b,onExiting:N,style:v,timeout:j=r,TransitionComponent:w=Zl,...S}=t,A=f.useRef(null),E=Io(A,U9(l),a),_=H=>Q=>{if(H){const G=A.current;Q===void 0?H(G):H(G,Q)}},k=_(p),T=_((H,Q)=>{xde(H);const G=i$({style:v,timeout:j,easing:c},{mode:"enter"});H.style.webkitTransition=s.transitions.create("opacity",G),H.style.transition=s.transitions.create("opacity",G),u&&u(H,Q)}),O=_(h),$=_(N),R=_(H=>{const Q=i$({style:v,timeout:j,easing:c},{mode:"exit"});H.style.webkitTransition=s.transitions.create("opacity",Q),H.style.transition=s.transitions.create("opacity",Q),x&&x(H)}),P=_(b),I=H=>{i&&i(A.current,H)};return n.jsx(w,{appear:o,in:d,nodeRef:A,onEnter:T,onEntered:O,onEntering:k,onExit:R,onExited:P,onExiting:$,addEndListener:I,timeout:j,...S,children:(H,{ownerState:Q,...G})=>f.cloneElement(l,{style:{opacity:0,visibility:H==="exited"&&!d?"hidden":void 0,...yde[H],...v,...l.props.style},ref:E,...G})})});function vde(e){return Ga("MuiBackdrop",e)}_a("MuiBackdrop",["root","invisible"]);const wde=e=>{const{classes:t,invisible:a}=e;return Wa({root:["root",a&&"invisible"]},vde,t)},Nde=un("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),jde=f.forwardRef(function(t,a){const s=bd({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:l=!1,open:c,components:d={},componentsProps:u={},slotProps:h={},slots:p={},TransitionComponent:x,transitionDuration:b,...N}=s,v={...s,component:o,invisible:l},j=wde(v),w={transition:x,root:d.Root,...p},S={...u,...h},A={component:o,slots:w,slotProps:S},[E,_]=s$("root",{elementType:Nde,externalForwardedProps:A,className:Pt(j.root,i),ownerState:v}),[k,T]=s$("transition",{elementType:bde,externalForwardedProps:A,ownerState:v});return n.jsx(k,{in:c,timeout:b,...N,...T,children:n.jsx(E,{"aria-hidden":!0,..._,classes:j,ref:a,children:r})})}),ku=bce;function Cde(e){return typeof e.main=="string"}function Sde(e,t=[]){if(!Cde(e))return!1;for(const a of t)if(!e.hasOwnProperty(a)||typeof e[a]!="string")return!1;return!0}function fp(e=[]){return([,t])=>t&&Sde(t,e)}function _de(e){return Ga("MuiCircularProgress",e)}_a("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Pi=44,qT=mx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,WT=mx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Ade=typeof qT!="string"?pL`
        animation: ${qT} 1.4s linear infinite;
      `:null,Tde=typeof WT!="string"?pL`
        animation: ${WT} 1.4s ease-in-out infinite;
      `:null,Ede=e=>{const{classes:t,variant:a,color:s,disableShrink:r}=e,i={root:["root",a,`color${Wn(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Wn(a)}`,r&&"circleDisableShrink"]};return Wa(i,_de,t)},kde=un("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`color${Wn(a.color)}`]]}})(ku(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Ade||{animation:`${qT} 1.4s linear infinite`}},...Object.entries(e.palette).filter(fp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Lde=un("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Pde=un("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.circle,t[`circle${Wn(a.variant)}`],a.disableShrink&&t.circleDisableShrink]}})(ku(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Tde||{animation:`${WT} 1.4s ease-in-out infinite`}}]}))),Dde=un("circle",{name:"MuiCircularProgress",slot:"Track"})(ku(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),jL=f.forwardRef(function(t,a){const s=bd({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:u=3.6,value:h=0,variant:p="indeterminate",...x}=s,b={...s,color:i,disableShrink:o,size:c,thickness:u,value:h,variant:p,enableTrackSlot:l},N=Ede(b),v={},j={},w={};if(p==="determinate"){const S=2*Math.PI*((Pi-u)/2);v.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(h),v.strokeDashoffset=`${((100-h)/100*S).toFixed(3)}px`,j.transform="rotate(-90deg)"}return n.jsx(kde,{className:Pt(N.root,r),style:{width:c,height:c,...j,...d},ownerState:b,ref:a,role:"progressbar",...w,...x,children:n.jsxs(Lde,{className:N.svg,ownerState:b,viewBox:`${Pi/2} ${Pi/2} ${Pi} ${Pi}`,children:[l?n.jsx(Dde,{className:N.track,ownerState:b,cx:Pi,cy:Pi,r:(Pi-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,n.jsx(Pde,{className:N.circle,style:v,ownerState:b,cx:Pi,cy:Pi,r:(Pi-u)/2,fill:"none",strokeWidth:u})]})})});function B9(e){return n.jsx(jde,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:n.jsx(jL,{color:"inherit"})})}var js={},ky={},o$;function Ode(){if(o$)return ky;o$=1,Object.defineProperty(ky,"__esModule",{value:!0});function e(t,a){return t.reduce((s,r)=>{const i=String(r[a]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return ky.default=e,ky}var Ly={},l$;function Mde(){if(l$)return Ly;l$=1,Object.defineProperty(Ly,"__esModule",{value:!0});function e(t,a){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=a[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return Ly.default=e,Ly}var Py={},c$;function Ide(){if(c$)return Py;c$=1,Object.defineProperty(Py,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return Py.default=e,Py}var d$;function $de(){if(d$)return js;d$=1;var e=js&&js.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(js,"__esModule",{value:!0}),js.customList=js.customArray=js.findOne=js.filter=js.all=js.utils=void 0;const t=e(Ode()),a=e(Mde()),s=e(Ide());js.utils={groupBy:t.default};function r(){return s.default}js.all=r;function i(d,u){return s.default.filter(h=>h[d]===u)}js.filter=i;function o(d,u){return s.default.find(h=>h[d]===u)}js.findOne=o;function l(d={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:u,sortDataBy:h,filter:p}={}){const x=[];let b=s.default;if(typeof p=="function"&&(b=b.filter(p)),h){const N=new Intl.Collator([],{sensitivity:"accent"});b.sort((v,j)=>N.compare(v[h],j[h]))}if(b.forEach(N=>{const v={};for(const j in d)v[j]=(0,a.default)(d[j],N);x.push(v)}),u&&d[u]){const N=new Intl.Collator([],{sensitivity:"accent"});x.sort((v,j)=>N.compare(v[u],j[u]))}return x}js.customArray=l;function c(d="countryCode",u="{countryNameEn} ({countryCode})",{filter:h}={}){const p={};let x=s.default;return typeof h=="function"&&(x=x.filter(h)),x.forEach(b=>{const N=(0,a.default)(u,b);p[String(b[d])]=N}),p}return js.customList=c,js}var Yf=$de();const GT=(...e)=>e.flat().filter(Boolean).join(" "),Rde=Yf.all(),H9=Rde.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),VT=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],zde=()=>{const e=wt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back to Home"]})},Fde=f.memo(({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isVisible:o,onTogglePass:l,error:c,isSelect:d,options:u})=>{const h=t.toLowerCase().includes("password"),p=h?o?"text":"password":s,x=GT("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",h?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),n.jsxs("div",{className:"relative",children:[d?n.jsx("select",{id:t,value:r,onChange:i,required:!0,className:x,children:u.map(b=>n.jsx("option",{value:b,children:b},b))}):n.jsx("input",{id:t,type:p,placeholder:a,value:r,onChange:i,required:!0,className:x}),h&&n.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(_u,{className:"size-5"}):n.jsx(Au,{className:"size-5"})})]}),c&&n.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),nu=Fde,Ude=f.memo(({currentStep:e,totalSteps:t})=>n.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:VT.map(a=>n.jsxs(f.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[n.jsx("div",{className:GT("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",a.id===e?"bg-amber-500 text-white shadow-lg":a.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:a.id<e?n.jsx(tL,{className:"size-5"}):a.id}),n.jsx("span",{className:GT("mt-2 text-xs font-medium hidden sm:block",a.id===e?"text-amber-600":"text-gray-500"),children:a.title})]}),a.id<t&&n.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},a.id))})),Bde=f.memo(({formData:e,handleChange:t,handleCodeChange:a,handleTogglePass:s,isPassVisible:r,formError:i,signupError:o,termsAccepted:l,handleTerms:c,isButtonDisabled:d,handleSubmit:u,handleGoogleLogin:h})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx(nu,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(nu,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:a,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:H9.map(p=>n.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),n.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(nu,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),n.jsx(nu,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),n.jsx(nu,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),o&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:o}),n.jsxs("div",{className:"flex items-start pt-2",children:[n.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),n.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),i&&n.jsx("div",{className:"mt-4 p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium animate-pulse",children:i}),n.jsx("button",{type:"submit",onClick:u,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),Hde=f.memo(({companyData:e,handleCodeChange1:t,handleSubmit:a,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:o,setStep:l,setIsSubmitted:c,setFormError:d})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(nu,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:H9.map(u=>n.jsxs("option",{value:u.code,children:[u.name," ",u.code]},u.code))}),n.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(nu,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),n.jsxs("div",{className:"flex space-x-4 mt-8",children:[n.jsxs("button",{type:"button",onClick:()=>{l(1),c(!1),d(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[n.jsx(Cie,{className:"size-4 mr-2"})," Back"]}),n.jsx("button",{onClick:a,type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),qde=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[a,s]=f.useState(1),[r,i]=f.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[o,l]=f.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,d]=f.useState({}),[u,h]=f.useState(!1),[p,x]=f.useState(null),[b,N]=f.useState(!1),{login:v}=Qs(),[j,w]=f.useState({plan_name:"Free",price:0}),[S,A]=f.useState(!1),[E,_]=f.useState(null);f.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),f.useEffect(()=>{const W=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:k}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){W();return}const J=document.createElement("script");J.src="https://accounts.google.com/gsi/client",J.async=!0,J.defer=!0,J.onload=W,document.body.appendChild(J)},[]);const k=async W=>{A(!0);try{const J=a9(W.credential);console.log("Google user:",J);try{await te.post("/auth/email-check",{email:J.email})}catch(Te){const ee=Te.response?.data?.detail||"An error occurred.";_(ee),A(!1);return}i(Te=>({...Te,email:J.email,first_name:J.given_name||"",last_name:J.family_name||"",password:"",profilePicture:J.picture||"",googleId:J.sub,auth_provider:"google",id_token:W.credential})),s(2)}catch(J){console.error("Google signup error:",J),x("Failed to process Google account. Please try again.")}finally{_(null),x(null),A(!1)}},T=f.useCallback(W=>{const{id:J,value:Te}=W.target;l(ee=>({...ee,[J]:Te})),x(null)},[]),O=f.useCallback(W=>{const{id:J,value:Te}=W.target;N(!1),i(ee=>{const U={...ee,[J]:Te};if(a===1){let je=null;if(J==="password"&&Te.length>0&&Te.length<8)je="Password must be at least 8 characters.";else if(J==="password"||J==="confirmPassword"){const be=J==="password"?Te:U.password,le=J==="confirmPassword"?Te:U.confirmPassword;be&&le&&be!==le&&(je="Passwords don't match.")}x(je)}return U})},[a]),$=f.useCallback(W=>i(J=>({...J,countryCode:W.target.value})),[]),R=f.useCallback(W=>l(J=>({...J,countryCode:W.target.value})),[]),P=f.useCallback(W=>d(J=>({...J,[W]:!J[W]})),[]),I=f.useCallback(W=>h(W.target.checked),[]),H=async W=>{if(W.preventDefault(),N(!1),x(null),a===1){if(!e.every(Te=>r[Te].trim()!=="")||!u){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.password.length<8){x("Password must be at least 8 characters long.");return}if(r.auth_provider==="google"){s(2);return}try{(await te.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(Te){Te.response&&Te.response.data&&Te.response.data.detail?x(Te.response.data.detail):x("Something went wrong. Please try again.")}finally{A(!1)}}else if(a===2){if(!t.every(Te=>(o[Te]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:Te,...ee}=r,U={...o,company_number:`${o.countryCode} ${o.company_number}`},be=(await te.post("/company/create",U)).data.id,le={...ee,company_id:be,phone_number:`${ee.countryCode} ${ee.phone_number}`};if(console.log(" Sending payload:",le),ee.auth_provider==="google"){const Ce=await te.post("/auth/google/signup",le),Se={...j,company_id:be,status:"Active"},Oe=await te.post("/subscription/subscribe",Se);x(null),N(!0),v(Ce.data)}else{const Ce=await te.post("/auth/signup",le),Se={...j,company_id:be,status:"Active"},Oe=await te.post("/subscription/subscribe",Se);x(null),N(!0),v(Ce.data)}}catch(Te){if(Te.response?.data?.detail){const ee=Te.response.data.detail;if(Array.isArray(ee)){const U=ee.map(je=>je.msg).join(", ");x(U)}else x(typeof ee=="object"?ee.msg||JSON.stringify(ee):ee)}else x("Something went wrong. Please try again.")}finally{A(!1)}}},Q=f.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:W=>{const{credential:J}=W;i(Te=>({...Te,first_name:J.given_name||"",last_name:J.family_name||"",email:J.email||"",profile_picture:J.picture||"",auth_provider:"google",id_token:J})),s(2)}}),window.google.accounts.id.prompt()}catch(W){console.error("Google login error:",W),x("Google login failed. Please try again.")}},[i,x,s]),G=f.useMemo(()=>{if(a===1){const W=e.every(ee=>(r[ee]||"").trim()!==""),J=r.password.length>=8,Te=r.password===r.confirmPassword;return!u||!!p||!W||!J||!Te}return a===2?!t.every(J=>(o[J]||"").trim()!=="")||!!p:!1},[a,u,p,r,o]),K=VT.find(W=>W.id===a);return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsxs("div",{className:"flex items-center text-gray-800",children:[n.jsx(tn,{className:"size-6 text-amber-500 mr-2"}),n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&n.jsx(B9,{isLoading:S}),n.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:n.jsx(zde,{})}),n.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:K.title}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:K.subtitle})]}),n.jsx(Ude,{currentStep:a,totalSteps:VT.length}),a===1&&n.jsx("div",{id:"googleSignupBtn"}),n.jsxs("form",{className:"mt-8",children:[a===1&&n.jsx(Bde,{formData:r,handleChange:O,handleCodeChange:$,handleTogglePass:P,isPassVisible:c,formError:p,signupError:E,termsAccepted:u,handleTerms:I,isButtonDisabled:G,handleSubmit:H,handleGoogleLogin:Q}),a===2&&n.jsx(Hde,{handleSubmit:H,companyData:o,handleCompanyChange:T,formError:p,isSubmitted:b,isButtonDisabled:G,setStep:s,setIsSubmitted:N,setFormError:x,handleCodeChange1:R}),a===1&&n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",n.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},Wde=()=>{const e=wt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back to Home"]})},u$=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isPassVisible:o,onTogglePass:l})=>{const c=t.toLowerCase().includes("password"),d=c?o?"text":"password":s;return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:t,type:d,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&n.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(_u,{className:"size-5"}):n.jsx(Au,{className:"size-5"})})]})]})},Gde=()=>{const[e,t]=f.useState({email:"",password:""}),[a,s]=f.useState(!1),[r,i]=f.useState(null),[o,l]=f.useState(!1),{isLoggedIn:c,login:d,userRole:u}=Qs(),h=wt();f.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),f.useEffect(()=>{c&&(u==="CEO"||u==="Admin"?h("/admin"):u==="Group Manager"?h("/group-manager"):u==="Manager"?h("/manager"):u==="Marketing"?h("/marketing"):u==="Sales"&&h("/sales"))},[c,h,u]);const p=N=>{const{id:v,value:j}=N.target;t(w=>({...w,[v]:j}))},x=async N=>{N.preventDefault(),i(null);try{const v=await te.post("/auth/login",e);d(v.data),i(null)}catch(v){v.response&&v.response.data&&v.response.data.detail?i(v.response.data.detail):i("Something went wrong. Please try again.")}};f.useEffect(()=>{const N=document.createElement("script");return N.src="https://accounts.google.com/gsi/client",N.async=!0,N.defer=!0,N.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:b}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(N),()=>{document.body.contains(N)&&document.body.removeChild(N)}},[]);const b=async N=>{l(!0);try{const v=a9(N.credential),j=await te.post("/auth/google/login",{id_token:N.credential});d(j.data)}catch(v){console.error("Google login failed:",v);const j=v.response?.data?.detail||"Google login failed. Please try again.";i(j)}finally{l(!1)}};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),o&&n.jsx(B9,{isLoading:o}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(Wde,{}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),n.jsx("div",{id:"googleLoginBtn"}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[n.jsx(u$,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),n.jsx(u$,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:a,onTogglePass:()=>s(N=>!N)}),r&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),n.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),n.jsx("div",{className:"text-center mt-1",children:n.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",n.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},Vde=({onClick:e})=>n.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back"]}),$S=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,icon:o})=>{const[l,c]=f.useState(!1),d=s==="password";return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative flex items-center",children:[o&&n.jsx(o,{className:"absolute left-3 text-gray-500 size-5"}),n.jsx("input",{id:t,type:d&&l?"text":s,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&n.jsx("button",{type:"button",onClick:()=>c(u=>!u),className:"absolute right-3 text-gray-500",children:l?n.jsx(_u,{className:"size-5"}):n.jsx(Au,{className:"size-5"})})]})]})},Yde=({otp:e,setOtp:t})=>n.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((a,s)=>n.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const o=[...e];o[s]=i,t(o)}}},s))}),Qde=()=>{const e=wt(),[t,a]=f.useState(1),[s,r]=f.useState(""),[i,o]=f.useState(["","","","","",""]),[l,c]=f.useState(""),[d,u]=f.useState(""),h=N=>{N.preventDefault(),a(2)},p=N=>{N.preventDefault(),a(3)},x=N=>{if(N.preventDefault(),l!==d){alert("Passwords do not match!");return}alert("Password reset successfully!")},b=()=>{t>1?a(t-1):e("/login")};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(Vde,{onClick:b}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),n.jsxs("form",{onSubmit:h,className:"space-y-6 cursor-pointer",children:[n.jsx($S,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:N=>r(N.target.value),icon:na}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",n.jsx("strong",{children:s}),"."]})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsx(Yde,{otp:i,setOtp:o}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsx($S,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:l,onChange:N=>c(N.target.value),icon:So}),n.jsx($S,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:d,onChange:N=>u(N.target.value),icon:So}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},en=()=>{const[e,t]=f.useState(null),[a,s]=f.useState(!1),[r,i]=f.useState(!0),o=wt(),l=async()=>{try{const d=await te.get("/auth/me");t(d.data),s(!0)}catch(d){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",d)}finally{i(!1)}};return f.useEffect(()=>{l()},[]),{user:e,isLoggedIn:a,loading:r,fetchUser:l,logout:async()=>{try{await te.post("/auth/logout")}catch{}t(null),s(!1),o("/login")}}};function Bt({message:e="Loading..."}){return n.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const Kde=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function Dy(){const{user:e,loading:t,fetchUser:a}=en(),[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[d,u]=f.useState(!1),[h,p]=f.useState(!1),[x,b]=f.useState(!1),[N,v]=f.useState(!1),[j,w]=f.useState(!1),[S,A]=f.useState(null),[E,_]=f.useState(null),k=f.useRef(null),[T,O]=f.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[$,R]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""});f.useEffect(()=>{e&&(O({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(e.profile_picture||null))},[e]),f.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const P=(K,W)=>{O(J=>({...J,[K]:W}))},I=(K,W)=>{R(J=>({...J,[K]:W}))},H=K=>{const W=K.target.files?.[0];if(!W)return;if(!W.type.startsWith("image/")){q.error("Please select an image file");return}if(W.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const J=new FileReader;J.onloadend=()=>{A(J.result),_(J.result)},J.readAsDataURL(W)},Q=async K=>{if(K.preventDefault(),!T.firstName.trim()||!T.lastName.trim()){q.warn("Please fill in all required fields.");return}o(!0);try{const W={first_name:T.firstName.trim(),last_name:T.lastName.trim(),phone_number:T.phoneNumber.trim()||null};S!==null&&(W.profile_picture=S),await te.put("/users/me",W),await a(),c(!1),A(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(W){console.error("Error updating account:",W);const J=W.response?.data?.detail||"Failed to update account information. Please try again.";q.error(J)}finally{o(!1)}},G=async K=>{if(K.preventDefault(),!$.newPassword||!$.confirmPassword){q.warn("Please fill in all password fields.");return}if($.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if($.newPassword!==$.confirmPassword){q.warn("New password and confirm password do not match.");return}w(!0);try{const W={password:$.newPassword};await te.put("/users/me",W),await a(),R({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),w(!1),q.success("Password changed successfully!")}catch(W){console.error("Error changing password:",W);const J=W.response?.data?.detail||"Failed to change password. Please try again.";q.error(J)}finally{w(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Bt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(nn,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!l&&n.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ma,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[E?n.jsx("div",{className:"relative",children:n.jsx("img",{src:E,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:Kde(e.first_name,e.last_name)}),l&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:k,accept:"image/*",onChange:H,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(JH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),l?n.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:T.firstName,onChange:K=>P("firstName",K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:T.lastName,onChange:K=>P("lastName",K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:T.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:T.phoneNumber,onChange:K=>P("phoneNumber",K.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{c(!1),O({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),A(null),_(e.profile_picture||null),k.current&&(k.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[n.jsx(aL,{}),i?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(So,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:G,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:$.newPassword,onChange:K=>I("newPassword",K.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>b(K=>!K),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?n.jsx(_u,{className:"size-5"}):n.jsx(Au,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:N?void 0:{WebkitTextSecurity:"disc"},value:$.confirmPassword,onChange:K=>I("confirmPassword",K.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>v(K=>!K),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":N?"Hide password":"Show password",children:N?n.jsx(_u,{className:"size-5"}):n.jsx(Au,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:j,children:[n.jsx(So,{}),j?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(t9,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}const Xde=()=>n.jsx("header",{className:"bg-secondary text-white py-4 border-b border-accent",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs(ad,{to:"/",className:"text-2xl font-bold",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsxs("nav",{className:"flex space-x-8",children:[n.jsx(ad,{to:"/resources",className:"hover:text-accent transition-colors",children:"Resources"}),n.jsx(ad,{to:"/legal",className:"hover:text-accent transition-colors",children:"Legal"})]})]})})}),Zde=()=>{f.useEffect(()=>{document.title="Resources - Sari-Sari CRM"},[]);const e=[{title:"Security",description:"Understand our security practices and certifications.",link:"#"},{title:"Support",description:"Get help from our support team and knowledge base.",link:"#"}];return n.jsxs("div",{className:"font-inter",children:[n.jsx(Xde,{}),n.jsx("main",{className:"bg-paper-white min-h-screen py-16",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("h1",{className:"text-5xl font-bold text-secondary mb-4",children:"Resources"}),n.jsx("p",{className:"text-lg text-secondary mb-12",children:"Everything you need to succeed with Sari-Sari CRM"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.map((t,a)=>n.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsx("h3",{className:"text-2xl font-semibold text-secondary mb-2",children:t.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),n.jsx("a",{href:t.link,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Learn More "})]},a))})]})})]})},Jde=()=>n.jsx("header",{className:"bg-secondary text-white py-4 border-b border-accent",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs(ad,{to:"/",className:"text-2xl font-bold",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsxs("nav",{className:"flex space-x-8",children:[n.jsx(ad,{to:"/resources",className:"hover:text-accent transition-colors",children:"Resources"}),n.jsx(ad,{to:"/legal",className:"hover:text-accent transition-colors",children:"Legal"})]})]})})}),eue=()=>{f.useEffect(()=>{document.title="Legal - Sari-Sari CRM"},[]);const e=[{title:"Terms",description:"Our terms of service and conditions of use.",link:"#"},{title:"Privacy",description:"How we protect and handle your personal data.",link:"#"},{title:"SLA",description:"Service level agreements and guarantees.",link:"#"},{title:"Compliance",description:"Our compliance standards and certifications.",link:"#"}];return n.jsxs("div",{className:"font-inter",children:[n.jsx(Jde,{}),n.jsx("main",{className:"bg-paper-white min-h-screen py-16",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("h1",{className:"text-5xl font-bold text-secondary mb-4",children:"Legal"}),n.jsx("p",{className:"text-lg text-secondary mb-12",children:"Important legal information and policies"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.map((t,a)=>n.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsx("h3",{className:"text-2xl font-semibold text-secondary mb-2",children:t.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),n.jsx("a",{href:t.link,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Read More "})]},a))})]})})]})},cN=e=>{const t="https://crm.sari-sari.com";try{const a=new URL(t),s=a.protocol==="https:"?"wss":"ws",r=a.hostname,i=a.port||(a.protocol==="https:"?443:80),o=`${s}://${r}:${i}/ws/notifications?user_id=${e}`;return console.log(" WebSocket URL:",o),o}catch(a){return console.error("Error parsing API URL:",a),`ws://localhost:8000/ws/notifications?user_id=${e}`}};function tue({toggleSidebar:e}){const[t,a]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState(0),d=f.useRef(null),u=f.useRef(null),h=Zt(),p=wt(),{logout:x}=Qs(),{user:b,fetchUser:N}=en(),j={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[h.pathname]||"Admin Panel";return f.useEffect(()=>{const w=()=>{N()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[N]),f.useEffect(()=>{if(!b?.id)return;const w=cN(b.id);console.log(" Connecting to WebSocket:",w);const S=new WebSocket(w);let A;const E=()=>{A=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return S.onopen=()=>{console.log(" Admin WS Connected"),clearTimeout(A)},S.onmessage=_=>{try{const k=JSON.parse(_.data);console.log(" Notification received:",k),o(T=>[k,...T]),c(T=>T+1)}catch(k){console.error("Error parsing notification:",k)}},S.onerror=_=>{console.error(" Admin WS Error:",_)},S.onclose=()=>{console.log(" Admin WS Disconnected"),E()},()=>{clearTimeout(A),S&&S.readyState===WebSocket.OPEN&&S.close()}},[b?.id]),f.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ox,{className:"text-2xl"})}),b?.company?.company_logo&&n.jsx("img",{src:b.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(rx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:w.title||w.message||"New Update"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:b?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[b?.first_name," ",b?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:b?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[b?.first_name," ",b?.middle_name," ",b?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{p("/admin/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/admin/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("button",{onClick:()=>{p("/admin/help"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Help"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function nue(){const[e,t]=f.useState(!1),[a,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),c=Zt(),{user:d}=en();f.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),f.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const h=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);f.useEffect(()=>{h&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/admin/dashboard",className:({isActive:b})=>b?p:x,children:[n.jsx(ix,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/accounts",className:({isActive:b})=>b?p:x,children:[n.jsx(yd,{})," Accounts"]}),n.jsxs($t,{to:"/admin/contacts",className:({isActive:b})=>b?p:x,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/admin/leads",className:({isActive:b})=>b?p:x,children:[n.jsx(Qn,{})," Leads"]}),n.jsxs($t,{to:"/admin/deals",className:({isActive:b})=>b?p:x,children:[n.jsx(tn,{})," Deals"]}),n.jsxs($t,{to:"/admin/quotes",className:({isActive:b})=>b?p:x,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs($t,{to:"/admin/targets",className:({isActive:b})=>b?p:x,children:[n.jsx(lr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/tasks",className:({isActive:b})=>b?p:x,children:[n.jsx(Yt,{})," Tasks"]}),n.jsxs($t,{to:"/admin/meetings",className:({isActive:b})=>b?p:x,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs($t,{to:"/admin/calls",className:({isActive:b})=>b?p:x,children:[n.jsx($s,{})," Calls"]}),n.jsxs($t,{to:"/admin/audit",className:({isActive:b})=>b?p:x,children:[n.jsx(As,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/admin/territory",className:({isActive:b})=>b?p:x,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(sL,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/users",className:({isActive:b})=>b?p:x,children:[n.jsx(aa,{})," Users"]}),n.jsxs($t,{to:"/admin/manage-account",className:({isActive:b})=>b?p:x,children:[n.jsx(nn,{})," Manage Account"]}),n.jsxs($t,{to:"/admin/company-details",className:({isActive:b})=>b?p:x,children:[n.jsx(Ww,{})," Settings"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(tue,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}function aue(e){return _t({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function sue(e){return _t({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function rue(e){return _t({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function Si({props:e,name:t}){return sce({props:e,name:t,defaultTheme:vL,themeId:lN})}function $l(e){const{elementType:t,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,o=r?{}:R9(a,s),{props:l,internalRef:c}=z9({...i,externalSlotProps:o}),d=Io(c,o?.ref,e.additionalProps?.ref);return $9(t,{...l,ref:d},s)}function hs(e){const t=f.useRef(e);return ss(()=>{t.current=e}),f.useRef((...a)=>(0,t.current)(...a)).current}var uv=Symbol("NOT_FOUND");function iue(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function oue(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function lue(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${a}]`)}}var m$=e=>Array.isArray(e)?e:[e];function cue(e){const t=Array.isArray(e[0])?e[0]:e;return lue(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function due(e,t){const a=[],{length:s}=e;for(let r=0;r<s;r++)a.push(e[r].apply(null,t));return a}function uue(e){let t;return{get(a){return t&&e(t.key,a)?t.value:uv},put(a,s){t={key:a,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function mue(e,t){let a=[];function s(l){const c=a.findIndex(d=>t(l,d.key));if(c>-1){const d=a[c];return c>0&&(a.splice(c,1),a.unshift(d)),d.value}return uv}function r(l,c){s(l)===uv&&(a.unshift({key:l,value:c}),a.length>e&&a.pop())}function i(){return a}function o(){a=[]}return{get:s,put:r,getEntries:i,clear:o}}var fue=(e,t)=>e===t;function hue(e){return function(a,s){if(a===null||s===null||a.length!==s.length)return!1;const{length:r}=a;for(let i=0;i<r;i++)if(!e(a[i],s[i]))return!1;return!0}}function gue(e,t){const a=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=fue,maxSize:r=1,resultEqualityCheck:i}=a,o=hue(s);let l=0;const c=r<=1?uue(o):mue(r,o);function d(){let u=c.get(arguments);if(u===uv){if(u=e.apply(null,arguments),l++,i){const p=c.getEntries().find(x=>i(x.value,u));p&&(u=p.value,l!==0&&l--)}c.put(arguments,u)}return u}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>l,d.resetResultsCount=()=>{l=0},d}var pue=class{constructor(e){this.value=e}deref(){return this.value}},xue=typeof WeakRef<"u"?WeakRef:pue,yue=0,f$=1;function Oy(){return{s:yue,v:void 0,o:null,p:null}}function q9(e,t={}){let a=Oy();const{resultEqualityCheck:s}=t;let r,i=0;function o(){let l=a;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const x=arguments[h];if(typeof x=="function"||typeof x=="object"&&x!==null){let b=l.o;b===null&&(l.o=b=new WeakMap);const N=b.get(x);N===void 0?(l=Oy(),b.set(x,l)):l=N}else{let b=l.p;b===null&&(l.p=b=new Map);const N=b.get(x);N===void 0?(l=Oy(),b.set(x,l)):l=N}}const d=l;let u;if(l.s===f$)u=l.v;else if(u=e.apply(null,arguments),i++,s){const h=r?.deref?.()??r;h!=null&&s(h,u)&&(u=h,i!==0&&i--),r=typeof u=="object"&&u!==null||typeof u=="function"?new xue(u):u}return d.s=f$,d.v=u,u}return o.clearCache=()=>{a=Oy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function W9(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,o=0,l,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),iue(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...a,...c},{memoize:h,memoizeOptions:p=[],argsMemoize:x=q9,argsMemoizeOptions:b=[]}=u,N=m$(p),v=m$(b),j=cue(r),w=h(function(){return i++,d.apply(null,arguments)},...N),S=x(function(){o++;const E=due(j,arguments);return l=w.apply(null,E),l},...v);return Object.assign(S,{resultFunc:d,memoizedResultFunc:w,dependencies:j,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var rt=W9(q9),bue=Object.assign((e,t=rt)=>{oue(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),s=a.map(i=>e[i]);return t(s,(...i)=>i.reduce((o,l,c)=>(o[a[c]]=l,o),{}))},{withTypes:()=>bue});const vue=W9({memoize:gue,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),jt=(e,t,a,s,r,i,o,l,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let d;if(e&&t&&a&&s&&r&&i&&o&&l)d=(u,h,p,x)=>{const b=e(u,h,p,x),N=t(u,h,p,x),v=a(u,h,p,x),j=s(u,h,p,x),w=r(u,h,p,x),S=i(u,h,p,x),A=o(u,h,p,x);return l(b,N,v,j,w,S,A,h,p,x)};else if(e&&t&&a&&s&&r&&i&&o)d=(u,h,p,x)=>{const b=e(u,h,p,x),N=t(u,h,p,x),v=a(u,h,p,x),j=s(u,h,p,x),w=r(u,h,p,x),S=i(u,h,p,x);return o(b,N,v,j,w,S,h,p,x)};else if(e&&t&&a&&s&&r&&i)d=(u,h,p,x)=>{const b=e(u,h,p,x),N=t(u,h,p,x),v=a(u,h,p,x),j=s(u,h,p,x),w=r(u,h,p,x);return i(b,N,v,j,w,h,p,x)};else if(e&&t&&a&&s&&r)d=(u,h,p,x)=>{const b=e(u,h,p,x),N=t(u,h,p,x),v=a(u,h,p,x),j=s(u,h,p,x);return r(b,N,v,j,h,p,x)};else if(e&&t&&a&&s)d=(u,h,p,x)=>{const b=e(u,h,p,x),N=t(u,h,p,x),v=a(u,h,p,x);return s(b,N,v,h,p,x)};else if(e&&t&&a)d=(u,h,p,x)=>{const b=e(u,h,p,x),N=t(u,h,p,x);return a(b,N,h,p,x)};else if(e&&t)d=(u,h,p,x)=>{const b=e(u,h,p,x);return t(b,h,p,x)};else if(e)d=e;else throw new Error("Missing arguments");return d},dN=e=>(...t)=>{const a=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,o=Math.max(r.length-i,0);if(o>3)throw new Error("Unsupported number of arguments");return(c,d,u,h)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=a.get(p);if(!x){const b=t.length===1?[j=>j,r]:t;let N=t;const v=[void 0,void 0,void 0];switch(o){case 0:break;case 1:{N=[...b.slice(0,-1),()=>v[0],r];break}case 2:{N=[...b.slice(0,-1),()=>v[0],()=>v[1],r];break}case 3:{N=[...b.slice(0,-1),()=>v[0],()=>v[1],()=>v[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(N=[...N,e]),x=vue(...N),x.selectorArgs=v,a.set(p,x)}switch(o){case 3:x.selectorArgs[2]=h;case 2:x.selectorArgs[1]=u;case 1:x.selectorArgs[0]=d}switch(o){case 0:return x(c);case 1:return x(c,d);case 2:return x(c,d,u);case 3:return x(c,d,u,h);default:throw new Error("unreachable")}}},Ma=dN();var RS={exports:{}},zS={},FS={exports:{}},US={};var h$;function wue(){if(h$)return US;h$=1;var e=Uf();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var a=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,p){var x=p(),b=s({inst:{value:x,getSnapshot:p}}),N=b[0].inst,v=b[1];return i(function(){N.value=x,N.getSnapshot=p,c(N)&&v({inst:N})},[h,x,p]),r(function(){return c(N)&&v({inst:N}),h(function(){c(N)&&v({inst:N})})},[h]),o(x),x}function c(h){var p=h.getSnapshot;h=h.value;try{var x=p();return!a(h,x)}catch{return!0}}function d(h,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return US.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,US}var g$;function Nue(){return g$||(g$=1,FS.exports=wue()),FS.exports}var p$;function jue(){if(p$)return zS;p$=1;var e=Uf(),t=Nue();function a(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var s=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return zS.useSyncExternalStoreWithSelector=function(d,u,h,p,x){var b=i(null);if(b.current===null){var N={hasValue:!1,value:null};b.current=N}else N=b.current;b=l(function(){function j(_){if(!w){if(w=!0,S=_,_=p(_),x!==void 0&&N.hasValue){var k=N.value;if(x(k,_))return A=k}return A=_}if(k=A,s(S,_))return k;var T=p(_);return x!==void 0&&x(k,T)?(S=_,k):(S=_,A=T)}var w=!1,S,A,E=h===void 0?null:h;return[function(){return j(u())},E===null?void 0:function(){return j(E())}]},[u,h,p,x]);var v=r(d,b[0],b[1]);return o(function(){N.hasValue=!0,N.value=v},[v]),c(v),v},zS}var x$;function Cue(){return x$||(x$=1,RS.exports=jue()),RS.exports}var G9=Cue();function Sue(e,t,a,s,r){const i=o=>t(o,a,s,r);return G9.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const y$={};function uN(e,t){const a=f.useRef(y$);return a.current===y$&&(a.current=e(t)),a}const _ue=[];function V9(e){f.useEffect(e,_ue)}const Aue=()=>{};function Tue(e,t,a){const s=uN(Eue,{store:e,selector:t}).current;s.effect=a,V9(s.onMount)}function Eue(e){const{store:t,selector:a}=e;let s=a(t.state);const r={effect:Aue,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const o=a(i);if(!Object.is(s,o)){const l=s;s=o,r.effect(l,o)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class CL{static create(t){return new CL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const a=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(a!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const a in t)if(!Object.is(this.state[a],t[a])){this.setState(Ye({},this.state,t));return}}set(t,a){Object.is(this.state[t],a)||this.setState(Ye({},this.state,{[t]:a}))}}const mN=({params:e,store:t})=>{f.useEffect(()=>{t.set("animation",Ye({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const a=f.useCallback(()=>{let s=!1;return t.set("animation",Ye({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",Ye({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return ss(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=l=>{l.matches?r=a():r?.()},o=window.matchMedia("(prefers-reduced-motion)");return i(o),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[a,t]),{instance:{disableAnimation:a}}};mN.params={skipAnimation:!0};mN.getDefaultizedParams=({params:e})=>Ye({},e,{skipAnimation:e.skipAnimation??!1});mN.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const kue=e=>e.animation,Lue=jt(kue,e=>e.skip||e.skipAnimationRequests>0);function Pue(e,t){const a=f.useRef(!0);f.useEffect(()=>{if(a.current){a.current=!1;return}return e()},t)}function YT(e){return e&&e.ownerDocument||document}function Due(e){return YT(e).defaultView||window}const Ut=Sue,fN="DEFAULT_X_AXIS_KEY",Oue="DEFAULT_Y_AXIS_KEY",Mue={top:20,bottom:20,left:20,right:20},Iue=45,$ue=25,Y9=20,qo=e=>e.cartesianAxis?.x,Jl=e=>e.cartesianAxis?.y,Rue=jt(Jl,function(t){return(t??[]).reduce((a,s)=>s.position==="left"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),zue=jt(Jl,function(t){return(t??[]).reduce((a,s)=>s.position==="right"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Fue=jt(qo,function(t){return(t??[]).reduce((a,s)=>s.position==="top"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Uue=jt(qo,function(t){return(t??[]).reduce((a,s)=>s.position==="bottom"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Bue=Ma(Rue,zue,Fue,Uue,function(t,a,s,r){return{left:t,right:a,top:s,bottom:r}}),hx=e=>e.dimensions,Hue=e=>e.dimensions.margin,pr=Ma(hx,Hue,Bue,function({width:t,height:a},{top:s,right:r,bottom:i,left:o},{left:l,right:c,top:d,bottom:u}){return{width:t-o-r-l-c,left:o+l,right:r+c,height:a-s-i-d-u,top:s+d,bottom:i+u}}),que=jt(hx,e=>e.width),Wue=jt(hx,e=>e.height),Q9=jt(hx,e=>e.propsWidth),K9=jt(hx,e=>e.propsHeight);function Gue(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?Ye({},t,e):e}const Vue=10,hN=({params:e,store:t,svgRef:a})=>{const s=e.width!==void 0&&e.height!==void 0,r=f.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,o]=f.useState(0),[l,c]=f.useState(0),d=f.useCallback(()=>{const b=a?.current;if(!b)return{};const v=Due(b).getComputedStyle(b),j=Math.floor(parseFloat(v.height))||0,w=Math.floor(parseFloat(v.width))||0;return(t.state.dimensions.width!==w||t.state.dimensions.height!==j)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??w,height:e.height??j,propsWidth:e.width,propsHeight:e.height}),{height:j,width:w}},[t,a,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);Pue(()=>{const b=e.width??t.state.dimensions.width,N=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:b,height:N,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),f.useEffect(()=>{r.current.displayError=!0},[]),ss(()=>{if(s||!r.current.initialCompute||r.current.computeRun>Vue)return;const b=d();b.width!==i||b.height!==l?(r.current.computeRun+=1,b.width!==void 0&&o(b.width),b.height!==void 0&&c(b.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[l,i,d,s]),ss(()=>{if(s)return()=>{};d();const b=a.current;if(typeof ResizeObserver>"u")return()=>{};let N;const v=new ResizeObserver(()=>{N=requestAnimationFrame(()=>{d()})});return b&&v.observe(b),()=>{N&&cancelAnimationFrame(N),b&&v.unobserve(b)}},[d,s,a]);const u=Ut(t,pr),h=f.useCallback(b=>b>=u.left-1&&b<=u.left+u.width,[u.left,u.width]),p=f.useCallback(b=>b>=u.top-1&&b<=u.top+u.height,[u.height,u.top]);return{instance:{isPointInside:f.useCallback((b,N,v)=>v&&"closest"in v&&v.closest("[data-drawing-container]")?!0:h(b)&&p(N),[h,p]),isXInside:h,isYInside:p}}};hN.params={width:!0,height:!0,margin:!0};hN.getDefaultizedParams=({params:e})=>Ye({},e,{margin:Gue(e.margin,Mue)});hN.getInitialState=({width:e,height:t,margin:a})=>({dimensions:{margin:a,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const SL=({params:e,store:t})=>(ss(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});SL.params={experimentalFeatures:!0};SL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const Yue=e=>e.experimentalFeatures,gN=jt(Yue,e=>!!e?.preferStrictDomainInLineCharts);let b$=0;const Que=()=>(b$+=1,`mui-chart-${b$}`),_L=({params:e,store:t})=>(f.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",Ye({},t.state.id,{chartId:e.id??Que()}))},[t,e.id]),{});_L.params={id:!0};_L.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const Kue=e=>e.id,Xue=jt(Kue,e=>e.chartId),Zue=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Jue=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],X9=e=>e==="dark"?Jue:Zue,Z9=({series:e,colors:t,seriesConfig:a})=>{const s={};return e.forEach((r,i)=>{const o=a[r.type].getSeriesWithDefaultValues(r,i,t),l=o.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[l]!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);s[r.type].series[l]=o,s[r.type].seriesOrder.push(l)}),s},eme=(e,t,a)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,a)??i)}),s},pN=({params:e,store:t,seriesConfig:a})=>{const{series:s,dataset:r,theme:i,colors:o}=e,l=f.useRef(!0);return f.useEffect(()=>{if(l.current){l.current=!1;return}t.set("series",Ye({},t.state.series,{defaultizedSeries:Z9({series:s,colors:typeof o=="function"?o(i):o,seriesConfig:a}),dataset:r}))},[o,r,s,i,a,t]),{}};pN.params={dataset:!0,series:!0,colors:!0,theme:!0};const tme=[];pN.getDefaultizedParams=({params:e})=>Ye({},e,{series:e.series?.length?e.series:tme,colors:e.colors??X9,theme:e.theme??"light"});pN.getInitialState=({series:e=[],colors:t,theme:a,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:Z9({series:e,colors:typeof t=="function"?t(a):t,seriesConfig:i}),dataset:s}});const AL=e=>e.series,nme=jt(AL,e=>e.defaultizedSeries),qr=jt(AL,e=>e.seriesConfig),ame=jt(AL,e=>e.dataset),xa=Ma(nme,qr,ame,function(t,a,s){return eme(t,a,s)}),sme={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class J9{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in sme)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,a,s,r){this.element=t,this.pointerManager=a,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const o=`${this.name}ChangeState`;this.element.addEventListener(o,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,a){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return a;const s=this.pointerOptions[t];return s?Ye({},a,s):a}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const a=`${this.name}ChangeState`;this.element.removeEventListener(a,this.handleStateChange)}}class rme{activeGestures=new Map;registerActiveGesture(t,a){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:a,element:t};s.add(r)}unregisterActiveGesture(t,a){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===a&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const a=this.activeGestures.get(t);return a?Array.from(a).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,a){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===a):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class ime{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(a=>a==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(a))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class ome{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const a=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(a,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const o=Ye({},i,{type:"forceCancel"});this.pointers.set(r,o)}}this.notifyHandlers(a),this.pointers.clear()};handlePointerEvent=t=>{const{type:a,pointerId:s}=t;if(a==="pointerdown"||a==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(a==="pointerup"||a==="pointercancel"||a==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(a=>a(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class lme{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new rme;keyboardManager=new ime;constructor(t){this.pointerManager=new ome({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(a=>{this.addGestureTemplate(a)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}setGestureState(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}registerElement(t,a,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,a,i)}),a}registerSingleGesture(t,a,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(a)||this.elementGestureMap.set(a,new Map);const i=this.elementGestureMap.get(a);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,a));const o=r.clone(s);return o.init(a,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,o),!0}unregisterElement(t,a){const s=this.elementGestureMap.get(a);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(a),s.size===0&&this.elementGestureMap.delete(a),!0)}unregisterAllGestures(t){const a=this.elementGestureMap.get(t);if(a){for(const[,s]of a)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Vu extends J9{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,a,s,r){super.init(t,a,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,a){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(a===s.target||s.target===this.originalTarget||a===this.originalTarget||"contains"in a&&a.contains(s.target))||"getRootNode"in a&&a.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(a))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function cme(e,t){const a=t.x-e.x,s=t.y-e.y;return Math.sqrt(a*a+s*s)}function BS(e){if(e.length<2)return 0;let t=0,a=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=cme({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),a+=1;return a>0?t/a:0}function Rl(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((a,s)=>(a.x+=s.clientX,a.y+=s.clientY,a),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function hi(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const My=1e-5,Dc=1e-5,v$=.15;function dme(e,t){const a=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=ume(t,e),o=Math.abs(a)>Math.abs(s)?"horizontal":"vertical",l=i||o==="horizontal"?My:v$,c=i?My:o==="horizontal"?v$:My;return Math.abs(a)>l&&(r.horizontal=a>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":o,r}function ume(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,a)*180/Math.PI;return r>=-45+Dc&&r<=-22.5+Dc||r>=22.5+Dc&&r<=45+Dc||r>=135+Dc&&r<=157.5+Dc||r>=-157.5+Dc&&r<=-135+Dc}function mme(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const a=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return a&&s}const w$=0,fme=e=>e>w$?1:e<-w$?-1:0,Uc=e=>{e.cancelable&&e.preventDefault()};class TL extends Vu{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new TL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,a)=>{if(a.type!=="pointermove"||a.pointerType!=="mouse"&&a.pointerType!=="pen")return;this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r||!this.isWithinPointerCount(s,a.pointerType))return;if(this.shouldPreventGesture(r,a.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,a);return}const i={x:a.clientX,y:a.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,a)),this.emitMoveEvent(r,"ongoing",s,a)};emitMoveEvent(t,a,s,r){const i=this.state.lastPosition||Rl(s),o=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,activeGestures:o,customData:this.customData},c=hi(this.name,a),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(d)}}class pu extends Vu{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new pu(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=Ye({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancel(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.cancel(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.cancel(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(o=>{this.state.startPointers.set(o.pointerId,o)}),this.originalTarget=r,this.state.startCentroid=Rl(i),this.state.lastCentroid=Ye({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,a.pointerType)){const o=Rl(i),l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y,d=Math.sqrt(l*l+c*c),u=dme(this.state.lastCentroid??this.state.startCentroid,o),h=this.state.lastCentroid?o.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?o.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&mme(u,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:h,y:p},this.state.totalDeltaX+=h,this.state.totalDeltaY+=p,this.state.activeDeltaX+=h,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,a,o),this.emitPanEvent(r,"ongoing",i,a,o)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:h,y:p},this.state.totalDeltaX+=h,this.state.totalDeltaY+=p,this.state.activeDeltaX+=h,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,a,o)),this.state.lastCentroid=o,this.state.lastDirection=u}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType)){const l=this.state.lastCentroid||this.state.startCentroid;a.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,a,l),this.emitPanEvent(r,"end",i,a,l),this.resetState()}}else this.resetState();break}};emitPanEvent(t,a,s,r,i){if(!this.state.startCentroid)return;const o=this.state.lastDeltas?.x??0,l=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,d=c?(r.timeStamp-c.timeStamp)/1e3:0,u=d>0?o/d:0,h=d>0?l/d:0,p=Math.sqrt(u*u+h*h),x=this.gesturesRegistry.getActiveGestures(t),b={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,deltaX:o,deltaY:l,direction:this.state.lastDirection,velocityX:u,velocityY:h,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},N=hi(this.name,a),v=new CustomEvent(N,{bubbles:!0,cancelable:!0,composed:!0,detail:b});t.dispatchEvent(v),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,a,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",a,s,this.state.lastCentroid),this.emitPanEvent(r,"end",a,s,this.state.lastCentroid)}this.resetState()}}class EL extends Vu{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(Ye({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new EL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=Ye({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,a),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(a.type){case"pointerdown":if(i.length>=2&&!this.isActive){const o=BS(i);this.state.startDistance=o,this.state.lastDistance=o,this.state.lastTime=a.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,a.pointerType)){const o=BS(i),l=Math.abs(o-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?o/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const u=(a.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(o-this.state.lastDistance)/u;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=o,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=a.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,a):(this.isActive=!0,this.emitPinchEvent(r,"start",i,a),this.emitPinchEvent(r,"ongoing",i,a))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType))a.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,a),this.emitPinchEvent(r,"end",i,a),this.resetState();else if(o.length>=2){const l=BS(o);this.state.startDistance=l/this.state.lastScale}}break}};emitPinchEvent(t,a,s,r){const i=Rl(s),o=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:o,velocity:this.state.velocity,activeGestures:c,direction:fme(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const u=hi(this.name,a),h=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(h)}}class xN extends Vu{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new xN(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=Ye({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancelPress(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&this.cancelPress(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelPress(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Rl(i),this.state.lastPosition=Ye({},this.state.startCentroid),this.state.startTime=a.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const o=this.state.lastPosition;this.emitPressEvent(r,"start",i,a,o),this.emitPressEvent(r,"ongoing",i,a,o)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Rl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(r,i,a)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const o=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,a,o)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,a);break}};emitPressEvent(t,a,s,r,i){const o=this.gesturesRegistry.getActiveGestures(t),l=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:l,activeGestures:o,customData:this.customData},d=hi(this.name,a),u=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(u),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,a,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",a,s,r),this.emitPressEvent(t??this.element,"end",a,s,r)}this.resetState()}}class kL extends Vu{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new xN({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new pu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new kL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.pressGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Uc,{passive:!1}),this.element.addEventListener("touchmove",Uc,{passive:!1}),this.element.addEventListener("touchend",Uc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Uc),this.element.removeEventListener("touchmove",Uc),this.element.removeEventListener("touchend",Uc)}}class hp extends Vu{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new hp(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,a.pointerType)||!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelTap(r,i,a);return}switch(a.type){case"pointerdown":this.isActive||(this.state.startCentroid=Rl(i),this.state.lastPosition=Ye({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Rl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(r,i,a)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const o=this.state.lastPosition||this.state.startCentroid;if(!o){this.cancelTap(r,i,a);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,a,o),this.resetState()):(this.state.lastTapTime=a.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,a);break}};fireTapEvent(t,a,s,r){const i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(l),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,a,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=hi(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}this.resetState()}}class LL extends Vu{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new hp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new pu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new LL(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.tapGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Uc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Uc)}}class mv extends J9{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new mv(Ye({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,a){const s=t.length>0?Rl(t):{x:a.clientX,y:a.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:a.target,srcEvent:a,phase:"ongoing",pointers:t,timeStamp:a.timeStamp,deltaX:a.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:a.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:a.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:a.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const o=hi(this.name,"ongoing"),l=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(l)}}const Hm=e=>e.preventDefault(),PL=({svgRef:e})=>{const t=f.useRef(null);f.useEffect(()=>{const r=e.current;t.current||(t.current=new lme({gestures:[new pu({name:"pan",threshold:0,maxPointers:1}),new TL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new hp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new xN({name:"quickPress",duration:50}),new pu({name:"brush",threshold:0,maxPointers:1}),new pu({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new EL({name:"zoomPinch",threshold:5}),new mv({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new mv({name:"panTurnWheel",sensitivity:.5}),new LL({name:"zoomTapAndDrag",dragThreshold:10}),new kL({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new hp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const a=f.useCallback((r,i,o)=>{const l=e.current;return l?.addEventListener(r,i,o),{cleanup:()=>l?.removeEventListener(r,i)}},[e]),s=f.useCallback((r,i)=>{const o=e.current,l=t.current;!l||!o||l.setGestureOptions(r,o,i??{})},[e,t]);return f.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Hm),r?.addEventListener("gesturechange",Hm),r?.addEventListener("gestureend",Hm),()=>{r?.removeEventListener("gesturestart",Hm),r?.removeEventListener("gesturechange",Hm),r?.removeEventListener("gestureend",Hm)}},[e]),{instance:{addInteractionListener:a,updateZoomInteractionListeners:s}}};PL.params={};PL.getInitialState=()=>({});const hme=[_L,SL,hN,pN,PL,mN],gme=["apiRef"],pme=e=>{let{plugins:t}=e,a=xn(e.props,gme);const s={};t.forEach(o=>{Object.assign(s,o.params)});const r={};return Object.keys(a).forEach(o=>{const l=a[o];s[o]&&(r[o]=l)}),t.reduce((o,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:o}):o,r)};let N$=0;function xme(e,t,a){const s=oN(),r=f.useMemo(()=>[...hme,...e],[e]),i=pme({plugins:r,props:t});i.id=i.id??s;const l=f.useRef({}).current,c=bme(t.apiRef),d=f.useRef(null),u=f.useRef(null),h=f.useRef(null);if(h.current==null){N$+=1;const b={cacheKey:{id:N$}};r.forEach(N=>{N.getInitialState&&Object.assign(b,N.getInitialState(i,b,a))}),h.current=new CL(b)}const p=b=>{const N=b({instance:l,params:i,plugins:r,store:h.current,svgRef:u,chartRootRef:d,seriesConfig:a});N.publicAPI&&Object.assign(c.current,N.publicAPI),N.instance&&Object.assign(l,N.instance)};return r.forEach(p),{contextValue:f.useMemo(()=>({store:h.current,publicAPI:c.current,instance:l,svgRef:u,chartRootRef:d}),[l,c])}}function yme(e){return e.current==null&&(e.current={}),e}function bme(e){const t=f.useRef({});return e?yme(e):t}const eq=f.createContext(null);const tq=()=>{},nq=4,aq=20+2*nq,vme=40+2*nq,wme="hover",Iy={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:aq,showTooltip:wme}},DL=(e,t,a,s)=>{if(e)return e===!0?Ye({axisId:t,axisDirection:a},Iy,{reverse:s??!1}):Ye({axisId:t,axisDirection:a},Iy,{reverse:s??!1},e,{slider:Ye({},Iy.slider,{size:e.slider?.preview??Iy.slider.preview?vme:aq},e.slider)})};function sq(e,t){const a={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:fN,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"bottom":"none",d=i.position??c,u=$ue+(i.label?Y9:0),h=i.id??`defaultized-x-axis-${o}`,p=Ye({offset:a[d]},i,{id:h,position:d,height:i.height??u,zoom:DL(i.zoom,h,"x",i.reverse)});if(d!=="none"&&(a[d]+=p.height,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return Ye({},p,{data:t.map(x=>x[l])})})}function rq(e,t){const a={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:Oue,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"left":"none",d=i.position??c,u=Iue+(i.label?Y9:0),h=i.id??`defaultized-y-axis-${o}`,p=Ye({offset:a[d]},i,{id:h,position:d,width:i.width??u,zoom:DL(i.zoom,h,"y",i.reverse)});if(d!=="none"&&(a[d]+=p.width,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return Ye({},p,{data:t.map(x=>x[l])})})}function Nme(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Yu(e){return e.scaleType==="band"}function Qu(e){return e.scaleType==="point"}function jme(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function Cme(e){return e.scaleType==="symlog"}function gx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function OL(e){let t=e,a=e;e.length===1&&(t=(o,l)=>e(o)-l,a=Sme(e));function s(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)<0?c=u+1:d=u}return c}function r(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)>0?d=u:c=u+1}return c}function i(o,l,c,d){c==null&&(c=0),d==null&&(d=o.length);const u=s(o,l,c,d-1);return u>c&&t(o[u-1],l)>-t(o[u],l)?u-1:u}return{left:s,center:i,right:r}}function Sme(e){return(t,a)=>gx(e(t),a)}function iq(e){return e===null?NaN:+e}function*_me(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const Ame=OL(gx),px=Ame.right;OL(iq).center;class fv extends Map{constructor(t,a=kme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(j$(this,t))}has(t){return super.has(j$(this,t))}set(t,a){return super.set(Tme(this,t),a)}delete(t){return super.delete(Eme(this,t))}}function j$({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):a}function Tme({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):(e.set(s,a),a)}function Eme({_intern:e,_key:t},a){const s=t(a);return e.has(s)&&(a=e.get(a),e.delete(s)),a}function kme(e){return e!==null&&typeof e=="object"?e.valueOf():e}var QT=Math.sqrt(50),KT=Math.sqrt(10),XT=Math.sqrt(2);function ZT(e,t,a){var s,r=-1,i,o,l;if(t=+t,e=+e,a=+a,e===t&&a>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(l=oq(e,t,a))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),d=Math.round(t/l);for(c*l<e&&++c,d*l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)*l}else{l=-l;let c=Math.round(e*l),d=Math.round(t*l);for(c/l<e&&++c,d/l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)/l}return s&&o.reverse(),o}function oq(e,t,a){var s=(t-e)/Math.max(0,a),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=QT?10:i>=KT?5:i>=XT?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=QT?10:i>=KT?5:i>=XT?2:1)}function JT(e,t,a){var s=Math.abs(t-e)/Math.max(0,a),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=QT?r*=10:i>=KT?r*=5:i>=XT&&(r*=2),t<e?-r:r}function C$(e,t){let a;for(const s of e)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function S$(e,t){let a;for(const s of e)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function lq(e,t,a=0,s=e.length-1,r=gx){for(;s>a;){if(s-a>600){const c=s-a+1,d=t-a+1,u=Math.log(c),h=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),x=Math.max(a,Math.floor(t-d*h/c+p)),b=Math.min(s,Math.floor(t+(c-d)*h/c+p));lq(e,t,x,b,r)}const i=e[t];let o=a,l=s;for(lg(e,a,t),r(e[s],i)>0&&lg(e,a,s);o<l;){for(lg(e,o,l),++o,--l;r(e[o],i)<0;)++o;for(;r(e[l],i)>0;)--l}r(e[a],i)===0?lg(e,a,l):(++l,lg(e,l,s)),l<=t&&(a=l+1),t<=l&&(s=l-1)}return e}function lg(e,t,a){const s=e[t];e[t]=e[a],e[a]=s}function Lme(e,t,a){if(e=Float64Array.from(_me(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return S$(e);if(t>=1)return C$(e);var s,r=(s-1)*t,i=Math.floor(r),o=C$(lq(e,i).subarray(0,i+1)),l=S$(e.subarray(i+1));return o+(l-o)*(r-i)}}function Pme(e,t,a=iq){if(s=e.length){if((t=+t)<=0||s<2)return+a(e[0],0,e);if(t>=1)return+a(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),o=+a(e[i],i,e),l=+a(e[i+1],i+1,e);return o+(l-o)*(r-i)}}function cq(e,t,a){e=+e,t=+t,a=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+a;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/a))|0,i=new Array(r);++s<r;)i[s]=e+s*a;return i}function _i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ec(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const eE=Symbol("implicit");function gp(){var e=new fv,t=[],a=[],s=eE;function r(i){let o=e.get(i);if(o===void 0){if(s!==eE)return s;e.set(i,o=t.push(i)-1)}return a[o%a.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new fv;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(i){return arguments.length?(a=Array.from(i),r):a.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return gp(t,a).unknown(s)},_i.apply(r,arguments),r}function ML(){var e=gp().unknown(void 0),t=e.domain,a=e.range,s=0,r=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var p=t().length,x=r<s,b=x?r:s,N=x?s:r;i=(N-b)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),b+=(N-b-i*(p-c))*u,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var v=cq(p).map(function(j){return b+i*j});return a(x?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),h()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,h()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,h()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),h()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,h()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),h()):u},e.copy=function(){return ML(t(),[s,r]).round(l).paddingInner(c).paddingOuter(d).align(u)},_i.apply(h(),arguments)}function dq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return dq(t())},e}function Dme(){return dq(ML.apply(null,arguments).paddingInner(1))}function IL(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function uq(e,t){var a=Object.create(e.prototype);for(var s in t)a[s]=t[s];return a}function xx(){}var pp=.7,hv=1/pp,hf="\\s*([+-]?\\d+)\\s*",xp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ome=/^#([0-9a-f]{3,8})$/,Mme=new RegExp(`^rgb\\(${hf},${hf},${hf}\\)$`),Ime=new RegExp(`^rgb\\(${Eo},${Eo},${Eo}\\)$`),$me=new RegExp(`^rgba\\(${hf},${hf},${hf},${xp}\\)$`),Rme=new RegExp(`^rgba\\(${Eo},${Eo},${Eo},${xp}\\)$`),zme=new RegExp(`^hsl\\(${xp},${Eo},${Eo}\\)$`),Fme=new RegExp(`^hsla\\(${xp},${Eo},${Eo},${xp}\\)$`),_$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};IL(xx,yp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:A$,formatHex:A$,formatHex8:Ume,formatHsl:Bme,formatRgb:T$,toString:T$});function A$(){return this.rgb().formatHex()}function Ume(){return this.rgb().formatHex8()}function Bme(){return mq(this).formatHsl()}function T$(){return this.rgb().formatRgb()}function yp(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=Ome.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?E$(t):a===3?new cr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?$y(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?$y(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Mme.exec(e))?new cr(t[1],t[2],t[3],1):(t=Ime.exec(e))?new cr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$me.exec(e))?$y(t[1],t[2],t[3],t[4]):(t=Rme.exec(e))?$y(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zme.exec(e))?P$(t[1],t[2]/100,t[3]/100,1):(t=Fme.exec(e))?P$(t[1],t[2]/100,t[3]/100,t[4]):_$.hasOwnProperty(e)?E$(_$[e]):e==="transparent"?new cr(NaN,NaN,NaN,0):null}function E$(e){return new cr(e>>16&255,e>>8&255,e&255,1)}function $y(e,t,a,s){return s<=0&&(e=t=a=NaN),new cr(e,t,a,s)}function Hme(e){return e instanceof xx||(e=yp(e)),e?(e=e.rgb(),new cr(e.r,e.g,e.b,e.opacity)):new cr}function tE(e,t,a,s){return arguments.length===1?Hme(e):new cr(e,t,a,s??1)}function cr(e,t,a,s){this.r=+e,this.g=+t,this.b=+a,this.opacity=+s}IL(cr,tE,uq(xx,{brighter(e){return e=e==null?hv:Math.pow(hv,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?pp:Math.pow(pp,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cr(xu(this.r),xu(this.g),xu(this.b),gv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k$,formatHex:k$,formatHex8:qme,formatRgb:L$,toString:L$}));function k$(){return`#${lu(this.r)}${lu(this.g)}${lu(this.b)}`}function qme(){return`#${lu(this.r)}${lu(this.g)}${lu(this.b)}${lu((isNaN(this.opacity)?1:this.opacity)*255)}`}function L$(){const e=gv(this.opacity);return`${e===1?"rgb(":"rgba("}${xu(this.r)}, ${xu(this.g)}, ${xu(this.b)}${e===1?")":`, ${e})`}`}function gv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lu(e){return e=xu(e),(e<16?"0":"")+e.toString(16)}function P$(e,t,a,s){return s<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new zi(e,t,a,s)}function mq(e){if(e instanceof zi)return new zi(e.h,e.s,e.l,e.opacity);if(e instanceof xx||(e=yp(e)),!e)return new zi;if(e instanceof zi)return e;e=e.rgb();var t=e.r/255,a=e.g/255,s=e.b/255,r=Math.min(t,a,s),i=Math.max(t,a,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(a-s)/l+(a<s)*6:a===i?o=(s-t)/l+2:o=(t-a)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new zi(o,l,c,e.opacity)}function Wme(e,t,a,s){return arguments.length===1?mq(e):new zi(e,t,a,s??1)}function zi(e,t,a,s){this.h=+e,this.s=+t,this.l=+a,this.opacity=+s}IL(zi,Wme,uq(xx,{brighter(e){return e=e==null?hv:Math.pow(hv,e),new zi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?pp:Math.pow(pp,e),new zi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*t,r=2*a-s;return new cr(HS(e>=240?e-240:e+120,r,s),HS(e,r,s),HS(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new zi(D$(this.h),Ry(this.s),Ry(this.l),gv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gv(this.opacity);return`${e===1?"hsl(":"hsla("}${D$(this.h)}, ${Ry(this.s)*100}%, ${Ry(this.l)*100}%${e===1?")":`, ${e})`}`}}));function D$(e){return e=(e||0)%360,e<0?e+360:e}function Ry(e){return Math.max(0,Math.min(1,e||0))}function HS(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const $L=e=>()=>e;function Gme(e,t){return function(a){return e+a*t}}function Vme(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(s){return Math.pow(e+s*t,a)}}function Yme(e){return(e=+e)==1?fq:function(t,a){return a-t?Vme(t,a,e):$L(isNaN(t)?a:t)}}function fq(e,t){var a=t-e;return a?Gme(e,a):$L(isNaN(e)?t:e)}const O$=(function e(t){var a=Yme(t);function s(r,i){var o=a((r=tE(r)).r,(i=tE(i)).r),l=a(r.g,i.g),c=a(r.b,i.b),d=fq(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=l(u),r.b=c(u),r.opacity=d(u),r+""}}return s.gamma=e,s})(1);function Qme(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<a;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function Kme(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xme(e,t){var a=t?t.length:0,s=e?Math.min(a,e.length):0,r=new Array(s),i=new Array(a),o;for(o=0;o<s;++o)r[o]=Qf(e[o],t[o]);for(;o<a;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=r[o](l);return i}}function RL(e,t){var a=new Date;return e=+e,t=+t,function(s){return a.setTime(e*(1-s)+t*s),a}}function Cf(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function Zme(e,t){var a={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?a[r]=Qf(e[r],t[r]):s[r]=t[r];return function(i){for(r in a)s[r]=a[r](i);return s}}var nE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qS=new RegExp(nE.source,"g");function Jme(e){return function(){return e}}function efe(e){return function(t){return e(t)+""}}function zL(e,t){var a=nE.lastIndex=qS.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=nE.exec(e))&&(r=qS.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:Cf(s,r)})),a=qS.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?efe(c[0].x):Jme(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Qf(e,t){var a=typeof t,s;return t==null||a==="boolean"?$L(t):(a==="number"?Cf:a==="string"?(s=yp(t))?(t=s,O$):zL:t instanceof yp?O$:t instanceof Date?RL:Kme(t)?Qme:Array.isArray(t)?Xme:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Zme:Cf)(e,t)}function FL(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function tfe(e,t){t===void 0&&(t=e,e=Qf);for(var a=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);a<s;)i[a]=e(r,r=t[++a]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function nfe(e){return function(){return e}}function pv(e){return+e}var M$=[0,1];function Ws(e){return e}function aE(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:nfe(isNaN(t)?NaN:.5)}function afe(e,t){var a;return e>t&&(a=e,e=t,t=a),function(s){return Math.max(e,Math.min(t,s))}}function sfe(e,t,a){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=aE(r,s),i=a(o,i)):(s=aE(s,r),i=a(i,o)),function(l){return i(s(l))}}function rfe(e,t,a){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=aE(e[o],e[o+1]),i[o]=a(t[o],t[o+1]);return function(l){var c=px(e,l,1,s)-1;return i[c](r[c](l))}}function yx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function yN(){var e=M$,t=M$,a=Qf,s,r,i,o=Ws,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==Ws&&(o=afe(e[0],e[p-1])),l=p>2?rfe:sfe,c=d=null,h}function h(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(s),t,a)))(s(o(p)))}return h.invert=function(p){return o(r((d||(d=l(t,e.map(s),Cf)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,pv),u()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),a=FL,u()},h.clamp=function(p){return arguments.length?(o=p?!0:Ws,u()):o!==Ws},h.interpolate=function(p){return arguments.length?(a=p,u()):a},h.unknown=function(p){return arguments.length?(i=p,h):i},function(p,x){return s=p,r=x,u()}}function UL(){return yN()(Ws,Ws)}function ife(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xv(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function Sf(e){return e=xv(Math.abs(e)),e?e[1]:NaN}function ofe(e,t){return function(a,s){for(var r=a.length,i=[],o=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(a.substring(r-=l,r+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function lfe(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var cfe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bp(e){if(!(t=cfe.exec(e)))throw new Error("invalid format: "+e);var t;return new BL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bp.prototype=BL.prototype;function BL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}BL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dfe(e){e:for(var t=e.length,a=1,s=-1,r;a<t;++a)switch(e[a]){case".":s=r=a;break;case"0":s===0&&(s=a),r=a;break;default:if(!+e[a])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var hq;function ufe(e,t){var a=xv(e,t);if(!a)return e+"";var s=a[0],r=a[1],i=r-(hq=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+xv(e,Math.max(0,t+i-1))[0]}function I$(e,t){var a=xv(e,t);if(!a)return e+"";var s=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const $$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ife,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>I$(e*100,t),r:I$,s:ufe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function R$(e){return e}var z$=Array.prototype.map,F$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mfe(e){var t=e.grouping===void 0||e.thousands===void 0?R$:ofe(z$.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?R$:lfe(z$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=bp(h);var p=h.fill,x=h.align,b=h.sign,N=h.symbol,v=h.zero,j=h.width,w=h.comma,S=h.precision,A=h.trim,E=h.type;E==="n"?(w=!0,E="g"):$$[E]||(S===void 0&&(S=12),A=!0,E="g"),(v||p==="0"&&x==="=")&&(v=!0,p="0",x="=");var _=N==="$"?a:N==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",k=N==="$"?s:/[%p]/.test(E)?o:"",T=$$[E],O=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function $(R){var P=_,I=k,H,Q,G;if(E==="c")I=T(R)+I,R="";else{R=+R;var K=R<0||1/R<0;if(R=isNaN(R)?c:T(Math.abs(R),S),A&&(R=dfe(R)),K&&+R==0&&b!=="+"&&(K=!1),P=(K?b==="("?b:l:b==="-"||b==="("?"":b)+P,I=(E==="s"?F$[8+hq/3]:"")+I+(K&&b==="("?")":""),O){for(H=-1,Q=R.length;++H<Q;)if(G=R.charCodeAt(H),48>G||G>57){I=(G===46?r+R.slice(H+1):R.slice(H))+I,R=R.slice(0,H);break}}}w&&!v&&(R=t(R,1/0));var W=P.length+R.length+I.length,J=W<j?new Array(j-W+1).join(p):"";switch(w&&v&&(R=t(J+R,J.length?j-I.length:1/0),J=""),x){case"<":R=P+R+I+J;break;case"=":R=P+J+R+I;break;case"^":R=J.slice(0,W=J.length>>1)+P+R+I+J.slice(W);break;default:R=J+P+R+I;break}return i(R)}return $.toString=function(){return h+""},$}function u(h,p){var x=d((h=bp(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(Sf(p)/3)))*3,N=Math.pow(10,-b),v=F$[8+b/3];return function(j){return x(N*j)+v}}return{format:d,formatPrefix:u}}var zy,HL,gq;ffe({thousands:",",grouping:[3],currency:["$",""]});function ffe(e){return zy=mfe(e),HL=zy.format,gq=zy.formatPrefix,zy}function hfe(e){return Math.max(0,-Sf(Math.abs(e)))}function gfe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sf(t)/3)))*3-Sf(Math.abs(e)))}function pfe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sf(t)-Sf(e))+1}function pq(e,t,a,s){var r=JT(e,t,a),i;switch(s=bp(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=gfe(r,o))&&(s.precision=i),gq(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=pfe(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=hfe(r))&&(s.precision=i-(s.type==="%")*2);break}}return HL(s)}function vd(e){var t=e.domain;return e.ticks=function(a){var s=t();return ZT(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var r=t();return pq(r[0],r[r.length-1],a??10,s)},e.nice=function(a){a==null&&(a=10);var s=t(),r=0,i=s.length-1,o=s[r],l=s[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=r,r=i,i=d);u-- >0;){if(d=oq(o,l,a),d===c)return s[r]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function bN(){var e=UL();return e.copy=function(){return yx(e,bN())},_i.apply(e,arguments),vd(e)}function xq(e){var t;function a(s){return s==null||isNaN(s=+s)?t:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(e=Array.from(s,pv),a):e.slice()},a.unknown=function(s){return arguments.length?(t=s,a):t},a.copy=function(){return xq(e).unknown(t)},e=arguments.length?Array.from(e,pv):[0,1],vd(a)}function yq(e,t){e=e.slice();var a=0,s=e.length-1,r=e[a],i=e[s],o;return i<r&&(o=a,a=s,s=o,o=r,r=i,i=o),e[a]=t.floor(r),e[s]=t.ceil(i),e}function U$(e){return Math.log(e)}function B$(e){return Math.exp(e)}function xfe(e){return-Math.log(-e)}function yfe(e){return-Math.exp(-e)}function bfe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vfe(e){return e===10?bfe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function wfe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function H$(e){return(t,a)=>-e(-t,a)}function qL(e){const t=e(U$,B$),a=t.domain;let s=10,r,i;function o(){return r=wfe(s),i=vfe(s),a()[0]<0?(r=H$(r),i=H$(i),e(xfe,yfe)):e(U$,B$),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(a(l),o()):a()},t.ticks=l=>{const c=a();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let p=r(d),x=r(u),b,N;const v=l==null?10:+l;let j=[];if(!(s%1)&&x-p<v){if(p=Math.floor(p),x=Math.ceil(x),d>0){for(;p<=x;++p)for(b=1;b<s;++b)if(N=p<0?b/i(-p):b*i(p),!(N<d)){if(N>u)break;j.push(N)}}else for(;p<=x;++p)for(b=s-1;b>=1;--b)if(N=p>0?b/i(-p):b*i(p),!(N<d)){if(N>u)break;j.push(N)}j.length*2<v&&(j=ZT(d,u,v))}else j=ZT(p,x,Math.min(x-p,v)).map(i);return h?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=bp(c)).precision==null&&(c.trim=!0),c=HL(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let h=u/i(Math.round(r(u)));return h*s<s-.5&&(h*=s),h<=d?c(u):""}},t.nice=()=>a(yq(a(),{floor:l=>i(Math.floor(r(l))),ceil:l=>i(Math.ceil(r(l)))})),t}function vp(){const e=qL(yN()).domain([1,10]);return e.copy=()=>yx(e,vp()).base(e.base()),_i.apply(e,arguments),e}function q$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function W$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function WL(e){var t=1,a=e(q$(t),W$(t));return a.constant=function(s){return arguments.length?e(q$(t=+s),W$(t)):t},vd(a)}function GL(){var e=WL(yN());return e.copy=function(){return yx(e,GL()).constant(e.constant())},_i.apply(e,arguments)}function G$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Nfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function jfe(e){return e<0?-e*e:e*e}function VL(e){var t=e(Ws,Ws),a=1;function s(){return a===1?e(Ws,Ws):a===.5?e(Nfe,jfe):e(G$(a),G$(1/a))}return t.exponent=function(r){return arguments.length?(a=+r,s()):a},vd(t)}function vN(){var e=VL(yN());return e.copy=function(){return yx(e,vN()).exponent(e.exponent())},_i.apply(e,arguments),e}function bq(){return vN.apply(null,arguments).exponent(.5)}function V$(e){return Math.sign(e)*e*e}function Cfe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function vq(){var e=UL(),t=[0,1],a=!1,s;function r(i){var o=Cfe(e(i));return isNaN(o)?s:a?Math.round(o):o}return r.invert=function(i){return e.invert(V$(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,pv)).map(V$)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(a=!!i,r):a},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return vq(e.domain(),t).round(a).clamp(e.clamp()).unknown(s)},_i.apply(r,arguments),vd(r)}function wq(){var e=[],t=[],a=[],s;function r(){var o=0,l=Math.max(1,t.length);for(a=new Array(l-1);++o<l;)a[o-1]=Pme(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[px(a,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?a[l-1]:e[0],l<a.length?a[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(gx),r()},i.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return a.slice()},i.copy=function(){return wq().domain(e).range(t).unknown(s)},_i.apply(i,arguments)}function Nq(){var e=0,t=1,a=1,s=[.5],r=[0,1],i;function o(c){return c!=null&&c<=c?r[px(s,c,0,a)]:i}function l(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*t-(c-a)*e)/(a+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(a=(r=Array.from(c)).length-1,l()):r.slice()},o.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=a?[s[a-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return Nq().domain([e,t]).range(r).unknown(i)},_i.apply(vd(o),arguments)}function YL(){var e=[.5],t=[0,1],a,s=1;function r(i){return i!=null&&i<=i?t[px(e,i,0,s)]:a}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return YL().domain(e).range(t).unknown(a)},_i.apply(r,arguments)}const WS=new Date,GS=new Date;function rs(e,t,a,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const o=r(i),l=r.ceil(i);return i-o<l-i?o:l},r.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),r.range=(i,o,l)=>{const c=[];if(i=r.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},r.filter=i=>rs(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),a&&(r.count=(i,o)=>(WS.setTime(+i),GS.setTime(+o),e(WS),e(GS),Math.floor(a(WS,GS))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?o=>s(o)%i===0:o=>r.count(0,o)%i===0):r)),r}const yv=rs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);yv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?rs(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):yv);yv.range;const Al=1e3,mi=Al*60,Tl=mi*60,zl=Tl*24,QL=zl*7,Y$=zl*30,VS=zl*365,cu=rs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Al)},(e,t)=>(t-e)/Al,e=>e.getUTCSeconds());cu.range;const KL=rs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Al)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getMinutes());KL.range;const XL=rs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getUTCMinutes());XL.range;const ZL=rs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Al-e.getMinutes()*mi)},(e,t)=>{e.setTime(+e+t*Tl)},(e,t)=>(t-e)/Tl,e=>e.getHours());ZL.range;const JL=rs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Tl)},(e,t)=>(t-e)/Tl,e=>e.getUTCHours());JL.range;const bx=rs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mi)/zl,e=>e.getDate()-1);bx.range;const wN=rs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zl,e=>e.getUTCDate()-1);wN.range;const jq=rs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zl,e=>Math.floor(e/zl));jq.range;function Ku(e){return rs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*mi)/QL)}const NN=Ku(0),bv=Ku(1),Sfe=Ku(2),_fe=Ku(3),_f=Ku(4),Afe=Ku(5),Tfe=Ku(6);NN.range;bv.range;Sfe.range;_fe.range;_f.range;Afe.range;Tfe.range;function Xu(e){return rs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/QL)}const jN=Xu(0),vv=Xu(1),Efe=Xu(2),kfe=Xu(3),Af=Xu(4),Lfe=Xu(5),Pfe=Xu(6);jN.range;vv.range;Efe.range;kfe.range;Af.range;Lfe.range;Pfe.range;const e4=rs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());e4.range;const t4=rs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());t4.range;const Fl=rs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});Fl.range;const Ul=rs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ul.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});Ul.range;function Cq(e,t,a,s,r,i){const o=[[cu,1,Al],[cu,5,5*Al],[cu,15,15*Al],[cu,30,30*Al],[i,1,mi],[i,5,5*mi],[i,15,15*mi],[i,30,30*mi],[r,1,Tl],[r,3,3*Tl],[r,6,6*Tl],[r,12,12*Tl],[s,1,zl],[s,2,2*zl],[a,1,QL],[t,1,Y$],[t,3,3*Y$],[e,1,VS]];function l(d,u,h){const p=u<d;p&&([d,u]=[u,d]);const x=h&&typeof h.range=="function"?h:c(d,u,h),b=x?x.range(d,+u+1):[];return p?b.reverse():b}function c(d,u,h){const p=Math.abs(u-d)/h,x=OL(([,,v])=>v).right(o,p);if(x===o.length)return e.every(JT(d/VS,u/VS,h));if(x===0)return yv.every(Math.max(JT(d,u,h),1));const[b,N]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return b.every(N)}return[l,c]}const[Dfe,Ofe]=Cq(Ul,t4,jN,jq,JL,XL),[Mfe,Ife]=Cq(Fl,e4,NN,bx,ZL,KL);function YS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function QS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cg(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function $fe(e){var t=e.dateTime,a=e.date,s=e.time,r=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=dg(r),u=ug(r),h=dg(i),p=ug(i),x=dg(o),b=ug(o),N=dg(l),v=ug(l),j=dg(c),w=ug(c),S={a:K,A:W,b:J,B:Te,c:null,d:e6,e:e6,f:ihe,g:phe,G:yhe,H:ahe,I:she,j:rhe,L:Sq,m:ohe,M:lhe,p:ee,q:U,Q:a6,s:s6,S:che,u:dhe,U:uhe,V:mhe,w:fhe,W:hhe,x:null,X:null,y:ghe,Y:xhe,Z:bhe,"%":n6},A={a:je,A:be,b:le,B:Ce,c:null,d:t6,e:t6,f:jhe,g:Dhe,G:Mhe,H:vhe,I:whe,j:Nhe,L:Aq,m:Che,M:She,p:Se,q:Oe,Q:a6,s:s6,S:_he,u:Ahe,U:The,V:Ehe,w:khe,W:Lhe,x:null,X:null,y:Phe,Y:Ohe,Z:Ihe,"%":n6},E={a:$,A:R,b:P,B:I,c:H,d:Z$,e:Z$,f:Jfe,g:X$,G:K$,H:J$,I:J$,j:Qfe,L:Zfe,m:Yfe,M:Kfe,p:O,q:Vfe,Q:the,s:nhe,S:Xfe,u:Bfe,U:Hfe,V:qfe,w:Ufe,W:Wfe,x:Q,X:G,y:X$,Y:K$,Z:Gfe,"%":ehe};S.x=_(a,S),S.X=_(s,S),S.c=_(t,S),A.x=_(a,A),A.X=_(s,A),A.c=_(t,A);function _(ge,He){return function(Ne){var he=[],Z=-1,_e=0,ke=ge.length,ze,tt,De;for(Ne instanceof Date||(Ne=new Date(+Ne));++Z<ke;)ge.charCodeAt(Z)===37&&(he.push(ge.slice(_e,Z)),(tt=Q$[ze=ge.charAt(++Z)])!=null?ze=ge.charAt(++Z):tt=ze==="e"?" ":"0",(De=He[ze])&&(ze=De(Ne,tt)),he.push(ze),_e=Z+1);return he.push(ge.slice(_e,Z)),he.join("")}}function k(ge,He){return function(Ne){var he=cg(1900,void 0,1),Z=T(he,ge,Ne+="",0),_e,ke;if(Z!=Ne.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(He&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(_e=QS(cg(he.y,0,1)),ke=_e.getUTCDay(),_e=ke>4||ke===0?vv.ceil(_e):vv(_e),_e=wN.offset(_e,(he.V-1)*7),he.y=_e.getUTCFullYear(),he.m=_e.getUTCMonth(),he.d=_e.getUTCDate()+(he.w+6)%7):(_e=YS(cg(he.y,0,1)),ke=_e.getDay(),_e=ke>4||ke===0?bv.ceil(_e):bv(_e),_e=bx.offset(_e,(he.V-1)*7),he.y=_e.getFullYear(),he.m=_e.getMonth(),he.d=_e.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),ke="Z"in he?QS(cg(he.y,0,1)).getUTCDay():YS(cg(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(ke+5)%7:he.w+he.U*7-(ke+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,QS(he)):YS(he)}}function T(ge,He,Ne,he){for(var Z=0,_e=He.length,ke=Ne.length,ze,tt;Z<_e;){if(he>=ke)return-1;if(ze=He.charCodeAt(Z++),ze===37){if(ze=He.charAt(Z++),tt=E[ze in Q$?He.charAt(Z++):ze],!tt||(he=tt(ge,Ne,he))<0)return-1}else if(ze!=Ne.charCodeAt(he++))return-1}return he}function O(ge,He,Ne){var he=d.exec(He.slice(Ne));return he?(ge.p=u.get(he[0].toLowerCase()),Ne+he[0].length):-1}function $(ge,He,Ne){var he=x.exec(He.slice(Ne));return he?(ge.w=b.get(he[0].toLowerCase()),Ne+he[0].length):-1}function R(ge,He,Ne){var he=h.exec(He.slice(Ne));return he?(ge.w=p.get(he[0].toLowerCase()),Ne+he[0].length):-1}function P(ge,He,Ne){var he=j.exec(He.slice(Ne));return he?(ge.m=w.get(he[0].toLowerCase()),Ne+he[0].length):-1}function I(ge,He,Ne){var he=N.exec(He.slice(Ne));return he?(ge.m=v.get(he[0].toLowerCase()),Ne+he[0].length):-1}function H(ge,He,Ne){return T(ge,t,He,Ne)}function Q(ge,He,Ne){return T(ge,a,He,Ne)}function G(ge,He,Ne){return T(ge,s,He,Ne)}function K(ge){return o[ge.getDay()]}function W(ge){return i[ge.getDay()]}function J(ge){return c[ge.getMonth()]}function Te(ge){return l[ge.getMonth()]}function ee(ge){return r[+(ge.getHours()>=12)]}function U(ge){return 1+~~(ge.getMonth()/3)}function je(ge){return o[ge.getUTCDay()]}function be(ge){return i[ge.getUTCDay()]}function le(ge){return c[ge.getUTCMonth()]}function Ce(ge){return l[ge.getUTCMonth()]}function Se(ge){return r[+(ge.getUTCHours()>=12)]}function Oe(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var He=_(ge+="",S);return He.toString=function(){return ge},He},parse:function(ge){var He=k(ge+="",!1);return He.toString=function(){return ge},He},utcFormat:function(ge){var He=_(ge+="",A);return He.toString=function(){return ge},He},utcParse:function(ge){var He=k(ge+="",!0);return He.toString=function(){return ge},He}}}var Q$={"-":"",_:" ",0:"0"},xs=/^\s*\d+/,Rfe=/^%/,zfe=/[\\^$*+?|[\]().{}]/g;function _n(e,t,a){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<a?new Array(a-i+1).join(t)+r:r)}function Ffe(e){return e.replace(zfe,"\\$&")}function dg(e){return new RegExp("^(?:"+e.map(Ffe).join("|")+")","i")}function ug(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function Ufe(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function Bfe(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function Hfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function qfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function Wfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function K$(e,t,a){var s=xs.exec(t.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function X$(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Gfe(e,t,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function Vfe(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.q=s[0]*3-3,a+s[0].length):-1}function Yfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function Z$(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function Qfe(e,t,a){var s=xs.exec(t.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function J$(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function Kfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function Xfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function Zfe(e,t,a){var s=xs.exec(t.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function Jfe(e,t,a){var s=xs.exec(t.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function ehe(e,t,a){var s=Rfe.exec(t.slice(a,a+1));return s?a+s[0].length:-1}function the(e,t,a){var s=xs.exec(t.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function nhe(e,t,a){var s=xs.exec(t.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function e6(e,t){return _n(e.getDate(),t,2)}function ahe(e,t){return _n(e.getHours(),t,2)}function she(e,t){return _n(e.getHours()%12||12,t,2)}function rhe(e,t){return _n(1+bx.count(Fl(e),e),t,3)}function Sq(e,t){return _n(e.getMilliseconds(),t,3)}function ihe(e,t){return Sq(e,t)+"000"}function ohe(e,t){return _n(e.getMonth()+1,t,2)}function lhe(e,t){return _n(e.getMinutes(),t,2)}function che(e,t){return _n(e.getSeconds(),t,2)}function dhe(e){var t=e.getDay();return t===0?7:t}function uhe(e,t){return _n(NN.count(Fl(e)-1,e),t,2)}function _q(e){var t=e.getDay();return t>=4||t===0?_f(e):_f.ceil(e)}function mhe(e,t){return e=_q(e),_n(_f.count(Fl(e),e)+(Fl(e).getDay()===4),t,2)}function fhe(e){return e.getDay()}function hhe(e,t){return _n(bv.count(Fl(e)-1,e),t,2)}function ghe(e,t){return _n(e.getFullYear()%100,t,2)}function phe(e,t){return e=_q(e),_n(e.getFullYear()%100,t,2)}function xhe(e,t){return _n(e.getFullYear()%1e4,t,4)}function yhe(e,t){var a=e.getDay();return e=a>=4||a===0?_f(e):_f.ceil(e),_n(e.getFullYear()%1e4,t,4)}function bhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_n(t/60|0,"0",2)+_n(t%60,"0",2)}function t6(e,t){return _n(e.getUTCDate(),t,2)}function vhe(e,t){return _n(e.getUTCHours(),t,2)}function whe(e,t){return _n(e.getUTCHours()%12||12,t,2)}function Nhe(e,t){return _n(1+wN.count(Ul(e),e),t,3)}function Aq(e,t){return _n(e.getUTCMilliseconds(),t,3)}function jhe(e,t){return Aq(e,t)+"000"}function Che(e,t){return _n(e.getUTCMonth()+1,t,2)}function She(e,t){return _n(e.getUTCMinutes(),t,2)}function _he(e,t){return _n(e.getUTCSeconds(),t,2)}function Ahe(e){var t=e.getUTCDay();return t===0?7:t}function The(e,t){return _n(jN.count(Ul(e)-1,e),t,2)}function Tq(e){var t=e.getUTCDay();return t>=4||t===0?Af(e):Af.ceil(e)}function Ehe(e,t){return e=Tq(e),_n(Af.count(Ul(e),e)+(Ul(e).getUTCDay()===4),t,2)}function khe(e){return e.getUTCDay()}function Lhe(e,t){return _n(vv.count(Ul(e)-1,e),t,2)}function Phe(e,t){return _n(e.getUTCFullYear()%100,t,2)}function Dhe(e,t){return e=Tq(e),_n(e.getUTCFullYear()%100,t,2)}function Ohe(e,t){return _n(e.getUTCFullYear()%1e4,t,4)}function Mhe(e,t){var a=e.getUTCDay();return e=a>=4||a===0?Af(e):Af.ceil(e),_n(e.getUTCFullYear()%1e4,t,4)}function Ihe(){return"+0000"}function n6(){return"%"}function a6(e){return+e}function s6(e){return Math.floor(+e/1e3)}var qm,Eq,kq;$he({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $he(e){return qm=$fe(e),Eq=qm.format,qm.parse,kq=qm.utcFormat,qm.utcParse,qm}function Rhe(e){return new Date(e)}function zhe(e){return e instanceof Date?+e:+new Date(+e)}function n4(e,t,a,s,r,i,o,l,c,d){var u=UL(),h=u.invert,p=u.domain,x=d(".%L"),b=d(":%S"),N=d("%I:%M"),v=d("%I %p"),j=d("%a %d"),w=d("%b %d"),S=d("%B"),A=d("%Y");function E(_){return(c(_)<_?x:l(_)<_?b:o(_)<_?N:i(_)<_?v:s(_)<_?r(_)<_?j:w:a(_)<_?S:A)(_)}return u.invert=function(_){return new Date(h(_))},u.domain=function(_){return arguments.length?p(Array.from(_,zhe)):p().map(Rhe)},u.ticks=function(_){var k=p();return e(k[0],k[k.length-1],_??10)},u.tickFormat=function(_,k){return k==null?E:d(k)},u.nice=function(_){var k=p();return(!_||typeof _.range!="function")&&(_=t(k[0],k[k.length-1],_??10)),_?p(yq(k,_)):u},u.copy=function(){return yx(u,n4(e,t,a,s,r,i,o,l,c,d))},u}function a4(){return _i.apply(n4(Mfe,Ife,Fl,e4,NN,bx,ZL,KL,cu,Eq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Lq(){return _i.apply(n4(Dfe,Ofe,Ul,t4,jN,wN,JL,XL,cu,kq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function CN(){var e=0,t=1,a,s,r,i,o=Ws,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(r===0?.5:(h=(i(h)-a)*r,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,a=i(e=+e),s=i(t=+t),r=a===s?0:1/(s-a),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(p){var x,b;return arguments.length?([x,b]=p,o=h(x,b),d):[o(0),o(1)]}}return d.range=u(Qf),d.rangeRound=u(FL),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,a=h(e),s=h(t),r=a===s?0:1/(s-a),d}}function wd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function s4(){var e=vd(CN()(Ws));return e.copy=function(){return wd(e,s4())},ec.apply(e,arguments)}function Pq(){var e=qL(CN()).domain([1,10]);return e.copy=function(){return wd(e,Pq()).base(e.base())},ec.apply(e,arguments)}function Dq(){var e=WL(CN());return e.copy=function(){return wd(e,Dq()).constant(e.constant())},ec.apply(e,arguments)}function r4(){var e=VL(CN());return e.copy=function(){return wd(e,r4()).exponent(e.exponent())},ec.apply(e,arguments)}function Fhe(){return r4.apply(null,arguments).exponent(.5)}function Oq(){var e=[],t=Ws;function a(s){if(s!=null&&!isNaN(s=+s))return t((px(e,s,1)-1)/(e.length-1))}return a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(gx),a},a.interpolator=function(s){return arguments.length?(t=s,a):t},a.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(r,i)=>Lme(e,i/s))},a.copy=function(){return Oq(t).domain(e)},ec.apply(a,arguments)}function SN(){var e=0,t=.5,a=1,s=1,r,i,o,l,c,d=Ws,u,h=!1,p;function x(N){return isNaN(N=+N)?p:(N=.5+((N=+u(N))-i)*(s*N<s*i?l:c),d(h?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,a]=N,r=u(e=+e),i=u(t=+t),o=u(a=+a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x):[e,t,a]},x.clamp=function(N){return arguments.length?(h=!!N,x):h},x.interpolator=function(N){return arguments.length?(d=N,x):d};function b(N){return function(v){var j,w,S;return arguments.length?([j,w,S]=v,d=tfe(N,[j,w,S]),x):[d(0),d(.5),d(1)]}}return x.range=b(Qf),x.rangeRound=b(FL),x.unknown=function(N){return arguments.length?(p=N,x):p},function(N){return u=N,r=N(e),i=N(t),o=N(a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x}}function Mq(){var e=vd(SN()(Ws));return e.copy=function(){return wd(e,Mq())},ec.apply(e,arguments)}function Iq(){var e=qL(SN()).domain([.1,1,10]);return e.copy=function(){return wd(e,Iq()).base(e.base())},ec.apply(e,arguments)}function $q(){var e=WL(SN());return e.copy=function(){return wd(e,$q()).constant(e.constant())},ec.apply(e,arguments)}function i4(){var e=VL(SN());return e.copy=function(){return wd(e,i4()).exponent(e.exponent())},ec.apply(e,arguments)}function Uhe(){return i4.apply(null,arguments).exponent(.5)}function Rq(e){return e.type==="piecewise"?YL(e.thresholds,e.colors):s4([e.min??0,e.max??100],e.color)}function Tf(e){return e.values?gp(e.values,e.colors).unknown(e.unknownColor??null):gp(e.colors.map((t,a)=>a),e.colors).unknown(e.unknownColor??null)}function gf(e){return e.type==="ordinal"?Tf(e):Rq(e)}function zq(e,t,a){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,o=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),l=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(o,Math.max(l,i??a))}function Fq(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function o4(e){return Math.floor(Math.abs(e)/50)}function r6(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function _N(...e){let t=new fv(void 0,r6),a=[],s=[],r=0,i=1,o,l,c=!1,d=0,u=0,h=.5;const p=v=>{const j=t.get(v);if(j!==void 0)return s[j%s.length]},x=()=>{const v=a.length,j=i<r,w=j?i:r,S=j?r:i;o=(S-w)/Math.max(1,v-d+u*2),c&&(o=Math.floor(o));const A=w+(S-w-o*(v-d))*h;l=o*(1-d);const E=c?Math.round(A):A;l=c?Math.round(l):l;const k=cq(v).map(T=>E+o*T);return s=j?k.reverse():k,p};p.domain=function(v){if(!arguments.length)return a.slice();a=[],t=new fv(void 0,r6);for(const j of v)t.has(j)||t.set(j,a.push(j)-1);return x()},p.range=function(v){if(!arguments.length)return[r,i];const[j,w]=v;return r=+j,i=+w,x()},p.rangeRound=function(v){const[j,w]=v;return r=+j,i=+w,c=!0,x()},p.bandwidth=function(){return l},p.step=function(){return o},p.round=function(v){return arguments.length?(c=!!v,x()):c},p.padding=function(v){return arguments.length?(d=Math.min(1,u=+v),x()):d},p.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),x()):d},p.paddingOuter=function(v){return arguments.length?(u=+v,x()):u},p.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),x()):h},p.copy=()=>_N(a,[r,i]).round(c).paddingInner(d).paddingOuter(u).align(h);const[b,N]=e;return e.length>1?(p.domain(b),p.range(N)):b?p.range(b):x(),p}function Uq(...e){const t=_N(...e).paddingInner(1),a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=a();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function Bq(...e){const t=GL(...e),a=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=Bhe(t);return t.ticks=o=>{const l=a(o),c=t.constant();let d=0,u=0,h=0;l.forEach(x=>{x>-c&&x<c&&(u+=1),x<=-c&&(d+=1),x>=c&&(h+=1)});const p=[];if(d>0&&p.push(...s.ticks(d)),u>0){const x=r.ticks(u);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(h>0){const x=i.ticks(h);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(o=10,l)=>{const c=t.constant(),[d,u]=t.domain(),h=u-d,p=s.domain(),x=p[1]-p[0],N=(h===0?0:x/h)*o,v=r.domain(),j=v[1]-v[0],S=(h===0?0:j/h)*o,A=i.domain(),E=A[1]-A[0],k=(h===0?0:E/h)*o,T=s.tickFormat(N,l),O=r.tickFormat(S,l),$=i.tickFormat(k,l);return R=>(R.valueOf()<=-c?T:R.valueOf()>=c?$:O)(R)},t.copy=()=>Bq(t.domain(),t.range()).constant(t.constant()),t}function Bhe(e){const t=e.constant(),a=e.domain(),s=[a[0],Math.min(a[1],-t)],r=vp(s,e.range()),i=[Math.max(a[0],-t),Math.min(a[1],t)],o=bN(i,e.range()),l=[Math.max(a[0],t),a[1]],c=vp(l,e.range());return{negativeScale:r,linearScale:o,positiveScale:c}}function AN(e,t,a){switch(e){case"log":return vp(t,a);case"pow":return vN(t,a);case"sqrt":return bq(t,a);case"time":return a4(t,a);case"utc":return Lq(t,a);case"symlog":return Bq(t,a);default:return bN(t,a)}}const sE=e=>e?.[0]instanceof Date;function rE(e,t,a){const s=a4(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(a)(r):`${r.toLocaleString()}`}let i6,o6;class Hhe{types=new Set;constructor(){if(i6)throw new Error("You can only create one instance!");i6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class qhe{types=new Set;constructor(){if(o6)throw new Error("You can only create one instance!");o6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const TN=new Hhe;TN.addType("bar");TN.addType("line");TN.addType("scatter");const Hq=new qhe;Hq.addType("radar");function EN(e){return TN.getTypes().has(e)}function wv(e){return EN(e.type)}const Whe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(EN).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function ys(e){return e.bandwidth!==void 0}function Ghe(e){return ys(e)&&e.paddingOuter!==void 0}function Vhe(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a?[s[1],s[0]]:s}const Yhe=.2,Qhe=.1;function qq({scales:e,drawingArea:t,formattedSeries:a,axis:s,seriesConfig:r,axisDirection:i,zoomMap:o,domains:l}){if(s===void 0)return{axis:{},axisIds:[]};const c=Whe(i,r,a,s[0].id),d={};return s.forEach(u=>{const h=u,p=e[h.id],x=o?.get(h.id),b=x?[x.start,x.end]:[0,100],N=Vhe(t,i,h.reverse??!1),v=!h.ignoreTooltip&&c.has(h.id),j=h.data??[];if(ys(p)){const _=i==="y"?[N[1],N[0]]:N;if(Ghe(p)&&Yu(h)){const k=h.categoryGapRatio??Yhe,T=h.barGapRatio??Qhe;d[h.id]=Ye({offset:0,height:0,categoryGapRatio:k,barGapRatio:T,triggerTooltip:v},h,{data:j,scale:p,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?Tf(Ye({values:h.data},h.colorMap)):gf(h.colorMap))})}if(Qu(h)&&(d[h.id]=Ye({offset:0,height:0,triggerTooltip:v},h,{data:j,scale:p,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?Tf(Ye({values:h.data},h.colorMap)):gf(h.colorMap))})),sE(h.data)){const k=rE(h.data,_,h.tickNumber);d[h.id].valueFormatter=h.valueFormatter??k}return}if(h.scaleType==="band"||h.scaleType==="point")return;const w=l[h.id].tickNumber,S=h,A=S.scaleType??"linear",E=Fq(w,b);d[h.id]=Ye({offset:0,height:0,triggerTooltip:v},S,{data:j,scaleType:A,scale:p,tickNumber:E,colorScale:S.colorMap&&Rq(S.colorMap),valueFormatter:h.valueFormatter??Nme(E,AN(A,N.map(_=>p.invert(_)),N))})}),{axis:d,axisIds:s.map(({id:u})=>u)}}function Khe(e){return e!=null}function Xhe(e,t,a,s){const r=e?.length??0,i=Math.floor(t*r/100),o=Math.ceil(a*r/100);return function(c,d){return(c[s]??e?.[d])==null?!0:d>=i&&d<o}}function Zhe(e,t,a,s,r){const i=e[0].valueOf(),o=e[1].valueOf(),l=i+t*(o-i)/100,c=i+a*(o-i)/100;return function(u,h){const p=u[s]??r?.[h];return p==null?!0:p>=l&&p<=c}}const Jhe=e=>({currentAxisId:t,seriesXAxisId:a,seriesYAxisId:s,isDefaultAxis:r})=>(i,o)=>!(t===a?s:a)||r?Object.values(e??{})[0]?.(i,o)??!0:[s,a].filter(d=>d!==t).map(d=>e[d??""]).filter(Khe).every(d=>d(i,o)),l6=e=>(t=[])=>t.reduce((a,s)=>{const{zoom:r,id:i,reverse:o}=s,l=DL(r,i,e,o);return l&&(a[i]=l),a},{}),ege=.2;function Wq(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a.reverse?[s[1],s[0]]:s}function Gq(e,t){const a=[0,1];if(Yu(e)){const i=e.categoryGapRatio??ege;return _N(t,a).paddingInner(i).paddingOuter(i/2)}if(Qu(e))return Uq(t,a);const s=e.scaleType??"linear",r=AN(s,t,a);return Cme(e)&&e.constant!=null&&r.constant(e.constant),r}const Vq=(e,t)=>{const a=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*a/s,i=e[1]+(100-t[1])*a/s;return[r,i]},tge=(e,t,a,s,r,i,o)=>{const l=a==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return l?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:o})??[1/0,-1/0]};function kN(e,t,a,s,r,i){const o=Object.keys(a).filter(EN);let l=[1/0,-1/0];for(const c of o){const[d,u]=tge(c,e,t,a,s,r,i);l=[Math.min(l[0],d),Math.max(l[1],u)]}return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l}const nge=(e,t,a,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&a===0)return"strict"}return"nice"};function Yq(e,t,a){return AN(e??"linear",t,[0,1]).nice(a).domain()}function Qq(e,t,a,s,[r,i],o,l){const c=Xq(e,t,a,s,l);let d=Zq(e,r,i);if(typeof c=="function"){const{min:h,max:p}=c(r.valueOf(),i.valueOf());d[0]=h,d[1]=p}const u=zq(e,d,o);return c==="nice"&&(d=Yq(e.scaleType,d,u)),d=["min"in e?e.min??d[0]:d[0],"max"in e?e.max??d[1]:d[1]],{domain:d,tickNumber:u}}function Kq(e,t,a,s,[r,i],o,l){const c=Xq(e,t,a,s,l);let d=Zq(e,r,i);if(typeof c=="function"){const{min:u,max:h}=c(r.valueOf(),i.valueOf());d[0]=u,d[1]=h}return c==="nice"&&(d=Yq(e.scaleType,d,o)),[e.min??d[0],e.max??d[1]]}function Xq(e,t,a,s,r){return r?nge(e,t,a,s):e.domainLimit??"nice"}function Zq(e,t,a){let s=t,r=a;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class age{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,a){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(a>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=a}pop(){if(this.length===0)return;const t=this.ids,a=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],o=a[r];let l=0;const c=r>>1;for(;l<c;){const d=(l<<1)+1,u=d+1,h=d+(+(u<r)&+(a[u]<a[d]));if(a[h]>=o)break;t[l]=t[h],a[l]=a[h],l=h}t[l]=i,a[l]=o}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const c6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],KS=3;class l4{static from(t,a=0){if(a%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,a+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==KS)throw new Error(`Got v${i} data when expected v${KS}.`);const o=c6[r&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,a+2,1),[c]=new Uint32Array(t,a+4,1);return new l4(c,l,o,void 0,t,a)}constructor(t,a=16,s=Float64Array,r=ArrayBuffer,i,o=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.byteOffset=o;let l=t,c=l;this._levelBounds=[l*4];do l=Math.ceil(l/this.nodeSize),c+=l,this._levelBounds.push(c*4);while(l!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const d=c6.indexOf(s),u=c*4*s.BYTES_PER_ELEMENT;if(d<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,o+8,c*4),this._indices=new this.IndexArrayType(i,o+8+u,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const h=this.data=new r(8+u+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(h,8,c*4),this._indices=new this.IndexArrayType(h,8+u,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(h,0,2).set([251,(KS<<4)+d]),new Uint16Array(h,2,1)[0]=a,new Uint32Array(h,4,1)[0]=t}this._queue=new age}add(t,a,s=t,r=a){const i=this._pos>>2,o=this._boxes;return this._indices[i]=i,o[this._pos++]=t,o[this._pos++]=a,o[this._pos++]=s,o[this._pos++]=r,t<this.minX&&(this.minX=t),a<this.minY&&(this.minY=a),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const a=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let o=0,l=0;o<this.numItems;o++){const c=t[l++],d=t[l++],u=t[l++],h=t[l++],p=Math.floor(i*((c+u)/2-this.minX)/a),x=Math.floor(i*((d+h)/2-this.minY)/s);r[o]=ige(p,x)}iE(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,l=0;o<this._levelBounds.length-1;o++){const c=this._levelBounds[o];for(;l<c;){const d=l;let u=t[l++],h=t[l++],p=t[l++],x=t[l++];for(let b=1;b<this.nodeSize&&l<c;b++)u=Math.min(u,t[l++]),h=Math.min(h,t[l++]),p=Math.max(p,t[l++]),x=Math.max(x,t[l++]);this._indices[this._pos>>2]=d,t[this._pos++]=u,t[this._pos++]=h,t[this._pos++]=p,t[this._pos++]=x}}}search(t,a,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const l=[],c=[];for(;o!==void 0;){const d=Math.min(o+this.nodeSize*4,d6(o,this._levelBounds));for(let u=o;u<d;u+=4){if(s<this._boxes[u]||r<this._boxes[u+1]||t>this._boxes[u+2]||a>this._boxes[u+3])continue;const h=this._indices[u>>2]|0;o>=this.numItems*4?l.push(h):(i===void 0||i(h))&&(c.push(h),c.push(this._boxes[u]),c.push(this._boxes[u+1]))}o=l.pop()}return c}neighbors(t,a,s=1/0,r=1/0,i,o=sge){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=this._queue,d=[];e:for(;l!==void 0;){const u=Math.min(l+this.nodeSize*4,d6(l,this._levelBounds));for(let h=l;h<u;h+=4){const p=this._indices[h>>2]|0,x=this._boxes[h],b=this._boxes[h+1],N=this._boxes[h+2],v=this._boxes[h+3],j=t<x?x-t:t>N?t-N:0,w=a<b?b-a:a>v?a-v:0,S=o(j,w);S>r||(l>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(d.push(c.pop()>>1),d.length===s))break e;l=c.length?c.pop()>>1:void 0}return c.clear(),d}}function sge(e,t){return e*e+t*t}function d6(e,t){let a=0,s=t.length-1;for(;a<s;){const r=a+s>>1;t[r]>e?s=r:a=r+1}return t[a]}function iE(e,t,a,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const o=e[s],l=e[s+r>>1],c=e[r];let d=c;const u=Math.max(o,l);c>u?d=u:u===o?d=Math.max(l,c):u===l&&(d=Math.max(o,c));let h=s-1,p=r+1;for(;;){do h++;while(e[h]<d);do p--;while(e[p]>d);if(h>=p)break;rge(e,t,a,h,p)}iE(e,t,a,s,p,i),iE(e,t,a,p+1,r,i)}function rge(e,t,a,s,r){const i=e[s];e[s]=e[r],e[r]=i;const o=4*s,l=4*r,c=t[o],d=t[o+1],u=t[o+2],h=t[o+3];t[o]=t[l],t[o+1]=t[l+1],t[o+2]=t[l+2],t[o+3]=t[l+3],t[l]=c,t[l+1]=d,t[l+2]=u,t[l+3]=h;const p=a[s];a[s]=a[r],a[r]=p}function ige(e,t){let a=e^t,s=65535^a,r=65535^(e|t),i=e&(t^65535),o=a|s>>1,l=a>>1^a,c=r>>1^s&i>>1^r,d=a&r>>1^i>>1^i;a=o,s=l,r=c,i=d,o=a&a>>2^s&s>>2,l=a&s>>2^s&(a^s)>>2,c^=a&r>>2^s&i>>2,d^=s&r>>2^(a^s)&i>>2,a=o,s=l,r=c,i=d,o=a&a>>4^s&s>>4,l=a&s>>4^s&(a^s)>>4,c^=a&r>>4^s&i>>4,d^=s&r>>4^(a^s)&i>>4,a=o,s=l,r=c,i=d,c^=a&r>>8^s&i>>8,d^=s&r>>8^(a^s)&i>>8,a=c^c>>1,s=d^d>>1;let u=e^t,h=s|65535^(u|a);return u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,h=(h|h<<8)&16711935,h=(h|h<<4)&252645135,h=(h|h<<2)&858993459,h=(h|h<<1)&1431655765,(h<<1|u)>>>0}const oge=e=>{const t=new Map;return e.forEach(a=>{t.set(a.axisId,a)}),t},Jq=e=>e.zoom,lge=jt(qo,Jl,(e,t)=>e?.some(a=>!!a.zoom)||t?.some(a=>!!a.zoom)||!1),eW=jt(Jq,e=>e?.isInteracting),Nd=Ma(Jq,function(t){return t?.zoomData&&oge(t?.zoomData)}),u6=jt(Nd,(e,t)=>e?.get(t)),vx=Ma(qo,Jl,function(t,a){return Ye({},l6("x")(t),l6("y")(a))});jt(vx,(e,t)=>e[t]);const cge=jt(pr,function(t){return o4(t.width)}),dge=jt(pr,function(t){return o4(t.height)}),c4=Ma(qo,xa,qr,gN,cge,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(Yu(u)||Qu(u)){l[u.id]={domain:u.data};return}const h=kN(u,"x",s,d,a);l[u.id]=Qq(u,"x",d,a,h,i,r)}),{axes:t,domains:l}}),d4=Ma(Jl,xa,qr,gN,dge,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(Yu(u)||Qu(u)){l[u.id]={domain:u.data};return}const h=kN(u,"y",s,d,a);l[u.id]=Qq(u,"y",d,a,h,i,r)}),{axes:t,domains:l}}),tW=Ma(Nd,vx,c4,d4,function(t,a,{axes:s,domains:r},{axes:i,domains:o}){if(!t||!a)return;let l=!1;const c={},d=[...s??[],...i??[]];for(let u=0;u<d.length;u+=1){const h=d[u];if(!a[h.id]||a[h.id].filterMode!=="discard")continue;const p=t.get(h.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=u<(s?.length??0)?"x":"y";if(h.scaleType==="band"||h.scaleType==="point")c[h.id]=Xhe(h.data,p.start,p.end,x);else{const{domain:b}=x==="x"?r[h.id]:o[h.id];c[h.id]=Zhe(b,p.start,p.end,x,h.data)}l=!0}if(l)return Jhe(c)}),uge=Ma(xa,qr,Nd,vx,tW,gN,c4,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,h)=>{const p=c[u.id].domain;if(Yu(u)||Qu(u)){d[u.id]=p;return}const x=s?.get(u.id),b=r?.[u.id],N=x===void 0&&!b?i:void 0;if(!N){d[u.id]=p;return}const v=c[u.id].tickNumber,j=kN(u,"x",a,h,t,N);d[u.id]=Kq(u,"x",h,t,j,v,o)}),d}),mge=Ma(xa,qr,Nd,vx,tW,gN,d4,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,h)=>{const p=c[u.id].domain;if(Yu(u)||Qu(u)){d[u.id]=p;return}const x=s?.get(u.id),b=r?.[u.id],N=x===void 0&&!b?i:void 0;if(!N){d[u.id]=p;return}const v=c[u.id].tickNumber,j=kN(u,"y",a,h,t,N);d[u.id]=Kq(u,"y",h,t,j,v,o)}),d}),nW=Ma(qo,uge,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=Gq(i,o)}),s}),aW=Ma(Jl,mge,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=Gq(i,o)}),s}),fge=Ma(qo,nW,pr,Nd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=Wq(s,"x",l),h=a[l.id].copy(),p=Vq(u,d);h.range(p),i[l.id]=h}),i}),hge=Ma(Jl,aW,pr,Nd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=Wq(s,"y",l),h=a[l.id].copy(),p=ys(h)?u.reverse():u,x=Vq(p,d);h.range(x),i[l.id]=h}),i}),Ks=Ma(pr,xa,qr,Nd,c4,fge,function(t,a,s,r,{axes:i,domains:o},l){return qq({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:o})}),Xs=Ma(pr,xa,qr,Nd,d4,hge,function(t,a,s,r,{axes:i,domains:o},l){return qq({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:o})});jt(Ks,Xs,(e,t,a)=>e?.axis[a]??t?.axis[a]);jt(qo,Jl,(e,t,a)=>{const s=e?.find(r=>r.id===a)??t?.find(r=>r.id===a)??null;if(s)return s});const gge=jt(qo,e=>e[0].id),pge=jt(Jl,e=>e[0].id),xge=new Map,yge=()=>xge,bge=Ma(xa,nW,aW,gge,pge,function(t,a,s,r,i){const o=t.scatter,l=new Map;return o&&o.seriesOrder.forEach(c=>{const{data:d,xAxisId:u=r,yAxisId:h=i}=o.series[c],p=new l4(d.length),x=a[u],b=s[h];for(const N of d)p.add(x(N.x),b(N.y));p.finish(),l.set(c,p)}),l});function Wm(e){return e instanceof Date?e.getTime():e}function Ef(e,t){const{scale:a,data:s,reverse:r}=e;if(!ys(a)){const o=a.invert(t);if(s===void 0)return-1;const l=Wm(o);return s?.findIndex((d,u)=>{const h=Wm(d);return h>l&&(u===0||Math.abs(l-h)<=Math.abs(l-Wm(s[u-1])))||h<=l&&(u===s.length-1||Math.abs(Wm(o)-h)<Math.abs(Wm(o)-Wm(s[u+1])))})}const i=a.bandwidth()===0?Math.floor((t-Math.min(...a.range())+a.step()/2)/a.step()):Math.floor((t-Math.min(...a.range()))/a.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function m6(e,t,a,s){if(!ys(e)){if(s===null){const r=e.invert(a);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function wp(e,t){const a=e.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a.matrixTransform(e.getScreenCTM().inverse())}const vge=Object.is;function sW(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let a=0,s=0;for(const r in e)if(a+=1,!vge(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return a===s}const wx=({store:e})=>{const t=hs(function(){e.set("interaction",Ye({},e.state.interaction,{pointer:null,item:null}))}),a=hs(function(o){const l=e.state.interaction.item;if(!o){l!==null&&e.set("interaction",Ye({},e.state.interaction,{item:null}));return}l===null||Object.keys(o).some(c=>o[c]!==l[c])||e.set("interaction",Ye({},e.state.interaction,{item:null}))}),s=hs(function(o,l){sW(e.state.interaction.item,o)||e.set("interaction",Ye({},e.state.interaction,{lastUpdate:l.interaction,item:o}))}),r=hs(function(o){e.set("interaction",Ye({},e.state.interaction,{pointer:o,lastUpdate:o!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:a,setPointerCoordinate:r}}};wx.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});wx.params={};const LN=e=>e.interaction,wge=jt(LN,e=>e!==void 0),rW=jt(LN,e=>e?.item??null),iW=jt(LN,e=>e?.pointer??null),Nx=jt(iW,e=>e&&e.x),jx=jt(iW,e=>e&&e.y),Nge=jt(rW,e=>e!==null),Cx=jt(LN,e=>e?.lastUpdate),jge=new Set(["bar","line","scatter","pie"]);function oW(e){return jge.has(e)}function lW(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):-1,o=s.filter(oW);for(let u=0;u<o.length;u+=1){const h=(r+u)%o.length,p=e[o[h]],x=u===0?i+1:0;for(let b=x;b<p.seriesOrder.length;b+=1)if(p.series[p.seriesOrder[b]].data.length>0)return{type:o[h],seriesId:p.seriesOrder[b]}}const l=r,c=e[o[l]],d=i;for(let u=0;u<d;u+=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function cW(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):1,o=s.filter(oW);for(let u=0;u<o.length;u+=1){const h=(o.length+r-u)%o.length,p=e[o[h]],x=u===0?i+1:p.seriesOrder.length;for(let b=1;b<x;b+=1){const N=(p.seriesOrder.length+i-b)%p.seriesOrder.length;if(p.series[p.seriesOrder[N]].data.length>0)return{type:o[h],seriesId:p.seriesOrder[N]}}}const l=r,c=e[o[l]],d=c.seriesOrder;for(let u=d.length-1;u>i;u-=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function dW(e,t,a){if(t==="sankey")return!1;const s=e[t]?.series[a]?.data;return s&&s.length>0}function Cge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!dW(t,a,s)){const i=lW(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function Sge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!dW(t,a,s)){const i=cW(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function _ge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=lW(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function Age(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=cW(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const PN=({params:e,store:t,svgRef:a})=>{const s=hs(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",Ye({},t.state.keyboardNavigation,{item:null}))});return f.useEffect(()=>{const r=a.current;if(!r||!e.enableKeyboardNavigation)return;function i(o){let l=t.state.keyboardNavigation.item;switch(o.key){case"ArrowRight":l=Cge(t.state);break;case"ArrowLeft":l=Sge(t.state);break;case"ArrowDown":{l=Age(t.state);break}case"ArrowUp":{l=_ge(t.state);break}}l!==t.state.keyboardNavigation.item&&(o.preventDefault(),t.update(Ye({},t.state.highlight&&{highlight:Ye({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:Ye({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:Ye({},t.state.keyboardNavigation,{item:l})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[a,s,e.enableKeyboardNavigation,t]),ss(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",Ye({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};PN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});PN.params={enableKeyboardNavigation:!0};const Zu=e=>e.keyboardNavigation;jt(Zu,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const Tge=jt(Zu,e=>e?.item!=null),DN=jt(Zu,e=>e?.item?.type),ON=jt(Zu,e=>e?.item?.seriesId),MN=jt(Zu,e=>e?.item?.dataIndex),Ege=jt(Zu,e=>!!e?.enableKeyboardNavigation),uW=e=>(t,a,s,r,i)=>{if(t===void 0||a===void 0||s===void 0)return;const o=i[t]?.series[a];if(!o)return;let l=e==="x"?"xAxisId"in o&&o.xAxisId:"yAxisId"in o&&o.yAxisId;return(l===void 0||l===!1)&&(l=r.axisIds[0]),{axisId:l,dataIndex:s}},kge=jt(DN,ON,MN,Ks,xa,uW("x")),Lge=jt(DN,ON,MN,Xs,xa,uW("y")),mW=jt(Zu,function(t){if(t?.item==null)return null;const{type:a,seriesId:s}=t.item;return a===void 0||s===void 0?null:t.item}),Pge=jt(DN,ON,MN,function(t,a,s){return a!==void 0&&s!==void 0}),fW=jt(Cx,rW,mW,(e,t,a)=>e==="keyboard"?a:t??null),Dge=jt(Cx,Nge,Pge,(e,t,a)=>e==="keyboard"?a:t),Oge=jt(fW,pr,qr,Ks,Xs,xa,function(t,a,s,{axis:r,axisIds:i},{axis:o,axisIds:l},c,d="top"){if(!t)return null;const u=c[t.type]?.series[t.seriesId];if(u){const h={},p=wv(u)?u.xAxisId??i[0]:void 0,x=wv(u)?u.yAxisId??l[0]:void 0;return p!==void 0&&(h.x=r[p]),x!==void 0&&(h.y=o[x]),s[u.type].tooltipItemPositionGetter?.({series:c,drawingArea:a,axesConfig:h,identifier:t,placement:d})??null}return null});function pf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!pf(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const o=r[i];if(!pf(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e),s=a.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(let r=0;r<s;r+=1){const i=a[r];if(!pf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function oE(e,t,a=t.axisIds[0]){return Array.isArray(a)?a.map(s=>Ef(t.axis[s],e)):Ef(t.axis[a],e)}const hW=(e,t,a)=>{if(e===null)return null;const s=oE(e,t,a);return s===-1?null:s},u4=jt(Nx,Ks,hW),m4=jt(jx,Xs,hW),Mge=jt(Nx,jx,Ks,Xs,(e,t,a,s)=>[...e===null?[]:a.axisIds.map(r=>({axisId:r,dataIndex:oE(e,a,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:oE(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function gW(e,t,a,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const o=t.axis[r];return m6(o.scale,o.data,e,a[i])}):m6(t.axis[s].scale,t.axis[s].data,e,a)}const Ige=jt(Nx,Ks,u4,(e,t,a,s)=>e===null||t.axisIds.length===0?null:gW(e,t,a,s)),$ge=jt(jx,Xs,m4,(e,t,a,s)=>e===null||t.axisIds.length===0?null:gW(e,t,a,s)),pW=[],xW=dN({memoizeOptions:{resultEqualityCheck:pf}})(Nx,Ks,(e,t)=>e===null?pW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Ef(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),yW=dN({memoizeOptions:{resultEqualityCheck:pf}})(jx,Xs,(e,t)=>e===null?pW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Ef(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),Rge=jt(xW,yW,(e,t)=>e.length>0||t.length>0);function zge(e){return e.setPointerCoordinate!==void 0}const Kf=({params:e,store:t,seriesConfig:a,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:o,dataset:l,onHighlightedAxisChange:c}=e,d=Ut(t,pr),u=Ut(t,xa),h=Ut(t,wge),{axis:p,axisIds:x}=Ut(t,Ks),{axis:b,axisIds:N}=Ut(t,Xs);tq({controlled:e.highlightedAxis}),ss(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const v=f.useRef(!0);f.useEffect(()=>{if(v.current){v.current=!1;return}t.set("cartesianAxis",{x:sq(i,l),y:rq(o,l)})},[a,d,i,o,l,t]);const j=x[0],w=N[0];Tue(t,Mge,(A,E)=>{if(c&&!Object.is(A,E)){if(A.length!==E.length){c(E);return}A?.some(({axisId:_,dataIndex:k},T)=>E[T].axisId!==_||E[T].dataIndex!==k)&&c(E)}});const S=zge(r);return f.useEffect(()=>{const A=s.current;if(!h||!S||!A||e.disableAxisListener)return()=>{};const E=r.addInteractionListener("moveEnd",P=>{P.detail.activeGestures.pan||r.cleanInteraction()}),_=r.addInteractionListener("panEnd",P=>{P.detail.activeGestures.move||r.cleanInteraction()}),k=r.addInteractionListener("quickPressEnd",P=>{!P.detail.activeGestures.move&&!P.detail.activeGestures.pan&&r.cleanInteraction()}),T=P=>{const I=P.detail.srcEvent,H=P.detail.target,Q=wp(A,I);if(P.detail.srcEvent.buttons>=1&&H?.hasPointerCapture(P.detail.srcEvent.pointerId)&&!H?.closest("[data-charts-zoom-slider]")&&H?.releasePointerCapture(P.detail.srcEvent.pointerId),!r.isPointInside(Q.x,Q.y,H)){r.cleanInteraction?.();return}r.setPointerCoordinate(Q)},O=r.addInteractionListener("move",T),$=r.addInteractionListener("pan",T),R=r.addInteractionListener("quickPress",T);return()=>{O.cleanup(),E.cleanup(),$.cleanup(),_.cleanup(),R.cleanup(),k.cleanup()}},[s,t,p,j,b,w,r,e.disableAxisListener,h,S]),f.useEffect(()=>{const A=s.current,E=e.onAxisClick;if(A===null||!E)return()=>{};const _=r.addInteractionListener("tap",k=>{let T=null,O=!1;const $=wp(A,k.detail.srcEvent),R=Ef(p[j],$.x);O=R!==-1,T=O?R:Ef(b[w],$.y);const P=O?x[0]:N[0];if(T==null||T===-1)return;const I=(O?p:b)[P].data[T],H={};Object.keys(u).filter(Q=>["bar","line"].includes(Q)).forEach(Q=>{u[Q]?.seriesOrder.forEach(G=>{const K=u[Q].series[G],W=K.xAxisId,J=K.yAxisId,Te=O?W:J;(Te===void 0||Te===P)&&(H[G]=K.data[T])})}),E(k.detail.srcEvent,{dataIndex:T,axisValue:I,seriesValues:H})});return()=>{_.cleanup()}},[e.onAxisClick,u,s,p,x,b,N,j,w,r]),{}};Kf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Kf.getDefaultizedParams=({params:e})=>Ye({},e,{colors:e.colors??X9,theme:e.theme??"light",defaultizedXAxis:sq(e.xAxis,e.dataset),defaultizedYAxis:rq(e.yAxis,e.dataset)});Kf.getInitialState=e=>Ye({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Wo=e=>e.brush;jt(Wo,e=>e?.start);jt(Wo,e=>e?.current);const Fge=jt(Wo,e=>e?.start?.x??null),Uge=jt(Wo,e=>e?.start?.y??null),Bge=jt(Wo,e=>e?.current?.x??null),Hge=jt(Wo,e=>e?.current?.y??null);jt(Fge,Uge,Bge,Hge,(e,t,a,s)=>e===null||t===null||a===null||s===null?null:{start:{x:e,y:t},current:{x:a,y:s}});const qge=jt(xa,e=>{let t=!1,a=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(a=!0)}),a?"xy":t?"y":"x"}),Wge=jt(vx,function(t){let a=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(a=!0)}),a&&s?"xy":s?"y":a?"x":null});jt(qge,Wge,(e,t)=>t??e);const bW=jt(Wo,e=>e?.enabled||e?.isZoomBrushEnabled),vW=jt(bW,Wo,(e,t)=>e&&t?.start!==null&&t?.current!==null),IN=jt(Wo,vW,(e,t)=>t&&e?.preventHighlight),Gge=jt(Wo,vW,(e,t)=>t&&e?.preventTooltip),Sx=({store:e,svgRef:t,instance:a,params:s})=>{const r=Ut(e,bW);ss(()=>{e.set("brush",Ye({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=hs(function(d){e.set("brush",Ye({},e.state.brush,{start:e.state.brush.start??d,current:d}))}),o=hs(function(){e.set("brush",Ye({},e.state.brush,{start:null,current:null}))}),l=hs(function(d){e.state.brush.isZoomBrushEnabled!==d&&e.set("brush",Ye({},e.state.brush,{isZoomBrushEnabled:d}))});return f.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const d=N=>{if(N.detail.target?.closest("[data-charts-zoom-slider]"))return;const v=wp(c,{clientX:N.detail.initialCentroid.x,clientY:N.detail.initialCentroid.y});i(v)},u=N=>{const v=wp(c,{clientX:N.detail.centroid.x,clientY:N.detail.centroid.y});i(v)},h=a.addInteractionListener("brushStart",d),p=a.addInteractionListener("brush",u),x=a.addInteractionListener("brushCancel",o),b=a.addInteractionListener("brushEnd",o);return()=>{h.cleanup(),p.cleanup(),b.cleanup(),x.cleanup()}},[t,a,e,o,i,r]),{instance:{setBrushCoordinates:i,clearBrush:o,setZoomBrushEnabled:l}}};Sx.params={brushConfig:!0};Sx.getDefaultizedParams=({params:e})=>Ye({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});Sx.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const Xf=e=>e.controlledCartesianAxisHighlight,wW=(e,t,a,s)=>s?[]:a!==void 0?a.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],NW=Ma(u4,Ks,Xf,IN,wW);Ma(m4,Xs,Xf,IN,wW);const jW=(e,t,a,s,r,i,o)=>{if(o)return[];if(s!==void 0)return s.map(u=>Ye({},u,{value:a.axis[u.axisId]?.data?.[u.dataIndex]})).filter(({value:u})=>u!==void 0);const l=t!==null&&{axisId:a.axisIds[0],dataIndex:e,value:t},c=r&&a.axis[r.axisId]?.data?.[r.dataIndex],d=r&&c!=null&&Ye({},r,{value:c});if(i==="pointer"){if(l)return[l];if(d)return[d]}if(i==="keyboard"){if(d)return[d];if(l)return[l]}return[]},Vge=jt(u4,Ige,Ks,Xf,kge,Cx,IN,jW),Yge=jt(m4,$ge,Xs,Xf,Lge,Cx,IN,jW),CW=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);jt(Xf,Ks,CW);jt(Xf,Xs,CW);function f6(e,t){return e.id!==void 0?e:Ye({id:t},e)}function h6(e){return e.colorMap?Ye({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?Tf(Ye({values:e.data},e.colorMap)):gf(e.colorMap.type==="continuous"?Ye({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function SW(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const a={},s=[];return e.forEach((r,i)=>{const o=r.dataKey,l=r.id??`defaultized-z-axis-${i}`;if(o===void 0||r.data!==void 0){a[l]=h6(f6(r,l)),s.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");a[l]=h6(f6(Ye({},r,{data:t.map(c=>c[o])}),l)),s.push(l)}),{axis:a,axisIds:s}}const _x=({params:e,store:t})=>{const{zAxis:a,dataset:s}=e,r=f.useRef(!0);return f.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",SW(a,s))},[a,s,t]),{}};_x.params={zAxis:!0,dataset:!0};_x.getInitialState=e=>({zAxis:SW(e.zAxis,e.dataset)});const Qge=e=>e,Kge=jt(Qge,e=>e.zAxis),Ax=({store:e,params:t})=>{tq({controlled:t.highlightedItem}),ss(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",Ye({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const a=hs(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=hs(r=>{const i=e.getSnapshot().highlight;i.isControlled||sW(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:a,setHighlight:s}}};Ax.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});Ax.params={highlightedItem:!0,onHighlightChange:!0};function Nv(e){let t=1/0,a=-1/0;for(const s of e??[])s<t&&(t=s),s>a&&(a=s);return[t,a]}const g6=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},_W=e=>{const{axis:t,getFilters:a,isDefaultAxis:s}=e,r=a?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((o,l)=>r({x:null,y:null},l)):t.data;return Nv(i??[])},AW=e=>t=>{const{series:a,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(a).filter(o=>{const l=e==="x"?a[o].xAxisId:a[o].yAxisId;return l===s.id||i&&l===void 0}).reduce((o,l)=>{const{stackedData:c}=a[l],d=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:a[l].xAxisId,seriesYAxisId:a[l].yAxisId}),[u,h]=c?.reduce((p,x,b)=>d&&(!d(g6(x[0],e),b)||!d(g6(x[1],e),b))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(u,o[0]),Math.max(h,o[1])]},[1/0,-1/0])},Xge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?AW("x")(e):_W(e),Zge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?_W(e):AW("y")(e);function Nn(e){return function(){return e}}const TW=Math.cos,jv=Math.sin,Zi=Math.sqrt,p6=1e-12,Cv=Math.PI,yu=2*Cv,lE=Math.PI,cE=2*lE,Kd=1e-6,Jge=cE-Kd;function EW(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function epe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return EW;const a=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*a)/a+s[r]}}class tpe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?EW:epe(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,s,r){this._append`Q${+t},${+a},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,a,s,r,i,o){this._append`C${+t},${+a},${+s},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,a,s,r,i){if(t=+t,a=+a,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=r-a,u=o-t,h=l-a,p=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(p>Kd)if(!(Math.abs(h*c-d*u)>Kd)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let x=s-o,b=r-l,N=c*c+d*d,v=x*x+b*b,j=Math.sqrt(N),w=Math.sqrt(p),S=i*Math.tan((lE-Math.acos((N+p-v)/(2*j*w)))/2),A=S/w,E=S/j;Math.abs(A-1)>Kd&&this._append`L${t+A*u},${a+A*h}`,this._append`A${i},${i},0,0,${+(h*x>u*b)},${this._x1=t+E*c},${this._y1=a+E*d}`}}arc(t,a,s,r,i,o){if(t=+t,a=+a,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(r),c=s*Math.sin(r),d=t+l,u=a+c,h=1^o,p=o?r-i:i-r;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Kd||Math.abs(this._y1-u)>Kd)&&this._append`L${d},${u}`,s&&(p<0&&(p=p%cE+cE),p>Jge?this._append`A${s},${s},0,1,${h},${t-l},${a-c}A${s},${s},0,1,${h},${this._x1=d},${this._y1=u}`:p>Kd&&this._append`A${s},${s},0,${+(p>=lE)},${h},${this._x1=t+s*Math.cos(i)},${this._y1=a+s*Math.sin(i)}`)}rect(t,a,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function f4(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);t=s}return e},()=>new tpe(t)}function $N(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kW(e){this._context=e}kW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Tx(e){return new kW(e)}function LW(e){return e[0]}function PW(e){return e[1]}function h4(e,t){var a=Nn(!0),s=null,r=Tx,i=null,o=f4(l);e=typeof e=="function"?e:e===void 0?LW:Nn(e),t=typeof t=="function"?t:t===void 0?PW:Nn(t);function l(c){var d,u=(c=$N(c)).length,h,p=!1,x;for(s==null&&(i=r(x=o())),d=0;d<=u;++d)!(d<u&&a(h=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(h,d,c),+t(h,d,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Nn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Nn(+c),l):t},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:Nn(!!c),l):a},l.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),l):r},l.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),l):s},l}function Ig(e,t,a){var s=null,r=Nn(!0),i=null,o=Tx,l=null,c=f4(d);e=typeof e=="function"?e:e===void 0?LW:Nn(+e),t=typeof t=="function"?t:Nn(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?PW:Nn(+a);function d(h){var p,x,b,N=(h=$N(h)).length,v,j=!1,w,S=new Array(N),A=new Array(N);for(i==null&&(l=o(w=c())),p=0;p<=N;++p){if(!(p<N&&r(v=h[p],p,h))===j)if(j=!j)x=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=x;--b)l.point(S[b],A[b]);l.lineEnd(),l.areaEnd()}j&&(S[p]=+e(v,p,h),A[p]=+t(v,p,h),l.point(s?+s(v,p,h):S[p],a?+a(v,p,h):A[p]))}if(w)return l=null,w+""||null}function u(){return h4().defined(r).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Nn(+h),s=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Nn(+h),d):e},d.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:Nn(+h),d):s},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Nn(+h),a=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Nn(+h),d):t},d.y1=function(h){return arguments.length?(a=h==null?null:typeof h=="function"?h:Nn(+h),d):a},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(a)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(h){return arguments.length?(r=typeof h=="function"?h:Nn(!!h),d):r},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}function npe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function ape(e){return e}function spe(){var e=ape,t=npe,a=null,s=Nn(0),r=Nn(yu),i=Nn(0);function o(l){var c,d=(l=$N(l)).length,u,h,p=0,x=new Array(d),b=new Array(d),N=+s.apply(this,arguments),v=Math.min(yu,Math.max(-yu,r.apply(this,arguments)-N)),j,w=Math.min(Math.abs(v)/d,i.apply(this,arguments)),S=w*(v<0?-1:1),A;for(c=0;c<d;++c)(A=b[x[c]=c]=+e(l[c],c,l))>0&&(p+=A);for(t!=null?x.sort(function(E,_){return t(b[E],b[_])}):a!=null&&x.sort(function(E,_){return a(l[E],l[_])}),c=0,h=p?(v-d*S)/p:0;c<d;++c,N=j)u=x[c],A=b[u],j=N+(A>0?A*h:0)+S,b[u]={data:l[u],index:c,value:A,startAngle:N,endAngle:j,padAngle:w};return b}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:Nn(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,a=null,o):t},o.sort=function(l){return arguments.length?(a=l,t=null,o):a},o.startAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Nn(+l),o):s},o.endAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Nn(+l),o):r},o.padAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Nn(+l),o):i},o}class DW{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function OW(e){return new DW(e,!0)}function MW(e){return new DW(e,!1)}const RN={draw(e,t){const a=Zi(t/Cv);e.moveTo(a,0),e.arc(0,0,a,0,yu)}},IW={draw(e,t){const a=Zi(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},$W=Zi(1/3),rpe=$W*2,RW={draw(e,t){const a=Zi(t/rpe),s=a*$W;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},zW={draw(e,t){const a=Zi(t),s=-a/2;e.rect(s,s,a,a)}},ipe=.8908130915292852,FW=jv(Cv/10)/jv(7*Cv/10),ope=jv(yu/10)*FW,lpe=-TW(yu/10)*FW,UW={draw(e,t){const a=Zi(t*ipe),s=ope*a,r=lpe*a;e.moveTo(0,-a),e.lineTo(s,r);for(let i=1;i<5;++i){const o=yu*i/5,l=TW(o),c=jv(o);e.lineTo(c*a,-l*a),e.lineTo(l*s-c*r,c*s+l*r)}e.closePath()}},XS=Zi(3),BW={draw(e,t){const a=-Zi(t/(XS*3));e.moveTo(0,a*2),e.lineTo(-XS*a,-a),e.lineTo(XS*a,-a),e.closePath()}},ni=-.5,ai=Zi(3)/2,dE=1/Zi(12),cpe=(dE/2+1)*3,HW={draw(e,t){const a=Zi(t/cpe),s=a/2,r=a*dE,i=s,o=a*dE+a,l=-i,c=o;e.moveTo(s,r),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ni*s-ai*r,ai*s+ni*r),e.lineTo(ni*i-ai*o,ai*i+ni*o),e.lineTo(ni*l-ai*c,ai*l+ni*c),e.lineTo(ni*s+ai*r,ni*r-ai*s),e.lineTo(ni*i+ai*o,ni*o-ai*i),e.lineTo(ni*l+ai*c,ni*c-ai*l),e.closePath()}},qW=[RN,IW,RW,zW,UW,BW,HW];function g4(e,t){let a=null,s=f4(r);e=typeof e=="function"?e:Nn(e||RN),t=typeof t=="function"?t:Nn(t===void 0?64:+t);function r(){let i;if(a||(a=i=s()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),i)return a=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:Nn(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:Nn(+i),r):t},r.context=function(i){return arguments.length?(a=i??null,r):a},r}function Sv(){}function _v(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function WW(e){this._context=e}WW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_v(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_v(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dpe(e){return new WW(e)}function GW(e){this._context=e}GW.prototype={areaStart:Sv,areaEnd:Sv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:_v(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function upe(e){return new GW(e)}function VW(e){this._context=e}VW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:_v(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mpe(e){return new VW(e)}function x6(e,t,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function p4(e,t){this._context=e,this._k=(1-t)/6}p4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:x6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:x6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function a(s){return new p4(s,t)}return a.tension=function(s){return e(+s)},a})(0);function fpe(e,t,a){var s=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>p6){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>p6){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*d+e._y1*e._l23_2a-a*e._l12_2a)/u}e._context.bezierCurveTo(s,r,i,o,e._x2,e._y2)}function YW(e,t){this._context=e,this._alpha=t}YW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:fpe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hpe=(function e(t){function a(s){return t?new YW(s,t):new p4(s,0)}return a.alpha=function(s){return e(+s)},a})(.5);function QW(e){this._context=e}QW.prototype={areaStart:Sv,areaEnd:Sv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function gpe(e){return new QW(e)}function y6(e){return e<0?-1:1}function b6(e,t,a){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(a-e._y1)/(r||s<0&&-0),l=(i*r+o*s)/(s+r);return(y6(i)+y6(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function v6(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function ZS(e,t,a){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,r+l*t,i-l,o-l*a,i,o)}function Av(e){this._context=e}Av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ZS(this,this._t0,v6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ZS(this,v6(this,a=b6(this,e,t)),a);break;default:ZS(this,this._t0,a=b6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function KW(e){this._context=new XW(e)}(KW.prototype=Object.create(Av.prototype)).point=function(e,t){Av.prototype.point.call(this,t,e)};function XW(e){this._context=e}XW.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,s,r,i){this._context.bezierCurveTo(t,e,s,a,i,r)}};function uE(e){return new Av(e)}function ZW(e){return new KW(e)}function JW(e){this._context=e}JW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var s=w6(e),r=w6(t),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[o],t[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function w6(e){var t,a=e.length-1,s,r=new Array(a),i=new Array(a),o=new Array(a);for(r[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)s=r[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(r[a-1]=o[a-1]/i[a-1],t=a-2;t>=0;--t)r[t]=(o[t]-r[t+1])/i[t];for(i[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function eG(e){return new JW(e)}function zN(e,t){this._context=e,this._t=t}zN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function tG(e){return new zN(e,.5)}function nG(e){return new zN(e,0)}function aG(e){return new zN(e,1)}function cd(e,t){if((o=e.length)>1)for(var a=1,s,r,i=e[t[0]],o,l=i.length;a<o;++a)for(r=i,i=e[t[a]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function Lu(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function ppe(e,t){return e[t]}function xpe(e){const t=[];return t.key=e,t}function x4(){var e=Nn([]),t=Lu,a=cd,s=ppe;function r(i){var o=Array.from(e.apply(this,arguments),xpe),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(h,o[l].key,d,i)]).data=h;for(l=0,u=$N(t(o));l<c;++l)o[u[l]].index=l;return a(o,u),o}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Nn(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:Nn(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?Lu:typeof i=="function"?i:Nn(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(a=i??cd,r):a},r}function sG(e,t){if((s=e.length)>0){for(var a,s,r=0,i=e[0].length,o;r<i;++r){for(o=a=0;a<s;++a)o+=e[a][r][1]||0;if(o)for(a=0;a<s;++a)e[a][r][1]/=o}cd(e,t)}}function ype(e,t){if((c=e.length)>0)for(var a,s=0,r,i,o,l,c,d=e[t[0]].length;s<d;++s)for(o=l=0,a=0;a<c;++a)(i=(r=e[t[a]][s])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=l,r[0]=l+=i):(r[0]=0,r[1]=i)}function rG(e,t){if((r=e.length)>0){for(var a=0,s=e[t[0]],r,i=s.length;a<i;++a){for(var o=0,l=0;o<r;++o)l+=e[o][a][1]||0;s[a][1]+=s[a][0]=-l/2}cd(e,t)}}function iG(e,t){if(!(!((o=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var a=0,s=1,r,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[s][1]||0,p=u[s-1][1]||0,x=(h-p)/2,b=0;b<l;++b){var N=e[t[b]],v=N[s][1]||0,j=N[s-1][1]||0;x+=v-j}c+=h,d+=x*h}r[s-1][1]+=r[s-1][0]=a,c&&(a-=d/c)}r[s-1][1]+=r[s-1][0]=a,cd(e,t)}}function oG(e){var t=e.map(bpe);return Lu(e).sort(function(a,s){return t[a]-t[s]})}function bpe(e){for(var t=-1,a=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,a=t);return a}function lG(e){var t=e.map(cG);return Lu(e).sort(function(a,s){return t[a]-t[s]})}function cG(e){for(var t=0,a=-1,s=e.length,r;++a<s;)(r=+e[a][1])&&(t+=r);return t}function vpe(e){return lG(e).reverse()}function wpe(e){var t=e.length,a,s,r=e.map(cG),i=oG(e),o=0,l=0,c=[],d=[];for(a=0;a<t;++a)s=i[a],o<l?(o+=r[s],c.push(s)):(l+=r[s],d.push(s));return d.reverse().concat(c)}function Npe(e){return Lu(e).reverse()}const JS={appearance:oG,ascending:lG,descending:vpe,insideOut:wpe,none:Lu,reverse:Npe},e2={expand:sG,diverging:ype,none:cd,silhouette:rG,wiggle:iG},dG=e=>{const{series:t,seriesOrder:a,defaultStrategy:s}=e,r=[],i={};return a.forEach(o=>{const{stack:l,stackOrder:c,stackOffset:d}=t[o];l===void 0?r.push({ids:[o],stackingOrder:JS.none,stackingOffset:e2.none}):i[l]===void 0?(i[l]=r.length,r.push({ids:[o],stackingOrder:JS[c??s?.stackOrder??"none"],stackingOffset:e2[d??s?.stackOffset??"diverging"]})):(r[i[l]].ids.push(o),c!==void 0&&(r[i[l]].stackingOrder=JS[c]),d!==void 0&&(r[i[l]].stackingOffset=e2[d]))}),r},jpe=e=>e==null?"":e.toLocaleString(),Cpe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=dG(e),i=t??[];a.forEach(l=>{const c=s[l].data;if(c!==void 0)c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return r.forEach(l=>{const{ids:c,stackingOffset:d,stackingOrder:u}=l,h=x4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const b=s[p].dataKey;o[p]=Ye({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??jpe},s[p],{data:b?t.map(N=>{const v=N[b];return typeof v=="number"?v:null}):s[p].data,stackedData:h[x].map(([N,v])=>[N,v])})})}),{seriesOrder:a,stackingGroups:r,series:o}};function Gi(e,t){return typeof e=="function"?e(t):e}const Spe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Gi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])};function y4(e){return e.colorGetter?e.colorGetter:()=>e.color}const _pe=(e,t,a)=>{const s=e.layout==="vertical",r=s?t?.colorScale:a?.colorScale,i=s?a?.colorScale:t?.colorScale,o=s?t?.data:a?.data,l=y4(e);return i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d);return u===null?l({value:d,dataIndex:c}):u}:r&&o?c=>{if(c===void 0)return e.color;const d=o[c],u=d===null?l({value:d,dataIndex:c}):r(d);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},Ape=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Gi(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Tpe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Yn(){const e=Wr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function Ai(){const e=Yn();return Ut(e,pr)}function FN(){const e=Yn();return Ut(e,Xue)}function b4(e){return Hq.getTypes().has(e)}const Epe=(e,t,a,s,r,i,o)=>{const l=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=o[t]?.series??{},[d,u]=l?.({series:c,axis:a,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[h,p]=e;return[Math.min(d,h),Math.max(u,p)]},kpe=(e,t,a,s,r)=>{const o=Object.keys(a).filter(b4).reduce((l,c)=>Epe(l,c,e,t,a,s,r),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Yc=(e,t)=>e===void 0?t:Math.PI*e/180,Lpe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(b4).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function Ppe(e,t,a){if(t==="rotation"){if(a.scaleType==="point"){const s=[Yc(a.startAngle,0),Yc(a.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/a.data.length),s}return[Yc(a.startAngle,0),Yc(a.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const Dpe=.2,Ope=.1;function uG({drawingArea:e,formattedSeries:t,axis:a,seriesConfig:s,axisDirection:r}){if(a===void 0)return{axis:{},axisIds:[]};const i=Lpe(r,s,t,a[0].id),o={};return a.forEach((l,c)=>{const d=l,u=Ppe(e,r,d),[h,p]=kpe(d,r,s,c,t),x=!d.ignoreTooltip&&i.has(d.id),b=d.data??[];if(Yu(d)){const O=d.categoryGapRatio??Dpe,$=d.barGapRatio??Ope;if(o[d.id]=Ye({offset:0,categoryGapRatio:O,barGapRatio:$,triggerTooltip:x},d,{data:b,scale:_N(d.data,u).paddingInner(O).paddingOuter(O/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Tf(Ye({values:d.data},d.colorMap)):gf(d.colorMap))}),sE(d.data)){const R=rE(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??R}}if(Qu(d)&&(o[d.id]=Ye({offset:0,triggerTooltip:x},d,{data:b,scale:Uq(d.data,u),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Tf(Ye({values:d.data},d.colorMap)):gf(d.colorMap))}),sE(d.data))){const O=rE(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??O}if(!jme(d))return;const N=d.scaleType??"linear",v=d.domainLimit??"nice",j=[d.min??h,d.max??p];if(typeof v=="function"){const{min:O,max:$}=v(h,p);j[0]=O,j[1]=$}const w=zq(d,j,o4(Math.abs(u[1]-u[0]))),S=Fq(w,u),A=AN(N,j,u),E=v==="nice"?A.nice(w):A,[_,k]=E.domain(),T=[d.min??_,d.max??k];o[d.id]=Ye({offset:0,triggerTooltip:x},d,{data:b,scaleType:N,scale:E.domain(T),tickNumber:S,colorScale:d.colorMap&&gf(d.colorMap)})}),{axis:o,axisIds:a.map(({id:l})=>l)}}const mG=e=>e.polarAxis,fG=jt(mG,e=>e?.rotation),Mpe=jt(mG,e=>e?.radius),Ju=jt(fG,pr,xa,qr,(e,t,a,s)=>uG({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"rotation"}));jt(Mpe,pr,xa,qr,(e,t,a,s)=>uG({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"radius"}));const Ipe=jt(pr,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),$pe=e=>(t,a)=>Math.atan2(t-e.cx,e.cy-a);function UN(e){return(e%360+360)%360}const t2=2*Math.PI;function Rpe(e){return(e%t2+t2)%t2}function N6(e,t){const{scale:a,data:s,reverse:r}=e;if(!ys(a))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=Rpe(t-Math.min(...a.range())),o=a.bandwidth()===0?Math.floor((i+a.step()/2)/a.step())%s.length:Math.floor(i/a.step());return o<0||o>=s.length?-1:r?s.length-1-o:o}function xr(){const e=Yn(),{axis:t,axisIds:a}=Ut(e,Ks);return{xAxis:t,xAxisIds:a}}function yr(){const e=Yn(),{axis:t,axisIds:a}=Ut(e,Xs);return{yAxis:t,yAxisIds:a}}function zpe(e){const t=Yn(),{axis:a,axisIds:s}=Ut(t,Ks),r=s[0];return a[r]}function Fpe(e){const t=Yn(),{axis:a,axisIds:s}=Ut(t,Xs),r=s[0];return a[r]}function hG(){const e=Yn(),{axis:t,axisIds:a}=Ut(e,Ju);return{rotationAxis:t,rotationAxisIds:a}}function Upe(e){const t=Yn(),{axis:a,axisIds:s}=Ut(t,Ju),r=s[0];return a[r]}function Zf(e){if(ys(e))return a=>(e(a)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?a=>a===t[0]?e(a):NaN:a=>e(a)}function v4(){const e=Yn(),{axis:t,axisIds:a}=Ut(e,Kge)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:a}}function w4(){const e=Wr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function BN(){const e=Yn();return Ut(e,xa)}const Bpe=jt(xa,(e,t)=>e[t]);Ma(xa,(e,t,a)=>{if(!a||Array.isArray(a)&&a.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(a))return e[t]?.series?.[a];const s=[];for(const r of a){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const Hpe=e=>{const t=Yn();return Ut(t,Bpe,e)};function Ex(){return Hpe("line")}function qpe(){return!1}function gG(e,t){return!e||!t?qpe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function Wpe(){return!1}function pG(e,t){return!e||!t?Wpe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function N4(e,t,a){return e?.highlight==="series"&&t?.seriesId===a}function Gpe(e,t,a){return N4(e,t,a)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===a}function xG(e,t,a){return e?.highlight==="item"&&t?.seriesId===a?t.dataIndex:null}function Vpe(e,t,a){return N4(e,t,a)||xG(e,t,a)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===a?t.dataIndex:null}const Ype=e=>e.highlight,Qpe=jt(xa,e=>{const t=new Map;return Object.keys(e).forEach(a=>{const s=e[a];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),tc=Ma(Ype,mW,function(t,a){return t.isControlled||t.lastUpdate==="pointer"?t.item:a}),jd=jt(Qpe,tc,function(t,a){if(!a)return null;const s=t.get(a.seriesId);return s===void 0?null:s}),Kpe=jt(jd,tc,gG),Xpe=jt(jd,tc,pG),Zpe=jt(jd,tc,function(t,a,s){return gG(t,a)(s)});jt(jd,tc,N4);jt(jd,tc,Gpe);jt(jd,tc,Vpe);jt(jd,tc,xG);const Jpe=jt(jd,tc,function(t,a,s){return pG(t,a)(s)});function yG(e){const t=Yn(),a=Ut(t,Zpe,e),s=Ut(t,Jpe,e);return{isHighlighted:a,isFaded:!a&&s}}function exe(){const e=Yn(),t=Ut(e,Kpe),a=Ut(e,Xpe);return{isHighlighted:t,isFaded:a}}function txe(e,t){return Object.keys(e).flatMap(a=>{const s=t[a].legendGetter;return s===void 0?[]:s(e[a])})}function nxe(){const e=BN(),t=Yn(),a=Ut(t,qr);return{items:txe(e,a)}}function j4(){const e=FN();return f.useCallback(t=>`${e}-gradient-${t}`,[e])}function axe(){const e=FN();return f.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var n2,j6;function sxe(){if(j6)return n2;j6=1;var e=4,t=.001,a=1e-7,s=10,r=11,i=1/(r-1),o=typeof Float32Array=="function";function l(N,v){return 1-3*v+3*N}function c(N,v){return 3*v-6*N}function d(N){return 3*N}function u(N,v,j){return((l(v,j)*N+c(v,j))*N+d(v))*N}function h(N,v,j){return 3*l(v,j)*N*N+2*c(v,j)*N+d(v)}function p(N,v,j,w,S){var A,E,_=0;do E=v+(j-v)/2,A=u(E,w,S)-N,A>0?j=E:v=E;while(Math.abs(A)>a&&++_<s);return E}function x(N,v,j,w){for(var S=0;S<e;++S){var A=h(v,j,w);if(A===0)return v;var E=u(v,j,w)-N;v-=E/A}return v}function b(N){return N}return n2=function(v,j,w,S){if(!(0<=v&&v<=1&&0<=w&&w<=1))throw new Error("bezier x values must be in [0, 1] range");if(v===j&&w===S)return b;for(var A=o?new Float32Array(r):new Array(r),E=0;E<r;++E)A[E]=u(E*i,v,w);function _(k){for(var T=0,O=1,$=r-1;O!==$&&A[O]<=k;++O)T+=i;--O;var R=(k-A[O])/(A[O+1]-A[O]),P=T+R*i,I=h(P,v,w);return I>=t?x(k,P,v,w):I===0?P:p(k,T,T+i,v,w)}return function(T){return T===0?0:T===1?1:u(_(T),j,S)}},n2}var rxe=sxe();const ixe=Ki(rxe),HN=300,C4="cubic-bezier(0.66, 0, 0.34, 1)",oxe=ixe(.66,0,.34,1);var kf=0,$g=0,mg=0,bG=1e3,Tv,Rg,Ev=0,Pu=0,qN=0,Np=typeof performance=="object"&&performance.now?performance:Date,vG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function S4(){return Pu||(vG(lxe),Pu=Np.now()+qN)}function lxe(){Pu=0}function kv(){this._call=this._time=this._next=null}kv.prototype=wG.prototype={constructor:kv,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?S4():+a)+(t==null?0:+t),!this._next&&Rg!==this&&(Rg?Rg._next=this:Tv=this,Rg=this),this._call=e,this._time=a,mE()},stop:function(){this._call&&(this._call=null,this._time=1/0,mE())}};function wG(e,t,a){var s=new kv;return s.restart(e,t,a),s}function cxe(){S4(),++kf;for(var e=Tv,t;e;)(t=Pu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kf}function C6(){Pu=(Ev=Np.now())+qN,kf=$g=0;try{cxe()}finally{kf=0,uxe(),Pu=0}}function dxe(){var e=Np.now(),t=e-Ev;t>bG&&(qN-=t,Ev=e)}function uxe(){for(var e,t=Tv,a,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:Tv=a);Rg=e,mE(s)}function mE(e){if(!kf){$g&&($g=clearTimeout($g));var t=e-Pu;t>24?(e<1/0&&($g=setTimeout(C6,e-Np.now()-qN)),mg&&(mg=clearInterval(mg))):(mg||(Ev=Np.now(),mg=setInterval(dxe,bG)),kf=1,vG(C6))}}function mxe(e,t,a){var s=new kv;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,a),s}class fxe{elapsed=0;timer=null;constructor(t,a,s){this.duration=t,this.easingFn=a,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const a=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(a);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=S4()-this.elapsed;return this.timer=wG(a=>this.timerCallback(a),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),mxe(()=>this.timerCallback(this.duration)),this}}function hxe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r+=1){const i=a[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function gxe(e,{createInterpolator:t,applyProps:a,skip:s,initialProps:r=e}){const i=f.useRef(r),o=f.useRef(null),l=f.useRef(null),c=f.useRef(e);ss(()=>{c.current=e},[e]),ss(()=>{s&&(o.current?.finish(),o.current=null,l.current=null,i.current=e)},[e,s]);const d=f.useCallback(h=>{const p=i.current,x=t(p,e);o.current=new fxe(HN,oxe,b=>{const N=x(b);i.current=N,a(h,N)})},[a,t,e]);return[f.useCallback(h=>{if(h===null){o.current?.stop();return}const p=l.current;if(p===h){if(hxe(c.current,e)){o.current?.resume();return}o.current?.stop()}p&&o.current?.stop(),l.current=h,(o.current||!s)&&d(h)},[d,e,s]),i.current]}function NG(e,{createInterpolator:t,transformProps:a,applyProps:s,skip:r,initialProps:i=e,ref:o}){const l=a??(h=>h),[c,d]=gxe(e,{initialProps:i,createInterpolator:t,applyProps:(h,p)=>s(h,l(p)),skip:r}),u=a(r?e:d);return Ye({},u,{ref:Io(c,o)})}function pxe(e){return NG({d:e.d},{createInterpolator:(t,a)=>{const s=zL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function xxe(e){return NG({d:e.d},{createInterpolator:(t,a)=>{const s=zL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function yxe(){return Wr().chartRootRef}const bxe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},vxe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:Ye({},e)}}}}),jG={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${bxe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},wxe=jG;vxe(jG);const Nxe=["localeText"],fE=f.createContext(null);function jxe(e){const{localeText:t}=e,a=xn(e,Nxe),{localeText:s}=f.useContext(fE)??{localeText:void 0},r=Si({props:a,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:o}=r,l=f.useMemo(()=>Ye({},wxe,o,s,t),[o,s,t]),c=f.useMemo(()=>({localeText:l}),[l]);return n.jsx(fE.Provider,{value:c,children:i})}const CG=()=>{const e=f.useContext(fE);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function Cxe({bandWidth:e,numberOfGroups:t,gapRatio:a}){if(a===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*a),r=a*s;return{barWidth:s,offset:r}}function Sxe(e,t,a){const s=e&&t>0,r=!e&&t<0,i=s||r;return a?!i:i}function _xe(e){const{verticalLayout:t,xAxisConfig:a,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:o,groupIndex:l}=e,c=t?a:s,d=(t?s.reverse:a.reverse)??!1,{barWidth:u,offset:h}=Cxe({bandWidth:c.scale.bandwidth(),numberOfGroups:o,gapRatio:c.barGapRatio}),p=l*(u+h),x=a.scale,b=s.scale,N=c.data[i],v=r.data[i];if(v==null)return null;const w=r.stackedData[i].map(k=>t?b(k):x(k)),S=Math.round(Math.min(...w)),A=Math.round(Math.max(...w)),E=v===0?0:Math.max(r.minBarSize,A-S),_=Sxe(t,v,d)?A-E:S;return{x:t?x(N)+p:_,y:t?_:b(N)+p,height:t?E:u,width:t?u:E}}const Axe=e=>{const{series:t,identifier:a,axesConfig:s,placement:r}=e;if(!a||a.dataIndex===void 0)return null;const i=t.bar?.series[a.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const o=_xe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:a.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(h=>h.ids.includes(i.id))});if(o==null)return null;const{x:l,y:c,width:d,height:u}=o;switch(r){case"right":return{x:l+d,y:c+u/2};case"bottom":return{x:l+d/2,y:c+u};case"left":return{x:l,y:c+u/2};default:return{x:l+d/2,y:c}}},Txe=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Exe={seriesProcessor:Cpe,colorProcessor:_pe,legendGetter:Spe,tooltipGetter:Ape,tooltipItemPositionGetter:Axe,axisTooltipGetter:Tpe,xExtremumGetter:Xge,yExtremumGetter:Zge,getSeriesWithDefaultValues:Txe},kxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let h=0;h<u.length;h+=1){const p=u[h];d&&!d(p,h)||p.x!==null&&(p.x<i&&(i=p.x),p.x>o&&(o=p.x))}}return[i,o]},Lxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let h=0;h<u.length;h+=1){const p=u[h];d&&!d(p,h)||p.y!==null&&(p.y<i&&(i=p.y),p.y>o&&(o=p.y))}}return[i,o]},Pxe=({series:e,seriesOrder:t},a)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const o=i?.datasetKeys,l=["x","y"].filter(d=>typeof o?.[d]!="string");if(i?.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${l.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=o?a?.map(d=>({x:d[o.x]??null,y:d[o.y]??null,z:o.z&&d[o.z],id:o.id&&d[o.id]}))??[]:i.data??[];return[r,Ye({labelMarkType:"circle",markerSize:4},i,{preview:Ye({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:t}),Dxe=(e,t,a,s)=>{const r=s?.colorScale,i=a?.colorScale,o=t?.colorScale,l=y4(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const h=r(s?.data?.[c]);if(h!==null)return h}const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):r(d.z);return u===null?l({value:d,dataIndex:c}):u}:i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d.y);return u===null?l({value:d,dataIndex:c}):u}:o?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):o(d.x);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},Oxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Gi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},Mxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Gi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Ixe=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),$xe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.scatter?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[a.dataIndex].x,o=r.data?.[a.dataIndex].y;return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},Rxe={seriesProcessor:Pxe,colorProcessor:Dxe,legendGetter:Oxe,tooltipGetter:Mxe,tooltipItemPositionGetter:$xe,xExtremumGetter:kxe,yExtremumGetter:Lxe,getSeriesWithDefaultValues:Ixe},zxe=e=>{const{axis:t}=e;return Nv(t.data??[])};function Fxe(e,t,a,s){return a.reduce((r,i,o)=>{if(t[o]===null)return r;const[l,c]=e(i);return s&&(!s({y:l,x:null},o)||!s({y:c,x:null},o))?r:[Math.min(l,c,r[0]),Math.max(l,c,r[1])]},[1/0,-1/0])}const Uxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const o=t[i].yAxisId;return o===a.id||s&&o===void 0}).reduce((i,o)=>{const{area:l,stackedData:c,data:d}=t[o],u=l!==void 0,h=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),p=u&&a.scaleType!=="log"&&typeof t[o].baseline!="string"?v=>v:v=>[v[1],v[1]],x=Fxe(p,d,c,h),[b,N]=x;return[Math.min(b,i[0]),Math.max(N,i[1])]},[1/0,-1/0])};function Bxe(e,t){const a={};return Object.keys(e).forEach(s=>{a[s]=Ye({},e[s],{valueFormatter:e[s].valueFormatter??t})}),a}const Hxe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=dG(Ye({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];a.forEach(l=>{const c=s[l].data;c!==void 0&&c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d})});const o={};return r.forEach(l=>{const{ids:c,stackingOrder:d,stackingOffset:u}=l,h=x4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const b=s[p].dataKey;o[p]=Ye({labelMarkType:"line"},s[p],{data:b?t.map(N=>{const v=N[b];return typeof v=="number"?v:null}):s[p].data,stackedData:h[x].map(([N,v])=>[N,v])})})}),{seriesOrder:a,stackingGroups:r,series:Bxe(o,l=>l==null?"":l.toLocaleString())}},_4=(e,t,a)=>{const s=a?.colorScale,r=t?.colorScale,i=y4(e);return s?o=>{if(o===void 0)return e.color;const l=e.data[o],c=l===null?i({value:l,dataIndex:o}):s(l);return c===null?i({value:l,dataIndex:o}):c}:r?o=>{if(o===void 0)return e.color;const l=t.data?.[o],c=l===null?i({value:l,dataIndex:o}):r(l);return c===null?i({value:l,dataIndex:o}):c}:o=>{if(o===void 0)return e.color;const l=e.data[o];return i({value:l,dataIndex:o})}},qxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Gi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},Wxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Gi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Gxe=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),Vxe=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Yxe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.line?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[a.dataIndex],o=r.data[a.dataIndex];return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},Qxe={colorProcessor:_4,seriesProcessor:Hxe,legendGetter:qxe,tooltipGetter:Wxe,tooltipItemPositionGetter:Yxe,axisTooltipGetter:Gxe,xExtremumGetter:zxe,yExtremumGetter:Uxe,getSeriesWithDefaultValues:Vxe},Kxe=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,a)=>a-t;case"asc":return(t,a)=>t-a;default:return null}},Xxe=e=>{const{seriesOrder:t,series:a}=e,s={};return t.forEach(r=>{const i=spe().startAngle(Yc(a[r].startAngle??0)).endAngle(Yc(a[r].endAngle??360)).padAngle(Yc(a[r].paddingAngle??0)).sortValues(Kxe(a[r].sortingValues??"none"))(a[r].data.map(o=>o.value));s[r]=Ye({labelMarkType:"circle",valueFormatter:o=>o.value.toLocaleString()},a[r],{data:a[r].data.map((o,l)=>Ye({},o,{id:o.id??`auto-generated-pie-id-${r}-${l}`},i[l])).map((o,l)=>Ye({labelMarkType:"circle"},o,{formattedValue:a[r].valueFormatter?.(Ye({},o,{label:Gi(o.label,"arc")}),{dataIndex:l})??o.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},Zxe=e=>t=>e.data[t].color,Jxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>(a[r].data.forEach((i,o)=>{const l=Gi(i.label,"legend");l!==void 0&&s.push({markType:i.labelMarkType??a[r].labelMarkType,id:i.id??o,seriesId:r,color:i.color,label:l,itemId:i.id??o})}),s),[])},e0e=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=Gi(r.label,"tooltip"),o=Ye({},r,{label:i}),l=t.valueFormatter(o,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:i,value:o,formattedValue:l,markType:r.labelMarkType??t.labelMarkType}},t0e=(e,t,a)=>Ye({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>Ye({},s,{color:s.color??a[r%a.length]}))});function Lv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*t/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function n0e(e,t){const{height:a,width:s}=t,{cx:r,cy:i}=e,o=Math.min(s,a)/2,l=Lv(r??"50%",s),c=Lv(i??"50%",a);return{cx:l,cy:c,availableRadius:o}}const a0e=e=>{const{series:t,drawingArea:a,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:o,cy:l,availableRadius:c}=n0e({cx:i.cx,cy:i.cy},a),{data:d,innerRadius:u=0,outerRadius:h}=i,p=Math.max(0,Lv(u??0,c)),x=Math.max(0,Lv(h??c,c)),b=d[s.dataIndex];if(!b)return null;const N=[[p,b.startAngle],[p,b.endAngle],[x,b.startAngle],[x,b.endAngle]].map(([A,E])=>({x:o+A*Math.sin(E),y:l-A*Math.cos(E)})),[v,j]=Nv(N.map(A=>A.x)),[w,S]=Nv(N.map(A=>A.y));switch(r){case"bottom":return{x:(j+v)/2,y:S};case"left":return{x:v,y:(S+w)/2};case"right":return{x:j,y:(S+w)/2};default:return{x:(j+v)/2,y:w}}},s0e={colorProcessor:Zxe,seriesProcessor:Xxe,legendGetter:Jxe,tooltipGetter:e0e,tooltipItemPositionGetter:a0e,getSeriesWithDefaultValues:t0e},r0e={bar:Exe,scatter:Rxe,line:Qxe,pie:s0e},i0e=[_x,wx,Kf,Ax];function o0e(e){const{children:t,plugins:a=i0e,pluginParams:s={},seriesConfig:r=r0e}=e,{contextValue:i}=xme(a,s,r);return n.jsx(eq.Provider,{value:i,children:t})}const Wr=()=>{const e=f.useContext(eq);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function l0e(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const WN=(e,t)=>{const{instance:a}=Wr(),s=f.useRef(!1),r=hs(()=>{s.current=!0,a.setItemInteraction(e,{interaction:"pointer"}),a.setHighlight(e)}),i=hs(()=>{s.current=!1,a.removeItemInteraction(e),a.clearHighlight()});return f.useEffect(()=>()=>{s.current&&i()},[i]),f.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:l0e}),[t,r,i])};function SG(e){return e.replace(" ","_")}const _G=_a("MuiAppearingMask",["animate"]),c0e=un("rect")({animationName:"animate-width",animationTimingFunction:C4,animationDuration:"0s",[`&.${_G.animate}`]:{animationDuration:`${HN}ms`},"@keyframes animate-width":{from:{width:0}}});function AG(e){const t=Ai(),a=FN(),s=SG(`${a}-${e.id}`);return n.jsxs(f.Fragment,{children:[n.jsx("clipPath",{id:s,children:n.jsx(c0e,{className:e.skipAnimation?"":_G.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),n.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const d0e=["skipAnimation","ownerState"];function u0e(e){const{skipAnimation:t,ownerState:a}=e,s=xn(e,d0e),r=pxe(e);return n.jsx(AG,{skipAnimation:t,id:`${a.id}-area-clip`,children:n.jsx("path",Ye({fill:a.gradientId?`url(#${a.gradientId})`:a.color,filter:a.isHighlighted?"brightness(140%)":a.gradientId?void 0:"brightness(120%)",opacity:a.isFaded?.3:1,stroke:"none","data-series":a.id,"data-highlighted":a.isHighlighted||void 0,"data-faded":a.isFaded||void 0},s,r))})}const m0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function f0e(e){return Ga("MuiAreaElement",e)}const h0e=_a("MuiAreaElement",["root","highlighted","faded","series"]),g0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return Wa(i,f0e,t)};function p0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=xn(e,m0e),d=WN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:h}=yG({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:h},x=g0e(p),b=i?.area??u0e,N=$l({elementType:b,externalSlotProps:o?.area,additionalProps:Ye({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(b,Ye({},c,N))}function A4(e){const t=Yn(),a=Ut(t,Lue);return e||a}function T4(){const e=Yn();return Ut(e,eW)}function TG(e){switch(e){case"catmullRom":return hpe.alpha(.5);case"linear":return Tx;case"monotoneX":return uE;case"monotoneY":return ZW;case"natural":return eG;case"step":return tG;case"stepBefore":return nG;case"stepAfter":return aG;case"bumpY":return MW;case"bumpX":return OW;default:return uE}}function x0e(e,t){const a=Ex(),s=xr().xAxisIds[0],r=yr().yAxisIds[0],i=j4();return f.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const h=u.ids;for(let p=h.length-1;p>=0;p-=1){const x=h[p],{xAxisId:b=s,yAxisId:N=r,stackedData:v,data:j,connectNulls:w,baseline:S,curve:A,strictStepCurve:E,area:_}=l[x];if(!_||!(b in e)||!(N in t))continue;const k=e[b].scale,T=Zf(k),O=t[N].scale,$=e[b].data,R=t[N].colorScale&&i(N)||e[b].colorScale&&i(b)||void 0,P=A?.includes("step")&&!E&&ys(k),I=$?.flatMap((K,W)=>{const J=j[W]==null;if(P){const Te=[{x:K,y:v[W],nullData:J,isExtension:!1}];return!J&&(W===0||j[W-1]==null)&&Te.unshift({x:(k(K)??0)-(k.step()-k.bandwidth())/2,y:v[W],nullData:J,isExtension:!0}),!J&&(W===j.length-1||j[W+1]==null)&&Te.push({x:(k(K)??0)+(k.step()+k.bandwidth())/2,y:v[W],nullData:J,isExtension:!0}),Te}return{x:K,y:v[W],nullData:J}})??[],H=w?I.filter(K=>!K.nullData):I,G=Ig().x(K=>K.isExtension?K.x:T(K.x)).defined(K=>w||!K.nullData||!!K.isExtension).y0(K=>{if(typeof S=="number")return O(S);if(S==="max")return O.range()[1];if(S==="min")return O.range()[0];const W=K.y&&O(K.y[0]);return Number.isNaN(W)?O.range()[0]:W}).y1(K=>K.y&&O(K.y[1])).curve(TG(A))(H)||"";d.push({area:l[x].area,color:l[x].color,gradientId:R,d:G,seriesId:x})}}return d},[a,s,r,e,t,i])}const y0e=["slots","slotProps","onItemClick","skipAnimation"],b0e=un("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${h0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),v0e=()=>{const{xAxis:e}=xr(),{yAxis:t}=yr();return x0e(e,t)};function w0e(e){const{slots:t,slotProps:a,onItemClick:s,skipAnimation:r}=e,i=xn(e,y0e),o=T4(),l=A4(o||r),c=v0e();return n.jsx(b0e,Ye({},i,{children:c.map(({d,seriesId:u,color:h,area:p,gradientId:x})=>!!p&&n.jsx(p0e,{id:u,d,color:h,gradientId:x,slots:t,slotProps:a,onClick:s&&(b=>s(b,{type:"line",seriesId:u})),skipAnimation:l},u))}))}const N0e=["skipAnimation","ownerState"],j0e=f.forwardRef(function(t,a){const{skipAnimation:s,ownerState:r}=t,i=xn(t,N0e),o=xxe(Ye({},t,{ref:a}));return n.jsx(AG,{skipAnimation:s,id:`${r.id}-line-clip`,children:n.jsx("path",Ye({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,o))})}),C0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function S0e(e){return Ga("MuiLineElement",e)}const _0e=_a("MuiLineElement",["root","highlighted","faded","series"]),A0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return Wa(i,S0e,t)};function T0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=xn(e,C0e),d=WN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:h}=yG({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:h},x=A0e(p),b=i?.line??j0e,N=$l({elementType:b,externalSlotProps:o?.line,additionalProps:Ye({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(b,Ye({},c,N))}function E0e(e,t){const a=Ex(),s=xr().xAxisIds[0],r=yr().yAxisIds[0],i=j4();return f.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const h=u.ids;for(const p of h){const{xAxisId:x=s,yAxisId:b=r,stackedData:N,data:v,connectNulls:j,curve:w,strictStepCurve:S}=l[p];if(!(x in e)||!(b in t))continue;const A=e[x].scale,E=Zf(A),_=t[b].scale,k=e[x].data,T=t[b].colorScale&&i(b)||e[x].colorScale&&i(x)||void 0,O=w?.includes("step")&&!S&&ys(A),$=k?.flatMap((H,Q)=>{const G=v[Q]==null;if(O){const K=[{x:H,y:N[Q],nullData:G,isExtension:!1}];return!G&&(Q===0||v[Q-1]==null)&&K.unshift({x:(A(H)??0)-(A.step()-A.bandwidth())/2,y:N[Q],nullData:G,isExtension:!0}),!G&&(Q===v.length-1||v[Q+1]==null)&&K.push({x:(A(H)??0)+(A.step()+A.bandwidth())/2,y:N[Q],nullData:G,isExtension:!0}),K}return{x:H,y:N[Q],nullData:G}})??[],R=j?$.filter(H=>!H.nullData):$,I=h4().x(H=>H.isExtension?H.x:E(H.x)).defined(H=>j||!H.nullData||!!H.isExtension).y(H=>_(H.y[1])).curve(TG(w))(R)||"";d.push({color:l[p].color,gradientId:T,d:I,seriesId:p})}}return d},[a,s,r,e,t,i])}const k0e=["slots","slotProps","skipAnimation","onItemClick"],L0e=un("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${_0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),P0e=()=>{const{xAxis:e}=xr(),{yAxis:t}=yr();return E0e(e,t)};function D0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=xn(e,k0e),o=T4(),l=A4(o||s),c=P0e();return n.jsx(L0e,Ye({},i,{children:c.map(({d,seriesId:u,color:h,gradientId:p})=>n.jsx(T0e,{id:u,d,color:h,gradientId:p,skipAnimation:l,slots:t,slotProps:a,onClick:r&&(x=>r(x,{type:"line",seriesId:u}))},u))}))}function O0e(e){return Ga("MuiMarkElement",e)}const EG=_a("MuiMarkElement",["root","highlighted","faded","animate","series"]),kG=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r,skipAnimation:i}=e,o={root:["root",`series-${a}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return Wa(o,O0e,t)},M0e=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],I0e=un("circle")({[`&.${EG.animate}`]:{transitionDuration:`${HN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:C4}});function $0e(e){const{x:t,y:a,id:s,classes:r,color:i,dataIndex:o,onClick:l,skipAnimation:c,isFaded:d=!1,isHighlighted:u=!1}=e,h=xn(e,M0e),p=Ho(),x=WN({type:"line",seriesId:s,dataIndex:o}),N=kG({id:s,classes:r,isHighlighted:u,isFaded:d,skipAnimation:c});return n.jsx(I0e,Ye({},h,{cx:t,cy:a,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:N.root,onClick:l,cursor:l?"pointer":"unset"},x,{"data-highlighted":u||void 0,"data-faded":d||void 0}))}function LG(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const R0e=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],z0e=un("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${EG.animate}`]:{transitionDuration:`${HN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:C4}}));function F0e(e){const{x:t,y:a,id:s,classes:r,color:i,shape:o,dataIndex:l,onClick:c,skipAnimation:d,isFaded:u=!1,isHighlighted:h=!1}=e,p=xn(e,R0e),x=WN({type:"line",seriesId:s,dataIndex:l}),b={id:s,classes:r,isHighlighted:h,isFaded:u,color:i,skipAnimation:d},N=kG(b);return n.jsx(z0e,Ye({},p,{style:{transform:`translate(${t}px, ${a}px)`,transformOrigin:`${t}px ${a}px`},ownerState:b,className:N.root,d:g4(qW[LG(o)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":h||void 0,"data-faded":u||void 0}))}const U0e=["slots","slotProps","skipAnimation","onItemClick"];function B0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=xn(e,U0e),o=T4(),l=A4(o||s),c=Ex(),{xAxis:d,xAxisIds:u}=xr(),{yAxis:h,yAxisIds:p}=yr(),x=FN(),{instance:b,store:N}=Wr(),{isFaded:v,isHighlighted:j}=exe(),w=Ut(N,NW),S=f.useMemo(()=>{const T={};for(const{dataIndex:O,axisId:$}of w)T[$]===void 0?T[$]=new Set([O]):T[$].add(O);return T},[w]);if(c===void 0)return null;const{series:A,stackingGroups:E}=c,_=u[0],k=p[0];return n.jsx("g",Ye({},i,{children:E.flatMap(({ids:T})=>T.map(O=>{const{xAxisId:$=_,yAxisId:R=k,stackedData:P,data:I,showMark:H=!0,shape:Q="circle"}=A[O];if(H===!1)return null;const G=Zf(d[$].scale),K=h[R].scale,W=d[$].data;if(W===void 0)throw new Error(`MUI X Charts: ${$===fN?"The first `xAxis`":`The x-axis with id "${$}"`} should have data property to be able to display a line plot.`);const J=SG(`${x}-${O}-line-clip`),Te=_4(A[O],d[$],h[R]),ee=t?.mark??(Q==="circle"?$0e:F0e),U=j({seriesId:O}),je=!U&&v({seriesId:O});return n.jsx("g",{clipPath:`url(#${J})`,"data-series":O,children:W?.map((be,le)=>{const Ce=I[le]==null?null:P[le][1];return{x:G(be),y:Ce===null?null:K(Ce),position:be,value:Ce,index:le}}).filter(({x:be,y:le,index:Ce,position:Se,value:Oe})=>Oe===null||le===null||!b.isPointInside(be,le)?!1:H===!0?!0:H({x:be,y:le,index:Ce,position:Se,value:Oe})).map(({x:be,y:le,index:Ce})=>n.jsx(ee,Ye({id:O,dataIndex:Ce,shape:Q,color:Te(Ce),x:be,y:le,skipAnimation:l,onClick:r&&(Se=>r(Se,{type:"line",seriesId:O,dataIndex:Ce})),isHighlighted:S[$]?.has(Ce)||U,isFaded:je},a?.mark),`${O}-${Ce}`))},O)}))}))}function GN(){const[e,t]=f.useState(typeof window<"u"||!1);return f.useEffect(()=>{t(!0)},[]),e}function E4(e){return typeof e=="number"&&!Number.isFinite(e)}const hE={start:0,extremities:0,end:1,middle:.5};function a2(e,t,a){return e(t)-(e.step()-e.bandwidth())/2+hE[a]*e.step()}function H0e(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,isInside:l}=e;if(ys(t)){const p=t.domain(),x=o??"middle";if(t.bandwidth()>0){const N=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,v=t.range()[0]>t.range()[1],j=N.findIndex(S=>l(a2(t,S,v?"start":"end"))),w=N.findLastIndex(S=>l(a2(t,S,v?"end":"start")));return[...N.slice(j,w+1).map(S=>{const A=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:A})??A,offset:a2(t,S,i),labelOffset:x==="tick"?0:t.step()*(hE[x]-hE[i])}}),...i==="extremities"&&w===p.length-1&&l(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(N=>{const v=`${N}`;return{value:N,formattedValue:s?.(N,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:v})??v,offset:t(N),labelOffset:0}})}if(t.domain().some(E4))return[];const d=o,u=typeof r=="object"?r:q0e(t,a),h=[];for(let p=0;p<u.length;p+=1){const x=u[p],b=t(x);if(l(b)){const N=t.tickFormat(a)(x);h.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:N})??N,offset:b,labelOffset:d==="middle"?t(u[p-1]??0)-(b+t(u[p-1]??0))/2:0})}}return h}function q0e(e,t){const a=e.domain();return a[0]===a[1]?[a[0]]:e.ticks(t)}function VN(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,direction:l}=e,{instance:c}=Wr(),d=l==="x"?c.isXInside:c.isYInside;return f.useMemo(()=>H0e({scale:t,tickNumber:a,tickPlacement:i,tickInterval:r,tickLabelPlacement:o,valueFormatter:s,isInside:d}),[t,a,i,r,o,s,d])}function W0e(e=!1){const[t,a]=f.useState(!1);return ss(()=>{e||a(!0)},[e]),f.useEffect(()=>{e&&a(!0)},[e]),t}const PG=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function G0e(e){return e.length}function V0e(e){const t=PG.segment(e);let a=0;for(const s of t)a+=1;return a}const Y0e=PG?V0e:G0e;function Q0e(e){return e*(Math.PI/180)}const DG=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function K0e(e,t){return e.slice(0,t)}function X0e(e,t){const a=DG.segment(e);let s="",r=0;for(const i of a)if(s+=i.segment,r+=1,r>=t)break;return s}const Z0e=DG?X0e:K0e,S6="";function OG(e,t){const{width:a,height:s,measureText:r}=t,i=Q0e(t.angle),o=r(e),l=Math.abs(o.width*Math.cos(i))+Math.abs(o.height*Math.sin(i)),c=Math.abs(o.width*Math.sin(i))+Math.abs(o.height*Math.cos(i));return l<=a&&c<=s}function MG(e,t){if(t(e))return e;let a=e,s=1,r=1/2;const i=Y0e(e);let o=i,l=i,c=null;do{if(l=o,o=Math.floor(i*r),o===0)break;a=Z0e(e,o).trim();const d=t(a+S6);s+=1,d?(c=a,r+=1/2**s):r-=1/2**s}while(Math.abs(o-l)!==1);return c?c+S6:""}function IG(){return typeof window>"u"}const Qc=new Map,$G=2e3,J0e=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function k4(e,t){return J0e.has(e)&&t===+t?`${t}px`:t}const eye=/([A-Z])/g;function L4(e){return String(e).replace(eye,t=>`-${t.toLowerCase()}`)}function RG(e){let t="";for(const a in e)if(Object.hasOwn(e,a)){const s=a,r=e[s];if(r===void 0)continue;t+=`${L4(s)}:${k4(s,r)};`}return t}const kx=(e,t={})=>{if(e==null||IG())return{width:0,height:0};const a=String(e),s=RG(t),r=`${a}-${s}`,i=Qc.get(r);if(i)return i;try{const o=FG(),l=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(d=>(l.style[L4(d)]=k4(d,t[d]),d)),l.textContent=a,o.replaceChildren(l);const c=zG(l);return Qc.set(r,c),Qc.size+1>$G&&Qc.clear(),c}catch{return{width:0,height:0}}};function tye(e,t={}){if(IG())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const a=new Map,s=[],r=RG(t);for(const c of e){const d=`${c}-${r}`,u=Qc.get(d);u?a.set(c,u):s.push(c)}const i=FG(),o=Ye({},t);Object.keys(o).map(c=>(i.style[L4(c)]=k4(c,o[c]),c));const l=[];for(const c of s){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.textContent=`${c}`,l.push(d)}i.replaceChildren(...l);for(let c=0;c<s.length;c+=1){const d=s[c],u=i.children[c],h=zG(u),p=`${d}-${r}`;Qc.set(p,h),a.set(d,h)}return Qc.size+1>$G&&Qc.clear(),a}function zG(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let sr=null;function FG(){return sr===null&&(sr=document.createElementNS("http://www.w3.org/2000/svg","svg"),sr.setAttribute("aria-hidden","true"),sr.style.position="absolute",sr.style.top="-20000px",sr.style.left="0",sr.style.padding="0",sr.style.margin="0",sr.style.border="none",sr.style.pointerEvents="none",sr.style.visibility="hidden",sr.style.contain="strict",document.body.appendChild(sr)),sr}function nye(e,t,a,s,r){const i=new Map,o=UN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>90&&o<270&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.left+t.width+t.right-d.offset-d.labelOffset)*c),h=p=>OG(p,{width:u,height:a,angle:o,measureText:x=>kx(x,r)});i.set(d,MG(d.formattedValue.toString(),h))}return i}const _6=5;function aye(e,t,a=0){const s=Math.min(Math.abs(a)%180,Math.abs(Math.abs(a)%180-180)%180);if(s<_6)return e;if(s>90-_6)return t;const r=Yc(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function sye(e,{tickLabelStyle:t,tickLabelInterval:a,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:o}){if(typeof a=="function")return new Set(e.filter((h,p)=>a(h.value,p)));let l=0;const c=r?-1:1,d=e.filter(h=>{const{offset:p,labelOffset:x,formattedValue:b}=h;if(b==="")return!1;const N=p+x;return o(N)}),u=iye(d,t);return new Set(d.filter((h,p)=>{const{offset:x,labelOffset:b}=h,N=x+b;if(p>0&&c*N<c*(l+s))return!1;const{width:v,height:j}=i?rye(u,h):{width:0,height:0},w=aye(v,j,t?.angle),S=N-c*w/2;return p>0&&c*S<c*(l+s)?!1:(l=N+c*w/2,!0)}))}function rye(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let a=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(a=Math.max(a,i.width),s+=i.height)}return{width:a,height:s}}function iye(e,t){const a=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>a.add(r));return tye(a,t)}function UG(e){return Ga("MuiChartsAxis",e)}const Fy=_a("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),BG=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionX",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Wa(r,UG,t)},gE=3,oye=4,HG={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function lye({style:e,needsComputation:t,text:a}){return a.split(`
`).map(s=>Ye({text:s},t?kx(s,e):{width:0,height:0}))}const cye=["x","y","style","text","ownerState"],dye=["angle","textAnchor","dominantBaseline"];function YN(e){const{x:t,y:a,style:s,text:r}=e,i=xn(e,cye),o=s??{},{angle:l,textAnchor:c,dominantBaseline:d}=o,u=xn(o,dye),h=GN(),p=f.useMemo(()=>lye({style:u,needsComputation:h&&r.includes(`
`),text:r}),[u,r,h]);let x;switch(d){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return n.jsx("text",Ye({},i,{transform:l?`rotate(${l}, ${t}, ${a})`:void 0,x:t,y:a,textAnchor:c,dominantBaseline:d,style:u,children:p.map((b,N)=>n.jsx("tspan",{x:t,dy:`${N===0?x:p[0].height}px`,dominantBaseline:d,children:b.text},N))}))}function qG(e){const t=UN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function WG(e){const t=UN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function GG(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const uye=["scale","tickNumber","reverse"];function VG(e){const{xAxis:t,xAxisIds:a}=xr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i,reverse:o}=s,l=xn(s,uye),c=Si({props:Ye({},l,e),name:"MuiChartsXAxis"}),d=Ye({},HG,c),{position:u,tickLabelStyle:h,slots:p,slotProps:x}=d,b=Ho(),N=fx(),v=BG(d),j=u==="bottom"?1:-1,w=p?.axisTick??"line",S=p?.axisTickLabel??YN,A=qG((u==="bottom"?0:180)-(h?.angle??0)),E=WG((u==="bottom"?0:180)-(h?.angle??0)),_=$l({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:Ye({},b.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:N?GG(A):A,dominantBaseline:E},h)},className:v.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:d,tickNumber:i,positionSign:j,classes:v,Tick:w,TickLabel:S,axisTickLabelProps:_,reverse:o}}function mye(e){const{axisLabelHeight:t}=e,{xScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d,reverse:u}=VG(e),h=fx(),p=W0e(),{disableTicks:x,tickSize:b,valueFormatter:N,slotProps:v,tickInterval:j,tickLabelInterval:w,tickPlacement:S,tickLabelPlacement:A,tickLabelMinGap:E,height:_}=s,k=Ai(),{instance:T}=Wr(),O=GN(),$=x?4:b,R=VN({scale:a,tickNumber:r,valueFormatter:N,tickInterval:j,tickPlacement:S,tickLabelPlacement:A,direction:"x"}),P=sye(R,{tickLabelStyle:d.style,tickLabelInterval:w,tickLabelMinGap:E,reverse:u,isMounted:p,isXInside:T.isXInside}),I=Math.max(0,_-(t>0?t+oye:0)-$-gE),H=O?nye(P,k,I,h,d.style):new Map(Array.from(P).map(Q=>[Q,Q.formattedValue]));return n.jsx(f.Fragment,{children:R.map((Q,G)=>{const{offset:K,labelOffset:W}=Q,J=W??0,Te=i*($+gE),ee=T.isXInside(K),U=H.get(Q),je=P.has(Q);return n.jsxs("g",{transform:`translate(${K}, 0)`,className:o.tickContainer,children:[!x&&ee&&n.jsx(l,Ye({y2:i*$,className:o.tick},v?.axisTick)),U!==void 0&&je&&n.jsx(c,Ye({x:J,y:Te},d,{text:U}))]},G)})})}const fg={start:0,extremities:0,end:1,middle:.5,tick:0};function YG(e){const{scale:t,tickInterval:a,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return f.useMemo(()=>{const o=t.domain(),l=typeof a=="function"&&o.filter(a)||typeof a=="object"&&a||o;if(t.bandwidth()>0){const c=A6(l,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return A6(l,i,r,s,t)},[t,a,i,r,s])}function A6(e,t,a,s,r){const i=[],o=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let d=0;d<e.length;d+=1){const u=e[d],h=t[c].getValue(u,d),p=i[i.length-1];if(p?.value!==h||p?.groupIndex!==c){l=1;const b=ys(r)?r(u)-(r.step()-r.bandwidth())/2+fg[a]*r.step():r(u),N=r.step()*l*(fg[s]-fg[a]);i.push({value:h,formattedValue:`${h}`,offset:b,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:N}),o.has(d)||o.set(d,new Set);const v=o.get(d);for(const j of v.values())i[j].ignoreTick=!0;v.add(i.length-1)}else{l+=1;const b=r.step()*l*(fg[s]-fg[a]);p.labelOffset=b}}return i}const T6={tickSize:6},fye=(e,t,a)=>{const s=e[t]??{},r=a??T6.tickSize,i=r*t*2+r;return Ye({},T6,s,{tickSize:s.tickSize??i})};function hye(e){const{xScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=VG(e);if(!ys(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:h,tickInterval:p,tickPlacement:x,tickLabelPlacement:b}=a,N=a.groups,{instance:v}=Wr(),j=YG({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:b,groups:N});return n.jsx(f.Fragment,{children:j.map((w,S)=>{const{offset:A,labelOffset:E}=w,_=E??0,k=v.isXInside(A),T=w.formattedValue,O=w.ignoreTick??!1,$=w.groupIndex??0,R=fye(N,$,d),P=s*R.tickSize,I=s*(R.tickSize+gE);return n.jsxs("g",{transform:`translate(${A}, 0)`,className:r.tickContainer,"data-group-index":$,children:[!c&&!O&&k&&n.jsx(i,Ye({y2:P,className:r.tick},h?.axisTick)),T!==void 0&&n.jsx(o,Ye({x:_,y:I},l,{style:Ye({},l.style,R.tickLabelStyle),text:T}))]},S)})})}const QG=un("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${Fy.tickLabel}`]:Ye({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Fy.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Fy.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Fy.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),gye=["axis"],pye=["scale","tickNumber","reverse"],xye=un(QG,{name:"MuiChartsXAxis",slot:"Root"})({});function yye(e){let{axis:t}=e,a=xn(e,gye);const{scale:s}=t,r=xn(t,pye),i=Si({props:Ye({},r,a),name:"MuiChartsXAxis"}),o=Ye({},HG,i),{position:l,labelStyle:c,offset:d,slots:u,slotProps:h,sx:p,disableLine:x,label:b,height:N}=o,v=Ho(),j=BG(o),{left:w,top:S,width:A,height:E}=Ai(),_=l==="bottom"?1:-1,k=u?.axisLine??"line",T=u?.axisLabel??YN,O=$l({elementType:T,externalSlotProps:h?.axisLabel,additionalProps:{style:Ye({},v.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:l==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(l==="none")return null;const $=b?kx(b,O.style).height:0,R=s.domain(),I=ys(s)?R.length===0:R.some(E4);let H=null;I||(H="groups"in t&&Array.isArray(t.groups)?n.jsx(hye,Ye({},a)):n.jsx(mye,Ye({},a,{axisLabelHeight:$})));const Q={x:w+A/2,y:_*N};return n.jsxs(xye,{transform:`translate(0, ${l==="bottom"?S+E+d:S-d})`,className:j.root,sx:p,children:[!x&&n.jsx(k,Ye({x1:w,x2:w+A,className:j.line},h?.axisLine)),H,b&&n.jsx("g",{className:j.label,children:n.jsx(T,Ye({},Q,O,{text:b}))})]})}function bye(e){const{xAxis:t,xAxisIds:a}=xr(),s=t[e.axisId??a[0]];return s?n.jsx(yye,Ye({},e,{axis:s})):(`${e.axisId}`,null)}function vye(e,t,a,s,r){const i=new Map,o=UN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>180&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.top+t.height+t.bottom-d.offset-d.labelOffset)*c),h=p=>OG(p,{width:a,height:u,angle:o,measureText:x=>kx(x,r)});i.set(d,MG(d.formattedValue.toString(),h))}return i}const KG=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionY",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Wa(r,UG,t)},pE=2,wye=2,XG={disableLine:!1,disableTicks:!1,tickSize:6},Nye=["scale","tickNumber","reverse"];function ZG(e){const{yAxis:t,yAxisIds:a}=yr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i}=s,o=xn(s,Nye),l=Si({props:Ye({},o,e),name:"MuiChartsYAxis"}),c=Ye({},XG,l),{position:d,tickLabelStyle:u,slots:h,slotProps:p}=c,x=Ho(),b=fx(),N=KG(c),v=d==="right"?1:-1,j=typeof u?.fontSize=="number"?u.fontSize:12,w=h?.axisTick??"line",S=h?.axisTickLabel??YN,A=qG((d==="right"?-90:90)-(u?.angle??0)),E=WG((d==="right"?-90:90)-(u?.angle??0)),_=$l({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:Ye({},x.typography.caption,{fontSize:j,textAnchor:b?GG(A):A,dominantBaseline:E},u)},className:N.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:v,classes:N,Tick:w,TickLabel:S,axisTickLabelProps:_}}function jye(e){const{axisLabelHeight:t}=e,{yScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d}=ZG(e),u=fx(),{disableTicks:h,tickSize:p,valueFormatter:x,slotProps:b,tickPlacement:N,tickLabelPlacement:v,tickInterval:j,tickLabelInterval:w,width:S}=s,A=Ai(),{instance:E}=Wr(),_=GN(),k=h?4:p,T=VN({scale:a,tickNumber:r,valueFormatter:x,tickPlacement:N,tickLabelPlacement:v,tickInterval:j,direction:"y"}),O=Math.max(0,S-(t>0?t+wye:0)-k-pE),$=_?vye(T,A,O,u,d.style):new Map(Array.from(T).map(R=>[R,R.formattedValue]));return n.jsx(f.Fragment,{children:T.map((R,P)=>{const{offset:I,labelOffset:H,value:Q}=R,G=i*(k+pE),K=H,W=typeof w=="function"&&!w?.(Q,P),J=E.isYInside(I),Te=$.get(R);return J?n.jsxs("g",{transform:`translate(0, ${I})`,className:o.tickContainer,children:[!h&&n.jsx(l,Ye({x2:i*k,className:o.tick},b?.axisTick)),Te!==void 0&&!W&&n.jsx(c,Ye({x:G,y:K,text:Te},d))]},P):null})})}const E6={tickSize:6},Cye=(e,t,a)=>{const s=e[t]??{},r=a??E6.tickSize,i=r*t*2+r;return Ye({},E6,s,{tickSize:s.tickSize??i})};function Sye(e){const{yScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=ZG(e);if(!ys(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:h,tickInterval:p,tickPlacement:x,tickLabelPlacement:b}=a,N=a.groups,{instance:v}=Wr(),j=YG({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:b,groups:N});return n.jsx(f.Fragment,{children:j.map((w,S)=>{const{offset:A,labelOffset:E}=w,_=E??0,k=v.isYInside(A),T=w.formattedValue,O=w.ignoreTick??!1,$=w.groupIndex??0,R=Cye(N,$,d),P=s*R.tickSize,I=s*(R.tickSize+pE);return n.jsxs("g",{transform:`translate(0, ${A})`,className:r.tickContainer,"data-group-index":$,children:[!c&&!O&&k&&n.jsx(i,Ye({x2:P,className:r.tick},h?.axisTick)),T!==void 0&&n.jsx(o,Ye({x:I,y:_},l,{style:Ye({},l.style,R.tickLabelStyle),text:T}))]},S)})})}const _ye=["axis"],Aye=["scale","tickNumber","reverse"],Tye=un(QG,{name:"MuiChartsYAxis",slot:"Root"})({});function Eye(e){let{axis:t}=e,a=xn(e,_ye);const{scale:s}=t,r=xn(t,Aye),i=GN(),o=Si({props:Ye({},r,a),name:"MuiChartsYAxis"}),l=Ye({},XG,o),{position:c,disableLine:d,label:u,labelStyle:h,offset:p,width:x,sx:b,slots:N,slotProps:v}=l,j=Ho(),w=KG(l),{left:S,top:A,width:E,height:_}=Ai(),k=c==="right"?1:-1,T=N?.axisLine??"line",O=N?.axisLabel??YN,$=$l({elementType:T,externalSlotProps:v?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),R=$l({elementType:O,externalSlotProps:v?.axisLabel,additionalProps:{style:Ye({},j.typography.body1,{lineHeight:1,fontSize:14,angle:k*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},h)},ownerState:{}});if(c==="none")return null;const P={x:k*x,y:A+_/2},I=u==null?0:kx(u,R.style).height,H=s.domain(),G=ys(s)?H.length===0:H.some(E4);let K=null;return G||(K="groups"in t&&Array.isArray(t.groups)?n.jsx(Sye,Ye({},a)):n.jsx(jye,Ye({},a,{axisLabelHeight:I}))),n.jsxs(Tye,{transform:`translate(${c==="right"?S+E+p:S-p}, 0)`,className:w.root,sx:b,children:[!d&&n.jsx(T,Ye({y1:A,y2:A+_,className:w.line},$)),K,u&&i&&n.jsx("g",{className:w.label,children:n.jsx(O,Ye({},P,R,{text:u}))})]})}function kye(e){const{yAxis:t,yAxisIds:a}=yr(),s=t[e.axisId??a[0]];return s?n.jsx(Eye,Ye({},e,{axis:s})):(`${e.axisId}`,null)}function Lye(e){const{slots:t,slotProps:a}=e,{xAxisIds:s,xAxis:r}=xr(),{yAxisIds:i,yAxis:o}=yr();return n.jsxs(f.Fragment,{children:[s.map(l=>!r[l].position||r[l].position==="none"?null:n.jsx(bye,{slots:t,slotProps:a,axisId:l},l)),i.map(l=>!o[l].position||o[l].position==="none"?null:n.jsx(kye,{slots:t,slotProps:a,axisId:l},l))]})}function Pye(e){return Ga("MuiTypography",e)}_a("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Dye={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Oye=ode(),Mye=e=>{const{align:t,gutterBottom:a,noWrap:s,paragraph:r,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${Wn(t)}`,a&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return Wa(l,Pye,o)},Iye=un("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${Wn(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(ku(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,a])=>t!=="inherit"&&a&&typeof a=="object").map(([t,a])=>({props:{variant:t},style:a})),...Object.entries(e.palette).filter(fp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Wn(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),k6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},P4=f.forwardRef(function(t,a){const{color:s,...r}=bd({props:t,name:"MuiTypography"}),i=!Dye[s],o=Oye({...r,...i&&{color:s}}),{align:l="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:h=!1,paragraph:p=!1,variant:x="body1",variantMapping:b=k6,...N}=o,v={...o,align:l,color:s,className:c,component:d,gutterBottom:u,noWrap:h,paragraph:p,variant:x,variantMapping:b},j=d||(p?"p":b[x]||k6[x])||"span",w=Mye(v);return n.jsx(Iye,{as:j,ref:a,className:Pt(w.root,c),...N,ownerState:v,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...N.style}})});function $ye(e){return Ga("MuiChartsTooltip",e)}const af=_a("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),QN=e=>Wa({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},$ye,e);function Rye(){const e=Yn(),t=Ut(e,fW),a=Ut(e,qr),s=BN(),{xAxis:r,xAxisIds:i}=xr(),{yAxis:o,yAxisIds:l}=yr(),{zAxis:c,zAxisIds:d}=v4(),{rotationAxis:u,rotationAxisIds:h}=hG();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=wv(p)?p.xAxisId??i[0]:void 0,b=wv(p)?p.yAxisId??l[0]:void 0,N="zAxisId"in p?p.zAxisId??d[0]:d[0],v=h[0],j=a[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,b!==void 0?o[b]:void 0,N!==void 0?c[N]:void 0)??(()=>""),w={};return x!==void 0&&(w.x=r[x]),b!==void 0&&(w.y=o[b]),v!==void 0&&(w.rotation=u[v]),a[p.type].tooltipGetter({series:p,axesConfig:w,getColor:j,identifier:t})}const xE=un("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),yE=un("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${af.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),bE=un("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),rf=un(P4,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${af.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${af.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${af.valueCell}, &.${af.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${af.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function zye(e){return Ga("MuiChartsLabelMark",e)}const Gm=_a("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Fye=e=>{const{type:t}=e;return Wa({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},zye,e.classes)},JG=(e,t,a)=>f.forwardRef(function(r,i){const o=Si({props:r,name:e}),l=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},c=Eu(l,o),d=Ho(),u=t.classesResolver?.(c,d),h=f.forwardRef(a);return n.jsx(h,Ye({},c,{classes:u,ref:i}))}),Uye=["type","color","className","classes"],Bye=un("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Gm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Gm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Gm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Gm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Gm.mask} > *`]:{height:"100%",width:"100%"},[`& .${Gm.mask}`]:{height:"100%",width:"100%"}})),Pv=JG("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Fye},function(t,a){const{type:s,color:r,className:i,classes:o}=t,l=xn(t,Uye),c=s;return n.jsx(Bye,Ye({className:Pt(o?.root,i),ownerState:t,"aria-hidden":"true",ref:a},l,{children:n.jsx("div",{className:o?.mask,children:typeof c=="function"?n.jsx(c,{className:o?.fill,color:r}):n.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?n.jsx("circle",{className:o?.fill,r:"12",cx:"12",cy:"12",fill:r}):n.jsx("rect",{className:o?.fill,width:"24",height:"24",fill:r})})})}))});function Hye(e){const{classes:t,sx:a}=e,s=Rye(),r=QN(t);if(!s)return null;if("values"in s){const{label:d,color:u,markType:h}=s;return n.jsx(xE,{sx:a,className:r.paper,children:n.jsxs(yE,{className:r.table,children:[n.jsxs(P4,{component:"caption",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Pv,{type:h,color:u,className:r.mark})}),d]}),n.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>n.jsxs(bE,{className:r.row,children:[n.jsx(rf,{className:Pt(r.labelCell,r.cell),component:"th",children:x}),n.jsx(rf,{className:Pt(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:o,formattedValue:l,markType:c}=s;return n.jsx(xE,{sx:a,className:r.paper,children:n.jsx(yE,{className:r.table,children:n.jsx("tbody",{children:n.jsxs(bE,{className:r.row,children:[n.jsxs(rf,{className:Pt(r.labelCell,r.cell),component:"th",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Pv,{type:c,color:i,className:r.mark})}),o]}),n.jsx(rf,{className:Pt(r.valueCell,r.cell),component:"td",children:l})]})})})})}function qye(e){const t=Yn(),a=Ut(t,qr);return f.useMemo(()=>{const r={};return Object.keys(a).forEach(i=>{r[i]=a[i].colorProcessor}),r},[a])}const Wye=A9({themeId:lN});function Gye(){const e=w4(),[t,a]=f.useState(null);return f.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=o=>{o.pointerType!=="mouse"&&a(null)},i=o=>{a({pointerType:o.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function Vye(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const Yye="@media (pointer: fine)",Qye=()=>Wye(Yye,{defaultMatches:!0}),eV=(e,t)=>t,tV=(e,t)=>t;function nV(e,t,a){return Array.isArray(a)?a.map(s=>N6(t.axis[s],e)):N6(t.axis[a],e)}const aV=jt(Nx,jx,Ipe,(e,t,a)=>e===null||t===null?null:$pe(a)(e,t)),Kye=jt(aV,Ju,eV,(e,t,a=t.axisIds[0])=>e===null?null:nV(e,t,a)),sV=jt(aV,Ju,tV,(e,t,a=t.axisIds)=>e===null?null:nV(e,t,a));jt(Ju,Kye,eV,(e,t,a=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[a]?.data;return s?s[t]:null});jt(Ju,sV,tV,(e,t,a=e.axisIds)=>t===null?null:a.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const rV=dN({memoizeOptions:{resultEqualityCheck:pf}})(sV,Ju,(e,t)=>e===null?[]:t.axisIds.map((a,s)=>({axisId:a,dataIndex:e[s]})).filter(({axisId:a,dataIndex:s})=>t.axis[a].triggerTooltip&&s>=0)),Xye=jt(rV,e=>e.length>0);function s2(e,t,a){const s=e.data?.[t]??null,i=(e.valueFormatter??(o=>e.scaleType==="utc"?Vye(o):o.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:a,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function Zye(e={}){const{multipleAxes:t,directions:a}=e,s=zpe(),r=Fpe(),i=Upe(),o=Yn(),l=Ut(o,xW),c=Ut(o,yW),d=Ut(o,rV),u=BN(),{xAxis:h}=xr(),{yAxis:p}=yr(),{zAxis:x,zAxisIds:b}=v4(),{rotationAxis:N}=hG(),v=qye();if(l.length===0&&c.length===0&&d.length===0)return null;const j=[];return(a===void 0||a.includes("x"))&&l.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(s2(h[w],S,"x"))}),(a===void 0||a.includes("y"))&&c.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(s2(p[w],S,"y"))}),(a===void 0||a.includes("rotation"))&&d.forEach(({axisId:w,dataIndex:S})=>{!t&&j.length>1||j.push(s2(N[w],S,"rotation"))}),Object.keys(u).filter(EN).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(A=>{const E=S.series[A],_=E.xAxisId??s.id,k=E.yAxisId??r.id,T=j.findIndex(({axisDirection:O,axisId:$})=>O==="x"&&$===_||O==="y"&&$===k);if(T>=0){const O="zAxisId"in E?E.zAxisId:b[0],{dataIndex:$}=j[T],R=v[w]?.(E,h[_],p[k],O?x[O]:void 0)($)??"",P=E.data[$]??null,I=E.valueFormatter(P,{dataIndex:$}),H=Gi(E.label,"tooltip")??null;j[T].seriesItems.push({seriesId:A,color:R,value:P,formattedValue:I,formattedLabel:H,markType:E.labelMarkType})}}):[]}),Object.keys(u).filter(b4).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(A=>{const E=S.series[A],_=E.rotationAxisId??i?.id,k=j.findIndex(({axisDirection:T,axisId:O})=>T==="rotation"&&O===_);if(k>=0){const{dataIndex:T}=j[k],O=v[w]?.(E)(T)??"",$=E.data[T]??null,R=E.valueFormatter($,{dataIndex:T}),P=Gi(E.label,"tooltip")??null;j[k].seriesItems.push({seriesId:A,color:O,value:$,formattedValue:R,formattedLabel:P,markType:E.labelMarkType})}}):[]}),t?j:j.length===0?j[0]:null}function Jye(e){return Zye(Ye({},e,{multipleAxes:!0}))}function ebe(e){const t=QN(e.classes),a=Jye();return a===null?null:n.jsx(xE,{sx:e.sx,className:t.paper,children:a.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:o,seriesItems:l})=>n.jsxs(yE,{className:t.table,children:[i!=null&&!r.hideTooltip&&n.jsx(P4,{component:"caption",children:o}),n.jsx("tbody",{children:l.map(({seriesId:c,color:d,formattedValue:u,formattedLabel:h,markType:p})=>u==null?null:n.jsxs(bE,{className:t.row,children:[n.jsxs(rf,{className:Pt(t.labelCell,t.cell),component:"th",children:[n.jsx("div",{className:t.markContainer,children:n.jsx(Pv,{type:p,color:d,className:t.mark})}),h||null]}),n.jsx(rf,{className:Pt(t.valueCell,t.cell),component:"td",children:u})]},c))})]},s))})}var mr="top",xi="bottom",yi="right",fr="left",D4="auto",Lx=[mr,xi,yi,fr],Lf="start",jp="end",tbe="clippingParents",iV="viewport",hg="popper",nbe="reference",L6=Lx.reduce(function(e,t){return e.concat([t+"-"+Lf,t+"-"+jp])},[]),oV=[].concat(Lx,[D4]).reduce(function(e,t){return e.concat([t,t+"-"+Lf,t+"-"+jp])},[]),abe="beforeRead",sbe="read",rbe="afterRead",ibe="beforeMain",obe="main",lbe="afterMain",cbe="beforeWrite",dbe="write",ube="afterWrite",mbe=[abe,sbe,rbe,ibe,obe,lbe,cbe,dbe,ube];function $o(e){return e?(e.nodeName||"").toLowerCase():null}function Fr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Du(e){var t=Fr(e).Element;return e instanceof t||e instanceof Element}function gi(e){var t=Fr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function O4(e){if(typeof ShadowRoot>"u")return!1;var t=Fr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function fbe(e){var t=e.state;Object.keys(t.elements).forEach(function(a){var s=t.styles[a]||{},r=t.attributes[a]||{},i=t.elements[a];!gi(i)||!$o(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(o){var l=r[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function hbe(e){var t=e.state,a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.elements.arrow.style,a.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:a[s]),l=o.reduce(function(c,d){return c[d]="",c},{});!gi(r)||!$o(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const gbe={name:"applyStyles",enabled:!0,phase:"write",fn:fbe,effect:hbe,requires:["computeStyles"]};function ko(e){return e.split("-")[0]}var bu=Math.max,Dv=Math.min,Pf=Math.round;function vE(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function lV(){return!/^((?!chrome|android).)*safari/i.test(vE())}function Df(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&gi(e)&&(r=e.offsetWidth>0&&Pf(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Pf(s.height)/e.offsetHeight||1);var o=Du(e)?Fr(e):window,l=o.visualViewport,c=!lV()&&a,d=(s.left+(c&&l?l.offsetLeft:0))/r,u=(s.top+(c&&l?l.offsetTop:0))/i,h=s.width/r,p=s.height/i;return{width:h,height:p,top:u,right:d+h,bottom:u+p,left:d,x:d,y:u}}function M4(e){var t=Df(e),a=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:s}}function cV(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(a&&O4(a)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Bl(e){return Fr(e).getComputedStyle(e)}function pbe(e){return["table","td","th"].indexOf($o(e))>=0}function Cd(e){return((Du(e)?e.ownerDocument:e.document)||window.document).documentElement}function KN(e){return $o(e)==="html"?e:e.assignedSlot||e.parentNode||(O4(e)?e.host:null)||Cd(e)}function P6(e){return!gi(e)||Bl(e).position==="fixed"?null:e.offsetParent}function xbe(e){var t=/firefox/i.test(vE()),a=/Trident/i.test(vE());if(a&&gi(e)){var s=Bl(e);if(s.position==="fixed")return null}var r=KN(e);for(O4(r)&&(r=r.host);gi(r)&&["html","body"].indexOf($o(r))<0;){var i=Bl(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Px(e){for(var t=Fr(e),a=P6(e);a&&pbe(a)&&Bl(a).position==="static";)a=P6(a);return a&&($o(a)==="html"||$o(a)==="body"&&Bl(a).position==="static")?t:a||xbe(e)||t}function I4(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Yg(e,t,a){return bu(e,Dv(t,a))}function ybe(e,t,a){var s=Yg(e,t,a);return s>a?a:s}function dV(){return{top:0,right:0,bottom:0,left:0}}function uV(e){return Object.assign({},dV(),e)}function mV(e,t){return t.reduce(function(a,s){return a[s]=e,a},{})}var bbe=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,uV(typeof t!="number"?t:mV(t,Lx))};function vbe(e){var t,a=e.state,s=e.name,r=e.options,i=a.elements.arrow,o=a.modifiersData.popperOffsets,l=ko(a.placement),c=I4(l),d=[fr,yi].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var h=bbe(r.padding,a),p=M4(i),x=c==="y"?mr:fr,b=c==="y"?xi:yi,N=a.rects.reference[u]+a.rects.reference[c]-o[c]-a.rects.popper[u],v=o[c]-a.rects.reference[c],j=Px(i),w=j?c==="y"?j.clientHeight||0:j.clientWidth||0:0,S=N/2-v/2,A=h[x],E=w-p[u]-h[b],_=w/2-p[u]/2+S,k=Yg(A,_,E),T=c;a.modifiersData[s]=(t={},t[T]=k,t.centerOffset=k-_,t)}}function wbe(e){var t=e.state,a=e.options,s=a.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||cV(t.elements.popper,r)&&(t.elements.arrow=r))}const Nbe={name:"arrow",enabled:!0,phase:"main",fn:vbe,effect:wbe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Of(e){return e.split("-")[1]}var jbe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Cbe(e,t){var a=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Pf(a*r)/r||0,y:Pf(s*r)/r||0}}function D6(e){var t,a=e.popper,s=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,h=e.isFixed,p=o.x,x=p===void 0?0:p,b=o.y,N=b===void 0?0:b,v=typeof u=="function"?u({x,y:N}):{x,y:N};x=v.x,N=v.y;var j=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),S=fr,A=mr,E=window;if(d){var _=Px(a),k="clientHeight",T="clientWidth";if(_===Fr(a)&&(_=Cd(a),Bl(_).position!=="static"&&l==="absolute"&&(k="scrollHeight",T="scrollWidth")),_=_,r===mr||(r===fr||r===yi)&&i===jp){A=xi;var O=h&&_===E&&E.visualViewport?E.visualViewport.height:_[k];N-=O-s.height,N*=c?1:-1}if(r===fr||(r===mr||r===xi)&&i===jp){S=yi;var $=h&&_===E&&E.visualViewport?E.visualViewport.width:_[T];x-=$-s.width,x*=c?1:-1}}var R=Object.assign({position:l},d&&jbe),P=u===!0?Cbe({x,y:N},Fr(a)):{x,y:N};if(x=P.x,N=P.y,c){var I;return Object.assign({},R,(I={},I[A]=w?"0":"",I[S]=j?"0":"",I.transform=(E.devicePixelRatio||1)<=1?"translate("+x+"px, "+N+"px)":"translate3d("+x+"px, "+N+"px, 0)",I))}return Object.assign({},R,(t={},t[A]=w?N+"px":"",t[S]=j?x+"px":"",t.transform="",t))}function Sbe(e){var t=e.state,a=e.options,s=a.gpuAcceleration,r=s===void 0?!0:s,i=a.adaptive,o=i===void 0?!0:i,l=a.roundOffsets,c=l===void 0?!0:l,d={placement:ko(t.placement),variation:Of(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,D6(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,D6(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const _be={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Sbe,data:{}};var Uy={passive:!0};function Abe(e){var t=e.state,a=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,l=o===void 0?!0:o,c=Fr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",a.update,Uy)}),l&&c.addEventListener("resize",a.update,Uy),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",a.update,Uy)}),l&&c.removeEventListener("resize",a.update,Uy)}}const Tbe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Abe,data:{}};var Ebe={left:"right",right:"left",bottom:"top",top:"bottom"};function Gb(e){return e.replace(/left|right|bottom|top/g,function(t){return Ebe[t]})}var kbe={start:"end",end:"start"};function O6(e){return e.replace(/start|end/g,function(t){return kbe[t]})}function $4(e){var t=Fr(e),a=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:a,scrollTop:s}}function R4(e){return Df(Cd(e)).left+$4(e).scrollLeft}function Lbe(e,t){var a=Fr(e),s=Cd(e),r=a.visualViewport,i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;var d=lV();(d||!d&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l+R4(e),y:c}}function Pbe(e){var t,a=Cd(e),s=$4(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=bu(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=bu(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+R4(e),c=-s.scrollTop;return Bl(r||a).direction==="rtl"&&(l+=bu(a.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function z4(e){var t=Bl(e),a=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+s)}function fV(e){return["html","body","#document"].indexOf($o(e))>=0?e.ownerDocument.body:gi(e)&&z4(e)?e:fV(KN(e))}function Qg(e,t){var a;t===void 0&&(t=[]);var s=fV(e),r=s===((a=e.ownerDocument)==null?void 0:a.body),i=Fr(s),o=r?[i].concat(i.visualViewport||[],z4(s)?s:[]):s,l=t.concat(o);return r?l:l.concat(Qg(KN(o)))}function wE(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Dbe(e,t){var a=Df(e,!1,t==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function M6(e,t,a){return t===iV?wE(Lbe(e,a)):Du(t)?Dbe(t,a):wE(Pbe(Cd(e)))}function Obe(e){var t=Qg(KN(e)),a=["absolute","fixed"].indexOf(Bl(e).position)>=0,s=a&&gi(e)?Px(e):e;return Du(s)?t.filter(function(r){return Du(r)&&cV(r,s)&&$o(r)!=="body"}):[]}function Mbe(e,t,a,s){var r=t==="clippingParents"?Obe(e):[].concat(t),i=[].concat(r,[a]),o=i[0],l=i.reduce(function(c,d){var u=M6(e,d,s);return c.top=bu(u.top,c.top),c.right=Dv(u.right,c.right),c.bottom=Dv(u.bottom,c.bottom),c.left=bu(u.left,c.left),c},M6(e,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function hV(e){var t=e.reference,a=e.element,s=e.placement,r=s?ko(s):null,i=s?Of(s):null,o=t.x+t.width/2-a.width/2,l=t.y+t.height/2-a.height/2,c;switch(r){case mr:c={x:o,y:t.y-a.height};break;case xi:c={x:o,y:t.y+t.height};break;case yi:c={x:t.x+t.width,y:l};break;case fr:c={x:t.x-a.width,y:l};break;default:c={x:t.x,y:t.y}}var d=r?I4(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Lf:c[d]=c[d]-(t[u]/2-a[u]/2);break;case jp:c[d]=c[d]+(t[u]/2-a[u]/2);break}}return c}function Cp(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=s===void 0?e.placement:s,i=a.strategy,o=i===void 0?e.strategy:i,l=a.boundary,c=l===void 0?tbe:l,d=a.rootBoundary,u=d===void 0?iV:d,h=a.elementContext,p=h===void 0?hg:h,x=a.altBoundary,b=x===void 0?!1:x,N=a.padding,v=N===void 0?0:N,j=uV(typeof v!="number"?v:mV(v,Lx)),w=p===hg?nbe:hg,S=e.rects.popper,A=e.elements[b?w:p],E=Mbe(Du(A)?A:A.contextElement||Cd(e.elements.popper),c,u,o),_=Df(e.elements.reference),k=hV({reference:_,element:S,placement:r}),T=wE(Object.assign({},S,k)),O=p===hg?T:_,$={top:E.top-O.top+j.top,bottom:O.bottom-E.bottom+j.bottom,left:E.left-O.left+j.left,right:O.right-E.right+j.right},R=e.modifiersData.offset;if(p===hg&&R){var P=R[r];Object.keys($).forEach(function(I){var H=[yi,xi].indexOf(I)>=0?1:-1,Q=[mr,xi].indexOf(I)>=0?"y":"x";$[I]+=P[Q]*H})}return $}function Ibe(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=a.boundary,i=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,d=c===void 0?oV:c,u=Of(s),h=u?l?L6:L6.filter(function(b){return Of(b)===u}):Lx,p=h.filter(function(b){return d.indexOf(b)>=0});p.length===0&&(p=h);var x=p.reduce(function(b,N){return b[N]=Cp(e,{placement:N,boundary:r,rootBoundary:i,padding:o})[ko(N)],b},{});return Object.keys(x).sort(function(b,N){return x[b]-x[N]})}function $be(e){if(ko(e)===D4)return[];var t=Gb(e);return[O6(e),t,O6(t)]}function Rbe(e){var t=e.state,a=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!0:o,c=a.fallbackPlacements,d=a.padding,u=a.boundary,h=a.rootBoundary,p=a.altBoundary,x=a.flipVariations,b=x===void 0?!0:x,N=a.allowedAutoPlacements,v=t.options.placement,j=ko(v),w=j===v,S=c||(w||!b?[Gb(v)]:$be(v)),A=[v].concat(S).reduce(function(be,le){return be.concat(ko(le)===D4?Ibe(t,{placement:le,boundary:u,rootBoundary:h,padding:d,flipVariations:b,allowedAutoPlacements:N}):le)},[]),E=t.rects.reference,_=t.rects.popper,k=new Map,T=!0,O=A[0],$=0;$<A.length;$++){var R=A[$],P=ko(R),I=Of(R)===Lf,H=[mr,xi].indexOf(P)>=0,Q=H?"width":"height",G=Cp(t,{placement:R,boundary:u,rootBoundary:h,altBoundary:p,padding:d}),K=H?I?yi:fr:I?xi:mr;E[Q]>_[Q]&&(K=Gb(K));var W=Gb(K),J=[];if(i&&J.push(G[P]<=0),l&&J.push(G[K]<=0,G[W]<=0),J.every(function(be){return be})){O=R,T=!1;break}k.set(R,J)}if(T)for(var Te=b?3:1,ee=function(le){var Ce=A.find(function(Se){var Oe=k.get(Se);if(Oe)return Oe.slice(0,le).every(function(ge){return ge})});if(Ce)return O=Ce,"break"},U=Te;U>0;U--){var je=ee(U);if(je==="break")break}t.placement!==O&&(t.modifiersData[s]._skip=!0,t.placement=O,t.reset=!0)}}const zbe={name:"flip",enabled:!0,phase:"main",fn:Rbe,requiresIfExists:["offset"],data:{_skip:!1}};function I6(e,t,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-t.height-a.y,right:e.right-t.width+a.x,bottom:e.bottom-t.height+a.y,left:e.left-t.width-a.x}}function $6(e){return[mr,yi,xi,fr].some(function(t){return e[t]>=0})}function Fbe(e){var t=e.state,a=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,o=Cp(t,{elementContext:"reference"}),l=Cp(t,{altBoundary:!0}),c=I6(o,s),d=I6(l,r,i),u=$6(c),h=$6(d);t.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const Ube={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Fbe};function Bbe(e,t,a){var s=ko(e),r=[fr,mr].indexOf(s)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},t,{placement:e})):a,o=i[0],l=i[1];return o=o||0,l=(l||0)*r,[fr,yi].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function Hbe(e){var t=e.state,a=e.options,s=e.name,r=a.offset,i=r===void 0?[0,0]:r,o=oV.reduce(function(u,h){return u[h]=Bbe(h,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=o}const qbe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Hbe};function Wbe(e){var t=e.state,a=e.name;t.modifiersData[a]=hV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Gbe={name:"popperOffsets",enabled:!0,phase:"read",fn:Wbe,data:{}};function Vbe(e){return e==="x"?"y":"x"}function Ybe(e){var t=e.state,a=e.options,s=e.name,r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!1:o,c=a.boundary,d=a.rootBoundary,u=a.altBoundary,h=a.padding,p=a.tether,x=p===void 0?!0:p,b=a.tetherOffset,N=b===void 0?0:b,v=Cp(t,{boundary:c,rootBoundary:d,padding:h,altBoundary:u}),j=ko(t.placement),w=Of(t.placement),S=!w,A=I4(j),E=Vbe(A),_=t.modifiersData.popperOffsets,k=t.rects.reference,T=t.rects.popper,O=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,$=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(_){if(i){var I,H=A==="y"?mr:fr,Q=A==="y"?xi:yi,G=A==="y"?"height":"width",K=_[A],W=K+v[H],J=K-v[Q],Te=x?-T[G]/2:0,ee=w===Lf?k[G]:T[G],U=w===Lf?-T[G]:-k[G],je=t.elements.arrow,be=x&&je?M4(je):{width:0,height:0},le=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:dV(),Ce=le[H],Se=le[Q],Oe=Yg(0,k[G],be[G]),ge=S?k[G]/2-Te-Oe-Ce-$.mainAxis:ee-Oe-Ce-$.mainAxis,He=S?-k[G]/2+Te+Oe+Se+$.mainAxis:U+Oe+Se+$.mainAxis,Ne=t.elements.arrow&&Px(t.elements.arrow),he=Ne?A==="y"?Ne.clientTop||0:Ne.clientLeft||0:0,Z=(I=R?.[A])!=null?I:0,_e=K+ge-Z-he,ke=K+He-Z,ze=Yg(x?Dv(W,_e):W,K,x?bu(J,ke):J);_[A]=ze,P[A]=ze-K}if(l){var tt,De=A==="x"?mr:fr,at=A==="x"?xi:yi,et=_[E],V=E==="y"?"height":"width",ne=et+v[De],se=et-v[at],Ee=[mr,fr].indexOf(j)!==-1,Ie=(tt=R?.[E])!=null?tt:0,pe=Ee?ne:et-k[V]-T[V]-Ie+$.altAxis,Be=Ee?et+k[V]+T[V]-Ie-$.altAxis:se,$e=x&&Ee?ybe(pe,et,Be):Yg(x?pe:ne,et,x?Be:se);_[E]=$e,P[E]=$e-et}t.modifiersData[s]=P}}const Qbe={name:"preventOverflow",enabled:!0,phase:"main",fn:Ybe,requiresIfExists:["offset"]};function Kbe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Xbe(e){return e===Fr(e)||!gi(e)?$4(e):Kbe(e)}function Zbe(e){var t=e.getBoundingClientRect(),a=Pf(t.width)/e.offsetWidth||1,s=Pf(t.height)/e.offsetHeight||1;return a!==1||s!==1}function Jbe(e,t,a){a===void 0&&(a=!1);var s=gi(t),r=gi(t)&&Zbe(t),i=Cd(t),o=Df(e,r,a),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!a)&&(($o(t)!=="body"||z4(i))&&(l=Xbe(t)),gi(t)?(c=Df(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=R4(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function eve(e){var t=new Map,a=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){a.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!a.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return e.forEach(function(i){a.has(i.name)||r(i)}),s}function tve(e){var t=eve(e);return mbe.reduce(function(a,s){return a.concat(t.filter(function(r){return r.phase===s}))},[])}function nve(e){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(e())})})),t}}function ave(e){var t=e.reduce(function(a,s){var r=a[s.name];return a[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,a},{});return Object.keys(t).map(function(a){return t[a]})}var R6={placement:"bottom",modifiers:[],strategy:"absolute"};function z6(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function sve(e){e===void 0&&(e={});var t=e,a=t.defaultModifiers,s=a===void 0?[]:a,r=t.defaultOptions,i=r===void 0?R6:r;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},R6,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],p=!1,x={state:u,setOptions:function(j){var w=typeof j=="function"?j(u.options):j;N(),u.options=Object.assign({},i,u.options,w),u.scrollParents={reference:Du(l)?Qg(l):l.contextElement?Qg(l.contextElement):[],popper:Qg(c)};var S=tve(ave([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(A){return A.enabled}),b(),x.update()},forceUpdate:function(){if(!p){var j=u.elements,w=j.reference,S=j.popper;if(z6(w,S)){u.rects={reference:Jbe(w,Px(S),u.options.strategy==="fixed"),popper:M4(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function($){return u.modifiersData[$.name]=Object.assign({},$.data)});for(var A=0;A<u.orderedModifiers.length;A++){if(u.reset===!0){u.reset=!1,A=-1;continue}var E=u.orderedModifiers[A],_=E.fn,k=E.options,T=k===void 0?{}:k,O=E.name;typeof _=="function"&&(u=_({state:u,options:T,name:O,instance:x})||u)}}}},update:nve(function(){return new Promise(function(v){x.forceUpdate(),v(u)})}),destroy:function(){N(),p=!0}};if(!z6(l,c))return x;x.setOptions(d).then(function(v){!p&&d.onFirstUpdate&&d.onFirstUpdate(v)});function b(){u.orderedModifiers.forEach(function(v){var j=v.name,w=v.options,S=w===void 0?{}:w,A=v.effect;if(typeof A=="function"){var E=A({state:u,name:j,instance:x,options:S}),_=function(){};h.push(E||_)}})}function N(){h.forEach(function(v){return v()}),h=[]}return x}}var rve=[Tbe,Gbe,_be,gbe,qbe,zbe,Qbe,Nbe,Ube],ive=sve({defaultModifiers:rve});function F6(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function ove(e){return typeof e=="function"?e():e}const lve=f.forwardRef(function(t,a){const{children:s,container:r,disablePortal:i=!1}=t,[o,l]=f.useState(null),c=Io(f.isValidElement(s)?U9(s):null,a);if(ss(()=>{i||l(ove(r)||document.body)},[r,i]),ss(()=>{if(o&&!i)return F6(a,o),()=>{F6(a,null)}},[a,o,i]),i){if(f.isValidElement(s)){const d={ref:c};return f.cloneElement(s,d)}return s}return o&&Bi.createPortal(s,o)});function cve(e){return Ga("MuiPopper",e)}_a("MuiPopper",["root"]);function dve(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function NE(e){return typeof e=="function"?e():e}function uve(e){return e.nodeType!==void 0}const mve=e=>{const{classes:t}=e;return Wa({root:["root"]},cve,t)},fve={},hve=f.forwardRef(function(t,a){const{anchorEl:s,children:r,direction:i,disablePortal:o,modifiers:l,open:c,placement:d,popperOptions:u,popperRef:h,slotProps:p={},slots:x={},TransitionProps:b,ownerState:N,...v}=t,j=f.useRef(null),w=Io(j,a),S=f.useRef(null),A=Io(S,h),E=f.useRef(A);ss(()=>{E.current=A},[A]),f.useImperativeHandle(h,()=>S.current,[]);const _=dve(d,i),[k,T]=f.useState(_),[O,$]=f.useState(NE(s));f.useEffect(()=>{S.current&&S.current.forceUpdate()}),f.useEffect(()=>{s&&$(NE(s))},[s]),ss(()=>{if(!O||!c)return;const Q=W=>{T(W.placement)};let G=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:W})=>{Q(W)}}];l!=null&&(G=G.concat(l)),u&&u.modifiers!=null&&(G=G.concat(u.modifiers));const K=ive(O,j.current,{placement:_,...u,modifiers:G});return E.current(K),()=>{K.destroy(),E.current(null)}},[O,o,l,c,u,_]);const R={placement:k};b!==null&&(R.TransitionProps=b);const P=mve(t),I=x.root??"div",H=$l({elementType:I,externalSlotProps:p.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:w},ownerState:t,className:P.root});return n.jsx(I,{...H,children:typeof r=="function"?r(R):r})}),gve=f.forwardRef(function(t,a){const{anchorEl:s,children:r,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:d,open:u,placement:h="bottom",popperOptions:p=fve,popperRef:x,style:b,transition:N=!1,slotProps:v={},slots:j={},...w}=t,[S,A]=f.useState(!0),E=()=>{A(!1)},_=()=>{A(!0)};if(!c&&!u&&(!N||S))return null;let k;if(i)k=i;else if(s){const $=NE(s);k=$&&uve($)?YT($).body:YT(null).body}const T=!u&&c&&(!N||S)?"none":void 0,O=N?{in:u,onEnter:E,onExited:_}:void 0;return n.jsx(lve,{disablePortal:l,container:k,children:n.jsx(hve,{anchorEl:s,direction:o,disablePortal:l,modifiers:d,ref:a,open:N?!S:u,placement:h,popperOptions:p,popperRef:x,slotProps:v,slots:j,...w,style:{position:"fixed",top:0,left:0,display:T,...b},TransitionProps:O,children:r})})}),pve=un(gve,{name:"MuiPopper",slot:"Root"})({}),xve=f.forwardRef(function(t,a){const s=fx(),r=bd({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:d,disablePortal:u,keepMounted:h,modifiers:p,open:x,placement:b,popperOptions:N,popperRef:v,transition:j,slots:w,slotProps:S,...A}=r,E=w?.root??l?.Root,_={anchorEl:i,container:d,disablePortal:u,keepMounted:h,modifiers:p,open:x,placement:b,popperOptions:N,popperRef:v,transition:j,...A};return n.jsx(pve,{as:o,direction:s?"rtl":"ltr",slots:{root:E},slotProps:S??c,..._,ref:a})});function yve(e){const{children:t,defer:a=!1,fallback:s=null}=e,[r,i]=f.useState(!1);return ss(()=>{a||i(!0)},[a]),f.useEffect(()=>{a&&i(!0)},[a]),r?t:s}function U6(e){let t,a;const s=()=>{a=null,e(...t)};function r(...i){t=i,a||(a=requestAnimationFrame(s))}return r.clear=()=>{a&&(cancelAnimationFrame(a),a=null)},r}function bve(){const e=Yn(),t=Ut(e,fG),a=Ut(e,qo);return t!==void 0?"polar":a!==void 0?"cartesian":"none"}const vve=["trigger","position","anchor","classes","children"],B6=()=>!1;function wve(e,t,a){return a?B6:e==="item"?Dge:t==="polar"?Xye:t==="cartesian"?Rge:B6}const Nve=un(xve,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function jve(e){const t=Si({props:e,name:"MuiChartsTooltipContainer"}),{trigger:a="axis",position:s,anchor:r="pointer",classes:i,children:o}=t,l=xn(t,vve),c=w4(),d=QN(i),u=Gye(),h=Qye(),p=f.useRef(null),x=uN(()=>({x:0,y:0})),b=bve(),N=Yn(),v=Ut(N,Gge),j=Ut(N,wve(a,b,v)),S=Ut(N,Cx)==="keyboard"?"node":r,A=Ut(N,a==="item"&&S==="node"?Oge:()=>null,s);f.useEffect(()=>{const O=c.current;if(O===null)return()=>{};if(A!==null){const P=U6(()=>{x.current={x:O.getBoundingClientRect().left+(A?.x??0),y:O.getBoundingClientRect().top+(A?.y??0)},p.current?.update()});return P(),()=>P.clear()}const $=U6((P,I)=>{x.current={x:P,y:I},p.current?.update()}),R=P=>{$(P.clientX,P.clientY)};return O.addEventListener("pointerdown",R),O.addEventListener("pointermove",R),O.addEventListener("pointerenter",R),()=>{O.removeEventListener("pointerdown",R),O.removeEventListener("pointermove",R),O.removeEventListener("pointerenter",R),$.clear()}},[c,x,A]);const E=f.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),_=u?.pointerType==="mouse"||h,k=u?.pointerType==="touch"||!h,T=f.useMemo(()=>[{name:"offset",options:{offset:()=>k?[0,64]:[0,8]}},..._?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[_,k]);return a==="none"?null:n.jsx(yve,{children:j&&n.jsx(Nve,Ye({},l,{className:d?.root,open:j,placement:l.placement??s??(_?"right-start":"top"),popperRef:p,anchorEl:E,modifiers:T,children:o}))})}function Cve(e){const{classes:t,trigger:a="axis"}=e,s=QN(t);return n.jsx(jve,Ye({},e,{classes:t,children:a==="axis"?n.jsx(ebe,{classes:s}):n.jsx(Hye,{classes:s})}))}const Sve=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function _ve(e){return Ga("MuiChartsLegend",e)}const Ave=e=>{const{classes:t,direction:a}=e;return Wa({root:["root",a],item:["item"],mark:["mark"],label:["label"],series:["series"]},_ve,t)},H6=_a("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),Tve=["slots","slotProps"],Eve=["ownerState"],kve=(e,t,a,s)=>{function r(i,o){const l=Si({props:i,name:e}),c=typeof a.defaultProps=="function"?a.defaultProps(l):a.defaultProps??{},d=Eu(c,l),u=d,{slots:h,slotProps:p}=u,x=xn(u,Tve),b=Ho(),N=a.classesResolver?.(d,b),v=h?.[t]??s,j=a.propagateSlots&&!h?.[t],w=$l({elementType:v,externalSlotProps:p?.[t],additionalProps:Ye({},x,{classes:N},j&&{slots:h,slotProps:p}),ownerState:{}}),S=xn(w,Eve),A=Ye({},S);for(const E of a.omitProps??[])delete A[E];return n.jsx(v,Ye({},A,{ref:o}))}return f.forwardRef(r)};function Lve(e){return Ga("MuiChartsLabel",e)}_a("MuiChartsLabel",["root"]);const Pve=e=>Wa({root:["root"]},Lve,e.classes),Dve=["children","className","classes"],Ove=JG("MuiChartsLabel",{classesResolver:Pve},function(t,a){const{children:s,className:r,classes:i}=t,o=xn(t,Dve);return n.jsx("span",Ye({className:Pt(i?.root,r),ref:a},o,{children:s}))}),Mve=["direction","onItemClick","className","classes"],Ive=un("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>Ye({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${H6.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${H6.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),$ve=kve("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Ave},f.forwardRef(function(t,a){const s=nxe(),{onItemClick:r,className:i,classes:o}=t,l=xn(t,Mve);if(s.items.length===0)return null;const c=r?"button":"div";return n.jsx(Ive,Ye({className:Pt(o?.root,i),ref:a},l,{ownerState:t,children:s.items.map((d,u)=>n.jsx("li",{className:o?.item,"data-series":d.id,children:n.jsxs(c,{className:o?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(h=>r(h,Sve(d),u)):void 0,children:[n.jsx(Pv,{className:o?.mark,color:d.color,type:d.markType}),n.jsx(Ove,{className:o?.label,children:d.label})]})},d.id))}))}));function Rve(e){return Ga("MuiChartsAxisHighlight",e)}_a("MuiChartsAxisHighlight",["root"]);const Ov=un("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:Ye({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:Ye({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function zve(e){const{type:t,classes:a}=e,{left:s,width:r}=Ai(),i=Yn(),o=Ut(i,Yge),l=Ut(i,Xs);return o.length===0?null:o.map(({axisId:c,value:d})=>{const h=l.axis[c].scale,p=Zf(h),x=t==="band"&&d!==null&&ys(h);return n.jsxs(f.Fragment,{children:[x&&h(d)!==void 0&&n.jsx(Ov,{d:`M ${s} ${h(d)-(h.step()-h.bandwidth())/2} l 0 ${h.step()} l ${r} 0 l 0 ${-h.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Ov,{d:`M ${s} ${p(d)} L ${s+r} ${p(d)}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Fve(e){const{type:t,classes:a}=e,{top:s,height:r}=Ai(),i=Yn(),o=Ut(i,Vge),l=Ut(i,Ks);return o.length===0?null:o.map(({axisId:c,value:d})=>{const h=l.axis[c].scale,p=Zf(h),x=t==="band"&&d!==null&&ys(h);return n.jsxs(f.Fragment,{children:[x&&h(d)!==void 0&&n.jsx(Ov,{d:`M ${h(d)-(h.step()-h.bandwidth())/2} ${s} l ${h.step()} 0 l 0 ${r} l ${-h.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Ov,{d:`M ${p(d)} ${s} L ${p(d)} ${s+r}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const Uve=()=>Wa({root:["root"]},Rve);function Bve(e){const{x:t,y:a}=e,s=Uve();return n.jsxs(f.Fragment,{children:[t&&t!=="none"&&n.jsx(Fve,{type:t,classes:s}),a&&a!=="none"&&n.jsx(zve,{type:a,classes:s})]})}function Hve(e){const{id:t,offset:a}=e,{left:s,top:r,width:i,height:o}=Ai(),l=Ye({top:0,right:0,bottom:0,left:0},a);return n.jsx("clipPath",{id:t,children:n.jsx("rect",{x:s-l.left,y:r-l.top,width:i+l.left+l.right,height:o+l.top+l.bottom})})}const qve=parseInt(f.version,10),Wve=["x","y","id","classes","color","shape"];function Gve(e){return Ga("MuiHighlightElement",e)}_a("MuiHighlightElement",["root"]);const Vve=e=>{const{classes:t,id:a}=e,s={root:["root",`series-${a}`]};return Wa(s,Gve,t)};function Yve(e){const{x:t,y:a,color:s,shape:r}=e,i=xn(e,Wve),o=Vve(e),l=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:g4(qW[LG(r)])()},d=qve>18?{transformOrigin:`${t} ${a}`}:{"transform-origin":`${t} ${a}`};return n.jsx(l,Ye({pointerEvents:"none",className:o.root,transform:`translate(${t} ${a})`,fill:s},d,c,i))}const Qve=["slots","slotProps"];function Kve(e){const{slots:t,slotProps:a}=e,s=xn(e,Qve),r=Ex(),{xAxis:i,xAxisIds:o}=xr(),{yAxis:l,yAxisIds:c}=yr(),{instance:d}=Wr(),u=Yn(),h=Ut(u,NW);if(h.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,b=o[0],N=c[0],v=t?.lineHighlight??Yve;return n.jsx("g",Ye({},s,{children:h.flatMap(({dataIndex:j,axisId:w})=>x.flatMap(({ids:S})=>S.flatMap(A=>{const{xAxisId:E=b,yAxisId:_=N,stackedData:k,data:T,disableHighlight:O,shape:$="circle"}=p[A];if(O||T[j]==null||w!==E)return null;const R=Zf(i[E].scale),P=l[_].scale,I=i[E].data;if(I===void 0)throw new Error(`MUI X Charts: ${E===fN?"The first `xAxis`":`The x-axis with id "${E}"`} should have data property to be able to display a line plot.`);const H=R(I[j]),Q=P(k[j][1]);if(!d.isPointInside(H,Q))return null;const G=_4(p[A],i[E],l[_]);return n.jsx(v,Ye({id:A,color:G(j),x:H,y:Q,shape:$},a?.lineHighlight),`${A}`)})))}))}function Xve(e){return Ga("MuiChartsGrid",e)}const q6=_a("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),Zve=un("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${q6.verticalLine}`]:t.verticalLine},{[`&.${q6.horizontalLine}`]:t.horizontalLine},t.root]})({}),gV=un("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Jve(e){const{instance:t}=Wr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=VN({scale:o,tickNumber:l,tickInterval:c,direction:"x"});return n.jsx(f.Fragment,{children:d.map(({value:u,offset:h})=>t.isXInside(h)?n.jsx(gV,{y1:s,y2:r,x1:h,x2:h,className:i.verticalLine},`vertical-${u?.getTime?.()??u}`):null)})}function ewe(e){const{instance:t}=Wr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=VN({scale:o,tickNumber:l,tickInterval:c,direction:"y"});return n.jsx(f.Fragment,{children:d.map(({value:u,offset:h})=>t.isYInside(h)?n.jsx(gV,{y1:h,y2:h,x1:s,x2:r,className:i.horizontalLine},`horizontal-${u?.getTime?.()??u}`):null)})}const twe=["vertical","horizontal"],nwe=({classes:e})=>Wa({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},Xve,e);function awe(e){const t=Si({props:e,name:"MuiChartsGrid"}),a=Ai(),{vertical:s,horizontal:r}=t,i=xn(t,twe),{xAxis:o,xAxisIds:l}=xr(),{yAxis:c,yAxisIds:d}=yr(),u=nwe(t),h=c[d[0]],p=o[l[0]];return n.jsxs(Zve,Ye({},i,{className:u.root,children:[s&&n.jsx(Jve,{axis:p,start:a.top,end:a.height+a.top,classes:u}),r&&n.jsx(ewe,{axis:h,start:a.left,end:a.width+a.left,classes:u})]}))}const swe=["message"],rwe=un("text")(({theme:e})=>Ye({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function iwe(e){const{message:t}=e,a=xn(e,swe),{top:s,left:r,height:i,width:o}=Ai(),{localeText:l}=CG();return n.jsx(rwe,Ye({x:r+o/2,y:s+i/2},a,{children:t??l.loading}))}const owe=["message"],lwe=un("text")(({theme:e})=>Ye({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function cwe(e){const{message:t}=e,a=xn(e,owe),{top:s,left:r,height:i,width:o}=Ai(),{localeText:l}=CG();return n.jsx(lwe,Ye({x:r+o/2,y:s+i/2},a,{children:t??l.noData}))}function dwe(){const e=BN();return Object.values(e).every(t=>{if(!t)return!0;const{series:a,seriesOrder:s}=t;return s.every(r=>{const i=a[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function uwe(e){const t=dwe();if(e.loading){const a=e.slots?.loadingOverlay??iwe;return n.jsx(a,Ye({},e.slotProps?.loadingOverlay))}if(t){const a=e.slots?.noDataOverlay??cwe;return n.jsx(a,Ye({},e.slotProps?.noDataOverlay))}return null}const mwe=[_x,Sx,wx,Kf,Ax,PN],fwe=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],hwe=e=>{const{xAxis:t,yAxis:a,series:s,width:r,height:i,margin:o,colors:l,dataset:c,sx:d,onAreaClick:u,onLineClick:h,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:b,grid:N,children:v,slots:j,slotProps:w,skipAnimation:S,loading:A,highlightedItem:E,onHighlightChange:_,className:k,brushConfig:T}=e,O=xn(e,fwe),R=`${oN()}-clip-path`,P=f.useMemo(()=>s.map(Ce=>Ye({disableHighlight:!!b,type:"line"},Ce)),[b,s]),I=Ye({},O,{series:P,width:r,height:i,margin:o,colors:l,dataset:c,xAxis:t??[{id:fN,scaleType:"point",data:Array.from({length:Math.max(...s.map(Ce=>(Ce.data??c??[]).length))},(Ce,Se)=>Se)}],yAxis:a,highlightedItem:E,onHighlightChange:_,disableAxisListener:w?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:k,skipAnimation:S,brushConfig:T,plugins:mwe}),H={vertical:N?.vertical,horizontal:N?.horizontal},Q={clipPath:`url(#${R})`},G={id:R},K={slots:j,slotProps:w,onItemClick:u},W={slots:j,slotProps:w,onItemClick:h},J={slots:j,slotProps:w,onItemClick:p,skipAnimation:S},Te={slots:j,slotProps:w,loading:A},ee={slots:j,slotProps:w},U=Ye({x:"line"},x),je={slots:j,slotProps:w},be={slots:j,slotProps:w};return{chartsWrapperProps:{sx:d,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:I,gridProps:H,clipPathProps:G,clipPathGroupProps:Q,areaPlotProps:K,linePlotProps:W,markPlotProps:J,overlayProps:Te,chartsAxisProps:ee,axisHighlightProps:U,lineHighlightPlotProps:je,legendProps:be,children:v}};function gwe(e,t,a,s,r,i,o,l,c,d,u,h=1/0,p=1){const x=s.copy(),b=r.copy();x.range([0,1]),b.range([0,1]);const N=function(T){const O=x(a[T].x),$=b(a[T].y);return O>=i&&O<=o&&$>=l&&$<=c},v=s.range()[1]-s.range()[0],j=r.range()[1]-r.range()[0],w=v*v,S=j*j;function A(k,T){return w*k*k+S*T*T}const E=x(W6(s,d,k=>a[k]?.x)),_=b(W6(r,u,k=>a[k]?.y));return e.neighbors(E,_,p,h!=null?h*h:1/0,N,A)}function W6(e,t,a){if(ys(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a(s)}return e.invert(t)}const XN=({svgRef:e,params:t,store:a,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:o}=t,l=Ut(a,pr),{axis:c,axisIds:d}=Ut(a,Ks),{axis:u,axisIds:h}=Ut(a,Xs),p=Ut(a,eW),{series:x,seriesOrder:b}=Ut(a,xa)?.scatter??{},N=Ut(a,p?yge:bge),v=d[0],j=h[0];ss(()=>{a.set("voronoi",{isVoronoiEnabled:!r})},[a,r]),f.useEffect(()=>{if(e.current===null||r)return;const A=e.current;function E(H){const Q=wp(A,H);if(!s.isPointInside(Q.x,Q.y))return"outside-chart";let G;for(const K of b??[]){const W=(x??{})[K],J=N.get(K);if(!J)continue;const Te=W.xAxisId??v,ee=W.yAxisId??j,U=u6(a.getSnapshot(),Te),je=u6(a.getSnapshot(),ee),be=i==="item"?W.markerSize:i,le=(U?.start??0)/100,Ce=(U?.end??100)/100,Se=(je?.start??0)/100,Oe=(je?.end??100)/100,ge=c[Te].scale,He=u[ee].scale,Ne=gwe(J,l,W.data,ge,He,le,Ce,Se,Oe,Q.x,Q.y,be)[0];if(Ne===void 0)continue;const he=W.data[Ne],Z=ge(he.x),_e=He(he.y),ke=(Z-Q.x)**2+(_e-Q.y)**2;(G===void 0||ke<G.distanceSq)&&(G={dataIndex:Ne,seriesId:K,distanceSq:ke})}return G===void 0?"no-point-found":{seriesId:G.seriesId,dataIndex:G.dataIndex}}const _=s.addInteractionListener("moveEnd",H=>{H.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),k=s.addInteractionListener("panEnd",H=>{H.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),T=s.addInteractionListener("quickPressEnd",H=>{!H.detail.activeGestures.move&&!H.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),O=H=>{const Q=E(H.detail.srcEvent);if(Q==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(Q==="outside-voronoi-max-radius"||Q==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:G,dataIndex:K}=Q;s.setItemInteraction?.({type:"scatter",seriesId:G,dataIndex:K},{interaction:"pointer"}),s.setHighlight?.({seriesId:G,dataIndex:K})},$=s.addInteractionListener("tap",H=>{const Q=E(H.detail.srcEvent);if(typeof Q!="string"&&o){const{seriesId:G,dataIndex:K}=Q;o(H.detail.srcEvent,{type:"scatter",seriesId:G,dataIndex:K})}}),R=s.addInteractionListener("move",O),P=s.addInteractionListener("pan",O),I=s.addInteractionListener("quickPress",O);return()=>{$.cleanup(),R.cleanup(),_.cleanup(),P.cleanup(),k.cleanup(),I.cleanup(),T.cleanup()}},[e,u,c,i,o,r,l,s,b,x,N,v,j,a]);const w=hs(()=>{a.set("voronoi",{isVoronoiEnabled:!0})}),S=hs(()=>{a.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:w,disableVoronoi:S}}};XN.getDefaultizedParams=({params:e})=>Ye({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});XN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});XN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const pV=[_x,Sx,wx,Kf,Ax,XN,PN],pwe=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],xwe=(e,t)=>{const a=e,{width:s,height:r,margin:i,children:o,series:l,colors:c,dataset:d,desc:u,onAxisClick:h,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:b,voronoiMaxRadius:N,onItemClick:v,disableAxisListener:j,highlightedItem:w,onHighlightChange:S,sx:A,title:E,xAxis:_,yAxis:k,zAxis:T,rotationAxis:O,radiusAxis:$,skipAnimation:R,seriesConfig:P,plugins:I,localeText:H,slots:Q,slotProps:G,experimentalFeatures:K,enableKeyboardNavigation:W,brushConfig:J}=a,Te=xn(a,pwe),ee=Ye({title:E,desc:u,sx:A,ref:t},Te);return{chartDataProviderProps:{margin:i,series:l,colors:c,dataset:d,disableAxisListener:j,highlightedItem:w,onHighlightChange:S,onAxisClick:h,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:b,voronoiMaxRadius:N,onItemClick:v,xAxis:_,yAxis:k,zAxis:T,rotationAxis:O,radiusAxis:$,skipAnimation:R,width:s,height:r,localeText:H,seriesConfig:P,experimentalFeatures:K,enableKeyboardNavigation:W,brushConfig:J,plugins:I??pV,slots:Q,slotProps:G},chartsSurfaceProps:ee,children:o}};function G6(e){try{return e.matches(":focus-visible")}catch{}return!1}class Mv{static create(){return new Mv}static use(){const t=uN(Mv.create).current,[a,s]=f.useState(!1);return t.shouldMount=a,t.setShouldMount=s,f.useEffect(t.mountEffect,[a]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=bwe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function ywe(){return Mv.use()}function bwe(){let e,t;const a=new Promise((s,r)=>{e=s,t=r});return a.resolve=e,a.reject=t,a}class F4{static create(){return new F4}currentId=null;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function vwe(){const e=uN(F4.create).current;return V9(e.disposeEffect),e}function wwe(e){const{className:t,classes:a,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:d}=e,[u,h]=f.useState(!1),p=Pt(t,a.ripple,a.rippleVisible,s&&a.ripplePulsate),x={width:o,height:o,top:-(o/2)+i,left:-(o/2)+r},b=Pt(a.child,u&&a.childLeaving,s&&a.childPulsate);return!l&&!u&&h(!0),f.useEffect(()=>{if(!l&&c!=null){const N=setTimeout(c,d);return()=>{clearTimeout(N)}}},[c,l,d]),n.jsx("span",{className:p,style:x,children:n.jsx("span",{className:b})})}const ci=_a("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),jE=550,Nwe=80,jwe=mx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Cwe=mx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Swe=mx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,_we=un("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Awe=un(wwe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ci.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${jwe};
    animation-duration: ${jE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ci.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ci.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ci.childLeaving} {
    opacity: 0;
    animation-name: ${Cwe};
    animation-duration: ${jE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ci.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Swe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Twe=f.forwardRef(function(t,a){const s=bd({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...l}=s,[c,d]=f.useState([]),u=f.useRef(0),h=f.useRef(null);f.useEffect(()=>{h.current&&(h.current(),h.current=null)},[c]);const p=f.useRef(!1),x=vwe(),b=f.useRef(null),N=f.useRef(null),v=f.useCallback(A=>{const{pulsate:E,rippleX:_,rippleY:k,rippleSize:T,cb:O}=A;d($=>[...$,n.jsx(Awe,{classes:{ripple:Pt(i.ripple,ci.ripple),rippleVisible:Pt(i.rippleVisible,ci.rippleVisible),ripplePulsate:Pt(i.ripplePulsate,ci.ripplePulsate),child:Pt(i.child,ci.child),childLeaving:Pt(i.childLeaving,ci.childLeaving),childPulsate:Pt(i.childPulsate,ci.childPulsate)},timeout:jE,pulsate:E,rippleX:_,rippleY:k,rippleSize:T},u.current)]),u.current+=1,h.current=O},[i]),j=f.useCallback((A={},E={},_=()=>{})=>{const{pulsate:k=!1,center:T=r||E.pulsate,fakeElement:O=!1}=E;if(A?.type==="mousedown"&&p.current){p.current=!1;return}A?.type==="touchstart"&&(p.current=!0);const $=O?null:N.current,R=$?$.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,I,H;if(T||A===void 0||A.clientX===0&&A.clientY===0||!A.clientX&&!A.touches)P=Math.round(R.width/2),I=Math.round(R.height/2);else{const{clientX:Q,clientY:G}=A.touches&&A.touches.length>0?A.touches[0]:A;P=Math.round(Q-R.left),I=Math.round(G-R.top)}if(T)H=Math.sqrt((2*R.width**2+R.height**2)/3),H%2===0&&(H+=1);else{const Q=Math.max(Math.abs(($?$.clientWidth:0)-P),P)*2+2,G=Math.max(Math.abs(($?$.clientHeight:0)-I),I)*2+2;H=Math.sqrt(Q**2+G**2)}A?.touches?b.current===null&&(b.current=()=>{v({pulsate:k,rippleX:P,rippleY:I,rippleSize:H,cb:_})},x.start(Nwe,()=>{b.current&&(b.current(),b.current=null)})):v({pulsate:k,rippleX:P,rippleY:I,rippleSize:H,cb:_})},[r,v,x]),w=f.useCallback(()=>{j({},{pulsate:!0})},[j]),S=f.useCallback((A,E)=>{if(x.clear(),A?.type==="touchend"&&b.current){b.current(),b.current=null,x.start(0,()=>{S(A,E)});return}b.current=null,d(_=>_.length>0?_.slice(1):_),h.current=E},[x]);return f.useImperativeHandle(a,()=>({pulsate:w,start:j,stop:S}),[w,j,S]),n.jsx(_we,{className:Pt(ci.root,i.root,o),ref:N,...l,children:n.jsx(NL,{component:null,exit:!0,children:c})})});function Ewe(e){return Ga("MuiButtonBase",e)}const kwe=_a("MuiButtonBase",["root","disabled","focusVisible"]),Lwe=e=>{const{disabled:t,focusVisible:a,focusVisibleClassName:s,classes:r}=e,o=Wa({root:["root",t&&"disabled",a&&"focusVisible"]},Ewe,r);return a&&s&&(o.root+=` ${s}`),o},Pwe=un("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${kwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),xV=f.forwardRef(function(t,a){const s=bd({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:b="a",onBlur:N,onClick:v,onContextMenu:j,onDragLeave:w,onFocus:S,onFocusVisible:A,onKeyDown:E,onKeyUp:_,onMouseDown:k,onMouseLeave:T,onMouseUp:O,onTouchEnd:$,onTouchMove:R,onTouchStart:P,tabIndex:I=0,TouchRippleProps:H,touchRippleRef:Q,type:G,...K}=s,W=f.useRef(null),J=ywe(),Te=Io(J.ref,Q),[ee,U]=f.useState(!1);d&&ee&&U(!1),f.useImperativeHandle(r,()=>({focusVisible:()=>{U(!0),W.current.focus()}}),[]);const je=J.shouldMount&&!u&&!d;f.useEffect(()=>{ee&&p&&!u&&J.pulsate()},[u,p,ee,J]);const be=fl(J,"start",k,h),le=fl(J,"stop",j,h),Ce=fl(J,"stop",w,h),Se=fl(J,"stop",O,h),Oe=fl(J,"stop",ne=>{ee&&ne.preventDefault(),T&&T(ne)},h),ge=fl(J,"start",P,h),He=fl(J,"stop",$,h),Ne=fl(J,"stop",R,h),he=fl(J,"stop",ne=>{G6(ne.target)||U(!1),N&&N(ne)},!1),Z=hs(ne=>{W.current||(W.current=ne.currentTarget),G6(ne.target)&&(U(!0),A&&A(ne)),S&&S(ne)}),_e=()=>{const ne=W.current;return c&&c!=="button"&&!(ne.tagName==="A"&&ne.href)},ke=hs(ne=>{p&&!ne.repeat&&ee&&ne.key===" "&&J.stop(ne,()=>{J.start(ne)}),ne.target===ne.currentTarget&&_e()&&ne.key===" "&&ne.preventDefault(),E&&E(ne),ne.target===ne.currentTarget&&_e()&&ne.key==="Enter"&&!d&&(ne.preventDefault(),v&&v(ne))}),ze=hs(ne=>{p&&ne.key===" "&&ee&&!ne.defaultPrevented&&J.stop(ne,()=>{J.pulsate(ne)}),_&&_(ne),v&&ne.target===ne.currentTarget&&_e()&&ne.key===" "&&!ne.defaultPrevented&&v(ne)});let tt=c;tt==="button"&&(K.href||K.to)&&(tt=b);const De={};tt==="button"?(De.type=G===void 0?"button":G,De.disabled=d):(!K.href&&!K.to&&(De.role="button"),d&&(De["aria-disabled"]=d));const at=Io(a,W),et={...s,centerRipple:i,component:c,disabled:d,disableRipple:u,disableTouchRipple:h,focusRipple:p,tabIndex:I,focusVisible:ee},V=Lwe(et);return n.jsxs(Pwe,{as:tt,className:Pt(V.root,l),ownerState:et,onBlur:he,onClick:v,onContextMenu:le,onFocus:Z,onKeyDown:ke,onKeyUp:ze,onMouseDown:be,onMouseLeave:Oe,onMouseUp:Se,onDragLeave:Ce,onTouchEnd:He,onTouchMove:Ne,onTouchStart:ge,ref:at,tabIndex:d?-1:I,type:G,...De,...K,children:[o,je?n.jsx(Twe,{ref:Te,center:i,...H}):null]})});function fl(e,t,a,s=!1){return hs(r=>(a&&a(r),s||e[t](r),!0))}function Dwe(e){return Ga("MuiIconButton",e)}const V6=_a("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Owe=e=>{const{classes:t,disabled:a,color:s,edge:r,size:i,loading:o}=e,l={root:["root",o&&"loading",a&&"disabled",s!=="default"&&`color${Wn(s)}`,r&&`edge${Wn(r)}`,`size${Wn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Wa(l,Dwe,t)},Mwe=un(xV,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.loading&&t.loading,a.color!=="default"&&t[`color${Wn(a.color)}`],a.edge&&t[`edge${Wn(a.edge)}`],t[`size${Wn(a.size)}`]]}})(ku(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ku(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(fp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(fp()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${V6.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${V6.loading}`]:{color:"transparent"}}))),Iwe=un("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),$we=f.forwardRef(function(t,a){const s=bd({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:h,loading:p=null,loadingIndicator:x,...b}=s,N=oN(h),v=x??n.jsx(jL,{"aria-labelledby":N,color:"inherit",size:16}),j={...s,edge:r,color:l,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:v,size:u},w=Owe(j);return n.jsxs(Mwe,{id:p?N:h,className:Pt(w.root,o),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:a,...b,ownerState:j,children:[typeof p=="boolean"&&n.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:n.jsx(Iwe,{className:w.loadingIndicator,ownerState:j,children:p&&v})}),i]})});function Rwe(e){return Ga("MuiButton",e)}const qd=_a("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),zwe=f.createContext({}),Fwe=f.createContext(void 0),Uwe=e=>{const{color:t,disableElevation:a,fullWidth:s,size:r,variant:i,loading:o,loadingPosition:l,classes:c}=e,d={root:["root",o&&"loading",i,`${i}${Wn(t)}`,`size${Wn(r)}`,`${i}Size${Wn(r)}`,`color${Wn(t)}`,a&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${Wn(l)}`],startIcon:["icon","startIcon",`iconSize${Wn(r)}`],endIcon:["icon","endIcon",`iconSize${Wn(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=Wa(d,Rwe,c);return{...c,...u}},yV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Bwe=un(xV,{shouldForwardProp:e=>I9(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${Wn(a.color)}`],t[`size${Wn(a.size)}`],t[`${a.variant}Size${Wn(a.size)}`],a.color==="inherit"&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth,a.loading&&t.loading]}})(ku(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${qd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${qd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${qd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${qd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(fp()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${qd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${qd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${qd.loading}`]:{color:"transparent"}}}]}})),Hwe=un("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,a.loading&&t.startIconLoadingStart,t[`iconSize${Wn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...yV]})),qwe=un("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,a.loading&&t.endIconLoadingEnd,t[`iconSize${Wn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...yV]})),Wwe=un("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Y6=un("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Gwe=f.forwardRef(function(t,a){const s=f.useContext(zwe),r=f.useContext(Fwe),i=Eu(s,t),o=bd({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:u,disabled:h=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:b,focusVisibleClassName:N,fullWidth:v=!1,id:j,loading:w=null,loadingIndicator:S,loadingPosition:A="center",size:E="medium",startIcon:_,type:k,variant:T="text",...O}=o,$=oN(j),R=S??n.jsx(jL,{"aria-labelledby":$,color:"inherit",size:16}),P={...o,color:c,component:d,disabled:h,disableElevation:p,disableFocusRipple:x,fullWidth:v,loading:w,loadingIndicator:R,loadingPosition:A,size:E,type:k,variant:T},I=Uwe(P),H=(_||w&&A==="start")&&n.jsx(Hwe,{className:I.startIcon,ownerState:P,children:_||n.jsx(Y6,{className:I.loadingIconPlaceholder,ownerState:P})}),Q=(b||w&&A==="end")&&n.jsx(qwe,{className:I.endIcon,ownerState:P,children:b||n.jsx(Y6,{className:I.loadingIconPlaceholder,ownerState:P})}),G=r||"",K=typeof w=="boolean"?n.jsx("span",{className:I.loadingWrapper,style:{display:"contents"},children:w&&n.jsx(Wwe,{className:I.loadingIndicator,ownerState:P,children:R})}):null;return n.jsxs(Bwe,{ownerState:P,className:Pt(s.className,I.root,u,G),component:d,disabled:h||w,focusRipple:!x,focusVisibleClassName:Pt(I.focusVisible,N),ref:a,type:k,id:w?$:j,...O,classes:I,children:[H,A!=="end"&&K,l,A==="end"&&K,Q]})}),Vwe={baseButton:Gwe,baseIconButton:$we},Ywe={},Qwe=Ye({},Vwe,Ywe),Kwe=f.createContext(null);function Xwe(e){const{slots:t,slotProps:a={},defaultSlots:s,children:r}=e,i=f.useMemo(()=>({slots:Ye({},s,t),slotProps:a}),[s,t,a]);return n.jsx(Kwe.Provider,{value:i,children:r})}const Zwe=["children","localeText","plugins","seriesConfig","slots","slotProps"],Jwe=e=>{const t=Si({props:e,name:"MuiChartDataProvider"}),{children:a,localeText:s,plugins:r=pV,seriesConfig:i,slots:o,slotProps:l}=t,c=xn(t,Zwe),d=Ho(),u={plugins:r,seriesConfig:i,pluginParams:Ye({theme:d.palette.mode},c)};return{children:a,localeText:s,chartProviderProps:u,slots:o,slotProps:l}};function eNe(e){const{children:t,localeText:a,chartProviderProps:s,slots:r,slotProps:i}=Jwe(e);return n.jsx(o0e,Ye({},s,{children:n.jsx(jxe,{localeText:a,children:n.jsx(Xwe,{slots:r,slotProps:i,defaultSlots:Qwe,children:t})})}))}function Q6(e){const{isReversed:t,gradientId:a,size:s,direction:r,scale:i,colorMap:o}=e;return s<=0?null:n.jsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((l,c)=>{const d=i(l);if(d===void 0)return null;const u=t?1-d/s:d/s;return Number.isNaN(u)?null:n.jsxs(f.Fragment,{children:[n.jsx("stop",{offset:u,stopColor:o.colors[c],stopOpacity:1}),n.jsx("stop",{offset:u,stopColor:o.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const tNe=10;function K6(e){const{gradientUnits:t,isReversed:a,gradientId:s,size:r,direction:i,scale:o,colorScale:l,colorMap:c}=e,d=[c.min??0,c.max??100],u=d.map(o).filter(b=>b!==void 0);if(u.length!==2)return null;const h=typeof d[0]=="number"?Cf(d[0],d[1]):RL(d[0],d[1]),p=Math.round((Math.max(...u)-Math.min(...u))/tNe),x=`${d[0]}-${d[1]}-`;return n.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${a?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(b,N)=>{const v=h(N/p);if(v===void 0)return null;const j=o(v);if(j===void 0)return null;const w=a?1-j/r:j/r,S=l(v);return S===null?null:n.jsx("stop",{offset:w,stopColor:S,stopOpacity:1},x+N)})})}const nNe=10,aNe=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function r2(e){const{isReversed:t,gradientId:a,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],o=typeof i[0]=="number"?Cf(i[0],i[1]):RL(i[0],i[1]),l=nNe,c=`${i[0]}-${i[1]}-`;return n.jsx("linearGradient",Ye({id:a},aNe(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(d,u)=>{const h=u/l,p=o(h);if(p===void 0)return null;const x=s(p);return x===null?null:n.jsx("stop",{offset:h,stopColor:x,stopOpacity:1},c+u)})}))}function sNe(){const{top:e,height:t,bottom:a,left:s,width:r,right:i}=Ai(),o=e+t+a,l=s+r+i,c=j4(),d=axe(),{xAxis:u,xAxisIds:h}=xr(),{yAxis:p,yAxisIds:x}=yr(),{zAxis:b,zAxisIds:N}=v4(),v=x.filter(S=>p[S].colorMap!==void 0),j=h.filter(S=>u[S].colorMap!==void 0),w=N.filter(S=>b[S].colorMap!==void 0);return v.length===0&&j.length===0&&w.length===0?null:n.jsxs("defs",{children:[v.map(S=>{const A=c(S),E=d(S),{colorMap:_,scale:k,colorScale:T,reverse:O}=p[S];return _?.type==="piecewise"?n.jsx(Q6,{isReversed:!O,scale:k,colorMap:_,size:o,gradientId:A,direction:"y"},A):_?.type==="continuous"?n.jsxs(f.Fragment,{children:[n.jsx(K6,{isReversed:!O,scale:k,colorScale:T,colorMap:_,size:o,gradientId:A,direction:"y"}),n.jsx(r2,{isReversed:O,colorScale:T,colorMap:_,gradientId:E})]},A):null}),j.map(S=>{const A=c(S),E=d(S),{colorMap:_,scale:k,reverse:T,colorScale:O}=u[S];return _?.type==="piecewise"?n.jsx(Q6,{isReversed:T,scale:k,colorMap:_,size:l,gradientId:A,direction:"x"},A):_?.type==="continuous"?n.jsxs(f.Fragment,{children:[n.jsx(K6,{isReversed:T,scale:k,colorScale:O,colorMap:_,size:l,gradientId:A,direction:"x"}),n.jsx(r2,{isReversed:T,colorScale:O,colorMap:_,gradientId:E})]},A):null}),w.map(S=>{const A=d(S),{colorMap:E,colorScale:_}=b[S];return E?.type==="continuous"?n.jsx(r2,{colorScale:_,colorMap:E,gradientId:A},A):null})]})}function rNe(e){return Ga("MuiChartsSurface",e)}const iNe=()=>Wa({root:["root"]},rNe);_a("MuiChartsSurface",["root"]);const oNe=["children","className","title","desc"],lNe=un("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),cNe=f.forwardRef(function(t,a){const s=Yn(),r=Ut(s,que),i=Ut(s,Wue),o=Ut(s,Q9),l=Ut(s,K9),c=Ut(s,Ege),d=Ut(s,Tge),u=Ut(s,lge),h=w4(),p=Io(h,a),x=Si({props:t,name:"MuiChartsSurface"}),{children:b,className:N,title:v,desc:j}=x,w=xn(x,oNe),S=iNe(),A=i>0&&r>0;return n.jsxs(lNe,Ye({ownerState:{width:o,height:l,hasZoom:u},viewBox:`0 0 ${r} ${i}`,className:Pt(S.root,N),tabIndex:c?0:void 0,"data-has-focused-item":d||void 0},w,{ref:p,children:[v&&n.jsx("title",{children:v}),j&&n.jsx("desc",{children:j}),n.jsx(sNe,{}),A&&b]}))}),X6=_a("MuiChartsToolbar",["root"]),dNe=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",uNe=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",mNe=(e,t,a)=>e?'"chart"':t==="vertical"?a?.horizontal==="start"?'"legend chart"':'"chart legend"':a?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,fNe=(e=!1,t="horizontal",a="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:a==="start"?`auto ${r}`:`${r} auto`},hNe=(e=!1,t="horizontal",a="top")=>t==="vertical"||e?"1fr":a==="bottom"?"1fr auto":"auto 1fr",gNe=un("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>qb(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const a=fNe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=hNe(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=mNe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:a,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${X6.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${a.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${X6.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:dNe(e.legendPosition),alignItems:uNe(e.legendPosition)}});function pNe(e){const{children:t,sx:a,extendVertically:s}=e,r=yxe(),i=Yn(),o=Ut(i,Q9),l=Ut(i,K9);return n.jsx(gNe,{ref:r,ownerState:e,sx:a,extendVertically:s??l===void 0,width:o,children:t})}function xNe(){const e=Yn(),t=Ut(e,DN),a=Ut(e,ON),s=Ut(e,MN);return f.useMemo(()=>t===void 0||a===void 0||s===void 0?null:{seriesType:t,seriesId:a,dataIndex:s},[t,a,s])}const By=6;function yNe(){const e=Ho(),t=xNe(),a=Ex(),{xAxis:s,xAxisIds:r}=xr(),{yAxis:i,yAxisIds:o}=yr();if(t===null||t.seriesType!=="line"||!a)return null;const l=a?.series[t.seriesId],c=l.xAxisId??r[0],d=l.yAxisId??o[0];return n.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-By,y:i[d].scale(l.stackedData[t.dataIndex][1])-By,width:2*By,height:2*By,rx:3,ry:3})}const ZN=f.forwardRef(function(t,a){const s=Si({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:o,clipPathProps:l,clipPathGroupProps:c,areaPlotProps:d,linePlotProps:u,markPlotProps:h,overlayProps:p,chartsAxisProps:x,axisHighlightProps:b,lineHighlightPlotProps:N,legendProps:v,children:j}=hwe(s),{chartDataProviderProps:w,chartsSurfaceProps:S}=xwe(i,a),A=s.slots?.tooltip??Cve,E=s.slots?.toolbar;return n.jsx(eNe,Ye({},w,{children:n.jsxs(pNe,Ye({},r,{children:[s.showToolbar&&E?n.jsx(E,Ye({},s.slotProps?.toolbar)):null,!s.hideLegend&&n.jsx($ve,Ye({},v)),n.jsxs(cNe,Ye({},S,{children:[n.jsx(awe,Ye({},o)),n.jsxs("g",Ye({},c,{children:[n.jsx(w0e,Ye({},d)),n.jsx(D0e,Ye({},u)),n.jsx(uwe,Ye({},p)),n.jsx(Bve,Ye({},b))]})),n.jsx(yNe,{}),n.jsx(Lye,Ye({},x)),n.jsx("g",{"data-drawing-container":!0,children:n.jsx(B0e,Ye({},h))}),n.jsx(Kve,Ye({},N)),n.jsx(Hve,Ye({},l)),j]})),!s.loading&&n.jsx(A,Ye({},s.slotProps?.tooltip))]}))}))});function bNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return f.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const JN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Jf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function U4(e){return"nodeType"in e}function br(e){var t,a;return e?Jf(e)?e:U4(e)&&(t=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?t:window:window}function B4(e){const{Document:t}=br(e);return e instanceof t}function Dx(e){return Jf(e)?!1:e instanceof br(e).HTMLElement}function bV(e){return e instanceof br(e).SVGElement}function eh(e){return e?Jf(e)?e.document:U4(e)?B4(e)?e:Dx(e)||bV(e)?e.ownerDocument:document:document:document}const Ro=JN?f.useLayoutEffect:f.useEffect;function H4(e){const t=f.useRef(e);return Ro(()=>{t.current=e}),f.useCallback(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function vNe(){const e=f.useRef(null),t=f.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),a=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,a]}function Sp(e,t){t===void 0&&(t=[e]);const a=f.useRef(e);return Ro(()=>{a.current!==e&&(a.current=e)},t),a}function Ox(e,t){const a=f.useRef();return f.useMemo(()=>{const s=e(a.current);return a.current=s,s},[...t])}function Iv(e){const t=H4(e),a=f.useRef(null),s=f.useCallback(r=>{r!==a.current&&t?.(r,a.current),a.current=r},[]);return[a,s]}function CE(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let i2={};function Mx(e,t){return f.useMemo(()=>{if(t)return t;const a=i2[e]==null?0:i2[e]+1;return i2[e]=a,e+"-"+a},[e,t])}function vV(e){return function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];return s.reduce((i,o)=>{const l=Object.entries(o);for(const[c,d]of l){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const xf=vV(1),_p=vV(-1);function wNe(e){return"clientX"in e&&"clientY"in e}function q4(e){if(!e)return!1;const{KeyboardEvent:t}=br(e.target);return t&&e instanceof t}function NNe(e){if(!e)return!1;const{TouchEvent:t}=br(e.target);return t&&e instanceof t}function SE(e){if(NNe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:a}=e.touches[0];return{x:t,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:a}=e.changedTouches[0];return{x:t,y:a}}}return wNe(e)?{x:e.clientX,y:e.clientY}:null}const Ap=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:a}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:a}=e;return"scaleX("+t+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[Ap.Translate.toString(e),Ap.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:a,easing:s}=e;return t+" "+a+"ms "+s}}}),Z6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function jNe(e){return e.matches(Z6)?e:e.querySelector(Z6)}const CNe={display:"none"};function SNe(e){let{id:t,value:a}=e;return bt.createElement("div",{id:t,style:CNe},a)}function _Ne(e){let{id:t,announcement:a,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return bt.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},a)}function ANe(){const[e,t]=f.useState("");return{announce:f.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const wV=f.createContext(null);function TNe(e){const t=f.useContext(wV);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ENe(){const[e]=f.useState(()=>new Set),t=f.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[f.useCallback(s=>{let{type:r,event:i}=s;e.forEach(o=>{var l;return(l=o[r])==null?void 0:l.call(o,i)})},[e]),t]}const kNe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},LNe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was moved over droppable area "+a.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was dropped over droppable area "+a.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function PNe(e){let{announcements:t=LNe,container:a,hiddenTextDescribedById:s,screenReaderInstructions:r=kNe}=e;const{announce:i,announcement:o}=ANe(),l=Mx("DndLiveRegion"),[c,d]=f.useState(!1);if(f.useEffect(()=>{d(!0)},[]),TNe(f.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:x}=h;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(h){let{active:p,over:x}=h;i(t.onDragOver({active:p,over:x}))},onDragEnd(h){let{active:p,over:x}=h;i(t.onDragEnd({active:p,over:x}))},onDragCancel(h){let{active:p,over:x}=h;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!c)return null;const u=bt.createElement(bt.Fragment,null,bt.createElement(SNe,{id:s,value:r.draggable}),bt.createElement(_Ne,{id:l,announcement:o}));return a?Bi.createPortal(u,a):u}var es;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(es||(es={}));function $v(){}function J6(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function DNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return f.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Vi=Object.freeze({x:0,y:0});function NV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function jV(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return a-s}function ONe(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return s-a}function eR(e){let{left:t,top:a,height:s,width:r}=e;return[{x:t,y:a},{x:t+r,y:a},{x:t,y:a+s},{x:t+r,y:a+s}]}function CV(e,t){if(!e||e.length===0)return null;const[a]=e;return a[t]}function tR(e,t,a){return t===void 0&&(t=e.left),a===void 0&&(a=e.top),{x:t+e.width*.5,y:a+e.height*.5}}const MNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=tR(t,t.left,t.top),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=NV(tR(c),r);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(jV)},INe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=eR(t),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=eR(c),u=r.reduce((p,x,b)=>p+NV(d[b],x),0),h=Number((u/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:h}})}}return i.sort(jV)};function $Ne(e,t){const a=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=r-s,l=i-a;if(s<r&&a<i){const c=t.width*t.height,d=e.width*e.height,u=o*l,h=u/(c+d-u);return Number(h.toFixed(4))}return 0}const RNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=[];for(const i of s){const{id:o}=i,l=a.get(o);if(l){const c=$Ne(l,t);c>0&&r.push({id:o,data:{droppableContainer:i,value:c}})}}return r.sort(ONe)};function zNe(e,t,a){return{...e,scaleX:t&&a?t.width/a.width:1,scaleY:t&&a?t.height/a.height:1}}function SV(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Vi}function FNe(e){return function(a){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...a})}}const UNe=FNe(1);function BNe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function HNe(e,t,a){const s=BNe(t);if(!s)return e;const{scaleX:r,scaleY:i,x:o,y:l}=s,c=e.left-o-(1-r)*parseFloat(a),d=e.top-l-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),u=r?e.width/r:e.width,h=i?e.height/i:e.height;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c}}const qNe={ignoreTransform:!1};function th(e,t){t===void 0&&(t=qNe);let a=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=br(e).getComputedStyle(e);d&&(a=HNe(a,d,u))}const{top:s,left:r,width:i,height:o,bottom:l,right:c}=a;return{top:s,left:r,width:i,height:o,bottom:l,right:c}}function nR(e){return th(e,{ignoreTransform:!0})}function WNe(e){const t=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:t,bottom:a,width:t,height:a}}function GNe(e,t){return t===void 0&&(t=br(e).getComputedStyle(e)),t.position==="fixed"}function VNe(e,t){t===void 0&&(t=br(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?a.test(i):!1})}function ej(e,t){const a=[];function s(r){if(t!=null&&a.length>=t||!r)return a;if(B4(r)&&r.scrollingElement!=null&&!a.includes(r.scrollingElement))return a.push(r.scrollingElement),a;if(!Dx(r)||bV(r)||a.includes(r))return a;const i=br(e).getComputedStyle(r);return r!==e&&VNe(r,i)&&a.push(r),GNe(r,i)?a:s(r.parentNode)}return e?s(e):a}function _V(e){const[t]=ej(e,1);return t??null}function o2(e){return!JN||!e?null:Jf(e)?e:U4(e)?B4(e)||e===eh(e).scrollingElement?window:Dx(e)?e:null:null}function AV(e){return Jf(e)?e.scrollX:e.scrollLeft}function TV(e){return Jf(e)?e.scrollY:e.scrollTop}function _E(e){return{x:AV(e),y:TV(e)}}var fs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(fs||(fs={}));function EV(e){return!JN||!e?!1:e===document.scrollingElement}function kV(e){const t={x:0,y:0},a=EV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:r,isLeft:i,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const YNe={x:.2,y:.2};function QNe(e,t,a,s,r){let{top:i,left:o,right:l,bottom:c}=a;s===void 0&&(s=10),r===void 0&&(r=YNe);const{isTop:d,isBottom:u,isLeft:h,isRight:p}=kV(e),x={x:0,y:0},b={x:0,y:0},N={height:t.height*r.y,width:t.width*r.x};return!d&&i<=t.top+N.height?(x.y=fs.Backward,b.y=s*Math.abs((t.top+N.height-i)/N.height)):!u&&c>=t.bottom-N.height&&(x.y=fs.Forward,b.y=s*Math.abs((t.bottom-N.height-c)/N.height)),!p&&l>=t.right-N.width?(x.x=fs.Forward,b.x=s*Math.abs((t.right-N.width-l)/N.width)):!h&&o<=t.left+N.width&&(x.x=fs.Backward,b.x=s*Math.abs((t.left+N.width-o)/N.width)),{direction:x,speed:b}}function KNe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:a,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:a,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function LV(e){return e.reduce((t,a)=>xf(t,_E(a)),Vi)}function XNe(e){return e.reduce((t,a)=>t+AV(a),0)}function ZNe(e){return e.reduce((t,a)=>t+TV(a),0)}function JNe(e,t){if(t===void 0&&(t=th),!e)return;const{top:a,left:s,bottom:r,right:i}=t(e);_V(e)&&(r<=0||i<=0||a>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const eje=[["x",["left","right"],XNe],["y",["top","bottom"],ZNe]];class W4{constructor(t,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=ej(a),r=LV(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of eje)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(s),u=r[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Kg{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=t}add(t,a,s){var r;(r=this.target)==null||r.addEventListener(t,a,s),this.listeners.push([t,a,s])}}function tje(e){const{EventTarget:t}=br(e);return e instanceof t?e:eh(e)}function l2(e,t){const a=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(a**2+s**2)>t:"x"in t&&"y"in t?a>t.x&&s>t.y:"x"in t?a>t.x:"y"in t?s>t.y:!1}var di;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(di||(di={}));function aR(e){e.preventDefault()}function nje(e){e.stopPropagation()}var vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(vn||(vn={}));const PV={start:[vn.Space,vn.Enter],cancel:[vn.Esc],end:[vn.Space,vn.Enter,vn.Tab]},aje=(e,t)=>{let{currentCoordinates:a}=t;switch(e.code){case vn.Right:return{...a,x:a.x+25};case vn.Left:return{...a,x:a.x-25};case vn.Down:return{...a,y:a.y+25};case vn.Up:return{...a,y:a.y-25}}};class G4{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:a}}=t;this.props=t,this.listeners=new Kg(eh(a)),this.windowListeners=new Kg(br(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(di.Resize,this.handleCancel),this.windowListeners.add(di.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(di.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:a}=this.props,s=t.node.current;s&&JNe(s),a(Vi)}handleKeyDown(t){if(q4(t)){const{active:a,context:s,options:r}=this.props,{keyboardCodes:i=PV,coordinateGetter:o=aje,scrollBehavior:l="smooth"}=r,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:Vi;this.referenceCoordinates||(this.referenceCoordinates=u);const h=o(t,{active:a,context:s.current,currentCoordinates:u});if(h){const p=_p(h,u),x={x:0,y:0},{scrollableAncestors:b}=s.current;for(const N of b){const v=t.code,{isTop:j,isRight:w,isLeft:S,isBottom:A,maxScroll:E,minScroll:_}=kV(N),k=KNe(N),T={x:Math.min(v===vn.Right?k.right-k.width/2:k.right,Math.max(v===vn.Right?k.left:k.left+k.width/2,h.x)),y:Math.min(v===vn.Down?k.bottom-k.height/2:k.bottom,Math.max(v===vn.Down?k.top:k.top+k.height/2,h.y))},O=v===vn.Right&&!w||v===vn.Left&&!S,$=v===vn.Down&&!A||v===vn.Up&&!j;if(O&&T.x!==h.x){const R=N.scrollLeft+p.x,P=v===vn.Right&&R<=E.x||v===vn.Left&&R>=_.x;if(P&&!p.y){N.scrollTo({left:R,behavior:l});return}P?x.x=N.scrollLeft-R:x.x=v===vn.Right?N.scrollLeft-E.x:N.scrollLeft-_.x,x.x&&N.scrollBy({left:-x.x,behavior:l});break}else if($&&T.y!==h.y){const R=N.scrollTop+p.y,P=v===vn.Down&&R<=E.y||v===vn.Up&&R>=_.y;if(P&&!p.x){N.scrollTo({top:R,behavior:l});return}P?x.y=N.scrollTop-R:x.y=v===vn.Down?N.scrollTop-E.y:N.scrollTop-_.y,x.y&&N.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,xf(_p(h,this.referenceCoordinates),x))}}}handleMove(t,a){const{onMove:s}=this.props;t.preventDefault(),s(a)}handleEnd(t){const{onEnd:a}=this.props;t.preventDefault(),this.detach(),a()}handleCancel(t){const{onCancel:a}=this.props;t.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}G4.activators=[{eventName:"onKeyDown",handler:(e,t,a)=>{let{keyboardCodes:s=PV,onActivation:r}=t,{active:i}=a;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function sR(e){return!!(e&&"distance"in e)}function rR(e){return!!(e&&"delay"in e)}class V4{constructor(t,a,s){var r;s===void 0&&(s=tje(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=a;const{event:i}=t,{target:o}=i;this.props=t,this.events=a,this.document=eh(o),this.documentListeners=new Kg(this.document),this.listeners=new Kg(s),this.windowListeners=new Kg(br(o)),this.initialCoordinates=(r=SE(i))!=null?r:Vi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(di.Resize,this.handleCancel),this.windowListeners.add(di.DragStart,aR),this.windowListeners.add(di.VisibilityChange,this.handleCancel),this.windowListeners.add(di.ContextMenu,aR),this.documentListeners.add(di.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(rR(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(sR(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,a){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:t}=this,{onStart:a}=this.props;t&&(this.activated=!0,this.documentListeners.add(di.Click,nje,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(di.SelectionChange,this.removeTextSelection),a(t))}handleMove(t){var a;const{activated:s,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!r)return;const c=(a=SE(t))!=null?a:Vi,d=_p(r,c);if(!s&&l){if(sR(l)){if(l.tolerance!=null&&l2(d,l.tolerance))return this.handleCancel();if(l2(d,l.distance))return this.handleStart()}if(rR(l)&&l2(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleCancel(){const{onAbort:t,onCancel:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleKeydown(t){t.code===vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const sje={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Y4 extends V4{constructor(t){const{event:a}=t,s=eh(a.target);super(t,sje,s)}}Y4.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const rje={move:{name:"mousemove"},end:{name:"mouseup"}};var AE;(function(e){e[e.RightClick=2]="RightClick"})(AE||(AE={}));class ije extends V4{constructor(t){super(t,rje,eh(t.event.target))}}ije.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return a.button===AE.RightClick?!1:(s?.({event:a}),!0)}}];const c2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class oje extends V4{constructor(t){super(t,c2)}static setup(){return window.addEventListener(c2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(c2.move.name,t)};function t(){}}}oje.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;const{touches:r}=a;return r.length>1?!1:(s?.({event:a}),!0)}}];var Xg;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Xg||(Xg={}));var Rv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Rv||(Rv={}));function lje(e){let{acceleration:t,activator:a=Xg.Pointer,canScroll:s,draggingRect:r,enabled:i,interval:o=5,order:l=Rv.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:p}=e;const x=dje({delta:h,disabled:!i}),[b,N]=vNe(),v=f.useRef({x:0,y:0}),j=f.useRef({x:0,y:0}),w=f.useMemo(()=>{switch(a){case Xg.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Xg.DraggableRect:return r}},[a,r,c]),S=f.useRef(null),A=f.useCallback(()=>{const _=S.current;if(!_)return;const k=v.current.x*j.current.x,T=v.current.y*j.current.y;_.scrollBy(k,T)},[]),E=f.useMemo(()=>l===Rv.TreeOrder?[...d].reverse():d,[l,d]);f.useEffect(()=>{if(!i||!d.length||!w){N();return}for(const _ of E){if(s?.(_)===!1)continue;const k=d.indexOf(_),T=u[k];if(!T)continue;const{direction:O,speed:$}=QNe(_,T,w,t,p);for(const R of["x","y"])x[R][O[R]]||($[R]=0,O[R]=0);if($.x>0||$.y>0){N(),S.current=_,b(A,o),v.current=$,j.current=O;return}}v.current={x:0,y:0},j.current={x:0,y:0},N()},[t,A,s,N,i,o,JSON.stringify(w),JSON.stringify(x),b,d,E,u,JSON.stringify(p)])}const cje={x:{[fs.Backward]:!1,[fs.Forward]:!1},y:{[fs.Backward]:!1,[fs.Forward]:!1}};function dje(e){let{delta:t,disabled:a}=e;const s=CE(t);return Ox(r=>{if(a||!s||!r)return cje;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[fs.Backward]:r.x[fs.Backward]||i.x===-1,[fs.Forward]:r.x[fs.Forward]||i.x===1},y:{[fs.Backward]:r.y[fs.Backward]||i.y===-1,[fs.Forward]:r.y[fs.Forward]||i.y===1}}},[a,t,s])}function uje(e,t){const a=t!=null?e.get(t):void 0,s=a?a.node.current:null;return Ox(r=>{var i;return t==null?null:(i=s??r)!=null?i:null},[s,t])}function mje(e,t){return f.useMemo(()=>e.reduce((a,s)=>{const{sensor:r}=s,i=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...a,...i]},[]),[e,t])}var Tp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Tp||(Tp={}));var TE;(function(e){e.Optimized="optimized"})(TE||(TE={}));const iR=new Map;function fje(e,t){let{dragging:a,dependencies:s,config:r}=t;const[i,o]=f.useState(null),{frequency:l,measure:c,strategy:d}=r,u=f.useRef(e),h=v(),p=Sp(h),x=f.useCallback(function(j){j===void 0&&(j=[]),!p.current&&o(w=>w===null?j:w.concat(j.filter(S=>!w.includes(S))))},[p]),b=f.useRef(null),N=Ox(j=>{if(h&&!a)return iR;if(!j||j===iR||u.current!==e||i!=null){const w=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const A=S.node.current,E=A?new W4(c(A),A):null;S.rect.current=E,E&&w.set(S.id,E)}return w}return j},[e,i,a,h,c]);return f.useEffect(()=>{u.current=e},[e]),f.useEffect(()=>{h||x()},[a,h]),f.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),f.useEffect(()=>{h||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{x(),b.current=null},l))},[l,h,x,...s]),{droppableRects:N,measureDroppableContainers:x,measuringScheduled:i!=null};function v(){switch(d){case Tp.Always:return!1;case Tp.BeforeDragging:return a;default:return!a}}}function DV(e,t){return Ox(a=>e?a||(typeof t=="function"?t(e):e):null,[t,e])}function hje(e,t){return DV(e,t)}function gje(e){let{callback:t,disabled:a}=e;const s=H4(t),r=f.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,a]);return f.useEffect(()=>()=>r?.disconnect(),[r]),r}function tj(e){let{callback:t,disabled:a}=e;const s=H4(t),r=f.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[a]);return f.useEffect(()=>()=>r?.disconnect(),[r]),r}function pje(e){return new W4(th(e),e)}function oR(e,t,a){t===void 0&&(t=pje);const[s,r]=f.useState(null);function i(){r(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??a)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=gje({callback(c){if(e)for(const d of c){const{type:u,target:h}=d;if(u==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),l=tj({callback:i});return Ro(()=>{i(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function xje(e){const t=DV(e);return SV(e,t)}const lR=[];function yje(e){const t=f.useRef(e),a=Ox(s=>e?s&&s!==lR&&e&&t.current&&e.parentNode===t.current.parentNode?s:ej(e):lR,[e]);return f.useEffect(()=>{t.current=e},[e]),a}function bje(e){const[t,a]=f.useState(null),s=f.useRef(e),r=f.useCallback(i=>{const o=o2(i.target);o&&a(l=>l?(l.set(o,_E(o)),new Map(l)):null)},[]);return f.useEffect(()=>{const i=s.current;if(e!==i){o(i);const l=e.map(c=>{const d=o2(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,_E(d)]):null}).filter(c=>c!=null);a(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const d=o2(c);d?.removeEventListener("scroll",r)})}},[r,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>xf(i,o),Vi):LV(e):Vi,[e,t])}function cR(e,t){t===void 0&&(t=[]);const a=f.useRef(null);return f.useEffect(()=>{a.current=null},t),f.useEffect(()=>{const s=e!==Vi;s&&!a.current&&(a.current=e),!s&&a.current&&(a.current=null)},[e]),a.current?_p(e,a.current):Vi}function vje(e){f.useEffect(()=>{if(!JN)return;const t=e.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of t)a?.()}},e.map(t=>{let{sensor:a}=t;return a}))}function wje(e,t){return f.useMemo(()=>e.reduce((a,s)=>{let{eventName:r,handler:i}=s;return a[r]=o=>{i(o,t)},a},{}),[e,t])}function OV(e){return f.useMemo(()=>e?WNe(e):null,[e])}const dR=[];function Nje(e,t){t===void 0&&(t=th);const[a]=e,s=OV(a?br(a):null),[r,i]=f.useState(dR);function o(){i(()=>e.length?e.map(c=>EV(c)?s:new W4(t(c),c)):dR)}const l=tj({callback:o});return Ro(()=>{l?.disconnect(),o(),e.forEach(c=>l?.observe(c))},[e]),r}function jje(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Dx(t)?t:e}function Cje(e){let{measure:t}=e;const[a,s]=f.useState(null),r=f.useCallback(d=>{for(const{target:u}of d)if(Dx(u)){s(h=>{const p=t(u);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=tj({callback:r}),o=f.useCallback(d=>{const u=jje(d);i?.disconnect(),u&&i?.observe(u),s(u?t(u):null)},[t,i]),[l,c]=Iv(o);return f.useMemo(()=>({nodeRef:l,rect:a,setRef:c}),[a,l,c])}const Sje=[{sensor:Y4,options:{}},{sensor:G4,options:{}}],_je={current:{}},Vb={draggable:{measure:nR},droppable:{measure:nR,strategy:Tp.WhileDragging,frequency:TE.Optimized},dragOverlay:{measure:th}};class Zg extends Map{get(t){var a;return t!=null&&(a=super.get(t))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:a}=t;return!a})}getNodeFor(t){var a,s;return(a=(s=this.get(t))==null?void 0:s.node.current)!=null?a:void 0}}const Aje={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Zg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$v},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Vb,measureDroppableContainers:$v,windowRect:null,measuringScheduled:!1},Tje={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$v,draggableNodes:new Map,over:null,measureDroppableContainers:$v},nj=f.createContext(Tje),MV=f.createContext(Aje);function Eje(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Zg}}}function kje(e,t){switch(t.type){case es.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case es.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case es.DragEnd:case es.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case es.RegisterDroppable:{const{element:a}=t,{id:s}=a,r=new Zg(e.droppable.containers);return r.set(s,a),{...e,droppable:{...e.droppable,containers:r}}}case es.SetDroppableDisabled:{const{id:a,key:s,disabled:r}=t,i=e.droppable.containers.get(a);if(!i||s!==i.key)return e;const o=new Zg(e.droppable.containers);return o.set(a,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case es.UnregisterDroppable:{const{id:a,key:s}=t,r=e.droppable.containers.get(a);if(!r||s!==r.key)return e;const i=new Zg(e.droppable.containers);return i.delete(a),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Lje(e){let{disabled:t}=e;const{active:a,activatorEvent:s,draggableNodes:r}=f.useContext(nj),i=CE(s),o=CE(a?.id);return f.useEffect(()=>{if(!t&&!s&&i&&o!=null){if(!q4(i)||document.activeElement===i.target)return;const l=r.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const h=jNe(u);if(h){h.focus();break}}})}},[s,t,r,o,i]),null}function Pje(e,t){let{transform:a,...s}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...s}),a):a}function Dje(e){return f.useMemo(()=>({draggable:{...Vb.draggable,...e?.draggable},droppable:{...Vb.droppable,...e?.droppable},dragOverlay:{...Vb.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Oje(e){let{activeNode:t,measure:a,initialRect:s,config:r=!0}=e;const i=f.useRef(!1),{x:o,y:l}=typeof r=="boolean"?{x:r,y:r}:r;Ro(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!s)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const u=a(d),h=SV(u,s);if(o||(h.x=0),l||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=_V(d);p&&p.scrollBy({top:h.y,left:h.x})}},[t,o,l,s,a])}const IV=f.createContext({...Vi,scaleX:1,scaleY:1});var Bc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Bc||(Bc={}));const Mje=f.memo(function(t){var a,s,r,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=Sje,collisionDetection:h=RNe,measuring:p,modifiers:x,...b}=t;const N=f.useReducer(kje,void 0,Eje),[v,j]=N,[w,S]=ENe(),[A,E]=f.useState(Bc.Uninitialized),_=A===Bc.Initialized,{draggable:{active:k,nodes:T,translate:O},droppable:{containers:$}}=v,R=k!=null?T.get(k):null,P=f.useRef({initial:null,translated:null}),I=f.useMemo(()=>{var de;return k!=null?{id:k,data:(de=R?.data)!=null?de:_je,rect:P}:null},[k,R]),H=f.useRef(null),[Q,G]=f.useState(null),[K,W]=f.useState(null),J=Sp(b,Object.values(b)),Te=Mx("DndDescribedBy",o),ee=f.useMemo(()=>$.getEnabled(),[$]),U=Dje(p),{droppableRects:je,measureDroppableContainers:be,measuringScheduled:le}=fje(ee,{dragging:_,dependencies:[O.x,O.y],config:U.droppable}),Ce=uje(T,k),Se=f.useMemo(()=>K?SE(K):null,[K]),Oe=X(),ge=hje(Ce,U.draggable.measure);Oje({activeNode:k!=null?T.get(k):null,config:Oe.layoutShiftCompensation,initialRect:ge,measure:U.draggable.measure});const He=oR(Ce,U.draggable.measure,ge),Ne=oR(Ce?Ce.parentElement:null),he=f.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:je,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Z=$.getNodeFor((a=he.current.over)==null?void 0:a.id),_e=Cje({measure:U.dragOverlay.measure}),ke=(s=_e.nodeRef.current)!=null?s:Ce,ze=_?(r=_e.rect)!=null?r:He:null,tt=!!(_e.nodeRef.current&&_e.rect),De=xje(tt?null:He),at=OV(ke?br(ke):null),et=yje(_?Z??Ce:null),V=Nje(et),ne=Pje(x,{transform:{x:O.x-De.x,y:O.y-De.y,scaleX:1,scaleY:1},activatorEvent:K,active:I,activeNodeRect:He,containerNodeRect:Ne,draggingNodeRect:ze,over:he.current.over,overlayNodeRect:_e.rect,scrollableAncestors:et,scrollableAncestorRects:V,windowRect:at}),se=Se?xf(Se,O):null,Ee=bje(et),Ie=cR(Ee),pe=cR(Ee,[He]),Be=xf(ne,Ie),$e=ze?UNe(ze,ne):null,Ve=I&&$e?h({active:I,collisionRect:$e,droppableRects:je,droppableContainers:ee,pointerCoordinates:se}):null,ut=CV(Ve,"id"),[ve,ae]=f.useState(null),Fe=tt?ne:xf(ne,pe),ye=zNe(Fe,(i=ve?.rect)!=null?i:null,He),We=f.useRef(null),it=f.useCallback((de,D)=>{let{sensor:B,options:oe}=D;if(H.current==null)return;const ue=T.get(H.current);if(!ue)return;const ie=de.nativeEvent,Pe=new B({active:H.current,activeNode:ue,event:ie,options:oe,context:he,onAbort(fe){if(!T.get(fe))return;const{onDragAbort:Ze}=J.current,pt={id:fe};Ze?.(pt),w({type:"onDragAbort",event:pt})},onPending(fe,qe,Ze,pt){if(!T.get(fe))return;const{onDragPending:St}=J.current,Ht={id:fe,constraint:qe,initialCoordinates:Ze,offset:pt};St?.(Ht),w({type:"onDragPending",event:Ht})},onStart(fe){const qe=H.current;if(qe==null)return;const Ze=T.get(qe);if(!Ze)return;const{onDragStart:pt}=J.current,Nt={activatorEvent:ie,active:{id:qe,data:Ze.data,rect:P}};Bi.unstable_batchedUpdates(()=>{pt?.(Nt),E(Bc.Initializing),j({type:es.DragStart,initialCoordinates:fe,active:qe}),w({type:"onDragStart",event:Nt}),G(We.current),W(ie)})},onMove(fe){j({type:es.DragMove,coordinates:fe})},onEnd:xe(es.DragEnd),onCancel:xe(es.DragCancel)});We.current=Pe;function xe(fe){return async function(){const{active:Ze,collisions:pt,over:Nt,scrollAdjustedTranslate:St}=he.current;let Ht=null;if(Ze&&St){const{cancelDrop:on}=J.current;Ht={activatorEvent:ie,active:Ze,collisions:pt,delta:St,over:Nt},fe===es.DragEnd&&typeof on=="function"&&await Promise.resolve(on(Ht))&&(fe=es.DragCancel)}H.current=null,Bi.unstable_batchedUpdates(()=>{j({type:fe}),E(Bc.Uninitialized),ae(null),G(null),W(null),We.current=null;const on=fe===es.DragEnd?"onDragEnd":"onDragCancel";if(Ht){const cn=J.current[on];cn?.(Ht),w({type:on,event:Ht})}})}}},[T]),ht=f.useCallback((de,D)=>(B,oe)=>{const ue=B.nativeEvent,ie=T.get(oe);if(H.current!==null||!ie||ue.dndKit||ue.defaultPrevented)return;const Pe={active:ie};de(B,D.options,Pe)===!0&&(ue.dndKit={capturedBy:D.sensor},H.current=oe,it(B,D))},[T,it]),Ae=mje(u,ht);vje(u),Ro(()=>{He&&A===Bc.Initializing&&E(Bc.Initialized)},[He,A]),f.useEffect(()=>{const{onDragMove:de}=J.current,{active:D,activatorEvent:B,collisions:oe,over:ue}=he.current;if(!D||!B)return;const ie={active:D,activatorEvent:B,collisions:oe,delta:{x:Be.x,y:Be.y},over:ue};Bi.unstable_batchedUpdates(()=>{de?.(ie),w({type:"onDragMove",event:ie})})},[Be.x,Be.y]),f.useEffect(()=>{const{active:de,activatorEvent:D,collisions:B,droppableContainers:oe,scrollAdjustedTranslate:ue}=he.current;if(!de||H.current==null||!D||!ue)return;const{onDragOver:ie}=J.current,Pe=oe.get(ut),xe=Pe&&Pe.rect.current?{id:Pe.id,rect:Pe.rect.current,data:Pe.data,disabled:Pe.disabled}:null,fe={active:de,activatorEvent:D,collisions:B,delta:{x:ue.x,y:ue.y},over:xe};Bi.unstable_batchedUpdates(()=>{ae(xe),ie?.(fe),w({type:"onDragOver",event:fe})})},[ut]),Ro(()=>{he.current={activatorEvent:K,active:I,activeNode:Ce,collisionRect:$e,collisions:Ve,droppableRects:je,draggableNodes:T,draggingNode:ke,draggingNodeRect:ze,droppableContainers:$,over:ve,scrollableAncestors:et,scrollAdjustedTranslate:Be},P.current={initial:ze,translated:$e}},[I,Ce,Ve,$e,T,ke,ze,je,$,ve,et,Be]),lje({...Oe,delta:O,draggingRect:$e,pointerCoordinates:se,scrollableAncestors:et,scrollableAncestorRects:V});const Je=f.useMemo(()=>({active:I,activeNode:Ce,activeNodeRect:He,activatorEvent:K,collisions:Ve,containerNodeRect:Ne,dragOverlay:_e,draggableNodes:T,droppableContainers:$,droppableRects:je,over:ve,measureDroppableContainers:be,scrollableAncestors:et,scrollableAncestorRects:V,measuringConfiguration:U,measuringScheduled:le,windowRect:at}),[I,Ce,He,K,Ve,Ne,_e,T,$,je,ve,be,et,V,U,le,at]),ce=f.useMemo(()=>({activatorEvent:K,activators:Ae,active:I,activeNodeRect:He,ariaDescribedById:{draggable:Te},dispatch:j,draggableNodes:T,over:ve,measureDroppableContainers:be}),[K,Ae,I,He,j,Te,T,ve,be]);return bt.createElement(wV.Provider,{value:S},bt.createElement(nj.Provider,{value:ce},bt.createElement(MV.Provider,{value:Je},bt.createElement(IV.Provider,{value:ye},d)),bt.createElement(Lje,{disabled:l?.restoreFocus===!1})),bt.createElement(PNe,{...l,hiddenTextDescribedById:Te}));function X(){const de=Q?.autoScrollEnabled===!1,D=typeof c=="object"?c.enabled===!1:c===!1,B=_&&!de&&!D;return typeof c=="object"?{...c,enabled:B}:{enabled:B}}}),Ije=f.createContext(null),uR="button",$je="Draggable";function Rje(e){let{id:t,data:a,disabled:s=!1,attributes:r}=e;const i=Mx($je),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:p}=f.useContext(nj),{role:x=uR,roleDescription:b="draggable",tabIndex:N=0}=r??{},v=c?.id===t,j=f.useContext(v?IV:Ije),[w,S]=Iv(),[A,E]=Iv(),_=wje(o,t),k=Sp(a);Ro(()=>(h.set(t,{id:t,key:i,node:w,activatorNode:A,data:k}),()=>{const O=h.get(t);O&&O.key===i&&h.delete(t)}),[h,t]);const T=f.useMemo(()=>({role:x,tabIndex:N,"aria-disabled":s,"aria-pressed":v&&x===uR?!0:void 0,"aria-roledescription":b,"aria-describedby":u.draggable}),[s,x,N,v,b,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:T,isDragging:v,listeners:s?void 0:_,node:w,over:p,setNodeRef:S,setActivatorNodeRef:E,transform:j}}function zje(){return f.useContext(MV)}const Fje="Droppable",Uje={timeout:25};function Bje(e){let{data:t,disabled:a=!1,id:s,resizeObserverConfig:r}=e;const i=Mx(Fje),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=f.useContext(nj),u=f.useRef({disabled:a}),h=f.useRef(!1),p=f.useRef(null),x=f.useRef(null),{disabled:b,updateMeasurementsFor:N,timeout:v}={...Uje,...r},j=Sp(N??s),w=f.useCallback(()=>{if(!h.current){h.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(j.current)?j.current:[j.current]),x.current=null},v)},[v]),S=tj({callback:w,disabled:b||!o}),A=f.useCallback((T,O)=>{S&&(O&&(S.unobserve(O),h.current=!1),T&&S.observe(T))},[S]),[E,_]=Iv(A),k=Sp(t);return f.useEffect(()=>{!S||!E.current||(S.disconnect(),h.current=!1,S.observe(E.current))},[E,S]),f.useEffect(()=>(l({type:es.RegisterDroppable,element:{id:s,key:i,disabled:a,node:E,rect:p,data:k}}),()=>l({type:es.UnregisterDroppable,key:i,id:s})),[s]),f.useEffect(()=>{a!==u.current.disabled&&(l({type:es.SetDroppableDisabled,id:s,key:i,disabled:a}),u.current.disabled=a)},[s,i,a,l]),{active:o,rect:p,isOver:c?.id===s,node:E,over:c,setNodeRef:_}}function Q4(e,t,a){const s=e.slice();return s.splice(a<0?s.length+a:a,0,s.splice(t,1)[0]),s}function Hje(e,t){return e.reduce((a,s,r)=>{const i=t.get(s);return i&&(a[r]=i),a},Array(e.length))}function Hy(e){return e!==null&&e>=0}function qje(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function Wje(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const K4=e=>{let{rects:t,activeIndex:a,overIndex:s,index:r}=e;const i=Q4(t,s,a),o=t[r],l=i[r];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},$V="Sortable",RV=bt.createContext({activeIndex:-1,containerId:$V,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:K4,disabled:{draggable:!1,droppable:!1}});function Gje(e){let{children:t,id:a,items:s,strategy:r=K4,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=zje(),h=Mx($V,a),p=l.rect!==null,x=f.useMemo(()=>s.map(_=>typeof _=="object"&&"id"in _?_.id:_),[s]),b=o!=null,N=o?x.indexOf(o.id):-1,v=d?x.indexOf(d.id):-1,j=f.useRef(x),w=!qje(x,j.current),S=v!==-1&&N===-1||w,A=Wje(i);Ro(()=>{w&&b&&u(x)},[w,x,b,u]),f.useEffect(()=>{j.current=x},[x]);const E=f.useMemo(()=>({activeIndex:N,containerId:h,disabled:A,disableTransforms:S,items:x,overIndex:v,useDragOverlay:p,sortedRects:Hje(x,c),strategy:r}),[N,h,A.draggable,A.droppable,S,x,v,c,p,r]);return bt.createElement(RV.Provider,{value:E},t)}const Vje=e=>{let{id:t,items:a,activeIndex:s,overIndex:r}=e;return Q4(a,s,r).indexOf(t)},Yje=e=>{let{containerId:t,isSorting:a,wasDragging:s,index:r,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!s||l!==i&&r===o?!1:a?!0:o!==r&&t===c},Qje={duration:200,easing:"ease"},zV="transform",Kje=Ap.Transition.toString({property:zV,duration:0,easing:"linear"}),Xje={roleDescription:"sortable"};function Zje(e){let{disabled:t,index:a,node:s,rect:r}=e;const[i,o]=f.useState(null),l=f.useRef(a);return Ro(()=>{if(!t&&a!==l.current&&s.current){const c=r.current;if(c){const d=th(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&o(u)}}a!==l.current&&(l.current=a)},[t,a,s,r]),f.useEffect(()=>{i&&o(null)},[i]),i}function Jje(e){let{animateLayoutChanges:t=Yje,attributes:a,disabled:s,data:r,getNewIndex:i=Vje,id:o,strategy:l,resizeObserverConfig:c,transition:d=Qje}=e;const{items:u,containerId:h,activeIndex:p,disabled:x,disableTransforms:b,sortedRects:N,overIndex:v,useDragOverlay:j,strategy:w}=f.useContext(RV),S=e1e(s,x),A=u.indexOf(o),E=f.useMemo(()=>({sortable:{containerId:h,index:A,items:u},...r}),[h,r,A,u]),_=f.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:k,node:T,isOver:O,setNodeRef:$}=Bje({id:o,data:E,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:R,activatorEvent:P,activeNodeRect:I,attributes:H,setNodeRef:Q,listeners:G,isDragging:K,over:W,setActivatorNodeRef:J,transform:Te}=Rje({id:o,data:E,attributes:{...Xje,...a},disabled:S.draggable}),ee=bNe($,Q),U=!!R,je=U&&!b&&Hy(p)&&Hy(v),be=!j&&K,le=be&&je?Te:null,Se=je?le??(l??w)({rects:N,activeNodeRect:I,activeIndex:p,overIndex:v,index:A}):null,Oe=Hy(p)&&Hy(v)?i({id:o,items:u,activeIndex:p,overIndex:v}):A,ge=R?.id,He=f.useRef({activeId:ge,items:u,newIndex:Oe,containerId:h}),Ne=u!==He.current.items,he=t({active:R,containerId:h,isDragging:K,isSorting:U,id:o,index:A,items:u,newIndex:He.current.newIndex,previousItems:He.current.items,previousContainerId:He.current.containerId,transition:d,wasDragging:He.current.activeId!=null}),Z=Zje({disabled:!he,index:A,node:T,rect:k});return f.useEffect(()=>{U&&He.current.newIndex!==Oe&&(He.current.newIndex=Oe),h!==He.current.containerId&&(He.current.containerId=h),u!==He.current.items&&(He.current.items=u)},[U,Oe,h,u]),f.useEffect(()=>{if(ge===He.current.activeId)return;if(ge!=null&&He.current.activeId==null){He.current.activeId=ge;return}const ke=setTimeout(()=>{He.current.activeId=ge},50);return()=>clearTimeout(ke)},[ge]),{active:R,activeIndex:p,attributes:H,data:E,rect:k,index:A,newIndex:Oe,items:u,isOver:O,isSorting:U,isDragging:K,listeners:G,node:T,overIndex:v,over:W,setNodeRef:ee,setActivatorNodeRef:J,setDroppableNodeRef:$,setDraggableNodeRef:Q,transform:Z??Se,transition:_e()};function _e(){if(Z||Ne&&He.current.newIndex===A)return Kje;if(!(be&&!q4(P)||!d)&&(U||he))return Ap.Transition.toString({...d,property:zV})}}function e1e(e,t){var a,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function zv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const t1e=[vn.Down,vn.Right,vn.Up,vn.Left],n1e=(e,t)=>{let{context:{active:a,collisionRect:s,droppableRects:r,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(t1e.includes(e.code)){if(e.preventDefault(),!a||!s)return;const c=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=r.get(h.id);if(p)switch(e.code){case vn.Down:s.top<p.top&&c.push(h);break;case vn.Up:s.top>p.top&&c.push(h);break;case vn.Left:s.left>p.left&&c.push(h);break;case vn.Right:s.left<p.left&&c.push(h);break}});const d=INe({collisionRect:s,droppableRects:r,droppableContainers:c});let u=CV(d,"id");if(u===o?.id&&d.length>1&&(u=d[1].id),u!=null){const h=i.get(a.id),p=i.get(u),x=p?r.get(p.id):null,b=p?.node.current;if(b&&x&&h&&p){const v=ej(b).some((_,k)=>l[k]!==_),j=FV(h,p),w=a1e(h,p),S=v||!j?{x:0,y:0}:{x:w?s.width-x.width:0,y:w?s.height-x.height:0},A={x:x.left,y:x.top};return S.x&&S.y?A:_p(A,S)}}}};function FV(e,t){return!zv(e)||!zv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function a1e(e,t){return!zv(e)||!zv(t)||!FV(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Lo=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,EE=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",s1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},r1e=(e,t)=>{if(!e||e.length===0)return;const a=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:EE(c.created_at)})),s=Object.keys(a[0]).join(","),r=a.map(c=>Object.values(c).map(d=>typeof d=="string"?`"${d.replace(/"/g,'""')}"`:d).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),o=encodeURI(i),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${t}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},kE=({label:e,count:t,value:a,width:s,color:r,onClick:i,isActive:o,isLead:l,weightedValue:c,currencySymbol:d,conversionRate:u,compact:h=!1})=>n.jsxs("div",{className:"flex flex-col items-center w-full",children:[u&&n.jsx("div",{className:`flex justify-center relative z-0 ${h?"-my-1":"-my-2 mb-1"}`,children:n.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${h?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[n.jsx(DT,{className:"mr-1"})," ",u,"%"]})}),n.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${o?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[n.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[n.jsx("span",{className:`${h?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${o?"text-blue-700":"text-gray-500"}`,children:e}),n.jsx("span",{className:`${h?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),n.jsxs("div",{className:`${h?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[n.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:n.jsx("span",{className:`z-10 drop-shadow-md ${h?"text-xs":"text-sm"}`,children:l?t:Lo(a,d)})}),!l&&c>0&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/a*parseFloat(s)}%`}})]})]})]}),i1e=({id:e,children:t})=>{const{attributes:a,listeners:s,setNodeRef:r,transform:i,transition:o,isDragging:l}=Jje({id:e}),c={transform:Ap.Transform.toString(i),transition:o,zIndex:l?50:"auto",opacity:l?.5:1,position:"relative"};return n.jsx("div",{ref:r,style:c,className:"h-full",children:bt.cloneElement(t,{dragHandleProps:{...a,...s}})})},o1e=({user:e,metrics:t,stages:a,currencySymbol:s,target:r,dragHandleProps:i})=>{const o=t.metrics.CLOSED_WON?.value||0,l=t.metrics.CLOSED_LOST?.value||0,c=t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count,d=c>0?(t.metrics.CLOSED_WON.count/c*100).toFixed(0):0,u=r>0?o/r*100:0;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow relative group",children:[n.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),n.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[n.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",d,"%"]}),n.jsxs("span",{className:"text-red-600 bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:["Lost: ",Lo(l,s)]})]})]})]}),i&&n.jsx("button",{...i,className:"p-1.5 text-gray-300 hover:text-blue-500 hover:bg-blue-50 rounded-md cursor-grab active:cursor-grabbing transition-colors touch-none",title:"Drag to reorder",children:n.jsx(Die,{size:16})})]}),r>0?n.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[n.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),n.jsxs("span",{className:u>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[u.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${u>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(u,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Lo(o,s)})]}),n.jsxs("span",{children:["Target: ",Lo(r,s)]})]})]}):n.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),n.jsx("div",{className:"flex-grow space-y-2",children:a.map((h,p)=>{const x=t.metrics[h.key];let b=null;if(p>0){const N=a[p-1].key,v=t.metrics[N].count;v>0&&(b=(x.count/v*100).toFixed(0))}return n.jsx(kE,{label:h.label,count:x.count,value:x.value,width:x.width,color:x.color,isLead:!h.isDeal,weightedValue:x.weightedValue,currencySymbol:s,conversionRate:b,compact:!0,onClick:()=>{},isActive:!1},h.key)})})]})},l1e=({data:e,stageKey:t,currencySymbol:a,basePath:s="/admin"})=>{const r=wt(),[i,o]=f.useState({key:null,direction:"desc"}),l=t==="LEADS",c=t==="CLOSED_WON",d=t==="CLOSED_LOST",u=!l&&!c&&!d,h=f.useMemo(()=>i.key?[...e].sort((b,N)=>{let v=b[i.key],j=N[i.key];return(i.key==="amount"||i.key==="probability")&&(v=parseFloat(b[i.key]||0),j=parseFloat(N[i.key]||0)),v<j?i.direction==="asc"?-1:1:v>j?i.direction==="asc"?1:-1:0}):e,[e,i]),p=b=>{o({key:b,direction:i.key===b&&i.direction==="desc"?"asc":"desc"})},x=({columnKey:b})=>i.key!==b?n.jsx(DT,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):i.direction==="asc"?n.jsx(Sie,{className:"inline ml-1 text-blue-600"}):n.jsx(DT,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[n.jsx(nL,{size:48,className:"mb-4 opacity-50"}),n.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:n.jsx("div",{className:"overflow-x-auto flex-grow",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>p("name"),children:["Name ",n.jsx(x,{columnKey:"name"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),l&&n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>p("amount"),children:["Value ",n.jsx(x,{columnKey:"amount"})]}),n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>p("probability"),children:["Prob. ",n.jsx(x,{columnKey:"probability"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),c&&n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>p("amount"),children:["Booked ",n.jsx(x,{columnKey:"amount"})]}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-red-600 cursor-pointer group",onClick:()=>p("amount"),children:["Lost Value ",n.jsx(x,{columnKey:"amount"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Lost Date"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:h.map(b=>{const N=l?0:s1e(b.stage_updated_at||b.created_at),v=N>30&&u;return n.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>r(l?`${s}/leads/${b.id}`:`${s}/deals/info?id=${b.id}`),children:[n.jsxs("td",{className:"p-4",children:[n.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:l?`${b.first_name} ${b.last_name}`:b.name}),n.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:EE(b.created_at)})]}),n.jsx("td",{className:"p-4 text-sm text-gray-600",children:l?b.company_name:b.account?.name}),l&&n.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[b.email&&n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx(na,{className:"mr-1"})," ",b.email]}),b.phone&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lt,{className:"mr-1"})," ",b.phone]})]}),u&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:Lo(b.amount,a)}),n.jsx("td",{className:"p-4 text-center",children:n.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${b.probability>=80?"bg-green-100 text-green-700":b.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[b.probability,"%"]})}),n.jsx("td",{className:"p-4 text-center",children:v?n.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[n.jsx(Wi,{size:14,className:"mr-1"}),n.jsxs("span",{className:"text-xs font-bold",children:[N,"d"]})]}):n.jsxs("span",{className:"text-xs text-gray-400",children:[N,"d"]})})]}),c&&n.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:Lo(b.amount,a)}),d&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-bold text-red-600 opacity-75",children:Lo(b.amount,a)}),n.jsx("td",{className:"p-4 text-center text-xs text-gray-500",children:EE(b.stage_updated_at)})]}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[n.jsx(nn,{className:"mr-1"}),l?b.lead_owner?.first_name||b.owner?.first_name||b.assigned_to?.first_name||"Unassigned":b.assigned_deals?.first_name||b.deal_creator?.first_name||"Unassigned"]})})]},b.id)})})]})})})},aj=({leads:e,deals:t,currencySymbol:a,targets:s=[],basePath:r="/admin"})=>{const[i,o]=f.useState("ALL"),[l,c]=f.useState("ALL"),[d,u]=f.useState("ALL"),[h,p]=f.useState("AGGREGATE"),[x,b]=f.useState([]),N=DNe(J6(Y4,{activationConstraint:{distance:5}}),J6(G4,{coordinateGetter:n1e})),v=f.useMemo(()=>{const T=new Date;if(l==="THIS_MONTH")return{start:new Date(T.getFullYear(),T.getMonth(),1),end:new Date(T.getFullYear(),T.getMonth()+1,0)};if(l==="THIS_QUARTER"){const O=Math.floor(T.getMonth()/3)*3;return{start:new Date(T.getFullYear(),O,1),end:new Date(T.getFullYear(),O+3,0)}}return l==="THIS_YEAR"?{start:new Date(T.getFullYear(),0,1),end:new Date(T.getFullYear(),11,31)}:null},[l]),j=f.useMemo(()=>s.filter(T=>{if(d!=="ALL"){const O=T.user?.id||T.user_id||T.assigned_to;if(parseInt(O)!==parseInt(d))return!1}if(v){const O=new Date(T.start_date),$=new Date(T.end_date);return O<=v.end&&$>=v.start}return!0}),[s,d,v]),w=f.useMemo(()=>{const T=new Map,O=$=>{$&&$.id&&T.set($.id,`${$.first_name} ${$.last_name}`)};return e.forEach($=>O($.lead_owner||$.owner||$.assigned_to)),t.forEach($=>{O($.assigned_deals),O($.deal_creator)}),Array.from(T.entries()).map(([$,R])=>({id:$,name:R}))},[e,t]),S=f.useMemo(()=>{const T=new Date;let O=null;l==="THIS_MONTH"?O=new Date(T.getFullYear(),T.getMonth(),1):l==="THIS_QUARTER"?O=new Date(T.getFullYear(),Math.floor(T.getMonth()/3)*3,1):l==="THIS_YEAR"&&(O=new Date(T.getFullYear(),0,1));const $=K=>{const W=new Date(K.created_at);if(O&&W<O)return!1;if(d!=="ALL"){const J=parseInt(d);return!!(K.lead_owner&&(K.lead_owner.id||K.lead_owner)===J||K.assigned_to?.id===J||K.owner?.id===J||K.assigned_deals?.id===J||K.created_by===J)}return!0},R=e.filter($),P=t.filter($),I=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],H=(K,W)=>{const J=I.reduce((ee,U)=>(ee[U.key]={...U,count:0,value:0,weightedValue:0,items:[]},ee),{});J.LEADS.count=K.length,J.LEADS.items=K,W.forEach(ee=>{const U=(ee.stage||"").toUpperCase();if(J[U]){J[U].count++,J[U].items.push(ee);const je=parseFloat(ee.amount||0);J[U].value+=je,J[U].weightedValue+=je*((ee.probability||0)/100)}});const Te=Math.max(...Object.values(J).map(ee=>ee.count),1);return Object.keys(J).forEach(ee=>{const U=J[ee];U.width=U.count===0?"0%":`${Math.max(U.count/Te*100,15)}%`}),{metrics:J,filteredDeals:W,filteredLeads:K}},Q=H(R,P),G=[];return h==="COMPARE"&&(d==="ALL"?w:w.filter(W=>W.id===parseInt(d))).forEach(W=>{const J=parseInt(W.id),Te=R.filter(be=>(be.lead_owner?.id||be.lead_owner||be.assigned_to?.id||be.owner?.id)===J),ee=P.filter(be=>(be.assigned_deals?.id||be.created_by)===J),U=j.find(be=>{const le=be.user?.id||be.user_id||be.assigned_to;return parseInt(le)===J}),je=parseFloat(U?.amount||U?.target_amount||U?.value||0);(Te.length>0||ee.length>0||je>0)&&G.push({user:W,data:H(Te,ee),target:je})}),{stages:I,aggregate:Q,userGroups:G}},[t,e,l,d,h,w,j]),A=f.useMemo(()=>{if(!S.userGroups.length)return[];const T=[...S.userGroups];return x.length>0&&T.sort((O,$)=>{const R=x.indexOf(O.user.id),P=x.indexOf($.user.id);return R!==-1&&P!==-1?R-P:R!==-1?-1:P!==-1?1:0}),T},[S.userGroups,x]),E=T=>{const{active:O,over:$}=T;O.id!==$.id&&b(()=>{const R=A.map(H=>H.user.id),P=R.indexOf(O.id),I=R.indexOf($.id);return Q4(R,P,I)})},_=f.useMemo(()=>{const T=j.reduce((J,Te)=>J+parseFloat(Te.amount||Te.target_amount||Te.value||0),0),O=S.aggregate.metrics,$=O.CLOSED_WON?.value||0,R=O.CLOSED_WON?.count||0,P=O.CLOSED_LOST?.value||0,I=O.CLOSED_LOST?.count||0,H=O.LEADS?.count||0,Q=T>0?$/T*100:0,G=R+I,K=G>0?R/G*100:0,W=H>0?R/H*100:0;return{totalTarget:T,totalWon:$,totalLost:P,progress:Q,winRate:K,conversionRate:W}},[j,S]),k=f.useMemo(()=>i==="ALL"?[]:S.aggregate.metrics[i]?.items||[],[i,S]);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[n.jsx(nL,{className:"mr-2"})," Pipeline Intelligence"]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Analyze pipeline velocity and bottlenecks."})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[n.jsxs("select",{value:l,onChange:T=>c(T.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Time"}),n.jsx("option",{value:"THIS_MONTH",children:"This Month"}),n.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),n.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),n.jsxs("select",{value:d,onChange:T=>u(T.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Users"}),w.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]}),n.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[n.jsx("button",{onClick:()=>p("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${h==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),n.jsx("button",{onClick:()=>p("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${h==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]}),h==="COMPARE"?n.jsx(Mje,{sensors:N,collisionDetection:MNe,onDragEnd:E,children:n.jsx(Gje,{items:A.map(T=>T.user.id),strategy:K4,children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[A.map(T=>n.jsx(i1e,{id:T.user.id,children:n.jsx(o1e,{user:T.user,metrics:T.data,stages:S.stages.filter(O=>O.key!=="CLOSED_LOST"),currencySymbol:a,target:T.target})},T.user.id)),A.length===0&&n.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]})})}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[n.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-4 bottom-4 w-0.5 bg-gray-100 -z-0"}),S.stages.filter(T=>T.key!=="CLOSED_LOST").map((T,O)=>{const $=S.aggregate.metrics[T.key];let R=null;if(O>0){const P=S.stages[O-1].key,I=S.aggregate.metrics[P].count;I>0&&(R=($.count/I*100).toFixed(0))}return n.jsx(kE,{label:T.label,count:$.count,value:$.value,width:$.width,color:$.color,isLead:!T.isDeal,weightedValue:$.weightedValue,currencySymbol:a,isActive:i===T.key,conversionRate:R,onClick:()=>o(T.key)},T.key)})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsx("div",{className:"mb-2 text-xs font-bold text-gray-400 uppercase",children:"Funnel Health"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[n.jsxs("div",{className:"bg-green-50 rounded p-2 border border-green-100",children:[n.jsx("p",{className:"text-[9px] text-green-600 uppercase font-bold",children:"Win Rate"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[_.winRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-100",children:[n.jsx("p",{className:"text-[9px] text-blue-600 uppercase font-bold",children:"Conversion"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[_.conversionRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-red-50 rounded p-2 border border-red-100",children:[n.jsx("p",{className:"text-[9px] text-red-600 uppercase font-bold",children:"Lost Value"}),n.jsx("p",{className:"text-sm font-bold text-gray-800",children:Lo(_.totalLost,a)})]})]}),n.jsx(kE,{label:"Closed Lost",count:S.aggregate.metrics.CLOSED_LOST.count,value:S.aggregate.metrics.CLOSED_LOST.value,width:S.aggregate.metrics.CLOSED_LOST.width,color:"bg-red-500 opacity-90",isLead:!1,weightedValue:0,currencySymbol:a,isActive:i==="CLOSED_LOST",onClick:()=>o("CLOSED_LOST")},"CLOSED_LOST"),n.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[n.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[n.jsx(lr,{className:"mr-1"})," Total Target"]}),n.jsxs("span",{className:_.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[_.progress.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${_.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(_.progress,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Lo(_.totalWon,a)})]}),n.jsxs("span",{children:["Goal: ",Lo(_.totalTarget,a)]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-8 h-[600px] flex flex-col",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:i==="ALL"?n.jsx("span",{children:"Select a stage to view details"}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${S.aggregate.metrics[i]?.color}`}),S.stages.find(T=>T.key===i)?.label," Details",n.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[k.length," records"]})]})}),i!=="ALL"&&k.length>0&&n.jsxs("button",{onClick:()=>r1e(k,`Funnel_${i}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[n.jsx(Ql,{className:"mr-1"})," Export"]})]}),i==="ALL"?n.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[n.jsx(kie,{size:48,className:"mb-4 text-blue-100"}),n.jsx("p",{children:"Click on any stage bar (including Lost Deals) to inspect records."})]}):n.jsx(l1e,{data:k,stageKey:i,currencySymbol:a,basePath:r})]})]})]})},c1e=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e)}`,d1e=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-s)/864e5+1)/7)},sj=({currencySymbol:e=""})=>{const[t,a]=f.useState("month"),[s,r]=f.useState([]),[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState(!1),h=new Date,p=h.getFullYear(),x=h.getMonth()+1,b=d1e(h),N=f.useCallback(async()=>{u(!0);try{const S=new URLSearchParams;S.append("period_type","MONTHLY"),S.append("period_year",p),S.append("period_number",x);const A=await te.get(`/targets/leaderboard?${S.toString()}`).catch(()=>({data:{entries:[]}}));o(A.data?.entries||[]);const E=new URLSearchParams;E.append("period_type","ANNUAL"),E.append("period_year",p);const _=await te.get(`/targets/leaderboard?${E.toString()}`).catch(()=>({data:{entries:[]}}));c(_.data?.entries||[]);const k=new Date,T=new Date;T.setDate(T.getDate()-7);const O=new URLSearchParams;O.append("start_date",T.toISOString().split("T")[0]),O.append("end_date",k.toISOString().split("T")[0]);const $=await te.get(`/targets/leaderboard?${O.toString()}`).catch(()=>({data:{entries:[]}}));r($.data?.entries||[])}catch(S){console.error("Error fetching leaderboard data:",S)}finally{u(!1)}},[p,x]);f.useEffect(()=>{N()},[N]);const v=f.useMemo(()=>{let S=[];switch(t){case"week":S=s;break;case"month":S=i;break;case"year":S=l;break;default:S=i}return Array.isArray(S)?S.slice(0,5):[]},[t,s,i,l]),j=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"year",label:"Year"}],w=S=>{switch(S){case 0:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 1:return"bg-gray-100 text-gray-600 border-gray-300";case 2:return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-50 text-gray-500 border-gray-200"}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sd,{className:"text-blue-500",size:20}),n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Top 5 Performers"})]})}),n.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:j.map(S=>n.jsx("button",{onClick:()=>a(S.id),className:`flex-1 py-1.5 px-3 text-xs font-medium rounded-md transition-all duration-200 ${t===S.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:S.label},S.id))}),d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):v.length>0?n.jsx("div",{className:"space-y-3 flex-1",children:v.map((S,A)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border ${w(A)}`,children:A+1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-[120px]",children:S.user_name||"Unknown Rep"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full ${S.achievement_percentage>=100?"bg-green-500":S.achievement_percentage>=50?"bg-yellow-500":"bg-red-400"}`,style:{width:`${Math.min(S.achievement_percentage,100)}%`}})}),n.jsxs("span",{className:"text-[10px] text-gray-500",children:[S.achievement_percentage?.toFixed(1),"%"]})]})]})]}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:c1e(S.achieved_amount||0,e)})]},S.user_id||A))}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[n.jsx(Et,{size:32,className:"mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No data for this period"})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:n.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:[t==="week"&&`Week ${b}, ${p}`,t==="month"&&`${h.toLocaleString("default",{month:"long"})} ${p}`,t==="year"&&`Year ${p}`]})})]})},u1e=e=>n.jsx(Wt,{...e}),m1e=e=>n.jsx(yd,{...e}),X4=e=>n.jsx(Gs,{...e}),f1e=e=>n.jsx(sx,{...e}),h1e=e=>n.jsx(Bw,{...e}),g1e=e=>n.jsx(Et,{...e}),p1e=e=>n.jsx(Lt,{...e}),x1e=e=>n.jsx(qw,{...e}),UV=e=>n.jsx(Hw,{...e}),y1e=e=>n.jsx(aa,{...e}),BV=e=>n.jsx(nn,{...e}),b1e=e=>n.jsx(Qn,{...e}),HV=e=>n.jsx(tn,{...e}),v1e=e=>n.jsx(hn,{...e}),qV=e=>n.jsx(lr,{...e}),w1e=e=>n.jsx(pa,{...e}),N1e=e=>n.jsx(Et,{...e}),j1e=e=>n.jsx($s,{...e}),C1e=e=>n.jsx(Xl,{...e}),S1e=e=>n.jsx(As,{...e}),WV=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},_1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},A1e=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},T1e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},E1e=e=>{switch(e){case"call":return{Icon:p1e,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:x1e,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:g1e,color:"text-blue-500",bgColor:"bg-blue-100"}}},k1e=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},L1e=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=f.useState(!1),l=f.useRef(null),c=[{icon:m1e,label:"Account"},{icon:BV,label:"Contact"},{icon:b1e,label:"Leads"},{icon:HV,label:"Deals"},{icon:v1e,label:"Quotes"},{icon:qV,label:"Target"},{icon:w1e,label:"Task"},{icon:N1e,label:"Meeting"},{icon:j1e,label:"Call"},{icon:S1e,label:"Audit"},{icon:C1e,label:"Territory"}];f.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{t(h.target.value),o(h.target.value.trim().length>0)},u=h=>{s&&s(h),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(u1e,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((h,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(h),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,title:h.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[h.label]&&r(x[h.label])},children:n.jsx(h.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[h.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},P1e=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const h=new Date(u),x=new Date-h,b=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return b<1?"Just now":b<60?`${b} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},D1e=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(UV,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(P1e,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},O1e=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),M1e=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=f.useMemo(()=>{if(!e||e.length===0){const N=new Date().getMonth(),v=[],j=[];for(let w=0;w<=N;w++)v.push(s[w]),j.push(0);return{labels:v,revenues:j,maxRevenue:0}}const l={};e.forEach(b=>{const N=b.close_date||b.closeDate||null,v=b.stage||"",j=v.toUpperCase()==="CLOSED_WON"||v==="CLOSED_WON";let w=b.amount;w&&typeof w=="object"&&w.toString?w=parseFloat(w.toString()):w=parseFloat(w)||0;const S=w>0;if(N&&N!==null&&j&&S)try{let A=new Date(N);if(isNaN(A.getTime())){const E=String(N).split("T")[0];A=new Date(E+"T00:00:00")}if(!isNaN(A.getTime())){const E=A.getFullYear(),_=A.getMonth()+1,k=`${E}-${String(_).padStart(2,"0")}`;l[k]||(l[k]=0),l[k]+=w}}catch(A){console.error("Error parsing deal date:",N,A)}});const c=Object.keys(l).map(b=>parseInt(b.split("-")[0])),d=c.length>0?[...new Set(c)].sort():[],u=new Date().getFullYear(),h=[],p=[];for(let b=0;b<12;b++){const N=`${u}-${String(b+1).padStart(2,"0")}`;h.push(s[b]),p.push(l[N]||0)}if(d.length>0){const b=Math.max(...d);if(b>u)for(let N=u+1;N<=b;N++)for(let v=0;v<12;v++){const j=`${N}-${String(v+1).padStart(2,"0")}`,w=l[j]||0;h.push(`${s[v]} ${N}`),p.push(w)}}const x=Math.max(...p,1);return{labels:h,revenues:p,maxRevenue:x}},[e]),i=r.labels,o=r.revenues;return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(UV,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&o&&o.length>0?n.jsx(ZN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},d2=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},I1e=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=T1e(s||"Website"),d=x=>{if(!x)return"Unknown";const b=new Date(x),v=new Date-b,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",h=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:h})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},$1e=({name:e,amount:t,account:a,stage:s,created_at:r,stage_updated_at:i,id:o,previousAmount:l,currencySymbol:c})=>{const d=wt(),h={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=A1e(h),b=_1e(i||r),N=b>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",v=parseFloat(t||0),j=l?v>=l?"up":"down":"up",w=j==="up"?f1e:h1e,S=j==="up"?"text-green-400":"text-red-400",A=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>o&&d(`/admin/deals/info?id=${o}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),N&&n.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[n.jsx(X4,{size:10,className:"mr-1"})," ",b," days stuck"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:A}),n.jsx("div",{className:"mt-1 flex items-center space-x-2",children:n.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:h})})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:WV(v,c)}),n.jsx(w,{size:16,className:`${S} mt-1`})]})]})})},R1e=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:b}=E1e(h),{text:N,bg:v}=k1e(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const k=new Date(_),O=k-new Date,$=Math.floor(O/864e5);return $===0?`Today, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:$===1?`Tomorrow, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:$===-1?`Yesterday, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:k.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",E=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/admin/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/admin/meetings/info?id=${o}`)):d("/admin/tasks"):d(h==="call"?`/admin/calls/info?id=${o}`:h==="meeting"?`/admin/meetings/info?id=${o}`:"/admin/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[n.jsx("div",{className:`p-2 rounded-lg ${b} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(X4,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(BV,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},z1e=()=>{const e=wt(),{user:t}=en(),a=t?.company?.currency||"",[s,r]=f.useState([]),[i,o]=f.useState(0),[l,c]=f.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[d,u]=f.useState([]),[h,p]=f.useState([]),[x,b]=f.useState([]),[N,v]=f.useState([]),[j,w]=f.useState([]),[S,A]=f.useState(!0),[E,_]=f.useState(null),[k,T]=f.useState(""),[O,$]=f.useState([]),[R,P]=f.useState([]),[I,H]=f.useState([]),[Q,G]=f.useState(new Date),K=f.useRef(null);f.useRef(null);const W=f.useMemo(()=>{try{if(!k.trim())return[];const U=k.toLowerCase().trim(),je=[];return Array.isArray(O)&&O.forEach(be=>{const le=`${be.first_name||""} ${be.last_name||""}`.trim().toLowerCase(),Ce=(be.company_name||"").toLowerCase(),Se=(be.email||"").toLowerCase(),Oe=(be.phone||"").toLowerCase();(le.includes(U)||Ce.includes(U)||Se.includes(U)||Oe.includes(U))&&je.push({id:be.id,name:`${be.first_name||""} ${be.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:be.company_name||"No company",route:`/admin/leads/${be.id}`})}),Array.isArray(R)&&R.forEach(be=>{const le=(be.name||"").toLowerCase(),Ce=(be.account?.name||"").toLowerCase(),Se=(be.description||"").toLowerCase();(le.includes(U)||Ce.includes(U)||Se.includes(U))&&je.push({id:be.id,name:be.name||"Unnamed Deal",type:"Deal",details:be.account?.name||"No account",route:`/admin/deals/info?id=${be.id}`})}),Array.isArray(I)&&I.forEach(be=>{const le=(be.name||"").toLowerCase(),Ce=(be.email||"").toLowerCase(),Se=(be.phone||"").toLowerCase(),Oe=(be.website||"").toLowerCase();(le.includes(U)||Ce.includes(U)||Se.includes(U)||Oe.includes(U))&&je.push({id:be.id,name:be.name||"Unnamed Account",type:"Account",details:be.email||be.phone||"No contact info",route:"/admin/accounts"})}),je.slice(0,10)}catch(U){return console.error("Error in search:",U),[]}},[k,O,R,I]),J=U=>{U.route&&(e(U.route),T(""))},Te=f.useCallback(async()=>{A(!0),_(null);try{const[U,je,be,le,Ce,Se,Oe,ge]=await Promise.all([te.get("/leads/admin/getLeads").catch(Ie=>(console.error("Error fetching leads:",Ie),{data:[]})),te.get("/deals/admin/fetch-all").catch(Ie=>(console.error("Error fetching deals:",Ie),{data:[]})),te.get("/accounts/admin/fetch-all").catch(Ie=>(console.error("Error fetching accounts:",Ie),{data:[]})),te.get("/tasks/all").catch(Ie=>(console.error("Error fetching tasks:",Ie),{data:[]})),te.get("/meetings/admin/fetch-all").catch(Ie=>(console.error("Error fetching meetings:",Ie),{data:[]})),te.get("/calls/admin/fetch-all").catch(Ie=>(console.error("Error fetching calls:",Ie),{data:[]})),te.get("/logs/read-all").catch(Ie=>(console.error("Error fetching logs:",Ie),{data:[]})),te.get("/targets/admin/fetch-all").catch(Ie=>(console.error("Error fetching targets:",Ie),{data:[]}))]),He=Array.isArray(U.data)?U.data:[],Ne=Array.isArray(je.data)?je.data:[],he=Array.isArray(be.data)?be.data:[],Z=Array.isArray(le.data)?le.data:[],_e=Array.isArray(Ce.data)?Ce.data:[],ke=Array.isArray(Se.data)?Se.data:[],ze=Array.isArray(Oe.data)?Oe.data:[],tt=Array.isArray(ge.data)?ge.data:[];$(He),P(Ne),H(he),r(tt);const De=tt.reduce((Ie,pe)=>{const Be=pe.amount||pe.value||pe.target_amount||0,$e=parseFloat(typeof Be=="string"?Be.replace(/[^\d.-]/g,""):Be);return Ie+(isNaN($e)?0:$e)},0);o(De),c({activeLeads:He.filter(Ie=>Ie.status&&!["Lost","Converted"].includes(Ie.status)).length,totalDeals:Ne.length,activeAccounts:he.length,overdueTasks:Z.filter(Ie=>!Ie.dueDate||Ie.status==="Completed"?!1:new Date(Ie.dueDate)<new Date).length});const at=[...He].sort((Ie,pe)=>new Date(pe.created_at||0)-new Date(Ie.created_at||0)).slice(0,5);u(at);const et=[...Ne].sort((Ie,pe)=>new Date(pe.created_at||0)-new Date(Ie.created_at||0)).slice(0,5);p(et);const V=[];ke.forEach(Ie=>{const pe=Ie.due_date||Ie.call_time,Be=(Ie.status||"").toUpperCase();pe&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(Be)&&V.push({type:"Call",title:Ie.subject||"Untitled Call",assignedTo:Ie.assigned_to||(Ie.call_assign_to?`${Ie.call_assign_to.first_name||""} ${Ie.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:pe,priority:(Ie.priority||"MEDIUM").toUpperCase(),id:Ie.id,activityType:"call",fullData:Ie})}),_e.forEach(Ie=>{const pe=Ie.dueDate||Ie.start_time,Be=(Ie.status||"").toUpperCase();pe&&!["COMPLETED","CANCELLED","DONE"].includes(Be)&&V.push({type:"Meeting",title:Ie.subject||Ie.activity||"Untitled Meeting",assignedTo:Ie.assignedTo||(Ie.meet_assign_to?`${Ie.meet_assign_to.first_name||""} ${Ie.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:pe,priority:(Ie.priority||"MEDIUM").toUpperCase(),id:Ie.id,activityType:"meeting",fullData:Ie})});const ne={HIGH:1,MEDIUM:2,LOW:3},se=V.sort((Ie,pe)=>{const Be=ne[Ie.priority]||3,$e=ne[pe.priority]||3;return Be!==$e?Be-$e:new Date(Ie.scheduledDate||0)-new Date(pe.scheduledDate||0)}).slice(0,5);b(se),w(Ne);const Ee=[...ze].sort((Ie,pe)=>new Date(pe.timestamp||0)-new Date(Ie.timestamp||0));v(Ee)}catch(U){console.error("Error fetching dashboard data:",U),_("Failed to load dashboard data. Please refresh the page.")}finally{A(!1)}},[]);f.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",Te(),K.current=setInterval(()=>{Te(),G(new Date)},3e4),()=>{K.current&&clearInterval(K.current)}),[Te]);const ee=[{icon:y1e,title:"Active Leads",value:l.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:qV,title:"Total Targets",value:WV(i,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:HV,title:"Total Deals",value:l.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:X4,title:"Overdue Tasks",value:l.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[E&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:E})}),n.jsx("div",{className:"mb-8",children:n.jsx(L1e,{searchQuery:k,onSearchChange:T,searchResults:W,onSearchResultClick:J})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:ee.map(U=>n.jsx(O1e,{...U,loading:S},U.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(D1e,{logs:N,loading:S}),n.jsx(sj,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(aj,{leads:O,deals:R,targets:s,currencySymbol:a})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(M1e,{revenueData:j,loading:S})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(d2,{title:"Latest Leads",children:d.length>0?d.map((U,je)=>n.jsx(I1e,{...U},U.id||je)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(d2,{title:"Latest Deals",children:h.length>0?h.map((U,je)=>n.jsx($1e,{...U,stage_updated_at:U.stage_updated_at,currencySymbol:a},U.id||je)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(d2,{title:"Upcoming Activities",children:x.length>0?x.map((U,je)=>n.jsx(R1e,{...U},U.id||je)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function rn({totalItems:e=0,pageSize:t=10,currentPage:a=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:o=[10,20,30,40,50],className:l="",label:c="records"}){const d=e===0?1:Math.ceil(e/t),u=e===0?0:(a-1)*t+1,h=Math.min(a*t,e),p=a<=1||e===0,x=a>=d||e===0,b="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",N="bg-black text-white hover:bg-gray-900",v="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return n.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${l}`,children:[n.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:u,"-",h," of ",e," ",c]}),i&&n.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[n.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),n.jsx("select",{value:t,onChange:j=>i(Number(j.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:o.map(j=>n.jsx("option",{value:j,children:j},j))})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[n.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${b} ${p?v:N}`,children:[n.jsx(Tie,{className:"text-base"}),"Prev"]}),n.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:a," of"," ",e===0?0:d]}),n.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${b} ${x?v:N}`,children:["Next",n.jsx(Dt,{className:"text-base"})]})]})]})}const F1e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U1e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,s)=>s?s.toUpperCase():a.toLowerCase()),mR=e=>{const t=U1e(e);return t.charAt(0).toUpperCase()+t.slice(1)},GV=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim(),B1e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var H1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const q1e=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...H1e,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:GV("lucide",r),...!i&&!B1e(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(i)?i:[i]]));const nh=(e,t)=>{const a=f.forwardRef(({className:s,...r},i)=>f.createElement(q1e,{ref:i,iconNode:t,className:GV(`lucide-${F1e(mR(e))}`,`lucide-${e}`,s),...r}));return a.displayName=mR(e),a};const W1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],G1e=nh("globe",W1e);const V1e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fR=nh("lock",V1e);const Y1e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Q1e=nh("message-circle",Y1e);const K1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],X1e=nh("message-square",K1e);const Z1e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],J1e=nh("send",Z1e);const eCe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rj=nh("x",eCe);function Aa({comments:e=[],onAddComment:t,currentUser:a}){const[s,r]=f.useState(""),[i,o]=f.useState(!1),[l,c]=f.useState(!1),d=async u=>{if(u.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(h){console.error("Failed to add comment:",h)}finally{c(!1)}}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[n.jsx(X1e,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&n.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),n.jsx("div",{className:"mt-4",children:e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(Q1e,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),n.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):n.jsx("div",{className:"space-y-3",children:e.map(u=>n.jsxs("div",{className:"flex gap-3 p-3 bg-gray-100 rounded-lg border border-gray-100",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-9 h-9 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:u.comment_creator?.profile_picture?n.jsx("img",{src:`${u.comment_creator.profile_picture}`,alt:`${u.comment_creator?.first_name||u.comment_creator?.email||"User"}'s profile`,className:"w-9 h-9 rounded-full object-cover"}):u.comment_creator?.first_name?.[0]||u.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:u.comment_creator?.first_name||u.comment_creator?.email||"Unknown User"}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),u.is_private&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[n.jsx(fR,{className:"w-3 h-3"}),"Private"]})]}),n.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words text-xs",children:u.comment})]})]},u.id))})}),n.jsxs("form",{onSubmit:d,className:"mt-6 pt-4 border-t border-gray-200 text-sm",children:[n.jsx("div",{className:"relative",children:n.jsx("textarea",{value:s,onChange:u=>r(u.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsx("button",{type:"button",onClick:()=>o(!i),className:`cursor-pointer flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsx(fR,{className:"w-4 h-4"}),"Private"]}):n.jsxs(n.Fragment,{children:[n.jsx(G1e,{className:"w-4 h-4"}),"Public"]})}),n.jsxs("button",{type:"submit",disabled:!s.trim()||l,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n.jsx(J1e,{className:"w-4 h-4"}),l?"Posting...":"Post Comment"]})]})]})]})}async function tCe({relatedType:e,relatedId:t}){const a=await te.get("/comments",{params:{related_type:e,related_id:t}});return Array.isArray(a.data)?a.data:[]}async function nCe({relatedType:e,relatedId:t,comment:a,isPrivate:s}){return(await te.post("/comments",{related_type:e,related_id:t,comment:a,is_private:!!s})).data}function Ta({relatedType:e,relatedId:t}){const[a,s]=f.useState([]),[r,i]=f.useState(!1),o=f.useCallback(async()=>{if(!e||!t){s([]);return}i(!0);try{const c=await tCe({relatedType:e,relatedId:t});s(c)}finally{i(!1)}},[e,t]),l=f.useCallback(async({comment:c,is_private:d})=>{!e||!t||(await nCe({relatedType:e,relatedId:t,comment:c,isPrivate:d}),await o())},[e,t,o]);return f.useEffect(()=>{o()},[o]),{comments:a,loading:r,refresh:o,addComment:l}}const u2=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],m2={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},ir=e=>e?e.toUpperCase():"",f2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",aCe=e=>{switch(ir(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},sCe=e=>{switch(ir(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function rCe(){const e=wt();f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(null),[h,p]=f.useState(m2),[x,b]=f.useState(null),[N,v]=f.useState([]),[j,w]=f.useState(!1),[S,A]=f.useState([]),[E,_]=f.useState(null),[k,T]=f.useState([]),[O,$]=f.useState([]),[R,P]=f.useState("Filter by Status"),[I,H]=f.useState(""),[Q,G]=f.useState(null),[K,W]=f.useState(!1),[J,Te]=f.useState(1),[ee,U]=f.useState(10),[je,be]=f.useState("Overview"),[le,Ce]=f.useState(""),[Se,Oe]=f.useState(!1),[ge,He]=f.useState([]),[Ne,he]=f.useState({}),[Z,_e]=f.useState(null),{comments:ke,addComment:ze,refresh:tt}=Ta({relatedType:"account",relatedId:x?.id});f.useEffect(()=>{x?.id&&tt()},[x?.id,tt]);const De=f.useCallback(async(Me=null)=>{w(!0);try{const vt=await te.get("/accounts/admin/fetch-all"),z=[...Array.isArray(vt.data)?vt.data:[]].sort((me,Le)=>{const Re=me?.created_at||me?.updated_at||0,Qe=Le?.created_at||Le?.updated_at||0;return new Date(Qe)-new Date(Re)});if(v(z),Me){const me=z.find(Le=>Le.id===Me);b(me||null)}}catch(vt){console.error(vt),v([]),vt.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[b]),at=f.useCallback(async()=>{try{const Me=await te.get("/users/all");A(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),et=f.useCallback(async()=>{try{const Me=await te.get("/territories/fetch");T(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),V=f.useCallback(async()=>{try{const Me=await te.get("/accounts/admin/parent-companies");$(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),ne=f.useCallback(async Me=>{try{const vt=await te.get(`/activities/accounts/${Me}`);he(vt.data&&typeof vt.data=="object"?vt.data:{})}catch(vt){console.error(vt),vt.response?.status===404&&(console.warn("No activities found for this account."),he({}))}},[]);f.useEffect(()=>{De(),at(),et(),V()},[De,at,et,V]),f.useEffect(()=>{Te(1)},[I,R,ee]);const se=f.useMemo(()=>{const Me=I.toLowerCase(),vt=R;return N.filter(F=>{const z=F.name?.toLowerCase().includes(Me)||F.website?.toLowerCase().includes(Me)||F.phone_number?.toLowerCase().includes(Me)||F.industry?.toLowerCase().includes(Me)||F.parent_company?.toLowerCase().includes(Me)||F.territory?.name?.toLowerCase().includes(Me),me=vt==="Filter by Status"||ir(F.status)===ir(vt);return z&&me})},[N,I,R]),Ee=Math.max(1,Math.ceil(se.length/ee)||1);f.useEffect(()=>{Te(Me=>{const vt=Math.max(1,Math.ceil(se.length/ee)||1);return Me>vt?vt:Me})},[se.length,ee]);const Ie=f.useMemo(()=>{const Me=(J-1)*ee;return se.slice(Me,Me+ee)},[se,J,ee]),pe=Me=>{if(Me.target.checked){const vt=Ie.map(F=>F.id);He(vt)}else He([])},Be=Me=>{He(vt=>vt.includes(Me)?vt.filter(F=>F!==Me):[...vt,Me])},$e=async()=>{ge.length!==0&&G({title:"Delete Accounts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ge.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${ge.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:ge}})};se.length===0||(J-1)*ee+1,Math.min(J*ee,se.length);const Ve=()=>Te(Me=>Math.max(Me-1,1)),ut=()=>Te(Me=>Math.min(Me+1,Ee));f.useEffect(()=>{x&&Ce(ir(x.status)||"PROSPECT")},[x]);const ve=N.length,ae=f.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="customer").length,[N]),Fe=f.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="prospect").length,[N]),ye=f.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="partner").length,[N]),We=f.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="active").length,[N]),it=f.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="inactive").length,[N]),ht=f.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="former").length,[N]),Ae=f.useMemo(()=>[{title:"Total",value:ve,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:ae,icon:Oo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Fe,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:ye,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:We,icon:Oo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:it,icon:Mo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ht,icon:Mo,color:"text-orange-600",bgColor:"bg-orange-100"}],[ve,ae,Fe,ye,We,it,ht]),Je=Me=>{b(Me),be("Overview"),Ce(ir(Me?.status)||"PROSPECT")},ce=()=>b(null),X=Me=>{Me.target.id==="accountModalBackdrop"&&!K&&ce()},de=()=>{a(!1),r(!1),u(null),p(m2),o(!1),_(null)},D=Me=>{Me.target.id==="modalBackdrop"&&de()},B=Me=>Me?new Date(Me).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",oe=Me=>{const{name:vt,value:F}=Me.target;p(z=>({...z,[vt]:F}))},ue=()=>{p(m2),r(!1),u(null),a(!0)},ie=Me=>{b(null),Me.assigned_accs?_(Me.assigned_accs):_(null),p({name:Me.name||"",website:Me.website||"",phone_number:Me.phone_number||"",billing_address:Me.billing_address||"",shipping_address:Me.shipping_address||"",parent_company:Me.parent_company||"",industry:Me.industry||"",status:ir(Me.status)||"PROSPECT",territory_id:Me.territory?.id?String(Me.territory.id):"",assigned_to:Me.assigned_accs?.id?String(Me.assigned_accs.id):""}),r(!0),u(Me.id),a(!0)},Pe=Me=>{Me&&G({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:Me.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Me.id,name:Me.name}})},xe=async()=>{if(!Q?.action){G(null);return}const{action:Me}=Q,{type:vt,payload:F,targetId:z,name:me,accountIds:Le}=Me;W(!0);try{if(vt==="create"){o(!0);const Re=await te.post("/accounts/admin",F);V(),q.success(`Account "${me}" created successfully.`);const Qe=x?.id||null;de(),await De(Qe),!x&&Re.data?.id}else if(vt==="update"){if(!z)throw new Error("Missing account identifier for update.");o(!0),await te.put(`/accounts/admin/${z}`,F),q.success(`Account "${me}" updated successfully.`);const Re=x?.id&&x.id===z?z:null;de(),await De(Re),x?.id===z&&b(null)}else if(vt==="delete"){if(!z)throw new Error("Missing account identifier for deletion.");const Re=x?.id;c(z),await te.delete(`/accounts/admin/${z}`),q.success(`Account "${me}" deleted successfully.`),await De(Re&&Re!==z?Re:null),Re===z&&b(null)}else vt==="bulk-delete"&&(await te.delete("/accounts/admin/bulk-delete",{data:{account_ids:Le}}),q.success(`Successfully deleted ${Le.length} accounts`),He([]),await De())}catch(Re){console.error(Re);const Qe=vt==="create"?"Failed to create account. Please review the details and try again.":vt==="update"?"Failed to update account. Please review the details and try again.":vt==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ke=Re.response?.data?.detail||Qe;q.error(Ke),(vt==="create"||vt==="update")&&o(!1),vt==="delete"&&c(null)}finally{(vt==="create"||vt==="update")&&o(!1),vt==="delete"&&c(null),W(!1),G(null)}},fe=()=>{K||G(null)},qe=async()=>{if(!x||!le)return;const Me=ir(le),vt=ir(x.status);if(Me!==vt){Oe(!0);try{await te.put(`/accounts/admin/${x.id}`,{status:Me}),q.success(`Account status updated to ${f2(Me)}`),v(F=>F.map(z=>z.id===x.id?{...z,status:Me}:z)),b(null)}catch(F){console.error(F);const z=F.response?.data?.detail||"Failed to update account status. Please try again.";q.error(z)}finally{Oe(!1)}}},[Ze,pt]=f.useState(!1),Nt=Me=>{Me.preventDefault(),pt(!0);const vt=h.name.trim();if(!vt){q.error("Account name is required.");return}if(!h.assigned_to){q.error("Assigned To is required.");return}const z={name:vt,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,parent_company:h.parent_company?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},me=s&&d?"update":"create";G({title:me==="create"?"Confirm New Account":"Confirm Update",message:me==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:vt}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:vt}),"?"]}),confirmLabel:me==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:me,payload:z,targetId:d||null,name:vt}})},St=[{label:"Filter by Status",value:"Filter by Status"},...u2.map(Me=>({label:Me.label,value:Me.value}))],Ht=Q?.action?.type==="delete"?Q.action.targetId:null,on=x&&(l===x.id||Ht===x.id),cn=x&&l===x.id,re=x?aCe(x.status):"",lt=x?n.jsx("div",{id:"accountModalBackdrop",onClick:X,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Me=>Me.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:ce,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${re}`,children:f2(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ie(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Pe(x),disabled:!!on,children:cn?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(Me=>n.jsx("button",{onClick:()=>be(Me),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${je===Me?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Me},Me))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[je==="Overview"&&n.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:B(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:B(x.updated_at)||"N/A"})]})]})}),n.jsx(Aa,{comments:ke,onAddComment:ze})]}),je==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),je==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Ne.tasks&&Ne.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>_e(Z==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Ne.tasks.length,")"]})]}),Z==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Z==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ne.tasks.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.description||"No description"}),Me.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",Me.assigned_to.first_name," ",Me.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.due_date||Me.created_at)})]},`task-${vt}`))})]}),Ne.meetings&&Ne.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>_e(Z==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Ne.meetings.length,")"]})]}),Z==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Z==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ne.meetings.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.description||Me.location||"No description"}),Me.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",Me.host.first_name," ",Me.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.start_time||Me.created_at)})]},`meeting-${vt}`))})]}),Ne.calls&&Ne.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>_e(Z==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Ne.calls.length,")"]})]}),Z==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Z==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ne.calls.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.call_time||Me.created_at)})]},`call-${vt}`))})]}),Ne.contacts&&Ne.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>_e(Z==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Ne.contacts.length,")"]})]}),Z==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Z==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ne.contacts.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Me.first_name?`${Me.first_name} `:"",Me.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Me.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.created_at)})]},`contact-${vt}`))})]}),Ne.deals&&Ne.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>_e(Z==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Ne.deals.length,")"]})]}),Z==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Z==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ne.deals.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Me.deal_id?Me.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",Me.name||Me.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:Me.stage||Me.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.close_date||Me.created_at)})]},`deal-${vt}`))})]}),Ne.quotes&&Ne.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>_e(Z==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Ne.quotes.length,")"]})]}),Z==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Z==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ne.quotes.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(Me.quote_id?Me.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Me.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.presented_date)||""})]},`quote-${vt}`))})]}),(!Ne||(!Ne.tasks||Ne.tasks.length===0)&&(!Ne.meetings||Ne.meetings.length===0)&&(!Ne.calls||Ne.calls.length===0)&&(!Ne.quotes||Ne.quotes.length===0)&&(!Ne.deals||Ne.deals.length===0)&&(!Ne.contacts||Ne.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:le||ir(x?.status)||"PROSPECT",onChange:Me=>Ce(Me.target.value),children:u2.map(Me=>n.jsx("option",{value:Me.value,children:Me.label},Me.value))}),n.jsx("button",{onClick:qe,disabled:Se||!le||ir(le)===ir(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Se||!le||ir(le)===ir(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Se?"Updating...":"Update"})]})]})]})]})]})}):null,zt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ue(),pt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ae.map(Me=>n.jsx(iCe,{...Me},Me.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:Me=>H(Me.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:R,onChange:Me=>P(Me.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:St.map(Me=>n.jsx("option",{value:Me.value,children:Me.label},Me.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Ie.length>0&&Ie.every(Me=>ge.includes(Me.id)),onChange:pe,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ge.length>0?n.jsx("button",{onClick:$e,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ge.length} selected items`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:j?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):se.length>0?Ie.map(Me=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Je(Me),ne(Me.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("input",{type:"checkbox",checked:ge.includes(Me.id),onChange:()=>Be(Me.id),onClick:vt=>vt.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Me.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:Me.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${sCe(Me.status)}`,children:f2(Me.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Me.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Me.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:Me.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Me.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:se.length,pageSize:ee,currentPage:J,onPrev:Ve,onNext:ut,onPageSizeChange:Me=>{U(Me),Te(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),kt=t?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:Me=>Me.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),pt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||K,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Nt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Vm,{label:"Name",name:"name",value:h.name,onChange:oe,placeholder:"Company name",required:!0,isSubmitted:Ze})}),n.jsx(gR,{label:"Parent Company",value:h.parent_company,onChange:Me=>{p(vt=>({...vt,parent_company:Me}))},items:O.map(Me=>({id:Me,name:Me})),getLabel:Me=>Me?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Vm,{label:"Website",name:"website",value:h.website,onChange:oe,placeholder:"https://example.com",disabled:i}),n.jsx(Vm,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:oe,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Vm,{label:"Industry",name:"industry",value:h.industry,onChange:oe,placeholder:"Industry",disabled:i}),n.jsx(Vm,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:oe,placeholder:"Billing address",disabled:i}),n.jsx(Vm,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:oe,placeholder:"Shipping address",disabled:i}),n.jsx(hR,{label:"Status",name:"status",value:h.status,onChange:oe,options:[{value:"",label:"Select status"},...u2],required:!0,disabled:i}),n.jsx(gR,{label:"Assigned To",value:h.assigned_to,onChange:Me=>{const vt=S.find(z=>String(z.id)===String(Me));_(vt);let F=null;vt&&vt.assigned_territory&&vt.assigned_territory.length===1&&(F=vt.assigned_territory[0].id),p(z=>({...z,assigned_to:Me,territory_id:F}))},items:S||[],getLabel:Me=>`${Me?.first_name??""} ${Me?.last_name??""} (${Me?.role?.toUpperCase()==="CEO"?"Admin":Me?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ze,disabled:i||S.length===0}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(hR,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:oe,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(Me=>({value:String(Me.id),label:Me.name}))||[]],disabled:i||!E||!E.assigned_territory||E.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{de(),pt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||K,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||K,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,Kt=Q?n.jsx(lCe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:xe,onCancel:fe,loading:K}):null;return n.jsxs(n.Fragment,{children:[zt,lt,kt,Kt]})}function iCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Vm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function hR({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function gR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const h=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(oCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h,allowFreeText:u})]})}function oCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(j=>String(j.id)===String(t)),N=b?s(b):t,v=f.useMemo(()=>{const j=h.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:j=>{p(j.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&h.trim()&&!v.some(j=>s(j).toLowerCase()===h.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(h.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!h.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function lCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Ix(e){return _t({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const h2={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},hl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),ro=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function cCe(){const e=wt(),t=Zt();f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,h]=f.useState(null),[p,x]=f.useState(!1),[b,N]=f.useState(!1),[v,j]=f.useState(!1),[w,S]=f.useState(null),[A,E]=f.useState(!1),[_,k]=f.useState(null),[T,O]=f.useState(h2),[$,R]=f.useState(""),[P,I]=f.useState("Filter by Accounts"),[H,Q]=f.useState(null),[G,K]=f.useState("Overview"),[W,J]=f.useState(1),[Te,ee]=f.useState(10),[U,je]=f.useState({}),[be,le]=f.useState(null),[Ce,Se]=f.useState([]),[Oe,ge]=f.useState(null),{comments:He,addComment:Ne,refresh:he}=Ta({relatedType:"contact",relatedId:u?.id});f.useEffect(()=>{u?.id&&he()},[u?.id,he]),f.useEffect(()=>{const ie=t.state?.contactID;ie&&(ge(ie),e(t.pathname,{replace:!0,state:{}}))},[t,e]),f.useEffect(()=>{if(Oe&&a.length>0&&!r){const ie=a.find(Pe=>Pe.id===Oe);ie?h(ie):q.error("Contact not found."),ge(null)}},[Oe,a,r]);const Z=f.useCallback(async(ie=null)=>{i(!0);try{const Pe=await te.get("/contacts/admin/fetch-all"),fe=[...Array.isArray(Pe.data)?Pe.data:[]].sort((qe,Ze)=>{const pt=qe?.created_at||qe?.updated_at||0,Nt=Ze?.created_at||Ze?.updated_at||0;return new Date(Nt)-new Date(pt)});if(s(fe),ie){const qe=fe.find(Ze=>Ze.id===ie);h(qe||null)}}catch(Pe){console.error(Pe),s([]),Pe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),_e=f.useCallback(async()=>{try{const ie=await te.get("/accounts/admin/fetch-all"),xe=[...Array.isArray(ie.data)?ie.data:[]].sort((fe,qe)=>(fe?.name||"").localeCompare(qe?.name||""));l(xe)}catch(ie){console.error(ie),l([]),ie.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),ke=f.useCallback(async()=>{try{const ie=await te.get("/users/all"),xe=[...Array.isArray(ie.data)?ie.data:[]].sort((fe,qe)=>hl(fe).localeCompare(hl(qe)));d(xe)}catch(ie){console.error(ie),d([]),ie.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ze=f.useCallback(async ie=>{try{const Pe=await te.get(`/activities/contact/${ie}`);je(Pe.data&&typeof Pe.data=="object"?Pe.data:{})}catch(Pe){console.error(Pe),Pe.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]);f.useEffect(()=>{Z(),_e(),ke()},[Z,_e,ke]);const tt=f.useMemo(()=>{const ie=new Map;o.forEach(xe=>{xe?.id&&xe?.name&&ie.set(String(xe.id),xe.name)}),a.forEach(xe=>{xe?.account_id&&xe?.account?.name&&ie.set(String(xe.account_id),xe.account.name)});const Pe=Array.from(ie.entries()).sort((xe,fe)=>xe[1].localeCompare(fe[1])).map(([xe,fe])=>({value:xe,label:fe}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Pe]},[o,a]),De=f.useMemo(()=>{const ie=$.trim().toLowerCase(),Pe=P.trim();return a.filter(xe=>{const fe=[xe?.first_name,xe?.last_name,xe?.email,xe?.title,xe?.department,xe?.account?.name,xe?.account?.status,xe?.work_phone,xe?.mobile_phone_1,xe?.mobile_phone_2,xe?.assigned_contact?.first_name,xe?.assigned_contact?.last_name,xe?.contact_creator?.first_name,xe?.contact_creator?.last_name,xe?.notes,ro(xe?.created_at),ro(xe?.updated_at)],qe=ie===""||fe.some(pt=>pt==null?!1:pt.toString().toLowerCase().includes(ie)),Ze=Pe==="Filter by Accounts"||String(xe.account_id)===Pe;return qe&&Ze})},[a,$,P]),at=Math.max(1,Math.ceil(De.length/Te)||1);f.useEffect(()=>{J(1)},[$,P,Te]),f.useEffect(()=>{J(ie=>{const Pe=Math.max(1,Math.ceil(De.length/Te)||1);return ie>Pe?Pe:ie})},[De.length,Te]);const et=f.useMemo(()=>{const ie=(W-1)*Te;return De.slice(ie,ie+Te)},[De,W,Te]),V=()=>J(ie=>Math.max(ie-1,1)),ne=()=>J(ie=>Math.min(ie+1,at)),se=ie=>{if(ie.target.checked){const Pe=et.map(xe=>xe.id);Se(Pe)}else Se([])},Ee=ie=>{Se(Pe=>Pe.includes(ie)?Pe.filter(xe=>xe!==ie):[...Pe,ie])},Ie=async()=>{Ce.length!==0&&S({title:"Delete Contacts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ce.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${Ce.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:Ce}})},pe=f.useCallback(()=>{x(!1),N(!1),k(null),O(h2),j(!1),Fe(!1)},[]),Be=ie=>{ie.target.id==="modalBackdrop"&&!v&&!A&&pe()},$e=ie=>{const{name:Pe,value:xe}=ie.target;O(fe=>({...fe,[Pe]:xe}))},Ve=()=>{O(h2),N(!1),k(null),x(!0)},ut=ie=>{ie&&(O({first_name:ie.first_name||"",last_name:ie.last_name||"",account_id:ie.account_id?String(ie.account_id):"",title:ie.title||"",department:ie.department||"",email:ie.email||"",work_phone:ie.work_phone||"",mobile_phone_1:ie.mobile_phone_1||"",mobile_phone_2:ie.mobile_phone_2||"",notes:ie.notes||"",assigned_to:ie.assigned_to?String(ie.assigned_to):""}),N(!0),k(ie.id),x(!0),h(null))},ve=ie=>{if(!ie)return;const Pe=hl(ie)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Pe}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ie.id,name:Pe}})},[ae,Fe]=f.useState(!1),ye=ie=>{ie.preventDefault(),Fe(!0);const Pe=T.first_name.trim(),xe=T.last_name.trim();if(!Pe||!xe){q.error("First name and last name are required.");return}if(!T.account_id){q.error("Account is required.");return}if(!T.assigned_to){q.error("Assigned To is required.");return}const qe=T.email?.trim();if(!qe){q.error("Email is required.");return}if(!qe.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(qe)){q.error("Please enter a valid email address.");return}const pt={first_name:Pe,last_name:xe,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},Nt=b&&_?"update":"create",St=`${Pe} ${xe}`.trim();S({title:Nt==="create"?"Confirm New Contact":"Confirm Update",message:Nt==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:St})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:St}),"?"]}),confirmLabel:Nt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Nt,payload:pt,targetId:_||null,name:St}})},We=async()=>{if(!w?.action){S(null);return}const{action:ie}=w,{type:Pe,payload:xe,targetId:fe,name:qe}=ie;E(!0);try{if(Pe==="create"){j(!0),await te.post("/contacts/admin",xe),q.success(`Contact "${qe}" created successfully.`);const Ze=u?.id||null;pe(),await Z(Ze)}else if(Pe==="update"){if(!fe)throw new Error("Missing contact identifier for update.");j(!0),await te.put(`/contacts/admin/${fe}`,xe),q.success(`Contact "${qe}" updated successfully.`);const Ze=u?.id&&u.id===fe?fe:u?.id||null;pe(),await Z(Ze),u?.id===fe&&h(null)}else if(Pe==="delete"){if(!fe)throw new Error("Missing contact identifier for deletion.");const Ze=u?.id;Q(fe),await te.delete(`/contacts/admin/${fe}`),q.success(`Contact "${qe}" deleted successfully.`),await Z(Ze&&Ze!==fe?Ze:null),Ze===fe&&h(null)}else if(Pe==="bulk-delete"){const Ze=ie.contact_ids;await te.delete("/contacts/admin/bulk-delete",{data:{contact_ids:Ze}}),q.success(`Successfully deleted ${Ze.length} contacts`),Se([]),await Z()}}catch(Ze){console.error(Ze);const pt=Pe==="create"?"Failed to create contact. Please review the details and try again.":Pe==="update"?"Failed to update contact. Please review the details and try again.":Pe==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",Nt=Ze.response?.data?.detail||pt;q.error(Nt)}finally{(Pe==="create"||Pe==="update")&&j(!1),Pe==="delete"&&Q(null),E(!1),S(null)}},it=()=>{A||S(null)},ht=ie=>{h(ie),K("Overview")},Ae=()=>h(null),Je=ie=>{ie.target.id==="contactModalBackdrop"&&!A&&Ae()},ce=w?.action?.type==="delete"?w.action.targetId:null,X=u&&(H===u.id||ce===u.id),de=u&&H===u.id,D=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Je,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ie=>ie.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Ae,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:hl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ut(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ve(u),disabled:!!X,children:de?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(ie=>n.jsx("button",{onClick:()=>K(ie),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===ie?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ie},ie))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:hl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ro(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ro(u.updated_at)||"N/A"})]})]})}),G==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Aa,{comments:He,onAddComment:Ne})]}),G==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[U.tasks&&U.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",U.tasks.length,")"]})]}),be==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.tasks.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ie.subject||ie.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ie.description||"No description"}),ie.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",ie.assigned_to.first_name," ",ie.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(ie.due_date||ie.created_at)})]},`task-${Pe}`))})]}),U.meetings&&U.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",U.meetings.length,")"]})]}),be==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.meetings.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ie.subject||ie.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ie.description||ie.location||"No description"}),ie.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",ie.host.first_name," ",ie.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(ie.start_time||ie.created_at)})]},`meeting-${Pe}`))})]}),U.calls&&U.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",U.calls.length,")"]})]}),be==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.calls.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ie.subject||ie.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ie.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(ie.call_time||ie.created_at)})]},`call-${Pe}`))})]}),U.deals&&U.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",U.deals.length,")"]})]}),be==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.deals.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[ie.deal_id?ie.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",ie.name||ie.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:ie.stage||ie.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(ie.close_date||ie.created_at)})]},`deal-${Pe}`))})]}),U.quotes&&U.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",U.quotes.length,")"]})]}),be==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.quotes.map((ie,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:ie.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(ie.quote_id?ie.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(ie.presented_date)||""})]},`quote-${Pe}`))})]}),(!U||(!U.tasks||U.tasks.length===0)&&(!U.meetings||U.meetings.length===0)&&(!U.calls||U.calls.length===0)&&(!U.quotes||U.quotes.length===0)&&(!U.deals||U.deals.length===0)&&(!U.contacts||U.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${hl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const ie=encodeURIComponent(u.email),Pe=encodeURIComponent(""),xe=encodeURIComponent(""),fe=`mailto:${ie}?subject=${Pe}&body=${xe}`;window.location.href=fe},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${hl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${hl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,B=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ve(),Fe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:$,onChange:ie=>R(ie.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:ie=>I(ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:tt.map(ie=>n.jsx("option",{value:ie.value,children:ie.label},ie.value??ie.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:et.length>0&&Ce.length===et.length,onChange:se})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ce.length>0?n.jsx("button",{onClick:Ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ce.length} selected items`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):De.length>0?et.map(ie=>{const Pe=[{Icon:na,value:ie.email,key:"email"},{Icon:Lt,value:ie.work_phone,key:"work_phone"},{Icon:od,value:ie.mobile_phone_1,key:"mobile_phone_1"},{Icon:od,value:ie.mobile_phone_2,key:"mobile_phone_2"}].filter(xe=>!!xe.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:xe=>{xe.target.closest('input[type="checkbox"]')||xe.target.closest("button")||(ht(ie),ze(ie.id))},children:[n.jsx("td",{className:"py-3 px-4 text-center align-top",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:Ce.includes(ie.id),onChange:()=>Ee(ie.id)})}),n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:hl(ie)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:ie.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ix,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:ie.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:Pe.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Pe.map(({Icon:xe,value:fe,key:qe})=>{const Ze=bt.createElement(xe,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Ze,n.jsx("span",{children:fe})]},qe)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:ie.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:ie.assigned_contact?`${ie.assigned_contact.first_name} ${ie.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:ro(ie.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ie.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:ie.status||"Active"})}),n.jsx("td",{className:"py-3 px-4 align-top"})]},ie.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:De.length,pageSize:Te,currentPage:W,onPrev:V,onNext:ne,onPageSizeChange:ie=>{ee(ie),J(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),oe=p?n.jsx("div",{id:"modalBackdrop",onClick:Be,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ie=>ie.stopPropagation(),children:[n.jsx("button",{onClick:()=>{pe(),Fe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||A,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ye,noValidate:!0,children:[n.jsx(Oc,{label:"First Name",name:"first_name",value:T.first_name,onChange:$e,placeholder:"First name",required:!0,isSubmitted:ae}),n.jsx(Oc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:$e,placeholder:"Last name",required:!0,isSubmitted:ae}),n.jsx(pR,{label:"Account",value:T.account_id,onChange:ie=>O(Pe=>({...Pe,account_id:ie})),items:o||[],getLabel:ie=>ie?.name??"",placeholder:"Search account...",required:!0,isSubmitted:ae,disabled:v||o.length===0}),n.jsx(pR,{label:"Assigned To",value:T.assigned_to,onChange:ie=>O(Pe=>({...Pe,assigned_to:ie})),items:c||[],getLabel:ie=>`${ie?.first_name??""} ${ie?.last_name??""} (${ie?.role?.toUpperCase()==="CEO"?"Admin":ie?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ae,disabled:v||c.length===0}),n.jsx(Oc,{label:"Title",name:"title",value:T.title,onChange:$e,placeholder:"Job title",disabled:v}),n.jsx(Oc,{label:"Department",name:"department",value:T.department,onChange:$e,placeholder:"Department",disabled:v}),n.jsx(Oc,{label:"Email",name:"email",type:"email",value:T.email,onChange:$e,placeholder:"example@email.com",required:!0,isSubmitted:ae}),n.jsx(Oc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:$e,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Oc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:$e,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Oc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:$e,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(uCe,{label:"Notes",name:"notes",value:T.notes,onChange:$e,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{pe(),Fe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||A,children:v?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,ue=w?n.jsx(mCe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:We,onCancel:it,loading:A}):null;return n.jsxs(n.Fragment,{children:[B,D,oe,ue]})}function Oc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function pR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(dCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function dCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function uCe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function mCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const g2=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function VV({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Bo(),[d,u]=f.useState(e||null),[h,p]=f.useState("Overview"),[x,b]=f.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[v,j]=f.useState(null),[w,S]=f.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,E]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,k]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),b(e.status||"New");return}if(!c)return;const I=await te.get(`/leads/get/${c}`);u(I.data),b(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};f.useEffect(()=>{e?(u(e),b(e.status||"New")):c&&T()},[c,e]);const O=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const I=await te.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const H={...d,status:I.data.status};u(H),i&&i(H),a&&a(),t&&t()}catch(I){console.error(I),q.error("Failed to update lead status")}},$=async I=>{const H={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",H),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const G=(await te.post("/accounts/convertedLead",H)).data.id,K={...A,account_id:G,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},J=(await te.post("/contacts/convertedLead",K)).data.id,Te=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ee=_.amount&&_.amount!==""?parseFloat(_.amount):0,U={..._,account_id:G,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:J,probability:Te(),stage:"Prospecting"},je=await te.post("/deals/convertedLead",U),be=await te.put(`/leads/convert/${I.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const G=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";q.error(G)}},R=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=I=>I.toString().toLowerCase().replace(/\b\w/g,H=>H.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${R(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>$(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),h==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),h==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:g2(I.due_date||I.created_at)})]},`task-${H}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:g2(I.start_time||I.created_at)})]},`meeting-${H}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:g2(I.call_time||I.created_at)})]},`call-${H}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),H=encodeURIComponent(""),Q=encodeURIComponent(""),G=`mailto:${I}?subject=${H}&body=${Q}`;window.location.href=G},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>b(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:O,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const fCe=Yf.all(),p2=fCe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),hCe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),gCe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},x2={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function pCe(){const e=wt(),{leadID:t}=Bo();zs();const[a,s]=f.useState(null),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]),[p,x]=f.useState(!1),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState(""),[A,E]=f.useState(1),[_,k]=f.useState(10),[T,O]=f.useState(x2),[$,R]=f.useState(!1),[P,I]=f.useState(null),[H,Q]=f.useState(!1),[G,K]=f.useState(null),[W,J]=f.useState(!1),[Te,ee]=f.useState([]),[U,je]=f.useState({});f.useRef(null);const[be,le]=f.useState(!1),[Ce,Se]=f.useState(null),[Oe,ge]=f.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[He,Ne]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[he,Z]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const _e=async()=>{try{const ue=await te.get("/leads/getUsers");l(ue.data)}catch(ue){console.error(`Error fetching users: ${ue}`)}},ke=async()=>{x(!0);try{const ue=await te.get("/leads/admin/getLeads");h(ue.data),console.log(ue.data)}catch(ue){console.error(`Error fetching leads: ${ue}`)}finally{x(!1)}};f.useEffect(()=>{_e(),ke()},[]),f.useEffect(()=>{if(t&&u.length>0&&!r&&!$){const ue=u.find(ie=>ie.id===Number(t));ue&&s(ue)}else!t&&!a&&s(null)},[t,u,r,$]),f.useEffect(()=>{if(Ce){const ie=(fe=>{if(!fe)return{code:"+63",number:""};const qe=fe.match(/^(\+\d+)\s(.+)$/);if(qe)return{code:qe[1],number:qe[2]};if(fe.startsWith("+")){const Ze=fe.match(/^(\+\d{1,3})/);if(Ze)return{code:Ze[1],number:fe.substring(Ze[1].length).trim()}}return{code:"+63",number:fe}})(Ce.work_phone),Pe=[];Ce.work_phone&&Pe.push(`Work: ${Ce.work_phone}`),Ce.mobile_phone_1&&Pe.push(`Mobile 1: ${Ce.mobile_phone_1}`),Ce.mobile_phone_2&&Pe.push(`Mobile 2: ${Ce.mobile_phone_2}`);const xe=Pe.length>0?Pe.join(" | "):"";ge({name:Ce.company_name||"",website:"",countryCode:ie.code,phone_number:ie.number,combinedPhoneNumbers:xe,billing_address:Ce.address||"",shipping_address:Ce.address||"",industry:"",status:"Prospect",territory_id:Ce.assigned_to?.territory?.id||null,assigned_to:Ce.assigned_to?.id||null,created_by:Ce.creator?.id||null}),Ne({last_name:Ce.last_name||"",first_name:Ce.first_name||"",account_id:null,title:Ce.title||"",department:Ce.department||"",email:Ce.email||"",work_phone:Ce.work_phone||"",mobile_phone_1:Ce.mobile_phone_1||"",mobile_phone_2:Ce.mobile_phone_2||"",notes:Ce.notes||"",assigned_to:Ce.assigned_to?.id||null,created_by:Ce.creator?.id||null}),Z({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Ce.assigned_to?.id||null,created_by:Ce.creator?.id||null})}},[Ce]);const ze=ue=>N(ue.target.value),tt=f.useMemo(()=>{let ue=[...u];const ie=b.trim().toLowerCase();ie&&(ue=ue.filter(xe=>[xe?.first_name,xe?.last_name,xe?.company_name,xe?.title,xe?.email,xe?.work_phone,xe?.assigned_to?`${xe.assigned_to.first_name} ${xe.assigned_to.last_name}`:""].some(qe=>qe&&qe.toString().toLowerCase().includes(ie))));const Pe=v.trim().toUpperCase();return Pe&&Pe!=="FILTER BY STATUS"?ue=ue.filter(xe=>(xe.status?xe.status.toUpperCase():"")===Pe):ue=ue.filter(xe=>(xe.status?xe.status.toUpperCase():"")!=="CONVERTED"),w&&ue.sort((xe,fe)=>{const qe=`${xe.first_name} ${xe.last_name}`,Ze=`${fe.first_name} ${fe.last_name}`;return w==="asc"?qe.localeCompare(Ze):Ze.localeCompare(qe)}),ue},[u,b,v,w]),De=Math.max(1,Math.ceil(tt.length/_)||1);f.useEffect(()=>{E(1)},[b,v]),f.useEffect(()=>{E(ue=>{const ie=Math.max(1,Math.ceil(tt.length/_)||1);return ue>ie?ie:ue})},[tt.length,_]);const at=f.useMemo(()=>{const ue=(A-1)*_;return tt.slice(ue,ue+_)},[tt,A,_]),et=()=>E(ue=>Math.max(ue-1,1)),V=()=>E(ue=>Math.min(ue+1,De)),ne=ue=>{k(ue),E(1)},se=f.useCallback(async ue=>{try{const ie=await te.get(`/activities/lead/${ue}`);je(ie.data&&typeof ie.data=="object"?ie.data:{})}catch(ie){console.error(ie),ie.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]),Ee=ue=>{s(ue),se(ue.id)},Ie=()=>{s(null),t&&e("/admin/leads",{replace:!0})},pe=()=>{i(!1),O(x2),R(!1),I(null),Q(!1),d(null),sessionStorage.removeItem("editLeadData")},Be=ue=>{ue.target.id==="modalBackdrop"&&pe()},$e=()=>{O(x2),R(!1),I(null),d(null),i(!0)},Ve=ue=>{if(!ue){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ue),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const ie=Ze=>{if(!Ze)return{code:"+63",number:""};const pt=Ze.match(/^(\+\d+)\s(.+)$/);return pt?{code:pt[1],number:pt[2]}:{code:"+63",number:Ze}},Pe=ie(ue.work_phone),xe=ie(ue.mobile_phone_1),fe=ie(ue.mobile_phone_2);let qe="";if(ue.assigned_to){qe=String(ue.assigned_to.id);const Ze=o?.find(pt=>pt.id===ue.assigned_to.id);d(Ze)}O({first_name:ue.first_name||"",last_name:ue.last_name||"",company_name:ue.company_name||"",title:ue.title||"",department:ue.department||"",email:ue.email||"",work_ccode:Pe.code,work_phone:Pe.number,m1_ccode:xe.code,mobile_phone_1:xe.number,m2_ccode:fe.code,mobile_phone_2:fe.number,address:ue.address||"",notes:ue.notes||"",source:ue.source||"",territory_id:ue.territory?.id||null,lead_owner:qe,status:ue.status||"New"}),R(!0),I(ue.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},ut=ue=>{if(!ue){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ue);const ie=`${ue.first_name} ${ue.last_name}`||"this lead";K({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:ie}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:ie}})},ve=ue=>{const{name:ie,value:Pe}=ue.target;if(O(xe=>({...xe,[ie]:Pe})),ie==="lead_owner"){const xe=o.find(fe=>fe.id===parseInt(Pe));d(xe)}},[ae,Fe]=f.useState(!1),ye=ue=>{if(ue.preventDefault(),Fe(!0),!T.last_name?.trim()){q.error("Last name is required.");return}if(!T.company_name?.trim()){q.error("Company is required.");return}if(!T.title?.trim()){q.error("Job title is required.");return}if(!T.email?.trim()){q.error("Email is required.");return}if(!T.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!T.lead_owner){q.error("Please assign a lead owner.");return}const Pe={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},xe=$&&P?"update":"create",fe=`${T.first_name} ${T.last_name}`;K({title:xe==="create"?"Confirm New Lead":"Confirm Update",message:xe==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:xe==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:xe,payload:Pe,targetId:P||null,name:fe}})},We=ue=>{if(ue.target.checked){const ie=at.map(Pe=>Pe.id);ee(ie)}else ee([])},it=ue=>{ee(ie=>ie.includes(ue)?ie.filter(Pe=>Pe!==ue):[...ie,ue])},ht=async()=>{Te.length!==0&&K({title:"Delete Leads",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Te.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${Te.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:Te}})},Ae=async()=>{if(!G?.action){K(null);return}const{action:ue}=G,{type:ie,payload:Pe,targetId:xe,name:fe,lead:qe,leadIds:Ze}=ue;console.log(Pe),J(!0);try{if(ie==="create")Q(!0),await te.post("/leads/create",Pe),q.success(`Lead "${fe}" created successfully.`),pe(),await ke();else if(ie==="update"){if(!xe)throw new Error("Missing lead identifier for update.");Q(!0);const pt=await te.put(`/leads/${xe}`,Pe);q.success(`Lead "${fe}" updated successfully.`),a&&a.id===xe&&s(null),pe(),await ke()}else if(ie==="delete"){if(!xe)throw new Error("Missing lead identifier for deletion.");await te.delete(`/leads/${xe}`),q.success(`Lead "${fe}" deleted successfully.`),a?.id===xe&&s(null),await ke()}else ie==="bulk-delete"&&(await te.delete("/leads/admin/bulk-delete",{data:{lead_ids:Ze}}),q.success(`Successfully deleted ${Ze.length} leads`),ee([]),await ke())}catch(pt){console.error(pt);const Nt=ie==="create"?"Failed to create lead. Please review the details and try again.":ie==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",St=pt.response?.data?.detail||Nt;q.error(St)}finally{(ie==="create"||ie==="update")&&Q(!1),ie!=="edit"&&(J(!1),K(null))}},Je=()=>{W||K(null)},ce=u.filter(ue=>ue.status==="New").length,X=u.filter(ue=>ue.status==="Contacted").length,de=u.filter(ue=>ue.status==="Qualified").length,D=u.filter(ue=>ue.status==="Converted").length,B=u.filter(ue=>ue.status==="Lost").length,oe=[{title:"New",value:ce,icon:Qn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:X,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:de,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:D,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:B,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Ql,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{$e(),Fe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:oe.map(ue=>n.jsx(yCe,{...ue},ue.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:b,onChange:ze,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:ue=>j(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:w,onChange:ue=>S(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"",children:"Sort by Name"}),n.jsx("option",{value:"asc",children:"A-Z"}),n.jsx("option",{value:"desc",children:"Z-A"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:at.length>0&&at.every(ue=>Te.includes(ue.id)),onChange:We})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Te.length>0?n.jsx("button",{onClick:ht,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Te.length} selected leads`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:tt.length>0?at.map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:ie=>ie.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Te.includes(ue.id),onChange:()=>it(ue.id)})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Ee(ue),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ue.first_name," ",ue.last_name]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Ee(ue),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ue.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Ee(ue),children:ue.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Ee(ue),children:ue.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Ee(ue),children:ue.assigned_to?`${ue.assigned_to.first_name} ${ue.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Ee(ue),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${gCe(ue.status||"New")}`,children:hCe(ue.status||"New")})}),n.jsx("td",{})]},ue.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:tt.length,pageSize:_,currentPage:A,onPrev:et,onNext:V,onPageSizeChange:ne,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Be,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ue=>ue.stopPropagation(),children:[n.jsx("button",{onClick:()=>{pe(),Fe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:$?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:ve,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:T.last_name,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${ae&&!T.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ae&&!T.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ae&&!T.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:ve,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ae&&!T.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:p2.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:p2.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:p2.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:T.address,onChange:ve,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${ae&&!T.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(bCe,{items:Array.isArray(o)?o:[],value:T.lead_owner??"",placeholder:"Search a user...",getLabel:ue=>`${ue.first_name} ${ue.last_name}`,onChange:ue=>{const ie=o.find(xe=>String(xe.id)===String(ue));d(ie);let Pe=null;ie&&ie.assigned_territory&&ie.assigned_territory.length===1&&(Pe=ie.assigned_territory[0].id),O(xe=>({...xe,lead_owner:ue,territory_id:Pe}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:ve,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ue=>n.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:ve,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:ve,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{pe(),Fe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:H||W,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:ye,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:H||W,children:H||W?"Processing...":$?"Update Lead":"Save Lead"})]})]})]})}),G&&n.jsx(xCe,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:Ae,onCancel:Je,loading:W}),a&&!r&&!$&&n.jsx(VV,{relatedActs:U,lead:a,onBack:Ie,fetchLeads:ke,setSelectedLead:s,onEdit:Ve,onDelete:ut})]})}function xCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function yCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function bCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=f.useState(!1),[d,u]=f.useState(""),h=f.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",b=f.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const N=v=>{h.current&&!h.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),f.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:h,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:b.length>0?b.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}let vCe={data:""},wCe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||vCe},NCe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,jCe=/\/\*[^]*?\*\/|  +/g,xR=/\n+/g,Wc=(e,t)=>{let a="",s="",r="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":s+=i[1]=="f"?Wc(o,i):i+"{"+Wc(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=Wc(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Wc.p?Wc.p(i,o):i+":"+o+";")}return a+(t&&r?t+"{"+r+"}":r)+s},gl={},YV=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+YV(e[a]);return t}return e},CCe=(e,t,a,s,r)=>{let i=YV(e),o=gl[i]||(gl[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!gl[o]){let c=i!==e?e:(d=>{let u,h,p=[{}];for(;u=NCe.exec(d.replace(jCe,""));)u[4]?p.shift():u[3]?(h=u[3].replace(xR," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][u[1]]=u[2].replace(xR," ").trim();return p[0]})(e);gl[o]=Wc(r?{["@keyframes "+o]:c}:c,a?"":"."+o)}let l=a&&gl.g?gl.g:null;return a&&(gl.g=gl[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(gl[o],t,s,l),o},SCe=(e,t,a)=>e.reduce((s,r,i)=>{let o=t[i];if(o&&o.call){let l=o(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Wc(l,""):l===!1?"":l}return s+r+(o??"")},"");function ij(e){let t=this||{},a=e.call?e(t.p):e;return CCe(a.unshift?a.raw?SCe(a,[].slice.call(arguments,1),t.p):a.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):a,wCe(t.target),t.g,t.o,t.k)}let QV,LE,PE;ij.bind({g:1});let Hl=ij.bind({k:1});function _Ce(e,t,a,s){Wc.p=t,QV=e,LE=a,PE=s}function Sd(e,t){let a=this||{};return function(){let s=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;a.p=Object.assign({theme:LE&&LE()},l),a.o=/ *go\d+/.test(c),l.className=ij.apply(a,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),PE&&d[0]&&PE(l),QV(d,l)}return r}}var ACe=e=>typeof e=="function",Fv=(e,t)=>ACe(e)?e(t):e,TCe=(()=>{let e=0;return()=>(++e).toString()})(),KV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ECe=20,Z4="default",XV=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return XV(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Yb=[],ZV={toasts:[],pausedAt:void 0,settings:{toastLimit:ECe}},_o={},JV=(e,t=Z4)=>{_o[t]=XV(_o[t]||ZV,e),Yb.forEach(([a,s])=>{a===t&&s(_o[t])})},eY=e=>Object.keys(_o).forEach(t=>JV(e,t)),kCe=e=>Object.keys(_o).find(t=>_o[t].toasts.some(a=>a.id===e)),oj=(e=Z4)=>t=>{JV(t,e)},LCe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},PCe=(e={},t=Z4)=>{let[a,s]=f.useState(_o[t]||ZV),r=f.useRef(_o[t]);f.useEffect(()=>(r.current!==_o[t]&&s(_o[t]),Yb.push([t,s]),()=>{let o=Yb.findIndex(([l])=>l===t);o>-1&&Yb.splice(o,1)}),[t]);let i=a.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||LCe[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...a,toasts:i}},DCe=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||TCe()}),$x=e=>(t,a)=>{let s=DCe(t,e,a);return oj(s.toasterId||kCe(s.id))({type:2,toast:s}),s.id},ts=(e,t)=>$x("blank")(e,t);ts.error=$x("error");ts.success=$x("success");ts.loading=$x("loading");ts.custom=$x("custom");ts.dismiss=(e,t)=>{let a={type:3,toastId:e};t?oj(t)(a):eY(a)};ts.dismissAll=e=>ts.dismiss(void 0,e);ts.remove=(e,t)=>{let a={type:4,toastId:e};t?oj(t)(a):eY(a)};ts.removeAll=e=>ts.remove(void 0,e);ts.promise=(e,t,a)=>{let s=ts.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?Fv(t.success,r):void 0;return i?ts.success(i,{id:s,...a,...a?.success}):ts.dismiss(s),r}).catch(r=>{let i=t.error?Fv(t.error,r):void 0;i?ts.error(i,{id:s,...a,...a?.error}):ts.dismiss(s)}),e};var OCe=1e3,MCe=(e,t="default")=>{let{toasts:a,pausedAt:s}=PCe(e,t),r=f.useRef(new Map).current,i=f.useCallback((h,p=OCe)=>{if(r.has(h))return;let x=setTimeout(()=>{r.delete(h),o({type:4,toastId:h})},p);r.set(h,x)},[]);f.useEffect(()=>{if(s)return;let h=Date.now(),p=a.map(x=>{if(x.duration===1/0)return;let b=(x.duration||0)+x.pauseDuration-(h-x.createdAt);if(b<0){x.visible&&ts.dismiss(x.id);return}return setTimeout(()=>ts.dismiss(x.id,t),b)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[a,s,t]);let o=f.useCallback(oj(t),[t]),l=f.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=f.useCallback((h,p)=>{o({type:1,toast:{id:h,height:p}})},[o]),d=f.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),u=f.useCallback((h,p)=>{let{reverseOrder:x=!1,gutter:b=8,defaultPosition:N}=p||{},v=a.filter(S=>(S.position||N)===(h.position||N)&&S.height),j=v.findIndex(S=>S.id===h.id),w=v.filter((S,A)=>A<j&&S.visible).length;return v.filter(S=>S.visible).slice(...x?[w+1]:[0,w]).reduce((S,A)=>S+(A.height||0)+b,0)},[a]);return f.useEffect(()=>{a.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let p=r.get(h.id);p&&(clearTimeout(p),r.delete(h.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},ICe=Hl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,$Ce=Hl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RCe=Hl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zCe=Sd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ICe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${$Ce} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${RCe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,FCe=Hl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,UCe=Sd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${FCe} 1s linear infinite;
`,BCe=Hl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,HCe=Hl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,qCe=Sd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${BCe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${HCe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,WCe=Sd("div")`
  position: absolute;
`,GCe=Sd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,VCe=Hl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YCe=Sd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${VCe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,QCe=({toast:e})=>{let{icon:t,type:a,iconTheme:s}=e;return t!==void 0?typeof t=="string"?f.createElement(YCe,null,t):t:a==="blank"?null:f.createElement(GCe,null,f.createElement(UCe,{...s}),a!=="loading"&&f.createElement(WCe,null,a==="error"?f.createElement(zCe,{...s}):f.createElement(qCe,{...s})))},KCe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,XCe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,ZCe="0%{opacity:0;} 100%{opacity:1;}",JCe="0%{opacity:1;} 100%{opacity:0;}",eSe=Sd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,tSe=Sd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,nSe=(e,t)=>{let a=e.includes("top")?1:-1,[s,r]=KV()?[ZCe,JCe]:[KCe(a),XCe(a)];return{animation:t?`${Hl(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Hl(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},aSe=f.memo(({toast:e,position:t,style:a,children:s})=>{let r=e.height?nSe(e.position||t||"top-center",e.visible):{opacity:0},i=f.createElement(QCe,{toast:e}),o=f.createElement(tSe,{...e.ariaProps},Fv(e.message,e));return f.createElement(eSe,{className:e.className,style:{...r,...a,...e.style}},typeof s=="function"?s({icon:i,message:o}):f.createElement(f.Fragment,null,i,o))});_Ce(f.createElement);var sSe=({id:e,className:t,style:a,onHeightUpdate:s,children:r})=>{let i=f.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return f.createElement("div",{ref:i,className:t,style:a},r)},rSe=(e,t)=>{let a=e.includes("top"),s=a?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:KV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...s,...r}},iSe=ij`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,qy=16,Rx=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:s,children:r,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=MCe(a,i);return f.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:qy,left:qy,right:qy,bottom:qy,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let h=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),x=rSe(h,p);return f.createElement(sSe,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?iSe:"",style:x},u.type==="custom"?Fv(u.message,u):r?r(u):f.createElement(aSe,{toast:u,position:h}))}))},zx=ts;function oSe(){f.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[a,s]=f.useState(""),[r,i]=f.useState("Filter by Actions"),[o,l]=f.useState(1),[c,d]=f.useState(10),u=async()=>{try{const w=await te.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};f.useEffect(()=>{u()},[]);const h=f.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(E=>{const _=E.timestamp?new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",k=`${E.entity_type||""} ${E.entity_name||E.entity_details?.name||E.entity_details?.title||E.entity_id||""}`,T=`${E.logger?.first_name||""} ${E.logger?.last_name||""}`,O=[_,T,E.action,E.entity_type,k,E.description],$=w===""||O.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),R=S==="FILTER BY ACTIONS"||(E.action||"").toUpperCase()===S;return $&&R}).sort((E,_)=>{const k=E.timestamp?new Date(E.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-k})},[e,a,r]),p=Math.max(1,Math.ceil(h.length/c)||1);f.useEffect(()=>{l(1)},[a,r]),f.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(h.length/c)||1);return w>S?S:w})},[h.length,c]);const x=f.useMemo(()=>{const w=(o-1)*c;return h.slice(w,w+c)},[h,o,c]);h.length===0||(o-1)*c+1,Math.min(o*c,h.length);const b=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!h.length){zx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=h.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(O=>`"${String(O).replace(/"/g,'""')}"`).join(","))].join(`
`),E=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(E),k=document.createElement("a");k.href=_,k.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(_)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Rx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(Ql,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(h)&&h.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:h.length,pageSize:c,currentPage:o,onPrev:b,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var lSe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function J4(e){if(typeof e!="string")return!1;var t=lSe;return t.includes(e)}var cSe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],dSe=new Set(cSe);function tY(e){return typeof e!="string"?!1:dSe.has(e)}function nY(e){return typeof e=="string"&&e.startsWith("data-")}function Ur(e){if(typeof e!="object"||e===null)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(tY(a)||nY(a))&&(t[a]=e[a]);return t}function Ou(e){if(e==null)return null;if(f.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ur(t)}return typeof e=="object"&&!Array.isArray(e)?Ur(e):null}function Vs(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(tY(a)||nY(a)||J4(a))&&(t[a]=e[a]);return t}function uSe(e){return e==null?null:f.isValidElement(e)?Vs(e.props):typeof e=="object"&&!Array.isArray(e)?Vs(e):null}var mSe=["children","width","height","viewBox","className","style","title","desc"];function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},DE.apply(null,arguments)}function fSe(e,t){if(e==null)return{};var a,s,r=hSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var eP=f.forwardRef((e,t)=>{var{children:a,width:s,height:r,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=fSe(e,mSe),h=i||{width:s,height:r,x:0,y:0},p=Pt("recharts-surface",o);return f.createElement("svg",DE({},Vs(u),{className:p,width:s,height:r,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),f.createElement("title",null,c),f.createElement("desc",null,d),a)}),gSe=["children","className"];function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},OE.apply(null,arguments)}function pSe(e,t){if(e==null)return{};var a,s,r=xSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var ps=f.forwardRef((e,t)=>{var{children:a,className:s}=e,r=pSe(e,gSe),i=Pt("recharts-layer",s);return f.createElement("g",OE({className:i},Vs(r),{ref:t}),a)}),aY=f.createContext(null),ySe=()=>f.useContext(aY),y2={},b2={},yR;function bSe(){return yR||(yR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==="__proto__"}e.isUnsafeProperty=t})(b2)),b2}var v2={},bR;function sY(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=t})(v2)),v2}var w2={},vR;function tP(){return vR||(vR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=t})(w2)),w2}var N2={},j2={},wR;function vSe(){return wR||(wR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(t).join(",");const s=String(a);return s==="0"&&Object.is(Number(a),-0)?"-0":s}e.toString=t})(j2)),j2}var NR;function nP(){return NR||(NR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vSe(),a=tP();function s(r){if(Array.isArray(r))return r.map(a.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],o=r.length;if(o===0)return i;let l=0,c="",d="",u=!1;for(r.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const h=r[l];d?h==="\\"&&l+1<o?(l++,c+=r[l]):h===d?d="":c+=h:u?h==='"'||h==="'"?d=h:h==="]"?(u=!1,i.push(c),c=""):c+=h:h==="["?(u=!0,c&&(i.push(c),c="")):h==="."?c&&(i.push(c),c=""):c+=h,l++}return c&&i.push(c),i}e.toPath=s})(N2)),N2}var jR;function aP(){return jR||(jR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bSe(),a=sY(),s=tP(),r=nP();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?a.isDeepKey(c)?i(l,r.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=i})(y2)),y2}var C2,CR;function wSe(){return CR||(CR=1,C2=aP().get),C2}var NSe=wSe();const Mu=Ki(NSe);var jSe=4;function Kc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jSe,a=10**t,s=Math.round(e*a)/a;return Object.is(s,-0)?0:s}function ja(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return e.reduce((r,i,o)=>{var l=a[o-1];return typeof l=="string"?r+l+i:l!==void 0?r+Kc(l)+i:r+i},"")}var gs=e=>e===0?0:e>0?1:-1,Yi=e=>typeof e=="number"&&e!=+e,ql=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,It=e=>(typeof e=="number"||e instanceof Number)&&!Yi(e),zo=e=>It(e)||typeof e=="string",CSe=0,Ep=e=>{var t=++CSe;return"".concat(e||"").concat(t)},Is=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!It(t)&&typeof t!="string")return s;var i;if(ql(t)){if(a==null)return s;var o=t.indexOf("%");i=a*parseFloat(t.slice(0,o))/100}else i=+t;return Yi(i)&&(i=s),r&&a!=null&&i>a&&(i=a),i},rY=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},s=0;s<t;s++)if(!a[String(e[s])])a[String(e[s])]=!0;else return!0;return!1};function la(e,t,a){return It(e)&&It(t)?Kc(e+a*(t-e)):t}function iY(e,t,a){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):Mu(s,t))===a)}var ua=e=>e===null||typeof e>"u",Fx=e=>ua(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function SSe(e){return e!=null}function Ux(){}var _Se=["type","size","sizeType"];function ME(){return ME=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ME.apply(null,arguments)}function SR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function _R(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SR(Object(a),!0).forEach(function(s){ASe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ASe(e,t,a){return(t=TSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TSe(e){var t=ESe(e,"string");return typeof t=="symbol"?t:t+""}function ESe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kSe(e,t){if(e==null)return{};var a,s,r=LSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var oY={symbolCircle:RN,symbolCross:IW,symbolDiamond:RW,symbolSquare:zW,symbolStar:UW,symbolTriangle:BW,symbolWye:HW},PSe=Math.PI/180,DSe=e=>{var t="symbol".concat(Fx(e));return oY[t]||RN},OSe=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*PSe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},MSe=(e,t)=>{oY["symbol".concat(Fx(e))]=t},sP=e=>{var{type:t="circle",size:a=64,sizeType:s="area"}=e,r=kSe(e,_Se),i=_R(_R({},r),{},{type:t,size:a,sizeType:s}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var p=DSe(o),x=g4().type(p).size(OSe(a,s,o)),b=x();if(b!==null)return b},{className:c,cx:d,cy:u}=i,h=Vs(i);return It(d)&&It(u)&&It(a)?f.createElement("path",ME({},h,{className:Pt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:l()})):null};sP.registerSymbol=MSe;var lY=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,rP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(f.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(r=>{J4(r)&&(s[r]=(i=>a[r](a,i)))}),s},ISe=(e,t,a)=>s=>(e(t,a,s),null),Bx=(e,t,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];J4(r)&&typeof i=="function"&&(s||(s={}),s[r]=ISe(i,t,a))}),s};function AR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function $Se(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?AR(Object(a),!0).forEach(function(s){RSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):AR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function RSe(e,t,a){return(t=zSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zSe(e){var t=FSe(e,"string");return typeof t=="symbol"?t:t+""}function FSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Va(e,t){var a=$Se({},e),s=t,r=Object.keys(t),i=r.reduce((o,l)=>(o[l]===void 0&&s[l]!==void 0&&(o[l]=s[l]),o),a);return i}function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Uv.apply(null,arguments)}function TR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function USe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TR(Object(a),!0).forEach(function(s){BSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function BSe(e,t,a){return(t=HSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HSe(e){var t=qSe(e,"string");return typeof t=="symbol"?t:t+""}function qSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oi=32,WSe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function GSe(e){var{data:t,iconType:a,inactiveColor:s}=e,r=oi/2,i=oi/6,o=oi/3,l=t.inactive?s:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var d;return f.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:r,x2:oi,y2:r,className:"recharts-legend-icon"})}if(c==="line")return f.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(r,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,`
            H`).concat(oi,"M").concat(2*o,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return f.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(oi/8,"h").concat(oi,"v").concat(oi*3/4,"h").concat(-oi,"z"),className:"recharts-legend-icon"});if(f.isValidElement(t.legendIcon)){var u=USe({},t);return delete u.legendIcon,f.cloneElement(t.legendIcon,u)}return f.createElement(sP,{fill:l,cx:r,cy:r,size:oi,sizeType:"diameter",type:c})}function VSe(e){var{payload:t,iconSize:a,layout:s,formatter:r,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:oi,height:oi},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var p=u.formatter||r,x=Pt({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var b=u.inactive?i:u.color,N=p?p(u.value,u,h):u.value;return f.createElement("li",Uv({className:x,style:c,key:"legend-item-".concat(h)},Bx(e,u,h)),f.createElement(eP,{width:a,height:a,viewBox:l,style:d,"aria-label":"".concat(N," legend icon")},f.createElement(GSe,{data:u,iconType:o,inactiveColor:i})),f.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},N))})}var YSe=e=>{var t=Va(e,WSe),{payload:a,layout:s,align:r}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return f.createElement("ul",{className:"recharts-default-legend",style:i},f.createElement(VSe,Uv({},t,{payload:a})))},S2={},_2={},ER;function QSe(){return ER||(ER=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){const r=new Map;for(let i=0;i<a.length;i++){const o=a[i],l=s(o);r.has(l)||r.set(l,o)}return Array.from(r.values())}e.uniqBy=t})(_2)),_2}var A2={},kR;function cY(){return kR||(kR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a}e.identity=t})(A2)),A2}var T2={},E2={},k2={},LR;function KSe(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=t})(k2)),k2}var PR;function iP(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KSe();function a(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=a})(E2)),E2}var L2={},DR;function XSe(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="object"&&a!==null}e.isObjectLike=t})(L2)),L2}var OR;function ZSe(){return OR||(OR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iP(),a=XSe();function s(r){return a.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(T2)),T2}var P2={},D2={},MR;function JSe(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aP();function a(s){return function(r){return t.get(r,s)}}e.property=a})(D2)),D2}var O2={},M2={},I2={},$2={},IR;function dY(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=t})($2)),$2}var R2={},$R;function uY(){return $R||($R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=t})(R2)),R2}var z2={},RR;function mY(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){return a===s||Number.isNaN(a)&&Number.isNaN(s)}e.eq=t})(z2)),z2}var zR;function e2e(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dY(),a=uY(),s=mY();function r(u,h,p){return typeof p!="function"?r(u,h,()=>{}):i(u,h,function x(b,N,v,j,w,S){const A=p(b,N,v,j,w,S);return A!==void 0?!!A:i(b,N,x,S)},new Map)}function i(u,h,p,x){if(h===u)return!0;switch(typeof h){case"object":return o(u,h,p,x);case"function":return Object.keys(h).length>0?i(u,{...h},p,x):s.eq(u,h);default:return t.isObject(u)?typeof h=="string"?h==="":!0:s.eq(u,h)}}function o(u,h,p,x){if(h==null)return!0;if(Array.isArray(h))return c(u,h,p,x);if(h instanceof Map)return l(u,h,p,x);if(h instanceof Set)return d(u,h,p,x);const b=Object.keys(h);if(u==null||a.isPrimitive(u))return b.length===0;if(b.length===0)return!0;if(x?.has(h))return x.get(h)===u;x?.set(h,u);try{for(let N=0;N<b.length;N++){const v=b[N];if(!a.isPrimitive(u)&&!(v in u)||h[v]===void 0&&u[v]!==void 0||h[v]===null&&u[v]!==null||!p(u[v],h[v],v,u,h,x))return!1}return!0}finally{x?.delete(h)}}function l(u,h,p,x){if(h.size===0)return!0;if(!(u instanceof Map))return!1;for(const[b,N]of h.entries()){const v=u.get(b);if(p(v,N,b,u,h,x)===!1)return!1}return!0}function c(u,h,p,x){if(h.length===0)return!0;if(!Array.isArray(u))return!1;const b=new Set;for(let N=0;N<h.length;N++){const v=h[N];let j=!1;for(let w=0;w<u.length;w++){if(b.has(w))continue;const S=u[w];let A=!1;if(p(S,v,N,u,h,x)&&(A=!0),A){b.add(w),j=!0;break}}if(!j)return!1}return!0}function d(u,h,p,x){return h.size===0?!0:u instanceof Set?c([...u],[...h],p,x):!1}e.isMatchWith=r,e.isSetMatch=d})(I2)),I2}var FR;function fY(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e2e();function a(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=a})(M2)),M2}var F2={},U2={},B2={},UR;function t2e(){return UR||(UR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Object.getOwnPropertySymbols(a).filter(s=>Object.prototype.propertyIsEnumerable.call(a,s))}e.getSymbols=t})(B2)),B2}var H2={},BR;function hY(){return BR||(BR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=t})(H2)),H2}var q2={},HR;function gY(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",a="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",p="[object ArrayBuffer]",x="[object Object]",b="[object Error]",N="[object DataView]",v="[object Uint8Array]",j="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",A="[object BigUint64Array]",E="[object Int8Array]",_="[object Int16Array]",k="[object Int32Array]",T="[object BigInt64Array]",O="[object Float32Array]",$="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=A,e.booleanTag=r,e.dataViewTag=N,e.dateTag=l,e.errorTag=b,e.float32ArrayTag=O,e.float64ArrayTag=$,e.functionTag=h,e.int16ArrayTag=_,e.int32ArrayTag=k,e.int8ArrayTag=E,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=d,e.stringTag=a,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=S,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=j})(q2)),q2}var W2={},qR;function n2e(){return qR||(qR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=t})(W2)),W2}var WR;function pY(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t2e(),a=hY(),s=gY(),r=uY(),i=n2e();function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,p,x=new Map,b=void 0){const N=b?.(u,h,p,x);if(N!==void 0)return N;if(r.isPrimitive(u))return u;if(x.has(u))return x.get(u);if(Array.isArray(u)){const v=new Array(u.length);x.set(u,v);for(let j=0;j<u.length;j++)v[j]=l(u[j],j,p,x,b);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;x.set(u,v);for(const[j,w]of u)v.set(j,l(w,j,p,x,b));return v}if(u instanceof Set){const v=new Set;x.set(u,v);for(const j of u)v.add(l(j,void 0,p,x,b));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);x.set(u,v);for(let j=0;j<u.length;j++)v[j]=l(u[j],j,p,x,b);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return x.set(u,v),c(v,u,p,x,b),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return x.set(u,v),c(v,u,p,x,b),v}if(typeof Blob<"u"&&u instanceof Blob){const v=new Blob([u],{type:u.type});return x.set(u,v),c(v,u,p,x,b),v}if(u instanceof Error){const v=new u.constructor;return x.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,c(v,u,p,x,b),v}if(u instanceof Boolean){const v=new Boolean(u.valueOf());return x.set(u,v),c(v,u,p,x,b),v}if(u instanceof Number){const v=new Number(u.valueOf());return x.set(u,v),c(v,u,p,x,b),v}if(u instanceof String){const v=new String(u.valueOf());return x.set(u,v),c(v,u,p,x,b),v}if(typeof u=="object"&&d(u)){const v=Object.create(Object.getPrototypeOf(u));return x.set(u,v),c(v,u,p,x,b),v}return u}function c(u,h,p=u,x,b){const N=[...Object.keys(h),...t.getSymbols(h)];for(let v=0;v<N.length;v++){const j=N[v],w=Object.getOwnPropertyDescriptor(u,j);(w==null||w.writable)&&(u[j]=l(h[j],j,p,x,b))}}function d(u){switch(a.getTag(u)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(U2)),U2}var GR;function a2e(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pY();function a(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=a})(F2)),F2}var VR;function s2e(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fY(),a=a2e();function s(r){return r=a.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(O2)),O2}var G2={},V2={},Y2={},YR;function r2e(){return YR||(YR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pY(),a=gY();function s(r,i){return t.cloneDeepWith(r,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!==void 0)return u;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case a.numberTag:case a.stringTag:case a.booleanTag:{const h=new r.constructor(r?.valueOf());return t.copyProperties(h,r),h}case a.argumentsTag:{const h={};return t.copyProperties(h,r),h.length=r.length,h[Symbol.iterator]=r[Symbol.iterator],h}default:return}})}e.cloneDeepWith=s})(Y2)),Y2}var QR;function i2e(){return QR||(QR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r2e();function a(s){return t.cloneDeepWith(s)}e.cloneDeep=a})(V2)),V2}var Q2={},K2={},KR;function xY(){return KR||(KR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function a(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=a})(K2)),K2}var X2={},XR;function o2e(){return XR||(XR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hY();function a(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=a})(X2)),X2}var ZR;function l2e(){return ZR||(ZR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sY(),a=xY(),s=o2e(),r=nP();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||s.isArguments(d))&&a.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i})(Q2)),Q2}var JR;function c2e(){return JR||(JR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fY(),a=tP(),s=i2e(),r=aP(),i=l2e();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=a.toKey(l);break}}return c=s.cloneDeep(c),function(d){const u=r.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(G2)),G2}var ez;function d2e(){return ez||(ez=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cY(),a=JSe(),s=s2e(),r=c2e();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?r.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return a.property(o)}}e.iteratee=i})(P2)),P2}var tz;function u2e(){return tz||(tz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QSe(),a=cY(),s=ZSe(),r=d2e();function i(o,l=a.identity){return s.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.iteratee(l)):[]}e.uniqBy=i})(S2)),S2}var Z2,nz;function m2e(){return nz||(nz=1,Z2=u2e().uniqBy),Z2}var f2e=m2e();const az=Ki(f2e);function yY(e,t,a){return t===!0?az(e,a):typeof t=="function"?az(e,t):e}var oP=f.createContext(null),h2e=e=>e,Xn=()=>{var e=f.useContext(oP);return e?e.store.dispatch:h2e},Qb=()=>{},g2e=()=>Qb,p2e=(e,t)=>e===t;function Rt(e){var t=f.useContext(oP);return G9.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:g2e,t?t.store.getState:Qb,t?t.store.getState:Qb,t?e:Qb,p2e)}var J2={},e_={},t_={},sz;function x2e(){return sz||(sz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const a=(s,r,i)=>{if(s!==r){const o=t(s),l=t(r);if(o===l&&o===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=a})(t_)),t_}var n_={},a_={},rz;function bY(){return rz||(rz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=t})(a_)),a_}var iz;function y2e(){return iz||(iz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bY(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!a.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=r})(n_)),n_}var oz;function b2e(){return oz||(oz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x2e(),a=y2e(),s=nP();function r(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(x=>String(x));const d=(x,b)=>{let N=x;for(let v=0;v<b.length&&N!=null;++v)N=N[b[v]];return N},u=(x,b)=>b==null||x==null?b:typeof x=="object"&&"key"in x?Object.hasOwn(b,x.key)?b[x.key]:d(b,x.path):typeof x=="function"?x(b):Array.isArray(x)?d(b,x):typeof b=="object"?b[x]:b,h=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||a.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:h.map(b=>u(b,x))})).slice().sort((x,b)=>{for(let N=0;N<h.length;N++){const v=t.compareValues(x.criteria[N],b.criteria[N],l[N]);if(v!==0)return v}return 0}).map(x=>x.original)}e.orderBy=r})(e_)),e_}var s_={},lz;function v2e(){return lz||(lz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s=1){const r=[],i=Math.floor(s),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):r.push(u)}};return o(a,0),r}e.flatten=t})(s_)),s_}var r_={},cz;function vY(){return cz||(cz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xY(),a=iP(),s=dY(),r=mY();function i(o,l,c){return s.isObject(c)&&(typeof l=="number"&&a.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],o):!1}e.isIterateeCall=i})(r_)),r_}var dz;function w2e(){return dz||(dz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b2e(),a=v2e(),s=vY();function r(i,...o){const l=o.length;return l>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,a.flatten(o),["asc"])}e.sortBy=r})(J2)),J2}var i_,uz;function N2e(){return uz||(uz=1,i_=w2e().sortBy),i_}var j2e=N2e();const lj=Ki(j2e);var wY=e=>e.legend.settings,C2e=e=>e.legend.size,S2e=e=>e.legend.payload,_2e=rt([S2e,wY],(e,t)=>{var{itemSorter:a}=t,s=e.flat(1);return a?lj(s,a):s});function A2e(){return Rt(_2e)}var Wy=1;function NY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,a]=f.useState({height:0,left:0,top:0,width:0}),s=f.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Wy||Math.abs(o.left-t.left)>Wy||Math.abs(o.top-t.top)>Wy||Math.abs(o.width-t.width)>Wy)&&a({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function Cs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var T2e=typeof Symbol=="function"&&Symbol.observable||"@@observable",mz=T2e,o_=()=>Math.random().toString(36).substring(7).split("").join("."),E2e={INIT:`@@redux/INIT${o_()}`,REPLACE:`@@redux/REPLACE${o_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${o_()}`},Bv=E2e;function lP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function jY(e,t,a){if(typeof e!="function")throw new Error(Cs(2));if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Cs(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Cs(1));return a(jY)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((v,j)=>{o.set(j,v)}))}function u(){if(c)throw new Error(Cs(3));return r}function h(v){if(typeof v!="function")throw new Error(Cs(4));if(c)throw new Error(Cs(5));let j=!0;d();const w=l++;return o.set(w,v),function(){if(j){if(c)throw new Error(Cs(6));j=!1,d(),o.delete(w),i=null}}}function p(v){if(!lP(v))throw new Error(Cs(7));if(typeof v.type>"u")throw new Error(Cs(8));if(typeof v.type!="string")throw new Error(Cs(17));if(c)throw new Error(Cs(9));try{c=!0,r=s(r,v)}finally{c=!1}return(i=o).forEach(w=>{w()}),v}function x(v){if(typeof v!="function")throw new Error(Cs(10));s=v,p({type:Bv.REPLACE})}function b(){const v=h;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Cs(11));function w(){const A=j;A.next&&A.next(u())}return w(),{unsubscribe:v(w)}},[mz](){return this}}}return p({type:Bv.INIT}),{dispatch:p,subscribe:h,getState:u,replaceReducer:x,[mz]:b}}function k2e(e){Object.keys(e).forEach(t=>{const a=e[t];if(typeof a(void 0,{type:Bv.INIT})>"u")throw new Error(Cs(12));if(typeof a(void 0,{type:Bv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Cs(13))})}function CY(e){const t=Object.keys(e),a={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(a[o]=e[o])}const s=Object.keys(a);let r;try{k2e(a)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const d={};for(let u=0;u<s.length;u++){const h=s[u],p=a[h],x=o[h],b=p(x,l);if(typeof b>"u")throw l&&l.type,new Error(Cs(14));d[h]=b,c=c||b!==x}return c=c||s.length!==Object.keys(o).length,c?d:o}}function Hv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,a)=>(...s)=>t(a(...s)))}function L2e(...e){return t=>(a,s)=>{const r=t(a,s);let i=()=>{throw new Error(Cs(15))};const o={getState:r.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=Hv(...l)(r.dispatch),{...r,dispatch:i}}}function SY(e){return lP(e)&&"type"in e&&typeof e.type=="string"}var _Y=Symbol.for("immer-nothing"),fz=Symbol.for("immer-draftable"),Ys=Symbol.for("immer-state");function Fi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ir=Object,Mf=Ir.getPrototypeOf,qv="constructor",cj="prototype",IE="configurable",Wv="enumerable",Kb="writable",kp="value",Wl=e=>!!e&&!!e[Ys];function Qi(e){return e?AY(e)||dj(e)||!!e[fz]||!!e[qv]?.[fz]||uj(e)||mj(e):!1}var P2e=Ir[cj][qv].toString(),hz=new WeakMap;function AY(e){if(!e||!cP(e))return!1;const t=Mf(e);if(t===null||t===Ir[cj])return!0;const a=Ir.hasOwnProperty.call(t,qv)&&t[qv];if(a===Object)return!0;if(!sf(a))return!1;let s=hz.get(a);return s===void 0&&(s=Function.toString.call(a),hz.set(a,s)),s===P2e}function Hx(e,t,a=!0){qx(e)===0?(a?Reflect.ownKeys(e):Ir.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function qx(e){const t=e[Ys];return t?t.type_:dj(e)?1:uj(e)?2:mj(e)?3:0}var gz=(e,t,a=qx(e))=>a===2?e.has(t):Ir[cj].hasOwnProperty.call(e,t),$E=(e,t,a=qx(e))=>a===2?e.get(t):e[t],Gv=(e,t,a,s=qx(e))=>{s===2?e.set(t,a):s===3?e.add(a):e[t]=a};function D2e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var dj=Array.isArray,uj=e=>e instanceof Map,mj=e=>e instanceof Set,cP=e=>typeof e=="object",sf=e=>typeof e=="function",l_=e=>typeof e=="boolean";function O2e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Nl=e=>e.copy_||e.base_,dP=e=>e.modified_?e.copy_:e.base_;function RE(e,t){if(uj(e))return new Map(e);if(mj(e))return new Set(e);if(dj(e))return Array[cj].slice.call(e);const a=AY(e);if(t===!0||t==="class_only"&&!a){const s=Ir.getOwnPropertyDescriptors(e);delete s[Ys];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l[Kb]===!1&&(l[Kb]=!0,l[IE]=!0),(l.get||l.set)&&(s[o]={[IE]:!0,[Kb]:!0,[Wv]:l[Wv],[kp]:e[o]})}return Ir.create(Mf(e),s)}else{const s=Mf(e);if(s!==null&&a)return{...e};const r=Ir.create(s);return Ir.assign(r,e)}}function uP(e,t=!1){return fj(e)||Wl(e)||!Qi(e)||(qx(e)>1&&Ir.defineProperties(e,{set:Gy,add:Gy,clear:Gy,delete:Gy}),Ir.freeze(e),t&&Hx(e,(a,s)=>{uP(s,!0)},!1)),e}function M2e(){Fi(2)}var Gy={[kp]:M2e};function fj(e){return e===null||!cP(e)?!0:Ir.isFrozen(e)}var Vv="MapSet",zE="Patches",pz="ArrayMethods",TY={};function Iu(e){const t=TY[e];return t||Fi(0,e),t}var xz=e=>!!TY[e],Lp,EY=()=>Lp,I2e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:xz(Vv)?Iu(Vv):void 0,arrayMethodsPlugin_:xz(pz)?Iu(pz):void 0});function yz(e,t){t&&(e.patchPlugin_=Iu(zE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function FE(e){UE(e),e.drafts_.forEach($2e),e.drafts_=null}function UE(e){e===Lp&&(Lp=e.parent_)}var bz=e=>Lp=I2e(Lp,e);function $2e(e){const t=e[Ys];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function vz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(e!==void 0&&e!==a){a[Ys].modified_&&(FE(t),Fi(4)),Qi(e)&&(e=wz(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(a[Ys].base_,e,t)}else e=wz(t,a);return R2e(t,e,!0),FE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_Y?e:void 0}function wz(e,t){if(fj(t))return t;const a=t[Ys];if(!a)return mP(t,e.handledSet_,e);if(!hj(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:s}=a;if(s)for(;s.length>0;)s.pop()(e);PY(a,e)}return a.copy_}function R2e(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&uP(t,a)}function kY(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var hj=(e,t)=>e.scope_===t,z2e=[];function LY(e,t,a,s){const r=Nl(e),i=e.type_;if(s!==void 0&&$E(r,s,i)===t){Gv(r,s,a,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Hx(r,(c,d)=>{if(Wl(d)){const u=l.get(d)||[];u.push(c),l.set(d,u)}})}const o=e.draftLocations_.get(t)??z2e;for(const l of o)Gv(r,l,a,i)}function F2e(e,t,a){e.callbacks_.push(function(r){const i=t;if(!i||!hj(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const o=dP(i);LY(e,i.draft_??i,o,a),PY(i,r)})}function PY(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}kY(e)}}function U2e(e,t,a){const{scope_:s}=e;if(Wl(a)){const r=a[Ys];hj(r,s)&&r.callbacks_.push(function(){Xb(e);const o=dP(r);LY(e,a,o,t)})}else Qi(a)&&e.callbacks_.push(function(){const i=Nl(e);$E(i,t,e.type_)===a&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&mP($E(e.copy_,t,e.type_),s.handledSet_,s)})}function mP(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||Wl(e)||t.has(e)||!Qi(e)||fj(e)||(t.add(e),Hx(e,(s,r)=>{if(Wl(r)){const i=r[Ys];if(hj(i,a)){const o=dP(i);Gv(e,s,o,e.type_),kY(i)}}else Qi(r)&&mP(r,t,a)})),e}function B2e(e,t){const a=dj(e),s={type_:a?1:0,scope_:t?t.scope_:EY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=fP;a&&(r=[s],i=Pp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,[l,s]}var fP={get(e,t){if(t===Ys)return e;let a=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&a?.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const r=Nl(e);if(!gz(r,t,e.type_))return H2e(e,r,t);const i=r[t];if(e.finalized_||!Qi(i)||s&&e.operationMethod&&a?.isMutatingArrayMethod(e.operationMethod)&&O2e(t))return i;if(i===c_(e.base_,t)){Xb(e);const o=e.type_===1?+t:t,l=HE(e.scope_,i,e,o);return e.copy_[o]=l}return i},has(e,t){return t in Nl(e)},ownKeys(e){return Reflect.ownKeys(Nl(e))},set(e,t,a){const s=DY(Nl(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=c_(Nl(e),t),i=r?.[Ys];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(D2e(a,r)&&(a!==void 0||gz(e.base_,t,e.type_)))return!0;Xb(e),BE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),U2e(e,t,a)),!0},deleteProperty(e,t){return Xb(e),c_(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),BE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Nl(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{[Kb]:!0,[IE]:e.type_!==1||t!=="length",[Wv]:s[Wv],[kp]:a[t]}},defineProperty(){Fi(11)},getPrototypeOf(e){return Mf(e.base_)},setPrototypeOf(){Fi(12)}},Pp={};Hx(fP,(e,t)=>{Pp[e]=function(){const a=arguments;return a[0]=a[0][0],t.apply(this,a)}});Pp.deleteProperty=function(e,t){return Pp.set.call(this,e,t,void 0)};Pp.set=function(e,t,a){return fP.set.call(this,e[0],t,a,e[0])};function c_(e,t){const a=e[Ys];return(a?Nl(a):e)[t]}function H2e(e,t,a){const s=DY(t,a);return s?kp in s?s[kp]:s.get?.call(e.draft_):void 0}function DY(e,t){if(!(t in e))return;let a=Mf(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Mf(a)}}function BE(e){e.modified_||(e.modified_=!0,e.parent_&&BE(e.parent_))}function Xb(e){e.copy_||(e.assigned_=new Map,e.copy_=RE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var q2e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,s,r)=>{if(sf(a)&&!sf(s)){const o=s;s=a;const l=this;return function(d=o,...u){return l.produce(d,h=>s.call(this,h,...u))}}sf(s)||Fi(6),r!==void 0&&!sf(r)&&Fi(7);let i;if(Qi(a)){const o=bz(this),l=HE(o,a,void 0);let c=!0;try{i=s(l),c=!1}finally{c?FE(o):UE(o)}return yz(o,r),vz(i,o)}else if(!a||!cP(a)){if(i=s(a),i===void 0&&(i=a),i===_Y&&(i=void 0),this.autoFreeze_&&uP(i,!0),r){const o=[],l=[];Iu(zE).generateReplacementPatches_(a,i,{patches_:o,inversePatches_:l}),r(o,l)}return i}else Fi(1,a)},this.produceWithPatches=(a,s)=>{if(sf(a))return(l,...c)=>this.produceWithPatches(l,d=>a(d,...c));let r,i;return[this.produce(a,s,(l,c)=>{r=l,i=c}),r,i]},l_(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),l_(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),l_(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Qi(t)||Fi(8),Wl(t)&&(t=qi(t));const a=bz(this),s=HE(a,t,void 0);return s[Ys].isManual_=!0,UE(a),s}finishDraft(t,a){const s=t&&t[Ys];(!s||!s.isManual_)&&Fi(9);const{scope_:r}=s;return yz(r,a),vz(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,a){let s;for(s=a.length-1;s>=0;s--){const i=a[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(a=a.slice(s+1));const r=Iu(zE).applyPatches_;return Wl(t)?r(t,a):this.produce(t,i=>r(i,a))}};function HE(e,t,a,s){const[r,i]=uj(t)?Iu(Vv).proxyMap_(t,a):mj(t)?Iu(Vv).proxySet_(t,a):B2e(t,a);return(a?.scope_??EY()).drafts_.push(r),i.callbacks_=a?.callbacks_??[],i.key_=s,a&&s!==void 0?F2e(a,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),r}function qi(e){return Wl(e)||Fi(10,e),OY(e)}function OY(e){if(!Qi(e)||fj(e))return e;const t=e[Ys];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=RE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=RE(e,!0);return Hx(a,(r,i)=>{Gv(a,r,OY(i))},s),t&&(t.finalized_=!1),a}var W2e=new q2e,MY=W2e.produce;function IY(e){return({dispatch:a,getState:s})=>r=>i=>typeof i=="function"?i(a,s,e):r(i)}var G2e=IY(),V2e=IY,Y2e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Hv:Hv.apply(null,arguments)};function bi(e,t){function a(...s){if(t){let r=t(...s);if(!r)throw new Error(zr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=s=>SY(s)&&s.type===e,a}var $Y=class zg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zg.prototype)}static get[Symbol.species](){return zg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zg(...t[0].concat(this)):new zg(...t.concat(this))}};function Nz(e){return Qi(e)?MY(e,()=>{}):e}function Vy(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}function Q2e(e){return typeof e=="boolean"}var K2e=()=>function(t){const{thunk:a=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let o=new $Y;return a&&(Q2e(a)?o.push(G2e):o.push(V2e(a.extraArgument))),o},RY="RTK_autoBatch",oa=()=>e=>({payload:e,meta:{[RY]:!0}}),jz=e=>t=>{setTimeout(t,e)},zY=(e={type:"raf"})=>t=>(...a)=>{const s=t(...a);let r=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jz(10):e.type==="callback"?e.queueNotification:jz(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const h=()=>r&&u(),p=s.subscribe(h);return l.add(u),()=>{p(),l.delete(u)}},dispatch(u){try{return r=!u?.meta?.[RY],i=!r,i&&(o||(o=!0,c(d))),s.dispatch(u)}finally{r=!0}}})},X2e=e=>function(a){const{autoBatch:s=!0}=a??{};let r=new $Y(e);return s&&r.push(zY(typeof s=="object"?s:void 0)),r};function Z2e(e){const t=K2e(),{reducer:a=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof a=="function")l=a;else if(lP(a))l=CY(a);else throw new Error(zr(1));let c;typeof s=="function"?c=s(t):c=t();let d=Hv;r&&(d=Y2e({trace:!1,...typeof r=="object"&&r}));const u=L2e(...c),h=X2e(u);let p=typeof o=="function"?o(h):h();const x=d(...p);return jY(l,i,x)}function FY(e){const t={},a=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(zr(28));if(l in t)throw new Error(zr(29));return t[l]=o,r},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&a.push({matcher:i.settled,reducer:o.settled}),r},addMatcher(i,o){return a.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,a,s]}function J2e(e){return typeof e=="function"}function e_e(e,t){let[a,s,r]=FY(t),i;if(J2e(e))i=()=>Nz(e());else{const l=Nz(e);i=()=>l}function o(l=i(),c){let d=[a[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[r]),d.reduce((u,h)=>{if(h)if(Wl(u)){const x=h(u,c);return x===void 0?u:x}else{if(Qi(u))return MY(u,p=>h(p,c));{const p=h(u,c);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},l)}return o.getInitialState=i,o}var t_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",n_e=(e=21)=>{let t="",a=e;for(;a--;)t+=t_e[Math.random()*64|0];return t},a_e=Symbol.for("rtk-slice-createasyncthunk");function s_e(e,t){return`${e}/${t}`}function r_e({creators:e}={}){const t=e?.asyncThunk?.[a_e];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(zr(11));const o=(typeof s.reducers=="function"?s.reducers(o_e()):s.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,A){const E=typeof S=="string"?S:S.type;if(!E)throw new Error(zr(12));if(E in c.sliceCaseReducersByType)throw new Error(zr(13));return c.sliceCaseReducersByType[E]=A,d},addMatcher(S,A){return c.sliceMatchers.push({matcher:S,reducer:A}),d},exposeAction(S,A){return c.actionCreators[S]=A,d},exposeCaseReducer(S,A){return c.sliceCaseReducersByName[S]=A,d}};l.forEach(S=>{const A=o[S],E={reducerName:S,type:s_e(r,S),createNotation:typeof s.reducers=="function"};c_e(A)?u_e(E,A,d,t):l_e(E,A,d)});function u(){const[S={},A=[],E=void 0]=typeof s.extraReducers=="function"?FY(s.extraReducers):[s.extraReducers],_={...S,...c.sliceCaseReducersByType};return e_e(s.initialState,k=>{for(let T in _)k.addCase(T,_[T]);for(let T of c.sliceMatchers)k.addMatcher(T.matcher,T.reducer);for(let T of A)k.addMatcher(T.matcher,T.reducer);E&&k.addDefaultCase(E)})}const h=S=>S,p=new Map,x=new WeakMap;let b;function N(S,A){return b||(b=u()),b(S,A)}function v(){return b||(b=u()),b.getInitialState()}function j(S,A=!1){function E(k){let T=k[S];return typeof T>"u"&&A&&(T=Vy(x,E,v)),T}function _(k=h){const T=Vy(p,A,()=>new WeakMap);return Vy(T,k,()=>{const O={};for(const[$,R]of Object.entries(s.selectors??{}))O[$]=i_e(R,k,()=>Vy(x,k,v),A);return O})}return{reducerPath:S,getSelectors:_,get selectors(){return _(E)},selectSlice:E}}const w={name:r,reducer:N,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...j(i),injectInto(S,{reducerPath:A,...E}={}){const _=A??i;return S.inject({reducerPath:_,reducer:N},E),{...w,...j(_,!0)}}};return w}}function i_e(e,t,a,s){function r(i,...o){let l=t(i);return typeof l>"u"&&s&&(l=a()),e(l,...o)}return r.unwrapped=e,r}var vr=r_e();function o_e(){function e(t,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...a}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...a){return t(...a)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:a}},asyncThunk:e}}function l_e({type:e,reducerName:t,createNotation:a},s,r){let i,o;if("reducer"in s){if(a&&!d_e(s))throw new Error(zr(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?bi(e,o):bi(e))}function c_e(e){return e._reducerDefinitionType==="asyncThunk"}function d_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function u_e({type:e,reducerName:t},a,s,r){if(!r)throw new Error(zr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=a,h=r(e,i,u);s.exposeAction(t,h),o&&s.addCase(h.fulfilled,o),l&&s.addCase(h.pending,l),c&&s.addCase(h.rejected,c),d&&s.addMatcher(h.settled,d),s.exposeCaseReducer(t,{fulfilled:o||Yy,pending:l||Yy,rejected:c||Yy,settled:d||Yy})}function Yy(){}var m_e="task",UY="listener",BY="completed",hP="cancelled",f_e=`task-${hP}`,h_e=`task-${BY}`,qE=`${UY}-${hP}`,g_e=`${UY}-${BY}`,gj=class{constructor(e){this.code=e,this.message=`${m_e} ${hP} (reason: ${e})`}name="TaskAbortError";message},gP=(e,t)=>{if(typeof e!="function")throw new TypeError(zr(32))},Yv=()=>{},HY=(e,t=Yv)=>(e.catch(t),e),qY=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),vu=e=>{if(e.aborted)throw new gj(e.reason)};function WY(e,t){let a=Yv;return new Promise((s,r)=>{const i=()=>r(new gj(e.reason));if(e.aborted){i();return}a=qY(e,i),t.finally(()=>a()).then(s,r)}).finally(()=>{a=Yv})}var p_e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof gj?"cancelled":"rejected",error:a}}finally{t?.()}},Qv=e=>t=>HY(WY(e,t).then(a=>(vu(e),a))),GY=e=>{const t=Qv(e);return a=>t(new Promise(s=>setTimeout(s,a)))},{assign:yf}=Object,Cz={},pj="listenerMiddleware",x_e=(e,t)=>{const a=s=>qY(e,()=>s.abort(e.reason));return(s,r)=>{gP(s);const i=new AbortController;a(i);const o=p_e(async()=>{vu(e),vu(i.signal);const l=await s({pause:Qv(i.signal),delay:GY(i.signal),signal:i.signal});return vu(i.signal),l},()=>i.abort(h_e));return r?.autoJoin&&t.push(o.catch(Yv)),{result:Qv(e)(o),cancel(){i.abort(f_e)}}}},y_e=(e,t)=>{const a=async(s,r)=>{vu(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:s,effect:(h,p)=>{p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});i=()=>{u(),d()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await WY(t,Promise.race(l));return vu(t),c}finally{i()}};return(s,r)=>HY(a(s,r))},VY=e=>{let{type:t,actionCreator:a,matcher:s,predicate:r,effect:i}=e;if(t)r=bi(t).match;else if(a)t=a.type,r=a.match;else if(s)r=s;else if(!r)throw new Error(zr(21));return gP(i),{predicate:r,type:t,effect:i}},YY=yf(e=>{const{type:t,predicate:a,effect:s}=VY(e);return{id:n_e(),effect:s,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(zr(22))}}},{withTypes:()=>YY}),Sz=(e,t)=>{const{type:a,effect:s,predicate:r}=VY(t);return Array.from(e.values()).find(i=>(typeof a=="string"?i.type===a:i.predicate===r)&&i.effect===s)},WE=e=>{e.pending.forEach(t=>{t.abort(qE)})},b_e=(e,t)=>()=>{for(const a of t.keys())WE(a);e.clear()},_z=(e,t,a)=>{try{e(t,a)}catch(s){setTimeout(()=>{throw s},0)}},QY=yf(bi(`${pj}/add`),{withTypes:()=>QY}),v_e=bi(`${pj}/removeAll`),KY=yf(bi(`${pj}/remove`),{withTypes:()=>KY}),w_e=(...e)=>{console.error(`${pj}/error`,...e)},Wx=(e={})=>{const t=new Map,a=new Map,s=x=>{const b=a.get(x)??0;a.set(x,b+1)},r=x=>{const b=a.get(x)??1;b===1?a.delete(x):a.set(x,b-1)},{extra:i,onError:o=w_e}=e;gP(o);const l=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),b=>{x.unsubscribe(),b?.cancelActive&&WE(x)}),c=x=>{const b=Sz(t,x)??YY(x);return l(b)};yf(c,{withTypes:()=>c});const d=x=>{const b=Sz(t,x);return b&&(b.unsubscribe(),x.cancelActive&&WE(b)),!!b};yf(d,{withTypes:()=>d});const u=async(x,b,N,v)=>{const j=new AbortController,w=y_e(c,j.signal),S=[];try{x.pending.add(j),s(x),await Promise.resolve(x.effect(b,yf({},N,{getOriginalState:v,condition:(A,E)=>w(A,E).then(Boolean),take:w,delay:GY(j.signal),pause:Qv(j.signal),extra:i,signal:j.signal,fork:x_e(j.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((A,E,_)=>{A!==j&&(A.abort(qE),_.delete(A))})},cancel:()=>{j.abort(qE),x.pending.delete(j)},throwIfCancelled:()=>{vu(j.signal)}})))}catch(A){A instanceof gj||_z(o,A,{raisedBy:"effect"})}finally{await Promise.all(S),j.abort(g_e),r(x),x.pending.delete(j)}},h=b_e(t,a);return{middleware:x=>b=>N=>{if(!SY(N))return b(N);if(QY.match(N))return c(N.payload);if(v_e.match(N)){h();return}if(KY.match(N))return d(N.payload);let v=x.getState();const j=()=>{if(v===Cz)throw new Error(zr(23));return v};let w;try{if(w=b(N),t.size>0){const S=x.getState(),A=Array.from(t.values());for(const E of A){let _=!1;try{_=E.predicate(N,S,v)}catch(k){_=!1,_z(o,k,{raisedBy:"predicate"})}_&&u(E,N,x,j)}}}finally{v=Cz}return w},startListening:c,stopListening:d,clearListeners:h}};function zr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var N_e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},XY=vr({name:"chartLayout",initialState:N_e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,s,r,i;e.margin.top=(a=t.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:j_e,setLayout:C_e,setChartSize:S_e,setScale:__e}=XY.actions,A_e=XY.reducer;function ZY(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function ga(e){return Number.isFinite(e)}function Fo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Az(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function of(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Az(Object(a),!0).forEach(function(s){T_e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Az(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function T_e(e,t,a){return(t=E_e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E_e(e){var t=k_e(e,"string");return typeof t=="symbol"?t:t+""}function k_e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hn(e,t,a){return ua(e)||ua(t)?a:zo(t)?Mu(e,t,a):typeof t=="function"?t(e):a}var L_e=(e,t,a)=>{if(t&&a){var{width:s,height:r}=a,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&It(e[i]))return of(of({},e),{},{[i]:e[i]+(s||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&It(e[o]))return of(of({},e),{},{[o]:e[o]+(r||0)})}return e},_d=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",JY=(e,t,a,s)=>{if(s)return e.map(l=>l.coordinate);var r,i,o=e.map(l=>(l.coordinate===t&&(r=!0),l.coordinate===a&&(i=!0),l.coordinate));return r||o.push(t),i||o.push(a),o},eQ=(e,t,a)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:p,axisType:x}=e;if(!o)return null;var b=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,N=r==="category"&&o.bandwidth?o.bandwidth()/b:0;if(N=x==="angleAxis"&&i&&i.length>=2?gs(i[0]-i[1])*2*N:N,h||p){var v=(h||p||[]).map((j,w)=>{var S=s?s.indexOf(j):j;return{coordinate:o(S)+N,value:j,offset:N,index:w}});return v.filter(j=>!Yi(j.coordinate))}return c&&d?d.map((j,w)=>({coordinate:o(j)+N,value:j,index:w,offset:N})):o.ticks&&u!=null?o.ticks(u).map((j,w)=>({coordinate:o(j)+N,value:j,offset:N,index:w})):o.domain().map((j,w)=>({coordinate:o(j)+N,value:s?s[j]:j,index:w,offset:N}))},Tz=1e-4,P_e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var a=t.length,s=e.range(),r=Math.min(s[0],s[1])-Tz,i=Math.max(s[0],s[1])+Tz,o=e(t[0]),l=e(t[a-1]);(o<r||o>i||l<r||l>i)&&e.domain([t[0],t[a-1]])}},D_e=(e,t)=>{if(!t||t.length!==2||!It(t[0])||!It(t[1]))return e;var a=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!It(e[0])||e[0]<a)&&(r[0]=a),(!It(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<a&&(r[1]=a),r},O_e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0,l=0;l<a;++l){var c=e[l],d=c?.[r];if(d!=null){var u=d[1],h=d[0],p=Yi(u)?h:u;p>=0?(d[0]=i,d[1]=i+p,i=u):(d[0]=o,d[1]=o+p,o=u)}}}},M_e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0;o<a;++o){var l=e[o],c=l?.[r];if(c!=null){var d=Yi(c[1])?c[0]:c[1];d>=0?(c[0]=i,c[1]=i+d,i=c[1]):(c[0]=0,c[1]=0)}}}},I_e={sign:O_e,expand:sG,none:cd,silhouette:rG,wiggle:iG,positive:M_e},$_e=(e,t,a)=>{var s,r=(s=I_e[a])!==null&&s!==void 0?s:cd,i=x4().keys(t).value((l,c)=>Number(Hn(l,c,0))).order(Lu).offset(r),o=i(e);return o.forEach((l,c)=>{l.forEach((d,u)=>{var h=Hn(e[u],t[c],0);Array.isArray(h)&&h.length===2&&It(h[0])&&It(h[1])&&(d[0]=h[0],d[1]=h[1])})}),o};function R_e(e){return e==null?void 0:String(e)}function Ez(e){var{axis:t,ticks:a,bandSize:s,entry:r,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ua(r[t.dataKey])){var l=iY(a,"value",r[t.dataKey]);if(l)return l.coordinate+s/2}return a[i]?a[i].coordinate+s/2:null}var c=Hn(r,ua(o)?t.dataKey:o);return ua(c)?null:t.scale(c)}var kz=e=>{var{axis:t,ticks:a,offset:s,bandSize:r,entry:i,index:o}=e;if(t.type==="category")return a[o]?a[o].coordinate+s:null;var l=Hn(i,t.dataKey,t.scale.domain()[o]);return ua(l)?null:t.scale(l)-r/2+s},z_e=e=>{var{numericAxis:t}=e,a=t.scale.domain();if(t.type==="number"){var s=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return s<=0&&r>=0?0:r<0?r:s}return a[0]},F_e=e=>{var t=e.flat(2).filter(It);return[Math.min(...t),Math.max(...t)]},U_e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],B_e=(e,t,a)=>{if(e!=null)return U_e(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:o}=i,l=o.reduce((c,d)=>{var u=ZY(d,t,a),h=F_e(u);return!ga(h[0])||!ga(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]))},Lz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,If=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&t&&t.length>=2){for(var r=lj(t,u=>u.coordinate),i=1/0,o=1,l=r.length;o<l;o++){var c=r[o],d=r[o-1];i=Math.min((c?.coordinate||0)-(d?.coordinate||0),i)}return i===1/0?0:i}return a?void 0:0};function Dz(e){var{tooltipEntrySettings:t,dataKey:a,payload:s,value:r,name:i}=e;return of(of({},t),{},{dataKey:a,payload:s,value:r,name:i})}function ah(e,t){if(e)return String(e);if(typeof t=="string")return t}var H_e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},q_e=(e,t)=>t==="centric"?e.angle:e.radius,nc=e=>e.layout.width,ac=e=>e.layout.height,W_e=e=>e.layout.scale,tQ=e=>e.layout.margin,xj=rt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),yj=rt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nQ="data-recharts-item-index",aQ="data-recharts-item-id",Gx=60;function Oz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Qy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Oz(Object(a),!0).forEach(function(s){G_e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function G_e(e,t,a){return(t=V_e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function V_e(e){var t=Y_e(e,"string");return typeof t=="symbol"?t:t+""}function Y_e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q_e=e=>e.brush.height;function K_e(e){var t=yj(e);return t.reduce((a,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:Gx;return a+r}return a},0)}function X_e(e){var t=yj(e);return t.reduce((a,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:Gx;return a+r}return a},0)}function Z_e(e){var t=xj(e);return t.reduce((a,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?a+s.height:a,0)}function J_e(e){var t=xj(e);return t.reduce((a,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?a+s.height:a,0)}var is=rt([nc,ac,tQ,Q_e,K_e,X_e,Z_e,J_e,wY,C2e],(e,t,a,s,r,i,o,l,c,d)=>{var u={left:(a.left||0)+r,right:(a.right||0)+i},h={top:(a.top||0)+o,bottom:(a.bottom||0)+l},p=Qy(Qy({},h),u),x=p.bottom;p.bottom+=s,p=L_e(p,c,d);var b=e-p.left-p.right,N=t-p.top-p.bottom;return Qy(Qy({brushBottom:x},p),{},{width:Math.max(b,0),height:Math.max(N,0)})}),eAe=rt(is,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),pP=rt(nc,ac,(e,t)=>({x:0,y:0,width:e,height:t})),tAe=f.createContext(null),Fs=()=>f.useContext(tAe)!=null,bj=e=>e.brush,vj=rt([bj,is,tQ],(e,t,a)=>({height:e.height,x:It(e.x)?e.x:t.left,y:It(e.y)?e.y:t.top+t.height+t.brushBottom-(a?.bottom||0),width:It(e.width)?e.width:t.width})),d_={},u_={},m_={},Mz;function nAe(){return Mz||(Mz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s,{signal:r,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{l!==null&&(a.apply(o,l),o=void 0,l=null)},h=()=>{d&&u(),N()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},s)},b=()=>{p!==null&&(clearTimeout(p),p=null)},N=()=>{b(),o=void 0,l=null},v=()=>{u()},j=function(...w){if(r?.aborted)return;o=this,l=w;const S=p==null;x(),c&&S&&u()};return j.schedule=x,j.cancel=N,j.flush=v,r?.addEventListener("abort",N,{once:!0}),j}e.debounce=t})(m_)),m_}var Iz;function aAe(){return Iz||(Iz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nAe();function a(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,h=null;const p=t.debounce(function(...N){u=s.apply(this,N),h=null},r,{edges:d}),x=function(...N){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(u=s.apply(this,N),h=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,N),u)},b=()=>(p.flush(),u);return x.cancel=p.cancel,x.flush=b,x}e.debounce=a})(u_)),u_}var $z;function sAe(){return $z||($z=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aAe();function a(s,r=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(s,r,{leading:o,maxWait:r,trailing:l})}e.throttle=a})(d_)),d_}var f_,Rz;function rAe(){return Rz||(Rz=1,f_=sAe().throttle),f_}var iAe=rAe();const oAe=Ki(iAe);var Kv=function(t,a){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(a.replace(/%s/g,()=>r[o++]))}},sQ=(e,t,a)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:o}=a,l=ql(s)?e:Number(s),c=ql(r)?t:Number(r);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},lAe={width:0,height:0,overflow:"visible"},cAe={width:0,overflowX:"visible"},dAe={height:0,overflowY:"visible"},uAe={},mAe=e=>{var{width:t,height:a}=e,s=ql(t),r=ql(a);return s&&r?lAe:s?cAe:r?dAe:uAe};function fAe(e){var{width:t,height:a,aspect:s}=e,r=t,i=a;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function GE(){return GE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},GE.apply(null,arguments)}function zz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Fz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?zz(Object(a),!0).forEach(function(s){hAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function hAe(e,t,a){return(t=gAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gAe(e){var t=pAe(e,"string");return typeof t=="symbol"?t:t+""}function pAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rQ=f.createContext({width:-1,height:-1});function xAe(e){return Fo(e.width)&&Fo(e.height)}function iQ(e){var{children:t,width:a,height:s}=e,r=f.useMemo(()=>({width:a,height:s}),[a,s]);return xAe(r)?f.createElement(rQ.Provider,{value:r},t):null}var xP=()=>f.useContext(rQ),yAe=f.forwardRef((e,t)=>{var{aspect:a,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:p,onResize:x,style:b={}}=e,N=f.useRef(null),v=f.useRef();v.current=x,f.useImperativeHandle(t,()=>N.current);var[j,w]=f.useState({containerWidth:s.width,containerHeight:s.height}),S=f.useCallback((T,O)=>{w($=>{var R=Math.round(T),P=Math.round(O);return $.containerWidth===R&&$.containerHeight===P?$:{containerWidth:R,containerHeight:P}})},[]);f.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Ux;var T=P=>{var I,{width:H,height:Q}=P[0].contentRect;S(H,Q),(I=v.current)===null||I===void 0||I.call(v,H,Q)};u>0&&(T=oAe(T,u,{trailing:!0,leading:!1}));var O=new ResizeObserver(T),{width:$,height:R}=N.current.getBoundingClientRect();return S($,R),O.observe(N.current),()=>{O.disconnect()}},[S,u]);var{containerWidth:A,containerHeight:E}=j;Kv(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:_,calculatedHeight:k}=sQ(A,E,{width:r,height:i,aspect:a,maxHeight:c});return Kv(_!=null&&_>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,k,r,i,o,l,a),f.createElement("div",{id:h?"".concat(h):void 0,className:Pt("recharts-responsive-container",p),style:Fz(Fz({},b),{},{width:r,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:N},f.createElement("div",{style:mAe({width:r,height:i})},f.createElement(iQ,{width:_,height:k},d)))}),h_=f.forwardRef((e,t)=>{var a=xP();if(Fo(a.width)&&Fo(a.height))return e.children;var{width:s,height:r}=fAe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=sQ(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return It(i)&&It(o)?f.createElement(iQ,{width:i,height:o},e.children):f.createElement(yAe,GE({},e,{width:s,height:r,ref:t}))});function oQ(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var wj=()=>{var e,t=Fs(),a=Rt(eAe),s=Rt(vj),r=(e=Rt(bj))===null||e===void 0?void 0:e.padding;return!t||!s||!r?a:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},bAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},lQ=()=>{var e;return(e=Rt(is))!==null&&e!==void 0?e:bAe},yP=()=>Rt(nc),bP=()=>Rt(ac),vAe=()=>Rt(e=>e.layout.margin),wn=e=>e.layout.layoutType,sh=()=>Rt(wn),wAe=()=>{var e=sh();return e!==void 0},Nj=e=>{var t=Xn(),a=Fs(),{width:s,height:r}=e,i=xP(),o=s,l=r;return i&&(o=i.width>0?i.width:s,l=i.height>0?i.height:r),f.useEffect(()=>{!a&&Fo(o)&&Fo(l)&&t(S_e({width:o,height:l}))},[t,a,o,l]),null},cQ=Symbol.for("immer-nothing"),Uz=Symbol.for("immer-draftable"),Br=Symbol.for("immer-state");function Ui(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Dp=Object.getPrototypeOf;function $f(e){return!!e&&!!e[Br]}function $u(e){return e?dQ(e)||Array.isArray(e)||!!e[Uz]||!!e.constructor?.[Uz]||Vx(e)||Cj(e):!1}var NAe=Object.prototype.constructor.toString(),Bz=new WeakMap;function dQ(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let s=Bz.get(a);return s===void 0&&(s=Function.toString.call(a),Bz.set(a,s)),s===NAe}function Xv(e,t,a=!0){jj(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function jj(e){const t=e[Br];return t?t.type_:Array.isArray(e)?1:Vx(e)?2:Cj(e)?3:0}function VE(e,t){return jj(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uQ(e,t,a){const s=jj(e);s===2?e.set(t,a):s===3?e.add(a):e[t]=a}function jAe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Vx(e){return e instanceof Map}function Cj(e){return e instanceof Set}function Xd(e){return e.copy_||e.base_}function YE(e,t){if(Vx(e))return new Map(e);if(Cj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=dQ(e);if(t===!0||t==="class_only"&&!a){const s=Object.getOwnPropertyDescriptors(e);delete s[Br];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Dp(e),s)}else{const s=Dp(e);if(s!==null&&a)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function vP(e,t=!1){return Sj(e)||$f(e)||!$u(e)||(jj(e)>1&&Object.defineProperties(e,{set:Ky,add:Ky,clear:Ky,delete:Ky}),Object.freeze(e),t&&Object.values(e).forEach(a=>vP(a,!0))),e}function CAe(){Ui(2)}var Ky={value:CAe};function Sj(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var SAe={};function Ru(e){const t=SAe[e];return t||Ui(0,e),t}var Op;function mQ(){return Op}function _Ae(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Hz(e,t){t&&(Ru("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function QE(e){KE(e),e.drafts_.forEach(AAe),e.drafts_=null}function KE(e){e===Op&&(Op=e.parent_)}function qz(e){return Op=_Ae(Op,e)}function AAe(e){const t=e[Br];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Wz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return e!==void 0&&e!==a?(a[Br].modified_&&(QE(t),Ui(4)),$u(e)&&(e=Zv(t,e),t.parent_||Jv(t,e)),t.patches_&&Ru("Patches").generateReplacementPatches_(a[Br].base_,e,t.patches_,t.inversePatches_)):e=Zv(t,a,[]),QE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cQ?e:void 0}function Zv(e,t,a){if(Sj(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Br];if(!r)return Xv(t,(i,o)=>Gz(e,r,t,i,o,a),s),t;if(r.scope_!==e)return t;if(!r.modified_)return Jv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),Xv(o,(c,d)=>Gz(e,r,i,c,d,a,l),s),Jv(e,i,!1),a&&e.patches_&&Ru("Patches").generatePatches_(r,a,e.patches_,e.inversePatches_)}return r.copy_}function Gz(e,t,a,s,r,i,o){if(r==null||typeof r!="object"&&!o)return;const l=Sj(r);if(!(l&&!o)){if($f(r)){const c=i&&t&&t.type_!==3&&!VE(t.assigned_,s)?i.concat(s):void 0,d=Zv(e,r,c);if(uQ(a,s,d),$f(d))e.canAutoFreeze_=!1;else return}else o&&a.add(r);if($u(r)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&l)return;Zv(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Vx(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))&&Jv(e,r)}}}function Jv(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&vP(t,a)}function TAe(e,t){const a=Array.isArray(e),s={type_:a?1:0,scope_:t?t.scope_:mQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=wP;a&&(r=[s],i=Mp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,l}var wP={get(e,t){if(t===Br)return e;const a=Xd(e);if(!VE(a,t))return EAe(e,a,t);const s=a[t];return e.finalized_||!$u(s)?s:s===g_(e.base_,t)?(p_(e),e.copy_[t]=ZE(s,e)):s},has(e,t){return t in Xd(e)},ownKeys(e){return Reflect.ownKeys(Xd(e))},set(e,t,a){const s=fQ(Xd(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=g_(Xd(e),t),i=r?.[Br];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(jAe(a,r)&&(a!==void 0||VE(e.base_,t)))return!0;p_(e),XE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty(e,t){return g_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,p_(e),XE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Xd(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:a[t]}},defineProperty(){Ui(11)},getPrototypeOf(e){return Dp(e.base_)},setPrototypeOf(){Ui(12)}},Mp={};Xv(wP,(e,t)=>{Mp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Mp.deleteProperty=function(e,t){return Mp.set.call(this,e,t,void 0)};Mp.set=function(e,t,a){return wP.set.call(this,e[0],t,a,e[0])};function g_(e,t){const a=e[Br];return(a?Xd(a):e)[t]}function EAe(e,t,a){const s=fQ(t,a);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function fQ(e,t){if(!(t in e))return;let a=Dp(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Dp(a)}}function XE(e){e.modified_||(e.modified_=!0,e.parent_&&XE(e.parent_))}function p_(e){e.copy_||(e.copy_=YE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var kAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,a,s)=>{if(typeof t=="function"&&typeof a!="function"){const i=a;a=t;const o=this;return function(c=i,...d){return o.produce(c,u=>a.call(this,u,...d))}}typeof a!="function"&&Ui(6),s!==void 0&&typeof s!="function"&&Ui(7);let r;if($u(t)){const i=qz(this),o=ZE(t,void 0);let l=!0;try{r=a(o),l=!1}finally{l?QE(i):KE(i)}return Hz(i,s),Wz(r,i)}else if(!t||typeof t!="object"){if(r=a(t),r===void 0&&(r=t),r===cQ&&(r=void 0),this.autoFreeze_&&vP(r,!0),s){const i=[],o=[];Ru("Patches").generateReplacementPatches_(t,r,i,o),s(i,o)}return r}else Ui(1,t)},this.produceWithPatches=(t,a)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,r;return[this.produce(t,a,(o,l)=>{s=o,r=l}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){$u(e)||Ui(8),$f(e)&&(e=LAe(e));const t=qz(this),a=ZE(e,void 0);return a[Br].isManual_=!0,KE(t),a}finishDraft(e,t){const a=e&&e[Br];(!a||!a.isManual_)&&Ui(9);const{scope_:s}=a;return Hz(s,t),Wz(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const r=t[a];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}a>-1&&(t=t.slice(a+1));const s=Ru("Patches").applyPatches_;return $f(e)?s(e,t):this.produce(e,r=>s(r,t))}};function ZE(e,t){const a=Vx(e)?Ru("MapSet").proxyMap_(e,t):Cj(e)?Ru("MapSet").proxySet_(e,t):TAe(e,t);return(t?t.scope_:mQ()).drafts_.push(a),a}function LAe(e){return $f(e)||Ui(10,e),hQ(e)}function hQ(e){if(!$u(e)||Sj(e))return e;const t=e[Br];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=YE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=YE(e,!0);return Xv(a,(r,i)=>{uQ(a,r,hQ(i))},s),t&&(t.finalized_=!1),a}var PAe=new kAe;PAe.produce;var DAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},gQ=vr({name:"legend",initialState:DAe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:oa()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:s}=t.payload,r=qi(e).payload.indexOf(a);r>-1&&(e.payload[r]=s)},prepare:oa()},removeLegendPayload:{reducer(e,t){var a=qi(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:oa()}}}),{setLegendSize:Vz,setLegendSettings:OAe,addLegendPayload:pQ,replaceLegendPayload:xQ,removeLegendPayload:yQ}=gQ.actions,MAe=gQ.reducer,IAe=["contextPayload"];function JE(){return JE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},JE.apply(null,arguments)}function Yz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Rf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(a),!0).forEach(function(s){$Ae(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function $Ae(e,t,a){return(t=RAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function RAe(e){var t=zAe(e,"string");return typeof t=="symbol"?t:t+""}function zAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FAe(e,t){if(e==null)return{};var a,s,r=UAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function UAe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function BAe(e){return e.value}function HAe(e){var{contextPayload:t}=e,a=FAe(e,IAe),s=yY(t,e.payloadUniqBy,BAe),r=Rf(Rf({},a),{},{payload:s});return f.isValidElement(e.content)?f.cloneElement(e.content,r):typeof e.content=="function"?f.createElement(e.content,r):f.createElement(YSe,r)}function qAe(e,t,a,s,r,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((s||0)-i.width)/2}:d=l==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((r||0)-i.height)/2}:u=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),Rf(Rf({},d),u)}function WAe(e){var t=Xn();return f.useEffect(()=>{t(OAe(e))},[t,e]),null}function GAe(e){var t=Xn();return f.useEffect(()=>(t(Vz(e)),()=>{t(Vz({width:0,height:0}))}),[t,e]),null}function VAe(e,t,a,s){return e==="vertical"&&It(t)?{height:t}:e==="horizontal"?{width:a||s}:null}var YAe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function bQ(e){var t=Va(e,YAe),a=A2e(),s=ySe(),r=vAe(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[d,u]=NY([a]),h=yP(),p=bP();if(h==null||p==null)return null;var x=h-(r?.left||0)-(r?.right||0),b=VAe(t.layout,o,i,x),N=c?l:Rf(Rf({position:"absolute",width:b?.width||i||"auto",height:b?.height||o||"auto"},qAe(l,t,r,h,p,d)),l),v=c??s;if(v==null||a==null)return null;var j=f.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:u},f.createElement(WAe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&f.createElement(GAe,{width:d.width,height:d.height}),f.createElement(HAe,JE({},t,b,{margin:r,chartWidth:h,chartHeight:p,contextPayload:a})));return Bi.createPortal(j,v)}bQ.displayName="Legend";function ek(){return ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ek.apply(null,arguments)}function Qz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function x_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Qz(Object(a),!0).forEach(function(s){QAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function QAe(e,t,a){return(t=KAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function KAe(e){var t=XAe(e,"string");return typeof t=="symbol"?t:t+""}function XAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZAe(e){return Array.isArray(e)&&zo(e[0])&&zo(e[1])?e.join(" ~ "):e}var JAe=e=>{var{separator:t=" : ",contentStyle:a={},itemStyle:s={},labelStyle:r={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var E={padding:0,margin:0},_=(l?lj(i,l):i).map((k,T)=>{if(k.type==="none")return null;var O=k.formatter||o||ZAe,{value:$,name:R}=k,P=$,I=R;if(O){var H=O($,R,k,T,i);if(Array.isArray(H))[P,I]=H;else if(H!=null)P=H;else return null}var Q=x_({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},s);return f.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:Q},zo(I)?f.createElement("span",{className:"recharts-tooltip-item-name"},I):null,zo(I)?f.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,f.createElement("span",{className:"recharts-tooltip-item-value"},P),f.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return f.createElement("ul",{className:"recharts-tooltip-item-list",style:E},_)}return null},b=x_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=x_({margin:0},r),v=!ua(u),j=v?u:"",w=Pt("recharts-default-tooltip",c),S=Pt("recharts-tooltip-label",d);v&&h&&i!==void 0&&i!==null&&(j=h(u,i));var A=p?{role:"status","aria-live":"assertive"}:{};return f.createElement("div",ek({className:w,style:b},A),f.createElement("p",{className:S,style:N},f.isValidElement(j)?j:"".concat(j)),x())},gg="recharts-tooltip-wrapper",eTe={visibility:"hidden"};function tTe(e){var{coordinate:t,translateX:a,translateY:s}=e;return Pt(gg,{["".concat(gg,"-right")]:It(a)&&t&&It(t.x)&&a>=t.x,["".concat(gg,"-left")]:It(a)&&t&&It(t.x)&&a<t.x,["".concat(gg,"-bottom")]:It(s)&&t&&It(t.y)&&s>=t.y,["".concat(gg,"-top")]:It(s)&&t&&It(t.y)&&s<t.y})}function Kz(e){var{allowEscapeViewBox:t,coordinate:a,key:s,offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&It(i[s]))return i[s];var u=a[s]-l-(r>0?r:0),h=a[s]+r;if(t[s])return o[s]?u:h;var p=c[s];if(p==null)return 0;if(o[s]){var x=u,b=p;return x<b?Math.max(h,p):Math.max(u,p)}if(d==null)return 0;var N=h+l,v=p+d;return N>v?Math.max(u,p):Math.max(h,p)}function nTe(e){var{translateX:t,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function aTe(e){var{allowEscapeViewBox:t,coordinate:a,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&a?(u=Kz({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=Kz({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=nTe({translateX:u,translateY:h,useTranslate3d:l})):d=eTe,{cssProperties:d,cssClasses:tTe({translateX:u,translateY:h,coordinate:a})}}function Xz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Xy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(a),!0).forEach(function(s){tk(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function tk(e,t,a){return(t=sTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function sTe(e){var t=rTe(e,"string");return typeof t=="symbol"?t:t+""}function rTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iTe extends f.PureComponent{constructor(){super(...arguments),tk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),tk(this,"handleKeyDown",t=>{if(t.key==="Escape"){var a,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,a;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:a,animationDuration:s,animationEasing:r,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:p,viewBox:x,wrapperStyle:b,lastBoundingBox:N,innerRef:v,hasPortalFromProps:j}=this.props,{cssClasses:w,cssProperties:S}=aTe({allowEscapeViewBox:a,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:N.height,width:N.width},useTranslate3d:p,viewBox:x}),A=j?{}:Xy(Xy({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),E=Xy(Xy({},A),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},b);return f.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:E,ref:v},i)}}var vQ=()=>{var e;return(e=Rt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},nk.apply(null,arguments)}function Zz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Jz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Zz(Object(a),!0).forEach(function(s){oTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oTe(e,t,a){return(t=lTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lTe(e){var t=cTe(e,"string");return typeof t=="symbol"?t:t+""}function cTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eF={curveBasisClosed:upe,curveBasisOpen:mpe,curveBasis:dpe,curveBumpX:OW,curveBumpY:MW,curveLinearClosed:gpe,curveLinear:Tx,curveMonotoneX:uE,curveMonotoneY:ZW,curveNatural:eG,curveStep:tG,curveStepAfter:aG,curveStepBefore:nG},ew=e=>ga(e.x)&&ga(e.y),tF=e=>e.base!=null&&ew(e.base)&&ew(e),pg=e=>e.x,xg=e=>e.y,dTe=(e,t)=>{if(typeof e=="function")return e;var a="curve".concat(Fx(e));return(a==="curveMonotone"||a==="curveBump")&&t?eF["".concat(a).concat(t==="vertical"?"Y":"X")]:eF[a]||Tx},uTe=e=>{var{type:t="linear",points:a=[],baseLine:s,layout:r,connectNulls:i=!1}=e,o=dTe(t,r),l=i?a.filter(ew):a,c;if(Array.isArray(s)){var d=a.map((x,b)=>Jz(Jz({},x),{},{base:s[b]}));r==="vertical"?c=Ig().y(xg).x1(pg).x0(x=>x.base.x):c=Ig().x(pg).y1(xg).y0(x=>x.base.y);var u=c.defined(tF).curve(o),h=i?d.filter(tF):d;return u(h)}r==="vertical"&&It(s)?c=Ig().y(xg).x1(pg).x0(s):It(s)?c=Ig().x(pg).y1(xg).y0(s):c=h4().x(pg).y(xg);var p=c.defined(ew).curve(o);return p(l)},NP=e=>{var{className:t,points:a,path:s,pathRef:r}=e,i=sh();if((!a||!a.length)&&!s)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=a&&a.length?uTe(o):s;return f.createElement("path",nk({},Ur(e),rP(e),{className:Pt("recharts-curve",t),d:l===null?void 0:l,ref:r}))},mTe=["x","y","top","left","width","height","className"];function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ak.apply(null,arguments)}function nF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function fTe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?nF(Object(a),!0).forEach(function(s){hTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function hTe(e,t,a){return(t=gTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gTe(e){var t=pTe(e,"string");return typeof t=="symbol"?t:t+""}function pTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xTe(e,t){if(e==null)return{};var a,s,r=yTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var bTe=(e,t,a,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(a),vTe=e=>{var{x:t=0,y:a=0,top:s=0,left:r=0,width:i=0,height:o=0,className:l}=e,c=xTe(e,mTe),d=fTe({x:t,y:a,top:s,left:r,width:i,height:o},c);return!It(t)||!It(a)||!It(i)||!It(o)||!It(s)||!It(r)?null:f.createElement("path",ak({},Vs(d),{className:Pt("recharts-cross",l),d:bTe(t,a,i,o,s,r)}))};function wTe(e,t,a,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-r,width:e==="horizontal"?s:a.width-1,height:e==="horizontal"?a.height-1:s}}function aF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function sF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?aF(Object(a),!0).forEach(function(s){NTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function NTe(e,t,a){return(t=jTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jTe(e){var t=CTe(e,"string");return typeof t=="symbol"?t:t+""}function CTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var STe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),wQ=(e,t,a)=>e.map(s=>"".concat(STe(s)," ").concat(t,"ms ").concat(a)).join(","),_Te=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((a,s)=>a.filter(r=>s.includes(r))),Ip=(e,t)=>Object.keys(t).reduce((a,s)=>sF(sF({},a),{},{[s]:e(s,t[s])}),{});function rF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Qa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?rF(Object(a),!0).forEach(function(s){ATe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ATe(e,t,a){return(t=TTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TTe(e){var t=ETe(e,"string");return typeof t=="symbol"?t:t+""}function ETe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tw=(e,t,a)=>e+(t-e)*a,sk=e=>{var{from:t,to:a}=e;return t!==a},NQ=(e,t,a)=>{var s=Ip((r,i)=>{if(sk(i)){var[o,l]=e(i.from,i.to,i.velocity);return Qa(Qa({},i),{},{from:o,velocity:l})}return i},t);return a<1?Ip((r,i)=>sk(i)&&s[r]!=null?Qa(Qa({},i),{},{velocity:tw(i.velocity,s[r].velocity,a),from:tw(i.from,s[r].from,a)}):i,t):NQ(e,s,a-1)};function kTe(e,t,a,s,r,i){var o,l=s.reduce((p,x)=>Qa(Qa({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>Ip((p,x)=>x.from,l),d=()=>!Object.values(l).filter(sk).length,u=null,h=p=>{o||(o=p);var x=p-o,b=x/a.dt;l=NQ(a,l,b),r(Qa(Qa(Qa({},e),t),c())),o=p,d()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{var p;(p=u)===null||p===void 0||p()})}function LTe(e,t,a,s,r,i,o){var l=null,c=r.reduce((h,p)=>{var x=e[p],b=t[p];return x==null||b==null?h:Qa(Qa({},h),{},{[p]:[x,b]})},{}),d,u=h=>{d||(d=h);var p=(h-d)/s,x=Ip((N,v)=>tw(...v,a(p)),c);if(i(Qa(Qa(Qa({},e),t),x)),p<1)l=o.setTimeout(u);else{var b=Ip((N,v)=>tw(...v,a(1)),c);i(Qa(Qa(Qa({},e),t),b))}};return()=>(l=o.setTimeout(u),()=>{var h;(h=l)===null||h===void 0||h()})}const PTe=(e,t,a,s,r,i)=>{var o=_Te(e,t);return a==null?()=>(r(Qa(Qa({},e),t)),()=>{}):a.isStepper===!0?kTe(e,t,a,o,r,i):LTe(e,t,a,s,o,r,i)};var nw=1e-4,jQ=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],CQ=(e,t)=>e.map((a,s)=>a*t**s).reduce((a,s)=>a+s),iF=(e,t)=>a=>{var s=jQ(e,t);return CQ(s,a)},DTe=(e,t)=>a=>{var s=jQ(e,t),r=[...s.map((i,o)=>i*o).slice(1),0];return CQ(r,a)},OTe=e=>{var t,a=e.split("(");if(a.length!==2||a[0]!=="cubic-bezier")return null;var s=(t=a[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},MTe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=OTe(a[0]);if(r)return r}}return a.length===4?a:[0,0,1,1]},ITe=(e,t,a,s)=>{var r=iF(e,a),i=iF(t,s),o=DTe(e,a),l=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,h=u,p=0;p<8;++p){var x=r(h)-u,b=o(h);if(Math.abs(x-u)<nw||b<nw)return i(h);h=l(h-x/b)}return i(h)};return c.isStepper=!1,c},oF=function(){return ITe(...MTe(...arguments))},$Te=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:s=8,dt:r=17}=t,i=(o,l,c)=>{var d=-(o-l)*a,u=c*s,h=c+(d-u)*r/1e3,p=c*r/1e3+o;return Math.abs(p-l)<nw&&Math.abs(h)<nw?[l,0]:[p,h]};return i.isStepper=!0,i.dt=r,i},RTe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oF(e);case"spring":return $Te();default:if(e.split("(")[0]==="cubic-bezier")return oF(e)}return typeof e=="function"?e:null};function zTe(e){var t,a=()=>null,s=!1,r=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){r=e.setTimeout(i.bind(null,d),c);return}i(c),r=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,a(t)),typeof o=="object"&&(t=o,a(t)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,r&&(r(),r=null),i(o)},subscribe:o=>(a=o,()=>{a=()=>null}),getTimeoutController:()=>e}}class FTe{setTimeout(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=o=>{o-s>=a?t(o):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function UTe(){return zTe(new FTe)}var BTe=f.createContext(UTe);function HTe(e,t){var a=f.useContext(BTe);return f.useMemo(()=>t??a(e),[e,t,a])}var qTe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_j={isSsr:qTe()},WTe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},lF={t:0},y_={t:1};function Yx(e){var t=Va(e,WTe),{isActive:a,canBegin:s,duration:r,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=a==="auto"?!_j.isSsr:a,h=HTe(t.animationId,t.animationManager),[p,x]=f.useState(u?lF:y_),b=f.useRef(null);return f.useEffect(()=>{u||x(y_)},[u]),f.useEffect(()=>{if(!u||!s)return Ux;var N=PTe(lF,y_,RTe(i),r,x,h.getTimeoutController()),v=()=>{b.current=N()};return h.start([c,o,v,r,l]),()=>{h.stop(),b.current&&b.current(),l()}},[u,s,r,i,o,c,l,h]),d(p.t)}function Qx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=f.useRef(Ep(t)),s=f.useRef(e);return s.current!==e&&(a.current=Ep(t),s.current=e),a.current}var GTe=["radius"],VTe=["radius"],cF,dF,uF,mF,fF,hF,gF,pF,xF,yF;function bF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function vF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bF(Object(a),!0).forEach(function(s){YTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function YTe(e,t,a){return(t=QTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QTe(e){var t=KTe(e,"string");return typeof t=="symbol"?t:t+""}function KTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},aw.apply(null,arguments)}function wF(e,t){if(e==null)return{};var a,s,r=XTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function XTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function io(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var NF=(e,t,a,s,r)=>{var i=Kc(a),o=Kc(s),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,d=i>=0?1:-1,u=o>=0&&i>=0||o<0&&i<0?1:0,h;if(l>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,b=4;x<b;x++)p[x]=r[x]>l?l:r[x];h=ja(cF||(cF=io(["M",",",""])),e,t+c*p[0]),p[0]>0&&(h+=ja(dF||(dF=io(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+d*p[0],t)),h+=ja(uF||(uF=io(["L ",",",""])),e+a-d*p[1],t),p[1]>0&&(h+=ja(mF||(mF=io(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+a,t+c*p[1])),h+=ja(fF||(fF=io(["L ",",",""])),e+a,t+s-c*p[2]),p[2]>0&&(h+=ja(hF||(hF=io(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+a-d*p[2],t+s)),h+=ja(gF||(gF=io(["L ",",",""])),e+d*p[3],t+s),p[3]>0&&(h+=ja(pF||(pF=io(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+s-c*p[3])),h+="Z"}else if(l>0&&r===+r&&r>0){var N=Math.min(l,r);h=ja(xF||(xF=io(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*N,N,N,u,e+d*N,t,e+a-d*N,t,N,N,u,e+a,t+c*N,e+a,t+s-c*N,N,N,u,e+a-d*N,t+s,e+d*N,t+s,N,N,u,e,t+s-c*N)}else h=ja(yF||(yF=io(["M ",","," h "," v "," h "," Z"])),e,t,a,s,-a);return h},jF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SQ=e=>{var t=Va(e,jF),a=f.useRef(null),[s,r]=f.useState(-1);f.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var K=a.current.getTotalLength();K&&r(K)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:p,animationBegin:x,isAnimationActive:b,isUpdateAnimationActive:N}=t,v=f.useRef(l),j=f.useRef(c),w=f.useRef(i),S=f.useRef(o),A=f.useMemo(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),E=Qx(A,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var _=Pt("recharts-rectangle",u);if(!N){var k=Vs(t),{radius:T}=k,O=wF(k,GTe);return f.createElement("path",aw({},O,{x:Kc(i),y:Kc(o),width:Kc(l),height:Kc(c),radius:typeof d=="number"?d:void 0,className:_,d:NF(i,o,l,c,d)}))}var $=v.current,R=j.current,P=w.current,I=S.current,H="0px ".concat(s===-1?1:s,"px"),Q="".concat(s,"px 0px"),G=wQ(["strokeDasharray"],p,typeof h=="string"?h:jF.animationEasing);return f.createElement(Yx,{animationId:E,key:E,canBegin:s>0,duration:p,easing:h,isActive:N,begin:x},K=>{var W=la($,l,K),J=la(R,c,K),Te=la(P,i,K),ee=la(I,o,K);a.current&&(v.current=W,j.current=J,w.current=Te,S.current=ee);var U;b?K>0?U={transition:G,strokeDasharray:Q}:U={strokeDasharray:H}:U={strokeDasharray:Q};var je=Vs(t),{radius:be}=je,le=wF(je,VTe);return f.createElement("path",aw({},le,{radius:typeof d=="number"?d:void 0,className:_,d:NF(Te,ee,W,J,d),ref:a,style:vF(vF({},U),t.style)}))})};function CF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function SF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?CF(Object(a),!0).forEach(function(s){ZTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZTe(e,t,a){return(t=JTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JTe(e){var t=eEe(e,"string");return typeof t=="symbol"?t:t+""}function eEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sw=Math.PI/180,tEe=e=>e*180/Math.PI,Ba=(e,t,a,s)=>({x:e+Math.cos(-sw*s)*a,y:t+Math.sin(-sw*s)*a}),_Q=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},nEe=(e,t)=>{var{x:a,y:s}=e,{x:r,y:i}=t;return Math.sqrt((a-r)**2+(s-i)**2)},aEe=(e,t)=>{var{x:a,y:s}=e,{cx:r,cy:i}=t,o=nEe({x:a,y:s},{x:r,y:i});if(o<=0)return{radius:o,angle:0};var l=(a-r)/o,c=Math.acos(l);return s>i&&(c=2*Math.PI-c),{radius:o,angle:tEe(c),angleInRadian:c}},sEe=e=>{var{startAngle:t,endAngle:a}=e,s=Math.floor(t/360),r=Math.floor(a/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:a-i*360}},rEe=(e,t)=>{var{startAngle:a,endAngle:s}=t,r=Math.floor(a/360),i=Math.floor(s/360),o=Math.min(r,i);return e+o*360},iEe=(e,t)=>{var{chartX:a,chartY:s}=e,{radius:r,angle:i}=aEe({x:a,y:s},t),{innerRadius:o,outerRadius:l}=t;if(r<o||r>l||r===0)return null;var{startAngle:c,endAngle:d}=sEe(t),u=i,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?SF(SF({},t),{},{radius:r,angle:rEe(u,t)}):null};function AQ(e){var{cx:t,cy:a,radius:s,startAngle:r,endAngle:i}=e,o=Ba(t,a,s,r),l=Ba(t,a,s,i);return{points:[o,l],cx:t,cy:a,radius:s,startAngle:r,endAngle:i}}var _F,AF,TF,EF,kF,LF,PF;function rk(){return rk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},rk.apply(null,arguments)}function du(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var oEe=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),359.999);return a*s},Zy=e=>{var{cx:t,cy:a,radius:s,angle:r,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+s,u=Math.asin(l/d)/sw,h=c?r:r+i*u,p=Ba(t,a,d,h),x=Ba(t,a,s,h),b=c?r-i*u:r,N=Ba(t,a,d*Math.cos(u*sw),b);return{center:p,circleTangency:x,lineTangency:N,theta:u}},TQ=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:i,endAngle:o}=e,l=oEe(i,o),c=i+l,d=Ba(t,a,r,i),u=Ba(t,a,r,c),h=ja(_F||(_F=du(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(l)>180),+(i>c),u.x,u.y);if(s>0){var p=Ba(t,a,s,i),x=Ba(t,a,s,c);h+=ja(AF||(AF=du(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(l)>180),+(i<=c),p.x,p.y)}else h+=ja(TF||(TF=du(["L ",","," Z"])),t,a);return h},lEe=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=gs(d-c),{circleTangency:h,lineTangency:p,theta:x}=Zy({cx:t,cy:a,radius:r,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:b,lineTangency:N,theta:v}=Zy({cx:t,cy:a,radius:r,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),j=l?Math.abs(c-d):Math.abs(c-d)-x-v;if(j<0)return o?ja(EF||(EF=du(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):TQ({cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:c,endAngle:d});var w=ja(kF||(kF=du(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(u<0),h.x,h.y,r,r,+(j>180),+(u<0),b.x,b.y,i,i,+(u<0),N.x,N.y);if(s>0){var{circleTangency:S,lineTangency:A,theta:E}=Zy({cx:t,cy:a,radius:s,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:_,lineTangency:k,theta:T}=Zy({cx:t,cy:a,radius:s,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),O=l?Math.abs(c-d):Math.abs(c-d)-E-T;if(O<0&&i===0)return"".concat(w,"L").concat(t,",").concat(a,"Z");w+=ja(LF||(LF=du(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,i,i,+(u<0),_.x,_.y,s,s,+(O>180),+(u>0),S.x,S.y,i,i,+(u<0),A.x,A.y)}else w+=ja(PF||(PF=du(["L",",","Z"])),t,a);return w},cEe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},EQ=e=>{var t=Va(e,cEe),{cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<r||d===u)return null;var p=Pt("recharts-sector",h),x=i-r,b=Is(o,x,0,!0),N;return b>0&&Math.abs(d-u)<360?N=lEe({cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(b,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):N=TQ({cx:a,cy:s,innerRadius:r,outerRadius:i,startAngle:d,endAngle:u}),f.createElement("path",rk({},Vs(t),{className:p,d:N}))};function dEe(e,t,a){if(e==="horizontal")return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(lY(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:o,angle:l}=t,c=Ba(s,r,i,l),d=Ba(s,r,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return AQ(t)}}var b_={},v_={},w_={},DF;function uEe(){return DF||(DF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bY();function a(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=a})(w_)),w_}var OF;function mEe(){return OF||(OF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uEe();function a(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=a})(v_)),v_}var MF;function fEe(){return MF||(MF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vY(),a=mEe();function s(r,i,o){o&&typeof o!="number"&&t.isIterateeCall(r,i,o)&&(i=o=void 0),r=a.toFinite(r),i===void 0?(i=r,r=0):i=a.toFinite(i),o=o===void 0?r<i?1:-1:a.toFinite(o);const l=Math.max(Math.ceil((i-r)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=r,r+=o;return c}e.range=s})(b_)),b_}var N_,IF;function hEe(){return IF||(IF=1,N_=fEe().range),N_}var gEe=hEe();const kQ=Ki(gEe),Fg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ML,scaleDiverging:Mq,scaleDivergingLog:Iq,scaleDivergingPow:i4,scaleDivergingSqrt:Uhe,scaleDivergingSymlog:$q,scaleIdentity:xq,scaleImplicit:eE,scaleLinear:bN,scaleLog:vp,scaleOrdinal:gp,scalePoint:Dme,scalePow:vN,scaleQuantile:wq,scaleQuantize:Nq,scaleRadial:vq,scaleSequential:s4,scaleSequentialLog:Pq,scaleSequentialPow:r4,scaleSequentialQuantile:Oq,scaleSequentialSqrt:Fhe,scaleSequentialSymlog:Dq,scaleSqrt:bq,scaleSymlog:GL,scaleThreshold:YL,scaleTime:a4,scaleUtc:Lq,tickFormat:pq},Symbol.toStringTag,{value:"Module"}));var sc=e=>e.chartData,Aj=rt([sc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),jP=(e,t,a,s)=>s?Aj(e):sc(e),pEe=(e,t,a)=>a?Aj(e):sc(e);function dd(e){if(Array.isArray(e)&&e.length===2){var[t,a]=e;if(ga(t)&&ga(a))return!0}return!1}function $F(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function LQ(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,s]=e,r,i;if(ga(a))r=a;else if(typeof a=="function")return;if(ga(s))i=s;else if(typeof s=="function")return;var o=[r,i];if(dd(o))return o}}function xEe(e,t,a){if(!(!a&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,a);if(dd(s))return $F(s,t,a)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,o,l;if(r==="auto")t!=null&&(o=Math.min(...t));else if(It(r))o=r;else if(typeof r=="function")try{t!=null&&(o=r(t?.[0]))}catch{}else if(typeof r=="string"&&Lz.test(r)){var c=Lz.exec(r);if(c==null||c[1]==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(It(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&Pz.test(i)){var u=Pz.exec(i);if(u==null||u[1]==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t?.[1];var p=[o,l];if(dd(p))return t==null?p:$F(p,t,a)}}}var rh=1e9,yEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SP,ca=!0,vi="[DecimalError] ",wu=vi+"Invalid argument: ",CP=vi+"Exponent out of range: ",ih=Math.floor,Zd=Math.pow,bEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr,ms=1e7,ta=7,PQ=9007199254740991,rw=ih(PQ/ta),Ot={};Ot.absoluteValue=Ot.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ot.comparedTo=Ot.cmp=function(e){var t,a,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,a=s<r?s:r;t<a;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};Ot.decimalPlaces=Ot.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*ta;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};Ot.dividedBy=Ot.div=function(e){return Ll(this,new this.constructor(e))};Ot.dividedToIntegerBy=Ot.idiv=function(e){var t=this,a=t.constructor;return Gn(Ll(t,new a(e),0,1),a.precision)};Ot.equals=Ot.eq=function(e){return!this.cmp(e)};Ot.exponent=function(){return qa(this)};Ot.greaterThan=Ot.gt=function(e){return this.cmp(e)>0};Ot.greaterThanOrEqualTo=Ot.gte=function(e){return this.cmp(e)>=0};Ot.isInteger=Ot.isint=function(){return this.e>this.d.length-2};Ot.isNegative=Ot.isneg=function(){return this.s<0};Ot.isPositive=Ot.ispos=function(){return this.s>0};Ot.isZero=function(){return this.s===0};Ot.lessThan=Ot.lt=function(e){return this.cmp(e)<0};Ot.lessThanOrEqualTo=Ot.lte=function(e){return this.cmp(e)<1};Ot.logarithm=Ot.log=function(e){var t,a=this,s=a.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Mr))throw Error(vi+"NaN");if(a.s<1)throw Error(vi+(a.s?"NaN":"-Infinity"));return a.eq(Mr)?new s(0):(ca=!1,t=Ll($p(a,i),$p(e,i),i),ca=!0,Gn(t,r))};Ot.minus=Ot.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MQ(t,e):DQ(t,(e.s=-e.s,e))};Ot.modulo=Ot.mod=function(e){var t,a=this,s=a.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(vi+"NaN");return a.s?(ca=!1,t=Ll(a,e,0,1).times(e),ca=!0,a.minus(t)):Gn(new s(a),r)};Ot.naturalExponential=Ot.exp=function(){return OQ(this)};Ot.naturalLogarithm=Ot.ln=function(){return $p(this)};Ot.negated=Ot.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ot.plus=Ot.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DQ(t,e):MQ(t,(e.s=-e.s,e))};Ot.precision=Ot.sd=function(e){var t,a,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(wu+e);if(t=qa(r)+1,s=r.d.length-1,a=s*ta+1,s=r.d[s],s){for(;s%10==0;s/=10)a--;for(s=r.d[0];s>=10;s/=10)a++}return e&&t>a?t:a};Ot.squareRoot=Ot.sqrt=function(){var e,t,a,s,r,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(vi+"NaN")}for(e=qa(l),ca=!1,r=Math.sqrt(+l),r==0||r==1/0?(t=Ao(l.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=ih((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),a=c.precision,r=o=a+3;;)if(i=s,s=i.plus(Ll(l,i,o+2)).times(.5),Ao(i.d).slice(0,o)===(t=Ao(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),r==o&&t=="4999"){if(Gn(i,a+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return ca=!0,Gn(s,a)};Ot.times=Ot.mul=function(e){var t,a,s,r,i,o,l,c,d,u=this,h=u.constructor,p=u.d,x=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,a=u.e+e.e,c=p.length,d=x.length,c<d&&(i=p,p=x,x=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,r=c+s;r>s;)l=i[r]+x[s]*p[r-s-1]+t,i[r--]=l%ms|0,t=l/ms|0;i[r]=(i[r]+t)%ms|0}for(;!i[--o];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,ca?Gn(e,h.precision):e};Ot.toDecimalPlaces=Ot.todp=function(e,t){var a=this,s=a.constructor;return a=new s(a),e===void 0?a:(Uo(e,0,rh),t===void 0?t=s.rounding:Uo(t,0,8),Gn(a,e+qa(a)+1,t))};Ot.toExponential=function(e,t){var a,s=this,r=s.constructor;return e===void 0?a=zu(s,!0):(Uo(e,0,rh),t===void 0?t=r.rounding:Uo(t,0,8),s=Gn(new r(s),e+1,t),a=zu(s,!0,e+1)),a};Ot.toFixed=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?zu(r):(Uo(e,0,rh),t===void 0?t=i.rounding:Uo(t,0,8),s=Gn(new i(r),e+qa(r)+1,t),a=zu(s.abs(),!1,e+qa(s)+1),r.isneg()&&!r.isZero()?"-"+a:a)};Ot.toInteger=Ot.toint=function(){var e=this,t=e.constructor;return Gn(new t(e),qa(e)+1,t.rounding)};Ot.toNumber=function(){return+this};Ot.toPower=Ot.pow=function(e){var t,a,s,r,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Mr);if(l=new c(l),!l.s){if(e.s<1)throw Error(vi+"Infinity");return l}if(l.eq(Mr))return l;if(s=c.precision,e.eq(Mr))return Gn(l,s);if(t=e.e,a=e.d.length-1,o=t>=a,i=l.s,o){if((a=u<0?-u:u)<=PQ){for(r=new c(Mr),t=Math.ceil(s/ta+4),ca=!1;a%2&&(r=r.times(l),zF(r.d,t)),a=ih(a/2),a!==0;)l=l.times(l),zF(l.d,t);return ca=!0,e.s<0?new c(Mr).div(r):Gn(r,s)}}else if(i<0)throw Error(vi+"NaN");return i=i<0&&e.d[Math.max(t,a)]&1?-1:1,l.s=1,ca=!1,r=e.times($p(l,s+d)),ca=!0,r=OQ(r),r.s=i,r};Ot.toPrecision=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?(a=qa(r),s=zu(r,a<=i.toExpNeg||a>=i.toExpPos)):(Uo(e,1,rh),t===void 0?t=i.rounding:Uo(t,0,8),r=Gn(new i(r),e,t),a=qa(r),s=zu(r,e<=a||a<=i.toExpNeg,e)),s};Ot.toSignificantDigits=Ot.tosd=function(e,t){var a=this,s=a.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Uo(e,1,rh),t===void 0?t=s.rounding:Uo(t,0,8)),Gn(new s(a),e,t)};Ot.toString=Ot.valueOf=Ot.val=Ot.toJSON=Ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=qa(e),a=e.constructor;return zu(e,t<=a.toExpNeg||t>=a.toExpPos)};function DQ(e,t){var a,s,r,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),ca?Gn(t,h):t;if(c=e.d,d=t.d,o=e.e,r=t.e,c=c.slice(),i=o-r,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,r=o,l=c.length),o=Math.ceil(h/ta),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),a=0;i;)a=(c[--i]=c[i]+d[i]+a)/ms|0,c[i]%=ms;for(a&&(c.unshift(a),++r),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=r,ca?Gn(t,h):t}function Uo(e,t,a){if(e!==~~e||e<t||e>a)throw Error(wu+e)}function Ao(e){var t,a,s,r=e.length-1,i="",o=e[0];if(r>0){for(i+=o,t=1;t<r;t++)s=e[t]+"",a=ta-s.length,a&&(i+=Hc(a)),i+=s;o=e[t],s=o+"",a=ta-s.length,a&&(i+=Hc(a))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ll=(function(){function e(s,r){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*r+o,s[l]=i%ms|0,o=i/ms|0;return o&&s.unshift(o),s}function t(s,r,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=r[l]){c=s[l]>r[l]?1:-1;break}return c}function a(s,r,i){for(var o=0;i--;)s[i]-=o,o=s[i]<r[i]?1:0,s[i]=o*ms+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,o){var l,c,d,u,h,p,x,b,N,v,j,w,S,A,E,_,k,T,O=s.constructor,$=s.s==r.s?1:-1,R=s.d,P=r.d;if(!s.s)return new O(s);if(!r.s)throw Error(vi+"Division by zero");for(c=s.e-r.e,k=P.length,E=R.length,x=new O($),b=x.d=[],d=0;P[d]==(R[d]||0);)++d;if(P[d]>(R[d]||0)&&--c,i==null?w=i=O.precision:o?w=i+(qa(s)-qa(r))+1:w=i,w<0)return new O(0);if(w=w/ta+2|0,d=0,k==1)for(u=0,P=P[0],w++;(d<E||u)&&w--;d++)S=u*ms+(R[d]||0),b[d]=S/P|0,u=S%P|0;else{for(u=ms/(P[0]+1)|0,u>1&&(P=e(P,u),R=e(R,u),k=P.length,E=R.length),A=k,N=R.slice(0,k),v=N.length;v<k;)N[v++]=0;T=P.slice(),T.unshift(0),_=P[0],P[1]>=ms/2&&++_;do u=0,l=t(P,N,k,v),l<0?(j=N[0],k!=v&&(j=j*ms+(N[1]||0)),u=j/_|0,u>1?(u>=ms&&(u=ms-1),h=e(P,u),p=h.length,v=N.length,l=t(h,N,p,v),l==1&&(u--,a(h,k<p?T:P,p))):(u==0&&(l=u=1),h=P.slice()),p=h.length,p<v&&h.unshift(0),a(N,h,v),l==-1&&(v=N.length,l=t(P,N,k,v),l<1&&(u++,a(N,k<v?T:P,v))),v=N.length):l===0&&(u++,N=[0]),b[d++]=u,l&&N[0]?N[v++]=R[A]||0:(N=[R[A]],v=1);while((A++<E||N[0]!==void 0)&&w--)}return b[0]||b.shift(),x.e=c,Gn(x,o?i+qa(x)+1:i)}})();function OQ(e,t){var a,s,r,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(qa(e)>16)throw Error(CP+qa(e));if(!e.s)return new u(Mr);for(ca=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Zd(2,d))/Math.LN10*2+5|0,l+=s,a=r=i=new u(Mr),u.precision=l;;){if(r=Gn(r.times(e),l),a=a.times(++c),o=i.plus(Ll(r,a,l)),Ao(o.d).slice(0,l)===Ao(i.d).slice(0,l)){for(;d--;)i=Gn(i.times(i),l);return u.precision=h,t==null?(ca=!0,Gn(i,h)):i}i=o}}function qa(e){for(var t=e.e*ta,a=e.d[0];a>=10;a/=10)t++;return t}function j_(e,t,a){if(t>e.LN10.sd())throw ca=!0,a&&(e.precision=a),Error(vi+"LN10 precision limit exceeded");return Gn(new e(e.LN10),t)}function Hc(e){for(var t="";e--;)t+="0";return t}function $p(e,t){var a,s,r,i,o,l,c,d,u,h=1,p=10,x=e,b=x.d,N=x.constructor,v=N.precision;if(x.s<1)throw Error(vi+(x.s?"NaN":"-Infinity"));if(x.eq(Mr))return new N(0);if(t==null?(ca=!1,d=v):d=t,x.eq(10))return t==null&&(ca=!0),j_(N,d);if(d+=p,N.precision=d,a=Ao(b),s=a.charAt(0),i=qa(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)x=x.times(e),a=Ao(x.d),s=a.charAt(0),h++;i=qa(x),s>1?(x=new N("0."+a),i++):x=new N(s+"."+a.slice(1))}else return c=j_(N,d+2,v).times(i+""),x=$p(new N(s+"."+a.slice(1)),d-p).plus(c),N.precision=v,t==null?(ca=!0,Gn(x,v)):x;for(l=o=x=Ll(x.minus(Mr),x.plus(Mr),d),u=Gn(x.times(x),d),r=3;;){if(o=Gn(o.times(u),d),c=l.plus(Ll(o,new N(r),d)),Ao(c.d).slice(0,d)===Ao(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(j_(N,d+2,v).times(i+""))),l=Ll(l,new N(h),d),N.precision=v,t==null?(ca=!0,Gn(l,v)):l;l=c,r+=2}}function RF(e,t){var a,s,r;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,a=a-s-1,e.e=ih(a/ta),e.d=[],s=(a+1)%ta,a<0&&(s+=ta),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=ta;s<r;)e.d.push(+t.slice(s,s+=ta));t=t.slice(s),s=ta-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),ca&&(e.e>rw||e.e<-rw))throw Error(CP+a)}else e.s=0,e.e=0,e.d=[0];return e}function Gn(e,t,a){var s,r,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=ta,r=t,d=h[u=0];else{if(u=Math.ceil((s+1)/ta),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;s%=ta,r=s-ta+o}if(a!==void 0&&(i=Zd(10,o-r-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=a<4?(l||c)&&(a==0||a==(e.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(s>0?r>0?d/Zd(10,o-r):0:h[u-1])%10&1||a==(e.s<0?8:7))),t<1||!h[0])return c?(i=qa(e),h.length=1,t=t-i-1,h[0]=Zd(10,(ta-t%ta)%ta),e.e=ih(-t/ta)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=u,i=1,u--):(h.length=u+1,i=Zd(10,ta-s),h[u]=r>0?(d/Zd(10,o-r)%Zd(10,r)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==ms&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=ms)break;h[u--]=0,i=1}for(s=h.length;h[--s]===0;)h.pop();if(ca&&(e.e>rw||e.e<-rw))throw Error(CP+qa(e));return e}function MQ(e,t){var a,s,r,i,o,l,c,d,u,h,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),ca?Gn(t,x):t;if(c=e.d,h=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(a=c,o=-o,l=h.length):(a=h,s=d,l=c.length),r=Math.max(Math.ceil(x/ta),l)+2,o>r&&(o=r,a.length=1),a.reverse(),r=o;r--;)a.push(0);a.reverse()}else{for(r=c.length,l=h.length,u=r<l,u&&(l=r),r=0;r<l;r++)if(c[r]!=h[r]){u=c[r]<h[r];break}o=0}for(u&&(a=c,c=h,h=a,t.s=-t.s),l=c.length,r=h.length-l;r>0;--r)c[l++]=0;for(r=h.length;r>o;){if(c[--r]<h[r]){for(i=r;i&&c[--i]===0;)c[i]=ms-1;--c[i],c[r]+=ms}c[r]-=h[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,ca?Gn(t,x):t):new p(0)}function zu(e,t,a){var s,r=qa(e),i=Ao(e.d),o=i.length;return t?(a&&(s=a-o)>0?i=i.charAt(0)+"."+i.slice(1)+Hc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+Hc(-r-1)+i,a&&(s=a-o)>0&&(i+=Hc(s))):r>=o?(i+=Hc(r+1-o),a&&(s=a-r-1)>0&&(i=i+"."+Hc(s))):((s=r+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),a&&(s=a-o)>0&&(r+1===o&&(i+="."),i+=Hc(s))),e.s<0?"-"+i:i}function zF(e,t){if(e.length>t)return e.length=t,!0}function IQ(e){var t,a,s;function r(i){var o=this;if(!(o instanceof r))return new r(i);if(o.constructor=r,i instanceof r){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(wu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return RF(o,i.toString())}else if(typeof i!="string")throw Error(wu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,bEe.test(i))RF(o,i);else throw Error(wu+i)}if(r.prototype=Ot,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=IQ,r.config=r.set=vEe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(a=s[t++])||(e[a]=this[a]);return r.config(e),r}function vEe(e){if(!e||typeof e!="object")throw Error(vi+"Object expected");var t,a,s,r=["precision",1,rh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[a=r[t]])!==void 0)if(ih(s)===s&&s>=r[t+1]&&s<=r[t+2])this[a]=s;else throw Error(wu+a+": "+s);if((s=e[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(wu+a+": "+s);return this}var SP=IQ(yEe);Mr=new SP(1);const $n=SP;var wEe=e=>e,$Q={},RQ=e=>e===$Q,FF=e=>function t(){return arguments.length===0||arguments.length===1&&RQ(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},zQ=(e,t)=>e===1?t:FF(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var i=s.filter(o=>o!==$Q).length;return i>=e?t(...s):zQ(e-i,FF(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=s.map(u=>RQ(u)?l.shift():u);return t(...d,...l)}))}),NEe=e=>zQ(e.length,e),ik=(e,t)=>{for(var a=[],s=e;s<t;++s)a[s-e]=s;return a},jEe=NEe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(a=>t[a]).map(e)),CEe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(!a.length)return wEe;var r=a.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function FQ(e){var t;return e===0?t=1:t=Math.floor(new $n(e).abs().log(10).toNumber())+1,t}function UQ(e,t,a){for(var s=new $n(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(a),r++;return i}var BQ=e=>{var[t,a]=e,[s,r]=[t,a];return t>a&&([s,r]=[a,t]),[s,r]},HQ=(e,t,a)=>{if(e.lte(0))return new $n(0);var s=FQ(e.toNumber()),r=new $n(10).pow(s),i=e.div(r),o=s!==1?.05:.1,l=new $n(Math.ceil(i.div(o).toNumber())).add(a).mul(o),c=l.mul(r);return t?new $n(c.toNumber()):new $n(Math.ceil(c.toNumber()))},SEe=(e,t,a)=>{var s=new $n(1),r=new $n(e);if(!r.isint()&&a){var i=Math.abs(e);i<1?(s=new $n(10).pow(FQ(e)-1),r=new $n(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new $n(Math.floor(e)))}else e===0?r=new $n(Math.floor((t-1)/2)):a||(r=new $n(Math.floor(e)));var o=Math.floor((t-1)/2),l=CEe(jEe(c=>r.add(new $n(c-o).mul(s)).toNumber()),ik);return l(0,t)},qQ=function(t,a,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-t)/(s-1)))return{step:new $n(0),tickMin:new $n(0),tickMax:new $n(0)};var o=HQ(new $n(a).sub(t).div(s-1),r,i),l;t<=0&&a>=0?l=new $n(0):(l=new $n(t).add(a).div(2),l=l.sub(new $n(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new $n(a).sub(l).div(o).toNumber()),u=c+d+1;return u>s?qQ(t,a,s,r,i+1):(u<s&&(d=a>0?d+(s-u):d,c=a>0?c:c+(s-u)),{step:o,tickMin:l.sub(new $n(c).mul(o)),tickMax:l.add(new $n(d).mul(o))})},_Ee=function(t){var[a,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,c]=BQ([a,s]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...ik(0,r-1).map(()=>1/0)]:[...ik(0,r-1).map(()=>-1/0),c];return a>s?d.reverse():d}if(l===c)return SEe(l,r,i);var{step:u,tickMin:h,tickMax:p}=qQ(l,c,o,i,0),x=UQ(h,p.add(new $n(.1).mul(u)),u);return a>s?x.reverse():x},AEe=function(t,a){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=BQ([s,r]);if(o===-1/0||l===1/0)return[s,r];if(o===l)return[o];var c=Math.max(a,2),d=HQ(new $n(l).sub(o).div(c-1),i,0),u=[...UQ(new $n(o),new $n(l),d),l];return i===!1&&(u=u.map(h=>Math.round(h))),s>r?u.reverse():u},WQ=e=>e.rootProps.maxBarSize,TEe=e=>e.rootProps.barGap,GQ=e=>e.rootProps.barCategoryGap,EEe=e=>e.rootProps.barSize,Kx=e=>e.rootProps.stackOffset,VQ=e=>e.rootProps.reverseStackOrder,_P=e=>e.options.chartName,AP=e=>e.rootProps.syncId,YQ=e=>e.rootProps.syncMethod,TP=e=>e.options.eventEmitter,Ha={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Cl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Dr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Tj=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},kEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Cl.angleAxisId,includeHidden:!1,name:void 0,reversed:Cl.reversed,scale:Cl.scale,tick:Cl.tick,tickCount:void 0,ticks:void 0,type:Cl.type,unit:void 0},LEe={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Dr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,ticks:void 0,type:Dr.type,unit:void 0},PEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Cl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cl.scale,tick:Cl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},DEe={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Dr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,ticks:void 0,type:"category",unit:void 0},EP=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?PEe:kEe,kP=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?DEe:LEe,Ej=e=>e.polarOptions,LP=rt([nc,ac,is],_Q),QQ=rt([Ej,LP],(e,t)=>{if(e!=null)return Is(e.innerRadius,t,0)}),KQ=rt([Ej,LP],(e,t)=>{if(e!=null)return Is(e.outerRadius,t,t*.8)}),OEe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]},XQ=rt([Ej],OEe);rt([EP,XQ],Tj);var ZQ=rt([LP,QQ,KQ],(e,t,a)=>{if(!(e==null||t==null||a==null))return[t,a]});rt([kP,ZQ],Tj);var JQ=rt([wn,Ej,QQ,KQ,nc,ac],(e,t,a,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||a==null||s==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Is(o,r,r/2),cy:Is(l,i,i/2),innerRadius:a,outerRadius:s,startAngle:c,endAngle:d,clockWise:!1}}}),ha=(e,t)=>t,Xx=(e,t,a)=>a;function PP(e){return e?.id}function eK(e,t,a){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=a,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:s;if(!(d==null||d.length===0)){var u=PP(l);d.forEach((h,p)=>{var x=i==null||r?p:String(Hn(h,i,null)),b=Hn(h,l.dataKey,0),N;o.has(x)?N=o.get(x):N={},Object.assign(N,{[u]:b}),o.set(x,N)})}}),Array.from(o.values())}function kj(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Lj=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Pj(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function MEe(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}var os=e=>{var t=wn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},oh=e=>e.tooltip.settings.axisId;function UF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function iw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UF(Object(a),!0).forEach(function(s){IEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function IEe(e,t,a){return(t=$Ee(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $Ee(e){var t=REe(e,"string");return typeof t=="symbol"?t:t+""}function REe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ok=[0,"auto"],ds={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},tK=(e,t)=>e.cartesianAxis.xAxis[t],rc=(e,t)=>{var a=tK(e,t);return a??ds},us={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ok,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gx},nK=(e,t)=>e.cartesianAxis.yAxis[t],ic=(e,t)=>{var a=nK(e,t);return a??us},zEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},DP=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return a??zEe},ya=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);case"zAxis":return DP(e,a);case"angleAxis":return EP(e,a);case"radiusAxis":return kP(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},FEe=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Zx=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);case"angleAxis":return EP(e,a);case"radiusAxis":return kP(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},aK=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function OP(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var Dj=e=>e.graphicalItems.cartesianItems,UEe=rt([ha,Xx],OP),MP=(e,t,a)=>e.filter(a).filter(s=>t?.includeHidden===!0?!0:!s.hide),Jx=rt([Dj,ya,UEe],MP,{memoizeOptions:{resultEqualityCheck:Pj}}),sK=rt([Jx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(kj)),rK=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),BEe=rt([Jx],rK),IP=e=>e.map(t=>t.data).filter(Boolean).flat(1),HEe=rt([Jx],IP,{memoizeOptions:{resultEqualityCheck:Pj}}),$P=(e,t)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:a.slice(s,r+1)},RP=rt([HEe,jP],$P),zP=(e,t,a)=>t?.dataKey!=null?e.map(s=>({value:Hn(s,t.dataKey)})):a.length>0?a.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:Hn(r,s)}))):e.map(s=>({value:s})),Oj=rt([RP,ya,Jx],zP);function iK(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Zb(e){if(zo(e)||e instanceof Date){var t=Number(e);if(ga(t))return t}}function BF(e){if(Array.isArray(e)){var t=[Zb(e[0]),Zb(e[1])];return dd(t)?t:void 0}var a=Zb(e);if(a!=null)return[a,a]}function Gl(e){return e.map(Zb).filter(SSe)}function qEe(e,t,a){return!a||typeof t!="number"||Yi(t)?[]:a.length?Gl(a.flatMap(s=>{var r=Hn(e,s.dataKey),i,o;if(Array.isArray(r)?[i,o]=r:i=o=r,!(!ga(i)||!ga(o)))return[t-i,t+o]})):[]}var ls=e=>{var t=os(e),a=oh(e);return Zx(e,t,a)},e0=rt([ls],e=>e?.dataKey),WEe=rt([sK,jP,ls],eK),oK=(e,t,a,s)=>{var r={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=s?[...c].reverse():c,u=d.map(PP);return[l,{stackedData:$_e(e,u,a),graphicalItems:d}]}))},lk=rt([WEe,sK,Kx,VQ],oK),lK=(e,t,a,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&a!=="zAxis"){var o=B_e(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},GEe=rt([ya],e=>e.allowDataOverflow),FP=e=>{var t;if(e==null||!("domain"in e))return ok;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var a=Gl(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:ok},UP=rt([ya],FP),BP=rt([UP,GEe],LQ),VEe=rt([lk,sc,ha,BP],lK,{memoizeOptions:{resultEqualityCheck:Lj}}),Mj=e=>e.errorBars,YEe=(e,t,a)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>iK(a,s)),ow=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var r=a.filter(Boolean);if(r.length!==0){var i=r.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},HP=(e,t,a,s,r)=>{var i,o;if(a.length>0&&e.forEach(l=>{a.forEach(c=>{var d,u,h=(d=s[c.id])===null||d===void 0?void 0:d.filter(j=>iK(r,j)),p=Hn(l,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),x=qEe(l,p,h);if(x.length>=2){var b=Math.min(...x),N=Math.max(...x);(i==null||b<i)&&(i=b),(o==null||N>o)&&(o=N)}var v=BF(p);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),o=o==null?v[1]:Math.max(o,v[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var c=BF(Hn(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),ga(i)&&ga(o))return[i,o]},QEe=rt([RP,ya,BEe,Mj,ha],HP,{memoizeOptions:{resultEqualityCheck:Lj}});function KEe(e){var{value:t}=e;if(zo(t)||t instanceof Date)return t}var XEe=(e,t,a)=>{var s=e.map(KEe).filter(r=>r!=null);return a&&(t.dataKey==null||t.allowDuplicatedCategory&&rY(s))?kQ(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},cK=e=>e.referenceElements.dots,lh=(e,t,a)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===a:s.yAxisId===a),ZEe=rt([cK,ha,Xx],lh),dK=e=>e.referenceElements.areas,JEe=rt([dK,ha,Xx],lh),uK=e=>e.referenceElements.lines,eke=rt([uK,ha,Xx],lh),mK=(e,t)=>{if(e!=null){var a=Gl(e.map(s=>t==="xAxis"?s.x:s.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},tke=rt(ZEe,ha,mK),fK=(e,t)=>{if(e!=null){var a=Gl(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},nke=rt([JEe,ha],fK);function ake(e){var t;if(e.x!=null)return Gl([e.x]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return a==null||a.length===0?[]:Gl(a)}function ske(e){var t;if(e.y!=null)return Gl([e.y]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return a==null||a.length===0?[]:Gl(a)}var hK=(e,t)=>{if(e!=null){var a=e.flatMap(s=>t==="xAxis"?ake(s):ske(s));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},rke=rt([eke,ha],hK),ike=rt(tke,rke,nke,(e,t,a)=>ow(e,a,t)),qP=(e,t,a,s,r,i,o,l)=>{if(a!=null)return a;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?ow(s,i,r):ow(i,r);return xEe(t,d,e.allowDataOverflow)},oke=rt([ya,UP,BP,VEe,QEe,ike,wn,ha],qP,{memoizeOptions:{resultEqualityCheck:Lj}}),lke=[0,1],WP=(e,t,a,s,r,i,o)=>{if(!((e==null||a==null||a.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=_d(t,i);if(d&&l==null){var u;return kQ(0,(u=a?.length)!==null&&u!==void 0?u:0)}return c==="category"?XEe(s,e,d):r==="expand"?lke:o}},GP=rt([ya,wn,RP,Oj,Kx,ha,oke],WP),gK=(e,t,a,s,r)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Fx(i));return l in Fg?l:"point"}}},ch=rt([ya,wn,aK,_P,ha],gK);function cke(e){if(e!=null){if(e in Fg)return Fg[e]();var t="scale".concat(Fx(e));if(t in Fg)return Fg[t]()}}function VP(e,t,a,s){if(!(a==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(s);var r=cke(t);if(r!=null){var i=r.domain(a).range(s);return P_e(i),i}}}var YP=(e,t,a)=>{var s=FP(t);if(!(a!=="auto"&&a!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&dd(e))return _Ee(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&dd(e))return AEe(e,t.tickCount,t.allowDecimals)}},QP=rt([GP,Zx,ch],YP),KP=(e,t,a,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&dd(t)&&Array.isArray(a)&&a.length>0){var r=t[0],i=a[0],o=t[1],l=a[a.length-1];return[Math.min(r,i),Math.max(o,l)]}return t},dke=rt([ya,GP,QP,ha],KP),uke=rt(Oj,ya,(e,t)=>{if(!(!t||t.type!=="number")){var a=1/0,s=Array.from(Gl(e.map(h=>h.value))).sort((h,p)=>h-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var o=i-r;if(o===0)return 1/0;for(var l=0;l<s.length-1;l++){var c=s[l],d=s[l+1];if(!(c==null||d==null)){var u=d-c;a=Math.min(a,u)}}return a/o}}),pK=rt(uke,wn,GQ,is,(e,t,a,s,r)=>r,(e,t,a,s,r)=>{if(!ga(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var o=Is(a,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),mke=(e,t,a)=>{var s=rc(e,t);return s==null||typeof s.padding!="string"?0:pK(e,"xAxis",t,a,s.padding)},fke=(e,t,a)=>{var s=ic(e,t);return s==null||typeof s.padding!="string"?0:pK(e,"yAxis",t,a,s.padding)},hke=rt(rc,mke,(e,t)=>{var a,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((a=r.left)!==null&&a!==void 0?a:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),gke=rt(ic,fke,(e,t)=>{var a,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((a=r.top)!==null&&a!==void 0?a:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),pke=rt([is,hke,vj,bj,(e,t,a)=>a],(e,t,a,s,r)=>{var{padding:i}=s;return r?[i.left,a.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),xke=rt([is,wn,gke,vj,bj,(e,t,a)=>a],(e,t,a,s,r,i)=>{var{padding:o}=r;return i?[s.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),t0=(e,t,a,s)=>{var r;switch(t){case"xAxis":return pke(e,a,s);case"yAxis":return xke(e,a,s);case"zAxis":return(r=DP(e,a))===null||r===void 0?void 0:r.range;case"angleAxis":return XQ(e);case"radiusAxis":return ZQ(e,a);default:return}},xK=rt([ya,t0],Tj),Ij=rt([ya,ch,dke,xK],VP);rt([Jx,Mj,ha],YEe);function yK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var $j=(e,t)=>t,Rj=(e,t,a)=>a,yke=rt(xj,$j,Rj,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(yK)),bke=rt(yj,$j,Rj,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(yK)),bK=(e,t)=>({width:e.width,height:t.height}),vke=(e,t)=>{var a=typeof t.width=="number"?t.width:Gx;return{width:a,height:e.height}},vK=rt(is,rc,bK),wke=(e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},Nke=(e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}},jke=rt(ac,is,yke,$j,Rj,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=bK(t,l);o==null&&(o=wke(t,s,e));var d=s==="top"&&!r||s==="bottom"&&r;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),Cke=rt(nc,is,bke,$j,Rj,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=vke(t,l);o==null&&(o=Nke(t,s,e));var d=s==="left"&&!r||s==="right"&&r;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),Ske=(e,t)=>{var a=rc(e,t);if(a!=null)return jke(e,a.orientation,a.mirror)},_ke=rt([is,rc,Ske,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),Ake=(e,t)=>{var a=ic(e,t);if(a!=null)return Cke(e,a.orientation,a.mirror)},Tke=rt([is,ic,Ake,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),wK=rt(is,ic,(e,t)=>{var a=typeof t.width=="number"?t.width:Gx;return{width:a,height:e.height}}),HF=(e,t,a)=>{switch(t){case"xAxis":return vK(e,a).width;case"yAxis":return wK(e,a).height;default:return}},NK=(e,t,a,s)=>{if(a!=null){var{allowDuplicatedCategory:r,type:i,dataKey:o}=a,l=_d(e,s),c=t.map(d=>d.value);if(o&&l&&i==="category"&&r&&rY(c))return c}},XP=rt([wn,Oj,ya,ha],NK),jK=(e,t,a,s)=>{if(!(a==null||a.dataKey==null)){var{type:r,scale:i}=a,o=_d(e,s);if(o&&(r==="number"||i!=="auto"))return t.map(l=>l.value)}},ZP=rt([wn,Oj,Zx,ha],jK),qF=rt([wn,FEe,ch,Ij,XP,ZP,t0,QP,ha],(e,t,a,s,r,i,o,l,c)=>{if(t!=null){var d=_d(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:d,niceTicks:l,range:o,realScaleType:a,scale:s}}}),Eke=(e,t,a,s,r,i,o,l,c)=>{if(!(t==null||s==null)){var d=_d(e,c),{type:u,ticks:h,tickCount:p}=t,x=a==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,b=u==="category"&&s.bandwidth?s.bandwidth()/x:0;b=c==="angleAxis"&&i!=null&&i.length>=2?gs(i[0]-i[1])*2*b:b;var N=h||r;if(N){var v=N.map((j,w)=>{var S=o?o.indexOf(j):j;return{index:w,coordinate:s(S)+b,value:j,offset:b}});return v.filter(j=>ga(j.coordinate))}return d&&l?l.map((j,w)=>({coordinate:s(j)+b,value:j,index:w,offset:b})).filter(j=>ga(j.coordinate)):s.ticks?s.ticks(p).map(j=>({coordinate:s(j)+b,value:j,offset:b})):s.domain().map((j,w)=>({coordinate:s(j)+b,value:o?o[j]:j,index:w,offset:b}))}},CK=rt([wn,Zx,ch,Ij,QP,t0,XP,ZP,ha],Eke),kke=(e,t,a,s,r,i,o)=>{if(!(t==null||a==null||s==null||s[0]===s[1])){var l=_d(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&s?.length>=2?gs(s[0]-s[1])*2*d:d,l&&i?i.map((u,h)=>({coordinate:a(u)+d,value:u,index:h,offset:d})):a.ticks?a.ticks(c).map(u=>({coordinate:a(u)+d,value:u,offset:d})):a.domain().map((u,h)=>({coordinate:a(u)+d,value:r?r[u]:u,index:h,offset:d}))}},ud=rt([wn,Zx,Ij,t0,XP,ZP,ha],kke),md=rt(ya,Ij,(e,t)=>{if(!(e==null||t==null))return iw(iw({},e),{},{scale:t})}),Lke=rt([ya,ch,GP,xK],VP);rt((e,t,a)=>DP(e,a),Lke,(e,t)=>{if(!(e==null||t==null))return iw(iw({},e),{},{scale:t})});var Pke=rt([wn,xj,yj],(e,t,a)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),SK=e=>e.options.defaultTooltipEventType,_K=e=>e.options.validateTooltipEventTypes;function AK(e,t,a){if(e==null)return t;var s=e?"axis":"item";return a==null?t:a.includes(s)?s:t}function JP(e,t){var a=SK(e),s=_K(e);return AK(t,a,s)}function Dke(e){return Rt(t=>JP(t,e))}var TK=(e,t)=>{var a,s=Number(t);if(!(Yi(s)||t==null))return s>=0?e==null||(a=e[s])===null||a===void 0?void 0:a.value:void 0},Oke=e=>e.tooltip.settings,Gc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Mke={itemInteraction:{click:Gc,hover:Gc},axisInteraction:{click:Gc,hover:Gc},keyboardInteraction:Gc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},EK=vr({name:"tooltip",initialState:Mke,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:oa()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:s}=t.payload,r=qi(e).tooltipItemPayloads.indexOf(a);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:oa()},removeTooltipEntrySettings:{reducer(e,t){var a=qi(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:oa()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:Ike,replaceTooltipEntrySettings:$ke,removeTooltipEntrySettings:Rke,setTooltipSettingsState:zke,setActiveMouseOverItemIndex:kK,mouseLeaveItem:Fke,mouseLeaveChart:LK,setActiveClickItemIndex:Uke,setMouseOverAxisIndex:PK,setMouseClickAxisIndex:Bke,setSyncInteraction:ck,setKeyboardInteraction:dk}=EK.actions,Hke=EK.reducer;function WF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Jy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?WF(Object(a),!0).forEach(function(s){qke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):WF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function qke(e,t,a){return(t=Wke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Wke(e){var t=Gke(e,"string");return typeof t=="symbol"?t:t+""}function Gke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vke(e,t,a){return t==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Yke(e){return e.index!=null}var DK=(e,t,a,s)=>{if(t==null)return Gc;var r=Vke(e,t,a);if(r==null)return Gc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Yke(r)){if(i)return Jy(Jy({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return Jy(Jy({},Gc),{},{coordinate:r.coordinate})};function Qke(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function Kke(e,t){var a=Qke(e),s=t[0],r=t[1];if(a===void 0)return!1;var i=Math.min(s,r),o=Math.max(s,r);return a>=i&&a<=o}function Xke(e,t,a){if(a==null||t==null)return!0;var s=Hn(e,t);return s==null||!dd(a)?!0:Kke(s,a)}var eD=(e,t,a,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!ga(i))return r;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),d=t[c];return d==null||Xke(d,a,s)?String(c):null},OK=(e,t,a,s,r,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=r?.[Number(i)];if(u)return a==="horizontal"?{x:u.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:u.coordinate}}},MK=(e,t,a,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(a==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},n0=e=>e.options.tooltipPayloadSearcher,dh=e=>e.tooltip;function GF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function VF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?GF(Object(a),!0).forEach(function(s){Zke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):GF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Zke(e,t,a){return(t=Jke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Jke(e){var t=eLe(e,"string");return typeof t=="symbol"?t:t+""}function eLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tLe(e,t){return e??t}var IK=(e,t,a,s,r,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=a,h=[];return e.reduce((p,x)=>{var b,{dataDefinedOnItem:N,settings:v}=x,j=tLe(N,l),w=Array.isArray(j)?ZY(j,d,u):j,S=(b=v?.dataKey)!==null&&b!==void 0?b:s,A=v?.nameKey,E;if(s&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?E=iY(w,s,r):E=i(w,t,c,A),Array.isArray(E))E.forEach(k=>{var T=VF(VF({},v),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});p.push(Dz({tooltipEntrySettings:T,dataKey:k.dataKey,payload:k.payload,value:Hn(k.payload,k.dataKey),name:k.name}))});else{var _;p.push(Dz({tooltipEntrySettings:v,dataKey:S,payload:E,value:Hn(E,S),name:(_=Hn(E,A))!==null&&_!==void 0?_:v?.name}))}return p},h)}},tD=rt([ls,wn,aK,_P,os],gK),nLe=rt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),aLe=rt([os,oh],OP),uh=rt([nLe,ls,aLe],MP,{memoizeOptions:{resultEqualityCheck:Pj}}),sLe=rt([uh],e=>e.filter(kj)),rLe=rt([uh],IP,{memoizeOptions:{resultEqualityCheck:Pj}}),mh=rt([rLe,sc],$P),iLe=rt([sLe,sc,ls],eK),nD=rt([mh,ls,uh],zP),$K=rt([ls],FP),oLe=rt([ls],e=>e.allowDataOverflow),RK=rt([$K,oLe],LQ),lLe=rt([uh],e=>e.filter(kj)),cLe=rt([iLe,lLe,Kx,VQ],oK),dLe=rt([cLe,sc,os,RK],lK),uLe=rt([uh],rK),mLe=rt([mh,ls,uLe,Mj,os],HP,{memoizeOptions:{resultEqualityCheck:Lj}}),fLe=rt([cK,os,oh],lh),hLe=rt([fLe,os],mK),gLe=rt([dK,os,oh],lh),pLe=rt([gLe,os],fK),xLe=rt([uK,os,oh],lh),yLe=rt([xLe,os],hK),bLe=rt([hLe,yLe,pLe],ow),vLe=rt([ls,$K,RK,dLe,mLe,bLe,wn,os],qP),a0=rt([ls,wn,mh,nD,Kx,os,vLe],WP),wLe=rt([a0,ls,tD],YP),NLe=rt([ls,a0,wLe,os],KP),zK=e=>{var t=os(e),a=oh(e),s=!1;return t0(e,t,a,s)},FK=rt([ls,zK],Tj),UK=rt([ls,tD,NLe,FK],VP),jLe=rt([wn,nD,ls,os],NK),CLe=rt([wn,nD,ls,os],jK),SLe=(e,t,a,s,r,i,o,l)=>{if(t){var{type:c}=t,d=_d(e,l);if(s){var u=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,h=c==="category"&&s.bandwidth?s.bandwidth()/u:0;return h=l==="angleAxis"&&r!=null&&r?.length>=2?gs(r[0]-r[1])*2*h:h,d&&o?o.map((p,x)=>({coordinate:s(p)+h,value:p,index:x,offset:h})):s.domain().map((p,x)=>({coordinate:s(p)+h,value:i?i[p]:p,index:x,offset:h}))}}},oc=rt([wn,ls,tD,UK,zK,jLe,CLe,os],SLe),aD=rt([SK,_K,Oke],(e,t,a)=>AK(a.shared,e,t)),BK=e=>e.tooltip.settings.trigger,sD=e=>e.tooltip.settings.defaultIndex,s0=rt([dh,aD,BK,sD],DK),fd=rt([s0,mh,e0,a0],eD),HK=rt([oc,fd],TK),rD=rt([s0],e=>{if(e)return e.dataKey}),_Le=rt([s0],e=>{if(e)return e.graphicalItemId}),qK=rt([dh,aD,BK,sD],MK),ALe=rt([nc,ac,wn,is,oc,sD,qK,n0],OK),TLe=rt([s0,ALe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),ELe=rt([s0],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),kLe=rt([qK,fd,sc,e0,HK,n0,aD],IK),LLe=rt([kLe],e=>{if(e!=null){var t=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(t))}});function YF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function QF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?YF(Object(a),!0).forEach(function(s){PLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):YF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function PLe(e,t,a){return(t=DLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DLe(e){var t=OLe(e,"string");return typeof t=="symbol"?t:t+""}function OLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MLe=()=>Rt(ls),ILe=()=>{var e=MLe(),t=Rt(oc),a=Rt(UK);return If(!e||!a?void 0:QF(QF({},e),{},{scale:a}),t)};function KF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ym(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KF(Object(a),!0).forEach(function(s){$Le(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function $Le(e,t,a){return(t=RLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function RLe(e){var t=zLe(e,"string");return typeof t=="symbol"?t:t+""}function zLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FLe=(e,t,a,s)=>{var r=t.find(i=>i&&i.index===a);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},ULe=(e,t,a,s)=>{var r=t.find(d=>d&&d.index===a);if(r){if(e==="centric"){var i=r.coordinate,{radius:o}=s;return Ym(Ym(Ym({},s),Ba(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=r.coordinate,{angle:c}=s;return Ym(Ym(Ym({},s),Ba(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function BLe(e,t){var{chartX:a,chartY:s}=e;return a>=t.left&&a<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var WK=(e,t,a,s,r)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,d,u,h,p,x=l>0?(c=a[l-1])===null||c===void 0?void 0:c.coordinate:(d=a[o-1])===null||d===void 0?void 0:d.coordinate,b=(u=a[l])===null||u===void 0?void 0:u.coordinate,N=l>=o-1?(h=a[0])===null||h===void 0?void 0:h.coordinate:(p=a[l+1])===null||p===void 0?void 0:p.coordinate,v=void 0;if(!(x==null||b==null||N==null))if(gs(b-x)!==gs(N-b)){var j=[];if(gs(N-b)===gs(r[1]-r[0])){v=N;var w=b+r[1]-r[0];j[0]=Math.min(w,(w+x)/2),j[1]=Math.max(w,(w+x)/2)}else{v=x;var S=N+r[1]-r[0];j[0]=Math.min(b,(S+b)/2),j[1]=Math.max(b,(S+b)/2)}var A=[Math.min(b,(v+b)/2),Math.max(b,(v+b)/2)];if(e>A[0]&&e<=A[1]||e>=j[0]&&e<=j[1]){var E;return(E=a[l])===null||E===void 0?void 0:E.index}}else{var _=Math.min(x,N),k=Math.max(x,N);if(e>(_+b)/2&&e<=(k+b)/2){var T;return(T=a[l])===null||T===void 0?void 0:T.index}}}else if(t)for(var O=0;O<o;O++){var $=t[O];if($!=null){var R=t[O+1],P=t[O-1];if(O===0&&R!=null&&e<=($.coordinate+R.coordinate)/2||O===o-1&&P!=null&&e>($.coordinate+P.coordinate)/2||O>0&&O<o-1&&P!=null&&R!=null&&e>($.coordinate+P.coordinate)/2&&e<=($.coordinate+R.coordinate)/2)return $.index}}return-1},HLe=()=>Rt(_P),iD=(e,t)=>t,GK=(e,t,a)=>a,oD=(e,t,a,s)=>s,qLe=rt(oc,e=>lj(e,t=>t.coordinate)),lD=rt([dh,iD,GK,oD],DK),cD=rt([lD,mh,e0,a0],eD),WLe=(e,t,a)=>{if(t!=null){var s=dh(e);return t==="axis"?a==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:a==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},VK=rt([dh,iD,GK,oD],MK),lw=rt([nc,ac,wn,is,oc,oD,VK,n0],OK),GLe=rt([lD,lw],(e,t)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:t}),YK=rt([oc,cD],TK),VLe=rt([VK,cD,sc,e0,YK,n0,iD],IK),YLe=rt([lD,cD],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),QLe=(e,t,a,s,r,i,o)=>{if(!(!e||!a||!s||!r)&&BLe(e,o)){var l=H_e(e,t),c=WK(l,i,r,a,s),d=FLe(t,r,c,e);return{activeIndex:String(c),activeCoordinate:d}}},KLe=(e,t,a,s,r,i,o)=>{if(!(!e||!s||!r||!i||!a)){var l=iEe(e,a);if(l){var c=q_e(l,t),d=WK(c,o,i,s,r),u=ULe(t,i,d,l);return{activeIndex:String(d),activeCoordinate:u}}}},XLe=(e,t,a,s,r,i,o,l)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?QLe(e,t,s,r,i,o,l):KLe(e,t,a,s,r,i,o)},ZLe=rt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(t!=null){var s=e[t];if(s!=null)return a?s.panoramaElement:s.element}}),JLe=rt(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Ha)),a=Array.from(new Set(t));return a.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:MEe}});function XF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ZF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?XF(Object(a),!0).forEach(function(s){e4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):XF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function e4e(e,t,a){return(t=t4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function t4e(e){var t=n4e(e,"string");return typeof t=="symbol"?t:t+""}function n4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a4e={},s4e={zIndexMap:Object.values(Ha).reduce((e,t)=>ZF(ZF({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),a4e)},r4e=new Set(Object.values(Ha));function i4e(e){return r4e.has(e)}var QK=vr({name:"zIndex",initialState:s4e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:oa()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!i4e(a)&&delete e.zIndexMap[a])},prepare:oa()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:s,isPanorama:r}=t.payload;e.zIndexMap[a]?r?e.zIndexMap[a].panoramaElement=s:e.zIndexMap[a].element=s:e.zIndexMap[a]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:oa()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:oa()}}}),{registerZIndexPortal:o4e,unregisterZIndexPortal:l4e,registerZIndexPortalElement:c4e,unregisterZIndexPortalElement:d4e}=QK.actions,u4e=QK.reducer;function wr(e){var{zIndex:t,children:a}=e,s=wAe(),r=s&&t!==void 0&&t!==0,i=Fs(),o=Xn();f.useLayoutEffect(()=>r?(o(o4e({zIndex:t})),()=>{o(l4e({zIndex:t}))}):Ux,[o,t,r]);var l=Rt(c=>ZLe(c,t,i));return r?l?Bi.createPortal(a,l):null:a}function uk(){return uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},uk.apply(null,arguments)}function JF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function eb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?JF(Object(a),!0).forEach(function(s){m4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):JF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function m4e(e,t,a){return(t=f4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f4e(e){var t=h4e(e,"string");return typeof t=="symbol"?t:t+""}function h4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g4e(e){var{cursor:t,cursorComp:a,cursorProps:s}=e;return f.isValidElement(t)?f.cloneElement(t,s):f.createElement(a,s)}function p4e(e){var t,{coordinate:a,payload:s,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:u}=e,h=a,p=s,x=r;if(!c||!h||u!=="ScatterChart"&&d!=="axis")return null;var b,N,v;if(u==="ScatterChart")b=h,N=vTe,v=Ha.cursorLine;else if(u==="BarChart")b=wTe(l,h,i,o),N=SQ,v=Ha.cursorRectangle;else if(l==="radial"&&lY(h)){var{cx:j,cy:w,radius:S,startAngle:A,endAngle:E}=AQ(h);b={cx:j,cy:w,startAngle:A,endAngle:E,innerRadius:S,outerRadius:S},N=EQ,v=Ha.cursorLine}else b={points:dEe(l,h,i)},N=NP,v=Ha.cursorLine;var _=typeof c=="object"&&"className"in c?c.className:void 0,k=eb(eb(eb(eb({stroke:"#ccc",pointerEvents:"none"},i),b),Ou(c)),{},{payload:p,payloadIndex:x,className:Pt("recharts-tooltip-cursor",_)});return f.createElement(wr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:v},f.createElement(g4e,{cursor:c,cursorComp:N,cursorProps:k}))}function x4e(e){var t=ILe(),a=lQ(),s=sh(),r=HLe();return t==null||a==null||s==null||r==null?null:f.createElement(p4e,uk({},e,{offset:a,layout:s,tooltipAxisBandSize:t,chartName:r}))}var KK=f.createContext(null),y4e=()=>f.useContext(KK),C_={exports:{}},eU;function b4e(){return eU||(eU=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function r(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new r(u,h||c,p),b=a?a+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(a?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=a?a+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,x=h.length,b=new Array(x);p<x;p++)b[p]=h[p].fn;return b},l.prototype.listenerCount=function(d){var u=a?a+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,p,x,b){var N=a?a+d:d;if(!this._events[N])return!1;var v=this._events[N],j=arguments.length,w,S;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,p),!0;case 5:return v.fn.call(v.context,u,h,p,x),!0;case 6:return v.fn.call(v.context,u,h,p,x,b),!0}for(S=1,w=new Array(j-1);S<j;S++)w[S-1]=arguments[S];v.fn.apply(v.context,w)}else{var A=v.length,E;for(S=0;S<A;S++)switch(v[S].once&&this.removeListener(d,v[S].fn,void 0,!0),j){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,u);break;case 3:v[S].fn.call(v[S].context,u,h);break;case 4:v[S].fn.call(v[S].context,u,h,p);break;default:if(!w)for(E=1,w=new Array(j-1);E<j;E++)w[E-1]=arguments[E];v[S].fn.apply(v[S].context,w)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,p){var x=a?a+d:d;if(!this._events[x])return this;if(!u)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===u&&(!p||b.once)&&(!h||b.context===h)&&o(this,x);else{for(var N=0,v=[],j=b.length;N<j;N++)(b[N].fn!==u||p&&!b[N].once||h&&b[N].context!==h)&&v.push(b[N]);v.length?this._events[x]=v.length===1?v[0]:v:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l})(C_)),C_.exports}var v4e=b4e();const w4e=Ki(v4e);var Rp=new w4e,mk="recharts.syncEvent.tooltip",tU="recharts.syncEvent.brush";function dD(e,t){if(t){var a=Number.parseInt(t,10);if(!Yi(a))return e?.[a]}}var N4e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},XK=vr({name:"options",initialState:N4e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),j4e=XK.reducer,{createEventEmitter:C4e}=XK.actions;function S4e(e){return e.tooltip.syncInteraction}var _4e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ZK=vr({name:"chartData",initialState:_4e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:s}=t.payload;a!=null&&(e.dataStartIndex=a),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:nU,setDataStartEndIndexes:A4e,setComputedData:rVe}=ZK.actions,T4e=ZK.reducer,E4e=["x","y"];function aU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Qm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?aU(Object(a),!0).forEach(function(s){k4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function k4e(e,t,a){return(t=L4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L4e(e){var t=P4e(e,"string");return typeof t=="symbol"?t:t+""}function P4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D4e(e,t){if(e==null)return{};var a,s,r=O4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function O4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function M4e(){var e=Rt(AP),t=Rt(TP),a=Xn(),s=Rt(YQ),r=Rt(oc),i=sh(),o=wj(),l=Rt(c=>c.rootProps.className);f.useEffect(()=>{if(e==null)return Ux;var c=(d,u,h)=>{if(t!==h&&e===d){if(s==="index"){var p;if(o&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var x=u.payload.coordinate,{x:b,y:N}=x,v=D4e(x,E4e),{x:j,y:w,width:S,height:A}=u.payload.sourceViewBox,E=Qm(Qm({},v),{},{x:o.x+(S?(b-j)/S:0)*o.width,y:o.y+(A?(N-w)/A:0)*o.height});a(Qm(Qm({},u),{},{payload:Qm(Qm({},u.payload),{},{coordinate:E})}))}else a(u);return}if(r!=null){var _;if(typeof s=="function"){var k={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},T=s(r,k);_=r[T]}else s==="value"&&(_=r.find(G=>String(G.value)===u.payload.label));var{coordinate:O}=u.payload;if(_==null||u.payload.active===!1||O==null||o==null){a(ck({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:R}=O,P=Math.min($,o.x+o.width),I=Math.min(R,o.y+o.height),H={x:i==="horizontal"?_.coordinate:P,y:i==="horizontal"?I:_.coordinate},Q=ck({active:u.payload.active,coordinate:H,dataKey:u.payload.dataKey,index:String(_.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});a(Q)}}};return Rp.on(mk,c),()=>{Rp.off(mk,c)}},[l,a,t,e,s,r,i,o])}function I4e(){var e=Rt(AP),t=Rt(TP),a=Xn();f.useEffect(()=>{if(e==null)return Ux;var s=(r,i,o)=>{t!==o&&e===r&&a(A4e(i))};return Rp.on(tU,s),()=>{Rp.off(tU,s)}},[a,t,e])}function $4e(){var e=Xn();f.useEffect(()=>{e(C4e())},[e]),M4e(),I4e()}function R4e(e,t,a,s,r,i){var o=Rt(x=>WLe(x,e,t)),l=Rt(TP),c=Rt(AP),d=Rt(YQ),u=Rt(S4e),h=u?.active,p=wj();f.useEffect(()=>{if(!h&&c!=null&&l!=null){var x=ck({active:i,coordinate:a,dataKey:o,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});Rp.emit(mk,c,x,l)}},[h,a,o,r,s,l,c,d,i,p])}function sU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function rU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?sU(Object(a),!0).forEach(function(s){z4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function z4e(e,t,a){return(t=F4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function F4e(e){var t=U4e(e,"string");return typeof t=="symbol"?t:t+""}function U4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B4e(e){return e.dataKey}function H4e(e,t){return f.isValidElement(e)?f.cloneElement(e,t):typeof e=="function"?f.createElement(e,t):f.createElement(JAe,t)}var iU=[],q4e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function S_(e){var t,a,s=Va(e,q4e),{active:r,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:h,payloadUniqBy:p,position:x,reverseDirection:b,useTranslate3d:N,wrapperStyle:v,cursor:j,shared:w,trigger:S,defaultIndex:A,portal:E,axisId:_}=s,k=Xn(),T=typeof A=="number"?String(A):A;f.useEffect(()=>{k(zke({shared:w,trigger:S,axisId:_,active:r,defaultIndex:T}))},[k,w,S,_,r,T]);var O=wj(),$=vQ(),R=Dke(w),{activeIndex:P,isActive:I}=(t=Rt(Se=>YLe(Se,R,S,T)))!==null&&t!==void 0?t:{},H=Rt(Se=>VLe(Se,R,S,T)),Q=Rt(Se=>YK(Se,R,S,T)),G=Rt(Se=>GLe(Se,R,S,T)),K=H,W=y4e(),J=(a=r??I)!==null&&a!==void 0?a:!1,[Te,ee]=NY([K,J]),U=R==="axis"?Q:void 0;R4e(R,S,G,U,P,J);var je=E??W;if(je==null||O==null||R==null)return null;var be=K??iU;J||(be=iU),d&&be.length&&(be=yY(be.filter(Se=>Se.value!=null&&(Se.hide!==!0||s.includeHidden)),p,B4e));var le=be.length>0,Ce=f.createElement(iTe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:u,active:J,coordinate:G,hasPayload:le,offset:h,position:x,reverseDirection:b,useTranslate3d:N,viewBox:O,wrapperStyle:v,lastBoundingBox:Te,innerRef:ee,hasPortalFromProps:!!E},H4e(c,rU(rU({},s),{},{payload:be,label:U,active:J,activeIndex:P,coordinate:G,accessibilityLayer:$})));return f.createElement(f.Fragment,null,Bi.createPortal(Ce,je),J&&f.createElement(x4e,{cursor:j,tooltipEventType:R,coordinate:G,payload:be,index:P}))}var zj=e=>null;zj.displayName="Cell";function W4e(e,t,a){return(t=G4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function G4e(e){var t=V4e(e,"string");return typeof t=="symbol"?t:t+""}function V4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Y4e{constructor(t){W4e(this,"cache",new Map),this.maxSize=t}get(t){var a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function oU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Q4e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oU(Object(a),!0).forEach(function(s){K4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function K4e(e,t,a){return(t=X4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function X4e(e){var t=Z4e(e,"string");return typeof t=="symbol"?t:t+""}function Z4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J4e={cacheSize:2e3,enableCache:!0},JK=Q4e({},J4e),lU=new Y4e(JK.cacheSize),ePe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},cU="recharts_measurement_span";function tPe(e,t){var a=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l)}var dU=(e,t)=>{try{var a=document.getElementById(cU);a||(a=document.createElement("span"),a.setAttribute("id",cU),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,ePe,t),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},Jg=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_j.isSsr)return{width:0,height:0};if(!JK.enableCache)return dU(t,a);var s=tPe(t,a),r=lU.get(s);if(r)return r;var i=dU(t,a);return lU.set(s,i),i},eX;function nPe(e,t,a){return(t=aPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function aPe(e){var t=sPe(e,"string");return typeof t=="symbol"?t:t+""}function sPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rPe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,iPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oPe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},lPe=["cm","mm","pt","pc","in","Q","px"];function cPe(e){return lPe.includes(e)}var lf="NaN";function dPe(e,t){return e*oPe[t]}class Ss{static parse(t){var a,[,s,r]=(a=iPe.exec(t))!==null&&a!==void 0?a:[];return s==null?Ss.NaN:new Ss(parseFloat(s),r??"")}constructor(t,a){this.num=t,this.unit=a,this.num=t,this.unit=a,Yi(t)&&(this.unit=""),a!==""&&!rPe.test(a)&&(this.num=NaN,this.unit=""),cPe(a)&&(this.num=dPe(t,a),this.unit="px")}add(t){return this.unit!==t.unit?new Ss(NaN,""):new Ss(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ss(NaN,""):new Ss(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ss(NaN,""):new Ss(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ss(NaN,""):new Ss(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Yi(this.num)}}eX=Ss;nPe(Ss,"NaN",new eX(NaN,""));function tX(e){if(e==null||e.includes(lf))return lf;for(var t=e;t.includes("*")||t.includes("/");){var a,[,s,r,i]=(a=uU.exec(t))!==null&&a!==void 0?a:[],o=Ss.parse(s??""),l=Ss.parse(i??""),c=r==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return lf;t=t.replace(uU,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,p]=(d=mU.exec(t))!==null&&d!==void 0?d:[],x=Ss.parse(u??""),b=Ss.parse(p??""),N=h==="+"?x.add(b):x.subtract(b);if(N.isNaN())return lf;t=t.replace(mU,N.toString())}return t}var fU=/\(([^()]*)\)/;function uPe(e){for(var t=e,a;(a=fU.exec(t))!=null;){var[,s]=a;t=t.replace(fU,tX(s))}return t}function mPe(e){var t=e.replace(/\s+/g,"");return t=uPe(t),t=tX(t),t}function fPe(e){try{return mPe(e)}catch{return lf}}function __(e){var t=fPe(e.slice(5,-1));return t===lf?"":t}var hPe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],gPe=["dx","dy","angle","className","breakAll"];function fk(){return fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},fk.apply(null,arguments)}function hU(e,t){if(e==null)return{};var a,s,r=pPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function pPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var nX=/[ \f\n\r\t\v\u2028\u2029]+/,aX=e=>{var{children:t,breakAll:a,style:s}=e;try{var r=[];ua(t)||(a?r=t.toString().split(""):r=t.toString().split(nX));var i=r.map(l=>({word:l,width:Jg(l,s).width})),o=a?0:Jg("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function xPe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var sX=(e,t,a,s)=>e.reduce((r,i)=>{var{word:o,width:l}=i,c=r[r.length-1];if(c&&l!=null&&(t==null||s||c.width+l+a<Number(t)))c.words.push(o),c.width+=l+a;else{var d={words:[o],width:l};r.push(d)}return r},[]),rX=e=>e.reduce((t,a)=>t.width>a.width?t:a),yPe="",gU=(e,t,a,s,r,i,o,l)=>{var c=e.slice(0,t),d=aX({breakAll:a,style:s,children:c+yPe});if(!d)return[!1,[]];var u=sX(d.wordsWithComputedWidth,i,o,l),h=u.length>r||rX(u).width>Number(i);return[h,u]},bPe=(e,t,a,s,r)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=It(i),u=String(o),h=sX(t,s,a,r);if(!d||r)return h;var p=h.length>i||rX(h).width>Number(s);if(!p)return h;for(var x=0,b=u.length-1,N=0,v;x<=b&&N<=u.length-1;){var j=Math.floor((x+b)/2),w=j-1,[S,A]=gU(u,w,c,l,i,s,a,r),[E]=gU(u,j,c,l,i,s,a,r);if(!S&&!E&&(x=j+1),S&&E&&(b=j-1),!S&&E){v=A;break}N++}return v||h},pU=e=>{var t=ua(e)?[]:e.toString().split(nX);return[{words:t,width:void 0}]},vPe=e=>{var{width:t,scaleToFit:a,children:s,style:r,breakAll:i,maxLines:o}=e;if((t||a)&&!_j.isSsr){var l,c,d=aX({breakAll:i,children:s,style:r});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return pU(s);return bPe({breakAll:i,children:s,maxLines:o,style:r},l,c,t,!!a)}return pU(s)},iX="#808080",wPe={angle:0,breakAll:!1,capHeight:"0.71em",fill:iX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Fj=f.forwardRef((e,t)=>{var a=Va(e,wPe),{x:s,y:r,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=a,h=hU(a,hPe),p=f.useMemo(()=>vPe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:x,dy:b,angle:N,className:v,breakAll:j}=h,w=hU(h,gPe);if(!zo(s)||!zo(r)||p.length===0)return null;var S=Number(s)+(It(x)?x:0),A=Number(r)+(It(b)?b:0);if(!ga(S)||!ga(A))return null;var E;switch(u){case"start":E=__("calc(".concat(o,")"));break;case"middle":E=__("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:E=__("calc(".concat(p.length-1," * -").concat(i,")"));break}var _=[];if(c){var k=p[0].width,{width:T}=h;_.push("scale(".concat(It(T)&&It(k)?T/k:1,")"))}return N&&_.push("rotate(".concat(N,", ").concat(S,", ").concat(A,")")),_.length&&(w.transform=_.join(" ")),f.createElement("text",fk({},Vs(w),{ref:t,x:S,y:A,className:Pt("recharts-text",v),textAnchor:d,fill:l.includes("url")?iX:l}),p.map((O,$)=>{var R=O.words.join(j?"":" ");return f.createElement("tspan",{x:S,dy:$===0?E:i,key:"".concat(R,"-").concat($)},R)}))});Fj.displayName="Text";var NPe=["labelRef"],jPe=["content"];function xU(e,t){if(e==null)return{};var a,s,r=CPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function CPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function yU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function La(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?yU(Object(a),!0).forEach(function(s){SPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function SPe(e,t,a){return(t=_Pe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _Pe(e){var t=APe(e,"string");return typeof t=="symbol"?t:t+""}function APe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Sl.apply(null,arguments)}var oX=f.createContext(null),TPe=e=>{var{x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o,children:l}=e,c=f.useMemo(()=>({x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o}),[t,a,s,r,i,o]);return f.createElement(oX.Provider,{value:c},l)},lX=()=>{var e=f.useContext(oX),t=wj();return e||oQ(t)},EPe=f.createContext(null),kPe=()=>{var e=f.useContext(EPe),t=Rt(JQ);return e||t},LPe=e=>{var{value:t,formatter:a}=e,s=ua(e.children)?t:e.children;return typeof a=="function"?a(s):s},uD=e=>e!=null&&typeof e=="function",PPe=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),360);return a*s},DPe=(e,t,a,s,r)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:p,clockWise:x}=r,b=(d+u)/2,N=PPe(h,p),v=N>=0?1:-1,j,w;switch(t){case"insideStart":j=h+v*i,w=x;break;case"insideEnd":j=p-v*i,w=!x;break;case"end":j=p+v*i,w=x;break;default:throw new Error("Unsupported position ".concat(t))}w=N<=0?w:!w;var S=Ba(l,c,b,j),A=Ba(l,c,b,j+(w?1:-1)*359),E="M".concat(S.x,",").concat(S.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(w?0:1,`,
    `).concat(A.x,",").concat(A.y),_=ua(e.id)?Ep("recharts-radial-line-"):e.id;return f.createElement("text",Sl({},s,{dominantBaseline:"central",className:Pt("recharts-radial-bar-label",o)}),f.createElement("defs",null,f.createElement("path",{id:_,d:E})),f.createElement("textPath",{xlinkHref:"#".concat(_)},a))},OPe=(e,t,a)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(a==="outside"){var{x:u,y:h}=Ba(s,r,o+t,d);return{x:u,y:h,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+o)/2,{x,y:b}=Ba(s,r,p,d);return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},hk=e=>"cx"in e&&It(e.cx),MPe=(e,t)=>{var{parentViewBox:a,offset:s,position:r}=e,i;a!=null&&!hk(a)&&(i=a);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:u}=t,h=o,p=o+(c-d)/2,x=(h+p)/2,b=(c+d)/2,N=h+c/2,v=u>=0?1:-1,j=v*s,w=v>0?"end":"start",S=v>0?"start":"end",A=c>=0?1:-1,E=A*s,_=A>0?"end":"start",k=A>0?"start":"end";if(r==="top"){var T={x:h+c/2,y:l-j,textAnchor:"middle",verticalAnchor:w};return La(La({},T),i?{height:Math.max(l-i.y,0),width:c}:{})}if(r==="bottom"){var O={x:p+d/2,y:l+u+j,textAnchor:"middle",verticalAnchor:S};return La(La({},O),i?{height:Math.max(i.y+i.height-(l+u),0),width:d}:{})}if(r==="left"){var $={x:x-E,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return La(La({},$),i?{width:Math.max($.x-i.x,0),height:u}:{})}if(r==="right"){var R={x:x+b+E,y:l+u/2,textAnchor:k,verticalAnchor:"middle"};return La(La({},R),i?{width:Math.max(i.x+i.width-R.x,0),height:u}:{})}var P=i?{width:b,height:u}:{};return r==="insideLeft"?La({x:x+E,y:l+u/2,textAnchor:k,verticalAnchor:"middle"},P):r==="insideRight"?La({x:x+b-E,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},P):r==="insideTop"?La({x:h+c/2,y:l+j,textAnchor:"middle",verticalAnchor:S},P):r==="insideBottom"?La({x:p+d/2,y:l+u-j,textAnchor:"middle",verticalAnchor:w},P):r==="insideTopLeft"?La({x:h+E,y:l+j,textAnchor:k,verticalAnchor:S},P):r==="insideTopRight"?La({x:h+c-E,y:l+j,textAnchor:_,verticalAnchor:S},P):r==="insideBottomLeft"?La({x:p+E,y:l+u-j,textAnchor:k,verticalAnchor:w},P):r==="insideBottomRight"?La({x:p+d-E,y:l+u-j,textAnchor:_,verticalAnchor:w},P):r&&typeof r=="object"&&(It(r.x)||ql(r.x))&&(It(r.y)||ql(r.y))?La({x:o+Is(r.x,b),y:l+Is(r.y,u),textAnchor:"end",verticalAnchor:"end"},P):La({x:N,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},IPe={angle:0,offset:5,zIndex:Ha.label,position:"middle",textBreakAll:!1};function qc(e){var t=Va(e,IPe),{viewBox:a,position:s,value:r,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=kPe(),h=lX(),p=s==="center"?h:u??h,x,b,N;if(a==null?x=p:hk(a)?x=a:x=oQ(a),!x||ua(r)&&ua(i)&&!f.isValidElement(o)&&typeof o!="function")return null;var v=La(La({},t),{},{viewBox:x});if(f.isValidElement(o)){var{labelRef:j}=v,w=xU(v,NPe);return f.cloneElement(o,w)}if(typeof o=="function"){var{content:S}=v,A=xU(v,jPe);if(b=f.createElement(o,A),f.isValidElement(b))return b}else b=LPe(t);var E=Vs(t);if(hk(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return DPe(t,s,b,E,x);N=OPe(x,t.offset,t.position)}else N=MPe(t,x);return f.createElement(wr,{zIndex:t.zIndex},f.createElement(Fj,Sl({ref:d,className:Pt("recharts-label",l)},E,N,{textAnchor:xPe(E.textAnchor)?E.textAnchor:N.textAnchor,breakAll:c}),b))}qc.displayName="Label";var $Pe=(e,t,a)=>{if(!e)return null;var s={viewBox:t,labelRef:a};return e===!0?f.createElement(qc,Sl({key:"label-implicit"},s)):zo(e)?f.createElement(qc,Sl({key:"label-implicit",value:e},s)):f.isValidElement(e)?e.type===qc?f.cloneElement(e,La({key:"label-implicit"},s)):f.createElement(qc,Sl({key:"label-implicit",content:e},s)):uD(e)?f.createElement(qc,Sl({key:"label-implicit",content:e},s)):e&&typeof e=="object"?f.createElement(qc,Sl({},e,{key:"label-implicit"},s)):null};function RPe(e){var{label:t,labelRef:a}=e,s=lX();return $Pe(t,s,a)||null}var A_={},T_={},bU;function zPe(){return bU||(bU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a[a.length-1]}e.last=t})(T_)),T_}var E_={},vU;function FPe(){return vU||(vU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=t})(E_)),E_}var wU;function UPe(){return wU||(wU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zPe(),a=FPe(),s=iP();function r(i){if(s.isArrayLike(i))return t.last(a.toArray(i))}e.last=r})(A_)),A_}var k_,NU;function BPe(){return NU||(NU=1,k_=UPe().last),k_}var HPe=BPe();const qPe=Ki(HPe);var WPe=["valueAccessor"],GPe=["dataKey","clockWise","id","textBreakAll","zIndex"];function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},cw.apply(null,arguments)}function jU(e,t){if(e==null)return{};var a,s,r=VPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function VPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var YPe=e=>Array.isArray(e.value)?qPe(e.value):e.value,cX=f.createContext(void 0),dX=cX.Provider,uX=f.createContext(void 0),QPe=uX.Provider;function KPe(){return f.useContext(cX)}function XPe(){return f.useContext(uX)}function Jb(e){var{valueAccessor:t=YPe}=e,a=jU(e,WPe),{dataKey:s,clockWise:r,id:i,textBreakAll:o,zIndex:l}=a,c=jU(a,GPe),d=KPe(),u=XPe(),h=d||u;return!h||!h.length?null:f.createElement(wr,{zIndex:l??Ha.label},f.createElement(ps,{className:"recharts-label-list"},h.map((p,x)=>{var b,N=ua(s)?t(p,x):Hn(p&&p.payload,s),v=ua(i)?{}:{id:"".concat(i,"-").concat(x)};return f.createElement(qc,cw({key:"label-".concat(x)},Vs(p),c,v,{fill:(b=a.fill)!==null&&b!==void 0?b:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:o,viewBox:p.viewBox,index:x,zIndex:0}))})))}Jb.displayName="LabelList";function mD(e){var{label:t}=e;return t?t===!0?f.createElement(Jb,{key:"labelList-implicit"}):f.isValidElement(t)||uD(t)?f.createElement(Jb,{key:"labelList-implicit",content:t}):typeof t=="object"?f.createElement(Jb,cw({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function gk(){return gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},gk.apply(null,arguments)}var mX=e=>{var{cx:t,cy:a,r:s,className:r}=e,i=Pt("recharts-dot",r);return It(t)&&It(a)&&It(s)?f.createElement("circle",gk({},Ur(e),rP(e),{className:i,cx:t,cy:a,r:s})):null},fX=e=>e.graphicalItems.polarItems,ZPe=rt([ha,Xx],OP),Uj=rt([fX,ya,ZPe],MP),JPe=rt([Uj],IP),Bj=rt([JPe,Aj],$P),eDe=rt([Bj,ya,Uj],zP);rt([Bj,ya,Uj],(e,t,a)=>a.length>0?e.flatMap(s=>a.flatMap(r=>{var i,o=Hn(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Hn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var CU=()=>{},tDe=rt([Bj,ya,Uj,Mj,ha],HP),nDe=rt([ya,UP,BP,CU,tDe,CU,wn,ha],qP),hX=rt([ya,wn,Bj,eDe,Kx,ha,nDe],WP),aDe=rt([hX,ya,ch],YP);rt([ya,hX,aDe,ha],KP);var sDe={radiusAxis:{},angleAxis:{}},gX=vr({name:"polarAxis",initialState:sDe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:iVe,removeRadiusAxis:oVe,addAngleAxis:lVe,removeAngleAxis:cVe}=gX.actions,rDe=gX.reducer;function SU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function _U(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SU(Object(a),!0).forEach(function(s){iDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function iDe(e,t,a){return(t=oDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oDe(e){var t=lDe(e,"string");return typeof t=="symbol"?t:t+""}function lDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cDe=(e,t)=>t,fD=rt([fX,cDe],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),dDe=[],hD=(e,t,a)=>a?.length===0?dDe:a,pX=rt([Aj,fD,hD],(e,t,a)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&a!=null&&(r=a.map(i=>_U(_U({},t.presentationProps),i.props))),r!=null)return r}}),uDe=rt([pX,fD,hD],(e,t,a)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,o=Hn(s,t.nameKey,t.name),l;return a!=null&&(i=a[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=a[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?l=s.fill:l=t.fill,{value:ah(o,t.dataKey),color:l,payload:s,type:t.legendType}})}),mDe=rt([pX,fD,hD,is],(e,t,a,s)=>{if(!(t==null||e==null))return u3e({offset:s,pieSettings:t,displayedData:e,cells:a})}),AU=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",TU=null,L_=null,xX=e=>{if(e===TU&&Array.isArray(L_))return L_;var t=[];return f.Children.forEach(e,a=>{ua(a)||(rL.isFragment(a)?t=t.concat(xX(a.props.children)):t.push(a))}),L_=t,TU=e,t};function gD(e,t){var a=[],s=[];return Array.isArray(t)?s=t.map(r=>AU(r)):s=[AU(t)],xX(e).forEach(r=>{var i=Mu(r,"type.displayName")||Mu(r,"type.name");i&&s.indexOf(i)!==-1&&a.push(r)}),a}var yX=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,P_={},EU;function fDe(){return EU||(EU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const r=a[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${r}]`}let s=a;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(a)===s}e.isPlainObject=t})(P_)),P_}var D_,kU;function hDe(){return kU||(kU=1,D_=fDe().isPlainObject),D_}var gDe=hDe();const pDe=Ki(gDe);var LU,PU,DU,OU,MU;function IU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function $U(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?IU(Object(a),!0).forEach(function(s){xDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xDe(e,t,a){return(t=yDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yDe(e){var t=bDe(e,"string");return typeof t=="symbol"?t:t+""}function bDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dw(){return dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},dw.apply(null,arguments)}function yg(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var RU=(e,t,a,s,r)=>{var i=a-s,o;return o=ja(LU||(LU=yg(["M ",",",""])),e,t),o+=ja(PU||(PU=yg(["L ",",",""])),e+a,t),o+=ja(DU||(DU=yg(["L ",",",""])),e+a-i/2,t+r),o+=ja(OU||(OU=yg(["L ",",",""])),e+a-i/2-s,t+r),o+=ja(MU||(MU=yg(["L ",","," Z"])),e,t),o},vDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wDe=e=>{var t=Va(e,vDe),{x:a,y:s,upperWidth:r,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:h}=t,p=f.useRef(null),[x,b]=f.useState(-1),N=f.useRef(r),v=f.useRef(i),j=f.useRef(o),w=f.useRef(a),S=f.useRef(s),A=Qx(e,"trapezoid-");if(f.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var H=p.current.getTotalLength();H&&b(H)}catch{}},[]),a!==+a||s!==+s||r!==+r||i!==+i||o!==+o||r===0&&i===0||o===0)return null;var E=Pt("recharts-trapezoid",l);if(!h)return f.createElement("g",null,f.createElement("path",dw({},Vs(t),{className:E,d:RU(a,s,r,i,o)})));var _=N.current,k=v.current,T=j.current,O=w.current,$=S.current,R="0px ".concat(x===-1?1:x,"px"),P="".concat(x,"px 0px"),I=wQ(["strokeDasharray"],d,c);return f.createElement(Yx,{animationId:A,key:A,canBegin:x>0,duration:d,easing:c,isActive:h,begin:u},H=>{var Q=la(_,r,H),G=la(k,i,H),K=la(T,o,H),W=la(O,a,H),J=la($,s,H);p.current&&(N.current=Q,v.current=G,j.current=K,w.current=W,S.current=J);var Te=H>0?{transition:I,strokeDasharray:P}:{strokeDasharray:R};return f.createElement("path",dw({},Vs(t),{className:E,d:RU(W,J,Q,G,K),ref:p,style:$U($U({},Te),t.style)}))})},NDe=["option","shapeType","activeClassName"];function jDe(e,t){if(e==null)return{};var a,s,r=CDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function CDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function zU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function uw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?zU(Object(a),!0).forEach(function(s){SDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function SDe(e,t,a){return(t=_De(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _De(e){var t=ADe(e,"string");return typeof t=="symbol"?t:t+""}function ADe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TDe(e,t){return uw(uw({},t),e)}function EDe(e,t){return e==="symbols"}function FU(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return f.createElement(SQ,a);case"trapezoid":return f.createElement(wDe,a);case"sector":return f.createElement(EQ,a);case"symbols":if(EDe(t))return f.createElement(sP,a);break;case"curve":return f.createElement(NP,a);default:return null}}function kDe(e){return f.isValidElement(e)?e.props:e}function pD(e){var{option:t,shapeType:a,activeClassName:s="recharts-active-shape"}=e,r=jDe(e,NDe),i;if(f.isValidElement(t))i=f.cloneElement(t,uw(uw({},r),kDe(t)));else if(typeof t=="function")i=t(r,r.index);else if(pDe(t)&&typeof t!="boolean"){var o=TDe(t,r);i=f.createElement(FU,{shapeType:a,elementProps:o})}else{var l=r;i=f.createElement(FU,{shapeType:a,elementProps:l})}return r.isActive?f.createElement(ps,{className:s},i):i}var xD=(e,t,a)=>{var s=Xn();return(r,i)=>o=>{e?.(r,i,o),s(kK({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}},yD=e=>{var t=Xn();return(a,s)=>r=>{e?.(a,s,r),t(Fke())}},bD=(e,t,a)=>{var s=Xn();return(r,i)=>o=>{e?.(r,i,o),s(Uke({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}};function vD(e){var{tooltipEntrySettings:t}=e,a=Xn(),s=Fs(),r=f.useRef(null);return f.useLayoutEffect(()=>{s||(r.current===null?a(Ike(t)):r.current!==t&&a($ke({prev:r.current,next:t})),r.current=t)},[t,a,s]),f.useLayoutEffect(()=>()=>{r.current&&(a(Rke(r.current)),r.current=null)},[a]),null}function bX(e){var{legendPayload:t}=e,a=Xn(),s=Fs(),r=f.useRef(null);return f.useLayoutEffect(()=>{s||(r.current===null?a(pQ(t)):r.current!==t&&a(xQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),f.useLayoutEffect(()=>()=>{r.current&&(a(yQ(r.current)),r.current=null)},[a]),null}function LDe(e){var{legendPayload:t}=e,a=Xn(),s=Rt(wn),r=f.useRef(null);return f.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?a(pQ(t)):r.current!==t&&a(xQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),f.useLayoutEffect(()=>()=>{r.current&&(a(yQ(r.current)),r.current=null)},[a]),null}var O_,PDe=()=>{var[e]=f.useState(()=>Ep("uid-"));return e},DDe=(O_=ju.useId)!==null&&O_!==void 0?O_:PDe;function ODe(e,t){var a=DDe();return t||(e?"".concat(e,"-").concat(a):a)}var MDe=f.createContext(void 0),wD=e=>{var{id:t,type:a,children:s}=e,r=ODe("recharts-".concat(a),t);return f.createElement(MDe.Provider,{value:r},s(r))},IDe={cartesianItems:[],polarItems:[]},vX=vr({name:"graphicalItems",initialState:IDe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:oa()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:s}=t.payload,r=qi(e).cartesianItems.indexOf(a);r>-1&&(e.cartesianItems[r]=s)},prepare:oa()},removeCartesianGraphicalItem:{reducer(e,t){var a=qi(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:oa()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:oa()},removePolarGraphicalItem:{reducer(e,t){var a=qi(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:oa()}}}),{addCartesianGraphicalItem:$De,replaceCartesianGraphicalItem:RDe,removeCartesianGraphicalItem:zDe,addPolarGraphicalItem:FDe,removePolarGraphicalItem:UDe}=vX.actions,BDe=vX.reducer,HDe=e=>{var t=Xn(),a=f.useRef(null);return f.useLayoutEffect(()=>{a.current===null?t($De(e)):a.current!==e&&t(RDe({prev:a.current,next:e})),a.current=e},[t,e]),f.useLayoutEffect(()=>()=>{a.current&&(t(zDe(a.current)),a.current=null)},[t]),null},wX=f.memo(HDe);function qDe(e){var t=Xn();return f.useLayoutEffect(()=>(t(FDe(e)),()=>{t(UDe(e))}),[t,e]),null}var WDe=["key"],GDe=["onMouseEnter","onClick","onMouseLeave"],VDe=["id"],YDe=["id"];function UU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ca(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UU(Object(a),!0).forEach(function(s){QDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function QDe(e,t,a){return(t=KDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function KDe(e){var t=XDe(e,"string");return typeof t=="symbol"?t:t+""}function XDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hd(){return hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},hd.apply(null,arguments)}function Hj(e,t){if(e==null)return{};var a,s,r=ZDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ZDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function JDe(e){var t=f.useMemo(()=>gD(e.children,zj),[e.children]),a=Rt(s=>uDe(s,e.id,t));return a==null?null:f.createElement(LDe,{legendPayload:a})}var e3e=f.memo(e=>{var{dataKey:t,nameKey:a,sectors:s,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d,id:u}=e,h={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:a,name:ah(l,t),hide:c,type:d,color:o,unit:"",graphicalItemId:u}};return f.createElement(vD,{tooltipEntrySettings:h})}),t3e=(e,t)=>e>t?"start":e<t?"end":"middle",n3e=(e,t,a)=>Is(typeof t=="function"?t(e):t,a,a*.8),a3e=(e,t,a)=>{var{top:s,left:r,width:i,height:o}=t,l=_Q(i,o),c=r+Is(e.cx,i,i/2),d=s+Is(e.cy,o,o/2),u=Is(e.innerRadius,l,0),h=n3e(a,e.outerRadius,l),p=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:h,maxRadius:p}},s3e=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),360);return a*s};function r3e(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var i3e=(e,t)=>{if(f.isValidElement(e))return f.cloneElement(e,t);if(typeof e=="function")return e(t);var a=Pt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=Hj(t,WDe);return f.createElement(NP,hd({},r,{type:"linear",className:a}))},o3e=(e,t,a)=>{if(f.isValidElement(e))return f.cloneElement(e,t);var s=a;if(typeof e=="function"&&(s=e(t),f.isValidElement(s)))return s;var r=Pt("recharts-pie-label-text",r3e(e));return f.createElement(Fj,hd({},t,{alignmentBaseline:"middle",className:r}),s)};function l3e(e){var{sectors:t,props:a,showLabels:s}=e,{label:r,labelLine:i,dataKey:o}=a;if(!s||!r||!t)return null;var l=Ur(a),c=Ou(r),d=Ou(i),u=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,h=t.map((p,x)=>{var b=(p.startAngle+p.endAngle)/2,N=Ba(p.cx,p.cy,p.outerRadius+u,b),v=Ca(Ca(Ca(Ca({},l),p),{},{stroke:"none"},c),{},{index:x,textAnchor:t3e(N.x,p.cx)},N),j=Ca(Ca(Ca(Ca({},l),p),{},{fill:"none",stroke:p.fill},d),{},{index:x,points:[Ba(p.cx,p.cy,p.outerRadius,b),N],key:"line"});return f.createElement(wr,{zIndex:Ha.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},f.createElement(ps,null,i&&i3e(i,j),o3e(r,v,Hn(p,o))))});return f.createElement(ps,{className:"recharts-pie-labels"},h)}function c3e(e){var{sectors:t,props:a,showLabels:s}=e,{label:r}=a;return typeof r=="object"&&r!=null&&"position"in r?f.createElement(mD,{label:r}):f.createElement(l3e,{sectors:t,props:a,showLabels:s})}function d3e(e){var{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:r,shape:i,id:o}=e,l=Rt(fd),c=Rt(rD),d=Rt(_Le),{onMouseEnter:u,onClick:h,onMouseLeave:p}=r,x=Hj(r,GDe),b=xD(u,r.dataKey,o),N=yD(p),v=bD(h,r.dataKey,o);return t==null||t.length===0?null:f.createElement(f.Fragment,null,t.map((j,w)=>{if(j?.startAngle===0&&j?.endAngle===0&&t.length!==1)return null;var S=d==null||d===o,A=String(w)===l&&(c==null||r.dataKey===c)&&S,E=l?s:null,_=a&&A?a:E,k=Ca(Ca({},j),{},{stroke:j.stroke,tabIndex:-1,[nQ]:w,[aQ]:o});return f.createElement(ps,hd({key:"sector-".concat(j?.startAngle,"-").concat(j?.endAngle,"-").concat(j.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},Bx(x,j,w),{onMouseEnter:b(j,w),onMouseLeave:N(j,w),onClick:v(j,w)}),f.createElement(pD,hd({option:i??_,index:w,shapeType:"sector",isActive:A},k)))}))}function u3e(e){var t,{pieSettings:a,displayedData:s,cells:r,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:h}=a,p=Math.abs(a.minAngle),x=s3e(l,c),b=Math.abs(x),N=s.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,v=s.filter(_=>Hn(_,d,0)!==0).length,j=(b>=360?v:v-1)*N,w=b-v*p-j,S=s.reduce((_,k)=>{var T=Hn(k,d,0);return _+(It(T)?T:0)},0),A;if(S>0){var E;A=s.map((_,k)=>{var T=Hn(_,d,0),O=Hn(_,u,k),$=a3e(a,i,_),R=(It(T)?T:0)/S,P,I=Ca(Ca({},_),r&&r[k]&&r[k].props);k?P=E.endAngle+gs(x)*N*(T!==0?1:0):P=l;var H=P+gs(x)*((T!==0?p:0)+R*w),Q=(P+H)/2,G=($.innerRadius+$.outerRadius)/2,K=[{name:O,value:T,payload:I,dataKey:d,type:h,graphicalItemId:a.id}],W=Ba($.cx,$.cy,G,Q);return E=Ca(Ca(Ca(Ca({},a.presentationProps),{},{percent:R,cornerRadius:typeof o=="string"?parseFloat(o):o,name:O,tooltipPayload:K,midAngle:Q,middleRadius:G,tooltipPosition:W},I),$),{},{value:T,dataKey:d,startAngle:P,endAngle:H,payload:I,paddingAngle:gs(x)*N}),E})}return A}function m3e(e){var{showLabels:t,sectors:a,children:s}=e,r=f.useMemo(()=>!t||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,t]);return f.createElement(QPe,{value:t?r:void 0},s)}function f3e(e){var{props:t,previousSectorsRef:a,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:h,onAnimationEnd:p}=t,x=Qx(t,"recharts-pie-"),b=a.current,[N,v]=f.useState(!1),j=f.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),w=f.useCallback(()=>{typeof h=="function"&&h(),v(!0)},[h]);return f.createElement(m3e,{showLabels:!N,sectors:r},f.createElement(Yx,{animationId:x,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:w,onAnimationEnd:j,key:x},S=>{var A=[],E=r&&r[0],_=E?.startAngle;return r?.forEach((k,T)=>{var O=b&&b[T],$=T>0?Mu(k,"paddingAngle",0):0;if(O){var R=la(O.endAngle-O.startAngle,k.endAngle-k.startAngle,S),P=Ca(Ca({},k),{},{startAngle:_+$,endAngle:_+R+$});A.push(P),_=P.endAngle}else{var{endAngle:I,startAngle:H}=k,Q=la(0,I-H,S),G=Ca(Ca({},k),{},{startAngle:_+$,endAngle:_+Q+$});A.push(G),_=G.endAngle}}),a.current=A,f.createElement(ps,null,f.createElement(d3e,{sectors:A,activeShape:d,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:s}))}),f.createElement(c3e,{showLabels:!N,sectors:r,props:t}),t.children)}var h3e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ha.area};function g3e(e){var{id:t}=e,a=Hj(e,VDe),{hide:s,className:r,rootTabIndex:i}=e,o=f.useMemo(()=>gD(e.children,zj),[e.children]),l=Rt(u=>mDe(u,t,o)),c=f.useRef(null),d=Pt("recharts-pie",r);return s||l==null?(c.current=null,f.createElement(ps,{tabIndex:i,className:d})):f.createElement(wr,{zIndex:e.zIndex},f.createElement(e3e,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),f.createElement(ps,{tabIndex:i,className:d},f.createElement(f3e,{props:Ca(Ca({},a),{},{sectors:l}),previousSectorsRef:c,id:t})))}function NX(e){var t=Va(e,h3e),{id:a}=t,s=Hj(t,YDe),r=Ur(s);return f.createElement(wD,{id:a,type:"pie"},i=>f.createElement(f.Fragment,null,f.createElement(qDe,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),f.createElement(JDe,hd({},s,{id:i})),f.createElement(g3e,hd({},s,{id:i}))))}NX.displayName="Pie";var p3e=["points"];function BU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function M_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?BU(Object(a),!0).forEach(function(s){x3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function x3e(e,t,a){return(t=y3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y3e(e){var t=b3e(e,"string");return typeof t=="symbol"?t:t+""}function b3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mw(){return mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},mw.apply(null,arguments)}function v3e(e,t){if(e==null)return{};var a,s,r=w3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function w3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function N3e(e){var{option:t,dotProps:a,className:s}=e;if(f.isValidElement(t))return f.cloneElement(t,a);if(typeof t=="function")return t(a);var r=Pt(s,typeof t!="boolean"?t.className:""),i=a??{},{points:o}=i,l=v3e(i,p3e);return f.createElement(mX,mw({},l,{className:r}))}function j3e(e,t){return e==null?!1:t?!0:e.length===1}function C3e(e){var{points:t,dot:a,className:s,dotClassName:r,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:d=Ha.scatter}=e;if(!j3e(t,a))return null;var u=yX(a),h=uSe(a),p=t.map((b,N)=>{var v,j,w=M_(M_(M_({r:3},o),h),{},{index:N,cx:(v=b.x)!==null&&v!==void 0?v:void 0,cy:(j=b.y)!==null&&j!==void 0?j:void 0,dataKey:i,value:b.value,payload:b.payload,points:t});return f.createElement(N3e,{key:"dot-".concat(N),option:a,dotProps:w,className:r})}),x={};return l&&c!=null&&(x.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),f.createElement(wr,{zIndex:d},f.createElement(ps,mw({className:s},x),p))}function HU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function qU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?HU(Object(a),!0).forEach(function(s){S3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function S3e(e,t,a){return(t=_3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _3e(e){var t=A3e(e,"string");return typeof t=="symbol"?t:t+""}function A3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jX=0,T3e={xAxis:{},yAxis:{},zAxis:{}},CX=vr({name:"cartesianAxis",initialState:T3e,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:oa()},replaceXAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.xAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:oa()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:oa()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:oa()},replaceYAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.yAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:oa()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:oa()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:oa()},replaceZAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.zAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:oa()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:oa()},updateYAxisWidth(e,t){var{id:a,width:s}=t.payload,r=e.yAxis[a];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var o=[...i,s].slice(-3);e.yAxis[a]=qU(qU({},e.yAxis[a]),{},{width:s,widthHistory:o})}}}}),{addXAxis:E3e,replaceXAxis:k3e,removeXAxis:L3e,addYAxis:P3e,replaceYAxis:D3e,removeYAxis:O3e,addZAxis:dVe,replaceZAxis:uVe,removeZAxis:mVe,updateYAxisWidth:M3e}=CX.actions,I3e=CX.reducer,$3e=rt([is],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),R3e=rt([$3e,nc,ac],(e,t,a)=>{if(!(!e||t==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),ND=()=>Rt(R3e),z3e=()=>Rt(LLe);function WU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function I_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?WU(Object(a),!0).forEach(function(s){F3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):WU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function F3e(e,t,a){return(t=U3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function U3e(e){var t=B3e(e,"string");return typeof t=="symbol"?t:t+""}function B3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H3e=e=>{var{point:t,childIndex:a,mainColor:s,activeDot:r,dataKey:i,clipPath:o}=e;if(r===!1||t.x==null||t.y==null)return null;var l={index:a,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=I_(I_(I_({},l),Ou(r)),rP(r)),d;return f.isValidElement(r)?d=f.cloneElement(r,c):typeof r=="function"?d=r(c):d=f.createElement(mX,c),f.createElement(ps,{className:"recharts-active-dot",clipPath:o},d)};function q3e(e){var{points:t,mainColor:a,activeDot:s,itemDataKey:r,clipPath:i,zIndex:o=Ha.activeDot}=e,l=Rt(fd),c=z3e();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return ua(d)?null:f.createElement(wr,{zIndex:o},f.createElement(H3e,{point:d,childIndex:Number(l),mainColor:a,dataKey:r,activeDot:s,clipPath:i}))}var GU=(e,t,a)=>{var s=a??e;if(!ua(s))return Is(s,t,0)},W3e=(e,t,a)=>{var s={},r=e.filter(kj),i=e.filter(d=>d.stackId==null),o=r.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),s),l=Object.entries(o).map(d=>{var[u,h]=d,p=h.map(b=>b.dataKey),x=GU(t,a,h[0].barSize);return{stackId:u,dataKeys:p,barSize:x}}),c=i.map(d=>{var u=[d.dataKey].filter(p=>p!=null),h=GU(t,a,d.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...l,...c]};function VU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function tb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?VU(Object(a),!0).forEach(function(s){G3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):VU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function G3e(e,t,a){return(t=V3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function V3e(e){var t=Y3e(e,"string");return typeof t=="symbol"?t:t+""}function Y3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q3e(e,t,a,s,r){var i=s.length;if(!(i<1)){var o=Is(e,a,0,!0),l,c=[];if(ga(s[0].barSize)){var d=!1,u=a/i,h=s.reduce((j,w)=>j+(w.barSize||0),0);h+=(i-1)*o,h>=a&&(h-=(i-1)*o,o=0),h>=a&&u>0&&(d=!0,u*=.9,h=i*u);var p=(a-h)/2>>0,x={offset:p-o,size:0};l=s.reduce((j,w)=>{var S,A={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+o,size:d?u:(S=w.barSize)!==null&&S!==void 0?S:0}},E=[...j,A];return x=E[E.length-1].position,E},c)}else{var b=Is(t,a,0,!0);a-2*b-(i-1)*o<=0&&(o=0);var N=(a-2*b-(i-1)*o)/i;N>1&&(N>>=0);var v=ga(r)?Math.min(N,r):N;l=s.reduce((j,w,S)=>[...j,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:b+(N+o)*S+(N-v)/2,size:v}}],c)}return l}}var K3e=(e,t,a,s,r,i,o)=>{var l=ua(o)?t:o,c=Q3e(a,s,r!==i?r:i,e,l);return r!==i&&c!=null&&(c=c.map(d=>tb(tb({},d),{},{position:tb(tb({},d.position),{},{offset:d.position.offset-r/2})}))),c},X3e=(e,t)=>{var a=PP(t);if(!(!e||a==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(o=>o.key===a)}}}};function Z3e(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ga(e.zIndex)?e.zIndex:t}var SX=e=>{var{chartData:t}=e,a=Xn(),s=Fs();return f.useEffect(()=>s?()=>{}:(a(nU(t)),()=>{a(nU(void 0))}),[t,a,s]),null},YU={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},_X=vr({name:"brush",initialState:YU,reducers:{setBrushSettings(e,t){return t.payload==null?YU:t.payload}}}),{setBrushSettings:fVe}=_X.actions,J3e=_X.reducer;function eOe(e,t,a){return(t=tOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function tOe(e){var t=nOe(e,"string");return typeof t=="symbol"?t:t+""}function nOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jD{static create(t){return new jD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:a,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(a){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var a=this.range(),s=a[0],r=a[a.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}eOe(jD,"EPS",1e-4);function aOe(e){return(e%180+180)%180}var sOe=function(t){var{width:a,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=aOe(r),o=i*Math.PI/180,l=Math.atan(s/a),c=o>l&&o<Math.PI-l?s/Math.sin(o):a/Math.cos(o);return Math.abs(c)},rOe={dots:[],areas:[],lines:[]},AX=vr({name:"referenceElements",initialState:rOe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=qi(e).dots.findIndex(s=>s===t.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=qi(e).areas.findIndex(s=>s===t.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=qi(e).lines.findIndex(s=>s===t.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:hVe,removeDot:gVe,addArea:pVe,removeArea:xVe,addLine:yVe,removeLine:bVe}=AX.actions,iOe=AX.reducer,oOe=f.createContext(void 0),lOe=e=>{var{children:t}=e,[a]=f.useState("".concat(Ep("recharts"),"-clip")),s=ND();if(s==null)return null;var{x:r,y:i,width:o,height:l}=s;return f.createElement(oOe.Provider,{value:a},f.createElement("defs",null,f.createElement("clipPath",{id:a},f.createElement("rect",{x:r,y:i,height:l,width:o}))),t)};function TX(e,t){if(t<1)return[];if(t===1)return e;for(var a=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&a.push(r)}return a}function cOe(e,t,a){var s={width:e.width+t.width,height:e.height+t.height};return sOe(s,a)}function dOe(e,t,a){var s=a==="width",{x:r,y:i,width:o,height:l}=e;return t===1?{start:s?r:i,end:s?r+o:i+l}:{start:s?r+o:i+l,end:s?r:i}}function zp(e,t,a,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=a();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function uOe(e,t){return TX(e,t+1)}function mOe(e,t,a,s,r){for(var i=(s||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var b=s?.[c];if(b===void 0)return{v:TX(s,d)};var N=c,v,j=()=>(v===void 0&&(v=a(b,N)),v),w=b.coordinate,S=c===0||zp(e,w,j,u,l);S||(c=0,u=o,d+=1),S&&(u=w+e*(j()/2+r),c+=d)},p;d<=i.length;)if(p=h(),p)return p.v;return[]}function fOe(e,t,a,s,r){var i=(s||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,d=1;d<=o;d++){for(var u=(o-1)%d,h=l,p=!0,x=function(){var w=s[b],S=b,A,E=()=>(A===void 0&&(A=a(w,S)),A),_=w.coordinate,k=b===u||zp(e,_,E,h,c);if(!k)return p=!1,1;k&&(h=_+e*(E()/2+r))},b=u;b<o&&!x();b+=d);if(p){for(var N=[],v=u;v<o;v+=d)N.push(s[v]);return N}}return[]}function QU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ls(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?QU(Object(a),!0).forEach(function(s){hOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function hOe(e,t,a){return(t=gOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gOe(e){var t=pOe(e,"string");return typeof t=="symbol"?t:t+""}function pOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xOe(e,t,a,s,r){for(var i=(s||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(p){var x=i[p],b,N=()=>(b===void 0&&(b=a(x,p)),b);if(p===o-1){var v=e*(x.coordinate+e*N()/2-c);i[p]=x=Ls(Ls({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate})}else i[p]=x=Ls(Ls({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var j=zp(e,x.tickCoord,N,l,c);j&&(c=x.tickCoord-e*(N()/2+r),i[p]=Ls(Ls({},x),{},{isShow:!0}))}},u=o-1;u>=0;u--)d(u);return i}function yOe(e,t,a,s,r,i){var o=(s||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=s[l-1],h=a(u,l-1),p=e*(u.coordinate+e*h/2-d);if(o[l-1]=u=Ls(Ls({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var x=zp(e,u.tickCoord,()=>h,c,d);x&&(d=u.tickCoord-e*(h/2+r),o[l-1]=Ls(Ls({},u),{},{isShow:!0}))}}for(var b=i?l-1:l,N=function(w){var S=o[w],A,E=()=>(A===void 0&&(A=a(S,w)),A);if(w===0){var _=e*(S.coordinate-e*E()/2-c);o[w]=S=Ls(Ls({},S),{},{tickCoord:_<0?S.coordinate-_*e:S.coordinate})}else o[w]=S=Ls(Ls({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var k=zp(e,S.tickCoord,E,c,d);k&&(c=S.tickCoord+e*(E()/2+r),o[w]=Ls(Ls({},S),{},{isShow:!0}))}},v=0;v<b;v++)N(v);return o}function CD(e,t,a){var{tick:s,ticks:r,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!r||!r.length||!s)return[];if(It(c)||_j.isSsr){var p;return(p=uOe(r,It(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],b=l==="top"||l==="bottom"?"width":"height",N=u&&b==="width"?Jg(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},v=(S,A)=>{var E=typeof d=="function"?d(S.value,A):S.value;return b==="width"?cOe(Jg(E,{fontSize:t,letterSpacing:a}),N,h):Jg(E,{fontSize:t,letterSpacing:a})[b]},j=r.length>=2?gs(r[1].coordinate-r[0].coordinate):1,w=dOe(i,j,b);return c==="equidistantPreserveStart"?mOe(j,w,v,r,o):c==="equidistantPreserveEnd"?fOe(j,w,v,r,o):(c==="preserveStart"||c==="preserveStartEnd"?x=yOe(j,w,v,r,o,c==="preserveStartEnd"):x=xOe(j,w,v,r,o),x.filter(S=>S.isShow))}var bOe=e=>{var{ticks:t,label:a,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=a?a.getBoundingClientRect().width:0,c=r+i,d=o+c+l+(a?s:0);return Math.round(d)}return 0},vOe=["axisLine","width","height","className","hide","ticks","axisType"];function wOe(e,t){if(e==null)return{};var a,s,r=NOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function NOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Fu.apply(null,arguments)}function KU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Fa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KU(Object(a),!0).forEach(function(s){jOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function jOe(e,t,a){return(t=COe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function COe(e){var t=SOe(e,"string");return typeof t=="symbol"?t:t+""}function SOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ha.axis};function _Oe(e){var{x:t,y:a,width:s,height:r,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=Fa(Fa(Fa({},c),Ur(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);d=Fa(Fa({},d),{},{x1:t,y1:a+u*r,x2:t+s,y2:a+u*r})}else{var h=+(i==="left"&&!o||i==="right"&&o);d=Fa(Fa({},d),{},{x1:t+h*s,y1:a,x2:t+h*s,y2:a+r})}return f.createElement("line",Fu({},d,{className:Pt("recharts-cartesian-axis-line",Mu(l,"className"))}))}function AOe(e,t,a,s,r,i,o,l,c){var d,u,h,p,x,b,N=l?-1:1,v=e.tickSize||o,j=It(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=u=e.coordinate,p=a+ +!l*r,h=p-N*v,b=h-N*c,x=j;break;case"left":h=p=e.coordinate,u=t+ +!l*s,d=u-N*v,x=d-N*c,b=j;break;case"right":h=p=e.coordinate,u=t+ +l*s,d=u+N*v,x=d+N*c,b=j;break;default:d=u=e.coordinate,p=a+ +l*r,h=p+N*v,b=h+N*c,x=j;break}return{line:{x1:d,y1:h,x2:u,y2:p},tick:{x,y:b}}}function TOe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function EOe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function kOe(e){var{option:t,tickProps:a,value:s}=e,r,i=Pt(a.className,"recharts-cartesian-axis-tick-value");if(f.isValidElement(t))r=f.cloneElement(t,Fa(Fa({},a),{},{className:i}));else if(typeof t=="function")r=t(Fa(Fa({},a),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Pt(o,t?.className)),r=f.createElement(Fj,Fu({},a,{className:o}),s)}return r}var LOe=f.forwardRef((e,t)=>{var{ticks:a=[],tick:s,tickLine:r,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:h,x:p,y:x,width:b,height:N,tickSize:v,tickMargin:j,fontSize:w,letterSpacing:S,getTicksConfig:A,events:E,axisType:_}=e,k=CD(Fa(Fa({},A),{},{ticks:a}),w,S),T=TOe(u,h),O=EOe(u,h),$=Ur(A),R=Ou(s),P={};typeof r=="object"&&(P=r);var I=Fa(Fa({},$),{},{fill:"none"},P),H=k.map(K=>Fa({entry:K},AOe(K,p,x,b,N,u,v,h,j))),Q=H.map(K=>{var{entry:W,line:J}=K;return f.createElement(ps,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},r&&f.createElement("line",Fu({},I,J,{className:Pt("recharts-cartesian-axis-tick-line",Mu(r,"className"))})))}),G=H.map((K,W)=>{var{entry:J,tick:Te}=K,ee=Fa(Fa(Fa(Fa({textAnchor:T,verticalAnchor:O},$),{},{stroke:"none",fill:i},R),Te),{},{index:W,payload:J,visibleTicksCount:k.length,tickFormatter:o,padding:c},d);return f.createElement(ps,Fu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},Bx(E,J,W)),s&&f.createElement(kOe,{option:s,tickProps:ee,value:"".concat(typeof o=="function"?o(J.value,W):J.value).concat(l||"")}))});return f.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},G.length>0&&f.createElement(wr,{zIndex:Ha.label},f.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:t},G)),Q.length>0&&f.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},Q))}),POe=f.forwardRef((e,t)=>{var{axisLine:a,width:s,height:r,className:i,hide:o,ticks:l,axisType:c}=e,d=wOe(e,vOe),[u,h]=f.useState(""),[p,x]=f.useState(""),b=f.useRef(null);f.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return bOe({ticks:b.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=f.useCallback(v=>{if(v){var j=v.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=j;var w=j[0];if(w){var S=window.getComputedStyle(w),A=S.fontSize,E=S.letterSpacing;(A!==u||E!==p)&&(h(A),x(E))}}},[u,p]);return o||s!=null&&s<=0||r!=null&&r<=0?null:f.createElement(wr,{zIndex:e.zIndex},f.createElement(ps,{className:Pt("recharts-cartesian-axis",i)},f.createElement(_Oe,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:Ur(e)}),f.createElement(LOe,{ref:N,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),f.createElement(TPe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},f.createElement(RPe,{label:e.label,labelRef:e.labelRef}),e.children)))}),SD=f.forwardRef((e,t)=>{var a=Va(e,Pl);return f.createElement(POe,Fu({},a,{ref:t}))});SD.displayName="CartesianAxis";var DOe=["x1","y1","x2","y2","key"],OOe=["offset"],MOe=["xAxisId","yAxisId"],IOe=["xAxisId","yAxisId"];function XU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ps(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?XU(Object(a),!0).forEach(function(s){$Oe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):XU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function $Oe(e,t,a){return(t=ROe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ROe(e){var t=zOe(e,"string");return typeof t=="symbol"?t:t+""}function zOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},uu.apply(null,arguments)}function fw(e,t){if(e==null)return{};var a,s,r=FOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function FOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var UOe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:s,y:r,width:i,height:o,ry:l}=e;return f.createElement("rect",{x:s,y:r,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function EX(e){var{option:t,lineItemProps:a}=e,s;if(f.isValidElement(t))s=f.cloneElement(t,a);else if(typeof t=="function")s=t(a);else{var r,{x1:i,y1:o,x2:l,y2:c,key:d}=a,u=fw(a,DOe),h=(r=Ur(u))!==null&&r!==void 0?r:{},{offset:p}=h,x=fw(h,OOe);s=f.createElement("line",uu({},x,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return s}function BOe(e){var{x:t,width:a,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=fw(e,MOe),c=r.map((d,u)=>{var h=Ps(Ps({},l),{},{x1:t,y1:d,x2:t+a,y2:d,key:"line-".concat(u),index:u});return f.createElement(EX,{key:"line-".concat(u),option:s,lineItemProps:h})});return f.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function HOe(e){var{y:t,height:a,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=fw(e,IOe),c=r.map((d,u)=>{var h=Ps(Ps({},l),{},{x1:d,y1:t,x2:d,y2:t+a,key:"line-".concat(u),index:u});return f.createElement(EX,{option:s,lineItemProps:h,key:"line-".concat(u)})});return f.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function qOe(e){var{horizontalFill:t,fillOpacity:a,x:s,y:r,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(h=>Math.round(h+r-r)).sort((h,p)=>h-p);r!==d[0]&&d.unshift(0);var u=d.map((h,p)=>{var x=!d[p+1],b=x?r+o-h:d[p+1]-h;if(b<=0)return null;var N=p%t.length;return f.createElement("rect",{key:"react-".concat(p),y:h,x:s,height:b,width:i,stroke:"none",fill:t[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return f.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function WOe(e){var{vertical:t=!0,verticalFill:a,fillOpacity:s,x:r,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!a||!a.length)return null;var d=c.map(h=>Math.round(h+r-r)).sort((h,p)=>h-p);r!==d[0]&&d.unshift(0);var u=d.map((h,p)=>{var x=!d[p+1],b=x?r+o-h:d[p+1]-h;if(b<=0)return null;var N=p%a.length;return f.createElement("rect",{key:"react-".concat(p),x:h,y:i,width:b,height:l,stroke:"none",fill:a[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return f.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var GOe=(e,t)=>{var{xAxis:a,width:s,height:r,offset:i}=e;return JY(CD(Ps(Ps(Ps({},Pl),a),{},{ticks:eQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},VOe=(e,t)=>{var{yAxis:a,width:s,height:r,offset:i}=e;return JY(CD(Ps(Ps(Ps({},Pl),a),{},{ticks:eQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},YOe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ha.grid};function pk(e){var t=yP(),a=bP(),s=lQ(),r=Ps(Ps({},Va(e,YOe)),{},{x:It(e.x)?e.x:s.left,y:It(e.y)?e.y:s.top,width:It(e.width)?e.width:s.width,height:It(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:p,verticalValues:x}=r,b=Fs(),N=Rt(O=>qF(O,"xAxis",i,b)),v=Rt(O=>qF(O,"yAxis",o,b));if(!Fo(d)||!Fo(u)||!It(l)||!It(c))return null;var j=r.verticalCoordinatesGenerator||GOe,w=r.horizontalCoordinatesGenerator||VOe,{horizontalPoints:S,verticalPoints:A}=r;if((!S||!S.length)&&typeof w=="function"){var E=p&&p.length,_=w({yAxis:v?Ps(Ps({},v),{},{ticks:E?p:v.ticks}):void 0,width:t??d,height:a??u,offset:s},E?!0:h);Kv(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(S=_)}if((!A||!A.length)&&typeof j=="function"){var k=x&&x.length,T=j({xAxis:N?Ps(Ps({},N),{},{ticks:k?x:N.ticks}):void 0,width:t??d,height:a??u,offset:s},k?!0:h);Kv(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(A=T)}return f.createElement(wr,{zIndex:r.zIndex},f.createElement("g",{className:"recharts-cartesian-grid"},f.createElement(UOe,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),f.createElement(qOe,uu({},r,{horizontalPoints:S})),f.createElement(WOe,uu({},r,{verticalPoints:A})),f.createElement(BOe,uu({},r,{offset:s,horizontalPoints:S,xAxis:N,yAxis:v})),f.createElement(HOe,uu({},r,{offset:s,verticalPoints:A,xAxis:N,yAxis:v}))))}pk.displayName="CartesianGrid";var QOe={},kX=vr({name:"errorBars",initialState:QOe,reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:s,next:r}=t.payload;e[a]&&(e[a]=e[a].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]&&(e[a]=e[a].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:vVe,replaceErrorBar:wVe,removeErrorBar:NVe}=kX.actions,KOe=kX.reducer,XOe=["children"];function ZOe(e,t){if(e==null)return{};var a,s,r=JOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function JOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var e5e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},t5e=f.createContext(e5e);function LX(e){var{children:t}=e,a=ZOe(e,XOe);return f.createElement(t5e.Provider,{value:a},t)}function _D(e,t){var a,s,r=Rt(d=>rc(d,e)),i=Rt(d=>ic(d,t)),o=(a=r?.allowDataOverflow)!==null&&a!==void 0?a:ds.allowDataOverflow,l=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:us.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function PX(e){var{xAxisId:t,yAxisId:a,clipPathId:s}=e,r=ND(),{needClipX:i,needClipY:o,needClip:l}=_D(t,a);if(!l||!r)return null;var{x:c,y:d,width:u,height:h}=r;return f.createElement("clipPath",{id:"clipPath-".concat(s)},f.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:u*2,height:o?h:h*2}))}var DX=(e,t,a,s)=>md(e,"xAxis",t,s),OX=(e,t,a,s)=>ud(e,"xAxis",t,s),MX=(e,t,a,s)=>md(e,"yAxis",a,s),IX=(e,t,a,s)=>ud(e,"yAxis",a,s),n5e=rt([wn,DX,MX,OX,IX],(e,t,a,s,r)=>_d(e,"xAxis")?If(t,s,!1):If(a,r,!1)),a5e=(e,t,a,s,r)=>r;function s5e(e){return e.type==="line"}var r5e=rt([Dj,a5e],(e,t)=>e.filter(s5e).find(a=>a.id===t)),i5e=rt([wn,DX,MX,OX,IX,r5e,n5e,jP],(e,t,a,s,r,i,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(i==null||t==null||a==null||s==null||r==null||s.length===0||r.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:h,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(d,u+1),x!=null)return Y5e({layout:e,xAxis:t,yAxis:a,xAxisTicks:s,yAxisTicks:r,dataKey:h,bandSize:o,displayedData:x})}});function o5e(e){var t=Ou(e),a=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,o=Number(r),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=a),(Number.isNaN(l)||l<0)&&(l=s),{r:o,strokeWidth:l}}return{r:a,strokeWidth:s}}var $_={exports:{}},R_={};var ZU;function l5e(){if(ZU)return R_;ZU=1;var e=Uf();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var a=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return R_.useSyncExternalStoreWithSelector=function(c,d,u,h,p){var x=r(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=o(function(){function v(E){if(!j){if(j=!0,w=E,E=h(E),p!==void 0&&b.hasValue){var _=b.value;if(p(_,E))return S=_}return S=E}if(_=S,a(w,E))return _;var k=h(E);return p!==void 0&&p(_,k)?(w=E,_):(w=E,S=k)}var j=!1,w,S,A=u===void 0?null:u;return[function(){return v(d())},A===null?void 0:function(){return v(A())}]},[d,u,h,p]);var N=s(c,x[0],x[1]);return i(function(){b.hasValue=!0,b.value=N},[N]),l(N),N},R_}var JU;function c5e(){return JU||(JU=1,$_.exports=l5e()),$_.exports}var d5e=c5e();function u5e(e){e()}function m5e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){u5e(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let s=e;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0;const r=t={callback:a,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var e7={notify(){},get:()=>[]};function f5e(e,t){let a,s=e7,r=0,i=!1;function o(N){u();const v=s.subscribe(N);let j=!1;return()=>{j||(j=!0,v(),h())}}function l(){s.notify()}function c(){b.onStateChange&&b.onStateChange()}function d(){return i}function u(){r++,a||(a=e.subscribe(c),s=m5e())}function h(){r--,a&&r===0&&(a(),a=void 0,s.clear(),s=e7)}function p(){i||(i=!0,u())}function x(){i&&(i=!1,h())}const b={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return b}var h5e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",g5e=h5e(),p5e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",x5e=p5e(),y5e=()=>g5e||x5e?f.useLayoutEffect:f.useEffect,b5e=y5e();function t7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function v5e(e,t){if(t7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r])||!t7(e[a[r]],t[a[r]]))return!1;return!0}var w5e=Symbol.for("react-redux-context"),N5e=typeof globalThis<"u"?globalThis:{};function j5e(){if(!f.createContext)return{};const e=N5e[w5e]??=new Map;let t=e.get(f.createContext);return t||(t=f.createContext(null),e.set(f.createContext,t)),t}var C5e=j5e();function S5e(e){const{children:t,context:a,serverState:s,store:r}=e,i=f.useMemo(()=>{const c=f5e(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=f.useMemo(()=>r.getState(),[r]);b5e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=a||C5e;return f.createElement(l.Provider,{value:i},t)}var _5e=S5e,A5e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function T5e(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function qj(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of a)if(A5e.has(s)){if(e[s]==null&&t[s]==null)continue;if(!v5e(e[s],t[s]))return!1}else if(!T5e(e[s],t[s]))return!1;return!0}var E5e=["id"],k5e=["type","layout","connectNulls","needClip","shape"],L5e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Fp(){return Fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Fp.apply(null,arguments)}function n7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function vo(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?n7(Object(a),!0).forEach(function(s){P5e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function P5e(e,t,a){return(t=D5e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D5e(e){var t=O5e(e,"string");return typeof t=="symbol"?t:t+""}function O5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AD(e,t){if(e==null)return{};var a,s,r=M5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function M5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var I5e=e=>{var{dataKey:t,name:a,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:ah(a,t),payload:e}]},$5e=f.memo(e=>{var{dataKey:t,data:a,stroke:s,strokeWidth:r,fill:i,name:o,hide:l,unit:c,tooltipType:d,id:u}=e,h={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:ah(o,t),hide:l,type:d,color:s,unit:c,graphicalItemId:u}};return f.createElement(vD,{tooltipEntrySettings:h})}),$X=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function R5e(e,t){for(var a=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...a];return s}var z5e=(e,t,a)=>{var s=a.reduce((h,p)=>h+p);if(!s)return $X(t,e);for(var r=Math.floor(e/s),i=e%s,o=t-e,l=[],c=0,d=0;c<a.length;d+=a[c],++c)if(d+a[c]>i){l=[...a.slice(0,c),i-d];break}var u=l.length%2===0?[0,o]:[o];return[...R5e(a,r),...l,...u].map(h=>"".concat(h,"px")).join(", ")};function F5e(e){var{clipPathId:t,points:a,props:s}=e,{dot:r,dataKey:i,needClip:o}=s,{id:l}=s,c=AD(s,E5e),d=Ur(c);return f.createElement(C3e,{points:a,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:d,needClip:o,clipPathId:t})}function U5e(e){var{showLabels:t,children:a,points:s}=e,r=f.useMemo(()=>s?.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return vo(vo({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return f.createElement(dX,{value:t?r:void 0},a)}function a7(e){var{clipPathId:t,pathRef:a,points:s,strokeDasharray:r,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:d,shape:u}=i,h=AD(i,k5e),p=vo(vo({},Vs(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:s,type:o,layout:l,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return f.createElement(f.Fragment,null,s?.length>1&&f.createElement(pD,Fp({shapeType:"curve",option:u},p,{pathRef:a})),f.createElement(F5e,{points:s,clipPathId:t,props:i}))}function B5e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function H5e(e){var{clipPathId:t,props:a,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,animateNewValues:p,width:x,height:b,onAnimationEnd:N,onAnimationStart:v}=a,j=r.current,w=Qx(o,"recharts-line-"),S=f.useRef(w),[A,E]=f.useState(!1),_=!A,k=f.useCallback(()=>{typeof N=="function"&&N(),E(!1)},[N]),T=f.useCallback(()=>{typeof v=="function"&&v(),E(!0)},[v]),O=B5e(s.current),$=f.useRef(0);S.current!==w&&($.current=i.current,S.current=w);var R=$.current;return f.createElement(U5e,{points:o,showLabels:_},a.children,f.createElement(Yx,{animationId:w,begin:d,duration:u,isActive:c,easing:h,onAnimationEnd:k,onAnimationStart:T,key:w},P=>{var I=la(R,O+R,P),H=Math.min(I,O),Q;if(c)if(l){var G="".concat(l).split(/[,\s]+/gim).map(J=>parseFloat(J));Q=z5e(H,O,G)}else Q=$X(O,H);else Q=l==null?void 0:String(l);if(P>0&&O>0&&(r.current=o,i.current=Math.max(i.current,H)),j){var K=j.length/o.length,W=P===1?o:o.map((J,Te)=>{var ee=Math.floor(Te*K);if(j[ee]){var U=j[ee];return vo(vo({},J),{},{x:la(U.x,J.x,P),y:la(U.y,J.y,P)})}return p?vo(vo({},J),{},{x:la(x*2,J.x,P),y:la(b/2,J.y,P)}):vo(vo({},J),{},{x:J.x,y:J.y})});return r.current=W,f.createElement(a7,{props:a,points:W,clipPathId:t,pathRef:s,strokeDasharray:Q})}return f.createElement(a7,{props:a,points:o,clipPathId:t,pathRef:s,strokeDasharray:Q})}),f.createElement(mD,{label:a.label}))}function q5e(e){var{clipPathId:t,props:a}=e,s=f.useRef(null),r=f.useRef(0),i=f.useRef(null);return f.createElement(H5e,{props:a,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var W5e=(e,t)=>{var a,s;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:Hn(e.payload,t)}};class G5e extends f.Component{render(){var{hide:t,dot:a,points:s,className:r,xAxisId:i,yAxisId:o,top:l,left:c,width:d,height:u,id:h,needClip:p,zIndex:x}=this.props;if(t)return null;var b=Pt("recharts-line",r),N=h,{r:v,strokeWidth:j}=o5e(a),w=yX(a),S=v*2+j,A=p?"url(#clipPath-".concat(w?"":"dots-").concat(N,")"):void 0;return f.createElement(wr,{zIndex:x},f.createElement(ps,{className:b},p&&f.createElement("defs",null,f.createElement(PX,{clipPathId:N,xAxisId:i,yAxisId:o}),!w&&f.createElement("clipPath",{id:"clipPath-dots-".concat(N)},f.createElement("rect",{x:c-S/2,y:l-S/2,width:d+S,height:u+S}))),f.createElement(LX,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:W5e,errorBarOffset:0},f.createElement(q5e,{props:this.props,clipPathId:N}))),f.createElement(q3e,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var RX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ha.line,type:"linear"};function V5e(e){var t=Va(e,RX),{activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:h,legendType:p,xAxisId:x,yAxisId:b,id:N}=t,v=AD(t,L5e),{needClip:j}=_D(x,b),w=ND(),S=sh(),A=Fs(),E=Rt($=>i5e($,x,b,A,N));if(S!=="horizontal"&&S!=="vertical"||E==null||w==null)return null;var{height:_,width:k,x:T,y:O}=w;return f.createElement(G5e,Fp({},v,{id:N,connectNulls:l,dot:c,activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:d,label:h,legendType:p,xAxisId:x,yAxisId:b,points:E,layout:S,height:_,width:k,left:T,top:O,needClip:j}))}function Y5e(e){var{layout:t,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var h=Hn(d,o);if(t==="horizontal"){var p=Ez({axis:a,ticks:r,bandSize:l,entry:d,index:u}),x=ua(h)?null:s.scale(h);return{x:p,y:x,value:h,payload:d}}var b=ua(h)?null:a.scale(h),N=Ez({axis:s,ticks:i,bandSize:l,entry:d,index:u});return b==null||N==null?null:{x:b,y:N,value:h,payload:d}}).filter(Boolean)}function Q5e(e){var t=Va(e,RX),a=Fs();return f.createElement(wD,{id:t.id,type:"line"},s=>f.createElement(f.Fragment,null,f.createElement(bX,{legendPayload:I5e(t)}),f.createElement($5e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),f.createElement(wX,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),f.createElement(V5e,Fp({},t,{id:s}))))}var xk=f.memo(Q5e,qj);xk.displayName="Line";function em(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&a!==void 0?a:jX}function tm(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&a!==void 0?a:jX}var K5e="Invariant failed";function X5e(e,t){throw new Error(K5e)}function yk(){return yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yk.apply(null,arguments)}function hw(e){return f.createElement(pD,yk({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Z5e=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(It(t))return t;var i=It(s)||ua(s);return i?t(s,r):(i||X5e(),a)}},J5e=(e,t,a)=>a,eMe=(e,t)=>t,r0=rt([Dj,eMe],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),tMe=rt([r0],e=>e?.maxBarSize),nMe=(e,t,a,s)=>s,aMe=rt([wn,Dj,em,tm,J5e],(e,t,a,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),sMe=(e,t,a)=>{var s=wn(e),r=em(e,t),i=tm(e,t);if(!(r==null||i==null))return s==="horizontal"?lk(e,"yAxis",i,a):lk(e,"xAxis",r,a)},rMe=(e,t)=>{var a=wn(e),s=em(e,t),r=tm(e,t);if(!(s==null||r==null))return a==="horizontal"?HF(e,"xAxis",s):HF(e,"yAxis",r)},iMe=rt([aMe,EEe,rMe],W3e),oMe=(e,t,a)=>{var s,r,i=r0(e,t);if(i!=null){var o=em(e,t),l=tm(e,t);if(!(o==null||l==null)){var c=wn(e),d=WQ(e),{maxBarSize:u}=i,h=ua(u)?d:u,p,x;return c==="horizontal"?(p=md(e,"xAxis",o,a),x=ud(e,"xAxis",o,a)):(p=md(e,"yAxis",l,a),x=ud(e,"yAxis",l,a)),(s=(r=If(p,x,!0))!==null&&r!==void 0?r:h)!==null&&s!==void 0?s:0}}},zX=(e,t,a)=>{var s=wn(e),r=em(e,t),i=tm(e,t);if(!(r==null||i==null)){var o,l;return s==="horizontal"?(o=md(e,"xAxis",r,a),l=ud(e,"xAxis",r,a)):(o=md(e,"yAxis",i,a),l=ud(e,"yAxis",i,a)),If(o,l)}},lMe=rt([iMe,WQ,TEe,GQ,oMe,zX,tMe],K3e),cMe=(e,t,a)=>{var s=em(e,t);if(s!=null)return md(e,"xAxis",s,a)},dMe=(e,t,a)=>{var s=tm(e,t);if(s!=null)return md(e,"yAxis",s,a)},uMe=(e,t,a)=>{var s=em(e,t);if(s!=null)return ud(e,"xAxis",s,a)},mMe=(e,t,a)=>{var s=tm(e,t);if(s!=null)return ud(e,"yAxis",s,a)},fMe=rt([lMe,r0],(e,t)=>{if(!(e==null||t==null)){var a=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),hMe=rt([sMe,r0],X3e),gMe=rt([is,pP,cMe,dMe,uMe,mMe,fMe,wn,pEe,zX,hMe,r0,nMe],(e,t,a,s,r,i,o,l,c,d,u,h,p)=>{var{chartData:x,dataStartIndex:b,dataEndIndex:N}=c;if(!(h==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||a==null||s==null||r==null||i==null||d==null)){var{data:v}=h,j;if(v!=null&&v.length>0?j=v:j=x?.slice(b,N+1),j!=null)return qMe({layout:l,barSettings:h,pos:o,parentViewBox:t,bandSize:d,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:j,offset:e,cells:p,dataStartIndex:b})}}),pMe=["index"];function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},bk.apply(null,arguments)}function xMe(e,t){if(e==null)return{};var a,s,r=yMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var FX=f.createContext(void 0),bMe=e=>{var t=f.useContext(FX);if(t!=null)return t.stackId;if(e!=null)return R_e(e)},vMe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),wMe=e=>{var t=f.useContext(FX);if(t!=null){var{stackId:a}=t;return"url(#".concat(vMe(a,e),")")}},NMe=e=>{var{index:t}=e,a=xMe(e,pMe),s=wMe(t);return f.createElement(ps,bk({className:"recharts-bar-stack-layer",clipPath:s},a))},jMe=["onMouseEnter","onMouseLeave","onClick"],CMe=["value","background","tooltipPosition"],SMe=["id"],_Me=["onMouseEnter","onClick","onMouseLeave"];function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Vl.apply(null,arguments)}function s7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Bs(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?s7(Object(a),!0).forEach(function(s){AMe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function AMe(e,t,a){return(t=TMe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TMe(e){var t=EMe(e,"string");return typeof t=="symbol"?t:t+""}function EMe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gw(e,t){if(e==null)return{};var a,s,r=kMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var LMe=e=>{var{dataKey:t,name:a,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:ah(a,t),payload:e}]},PMe=f.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:s,fill:r,name:i,hide:o,unit:l,tooltipType:c,id:d}=e,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:ah(i,t),hide:o,type:c,color:r,unit:l,graphicalItemId:d}};return f.createElement(vD,{tooltipEntrySettings:u})});function DMe(e){var t=Rt(fd),{data:a,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=gw(i,jMe),u=xD(o,s,i.id),h=yD(l),p=bD(c,s,i.id);if(!r||a==null)return null;var x=Ou(r);return f.createElement(wr,{zIndex:Z3e(r,Ha.barBackground)},a.map((b,N)=>{var{value:v,background:j,tooltipPosition:w}=b,S=gw(b,CMe);if(!j)return null;var A=u(b,N),E=h(b,N),_=p(b,N),k=Bs(Bs(Bs(Bs(Bs({option:r,isActive:String(N)===t},S),{},{fill:"#eee"},j),x),Bx(d,b,N)),{},{onMouseEnter:A,onMouseLeave:E,onClick:_,dataKey:s,index:N,className:"recharts-bar-background-rectangle"});return f.createElement(hw,Vl({key:"background-bar-".concat(N)},k))}))}function OMe(e){var{showLabels:t,children:a,rects:s}=e,r=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Bs(Bs({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return f.createElement(dX,{value:t?r:void 0},a)}function MMe(e){var{shape:t,activeBar:a,baseProps:s,entry:r,index:i,dataKey:o}=e,l=Rt(fd),c=Rt(rD),d=a&&String(i)===l&&(c==null||o===c),u=d?a:t;return d?f.createElement(wr,{zIndex:Ha.activeBar},f.createElement(hw,Vl({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))):f.createElement(hw,Vl({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))}function IMe(e){var{shape:t,baseProps:a,entry:s,index:r,dataKey:i}=e;return f.createElement(hw,Vl({},a,{name:String(a.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function $Me(e){var t,{data:a,props:s}=e,r=(t=Ur(s))!==null&&t!==void 0?t:{},{id:i}=r,o=gw(r,SMe),{shape:l,dataKey:c,activeBar:d}=s,{onMouseEnter:u,onClick:h,onMouseLeave:p}=s,x=gw(s,_Me),b=xD(u,c,i),N=yD(p),v=bD(h,c,i);return a?f.createElement(f.Fragment,null,a.map((j,w)=>f.createElement(NMe,Vl({index:w,key:"rectangle-".concat(j?.x,"-").concat(j?.y,"-").concat(j?.value,"-").concat(w),className:"recharts-bar-rectangle"},Bx(x,j,w),{onMouseEnter:b(j,w),onMouseLeave:N(j,w),onClick:v(j,w)}),d?f.createElement(MMe,{shape:l,activeBar:d,baseProps:o,entry:j,index:w,dataKey:c}):f.createElement(IMe,{shape:l,baseProps:o,entry:j,index:w,dataKey:c})))):null}function RMe(e){var{props:t,previousRectanglesRef:a}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,h=a.current,p=Qx(t,"recharts-bar-"),[x,b]=f.useState(!1),N=!x,v=f.useCallback(()=>{typeof d=="function"&&d(),b(!1)},[d]),j=f.useCallback(()=>{typeof u=="function"&&u(),b(!0)},[u]);return f.createElement(OMe,{showLabels:N,rects:s},f.createElement(Yx,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:v,onAnimationStart:j,key:p},w=>{var S=w===1?s:s?.map((A,E)=>{var _=h&&h[E];if(_)return Bs(Bs({},A),{},{x:la(_.x,A.x,w),y:la(_.y,A.y,w),width:la(_.width,A.width,w),height:la(_.height,A.height,w)});if(r==="horizontal"){var k=la(0,A.height,w),T=la(A.stackedBarStart,A.y,w);return Bs(Bs({},A),{},{y:T,height:k})}var O=la(0,A.width,w),$=la(A.stackedBarStart,A.x,w);return Bs(Bs({},A),{},{width:O,x:$})});return w>0&&(a.current=S??null),S==null?null:f.createElement(ps,null,f.createElement($Me,{props:t,data:S}))}),f.createElement(mD,{label:t.label}),t.children)}function zMe(e){var t=f.useRef(null);return f.createElement(RMe,{previousRectanglesRef:t,props:e})}var UX=0,FMe=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Hn(e,t)}};class UMe extends f.PureComponent{render(){var{hide:t,data:a,dataKey:s,className:r,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||a==null)return null;var u=Pt("recharts-bar",r),h=d;return f.createElement(ps,{className:u,id:d},l&&f.createElement("defs",null,f.createElement(PX,{clipPathId:h,xAxisId:i,yAxisId:o})),f.createElement(ps,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},f.createElement(DMe,{data:a,dataKey:s,background:c,allOtherBarProps:this.props}),f.createElement(zMe,this.props)))}}var BMe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:UX,xAxisId:0,yAxisId:0,zIndex:Ha.bar};function HMe(e){var{xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:h}=_D(t,a),p=sh(),x=Fs(),b=gD(e.children,zj),N=Rt(w=>gMe(w,e.id,x,b));if(p!=="vertical"&&p!=="horizontal")return null;var v,j=N?.[0];return j==null||j.height==null||j.width==null?v=0:v=p==="vertical"?j.height/2:j.width/2,f.createElement(LX,{xAxisId:t,yAxisId:a,data:N,dataPointFormatter:FMe,errorBarOffset:v},f.createElement(UMe,Vl({},e,{layout:p,needClip:h,data:N,xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function qMe(e){var{layout:t,barSettings:{dataKey:a,minPointSize:s},pos:r,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:h,offset:p,cells:x,parentViewBox:b,dataStartIndex:N}=e,v=t==="horizontal"?l:o,j=u?v.scale.domain():null,w=z_e({numericAxis:v}),S=v.scale(w);return h.map((A,E)=>{var _,k,T,O,$,R;if(u){var P=u[E+N];if(P==null)return null;_=D_e(P,j)}else _=Hn(A,a),Array.isArray(_)||(_=[w,_]);var I=Z5e(s,UX)(_[1],E);if(t==="horizontal"){var H,[Q,G]=[l.scale(_[0]),l.scale(_[1])];k=kz({axis:o,ticks:c,bandSize:i,offset:r.offset,entry:A,index:E}),T=(H=G??Q)!==null&&H!==void 0?H:void 0,O=r.size;var K=Q-G;if($=Yi(K)?0:K,R={x:k,y:p.top,width:O,height:p.height},Math.abs(I)>0&&Math.abs($)<Math.abs(I)){var W=gs($||I)*(Math.abs(I)-Math.abs($));T-=W,$+=W}}else{var[J,Te]=[o.scale(_[0]),o.scale(_[1])];if(k=J,T=kz({axis:l,ticks:d,bandSize:i,offset:r.offset,entry:A,index:E}),O=Te-J,$=r.size,R={x:p.left,y:T,width:p.width,height:$},Math.abs(I)>0&&Math.abs(O)<Math.abs(I)){var ee=gs(O||I)*(Math.abs(I)-Math.abs(O));O+=ee}}if(k==null||T==null||O==null||$==null)return null;var U=Bs(Bs({},A),{},{stackedBarStart:S,x:k,y:T,width:O,height:$,value:u?_:_[1],payload:A,background:R,tooltipPosition:{x:k+O/2,y:T+$/2},parentViewBox:b},x&&x[E]&&x[E].props);return U}).filter(Boolean)}function WMe(e){var t=Va(e,BMe),a=bMe(t.stackId),s=Fs();return f.createElement(wD,{id:t.id,type:"bar"},r=>f.createElement(f.Fragment,null,f.createElement(bX,{legendPayload:LMe(t)}),f.createElement(PMe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),f.createElement(wX,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),f.createElement(wr,{zIndex:t.zIndex},f.createElement(HMe,Vl({},t,{id:r})))))}var vk=f.memo(WMe,qj);vk.displayName="Bar";var GMe=["domain","range"],VMe=["domain","range"];function r7(e,t){if(e==null)return{};var a,s,r=YMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function YMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function i7(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function BX(e,t){if(e===t)return!0;var{domain:a,range:s}=e,r=r7(e,GMe),{domain:i,range:o}=t,l=r7(t,VMe);return!i7(a,i)||!i7(s,o)?!1:qj(r,l)}var QMe=["dangerouslySetInnerHTML","ticks","scale"],KMe=["id","scale"];function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},wk.apply(null,arguments)}function o7(e,t){if(e==null)return{};var a,s,r=XMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function XMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function ZMe(e){var t=Xn(),a=f.useRef(null);return f.useLayoutEffect(()=>{a.current===null?t(E3e(e)):a.current!==e&&t(k3e({prev:a.current,next:e})),a.current=e},[e,t]),f.useLayoutEffect(()=>()=>{a.current&&(t(L3e(a.current)),a.current=null)},[t]),null}var JMe=e=>{var{xAxisId:t,className:a}=e,s=Rt(pP),r=Fs(),i="xAxis",o=Rt(j=>CK(j,i,t,r)),l=Rt(j=>vK(j,t)),c=Rt(j=>_ke(j,t)),d=Rt(j=>tK(j,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:h,scale:p}=e,x=o7(e,QMe),{id:b,scale:N}=d,v=o7(d,KMe);return f.createElement(SD,wk({},x,v,{x:c.x,y:c.y,width:l.width,height:l.height,className:Pt("recharts-".concat(i," ").concat(i),a),viewBox:s,ticks:o,axisType:i}))},eIe={allowDataOverflow:ds.allowDataOverflow,allowDecimals:ds.allowDecimals,allowDuplicatedCategory:ds.allowDuplicatedCategory,angle:ds.angle,axisLine:Pl.axisLine,height:ds.height,hide:!1,includeHidden:ds.includeHidden,interval:ds.interval,minTickGap:ds.minTickGap,mirror:ds.mirror,orientation:ds.orientation,padding:ds.padding,reversed:ds.reversed,scale:ds.scale,tick:ds.tick,tickCount:ds.tickCount,tickLine:Pl.tickLine,tickSize:Pl.tickSize,type:ds.type,xAxisId:0},tIe=e=>{var t=Va(e,eIe);return f.createElement(f.Fragment,null,f.createElement(ZMe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),f.createElement(JMe,t))},Nk=f.memo(tIe,BX);Nk.displayName="XAxis";var nIe=["dangerouslySetInnerHTML","ticks","scale"],aIe=["id","scale"];function jk(){return jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},jk.apply(null,arguments)}function l7(e,t){if(e==null)return{};var a,s,r=sIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function sIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function rIe(e){var t=Xn(),a=f.useRef(null);return f.useLayoutEffect(()=>{a.current===null?t(P3e(e)):a.current!==e&&t(D3e({prev:a.current,next:e})),a.current=e},[e,t]),f.useLayoutEffect(()=>()=>{a.current&&(t(O3e(a.current)),a.current=null)},[t]),null}var iIe=e=>{var{yAxisId:t,className:a,width:s,label:r}=e,i=f.useRef(null),o=f.useRef(null),l=Rt(pP),c=Fs(),d=Xn(),u="yAxis",h=Rt(_=>wK(_,t)),p=Rt(_=>Tke(_,t)),x=Rt(_=>CK(_,u,t,c)),b=Rt(_=>nK(_,t));if(f.useLayoutEffect(()=>{if(!(s!=="auto"||!h||uD(r)||f.isValidElement(r)||b==null)){var _=i.current;if(_){var k=_.getCalculatedWidth();Math.round(h.width)!==Math.round(k)&&d(M3e({id:t,width:k}))}}},[x,h,d,r,t,s,b]),h==null||p==null||b==null)return null;var{dangerouslySetInnerHTML:N,ticks:v,scale:j}=e,w=l7(e,nIe),{id:S,scale:A}=b,E=l7(b,aIe);return f.createElement(SD,jk({},w,E,{ref:i,labelRef:o,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:h.width,height:h.height,className:Pt("recharts-".concat(u," ").concat(u),a),viewBox:l,ticks:x,axisType:u}))},oIe={allowDataOverflow:us.allowDataOverflow,allowDecimals:us.allowDecimals,allowDuplicatedCategory:us.allowDuplicatedCategory,angle:us.angle,axisLine:Pl.axisLine,hide:!1,includeHidden:us.includeHidden,interval:us.interval,minTickGap:us.minTickGap,mirror:us.mirror,orientation:us.orientation,padding:us.padding,reversed:us.reversed,scale:us.scale,tick:us.tick,tickCount:us.tickCount,tickLine:Pl.tickLine,tickSize:Pl.tickSize,type:us.type,width:us.width,yAxisId:0},lIe=e=>{var t=Va(e,oIe);return f.createElement(f.Fragment,null,f.createElement(rIe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),f.createElement(iIe,t))},Ck=f.memo(lIe,BX);Ck.displayName="YAxis";var cIe=(e,t)=>t,TD=rt([cIe,wn,JQ,os,FK,oc,qLe,is],XLe),ED=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/s)}},HX=bi("mouseClick"),qX=Wx();qX.startListening({actionCreator:HX,effect:(e,t)=>{var a=e.payload,s=TD(t.getState(),ED(a));s?.activeIndex!=null&&t.dispatch(Bke({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var Sk=bi("mouseMove"),WX=Wx(),nb=null;WX.startListening({actionCreator:Sk,effect:(e,t)=>{var a=e.payload;nb!==null&&cancelAnimationFrame(nb);var s=ED(a);nb=requestAnimationFrame(()=>{var r=t.getState(),i=JP(r,r.tooltip.settings.shared);if(i==="axis"){var o=TD(r,s);o?.activeIndex!=null?t.dispatch(PK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(LK())}nb=null})}});function dIe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var c7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},GX=vr({name:"rootProps",initialState:c7,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(a=t.payload.barGap)!==null&&a!==void 0?a:c7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),uIe=GX.reducer,{updateOptions:mIe}=GX.actions,VX=vr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:fIe}=VX.actions,hIe=VX.reducer,YX=bi("keyDown"),QX=bi("focus"),kD=Wx();kD.startListening({actionCreator:YX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=eD(r,mh(a),e0(a),a0(a)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=oc(a);if(i==="Enter"){var d=lw(a,"axis","hover",String(r.index));t.dispatch(dk({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var u=Pke(a),h=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=l+p*h;if(!(c==null||x>=c.length||x<0)){var b=lw(a,"axis","hover",String(x));t.dispatch(dk({active:!0,activeIndex:x.toString(),activeCoordinate:b}))}}}}}});kD.startListening({actionCreator:QX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip;if(!r.active&&r.index==null){var i="0",o=lw(a,"axis","hover",String(i));t.dispatch(dk({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ii=bi("externalEvent"),KX=Wx(),z_=new Map;KX.startListening({actionCreator:ii,effect:(e,t)=>{var{handler:a,reactEvent:s}=e.payload;if(a!=null){s.persist();var r=s.type,i=z_.get(r);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:TLe(l),activeDataKey:rD(l),activeIndex:fd(l),activeLabel:HK(l),activeTooltipIndex:fd(l),isTooltipActive:ELe(l)};a(c,s)}finally{z_.delete(r)}});z_.set(r,o)}}});var gIe=rt([dh],e=>e.tooltipItemPayloads),pIe=rt([gIe,n0,(e,t)=>t,(e,t,a)=>a],(e,t,a,s)=>{var r=e.find(l=>l.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var o=t(i,a);return o}}}),XX=bi("touchMove"),ZX=Wx();ZX.startListening({actionCreator:XX,effect:(e,t)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var s=t.getState(),r=JP(s,s.tooltip.settings.shared);if(r==="axis"){var i=a.touches[0];if(i==null)return;var o=TD(s,ED({clientX:i.clientX,clientY:i.clientY,currentTarget:a.currentTarget}));o?.activeIndex!=null&&t.dispatch(PK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var l,c=a.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(nQ),h=(l=d.getAttribute(aQ))!==null&&l!==void 0?l:void 0,p=uh(s).find(N=>N.id===h);if(u==null||p==null||h==null)return;var{dataKey:x}=p,b=pIe(s,u,h);t.dispatch(kK({activeDataKey:x,activeIndex:u,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var xIe=CY({brush:J3e,cartesianAxis:I3e,chartData:T4e,errorBars:KOe,graphicalItems:BDe,layout:A_e,legend:MAe,options:j4e,polarAxis:rDe,polarOptions:hIe,referenceElements:iOe,rootProps:uIe,tooltip:Hke,zIndex:u4e}),yIe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Z2e({reducer:xIe,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([qX.middleware,WX.middleware,kD.middleware,KX.middleware,ZX.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(zY({type:"raf"}))},devTools:{serialize:{replacer:dIe},name:"recharts-".concat(a)}})};function JX(e){var{preloadedState:t,children:a,reduxStoreName:s}=e,r=Fs(),i=f.useRef(null);if(r)return a;i.current==null&&(i.current=yIe(t,s));var o=oP;return f.createElement(_5e,{context:o,store:i.current},a)}function bIe(e){var{layout:t,margin:a}=e,s=Xn(),r=Fs();return f.useEffect(()=>{r||(s(C_e(t)),s(j_e(a)))},[s,r,t,a]),null}var eZ=f.memo(bIe,qj);function tZ(e){var t=Xn();return f.useEffect(()=>{t(mIe(e))},[t,e]),null}function d7(e){var{zIndex:t,isPanorama:a}=e,s=f.useRef(null),r=Xn();return f.useLayoutEffect(()=>(s.current&&r(c4e({zIndex:t,element:s.current,isPanorama:a})),()=>{r(d4e({zIndex:t,isPanorama:a}))}),[r,t,a]),f.createElement("g",{tabIndex:-1,ref:s})}function u7(e){var{children:t,isPanorama:a}=e,s=Rt(JLe);if(!s||s.length===0)return t;var r=s.filter(o=>o<0),i=s.filter(o=>o>0);return f.createElement(f.Fragment,null,r.map(o=>f.createElement(d7,{key:o,zIndex:o,isPanorama:a})),t,i.map(o=>f.createElement(d7,{key:o,zIndex:o,isPanorama:a})))}var vIe=["children"];function wIe(e,t){if(e==null)return{};var a,s,r=NIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function NIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pw.apply(null,arguments)}var jIe={width:"100%",height:"100%",display:"block"},CIe=f.forwardRef((e,t)=>{var a=yP(),s=bP(),r=vQ();if(!Fo(a)||!Fo(s))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=r?0:void 0,typeof o.role=="string"?u=o.role:u=r?"application":void 0),f.createElement(eP,pw({},o,{title:l,desc:c,role:u,tabIndex:d,width:a,height:s,style:jIe,ref:t}),i)}),SIe=e=>{var{children:t}=e,a=Rt(vj);if(!a)return null;var{width:s,height:r,y:i,x:o}=a;return f.createElement(eP,{width:s,height:r,x:o,y:i},t)},m7=f.forwardRef((e,t)=>{var{children:a}=e,s=wIe(e,vIe),r=Fs();return r?f.createElement(SIe,null,f.createElement(u7,{isPanorama:!0},a)):f.createElement(CIe,pw({ref:t},s),f.createElement(u7,{isPanorama:!1},a))});function _Ie(){var e=Xn(),[t,a]=f.useState(null),s=Rt(W_e);return f.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;ga(i)&&i!==s&&e(__e(i))}},[t,e,s]),a}function f7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function AIe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?f7(Object(a),!0).forEach(function(s){TIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function TIe(e,t,a){return(t=EIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function EIe(e){var t=kIe(e,"string");return typeof t=="symbol"?t:t+""}function kIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Uu.apply(null,arguments)}var LIe=()=>($4e(),null);function xw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var PIe=f.forwardRef((e,t)=>{var a,s,r=f.useRef(null),[i,o]=f.useState({containerWidth:xw((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:xw((s=e.style)===null||s===void 0?void 0:s.height)}),l=f.useCallback((d,u)=>{o(h=>{var p=Math.round(d),x=Math.round(u);return h.containerWidth===p&&h.containerHeight===x?h:{containerWidth:p,containerHeight:x}})},[]),c=f.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:h}=d.getBoundingClientRect();l(u,h);var p=b=>{var{width:N,height:v}=b[0].contentRect;l(N,v)},x=new ResizeObserver(p);x.observe(d),r.current=x}},[t,l]);return f.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[l]),f.createElement(f.Fragment,null,f.createElement(Nj,{width:i.containerWidth,height:i.containerHeight}),f.createElement("div",Uu({ref:c},e)))}),DIe=f.forwardRef((e,t)=>{var{width:a,height:s}=e,[r,i]=f.useState({containerWidth:xw(a),containerHeight:xw(s)}),o=f.useCallback((c,d)=>{i(u=>{var h=Math.round(c),p=Math.round(d);return u.containerWidth===h&&u.containerHeight===p?u:{containerWidth:h,containerHeight:p}})},[]),l=f.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();o(d,u)}},[t,o]);return f.createElement(f.Fragment,null,f.createElement(Nj,{width:r.containerWidth,height:r.containerHeight}),f.createElement("div",Uu({ref:l},e)))}),OIe=f.forwardRef((e,t)=>{var{width:a,height:s}=e;return f.createElement(f.Fragment,null,f.createElement(Nj,{width:a,height:s}),f.createElement("div",Uu({ref:t},e)))}),MIe=f.forwardRef((e,t)=>{var{width:a,height:s}=e;return ql(a)||ql(s)?f.createElement(DIe,Uu({},e,{ref:t})):f.createElement(OIe,Uu({},e,{ref:t}))});function IIe(e){return e===!0?PIe:MIe}var $Ie=f.forwardRef((e,t)=>{var{children:a,className:s,height:r,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:p,onTouchEnd:x,onTouchMove:b,onTouchStart:N,style:v,width:j,responsive:w,dispatchTouchEvents:S=!0}=e,A=f.useRef(null),E=Xn(),[_,k]=f.useState(null),[T,O]=f.useState(null),$=_Ie(),R=xP(),P=R?.width>0?R.width:j,I=R?.height>0?R.height:r,H=f.useCallback(ge=>{$(ge),typeof t=="function"&&t(ge),k(ge),O(ge),ge!=null&&(A.current=ge)},[$,t,k,O]),Q=f.useCallback(ge=>{E(HX(ge)),E(ii({handler:i,reactEvent:ge}))},[E,i]),G=f.useCallback(ge=>{E(Sk(ge)),E(ii({handler:d,reactEvent:ge}))},[E,d]),K=f.useCallback(ge=>{E(LK()),E(ii({handler:u,reactEvent:ge}))},[E,u]),W=f.useCallback(ge=>{E(Sk(ge)),E(ii({handler:h,reactEvent:ge}))},[E,h]),J=f.useCallback(()=>{E(QX())},[E]),Te=f.useCallback(ge=>{E(YX(ge.key))},[E]),ee=f.useCallback(ge=>{E(ii({handler:o,reactEvent:ge}))},[E,o]),U=f.useCallback(ge=>{E(ii({handler:l,reactEvent:ge}))},[E,l]),je=f.useCallback(ge=>{E(ii({handler:c,reactEvent:ge}))},[E,c]),be=f.useCallback(ge=>{E(ii({handler:p,reactEvent:ge}))},[E,p]),le=f.useCallback(ge=>{E(ii({handler:N,reactEvent:ge}))},[E,N]),Ce=f.useCallback(ge=>{S&&E(XX(ge)),E(ii({handler:b,reactEvent:ge}))},[E,S,b]),Se=f.useCallback(ge=>{E(ii({handler:x,reactEvent:ge}))},[E,x]),Oe=IIe(w);return f.createElement(KK.Provider,{value:_},f.createElement(aY.Provider,{value:T},f.createElement(Oe,{width:P??v?.width,height:I??v?.height,className:Pt("recharts-wrapper",s),style:AIe({position:"relative",cursor:"default",width:P,height:I},v),onClick:Q,onContextMenu:ee,onDoubleClick:U,onFocus:J,onKeyDown:Te,onMouseDown:je,onMouseEnter:G,onMouseLeave:K,onMouseMove:W,onMouseUp:be,onTouchEnd:Se,onTouchMove:Ce,onTouchStart:le,ref:H},f.createElement(LIe,null),a)))}),RIe=["width","height","responsive","children","className","style","compact","title","desc"];function zIe(e,t){if(e==null)return{};var a,s,r=FIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function FIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var nZ=f.forwardRef((e,t)=>{var{width:a,height:s,responsive:r,children:i,className:o,style:l,compact:c,title:d,desc:u}=e,h=zIe(e,RIe),p=Ur(h);return c?f.createElement(f.Fragment,null,f.createElement(Nj,{width:a,height:s}),f.createElement(m7,{otherAttributes:p,title:d,desc:u},i)):f.createElement($Ie,{className:o,style:l,width:a,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},f.createElement(m7,{otherAttributes:p,title:d,desc:u,ref:t},f.createElement(lOe,null,i)))});function _k(){return _k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},_k.apply(null,arguments)}var UIe={top:5,right:5,bottom:5,left:5},BIe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:UIe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},aZ=f.forwardRef(function(t,a){var s,r=Va(t.categoricalChartProps,BIe),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return f.createElement(JX,{preloadedState:{options:u},reduxStoreName:(s=d.id)!==null&&s!==void 0?s:i},f.createElement(SX,{chartData:d.data}),f.createElement(eZ,{layout:r.layout,margin:r.margin}),f.createElement(tZ,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),f.createElement(nZ,_k({},r,{ref:a})))}),HIe=["axis"],qIe=f.forwardRef((e,t)=>f.createElement(aZ,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:HIe,tooltipPayloadSearcher:dD,categoricalChartProps:e,ref:t})),WIe=["axis","item"],GIe=f.forwardRef((e,t)=>f.createElement(aZ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:WIe,tooltipPayloadSearcher:dD,categoricalChartProps:e,ref:t}));function VIe(e){var t=Xn();return f.useEffect(()=>{t(fIe(e))},[t,e]),null}var YIe=["layout"];function Ak(){return Ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ak.apply(null,arguments)}function QIe(e,t){if(e==null)return{};var a,s,r=KIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function KIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var XIe={top:5,right:5,bottom:5,left:5},sZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:XIe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ZIe=f.forwardRef(function(t,a){var s,r=Va(t.categoricalChartProps,sZ),{layout:i}=r,o=QIe(r,YIe),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u}=t,h={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u,eventEmitter:void 0};return f.createElement(JX,{preloadedState:{options:h},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:l},f.createElement(SX,{chartData:r.data}),f.createElement(eZ,{layout:i,margin:r.margin}),f.createElement(tZ,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),f.createElement(VIe,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),f.createElement(nZ,Ak({},o,{ref:a})))});function h7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function g7(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?h7(Object(a),!0).forEach(function(s){JIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function JIe(e,t,a){return(t=e$e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function e$e(e){var t=t$e(e,"string");return typeof t=="symbol"?t:t+""}function t$e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n$e=["item"],a$e=g7(g7({},sZ),{},{layout:"centric",startAngle:0,endAngle:360}),s$e=f.forwardRef((e,t)=>{var a=Va(e,a$e);return f.createElement(ZIe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:n$e,tooltipPayloadSearcher:dD,categoricalChartProps:a,ref:t})});const p7={user_id:"",start_date:"",end_date:"",target_amount:"",period_type:"CUSTOM",period_year:new Date().getFullYear(),period_number:1},r$e=[{value:"MONTHLY",label:"Monthly"},{value:"QUARTERLY",label:"Quarterly"},{value:"SEMIANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"},{value:"CUSTOM",label:"Custom"}],x7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function i$e({name:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",required:o=!1,isSubmitted:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=t.find(j=>String(j.id)===String(a)),b=x?r(x):"",N=o&&l&&!a,v=f.useMemo(()=>{const j=u.toLowerCase();return j?t.filter(w=>r(w).toLowerCase().includes(j)):t},[t,u,r]);return f.useEffect(()=>{const j=w=>{p.current&&!p.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),n.jsxs("div",{ref:p,className:"relative flex justify-center w-full",children:[n.jsx("input",{value:c?u:b,placeholder:i,onFocus:()=>d(!0),onChange:j=>{h(j.target.value),d(!0)},className:`w-full border rounded-lg p-1 text-gray-700 focus:outline-none focus:ring-1
          ${N?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`}),c&&n.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:v.length?v.map(j=>n.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(j.id)}}),d(!1),h("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(j)},j.id)):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function Wj({currentUserRole:e,currentUserId:t}){const{user:a,mutate:s}=en(),r=a?.company?.currency||"",i=r==="$"?aue:rue;f.useEffect(()=>{s&&s()},[s]),f.useEffect(()=>{a?.company&&console.log("Dashboard detected Company Settings:",a.company)},[a]),f.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[o,l]=f.useState([]),[c,d]=f.useState([]),[u,h]=f.useState(!1),[p,x]=f.useState(""),[b,N]=f.useState(1),[v,j]=f.useState(10),[w,S]=f.useState(!1),[A,E]=f.useState(!1),[_,k]=f.useState(!1),[T,O]=f.useState(null),[$,R]=f.useState(p7),[P,I]=f.useState(null),[H,Q]=f.useState(null),[G,K]=f.useState(!1),[W,J]=f.useState([]),[Te,ee]=f.useState(!1),[U,je]=f.useState("annual"),[be,le]=f.useState(1),[Ce,Se]=f.useState("overview"),[Oe,ge]=f.useState(null),[He,Ne]=f.useState(!1),[he,Z]=f.useState(null),[_e,ke]=f.useState(!1),[ze,tt]=f.useState(null),[De,at]=f.useState(null),[et,V]=f.useState(new Date().getFullYear()),[ne,se]=f.useState(""),[Ee,Ie]=f.useState(1),pe=f.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),Be=f.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),$e=f.useCallback(async()=>{h(!0);try{const xe=await te.get("/targets/admin/fetch-all");l(xe.data)}catch(xe){console.error(xe),q.error("Failed to load targets.")}finally{h(!1)}},[]),Ve=f.useCallback(async()=>{try{if(pe){const xe=await te.get("/targets/admin/get-users");d(xe.data)}}catch(xe){console.error(xe)}},[pe]),ut=f.useCallback(async()=>{try{const xe=await te.get("/targets/fiscal-settings");at(xe.data)}catch(xe){console.error("Failed to fetch fiscal settings:",xe)}},[]),ve=f.useCallback(async()=>{Ne(!0);try{const xe=new URLSearchParams;ne&&xe.append("period_type",ne),et&&xe.append("period_year",et),Ee&&xe.append("period_number",Ee);const fe=await te.get(`/targets/leaderboard?${xe.toString()}`);ge(fe.data)}catch(xe){console.error(xe),q.error("Failed to load leaderboard.")}finally{Ne(!1)}},[ne,et,Ee]),ae=f.useCallback(async()=>{try{const xe=new URLSearchParams;ne&&xe.append("period_type",ne),et&&xe.append("period_year",et),Ee&&xe.append("period_number",Ee);const fe=await te.get(`/targets/team-summary?${xe.toString()}`);tt(fe.data)}catch(xe){console.error(xe)}},[ne,et,Ee]),Fe=f.useCallback(async xe=>{ke(!0);try{const fe=await te.get(`/targets/history/${xe}`);Z(fe.data)}catch(fe){console.error(fe),q.error("Failed to load user history.")}finally{ke(!1)}},[]);f.useEffect(()=>{$e(),Ve(),ut()},[$e,Ve,ut]),f.useEffect(()=>{Ce==="leaderboard"&&(ve(),ae())},[Ce,ve,ae]);const ye=f.useMemo(()=>{const xe=o.reduce((pt,Nt)=>pt+(Number(Nt.target_amount)||0),0),fe=o.reduce((pt,Nt)=>pt+(Number(Nt.achieved_amount)||0),0),qe=xe>0?(fe/xe*100).toFixed(1):0,Ze=Math.max(0,xe-fe);return{totalTarget:xe,totalAchieved:fe,achievement:qe,remaining:Ze,totalCount:o.length}},[o]),We=f.useCallback(()=>(fe=>U==="annual"?fe:fe.filter(qe=>{const Ze=new Date(qe.start_date),pt=new Date(qe.end_date),Nt=Ze.getMonth(),St=pt.getMonth();let Ht=!1;if(U==="semiannual")be===1?Ht=Nt<=5&&St>=0:Ht=Nt<=11&&St>=6;else if(U==="trimester"){const cn=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][be-1];Ht=Nt<=cn.end&&St>=cn.start}else if(U==="quarterly"){const cn=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][be-1];Ht=Nt<=cn.end&&St>=cn.start}return Ht}))(o),[o,U,be]),it=f.useMemo(()=>{const xe=We(),fe={};xe.forEach(Nt=>{const St=Nt.user_id,Ht=Nt.user?`${Nt.user.first_name} ${Nt.user.last_name}`:"Unknown";fe[St]||(fe[St]={userId:St,name:Ht,targetAmount:0,achievedAmount:0}),fe[St].targetAmount+=Number(Nt.target_amount)||0,fe[St].achievedAmount+=Number(Nt.achieved_amount)||0});const qe=Object.values(fe).map((Nt,St)=>({...Nt,fill:x7[St%x7.length]})),Ze=qe.reduce((Nt,St)=>Nt+St.targetAmount,0);return qe.map(Nt=>({...Nt,percentage:Ze>0?(Nt.targetAmount/Ze*100).toFixed(1):0}))},[We]),ht=f.useMemo(()=>it.slice(0,8).map(xe=>({name:xe.name.split(" ")[0],achievement:Number(xe.achievedAmount),target:Number(xe.targetAmount)})),[it]),Ae=f.useMemo(()=>{const xe=p.toLowerCase();return o.filter(fe=>(fe.user?`${fe.user.first_name} ${fe.user.last_name}`.toLowerCase():"").includes(xe)||fe.start_date?.includes(xe)||fe.end_date?.includes(xe))},[o,p]),Je=Math.max(1,Math.ceil(Ae.length/v)),ce=f.useMemo(()=>{const xe=(b-1)*v;return Ae.slice(xe,xe+v)},[Ae,b,v]),X=xe=>{const{name:fe,value:qe}=xe.target;R(Ze=>({...Ze,[fe]:qe}))},de=()=>{R(p7),E(!1),O(null),ee(!1),S(!0)},D=xe=>{R({user_id:xe.user?.id?String(xe.user.id):"",start_date:xe.start_date||"",end_date:xe.end_date||"",target_amount:xe.target_amount?.toString()||"",period_type:xe.period_type||"CUSTOM",period_year:xe.period_year||new Date().getFullYear(),period_number:xe.period_number||1}),E(!0),O(xe.id),ee(!1),S(!0),I(null)},B=xe=>{const fe=xe.user?`${xe.user.first_name} ${xe.user.last_name}`:"Unknown";Q({title:"Delete Target",message:n.jsxs("span",{children:["Are you sure you want to delete the target for"," ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await te.delete(`/targets/admin/${xe.id}`),q.success("Target deleted successfully."),$e(),I(null)}})},oe=()=>{if(ce.every(xe=>W.includes(xe.id)))J(W.filter(xe=>!ce.map(fe=>fe.id).includes(xe)));else{const xe=ce.map(fe=>fe.id);J([...new Set([...W,...xe])])}},ue=xe=>{J(fe=>fe.includes(xe)?fe.filter(qe=>qe!==xe):[...fe,xe])},ie=async()=>{W.length!==0&&Q({title:"Delete Targets",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Target(s)`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await te.post("/targets/admin/bulk-delete",{target_ids:W}),q.success(`Successfully deleted ${W.length} targets`),J([]),$e()}})},Pe=xe=>{if(xe.preventDefault(),ee(!0),!$.user_id){q.error("Assign User is required.");return}if(!$.period_type){q.error("Period Type is required.");return}if($.period_type==="CUSTOM"){q.error("Period Type cannot be Custom. Please select a valid period type.");return}if($.period_type!=="CUSTOM"&&$.period_type!=="ANNUAL"&&!$.period_number){q.error("Please select a period.");return}if(!$.target_amount||Number($.target_amount)<=0){q.error("Target amount must be greater than 0.");return}if(new Date($.end_date)<new Date($.start_date)){q.error("End date must be after start date.");return}const fe={user_id:Number($.user_id),target_amount:Number($.target_amount),start_date:$.start_date,end_date:$.end_date,period_type:$.period_type||"CUSTOM",period_year:$.period_year||new Date().getFullYear(),period_number:$.period_number||null},qe=A?"Update Target":"Create Target";Q({title:qe,message:"Are you sure you want to proceed?",confirmLabel:qe,cancelLabel:"Cancel",variant:"primary",action:async()=>{k(!0);try{A?(await te.put(`/targets/admin/${T}`,fe),q.success("Target updated successfully.")):(await te.post("/targets/admin/create",fe),q.success("Target created successfully.")),S(!1),$e()}catch(Ze){console.error(Ze);const pt=Ze.response?.data?.detail||Ze.message||"Operation failed.";q.error(pt)}finally{k(!1)}}})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&n.jsx(Bt,{message:"Loading targets..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[n.jsx(lr,{className:"mr-2 text-blue-600"})," Targets"]}),pe&&n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:de,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&n.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[n.jsxs("button",{onClick:()=>Se("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Ce==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(SI,{className:"inline mr-2"}),"Overview"]}),n.jsxs("button",{onClick:()=>Se("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Ce==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(ES,{className:"inline mr-2"}),"Leaderboard"]}),n.jsxs("button",{onClick:()=>Se("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Ce==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(Gs,{className:"inline mr-2"}),"History"]})]}),Ce==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(Mc,{title:"Total Targets",value:ye.totalCount,icon:n.jsx(lr,{size:22}),color:"blue"}),n.jsx(Mc,{title:"Target Amount",value:`${r}${ye.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(i,{size:22}),color:"green"}),n.jsx(Mc,{title:"Achieved Amount",value:`${r}${ye.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(sd,{size:22}),color:"purple"}),n.jsx(Mc,{title:"Achievement Rate",value:`${ye.achievement}%`,icon:n.jsx(lr,{size:22}),color:"orange"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"mb-4 text-center",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),n.jsx("div",{className:"h-[38px] w-full invisible"})]}),ht.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(h_,{width:"100%",height:"100%",children:n.jsxs(GIe,{data:ht,children:[n.jsx(pk,{strokeDasharray:"3 3",vertical:!1}),n.jsx(Nk,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(Ck,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,xe=>Math.ceil(xe/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(S_,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:xe=>`Sales: ${xe}`,formatter:(xe,fe,qe)=>{if(!qe||!qe.payload)return[xe,fe];const Ze=qe.payload,pt=Number(Ze.achievement)||0,Nt=Number(Ze.target)||0,St=Math.max(0,Nt-pt),Ht=Nt>0?(pt/Nt*100).toFixed(1):0;return fe==="Achieved"?[`${r}${pt.toLocaleString()} (${Ht}%)`,"Achieved"]:fe==="Remaining"?[`${r}${St.toLocaleString()}`,"Remaining"]:[xe,fe]}}),n.jsx(vk,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:xe,y:fe,width:qe,value:Ze,payload:pt})=>{if(!pt||pt.target===void 0)return null;const Nt=(Ze/pt.target*100).toFixed(0),St=fe-10<0?10:fe-10;return n.jsxs("text",{x:xe+qe/2,y:St,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[Nt,"%"]})}}),n.jsx(vk,{dataKey:xe=>Math.max(0,xe.target-xe.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(_ie,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[n.jsxs("select",{value:U,onChange:xe=>{je(xe.target.value),le(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"annual",children:"Annual"}),n.jsx("option",{value:"semiannual",children:"Every 6 Months"}),n.jsx("option",{value:"trimester",children:"Every 4 Months"}),n.jsx("option",{value:"quarterly",children:"Quarterly"})]}),U!=="annual"&&n.jsxs("select",{value:be,onChange:xe=>le(parseInt(xe.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[U==="semiannual"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Jun"}),n.jsx("option",{value:2,children:"Jul - Dec"})]}),U==="trimester"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Apr"}),n.jsx("option",{value:2,children:"May - Aug"}),n.jsx("option",{value:3,children:"Sep - Dec"})]}),U==="quarterly"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),n.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),n.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),n.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),it.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(h_,{width:"100%",height:"100%",children:n.jsxs(s$e,{children:[n.jsx(S_,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:xe,payload:fe})=>{if(xe&&fe&&fe.length>0){const qe=fe[0].payload;return n.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:qe.name}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[n.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",r,Number(qe.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),n.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",qe.percentage,"%"]})]})}return null}}),n.jsx(NX,{data:it,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:xe,percentage:fe,fill:qe})=>n.jsxs("text",{fill:qe,fontSize:12,fontWeight:600,children:[xe.split(" ")[0],": ",fe,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(SI,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),pe&&n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search targets...",value:p,onChange:xe=>x(xe.target.value),className:"w-full outline-none"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:n.jsxs("tr",{children:[Be&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ce.length>0&&ce.every(xe=>W.includes(xe.id)),onChange:oe})}),n.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),Be&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:W.length>0?n.jsx("button",{onClick:ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected targets`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:ce.length>0?ce.map(xe=>{const fe=Number(xe.target_amount)>0?(Number(xe.achieved_amount)/Number(xe.target_amount)*100).toFixed(1):0;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[Be&&n.jsx("td",{className:"py-3 px-4",onClick:qe=>qe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(xe.id),onChange:()=>ue(xe.id)})}),n.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>I(xe),children:xe.user?`${xe.user.first_name} ${xe.user.last_name}`:"Unknown"}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>I(xe),children:[r,Number(xe.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>I(xe),children:[r,Number(xe.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(xe),children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${fe>=100?"bg-green-500":fe>=75?"bg-blue-500":fe>=50?"bg-yellow-500":"bg-red-500"}`,children:[fe,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(xe),children:xe.start_date}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(xe),children:xe.end_date}),n.jsx("td",{})]},xe.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ae.length,pageSize:v,currentPage:b,onPrev:()=>N(xe=>Math.max(xe-1,1)),onNext:()=>N(xe=>Math.min(xe+1,Je)),onPageSizeChange:xe=>{j(xe),N(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),Ce==="leaderboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),n.jsx("select",{value:et,onChange:xe=>V(Number(xe.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((xe,fe)=>{const qe=new Date().getFullYear()-fe;return n.jsx("option",{value:qe,children:qe},qe)})}),n.jsxs("select",{value:ne,onChange:xe=>{se(xe.target.value),Ie(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"MONTHLY",children:"Monthly"}),n.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),n.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),n.jsx("option",{value:"ANNUAL",children:"Annual"})]}),ne==="QUARTERLY"&&n.jsxs("select",{value:Ee,onChange:xe=>Ie(Number(xe.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"Q1"}),n.jsx("option",{value:2,children:"Q2"}),n.jsx("option",{value:3,children:"Q3"}),n.jsx("option",{value:4,children:"Q4"})]}),ne==="SEMIANNUAL"&&n.jsxs("select",{value:Ee,onChange:xe=>Ie(Number(xe.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),n.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),ne==="MONTHLY"&&n.jsx("select",{value:Ee,onChange:xe=>Ie(Number(xe.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((xe,fe)=>n.jsx("option",{value:fe+1,children:xe},fe))}),n.jsx("button",{onClick:ve,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),ze&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Mc,{title:"Sales Reps",value:ze.total_sales_reps,icon:n.jsx(aa,{size:22}),color:"blue"}),n.jsx(Mc,{title:"Met Quota",value:ze.above_target_count,icon:n.jsx(sd,{size:22}),color:"green"}),n.jsx(Mc,{title:"Below Quota",value:ze.below_target_count,icon:n.jsx(kS,{size:22}),color:"orange"}),n.jsx(Mc,{title:"Team Achievement",value:`${ze.overall_achievement}%`,icon:n.jsx(lr,{size:22}),color:"purple"})]}),He?n.jsx(Bt,{message:"Loading leaderboard..."}):Oe?.entries?.length>0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[n.jsx(ES,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",Oe.period_type!=="ALL"&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",Oe.period_type," ",Oe.period_year,")"]})]})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),n.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:Oe.entries.map(xe=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${xe.rank===1?"bg-yellow-100 text-yellow-700":xe.rank===2?"bg-gray-100 text-gray-700":xe.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:xe.rank})}),n.jsx("td",{className:"py-3 px-4 font-medium",children:xe.user_name}),n.jsx("td",{className:"py-3 px-4 text-gray-500",children:xe.role}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(xe.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(xe.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${xe.achievement_percentage>=100?"bg-green-500":xe.achievement_percentage>=75?"bg-blue-500":xe.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[xe.achievement_percentage,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("button",{onClick:()=>{Fe(xe.user_id),Se("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},xe.user_id))})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(ES,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"No leaderboard data available for the selected period."})]}),ze?.needs_attention?.length>0&&n.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[n.jsx(kS,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:ze.needs_attention.map(xe=>n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[n.jsx("p",{className:"font-medium text-gray-800",children:xe.user_name}),n.jsx("p",{className:"text-sm text-gray-500",children:xe.role}),n.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[n.jsxs("span",{className:"text-red-600 font-semibold",children:[xe.achievement_percentage,"%"]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[r,Number(xe.remaining_amount).toLocaleString()," remaining"]})]})]},xe.user_id))})]})]}),Ce==="history"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),n.jsx("div",{className:"flex gap-4 flex-wrap",children:n.jsxs("select",{onChange:xe=>xe.target.value&&Fe(Number(xe.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:he?.user_id||"",children:[n.jsx("option",{value:"",children:"-- Select User --"}),c.map(xe=>n.jsxs("option",{value:xe.id,children:[xe.first_name," ",xe.last_name]},xe.id))]})})]}),_e?n.jsx(Bt,{message:"Loading history..."}):he?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:he.user_name}),he.current_period&&he.previous_period&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:he.current_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[he.current_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(he.current_period.achieved_amount).toLocaleString()," / ",r,Number(he.current_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:he.previous_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[he.previous_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(he.previous_period.achieved_amount).toLocaleString()," / ",r,Number(he.previous_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:`rounded-lg p-4 ${he.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[n.jsx("p",{className:"text-sm font-medium",style:{color:he.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),n.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${he.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[he.growth_percentage>=0?n.jsx(sd,{className:"mr-2"}):n.jsx(kS,{className:"mr-2"}),he.growth_percentage>=0?"+":"",he.growth_percentage?.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[he.growth_amount>=0?"+":"",r,Number(he.growth_amount||0).toLocaleString()]})]})]}),he.periods?.length>0&&n.jsx("div",{className:"h-64",children:n.jsx(h_,{width:"100%",height:"100%",children:n.jsxs(qIe,{data:[...he.periods].reverse(),children:[n.jsx(pk,{strokeDasharray:"3 3"}),n.jsx(Nk,{dataKey:"period_label",tick:{fontSize:12}}),n.jsx(Ck,{tick:{fontSize:12}}),n.jsx(S_,{formatter:(xe,fe)=>[`${r}${Number(xe).toLocaleString()}`,fe==="achieved_amount"?"Achieved":"Target"]}),n.jsx(bQ,{}),n.jsx(xk,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2}),n.jsx(xk,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2})]})})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),n.jsx("tbody",{children:he.periods.map((xe,fe)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:xe.period_label}),n.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[xe.start_date," - ",xe.end_date]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(xe.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(xe.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${xe.achievement_percentage>=100?"bg-green-500":xe.achievement_percentage>=75?"bg-blue-500":xe.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[xe.achievement_percentage,"%"]})})]},fe))})]})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(Gs,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),P&&n.jsx(o$e,{target:P,currencySymbol:r,onClose:()=>I(null),onEdit:()=>D(P),onDelete:()=>B(P),canEdit:pe,canDelete:Be}),w&&pe&&n.jsx(l$e,{formData:$,users:c,isEditing:A,isSubmitting:_,isSubmitted:Te,onChange:X,onClose:()=>S(!1),onSubmit:Pe,fiscalSettings:De}),H&&n.jsx(c$e,{...H,loading:G,onConfirm:async()=>{K(!0),await H.action(),K(!1),Q(null)},onCancel:()=>Q(null)})]})}function Mc({title:e,value:t,icon:a,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[n.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:a}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),n.jsx("p",{className:"text-2xl font-bold",children:t})]})]})}function o$e({target:e,onClose:t,onEdit:a,onDelete:s,canEdit:r,canDelete:i,currencySymbol:o}){const l=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:c=>c.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),n.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:n.jsx(Qt,{size:25})})]}),r&&n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),i&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"})]}),n.jsxs("div",{className:"p-4 lg:p-6",children:[n.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),n.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),n.jsxs("p",{className:"text-green-600 font-semibold",children:[o,Number(e.target_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),n.jsxs("p",{className:"text-blue-600 font-semibold",children:[o,Number(e.achieved_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),n.jsxs("p",{className:`font-semibold ${l>=100?"text-green-600":l>=75?"text-blue-600":l>=50?"text-yellow-600":"text-red-600"}`,children:[l,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),n.jsx("p",{children:e.start_date})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),n.jsx("p",{children:e.end_date})]})]})})]})]})})}function l$e({formData:e,users:t,isEditing:a,isSubmitting:s,onChange:r,onClose:i,onSubmit:o,fiscalSettings:l,isSubmitted:c}){const d=l?.fiscal_start_month||1,u=c&&(!e.target_amount||Number(e.target_amount)<=0),h=c&&(e.period_type==="CUSTOM"||!e.period_type),p=j=>{const w=j.getFullYear(),S=String(j.getMonth()+1).padStart(2,"0"),A=String(j.getDate()).padStart(2,"0");return`${w}-${S}-${A}`},x=(j,w,S)=>{let A,E;if(j==="MONTHLY")A=new Date(w,S-1,1),E=new Date(w,S,0);else if(j==="QUARTERLY"){const _=(S-1)*3,k=(d-1+_)%12;let T=w;d>1&&(k>=d-1?T=w-1:T=w),A=new Date(T,k,1);const O=(k+2)%12,$=k+2>=12?T+1:T;E=new Date($,O+1,0)}else if(j==="SEMIANNUAL"){const _=(S-1)*6,k=(d-1+_)%12;let T=w;d>1&&(k>=d-1?T=w-1:T=w),A=new Date(T,k,1);const O=(k+5)%12,$=k+5>=12?T+1:T;E=new Date($,O+1,0)}else if(j==="ANNUAL"){const _=d-1;let k=d>1?w-1:w;A=new Date(k,_,1);const T=(d-2+12)%12;E=new Date(k+1,T+1,0)}return{startDate:A,endDate:E}},b=j=>{const w=j.target.value;if(r({target:{name:"period_type",value:w}}),w!=="CUSTOM"){const S=e.period_year||new Date().getFullYear(),A=e.period_number||1,{startDate:E,endDate:_}=x(w,S,A);E&&_&&(r({target:{name:"start_date",value:p(E)}}),r({target:{name:"end_date",value:p(_)}}))}},N=j=>{const w=Number(j.target.value);r({target:{name:"period_number",value:w}});const S=e.period_year||new Date().getFullYear(),A=e.period_type;if(A!=="CUSTOM"){const{startDate:E,endDate:_}=x(A,S,w);E&&_&&(r({target:{name:"start_date",value:p(E)}}),r({target:{name:"end_date",value:p(_)}}))}},v=j=>{const w=Number(j.target.value);r({target:{name:"period_year",value:w}});const S=e.period_type,A=e.period_number||1;if(S!=="CUSTOM"){const{startDate:E,endDate:_}=x(S,w,A);E&&_&&(r({target:{name:"start_date",value:p(E)}}),r({target:{name:"end_date",value:p(_)}}))}};return f.useEffect(()=>{if(e.period_type!=="CUSTOM"&&!e.start_date){const j=e.period_year||new Date().getFullYear(),w=e.period_number||1,{startDate:S,endDate:A}=x(e.period_type,j,w);S&&A&&(r({target:{name:"start_date",value:p(S)}}),r({target:{name:"end_date",value:p(A)}}))}},[l]),n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:n.jsx(Qt,{size:24})}),n.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:a?"Edit Target":"Add New Target"}),n.jsxs("form",{onSubmit:o,noValidate:!0,className:"grid gap-4 text-base",children:[n.jsxs("div",{className:"flex flex-col gap-1 relative",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Assign User ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(i$e,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:j=>`${j.first_name} ${j.last_name}`,placeholder:"Search user...",required:!0,isSubmitted:c})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Period Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:"period_type",value:e.period_type,onChange:b,isSubmitted:c,className:`w-full border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                ${h?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`,children:r$e.map(j=>n.jsx("option",{value:j.value,children:j.label},j.value))})]}),e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),n.jsxs("select",{name:"period_number",value:e.period_number,onChange:N,required:!0,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((j,w)=>n.jsx("option",{value:w+1,children:j},w)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(j=>n.jsxs("option",{value:j,children:["Q",j," ",l?.quarters?.[`Q${j}`]?`(${l.quarters[`Q${j}`]})`:""]},j)),e.period_type==="SEMIANNUAL"&&[1,2].map(j=>n.jsxs("option",{value:j,children:["H",j," ",l?.halves?.[`H${j}`]?`(${l.halves[`H${j}`]})`:`(${j===1?"Jan-Jun":"Jul-Dec"})`]},j))]})]}),e.period_type!=="CUSTOM"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:d!==1?"Fiscal Year":"Year"}),n.jsx("select",{name:"period_year",value:e.period_year,onChange:v,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((j,w)=>{const S=new Date().getFullYear()+1-w;return n.jsx("option",{value:S,children:d!==1?`FY${S}`:S},S)})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Target Amount ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
        ${u?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Start Date ",e.period_type!=="CUSTOM"&&n.jsx("span",{className:"text-gray-400 text-xs",children:"(auto-calculated)"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":"Save Target"})]})]})]})})}function c$e({title:e,message:t,confirmLabel:a,cancelLabel:s,variant:r,loading:i,onConfirm:o,onCancel:l}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),n.jsx("button",{onClick:o,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":a})]})]})})}function d$e(){const{userRole:e}=Qs();return n.jsx(Wj,{currentUserRole:e,currentUserId:null})}const y7=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],F_={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},ab=e=>{const t=parseFloat(e.quantity)||0,a=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*a,i=r*(s/100),o=r-i;return{discount_amount:i,line_total:o}},Ic=(e,t="")=>{const a=parseFloat(e)||0;return`${t}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function gd({items:e=[],onChange:t,currencySymbol:a="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:o=0,onTotalsChange:l}){const[c,d]=f.useState(null),[u,h]=f.useState(null),[p,x]=f.useState(!1),[b,N]=f.useState({...F_});f.useEffect(()=>{if(l){const T=e.reduce((I,H)=>I+(parseFloat(H.line_total)||0),0);let O=0;i==="percentage"&&o?O=T*(parseFloat(o)/100):i==="fixed"&&o&&(O=parseFloat(o));const $=T-O,R=$*(parseFloat(r)/100),P=$+R;l({subtotal:T,discount_amount:O,tax_amount:R,total_amount:P})}},[e,r,i,o,l]);const v=f.useCallback(()=>{if(!b.name.trim()){q.error("Item name is required");return}if(parseFloat(b.unit_price)<=0){q.error("Unit price must be greater than 0");return}if(parseFloat(b.quantity)<=0){q.error("Quantity must be greater than 0");return}const T=ab(b),O={...b,...T,sort_order:e.length};t([...e,O]),N({...F_}),x(!1),q.success("Item added")},[b,e,t]),j=T=>{if(!u){q.error("No item being edited");return}if(!u.name.trim()){q.error("Item name is required");return}if(parseFloat(u.unit_price)<=0){q.error("Unit price must be greater than 0");return}if(parseFloat(u.quantity)<=0){q.error("Quantity must be greater than 0");return}const O=ab(u),$={...u,...O},R=e.map((P,I)=>I===T?$:P);t(R),d(null),h(null),q.success("Item updated")},w=f.useCallback(T=>{const O=e.filter(($,R)=>R!==T);O.forEach(($,R)=>{$.sort_order=R}),t(O),q.success("Item removed")},[e,t]),S=f.useCallback((T,O)=>{const $=O==="up"?T-1:T+1;if($<0||$>=e.length)return;const R=[...e];[R[T],R[$]]=[R[$],R[T]],R.forEach((P,I)=>{P.sort_order=I}),t(R)},[e,t]),A=T=>{d(T),h({...e[T]})},E=()=>{d(null),h(null)},_=e.reduce((T,O)=>T+(parseFloat(O.line_total)||0),0),k=(T,O)=>c===O&&!s?n.jsxs("tr",{className:"bg-blue-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("select",{value:u.item_type,onChange:R=>h(P=>({...P,item_type:R.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:y7.map(R=>n.jsx("option",{value:R.value,children:R.label},R.value))})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("input",{type:"text",value:u.name,onChange:R=>h(P=>({...P,name:R.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),n.jsx("input",{type:"text",value:u.variant||"",onChange:R=>h(P=>({...P,variant:R.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"text",value:u.sku||"",onChange:R=>h(P=>({...P,sku:R.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"number",value:u.quantity,onChange:R=>h(P=>({...P,quantity:R.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:u.unit||"",onChange:R=>h(P=>({...P,unit:R.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"number",value:u.unit_price,onChange:R=>h(P=>({...P,unit_price:R.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"number",value:u.discount_percent||0,onChange:R=>h(P=>({...P,discount_percent:R.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),n.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Ic(ab(u).line_total,a)}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>j(O),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:n.jsx(tL,{size:16})}),n.jsx("button",{type:"button",onClick:E,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:n.jsx(Qt,{size:16})})]})})]},T.id||`edit-${O}`):n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${T.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:T.item_type})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("div",{className:"font-medium text-gray-900",children:T.name}),T.variant&&n.jsx("div",{className:"text-xs text-gray-500",children:T.variant}),T.description&&n.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:T.description})]}),n.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:T.sku||"-"}),n.jsxs("td",{className:"px-3 py-2 text-center",children:[n.jsx("span",{className:"font-medium",children:parseFloat(T.quantity).toLocaleString()}),T.unit&&n.jsx("span",{className:"text-gray-500 text-sm ml-1",children:T.unit})]}),n.jsx("td",{className:"px-3 py-2 text-right",children:Ic(T.unit_price,a)}),n.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(T.discount_percent)>0?n.jsxs("span",{className:"text-red-600",children:["-",parseFloat(T.discount_percent).toFixed(1),"%"]}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Ic(T.line_total,a)}),!s&&n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>S(O,"up"),disabled:O===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:n.jsx(Eie,{size:14})}),n.jsx("button",{type:"button",onClick:()=>S(O,"down"),disabled:O===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:n.jsx(Tt,{size:14})}),n.jsx("button",{type:"button",onClick:()=>A(O),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:n.jsx(ma,{size:14})}),n.jsx("button",{type:"button",onClick:()=>w(O),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:n.jsx(Gt,{size:14})})]})})]},T.id||`row-${O}`);return n.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-300",children:[n.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&n.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&n.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[n.jsx(yn,{size:14}),"Add Item"]})]}),p&&!s&&n.jsxs("div",{className:"p-4 bg-blue-50 border border-gray-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),n.jsx("select",{value:b.item_type,onChange:T=>N({...b,item_type:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",children:y7.map(T=>n.jsx("option",{value:T.value,children:T.label},T.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:b.name,onChange:T=>N({...b,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),n.jsx("input",{type:"text",value:b.sku,onChange:T=>N({...b,sku:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),n.jsx("input",{type:"text",value:b.variant,onChange:T=>N({...b,variant:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:b.quantity,onChange:T=>N({...b,quantity:T.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:b.unit,onChange:T=>N({...b,unit:T.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:a}),n.jsx("input",{type:"number",value:b.unit_price,onChange:T=>N({...b,unit_price:T.target.value}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),n.jsx("input",{type:"number",value:b.discount_percent,onChange:T=>N({...b,discount_percent:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),n.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:Ic(ab(b).line_total,a)})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),n.jsx("textarea",{value:b.description,onChange:T=>N({...b,description:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[n.jsx("button",{onClick:()=>{x(!1),N({...F_})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),n.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&n.jsx("th",{className:"px-3 py-2 w-28"})]})}),n.jsx("tbody",{children:e.map((T,O)=>k(T,O))})]})}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("p",{children:"No items added yet."}),!s&&n.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&n.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"w-64 space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium",children:Ic(_,a)})]}),parseFloat(o)>0&&n.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[n.jsxs("span",{children:["Discount (",i==="percentage"?`${o}%`:"Fixed","):"]}),n.jsxs("span",{children:["-",Ic(i==="percentage"?_*(parseFloat(o)/100):parseFloat(o),a)]})]}),parseFloat(r)>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),n.jsx("span",{children:Ic((_-(i==="percentage"?_*(parseFloat(o)/100):parseFloat(o)||0))*(parseFloat(r)/100),a)})]}),n.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Ic((()=>{let T=0;i==="percentage"&&o?T=_*(parseFloat(o)/100):i==="fixed"&&o&&(T=parseFloat(o));const O=_-T,$=O*(parseFloat(r)/100);return O+$})(),a)})]})]})})})]})}const U_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],B_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Oi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},H_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",u$e=e=>{switch(Oi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},m$e=e=>{switch(Oi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},sb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",bg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",f$e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},q_=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},b7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},W_=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},yw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},h$e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=yw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=yw(t);return a||null},g$e=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},p$e=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function x$e(){const e=wt(),t=Zt(),{user:a}=en(),s=a?.company?.currency||"";f.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=f.useState([]),[o,l]=f.useState(!1),[c,d]=f.useState([]),[u,h]=f.useState([]),[p,x]=f.useState([]),[b,N]=f.useState([]),[v,j]=f.useState(null),[w,S]=f.useState(null),[A,E]=f.useState(!1),[_,k]=f.useState(!1),[T,O]=f.useState(!1),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState(!1),[G,K]=f.useState(null),[W,J]=f.useState(B_),[Te,ee]=f.useState(""),[U,je]=f.useState("Filter by Status"),[be,le]=f.useState(null),Ce=f.useCallback(async()=>{if(w)try{Q(!0);const z=(await te.get("/company/invoice-info"))?.data;e(`/admin/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:z}})}catch(F){const z=F?.response?.data?.detail||F?.message||"Failed to open print page.";q.error(z)}finally{Q(!1)}},[w,s]),[Se,Oe]=f.useState(1),[ge,He]=f.useState(10),[Ne,he]=f.useState("Overview"),[Z,_e]=f.useState("Draft"),[ke,ze]=f.useState([]),[tt,De]=f.useState(null),{comments:at,addComment:et,refresh:V}=Ta({relatedType:"quote",relatedId:w?.id});f.useEffect(()=>{w?.id&&V()},[w?.id,V]),f.useEffect(()=>{const z=t.state?.quoteID;if(z){De(z),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(tt&&r.length>0&&!o){const F=r.find(z=>z.id===tt);F?S(F):q.error("Quote not found."),De(null)}},[tt,p,o]),f.useEffect(()=>{let F=!0;return(async()=>{const me=h$e();if(me&&F){j(me);return}try{const Le=await te.get("/auth/me"),Re=yw(Le?.data);if(Re&&F){j(Re);return}}catch{}try{const Le=await te.get("/users/me"),Re=yw(Le?.data);if(Re&&F){j(Re);return}}catch{}F&&j(null)})(),()=>{F=!1}},[]);const ne=f.useCallback(F=>F&&u.find(me=>String(me.id)===String(F))?.name||"",[u]),se=f.useCallback(F=>{if(!F)return"";const z=p.find(me=>String(me.id)===String(F));return z?`${z.first_name} ${z.last_name}`.trim():""},[p]),Ee=f.useCallback(F=>{if(!F)return"--";const z=c.find(me=>String(me.id)===String(F));return z?.deal_name||z?.name||`Deal #${b7(F)}`},[c]),Ie=f.useCallback(F=>{const z=c.find(Re=>String(Re.id)===String(F)),me=g$e(z);let Le=p$e(z);if(!Le&&me){const Re=p.filter(Qe=>String(Qe.account_id||"")===String(me));if(Re.length>0){const Qe=[...Re].sort((Ke,At)=>{const Ct=`${Ke.first_name||""} ${Ke.last_name||""}`.trim().toLowerCase(),Xt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Xt)});Le=String(Qe[0].id)}}if(me&&Le){const Re=p.find(Qe=>String(Qe.id)===String(Le));Re?.account_id&&String(Re.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),pe=f.useCallback(F=>{if(!F)return"--";if(F.deal?.deal_name)return F.deal.deal_name;if(F.deal?.name)return F.deal.name;const z=F.deal_id||F.deal?.id;return z?Ee(z):"--"},[Ee]),Be=f.useCallback(F=>{if(!F)return"--";if(F.account?.name)return F.account.name;let z=F.account_id||F.account?.id;if(!z){const me=F.deal_id||F.deal?.id;me&&(z=Ie(me).accountId)}return z?ne(z)||`Account #${z}`:"--"},[Ie,ne]),$e=f.useCallback(F=>{if(!F)return"--";if(F.contact?.first_name||F.contact?.last_name)return`${F.contact?.first_name||""} ${F.contact?.last_name||""}`.trim()||"--";let z=F.contact_id||F.contact?.id;if(!z){const Le=F.deal_id||F.deal?.id;Le&&(z=Ie(Le).contactId)}return(z?se(z):"")||(z?`Contact #${z}`:"--")},[Ie,se]),Ve=f.useCallback(async(F=null)=>{l(!0);try{const z=await te.get("/quotes/admin/fetch-all"),Le=[...Array.isArray(z.data)?z.data:[]].sort((Re,Qe)=>{const Ke=Re?.created_at||Re?.updated_at||0,At=Qe?.created_at||Qe?.updated_at||0;return new Date(At)-new Date(Ke)});if(i(Le),F){const Re=Le.find(Qe=>Qe.id===F);S(Re||null)}}catch(z){console.error(z),i([]),z.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ut=f.useCallback(async()=>{try{const F=await te.get("/deals/admin/fetch-all");d(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),ve=f.useCallback(async()=>{try{const F=await te.get("/accounts/admin/fetch-all");h(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),ae=f.useCallback(async()=>{try{const F=await te.get("/contacts/admin/fetch-all");x(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Fe=f.useCallback(async()=>{try{const F=await te.get("/users/all");N(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);f.useEffect(()=>{Ve(),ut(),ve(),ae(),Fe()},[Ve,ut,ve,ae,Fe]);const ye=f.useMemo(()=>{const F=Te.trim().toLowerCase(),z=U.trim();return r.filter(me=>{const Le=pe(me),Re=Be(me),Qe=$e(me),Ke=q_(me.presented_date,me.validity_days),At=[me.quote_id,Le,Re,Qe,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?bg(me.presented_date):"",Ke?bg(Ke):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,sb(me.created_at),sb(me.updated_at)],Ct=F===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(F)),Xt=z==="Filter by Status"||Oi(me.status)===z;return Ct&&Xt})},[r,Te,U,pe,Be,$e]),We=Math.max(1,Math.ceil(ye.length/ge)||1);f.useEffect(()=>Oe(1),[Te,U]),f.useEffect(()=>{Oe(F=>{const z=Math.max(1,Math.ceil(ye.length/ge)||1);return F>z?z:F})},[ye.length,ge]);const it=f.useMemo(()=>{const F=(Se-1)*ge;return ye.slice(F,F+ge)},[ye,Se,ge]),ht=()=>Oe(F=>Math.max(F-1,1)),Ae=()=>Oe(F=>Math.min(F+1,We)),Je=F=>{S(F),he("Overview"),_e(Oi(F?.status)||"Draft")},ce=()=>{S(null),he("Overview")},X=F=>{F.target.id==="quoteModalBackdrop"&&!P&&ce()},de=f.useCallback(()=>{E(!1),k(!1),K(null),J(B_),O(!1)},[]),D=F=>{F.target.id==="modalBackdrop"&&!T&&!P&&de()},B=F=>{const{name:z,value:me}=F.target;if(z==="deal_id"){const{accountId:Le,contactId:Re}=Ie(me);J(Qe=>({...Qe,deal_id:me,account_id:Le,contact_id:Re}));return}J(Le=>({...Le,[z]:me}))},oe=()=>{const F=a?.company?.tax_rate??0;J({...B_,tax_rate:F}),k(!1),K(null),E(!0)},ue=F=>{if(!F)return;S(null);const z=F.deal?.id?String(F.deal.id):F.deal_id?String(F.deal_id):"",me=z?Ie(z):{accountId:"",contactId:""},Le=F.account?.id?String(F.account.id):F.account_id?String(F.account_id):me.accountId,Re=F.contact?.id?String(F.contact.id):F.contact_id?String(F.contact_id):me.contactId,Qe=F.assigned_user?.id?String(F.assigned_user.id):F.assigned_to?String(F.assigned_to):"";J({deal_id:z,account_id:Le||"",contact_id:Re||"",total_amount:F.total_amount?.toString()||"",presented_date:f$e(F.presented_date),validity_days:F.validity_days!==null&&F.validity_days!==void 0?String(F.validity_days):"",status:Oi(F.status)||"Draft",assigned_to:Qe,notes:F.notes||"",subtotal:parseFloat(F.subtotal)||0,tax_rate:parseFloat(F.tax_rate)||0,tax_amount:parseFloat(F.tax_amount)||0,discount_type:F.discount_type||"",discount_value:parseFloat(F.discount_value)||0,discount_amount:parseFloat(F.discount_amount)||0,currency:F.currency||"PHP",items:Array.isArray(F.items)?F.items.map(Ke=>({id:Ke.id,item_type:Ke.item_type||"Product",name:Ke.name||"",description:Ke.description||"",sku:Ke.sku||"",variant:Ke.variant||"",unit:Ke.unit||"pcs",quantity:parseFloat(Ke.quantity)||1,unit_price:parseFloat(Ke.unit_price)||0,discount_percent:parseFloat(Ke.discount_percent)||0,discount_amount:parseFloat(Ke.discount_amount)||0,line_total:parseFloat(Ke.line_total)||0,sort_order:Ke.sort_order||0})):[]}),k(!0),K(F.id),E(!0)},ie=F=>{if(F.target.checked){const z=it.map(me=>me.id);ze(z)}else ze([])},Pe=F=>{ze(z=>z.includes(F)?z.filter(me=>me!==F):[...z,F])},xe=F=>{if(!F)return;const z=F.quote_id||"this quote";R({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:z}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:z}})},fe=async()=>{ke.length!==0&&R({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ke.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${ke.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:ke}})},[qe,Ze]=f.useState(!1),pt=F=>{if(F.preventDefault(),Ze(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){q.error("Deal is required.");return}if(!W.assigned_to){q.error("Assigned To is required.");return}const me=Ie(W.deal_id),Le=W.items.map((Ct,Xt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Xt})),Re={deal_id:Number(W.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:Le},Qe=_&&G?"update":"create",Ke=Ee(W.deal_id),At=Qe==="create"?{...Re,created_by_id:Number(v)}:Re;R({title:Qe==="create"?"Confirm New Quote":"Confirm Update",message:Qe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"?"]}),confirmLabel:Qe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:At,targetId:G||null,name:Ke}})},Nt=async()=>{if(!$?.action){R(null);return}const{action:F}=$,{type:z,payload:me,targetId:Le,name:Re}=F;I(!0);try{if(z==="create")O(!0),await te.post("/quotes/admin",me),q.success("Quote created successfully."),de(),await Ve();else if(z==="update"){if(!Le)throw new Error("Missing quote identifier for update.");O(!0),await te.put(`/quotes/admin/${Le}`,me),q.success("Quote updated successfully."),de(),await Ve(),w?.id===Le&&S(null)}else if(z==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Qe=w?.id;le(Le),await te.delete(`/quotes/admin/${Le}`),q.success(`Quote "${Re}" deleted successfully.`),await Ve(Qe&&Qe!==Le?Qe:null),Qe===Le&&S(null)}else z==="bulk-delete"&&(await te.post("/quotes/admin/bulk-delete",{quote_ids:ke}),q.success(`Successfully deleted ${ke.length} quotes`),ze([]),await Ve())}catch(Qe){console.error(Qe);const Ke=z==="create"?"Failed to create quote. Please review the details and try again.":z==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Ke),(z==="create"||z==="update")&&O(!1),z==="delete"&&le(null)}finally{(z==="create"||z==="update")&&O(!1),z==="delete"&&le(null),I(!1),R(null)}},St=()=>{P||R(null)},Ht=f.useCallback((F,z)=>{const me=F?.deal_id??F?.deal?.id??"",Le=me?Number(me):null,Re=Le?Ie(String(Le)):{accountId:"",contactId:""},Qe=F?.account_id??F?.account?.id??Re.accountId??null,Ke=F?.contact_id??F?.contact?.id??Re.contactId??null,At=F?.total_amount??0,Ct=F?.assigned_to??F?.assigned_user?.id??null;return{deal_id:Le,account_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,contact_id:Ke!=null&&String(Ke).trim()!==""?Number(Ke):null,total_amount:Number(At),presented_date:F?.presented_date||null,validity_days:F?.validity_days===""||F?.validity_days===void 0||F?.validity_days===null?null:Number(F.validity_days),status:z,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:F?.notes?.trim()||null}},[Ie]),on=f.useCallback(async()=>{if(!w?.id)return;const F=Oi(Z),z=[F,F.toLowerCase()],me=async Le=>te.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const Re of z)try{await me(Re),Le=!0;break}catch(Qe){if(Qe?.response?.status===422)continue;throw Qe}if(!Le){const Re=Ht(w,F);if(!Re.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Re.total_amount||Re.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await te.put(`/quotes/admin/${w.id}`,Re)}q.success(`Quote status updated to ${F}`),S(null),he("Overview"),await Ve()}catch(Le){console.error(Le);const Re=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(Re)}},[w,Z,Ve,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...U_.map(F=>({label:F.label,value:F.value}))],re=$?.action?.type==="delete"?$.action.targetId:null,lt=w&&(be===w.id||re===w.id),zt=w&&be===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:X,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:F=>F.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:pe(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${m$e(w.status)}`,children:H_(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Ce,disabled:H||T||P,children:[n.jsx(hn,{className:"mr-2"}),H?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||$?.action?.type==="update"&&$.action.targetId===w.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>xe(w),disabled:!!lt,children:zt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(F=>n.jsx("button",{onClick:()=>he(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ne===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:W_(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:pe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Be(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:$e(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:bg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:bg(q_(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:H_(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:sb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:sb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(gd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ne==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Aa,{comments:at,onAddComment:et})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${W_(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Z||Oi(w.status)||"Draft",onChange:F=>_e(F.target.value),children:U_.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))}),n.jsx("button",{onClick:on,disabled:Oi(Z)===Oi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oi(Z)===Oi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Kt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{oe(),Ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Te,onChange:F=>ee(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:F=>je(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:it.length>0&&ke.length===it.length,onChange:ie,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ke.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ke.length} selected items`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):ye.length>0?it.map(F=>{const z=q_(F.presented_date,F.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Je(F),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:ke.includes(F.id),onChange:()=>Pe(F.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:W_(F.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:pe(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Be(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:$e(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:F.total_amount?`${s}${Number(F.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${u$e(F.status)}`,children:H_(F.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:F.assigned_user?`${F.assigned_user.first_name} ${F.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:bg(z)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},F.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ye.length,pageSize:ge,currentPage:Se,onPrev:ht,onNext:Ae,onPageSizeChange:F=>{He(F),Oe(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=A?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(N7,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:F=>{const{accountId:z,contactId:me}=Ie(F);J(Le=>({...Le,deal_id:F,account_id:z,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:F=>`${b7(F?.deal_id??"")} ${F?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:qe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(w7,{label:"Account",value:ne(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(w7,{label:"Contact",value:se(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(gd,{items:W.items,onChange:F=>J(z=>({...z,items:F})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:F=>{J(z=>({...z,subtotal:F.subtotal,discount_amount:F.discount_amount,tax_amount:F.tax_amount,total_amount:F.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:F=>J(z=>({...z,discount_type:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:F=>J(z=>({...z,discount_value:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate??"",onChange:F=>J(z=>({...z,tax_rate:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(v7,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:B,disabled:T}),n.jsx(v7,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:B,placeholder:"30",disabled:T}),n.jsx(N7,{label:"Assigned To",value:W.assigned_to||"",onChange:F=>J(z=>({...z,assigned_to:F})),items:Array.isArray(b)?b:[],getLabel:F=>{const z=`${F?.first_name??""} ${F?.last_name??""}`.trim();if(!z)return F?.email||"";const me=F?.role?.toUpperCase()==="CEO"?"Admin":F?.role;return me?`${z} (${me})`:z},placeholder:"Search assignee...",required:!0,isSubmitted:qe,disabled:T}),n.jsx(y$e,{label:"Status",name:"status",value:W.status,onChange:B,options:U_,required:!0,disabled:T}),n.jsx(v$e,{label:"Notes",name:"notes",value:W.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=$?n.jsx(w$e,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Kt,Me,vt]})}function v7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function w7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function y$e({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(h=>String(h.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>n.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function N7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(b$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function b$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function v$e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function w$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const Gj=[{value:"CEO",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],vg={firstName:"",lastName:"",email:"",password:"",role:""},N$e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},No=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",j$e=e=>{const t=No(e),a=Gj.find(s=>No(s.value)===t);return a?a.value:e||""},Tk=e=>{const t=No(e),a=Gj.find(s=>No(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},j7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},G_=(e,{size:t="sm"}={})=>{const a=No(e),s=N$e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Tk(e)})},C$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},C7=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function S$e(){const{user:e,loading:t}=en(),[a,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,h]=f.useState(null),[p,x]=f.useState(!1),[b,N]=f.useState(!1),[v,j]=f.useState(null),[w,S]=f.useState(vg),[A,E]=f.useState(!1),[_,k]=f.useState(null),[T,O]=f.useState(!1),[$,R]=f.useState(1),[P,I]=f.useState(10),[H,Q]=f.useState("Overview"),[G,K]=f.useState(""),[W,J]=f.useState(!1),[Te,ee]=f.useState([]),U=No(e?.role),je=["ADMIN","CEO"].includes(U),be=!t&&je,le=f.useMemo(()=>{const ve=Gj.filter(ae=>No(ae.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ve]},[]),Ce=f.useCallback(ve=>{ve&&(s(ae=>ae.map(Fe=>Fe.id===ve?{...Fe,highlight:!0}:Fe)),setTimeout(()=>{s(ae=>ae.map(Fe=>Fe.id===ve?{...Fe,highlight:!1}:Fe))},2e3))},[]),Se=f.useCallback(async()=>{i(!0);try{const ve=await te.get("/users/all"),ae=Array.isArray(ve.data)?ve.data:[],Fe=C7(ae);s(Fe),h(ye=>ye&&(Fe.find(it=>it.id===ye.id)||null)),console.log(ve.data)}catch(ve){console.error("Error fetching users:",ve);const ae=ve.response?.data?.detail||"Failed to load users. Please try again later.";q.error(ae)}finally{i(!1)}},[]);f.useEffect(()=>{!t&&!je&&e&&q.error("You are not authorized to access User Management.")},[je,t,e]),f.useEffect(()=>{t||!je||Se()},[t,je,Se]),f.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Oe=f.useMemo(()=>{const ve=o.trim().toLowerCase(),ae=No(c);return C7(a.filter(Fe=>{if(!Fe)return!1;const ye=ve===""||[Fe.first_name,Fe.last_name,`${Fe.first_name||""} ${Fe.last_name||""}`,Fe.email,Tk(Fe.role)].filter(Boolean).some(it=>it.toString().toLowerCase().includes(ve)),We=ae===""||ae==="CEO"&&["CEO","ADMIN"].includes(No(Fe.role))||No(Fe.role)===ae;return ye&&We}))},[a,o,c]),ge=Math.max(1,Math.ceil(Oe.length/P)||1);f.useEffect(()=>{R(1)},[o,c,P]),f.useEffect(()=>{R(ve=>{const ae=Math.max(1,Math.ceil(Oe.length/P)||1);return ve>ae?ae:ve})},[Oe.length,P]);const He=f.useMemo(()=>{const ve=($-1)*P;return Oe.slice(ve,ve+P)},[Oe,$,P]);Oe.length===0||($-1)*P+1,Math.min($*P,Oe.length);const Ne=()=>R(ve=>Math.max(ve-1,1)),he=()=>R(ve=>Math.min(ve+1,ge)),Z=()=>{S(vg),N(!1),j(null),x(!0)},_e=ve=>{h(ve),Q("Overview"),K(ve?.is_active?"Active":"Inactive")},ke=ve=>{ve.target.id==="userModalBackdrop"&&!T&&ze()},ze=()=>{h(null)},tt=(ve,ae)=>{S(Fe=>({...Fe,[ve]:ae}))},De=()=>{const ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let ae="";for(let Fe=0;Fe<10;Fe+=1)ae+=ve.charAt(Math.floor(Math.random()*ve.length));tt("password",ae)},at=()=>{A||T||(x(!1),S(vg),j(null),N(!1))},et=ve=>{S({firstName:ve.first_name||"",lastName:ve.last_name||"",email:ve.email||"",password:"",role:j$e(ve.role)}),N(!0),j(ve.id),x(!0),h(null)},V=ve=>{k({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ve.first_name," ",ve.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ve.id,name:`${ve.first_name||""} ${ve.last_name||""}`.trim()||ve.email||"user"}})},ne=ve=>{ve.preventDefault();const ae=w.firstName.trim(),Fe=w.lastName.trim(),ye=w.email.trim(),We=w.password.trim(),it=w.role,ht=!(b&&v);if(!ae||!ye||!it){q.warn("Please fill in all required fields.");return}if(ht&&!We){q.warn("Please fill in all required fields.");return}if(We&&We.length<8){q.warn("Password should be at least 8 characters long.");return}const Ae={first_name:ae,last_name:Fe,email:ye,role:it};(ht||We)&&(Ae.password=We);const Je=`${ae} ${Fe}`.trim(),ce=ht?"create":"update";k({title:ce==="create"?"Confirm New User":"Confirm User Update",message:ce==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Je})," with role"," ",n.jsx("span",{className:"font-semibold",children:Tk(it)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Je||ye}),"?"]}),confirmLabel:ce==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:ce,payload:Ae,targetId:v,name:Je||ye}})},se=async()=>{Te.length!==0&&k({title:"Delete Users",message:n.jsxs("span",{children:["Are you sure you want to deactivate"," ",n.jsx("span",{className:"font-semibold",children:Te.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${Te.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:Te}})},Ee=ve=>{if(ve.target.checked){const ae=He.map(Fe=>Fe.id);ee(ae)}else ee([])},Ie=ve=>{ee(ae=>ae.includes(ve)?ae.filter(Fe=>Fe!==ve):[...ae,ve])},pe=async()=>{if(!_?.action){k(null);return}const{action:ve}=_,{type:ae,payload:Fe,targetId:ye,name:We}=ve;O(!0),(ae==="create"||ae==="update")&&E(!0);try{if(ae==="create"){const ht=(await te.post("/users/createuser",Fe)).data;await Se(),Ce(ht.id),q.success(`User "${We}" created successfully.`),x(!1),S(vg),j(null),N(!1)}else if(ae==="update"){if(!ye)throw new Error("Missing user identifier for update.");const ht=(await te.put(`/users/updateuser/${ye}`,Fe)).data;await Se(),h(null),Ce(ht.id),q.success(`User "${We}" updated successfully.`),x(!1),S(vg),j(null),N(!1)}else if(ae==="delete"){if(!ye)throw new Error("Missing user identifier for deletion.");await te.delete(`/users/deleteuser/${ye}`),s(it=>it.map(ht=>ht.id===ye?{...ht,is_active:!1}:ht)),u&&u.id===ye&&(h(null),K("")),q.success(`User "${We}" deactivated successfully.`)}else ae==="bulk-delete"&&(await te.delete("/users/admin/bulk-delete",{data:{user_ids:ve.user_ids}}),s(it=>it.map(ht=>ve.user_ids.includes(ht.id)?{...ht,is_active:!1}:ht)),u&&ve.user_ids.includes(u.id)&&(h(null),K("")),q.success(`Successfully deactivated ${ve.user_ids.length} users`),ee([]))}catch(it){console.error("User management error:",it);const ht=ae==="create"?"Failed to create user. Please review the details and try again.":ae==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Ae=it.response?.data?.detail||ht;q.error(Ae)}finally{(ae==="create"||ae==="update")&&E(!1),O(!1),k(null)}},Be=()=>{T||k(null)},$e=async()=>{if(!u||!G)return;const ve=u.is_active?"Active":"Inactive";if(G===ve)return;const ae=G==="Active";J(!0);try{const ye=(await te.put(`/users/updateuser/${u.id}`,{is_active:ae})).data;s(We=>We.map(it=>it.id===ye.id?ye:it)),h(null),K(""),q.success(`User status updated to ${G}`)}catch(Fe){console.error("Failed to update user status:",Fe);const ye=Fe.response?.data?.detail||"Failed to update user status. Please try again.";q.error(ye)}finally{J(!1)}},Ve=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!be)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ww,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Z,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Qn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ve=>l(ve.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ve=>d(ve.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:le.map(ve=>n.jsx("option",{value:ve.value,children:ve.label},ve.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:He.length>0&&He.every(ve=>Te.includes(ve.id)),onChange:Ee})}),n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Te.length>0?n.jsx("button",{onClick:se,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${Te.length} selected users`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Oe.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):He.map(ve=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ve.highlight?"bg-green-50":""} ${ve.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4",onClick:ae=>ae.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Te.includes(ve.id),onChange:()=>Ie(ve.id)})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>_e(ve),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ve.first_name," ",ve.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>_e(ve),children:ve.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>_e(ve),children:G_(ve.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>_e(ve),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ve.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ve.is_active?"Active":"Inactive"})})]},ve.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:Oe.length,pageSize:P,currentPage:$,onPrev:Ne,onNext:he,onPageSizeChange:ve=>{I(ve),R(1)},label:"users"})]}),ut=u?n.jsx("div",{id:"userModalBackdrop",onClick:ke,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:ze,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:C$e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),G_(u.role,{size:"md"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>et(u),disabled:T,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>V(u),disabled:T,children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ve=>n.jsx("button",{onClick:()=>Q(ve),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${H===ve?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ve},ve))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:H==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:G_(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,ve=>ve.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:j7(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?j7(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const ve=encodeURIComponent(u.email),ae=encodeURIComponent(""),Fe=encodeURIComponent(""),ye=`https://mail.google.com/mail/?view=cm&fs=1&to=${ve}&su=${ae}&body=${Fe}`;window.open(ye,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:G||(u.is_active?"Active":"Inactive"),onChange:ve=>K(ve.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:$e,disabled:W||G===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||G===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Ve,ut,n.jsx(_$e,{open:p,isEditing:b,isSubmitting:A,confirmProcessing:T,formData:w,onClose:at,onSubmit:ne,onChange:tt,onGeneratePassword:De}),n.jsx(A$e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:pe,onCancel:Be})]})}function _$e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(rb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(rb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(rb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(rb,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...Gj],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function rb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function A$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const T$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function E$e(){const{user:e,loading:t,fetchUser:a}=en(),[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[d,u]=f.useState(!1),[h,p]=f.useState(!1),[x,b]=f.useState(null),[N,v]=f.useState(null),j=f.useRef(null),[w,S]=f.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[A,E]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""});f.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(e.profile_picture||null))},[e]),f.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const _=(R,P)=>{S(I=>({...I,[R]:P}))},k=(R,P)=>{E(I=>({...I,[R]:P}))},T=R=>{const P=R.target.files?.[0];if(!P)return;if(!P.type.startsWith("image/")){q.error("Please select an image file");return}if(P.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const I=new FileReader;I.onloadend=()=>{b(I.result),v(I.result)},I.readAsDataURL(P)},O=async R=>{if(R.preventDefault(),!w.firstName.trim()||!w.lastName.trim()){q.warn("Please fill in all required fields.");return}r(!0);try{const P={first_name:w.firstName.trim(),last_name:w.lastName.trim(),phone_number:w.phoneNumber.trim()||null};x!==null&&(P.profile_picture=x),await te.put("/users/me",P),await a(),o(!1),b(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(P){console.error("Error updating account:",P);const I=P.response?.data?.detail||"Failed to update account information. Please try again.";q.error(I)}finally{r(!1)}},$=async R=>{if(R.preventDefault(),!A.newPassword||!A.confirmPassword){q.warn("Please fill in all password fields.");return}if(A.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(A.newPassword!==A.confirmPassword){q.warn("New password and confirm password do not match.");return}p(!0);try{const P={password:A.newPassword};await te.put("/users/me",P),await a(),E({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),q.success("Password changed successfully!")}catch(P){console.error("Error changing password:",P);const I=P.response?.data?.detail||"Failed to change password. Please try again.";q.error(I)}finally{p(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Bt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(nn,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&n.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ma,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[N?n.jsx("div",{className:"relative",children:n.jsx("img",{src:N,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:T$e(e.first_name,e.last_name)}),i&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:j,accept:"image/*",onChange:T,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(JH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?w.firstName:e.first_name," ",i?w.lastName:e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role.toUpperCase()==="CEO"&&"Admin"})]})]}),i?n.jsxs("form",{onSubmit:O,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.firstName,onChange:R=>_("firstName",R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.lastName,onChange:R=>_("lastName",R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:w.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:w.phoneNumber,onChange:R=>_("phoneNumber",R.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{o(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),b(null),v(e.profile_picture||null),j.current&&(j.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[n.jsx(aL,{}),s?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(So,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:$,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:l?void 0:{WebkitTextSecurity:"disc"},value:A.newPassword,onChange:R=>k("newPassword",R.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>c(R=>!R),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?n.jsx(_u,{className:"size-5"}):n.jsx(Au,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:d?void 0:{WebkitTextSecurity:"disc"},value:A.confirmPassword,onChange:R=>k("confirmPassword",R.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>u(R=>!R),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":d?"Hide password":"Show password",children:d?n.jsx(_u,{className:"size-5"}):n.jsx(Au,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:h,children:[n.jsx(So,{}),h?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(t9,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function rZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=f.useState(e?.stage||""),[i,o]=f.useState(!1),l=wt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];f.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const u=e.id;o(!0);try{await te.put(`/deals/admin/${u}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(h){console.error(h);const p=h.response?.data?.detail||"Failed to update deal status";q.error(p)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const u=encodeURIComponent(e.contact.email),h=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${u}?subject=${h}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:u=>r(u.target.value),disabled:i,children:c.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))}),n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function iZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l,relatedActs:c}){const d=wt(),[u]=zs(),h=u.get("id"),[p,x]=f.useState(e||null),[b,N]=f.useState(s||"Overview"),[v,j]=f.useState(null),[w,S]=f.useState(""),{userRole:A}=Qs(),{comments:E,addComment:_,refresh:k}=Ta({relatedType:"deal",relatedId:p?.id});f.useEffect(()=>{p?.id&&k()},[p?.id,k]);const T=s!==void 0?s:b;if(f.useEffect(()=>{A.toLowerCase()==="ceo"||A.toLowerCase()==="admin"?S("admin"):A.toLowerCase()==="group manager"||A.toLowerCase()==="group_manager"?S("group-manager"):A.toLowerCase()==="manager"?S("manager"):A.toLowerCase()==="sales"?S("sales"):S("guest")},[A]),f.useEffect(()=>{(async()=>{if(h&&!e)try{const H=((await te.get("/deals/admin/fetch-all")).data||[]).find(Q=>Q.id===parseInt(h));if(H){const Q={...H,amount:typeof H.amount=="number"?H.amount:parseFloat(H.amount||0),probability:H.probability||0};x(Q)}else console.warn("Deal not found with ID:",h)}catch(P){console.error("Error fetching deal:",P)}})()},[h,e]),!p&&!h||h&&!p)return null;const O=R=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[R]||"bg-gray-100 text-gray-700";function $(R){return R?new Date(R).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${O(p.stage)}`,children:p.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",$(p.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Gt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(R=>n.jsx("button",{onClick:()=>{r?r(R):N(R)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${T===R?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:R},R))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[T==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",p.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const R=(p?.stage||"PROSPECTING").toUpperCase(),I=(Q=>Q==="PROSPECTING"?0:Q==="QUALIFICATION"?1:Q==="PROPOSAL"?2:Q==="NEGOTIATION"?3:Q==="CLOSED_WON"||Q==="CLOSED_LOST"?4:-1)(R);return[0,1,2,3,4].map(Q=>I===Q?"orange":I>Q?"green":"gray").map((Q,G)=>n.jsxs(bt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${Q==="green"?"bg-green-500 border-green-500":Q==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),G<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},G))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((R,P)=>n.jsx("span",{className:"text-center flex-1 break-words",children:R},P))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",p.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),T==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),n.jsx(Aa,{comments:E,onAddComment:_})]}),s==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),v==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map((R,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/tasks`,{state:{taskID:R.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.description||"No description"}),R.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",R.assigned_to.first_name," ",R.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(R.due_date||R.created_at)})]},`task-${P}`))})]}),c.meetings&&c.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),v==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map((R,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/meetings`,{state:{meetingID:R.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.description||R.location||"No description"}),R.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",R.host.first_name," ",R.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(R.start_time||R.created_at)})]},`meeting-${P}`))})]}),c.calls&&c.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),v==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map((R,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/calls`,{state:{callID:R.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(R.call_time||R.created_at)})]},`call-${P}`))})]}),c.quotes&&c.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),v==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map((R,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/quotes`,{state:{quoteID:R.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(R.quote_id?R.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(R.presented_date)||""})]},`quote-${P}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]}),T==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(rZ,{selectedDeal:p,onStatusUpdate:l,onClose:a})})]})]})]})})}function k$e(){f.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Zt(),[a,s]=f.useState(""),[r,i]=f.useState("Filter by Stage"),[o,l]=f.useState("Filter by Owner"),[c,d]=f.useState(null),[u,h]=f.useState("Overview"),[p,x]=f.useState(!1),[b,N]=f.useState(null),[v,j]=f.useState(!1),[w,S]=f.useState(1),[A,E]=f.useState(10),[_,k]=f.useState(!1),[T,O]=f.useState(null),[$,R]=f.useState(!1),[P,I]=f.useState([]),[H,Q]=f.useState(!1),[G,K]=f.useState(null),[W,J]=f.useState([]),[Te,ee]=f.useState([]),[U,je]=f.useState([]),[be,le]=f.useState({}),[Ce,Se]=f.useState(null);f.useEffect(()=>{const de=t.state,D=de?.dealID;if(D&&!de?.openDealModal){Se(D),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(Ce&&b?.length>0&&!v){const de=b.find(D=>D.id===Ce);de?d(de):q.error("Deal not found."),Se(null)}},[Ce,b,v]);const[Oe,ge]=f.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),He={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Ne=de=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[de]||de||"--",he=de=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[de]||"bg-gray-100 text-gray-700",Z=f.useCallback(async de=>{try{const D=await te.get(`/activities/deal/${de}`);le(D.data&&typeof D.data=="object"?D.data:{})}catch(D){console.error(D),D.response?.status===404&&(console.warn("No activities found for this account."),le({}))}},[]),_e=f.useMemo(()=>{const de=a.trim().toLowerCase(),D=r.trim(),B=o.trim();return(b??[]).filter(oe=>{const ue=[oe?.name,oe?.description,oe?.account?.name,oe?.contact?.first_name,oe?.contact?.last_name,oe?.assigned_deals?.first_name,oe?.assigned_deals?.last_name],ie=de===""||ue.some(fe=>fe==null||fe===""?!1:fe.toString().toLowerCase().includes(de)),Pe=D==="Filter by Stage"||D===""||oe.stage===He[D]||oe.stage===D,xe=B==="Filter by Owner"||B===""||`${oe.assigned_deals?.first_name||""} ${oe.assigned_deals?.last_name||""}`.trim().toLowerCase()===B.toLowerCase();return ie&&Pe&&xe})},[b,a,r,o]),ke=Math.max(1,Math.ceil(_e.length/A)||1);f.useEffect(()=>{S(1)},[a,r,o,A]),f.useEffect(()=>{S(de=>{const D=Math.max(1,Math.ceil(_e.length/A)||1);return de>D?D:de})},[_e.length,A]);const ze=f.useMemo(()=>{const de=(w-1)*A;return _e.slice(de,de+A)},[_e,w,A]),tt=()=>S(de=>Math.max(de-1,1)),De=()=>S(de=>Math.min(de+1,ke)),at=()=>{ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Q(!1),K(null),x(!0)},et=async()=>{j(!0);try{const de=await te.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((oe,ue)=>{const ie=oe?.created_at?new Date(oe.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-ie});N(B)}catch(de){de.response&&de.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(de)}finally{j(!1)}},V=async()=>{try{const de=await te.get("/accounts/admin/fetch-all");J(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},ne=async()=>{try{const de=await te.get("/contacts/admin/fetch-all");ee(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},se=async()=>{try{const de=await te.get("/users/all");je(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&q.warn("Unable to load users (permission denied).")}};f.useEffect(()=>{et(),V(),ne(),se()},[]);const Ee=de=>{de&&(ge({id:de.id||null,name:de.name||"",account_id:de.account_id?.toString()||"",primary_contact_id:de.primary_contact_id?.toString()||"",stage:de.stage||"PROPOSAL",amount:de.amount?.toString()||"",close_date:de.close_date?new Date(de.close_date).toISOString().split("T")[0]:"",assigned_to:de.assigned_to?.toString()||"",currency:de.currency||"PHP",description:de.description||""}),Q(!0),K(de.id),d(null),x(!0))},Ie=async(de=!1)=>{try{const D=await te.get("/deals/admin/fetch-all"),oe=[...Array.isArray(D.data)?D.data:[]].sort((ue,ie)=>{const Pe=ue?.created_at?new Date(ue.created_at).getTime():0;return(ie?.created_at?new Date(ie.created_at).getTime():0)-Pe});if(N(oe),!de&&c&&c.id){const ue=oe.find(ie=>ie.id===c.id);ue&&d({...ue})}}catch(D){console.error("Failed to refresh deal data:",D),await et()}},pe=de=>{const D=de.name.trim();if(!D){q.error("Deal name is required.");return}if(!de.account_id){q.error("Account is required.");return}const B=H&&G?"update":"create",oe=D;O({title:B==="create"?"Confirm New Deal":"Confirm Update",message:B==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:oe}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:oe}),"?"]}),confirmLabel:B==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:B,formData:de,targetId:G||null,name:oe}})},Be=de=>{if(!de)return;const D=de.name||"this deal";O({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:D}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:de.id,name:D}})},$e=de=>{if(de.target.checked){const D=ze.map(B=>B.id);I(D)}else I([])},Ve=de=>{I(D=>D.includes(de)?D.filter(B=>B!==de):[...D,de])},ut=async()=>{P.length!==0&&O({title:"Delete Deals",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:P.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${P.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:P}})},ve=async()=>{if(!T?.action){O(null);return}const{action:de}=T,{type:D,formData:B,targetId:oe,name:ue}=de;R(!0);try{if(D==="create"){k(!0);const ie={name:B.name.trim(),account_id:parseInt(B.account_id),primary_contact_id:B.primary_contact_id?parseInt(B.primary_contact_id):null,stage:B.stage,amount:B.amount?parseFloat(B.amount):null,currency:B.currency||"PHP",close_date:B.close_date||null,description:B.description||null,assigned_to:B.assigned_to?parseInt(B.assigned_to):null};await te.post("/deals/admin/create",ie),q.success(`Deal "${ue}" created successfully.`),x(!1),await et()}else if(D==="update"){if(!oe)throw new Error("Missing deal identifier for update.");k(!0);const ie={};B.name!==void 0&&(ie.name=B.name.trim()),B.account_id!==void 0&&B.account_id!==""&&(ie.account_id=parseInt(B.account_id)),B.primary_contact_id!==void 0&&(ie.primary_contact_id=B.primary_contact_id?parseInt(B.primary_contact_id):null),B.stage!==void 0&&(ie.stage=B.stage),B.amount!==void 0&&B.amount!==""&&(ie.amount=parseFloat(B.amount)),B.currency!==void 0&&(ie.currency=B.currency),B.close_date!==void 0&&(ie.close_date=B.close_date||null),B.description!==void 0&&(ie.description=B.description||null),B.assigned_to!==void 0&&(ie.assigned_to=B.assigned_to?parseInt(B.assigned_to):null),await te.put(`/deals/admin/${oe}`,ie),q.success(`Deal "${ue}" updated successfully.`),x(!1),await et()}else if(D==="delete"){if(!oe)throw new Error("Missing deal identifier for deletion.");await te.delete(`/deals/admin/${oe}`),q.success(`Deal "${ue}" deleted successfully.`),c?.id===oe&&d(null),await et()}else if(D==="bulk-delete"){const{dealIds:ie}=de;await te.delete("/deals/admin/bulk-delete",{data:{deal_ids:ie}}),q.success(`Successfully deleted ${ie.length} deals`),I([]),await et()}}catch(ie){console.error(ie);const Pe=D==="create"?"Failed to create deal. Please review the details and try again.":D==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",xe=ie.response?.data?.detail||Pe;q.error(xe)}finally{(D==="create"||D==="update")&&k(!1),R(!1),O(null)}},ae=()=>{$||O(null)},Fe=()=>{x(!1),ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Q(!1),K(null),k(!1)},ye=(b??[]).filter(de=>de.stage==="PROSPECTING").length,We=(b??[]).filter(de=>de.stage==="QUALIFICATION").length,it=(b??[]).filter(de=>de.stage==="PROPOSAL").length,ht=(b??[]).filter(de=>de.stage==="NEGOTIATION").length,Ae=(b??[]).filter(de=>de.stage==="CLOSED_WON").length,Je=(b??[]).filter(de=>de.stage==="CLOSED_LOST").length,ce=(b??[]).filter(de=>de.stage==="CLOSED_CANCELLED").length,X=[{title:"Prospecting",value:ye,icon:Gw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:We,icon:fa,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:it,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ht,icon:sd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Ae,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Je,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ce,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:at,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:X.map(de=>n.jsx(P$e,{...de},de.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:de=>s(de.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:de=>i(de.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:de=>l(de.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((b??[]).map(de=>`${de.assigned_deals?.first_name} ${de.assigned_deals?.last_name}`))].map((de,D)=>n.jsx("option",{value:de,children:de},D))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ze.length>0&&ze.every(de=>P.includes(de.id)),onChange:$e})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:P.length>0?n.jsx("button",{onClick:ut,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${P.length} selected items`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:_e.length>0?ze.map(de=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...de}),Z(de.id)},children:[n.jsx("td",{className:"py-3 px-4",onClick:D=>D.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:P.includes(de.id),onChange:()=>Ve(de.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.deal_id?de.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:de.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:de.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.contact?.first_name&&de.contact?.last_name?`${de.contact.first_name} ${de.contact.last_name}`:de.contact?.first_name||de.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he(de.stage)}`,children:Ne(de.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",de.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.assigned_deals?.first_name&&de.assigned_deals?.last_name?`${de.assigned_deals.first_name} ${de.assigned_deals.last_name}`:de.assigned_deals?.first_name||de.assigned_deals?.last_name||"--"})]},de.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:_e.length,pageSize:A,currentPage:w,onPrev:tt,onNext:De,onPageSizeChange:de=>{E(de),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(D$e,{onClose:Fe,formData:Oe,setFormData:ge,isEditing:H,onSubmit:pe,isSubmitting:_||$,accounts:W,contacts:Te,users:U}),c&&n.jsx(iZ,{relatedActs:be,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:h,onEdit:Ee,onDelete:Be,onStatusUpdate:Ie}),T&&n.jsx(L$e,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ve,onCancel:ae,loading:$})]})}function L$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function P$e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function D$e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[]}){const[d,u]=f.useState(!1),h=b=>{if(b.preventDefault(),u(!0),!t.name?.trim()){q.error("Deal name is required.");return}const N=Number(t.amount);if(!t.amount||isNaN(N)||N<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},p=b=>{b.target.id==="modalBackdrop"&&e()},x=f.useMemo(()=>{const b=String(t.account_id||"").trim(),N=Array.isArray(l)?l:[];return b?N.filter(v=>{const w=[v?.account_id,v?.accountId,v?.account?.id,v?.account?.account_id,v?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return w?String(w)===b:!1}):N},[l,t.account_id]);return f.useEffect(()=>{const b=String(t.account_id||"").trim(),N=String(t.primary_contact_id||"").trim();if(!N||!b)return;x.some(j=>String(j?.id)===N)||a(j=>({...j,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,a]),n.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:h,noValidate:!0,children:[n.jsx(V_,{label:"Deal Name",name:"name",value:t.name,onChange:b=>a({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(Y_,{label:"Account",value:t.account_id||"",onChange:b=>a({...t,account_id:b}),items:o||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:d}),n.jsx(Y_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>a({...t,primary_contact_id:b}),items:x||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:d,disabled:i}),n.jsx(S7,{label:"Stage",name:"stage",value:t.stage,onChange:b=>a({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(V_,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>a({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:d}),n.jsx(S7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>a({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(V_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>a({...t,close_date:b.target.value}),disabled:i}),n.jsx(Y_,{label:"Assign To",value:t.assigned_to||"",onChange:b=>a({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(M$e,{label:"Description",name:"description",value:t.description,onChange:b=>a({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function V_({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function S7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function Y_({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(O$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function O$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function M$e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var I$e=Object.defineProperty,$$e=(e,t,a)=>t in e?I$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Q_=(e,t,a)=>($$e(e,typeof t!="symbol"?t+"":t,a),a);let R$e=class{constructor(){Q_(this,"current",this.detect()),Q_(this,"handoffState","pending"),Q_(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Po=new R$e;function i0(e){var t;return Po.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function Ek(e){var t,a;return Po.isServer?null:e==null?document:(a=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?a:document}function oZ(e){var t,a;return(a=(t=Ek(e))==null?void 0:t.activeElement)!=null?a:null}function z$e(e){return oZ(e)===e}function Vj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function lc(){let e=[],t={addEventListener(a,s,r,i){return a.addEventListener(s,r,i),t.add(()=>a.removeEventListener(s,r,i))},requestAnimationFrame(...a){let s=requestAnimationFrame(...a);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...a){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...a))},setTimeout(...a){let s=setTimeout(...a);return t.add(()=>clearTimeout(s))},microTask(...a){let s={current:!0};return Vj(()=>{s.current&&a[0]()}),t.add(()=>{s.current=!1})},style(a,s,r){let i=a.style.getPropertyValue(s);return Object.assign(a.style,{[s]:r}),this.add(()=>{Object.assign(a.style,{[s]:i})})},group(a){let s=lc();return a(s),this.add(()=>s.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let s=e.indexOf(a);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let a of e.splice(0))a()}};return t}function Yj(){let[e]=f.useState(lc);return f.useEffect(()=>()=>e.dispose(),[e]),e}let hr=(e,t)=>{Po.isServer?f.useEffect(e,t):f.useLayoutEffect(e,t)};function nm(e){let t=f.useRef(e);return hr(()=>{t.current=e},[e]),t}let Vn=function(e){let t=nm(e);return bt.useCallback((...a)=>t.current(...a),[t])};function o0(e){return f.useMemo(()=>e,Object.values(e))}let F$e=f.createContext(void 0);function U$e(){return f.useContext(F$e)}function kk(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Yl(e,t,...a){if(e in t){let r=t[e];return typeof r=="function"?r(...a):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Yl),s}var bw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(bw||{}),Xc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Xc||{});function Ti(){let e=H$e();return f.useCallback(t=>B$e({mergeRefs:e,...t}),[e])}function B$e({ourProps:e,theirProps:t,slot:a,defaultTag:s,features:r,visible:i=!0,name:o,mergeRefs:l}){l=l??q$e;let c=lZ(t,e);if(i)return ib(c,a,s,o,l);let d=r??0;if(d&2){let{static:u=!1,...h}=c;if(u)return ib(h,a,s,o,l)}if(d&1){let{unmount:u=!0,...h}=c;return Yl(u?0:1,{0(){return null},1(){return ib({...h,hidden:!0,style:{display:"none"}},a,s,o,l)}})}return ib(c,a,s,o,l)}function ib(e,t={},a,s,r){let{as:i=a,children:o,refName:l="ref",...c}=K_(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},u=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let h={};if(t){let p=!1,x=[];for(let[b,N]of Object.entries(t))typeof N=="boolean"&&(p=!0),N===!0&&x.push(b.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(p){h["data-headlessui-state"]=x.join(" ");for(let b of x)h[`data-${b}`]=""}}if(ep(i)&&(Object.keys(Jd(c)).length>0||Object.keys(Jd(h)).length>0))if(!f.isValidElement(u)||Array.isArray(u)&&u.length>1||G$e(u)){if(Object.keys(Jd(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Jd(c)).concat(Object.keys(Jd(h))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,x=p?.className,b=typeof x=="function"?(...j)=>kk(x(...j),c.className):kk(x,c.className),N=b?{className:b}:{},v=lZ(u.props,Jd(K_(c,["ref"])));for(let j in h)j in v&&delete h[j];return f.cloneElement(u,Object.assign({},v,h,d,{ref:r(W$e(u),d.ref)},N))}return f.createElement(i,Object.assign({},K_(c,["ref"]),!ep(i)&&d,!ep(i)&&h),u)}function H$e(){let e=f.useRef([]),t=f.useCallback(a=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(a):s.current=a)},[]);return(...a)=>{if(!a.every(s=>s==null))return e.current=a,t}}function q$e(...e){return e.every(t=>t==null)?void 0:t=>{for(let a of e)a!=null&&(typeof a=="function"?a(t):a.current=t)}}function lZ(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(a[r]!=null||(a[r]=[]),a[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(a[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in a)Object.assign(t,{[s](r,...i){let o=a[s];for(let l of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function Nr(e){var t;return Object.assign(f.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Jd(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function K_(e,t=[]){let a=Object.assign({},e);for(let s of t)s in a&&delete a[s];return a}function W$e(e){return bt.version.split(".")[0]>="19"?e.props.ref:e.ref}function ep(e){return e===f.Fragment||e===Symbol.for("react.fragment")}function G$e(e){return ep(e.type)}let V$e="span";var vw=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(vw||{});function Y$e(e,t){var a;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(a=r["aria-hidden"])!=null?a:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Ti()({ourProps:i,theirProps:r,slot:{},defaultTag:V$e,name:"Hidden"})}let Lk=Nr(Y$e);function Q$e(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function rd(e){return Q$e(e)&&"tagName"in e}function Bu(e){return rd(e)&&"accessKey"in e}function Zc(e){return rd(e)&&"tabIndex"in e}function K$e(e){return rd(e)&&"style"in e}function X$e(e){return Bu(e)&&e.nodeName==="IFRAME"}function Z$e(e){return Bu(e)&&e.nodeName==="INPUT"}let cZ=Symbol();function J$e(e,t=!0){return Object.assign(e,{[cZ]:t})}function Go(...e){let t=f.useRef(e);f.useEffect(()=>{t.current=e},[e]);let a=Vn(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[cZ])?void 0:a}let LD=f.createContext(null);LD.displayName="DescriptionContext";function dZ(){let e=f.useContext(LD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,dZ),t}return e}function e6e(){let[e,t]=f.useState([]);return[e.length>0?e.join(" "):void 0,f.useMemo(()=>function(a){let s=Vn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=f.useMemo(()=>({register:s,slot:a.slot,name:a.name,props:a.props,value:a.value}),[s,a.slot,a.name,a.props,a.value]);return bt.createElement(LD.Provider,{value:r},a.children)},[t])]}let t6e="p";function n6e(e,t){let a=f.useId(),s=U$e(),{id:r=`headlessui-description-${a}`,...i}=e,o=dZ(),l=Go(t);hr(()=>o.register(r),[r,o.register]);let c=o0({...o.slot,disabled:s||!1}),d={ref:l,...o.props,id:r};return Ti()({ourProps:d,theirProps:i,slot:c,defaultTag:t6e,name:o.name||"Description"})}let a6e=Nr(n6e),s6e=Object.assign(a6e,{});var uZ=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(uZ||{});let r6e=f.createContext(()=>{});function i6e({value:e,children:t}){return bt.createElement(r6e.Provider,{value:e},t)}let mZ=class extends Map{constructor(t){super(),this.factory=t}get(t){let a=super.get(t);return a===void 0&&(a=this.factory(t),this.set(t,a)),a}};var o6e=Object.defineProperty,l6e=(e,t,a)=>t in e?o6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c6e=(e,t,a)=>(l6e(e,t+"",a),a),fZ=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},si=(e,t,a)=>(fZ(e,t,"read from private field"),a?a.call(e):t.get(e)),X_=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},_7=(e,t,a,s)=>(fZ(e,t,"write to private field"),t.set(e,a),a),go,Ug,Bg;let d6e=class{constructor(t){X_(this,go,{}),X_(this,Ug,new mZ(()=>new Set)),X_(this,Bg,new Set),c6e(this,"disposables",lc()),_7(this,go,t),Po.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return si(this,go)}subscribe(t,a){if(Po.isServer)return()=>{};let s={selector:t,callback:a,current:t(si(this,go))};return si(this,Bg).add(s),this.disposables.add(()=>{si(this,Bg).delete(s)})}on(t,a){return Po.isServer?()=>{}:(si(this,Ug).get(t).add(a),this.disposables.add(()=>{si(this,Ug).get(t).delete(a)}))}send(t){let a=this.reduce(si(this,go),t);if(a!==si(this,go)){_7(this,go,a);for(let s of si(this,Bg)){let r=s.selector(si(this,go));hZ(s.current,r)||(s.current=r,s.callback(r))}for(let s of si(this,Ug).get(t.type))s(si(this,go),t)}}};go=new WeakMap,Ug=new WeakMap,Bg=new WeakMap;function hZ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Z_(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Z_(e.entries(),t.entries()):A7(e)&&A7(t)?Z_(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Z_(e,t){do{let a=e.next(),s=t.next();if(a.done&&s.done)return!0;if(a.done||s.done||!Object.is(a.value,s.value))return!1}while(!0)}function A7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var u6e=Object.defineProperty,m6e=(e,t,a)=>t in e?u6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,T7=(e,t,a)=>(m6e(e,typeof t!="symbol"?t+"":t,a),a),f6e=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(f6e||{});let h6e={0(e,t){let a=t.id,s=e.stack,r=e.stack.indexOf(a);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(a),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,a]}},1(e,t){let a=t.id,s=e.stack.indexOf(a);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},g6e=class gZ extends d6e{constructor(){super(...arguments),T7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),T7(this,"selectors",{isTop:(t,a)=>t.stack[t.stack.length-1]===a,inStack:(t,a)=>t.stack.includes(a)})}static new(){return new gZ({stack:[]})}reduce(t,a){return Yl(a.type,h6e,t,a)}};const pZ=new mZ(()=>g6e.new());function xZ(e,t,a=hZ){return d5e.useSyncExternalStoreWithSelector(Vn(s=>e.subscribe(p6e,s)),Vn(()=>e.state),Vn(()=>e.state),Vn(t),a)}function p6e(e){return e}function l0(e,t){let a=f.useId(),s=pZ.get(t),[r,i]=xZ(s,f.useCallback(o=>[s.selectors.isTop(o,a),s.selectors.inStack(o,a)],[s,a]));return hr(()=>{if(e)return s.actions.push(a),()=>s.actions.pop(a)},[s,e,a]),e?i?r:!0:!1}let Pk=new Map,tp=new Map;function E7(e){var t;let a=(t=tp.get(e))!=null?t:0;return tp.set(e,a+1),a!==0?()=>k7(e):(Pk.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>k7(e))}function k7(e){var t;let a=(t=tp.get(e))!=null?t:1;if(a===1?tp.delete(e):tp.set(e,a-1),a!==1)return;let s=Pk.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,Pk.delete(e))}function x6e(e,{allowed:t,disallowed:a}={}){let s=l0(e,"inert-others");hr(()=>{var r,i;if(!s)return;let o=lc();for(let c of(r=a?.())!=null?r:[])c&&o.add(E7(c));let l=(i=t?.())!=null?i:[];for(let c of l){if(!c)continue;let d=i0(c);if(!d)continue;let u=c.parentElement;for(;u&&u!==d.body;){for(let h of u.children)l.some(p=>h.contains(p))||o.add(E7(h));u=u.parentElement}}return o.dispose},[s,t,a])}function y6e(e,t,a){let s=nm(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});f.useEffect(()=>{if(!e)return;let r=t===null?null:Bu(t)?t:t.current;if(!r)return;let i=lc();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,s,e])}let ww=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),b6e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var _l=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(_l||{}),Dk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Dk||{}),v6e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(v6e||{});function w6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ww)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function N6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(b6e)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var yZ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(yZ||{});function j6e(e,t=0){var a;return e===((a=i0(e))==null?void 0:a.body)?!1:Yl(t,{0(){return e.matches(ww)},1(){let s=e;for(;s!==null;){if(s.matches(ww))return!0;s=s.parentElement}return!1}})}var C6e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(C6e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Dl(e){e?.focus({preventScroll:!0})}let S6e=["textarea","input"].join(",");function _6e(e){var t,a;return(a=(t=e?.matches)==null?void 0:t.call(e,S6e))!=null?a:!1}function A6e(e,t=a=>a){return e.slice().sort((a,s)=>{let r=t(a),i=t(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function np(e,t,{sorted:a=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?Ek(e[0]):document:Ek(e),o=Array.isArray(e)?a?A6e(e):e:t&64?N6e(e):w6e(e);r.length>0&&o.length>1&&(o=o.filter(x=>!r.some(b=>b!=null&&"current"in b?b?.current===x:b===x))),s=s??i?.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},u=0,h=o.length,p;do{if(u>=h||u+h<=0)return 0;let x=c+u;if(t&16)x=(x+h)%h;else{if(x<0)return 3;if(x>=h)return 1}p=o[x],p?.focus(d),u+=l}while(p!==oZ(p));return t&6&&_6e(p)&&p.select(),2}function bZ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function T6e(){return/Android/gi.test(window.navigator.userAgent)}function L7(){return bZ()||T6e()}function ob(e,t,a,s){let r=nm(a);f.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function vZ(e,t,a,s){let r=nm(a);f.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const P7=30;function E6e(e,t,a){let s=nm(a),r=f.useCallback(function(l,c){if(l.defaultPrevented)return;let d=c(l);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=(function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let h of u)if(h!==null&&(h.contains(d)||l.composed&&l.composedPath().includes(h)))return;return!j6e(d,yZ.Loose)&&d.tabIndex!==-1&&l.preventDefault(),s.current(l,d)},[s,t]),i=f.useRef(null);ob(e,"pointerdown",l=>{var c,d;L7()||(i.current=((d=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:d[0])||l.target)},!0),ob(e,"pointerup",l=>{if(L7()||!i.current)return;let c=i.current;return i.current=null,r(l,()=>c)},!0);let o=f.useRef({x:0,y:0});ob(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),ob(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=P7||Math.abs(c.y-o.current.y)>=P7))return r(l,()=>Zc(l.target)?l.target:null)},!0),vZ(e,"blur",l=>r(l,()=>X$e(window.document.activeElement)?window.document.activeElement:null),!0)}function PD(...e){return f.useMemo(()=>i0(...e),[...e])}function wZ(e,t,a,s){let r=nm(a);f.useEffect(()=>{e=e??window;function i(o){r.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function k6e(e){return f.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function L6e(e,t){let a=e(),s=new Set;return{getSnapshot(){return a},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let o=t[r].call(a,...i);o&&(a=o,s.forEach(l=>l()))}}}function P6e(){let e;return{before({doc:t}){var a;let s=t.documentElement,r=(a=t.defaultView)!=null?a:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:a}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);a.style(s,"paddingRight",`${i}px`)}}}function D6e(){return bZ()?{before({doc:e,d:t,meta:a}){function s(r){for(let i of a().containers)for(let o of i())if(o.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=lc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(Zc(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),u=e.querySelector(d);Zc(u)&&!s(u)&&(o=u)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),Zc(c.target)&&K$e(c.target))if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;l.style(d,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(Zc(l.target)){if(Z$e(l.target))return;if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function O6e(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function D7(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let mu=L6e(()=>new Map,{PUSH(e,t){var a;let s=(a=this.get(e))!=null?a:{doc:e,count:0,d:lc(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=D7(s.meta),this.set(e,s),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t),a.computedMeta=D7(a.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[D6e(),P6e(),O6e()];a.forEach(({before:s})=>s?.(t)),a.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});mu.subscribe(()=>{let e=mu.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let s=t.get(a.doc)==="hidden",r=a.count!==0;(r&&!s||!r&&s)&&mu.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&mu.dispatch("TEARDOWN",a)}});function M6e(e,t,a=()=>({containers:[]})){let s=k6e(mu),r=t?s.get(t):void 0,i=r?r.count>0:!1;return hr(()=>{if(!(!t||!e))return mu.dispatch("PUSH",t,a),()=>mu.dispatch("POP",t,a)},[e,t]),i}function I6e(e,t,a=()=>[document.body]){let s=l0(e,"scroll-lock");M6e(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],a]}})}function $6e(e=0){let[t,a]=f.useState(e),s=f.useCallback(c=>a(c),[]),r=f.useCallback(c=>a(d=>d|c),[]),i=f.useCallback(c=>(t&c)===c,[t]),o=f.useCallback(c=>a(d=>d&~c),[]),l=f.useCallback(c=>a(d=>d^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:l}}var R6e={},O7,M7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((O7=process==null?void 0:R6e)==null?void 0:O7.NODE_ENV)==="test"&&typeof((M7=Element?.prototype)==null?void 0:M7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var z6e=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(z6e||{});function F6e(e){let t={};for(let a in e)e[a]===!0&&(t[`data-${a}`]="");return t}function U6e(e,t,a,s){let[r,i]=f.useState(a),{hasFlag:o,addFlag:l,removeFlag:c}=$6e(e&&r?3:0),d=f.useRef(!1),u=f.useRef(!1),h=Yj();return hr(()=>{var p;if(e){if(a&&i(!0),!t){a&&l(3);return}return(p=s?.start)==null||p.call(s,a),B6e(t,{inFlight:d,prepare(){u.current?u.current=!1:u.current=d.current,d.current=!0,!u.current&&(a?(l(3),c(4)):(l(4),c(2)))},run(){u.current?a?(c(3),l(4)):(c(4),l(3)):a?c(1):l(1)},done(){var x;u.current&&W6e(t)||(d.current=!1,c(7),a||i(!1),(x=s?.end)==null||x.call(s,a))}})}},[e,a,t,h]),e?[r,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function B6e(e,{prepare:t,run:a,done:s,inFlight:r}){let i=lc();return q6e(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(H6e(e,s))})}),i.dispose}function H6e(e,t){var a,s;let r=lc();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let o=(s=(a=e.getAnimations)==null?void 0:a.call(e).filter(l=>l instanceof CSSTransition))!=null?s:[];return o.length===0?(t(),r.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),r.dispose)}function q6e(e,{inFlight:t,prepare:a}){if(t!=null&&t.current){a();return}let s=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=s}function W6e(e){var t,a;return((a=(t=e.getAnimations)==null?void 0:t.call(e))!=null?a:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function DD(e,t){let a=f.useRef([]),s=Vn(e);f.useEffect(()=>{let r=[...a.current];for(let[i,o]of t.entries())if(a.current[i]!==o){let l=s(t,r);return a.current=t,l}},[s,...t])}let Qj=f.createContext(null);Qj.displayName="OpenClosedContext";var Hi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Hi||{});function Kj(){return f.useContext(Qj)}function G6e({value:e,children:t}){return bt.createElement(Qj.Provider,{value:e},t)}function V6e({children:e}){return bt.createElement(Qj.Provider,{value:null},e)}function Y6e(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vc=[];Y6e(()=>{function e(t){if(!Zc(t.target)||t.target===document.body||Vc[0]===t.target)return;let a=t.target;a=a.closest(ww),Vc.unshift(a??t.target),Vc=Vc.filter(s=>s!=null&&s.isConnected),Vc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function NZ(e){let t=Vn(e),a=f.useRef(!1);f.useEffect(()=>(a.current=!1,()=>{a.current=!0,Vj(()=>{a.current&&t()})}),[t])}let jZ=f.createContext(!1);function Q6e(){return f.useContext(jZ)}function I7(e){return bt.createElement(jZ.Provider,{value:e.force},e.children)}function K6e(e){let t=Q6e(),a=f.useContext(SZ),[s,r]=f.useState(()=>{var i;if(!t&&a!==null)return(i=a.current)!=null?i:null;if(Po.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return f.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),f.useEffect(()=>{t||a!==null&&r(a.current)},[a,r,t]),s}let CZ=f.Fragment,X6e=Nr(function(e,t){let{ownerDocument:a=null,...s}=e,r=f.useRef(null),i=Go(J$e(p=>{r.current=p}),t),o=PD(r.current),l=a??o,c=K6e(l),d=f.useContext(Ok),u=Yj(),h=Ti();return NZ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Bi.createPortal(bt.createElement("div",{"data-headlessui-portal":"",ref:p=>{u.dispose(),d&&p&&u.add(d.register(p))}},h({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:CZ,name:"Portal"})),c):null});function Z6e(e,t){let a=Go(t),{enabled:s=!0,ownerDocument:r,...i}=e,o=Ti();return s?bt.createElement(X6e,{...i,ownerDocument:r,ref:a}):o({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:CZ,name:"Portal"})}let J6e=f.Fragment,SZ=f.createContext(null);function eRe(e,t){let{target:a,...s}=e,r={ref:Go(t)},i=Ti();return bt.createElement(SZ.Provider,{value:a},i({ourProps:r,theirProps:s,defaultTag:J6e,name:"Popover.Group"}))}let Ok=f.createContext(null);function tRe(){let e=f.useContext(Ok),t=f.useRef([]),a=Vn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Vn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),r=f.useMemo(()=>({register:a,unregister:s,portals:t}),[a,s,t]);return[t,f.useMemo(()=>function({children:i}){return bt.createElement(Ok.Provider,{value:r},i)},[r])]}let nRe=Nr(Z6e),_Z=Nr(eRe),aRe=Object.assign(nRe,{Group:_Z});function sRe(e,t=typeof document<"u"?document.defaultView:null,a){let s=l0(e,"escape");wZ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===uZ.Escape&&a(r))})}function rRe(){var e;let[t]=f.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,s]=f.useState((e=t?.matches)!=null?e:!1);return hr(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),a}function iRe({defaultContainers:e=[],portals:t,mainTreeNode:a}={}){let s=Vn(()=>{var r,i;let o=i0(a),l=[];for(let c of e)c!==null&&(rd(c)?l.push(c):"current"in c&&rd(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(r=o?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&rd(c)&&c.id!=="headlessui-portal-root"&&(a&&(c.contains(a)||c.contains((i=a?.getRootNode())==null?void 0:i.host))||l.some(d=>c.contains(d))||l.push(c));return l});return{resolveContainers:s,contains:Vn(r=>s().some(i=>i.contains(r)))}}let AZ=f.createContext(null);function $7({children:e,node:t}){let[a,s]=f.useState(null),r=TZ(t??a);return bt.createElement(AZ.Provider,{value:r},e,r===null&&bt.createElement(Lk,{features:vw.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=i0(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&rd(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function TZ(e=null){var t;return(t=f.useContext(AZ))!=null?t:e}function oRe(){let e=typeof document>"u";return"useSyncExternalStore"in ju?(t=>t.useSyncExternalStore)(ju)(()=>()=>{},()=>!1,()=>!e):!1}function Xj(){let e=oRe(),[t,a]=f.useState(Po.isHandoffComplete);return t&&Po.isHandoffComplete===!1&&a(!1),f.useEffect(()=>{t!==!0&&a(!0)},[t]),f.useEffect(()=>Po.handoff(),[]),e?!1:t}function OD(){let e=f.useRef(!1);return hr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Hg=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Hg||{});function lRe(){let e=f.useRef(0);return vZ(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function EZ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let a of e.current)rd(a.current)&&t.add(a.current);return t}let cRe="div";var au=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(au||{});function dRe(e,t){let a=f.useRef(null),s=Go(a,t),{initialFocus:r,initialFocusFallback:i,containers:o,features:l=15,...c}=e;Xj()||(l=0);let d=PD(a.current);hRe(l,{ownerDocument:d});let u=gRe(l,{ownerDocument:d,container:a,initialFocus:r,initialFocusFallback:i});pRe(l,{ownerDocument:d,container:a,containers:o,previousActiveElement:u});let h=lRe(),p=Vn(w=>{if(!Bu(a.current))return;let S=a.current;(A=>A())(()=>{Yl(h.current,{[Hg.Forwards]:()=>{np(S,_l.First,{skipElements:[w.relatedTarget,i]})},[Hg.Backwards]:()=>{np(S,_l.Last,{skipElements:[w.relatedTarget,i]})}})})}),x=l0(!!(l&2),"focus-trap#tab-lock"),b=Yj(),N=f.useRef(!1),v={ref:s,onKeyDown(w){w.key=="Tab"&&(N.current=!0,b.requestAnimationFrame(()=>{N.current=!1}))},onBlur(w){if(!(l&4))return;let S=EZ(o);Bu(a.current)&&S.add(a.current);let A=w.relatedTarget;Zc(A)&&A.dataset.headlessuiFocusGuard!=="true"&&(kZ(S,A)||(N.current?np(a.current,Yl(h.current,{[Hg.Forwards]:()=>_l.Next,[Hg.Backwards]:()=>_l.Previous})|_l.WrapAround,{relativeTo:w.target}):Zc(w.target)&&Dl(w.target)))}},j=Ti();return bt.createElement(bt.Fragment,null,x&&bt.createElement(Lk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:vw.Focusable}),j({ourProps:v,theirProps:c,defaultTag:cRe,name:"FocusTrap"}),x&&bt.createElement(Lk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:vw.Focusable}))}let uRe=Nr(dRe),mRe=Object.assign(uRe,{features:au});function fRe(e=!0){let t=f.useRef(Vc.slice());return DD(([a],[s])=>{s===!0&&a===!1&&Vj(()=>{t.current.splice(0)}),s===!1&&a===!0&&(t.current=Vc.slice())},[e,Vc,t]),Vn(()=>{var a;return(a=t.current.find(s=>s!=null&&s.isConnected))!=null?a:null})}function hRe(e,{ownerDocument:t}){let a=!!(e&8),s=fRe(a);DD(()=>{a||z$e(t?.body)&&Dl(s())},[a]),NZ(()=>{a&&Dl(s())})}function gRe(e,{ownerDocument:t,container:a,initialFocus:s,initialFocusFallback:r}){let i=f.useRef(null),o=l0(!!(e&1),"focus-trap#initial-focus"),l=OD();return DD(()=>{if(e===0)return;if(!o){r!=null&&r.current&&Dl(r.current);return}let c=a.current;c&&Vj(()=>{if(!l.current)return;let d=t?.activeElement;if(s!=null&&s.current){if(s?.current===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(s!=null&&s.current)Dl(s.current);else{if(e&16){if(np(c,_l.First|_l.AutoFocus)!==Dk.Error)return}else if(np(c,_l.First)!==Dk.Error)return;if(r!=null&&r.current&&(Dl(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,o,e]),i}function pRe(e,{ownerDocument:t,container:a,containers:s,previousActiveElement:r}){let i=OD(),o=!!(e&4);wZ(t?.defaultView,"focus",l=>{if(!o||!i.current)return;let c=EZ(s);Bu(a.current)&&c.add(a.current);let d=r.current;if(!d)return;let u=l.target;Bu(u)?kZ(c,u)?(r.current=u,Dl(u)):(l.preventDefault(),l.stopPropagation(),Dl(d)):Dl(r.current)},!0)}function kZ(e,t){for(let a of e)if(a.contains(t))return!0;return!1}function LZ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!ep((t=e.as)!=null?t:DZ)||bt.Children.count(e.children)===1}let Zj=f.createContext(null);Zj.displayName="TransitionContext";var xRe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(xRe||{});function yRe(){let e=f.useContext(Zj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function bRe(){let e=f.useContext(Jj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Jj=f.createContext(null);Jj.displayName="NestingContext";function e1(e){return"children"in e?e1(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function PZ(e,t){let a=nm(e),s=f.useRef([]),r=OD(),i=Yj(),o=Vn((x,b=Xc.Hidden)=>{let N=s.current.findIndex(({el:v})=>v===x);N!==-1&&(Yl(b,{[Xc.Unmount](){s.current.splice(N,1)},[Xc.Hidden](){s.current[N].state="hidden"}}),i.microTask(()=>{var v;!e1(s)&&r.current&&((v=a.current)==null||v.call(a))}))}),l=Vn(x=>{let b=s.current.find(({el:N})=>N===x);return b?b.state!=="visible"&&(b.state="visible"):s.current.push({el:x,state:"visible"}),()=>o(x,Xc.Unmount)}),c=f.useRef([]),d=f.useRef(Promise.resolve()),u=f.useRef({enter:[],leave:[]}),h=Vn((x,b,N)=>{c.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([v])=>v!==x)),t?.chains.current[b].push([x,new Promise(v=>{c.current.push(v)})]),t?.chains.current[b].push([x,new Promise(v=>{Promise.all(u.current[b].map(([j,w])=>w)).then(()=>v())})]),b==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>N(b)):N(b)}),p=Vn((x,b,N)=>{Promise.all(u.current[b].splice(0).map(([v,j])=>j)).then(()=>{var v;(v=c.current.shift())==null||v()}).then(()=>N(b))});return f.useMemo(()=>({children:s,register:l,unregister:o,onStart:h,onStop:p,wait:d,chains:u}),[l,o,s,h,p,u,d])}let DZ=f.Fragment,OZ=bw.RenderStrategy;function vRe(e,t){var a,s;let{transition:r=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:d,enterFrom:u,enterTo:h,entered:p,leave:x,leaveFrom:b,leaveTo:N,...v}=e,[j,w]=f.useState(null),S=f.useRef(null),A=LZ(e),E=Go(...A?[S,t,w]:t===null?[]:[t]),_=(a=v.unmount)==null||a?Xc.Unmount:Xc.Hidden,{show:k,appear:T,initial:O}=yRe(),[$,R]=f.useState(k?"visible":"hidden"),P=bRe(),{register:I,unregister:H}=P;hr(()=>I(S),[I,S]),hr(()=>{if(_===Xc.Hidden&&S.current){if(k&&$!=="visible"){R("visible");return}return Yl($,{hidden:()=>H(S),visible:()=>I(S)})}},[$,S,I,H,k,_]);let Q=Xj();hr(()=>{if(A&&Q&&$==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,$,Q,A]);let G=O&&!T,K=T&&k&&O,W=f.useRef(!1),J=PZ(()=>{W.current||(R("hidden"),H(S))},P),Te=Vn(Se=>{W.current=!0;let Oe=Se?"enter":"leave";J.onStart(S,Oe,ge=>{ge==="enter"?i?.():ge==="leave"&&l?.()})}),ee=Vn(Se=>{let Oe=Se?"enter":"leave";W.current=!1,J.onStop(S,Oe,ge=>{ge==="enter"?o?.():ge==="leave"&&c?.()}),Oe==="leave"&&!e1(J)&&(R("hidden"),H(S))});f.useEffect(()=>{A&&r||(Te(k),ee(k))},[k,A,r]);let U=!(!r||!A||!Q||G),[,je]=U6e(U,j,k,{start:Te,end:ee}),be=Jd({ref:E,className:((s=kk(v.className,K&&d,K&&u,je.enter&&d,je.enter&&je.closed&&u,je.enter&&!je.closed&&h,je.leave&&x,je.leave&&!je.closed&&b,je.leave&&je.closed&&N,!je.transition&&k&&p))==null?void 0:s.trim())||void 0,...F6e(je)}),le=0;$==="visible"&&(le|=Hi.Open),$==="hidden"&&(le|=Hi.Closed),k&&$==="hidden"&&(le|=Hi.Opening),!k&&$==="visible"&&(le|=Hi.Closing);let Ce=Ti();return bt.createElement(Jj.Provider,{value:J},bt.createElement(G6e,{value:le},Ce({ourProps:be,theirProps:v,defaultTag:DZ,features:OZ,visible:$==="visible",name:"Transition.Child"})))}function wRe(e,t){let{show:a,appear:s=!1,unmount:r=!0,...i}=e,o=f.useRef(null),l=LZ(e),c=Go(...l?[o,t]:t===null?[]:[t]);Xj();let d=Kj();if(a===void 0&&d!==null&&(a=(d&Hi.Open)===Hi.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,h]=f.useState(a?"visible":"hidden"),p=PZ(()=>{a||h("hidden")}),[x,b]=f.useState(!0),N=f.useRef([a]);hr(()=>{x!==!1&&N.current[N.current.length-1]!==a&&(N.current.push(a),b(!1))},[N,a]);let v=f.useMemo(()=>({show:a,appear:s,initial:x}),[a,s,x]);hr(()=>{a?h("visible"):!e1(p)&&o.current!==null&&h("hidden")},[a,p]);let j={unmount:r},w=Vn(()=>{var E;x&&b(!1),(E=e.beforeEnter)==null||E.call(e)}),S=Vn(()=>{var E;x&&b(!1),(E=e.beforeLeave)==null||E.call(e)}),A=Ti();return bt.createElement(Jj.Provider,{value:p},bt.createElement(Zj.Provider,{value:v},A({ourProps:{...j,as:f.Fragment,children:bt.createElement(MZ,{ref:c,...j,...i,beforeEnter:w,beforeLeave:S})},theirProps:{},defaultTag:f.Fragment,features:OZ,visible:u==="visible",name:"Transition"})))}function NRe(e,t){let a=f.useContext(Zj)!==null,s=Kj()!==null;return bt.createElement(bt.Fragment,null,!a&&s?bt.createElement(Mk,{ref:t,...e}):bt.createElement(MZ,{ref:t,...e}))}let Mk=Nr(wRe),MZ=Nr(vRe),MD=Nr(NRe),ev=Object.assign(Mk,{Child:MD,Root:Mk});var jRe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(jRe||{}),CRe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(CRe||{});let SRe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},ID=f.createContext(null);ID.displayName="DialogContext";function t1(e){let t=f.useContext(ID);if(t===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,t1),a}return t}function _Re(e,t){return Yl(t.type,SRe,e,t)}let R7=Nr(function(e,t){let a=f.useId(),{id:s=`headlessui-dialog-${a}`,open:r,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:u=!1,...h}=e,p=f.useRef(!1);l=(function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=Kj();r===void 0&&x!==null&&(r=(x&Hi.Open)===Hi.Open);let b=f.useRef(null),N=Go(b,t),v=PD(b.current),j=r?0:1,[w,S]=f.useReducer(_Re,{titleId:null,descriptionId:null,panelRef:f.createRef()}),A=Vn(()=>i(!1)),E=Vn(je=>S({type:0,id:je})),_=Xj()?j===0:!1,[k,T]=tRe(),O={get current(){var je;return(je=w.panelRef.current)!=null?je:b.current}},$=TZ(),{resolveContainers:R}=iRe({mainTreeNode:$,portals:k,defaultContainers:[O]}),P=x!==null?(x&Hi.Closing)===Hi.Closing:!1;x6e(d||P?!1:_,{allowed:Vn(()=>{var je,be;return[(be=(je=b.current)==null?void 0:je.closest("[data-headlessui-portal]"))!=null?be:null]}),disallowed:Vn(()=>{var je;return[(je=$?.closest("body > *:not(#headlessui-portal-root)"))!=null?je:null]})});let I=pZ.get(null);hr(()=>{if(_)return I.actions.push(s),()=>I.actions.pop(s)},[I,s,_]);let H=xZ(I,f.useCallback(je=>I.selectors.isTop(je,s),[I,s]));E6e(H,R,je=>{je.preventDefault(),A()}),sRe(H,v?.defaultView,je=>{je.preventDefault(),je.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),A()}),I6e(d||P?!1:_,v,R),y6e(_,b,A);let[Q,G]=e6e(),K=f.useMemo(()=>[{dialogState:j,close:A,setTitleId:E,unmount:u},w],[j,A,E,u,w]),W=o0({open:j===0}),J={ref:N,id:s,role:l,tabIndex:-1,"aria-modal":d?void 0:j===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":Q,unmount:u},Te=!rRe(),ee=au.None;_&&!d&&(ee|=au.RestoreFocus,ee|=au.TabLock,c&&(ee|=au.AutoFocus),Te&&(ee|=au.InitialFocus));let U=Ti();return bt.createElement(V6e,null,bt.createElement(I7,{force:!0},bt.createElement(aRe,null,bt.createElement(ID.Provider,{value:K},bt.createElement(_Z,{target:b},bt.createElement(I7,{force:!1},bt.createElement(G,{slot:W},bt.createElement(T,null,bt.createElement(mRe,{initialFocus:o,initialFocusFallback:b,containers:R,features:ee},bt.createElement(i6e,{value:A},U({ourProps:J,theirProps:h,slot:W,defaultTag:ARe,features:TRe,visible:j===0,name:"Dialog"})))))))))))}),ARe="div",TRe=bw.RenderStrategy|bw.Static;function ERe(e,t){let{transition:a=!1,open:s,...r}=e,i=Kj(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||a)&&!r.static?bt.createElement($7,null,bt.createElement(ev,{show:s,transition:a,unmount:r.unmount},bt.createElement(R7,{ref:t,...r}))):bt.createElement($7,null,bt.createElement(R7,{ref:t,open:s,...r}))}let kRe="div";function LRe(e,t){let a=f.useId(),{id:s=`headlessui-dialog-panel-${a}`,transition:r=!1,...i}=e,[{dialogState:o,unmount:l},c]=t1("Dialog.Panel"),d=Go(t,c.panelRef),u=o0({open:o===0}),h=Vn(v=>{v.stopPropagation()}),p={ref:d,id:s,onClick:h},x=r?MD:f.Fragment,b=r?{unmount:l}:{},N=Ti();return bt.createElement(x,{...b},N({ourProps:p,theirProps:i,slot:u,defaultTag:kRe,name:"Dialog.Panel"}))}let PRe="div";function DRe(e,t){let{transition:a=!1,...s}=e,[{dialogState:r,unmount:i}]=t1("Dialog.Backdrop"),o=o0({open:r===0}),l={ref:t,"aria-hidden":!0},c=a?MD:f.Fragment,d=a?{unmount:i}:{},u=Ti();return bt.createElement(c,{...d},u({ourProps:l,theirProps:s,slot:o,defaultTag:PRe,name:"Dialog.Backdrop"}))}let ORe="h2";function MRe(e,t){let a=f.useId(),{id:s=`headlessui-dialog-title-${a}`,...r}=e,[{dialogState:i,setTitleId:o}]=t1("Dialog.Title"),l=Go(t);f.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=o0({open:i===0}),d={ref:l,id:s};return Ti()({ourProps:d,theirProps:r,slot:c,defaultTag:ORe,name:"Dialog.Title"})}let IRe=Nr(ERe),$Re=Nr(LRe);Nr(DRe);let RRe=Nr(MRe),z7=Object.assign(IRe,{Panel:$Re,Title:RRe,Description:s6e});function c0({isOpen:e,onClose:t,onSave:a,onEdit:s,setFormData:r,formData:i,isEditing:o=!1,viewMode:l=!1,users:c=[],currentUser:d,onDelete:u}){const[h,p]=f.useState([]),[x,b]=f.useState([]),[N,v]=f.useState({}),{comments:j,addComment:w,refresh:S}=Ta({relatedType:"task",relatedId:i?.id});f.useEffect(()=>{i?.id&&S()},[i?.id,S]);const A=$=>{if(!$)return"";const R=String($).split("-");return R.length===3?`${R[0]}-${R[2]}`:String($)},E=$=>{const{name:R,value:P}=$.target;R==="subject"&&P.trim()&&v(I=>({...I,subject:!1})),r(I=>{const H={...I,[R]:P};return R==="relatedType1"&&(H.relatedTo1="",P==="Lead"?(H.relatedType2=null,H.relatedTo2=null,b([])):P==="Account"&&(H.relatedType2="Contact")),R==="relatedType2"&&(H.relatedTo2=""),H})};f.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let R;i.relatedType1==="Lead"?R=await te.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(R=await te.get("/accounts/admin/fetch-all"));let P=[];if(R&&Array.isArray(R.data)&&(P=R.data),o&&i.relatedTo1)try{let I;i.relatedType1==="Lead"?I=await te.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(I=await te.get(`/accounts/get/${i.relatedTo1}`)),I&&I.data&&(P.some(Q=>String(Q.id)===String(i.relatedTo1))||(P=[I.data,...P]))}catch(I){console.error("Error fetching specific related item:",I)}p(P)}catch(R){console.error("Error fetching related 1 data:",R),p([])}})()},[i.relatedType1,e,o,i.relatedTo1]),f.useEffect(()=>{if(!e||l)return;(async()=>{try{if(b([]),i.relatedType1==="Account"&&i.relatedTo1){let R;i.relatedType2==="Contact"?R=await te.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"?R=await te.get(`/deals/from-acc/${i.relatedTo1}`):i.relatedType2==="Quote"&&(R=await te.get(`/quotes/from-acc/${i.relatedTo1}`));let P=[];if(R&&Array.isArray(R.data)&&(P=R.data),o&&i.relatedTo2)try{let I;i.relatedType2==="Contact"?I=await te.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"?I=await te.get(`/deals/get/${i.relatedTo2}`):i.relatedType2==="Quote"&&(I=await te.get(`/quotes/get/${i.relatedTo2}`)),I&&I.data&&(P.some(Q=>String(Q.id)===String(i.relatedTo2))||(P=[I.data,...P]))}catch(I){console.error("Error fetching specific related item:",I)}b(P)}}catch(R){console.error("Error fetching related 2 data:",R),b([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,l,o]);const[_,k]=f.useState(!1);f.useEffect(()=>{e&&(k(!1),v({}))},[e]);const T=$=>{$.preventDefault(),k(!0);const R={};i.subject?.trim()||(R.subject=!0,q.error("Title is required")),v(R),i.relatedTo1||(R.relatedTo1=!0,q.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||(R.assignedTo=!0,q.error("Assigned To is required.")),!(Object.keys(R).length>0)&&a?.(i)},O=l?"Task Details":o?"Edit Task":"Create Task";return n.jsx(ev,{appear:!0,show:e,as:f.Fragment,children:n.jsxs(z7,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(ev.Child,{as:f.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/40"})}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:n.jsx(ev.Child,{as:f.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsx(z7.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:n.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[n.jsx("button",{onClick:()=>{t(),k(!1),v({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Kn,{size:25})}),n.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:O}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:$=>$.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),n.jsx("button",{onClick:()=>{t(),k(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"p-6 lg:p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[String(i?.createdById)===String(d?.id)&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),String(i?.createdById)===String(d?.id)&&n.jsx(n.Fragment,{children:d?.role==="Sales"?n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400 cursor-pointer",onClick:()=>u(i),children:[n.jsx(qs,{className:"mr-2"}),"Archive"]}):n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>u(i),children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),n.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),n.jsx("p",{children:i.relatedTo2Text})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:i.assignedToName||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:i.createdBy||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Priority:"}),n.jsx("p",{children:i.priority||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:i.status||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Due Date:"}),n.jsx("p",{children:i.dueDate||""})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"font-semibold",children:"Description:"}),n.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]}),n.jsx(Aa,{comments:j,onAddComment:w})]})]})]})}),!l&&n.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title"," ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:E,disabled:l,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${N.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${l?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:E,value:i.relatedType1,disabled:l,className:"w-full pr-6 rounded-md text-sm mb-2",children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(J_,{disabled:!1,items:Array.isArray(h)?h:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:$=>i.relatedType1==="Lead"?$.title:$.name??"",onChange:$=>r(R=>({...R,relatedTo1:$})),required:!0,isSubmitted:_})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:E,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:l||i.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(J_,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:$=>i.relatedType2==="Contact"?`${$.first_name??""} ${$.last_name??""}`.trim():i.relatedType2==="Quote"?A($.quote_id)??"":$.name??"",onChange:$=>r(R=>({...R,relatedTo2:$}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),n.jsx("textarea",{name:"description",value:i.description,onChange:E,disabled:l,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:E,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Normal",children:"Normal"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),n.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:E,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To"," ",d?.role!=="Sales"&&n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(J_,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:d?.role==="Sales"?`${d.first_name} ${d.last_name}`:"Search an account...",getLabel:$=>`${$.first_name} ${$.last_name}`,onChange:$=>r(R=>({...R,assignedTo:$})),disabled:l||d?.role==="Sales",required:d?.role!=="Sales",isSubmitted:_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",value:i.status,onChange:E,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Not started",children:"Not started"}),n.jsx("option",{value:"In progress",children:"In Progress"}),n.jsx("option",{value:"Deferred",children:"Deferred"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),!l&&n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{t(),k(!1),v({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:o?"Update Task":"Create Task"})]})]})]})})})})})]})})}function J_({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(w=>String(w.id)===String(t)),N=b?s(b):"",v=l&&c&&!t,j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const F7=["Not started","In progress","Deferred","Completed"],U7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},IZ=e=>e&&(U7[e]||U7[String(e).toUpperCase()])||"Not started",zRe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},B7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},FRe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),IZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,h=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:h}},URe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=H=>{if(!H)return"";const Q=String(H).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(H)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,h=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,b=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",E="",_="Lead",k="",T="",O="";const $=c(),R=b(),P=l(),I=x();if($){w="Account",_="Account",k=R,S=String($);const H=d(),Q=u(),G=N(),K=v(),W=h(),J=j();H?(A="Contact",T="Contact",O=G,E=String(H)):Q?(T="Deal",A="Deal",O=K,E=String(Q)):W&&(T="Quote",A="Quote",O=J,E=String(W))}else P?(_="Lead",k=I,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:IZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:k,relatedType2Text:T,relatedTo2Text:O,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:E}};function BRe(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,h]=f.useState([]),[p,x]=f.useState(!0),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[A,E]=f.useState([]),[_,k]=f.useState(1),[T,O]=f.useState(10),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState([]),G=wt(),K=Zt(),[W,J]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[Te,ee]=f.useState(null);f.useEffect(()=>{const V=K.state?.openTaskModal,ne=K.state?.initialTaskData,se=K.state?.taskID;V?(i(!0),ne&&J(Ee=>({...Ee,...ne})),G(K.pathname,{replace:!0,state:{}})):se&&(ee(se),G(K.pathname,{replace:!0,state:{}}))},[K,G]),f.useEffect(()=>{if(Te&&u.length>0&&!p){const V=u.find(ne=>ne.id===Te);V?le(V,!0):q.error("Task not found."),ee(null)}},[Te,u,p]);const U=async()=>{try{const V=await te.get("/users/all");E(Array.isArray(V.data)?V.data:[])}catch(V){console.error("Failed to fetch users:",V),q.error("Failed to fetch users.")}},je=async()=>{try{x(!0);const V=await te.get("/tasks/all"),se=(Array.isArray(V.data)?V.data:[]).map(URe);se.sort((Ee,Ie)=>{const pe=Ee.createdAt?new Date(Ee.createdAt):0;return(Ie.createdAt?new Date(Ie.createdAt):0)-pe}),h(se),a==="list"&&k(1)}catch(V){console.error("Failed to load tasks:",V),q.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{if(!t&&e){U(),je();const V=cN(e.id),ne=new WebSocket(V);return ne.onopen=()=>{console.log(" Connected to task notifications")},ne.onmessage=se=>{try{const Ee=JSON.parse(se.data);Ee.type==="task_status_updated"&&(q.info(` ${Ee.message}`,{position:"top-right",autoClose:4e3}),je())}catch(Ee){console.error("Error parsing notification:",Ee)}},ne.onerror=se=>{console.error(" WebSocket error:",se)},ne.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{ne&&ne.readyState===WebSocket.OPEN&&ne.close()}}},[t,e]);const be=()=>{l(null),J({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(V=null,ne=!1)=>{l(V),d(ne),V?J({id:V.id,subject:V.title||"",description:V.description||"",priority:V.priority||"Normal",status:V.status||"Not started",dueDate:zRe(V.dueDate),assignedTo:V.assignedToId?String(V.assignedToId):"",assignedToName:V.assignedToName||"",createdBy:V.createdBy||"",notes:V.notes||"",relatedType1Text:V.relatedType1Text||"",relatedTo1Text:V.relatedTo1Text||"",relatedType2Text:V.relatedType2Text||"",relatedTo2Text:V.relatedTo2Text||"",relatedType1:V.relatedType1||"",relatedTo1:V.relatedTo1||"",relatedType2:V.relatedType2||"",relatedTo2:V.relatedTo2||""}):be(),i(!0)},Ce=()=>{i(!1),l(null),d(!1),be()},Se=async V=>{const ne=FRe(V);try{o&&!c?(await te.put(`/tasks/${o.id}`,ne),q.success("Task updated successfully.")):(await te.post("/tasks/create",ne),q.success("Task created successfully.")),i(!1),await je()}catch(se){console.error("Failed to save task:",se);const Ee=se.response?.data?.detail||"Failed to save task.";q.error(Ee)}},Oe=V=>{V&&R({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:V.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:V.id}})},ge=()=>{if(ke.every(V=>H.includes(V.id)))Q(H.filter(V=>!ke.map(ne=>ne.id).includes(V)));else{const V=ke.map(ne=>ne.id);Q([...new Set([...H,...V])])}},He=V=>{Q(ne=>ne.includes(V)?ne.filter(se=>se!==V):[...ne,V])},Ne=async()=>{H.length!==0&&R({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:H.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${H.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:H}})},he=async()=>{if(!$?.action){R(null);return}const{action:V}=$;I(!0);try{V.type==="delete"?(await te.delete(`/tasks/${V.targetId}`),q.success("Task deleted successfully."),await je()):V.type==="bulk-delete"&&(await te.delete("/tasks/admin/bulk-delete",{data:{task_ids:V.task_ids}}),q.success(`Successfully deleted ${V.task_ids.length} tasks`),Q([]),await je())}catch(ne){console.error("Task action failed:",ne),q.error("Failed to delete task.")}finally{I(!1),R(null)}},Z=()=>{P||R(null)},_e=f.useMemo(()=>{const V=b.trim().toLowerCase();return[...u].sort((se,Ee)=>{const Ie=se.createdAt?new Date(se.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-Ie}).filter(se=>{const Ee=V===""||se.title?.toLowerCase().includes(V)||se.description?.toLowerCase().includes(V)||se.assignedToName?.toLowerCase().includes(V)||se.createdBy?.toLowerCase().includes(V),Ie=v==="Filter by Status"||se.status===v,pe=w==="Filter by Priority"||se.priority===w;return Ee&&Ie&&pe})},[u,b,v,w]);f.useEffect(()=>{k(1)},[b,v,w,a,T]),f.useEffect(()=>{if(a==="list"){const V=_e.length===0?1:Math.ceil(_e.length/T);_>V&&k(V)}},[_e.length,_,a,T]);const ke=f.useMemo(()=>{if(a==="board")return _e;const V=(_-1)*T;return _e.slice(V,V+T)},[_e,_,a,T]),ze=f.useMemo(()=>{const V=new Date;return[{title:"To Do",value:u.filter(ne=>ne.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ne=>ne.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ne=>ne.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ne=>ne.dueDate&&new Date(ne.dueDate)<V&&ne.status!=="Completed").length,icon:Wu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ne=>ne.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),tt=V=>V.dueDate&&new Date(V.dueDate)<new Date&&V.status!=="Completed",De=V=>{switch(V.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},at=V=>{switch(V){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},et=V=>{switch(V){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ze.map(V=>n.jsx(HRe,{...V},V.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:b,onChange:V=>N(V.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:V=>j(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),F7.map(V=>n.jsx("option",{children:V},V))]}),n.jsxs("select",{value:w,onChange:V=>S(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(_e.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:F7.map(V=>{const ne=ke.filter(se=>se.status===V);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:V}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ne.length})]}),n.jsx("div",{className:`space-y-3 ${ne.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ne.length>0?ne.map(se=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(se)}`,onClick:()=>le(se,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:se.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",se.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",se.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:tt(se)?"text-red-600":"text-gray-600",children:se.dateAssigned?B7(se.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),le(se)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})}),n.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),Oe(se)},className:"text-red-500 hover:text-red-700",children:n.jsx(Gt,{})})]})]},se.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},V)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ke.length>0&&ke.every(V=>H.includes(V.id)),onChange:ge})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:H.length>0?n.jsx("button",{onClick:Ne,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${H.length} selected tasks`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:ke.length>0?ke.map(V=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:ne=>ne.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:H.includes(V.id),onChange:()=>He(V.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>le(V,!0),children:V.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>le(V,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${at(V.status||"Not started")}`,children:V.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>le(V,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${et(V.priority||"Low")}`,children:V.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>le(V,!0),children:V.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${tt(V)?"text-red-600 font-medium":""}`,onClick:()=>le(V,!0),children:V.dateAssigned?B7(V.dateAssigned):""}),n.jsx("td",{})]},V.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:_e.length,pageSize:T,currentPage:_e.length===0?0:_,onPrev:()=>k(V=>Math.max(V-1,1)),onNext:()=>k(V=>Math.min(V+1,Math.max(1,Math.ceil(_e.length/T)||1))),onPageSizeChange:V=>{O(V),k(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Ce,onSave:Se,onEdit:()=>d(!1),setFormData:J,formData:W,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Oe}),$&&n.jsx(qRe,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:he,onCancel:Z,loading:P})]})}function HRe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function qRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function WRe(e){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const eA={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function GRe({label:e,options:t,selectedValues:a,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:o=!1,required:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null);f.useEffect(()=>{function j(w){p.current&&!p.current.contains(w.target)&&(d(!1),h(""))}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const x=t.filter(j=>j.label.toLowerCase().includes(u.toLowerCase())),b=j=>{const w=a.includes(j);let S;w?S=a.filter(A=>A!==j):S=[...a,j],s(S)},N=(j,w)=>{j.stopPropagation(),s(a.filter(S=>S!==w))},v=t.filter(j=>a.includes(j.value));return n.jsxs("div",{className:"relative",ref:p,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsxs("div",{onClick:()=>!r&&d(!c),className:`w-full border ${l&&o&&a.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[a.length===0&&n.jsx("span",{className:"text-gray-400 select-none",children:i}),v.map(j=>n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[j.label,!r&&n.jsx(Qt,{className:"cursor-pointer hover:text-indigo-900",onClick:w=>N(w,j.value)})]},j.value)),n.jsx("div",{className:"ml-auto text-gray-400",children:n.jsx(Tt,{})})]}),c&&!r&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[n.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:n.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[n.jsx(Wt,{className:"text-gray-400 mr-2"}),n.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:u,onChange:j=>h(j.target.value),autoFocus:!0})]})}),n.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(j=>{const w=a.includes(j.value);return n.jsxs("div",{onClick:()=>b(j.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${w?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[n.jsx("span",{children:j.label}),w&&n.jsx(tL,{className:"text-indigo-600"})]},j.value)}):n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function $c(){f.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=wt(),{id:t}=Bo(),[a,s]=f.useState(""),[r,i]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState(null),[u,h]=f.useState(!1),[p,x]=f.useState([]),[b,N]=f.useState(!1),[v,j]=f.useState([]),[w,S]=f.useState(eA),[A,E]=f.useState(!1),[_,k]=f.useState(!1),[T,O]=f.useState(null),[$,R]=f.useState(null),[P,I]=f.useState("board"),[H,Q]=f.useState(null),[G,K]=f.useState(!1),[W,J]=f.useState(null),[Te,ee]=f.useState(1),[U,je]=f.useState(10),[be,le]=f.useState([]),Ce=f.useRef(!1),{userRole:Se}=Qs(),Oe=f.useMemo(()=>{const ve=new Map;return p.forEach(ae=>{const Fe=`${ae.name}-${ae.manager_id||"no-manager"}`;if(!ve.has(Fe))ve.set(Fe,{...ae,assigned_users_list:ae.assigned_to?[ae.assigned_to]:[]});else{const ye=ve.get(Fe);ae.assigned_to&&(ye.assigned_users_list.some(We=>We.id===ae.assigned_to.id)||ye.assigned_users_list.push(ae.assigned_to))}}),Array.from(ve.values())},[p]),ge=f.useMemo(()=>{const ve=a.trim().toLowerCase(),ae=r.trim().toLowerCase(),Fe=o.trim();return[...Oe].sort((We,it)=>{const ht=We?.created_at?new Date(We.created_at):0;return(it?.created_at?new Date(it.created_at):0)-ht}).filter(We=>{const it=We.name?.toLowerCase()||"",ht=We.description?.toLowerCase()||"",Ae=We.managed_by?`${We.managed_by.first_name} ${We.managed_by.last_name}`.toLowerCase():"",Je=We.status?.toString().toLowerCase()||"",ce=We.assigned_users_list.map(oe=>`${oe.first_name} ${oe.last_name}`.toLowerCase()).join(" "),de=ve===""||[it,ht,Ae,Je,ce].some(oe=>oe&&oe.includes(ve)),D=ae===""||Je===ae,B=Fe===""||String(We.managed_by?.id||"")===Fe||We.assigned_users_list.some(oe=>String(oe.id)===Fe);return de&&D&&B})},[Oe,a,r,o]);f.useEffect(()=>{if(Ce.current){Ce.current=!1;return}if(t&&Oe.length>0&&!A&&!u&&!_){const ve=Oe.find(ae=>ae.id===parseInt(t));ve&&d(ve)}!t&&!A&&!u&&d(null)},[t,Oe,A,u,_]),f.useEffect(()=>{ee(1)},[a,r,o]),f.useEffect(()=>{ee(ve=>{const ae=Math.max(1,Math.ceil(ge.length/U)||1);return ve>ae?ae:ve})},[ge.length,U]);const He=async()=>{try{const ve=await te.get("/users/read/territory");j(ve.data)}catch(ve){console.error("Error fetching users:",ve)}},Ne=async()=>{N(!0);try{const ve=await te.get("/territories/fetch"),ae=Array.isArray(ve.data)?ve.data:[];x(ae),console.log(ve.data)}catch(ve){console.error("Error fetching territories:",ve)}finally{N(!1)}};f.useEffect(()=>{He(),Ne()},[]);const he=ve=>{const{name:ae,value:Fe}=ve.target;S(ye=>({...ye,[ae]:Fe}))},Z=ve=>{S(ae=>({...ae,user_ids:ve}))},_e=()=>{S(eA),E(!1),O(null),h(!0)},ke=(ve=!0)=>{h(!1),E(!1),O(null),S(eA)},ze=ve=>{if(!ve)return;const ae=ve.assigned_users_list?ve.assigned_users_list.map(Fe=>String(Fe.id)):[];S({name:ve.name||"",description:ve.description||"",manager_id:ve.managed_by?String(ve.managed_by.id):"",user_ids:ae,company_id:ve.company_id?String(ve.company_id):""}),E(!0),O(ve.id),d(null),h(!0)},[tt,De]=f.useState(!1),at=ve=>{ve.preventDefault(),De(!0);const ae=w.name.trim();if(!ae){q.error("Territory name is required.");return}if(!w.manager_id){q.error("Territory manager is required.");return}if(w.user_ids.length===0){q.error("Please assign at least one user.");return}let Fe=w.company_id?Number(w.company_id):null;if(!Fe&&w.user_ids.length>0){const it=w.user_ids[0],ht=v.find(Ae=>String(Ae.id)===String(it));ht&&ht.company&&(Fe=ht.company.id)}const ye={name:ae,description:w.description?.trim()||"",manager_id:w.manager_id?Number(w.manager_id):null,user_ids:w.user_ids.map(it=>Number(it)),company_id:Fe},We=A&&T?"update":"create";Q({title:We==="create"?"Confirm New Territory":"Confirm Update",message:n.jsxs("span",{children:[We==="create"?"Create":"Update"," territory ",n.jsx("span",{className:"font-semibold",children:ae})," with ",ye.user_ids.length," assigned users?"]}),confirmLabel:We==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:We,payload:ye,targetId:T,name:ae}})},et=ve=>{ve&&Q({title:"Delete Territory Group",message:n.jsxs("span",{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:ve.name}),"?",n.jsx("br",{}),n.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",ve.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ve.id,name:ve.name}})},V=async()=>{be.length!==0&&Q({title:"Delete Territories",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:be.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${be.length} Territory(ies)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:be}})},ne=ve=>{if(ve.target.checked){const ae=pe.map(Fe=>Fe.id);le(ae)}else le([])},se=ve=>{le(ae=>ae.includes(ve)?ae.filter(Fe=>Fe!==ve):[...ae,ve])},Ee=async()=>{if(!H?.action){Q(null);return}const{action:ve}=H,{type:ae,payload:Fe,targetId:ye,name:We}=ve;K(!0);try{ae==="create"?(k(!0),await te.post("/territories/assign",Fe),q.success(`Territory "${We}" created.`),await Ne(),await He(),ke(!1)):ae==="update"?(k(!0),await te.put(`/territories/${ye}`,Fe),q.success(`Territory "${We}" updated.`),Ce.current=!0,ke(!1),d(null),t&&e("/admin/territory"),await Ne(),await He()):ae==="delete"?(J(ye),await te.delete(`/territories/${ye}`),q.success(`Territory "${We}" deleted.`),await Ne(),c?.id===ye&&d(null)):ae==="bulk-delete"&&(await te.delete("/territories/admin/bulk-delete",{data:{territory_ids:ve.territory_ids}}),q.success(`Successfully deleted ${ve.territory_ids.length} territories`),le([]),await Ne())}catch(it){console.error(it),q.error("An error occurred.")}finally{k(!1),De(!1),J(null),K(!1),Q(null)}},Ie=()=>{G||Q(null)},pe=f.useMemo(()=>{if(P==="board")return ge;const ve=(Te-1)*U;return ge.slice(ve,ve+U)},[ge,Te,U,P]),Be=ge.length>0,$e=()=>ee(ve=>Math.max(ve-1,1)),Ve=()=>ee(ve=>Math.min(ve+1,Math.ceil(ge.length/U)||1)),ut=ve=>!ve||ve.length===0?"Unassigned":ve.length===1?`${ve[0].first_name} ${ve[0].last_name}`:`${ve[0].first_name} ${ve[0].last_name} +${ve.length-1} more`;return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading territories..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[n.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[n.jsx(Xl,{className:"mr-2 text-blue-600"})," Territory"]}),n.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(Se.toLowerCase())&&(Array.isArray(v)&&v.length>0?n.jsxs("button",{onClick:_e,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[n.jsx(yn,{})," Create Territory"]}):n.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[n.jsx(WRe,{})," Add users to assign territories"]}))})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[n.jsx(Wt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:a,onChange:ve=>s(ve.target.value)})]}),Se.toLowerCase()!=="sales"&&n.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:n.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:o,onChange:ve=>l(ve.target.value),children:[n.jsx("option",{value:"",children:"Filter by Users"}),v.map(ve=>n.jsxs("option",{value:String(ve.id),children:[ve.first_name," ",ve.last_name]},ve.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>I("board"),className:`px-4 py-2 rounded-full text-sm ${P==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),n.jsx("button",{onClick:()=>I("list"),className:`px-4 py-2 rounded-full text-sm ${P==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),P==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Be?pe.map(ve=>n.jsxs("div",{onClick:()=>{d(ve);let ae;Se.toLowerCase()==="ceo"||Se.toLowerCase()==="admin"?ae="admin":Se.toLowerCase()==="group manager"||Se.toLowerCase()==="group_manager"?ae="group-manager":Se.toLowerCase()==="manager"?ae="manager":ae="sales",e(`/${ae}/territory/${ve.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:ve.name}),ve.description&&n.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:ve.description}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[n.jsx(nn,{})," ",ut(ve.assigned_users_list)]}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),n.jsx("div",{className:"text-gray-400 text-xs text-right",children:ve.created_at?new Date(ve.created_at).toLocaleDateString():""})]},ve.id)):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),P==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[Se.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:pe.length>0&&pe.every(ve=>be.includes(ve.id)),onChange:ne})}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Manager"}),Se.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:be.length>0?n.jsx("button",{onClick:V,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${be.length} selected territories`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:Be?pe.map(ve=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[Se.toLowerCase()!=="sales"&&n.jsx("td",{className:"py-3 px-4",onClick:ae=>ae.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:be.includes(ve.id),onChange:()=>se(ve.id)})}),n.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{d(ve);let ae;Se.toLowerCase()==="ceo"||Se.toLowerCase()==="admin"?ae="admin":Se.toLowerCase()==="group manager"||Se.toLowerCase()==="group_manager"?ae="group-manager":Se.toLowerCase()==="manager"?ae="manager":ae="sales",e(`/${ae}/territory/${ve.id}`)},children:ve.name}),n.jsx("td",{className:"py-3 px-4",children:ut(ve.assigned_users_list)}),n.jsx("td",{className:"py-3 px-4",children:ve.managed_by?`${ve.managed_by.first_name}`:""}),n.jsx("td",{})]},ve.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[n.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{d(null);let ve;Se.toLowerCase()==="ceo"||Se.toLowerCase()==="admin"?ve="admin":Se.toLowerCase()==="group manager"||Se.toLowerCase()==="group_manager"?ve="group-manager":Se.toLowerCase()==="manager"?ve="manager":ve="sales",e(`/${ve}/territory`)},children:n.jsx(Qt,{size:24})}),n.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),n.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Manager"}),n.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Assigned To"}),n.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(ve=>n.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[n.jsx(nn,{})," ",ve.first_name," ",ve.last_name]},ve.id)):"Unassigned"})]})]}),!["sales","manager"].includes(Se.toLowerCase())&&n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:()=>ze(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(ma,{})," Edit"]}),n.jsxs("button",{onClick:()=>et(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(Gt,{})," Delete"]})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[n.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{ke(),De(!1)},children:[n.jsx(Qt,{size:22})," "]}),n.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:A?"Edit Territory":"Create Territory"}),n.jsxs("form",{className:"space-y-4",onSubmit:at,noValidate:!0,children:[n.jsx(VRe,{label:"Territory Name",name:"name",value:w.name,onChange:he,required:!0,isSubmitted:tt}),n.jsx(YRe,{label:"Territory Manager",name:"manager_id",value:w.manager_id,onChange:he,options:[{value:"",label:"Assign Manager"},...v.map(ve=>({value:String(ve.id),label:`${ve.first_name} ${ve.last_name}`}))],required:!0,isSubmitted:tt}),n.jsx(GRe,{label:n.jsxs(n.Fragment,{children:["Assign Users ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:v.map(ve=>({value:String(ve.id),label:`${ve.first_name} ${ve.last_name}`})),selectedValues:w.user_ids,onChange:Z,required:!0,isSubmitted:tt}),n.jsx(QRe,{label:"Description",name:"description",value:w.description,onChange:he}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>{ke(),De(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-tertiary text-white rounded",children:_?"Saving...":"Save Territory"})]})]})]})}),P==="list"&&n.jsx(rn,{className:"mt-4",totalItems:ge.length,pageSize:U,currentPage:Te,onPrev:$e,onNext:Ve,onPageSizeChange:ve=>{je(ve),ee(1)},label:"territories"}),H&&n.jsx(KRe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:Ee,onCancel:Ie,loading:G})]})})}function VRe({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${d}
`})]})}function YRe({label:e,name:t,value:a,onChange:s,options:r,disabled:i=!1,required:o=!1,isSubmitted:l=!1}){const c=l&&o&&!a;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))})]})}function QRe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function KRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const XRe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"},{value:"INACTIVE",label:"INACTIVE"}],ZRe=e=>e?String(e).toUpperCase():"",su=e=>{const t=ZRe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":t==="INACTIVE"?"INACTIVE":"PLANNED"},tA=e=>{const t=su(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":t==="INACTIVE"?"INACTIVE":"--"},H7=e=>{switch(su(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";case"INACTIVE":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},q7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function W7(){const[e,t]=f.useState(!1),[a,s]=f.useState(null),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]),[p,x]=f.useState(null),[b,N]=f.useState(!1),[v,j]=f.useState(null),[w,S]=f.useState(!1),[A,E]=f.useState(!1),[_,k]=f.useState("PLANNED"),[T,O]=f.useState(!1),[$,R]=f.useState(!1),[P,I]=f.useState(10),[H,Q]=f.useState(1),[G,K]=f.useState([]),[W,J]=f.useState(null),{comments:Te,addComment:ee,refresh:U}=Ta({relatedType:"call",relatedId:a?.id});f.useEffect(()=>{a?.id&&U()},[a?.id,U]),zs();const je=wt(),be=Zt(),le=B=>{if(!B)return"";const oe=String(B).split("-");return oe.length===3?`${oe[0]}-${oe[2]}`:String(B)},Se={subject:"",call_time:(()=>{const B=new Date,oe=B.getFullYear(),ue=String(B.getMonth()+1).padStart(2,"0"),ie=String(B.getDate()).padStart(2,"0");return`${oe}-${ue}-${ie}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Oe,ge]=f.useState(Se);f.useEffect(()=>{const B=be.state,oe=B?.callID;if(oe&&!B?.openCallModal){J(oe),je(be.pathname,{replace:!0,state:{}});return}!B?.openCallModal||!B?.initialCallData||B.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||B.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),ge(ue=>({...ue,...B.initialCallData,relatedTo1:B.initialCallData.relatedTo1?String(B.initialCallData.relatedTo1):"",relatedTo2:B.initialCallData.relatedTo2?String(B.initialCallData.relatedTo2):""})),je(be.pathname,{replace:!0,state:{}}))},[be.state,o]),f.useEffect(()=>{if(W&&u.length>0&&!$){const B=u.find(oe=>oe.id===W);B?s(B):q.error("Call not found."),J(null)}},[W,u,$]);const He=async()=>{try{R(!0);const B=await te.get("/calls/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((ie,Pe)=>{const xe=ie?.created_at?new Date(ie.created_at):0;return(Pe?.created_at?new Date(Pe.created_at):0)-xe});h(ue)}catch(B){console.error("Error fetching calls:",B),q.error("Failed to load calls")}finally{R(!1)}},Ne=async()=>{try{const B=await te.get("/users/all");x(B.data)}catch(B){console.error("Error fetching users: ",B)}};f.useEffect(()=>{Ne(),He()},[]);const[he,Z]=f.useState(""),[_e,ke]=f.useState("Filter by Status"),[ze,tt]=f.useState("Filter by Users");f.useEffect(()=>{Q(1)},[he,_e,ze,P]);const De=f.useMemo(()=>u.filter(B=>{const oe=!he||[B.subject,B.notes,B.lead?.title,B.account?.name,B.contact?.first_name,B.contact?.last_name,B.deal?.name].some(xe=>xe&&String(xe).toLowerCase().includes(he.toLowerCase())),ue=_e==="Filter by Status"||su(B.status)===_e,ie=B.call_assign_to?`${B.call_assign_to.first_name} ${B.call_assign_to.last_name}`:"";return oe&&ue&&(ze==="Filter by Users"||ie===ze)}),[u,he,_e,ze]),at=f.useMemo(()=>{const B=(H-1)*P;return De.slice(B,B+P)},[De,H,P]),et=Array.isArray(p)?p.map(B=>({id:B.id,name:`${B.first_name} ${B.last_name}`})):[],V=()=>Q(B=>Math.max(1,B-1)),ne=()=>Q(B=>Math.min(B+1,Math.ceil(De.length/P)||1)),se=B=>{if(B.target.checked){const oe=at.map(ue=>ue.id);K(oe)}else K([])},Ee=B=>{K(oe=>oe.includes(B)?oe.filter(ue=>ue!==B):[...oe,B])},Ie=u.length,pe=u.filter(B=>su(B.status)==="PLANNED").length,Be=u.filter(B=>su(B.status)==="HELD").length,$e=u.filter(B=>su(B.status)==="NOT_HELD").length,Ve=[{title:"Total",value:Ie,icon:$s,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:pe,icon:Gs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Be,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:$e,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}],[ut,ve]=f.useState("Overview"),ae=B=>{const{name:oe,value:ue}=B.target;ge(ie=>{const Pe={...ie,[oe]:ue};return oe==="relatedType1"&&(Pe.relatedTo1="",ue==="Lead"?(Pe.relatedType2=null,Pe.relatedTo2=null,d([])):ue==="Account"&&(Pe.relatedType2="Contact")),oe==="relatedType2"&&(Pe.relatedTo2=""),Pe})};f.useEffect(()=>{const B=async()=>{try{l([]);let oe;Oe.relatedType1==="Lead"?oe=await te.get("/leads/admin/getLeads"):Oe.relatedType1==="Account"&&(oe=await te.get("/accounts/admin/fetch-all")),oe&&Array.isArray(oe.data)?l(oe.data):l([])}catch(oe){console.error("Error fetching data:",oe),l([])}};Oe.relatedType1&&B()},[Oe.relatedType1]),f.useEffect(()=>{const B=async()=>{try{d([]);let oe;if(Oe.relatedType1==="Account"&&Oe.relatedTo1)Oe.relatedType2==="Contact"?oe=await te.get(`/contacts/from-acc/${Oe.relatedTo1}`):Oe.relatedType2==="Deal"?oe=await te.get(`/deals/from-acc/${Oe.relatedTo1}`):Oe.relatedType2==="Quote"&&(oe=await te.get(`/quotes/from-acc/${Oe.relatedTo1}`));else{d([]);return}oe&&Array.isArray(oe.data)?d(oe.data):d([])}catch(oe){console.error("Error fetching data:",oe),d([])}};Oe.relatedType2&&B()},[Oe.relatedType2,Oe.relatedTo1,Oe.relatedType1]);const[Fe,ye]=f.useState(!1),We=B=>{B.preventDefault(),ye(!0);const oe=Oe.subject;if(!oe||oe.trim()===""){q.error("Subject is required.");return}if(!Oe.relatedTo1){q.error(`Please select a ${Oe.relatedType1||"Lead/Account"}.`);return}if(!Oe.assigned_to){q.error("Subject is required.");return}const ie={...Oe,duration_minutes:Oe.duration_minutes?parseInt(Oe.duration_minutes,10):null,relatedTo1:Oe.relatedTo1?parseInt(Oe.relatedTo1,10):null,relatedTo2:Oe.relatedType1==="Lead"?null:Oe.relatedTo2?parseInt(Oe.relatedTo2,10):null,relatedType2:Oe.relatedType1==="Lead"?null:Oe.relatedType2,assigned_to:Oe.assigned_to?parseInt(Oe.assigned_to,10):null},Pe=b&&v?"update":"create",xe=(Oe.subject||"").trim()||"Untitled Call";i({title:Pe==="create"?"Confirm New Call":"Confirm Update",message:Pe==="create"?`Create "${xe}"?`:`Save changes to "${xe}"?`,confirmLabel:Pe==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Pe,payload:ie,targetId:v||null,name:xe}})},it=B=>s(B),ht=()=>{t(!1),N(!1),j(null)},Ae=async()=>{G.length!==0&&i({title:"Delete Calls",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:G}})},Je=async()=>{if(!r?.action){i(null);return}const{action:B}=r,{type:oe,payload:ue,targetId:ie,name:Pe}=B;E(!0);try{if(oe==="create")S(!0),await te.post("/calls/create",ue),q.success(`Call "${Pe}" created successfully.`),t(!1),ge(Se),N(!1),j(null),await He();else if(oe==="update"){if(!ie)throw new Error("Missing call identifier for update.");S(!0),await te.put(`/calls/${ie}`,ue),q.success(`Call "${Pe}" updated successfully.`),t(!1),ge(Se),N(!1),j(null),await He()}else if(oe==="delete"){if(!ie)throw new Error("Missing call identifier for deletion.");await te.delete(`/calls/${ie}`),q.success(`Call "${Pe}" deleted successfully.`),a?.id===ie&&s(null),await He()}else oe==="bulk-delete"&&(await te.delete("/calls/admin/bulk-delete",{data:{call_ids:G}}),q.success(`Successfully deleted ${G.length} calls`),K([]),await He())}catch(xe){const fe=oe==="create"?"Failed to create call. Please review the details and try again.":oe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",qe=xe?.response?.data?.detail||fe;q.error(qe)}finally{(oe==="create"||oe==="update")&&S(!1),E(!1),i(null)}},ce=()=>{A||i(null)},X=async()=>{if(a?.id)try{O(!0),await te.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${tA(_)}`),h(B=>Array.isArray(B)?B.map(oe=>oe.id===a.id?{...oe,status:_}:oe):B),s(null)}catch(B){const oe=B.response?.data?.detail||"Failed to update status.";q.error(oe)}finally{O(!1)}};f.useEffect(()=>{a&&k(su(a.status))},[a]);const de=a?n.jsxs("div",{id:"callModalBackdrop",onClick:B=>B.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[$&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${H7(a.status)}`,children:tA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const B=xe=>{if(!xe)return"";const fe=new Date(xe),qe=fe.getFullYear(),Ze=String(fe.getMonth()+1).padStart(2,"0"),pt=String(fe.getDate()).padStart(2,"0"),Nt=String(fe.getHours()).padStart(2,"0"),St=String(fe.getMinutes()).padStart(2,"0");return`${qe}-${Ze}-${pt}T${Nt}:${St}`},oe=a.lead?"Lead":a.account?"Account":"Lead",ue=a.lead?a.lead.id:a.account?a.account.id:null,ie=oe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",Pe=oe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;ge({subject:a.subject||"",call_time:B(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:oe,relatedType2:ie,relatedTo1:ue?String(ue):"",relatedTo2:Pe?String(Pe):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const B=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${B}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:B}})},children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(B=>n.jsx("button",{onClick:()=>ve(B),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ut===B?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:B},B))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ut==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(oo,{label:"Call Time",value:q7(a.call_time)}),n.jsx(oo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(oo,{label:"Direction",value:a.direction||"--"}),n.jsx(oo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(oo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(oo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(oo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(oo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(oo,{label:"Quote",value:le(a.quote.quote_id)}),n.jsx(oo,{label:"Created At",value:q7(a.created_at)})]})}),ut==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Aa,{comments:Te,onAddComment:ee})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:B=>k(B.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:X,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,D=e?n.jsx("div",{id:"modalBackdrop",onClick:B=>B.target.id==="modalBackdrop"&&ht(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{ht(),ye(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:We,noValidate:!0,children:[n.jsx(eze,{label:"Subject",className:"md:col-span-2",name:"subject",value:Oe.subject,onChange:ae,isSubmitted:Fe,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:ae,value:Oe.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w||b,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(nA,{items:Array.isArray(o)?o:[],value:Oe.relatedTo1??"",placeholder:`Search ${Oe.relatedType1||"here"}...`,getLabel:B=>Oe.relatedType1==="Lead"?B.title:B.name??"",onChange:B=>ge(oe=>({...oe,relatedTo1:B})),required:!0,isSubmitted:Fe,disabled:w||b})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:ae,value:Oe.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Oe.relatedType1==="Lead"||w||b,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(nA,{disabled:Oe.relatedType1==="Lead"||w||b,items:Array.isArray(c)?c:[],value:Oe.relatedTo2??"",placeholder:Oe.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Oe.relatedType2||"Contact"}...`:`No ${Oe.relatedType2||""} data found`,getLabel:B=>Oe.relatedType2==="Contact"?`${B.first_name??""} ${B.last_name??""}`.trim():Oe.relatedType2==="Quote"?le(B.quote_id)??"":B.name??"",onChange:B=>ge(oe=>({...oe,relatedTo2:B}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Oe.call_time,onChange:ae,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Oe.duration_minutes,onChange:ae,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" ","Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(nA,{items:Array.isArray(p)?p:[],value:Oe.assigned_to??"",placeholder:"Search an account...",getLabel:B=>`${B.first_name} ${B.last_name}`,onChange:B=>ge(oe=>({...oe,assigned_to:B})),required:!0,isSubmitted:Fe})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:ae,value:Oe.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:ae,value:Oe.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(tze,{className:"col-span-2",label:"Notes",value:Oe.notes,onChange:ae,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),ye(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":b?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx($s,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ge(Se),N(!1),j(null),t(!0),ye(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ve.map(B=>n.jsx(JRe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:he,onChange:B=>Z(B.target.value)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:_e,onChange:B=>ke(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),XRe.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))]}),n.jsxs("select",{value:ze,onChange:B=>tt(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),et.map(B=>n.jsx("option",{value:B.name,children:B.name},B.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:at.length>0&&G.length===at.length,onChange:se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:G.length>0?n.jsx("button",{onClick:Ae,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected calls`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:$?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):at.length>0?at.map(B=>n.jsxs("tr",{onClick:()=>it(B),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:oe=>oe.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:G.includes(B.id),onChange:()=>Ee(B.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:B.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[B.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.lead.title}),B.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.account.name}),B.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[B.contact.first_name," ",B.contact.last_name]}),B.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.deal.name}),B.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:le(B.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:B.call_time?new Date(B.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:B?.call_assign_to?`${B.call_assign_to.first_name} ${B.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H7(B.status)}`,children:tA(B.status)})}),n.jsx("td",{className:"py-3 px-4"})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:De.length,pageSize:P,currentPage:H,onPrev:V,onNext:ne,onPageSizeChange:B=>{I(B),Q(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),de,D,r&&n.jsx(nze,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Je,onCancel:ce,loading:A})]})}function JRe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function eze({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function tze(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function oo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function nze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function nA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(w=>String(w.id)===String(t)),N=b?s(b):"",v=l&&c&&!t,j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const n1=({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:o=[]})=>{const c=(()=>{const k=new Date,T=k.getFullYear(),O=String(k.getMonth()+1).padStart(2,"0"),$=String(k.getDate()).padStart(2,"0");return{startTime:`${T}-${O}-${$}T08:00`,endTime:`${T}-${O}-${$}T09:00`}})(),[d,u]=f.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[h,p]=f.useState([]),[x,b]=f.useState([]);f.useEffect(()=>{t!==void 0&&a&&(!t.startTime||!t.endTime)&&a(k=>({...k,startTime:k.startTime||c.startTime,endTime:k.endTime||c.endTime}))},[]);const N=k=>{if(!k)return"";const T=String(k).split("-");return T.length===3?`${T[0]}-${T[2]}`:String(k)},v=t!==void 0?t:d,j=a||u,{userRole:w}=Qs();f.useEffect(()=>{const k=async()=>{try{p([]);let T;v.relatedType1==="Lead"?T=await te.get("/leads/admin/getLeads"):v.relatedType1==="Account"&&(T=await te.get("/accounts/admin/fetch-all"));let O=[];if(T&&Array.isArray(T.data)&&(O=T.data),s&&v.relatedTo1)try{let $;v.relatedType1==="Lead"?$=await te.get(`/leads/get/${v.relatedTo1}`):v.relatedType1==="Account"&&($=await te.get(`/accounts/get/${v.relatedTo1}`)),$&&$.data&&(O.some(P=>String(P.id)===String(v.relatedTo1))||(O=[$.data,...O]))}catch($){console.error("Error fetching specific related item:",$)}p(O)}catch(T){console.error("Error fetching relatedTo1 data:",T),p([])}};v.relatedType1&&k()},[v.relatedType1,w,s,v.relatedTo1]),f.useEffect(()=>{const k=async()=>{try{if(b([]),v.relatedType1==="Account"&&v.relatedTo1){let T;v.relatedType2==="Contact"?T=await te.get(`/contacts/from-acc/${v.relatedTo1}`):v.relatedType2==="Deal"?T=await te.get(`/deals/from-acc/${v.relatedTo1}`):v.relatedType2==="Quote"&&(T=await te.get(`/quotes/from-acc/${v.relatedTo1}`)),T&&Array.isArray(T.data)?b(T.data):b([])}else b([])}catch(T){console.error("Error fetching relatedTo2 data:",T),b([])}};v.relatedType2&&k()},[v.relatedType2,v.relatedTo1,v.relatedType1]);const S=k=>{const{name:T,value:O}=k.target;j($=>{const R={...$,[T]:O};return T==="relatedType1"&&($.relatedType1!==O&&(R.relatedTo1=""),O==="Lead"?(R.relatedType2=null,R.relatedTo2=null,b([])):O==="Account"&&(R.relatedType2="Contact",R.relatedTo2="")),T==="relatedType2"&&$.relatedType2!==O&&(R.relatedTo2=""),R})},[A,E]=f.useState(!1),_=k=>{if(k.preventDefault(),E(!0),v.status==="--"){q.warn("Please select a valid status.");return}const T=v.subject;if(!T||T.trim()===""){q.error("Subject is required.");return}if(!v.assignedTo){q.error("Assigned To is required.");return}if(!v.relatedTo1){q.error(`Please select a ${v.relatedType1||"Lead/Account"}.`);return}r?r(v):e()};return n.jsx("div",{id:"modalBackdrop",onClick:k=>k.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:_,noValidate:!0,children:[n.jsx(lb,{label:"Subject",name:"subject",value:v.subject,onChange:S,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:A,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:S,value:v.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400",disabled:i,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-8 pl-8 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(aA,{items:Array.isArray(h)?h:[],disabled:i,value:v.relatedTo1??"",placeholder:`Search ${v.relatedType1||"here"}...`,getLabel:k=>v.relatedType1==="Lead"?k.title:k.name??"",onChange:k=>j(T=>({...T,relatedTo1:k})),required:!0,isSubmitted:A})]}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsx("div",{className:"relative w-25",children:n.jsxs("select",{name:"relatedType2",onChange:S,value:v.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||v.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]})}),n.jsx(aA,{items:Array.isArray(x)?x:[],value:v.relatedTo2??"",placeholder:v.relatedType1==="Lead"?"":x?.length?`Search ${v.relatedType2}...`:`No ${v.relatedType2} data found`,getLabel:k=>v.relatedType2==="Contact"?`${k.first_name??""} ${k.last_name??""}`.trim():v.relatedType2==="Quote"?N(k.quote_id)??"":k.name??"",onChange:k=>j(T=>({...T,relatedTo2:k})),disabled:v.relatedType1==="Lead"})]}),n.jsx(lb,{label:"Location",name:"location",className:"md:col-span-2",value:v.location,onChange:S,disabled:i}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[n.jsx(lb,{label:"Start Time",name:"startTime",type:"datetime-local",value:v.startTime,onChange:S,disabled:i}),n.jsx(lb,{label:"End Time",name:"endTime",type:"datetime-local",value:v.endTime,onChange:S,disabled:i})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(aA,{items:Array.isArray(o)?o:[],value:v.assignedTo??"",placeholder:"Search an account...",getLabel:k=>`${k.first_name} ${k.last_name}`,onChange:k=>j(T=>({...T,assignedTo:k})),disabled:w==="Sales",required:!0,isSubmitted:A})]}),n.jsx(aze,{label:"Status",name:"status",value:v.status,onChange:S,options:["--","Planned","Held","Not held"].map(k=>({value:k,label:k.replace("_"," ")})),disabled:i}),n.jsx(sze,{label:"Notes",name:"notes",value:v.notes,onChange:S,rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function lb({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function aze({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l="",isSubmitted:c=!1}){const d=c&&i&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,hasError:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))})]})}function sze({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function aA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(w=>String(w.id)===String(t)),N=b?s(b):"",v=l&&c&&!t,j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const pd=({meeting:e,onClose:t,onEdit:a,onDelete:s,onStatusUpdate:r,currentUser:i,isSalesView:o=!1})=>{wt();const[l,c]=f.useState("Overview"),d=A=>{if(!A)return"";const E=String(A).split("-");return E.length===3?`${E[0]}-${E[2]}`:String(A)},u=A=>{const E=(A||"").toUpperCase();return E==="PLANNED"||E==="IN PROGRESS"?"PLANNED":E==="HELD"||E==="DONE"?"HELD":E==="NOT HELD"?"NOT_HELD":"PLANNED"},h=A=>{const E=(A||"").toUpperCase();return E==="PLANNED"?"PLANNED":E==="HELD"?"HELD":E==="NOT HELD"||E==="NOT_HELD"?"NOT HELD":"PENDING"},[p,x]=f.useState(u(e?.status||"PENDING")),[b,N]=f.useState(!1),{comments:v,addComment:j,refresh:w}=Ta({relatedType:"meeting",relatedId:e?.id});if(f.useEffect(()=>{e?.id&&w()},[e?.id,w]),!e)return null;const S=A=>{const E=(A||"").toUpperCase(),_=E==="PLANNED"?"PENDING":E==="HELD"?"COMPLETED":E==="NOT_HELD"?"CANCELLED":E;switch(E){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(_){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),n.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${S(u(e.status))}`,children:u(e.status||"PENDING").replace("_"," ")})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:(!o||e.created_by===i?.id)&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{a&&a(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{s&&s(e)},className:`inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm text-white transition focus:outline-none ${o?"bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-400":"bg-red-500 hover:bg-red-600 focus:ring-2 focus:ring-red-400"}`,children:[o?n.jsx(qs,{className:"mr-2"}):n.jsx(Gt,{className:"mr-2"}),o?"Archive":"Delete"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(A=>n.jsx("button",{onClick:()=>c(A),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${l===A?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:A},A))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[l==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Start Time:"}),n.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"End Time:"}),n.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),n.jsx("p",{children:e.subject||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Location:"}),n.jsx("p",{children:e.location||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Lead:"}),n.jsx("p",{children:e.lead.title})]}),e.account&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:e.account.name})]}),e.contact&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:e.deal.name})]}),e.quote&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote:"}),n.jsx("p",{children:d(e.quote.quote_id)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u(e.status||"PENDING").replace("_"," ")})]})]})}),l==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]}),n.jsx(Aa,{comments:v,onAddComment:j})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:A=>x(A.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const A=h(p);if(u(e.status)!==p){N(!0);try{await r(e.id,A)}catch(E){console.error("Failed to update status:",E)}finally{N(!1)}}},disabled:p===e.status||b,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===e.status||b?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:b?"Updating...":"Update"})]})]})]})]})})})},$Z=e=>e?e.toUpperCase():"",cb=e=>{const t=$Z(e);return t==="INACTIVE"?"INACTIVE":t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},rze=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},ize=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},oze=e=>{const t=$Z(e);if(t==="INACTIVE")return"bg-gray-200 text-gray-700";switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},sA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},G7=()=>{const e=wt(),t=Zt(),[a]=zs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";f.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=f.useState([]),[l,c]=f.useState(!1),[d,u]=f.useState([]),[h,p]=f.useState(""),[x,b]=f.useState("Filter by Status"),[N,v]=f.useState(!1),[j,w]=f.useState(null),[S,A]=f.useState(1),[E,_]=f.useState(10),[k,T]=f.useState(sA),[O,$]=f.useState(!1),[R,P]=f.useState(null),[I,H]=f.useState(!1),[Q,G]=f.useState(null),[K,W]=f.useState(!1),[J,Te]=f.useState([]),[ee,U]=f.useState(null);f.useEffect(()=>{const De=t.state?.openMeetingModal,at=t.state?.initialMeetingData?.relatedTo||a.get("id"),et=t.state?.meetingID;De||at?(v(!0),t.state?.initialMeetingData&&T(V=>({...V,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):et&&(U(et),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),f.useEffect(()=>{if(ee&&i.length>0&&!l){const De=i.find(at=>at.id===ee);De?w(De):q.error("Meeting not found."),U(null)}},[ee,i,l]);const je=async()=>{if(s&&r){const De=sessionStorage.getItem("meetingDetailData");if(De)try{const at=JSON.parse(De);if(at.id===parseInt(s)){w(at),sessionStorage.removeItem("meetingDetailData");return}}catch(at){console.error(at)}}c(!0);try{const De=await te.get("/meetings/admin/fetch-all"),et=[...Array.isArray(De.data)?De.data:[]].sort((V,ne)=>{const se=V?.created_at?new Date(V.created_at).getTime():0;return(ne?.created_at?new Date(ne.created_at).getTime():0)-se});if(o(et),s&&!j){const V=et.find(ne=>ne.id===parseInt(s));V&&w(V)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},be=async()=>{try{const De=await te.get("/users/all");u(Array.isArray(De.data)?De.data:[])}catch(De){console.error(De)}};f.useEffect(()=>{je(),be()},[]);const le=De=>p(De.target.value),Ce=De=>{if(De.target.checked){const at=ge.map(et=>et.id);Te(at)}else Te([])},Se=De=>{Te(at=>at.includes(De)?at.filter(et=>et!==De):[...at,De])},Oe=f.useMemo(()=>{const De=h.trim().toLowerCase(),at=x.trim().toUpperCase();return i.filter(et=>{const V=[et?.activity,et?.description,et?.relatedTo,et?.assignedTo],ne=De===""||V.some(Ee=>Ee&&Ee.toString().toLowerCase().includes(De)),se=at==="FILTER BY STATUS"||cb(et.status||"PENDING")===at;return ne&&se})},[i,h,x]);f.useEffect(()=>{A(1)},[h,x,E]);const ge=f.useMemo(()=>{const De=(S-1)*E;return Oe.slice(De,De+E)},[Oe,S,E]),He=()=>{v(!1),T(sA),$(!1),P(null),H(!1)},Ne=()=>{T(sA),$(!1),P(null),v(!0)},he=De=>{let at="";if(De.meet_assign_to?.id)at=String(De.meet_assign_to.id);else if(De.assignedTo){const $e=d.find(Ve=>`${Ve.first_name} ${Ve.last_name}`===De.assignedTo);at=$e?String($e.id):""}const et=$e=>{if(!$e)return"";try{const Ve=new Date($e),ut=Ve.getTimezoneOffset()*6e4;return new Date(Ve.getTime()-ut).toISOString().slice(0,16)}catch{return""}};let V="Lead",ne="",se="Contact",Ee="";if(De.lead)V="Lead",ne=String(De.lead.id);else if(De.account)V="Account",ne=String(De.account.id),De.contact?(se="Contact",Ee=String(De.contact.id)):De.deal?(se="Deal",Ee=String(De.deal.id)):De.quote&&(se="Quote",Ee=String(De.quote.id));else if(De.relatedType||De.related_type){const $e=De.relatedType||De.related_type,Ve=De.related_to||De.relatedToId;$e==="Lead"?(V="Lead",ne=String(Ve)):(V="Account",ne=De.account_id?String(De.account_id):"")}const Ie={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},pe=cb(De.status),Be=Ie[pe]||"Planned";T({subject:De.subject||De.activity||"",location:De.location||"",startTime:et(De.start_time||De.startTime),endTime:et(De.end_time||De.endTime),status:Be,notes:De.description||De.notes||"",assignedTo:at,relatedType1:V,relatedTo1:ne,relatedType2:se,relatedTo2:Ee}),$(!0),P(De.id),w(null),v(!0)},Z=De=>{if(!De.subject?.trim())return q.error("Subject is required.");if(!De.startTime)return q.error("Start time is required.");if(De.endTime&&!(new Date(De.endTime)-new Date(De.startTime)>0))return q.error("End time must be after start time.");De.relatedType1,De.relatedTo1,De.relatedType1==="Account"&&De.relatedType2&&De.relatedTo2&&(De.relatedType2,De.relatedTo2);const at={...De,assignedTo:parseInt(De.assignedTo),relatedTo1:parseInt(De.relatedTo1),relatedTo2:parseInt(De.relatedTo2)},et=O&&R?"update":"create";G({title:et==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${et} "${at.subject}"?`,confirmLabel:et==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:et,payload:at,targetId:R,name:at.subject}})},_e=async()=>{if(!Q?.action)return;const{type:De,payload:at,targetId:et,name:V}=Q.action;W(!0);try{if(De==="create")H(!0),await te.post("/meetings/create",at),q.success(`Meeting "${V}" created.`),He(),await je();else if(De==="update")H(!0),await te.put(`/meetings/${et}`,at),q.success(`Meeting "${V}" updated.`),He(),await je();else if(De==="delete")await te.delete(`/meetings/${et}`),q.success(`Meeting "${V}" deleted.`),j?.id===et&&w(null),await je();else if(De==="bulk-delete"){const{meeting_ids:ne}=Q.action;await te.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:ne}}),q.success(`${ne.length} meetings deleted.`),Te([]),await je()}}catch(ne){const se=ne.response?.data?.detail||"Action failed.";q.error(typeof se=="string"?se:JSON.stringify(se)),console.error(se)}finally{H(!1),W(!1),G(null)}},ke=async()=>{J.length!==0&&G({title:"Delete Meetings",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:J.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${J.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:J}})},ze=De=>{G({title:"Delete Meeting",message:`Permanently delete "${De.subject}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:De.id,name:De.subject}})},tt=async(De,at)=>{try{await te.put(`/meetings/${De}`,{status:at}),q.success("Status updated"),je(),w(null)}catch{q.error("Failed to update status")}};return r&&s?j?n.jsx(pd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:he,onDelete:ze,onStatusUpdate:tt,isSalesView:!1}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Ne,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Wt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:le,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:De=>b(De.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ge.length>0&&J.length===ge.length,onChange:Ce,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:J.length>0?n.jsx("button",{onClick:ke,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${J.length} selected items`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:ge.length>0?ge.map(De=>n.jsxs("tr",{onClick:()=>w(De),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:at=>at.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:J.includes(De.id),onChange:()=>Se(De.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:De.subject}),n.jsxs("td",{className:"py-3 px-4",children:[De.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.lead.title}),De.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.account.name}),De.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[De.contact.first_name," ",De.contact.last_name]}),De.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.deal.name}),De.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ize(De.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:rze(De.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[De.meet_assign_to.first_name," ",De.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${oze(cb(De.status))}`,children:cb(De.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},De.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:Oe.length,pageSize:E,currentPage:S,onPrev:()=>A(De=>Math.max(1,De-1)),onNext:()=>A(De=>Math.min(De+1,Math.ceil(Oe.length/E)||1)),onPageSizeChange:_,label:"meetings"}),N&&n.jsx(n1,{onClose:He,formData:k,setFormData:T,isEditing:O,onSubmit:Z,isSubmitting:I||K,users:d}),j&&n.jsx(pd,{meeting:j,onClose:()=>w(null),onEdit:he,onDelete:ze,onStatusUpdate:tt,isSalesView:!1}),Q&&n.jsx(lze,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:_e,onCancel:()=>G(null),loading:K})]})};function lze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}function cze(){const{user:e,mutate:t}=en(),a=f.useRef(null),[s,r]=f.useState(""),[i,o]=f.useState(""),[l,c]=f.useState("January"),[d,u]=f.useState(0),[h,p]=f.useState(null),[x,b]=f.useState(null),[N,v]=f.useState(""),[j,w]=f.useState(!1),[S,A]=f.useState({type:"",text:""}),E=["January","February","March","April","May","June","July","August","September","October","November","December"];f.useEffect(()=>{e?.company&&(e.company.company_name&&r(e.company.company_name),e.company.currency&&o(e.company.currency),e.company.quota_period&&c(e.company.quota_period),e.company.tax_rate!==void 0&&u(e.company.tax_rate),e.company.company_logo&&p(e.company.company_logo),e.company.address&&v(e.company.address))},[e]);const _=$=>{const R=$.target.files?.[0];if(!R)return;if(!R.type.startsWith("image/")){A({type:"error",text:"Please select an image file"});return}if(R.size>2*1024*1024){A({type:"error",text:"Image size should be less than 2MB"});return}const P=new FileReader;P.onloadend=()=>{b(P.result)},P.readAsDataURL(R)},k=()=>{b(""),p(null)},T=async $=>{$.preventDefault(),w(!0),A({type:"",text:""});try{const R={company_name:s,currency:i,quota_period:l,tax_rate:parseFloat(d),address:N};x!==null&&(R.company_logo=x),await te.put("/company/update-name",R),t&&await t(),b(null),A({type:"success",text:"Company settings updated successfully!"})}catch(R){console.error("Update error:",R);const P=R.response?.data?.detail||"Failed to update settings.";A({type:"error",text:P})}finally{w(!1)}},O=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return n.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[n.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[n.jsx(tn,{})," Company Details"]}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),n.jsxs("form",{onSubmit:T,className:"p-6 space-y-6",children:[!O&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[n.jsx(Wu,{}),n.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),n.jsx("input",{type:"text",value:s,onChange:$=>r($.target.value),disabled:!O||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Pie,{className:"text-gray-500"})," Company Address"]}),n.jsx("textarea",{value:N,onChange:$=>v($.target.value),disabled:!O||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed resize-none",placeholder:"Enter company address",rows:3})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(jI,{className:"text-gray-500"})," Company Logo"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:x||h?n.jsx("img",{src:x||h,alt:"Company Logo",className:"w-16 h-16 object-contain border border-gray-200 rounded-lg bg-gray-50"}):n.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",children:n.jsx(jI,{className:"text-gray-400 text-xl"})})}),O&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("input",{type:"file",ref:a,accept:"image/*",onChange:_,className:"hidden",id:"company-logo-upload"}),n.jsxs("button",{type:"button",onClick:()=>a.current?.click(),disabled:j,className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:[n.jsx(Mie,{className:"text-gray-500"}),x||h?"Change Logo":"Upload Logo"]}),(x||h)&&n.jsx("button",{type:"button",onClick:k,disabled:j,className:"text-xs text-red-600 hover:text-red-700 transition",children:"Remove Logo"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Max 2MB, PNG or JPG"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Et,{className:"text-gray-500"})," Fiscal Year Start"]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:l,onChange:$=>c($.target.value),disabled:!O||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:E.map($=>n.jsx("option",{value:$,children:$},$))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Oie,{className:"text-gray-500"})," Default Tax Rate"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",step:"0.01",value:d,onChange:$=>u($.target.value),disabled:!O||j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50",placeholder:"0.00"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-8 pointer-events-none text-gray-400 font-medium",children:"%"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(e9,{className:"text-gray-500"})," Currency"]}),n.jsxs("div",{className:"flex gap-3 max-w-xs",children:[n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!O||j?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"",checked:i==="",onChange:()=>o(""),disabled:!O||j,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!O||j?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"$",checked:i==="$",onChange:()=>o("$"),disabled:!O||j,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]}),S.text&&n.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${S.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:S.text}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:O&&n.jsxs("button",{type:"submit",disabled:j,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[n.jsx(aL,{}),j?"Updating...":"Save Settings"]})})]})]})}function dze(){const[e,t]=f.useState(null),[a,s]=f.useState({subject:"",category:"",description:"",priority:"medium"}),[r,i]=f.useState(""),[o,l]=f.useState(!1),[c,d]=f.useState([{id:1,sender:"support",message:"Hello! Welcome to Sari-Sari CRM Support. How can I help you today?",timestamp:new Date}]),[u,h]=f.useState(""),[p,x]=f.useState(!1),b=f.useRef(null);f.useEffect(()=>{b.current?.scrollIntoView({behavior:"smooth"})},[c]),f.useEffect(()=>{document.title="Help Center | Sari-Sari CRM"},[]);const N=[{id:1,category:"Getting Started",title:"How to create your first account?",content:"Navigate to the Accounts page from the sidebar, click the 'Add Account' button, fill in the required information such as company name, email, and phone number, then click Save."},{id:2,category:"Getting Started",title:"How to add new contacts?",content:"Go to Contacts in the sidebar, click 'Add Contact', enter the contact details including name, email, phone, and associated account, then save the contact."},{id:3,category:"Leads & Deals",title:"How to convert a lead to a deal?",content:"Open the lead you want to convert, click on the 'Convert to Deal' button, review the pre-filled information, make any necessary adjustments, and confirm the conversion."},{id:4,category:"Leads & Deals",title:"How to manage deal stages?",content:"Deals progress through stages: Prospecting, Qualification, Proposal, Negotiation, and Closed. Update the stage by editing the deal and selecting the appropriate stage from the dropdown."},{id:5,category:"Tasks & Activities",title:"How to create and assign tasks?",content:"Navigate to Tasks, click 'Add Task', fill in the task details, assign it to a team member, set the due date and priority, then save. The assigned user will be notified."},{id:6,category:"Tasks & Activities",title:"How to schedule meetings?",content:"Go to Meetings, click 'Schedule Meeting', select participants, set the date and time, add an agenda, and save. All participants will receive calendar invites."},{id:7,category:"Reports & Analytics",title:"How to view sales performance?",content:"Access the Dashboard to see key metrics. For detailed reports, navigate to Targets to view individual and team performance against set goals."},{id:8,category:"Account Settings",title:"How to manage user permissions?",content:"Go to Users in the sidebar, select a user, and edit their role. Different roles (Admin, Manager, Sales, Marketing) have different access levels and permissions."}],v=["Technical Issue","Login Problem","Data Issue","Feature Request","Performance Issue","Other"],w=N.filter(O=>O.title.toLowerCase().includes(r.toLowerCase())||O.content.toLowerCase().includes(r.toLowerCase())||O.category.toLowerCase().includes(r.toLowerCase())).reduce((O,$)=>(O[$.category]||(O[$.category]=[]),O[$.category].push($),O),{}),S=(O,$)=>{s(R=>({...R,[O]:$}))},A=async O=>{if(O.preventDefault(),!a.subject.trim()||!a.category||!a.description.trim()){q.warn("Please fill in all required fields.");return}l(!0),setTimeout(()=>{q.success("Your issue has been submitted successfully! We'll get back to you soon."),s({subject:"",category:"",description:"",priority:"medium"}),t(null),l(!1)},1500)},[E,_]=f.useState(null),k=O=>{if(O.preventDefault(),!u.trim())return;const $={id:c.length+1,sender:"user",message:u.trim(),timestamp:new Date};d(R=>[...R,$]),h(""),x(!0),setTimeout(()=>{const R=["Thank you for your message. Let me look into that for you.","I understand your concern. Can you provide more details?","That's a great question! Here's what I can help you with...","I'm checking our system now. Please hold on for a moment.","Thanks for reaching out! I'll make sure to assist you with this."],P=R[Math.floor(Math.random()*R.length)];d(I=>[...I,{id:I.length+1,sender:"support",message:P,timestamp:new Date}]),x(!1)},1500)},T=O=>new Date(O).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8 text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Help Center"}),n.jsx("p",{className:"text-gray-600",children:"How can we help you today?"})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{onClick:()=>t(e==="report"?null:"report"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="report"?"border-red-400 ring-2 ring-red-100":"border-transparent hover:border-red-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Wu,{className:"w-7 h-7 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Report an Issue"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Having a problem? Let us know"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="report"?"rotate-90":""}`})]})})}),n.jsx("div",{onClick:()=>t(e==="solutions"?null:"solutions"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="solutions"?"border-blue-400 ring-2 ring-blue-100":"border-transparent hover:border-blue-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Aie,{className:"w-7 h-7 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Browse Solutions"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Find answers to common questions"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="solutions"?"rotate-90":""}`})]})})}),n.jsx("div",{onClick:()=>t(e==="chat"?null:"chat"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="chat"?"border-green-400 ring-2 ring-green-100":"border-transparent hover:border-green-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center relative",children:[n.jsx(Ay,{className:"w-7 h-7 text-green-600"}),n.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Live Chat Support"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Chat with our support team"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="chat"?"rotate-90":""}`})]})})})]}),e==="report"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(CI,{className:"text-red-500"}),"Report an Issue"]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:n.jsx(Qt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("form",{onSubmit:A,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a.subject,onChange:O=>S("subject",O.target.value),placeholder:"Brief description of the issue",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:a.category,onChange:O=>S("category",O.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition bg-white",children:[n.jsx("option",{value:"",children:"Select a category"}),v.map(O=>n.jsx("option",{value:O,children:O},O))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("div",{className:"flex gap-3",children:["low","medium","high"].map(O=>n.jsx("button",{type:"button",onClick:()=>S("priority",O),className:`px-4 py-2 rounded-lg border transition capitalize ${a.priority===O?O==="high"?"bg-red-500 text-white border-red-500":O==="medium"?"bg-yellow-500 text-white border-yellow-500":"bg-green-500 text-white border-green-500":"bg-white text-gray-600 border-gray-300 hover:border-gray-400"}`,children:O},O))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:a.description,onChange:O=>S("description",O.target.value),placeholder:"Please describe the issue in detail. Include steps to reproduce if applicable.",rows:5,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition resize-none"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:o,className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-6 py-2.5 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(OT,{className:"w-4 h-4"}),"Submit Issue"]})})})]})]}),e==="solutions"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(Lie,{className:"text-blue-500"}),"Browse Solutions"]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:n.jsx(Qt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(Wt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:r,onChange:O=>i(O.target.value),placeholder:"Search for solutions...",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-400 outline-none transition"})]}),n.jsx("div",{className:"space-y-6",children:Object.keys(w).length>0?Object.entries(w).map(([O,$])=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:O}),n.jsx("div",{className:"space-y-2",children:$.map(R=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>_(E===R.id?null:R.id),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition text-left",children:[n.jsx("span",{className:"font-medium text-gray-700",children:R.title}),n.jsx(Dt,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${E===R.id?"rotate-90":""}`})]}),E===R.id&&n.jsxs("div",{className:"px-4 py-3 bg-white border-t border-gray-200",children:[n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:R.content}),n.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-500",children:[n.jsx(pa,{className:"text-green-500"}),"Was this helpful?",n.jsx("button",{className:"text-blue-500 hover:underline ml-1",children:"Yes"}),n.jsx("span",{children:"|"}),n.jsx("button",{className:"text-blue-500 hover:underline",children:"No"})]})]})]},R.id))})]},O)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Wt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsxs("p",{className:"text-gray-500",children:['No solutions found matching "',r,'"']}),n.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Try a different search term or"," ",n.jsx("button",{onClick:()=>t("report"),className:"text-blue-500 hover:underline",children:"report an issue"})]})]})})]}),e==="chat"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md mb-8 animate-fade-in overflow-hidden",children:[n.jsxs("div",{className:"bg-green-500 text-white p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Ay,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Live Chat Support"}),n.jsxs("p",{className:"text-green-100 text-xs flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Online - Typically replies in minutes"]})]})]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-white/10 rounded-full transition",children:n.jsx(Qt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"h-80 overflow-y-auto p-4 bg-gray-50 space-y-4",children:[c.map(O=>n.jsx("div",{className:`flex ${O.sender==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`flex items-end gap-2 max-w-[80%] ${O.sender==="user"?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${O.sender==="user"?"bg-blue-500 text-white":"bg-green-500 text-white"}`,children:O.sender==="user"?n.jsx(nn,{className:"w-4 h-4"}):n.jsx(Ay,{className:"w-4 h-4"})}),n.jsxs("div",{className:`px-4 py-2.5 rounded-2xl ${O.sender==="user"?"bg-blue-500 text-white rounded-br-md":"bg-white shadow-sm border border-gray-200 text-gray-700 rounded-bl-md"}`,children:[n.jsx("p",{className:"text-sm",children:O.message}),n.jsx("p",{className:`text-[10px] mt-1 ${O.sender==="user"?"text-blue-100":"text-gray-400"}`,children:T(O.timestamp)})]})]})},O.id)),p&&n.jsx("div",{className:"flex justify-start",children:n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center",children:n.jsx(Ay,{className:"w-4 h-4"})}),n.jsx("div",{className:"bg-white shadow-sm border border-gray-200 px-4 py-3 rounded-2xl rounded-bl-md",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),n.jsx("div",{ref:b})]}),n.jsx("form",{onSubmit:k,className:"p-4 border-t border-gray-200 bg-white",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"text",value:u,onChange:O=>h(O.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-full focus:ring-2 focus:ring-green-200 focus:border-green-400 outline-none transition"}),n.jsxs("button",{type:"submit",disabled:!u.trim(),className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(OT,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]})})]}),!e&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Need more help?"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Contact our support team for personalized assistance"}),n.jsx("div",{className:"flex justify-center gap-4",children:n.jsxs("a",{href:"mailto:support@example.com",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md transition text-gray-700",children:[n.jsx(CI,{className:"w-4 h-4"}),"Email Support"]})})]})]})}function uze({toggleSidebar:e}){const[t,a]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState(0),d=f.useRef(null),u=f.useRef(null),h=Zt(),p=wt(),{logout:x}=Qs(),{user:b,fetchUser:N}=en(),j={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[h.pathname]||"Sales Panel";f.useEffect(()=>{N();const _=()=>{N()};return window.addEventListener("userProfileUpdated",_),()=>{window.removeEventListener("userProfileUpdated",_)}},[]),f.useEffect(()=>{const _=async()=>{try{const k=await te.get("/logs/notifications");console.log(" Fetched notifications from DB:",k.data);const T=(k.data||[]).map(O=>{const $=O.entity_id||O.new_data?.id,R=(O.entity_type||"").toLowerCase();return S({id:O.id,type:O.notif_type||O.notification_type||O.type||w(O),title:O.title||O.description,assignedBy:O.assignedBy||O.name,createdAt:O.createdAt||O.timestamp,read:O.is_read??O.read??!1,leadId:R==="lead"?$:O.leadId||O.lead_id,taskId:R==="task"?$:O.taskId||O.task_id,contactId:R==="contact"?$:O.contactId||O.contact_id,dealId:R==="deal"?$:O.dealId||O.deal_id,accountId:R==="account"?$:O.accountId||O.account_id})});o(T),c(T.filter(O=>!O.read).length)}catch(k){console.error("Failed to load history notifications",k)}};b?.id&&_()},[b?.id]);const w=_=>{const k=String(_.action||_.type||"").toUpperCase(),T={TASK_ASSIGNMENT:"task_assignment",LEAD_ASSIGNMENT:"lead_assignment",LEAD_UPDATE:"lead_update",CONTACT_ASSIGNMENT:"contact_assignment",CONTACT_UPDATE:"contact_update",DEAL_ASSIGNMENT:"deal_assignment",DEAL_UPDATE:"deal_update",ACCOUNT_ASSIGNMENT:"account_assignment",ACCOUNT_UPDATE:"account_update",TERRITORY_ASSIGNMENT:"territory_assignment",CREATE:"create",UPDATE:"update",DELETE:"delete"};if(T[k])return T[k];const O=String(_.title||_.description||"").toLowerCase(),$=String(_.entity_type||"").toLowerCase(),R=k.includes("UPDATE"),P=k.includes("CREATE");return k.includes("DELETE"),O.includes("task")||$==="task"?R?"task_update":"task_assignment":O.includes("territory")||$==="territory"?"territory_assignment":O.includes("lead")||$==="lead"?R?"lead_update":P?"lead_assignment":"lead_update":O.includes("contact")||$==="contact"?R?"contact_update":P?"contact_assignment":"contact_update":O.includes("deal")||$==="deal"?R?"deal_update":P?"deal_assignment":"deal_update":O.includes("account")||$==="account"?R?"account_update":P?"account_assignment":"account_update":O.includes("quote")||$==="quote"?"quote":O.includes("meeting")||$==="meeting"?"meeting":O.includes("call")||$==="call"?"call":"info"},S=_=>{const k={..._};switch(k.read=!!k.read,k.type){case"territory_assignment":k.title=k.title||`You have been assigned to ${k.territoryName||"a territory"}`;break;case"lead_assigned":k.type="lead_assignment",k.title=k.title||`New lead assigned: ${k.leadName||k.company||"Lead"}`;break;case"lead_assignment":k.title=k.title||`New lead assigned: ${k.leadName||k.company||"Lead"}`;break;case"lead_update":k.title=k.title||`Lead updated: ${k.leadName||k.company||"Lead"}`;break;case"task_assignment":case"task_update":k.title=k.title||`Task: ${k.taskTitle||"Task"}`;break;case"contact_assignment":k.title=k.title||`New contact assigned: ${k.contactName||k.contact||"Contact"}`;break;case"contact_update":k.title=k.title||`Contact updated: ${k.contactName||k.contact||"Contact"}`;break;case"deal_assignment":k.title=k.title||`New deal assigned: ${k.dealName||k.name||"Deal"}`;break;case"deal_update":k.title=k.title||`Deal updated: ${k.dealName||k.name||"Deal"}`;break;case"account_assignment":k.title=k.title||`New account assigned: ${k.accountName||k.name||"Account"}`;break;case"account_update":k.title=k.title||`Account updated: ${k.accountName||k.name||"Account"}`;break;case"quote":k.title=k.title||"Quote activity";break;case"meeting":k.title=k.title||"Meeting activity";break;case"call":k.title=k.title||"Call activity";break;default:k.title=k.title||"Activity"}return k},A=_=>{switch(_.type){case"task_assignment":p(`/sales/tasks/${_.taskId||_.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${_.leadId||_.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${_.contactId||_.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${_.dealId||_.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${_.accountId||_.account_id||""}`);break;default:p("/sales/overview")}},E=async _=>{if(_.read){A(_);return}try{await te.patch(`/logs/mark-read/${_.id}`),o(k=>k.map(T=>T.id===_.id?{...T,read:!0}:T)),c(k=>k>0?k-1:0),A(_)}catch(k){console.error("Failed to mark notification as read",k),A(_)}};return f.useEffect(()=>{if(!b?.id)return;const _=cN(b.id);console.log(" Connecting to WebSocket:",_);const k=new WebSocket(_);let T;const O=()=>{T=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return k.onopen=()=>{console.log(" Sales WS Connected to:",_),clearTimeout(T)},k.onmessage=$=>{try{const R=JSON.parse($.data);console.log(" Notification received:",R);const P=S(R);o(I=>[P,...I]),c(I=>I+1)}catch(R){console.error("Error parsing notification:",R)}},k.onclose=()=>{console.log(" Sales WS Disconnected"),O()},k.onerror=$=>{console.error(" Sales WS Error:",$)},()=>{clearTimeout(T),k&&k.readyState===WebSocket.OPEN&&k.close()}},[b?.id]),f.useEffect(()=>{function _(k){d.current&&!d.current.contains(k.target)&&a(!1),u.current&&!u.current.contains(k.target)&&r(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ox,{className:"text-2xl"})}),b?.company?.company_logo&&n.jsx("img",{src:b.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(rx,{className:"text-xl sm:text-2xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&n.jsx("button",{onClick:async()=>{try{await te.patch("/logs/mark-all-read"),o(_=>_.map(k=>({...k,read:!0}))),c(0)}catch(_){console.error("Failed to mark all notifications as read",_)}},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((_,k)=>n.jsxs("div",{onClick:()=>E(_),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${_.read?"bg-gray-50":"bg-white"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${_.type==="task_assignment"||_.type==="task_update"?"bg-purple-100 text-purple-700":_.type==="lead_assignment"||_.type==="lead_update"?"bg-green-100 text-green-700":_.type==="contact_assignment"||_.type==="contact_update"?"bg-amber-100 text-amber-700":_.type==="deal_assignment"||_.type==="deal_update"?"bg-indigo-100 text-indigo-700":_.type==="account_assignment"||_.type==="account_update"?"bg-cyan-100 text-cyan-700":_.type==="territory_assignment"?"bg-blue-100 text-blue-700":_.type==="quote"?"bg-pink-100 text-pink-700":_.type==="meeting"?"bg-teal-100 text-teal-700":_.type==="call"?"bg-red-100 text-red-700":_.type==="create"?"bg-emerald-100 text-emerald-700":_.type==="update"?"bg-yellow-100 text-yellow-700":_.type==="delete"?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"}`,children:_.type==="task_assignment"||_.type==="task_update"?"Task":_.type==="lead_assignment"?"Lead":_.type==="lead_update"?"Lead Update":_.type==="contact_assignment"?"Contact":_.type==="contact_update"?"Contact Update":_.type==="deal_assignment"?"Deal":_.type==="deal_update"?"Deal Update":_.type==="account_assignment"?"Account":_.type==="account_update"?"Account Update":_.type==="territory_assignment"?"Territory":_.type==="quote"?"Quote":_.type==="meeting"?"Meeting":_.type==="call"?"Call":_.type==="create"?"Created":_.type==="update"?"Updated":_.type==="delete"?"Deleted":"Activity"}),!_.read&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:_.title}),n.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:_.assignedBy?`Assigned by ${_.assignedBy}`:"System"}),n.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:_.createdAt?new Date(_.createdAt).toLocaleString():""})]})]},_.id??k)):n.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:b?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[b?.first_name," ",b?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:b?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[b?.first_name," ",b?.middle_name," ",b?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]}),b?.company&&n.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100 w-full justify-center",children:[b.company.company_logo&&n.jsx("img",{src:b.company.company_logo,alt:"Company Logo",className:"w-6 h-6 object-contain rounded"}),n.jsx("span",{className:"text-xs text-gray-500 truncate",children:b.company.company_name})]})]}),n.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[n.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),a(!1)},children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function mze(){const[e,t]=f.useState(!1),[a,s]=f.useState(!1),{user:r}=en(),[i,o]=f.useState(!1);f.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const l=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Zt(),d=l.includes(c.pathname);f.useEffect(()=>{d&&o(!0)},[c.pathname]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/sales/overview",className:({isActive:p})=>p?u:h,children:[n.jsx(ix,{})," Dashboard"]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>o(!i),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/sales/accounts",className:({isActive:p})=>p?u:h,children:[n.jsx(yd,{})," Accounts"]}),n.jsxs($t,{to:"/sales/contacts",className:({isActive:p})=>p?u:h,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/sales/leads",className:({isActive:p})=>p?u:h,children:[n.jsx(Qn,{})," Leads"]}),n.jsxs($t,{to:"/sales/deals",className:({isActive:p})=>p?u:h,children:[n.jsx(tn,{})," Deals"]}),n.jsxs($t,{to:"/sales/quotes",className:({isActive:p})=>p?u:h,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs($t,{to:"/sales/targets",className:({isActive:p})=>p?u:h,children:[n.jsx(lr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/sales/tasks",className:({isActive:p})=>p?u:h,children:[n.jsx(Yt,{})," Tasks"]}),n.jsxs($t,{to:"/sales/meetings",className:({isActive:p})=>p?u:h,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs($t,{to:"/sales/calls",className:({isActive:p})=>p?u:h,children:[n.jsx($s,{})," Calls"]}),n.jsxs($t,{to:"/sales/audit",className:({isActive:p})=>p?u:h,children:[n.jsx(As,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/sales/territory",className:({isActive:p})=>p?u:h,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs($t,{to:"/sales/manage-account",className:({isActive:p})=>p?u:h,children:[n.jsx(nn,{className:"text-lg"}),n.jsx("span",{children:"Manage Account"})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(uze,{toggleSidebar:()=>t(!0)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}const fze=e=>n.jsx(Wt,{...e}),hze=e=>n.jsx(yd,{...e}),RZ=e=>n.jsx(Gs,{...e}),gze=e=>n.jsx(sx,{...e}),pze=e=>n.jsx(Bw,{...e}),xze=e=>n.jsx(Et,{...e}),yze=e=>n.jsx(Lt,{...e}),bze=e=>n.jsx(qw,{...e}),zZ=e=>n.jsx(Hw,{...e}),vze=e=>n.jsx(aa,{...e}),FZ=e=>n.jsx(nn,{...e}),wze=e=>n.jsx(Qn,{...e}),UZ=e=>n.jsx(tn,{...e}),Nze=e=>n.jsx(hn,{...e}),BZ=e=>n.jsx(lr,{...e}),jze=e=>n.jsx(pa,{...e}),Cze=e=>n.jsx(Et,{...e}),Sze=e=>n.jsx($s,{...e}),_ze=e=>n.jsx(Xl,{...e}),Aze=e=>n.jsx(As,{...e}),HZ=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},Tze=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Eze=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},kze=e=>{switch(e){case"call":return{Icon:yze,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:bze,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:xze,color:"text-blue-500",bgColor:"bg-blue-100"}}},Lze=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Pze=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=f.useState(!1),l=f.useRef(null),c=[{icon:hze,label:"Account"},{icon:FZ,label:"Contact"},{icon:wze,label:"Leads"},{icon:UZ,label:"Deals"},{icon:Nze,label:"Quotes"},{icon:BZ,label:"Target"},{icon:jze,label:"Task"},{icon:Cze,label:"Meeting"},{icon:Sze,label:"Call"},{icon:Aze,label:"Audit"},{icon:_ze,label:"Territory"}];f.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{t(h.target.value),o(h.target.value.trim().length>0)},u=h=>{s&&s(h),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(fze,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((h,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(h),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,title:h.label,onClick:()=>{switch(h.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${h.label}`)}},children:n.jsx(h.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[h.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},Dze=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const h=new Date(u),x=new Date-h,b=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return b<1?"Just now":b<60?`${b} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},Oze=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(zZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(Dze,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},Mze=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),Ize=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=f.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let A=0;A<=j;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",A=v.stage||"",E=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const k=_>0;if(E&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:k,willBeAdded:S&&k,allFields:Object.keys(v)})),S&&E&&k)try{let T=new Date(w);if(isNaN(T.getTime())){const O=String(w).split("T")[0];T=new Date(O+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const O=T.getFullYear(),$=T.getMonth()+1,R=`${O}-${String($).padStart(2,"0")}`;l[R]||(l[R]=0),l[R]+=_,c++,console.log(` Added deal ${v.id} to month ${R}: ${_}, total: ${l[R]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${R} (Year: ${O}, Month: ${$})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else E&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:k,closeDate:w,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(v=>parseInt(v.split("-")[0])),h=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],b=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;b.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(h.length>0){const v=Math.max(...h);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${j}`),b.push(A),A>0&&console.log(`Month ${s[w]} ${j} (${S}): ${A}`)}}const N=Math.max(...b,1);return console.log("Final chart data:",{labels:x,revenues:b,maxRevenue:N,hasData:b.some(v=>v>0)}),{labels:x,revenues:b,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(zZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(ZN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},rA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},$ze=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=Eze(s||"Website"),d=x=>{if(!x)return"Unknown";const b=new Date(x),v=new Date-b,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",h=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:h})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},Rze=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=wt(),u={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:h,bg:p}=Tze(u),x=parseFloat(t||0),b=o?x>=o?"up":"down":"up",N=b==="up"?gze:pze,v=b==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/sales/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${h} ${p} px-2 py-0.5 rounded-full`,children:u})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:HZ(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},zze=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:b}=kze(h),{text:N,bg:v}=Lze(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const k=new Date(_),O=k-new Date,$=Math.floor(O/864e5);return $===0?`Today, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:$===1?`Tomorrow, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:$===-1?`Yesterday, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:k.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",E=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/sales/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/sales/meetings/info?id=${o}`)):d("/sales/tasks"):d(h==="call"?`/sales/calls/info?id=${o}`:h==="meeting"?`/sales/meetings/info?id=${o}`:"/sales/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[n.jsx("div",{className:`p-2 rounded-lg ${b} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(RZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(FZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},Fze=()=>{const e=wt(),{user:t}=en(),a=t?.company?.currency||"",[s,r]=f.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState([]),[h,p]=f.useState([]),[x,b]=f.useState([]),[N,v]=f.useState([]),[j,w]=f.useState(!0),[S,A]=f.useState(null),[E,_]=f.useState(""),[k,T]=f.useState([]),[O,$]=f.useState([]),[R,P]=f.useState([]),[I,H]=f.useState([]),[Q,G]=f.useState(0),[K,W]=f.useState(new Date),J=f.useRef(null),Te=f.useRef(null),ee=f.useMemo(()=>{try{if(!E.trim())return[];const le=E.toLowerCase().trim(),Ce=[];return Array.isArray(k)&&k.forEach(Se=>{const Oe=`${Se.first_name||""} ${Se.last_name||""}`.trim().toLowerCase(),ge=(Se.company_name||"").toLowerCase(),He=(Se.email||"").toLowerCase(),Ne=(Se.phone||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le)||Ne.includes(le))&&Ce.push({id:Se.id,name:`${Se.first_name||""} ${Se.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:Se.company_name||"No company",route:`/sales/leads/${Se.id}`})}),Array.isArray(O)&&O.forEach(Se=>{const Oe=(Se.name||"").toLowerCase(),ge=(Se.account?.name||"").toLowerCase(),He=(Se.description||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le))&&Ce.push({id:Se.id,name:Se.name||"Unnamed Deal",type:"Deal",details:Se.account?.name||"No account",route:`/sales/deals/info?id=${Se.id}`})}),Array.isArray(R)&&R.forEach(Se=>{const Oe=(Se.name||"").toLowerCase(),ge=(Se.email||"").toLowerCase(),He=(Se.phone||"").toLowerCase(),Ne=(Se.website||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le)||Ne.includes(le))&&Ce.push({id:Se.id,name:Se.name||"Unnamed Account",type:"Account",details:Se.email||Se.phone||"No contact info",route:"/sales/accounts"})}),Ce.slice(0,10)}catch(le){return console.error("Error in search:",le),[]}},[E,k,O,R]),U=le=>{le.route&&(e(le.route),_(""))},je=f.useCallback(async()=>{w(!0),A(null);try{const[le,Ce,Se,Oe,ge,He,Ne,he]=await Promise.all([te.get("/leads/admin/getLeads").catch(ae=>(console.error("Error fetching leads:",ae),{data:[]})),te.get("/deals/admin/fetch-all").catch(ae=>(console.error("Error fetching deals:",ae),{data:[]})),te.get("/accounts/admin/fetch-all").catch(ae=>(console.error("Error fetching accounts:",ae),{data:[]})),te.get("/tasks/all").catch(ae=>(console.error("Error fetching tasks:",ae),{data:[]})),te.get("/meetings/admin/fetch-all").catch(ae=>(console.error("Error fetching meetings:",ae),{data:[]})),te.get("/calls/admin/fetch-all").catch(ae=>(console.error("Error fetching calls:",ae),{data:[]})),te.get("/logs/read-all").catch(ae=>(console.error("Error fetching logs:",ae),{data:[]})),te.get("/targets/admin/fetch-all").catch(ae=>(console.error("Error fetching targets:",ae),{data:[]}))]),Z=Array.isArray(le.data)?le.data:[],_e=Array.isArray(Ce.data)?Ce.data:[],ke=Array.isArray(Se.data)?Se.data:[],ze=Array.isArray(Oe.data)?Oe.data:[],tt=Array.isArray(ge.data)?ge.data:[],De=Array.isArray(He.data)?He.data:[],at=Array.isArray(Ne.data)?Ne.data:[],et=Array.isArray(he.data)?he.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",_e.length),_e.length>0&&(console.log("First deal sample (raw):",JSON.stringify(_e[0],null,2)),console.log("First deal keys:",Object.keys(_e[0]))),T(Z),$(_e),P(ke),H(et);const V=et.reduce((ae,Fe)=>{const ye=Fe.amount||Fe.value||Fe.target_amount||0,We=parseFloat(typeof ye=="string"?ye.replace(/[^\d.-]/g,""):ye);return ae+(Number.isFinite(We)?We:0)},0);G(V);const ne=Z.filter(ae=>ae.status&&!["Lost","Converted"].includes(ae.status)).length,se=ze.filter(ae=>!ae.dueDate||ae.status==="Completed"?!1:new Date(ae.dueDate)<new Date).length;r({activeLeads:ne,totalDeals:_e.length,activeAccounts:ke.length,overdueTasks:se});const Ee=[...Z].sort((ae,Fe)=>new Date(Fe.created_at||0)-new Date(ae.created_at||0)).slice(0,5);o(Ee);const Ie=[..._e].sort((ae,Fe)=>new Date(Fe.created_at||0)-new Date(ae.created_at||0)).slice(0,5);c(Ie);const pe=new Date,Be=[];De.forEach(ae=>{const Fe=ae.due_date||ae.call_time,ye=(ae.status||"").toUpperCase();if(Fe){const We=new Date(Fe);ye==="COMPLETED"||ye==="MISSED"||ye==="NOT_HELD"||ye==="HELD"||Be.push({type:"Call",title:ae.subject||"Untitled Call",assignedTo:ae.assigned_to||(ae.call_assign_to?`${ae.call_assign_to.first_name||""} ${ae.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Fe,priority:(ae.priority||"MEDIUM").toUpperCase(),id:ae.id,activityType:"call",fullData:ae})}}),tt.forEach(ae=>{const Fe=ae.dueDate||ae.start_time,ye=(ae.status||"").toUpperCase();if(Fe){const We=new Date(Fe);ye==="COMPLETED"||ye==="CANCELLED"||ye==="DONE"||Be.push({type:"Meeting",title:ae.subject||ae.activity||"Untitled Meeting",assignedTo:ae.assignedTo||(ae.meet_assign_to?`${ae.meet_assign_to.first_name||""} ${ae.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Fe,priority:(ae.priority||"MEDIUM").toUpperCase(),id:ae.id,activityType:"meeting",fullData:ae})}});const $e={HIGH:1,MEDIUM:2,LOW:3},Ve=Be.sort((ae,Fe)=>{const ye=$e[ae.priority]||3,We=$e[Fe.priority]||3;if(ye!==We)return ye-We;const it=new Date(ae.scheduledDate||0),ht=new Date(Fe.scheduledDate||0);return it-ht}).slice(0,5);u(Ve),p(_e),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",_e.length);const ut=_e.filter(ae=>(ae.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",ut.length),ut.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),ut.forEach((ae,Fe)=>{let ye=ae.amount;ye&&typeof ye=="object"?ye.toString?ye=parseFloat(ye.toString()):ye=parseFloat(ye):ye=parseFloat(ye)||0,console.log(`Deal ${Fe+1}:`,{id:ae.id,name:ae.name,stage:ae.stage,stage_upper:(ae.stage||"").toUpperCase(),amount:ae.amount,amount_parsed:ye,amount_type:typeof ae.amount,close_date:ae.close_date,close_date_type:typeof ae.close_date,close_date_value:ae.close_date?new Date(ae.close_date):null,has_close_date:!!ae.close_date,has_amount:ye>0,all_keys:Object.keys(ae),full_deal:ae})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",_e.map(ae=>ae.stage))),v(_e);const ve=[...at].sort((ae,Fe)=>new Date(Fe.timestamp||0)-new Date(ae.timestamp||0));b(ve)}catch(le){console.error("Error fetching dashboard data:",le),A("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);f.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),je(),J.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),je(),W(new Date)},3e4),()=>{J.current&&clearInterval(J.current)}),[je]),f.useEffect(()=>{if(!t||!t.id)return;let le=0;const Ce=3;let Se=null;const Oe=()=>{const ge=window.location.protocol==="https:"?"wss:":"ws:",He=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ne=`${ge}//${He}/ws/notifications?user_id=${t.id}`;try{const he=new WebSocket(Ne);Te.current=he,he.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),le=0},he.onmessage=Z=>{try{const _e=JSON.parse(Z.data);console.log(" Real-time notification received:",_e),_e.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(_e.event)&&(console.log(" Refreshing dashboard due to:",_e.event),je(),W(new Date))}catch(_e){console.error("Error parsing WebSocket message:",_e)}},he.onerror=Z=>{le===0&&console.warn(" WebSocket connection unavailable (this is optional)")},he.onclose=()=>{le<Ce&&(le++,Se=setTimeout(()=>{t&&t.id&&Oe()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Oe(),()=>{Se&&clearTimeout(Se),Te.current&&(Te.current.close(),Te.current=null)}},[t,je]);const be=[{icon:vze,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:BZ,title:"Total Targets",value:HZ(Q,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/sales/targets")},{icon:UZ,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:RZ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")}];return console.log("SalesOverview rendering, loading:",j,"error:",S),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[j&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:S})}),n.jsx("div",{className:"mb-8",children:n.jsx(Pze,{searchQuery:E,onSearchChange:_,searchResults:ee,onSearchResultClick:U})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:be.map(le=>n.jsx(Mze,{...le,loading:j},le.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(Oze,{logs:x,loading:j}),n.jsx(sj,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(aj,{leads:k,deals:O,targets:I,currencySymbol:a,basePath:"/sales"})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(Ize,{revenueData:N,loading:j})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(rA,{title:"Latest Leads",children:i.length>0?i.map((le,Ce)=>n.jsx($ze,{...le},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(rA,{title:"Latest Deals",children:j?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((le,Ce)=>n.jsx(Rze,{...le,currencySymbol:a},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(rA,{title:"Upcoming Activities",children:d.length>0?d.map((le,Ce)=>n.jsx(zze,{...le},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},iA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],oA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},kr=e=>e?e.toUpperCase():"",lA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",Uze=e=>{switch(kr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Bze=e=>{switch(kr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function Hze(){const e=wt(),{user:t}=en(),a=t?.role==="Sales";f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[d,u]=f.useState(null),[h,p]=f.useState(null),[x,b]=f.useState(oA),[N,v]=f.useState(null),[j,w]=f.useState([]),[S,A]=f.useState(!1),[E,_]=f.useState([]),[k,T]=f.useState(null),[O,$]=f.useState([]),[R,P]=f.useState([]),[I,H]=f.useState("Filter by Status"),[Q,G]=f.useState(""),[K,W]=f.useState(null),[J,Te]=f.useState(!1),[ee,U]=f.useState(1),[je,be]=f.useState(10),[le,Ce]=f.useState("Overview"),[Se,Oe]=f.useState(""),[ge,He]=f.useState(!1),[Ne,he]=f.useState([]),[Z,_e]=f.useState({}),[ke,ze]=f.useState(null);f.useEffect(()=>{s&&!i&&a&&t&&!x.assigned_to&&b(z=>({...z,assigned_to:t.id}))},[s,i,a,t,x.assigned_to]);const{comments:tt,addComment:De,refresh:at}=Ta({relatedType:"account",relatedId:N?.id});f.useEffect(()=>{N?.id&&at()},[N?.id,at]);const et=f.useCallback(async(z=null)=>{A(!0);try{const me=await te.get("/accounts/admin/fetch-all"),Re=[...Array.isArray(me.data)?me.data:[]].sort((Qe,Ke)=>{const At=Qe?.created_at||Qe?.updated_at||0,Ct=Ke?.created_at||Ke?.updated_at||0;return new Date(Ct)-new Date(At)});if(w(Re),z){const Qe=Re.find(Ke=>Ke.id===z);v(Qe||null)}}catch(me){console.error(me),w([]),me.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{A(!1)}},[v]),V=f.useCallback(async()=>{try{const z=await te.get("/users/all");_(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ne=f.useCallback(async()=>{try{const z=await te.get("/territories/fetch");$(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),se=f.useCallback(async()=>{try{const z=await te.get("/accounts/admin/parent-companies");P(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),Ee=f.useCallback(async z=>{try{const me=await te.get(`/activities/accounts/${z}`);_e(me.data&&typeof me.data=="object"?me.data:{})}catch(me){console.error(me),me.response?.status===404&&(console.warn("No activities found for this account."),_e({}))}},[]);f.useEffect(()=>{et(),V(),ne(),se()},[et,V,ne,se]),f.useEffect(()=>{N&&Oe(kr(N.status)||"PROSPECT")},[N]);const Ie=j.filter(z=>z.acc_creator?.id===t?.id&&z.assigned_accs?.id===t?.id),pe=Ie.length,Be=f.useMemo(()=>Ie.filter(z=>z.status?.toLowerCase()==="customer").length,[Ie]),$e=f.useMemo(()=>Ie.filter(z=>z.status?.toLowerCase()==="prospect").length,[Ie]),Ve=f.useMemo(()=>Ie.filter(z=>z.status?.toLowerCase()==="partner").length,[Ie]),ut=f.useMemo(()=>Ie.filter(z=>z.status?.toLowerCase()==="active").length,[Ie]),ve=f.useMemo(()=>Ie.filter(z=>z.status?.toLowerCase()==="inactive").length,[Ie]),ae=f.useMemo(()=>Ie.filter(z=>z.status?.toLowerCase()==="former").length,[Ie]),Fe=f.useMemo(()=>[{title:"Total",value:pe,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Be,icon:Oo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:$e,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Ve,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:ut,icon:Oo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ve,icon:Mo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ae,icon:Mo,color:"text-orange-600",bgColor:"bg-orange-100"}],[pe,Be,$e,Ve,ut,ve,ae]),ye=f.useMemo(()=>{const z=Q.trim().toLowerCase(),me=I.trim().toUpperCase();return j.filter(Le=>{if(!(t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER")&&Le.status?.toUpperCase()==="INACTIVE")return!1;const Qe=[Le?.name,Le?.website,Le?.industry,Le?.territory?.name,Le?.phone_number],Ke=z===""||Qe.some(Ct=>Ct==null?!1:Ct.toString().toLowerCase().includes(z)),At=me==="FILTER BY STATUS"||kr(Le.status)===me;return Ke&&At})},[j,Q,I,t]),We=Math.max(1,Math.ceil(ye.length/je)||1);f.useEffect(()=>{U(1)},[Q,I]),f.useEffect(()=>{U(z=>{const me=Math.max(1,Math.ceil(ye.length/je)||1);return z>me?me:z})},[ye.length,je]);const it=f.useMemo(()=>{const z=(ee-1)*je;return ye.slice(z,z+je)},[ye,ee,je]),ht=z=>{if(z.target.checked){const me=it.filter(Le=>Le.assigned_accs?.id===t?.id&&Le.acc_creator?.id===t?.id).map(Le=>Le.id);he(me)}else he([])},Ae=z=>{he(me=>me.includes(z)?me.filter(Le=>Le!==z):[...me,z])},Je=async()=>{if(Ne.length===0)return;const z=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",me=z?"delete":"archive",Le=z?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",Re=!z;W({title:`${me.charAt(0).toUpperCase()+me.slice(1)} Accounts`,message:n.jsxs("span",{children:["Are you sure you want to ",me," ",n.jsx("span",{className:"font-semibold",children:Ne.length})," selected accounts? ",Le]}),confirmLabel:`${me.charAt(0).toUpperCase()+me.slice(1)} ${Ne.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:Re?qs:null,isArchive:Re,action:{type:"bulk-delete",accountIds:Ne}})};ye.length===0||(ee-1)*je+1,Math.min(ee*je,ye.length);const ce=()=>U(z=>Math.max(z-1,1)),X=()=>U(z=>Math.min(z+1,We)),de=z=>{v(z),Ce("Overview"),Oe(kr(z?.status)||"PROSPECT")},D=()=>v(null),B=z=>{z.target.id==="accountModalBackdrop"&&!J&&D()},oe=()=>{r(!1),o(!1),p(null),b(oA),c(!1),T(null)},ue=z=>{z.target.id==="modalBackdrop"&&oe()},ie=z=>z?new Date(z).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Pe=z=>{const{name:me,value:Le}=z.target;b(Re=>({...Re,[me]:Le}))},xe=()=>{b(oA),o(!1),p(null),r(!0)},fe=z=>{v(null),z.assigned_accs?T(z.assigned_accs):T(null),b({name:z.name||"",website:z.website||"",phone_number:z.phone_number||"",billing_address:z.billing_address||"",shipping_address:z.shipping_address||"",parent_company:z.parent_company||"",industry:z.industry||"",status:kr(z.status)||"PROSPECT",territory_id:z.territory?.id?String(z.territory.id):"",assigned_to:z.assigned_accs?.id?String(z.assigned_accs.id):""}),o(!0),p(z.id),r(!0)},qe=z=>{if(!z)return;const me=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Le=me?"delete":"archive",Re=me?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",Qe=!me;W({title:`${Le.charAt(0).toUpperCase()+Le.slice(1)} Account`,message:n.jsxs("span",{children:["Are you sure you want to ",Le," the account"," ",n.jsx("span",{className:"font-semibold",children:z.name}),"? ",Re]}),confirmLabel:`${Le.charAt(0).toUpperCase()+Le.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:Qe?qs:null,isArchive:Qe,action:{type:"delete",targetId:z.id,name:z.name}})},Ze=async()=>{if(!K?.action){W(null);return}const{action:z}=K,{type:me,payload:Le,targetId:Re,name:Qe}=z;Te(!0);try{if(me==="create"){c(!0);const Ke=await te.post("/accounts/admin",Le);se(),q.success(`Account "${Qe}" created successfully.`);const At=N?.id||null;oe(),await et(At),!N&&Ke.data?.id}else if(me==="update"){if(!Re)throw new Error("Missing account identifier for update.");c(!0),await te.put(`/accounts/admin/${Re}`,Le),q.success(`Account "${Qe}" updated successfully.`);const Ke=N?.id&&N.id===Re?Re:null;oe(),await et(Ke),N?.id===Re&&v(null)}else if(me==="delete"){if(!Re)throw new Error("Missing account identifier for deletion.");const Ke=N?.id;u(Re);const Ct=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?`Account "${Qe}" deleted successfully.`:`Account "${Qe}" archived successfully.`;await te.delete(`/accounts/admin/${Re}`),q.success(Ct),await et(Ke&&Ke!==Re?Ke:null),Ke===Re&&v(null)}else if(me==="bulk-delete"){const{accountIds:Ke}=z,Ct=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?"deleted":"archived";await te.delete("/accounts/admin/bulk-delete",{data:{account_ids:Ke}}),q.success(`Successfully ${Ct} ${Ke.length} accounts`),he([]),await et()}}catch(Ke){console.error(Ke);const At=me==="create"?"Failed to create account. Please review the details and try again.":me==="update"?"Failed to update account. Please review the details and try again.":me==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ct=Ke.response?.data?.detail||At;q.error(Ct),(me==="create"||me==="update")&&c(!1),me==="delete"&&u(null)}finally{(me==="create"||me==="update")&&c(!1),me==="delete"&&u(null),Te(!1),W(null)}},pt=()=>{J||W(null)},Nt=async()=>{if(!N||!Se)return;const z=kr(Se),me=kr(N.status);if(z!==me){He(!0);try{await te.put(`/accounts/admin/${N.id}`,{status:z}),q.success(`Account status updated to ${lA(z)}`),w(Le=>Le.map(Re=>Re.id===N.id?{...Re,status:z}:Re)),v(null)}catch(Le){console.error(Le);const Re=Le.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Re)}finally{He(!1)}}},[St,Ht]=f.useState(!1),on=z=>{z.preventDefault(),Ht(!0);const me=x.name.trim();if(!me){q.error("Account name is required.");return}if(!x.assigned_to){q.error("Assigned To is required.");return}const Re={name:me,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},Qe=i&&h?"update":"create";W({title:Qe==="create"?"Confirm New Account":"Confirm Update",message:Qe==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}),confirmLabel:Qe==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:Re,targetId:h||null,name:me}})},cn=[{label:"Filter by Status",value:"Filter by Status"},...iA.map(z=>({label:z.label,value:z.value}))],re=K?.action?.type==="delete"?K.action.targetId:null,lt=N&&(d===N.id||re===N.id),zt=N&&d===N.id,kt=N?Uze(N.status):"",Kt=N?n.jsx("div",{id:"accountModalBackdrop",onClick:B,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:z=>z.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:D,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:N.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${kt}`,children:lA(N.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:N.assigned_accs&&N.assigned_accs.id===t?.id&&N.acc_creator&&N.acc_creator.id===t?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(N),disabled:K?.action?.type==="update"&&K.action.targetId===N.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>qe(N),disabled:!!lt,children:zt?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(z=>n.jsx("button",{onClick:()=>Ce(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${le===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[le==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:N.website?n.jsx("a",{href:N.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:N.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:N.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:N.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:N.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:N.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:N.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:N.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_accs?`${N.assigned_accs.first_name} ${N.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.acc_creator?`${N.acc_creator.first_name} ${N.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ie(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ie(N.updated_at)||"N/A"})]})]}),n.jsx(Aa,{comments:tt,onAddComment:De})]}),le==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:j.notes||"No notes available."})]})]}),le==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Z.tasks&&Z.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(ke==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Z.tasks.length,")"]})]}),ke==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ke==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Z.tasks.map((z,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||"No description"}),z.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",z.assigned_to.first_name," ",z.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(z.due_date||z.created_at)})]},`task-${me}`))})]}),Z.meetings&&Z.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(ke==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Z.meetings.length,")"]})]}),ke==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ke==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Z.meetings.map((z,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||z.location||"No description"}),z.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",z.host.first_name," ",z.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(z.start_time||z.created_at)})]},`meeting-${me}`))})]}),Z.calls&&Z.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(ke==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Z.calls.length,")"]})]}),ke==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ke==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Z.calls.map((z,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(z.call_time||z.created_at)})]},`call-${me}`))})]}),Z.contacts&&Z.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(ke==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Z.contacts.length,")"]})]}),ke==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ke==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Z.contacts.map((z,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[z.first_name?`${z.first_name} `:"",z.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(z.created_at)})]},`contact-${me}`))})]}),Z.deals&&Z.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(ke==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Z.deals.length,")"]})]}),ke==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ke==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Z.deals.map((z,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[z.deal_id?z.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",z.name||z.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:z.stage||z.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(z.close_date||z.created_at)})]},`deal-${me}`))})]}),Z.quotes&&Z.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>ze(ke==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Z.quotes.length,")"]})]}),ke==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ke==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Z.quotes.map((z,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(z.quote_id?z.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ie(z.presented_date)||""})]},`quote-${me}`))})]}),(!Z||(!Z.tasks||Z.tasks.length===0)&&(!Z.meetings||Z.meetings.length===0)&&(!Z.calls||Z.calls.length===0)&&(!Z.quotes||Z.quotes.length===0)&&(!Z.deals||Z.deals.length===0)&&(!Z.contacts||Z.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assignedTo:N.assigned_accs?.id?String(N.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Se||kr(N?.status)||"PROSPECT",onChange:z=>Oe(z.target.value),children:iA.map(z=>n.jsx("option",{value:z.value,children:z.label},z.value))}),n.jsx("button",{onClick:Nt,disabled:ge||!Se||kr(Se)===kr(N?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ge||!Se||kr(Se)===kr(N?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ge?"Updating...":"Update"})]})]})]})]})]})}):null,Me=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{xe(),Ht(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Fe.map(z=>n.jsx(qze,{...z},z.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:Q,onChange:z=>G(z.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:I,onChange:z=>H(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(z=>n.jsx("option",{value:z.value,children:z.label},z.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:it.length>0&&it.filter(z=>z.assigned_accs?.id===t?.id&&z.acc_creator?.id===t?.id).every(z=>Ne.includes(z.id))&&it.some(z=>z.assigned_accs?.id===t?.id&&z.acc_creator?.id===t?.id),onChange:ht,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ne.length>0?n.jsx("button",{onClick:Je,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Ne.length} selected accounts`,children:n.jsx(qs,{size:18})}):""})]})}),n.jsx("tbody",{children:S?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):ye.length>0?it.map(z=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{de(z),Ee(z.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:z.assigned_accs?.id===t?.id&&z.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:Ne.includes(z.id),onChange:()=>Ae(z.id),onClick:me=>me.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:z.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:z.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Bze(z.status)}`,children:lA(z.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:z.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:z.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:z.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},z.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ye.length,pageSize:je,currentPage:ee,onPrev:ce,onNext:X,onPageSizeChange:z=>{be(z),U(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),vt=s?n.jsx("div",{id:"modalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:z=>z.stopPropagation(),children:[n.jsx("button",{onClick:()=>{oe(),Ht(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:l||J,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:on,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Km,{label:"Name",name:"name",value:x.name,onChange:Pe,placeholder:"Company name",required:!0,isSubmitted:St})}),n.jsx(Y7,{label:"Parent Company",value:x.parent_company,onChange:z=>{b(me=>({...me,parent_company:z}))},items:R.map(z=>({id:z,name:z})),getLabel:z=>z?.name||"",placeholder:"Select parent company...",disabled:l}),n.jsx(Km,{label:"Website",name:"website",value:x.website,onChange:Pe,placeholder:"https://example.com",disabled:l}),n.jsx(Km,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:Pe,placeholder:"09xx xxx xxxx",type:"tel",disabled:l}),n.jsx(Km,{label:"Industry",name:"industry",value:x.industry,onChange:Pe,placeholder:"Industry",disabled:l}),n.jsx(Km,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:Pe,placeholder:"Billing address",disabled:l}),n.jsx(Km,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:Pe,placeholder:"Shipping address",disabled:l}),n.jsx(V7,{label:"Status",name:"status",value:x.status,onChange:Pe,options:[{value:"",label:"Select status"},...iA],required:!0,disabled:l}),n.jsx(Y7,{label:"Assigned To",value:x.assigned_to,onChange:z=>{const me=E.find(Re=>String(Re.id)===String(z));T(me);let Le=null;me&&me.assigned_territory&&me.assigned_territory.length===1&&(Le=me.assigned_territory[0].id),b(Re=>({...Re,assigned_to:z,territory_id:Le}))},items:E||[],getLabel:z=>`${z?.first_name??""} ${z?.last_name??""} (${z?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:St,disabled:l||E.length===0||a}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(V7,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:Pe,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(z=>({value:String(z.id),label:z.name}))||[]],disabled:l||!k||!k.assigned_territory||k.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{oe(),Ht(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:l||J,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:l||J,children:l?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,F=K?n.jsx(Gze,{open:!0,title:K.title,message:K.message,confirmLabel:K.confirmLabel,cancelLabel:K.cancelLabel,variant:K.variant,onConfirm:Ze,onCancel:pt,loading:J,icon:K.icon,isArchive:K.isArchive}):null;return n.jsxs(n.Fragment,{children:[Me,Kt,vt,F]})}function qze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Km({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function V7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function Y7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const h=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Wze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h,allowFreeText:u})]})}function Wze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(j=>String(j.id)===String(t)),N=b?s(b):t,v=f.useMemo(()=>{const j=h.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:j=>{p(j.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&h.trim()&&!v.some(j=>s(j).toLowerCase()===h.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(h.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!h.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Gze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const h=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${h}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const cA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},pl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Di=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Vze(){const e=wt(),t=Zt();f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,h]=f.useState(null),[p,x]=f.useState(!1),[b,N]=f.useState(!1),[v,j]=f.useState(!1),[w,S]=f.useState(null),[A,E]=f.useState(!1),[_,k]=f.useState(null),[T,O]=f.useState(cA),[$,R]=f.useState(""),[P,I]=f.useState("Filter by Accounts"),[H,Q]=f.useState(null),[G,K]=f.useState("Overview"),[W,J]=f.useState(1),[Te,ee]=f.useState(10),[U,je]=f.useState({}),[be,le]=f.useState(null),[Ce,Se]=f.useState(null),[Oe,ge]=f.useState(null),[He,Ne]=f.useState([]),{comments:he,addComment:Z,refresh:_e}=Ta({relatedType:"contact",relatedId:u?.id});f.useEffect(()=>{u?.id&&_e()},[u?.id,_e]),f.useEffect(()=>{const fe=t.state?.contactID;fe&&(ge(fe),e(t.pathname,{replace:!0,state:{}}))},[t,e]),f.useEffect(()=>{if(Oe&&a.length>0&&!r){const fe=a.find(qe=>qe.id===Oe);fe?h(fe):q.error("Contact not found."),ge(null)}},[Oe,a,r]),f.useEffect(()=>{async function fe(){try{const qe=await te.get("/auth/me");Se(qe.data)}catch(qe){console.error("Failed to fetch current user",qe)}}fe()},[]);const ke=f.useCallback(async(fe=null)=>{i(!0);try{const qe=await te.get("/contacts/admin/fetch-all"),pt=[...Array.isArray(qe.data)?qe.data:[]].sort((Nt,St)=>{const Ht=Nt?.created_at||Nt?.updated_at||0,on=St?.created_at||St?.updated_at||0;return new Date(on)-new Date(Ht)});if(s(pt),fe){const Nt=pt.find(St=>St.id===fe);h(Nt||null)}}catch(qe){console.error(qe),s([]),qe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),ze=f.useCallback(async()=>{try{const fe=await te.get("/accounts/admin/fetch-all"),Ze=[...Array.isArray(fe.data)?fe.data:[]].sort((pt,Nt)=>(pt?.name||"").localeCompare(Nt?.name||""));l(Ze)}catch(fe){console.error(fe),l([]),fe.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),tt=f.useCallback(async()=>{try{const fe=await te.get("/users/all"),Ze=[...Array.isArray(fe.data)?fe.data:[]].sort((pt,Nt)=>pl(pt).localeCompare(pl(Nt)));d(Ze)}catch(fe){console.error(fe),d([]),fe.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),De=f.useCallback(async fe=>{try{const qe=await te.get(`/activities/contact/${fe}`);je(qe.data&&typeof qe.data=="object"?qe.data:{})}catch(qe){console.error(qe),qe.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]);f.useEffect(()=>{ke(),ze(),tt()},[ke,ze,tt]);const at=f.useMemo(()=>{const fe=new Map;o.forEach(Ze=>{Ze?.id&&Ze?.name&&fe.set(String(Ze.id),Ze.name)}),a.forEach(Ze=>{Ze?.account_id&&Ze?.account?.name&&fe.set(String(Ze.account_id),Ze.account.name)});const qe=Array.from(fe.entries()).sort((Ze,pt)=>Ze[1].localeCompare(pt[1])).map(([Ze,pt])=>({value:Ze,label:pt}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...qe]},[o,a]),et=f.useMemo(()=>{const fe=$.trim().toLowerCase(),qe=P.trim();return a.filter(Ze=>{const pt=[Ze?.first_name,Ze?.last_name,Ze?.email,Ze?.title,Ze?.department,Ze?.account?.name,Ze?.account?.status,Ze?.work_phone,Ze?.mobile_phone_1,Ze?.mobile_phone_2,Ze?.assigned_contact?.first_name,Ze?.assigned_contact?.last_name,Ze?.contact_creator?.first_name,Ze?.contact_creator?.last_name,Ze?.notes,Di(Ze?.created_at),Di(Ze?.updated_at)],Nt=fe===""||pt.some(Ht=>Ht==null?!1:Ht.toString().toLowerCase().includes(fe)),St=qe==="Filter by Accounts"||String(Ze.account_id)===qe;return Nt&&St})},[a,$,P]),V=Math.max(1,Math.ceil(et.length/Te)||1);f.useEffect(()=>{J(1)},[$,P]),f.useEffect(()=>{J(fe=>{const qe=Math.max(1,Math.ceil(et.length/Te)||1);return fe>qe?qe:fe})},[et.length,Te]);const ne=f.useMemo(()=>{const fe=(W-1)*Te;return et.slice(fe,fe+Te)},[et,W,Te]),se=()=>J(fe=>Math.max(fe-1,1)),Ee=()=>J(fe=>Math.min(fe+1,V)),Ie=f.useMemo(()=>{if(!b||!_)return o;const fe=a.find(Ze=>Ze.id===_);return!fe||!fe.account||o.some(Ze=>Ze.id===fe.account.id)?o:[...o,fe.account]},[o,b,_,a]),pe=f.useCallback(()=>{x(!1),N(!1),k(null),O(cA),j(!1),it(!1)},[]),Be=fe=>{fe.target.id==="modalBackdrop"&&!v&&!A&&pe()},$e=fe=>{const{name:qe,value:Ze}=fe.target;O(pt=>({...pt,[qe]:Ze}))},Ve=()=>{O(cA),N(!1),k(null),x(!0),Ce?.role==="Sales"&&O(fe=>({...fe,assigned_to:Ce.id}))},ut=async fe=>{if(!fe)return;const qe=await te.get(`/accounts/get/${fe.account_id}`);O({first_name:fe.first_name||"",last_name:fe.last_name||"",account_id:qe.data.id?qe.data.id:"",title:fe.title||"",department:fe.department||"",email:fe.email||"",work_phone:fe.work_phone||"",mobile_phone_1:fe.mobile_phone_1||"",mobile_phone_2:fe.mobile_phone_2||"",notes:fe.notes||"",assigned_to:fe.assigned_to?String(fe.assigned_to):""}),N(!0),k(fe.id),x(!0),h(null)},ve=fe=>{if(!fe)return;const qe=pl(fe)||"this contact",Ze=Ce?.role==="Admin"||Ce?.role==="CEO"||Ce?.role==="MANAGER"||Ce?.role==="GROUP MANAGER",pt=Ze?"delete":"archive",Nt=Ze?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",St=!Ze;S({title:`${pt.charAt(0).toUpperCase()+pt.slice(1)} Contact`,message:n.jsxs("span",{children:["Are you sure you want to ",pt," ",n.jsx("span",{className:"font-semibold",children:qe}),"? ",Nt]}),confirmLabel:`${pt.charAt(0).toUpperCase()+pt.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:St?qs:null,isArchive:St,action:{type:"delete",targetId:fe.id,name:qe}})},ae=()=>{const fe=ne.filter(qe=>qe.assigned_contact?.id===Ce?.id&&qe.contact_creator?.id===Ce?.id);He.length===fe.length&&fe.length>0?Ne([]):Ne(fe.map(qe=>qe.id))},Fe=fe=>{Ne(qe=>qe.includes(fe)?qe.filter(Ze=>Ze!==fe):[...qe,fe])},ye=async()=>{if(He.length===0)return;const fe=Ce?.role==="Admin"||Ce?.role==="CEO"||Ce?.role==="MANAGER"||Ce?.role==="GROUP MANAGER",qe=fe?"delete":"archive",Ze=fe?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",pt=!fe;S({title:`${qe.charAt(0).toUpperCase()+qe.slice(1)} Contacts`,message:n.jsxs("span",{children:["Are you sure you want to ",qe," ",n.jsx("span",{className:"font-semibold",children:He.length})," selected contacts? ",Ze]}),confirmLabel:`${qe.charAt(0).toUpperCase()+qe.slice(1)} ${He.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:pt?qs:null,isArchive:pt,action:{type:"bulk-delete",contactIds:He}})},[We,it]=f.useState(!1),ht=fe=>{fe.preventDefault(),it(!0);const qe=T.first_name.trim(),Ze=T.last_name.trim();if(!qe||!Ze){q.error("First name and last name are required.");return}if(!T.account_id){q.error("Account is required.");return}if(!T.assigned_to){q.error("Assigned To is required.");return}const Nt=T.email?.trim();if(!Nt){q.error("Email is required.");return}if(!Nt.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Nt)){q.error("Please enter a valid email address.");return}const Ht={first_name:qe,last_name:Ze,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},on=b&&_?"update":"create",cn=`${qe} ${Ze}`.trim();S({title:on==="create"?"Confirm New Contact":"Confirm Update",message:on==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:cn})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:cn}),"?"]}),confirmLabel:on==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:on,payload:Ht,targetId:_||null,name:cn}})},Ae=async()=>{if(!w?.action){S(null);return}const{action:fe}=w,{type:qe,payload:Ze,targetId:pt,name:Nt}=fe;E(!0);try{if(qe==="create"){j(!0),await te.post("/contacts/admin",Ze),q.success(`Contact "${Nt}" created successfully.`);const St=u?.id||null;pe(),await ke(St)}else if(qe==="update"){if(!pt)throw new Error("Missing contact identifier for update.");j(!0),await te.put(`/contacts/admin/${pt}`,Ze),q.success(`Contact "${Nt}" updated successfully.`);const St=u?.id&&u.id===pt?pt:u?.id||null;pe(),await ke(St),u?.id===pt&&h(null)}else if(qe==="delete"){if(!pt)throw new Error("Missing contact identifier for deletion.");const St=u?.id;Q(pt);const on=Ce?.role==="Admin"||Ce?.role==="CEO"||Ce?.role==="MANAGER"||Ce?.role==="GROUP MANAGER"?`Contact "${Nt}" deleted successfully.`:`Contact "${Nt}" archived successfully.`;await te.delete(`/contacts/admin/${pt}`),q.success(on),await ke(St&&St!==pt?St:null),St===pt&&h(null)}else if(qe==="bulk-delete"){const{contactIds:St}=fe;if(!St||St.length===0)throw new Error("No contacts provided for bulk deletion.");const on=Ce?.role==="Admin"||Ce?.role==="CEO"||Ce?.role==="MANAGER"||Ce?.role==="GROUP MANAGER"?`Successfully deleted ${St.length} contact(s).`:`Successfully archived ${St.length} contact(s).`;await te.delete("/contacts/admin/bulk-delete",{data:{contact_ids:St}}),q.success(on),Ne([]),await ke(),h(null)}}catch(St){console.error(St);const Ht=qe==="create"?"Failed to create contact. Please review the details and try again.":qe==="update"?"Failed to update contact. Please review the details and try again.":qe==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",on=St.response?.data?.detail||Ht;q.error(on)}finally{(qe==="create"||qe==="update")&&j(!1),qe==="delete"&&Q(null),E(!1),S(null)}},Je=()=>{A||S(null)},ce=fe=>{h(fe),K("Overview")},X=()=>h(null),de=fe=>{fe.target.id==="contactModalBackdrop"&&!A&&X()},D=w?.action?.type==="delete"?w.action.targetId:null,B=u&&(H===u.id||D===u.id),oe=u&&H===u.id,ue=u?n.jsx("div",{id:"contactModalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:fe=>fe.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:X,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:pl(u)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:u.assigned_contact&&u.assigned_contact.id===Ce?.id&&u.contact_creator&&u.contact_creator.id===Ce?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ut(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>ve(u),disabled:!!B,children:oe?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(qs,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(fe=>n.jsx("button",{onClick:()=>K(fe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===fe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:fe},fe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:pl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Di(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Di(u.updated_at)||"N/A"})]})]})}),G==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Aa,{comments:he,onAddComment:Z})]}),G==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[U.tasks&&U.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",U.tasks.length,")"]})]}),be==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.tasks.map((fe,qe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.description||"No description"}),fe.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",fe.assigned_to.first_name," ",fe.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.due_date||fe.created_at)})]},`task-${qe}`))})]}),U.meetings&&U.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",U.meetings.length,")"]})]}),be==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.meetings.map((fe,qe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.description||fe.location||"No description"}),fe.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",fe.host.first_name," ",fe.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.start_time||fe.created_at)})]},`meeting-${qe}`))})]}),U.calls&&U.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",U.calls.length,")"]})]}),be==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.calls.map((fe,qe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.call_time||fe.created_at)})]},`call-${qe}`))})]}),U.contacts&&U.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",U.contacts.length,")"]})]}),be==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.contacts.map((fe,qe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[fe.first_name?`${fe.first_name} `:"",fe.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fe.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.created_at)})]},`contact-${qe}`))})]}),U.deals&&U.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",U.deals.length,")"]})]}),be==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.deals.map((fe,qe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[fe.deal_id?fe.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",fe.name||fe.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:fe.stage||fe.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.close_date||fe.created_at)})]},`deal-${qe}`))})]}),U.quotes&&U.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",U.quotes.length,")"]})]}),be==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.quotes.map((fe,qe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(fe.quote_id?fe.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fe.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.presented_date)||""})]},`quote-${qe}`))})]}),(!U||(!U.tasks||U.tasks.length===0)&&(!U.meetings||U.meetings.length===0)&&(!U.calls||U.calls.length===0)&&(!U.quotes||U.quotes.length===0)&&(!U.deals||U.deals.length===0)&&(!U.contacts||U.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const fe=encodeURIComponent(u.email),qe=encodeURIComponent(""),Ze=encodeURIComponent(""),pt=`mailto:${fe}?subject=${qe}&body=${Ze}`;window.location.href=pt},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ie=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ve(),it(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:$,onChange:fe=>R(fe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:fe=>I(fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:at.map(fe=>n.jsx("option",{value:fe.value,children:fe.label},fe.value??fe.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:ne.length>0&&ne.filter(fe=>fe.assigned_contact?.id===Ce?.id&&fe.contact_creator?.id===Ce?.id).every(fe=>He.includes(fe.id))&&ne.some(fe=>fe.assigned_contact?.id===Ce?.id&&fe.contact_creator?.id===Ce?.id),onChange:ae,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:He.length>0?n.jsx("button",{onClick:ye,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${He.length} selected contacts`,children:n.jsx(qs,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):et.length>0?ne.map(fe=>{const qe=[{Icon:na,value:fe.email,key:"email"},{Icon:Lt,value:fe.work_phone,key:"work_phone"},{Icon:od,value:fe.mobile_phone_1,key:"mobile_phone_1"},{Icon:od,value:fe.mobile_phone_2,key:"mobile_phone_2"}].filter(Ze=>!!Ze.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:Ze=>Ze.stopPropagation(),children:fe.assigned_contact&&fe.assigned_contact.id===Ce?.id&&fe.contact_creator&&fe.contact_creator.id===Ce?.id?n.jsx("input",{type:"checkbox",checked:He.includes(fe.id),onChange:()=>Fe(fe.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Ze=>Ze.stopPropagation()}):null}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:pl(fe)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:fe.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ix,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:fe.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:qe.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:qe.map(({Icon:Ze,value:pt,key:Nt})=>{const St=bt.createElement(Ze,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[St,n.jsx("span",{children:pt})]},Nt)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:fe.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:fe.assigned_contact?`${fe.assigned_contact.first_name} ${fe.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:Di(fe.created_at)||"--"})]})})]},fe.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:et.length,pageSize:Te,currentPage:W,onPrev:se,onNext:Ee,onPageSizeChange:fe=>{ee(fe),J(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Pe=p?n.jsx("div",{id:"modalBackdrop",onClick:Be,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:fe=>fe.stopPropagation(),children:[n.jsx("button",{onClick:()=>{pe(),it(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||A,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ht,noValidate:!0,children:[n.jsx(Rc,{label:"First Name",name:"first_name",value:T.first_name,onChange:$e,placeholder:"First name",required:!0,isSubmitted:We}),n.jsx(Rc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:$e,placeholder:"Last name",required:!0,isSubmitted:We}),n.jsx(Q7,{label:"Account",value:T.account_id,onChange:fe=>O(qe=>({...qe,account_id:fe})),items:b?Ie:o||[],getLabel:fe=>fe?.name??"",placeholder:"Search account...",disabled:v||(b?Ie.length===0:o.length===0),required:!0,isSubmitted:We}),n.jsx(Q7,{label:"Assigned To",value:T.assigned_to,onChange:fe=>O(qe=>({...qe,assigned_to:fe})),items:c||[],getLabel:fe=>`${fe?.first_name??""} ${fe?.last_name??""} (${fe?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:We,disabled:v||c.length===0||Ce?.role==="Sales"}),n.jsx(Rc,{label:"Title",name:"title",value:T.title,onChange:$e,placeholder:"Job title",disabled:v}),n.jsx(Rc,{label:"Department",name:"department",value:T.department,onChange:$e,placeholder:"Department",disabled:v}),n.jsx(Rc,{label:"Email",name:"email",type:"email",value:T.email,onChange:$e,placeholder:"example@email.com",required:!0,isSubmitted:We}),n.jsx(Rc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:$e,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Rc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:$e,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Rc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:$e,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Qze,{label:"Notes",name:"notes",value:T.notes,onChange:$e,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{pe(),it(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||A,children:v?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,xe=w?n.jsx(Kze,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Ae,onCancel:Je,loading:A,icon:w.icon,isArchive:w.isArchive}):null;return n.jsxs(n.Fragment,{children:[ie,ue,Pe,xe]})}function Rc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function Q7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Yze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function Yze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Qze({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Kze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const h=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${h}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const dA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function qZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Bo(),[d,u]=f.useState(e||null),[h,p]=f.useState("Overview"),[x,b]=f.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[v,j]=f.useState(null),[w,S]=f.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,E]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,k]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),b(e.status||"New");return}if(!c)return;const I=await te.get(`/leads/get/${c}`);u(I.data),b(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};f.useEffect(()=>{e?(u(e),b(e.status||"New")):c&&T()},[c,e]);const O=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const I=await te.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const H={...d,status:I.data.status};u(H),i&&i(H),a&&a(),t&&t()}catch(I){console.error(I),q.error("Failed to update lead status")}},$=async I=>{const H={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",H),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const G=(await te.post("/accounts/convertedLead",H)).data.id,K={...A,account_id:G,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},J=(await te.post("/contacts/convertedLead",K)).data.id,Te=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ee=_.amount&&_.amount!==""?parseFloat(_.amount):0,U={..._,account_id:G,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:J,probability:Te(),stage:"Prospecting"},je=await te.post("/deals/convertedLead",U),be=await te.put(`/leads/convert/${I.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const G=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";q.error(G)}},R=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=I=>I.toString().toLowerCase().replace(/\b\w/g,H=>H.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${R(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>$(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),h==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),h==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:dA(I.due_date||I.created_at)})]},`task-${H}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:dA(I.start_time||I.created_at)})]},`meeting-${H}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:dA(I.call_time||I.created_at)})]},`call-${H}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),H=encodeURIComponent(""),Q=encodeURIComponent(""),G=`mailto:${I}?subject=${H}&body=${Q}`;window.location.href=G},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>b(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:O,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Xze=Yf.all(),uA=Xze.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),Zze=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),Jze=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},mA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function eFe(){const e=wt(),{leadID:t}=Bo();zs();const[a,s]=f.useState(null),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]),[p,x]=f.useState(!1),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState(1),[A,E]=f.useState(10),[_,k]=f.useState(mA),[T,O]=f.useState(!1),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState(null),[G,K]=f.useState(!1),[W,J]=f.useState({});f.useRef(null);const[Te,ee]=f.useState(!1),[U,je]=f.useState(null),[be,le]=f.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Ce,Se]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Oe,ge]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const He=async()=>{try{const ce=await te.get("/leads/getUsers");l(ce.data)}catch(ce){console.error(`Error fetching users: ${ce}`)}},Ne=async()=>{x(!0);try{const ce=await te.get("/leads/admin/getLeads");h(ce.data),console.log(ce.data)}catch(ce){console.error(`Error fetching leads: ${ce}`)}finally{x(!1)}};f.useEffect(()=>{He(),Ne()},[]);const{user:he}=en(),Z=he?.role==="Sales";f.useEffect(()=>{r&&!T&&Z&&he&&!_.lead_owner&&k(ce=>({...ce,lead_owner:he.id}))},[r,T,Z,he,_.lead_owner]),f.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const ce=u.find(X=>X.id===Number(t));ce&&s(ce)}else!t&&!a&&s(null)},[t,u,r,T]),f.useEffect(()=>{if(U){const X=(B=>{if(!B)return{code:"+63",number:""};const oe=B.match(/^(\+\d+)\s(.+)$/);if(oe)return{code:oe[1],number:oe[2]};if(B.startsWith("+")){const ue=B.match(/^(\+\d{1,3})/);if(ue)return{code:ue[1],number:B.substring(ue[1].length).trim()}}return{code:"+63",number:B}})(U.work_phone),de=[];U.work_phone&&de.push(`Work: ${U.work_phone}`),U.mobile_phone_1&&de.push(`Mobile 1: ${U.mobile_phone_1}`),U.mobile_phone_2&&de.push(`Mobile 2: ${U.mobile_phone_2}`);const D=de.length>0?de.join(" | "):"";le({name:U.company_name||"",website:"",countryCode:X.code,phone_number:X.number,combinedPhoneNumbers:D,billing_address:U.address||"",shipping_address:U.address||"",industry:"",status:"Prospect",territory_id:U.assigned_to?.territory?.id||null,assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),Se({last_name:U.last_name||"",first_name:U.first_name||"",account_id:null,title:U.title||"",department:U.department||"",email:U.email||"",work_phone:U.work_phone||"",mobile_phone_1:U.mobile_phone_1||"",mobile_phone_2:U.mobile_phone_2||"",notes:U.notes||"",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),ge({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null})}},[U]);const _e=ce=>N(ce.target.value),ke=f.useMemo(()=>{const ce=b.trim().toLowerCase(),X=v.trim().toUpperCase();return u.filter(de=>{const D=[de?.first_name,de?.last_name,de?.company_name,de?.title,de?.email,de?.work_phone,de?.assigned_to?`${de.assigned_to.first_name} ${de.assigned_to.last_name}`:""],B=ce===""||D.some(ue=>ue==null||ue===""?!1:ue.toString().toLowerCase().includes(ce));let oe=!1;return X==="FILTER BY STATUS"?oe=(de.status?de.status.toUpperCase():"")!=="CONVERTED":oe=(de.status?de.status.toUpperCase():"")===X,B&&oe})},[u,b,v]),ze=Math.max(1,Math.ceil(ke.length/A)||1);f.useEffect(()=>{S(1)},[b,v]),f.useEffect(()=>{S(ce=>{const X=Math.max(1,Math.ceil(ke.length/A)||1);return ce>X?X:ce})},[ke.length,A]);const tt=f.useMemo(()=>{const ce=(w-1)*A;return ke.slice(ce,ce+A)},[ke,w,A]),De=()=>S(ce=>Math.max(ce-1,1)),at=()=>S(ce=>Math.min(ce+1,ze)),et=f.useCallback(async ce=>{try{const X=await te.get(`/activities/lead/${ce}`);J(X.data&&typeof X.data=="object"?X.data:{})}catch(X){console.error(X),X.response?.status===404&&(console.warn("No activities found for this account."),J({}))}},[]),V=ce=>{s(ce),et(ce.id)},ne=()=>{s(null),t&&e("/admin/leads",{replace:!0})},se=()=>{i(!1),k(mA),O(!1),R(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},Ee=ce=>{ce.target.id==="modalBackdrop"&&se()},Ie=()=>{k(mA),O(!1),R(null),d(null),i(!0)},pe=ce=>{if(!ce){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ce),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const X=ue=>{if(!ue)return{code:"+63",number:""};const ie=ue.match(/^(\+\d+)\s(.+)$/);return ie?{code:ie[1],number:ie[2]}:{code:"+63",number:ue}},de=X(ce.work_phone),D=X(ce.mobile_phone_1),B=X(ce.mobile_phone_2);let oe="";if(ce.assigned_to){oe=String(ce.assigned_to.id);const ue=o?.find(ie=>ie.id===ce.assigned_to.id);d(ue)}k({first_name:ce.first_name||"",last_name:ce.last_name||"",company_name:ce.company_name||"",title:ce.title||"",department:ce.department||"",email:ce.email||"",work_ccode:de.code,work_phone:de.number,m1_ccode:D.code,mobile_phone_1:D.number,m2_ccode:B.code,mobile_phone_2:B.number,address:ce.address||"",notes:ce.notes||"",source:ce.source||"",territory_id:ce.territory?.id||null,lead_owner:oe,status:ce.status||"New"}),O(!0),R(ce.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Be=ce=>{if(!ce){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ce);const X=`${ce.first_name} ${ce.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:X}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ce.id,name:X}})},$e=ce=>{const{name:X,value:de}=ce.target;if(k(D=>({...D,[X]:de})),X==="lead_owner"){const D=o.find(B=>B.id===parseInt(de));d(D)}},[Ve,ut]=f.useState(!1),ve=ce=>{if(ce.preventDefault(),ut(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const de={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},D=T&&$?"update":"create",B=`${_.first_name} ${_.last_name}`;Q({title:D==="create"?"Confirm New Lead":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:D,payload:de,targetId:$||null,name:B}})},ae=async()=>{if(!H?.action){Q(null);return}const{action:ce}=H,{type:X,payload:de,targetId:D,name:B,lead:oe}=ce;console.log(de),K(!0);try{if(X==="create")I(!0),await te.post("/leads/create",de),q.success(`Lead "${B}" created successfully.`),se(),await Ne();else if(X==="update"){if(!D)throw new Error("Missing lead identifier for update.");I(!0);const ue=await te.put(`/leads/${D}`,de);q.success(`Lead "${B}" updated successfully.`),a&&a.id===D&&s(null),se(),await Ne()}else if(X==="delete"){if(!D)throw new Error("Missing lead identifier for deletion.");await te.delete(`/leads/${D}`),q.success(`Lead "${B}" deleted successfully.`),a?.id===D&&s(null),await Ne()}}catch(ue){console.error(ue);const ie=X==="create"?"Failed to create lead. Please review the details and try again.":X==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",Pe=ue.response?.data?.detail||ie;q.error(Pe)}finally{(X==="create"||X==="update")&&I(!1),X!=="edit"&&(K(!1),Q(null))}},Fe=()=>{G||Q(null)},ye=u.filter(ce=>ce.status==="New").length,We=u.filter(ce=>ce.status==="Contacted").length,it=u.filter(ce=>ce.status==="Qualified").length,ht=u.filter(ce=>ce.status==="Converted").length,Ae=u.filter(ce=>ce.status==="Lost").length,Je=[{title:"New",value:ye,icon:Qn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:We,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:it,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:ht,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Ae,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ie(),ut(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(ce=>n.jsx(nFe,{...ce},ce.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:b,onChange:_e,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:ce=>j(ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ke.length>0?tt.map(ce=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>V(ce),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ce.first_name," ",ce.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ce.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Jze(ce.status||"New")}`,children:Zze(ce.status||"New")})})]},ce.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ke.length,pageSize:A,currentPage:w,onPrev:De,onNext:at,onPageSizeChange:ce=>{E(ce),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Ee,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ce=>ce.stopPropagation(),children:[n.jsx("button",{onClick:()=>{se(),ut(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:$e,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:$e,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Ve&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:$e,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ve&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:$e,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ve&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:$e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:$e,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ve&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:$e,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:uA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:$e,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:$e,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:uA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:$e,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:$e,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:uA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:$e,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:$e,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Ve&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(aFe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",disabled:P||Z,getLabel:ce=>`${ce.first_name} ${ce.last_name}`,onChange:ce=>{const X=o.find(D=>String(D.id)===String(ce));d(X);let de=null;X&&X.assigned_territory&&X.assigned_territory.length===1&&(de=X.assigned_territory[0].id),k(D=>({...D,lead_owner:ce,territory_id:de}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:$e,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ce=>n.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:$e,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:$e,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{se(),ut(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||G,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:ve,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||G,children:P||G?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),H&&n.jsx(tFe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:ae,onCancel:Fe,loading:G}),a&&!r&&!T&&n.jsx(qZ,{relatedActs:W,lead:a,onBack:ne,fetchLeads:Ne,setSelectedLead:s,onEdit:pe,onDelete:Be})]})}function tFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function nFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function aFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=f.useState(!1),[d,u]=f.useState(""),h=f.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",b=f.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const N=v=>{h.current&&!h.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),f.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:h,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:b.length>0?b.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const db={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ka=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),sFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ka,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ka,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ka,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ka,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ka,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),rFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ka,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ka,{label:"Department",name:"department",value:e.department}),n.jsx(Ka,{label:"Title",name:"title",value:e.title}),n.jsx(Ka,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ka,{label:"Email",name:"email",value:e.email}),n.jsx(Ka,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ka,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),iFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ka,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ka,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ka,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"Description",name:"description",value:e.description}),n.jsx(Ka,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function oFe({isOpen:e,onClose:t}){const[a,s]=f.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(sFe,{data:db});case 2:return n.jsx(rFe,{data:db});case 3:return n.jsx(iFe,{data:db});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:db.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(rj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function WZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=f.useState(e?.stage||""),[i,o]=f.useState(!1),l=wt(),{user:c}=en();f.useEffect(()=>{console.log("SalesDealsQuickAction mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];f.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const h=e.id;o(!0);try{await te.put(`/deals/admin/${h}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),b=`mailto:${h}?subject=${p}&body=${x}`;window.location.href=b},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const h=e.account?.id||e.account_id;l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(h=>n.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function GZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=zs(),u=d.get("id"),[h,p]=f.useState(e||null),[x,b]=f.useState(s||"Overview"),{user:N}=en(),{comments:v,addComment:j,refresh:w}=Ta({relatedType:"deal",relatedId:h?.id});f.useEffect(()=>{h?.id&&w()},[h?.id,w]);const S=s!==void 0?s:x;if(f.useEffect(()=>{(async()=>{if(u&&!e)try{const O=((await te.get("/deals/admin/fetch-all")).data||[]).find($=>$.id===parseInt(u));if(O){const $={...O,amount:typeof O.amount=="number"?O.amount:parseFloat(O.amount||0),probability:O.probability||0};p($)}else console.warn("Deal not found with ID:",u)}catch(k){console.error("Error fetching deal:",k)}})()},[u,e]),!h&&!u||u&&!h)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function E(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(h.stage)}`,children:h.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",E(h.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===N?.id||h.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Gt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):b(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",h.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(h?.stage||"PROSPECTING").toUpperCase(),T=($=>$==="PROSPECTING"?0:$==="QUALIFICATION"?1:$==="PROPOSAL"?2:$==="NEGOTIATION"?3:$==="CLOSED_WON"||$==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map($=>T===$?"orange":T>$?"green":"gray").map(($,R)=>n.jsxs(bt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${$==="green"?"bg-green-500 border-green-500":$==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),R<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},R))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,k)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},k))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",h.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]}),n.jsx(Aa,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},k))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(WZ,{selectedDeal:h,onStatusUpdate:l,onClose:a})})]})]})]})})}function lFe(){f.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Zt(),[a,s]=f.useState(""),[r,i]=f.useState("Filter by Stage"),[o,l]=f.useState("Filter by Owner"),[c,d]=f.useState(null),[u,h]=f.useState("Overview"),[p,x]=f.useState(!1),[b,N]=f.useState(null),[v,j]=f.useState(!1),[w,S]=f.useState(1),[A,E]=f.useState(10),[_,k]=f.useState(!1),[T,O]=f.useState(null),[$,R]=f.useState(!1),[P,I]=f.useState(!1),[H,Q]=f.useState(null),[G,K]=f.useState([]),[W,J]=f.useState([]),[Te,ee]=f.useState([]),[U,je]=f.useState({}),[be,le]=f.useState(null);f.useEffect(()=>{const D=t.state,B=D?.dealID;if(B&&!D?.openDealModal){le(B),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(be&&b?.length>0&&!v){const D=b.find(B=>B.id===be);D?d(D):q.error("Deal not found."),le(null)}},[be,b,v]);const[Ce,Se]=f.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Oe,ge]=f.useState(null),[He,Ne]=f.useState(null),he={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Z=D=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[D]||D||"--",_e=D=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[D]||"bg-gray-100 text-gray-700",ke=f.useCallback(async D=>{try{const B=await te.get(`/activities/deal/${D}`);je(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]),ze=f.useMemo(()=>{const D=a.trim().toLowerCase(),B=r.trim(),oe=o.trim();return(b??[]).filter(ue=>{const ie=[ue?.name,ue?.description,ue?.account?.name,ue?.contact?.first_name,ue?.contact?.last_name,ue?.assigned_deals?.first_name,ue?.assigned_deals?.last_name],Pe=D===""||ie.some(qe=>qe==null||qe===""?!1:qe.toString().toLowerCase().includes(D)),xe=B==="Filter by Stage"||B===""||ue.stage===he[B]||ue.stage===B,fe=oe==="Filter by Owner"||oe===""||`${ue.assigned_deals?.first_name||""} ${ue.assigned_deals?.last_name||""}`.trim().toLowerCase()===oe.toLowerCase();return Pe&&xe&&fe})},[b,a,r,o]),tt=Math.max(1,Math.ceil(ze.length/A)||1);f.useEffect(()=>{S(1)},[a,r,o]),f.useEffect(()=>{S(D=>{const B=Math.max(1,Math.ceil(ze.length/A)||1);return D>B?B:D})},[ze.length,A]);const De=f.useMemo(()=>{const D=(w-1)*A;return ze.slice(D,D+A)},[ze,w,A]),at=()=>S(D=>Math.max(D-1,1)),et=()=>S(D=>Math.min(D+1,tt)),V=()=>{Se({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),Q(null),x(!0)},ne=async()=>{j(!0);try{const D=await te.get("/deals/admin/fetch-all"),oe=[...Array.isArray(D.data)?D.data:[]].sort((ue,ie)=>{const Pe=ue?.created_at?new Date(ue.created_at).getTime():0;return(ie?.created_at?new Date(ie.created_at).getTime():0)-Pe});N(oe)}catch(D){D.response&&D.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(D)}finally{j(!1)}},se=async()=>{try{const D=await te.get("/accounts/admin/fetch-all");K(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},Ee=async()=>{try{const D=await te.get("/contacts/admin/fetch-all");J(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},Ie=async()=>{try{const D=await te.get("/users/all");ee(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&q.warn("Unable to load users (permission denied).")}};f.useEffect(()=>{ne(),se(),Ee(),Ie()},[]);const{user:pe}=en(),Be=pe?.role==="Sales";f.useEffect(()=>{p&&!P&&Be&&pe&&!Ce.assigned_to&&Se(D=>({...D,assigned_to:pe.id}))},[p,P,Be,pe,Ce.assigned_to]);const $e=async D=>{D&&(Se({id:D.id||null,name:D.name||"",account_id:D.account_id?.toString()||"",primary_contact_id:D.primary_contact_id?.toString()||"",stage:D.stage||"PROPOSAL",amount:D.amount?.toString()||"",close_date:D.close_date?new Date(D.close_date).toISOString().split("T")[0]:"",assigned_to:D.assigned_to?.toString()||"",currency:D.currency||"PHP",description:D.description||""}),ge(D.account||null),Ne(D.contact||null),I(!0),Q(D.id),d(null),x(!0))},Ve=async(D=!1)=>{try{const B=await te.get("/deals/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((ie,Pe)=>{const xe=ie?.created_at?new Date(ie.created_at).getTime():0;return(Pe?.created_at?new Date(Pe.created_at).getTime():0)-xe});if(N(ue),!D&&c&&c.id){const ie=ue.find(Pe=>Pe.id===c.id);ie&&d({...ie})}}catch(B){console.error("Failed to refresh deal data:",B),await ne()}},ut=D=>{const B=D.name.trim();if(!B){q.error("Deal name is required.");return}if(!D.account_id){q.error("Account is required.");return}const oe=P&&H?"update":"create",ue=B;O({title:oe==="create"?"Confirm New Deal":"Confirm Update",message:oe==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:ue}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ue}),"?"]}),confirmLabel:oe==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:oe,formData:D,targetId:H||null,name:ue}})},ve=D=>{if(!D)return;const B=D.name||"this deal";O({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},ae=async()=>{if(!T?.action){O(null);return}const{action:D}=T,{type:B,formData:oe,targetId:ue,name:ie}=D;R(!0);try{if(B==="create"){k(!0);const Pe={name:oe.name.trim(),account_id:parseInt(oe.account_id),primary_contact_id:oe.primary_contact_id?parseInt(oe.primary_contact_id):null,stage:oe.stage,amount:oe.amount?parseFloat(oe.amount):null,currency:oe.currency||"PHP",close_date:oe.close_date||null,description:oe.description||null,assigned_to:oe.assigned_to?parseInt(oe.assigned_to):null};await te.post("/deals/admin/create",Pe),q.success(`Deal "${ie}" created successfully.`),x(!1),await ne()}else if(B==="update"){if(!ue)throw new Error("Missing deal identifier for update.");k(!0);const Pe={};oe.name!==void 0&&(Pe.name=oe.name.trim()),oe.account_id!==void 0&&oe.account_id!==""&&(Pe.account_id=parseInt(oe.account_id)),oe.primary_contact_id!==void 0&&(Pe.primary_contact_id=oe.primary_contact_id?parseInt(oe.primary_contact_id):null),oe.stage!==void 0&&(Pe.stage=oe.stage),oe.amount!==void 0&&oe.amount!==""&&(Pe.amount=parseFloat(oe.amount)),oe.currency!==void 0&&(Pe.currency=oe.currency),oe.close_date!==void 0&&(Pe.close_date=oe.close_date||null),oe.description!==void 0&&(Pe.description=oe.description||null),oe.assigned_to!==void 0&&(Pe.assigned_to=oe.assigned_to?parseInt(oe.assigned_to):null),await te.put(`/deals/admin/${ue}`,Pe),q.success(`Deal "${ie}" updated successfully.`),x(!1),await ne()}else if(B==="delete"){if(!ue)throw new Error("Missing deal identifier for deletion.");await te.delete(`/deals/admin/${ue}`),q.success(`Deal "${ie}" deleted successfully.`),c?.id===ue&&d(null),await ne()}}catch(Pe){console.error(Pe);const xe=B==="create"?"Failed to create deal. Please review the details and try again.":B==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",fe=Pe.response?.data?.detail||xe;q.error(fe)}finally{(B==="create"||B==="update")&&k(!1),R(!1),O(null)}},Fe=()=>{$||O(null)},ye=()=>{x(!1),Se({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ge(null),Ne(null),I(!1),Q(null),k(!1)},We=(b??[]).filter(D=>D.stage==="PROSPECTING").length,it=(b??[]).filter(D=>D.stage==="QUALIFICATION").length,ht=(b??[]).filter(D=>D.stage==="PROPOSAL").length,Ae=(b??[]).filter(D=>D.stage==="NEGOTIATION").length,Je=(b??[]).filter(D=>D.stage==="CLOSED_WON").length,ce=(b??[]).filter(D=>D.stage==="CLOSED_LOST").length,X=(b??[]).filter(D=>D.stage==="CLOSED_CANCELLED").length,de=[{title:"Prospecting",value:We,icon:Gw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:it,icon:fa,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:ht,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Ae,icon:sd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Je,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ce,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:X,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:V,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:de.map(D=>n.jsx(dFe,{...D},D.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:D=>s(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:D=>i(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((b??[]).map(D=>`${D.assigned_deals?.first_name} ${D.assigned_deals?.last_name}`))].map((D,B)=>n.jsx("option",{value:D,children:D},B))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:ze.length>0?De.map(D=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...D}),ke(D.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:D.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:D.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.contact?.first_name&&D.contact?.last_name?`${D.contact.first_name} ${D.contact.last_name}`:D.contact?.first_name||D.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_e(D.stage)}`,children:Z(D.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",D.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.assigned_deals?.first_name&&D.assigned_deals?.last_name?`${D.assigned_deals.first_name} ${D.assigned_deals.last_name}`:D.assigned_deals?.first_name||D.assigned_deals?.last_name||"--"})]},D.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ze.length,pageSize:A,currentPage:w,onPrev:at,onNext:et,onPageSizeChange:D=>{E(D),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(uFe,{onClose:ye,formData:Ce,setFormData:Se,isEditing:P,onSubmit:ut,isSubmitting:_||$,accounts:G,contacts:W,users:Te,currentAccount:Oe,currentContact:He}),c&&n.jsx(GZ,{relatedActs:U,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:h,onEdit:$e,onDelete:ve,onStatusUpdate:Ve}),T&&n.jsx(cFe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ae,onCancel:Fe,loading:$})]})}function cFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function dFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function uFe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const{user:h}=en(),p=h?.role==="Sales";f.useEffect(()=>{!s&&p&&h&&!t.assigned_to&&a(w=>({...w,assigned_to:h.id}))},[s,p,h,t.assigned_to,a]);const[x,b]=f.useState(!1),N=w=>{if(w.preventDefault(),b(!0),!t.name?.trim()){q.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}r?.(t)},v=w=>{w.target.id==="modalBackdrop"&&e()},j=f.useMemo(()=>{const w=String(t.account_id||"").trim(),S=Array.isArray(l)?l:[];return w?S.filter(A=>{const _=[A?.account_id,A?.accountId,A?.account?.id,A?.account?.account_id,A?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return _?String(_)===w:!1}):S},[l,t.account_id]);return f.useEffect(()=>{const w=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!w)return;j.some(E=>String(E?.id)===S)||a(E=>({...E,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,j,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:w=>w.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:N,noValidate:!0,children:[n.jsx(fA,{label:"Deal Name",name:"name",value:t.name,onChange:w=>a({...t,name:w.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),n.jsx(hA,{label:"Account",value:t.account_id||"",onChange:w=>a({...t,account_id:w}),items:o||[],getLabel:w=>w?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:x}),n.jsx(hA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:w=>a({...t,primary_contact_id:w}),items:j||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:x}),n.jsx(K7,{label:"Stage",name:"stage",value:t.stage,onChange:w=>a({...t,stage:w.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(fA,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:w=>a({...t,amount:w.target.value}),placeholder:"0",required:!0,isSubmitted:x}),n.jsx(K7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:w=>a({...t,currency:w.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(fA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:w=>a({...t,close_date:w.target.value}),disabled:i}),n.jsx(hA,{label:"Assign To",value:t.assigned_to||"",onChange:w=>a({...t,assigned_to:w}),items:c||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||p,className:"md:col-span-2"}),n.jsx(fFe,{label:"Description",name:"description",value:t.description,onChange:w=>a({...t,description:w.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function fA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function K7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function hA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const h=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(mFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:h})]})}function mFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c={hasError:c}}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function fFe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const gA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],pA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Mi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},xA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",hFe=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},gFe=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},ub=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",wg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",pFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},yA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},X7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},bA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Nw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},xFe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Nw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Nw(t);return a||null},yFe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},bFe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function vFe(){const e=wt(),t=Zt(),{user:a}=en(),s=a?.company?.currency||"";f.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=f.useState([]),[o,l]=f.useState(!1),[c,d]=f.useState([]),[u,h]=f.useState([]),[p,x]=f.useState([]),[b,N]=f.useState([]),[v,j]=f.useState(null),[w,S]=f.useState(null),[A,E]=f.useState(!1),[_,k]=f.useState(!1),[T,O]=f.useState(!1),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState(!1),[G,K]=f.useState(null),[W,J]=f.useState(pA),[Te,ee]=f.useState(""),[U,je]=f.useState("Filter by Status"),[be,le]=f.useState(null),Ce=f.useCallback(async()=>{if(w)try{Q(!0);const z=(await te.get("/company/invoice-info"))?.data;e(`/sales/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:z}})}catch(F){const z=F?.response?.data?.detail||F?.message||"Failed to open print page.";q.error(z)}finally{Q(!1)}},[w,e]),[Se,Oe]=f.useState(1),[ge,He]=f.useState(10),[Ne,he]=f.useState("Overview"),[Z,_e]=f.useState("Draft"),[ke,ze]=f.useState([]),[tt,De]=f.useState(null),{comments:at,addComment:et,refresh:V}=Ta({relatedType:"quote",relatedId:w?.id});f.useEffect(()=>{w?.id&&V()},[w?.id,V]),f.useEffect(()=>{const z=t.state?.quoteID;if(z){De(z),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(tt&&r.length>0&&!o){const F=r.find(z=>z.id===tt);F?S(F):q.error("Quote not found."),De(null)}},[tt,r,o]),f.useEffect(()=>{let F=!0;return(async()=>{const me=xFe();if(me&&F){j(me);return}try{const Le=await te.get("/auth/me"),Re=Nw(Le?.data);if(Re&&F){j(Re);return}}catch{}try{const Le=await te.get("/users/me"),Re=Nw(Le?.data);if(Re&&F){j(Re);return}}catch{}F&&j(null)})(),()=>{F=!1}},[]);const ne=f.useCallback(F=>F&&u.find(me=>String(me.id)===String(F))?.name||"",[u]),se=f.useCallback(F=>{if(!F)return"";const z=p.find(me=>String(me.id)===String(F));return z?`${z.first_name} ${z.last_name}`.trim():""},[p]),Ee=f.useCallback(F=>{if(!F)return"--";const z=c.find(me=>String(me.id)===String(F));return z?.deal_name||z?.name||`Deal #${X7(F)}`},[c]),Ie=f.useCallback(F=>{const z=c.find(Re=>String(Re.id)===String(F)),me=yFe(z);let Le=bFe(z);if(!Le&&me){const Re=p.filter(Qe=>String(Qe.account_id||"")===String(me));if(Re.length>0){const Qe=[...Re].sort((Ke,At)=>{const Ct=`${Ke.first_name||""} ${Ke.last_name||""}`.trim().toLowerCase(),Xt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Xt)});Le=String(Qe[0].id)}}if(me&&Le){const Re=p.find(Qe=>String(Qe.id)===String(Le));Re?.account_id&&String(Re.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),pe=f.useCallback(F=>{if(!F)return"--";if(F.deal?.deal_name)return F.deal.deal_name;if(F.deal?.name)return F.deal.name;const z=F.deal_id||F.deal?.id;return z?Ee(z):"--"},[Ee]),Be=f.useCallback(F=>{if(!F)return"--";if(F.account?.name)return F.account.name;let z=F.account_id||F.account?.id;if(!z){const me=F.deal_id||F.deal?.id;me&&(z=Ie(me).accountId)}return z?ne(z)||`Account #${z}`:"--"},[Ie,ne]),$e=f.useCallback(F=>{if(!F)return"--";if(F.contact?.first_name||F.contact?.last_name)return`${F.contact?.first_name||""} ${F.contact?.last_name||""}`.trim()||"--";let z=F.contact_id||F.contact?.id;if(!z){const Le=F.deal_id||F.deal?.id;Le&&(z=Ie(Le).contactId)}return(z?se(z):"")||(z?`Contact #${z}`:"--")},[Ie,se]),Ve=f.useCallback(async(F=null)=>{l(!0);try{const z=await te.get("/quotes/admin/fetch-all"),Le=[...Array.isArray(z.data)?z.data:[]].sort((Re,Qe)=>{const Ke=Re?.created_at||Re?.updated_at||0,At=Qe?.created_at||Qe?.updated_at||0;return new Date(At)-new Date(Ke)});if(i(Le),F){const Re=Le.find(Qe=>Qe.id===F);S(Re||null)}}catch(z){console.error(z),i([]),z.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ut=f.useCallback(async()=>{try{const F=await te.get("/deals/admin/fetch-all");d(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),ve=f.useCallback(async()=>{try{const F=await te.get("/accounts/admin/fetch-all");h(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),ae=f.useCallback(async()=>{try{const F=await te.get("/contacts/admin/fetch-all");x(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Fe=f.useCallback(async()=>{try{const F=await te.get("/users/all");N(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);f.useEffect(()=>{Ve(),ut(),ve(),ae(),Fe()},[Ve,ut,ve,ae,Fe]);const ye=f.useMemo(()=>{const F=Te.trim().toLowerCase(),z=U.trim();return r.filter(me=>{const Le=pe(me),Re=Be(me),Qe=$e(me),Ke=yA(me.presented_date,me.validity_days),At=[me.quote_id,Le,Re,Qe,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?wg(me.presented_date):"",Ke?wg(Ke):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,ub(me.created_at),ub(me.updated_at)],Ct=F===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(F)),Xt=z==="Filter by Status"||Mi(me.status)===z;return Ct&&Xt})},[r,Te,U,pe,Be,$e]),We=Math.max(1,Math.ceil(ye.length/ge)||1);f.useEffect(()=>Oe(1),[Te,U]),f.useEffect(()=>{Oe(F=>{const z=Math.max(1,Math.ceil(ye.length/ge)||1);return F>z?z:F})},[ye.length,ge]);const it=f.useMemo(()=>{const F=(Se-1)*ge;return ye.slice(F,F+ge)},[ye,Se,ge]),ht=()=>Oe(F=>Math.max(F-1,1)),Ae=()=>Oe(F=>Math.min(F+1,We)),Je=F=>{S(F),he("Overview"),_e(Mi(F?.status)||"Draft")},ce=()=>{S(null),he("Overview")},X=F=>{F.target.id==="quoteModalBackdrop"&&!P&&ce()},de=f.useCallback(()=>{E(!1),k(!1),K(null),J(pA),O(!1)},[]),D=F=>{F.target.id==="modalBackdrop"&&!T&&!P&&de()},B=F=>{const{name:z,value:me}=F.target;if(z==="deal_id"){const{accountId:Le,contactId:Re}=Ie(me);J(Qe=>({...Qe,deal_id:me,account_id:Le,contact_id:Re}));return}J(Le=>({...Le,[z]:me}))},oe=()=>{const F={...pA};a?.role?.toUpperCase()==="SALES"&&v&&(F.assigned_to=String(v)),J(F),k(!1),K(null),E(!0)},ue=F=>{if(!F)return;S(null);const z=F.deal?.id?String(F.deal.id):F.deal_id?String(F.deal_id):"",me=z?Ie(z):{accountId:"",contactId:""},Le=F.account?.id?String(F.account.id):F.account_id?String(F.account_id):me.accountId,Re=F.contact?.id?String(F.contact.id):F.contact_id?String(F.contact_id):me.contactId,Qe=F.assigned_user?.id?String(F.assigned_user.id):F.assigned_to?String(F.assigned_to):"";J({deal_id:z,account_id:Le||"",contact_id:Re||"",total_amount:F.total_amount?.toString()||"",presented_date:pFe(F.presented_date),validity_days:F.validity_days!==null&&F.validity_days!==void 0?String(F.validity_days):"",status:Mi(F.status)||"Draft",assigned_to:Qe,notes:F.notes||"",subtotal:parseFloat(F.subtotal)||0,tax_rate:parseFloat(F.tax_rate)||0,tax_amount:parseFloat(F.tax_amount)||0,discount_type:F.discount_type||"",discount_value:parseFloat(F.discount_value)||0,discount_amount:parseFloat(F.discount_amount)||0,currency:F.currency||"PHP",items:Array.isArray(F.items)?F.items.map(Ke=>({id:Ke.id,item_type:Ke.item_type||"Product",name:Ke.name||"",description:Ke.description||"",sku:Ke.sku||"",variant:Ke.variant||"",unit:Ke.unit||"pcs",quantity:parseFloat(Ke.quantity)||1,unit_price:parseFloat(Ke.unit_price)||0,discount_percent:parseFloat(Ke.discount_percent)||0,discount_amount:parseFloat(Ke.discount_amount)||0,line_total:parseFloat(Ke.line_total)||0,sort_order:Ke.sort_order||0})):[]}),k(!0),K(F.id),E(!0)},ie=F=>{if(F.target.checked){const z=it.map(me=>me.id);ze(z)}else ze([])},Pe=F=>{ze(z=>z.includes(F)?z.filter(me=>me!==F):[...z,F])},xe=F=>{if(!F)return;const z=F.quote_id||"this quote";R({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:z}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:z}})},fe=async()=>{ke.length!==0&&R({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ke.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${ke.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:ke}})},[qe,Ze]=f.useState(!1),pt=F=>{if(F.preventDefault(),Ze(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){q.error("Deal is required.");return}if(!W.assigned_to&&a?.role?.toUpperCase()!=="SALES"){q.error("Assigned To is required.");return}const me=Ie(W.deal_id),Le=W.items.map((Ct,Xt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Xt})),Re={deal_id:Number(W.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:Le},Qe=_&&G?"update":"create",Ke=Ee(W.deal_id),At=Qe==="create"?{...Re,created_by_id:Number(v)}:Re;R({title:Qe==="create"?"Confirm New Quote":"Confirm Update",message:Qe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"?"]}),confirmLabel:Qe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:At,targetId:G||null,name:Ke}})},Nt=async()=>{if(!$?.action){R(null);return}const{action:F}=$,{type:z,payload:me,targetId:Le,name:Re}=F;I(!0);try{if(z==="create")O(!0),await te.post("/quotes/admin",me),q.success("Quote created successfully."),de(),await Ve();else if(z==="update"){if(!Le)throw new Error("Missing quote identifier for update.");O(!0),await te.put(`/quotes/admin/${Le}`,me),q.success("Quote updated successfully."),de(),await Ve(),w?.id===Le&&S(null)}else if(z==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Qe=w?.id;le(Le),await te.delete(`/quotes/admin/${Le}`),q.success(`Quote "${Re}" deleted successfully.`),await Ve(Qe&&Qe!==Le?Qe:null),Qe===Le&&S(null)}else z==="bulk-delete"&&(await te.post("/quotes/admin/bulk-delete",{quote_ids:ke}),q.success(`Successfully deleted ${ke.length} quotes`),ze([]),await Ve())}catch(Qe){console.error(Qe);const Ke=z==="create"?"Failed to create quote. Please review the details and try again.":z==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Ke),(z==="create"||z==="update")&&O(!1),z==="delete"&&le(null)}finally{(z==="create"||z==="update")&&O(!1),z==="delete"&&le(null),I(!1),R(null)}},St=()=>{P||R(null)},Ht=f.useCallback((F,z)=>{const me=F?.deal_id??F?.deal?.id??"",Le=me?Number(me):null,Re=Le?Ie(String(Le)):{accountId:"",contactId:""},Qe=F?.account_id??F?.account?.id??Re.accountId??null,Ke=F?.contact_id??F?.contact?.id??Re.contactId??null,At=F?.total_amount??0,Ct=F?.assigned_to??F?.assigned_user?.id??null;return{deal_id:Le,account_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,contact_id:Ke!=null&&String(Ke).trim()!==""?Number(Ke):null,total_amount:Number(At),presented_date:F?.presented_date||null,validity_days:F?.validity_days===""||F?.validity_days===void 0||F?.validity_days===null?null:Number(F.validity_days),status:z,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:F?.notes?.trim()||null}},[Ie]),on=f.useCallback(async()=>{if(!w?.id)return;const F=Mi(Z),z=[F,F.toLowerCase()],me=async Le=>te.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const Re of z)try{await me(Re),Le=!0;break}catch(Qe){if(Qe?.response?.status===422)continue;throw Qe}if(!Le){const Re=Ht(w,F);if(!Re.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Re.total_amount||Re.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await te.put(`/quotes/admin/${w.id}`,Re)}q.success(`Quote status updated to ${F}`),S(null),he("Overview"),await Ve()}catch(Le){console.error(Le);const Re=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(Re)}},[w,Z,Ve,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...gA.map(F=>({label:F.label,value:F.value}))],re=$?.action?.type==="delete"?$.action.targetId:null,lt=w&&(be===w.id||re===w.id),zt=w&&be===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:X,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:F=>F.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:pe(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${gFe(w.status)}`,children:xA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Ce,disabled:H||T||P,children:[n.jsx(hn,{className:"mr-2"}),H?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||$?.action?.type==="update"&&$.action.targetId===w.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>xe(w),disabled:!!lt,children:zt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(F=>n.jsx("button",{onClick:()=>he(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ne===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:bA(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:pe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Be(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:$e(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:wg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:wg(yA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:xA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ub(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ub(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(gd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ne==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Aa,{comments:at,onAddComment:et})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${bA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Z||Mi(w.status)||"Draft",onChange:F=>_e(F.target.value),children:gA.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))}),n.jsx("button",{onClick:on,disabled:Mi(Z)===Mi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Mi(Z)===Mi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Kt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{oe(),Ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Te,onChange:F=>ee(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:F=>je(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:it.length>0&&ke.length===it.length,onChange:ie,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ke.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ke.length} selected items`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):ye.length>0?it.map(F=>{const z=yA(F.presented_date,F.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Je(F),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:ke.includes(F.id),onChange:()=>Pe(F.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:bA(F.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:pe(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Be(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:$e(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:F.total_amount?`${s}${Number(F.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${hFe(F.status)}`,children:xA(F.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:F.assigned_user?`${F.assigned_user.first_name} ${F.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:wg(z)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},F.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ye.length,pageSize:ge,currentPage:Se,onPrev:ht,onNext:Ae,onPageSizeChange:F=>{He(F),Oe(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=A?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(e8,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:F=>{const{accountId:z,contactId:me}=Ie(F);J(Le=>({...Le,deal_id:F,account_id:z,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:F=>`${X7(F?.deal_id??"")} ${F?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:qe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(J7,{label:"Account",value:ne(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(J7,{label:"Contact",value:se(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(gd,{items:W.items,onChange:F=>J(z=>({...z,items:F})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:F=>{J(z=>({...z,subtotal:F.subtotal,discount_amount:F.discount_amount,tax_amount:F.tax_amount,total_amount:F.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:F=>J(z=>({...z,discount_type:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:F=>J(z=>({...z,discount_value:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:F=>J(z=>({...z,tax_rate:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(Z7,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:B,disabled:T}),n.jsx(Z7,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:B,placeholder:"30",disabled:T}),a?.role?.toUpperCase()==="SALES"?n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assigned To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white text-black font-medium",children:(()=>{const F=b.find(z=>String(z.id)===W.assigned_to);return F?`${F.first_name} ${F.last_name}`:"Assigning..."})()})]}):n.jsx(e8,{label:"Assigned To",value:W.assigned_to||"",onChange:F=>J(z=>({...z,assigned_to:F})),items:Array.isArray(b)?b:[],getLabel:F=>{const z=`${F?.first_name??""} ${F?.last_name??""}`.trim();return z?F?.role?`${z} (${F.role})`:z:F?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:qe,disabled:T}),n.jsx(wFe,{label:"Status",name:"status",value:W.status,onChange:B,options:gA,required:!0,disabled:T}),n.jsx(jFe,{label:"Notes",name:"notes",value:W.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=$?n.jsx(CFe,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Kt,Me,vt]})}function Z7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function J7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function wFe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(h=>String(h.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>n.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function e8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(NFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function NFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function jFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function CFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function SFe(){const{userRole:e}=Qs();return n.jsx(Wj,{currentUserRole:e,currentUserId:null})}function _Fe(){f.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[a,s]=f.useState(""),[r,i]=f.useState("Filter by Actions"),[o,l]=f.useState(1),[c,d]=f.useState(10),u=async()=>{try{const w=await te.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};f.useEffect(()=>{u()},[]);const h=f.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(E=>{const _=E.timestamp?new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",k=`${E.entity_type||""} ${E.entity_name||E.entity_details?.name||E.entity_details?.title||E.entity_id||""}`,T=`${E.logger?.first_name||""} ${E.logger?.last_name||""}`,O=[_,T,E.action,E.entity_type,k,E.description],$=w===""||O.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),R=S==="FILTER BY ACTIONS"||(E.action||"").toUpperCase()===S;return $&&R}).sort((E,_)=>{const k=E.timestamp?new Date(E.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-k})},[e,a,r]),p=Math.max(1,Math.ceil(h.length/c)||1);f.useEffect(()=>{l(1)},[a,r]),f.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(h.length/c)||1);return w>S?S:w})},[h.length,c]);const x=f.useMemo(()=>{const w=(o-1)*c;return h.slice(w,w+c)},[h,o,c]);h.length===0||(o-1)*c+1,Math.min(o*c,h.length);const b=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!h.length){zx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=h.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(O=>`"${String(O).replace(/"/g,'""')}"`).join(","))].join(`
`),E=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(E),k=document.createElement("a");k.href=_,k.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(_)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Rx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(Ql,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(h)&&h.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:h.length,pageSize:c,currentPage:o,onPrev:b,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const t8=["Not started","In progress","Deferred","Completed"],n8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},VZ=e=>e&&(n8[e]||n8[String(e).toUpperCase()])||"Not started",AFe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},a8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},TFe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),VZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,h=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:h}},EFe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=H=>{if(!H)return"";const Q=String(H).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(H)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,h=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,b=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",E="",_="Lead",k="",T="",O="";const $=c(),R=b(),P=l(),I=x();if($){w="Account",_="Account",k=R,S=String($);const H=d(),Q=u(),G=N(),K=v(),W=h(),J=j();H?(A="Contact",T="Contact",O=G,E=String(H)):Q?(T="Deal",A="Deal",O=K,E=String(Q)):W&&(T="Quote",A="Quote",O=J,E=String(W))}else P?(_="Lead",k=I,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:VZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.task_creator?.id??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:k,relatedType2Text:T,relatedTo2Text:O,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:E}};function kFe(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,h]=f.useState([]),[p,x]=f.useState(!0),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[A,E]=f.useState([]),[_,k]=f.useState(1),[T,O]=f.useState(10),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState([]),G=wt(),K=Zt(),[W,J]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",createdById:null,relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[Te,ee]=f.useState(null);f.useEffect(()=>{const ne=K.state?.openTaskModal,se=K.state?.initialTaskData,Ee=K.state?.taskID;ne?(i(!0),se&&J(Ie=>({...Ie,...se})),G(K.pathname,{replace:!0,state:{}})):Ee&&(ee(Ee),G(K.pathname,{replace:!0,state:{}}))},[K,G]),f.useEffect(()=>{if(Te&&u.length>0&&!p){const ne=u.find(se=>se.id===Te);ne?le(ne,!0):q.error("Task not found."),ee(null)}},[Te,u,p]);const U=async()=>{try{const ne=await te.get("/users/all");E(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error("Failed to fetch users:",ne),q.error("Failed to fetch users.")}},je=async()=>{try{x(!0);const ne=await te.get("/tasks/all"),Ee=(Array.isArray(ne.data)?ne.data:[]).map(EFe);Ee.sort((Ie,pe)=>{const Be=Ie.createdAt?new Date(Ie.createdAt):0;return(pe.createdAt?new Date(pe.createdAt):0)-Be}),h(Ee),a==="list"&&k(1)}catch(ne){console.error("Failed to load tasks:",ne),q.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{if(!t&&e){U(),je();const ne=cN(e.id),se=new WebSocket(ne);return se.onopen=()=>{console.log(" Connected to task notifications")},se.onmessage=Ee=>{try{const Ie=JSON.parse(Ee.data);Ie.type==="task_status_updated"&&(q.info(` ${Ie.message}`,{position:"top-right",autoClose:4e3}),je())}catch(Ie){console.error("Error parsing notification:",Ie)}},se.onerror=Ee=>{console.error(" WebSocket error:",Ee)},se.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{se.readyState===WebSocket.OPEN&&se.close()}}},[t,e]);const be=()=>{l(null),J({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:e?.role==="Sales"?String(e.id):"",notes:"",createdById:null,relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(ne=null,se=!1)=>{l(ne),d(se),ne?J({id:ne.id,subject:ne.title||"",description:ne.description||"",priority:ne.priority||"Normal",status:ne.status||"Not started",dueDate:AFe(ne.dueDate),assignedTo:ne.assignedToId?String(ne.assignedToId):"",assignedToName:ne.assignedToName||"",createdBy:ne.createdBy||"",notes:ne.notes||"",createdById:ne.createdById||null,relatedType1Text:ne.relatedType1Text||"",relatedTo1Text:ne.relatedTo1Text||"",relatedType2Text:ne.relatedType2Text||"",relatedTo2Text:ne.relatedTo2Text||"",relatedType1:ne.relatedType1||"",relatedTo1:ne.relatedTo1||"",relatedType2:ne.relatedType2||"",relatedTo2:ne.relatedTo2||""}):be(),i(!0)},Ce=()=>{i(!1),l(null),d(!1),be()},Se=async ne=>{const se=TFe(ne);try{o&&!c?(await te.put(`/tasks/${o.id}`,se),q.success("Task updated successfully.")):(await te.post("/tasks/create",se),q.success("Task created successfully.")),i(!1),await je()}catch(Ee){console.error("Failed to save task:",Ee);const Ie=Ee.response?.data?.detail||"Failed to save task.";q.error(Ie)}},Oe=ne=>{ne&&R({title:"Archive Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to archive ",n.jsx("span",{className:"font-semibold",children:ne.title}),"?"]}),confirmLabel:"Archive Task",cancelLabel:"Cancel",variant:"warning",action:{type:"archive",targetId:ne.id}})},ge=()=>ze.filter(ne=>String(ne.createdById)===String(e?.id)),He=()=>{const ne=ge();if(ne.length!==0)if(ne.every(se=>H.includes(se.id)))Q(H.filter(se=>!ne.map(Ee=>Ee.id).includes(se)));else{const se=ne.map(Ee=>Ee.id);Q([...new Set([...H,...se])])}},Ne=ne=>{const se=ze.find(Ee=>Ee.id===ne);String(se?.createdById)===String(e?.id)&&Q(Ee=>Ee.includes(ne)?Ee.filter(Ie=>Ie!==ne):[...Ee,ne])},he=async()=>{H.length!==0&&R({title:"Archive Tasks",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:H.length})," selected tasks?"]}),confirmLabel:`Archive ${H.length} Task(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-archive",task_ids:H}})},Z=async()=>{if(!$?.action){R(null);return}const{action:ne}=$;I(!0);try{ne.type==="archive"?(await te.delete(`/tasks/${ne.targetId}`),q.success("Task archived successfully."),await je()):ne.type==="bulk-archive"&&(await te.post("/tasks/bulk-archive",{task_ids:ne.task_ids}),q.success(`Successfully archived ${ne.task_ids.length} tasks`),Q([]),await je())}catch(se){console.error("Task action failed:",se);const Ee=se.response?.data?.detail||"Failed to archive task.";q.error(Ee)}finally{I(!1),R(null)}},_e=()=>{P||R(null)},ke=f.useMemo(()=>{const ne=b.trim().toLowerCase();return[...u].sort((Ee,Ie)=>{const pe=Ee.createdAt?new Date(Ee.createdAt):0;return(Ie.createdAt?new Date(Ie.createdAt):0)-pe}).filter(Ee=>{const Ie=ne===""||Ee.title?.toLowerCase().includes(ne)||Ee.description?.toLowerCase().includes(ne)||Ee.assignedToName?.toLowerCase().includes(ne)||Ee.createdBy?.toLowerCase().includes(ne),pe=v==="Filter by Status"||Ee.status===v,Be=w==="Filter by Priority"||Ee.priority===w;return Ie&&pe&&Be})},[u,b,v,w]);f.useEffect(()=>{k(1)},[b,v,w,a,T]),f.useEffect(()=>{if(a==="list"){const ne=ke.length===0?1:Math.ceil(ke.length/T);_>ne&&k(ne)}},[ke.length,_,a,T]);const ze=f.useMemo(()=>{if(a==="board")return ke;const ne=(_-1)*T;return ke.slice(ne,ne+T)},[ke,_,a,T]),tt=f.useMemo(()=>{const ne=new Date;return[{title:"To Do",value:u.filter(se=>se.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(se=>se.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(se=>se.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(se=>se.dueDate&&new Date(se.dueDate)<ne&&se.status!=="Completed").length,icon:Wu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(se=>se.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),De=ne=>ne.dueDate&&new Date(ne.dueDate)<new Date&&ne.status!=="Completed",at=ne=>{switch(ne.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},et=ne=>{switch(ne){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},V=ne=>{switch(ne){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:tt.map(ne=>n.jsx(LFe,{...ne},ne.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:b,onChange:ne=>N(ne.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:ne=>j(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),t8.map(ne=>n.jsx("option",{children:ne},ne))]}),n.jsxs("select",{value:w,onChange:ne=>S(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(ke.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:t8.map(ne=>{const se=ze.filter(Ee=>Ee.status===ne);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:ne}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:se.length})]}),n.jsx("div",{className:`space-y-3 ${se.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:se.length>0?se.map(Ee=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${at(Ee)}`,onClick:()=>le(Ee,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Ee.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Ee.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Ee.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:De(Ee)?"text-red-600":"text-gray-600",children:Ee.dateAssigned?a8(Ee.dateAssigned):""})]})]}),n.jsx("div",{className:"flex items-center gap-2 ml-3",children:(String(Ee.createdById)===String(e?.id)||e?.role!=="Sales")&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:Ie=>{Ie.stopPropagation(),le(Ee)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})}),n.jsx("button",{type:"button",onClick:Ie=>{Ie.stopPropagation(),Oe(Ee)},className:"text-orange-500 hover:text-orange-700",children:n.jsx(qs,{})})]})})]},Ee.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},ne)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ge().length>0&&ge().every(ne=>H.includes(ne.id)),onChange:He})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:H.length>0?n.jsx("button",{onClick:he,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${H.length} selected tasks`,children:n.jsx(qs,{size:18})}):""})]})}),n.jsx("tbody",{children:ze.length>0?ze.map(ne=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:se=>se.stopPropagation(),children:String(ne.createdById)===String(e?.id)?n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:H.includes(ne.id),onChange:()=>Ne(ne.id)}):null}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>le(ne,!0),children:ne.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>le(ne,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${et(ne.status||"Not started")}`,children:ne.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>le(ne,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${V(ne.priority||"Low")}`,children:ne.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>le(ne,!0),children:ne.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${De(ne)?"text-red-600 font-medium":""}`,onClick:()=>le(ne,!0),children:ne.dateAssigned?a8(ne.dateAssigned):""}),n.jsx("td",{})]},ne.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:ke.length,pageSize:T,currentPage:ke.length===0?0:_,onPrev:()=>k(ne=>Math.max(ne-1,1)),onNext:()=>k(ne=>Math.min(ne+1,Math.max(1,Math.ceil(ke.length/T)||1))),onPageSizeChange:ne=>{O(ne),k(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Ce,onSave:Se,onEdit:()=>d(!1),setFormData:J,formData:W,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Oe}),$&&n.jsx(PFe,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:Z,onCancel:_e,loading:P})]})}function LFe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function PFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const YZ=e=>e?e.toUpperCase():"",mb=e=>{const t=YZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},DFe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},OFe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},MFe=e=>{const t=YZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},vA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},IFe=()=>{const e=wt(),t=Zt(),{user:a}=en(),s=a?.role==="Sales",[r]=zs(),i=r.get("id"),o=t.pathname==="/admin/meetings/info";f.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[l,c]=f.useState([]),[d,u]=f.useState(!1),[h,p]=f.useState([]),[x,b]=f.useState(""),[N,v]=f.useState("Filter by Status"),[j,w]=f.useState(!1),[S,A]=f.useState(null),[E,_]=f.useState(1),[k,T]=f.useState(10),[O,$]=f.useState(vA),[R,P]=f.useState(!1),[I,H]=f.useState(null),[Q,G]=f.useState(!1),[K,W]=f.useState(null),[J,Te]=f.useState(!1),[ee,U]=f.useState(null),[je,be]=f.useState([]),[le,Ce]=f.useState(null);f.useEffect(()=>{j&&!R&&s&&a&&!O.assignedTo&&$(se=>({...se,assignedTo:a.id}))},[j,R,a,s]),f.useEffect(()=>{const se=t.state?.openMeetingModal,Ee=t.state?.initialMeetingData?.relatedTo||r.get("id"),Ie=t.state?.meetingID;se||Ee?(w(!0),t.state?.initialMeetingData&&$(pe=>({...pe,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ie&&(U(Ie),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),f.useEffect(()=>{if(ee&&l.length>0&&!d){const se=l.find(Ee=>Ee.id===ee);se?A(se):q.error("Meeting not found."),U(null)}},[ee,l,d]);const Se=async()=>{if(i&&o){const se=sessionStorage.getItem("meetingDetailData");if(se)try{const Ee=JSON.parse(se);if(Ee.id===parseInt(i)){A(Ee),sessionStorage.removeItem("meetingDetailData");return}}catch(Ee){console.error(Ee)}}u(!0);try{const se=await te.get("/meetings/admin/fetch-all"),Ie=[...Array.isArray(se.data)?se.data:[]].sort((pe,Be)=>{const $e=pe?.created_at?new Date(pe.created_at).getTime():0;return(Be?.created_at?new Date(Be.created_at).getTime():0)-$e});if(c(Ie),i&&!S){const pe=Ie.find(Be=>Be.id===parseInt(i));pe&&A(pe)}}catch{q.error("Failed to load meetings.")}finally{u(!1)}},Oe=async()=>{try{const se=await te.get("/users/all");p(Array.isArray(se.data)?se.data:[])}catch(se){console.error(se)}};f.useEffect(()=>{async function se(){try{const Ee=await te.get("/auth/me");Ce(Ee.data)}catch(Ee){console.error("Failed to fetch current user",Ee)}}se()},[]),f.useEffect(()=>{Se(),Oe()},[]);const ge=se=>b(se.target.value),He=f.useMemo(()=>{const se=x.trim().toLowerCase(),Ee=N.trim().toUpperCase();return l.filter(Ie=>{const pe=[Ie?.activity,Ie?.description,Ie?.relatedTo,Ie?.assignedTo],Be=se===""||pe.some(Ve=>Ve&&Ve.toString().toLowerCase().includes(se)),$e=Ee==="FILTER BY STATUS"||mb(Ie.status||"PENDING")===Ee;return Be&&$e})},[l,x,N]),Ne=f.useMemo(()=>{const se=(E-1)*k;return He.slice(se,se+k)},[He,E,k]),he=()=>{w(!1),$(vA),P(!1),H(null),G(!1)},Z=()=>{$(vA),P(!1),H(null),w(!0)},_e=se=>{let Ee="";if(se.meet_assign_to?.id)Ee=String(se.meet_assign_to.id);else if(se.assignedTo){const Fe=h.find(ye=>`${ye.first_name} ${ye.last_name}`===se.assignedTo);Ee=Fe?String(Fe.id):""}const Ie=Fe=>{if(!Fe)return"";try{const ye=new Date(Fe),We=ye.getTimezoneOffset()*6e4;return new Date(ye.getTime()-We).toISOString().slice(0,16)}catch{return""}};let pe="Lead",Be="",$e="Contact",Ve="";if(se.lead)pe="Lead",Be=String(se.lead.id);else if(se.account)pe="Account",Be=String(se.account.id),se.contact?($e="Contact",Ve=String(se.contact.id)):se.deal?($e="Deal",Ve=String(se.deal.id)):se.quote&&($e="Quote",Ve=String(se.quote.id));else if(se.relatedType||se.related_type){const Fe=se.relatedType||se.related_type,ye=se.related_to||se.relatedToId;Fe==="Lead"?(pe="Lead",Be=String(ye)):(pe="Account",Be=se.account_id?String(se.account_id):"")}const ut={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},ve=mb(se.status),ae=ut[ve]||"Planned";$({subject:se.subject||se.activity||"",location:se.location||"",startTime:Ie(se.start_time||se.startTime),endTime:Ie(se.end_time||se.endTime),status:ae,notes:se.description||se.notes||"",assignedTo:Ee,relatedType1:pe,relatedTo1:Be,relatedType2:$e,relatedTo2:Ve}),P(!0),H(se.id),A(null),w(!0)},ke=se=>{if(!se.subject?.trim())return q.error("Subject is required.");if(!se.startTime)return q.error("Start time is required.");if(se.endTime&&!(new Date(se.endTime)-new Date(se.startTime)>0))return q.error("End time must be after start time.");se.relatedType1,se.relatedTo1,se.relatedType1==="Account"&&se.relatedType2&&se.relatedTo2&&(se.relatedType2,se.relatedTo2);const Ee={...se,assignedTo:parseInt(se.assignedTo),relatedTo1:parseInt(se.relatedTo1),relatedTo2:parseInt(se.relatedTo2)},Ie=R&&I?"update":"create";W({title:Ie==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ie} "${Ee.subject}"?`,confirmLabel:Ie==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ie,payload:Ee,targetId:I,name:Ee.subject}})},ze=async()=>{if(!K?.action)return;const{type:se,payload:Ee,targetId:Ie,name:pe}=K.action;Te(!0);try{se==="create"?(G(!0),await te.post("/meetings/create",Ee),q.success(`Meeting "${pe}" created.`),he(),await Se()):se==="update"?(G(!0),await te.put(`/meetings/${Ie}`,Ee),q.success(`Meeting "${pe}" updated.`),he(),await Se()):se==="delete"?(await te.delete(`/meetings/${Ie}`),q.success(`Meeting "${pe}" archived.`),S?.id===Ie&&A(null),await Se()):se==="bulk-delete"&&(await te.post("/meetings/sales/bulk-delete",{meeting_ids:K.action.meetingIds}),q.success(`Successfully archived ${K.action.meetingIds.length} meeting(s)`),be([]),await Se())}catch(Be){const $e=Be.response?.data?.detail||"Action failed.";q.error(typeof $e=="string"?$e:JSON.stringify($e)),console.error($e)}finally{G(!1),Te(!1),W(null)}},tt=se=>{et("single")},De=()=>{const se=Ne.filter(Ee=>Ee.created_by===le?.id);je.length===se.length&&se.length>0?be([]):be(se.map(Ee=>Ee.id))},at=se=>{be(Ee=>Ee.includes(se)?Ee.filter(Ie=>Ie!==se):[...Ee,se])},et=se=>{if(se==="single"){const Ee=S.subject||"this meeting";W({title:"Archive Meeting",message:`Are you sure you want to archive "${Ee}"?`,confirmLabel:"Archive Meeting",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:S.id,name:Ee}})}else if(se==="bulk"){if(je.length===0)return;W({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:je.length})," selected meetings?"]}),confirmLabel:`Archive ${je.length} meeting(s)`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",meetingIds:je}})}},V=()=>{et("bulk")},ne=async(se,Ee)=>{try{await te.put(`/meetings/${se}`,{status:Ee}),q.success("Status updated"),Se(),A(null)}catch{q.error("Failed to update status")}};return o&&i?S?n.jsx(pd,{meeting:S,onClose:()=>{A(null),e("/admin/dashboard")},onEdit:_e,onDelete:tt,onStatusUpdate:ne,currentUser:le,isSalesView:!0}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[d&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Z,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Wt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:ge,className:"w-full outline-none"})]}),n.jsxs("select",{value:N,onChange:se=>v(se.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Ne.length>0&&Ne.filter(se=>se.created_by===le?.id).every(se=>je.includes(se.id))&&Ne.some(se=>se.created_by===le?.id),onChange:De,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:je.length>0?n.jsx("button",{onClick:V,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${je.length} selected meetings`,children:n.jsx(qs,{size:18})}):""})]})}),n.jsx("tbody",{children:Ne.length>0?Ne.map(se=>n.jsxs("tr",{onClick:()=>A(se),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-center",onClick:Ee=>Ee.stopPropagation(),children:le&&se.created_by===le.id?n.jsx("input",{type:"checkbox",checked:je.includes(se.id),onChange:()=>at(se.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Ee=>Ee.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:se.subject}),n.jsxs("td",{className:"py-3 px-4",children:[se.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:se.lead.title}),se.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:se.account.name}),se.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[se.contact.first_name," ",se.contact.last_name]}),se.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:se.deal.name}),se.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:DFe(se.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:OFe(se.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[se.meet_assign_to.first_name," ",se.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${MFe(mb(se.status))}`,children:mb(se.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4"})]},se.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:He.length,pageSize:k,currentPage:E,onPrev:()=>_(se=>Math.max(1,se-1)),onNext:()=>_(se=>se+1),onPageSizeChange:se=>{T(se),_(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),j&&n.jsx(n1,{onClose:he,formData:O,setFormData:$,isEditing:R,onSubmit:ke,isSubmitting:Q||J,users:h,currentUser:a}),S&&n.jsx(pd,{meeting:S,onClose:()=>A(null),onEdit:_e,onDelete:tt,onStatusUpdate:ne,currentUser:le,isSalesView:!0}),K&&n.jsx($Fe,{open:!0,title:K.title,message:K.message,confirmLabel:K.confirmLabel,variant:K.variant,onConfirm:ze,onCancel:()=>W(null),loading:J})]})};function $Fe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const RFe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],zFe=e=>e?String(e).toUpperCase():"",cf=e=>{const t=zFe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},wA=e=>{const t=cf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},s8=e=>{switch(cf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},NA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},r8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function FFe(){const[e,t]=f.useState(!1),[a,s]=f.useState(null),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]),[p,x]=f.useState(null),[b,N]=f.useState(!1),[v,j]=f.useState(null),[w,S]=f.useState(!1),[A,E]=f.useState(!1),[_,k]=f.useState("PLANNED"),[T,O]=f.useState(!1),[$,R]=f.useState(!1),[P,I]=f.useState(1),[H,Q]=f.useState(10),[G,K]=f.useState(null),[W,J]=f.useState([]),[Te,ee]=f.useState(null),{comments:U,addComment:je,refresh:be}=Ta({relatedType:"call",relatedId:a?.id});f.useEffect(()=>{a?.id&&be()},[a?.id,be]),zs();const le=wt(),Ce=Zt(),{user:Se}=en(),Oe=Se?.role==="Sales",He={subject:"",call_time:(()=>{const D=new Date,B=D.getFullYear(),oe=String(D.getMonth()+1).padStart(2,"0"),ue=String(D.getDate()).padStart(2,"0");return`${B}-${oe}-${ue}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Ne,he]=f.useState(He);f.useEffect(()=>{e&&!b&&Oe&&Se&&!Ne.assigned_to&&he(D=>({...D,assigned_to:Se.id}))},[e,b,Se,Oe]),f.useEffect(()=>{const D=Ce.state,B=D?.callID;if(B&&!D?.openCallModal){K(B),le(Ce.pathname,{replace:!0,state:{}});return}!D?.openCallModal||!D?.initialCallData||D.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||D.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),he(oe=>({...oe,...D.initialCallData,relatedTo1:D.initialCallData.relatedTo1?String(D.initialCallData.relatedTo1):"",relatedTo2:D.initialCallData.relatedTo2?String(D.initialCallData.relatedTo2):""})),le(Ce.pathname,{replace:!0,state:{}}))},[Ce.state,o]),f.useEffect(()=>{if(G&&u.length>0&&!$){const D=u.find(B=>B.id===G);D?s(D):q.error("Call not found."),K(null)}},[G,u,$]);const Z=async()=>{try{R(!0);const D=await te.get("/calls/admin/fetch-all"),oe=[...Array.isArray(D.data)?D.data:[]].sort((ue,ie)=>{const Pe=ue?.created_at?new Date(ue.created_at):0;return(ie?.created_at?new Date(ie.created_at):0)-Pe});h(oe)}catch(D){console.error("Error fetching calls:",D),q.error("Failed to load calls")}finally{R(!1)}},_e=async()=>{try{const D=await te.get("/users/all");x(D.data)}catch(D){console.error("Error fetching users: ",D)}};f.useEffect(()=>{async function D(){try{const B=await te.get("/auth/me");ee(B.data)}catch(B){console.error("Failed to fetch current user",B)}}D()},[]),f.useEffect(()=>{_e(),Z()},[]);const ke=[],ze="",tt="Filter by Status",De="Filter by Users",at=u,et=f.useMemo(()=>{const D=(P-1)*H;return at.slice(D,D+H)},[at,P,H]),V=u.length,ne=u.filter(D=>cf(D.status)==="PLANNED").length,se=u.filter(D=>cf(D.status)==="HELD").length,Ee=u.filter(D=>cf(D.status)==="NOT_HELD").length,Ie=[{title:"Total",value:V,icon:$s,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ne,icon:Gs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:se,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ee,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}],[pe,Be]=f.useState("Overview"),$e=D=>{const{name:B,value:oe}=D.target;he(ue=>{const ie={...ue,[B]:oe};return B==="relatedType1"&&(ie.relatedTo1="",oe==="Lead"?(ie.relatedType2=null,ie.relatedTo2=null,d([])):oe==="Account"&&(ie.relatedType2="Contact")),B==="relatedType2"&&(ie.relatedTo2=""),ie})};f.useEffect(()=>{const D=async()=>{try{l([]);let B;Ne.relatedType1==="Lead"?B=await te.get("/leads/admin/getLeads"):Ne.relatedType1==="Account"&&(B=await te.get("/accounts/admin/fetch-all"));let oe=[];if(B&&Array.isArray(B.data)?oe=B.data:oe=[],b&&Ne.relatedTo1)try{let ue;Ne.relatedType1==="Lead"?ue=await te.get(`/leads/get/${Ne.relatedTo1}`):Ne.relatedType1==="Account"&&(ue=await te.get(`/accounts/get/${Ne.relatedTo1}`)),ue&&ue.data&&(oe.some(Pe=>String(Pe.id)===String(Ne.relatedTo1))||(oe=[ue.data,...oe]))}catch(ue){console.error("Error fetching specific related item:",ue)}l(oe)}catch(B){console.error("Error fetching data:",B),l([])}};Ne.relatedType1&&D()},[Ne.relatedType1,b,Ne.relatedTo1]),f.useEffect(()=>{const D=async()=>{try{d([]);let B;if(Ne.relatedType1==="Account"&&Ne.relatedTo1)Ne.relatedType2==="Contact"?B=await te.get(`/contacts/from-acc/${Ne.relatedTo1}`):Ne.relatedType2==="Deal"?B=await te.get(`/deals/from-acc/${Ne.relatedTo1}`):Ne.relatedType2==="Quote"&&(B=await te.get(`/quotes/from-acc/${Ne.relatedTo1}`));else{d([]);return}B&&Array.isArray(B.data)?d(B.data):d([])}catch(B){console.error("Error fetching data:",B),d([])}};Ne.relatedType2&&D()},[Ne.relatedType2,Ne.relatedTo1,Ne.relatedType1]);const[Ve,ut]=f.useState(!1),ve=D=>{D.preventDefault(),ut(!0);const B=Ne.subject;if(!B||B.trim()===""){q.error("Subject is required.");return}if(!Ne.relatedTo1){q.error(`Please select a ${Ne.relatedType1||"Lead/Account"}.`);return}if(!Ne.assigned_to){q.error("Subject is required.");return}const ue={...Ne,duration_minutes:Ne.duration_minutes?parseInt(Ne.duration_minutes,10):null,relatedTo1:Ne.relatedTo1?parseInt(Ne.relatedTo1,10):null,relatedTo2:Ne.relatedType1==="Lead"?null:Ne.relatedTo2?parseInt(Ne.relatedTo2,10):null,relatedType2:Ne.relatedType1==="Lead"?null:Ne.relatedType2,assigned_to:Ne.assigned_to?parseInt(Ne.assigned_to,10):null},ie=b&&v?"update":"create",Pe=(Ne.subject||"").trim()||"Untitled Call";i({title:ie==="create"?"Confirm New Call":"Confirm Update",message:ie==="create"?`Create "${Pe}"?`:`Save changes to "${Pe}"?`,confirmLabel:ie==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:ie,payload:ue,targetId:v||null,name:Pe}})},ae=D=>s(D),Fe=()=>{t(!1),N(!1),j(null)},ye=async()=>{if(!r?.action){i(null);return}const{action:D}=r,{type:B,payload:oe,targetId:ue,name:ie,callIds:Pe}=D;E(!0);try{if(B==="bulk-delete")await te.post("/calls/bulk-delete",{call_ids:Pe}),q.success(`Successfully archived ${Pe.length} call(s).`),J([]),await Z();else if(B==="create")S(!0),await te.post("/calls/create",oe),q.success(`Call "${ie}" created successfully.`),t(!1),he(He),N(!1),j(null),await Z();else if(B==="update"){if(!ue)throw new Error("Missing call identifier for update.");S(!0),await te.put(`/calls/${ue}`,oe),q.success(`Call "${ie}" updated successfully.`),t(!1),he(He),N(!1),j(null),await Z()}else if(B==="delete"){if(!ue)throw new Error("Missing call identifier for archival.");await te.delete(`/calls/${ue}`),q.success(`Call "${ie}" archived successfully.`),a?.id===ue&&s(null),await Z()}}catch(xe){const fe=B==="create"?"Failed to create call. Please review the details and try again.":B==="update"?"Failed to update call. Please review the details and try again.":"Failed to archive call. Please try again.",qe=xe?.response?.data?.detail||fe;q.error(qe)}finally{(B==="create"||B==="update")&&S(!1),E(!1),i(null)}},We=()=>{A||i(null)},it=async()=>{if(a?.id)try{O(!0),await te.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${wA(_)}`),h(D=>Array.isArray(D)?D.map(B=>B.id===a.id?{...B,status:_}:B):D),s(null)}catch(D){const B=D.response?.data?.detail||"Failed to update status.";q.error(B)}finally{O(!1)}},ht=()=>{const D=et.filter(B=>B.call_creator?.id===Te?.id);W.length===D.length&&D.length>0?J([]):J(D.map(B=>B.id))},Ae=D=>{J(B=>B.includes(D)?B.filter(oe=>oe!==D):[...B,D])},Je=D=>{if(D==="single"){const B=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${B}"? This call will be hidden from your view but admins can still see it.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"warning",action:{type:"delete",targetId:a.id,name:B}})}else if(D==="bulk"){if(W.length===0)return;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected calls? These calls will be hidden from your view but admins can still see them."]}),confirmLabel:`Archive ${W.length} call(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-delete",callIds:W}})}},ce=()=>{Je("bulk")};f.useEffect(()=>{a&&k(cf(a.status))},[a]);const X=a?n.jsxs("div",{id:"callModalBackdrop",onClick:D=>D.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[$&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${s8(a.status)}`,children:wA(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a.call_creator?.id===Te?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const D=Pe=>{if(!Pe)return"";const xe=new Date(Pe),fe=xe.getFullYear(),qe=String(xe.getMonth()+1).padStart(2,"0"),Ze=String(xe.getDate()).padStart(2,"0"),pt=String(xe.getHours()).padStart(2,"0"),Nt=String(xe.getMinutes()).padStart(2,"0");return`${fe}-${qe}-${Ze}T${pt}:${Nt}`},B=a.lead?"Lead":a.account?"Account":"Lead",oe=a.lead?a.lead.id:a.account?a.account.id:null,ue=B==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",ie=B==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;he({subject:a.subject||"",call_time:D(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:B,relatedType2:ue,relatedTo1:oe?String(oe):"",relatedTo2:ie?String(ie):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Je("single"),children:[n.jsx(qs,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(D=>n.jsx("button",{onClick:()=>Be(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${pe===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[pe==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(lo,{label:"Call Time",value:r8(a.call_time)}),n.jsx(lo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(lo,{label:"Direction",value:a.direction||"--"}),n.jsx(lo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(lo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(lo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(lo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(lo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(lo,{label:"Quote",value:NA(a.quote.quote_id)}),n.jsx(lo,{label:"Created At",value:r8(a.created_at)})]})}),pe==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Aa,{comments:U,onAddComment:je})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:D=>k(D.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:it,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,de=e?n.jsx("div",{id:"modalBackdrop",onClick:D=>D.target.id==="modalBackdrop"&&Fe(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Fe(),ut(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ve,noValidate:!0,children:[n.jsx(BFe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Ne.subject,onChange:$e,isSubmitted:Ve,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:$e,value:Ne.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(jA,{items:Array.isArray(o)?o:[],value:Ne.relatedTo1??"",placeholder:`Search ${Ne.relatedType1||"here"}...`,getLabel:D=>Ne.relatedType1==="Lead"?D.title:D.name??"",onChange:D=>he(B=>({...B,relatedTo1:D})),required:!0,isSubmitted:Ve,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:$e,value:Ne.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Ne.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(jA,{disabled:Ne.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:Ne.relatedTo2??"",placeholder:Ne.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Ne.relatedType2||"Contact"}...`:`No ${Ne.relatedType2||""} data found`,getLabel:D=>Ne.relatedType2==="Contact"?`${D.first_name??""} ${D.last_name??""}`.trim():Ne.relatedType2==="Quote"?NA(D.quote_id)??"":D.name??"",onChange:D=>he(B=>({...B,relatedTo2:D}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Ne.call_time,onChange:$e,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Ne.duration_minutes,onChange:$e,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(jA,{items:Array.isArray(p)?p:[],value:Ne.assigned_to??"",placeholder:"Search an account...",getLabel:D=>`${D.first_name} ${D.last_name}`,onChange:D=>he(B=>({...B,assigned_to:D})),disabled:Oe,required:!0,isSubmitted:Ve})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:$e,value:Ne.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:$e,value:Ne.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(HFe,{className:"col-span-2",label:"Notes",value:Ne.notes,onChange:$e,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Fe(),ut(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":b?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx($s,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{he(He),N(!1),j(null),t(!0),ut(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(D=>n.jsx(UFe,{...D},D.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ze})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:tt,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),RFe.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value))]}),n.jsxs("select",{defaultValue:De,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),ke.map(D=>n.jsx("option",{value:D.name,children:D.name},D.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:et.length>0&&et.filter(D=>D.call_creator?.id===Te?.id).every(D=>W.includes(D.id))&&et.some(D=>D.call_creator?.id===Te?.id),onChange:ht,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:W.length>0?n.jsx("button",{onClick:ce,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${W.length} selected calls`,children:n.jsx(qs,{size:18})}):""})]})}),n.jsx("tbody",{children:$?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):et.length>0?et.map(D=>n.jsxs("tr",{onClick:()=>ae(D),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:B=>B.stopPropagation(),children:D.call_creator?.id===Te?.id?n.jsx("input",{type:"checkbox",checked:W.includes(D.id),onChange:()=>Ae(D.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:B=>B.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:D.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[D.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.lead.title}),D.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.account.name}),D.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[D.contact.first_name," ",D.contact.last_name]}),D.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.deal.name}),D.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:NA(D.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:D.call_time?new Date(D.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:D?.call_assign_to?`${D.call_assign_to.first_name} ${D.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s8(D.status)}`,children:wA(D.status)})}),n.jsx("td",{})]},D.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:at.length,pageSize:H,currentPage:P,onPrev:()=>I(D=>Math.max(D-1,1)),onNext:()=>I(D=>Math.min(D+1,Math.max(1,Math.ceil(at.length/H)||1))),onPageSizeChange:D=>{Q(D),I(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),X,de,r&&n.jsx(qFe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,variant:r.variant,onConfirm:ye,onCancel:We,loading:A})]})}function UFe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function BFe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function HFe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function lo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function qFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function jA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(w=>String(w.id)===String(t)),N=b?s(b):"",v=l&&c&&!t,j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function WFe({toggleSidebar:e}){const[t,a]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState(0),d=f.useRef(null),u=f.useRef(null),h=Zt(),p=wt(),{logout:x}=Qs(),{user:b,fetchUser:N}=en(),j={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[h.pathname]||"Manager Panel";return f.useEffect(()=>{N()},[]),f.useEffect(()=>{const w=()=>N();return window.addEventListener("userProfileUpdated",w),()=>window.removeEventListener("userProfileUpdated",w)},[N]),f.useEffect(()=>{if(!b?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",A=w?"localhost:8000":window.location.host,E=`${S}//${A}/ws/notifications?user_id=${b.id}`,_=new WebSocket(E);return _.onmessage=k=>{const T=JSON.parse(k.data);o(O=>[T,...O]),c(O=>O+1)},()=>_.close()},[b?.id]),f.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ox,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(rx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:b?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[b?.first_name," ",b?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:b?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[b?.first_name," ",b?.middle_name," ",b?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function GFe(){const[e,t]=f.useState(!0),[a,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),c=Zt(),{user:d}=en();f.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),f.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/manager/dashboard",className:({isActive:b})=>b?u:h,children:[n.jsx(ix,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/accounts",className:({isActive:b})=>b?u:h,children:[n.jsx(yd,{})," Accounts"]}),n.jsxs($t,{to:"/manager/contacts",className:({isActive:b})=>b?u:h,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/manager/leads",className:({isActive:b})=>b?u:h,children:[n.jsx(Qn,{})," Leads"]}),n.jsxs($t,{to:"/manager/deals",className:({isActive:b})=>b?u:h,children:[n.jsx(tn,{})," Deals"]}),n.jsxs($t,{to:"/manager/quotes",className:({isActive:b})=>b?u:h,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs($t,{to:"/manager/targets",className:({isActive:b})=>b?u:h,children:[n.jsx(lr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/tasks",className:({isActive:b})=>b?u:h,children:[n.jsx(Yt,{})," Tasks"]}),n.jsxs($t,{to:"/manager/meetings",className:({isActive:b})=>b?u:h,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs($t,{to:"/manager/calls",className:({isActive:b})=>b?u:h,children:[n.jsx($s,{})," Calls"]}),n.jsxs($t,{to:"/manager/audit",className:({isActive:b})=>b?u:h,children:[n.jsx(As,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/manager/territory",className:({isActive:b})=>b?u:h,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(sL,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/users",className:({isActive:b})=>b?u:h,children:[n.jsx(aa,{})," Users"]}),n.jsxs($t,{to:"/manager/manage-account",className:({isActive:b})=>b?u:h,children:[n.jsx(nn,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(WFe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}const VFe=e=>n.jsx(Wt,{...e}),YFe=e=>n.jsx(yd,{...e}),QZ=e=>n.jsx(Gs,{...e}),QFe=e=>n.jsx(sx,{...e}),KFe=e=>n.jsx(Bw,{...e}),XFe=e=>n.jsx(Et,{...e}),ZFe=e=>n.jsx(Lt,{...e}),JFe=e=>n.jsx(qw,{...e}),KZ=e=>n.jsx(Hw,{...e}),eUe=e=>n.jsx(aa,{...e}),XZ=e=>n.jsx(nn,{...e}),tUe=e=>n.jsx(Qn,{...e}),ZZ=e=>n.jsx(tn,{...e}),nUe=e=>n.jsx(hn,{...e}),JZ=e=>n.jsx(lr,{...e}),aUe=e=>n.jsx(pa,{...e}),sUe=e=>n.jsx(Et,{...e}),rUe=e=>n.jsx($s,{...e}),iUe=e=>n.jsx(Xl,{...e}),oUe=e=>n.jsx(As,{...e}),eJ=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},lUe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},cUe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},dUe=e=>{switch(e){case"call":return{Icon:ZFe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:JFe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:XFe,color:"text-blue-500",bgColor:"bg-blue-100"}}},uUe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},mUe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=f.useState(!1),l=f.useRef(null),c=[{icon:YFe,label:"Account"},{icon:XZ,label:"Contact"},{icon:tUe,label:"Leads"},{icon:ZZ,label:"Deals"},{icon:nUe,label:"Quotes"},{icon:JZ,label:"Target"},{icon:aUe,label:"Task"},{icon:sUe,label:"Meeting"},{icon:rUe,label:"Call"},{icon:oUe,label:"Audit"},{icon:iUe,label:"Territory"}];f.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{t(h.target.value),o(h.target.value.trim().length>0)},u=h=>{s&&s(h),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(VFe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((h,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(h),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,title:h.label,onClick:()=>{switch(h.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:n.jsx(h.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[h.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},fUe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const h=new Date(u),x=new Date-h,b=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return b<1?"Just now":b<60?`${b} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},hUe=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(KZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(fUe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},gUe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),pUe=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=f.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let A=0;A<=j;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",A=v.stage||"",E=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const k=_>0;if(E&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:k,willBeAdded:S&&k,allFields:Object.keys(v)})),S&&E&&k)try{let T=new Date(w);if(isNaN(T.getTime())){const O=String(w).split("T")[0];T=new Date(O+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const O=T.getFullYear(),$=T.getMonth()+1,R=`${O}-${String($).padStart(2,"0")}`;l[R]||(l[R]=0),l[R]+=_,c++,console.log(` Added deal ${v.id} to month ${R}: ${_}, total: ${l[R]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${R} (Year: ${O}, Month: ${$})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else E&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:k,closeDate:w,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(v=>parseInt(v.split("-")[0])),h=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],b=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;b.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(h.length>0){const v=Math.max(...h);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${j}`),b.push(A),A>0&&console.log(`Month ${s[w]} ${j} (${S}): ${A}`)}}const N=Math.max(...b,1);return console.log("Final chart data:",{labels:x,revenues:b,maxRevenue:N,hasData:b.some(v=>v>0)}),{labels:x,revenues:b,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(KZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(ZN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},CA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},xUe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=cUe(s||"Website"),d=x=>{if(!x)return"Unknown";const b=new Date(x),v=new Date-b,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",h=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:h})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},yUe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=wt(),u={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:h,bg:p}=lUe(u),x=parseFloat(t||0),b=o?x>=o?"up":"down":"up",N=b==="up"?QFe:KFe,v=b==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${h} ${p} px-2 py-0.5 rounded-full`,children:u})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:eJ(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},bUe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:b}=dUe(h),{text:N,bg:v}=uUe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const k=new Date(_),O=k-new Date,$=Math.floor(O/864e5);return $===0?`Today, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:$===1?`Tomorrow, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:$===-1?`Yesterday, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:k.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",E=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/manager/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/manager/meetings/info?id=${o}`)):d("/manager/tasks"):d(h==="call"?`/manager/calls/info?id=${o}`:h==="meeting"?`/manager/meetings/info?id=${o}`:"/manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[n.jsx("div",{className:`p-2 rounded-lg ${b} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(QZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(XZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},vUe=()=>{const e=wt(),{user:t}=en(),a=t?.company?.currency||"",[s,r]=f.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState([]),[h,p]=f.useState([]),[x,b]=f.useState([]),[N,v]=f.useState([]),[j,w]=f.useState(!0),[S,A]=f.useState(null),[E,_]=f.useState(""),[k,T]=f.useState([]),[O,$]=f.useState([]),[R,P]=f.useState([]),[I,H]=f.useState([]),[Q,G]=f.useState(0),[K,W]=f.useState(new Date),J=f.useRef(null),Te=f.useRef(null),ee=f.useMemo(()=>{try{if(!E.trim())return[];const le=E.toLowerCase().trim(),Ce=[];return Array.isArray(k)&&k.forEach(Se=>{const Oe=`${Se.first_name||""} ${Se.last_name||""}`.trim().toLowerCase(),ge=(Se.company_name||"").toLowerCase(),He=(Se.email||"").toLowerCase(),Ne=(Se.phone||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le)||Ne.includes(le))&&Ce.push({id:Se.id,name:`${Se.first_name||""} ${Se.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:Se.company_name||"No company",route:`/manager/leads/${Se.id}`})}),Array.isArray(O)&&O.forEach(Se=>{const Oe=(Se.name||"").toLowerCase(),ge=(Se.account?.name||"").toLowerCase(),He=(Se.description||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le))&&Ce.push({id:Se.id,name:Se.name||"Unnamed Deal",type:"Deal",details:Se.account?.name||"No account",route:`/manager/deals/info?id=${Se.id}`})}),Array.isArray(R)&&R.forEach(Se=>{const Oe=(Se.name||"").toLowerCase(),ge=(Se.email||"").toLowerCase(),He=(Se.phone||"").toLowerCase(),Ne=(Se.website||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le)||Ne.includes(le))&&Ce.push({id:Se.id,name:Se.name||"Unnamed Account",type:"Account",details:Se.email||Se.phone||"No contact info",route:"/manager/accounts"})}),Ce.slice(0,10)}catch(le){return console.error("Error in search:",le),[]}},[E,k,O,R]),U=le=>{le.route&&(e(le.route),_(""))},je=f.useCallback(async()=>{w(!0),A(null);try{const[le,Ce,Se,Oe,ge,He,Ne,he]=await Promise.all([te.get("/leads/admin/getLeads").catch(ae=>(console.error("Error fetching leads:",ae),{data:[]})),te.get("/deals/admin/fetch-all").catch(ae=>(console.error("Error fetching deals:",ae),{data:[]})),te.get("/accounts/admin/fetch-all").catch(ae=>(console.error("Error fetching accounts:",ae),{data:[]})),te.get("/tasks/all").catch(ae=>(console.error("Error fetching tasks:",ae),{data:[]})),te.get("/meetings/admin/fetch-all").catch(ae=>(console.error("Error fetching meetings:",ae),{data:[]})),te.get("/calls/admin/fetch-all").catch(ae=>(console.error("Error fetching calls:",ae),{data:[]})),te.get("/logs/read-all").catch(ae=>(console.error("Error fetching logs:",ae),{data:[]})),te.get("/targets/admin/fetch-all").catch(ae=>(console.error("Error fetching targets:",ae),{data:[]}))]),Z=Array.isArray(le.data)?le.data:[],_e=Array.isArray(Ce.data)?Ce.data:[],ke=Array.isArray(Se.data)?Se.data:[],ze=Array.isArray(Oe.data)?Oe.data:[],tt=Array.isArray(ge.data)?ge.data:[],De=Array.isArray(He.data)?He.data:[],at=Array.isArray(Ne.data)?Ne.data:[],et=Array.isArray(he.data)?he.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",_e.length),_e.length>0&&(console.log("First deal sample (raw):",JSON.stringify(_e[0],null,2)),console.log("First deal keys:",Object.keys(_e[0]))),T(Z),$(_e),P(ke),H(et);const V=et.reduce((ae,Fe)=>{const ye=Fe.amount||Fe.value||Fe.target_amount||0,We=parseFloat(typeof ye=="string"?ye.replace(/[^\d.-]/g,""):ye);return ae+(Number.isFinite(We)?We:0)},0);G(V);const ne=Z.filter(ae=>ae.status&&!["Lost","Converted"].includes(ae.status)).length,se=ze.filter(ae=>!ae.dueDate||ae.status==="Completed"?!1:new Date(ae.dueDate)<new Date).length;r({activeLeads:ne,totalDeals:_e.length,activeAccounts:ke.length,overdueTasks:se});const Ee=[...Z].sort((ae,Fe)=>new Date(Fe.created_at||0)-new Date(ae.created_at||0)).slice(0,5);o(Ee);const Ie=[..._e].sort((ae,Fe)=>new Date(Fe.created_at||0)-new Date(ae.created_at||0)).slice(0,5);c(Ie);const pe=new Date,Be=[];De.forEach(ae=>{const Fe=ae.due_date||ae.call_time,ye=(ae.status||"").toUpperCase();if(Fe){const We=new Date(Fe);ye==="COMPLETED"||ye==="MISSED"||ye==="NOT_HELD"||ye==="HELD"||Be.push({type:"Call",title:ae.subject||"Untitled Call",assignedTo:ae.assigned_to||(ae.call_assign_to?`${ae.call_assign_to.first_name||""} ${ae.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Fe,priority:(ae.priority||"MEDIUM").toUpperCase(),id:ae.id,activityType:"call",fullData:ae})}}),tt.forEach(ae=>{const Fe=ae.dueDate||ae.start_time,ye=(ae.status||"").toUpperCase();if(Fe){const We=new Date(Fe);ye==="COMPLETED"||ye==="CANCELLED"||ye==="DONE"||Be.push({type:"Meeting",title:ae.subject||ae.activity||"Untitled Meeting",assignedTo:ae.assignedTo||(ae.meet_assign_to?`${ae.meet_assign_to.first_name||""} ${ae.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Fe,priority:(ae.priority||"MEDIUM").toUpperCase(),id:ae.id,activityType:"meeting",fullData:ae})}});const $e={HIGH:1,MEDIUM:2,LOW:3},Ve=Be.sort((ae,Fe)=>{const ye=$e[ae.priority]||3,We=$e[Fe.priority]||3;if(ye!==We)return ye-We;const it=new Date(ae.scheduledDate||0),ht=new Date(Fe.scheduledDate||0);return it-ht}).slice(0,5);u(Ve),p(_e),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",_e.length);const ut=_e.filter(ae=>(ae.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",ut.length),ut.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),ut.forEach((ae,Fe)=>{let ye=ae.amount;ye&&typeof ye=="object"?ye.toString?ye=parseFloat(ye.toString()):ye=parseFloat(ye):ye=parseFloat(ye)||0,console.log(`Deal ${Fe+1}:`,{id:ae.id,name:ae.name,stage:ae.stage,stage_upper:(ae.stage||"").toUpperCase(),amount:ae.amount,amount_parsed:ye,amount_type:typeof ae.amount,close_date:ae.close_date,close_date_type:typeof ae.close_date,close_date_value:ae.close_date?new Date(ae.close_date):null,has_close_date:!!ae.close_date,has_amount:ye>0,all_keys:Object.keys(ae),full_deal:ae})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",_e.map(ae=>ae.stage))),v(_e);const ve=[...at].sort((ae,Fe)=>new Date(Fe.timestamp||0)-new Date(ae.timestamp||0));b(ve)}catch(le){console.error("Error fetching dashboard data:",le),A("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);f.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),je(),J.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),je(),W(new Date)},3e4),()=>{J.current&&clearInterval(J.current)}),[je]),f.useEffect(()=>{if(!t||!t.id)return;let le=0;const Ce=3;let Se=null;const Oe=()=>{const ge=window.location.protocol==="https:"?"wss:":"ws:",He=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ne=`${ge}//${He}/ws/notifications?user_id=${t.id}`;try{const he=new WebSocket(Ne);Te.current=he,he.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),le=0},he.onmessage=Z=>{try{const _e=JSON.parse(Z.data);console.log(" Real-time notification received:",_e),_e.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(_e.event)&&(console.log(" Refreshing dashboard due to:",_e.event),je(),W(new Date))}catch(_e){console.error("Error parsing WebSocket message:",_e)}},he.onerror=Z=>{le===0&&console.warn(" WebSocket connection unavailable (this is optional)")},he.onclose=()=>{le<Ce&&(le++,Se=setTimeout(()=>{t&&t.id&&Oe()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Oe(),()=>{Se&&clearTimeout(Se),Te.current&&(Te.current.close(),Te.current=null)}},[t,je]);const be=[{icon:eUe,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:JZ,title:"Total Targets",value:eJ(Q,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/manager/targets")},{icon:ZZ,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:QZ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",j,"error:",S),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[j&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:S})}),n.jsx("div",{className:"mb-8",children:n.jsx(mUe,{searchQuery:E,onSearchChange:_,searchResults:ee,onSearchResultClick:U})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:be.map(le=>n.jsx(gUe,{...le,loading:j},le.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(hUe,{logs:x,loading:j}),n.jsx(sj,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(aj,{leads:k,deals:O,targets:I,currencySymbol:a,basePath:"/manager"})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(pUe,{revenueData:N,loading:j})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(CA,{title:"Latest Leads",children:i.length>0?i.map((le,Ce)=>n.jsx(xUe,{...le},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(CA,{title:"Latest Deals",children:j?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((le,Ce)=>n.jsx(yUe,{...le,currencySymbol:a},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(CA,{title:"Upcoming Activities",children:d.length>0?d.map((le,Ce)=>n.jsx(bUe,{...le},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},SA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],_A={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Lr=e=>e?e.toUpperCase():"",AA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",wUe=e=>{switch(Lr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},NUe=e=>{switch(Lr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function jUe(){const e=wt();f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(null),[h,p]=f.useState(_A),[x,b]=f.useState(null),[N,v]=f.useState([]),[j,w]=f.useState(!1),[S,A]=f.useState([]),[E,_]=f.useState(null),[k,T]=f.useState([]),[O,$]=f.useState([]),[R,P]=f.useState("Filter by Status"),[I,H]=f.useState(""),[Q,G]=f.useState(null),[K,W]=f.useState(!1),[J,Te]=f.useState(1),[ee,U]=f.useState(10),[je,be]=f.useState("Overview"),[le,Ce]=f.useState(""),[Se,Oe]=f.useState(!1),[ge,He]=f.useState({}),[Ne,he]=f.useState(null),{comments:Z,addComment:_e,refresh:ke}=Ta({relatedType:"account",relatedId:x?.id});f.useEffect(()=>{x?.id&&ke()},[x?.id,ke]);const ze=f.useCallback(async(re=null)=>{w(!0);try{const lt=await te.get("/accounts/admin/fetch-all"),kt=[...Array.isArray(lt.data)?lt.data:[]].sort((Kt,Me)=>{const vt=Kt?.created_at||Kt?.updated_at||0,F=Me?.created_at||Me?.updated_at||0;return new Date(F)-new Date(vt)});if(v(kt),re){const Kt=kt.find(Me=>Me.id===re);b(Kt||null)}}catch(lt){console.error(lt),v([]),lt.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[b]),tt=f.useCallback(async()=>{try{const re=await te.get("/users/all");A(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),De=f.useCallback(async()=>{try{const re=await te.get("/territories/fetch");T(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),at=f.useCallback(async()=>{try{const re=await te.get("/accounts/admin/parent-companies");$(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),et=f.useCallback(async re=>{try{const lt=await te.get(`/activities/accounts/${re}`);He(lt.data&&typeof lt.data=="object"?lt.data:{})}catch(lt){console.error(lt),lt.response?.status===404&&(console.warn("No activities found for this account."),He({}))}},[]);f.useEffect(()=>{ze(),tt(),De(),at()},[ze,tt,De,at]),f.useEffect(()=>{x&&Ce(Lr(x.status)||"PROSPECT")},[x]);const V=N.length,ne=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="customer").length,[N]),se=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="prospect").length,[N]),Ee=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="partner").length,[N]),Ie=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="active").length,[N]),pe=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="inactive").length,[N]),Be=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="former").length,[N]),$e=f.useMemo(()=>[{title:"Total",value:V,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:ne,icon:Oo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:se,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Ee,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Ie,icon:Oo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:pe,icon:Mo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Be,icon:Mo,color:"text-orange-600",bgColor:"bg-orange-100"}],[V,ne,se,Ee,Ie,pe,Be]),Ve=f.useMemo(()=>{const re=I.trim().toLowerCase(),lt=R.trim().toUpperCase();return N.filter(zt=>{const kt=[zt?.name,zt?.website,zt?.industry,zt?.territory?.name,zt?.phone_number],Kt=re===""||kt.some(vt=>vt==null?!1:vt.toString().toLowerCase().includes(re)),Me=lt==="FILTER BY STATUS"||Lr(zt.status)===lt;return Kt&&Me})},[N,I,R]),ut=Math.max(1,Math.ceil(Ve.length/ee)||1);f.useEffect(()=>{Te(1)},[I,R]),f.useEffect(()=>{Te(re=>{const lt=Math.max(1,Math.ceil(Ve.length/ee)||1);return re>lt?lt:re})},[Ve.length]);const ve=f.useMemo(()=>{const re=(J-1)*ee;return Ve.slice(re,re+ee)},[Ve,J]);Ve.length===0||(J-1)*ee+1,Math.min(J*ee,Ve.length);const ae=()=>Te(re=>Math.max(re-1,1)),Fe=()=>Te(re=>Math.min(re+1,ut)),ye=re=>{b(re),be("Overview"),Ce(Lr(re?.status)||"PROSPECT")},We=()=>b(null),it=re=>{re.target.id==="accountModalBackdrop"&&!K&&We()},ht=()=>{a(!1),r(!1),u(null),p(_A),o(!1),_(null)},Ae=re=>{re.target.id==="modalBackdrop"&&ht()},Je=re=>re?new Date(re).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ce=re=>{const{name:lt,value:zt}=re.target;p(kt=>({...kt,[lt]:zt}))},X=()=>{p(_A),r(!1),u(null),a(!0)},de=re=>{b(null),re.assigned_accs?_(re.assigned_accs):_(null),p({name:re.name||"",website:re.website||"",phone_number:re.phone_number||"",billing_address:re.billing_address||"",shipping_address:re.shipping_address||"",parent_company:re.parent_company||"",industry:re.industry||"",status:Lr(re.status)||"PROSPECT",territory_id:re.territory?.id?String(re.territory.id):"",assigned_to:re.assigned_accs?.id?String(re.assigned_accs.id):""}),r(!0),u(re.id),a(!0)},D=re=>{re&&G({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:re.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:re.id,name:re.name}})},B=async()=>{if(!Q?.action){G(null);return}const{action:re}=Q,{type:lt,payload:zt,targetId:kt,name:Kt}=re;W(!0);try{if(lt==="create"){o(!0);const Me=await te.post("/accounts/admin",zt);at(),q.success(`Account "${Kt}" created successfully.`);const vt=x?.id||null;ht(),await ze(vt),!x&&Me.data?.id}else if(lt==="update"){if(!kt)throw new Error("Missing account identifier for update.");o(!0),await te.put(`/accounts/admin/${kt}`,zt),q.success(`Account "${Kt}" updated successfully.`);const Me=x?.id&&x.id===kt?kt:null;ht(),await ze(Me),x?.id===kt&&b(null)}else if(lt==="delete"){if(!kt)throw new Error("Missing account identifier for deletion.");const Me=x?.id;c(kt),await te.delete(`/accounts/admin/${kt}`),q.success(`Account "${Kt}" deleted successfully.`),await ze(Me&&Me!==kt?Me:null),Me===kt&&b(null)}}catch(Me){console.error(Me);const vt=lt==="create"?"Failed to create account. Please review the details and try again.":lt==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",F=Me.response?.data?.detail||vt;q.error(F),(lt==="create"||lt==="update")&&o(!1),lt==="delete"&&c(null)}finally{(lt==="create"||lt==="update")&&o(!1),lt==="delete"&&c(null),W(!1),G(null)}},oe=()=>{K||G(null)},ue=async()=>{if(!x||!le)return;const re=Lr(le),lt=Lr(x.status);if(re!==lt){Oe(!0);try{await te.put(`/accounts/admin/${x.id}`,{status:re}),q.success(`Account status updated to ${AA(re)}`),v(zt=>zt.map(kt=>kt.id===x.id?{...kt,status:re}:kt)),b(null)}catch(zt){console.error(zt);const kt=zt.response?.data?.detail||"Failed to update account status. Please try again.";q.error(kt)}finally{Oe(!1)}}},[ie,Pe]=f.useState(!1),xe=re=>{re.preventDefault(),Pe(!0);const lt=h.name.trim();if(!lt){q.error("Account name is required.");return}if(!h.assigned_to){q.error("Assigned To is required.");return}const kt={name:lt,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,parent_company:h.parent_company?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},Kt=s&&d?"update":"create";G({title:Kt==="create"?"Confirm New Account":"Confirm Update",message:Kt==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:lt}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:lt}),"?"]}),confirmLabel:Kt==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Kt,payload:kt,targetId:d||null,name:lt}})},fe=[{label:"Filter by Status",value:"Filter by Status"},...SA.map(re=>({label:re.label,value:re.value}))],qe=Q?.action?.type==="delete"?Q.action.targetId:null,Ze=x&&(l===x.id||qe===x.id),pt=x&&l===x.id,Nt=x?wUe(x.status):"",St=x?n.jsx("div",{id:"accountModalBackdrop",onClick:it,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:re=>re.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:We,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nt}`,children:AA(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>de(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>D(x),disabled:!!Ze,children:pt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(re=>n.jsx("button",{onClick:()=>be(re),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${je===re?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:re},re))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[je==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Je(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Je(x.updated_at)||"N/A"})]})]}),n.jsx(Aa,{comments:Z,onAddComment:_e})]}),je==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),je==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ge.tasks&&ge.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ge.tasks.length,")"]})]}),Ne==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.tasks.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||"No description"}),re.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",re.assigned_to.first_name," ",re.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.due_date||re.created_at)})]},`task-${lt}`))})]}),ge.meetings&&ge.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ge.meetings.length,")"]})]}),Ne==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.meetings.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||re.location||"No description"}),re.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",re.host.first_name," ",re.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.start_time||re.created_at)})]},`meeting-${lt}`))})]}),ge.calls&&ge.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ge.calls.length,")"]})]}),Ne==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.calls.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.call_time||re.created_at)})]},`call-${lt}`))})]}),ge.contacts&&ge.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ge.contacts.length,")"]})]}),Ne==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.contacts.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.first_name?`${re.first_name} `:"",re.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.created_at)})]},`contact-${lt}`))})]}),ge.deals&&ge.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ge.deals.length,")"]})]}),Ne==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.deals.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.deal_id?re.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",re.name||re.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:re.stage||re.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.close_date||re.created_at)})]},`deal-${lt}`))})]}),ge.quotes&&ge.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ge.quotes.length,")"]})]}),Ne==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.quotes.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(re.quote_id?re.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.presented_date)||""})]},`quote-${lt}`))})]}),(!ge||(!ge.tasks||ge.tasks.length===0)&&(!ge.meetings||ge.meetings.length===0)&&(!ge.calls||ge.calls.length===0)&&(!ge.quotes||ge.quotes.length===0)&&(!ge.deals||ge.deals.length===0)&&(!ge.contacts||ge.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:le||Lr(x?.status)||"PROSPECT",onChange:re=>Ce(re.target.value),children:SA.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))}),n.jsx("button",{onClick:ue,disabled:Se||!le||Lr(le)===Lr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Se||!le||Lr(le)===Lr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Se?"Updating...":"Update"})]})]})]})]})]})}):null,Ht=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{X(),Pe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:$e.map(re=>n.jsx(CUe,{...re},re.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:re=>H(re.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:R,onChange:re=>P(re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:j?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):Ve.length>0?ve.map(re=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ye(re),et(re.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:re.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:re.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${NUe(re.status)}`,children:AA(re.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:re.phone_number||"--"})]})})]},re.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ve.length,pageSize:ee,currentPage:J,onPrev:ae,onNext:Fe,onPageSizeChange:re=>{U(re),Te(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),on=t?n.jsx("div",{id:"modalBackdrop",onClick:Ae,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:re=>re.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ht(),Pe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||K,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:xe,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Xm,{label:"Name",name:"name",value:h.name,onChange:ce,placeholder:"Company name",required:!0,isSubmitted:ie})}),n.jsx(o8,{label:"Parent Company",value:h.parent_company,onChange:re=>{p(lt=>({...lt,parent_company:re}))},items:O.map(re=>({id:re,name:re})),getLabel:re=>re?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Xm,{label:"Website",name:"website",value:h.website,onChange:ce,placeholder:"https://example.com",disabled:i}),n.jsx(Xm,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Xm,{label:"Industry",name:"industry",value:h.industry,onChange:ce,placeholder:"Industry",disabled:i}),n.jsx(Xm,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:ce,placeholder:"Billing address",disabled:i}),n.jsx(Xm,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:ce,placeholder:"Shipping address",disabled:i}),n.jsx(i8,{label:"Status",name:"status",value:h.status,onChange:ce,options:[{value:"",label:"Select status"},...SA],required:!0,disabled:i}),n.jsx(o8,{label:"Assigned To",value:h.assigned_to,onChange:re=>{const lt=S.find(kt=>String(kt.id)===String(re));_(lt);let zt=null;lt&&lt.assigned_territory&&lt.assigned_territory.length===1&&(zt=lt.assigned_territory[0].id),p(kt=>({...kt,assigned_to:re,territory_id:zt}))},items:S||[],getLabel:re=>`${re?.first_name??""} ${re?.last_name??""} (${re?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ie,disabled:i||S.length===0}),n.jsx(i8,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:ce,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(re=>({value:String(re.id),label:re.name}))||[]],disabled:i||!E||!E.assigned_territory||E.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),Pe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||K,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||K,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,cn=Q?n.jsx(_Ue,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:B,onCancel:oe,loading:K}):null;return n.jsxs(n.Fragment,{children:[Ht,St,on,cn]})}function CUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Xm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function i8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function o8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const h=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(SUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h,allowFreeText:u})]})}function SUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(j=>String(j.id)===String(t)),N=b?s(b):t,v=f.useMemo(()=>{const j=h.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:j=>{p(j.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&h.trim()&&!v.some(j=>s(j).toLowerCase()===h.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(h.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!h.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function _Ue({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const TA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},xl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),co=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function AUe(){const e=wt(),t=Zt();f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,h]=f.useState(null),[p,x]=f.useState(!1),[b,N]=f.useState(!1),[v,j]=f.useState(!1),[w,S]=f.useState(null),[A,E]=f.useState(!1),[_,k]=f.useState(null),[T,O]=f.useState(TA),[$,R]=f.useState(""),[P,I]=f.useState("Filter by Accounts"),[H,Q]=f.useState(null),[G,K]=f.useState("Overview"),[W,J]=f.useState(1),[Te,ee]=f.useState(10),[U,je]=f.useState({}),[be,le]=f.useState(null),[Ce,Se]=f.useState(null),{comments:Oe,addComment:ge,refresh:He}=Ta({relatedType:"contact",relatedId:u?.id});f.useEffect(()=>{u?.id&&He()},[u?.id,He]),f.useEffect(()=>{const D=t.state?.contactID;D&&(Se(D),e(t.pathname,{replace:!0,state:{}}))},[t,e]),f.useEffect(()=>{if(Ce&&a.length>0&&!r){const D=a.find(B=>B.id===Ce);D?h(D):q.error("Contact not found."),Se(null)}},[Ce,a,r]);const Ne=f.useCallback(async(D=null)=>{i(!0);try{const B=await te.get("/contacts/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((ie,Pe)=>{const xe=ie?.created_at||ie?.updated_at||0,fe=Pe?.created_at||Pe?.updated_at||0;return new Date(fe)-new Date(xe)});if(s(ue),D){const ie=ue.find(Pe=>Pe.id===D);h(ie||null)}}catch(B){console.error(B),s([]),B.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),he=f.useCallback(async()=>{try{const D=await te.get("/accounts/admin/fetch-all"),oe=[...Array.isArray(D.data)?D.data:[]].sort((ue,ie)=>(ue?.name||"").localeCompare(ie?.name||""));l(oe)}catch(D){console.error(D),l([]),D.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Z=f.useCallback(async()=>{try{const D=await te.get("/users/all"),oe=[...Array.isArray(D.data)?D.data:[]].sort((ue,ie)=>xl(ue).localeCompare(xl(ie)));d(oe)}catch(D){console.error(D),d([]),D.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),_e=f.useCallback(async D=>{try{const B=await te.get(`/activities/contact/${D}`);je(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]);f.useEffect(()=>{Ne(),he(),Z()},[Ne,he,Z]);const ke=f.useMemo(()=>{const D=new Map;o.forEach(oe=>{oe?.id&&oe?.name&&D.set(String(oe.id),oe.name)}),a.forEach(oe=>{oe?.account_id&&oe?.account?.name&&D.set(String(oe.account_id),oe.account.name)});const B=Array.from(D.entries()).sort((oe,ue)=>oe[1].localeCompare(ue[1])).map(([oe,ue])=>({value:oe,label:ue}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...B]},[o,a]),ze=f.useMemo(()=>{const D=$.trim().toLowerCase(),B=P.trim();return a.filter(oe=>{const ue=[oe?.first_name,oe?.last_name,oe?.email,oe?.title,oe?.department,oe?.account?.name,oe?.account?.status,oe?.work_phone,oe?.mobile_phone_1,oe?.mobile_phone_2,oe?.assigned_contact?.first_name,oe?.assigned_contact?.last_name,oe?.contact_creator?.first_name,oe?.contact_creator?.last_name,oe?.notes,co(oe?.created_at),co(oe?.updated_at)],ie=D===""||ue.some(xe=>xe==null?!1:xe.toString().toLowerCase().includes(D)),Pe=B==="Filter by Accounts"||String(oe.account_id)===B;return ie&&Pe})},[a,$,P]),tt=Math.max(1,Math.ceil(ze.length/Te)||1);f.useEffect(()=>{J(1)},[$,P]),f.useEffect(()=>{J(D=>{const B=Math.max(1,Math.ceil(ze.length/Te)||1);return D>B?B:D})},[ze.length]);const De=f.useMemo(()=>{const D=(W-1)*Te;return ze.slice(D,D+Te)},[ze,W]),at=()=>J(D=>Math.max(D-1,1)),et=()=>J(D=>Math.min(D+1,tt)),V=f.useMemo(()=>{if(!b||!_)return o;const D=a.find(oe=>oe.id===_);return!D||!D.account||o.some(oe=>oe.id===D.account.id)?o:[...o,D.account]},[o,b,_,a]),ne=f.useCallback(()=>{x(!1),N(!1),k(null),O(TA),j(!1),Ve(!1)},[]),se=D=>{D.target.id==="modalBackdrop"&&!v&&!A&&ne()},Ee=D=>{const{name:B,value:oe}=D.target;O(ue=>({...ue,[B]:oe}))},Ie=()=>{O(TA),N(!1),k(null),x(!0)},pe=async D=>{if(!D)return;const B=await te.get(`/accounts/get/${D.account_id}`);O({first_name:D.first_name||"",last_name:D.last_name||"",account_id:B.data.id?B.data.id:"",title:D.title||"",department:D.department||"",email:D.email||"",work_phone:D.work_phone||"",mobile_phone_1:D.mobile_phone_1||"",mobile_phone_2:D.mobile_phone_2||"",notes:D.notes||"",assigned_to:D.assigned_to?String(D.assigned_to):""}),N(!0),k(D.id),x(!0),h(null)},Be=D=>{if(!D)return;const B=xl(D)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},[$e,Ve]=f.useState(!1),ut=D=>{D.preventDefault(),Ve(!0);const B=T.first_name.trim(),oe=T.last_name.trim();if(!B||!oe){q.error("First name and last name are required.");return}if(!T.account_id){q.error("Account is required.");return}if(!T.assigned_to){q.error("Assigned To is required.");return}const ie=T.email?.trim();if(!ie){q.error("Email is required.");return}if(!ie.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ie)){q.error("Please enter a valid email address.");return}const xe={first_name:B,last_name:oe,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},fe=b&&_?"update":"create",qe=`${B} ${oe}`.trim();S({title:fe==="create"?"Confirm New Contact":"Confirm Update",message:fe==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:qe})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:qe}),"?"]}),confirmLabel:fe==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:fe,payload:xe,targetId:_||null,name:qe}})},ve=async()=>{if(!w?.action){S(null);return}const{action:D}=w,{type:B,payload:oe,targetId:ue,name:ie}=D;E(!0);try{if(B==="create"){j(!0),await te.post("/contacts/admin",oe),q.success(`Contact "${ie}" created successfully.`);const Pe=u?.id||null;ne(),await Ne(Pe)}else if(B==="update"){if(!ue)throw new Error("Missing contact identifier for update.");j(!0),await te.put(`/contacts/admin/${ue}`,oe),q.success(`Contact "${ie}" updated successfully.`);const Pe=u?.id&&u.id===ue?ue:u?.id||null;ne(),await Ne(Pe),u?.id===ue&&h(null)}else if(B==="delete"){if(!ue)throw new Error("Missing contact identifier for deletion.");const Pe=u?.id;Q(ue),await te.delete(`/contacts/admin/${ue}`),q.success(`Contact "${ie}" deleted successfully.`),await Ne(Pe&&Pe!==ue?Pe:null),Pe===ue&&h(null)}}catch(Pe){console.error(Pe);const xe=B==="create"?"Failed to create contact. Please review the details and try again.":B==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",fe=Pe.response?.data?.detail||xe;q.error(fe)}finally{(B==="create"||B==="update")&&j(!1),B==="delete"&&Q(null),E(!1),S(null)}},ae=()=>{A||S(null)},Fe=D=>{h(D),K("Overview")},ye=()=>h(null),We=D=>{D.target.id==="contactModalBackdrop"&&!A&&ye()},it=w?.action?.type==="delete"?w.action.targetId:null,ht=u&&(H===u.id||it===u.id),Ae=u&&H===u.id,Je=u?n.jsx("div",{id:"contactModalBackdrop",onClick:We,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:ye,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:xl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>pe(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Be(u),disabled:!!ht,children:Ae?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(D=>n.jsx("button",{onClick:()=>K(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:xl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:co(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:co(u.updated_at)||"N/A"})]})]})}),G==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Aa,{comments:Oe,onAddComment:ge})]}),G==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[U.tasks&&U.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",U.tasks.length,")"]})]}),be==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.tasks.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||"No description"}),D.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",D.assigned_to.first_name," ",D.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.due_date||D.created_at)})]},`task-${B}`))})]}),U.meetings&&U.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",U.meetings.length,")"]})]}),be==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.meetings.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||D.location||"No description"}),D.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",D.host.first_name," ",D.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.start_time||D.created_at)})]},`meeting-${B}`))})]}),U.calls&&U.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",U.calls.length,")"]})]}),be==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.calls.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.call_time||D.created_at)})]},`call-${B}`))})]}),U.deals&&U.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",U.deals.length,")"]})]}),be==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.deals.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",D.name||D.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:D.stage||D.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.close_date||D.created_at)})]},`deal-${B}`))})]}),U.quotes&&U.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",U.quotes.length,")"]})]}),be==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.quotes.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(D.quote_id?D.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:D.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.presented_date)||""})]},`quote-${B}`))})]}),(!U||(!U.tasks||U.tasks.length===0)&&(!U.meetings||U.meetings.length===0)&&(!U.calls||U.calls.length===0)&&(!U.quotes||U.quotes.length===0)&&(!U.deals||U.deals.length===0)&&(!U.contacts||U.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${xl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const D=encodeURIComponent(u.email),B=encodeURIComponent(""),oe=encodeURIComponent(""),ue=`mailto:${D}?subject=${B}&body=${oe}`;window.location.href=ue},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${xl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${xl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ie(),Ve(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:$,onChange:D=>R(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:D=>I(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ke.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value??D.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ze.length>0?De.map(D=>{const B=[{Icon:na,value:D.email,key:"email"},{Icon:Lt,value:D.work_phone,key:"work_phone"},{Icon:od,value:D.mobile_phone_1,key:"mobile_phone_1"},{Icon:od,value:D.mobile_phone_2,key:"mobile_phone_2"}].filter(oe=>!!oe.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{Fe(D),_e(D.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:xl(D)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:D.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ix,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:D.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:B.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:B.map(({Icon:oe,value:ue,key:ie})=>{const Pe=bt.createElement(oe,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Pe,n.jsx("span",{children:ue})]},ie)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.assigned_contact?`${D.assigned_contact.first_name} ${D.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:co(D.created_at)||"--"})]})})]},D.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ze.length,pageSize:Te,currentPage:W,onPrev:at,onNext:et,onPageSizeChange:D=>{ee(D),J(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),X=p?n.jsx("div",{id:"modalBackdrop",onClick:se,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ne(),Ve(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||A,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ut,noValidate:!0,children:[n.jsx(zc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Ee,placeholder:"First name",required:!0,isSubmitted:$e}),n.jsx(zc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Ee,placeholder:"Last name",required:!0,isSubmitted:$e}),n.jsx(l8,{label:"Account",value:T.account_id,onChange:D=>O(B=>({...B,account_id:D})),items:b?V:o||[],getLabel:D=>D?.name??"",placeholder:"Search account...",disabled:v||(b?V.length===0:o.length===0),required:!0,isSubmitted:$e}),n.jsx(l8,{label:"Assigned To",value:T.assigned_to,onChange:D=>O(B=>({...B,assigned_to:D})),items:c||[],getLabel:D=>`${D?.first_name??""} ${D?.last_name??""} (${D?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:$e,disabled:v||c.length===0}),n.jsx(zc,{label:"Title",name:"title",value:T.title,onChange:Ee,placeholder:"Job title",disabled:v}),n.jsx(zc,{label:"Department",name:"department",value:T.department,onChange:Ee,placeholder:"Department",disabled:v}),n.jsx(zc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Ee,placeholder:"example@email.com",required:!0,isSubmitted:$e}),n.jsx(zc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(zc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(zc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(EUe,{label:"Notes",name:"notes",value:T.notes,onChange:Ee,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{ne(),Ve(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||A,children:v?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,de=w?n.jsx(kUe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:ve,onCancel:ae,loading:A}):null;return n.jsxs(n.Fragment,{children:[ce,Je,X,de]})}function zc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function l8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(TUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function TUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function EUe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function kUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const EA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function tJ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Bo(),[d,u]=f.useState(e||null),[h,p]=f.useState("Overview"),[x,b]=f.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[v,j]=f.useState(null),[w,S]=f.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,E]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,k]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),b(e.status||"New");return}if(!c)return;const I=await te.get(`/leads/get/${c}`);u(I.data),b(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};f.useEffect(()=>{e?(u(e),b(e.status||"New")):c&&T()},[c,e]);const O=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const I=await te.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const H={...d,status:I.data.status};u(H),i&&i(H),a&&a(),t&&t()}catch(I){console.error(I),q.error("Failed to update lead status")}},$=async I=>{const H={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",H),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const G=(await te.post("/accounts/convertedLead",H)).data.id,K={...A,account_id:G,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},J=(await te.post("/contacts/convertedLead",K)).data.id,Te=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ee=_.amount&&_.amount!==""?parseFloat(_.amount):0,U={..._,account_id:G,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:J,probability:Te(),stage:"Prospecting"},je=await te.post("/deals/convertedLead",U),be=await te.put(`/leads/convert/${I.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const G=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";q.error(G)}},R=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=I=>I.toString().toLowerCase().replace(/\b\w/g,H=>H.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${R(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>$(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),h==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),h==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:EA(I.due_date||I.created_at)})]},`task-${H}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:EA(I.start_time||I.created_at)})]},`meeting-${H}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:EA(I.call_time||I.created_at)})]},`call-${H}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),H=encodeURIComponent(""),Q=encodeURIComponent(""),G=`mailto:${I}?subject=${H}&body=${Q}`;window.location.href=G},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>b(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:O,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const LUe=Yf.all(),kA=LUe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),PUe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),DUe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},LA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function OUe(){const e=wt(),{leadID:t}=Bo();zs();const[a,s]=f.useState(null),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]),[p,x]=f.useState(!1),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState(1),[A,E]=f.useState(10),[_,k]=f.useState(LA),[T,O]=f.useState(!1),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState(null),[G,K]=f.useState(!1),[W,J]=f.useState({});f.useRef(null);const[Te,ee]=f.useState(!1),[U,je]=f.useState(null),[be,le]=f.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Ce,Se]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Oe,ge]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const He=async()=>{try{const Ae=await te.get("/leads/getUsers");l(Ae.data)}catch(Ae){console.error(`Error fetching users: ${Ae}`)}},Ne=async()=>{x(!0);try{const Ae=await te.get("/leads/admin/getLeads");h(Ae.data),console.log(Ae.data)}catch(Ae){console.error(`Error fetching leads: ${Ae}`)}finally{x(!1)}};f.useEffect(()=>{He(),Ne()},[]),f.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const Ae=u.find(Je=>Je.id===Number(t));Ae&&s(Ae)}else!t&&!a&&s(null)},[t,u,r,T]),f.useEffect(()=>{if(U){const Je=(de=>{if(!de)return{code:"+63",number:""};const D=de.match(/^(\+\d+)\s(.+)$/);if(D)return{code:D[1],number:D[2]};if(de.startsWith("+")){const B=de.match(/^(\+\d{1,3})/);if(B)return{code:B[1],number:de.substring(B[1].length).trim()}}return{code:"+63",number:de}})(U.work_phone),ce=[];U.work_phone&&ce.push(`Work: ${U.work_phone}`),U.mobile_phone_1&&ce.push(`Mobile 1: ${U.mobile_phone_1}`),U.mobile_phone_2&&ce.push(`Mobile 2: ${U.mobile_phone_2}`);const X=ce.length>0?ce.join(" | "):"";le({name:U.company_name||"",website:"",countryCode:Je.code,phone_number:Je.number,combinedPhoneNumbers:X,billing_address:U.address||"",shipping_address:U.address||"",industry:"",status:"Prospect",territory_id:U.assigned_to?.territory?.id||null,assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),Se({last_name:U.last_name||"",first_name:U.first_name||"",account_id:null,title:U.title||"",department:U.department||"",email:U.email||"",work_phone:U.work_phone||"",mobile_phone_1:U.mobile_phone_1||"",mobile_phone_2:U.mobile_phone_2||"",notes:U.notes||"",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),ge({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null})}},[U]);const he=Ae=>N(Ae.target.value),Z=f.useMemo(()=>{const Ae=b.trim().toLowerCase(),Je=v.trim().toUpperCase();return u.filter(ce=>{const X=[ce?.first_name,ce?.last_name,ce?.company_name,ce?.title,ce?.email,ce?.work_phone,ce?.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:""],de=Ae===""||X.some(B=>B==null||B===""?!1:B.toString().toLowerCase().includes(Ae));let D=!1;return Je==="FILTER BY STATUS"?D=(ce.status?ce.status.toUpperCase():"")!=="CONVERTED":D=(ce.status?ce.status.toUpperCase():"")===Je,de&&D})},[u,b,v]),_e=Math.max(1,Math.ceil(Z.length/A)||1);f.useEffect(()=>{S(1)},[b,v]),f.useEffect(()=>{S(Ae=>{const Je=Math.max(1,Math.ceil(Z.length/A)||1);return Ae>Je?Je:Ae})},[Z.length]);const ke=f.useMemo(()=>{const Ae=(w-1)*A;return Z.slice(Ae,Ae+A)},[Z,w]),ze=()=>S(Ae=>Math.max(Ae-1,1)),tt=()=>S(Ae=>Math.min(Ae+1,_e)),De=f.useCallback(async Ae=>{try{const Je=await te.get(`/activities/lead/${Ae}`);J(Je.data&&typeof Je.data=="object"?Je.data:{})}catch(Je){console.error(Je),Je.response?.status===404&&(console.warn("No activities found for this account."),J({}))}},[]),at=Ae=>{s(Ae),De(Ae.id)},et=()=>{s(null),t&&e("/admin/leads",{replace:!0})},V=()=>{i(!1),k(LA),O(!1),R(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},ne=Ae=>{Ae.target.id==="modalBackdrop"&&V()},se=()=>{k(LA),O(!1),R(null),d(null),i(!0)},Ee=Ae=>{if(!Ae){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Ae),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Je=B=>{if(!B)return{code:"+63",number:""};const oe=B.match(/^(\+\d+)\s(.+)$/);return oe?{code:oe[1],number:oe[2]}:{code:"+63",number:B}},ce=Je(Ae.work_phone),X=Je(Ae.mobile_phone_1),de=Je(Ae.mobile_phone_2);let D="";if(Ae.assigned_to){D=String(Ae.assigned_to.id);const B=o?.find(oe=>oe.id===Ae.assigned_to.id);d(B)}k({first_name:Ae.first_name||"",last_name:Ae.last_name||"",company_name:Ae.company_name||"",title:Ae.title||"",department:Ae.department||"",email:Ae.email||"",work_ccode:ce.code,work_phone:ce.number,m1_ccode:X.code,mobile_phone_1:X.number,m2_ccode:de.code,mobile_phone_2:de.number,address:Ae.address||"",notes:Ae.notes||"",source:Ae.source||"",territory_id:Ae.territory?.id||null,lead_owner:D,status:Ae.status||"New"}),O(!0),R(Ae.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ie=Ae=>{if(!Ae){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Ae);const Je=`${Ae.first_name} ${Ae.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Je}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Ae.id,name:Je}})},pe=Ae=>{const{name:Je,value:ce}=Ae.target;if(k(X=>({...X,[Je]:ce})),Je==="lead_owner"){const X=o.find(de=>de.id===parseInt(ce));d(X)}},[Be,$e]=f.useState(!1),Ve=Ae=>{if(Ae.preventDefault(),$e(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const ce={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},X=T&&$?"update":"create",de=`${_.first_name} ${_.last_name}`;Q({title:X==="create"?"Confirm New Lead":"Confirm Update",message:X==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}),confirmLabel:X==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:X,payload:ce,targetId:$||null,name:de}})},ut=async()=>{if(!H?.action){Q(null);return}const{action:Ae}=H,{type:Je,payload:ce,targetId:X,name:de,lead:D}=Ae;console.log(ce),K(!0);try{if(Je==="create")I(!0),await te.post("/leads/create",ce),q.success(`Lead "${de}" created successfully.`),V(),await Ne();else if(Je==="update"){if(!X)throw new Error("Missing lead identifier for update.");I(!0);const B=await te.put(`/leads/${X}`,ce);q.success(`Lead "${de}" updated successfully.`),a&&a.id===X&&s(null),V(),await Ne()}else if(Je==="delete"){if(!X)throw new Error("Missing lead identifier for deletion.");await te.delete(`/leads/${X}`),q.success(`Lead "${de}" deleted successfully.`),a?.id===X&&s(null),await Ne()}}catch(B){console.error(B);const oe=Je==="create"?"Failed to create lead. Please review the details and try again.":Je==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ue=B.response?.data?.detail||oe;q.error(ue)}finally{(Je==="create"||Je==="update")&&I(!1),Je!=="edit"&&(K(!1),Q(null))}},ve=()=>{G||Q(null)},ae=u.filter(Ae=>Ae.status==="New").length,Fe=u.filter(Ae=>Ae.status==="Contacted").length,ye=u.filter(Ae=>Ae.status==="Qualified").length,We=u.filter(Ae=>Ae.status==="Converted").length,it=u.filter(Ae=>Ae.status==="Lost").length,ht=[{title:"New",value:ae,icon:Qn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Fe,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ye,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:We,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:it,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{se(),$e(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ht.map(Ae=>n.jsx(IUe,{...Ae},Ae.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:b,onChange:he,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:Ae=>j(Ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Z.length>0?ke.map(Ae=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>at(Ae),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Ae.first_name," ",Ae.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Ae.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Ae.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Ae.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Ae.assigned_to?`${Ae.assigned_to.first_name} ${Ae.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${DUe(Ae.status||"New")}`,children:PUe(Ae.status||"New")})})]},Ae.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Z.length,pageSize:A,currentPage:w,onPrev:ze,onNext:tt,onPageSizeChange:Ae=>{E(Ae),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:ne,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Ae=>Ae.stopPropagation(),children:[n.jsx("button",{onClick:()=>{V(),$e(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:pe,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:pe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Be&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:pe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:pe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:pe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:pe,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kA.map(Ae=>n.jsx("option",{value:Ae.code,children:Ae.code},Ae.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kA.map(Ae=>n.jsx("option",{value:Ae.code,children:Ae.code},Ae.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kA.map(Ae=>n.jsx("option",{value:Ae.code,children:Ae.code},Ae.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:pe,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Be&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx($Ue,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:Ae=>`${Ae.first_name} ${Ae.last_name}`,onChange:Ae=>{const Je=o.find(X=>String(X.id)===String(Ae));d(Je);let ce=null;Je&&Je.assigned_territory&&Je.assigned_territory.length===1&&(ce=Je.assigned_territory[0].id),k(X=>({...X,lead_owner:Ae,territory_id:ce}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:pe,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(Ae=>n.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:pe,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:pe,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{V(),$e(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||G,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Ve,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||G,children:P||G?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),H&&n.jsx(MUe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:ut,onCancel:ve,loading:G}),a&&!r&&!T&&n.jsx(tJ,{relatedActs:W,lead:a,onBack:et,fetchLeads:Ne,setSelectedLead:s,onEdit:Ee,onDelete:Ie})]})}function MUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function IUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function $Ue({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=f.useState(!1),[d,u]=f.useState(""),h=f.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",b=f.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const N=v=>{h.current&&!h.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),f.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:h,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:b.length>0?b.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const fb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Xa=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),RUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Xa,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Xa,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Xa,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Xa,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Xa,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),zUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Xa,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Xa,{label:"Department",name:"department",value:e.department}),n.jsx(Xa,{label:"Title",name:"title",value:e.title}),n.jsx(Xa,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Xa,{label:"Email",name:"email",value:e.email}),n.jsx(Xa,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Xa,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),FUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Xa,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Xa,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Xa,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"Description",name:"description",value:e.description}),n.jsx(Xa,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function UUe({isOpen:e,onClose:t}){const[a,s]=f.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(RUe,{data:fb});case 2:return n.jsx(zUe,{data:fb});case 3:return n.jsx(FUe,{data:fb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:fb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(rj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function nJ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=f.useState(e?.stage||""),[i,o]=f.useState(!1),l=wt(),{user:c}=en();f.useEffect(()=>{console.log("ManagerDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];f.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const h=e.id;o(!0);try{await te.put(`/deals/admin/${h}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),b=`mailto:${h}?subject=${p}&body=${x}`;window.location.href=b},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const h=e.account?.id||e.account_id;l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(h=>n.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function aJ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=zs(),u=d.get("id"),[h,p]=f.useState(e||null),[x,b]=f.useState(s||"Overview"),{user:N}=en(),{comments:v,addComment:j,refresh:w}=Ta({relatedType:"deal",relatedId:h?.id});f.useEffect(()=>{h?.id&&w()},[h?.id,w]);const S=s!==void 0?s:x;if(f.useEffect(()=>{(async()=>{if(u&&!e)try{const O=((await te.get("/deals/admin/fetch-all")).data||[]).find($=>$.id===parseInt(u));if(O){const $={...O,amount:typeof O.amount=="number"?O.amount:parseFloat(O.amount||0),probability:O.probability||0};p($)}else console.warn("Deal not found with ID:",u)}catch(k){console.error("Error fetching deal:",k)}})()},[u,e]),!h&&!u||u&&!h)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function E(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(h.stage)}`,children:h.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",E(h.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===N?.id||h.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Gt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):b(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",h.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(h?.stage||"PROSPECTING").toUpperCase(),T=($=>$==="PROSPECTING"?0:$==="QUALIFICATION"?1:$==="PROPOSAL"?2:$==="NEGOTIATION"?3:$==="CLOSED_WON"||$==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map($=>T===$?"orange":T>$?"green":"gray").map(($,R)=>n.jsxs(bt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${$==="green"?"bg-green-500 border-green-500":$==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),R<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},R))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,k)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},k))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",h.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]}),n.jsx(Aa,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},k))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(nJ,{selectedDeal:h,onStatusUpdate:l,onClose:a})})]})]})]})})}function BUe(){f.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Zt(),[a,s]=f.useState(""),[r,i]=f.useState("Filter by Stage"),[o,l]=f.useState("Filter by Owner"),[c,d]=f.useState(null),[u,h]=f.useState("Overview"),[p,x]=f.useState(!1),[b,N]=f.useState(null),[v,j]=f.useState(!1),[w,S]=f.useState(1),[A,E]=f.useState(10),[_,k]=f.useState(!1),[T,O]=f.useState(null),[$,R]=f.useState(!1),[P,I]=f.useState(!1),[H,Q]=f.useState(null),[G,K]=f.useState([]),[W,J]=f.useState([]),[Te,ee]=f.useState([]),[U,je]=f.useState({}),[be,le]=f.useState(null);f.useEffect(()=>{const X=t.state,de=X?.dealID;if(de&&!X?.openDealModal){le(de),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(be&&b?.length>0&&!v){const X=b.find(de=>de.id===be);X?d(X):q.error("Deal not found."),le(null)}},[be,b,v]);const[Ce,Se]=f.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Oe,ge]=f.useState(null),[He,Ne]=f.useState(null),he={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Z=X=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[X]||X||"--",_e=X=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[X]||"bg-gray-100 text-gray-700",ke=f.useCallback(async X=>{try{const de=await te.get(`/activities/deal/${X}`);je(de.data&&typeof de.data=="object"?de.data:{})}catch(de){console.error(de),de.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]),ze=f.useMemo(()=>{const X=a.trim().toLowerCase(),de=r.trim(),D=o.trim();return(b??[]).filter(B=>{const oe=[B?.name,B?.description,B?.account?.name,B?.contact?.first_name,B?.contact?.last_name,B?.assigned_deals?.first_name,B?.assigned_deals?.last_name],ue=X===""||oe.some(xe=>xe==null||xe===""?!1:xe.toString().toLowerCase().includes(X)),ie=de==="Filter by Stage"||de===""||B.stage===he[de]||B.stage===de,Pe=D==="Filter by Owner"||D===""||`${B.assigned_deals?.first_name||""} ${B.assigned_deals?.last_name||""}`.trim().toLowerCase()===D.toLowerCase();return ue&&ie&&Pe})},[b,a,r,o]),tt=Math.max(1,Math.ceil(ze.length/A)||1);f.useEffect(()=>{S(1)},[a,r,o]),f.useEffect(()=>{S(X=>{const de=Math.max(1,Math.ceil(ze.length/A)||1);return X>de?de:X})},[ze.length]);const De=f.useMemo(()=>{const X=(w-1)*A;return ze.slice(X,X+A)},[ze,w]),at=()=>S(X=>Math.max(X-1,1)),et=()=>S(X=>Math.min(X+1,tt)),V=()=>{Se({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),Q(null),x(!0)},ne=async()=>{j(!0);try{const X=await te.get("/deals/admin/fetch-all"),D=[...Array.isArray(X.data)?X.data:[]].sort((B,oe)=>{const ue=B?.created_at?new Date(B.created_at).getTime():0;return(oe?.created_at?new Date(oe.created_at).getTime():0)-ue});N(D)}catch(X){X.response&&X.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(X)}finally{j(!1)}},se=async()=>{try{const X=await te.get("/accounts/admin/fetch-all");K(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},Ee=async()=>{try{const X=await te.get("/contacts/admin/fetch-all");J(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},Ie=async()=>{try{const X=await te.get("/users/all");ee(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&q.warn("Unable to load users (permission denied).")}};f.useEffect(()=>{ne(),se(),Ee(),Ie()},[]);const pe=async X=>{X&&(Se({id:X.id||null,name:X.name||"",account_id:X.account_id?.toString()||"",primary_contact_id:X.primary_contact_id?.toString()||"",stage:X.stage||"PROPOSAL",amount:X.amount?.toString()||"",close_date:X.close_date?new Date(X.close_date).toISOString().split("T")[0]:"",assigned_to:X.assigned_to?.toString()||"",currency:X.currency||"PHP",description:X.description||""}),ge(X.account||null),Ne(X.contact||null),I(!0),Q(X.id),d(null),x(!0))},Be=async(X=!1)=>{try{const de=await te.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((oe,ue)=>{const ie=oe?.created_at?new Date(oe.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-ie});if(N(B),!X&&c&&c.id){const oe=B.find(ue=>ue.id===c.id);oe&&d({...oe})}}catch(de){console.error("Failed to refresh deal data:",de),await ne()}},$e=X=>{const de=X.name.trim();if(!de){q.error("Deal name is required.");return}if(!X.account_id){q.error("Account is required.");return}const D=P&&H?"update":"create",B=de;O({title:D==="create"?"Confirm New Deal":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:D,formData:X,targetId:H||null,name:B}})},Ve=X=>{if(!X)return;const de=X.name||"this deal";O({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:X.id,name:de}})},ut=async()=>{if(!T?.action){O(null);return}const{action:X}=T,{type:de,formData:D,targetId:B,name:oe}=X;R(!0);try{if(de==="create"){k(!0);const ue={name:D.name.trim(),account_id:parseInt(D.account_id),primary_contact_id:D.primary_contact_id?parseInt(D.primary_contact_id):null,stage:D.stage,amount:D.amount?parseFloat(D.amount):null,currency:D.currency||"PHP",close_date:D.close_date||null,description:D.description||null,assigned_to:D.assigned_to?parseInt(D.assigned_to):null};await te.post("/deals/admin/create",ue),q.success(`Deal "${oe}" created successfully.`),x(!1),await ne()}else if(de==="update"){if(!B)throw new Error("Missing deal identifier for update.");k(!0);const ue={};D.name!==void 0&&(ue.name=D.name.trim()),D.account_id!==void 0&&D.account_id!==""&&(ue.account_id=parseInt(D.account_id)),D.primary_contact_id!==void 0&&(ue.primary_contact_id=D.primary_contact_id?parseInt(D.primary_contact_id):null),D.stage!==void 0&&(ue.stage=D.stage),D.amount!==void 0&&D.amount!==""&&(ue.amount=parseFloat(D.amount)),D.currency!==void 0&&(ue.currency=D.currency),D.close_date!==void 0&&(ue.close_date=D.close_date||null),D.description!==void 0&&(ue.description=D.description||null),D.assigned_to!==void 0&&(ue.assigned_to=D.assigned_to?parseInt(D.assigned_to):null),await te.put(`/deals/admin/${B}`,ue),q.success(`Deal "${oe}" updated successfully.`),x(!1),await ne()}else if(de==="delete"){if(!B)throw new Error("Missing deal identifier for deletion.");await te.delete(`/deals/admin/${B}`),q.success(`Deal "${oe}" deleted successfully.`),c?.id===B&&d(null),await ne()}}catch(ue){console.error(ue);const ie=de==="create"?"Failed to create deal. Please review the details and try again.":de==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Pe=ue.response?.data?.detail||ie;q.error(Pe)}finally{(de==="create"||de==="update")&&k(!1),R(!1),O(null)}},ve=()=>{$||O(null)},ae=()=>{x(!1),Se({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ge(null),Ne(null),I(!1),Q(null),k(!1)},Fe=(b??[]).filter(X=>X.stage==="PROSPECTING").length,ye=(b??[]).filter(X=>X.stage==="QUALIFICATION").length,We=(b??[]).filter(X=>X.stage==="PROPOSAL").length,it=(b??[]).filter(X=>X.stage==="NEGOTIATION").length,ht=(b??[]).filter(X=>X.stage==="CLOSED_WON").length,Ae=(b??[]).filter(X=>X.stage==="CLOSED_LOST").length,Je=(b??[]).filter(X=>X.stage==="CLOSED_CANCELLED").length,ce=[{title:"Prospecting",value:Fe,icon:Gw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:ye,icon:fa,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:We,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:it,icon:sd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ht,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Ae,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Je,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:V,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ce.map(X=>n.jsx(qUe,{...X},X.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:X=>s(X.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:X=>i(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:X=>l(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((b??[]).map(X=>`${X.assigned_deals?.first_name} ${X.assigned_deals?.last_name}`))].map((X,de)=>n.jsx("option",{value:X,children:X},de))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:ze.length>0?De.map(X=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...X}),ke(X.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.deal_id?X.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:X.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:X.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.contact?.first_name&&X.contact?.last_name?`${X.contact.first_name} ${X.contact.last_name}`:X.contact?.first_name||X.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_e(X.stage)}`,children:Z(X.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",X.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.assigned_deals?.first_name&&X.assigned_deals?.last_name?`${X.assigned_deals.first_name} ${X.assigned_deals.last_name}`:X.assigned_deals?.first_name||X.assigned_deals?.last_name||"--"})]},X.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ze.length,pageSize:A,currentPage:w,onPrev:at,onNext:et,onPageSizeChange:X=>{E(X),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(WUe,{onClose:ae,formData:Ce,setFormData:Se,isEditing:P,onSubmit:$e,isSubmitting:_||$,accounts:G,contacts:W,users:Te,currentAccount:Oe,currentContact:He}),c&&n.jsx(aJ,{relatedActs:U,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:h,onEdit:pe,onDelete:Ve,onStatusUpdate:Be}),T&&n.jsx(HUe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ut,onCancel:ve,loading:$})]})}function HUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function qUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function WUe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[h,p]=f.useState(!1),x=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){q.error("Deal name is required.");return}const j=Number(t.amount);if(!t.amount||isNaN(j)||j<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},b=v=>{v.target.id==="modalBackdrop"&&e()},N=f.useMemo(()=>{const v=String(t.account_id||"").trim(),j=Array.isArray(l)?l:[];return v?j.filter(w=>{const A=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(E=>E!=null&&String(E).trim()!=="");return A?String(A)===v:!1}):j},[l,t.account_id]);return f.useEffect(()=>{const v=String(t.account_id||"").trim(),j=String(t.primary_contact_id||"").trim();if(!j||!v)return;N.some(S=>String(S?.id)===j)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(PA,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:h,className:"md:col-span-2"}),n.jsx(DA,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:h}),n.jsx(DA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:N||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:h}),n.jsx(c8,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(PA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:h}),n.jsx(c8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(PA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(DA,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:h,className:"md:col-span-2"}),n.jsx(VUe,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function PA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function c8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function DA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const h=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(GUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:h})]})}function GUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function VUe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const OA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],MA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ii=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},IA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",YUe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},QUe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},hb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ng=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",KUe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},$A=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},d8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},RA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},jw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},XUe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=jw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=jw(t);return a||null},ZUe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},JUe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function e7e(){const e=wt(),t=Zt(),{user:a}=en(),s=a?.company?.currency||"";f.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=f.useState([]),[o,l]=f.useState(!1),[c,d]=f.useState([]),[u,h]=f.useState([]),[p,x]=f.useState([]),[b,N]=f.useState([]),[v,j]=f.useState(null),[w,S]=f.useState(null),[A,E]=f.useState(!1),[_,k]=f.useState(!1),[T,O]=f.useState(!1),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState(!1),[G,K]=f.useState(null),[W,J]=f.useState(MA),[Te,ee]=f.useState(""),[U,je]=f.useState("Filter by Status"),[be,le]=f.useState(null),Ce=f.useCallback(async()=>{if(w)try{Q(!0);const z=(await te.get("/company/invoice-info"))?.data;e(`/manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:z}})}catch(F){const z=F?.response?.data?.detail||F?.message||"Failed to open print page.";q.error(z)}finally{Q(!1)}},[w,e]),[Se,Oe]=f.useState(1),[ge,He]=f.useState(10),[Ne,he]=f.useState("Overview"),[Z,_e]=f.useState("Draft"),[ke,ze]=f.useState([]),[tt,De]=f.useState(null),{comments:at,addComment:et,refresh:V}=Ta({relatedType:"quote",relatedId:w?.id});f.useEffect(()=>{w?.id&&V()},[w?.id,V]),f.useEffect(()=>{const z=t.state?.quoteID;if(z){De(z),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(tt&&r.length>0&&!o){const F=r.find(z=>z.id===tt);F?S(F):q.error("Quote not found."),De(null)}},[tt,r,o]),f.useEffect(()=>{let F=!0;return(async()=>{const me=XUe();if(me&&F){j(me);return}try{const Le=await te.get("/auth/me"),Re=jw(Le?.data);if(Re&&F){j(Re);return}}catch{}try{const Le=await te.get("/users/me"),Re=jw(Le?.data);if(Re&&F){j(Re);return}}catch{}F&&j(null)})(),()=>{F=!1}},[]);const ne=f.useCallback(F=>F&&u.find(me=>String(me.id)===String(F))?.name||"",[u]),se=f.useCallback(F=>{if(!F)return"";const z=p.find(me=>String(me.id)===String(F));return z?`${z.first_name} ${z.last_name}`.trim():""},[p]),Ee=f.useCallback(F=>{if(!F)return"--";const z=c.find(me=>String(me.id)===String(F));return z?.deal_name||z?.name||`Deal #${d8(F)}`},[c]),Ie=f.useCallback(F=>{const z=c.find(Re=>String(Re.id)===String(F)),me=ZUe(z);let Le=JUe(z);if(!Le&&me){const Re=p.filter(Qe=>String(Qe.account_id||"")===String(me));if(Re.length>0){const Qe=[...Re].sort((Ke,At)=>{const Ct=`${Ke.first_name||""} ${Ke.last_name||""}`.trim().toLowerCase(),Xt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Xt)});Le=String(Qe[0].id)}}if(me&&Le){const Re=p.find(Qe=>String(Qe.id)===String(Le));Re?.account_id&&String(Re.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),pe=f.useCallback(F=>{if(!F)return"--";if(F.deal?.deal_name)return F.deal.deal_name;if(F.deal?.name)return F.deal.name;const z=F.deal_id||F.deal?.id;return z?Ee(z):"--"},[Ee]),Be=f.useCallback(F=>{if(!F)return"--";if(F.account?.name)return F.account.name;let z=F.account_id||F.account?.id;if(!z){const me=F.deal_id||F.deal?.id;me&&(z=Ie(me).accountId)}return z?ne(z)||`Account #${z}`:"--"},[Ie,ne]),$e=f.useCallback(F=>{if(!F)return"--";if(F.contact?.first_name||F.contact?.last_name)return`${F.contact?.first_name||""} ${F.contact?.last_name||""}`.trim()||"--";let z=F.contact_id||F.contact?.id;if(!z){const Le=F.deal_id||F.deal?.id;Le&&(z=Ie(Le).contactId)}return(z?se(z):"")||(z?`Contact #${z}`:"--")},[Ie,se]),Ve=f.useCallback(async(F=null)=>{l(!0);try{const z=await te.get("/quotes/admin/fetch-all"),Le=[...Array.isArray(z.data)?z.data:[]].sort((Re,Qe)=>{const Ke=Re?.created_at||Re?.updated_at||0,At=Qe?.created_at||Qe?.updated_at||0;return new Date(At)-new Date(Ke)});if(i(Le),F){const Re=Le.find(Qe=>Qe.id===F);S(Re||null)}}catch(z){console.error(z),i([]),z.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ut=f.useCallback(async()=>{try{const F=await te.get("/deals/admin/fetch-all");d(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),ve=f.useCallback(async()=>{try{const F=await te.get("/accounts/admin/fetch-all");h(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),ae=f.useCallback(async()=>{try{const F=await te.get("/contacts/admin/fetch-all");x(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Fe=f.useCallback(async()=>{try{const F=await te.get("/users/all");N(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);f.useEffect(()=>{Ve(),ut(),ve(),ae(),Fe()},[Ve,ut,ve,ae,Fe]);const ye=f.useMemo(()=>{const F=Te.trim().toLowerCase(),z=U.trim();return r.filter(me=>{const Le=pe(me),Re=Be(me),Qe=$e(me),Ke=$A(me.presented_date,me.validity_days),At=[me.quote_id,Le,Re,Qe,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?Ng(me.presented_date):"",Ke?Ng(Ke):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,hb(me.created_at),hb(me.updated_at)],Ct=F===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(F)),Xt=z==="Filter by Status"||Ii(me.status)===z;return Ct&&Xt})},[r,Te,U,pe,Be,$e]),We=Math.max(1,Math.ceil(ye.length/ge)||1);f.useEffect(()=>Oe(1),[Te,U]),f.useEffect(()=>{Oe(F=>{const z=Math.max(1,Math.ceil(ye.length/ge)||1);return F>z?z:F})},[ye.length,ge]);const it=f.useMemo(()=>{const F=(Se-1)*ge;return ye.slice(F,F+ge)},[ye,Se,ge]),ht=()=>Oe(F=>Math.max(F-1,1)),Ae=()=>Oe(F=>Math.min(F+1,We)),Je=F=>{S(F),he("Overview"),_e(Ii(F?.status)||"Draft")},ce=()=>{S(null),he("Overview")},X=F=>{F.target.id==="quoteModalBackdrop"&&!P&&ce()},de=f.useCallback(()=>{E(!1),k(!1),K(null),J(MA),O(!1)},[]),D=F=>{F.target.id==="modalBackdrop"&&!T&&!P&&de()},B=F=>{const{name:z,value:me}=F.target;if(z==="deal_id"){const{accountId:Le,contactId:Re}=Ie(me);J(Qe=>({...Qe,deal_id:me,account_id:Le,contact_id:Re}));return}J(Le=>({...Le,[z]:me}))},oe=()=>{J(MA),k(!1),K(null),E(!0)},ue=F=>{if(!F)return;S(null);const z=F.deal?.id?String(F.deal.id):F.deal_id?String(F.deal_id):"",me=z?Ie(z):{accountId:"",contactId:""},Le=F.account?.id?String(F.account.id):F.account_id?String(F.account_id):me.accountId,Re=F.contact?.id?String(F.contact.id):F.contact_id?String(F.contact_id):me.contactId,Qe=F.assigned_user?.id?String(F.assigned_user.id):F.assigned_to?String(F.assigned_to):"";J({deal_id:z,account_id:Le||"",contact_id:Re||"",total_amount:F.total_amount?.toString()||"",presented_date:KUe(F.presented_date),validity_days:F.validity_days!==null&&F.validity_days!==void 0?String(F.validity_days):"",status:Ii(F.status)||"Draft",assigned_to:Qe,notes:F.notes||"",subtotal:parseFloat(F.subtotal)||0,tax_rate:parseFloat(F.tax_rate)||0,tax_amount:parseFloat(F.tax_amount)||0,discount_type:F.discount_type||"",discount_value:parseFloat(F.discount_value)||0,discount_amount:parseFloat(F.discount_amount)||0,currency:F.currency||"PHP",items:Array.isArray(F.items)?F.items.map(Ke=>({id:Ke.id,item_type:Ke.item_type||"Product",name:Ke.name||"",description:Ke.description||"",sku:Ke.sku||"",variant:Ke.variant||"",unit:Ke.unit||"pcs",quantity:parseFloat(Ke.quantity)||1,unit_price:parseFloat(Ke.unit_price)||0,discount_percent:parseFloat(Ke.discount_percent)||0,discount_amount:parseFloat(Ke.discount_amount)||0,line_total:parseFloat(Ke.line_total)||0,sort_order:Ke.sort_order||0})):[]}),k(!0),K(F.id),E(!0)},ie=F=>{if(F.target.checked){const z=it.map(me=>me.id);ze(z)}else ze([])},Pe=F=>{ze(z=>z.includes(F)?z.filter(me=>me!==F):[...z,F])},xe=F=>{if(!F)return;const z=F.quote_id||"this quote";R({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:z}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:z}})},fe=async()=>{ke.length!==0&&R({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ke.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${ke.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:ke}})},[qe,Ze]=f.useState(!1),pt=F=>{if(F.preventDefault(),Ze(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){q.error("Deal is required.");return}if(!W.assigned_to){q.error("Assigned To is required.");return}const me=Ie(W.deal_id),Le=W.items.map((Ct,Xt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Xt})),Re={deal_id:Number(W.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:Le},Qe=_&&G?"update":"create",Ke=Ee(W.deal_id),At=Qe==="create"?{...Re,created_by_id:Number(v)}:Re;R({title:Qe==="create"?"Confirm New Quote":"Confirm Update",message:Qe==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"?"]}),confirmLabel:Qe==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:At,targetId:G||null,name:Ke}})},Nt=async()=>{if(!$?.action){R(null);return}const{action:F}=$,{type:z,payload:me,targetId:Le,name:Re}=F;I(!0);try{if(z==="create")O(!0),await te.post("/quotes/admin",me),q.success("Quote created successfully."),de(),await Ve();else if(z==="update"){if(!Le)throw new Error("Missing quote identifier for update.");O(!0),await te.put(`/quotes/admin/${Le}`,me),q.success("Quote updated successfully."),de(),await Ve(),w?.id===Le&&S(null)}else if(z==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Qe=w?.id;le(Le),await te.delete(`/quotes/admin/${Le}`),q.success(`Quote "${Re}" deleted successfully.`),await Ve(Qe&&Qe!==Le?Qe:null),Qe===Le&&S(null)}else z==="bulk-delete"&&(await te.post("/quotes/admin/bulk-delete",{quote_ids:ke}),q.success(`Successfully deleted ${ke.length} quotes`),ze([]),await Ve())}catch(Qe){console.error(Qe);const Ke=z==="create"?"Failed to create quote. Please review the details and try again.":z==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Ke),(z==="create"||z==="update")&&O(!1),z==="delete"&&le(null)}finally{(z==="create"||z==="update")&&O(!1),z==="delete"&&le(null),I(!1),R(null)}},St=()=>{P||R(null)},Ht=f.useCallback((F,z)=>{const me=F?.deal_id??F?.deal?.id??"",Le=me?Number(me):null,Re=Le?Ie(String(Le)):{accountId:"",contactId:""},Qe=F?.account_id??F?.account?.id??Re.accountId??null,Ke=F?.contact_id??F?.contact?.id??Re.contactId??null,At=F?.total_amount??0,Ct=F?.assigned_to??F?.assigned_user?.id??null;return{deal_id:Le,account_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,contact_id:Ke!=null&&String(Ke).trim()!==""?Number(Ke):null,total_amount:Number(At),presented_date:F?.presented_date||null,validity_days:F?.validity_days===""||F?.validity_days===void 0||F?.validity_days===null?null:Number(F.validity_days),status:z,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:F?.notes?.trim()||null}},[Ie]),on=f.useCallback(async()=>{if(!w?.id)return;const F=Ii(Z),z=[F,F.toLowerCase()],me=async Le=>te.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const Re of z)try{await me(Re),Le=!0;break}catch(Qe){if(Qe?.response?.status===422)continue;throw Qe}if(!Le){const Re=Ht(w,F);if(!Re.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Re.total_amount||Re.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await te.put(`/quotes/admin/${w.id}`,Re)}q.success(`Quote status updated to ${F}`),S(null),he("Overview"),await Ve()}catch(Le){console.error(Le);const Re=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(Re)}},[w,Z,Ve,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...OA.map(F=>({label:F.label,value:F.value}))],re=$?.action?.type==="delete"?$.action.targetId:null,lt=w&&(be===w.id||re===w.id),zt=w&&be===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:X,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:F=>F.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:pe(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${QUe(w.status)}`,children:IA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Ce,disabled:H||T||P,children:[n.jsx(hn,{className:"mr-2"}),H?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||$?.action?.type==="update"&&$.action.targetId===w.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>xe(w),disabled:!!lt,children:zt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(F=>n.jsx("button",{onClick:()=>he(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ne===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:RA(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:pe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Be(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:$e(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:Ng(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:Ng($A(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:IA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:hb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:hb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(gd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ne==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Aa,{comments:at,onAddComment:et})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${RA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Z||Ii(w.status)||"Draft",onChange:F=>_e(F.target.value),children:OA.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))}),n.jsx("button",{onClick:on,disabled:Ii(Z)===Ii(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ii(Z)===Ii(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Kt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{oe(),Ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Te,onChange:F=>ee(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:F=>je(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:it.length>0&&ke.length===it.length,onChange:ie,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ke.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ke.length} selected items`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):ye.length>0?it.map(F=>{const z=$A(F.presented_date,F.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Je(F),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:ke.includes(F.id),onChange:()=>Pe(F.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:RA(F.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:pe(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Be(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:$e(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:F.total_amount?`${s}${Number(F.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${YUe(F.status)}`,children:IA(F.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:F.assigned_user?`${F.assigned_user.first_name} ${F.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:Ng(z)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},F.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ye.length,pageSize:ge,currentPage:Se,onPrev:ht,onNext:Ae,onPageSizeChange:F=>{He(F),Oe(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=A?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(f8,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:F=>{const{accountId:z,contactId:me}=Ie(F);J(Le=>({...Le,deal_id:F,account_id:z,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:F=>`${d8(F?.deal_id??"")} ${F?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:qe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(m8,{label:"Account",value:ne(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(m8,{label:"Contact",value:se(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(gd,{items:W.items,onChange:F=>J(z=>({...z,items:F})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:F=>{J(z=>({...z,subtotal:F.subtotal,discount_amount:F.discount_amount,tax_amount:F.tax_amount,total_amount:F.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:F=>J(z=>({...z,discount_type:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:F=>J(z=>({...z,discount_value:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:F=>J(z=>({...z,tax_rate:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(u8,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:B,disabled:T}),n.jsx(u8,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:B,placeholder:"30",disabled:T}),n.jsx(f8,{label:"Assigned To",value:W.assigned_to||"",onChange:F=>J(z=>({...z,assigned_to:F})),items:Array.isArray(b)?b:[],getLabel:F=>{const z=`${F?.first_name??""} ${F?.last_name??""}`.trim();return z?F?.role?`${z} (${F.role})`:z:F?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:qe,disabled:T}),n.jsx(t7e,{label:"Status",name:"status",value:W.status,onChange:B,options:OA,required:!0,disabled:T}),n.jsx(a7e,{label:"Notes",name:"notes",value:W.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=$?n.jsx(s7e,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Kt,Me,vt]})}function u8({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function m8({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function t7e({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(h=>String(h.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>n.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function f8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(n7e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function n7e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function a7e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function s7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function r7e(){const{userRole:e}=Qs();return n.jsx(Wj,{currentUserRole:e,currentUserId:null})}function i7e(){f.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[a,s]=f.useState(""),[r,i]=f.useState("Filter by Actions"),[o,l]=f.useState(1),[c,d]=f.useState(10),u=async()=>{try{const w=await te.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};f.useEffect(()=>{u()},[]);const h=f.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(E=>{const _=E.timestamp?new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",k=`${E.entity_type||""} ${E.entity_name||E.entity_details?.name||E.entity_details?.title||E.entity_id||""}`,T=`${E.logger?.first_name||""} ${E.logger?.last_name||""}`,O=[_,T,E.action,E.entity_type,k,E.description],$=w===""||O.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),R=S==="FILTER BY ACTIONS"||(E.action||"").toUpperCase()===S;return $&&R}).sort((E,_)=>{const k=E.timestamp?new Date(E.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-k})},[e,a,r]),p=Math.max(1,Math.ceil(h.length/c)||1);f.useEffect(()=>{l(1)},[a,r]),f.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(h.length/c)||1);return w>S?S:w})},[h.length]);const x=f.useMemo(()=>{const w=(o-1)*c;return h.slice(w,w+c)},[h,o]);h.length===0||(o-1)*c+1,Math.min(o*c,h.length);const b=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!h.length){zx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=h.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(O=>`"${String(O).replace(/"/g,'""')}"`).join(","))].join(`
`),E=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(E),k=document.createElement("a");k.href=_,k.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(_)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Rx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(Ql,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(h)&&h.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:h.length,pageSize:c,currentPage:o,onPrev:b,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const o7e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],l7e=e=>e?String(e).toUpperCase():"",df=e=>{const t=l7e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},zA=e=>{const t=df(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},h8=e=>{switch(df(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},g8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function c7e(){const[e,t]=f.useState(!1),[a,s]=f.useState(null),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]),[p,x]=f.useState(null),[b,N]=f.useState(!1),[v,j]=f.useState(null),[w,S]=f.useState(!1),[A,E]=f.useState(!1),[_,k]=f.useState("PLANNED"),[T,O]=f.useState(!1),[$,R]=f.useState(!1),[P,I]=f.useState(null),{comments:H,addComment:Q,refresh:G}=Ta({relatedType:"call",relatedId:a?.id});f.useEffect(()=>{a?.id&&G()},[a?.id,G]),zs();const K=wt(),W=Zt(),J=ye=>{if(!ye)return"";const We=String(ye).split("-");return We.length===3?`${We[0]}-${We[2]}`:String(ye)},ee={subject:"",call_time:(()=>{const ye=new Date,We=ye.getFullYear(),it=String(ye.getMonth()+1).padStart(2,"0"),ht=String(ye.getDate()).padStart(2,"0");return`${We}-${it}-${ht}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[U,je]=f.useState(ee);f.useEffect(()=>{const ye=W.state,We=ye?.callID;if(We&&!ye?.openCallModal){I(We),K(W.pathname,{replace:!0,state:{}});return}!ye?.openCallModal||!ye?.initialCallData||ye.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ye.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),je(it=>({...it,...ye.initialCallData,relatedTo1:ye.initialCallData.relatedTo1?String(ye.initialCallData.relatedTo1):"",relatedTo2:ye.initialCallData.relatedTo2?String(ye.initialCallData.relatedTo2):""})),K(W.pathname,{replace:!0,state:{}}))},[W.state,o]),f.useEffect(()=>{if(P&&u.length>0&&!$){const ye=u.find(We=>We.id===P);ye?s(ye):q.error("Call not found."),I(null)}},[P,u,$]);const be=async()=>{try{R(!0);const ye=await te.get("/calls/admin/fetch-all"),it=[...Array.isArray(ye.data)?ye.data:[]].sort((ht,Ae)=>{const Je=ht?.created_at?new Date(ht.created_at):0;return(Ae?.created_at?new Date(Ae.created_at):0)-Je});h(it)}catch(ye){console.error("Error fetching calls:",ye),q.error("Failed to load calls")}finally{R(!1)}},le=async()=>{try{const ye=await te.get("/users/all");x(ye.data)}catch(ye){console.error("Error fetching users: ",ye)}};f.useEffect(()=>{le(),be()},[]);const Ce=[],Se="",Oe="Filter by Status",ge="Filter by Users",[He,Ne]=f.useState(1),[he,Z]=f.useState(10),_e=u,ke=u,ze=u.length,tt=u.filter(ye=>df(ye.status)==="PLANNED").length,De=u.filter(ye=>df(ye.status)==="HELD").length,at=u.filter(ye=>df(ye.status)==="NOT_HELD").length,et=[{title:"Total",value:ze,icon:$s,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:tt,icon:Gs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:De,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:at,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}],[V,ne]=f.useState("Overview"),se=ye=>{const{name:We,value:it}=ye.target;je(ht=>{const Ae={...ht,[We]:it};return We==="relatedType1"&&(Ae.relatedTo1="",it==="Lead"?(Ae.relatedType2=null,Ae.relatedTo2=null,d([])):it==="Account"&&(Ae.relatedType2="Contact")),We==="relatedType2"&&(Ae.relatedTo2=""),Ae})};f.useEffect(()=>{const ye=async()=>{try{l([]);let We;U.relatedType1==="Lead"?We=await te.get("/leads/admin/getLeads"):U.relatedType1==="Account"&&(We=await te.get("/accounts/admin/fetch-all"));let it=[];if(We&&Array.isArray(We.data)?it=We.data:it=[],b&&U.relatedTo1)try{let ht;U.relatedType1==="Lead"?ht=await te.get(`/leads/get/${U.relatedTo1}`):U.relatedType1==="Account"&&(ht=await te.get(`/accounts/get/${U.relatedTo1}`)),ht&&ht.data&&(it.some(Je=>String(Je.id)===String(U.relatedTo1))||(it=[ht.data,...it]))}catch(ht){console.error("Error fetching specific related item:",ht)}l(it)}catch(We){console.error("Error fetching data:",We),l([])}};U.relatedType1&&ye()},[U.relatedType1,b,U.relatedTo1]),f.useEffect(()=>{const ye=async()=>{try{d([]);let We;if(U.relatedType1==="Account"&&U.relatedTo1)U.relatedType2==="Contact"?We=await te.get(`/contacts/from-acc/${U.relatedTo1}`):U.relatedType2==="Deal"?We=await te.get(`/deals/from-acc/${U.relatedTo1}`):U.relatedType2==="Quote"&&(We=await te.get(`/quotes/from-acc/${U.relatedTo1}`));else{d([]);return}We&&Array.isArray(We.data)?d(We.data):d([])}catch(We){console.error("Error fetching data:",We),d([])}};U.relatedType2&&ye()},[U.relatedType2,U.relatedTo1,U.relatedType1]);const[Ee,Ie]=f.useState(!1),pe=ye=>{ye.preventDefault(),Ie(!0);const We=U.subject;if(!We||We.trim()===""){q.error("Subject is required.");return}if(!U.relatedTo1){q.error(`Please select a ${U.relatedType1||"Lead/Account"}.`);return}if(!U.assigned_to){q.error("Subject is required.");return}const ht={...U,duration_minutes:U.duration_minutes?parseInt(U.duration_minutes,10):null,relatedTo1:U.relatedTo1?parseInt(U.relatedTo1,10):null,relatedTo2:U.relatedType1==="Lead"?null:U.relatedTo2?parseInt(U.relatedTo2,10):null,relatedType2:U.relatedType1==="Lead"?null:U.relatedType2,assigned_to:U.assigned_to?parseInt(U.assigned_to,10):null},Ae=b&&v?"update":"create",Je=(U.subject||"").trim()||"Untitled Call";i({title:Ae==="create"?"Confirm New Call":"Confirm Update",message:Ae==="create"?`Create "${Je}"?`:`Save changes to "${Je}"?`,confirmLabel:Ae==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Ae,payload:ht,targetId:v||null,name:Je}})},Be=ye=>s(ye),$e=()=>{t(!1),N(!1),j(null)},Ve=async()=>{if(!r?.action){i(null);return}const{action:ye}=r,{type:We,payload:it,targetId:ht,name:Ae}=ye;E(!0);try{if(We==="create")S(!0),await te.post("/calls/create",it),q.success(`Call "${Ae}" created successfully.`),t(!1),je(ee),N(!1),j(null),await be();else if(We==="update"){if(!ht)throw new Error("Missing call identifier for update.");S(!0),await te.put(`/calls/${ht}`,it),q.success(`Call "${Ae}" updated successfully.`),t(!1),je(ee),N(!1),j(null),await be()}else if(We==="delete"){if(!ht)throw new Error("Missing call identifier for deletion.");await te.delete(`/calls/${ht}`),q.success(`Call "${Ae}" deleted successfully.`),a?.id===ht&&s(null),await be()}}catch(Je){const ce=We==="create"?"Failed to create call. Please review the details and try again.":We==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",X=Je?.response?.data?.detail||ce;q.error(X)}finally{(We==="create"||We==="update")&&S(!1),E(!1),i(null)}},ut=()=>{A||i(null)},ve=async()=>{if(a?.id)try{O(!0),await te.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${zA(_)}`),h(ye=>Array.isArray(ye)?ye.map(We=>We.id===a.id?{...We,status:_}:We):ye),s(null)}catch(ye){const We=ye.response?.data?.detail||"Failed to update status.";q.error(We)}finally{O(!1)}};f.useEffect(()=>{a&&k(df(a.status))},[a]);const ae=a?n.jsxs("div",{id:"callModalBackdrop",onClick:ye=>ye.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[$&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${h8(a.status)}`,children:zA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ye=Je=>{if(!Je)return"";const ce=new Date(Je),X=ce.getFullYear(),de=String(ce.getMonth()+1).padStart(2,"0"),D=String(ce.getDate()).padStart(2,"0"),B=String(ce.getHours()).padStart(2,"0"),oe=String(ce.getMinutes()).padStart(2,"0");return`${X}-${de}-${D}T${B}:${oe}`},We=a.lead?"Lead":a.account?"Account":"Lead",it=a.lead?a.lead.id:a.account?a.account.id:null,ht=We==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",Ae=We==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;je({subject:a.subject||"",call_time:ye(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:We,relatedType2:ht,relatedTo1:it?String(it):"",relatedTo2:Ae?String(Ae):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ye=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ye}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:ye}})},children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ye=>n.jsx("button",{onClick:()=>ne(ye),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${V===ye?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ye},ye))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(uo,{label:"Call Time",value:g8(a.call_time)}),n.jsx(uo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(uo,{label:"Direction",value:a.direction||"--"}),n.jsx(uo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(uo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(uo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(uo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(uo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(uo,{label:"Quote",value:J(a.quote.quote_id)}),n.jsx(uo,{label:"Created At",value:g8(a.created_at)})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Aa,{comments:H,onAddComment:Q})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:ye=>k(ye.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ve,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,Fe=e?n.jsx("div",{id:"modalBackdrop",onClick:ye=>ye.target.id==="modalBackdrop"&&$e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{$e(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:pe,noValidate:!0,children:[n.jsx(u7e,{label:"Subject",className:"md:col-span-2",name:"subject",value:U.subject,onChange:se,isSubmitted:Ee,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:se,value:U.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(FA,{items:Array.isArray(o)?o:[],value:U.relatedTo1??"",placeholder:`Search ${U.relatedType1||"here"}...`,getLabel:ye=>U.relatedType1==="Lead"?ye.title:ye.name??"",onChange:ye=>je(We=>({...We,relatedTo1:ye})),required:!0,isSubmitted:Ee,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:se,value:U.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:U.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(FA,{disabled:U.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:U.relatedTo2??"",placeholder:U.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${U.relatedType2||"Contact"}...`:`No ${U.relatedType2||""} data found`,getLabel:ye=>U.relatedType2==="Contact"?`${ye.first_name??""} ${ye.last_name??""}`.trim():U.relatedType2==="Quote"?J(ye.quote_id)??"":ye.name??"",onChange:ye=>je(We=>({...We,relatedTo2:ye}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:U.call_time,onChange:se,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:U.duration_minutes,onChange:se,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(FA,{items:Array.isArray(p)?p:[],value:U.assigned_to??"",placeholder:"Search an account...",getLabel:ye=>`${ye.first_name} ${ye.last_name}`,onChange:ye=>je(We=>({...We,assigned_to:ye})),required:!0,isSubmitted:Ee})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:se,value:U.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:se,value:U.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(m7e,{className:"col-span-2",label:"Notes",value:U.notes,onChange:se,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{$e(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":b?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx($s,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{je(ee),N(!1),j(null),t(!0),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:et.map(ye=>n.jsx(d7e,{...ye},ye.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Se})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:Oe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),o7e.map(ye=>n.jsx("option",{value:ye.value,children:ye.label},ye.value))]}),n.jsxs("select",{defaultValue:ge,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ce.map(ye=>n.jsx("option",{value:ye.name,children:ye.name},ye.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:$?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):ke.length>0?ke.map(ye=>n.jsxs("tr",{onClick:()=>Be(ye),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ye.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[ye.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.lead.title}),ye.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.account.name}),ye.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ye.contact.first_name," ",ye.contact.last_name]}),ye.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.deal.name}),ye.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:J(ye.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ye.call_time?new Date(ye.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ye?.call_assign_to?`${ye.call_assign_to.first_name} ${ye.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h8(ye.status)}`,children:zA(ye.status)})})]},ye.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:_e.length,pageSize:he,currentPage:He,onPrev:()=>Ne(ye=>Math.max(1,ye-1)),onNext:()=>Ne(ye=>ye+1),onPageSizeChange:ye=>{Z(ye),Ne(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),ae,Fe,r&&n.jsx(f7e,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Ve,onCancel:ut,loading:A})]})}function d7e({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function u7e({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function m7e(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function uo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function f7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function FA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(w=>String(w.id)===String(t)),N=b?s(b):"",v=l&&c&&!t,j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const p8=["Not started","In progress","Deferred","Completed"],x8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},sJ=e=>e&&(x8[e]||x8[String(e).toUpperCase()])||"Not started",h7e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},y8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},g7e=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),sJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,h=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:h}},p7e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=H=>{if(!H)return"";const Q=String(H).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(H)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,h=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,b=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",E="",_="Lead",k="",T="",O="";const $=c(),R=b(),P=l(),I=x();if($){w="Account",_="Account",k=R,S=String($);const H=d(),Q=u(),G=N(),K=v(),W=h(),J=j();H?(A="Contact",T="Contact",O=G,E=String(H)):Q?(T="Deal",A="Deal",O=K,E=String(Q)):W&&(T="Quote",A="Quote",O=J,E=String(W))}else P?(_="Lead",k=I,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:sJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:k,relatedType2Text:T,relatedTo2Text:O,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:E}};function x7e(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,h]=f.useState([]),[p,x]=f.useState(!0),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[A,E]=f.useState([]),[_,k]=f.useState(1),[T,O]=f.useState(10),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState([]),G=wt(),K=Zt(),[W,J]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[Te,ee]=f.useState(null);f.useEffect(()=>{const V=K.state?.openTaskModal,ne=K.state?.initialTaskData,se=K.state?.taskID;V?(i(!0),ne&&J(Ee=>({...Ee,...ne})),G(K.pathname,{replace:!0,state:{}})):se&&(ee(se),G(K.pathname,{replace:!0,state:{}}))},[K,G]),f.useEffect(()=>{if(Te&&u.length>0&&!p){const V=u.find(ne=>ne.id===Te);V?le(V,!0):q.error("Task not found."),ee(null)}},[Te,u,p]);const U=async()=>{try{const V=await te.get("/users/all");E(Array.isArray(V.data)?V.data:[])}catch(V){console.error("Failed to fetch users:",V),q.error("Failed to fetch users.")}},je=async()=>{try{x(!0);const V=await te.get("/tasks/all"),se=(Array.isArray(V.data)?V.data:[]).map(p7e);se.sort((Ee,Ie)=>{const pe=Ee.createdAt?new Date(Ee.createdAt):0;return(Ie.createdAt?new Date(Ie.createdAt):0)-pe}),h(se),a==="list"&&k(1)}catch(V){console.error("Failed to load tasks:",V),q.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{!t&&e&&(U(),je())},[t,e]);const be=()=>{l(null),J({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(V=null,ne=!1)=>{l(V),d(ne),V?J({id:V.id,subject:V.title||"",description:V.description||"",priority:V.priority||"Normal",status:V.status||"Not started",dueDate:h7e(V.dueDate),assignedTo:V.assignedToId?String(V.assignedToId):"",assignedToName:V.assignedToName||"",createdBy:V.createdBy||"",notes:V.notes||"",relatedType1Text:V.relatedType1Text||"",relatedTo1Text:V.relatedTo1Text||"",relatedType2Text:V.relatedType2Text||"",relatedTo2Text:V.relatedTo2Text||"",relatedType1:V.relatedType1||"",relatedTo1:V.relatedTo1||"",relatedType2:V.relatedType2||"",relatedTo2:V.relatedTo2||""}):be(),i(!0)},Ce=()=>{i(!1),l(null),d(!1),be()},Se=async V=>{const ne=g7e(V);try{o&&!c?(await te.put(`/tasks/${o.id}`,ne),q.success("Task updated successfully.")):(await te.post("/tasks/create",ne),q.success("Task created successfully.")),i(!1),await je()}catch(se){console.error("Failed to save task:",se);const Ee=se.response?.data?.detail||"Failed to save task.";q.error(Ee)}},Oe=V=>{V&&R({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:V.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:V.id}})},ge=()=>{if(ke.every(V=>H.includes(V.id)))Q(H.filter(V=>!ke.map(ne=>ne.id).includes(V)));else{const V=ke.map(ne=>ne.id);Q([...new Set([...H,...V])])}},He=V=>{Q(ne=>ne.includes(V)?ne.filter(se=>se!==V):[...ne,V])},Ne=async()=>{H.length!==0&&R({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:H.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${H.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:H}})},he=async()=>{if(!$?.action){R(null);return}const{action:V}=$;I(!0);try{V.type==="delete"?(await te.delete(`/tasks/${V.targetId}`),q.success("Task deleted successfully."),await je()):V.type==="bulk-delete"&&(await te.delete("/tasks/admin/bulk-delete",{data:{task_ids:V.task_ids}}),q.success(`Successfully deleted ${V.task_ids.length} tasks`),Q([]),await je())}catch(ne){console.error("Task action failed:",ne),q.error("Failed to delete task.")}finally{I(!1),R(null)}},Z=()=>{P||R(null)},_e=f.useMemo(()=>{const V=b.trim().toLowerCase();return[...u].sort((se,Ee)=>{const Ie=se.createdAt?new Date(se.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-Ie}).filter(se=>{const Ee=V===""||se.title?.toLowerCase().includes(V)||se.description?.toLowerCase().includes(V)||se.assignedToName?.toLowerCase().includes(V)||se.createdBy?.toLowerCase().includes(V),Ie=v==="Filter by Status"||se.status===v,pe=w==="Filter by Priority"||se.priority===w;return Ee&&Ie&&pe})},[u,b,v,w]);f.useEffect(()=>{k(1)},[b,v,w,a,T]),f.useEffect(()=>{if(a==="list"){const V=_e.length===0?1:Math.ceil(_e.length/T);_>V&&k(V)}},[_e.length,_,a,T]);const ke=f.useMemo(()=>{if(a==="board")return _e;const V=(_-1)*T;return _e.slice(V,V+T)},[_e,_,a,T]),ze=f.useMemo(()=>{const V=new Date;return[{title:"To Do",value:u.filter(ne=>ne.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ne=>ne.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ne=>ne.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ne=>ne.dueDate&&new Date(ne.dueDate)<V&&ne.status!=="Completed").length,icon:Wu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ne=>ne.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),tt=V=>V.dueDate&&new Date(V.dueDate)<new Date&&V.status!=="Completed",De=V=>{switch(V.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},at=V=>{switch(V){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},et=V=>{switch(V){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ze.map(V=>n.jsx(y7e,{...V},V.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:b,onChange:V=>N(V.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:V=>j(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),p8.map(V=>n.jsx("option",{children:V},V))]}),n.jsxs("select",{value:w,onChange:V=>S(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(_e.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:p8.map(V=>{const ne=ke.filter(se=>se.status===V);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:V}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ne.length})]}),n.jsx("div",{className:`space-y-3 ${ne.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ne.length>0?ne.map(se=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(se)}`,onClick:()=>le(se,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:se.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",se.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",se.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:tt(se)?"text-red-600":"text-gray-600",children:se.dateAssigned?y8(se.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),le(se)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})}),n.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),Oe(se)},className:"text-red-500 hover:text-red-700",children:n.jsx(Gt,{})})]})]},se.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},V)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ke.length>0&&ke.every(V=>H.includes(V.id)),onChange:ge})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:H.length>0?n.jsx("button",{onClick:Ne,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${H.length} selected tasks`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:ke.length>0?ke.map(V=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:ne=>ne.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:H.includes(V.id),onChange:()=>He(V.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>le(V,!0),children:V.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>le(V,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${at(V.status||"Not started")}`,children:V.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>le(V,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${et(V.priority||"Low")}`,children:V.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>le(V,!0),children:V.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${tt(V)?"text-red-600 font-medium":""}`,onClick:()=>le(V,!0),children:V.dateAssigned?y8(V.dateAssigned):""}),n.jsx("td",{})]},V.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:_e.length,pageSize:T,currentPage:_e.length===0?0:_,onPrev:()=>k(V=>Math.max(V-1,1)),onNext:()=>k(V=>Math.min(V+1,Math.max(1,Math.ceil(_e.length/T)||1))),onPageSizeChange:V=>{O(V),k(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Ce,onSave:Se,onEdit:()=>d(!1),setFormData:J,formData:W,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Oe}),$&&n.jsx(b7e,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:he,onCancel:Z,loading:P})]})}function y7e({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function b7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const rJ=e=>e?e.toUpperCase():"",gb=e=>{const t=rJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},v7e=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},w7e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},N7e=e=>{const t=rJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},UA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},j7e=()=>{const e=wt(),t=Zt(),[a]=zs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";f.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=f.useState([]),[l,c]=f.useState(!1),[d,u]=f.useState([]),[h,p]=f.useState(""),[x,b]=f.useState("Filter by Status"),[N,v]=f.useState(!1),[j,w]=f.useState(null),[S,A]=f.useState(1),[E,_]=f.useState(10),[k,T]=f.useState(UA),[O,$]=f.useState(!1),[R,P]=f.useState(null),[I,H]=f.useState(!1),[Q,G]=f.useState(null),[K,W]=f.useState(!1),[J,Te]=f.useState(null);f.useEffect(()=>{const Z=t.state?.openMeetingModal,_e=t.state?.initialMeetingData?.relatedTo||a.get("id"),ke=t.state?.meetingID;Z||_e?(v(!0),t.state?.initialMeetingData&&T(ze=>({...ze,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ke&&(Te(ke),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),f.useEffect(()=>{if(J&&i.length>0&&!l){const Z=i.find(_e=>_e.id===J);Z?w(Z):q.error("Meeting not found."),Te(null)}},[J,i,l]);const ee=async()=>{if(s&&r){const Z=sessionStorage.getItem("meetingDetailData");if(Z)try{const _e=JSON.parse(Z);if(_e.id===parseInt(s)){w(_e),sessionStorage.removeItem("meetingDetailData");return}}catch(_e){console.error(_e)}}c(!0);try{const Z=await te.get("/meetings/admin/fetch-all"),ke=[...Array.isArray(Z.data)?Z.data:[]].sort((ze,tt)=>{const De=ze?.createdAt?new Date(ze.createdAt).getTime():0;return(tt?.createdAt?new Date(tt.createdAt).getTime():0)-De});if(o(ke),s&&!j){const ze=ke.find(tt=>tt.id===parseInt(s));ze&&w(ze)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},U=async()=>{try{const Z=await te.get("/users/all");u(Array.isArray(Z.data)?Z.data:[])}catch(Z){console.error(Z)}};f.useEffect(()=>{ee(),U()},[]);const je=Z=>p(Z.target.value),be=f.useMemo(()=>{const Z=h.trim().toLowerCase(),_e=x.trim().toUpperCase();return i.filter(ke=>{const ze=[ke?.activity,ke?.description,ke?.relatedTo,ke?.assignedTo],tt=Z===""||ze.some(at=>at&&at.toString().toLowerCase().includes(Z)),De=_e==="FILTER BY STATUS"||gb(ke.status||"PENDING")===_e;return tt&&De})},[i,h,x]),le=f.useMemo(()=>{const Z=(S-1)*E;return be.slice(Z,Z+E)},[be,S]),Ce=()=>{v(!1),T(UA),$(!1),P(null),H(!1)},Se=()=>{T(UA),$(!1),P(null),v(!0)},Oe=Z=>{let _e="";if(Z.meet_assign_to?.id)_e=String(Z.meet_assign_to.id);else if(Z.assignedTo){const se=d.find(Ee=>`${Ee.first_name} ${Ee.last_name}`===Z.assignedTo);_e=se?String(se.id):""}const ke=se=>{if(!se)return"";try{const Ee=new Date(se),Ie=Ee.getTimezoneOffset()*6e4;return new Date(Ee.getTime()-Ie).toISOString().slice(0,16)}catch{return""}};let ze="Lead",tt="",De="Contact",at="";if(Z.lead)ze="Lead",tt=String(Z.lead.id);else if(Z.account)ze="Account",tt=String(Z.account.id),Z.contact?(De="Contact",at=String(Z.contact.id)):Z.deal?(De="Deal",at=String(Z.deal.id)):Z.quote&&(De="Quote",at=String(Z.quote.id));else if(Z.relatedType||Z.related_type){const se=Z.relatedType||Z.related_type,Ee=Z.related_to||Z.relatedToId;se==="Lead"?(ze="Lead",tt=String(Ee)):(ze="Account",tt=Z.account_id?String(Z.account_id):"")}const et={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},V=gb(Z.status),ne=et[V]||"Planned";T({subject:Z.subject||Z.activity||"",location:Z.location||"",startTime:ke(Z.start_time||Z.startTime),endTime:ke(Z.end_time||Z.endTime),status:ne,notes:Z.description||Z.notes||"",assignedTo:_e,relatedType1:ze,relatedTo1:tt,relatedType2:De,relatedTo2:at}),$(!0),P(Z.id),w(null),v(!0)},ge=Z=>{if(!Z.subject?.trim())return q.error("Subject is required.");if(!Z.startTime)return q.error("Start time is required.");if(Z.endTime&&!(new Date(Z.endTime)-new Date(Z.startTime)>0))return q.error("End time must be after start time.");Z.relatedType1,Z.relatedTo1,Z.relatedType1==="Account"&&Z.relatedType2&&Z.relatedTo2&&(Z.relatedType2,Z.relatedTo2);const _e={...Z,assignedTo:parseInt(Z.assignedTo),relatedTo1:parseInt(Z.relatedTo1),relatedTo2:parseInt(Z.relatedTo2)},ke=O&&R?"update":"create";G({title:ke==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ke} "${_e.subject}"?`,confirmLabel:ke==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ke,payload:_e,targetId:R,name:_e.subject}})},He=async()=>{if(!Q?.action)return;const{type:Z,payload:_e,targetId:ke,name:ze}=Q.action;W(!0);try{Z==="create"?(H(!0),await te.post("/meetings/create",_e),q.success(`Meeting "${ze}" created.`),Ce(),await ee()):Z==="update"?(H(!0),await te.put(`/meetings/${ke}`,_e),q.success(`Meeting "${ze}" updated.`),Ce(),await ee()):Z==="delete"&&(await te.delete(`/meetings/${ke}`),q.success(`Meeting "${ze}" deleted.`),j?.id===ke&&w(null),await ee())}catch(tt){const De=tt.response?.data?.detail||"Action failed.";q.error(typeof De=="string"?De:JSON.stringify(De)),console.error(De)}finally{H(!1),W(!1),G(null)}},Ne=Z=>{G({title:"Delete Meeting",message:`Permanently delete "${Z.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:Z.id,name:Z.activity}})},he=async(Z,_e)=>{try{await te.put(`/meetings/${Z}`,{status:_e}),q.success("Status updated"),ee(),w(null)}catch{q.error("Failed to update status")}};return r&&s?j?n.jsx(pd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:Oe,onDelete:Ne,onStatusUpdate:he}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Se,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Wt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:je,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:Z=>b(Z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:le.length>0?le.map(Z=>n.jsxs("tr",{onClick:()=>w(Z),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Z.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Z.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Z.lead.title}),Z.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Z.account.name}),Z.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Z.contact.first_name," ",Z.contact.last_name]}),Z.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Z.deal.name}),Z.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:v7e(Z.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:w7e(Z.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Z.meet_assign_to.first_name," ",Z.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N7e(gb(Z.status))}`,children:gb(Z.status).replace("_"," ")})})]},Z.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:be.length,pageSize:E,currentPage:S,onPrev:()=>A(Z=>Math.max(1,Z-1)),onNext:()=>A(Z=>Z+1),onPageSizeChange:Z=>{_(Z),A(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),N&&n.jsx(n1,{onClose:Ce,formData:k,setFormData:T,isEditing:O,onSubmit:ge,isSubmitting:I||K,users:d}),j&&n.jsx(pd,{meeting:j,onClose:()=>w(null),onEdit:Oe,onDelete:Ne,onStatusUpdate:he}),Q&&n.jsx(C7e,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:He,onCancel:()=>G(null),loading:K})]})};function C7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const a1=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],jg={firstName:"",lastName:"",email:"",password:"",role:""},S7e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},jo=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",_7e=e=>{const t=jo(e),a=a1.find(s=>jo(s.value)===t);return a?a.value:e||""},Ik=e=>{const t=jo(e),a=a1.find(s=>jo(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},b8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},BA=(e,{size:t="sm"}={})=>{const a=jo(e),s=S7e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Ik(e)})},A7e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},v8=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function T7e(){const{user:e,loading:t}=en(),[a,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,h]=f.useState(null),[p,x]=f.useState(!1),[b,N]=f.useState(!1),[v,j]=f.useState(null),[w,S]=f.useState(jg),[A,E]=f.useState(!1),[_,k]=f.useState(null),[T,O]=f.useState(!1),[$,R]=f.useState(1),[P,I]=f.useState(10),[H,Q]=f.useState("Overview"),[G,K]=f.useState(""),[W,J]=f.useState(!1),Te=jo(e?.role),ee=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(Te),U=!t&&ee,je=f.useMemo(()=>{const pe=a1.filter(Be=>jo(Be.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...pe]},[]),be=f.useCallback(pe=>{pe&&(s(Be=>Be.map($e=>$e.id===pe?{...$e,highlight:!0}:$e)),setTimeout(()=>{s(Be=>Be.map($e=>$e.id===pe?{...$e,highlight:!1}:$e))},2e3))},[]),le=f.useCallback(async()=>{i(!0);try{const pe=await te.get("/users/all"),Be=Array.isArray(pe.data)?pe.data:[],$e=v8(Be);s($e),h(Ve=>Ve&&($e.find(ve=>ve.id===Ve.id)||null)),console.log(pe.data)}catch(pe){console.error("Error fetching users:",pe);const Be=pe.response?.data?.detail||"Failed to load users. Please try again later.";q.error(Be)}finally{i(!1)}},[]);f.useEffect(()=>{!t&&!ee&&e&&q.error("You are not authorized to access User Management.")},[ee,t,e]),f.useEffect(()=>{t||!ee||le()},[t,ee,le]),f.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Ce=f.useMemo(()=>{const pe=o.trim().toLowerCase(),Be=jo(c);return v8(a.filter($e=>{if(!$e)return!1;const Ve=pe===""||[$e.first_name,$e.last_name,`${$e.first_name||""} ${$e.last_name||""}`,$e.email,Ik($e.role)].filter(Boolean).some(ve=>ve.toString().toLowerCase().includes(pe)),ut=Be===""||Be==="CEO"&&["CEO","ADMIN"].includes(jo($e.role))||jo($e.role)===Be;return Ve&&ut}))},[a,o,c]),Se=Math.max(1,Math.ceil(Ce.length/P)||1);f.useEffect(()=>{R(1)},[o,c]),f.useEffect(()=>{R(pe=>{const Be=Math.max(1,Math.ceil(Ce.length/P)||1);return pe>Be?Be:pe})},[Ce.length]);const Oe=f.useMemo(()=>{const pe=($-1)*P;return Ce.slice(pe,pe+P)},[Ce,$]);Ce.length===0||($-1)*P+1,Math.min($*P,Ce.length);const ge=()=>R(pe=>Math.max(pe-1,1)),He=()=>R(pe=>Math.min(pe+1,Se)),Ne=()=>{S(jg),N(!1),j(null),x(!0)},he=pe=>{console.log(pe),h(pe),Q("Overview"),K(pe?.is_active?"Active":"Inactive")},Z=pe=>{pe.target.id==="userModalBackdrop"&&!T&&_e()},_e=()=>{h(null)},ke=(pe,Be)=>{S($e=>({...$e,[pe]:Be}))},ze=()=>{const pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Be="";for(let $e=0;$e<10;$e+=1)Be+=pe.charAt(Math.floor(Math.random()*pe.length));ke("password",Be)},tt=()=>{A||T||(x(!1),S(jg),j(null),N(!1))},De=pe=>{S({firstName:pe.first_name||"",lastName:pe.last_name||"",email:pe.email||"",password:"",role:_7e(pe.role)}),N(!0),j(pe.id),x(!0),h(null)},at=pe=>{k({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[pe.first_name," ",pe.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:pe.id,name:`${pe.first_name||""} ${pe.last_name||""}`.trim()||pe.email||"user"}})},et=pe=>{pe.preventDefault();const Be=w.firstName.trim(),$e=w.lastName.trim(),Ve=w.email.trim(),ut=w.password.trim(),ve="Sales",ae=!(b&&v);if(!Be||!Ve||!ve){q.warn("Please fill in all required fields.");return}if(ae&&!ut){q.warn("Please fill in all required fields.");return}if(ut&&ut.length<8){q.warn("Password should be at least 8 characters long.");return}const Fe={first_name:Be,last_name:$e,email:Ve,role:ve};console.log(Fe),(ae||ut)&&(Fe.password=ut);const ye=`${Be} ${$e}`.trim(),We=ae?"create":"update";k({title:We==="create"?"Confirm New User":"Confirm User Update",message:We==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:ye})," with role"," ",n.jsx("span",{className:"font-semibold",children:Ik(ve)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:ye||Ve}),"?"]}),confirmLabel:We==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:We,payload:Fe,targetId:v,name:ye||Ve}})},V=async()=>{if(!_?.action){k(null);return}const{action:pe}=_,{type:Be,payload:$e,targetId:Ve,name:ut}=pe;O(!0),(Be==="create"||Be==="update")&&E(!0);try{if(Be==="create"){const ae=(await te.post("/users/createuser",$e)).data;await le(),be(ae.id),q.success(`User "${ut}" created successfully.`),x(!1),S(jg),j(null),N(!1)}else if(Be==="update"){if(!Ve)throw new Error("Missing user identifier for update.");const ae=(await te.put(`/users/updateuser/${Ve}`,$e)).data;await le(),h(null),be(ae.id),q.success(`User "${ut}" updated successfully.`),x(!1),S(jg),j(null),N(!1)}else if(Be==="delete"){if(!Ve)throw new Error("Missing user identifier for deletion.");await te.delete(`/users/deleteuser/${Ve}`),s(ve=>ve.map(ae=>ae.id===Ve?{...ae,is_active:!1}:ae)),u&&u.id===Ve&&(h(null),K("")),q.success(`User "${ut}" deactivated successfully.`)}}catch(ve){console.error("User management error:",ve);const ae=Be==="create"?"Failed to create user. Please review the details and try again.":Be==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Fe=ve.response?.data?.detail||ae;q.error(Fe)}finally{(Be==="create"||Be==="update")&&E(!1),O(!1),k(null)}},ne=()=>{T||k(null)},se=async()=>{if(!u||!G)return;const pe=u.is_active?"Active":"Inactive";if(G===pe)return;const Be=G==="Active";J(!0);try{const Ve=(await te.put(`/users/updateuser/${u.id}`,{is_active:Be})).data;s(ut=>ut.map(ve=>ve.id===Ve.id?Ve:ve)),h(null),K(""),q.success(`User status updated to ${G}`)}catch($e){console.error("Failed to update user status:",$e);const Ve=$e.response?.data?.detail||"Failed to update user status. Please try again.";q.error(Ve)}finally{J(!1)}},Ee=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!U)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ww,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Ne,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Qn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:pe=>l(pe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:pe=>d(pe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:je.map(pe=>n.jsx("option",{value:pe.value,children:pe.label},pe.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Ce.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Oe.map(pe=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${pe.highlight?"bg-green-50":""} ${pe.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(pe),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[pe.first_name," ",pe.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>he(pe),children:pe.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(pe),children:BA(pe.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(pe),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${pe.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:pe.is_active?"Active":"Inactive"})})]},pe.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ce.length,pageSize:P,currentPage:$,onPrev:ge,onNext:He,onPageSizeChange:pe=>{I(pe),R(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),Ie=u?n.jsx("div",{id:"userModalBackdrop",onClick:Z,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:_e,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:A7e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),BA(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>De(u),disabled:T,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>at(u),disabled:T,children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(pe=>n.jsx("button",{onClick:()=>Q(pe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${H===pe?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:pe},pe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:H==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:BA(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,pe=>pe.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:b8(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?b8(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const pe=encodeURIComponent(u.email),Be=encodeURIComponent(""),$e=encodeURIComponent(""),Ve=`https://mail.google.com/mail/?view=cm&fs=1&to=${pe}&su=${Be}&body=${$e}`;window.open(Ve,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:G||(u.is_active?"Active":"Inactive"),onChange:pe=>K(pe.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:se,disabled:W||G===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||G===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Ee,Ie,n.jsx(E7e,{open:p,isEditing:b,isSubmitting:A,confirmProcessing:T,formData:w,onClose:tt,onSubmit:et,onChange:ke,onGeneratePassword:ze}),n.jsx(k7e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:V,onCancel:ne})]})}function E7e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(pb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(pb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(pb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(pb,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...a1],required:!0}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function pb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function k7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function L7e({toggleSidebar:e}){const[t,a]=f.useState(!1),s=f.useRef(null),r=Zt(),{logout:i}=Qs(),{user:o,fetchUser:l}=en(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};f.useEffect(()=>{l()},[]);const d=c[r.pathname]||"Marketing Panel";return f.useEffect(()=>{function u(h){s.current&&!s.current.contains(h.target)&&a(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ox,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:d})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(rx,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:o?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),n.jsx("div",{className:"border-t my-1"}),n.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function P7e(){const[e,t]=f.useState(!1),[a,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),c=Zt(),{fetchUser:d}=en();f.useEffect(()=>{d()},[]),f.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],b=["/marketing/tasks"],N=p.includes(c.pathname),v=x.includes(c.pathname),j=b.includes(c.pathname);return f.useEffect(()=>{N&&t(!0),v&&s(!0),j&&i(!0)},[N,v,j]),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsxs($t,{to:"/marketing/dashboard",className:({isActive:w})=>w?u:h,children:[n.jsx(ix,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/marketing/accounts",className:({isActive:w})=>w?u:h,children:[n.jsx(aa,{})," Accounts"]}),n.jsxs($t,{to:"/marketing/contacts",className:({isActive:w})=>w?u:h,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/marketing/leads",className:({isActive:w})=>w?u:h,children:[n.jsx(Qn,{})," Leads"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(lr,{className:"text-lg"}),"Tools"]}),n.jsx(Tt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/marketing/campaigns",className:({isActive:w})=>w?u:h,children:[n.jsx(OT,{})," Campaign"]}),n.jsxs($t,{to:"/marketing/templates",className:({isActive:w})=>w?u:h,children:[n.jsx(nL,{})," Templates"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsx("div",{className:"ml-6 mt-2 space-y-1",children:n.jsxs($t,{to:"/marketing/tasks",className:({isActive:w})=>w?u:h,children:[n.jsx(Yt,{})," Tasks"]})})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(L7e,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}function d0(e){return e+.5|0}const Jc=(e,t,a)=>Math.max(Math.min(e,a),t);function qg(e){return Jc(d0(e*2.55),0,255)}function id(e){return Jc(d0(e*255),0,255)}function jl(e){return Jc(d0(e/2.55)/100,0,1)}function w8(e){return Jc(d0(e*100),0,100)}const ri={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$k=[..."0123456789ABCDEF"],D7e=e=>$k[e&15],O7e=e=>$k[(e&240)>>4]+$k[e&15],xb=e=>(e&240)>>4===(e&15),M7e=e=>xb(e.r)&&xb(e.g)&&xb(e.b)&&xb(e.a);function I7e(e){var t=e.length,a;return e[0]==="#"&&(t===4||t===5?a={r:255&ri[e[1]]*17,g:255&ri[e[2]]*17,b:255&ri[e[3]]*17,a:t===5?ri[e[4]]*17:255}:(t===7||t===9)&&(a={r:ri[e[1]]<<4|ri[e[2]],g:ri[e[3]]<<4|ri[e[4]],b:ri[e[5]]<<4|ri[e[6]],a:t===9?ri[e[7]]<<4|ri[e[8]]:255})),a}const $7e=(e,t)=>e<255?t(e):"";function R7e(e){var t=M7e(e)?D7e:O7e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+$7e(e.a,t):void 0}const z7e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function iJ(e,t,a){const s=t*Math.min(a,1-a),r=(i,o=(i+e/30)%12)=>a-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function F7e(e,t,a){const s=(r,i=(r+e/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function U7e(e,t,a){const s=iJ(e,1,.5);let r;for(t+a>1&&(r=1/(t+a),t*=r,a*=r),r=0;r<3;r++)s[r]*=1-t-a,s[r]+=t;return s}function B7e(e,t,a,s,r){return e===r?(t-a)/s+(t<a?6:0):t===r?(a-e)/s+2:(e-t)/s+4}function $D(e){const a=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(a,s,r),o=Math.min(a,s,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=B7e(a,s,r,u,i),c=c*60+.5),[c|0,d||0,l]}function RD(e,t,a,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,a,s)).map(id)}function zD(e,t,a){return RD(iJ,e,t,a)}function H7e(e,t,a){return RD(U7e,e,t,a)}function q7e(e,t,a){return RD(F7e,e,t,a)}function oJ(e){return(e%360+360)%360}function W7e(e){const t=z7e.exec(e);let a=255,s;if(!t)return;t[5]!==s&&(a=t[6]?qg(+t[5]):id(+t[5]));const r=oJ(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=H7e(r,i,o):t[1]==="hsv"?s=q7e(r,i,o):s=zD(r,i,o),{r:s[0],g:s[1],b:s[2],a}}function G7e(e,t){var a=$D(e);a[0]=oJ(a[0]+t),a=zD(a),e.r=a[0],e.g=a[1],e.b=a[2]}function V7e(e){if(!e)return;const t=$D(e),a=t[0],s=w8(t[1]),r=w8(t[2]);return e.a<255?`hsla(${a}, ${s}%, ${r}%, ${jl(e.a)})`:`hsl(${a}, ${s}%, ${r}%)`}const N8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},j8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Y7e(){const e={},t=Object.keys(j8),a=Object.keys(N8);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<a.length;r++)i=a[r],l=l.replace(i,N8[i]);i=parseInt(j8[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let yb;function Q7e(e){yb||(yb=Y7e(),yb.transparent=[0,0,0,0]);const t=yb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const K7e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function X7e(e){const t=K7e.exec(e);let a=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];a=t[8]?qg(o):Jc(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?qg(s):Jc(s,0,255)),r=255&(t[4]?qg(r):Jc(r,0,255)),i=255&(t[6]?qg(i):Jc(i,0,255)),{r:s,g:r,b:i,a}}}function Z7e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${jl(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const HA=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Zm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function J7e(e,t,a){const s=Zm(jl(e.r)),r=Zm(jl(e.g)),i=Zm(jl(e.b));return{r:id(HA(s+a*(Zm(jl(t.r))-s))),g:id(HA(r+a*(Zm(jl(t.g))-r))),b:id(HA(i+a*(Zm(jl(t.b))-i))),a:e.a+a*(t.a-e.a)}}function bb(e,t,a){if(e){let s=$D(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*a,t===0?360:1)),s=zD(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function lJ(e,t){return e&&Object.assign(t||{},e)}function C8(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=id(e[3]))):(t=lJ(e,{r:0,g:0,b:0,a:1}),t.a=id(t.a)),t}function e8e(e){return e.charAt(0)==="r"?X7e(e):W7e(e)}class Up{constructor(t){if(t instanceof Up)return t;const a=typeof t;let s;a==="object"?s=C8(t):a==="string"&&(s=I7e(t)||Q7e(t)||e8e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=lJ(this._rgb);return t&&(t.a=jl(t.a)),t}set rgb(t){this._rgb=C8(t)}rgbString(){return this._valid?Z7e(this._rgb):void 0}hexString(){return this._valid?R7e(this._rgb):void 0}hslString(){return this._valid?V7e(this._rgb):void 0}mix(t,a){if(t){const s=this.rgb,r=t.rgb;let i;const o=a===i?.5:a,l=2*o-1,c=s.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*r.r+.5,s.g=255&d*s.g+i*r.g+.5,s.b=255&d*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,a){return t&&(this._rgb=J7e(this._rgb,t._rgb,a)),this}clone(){return new Up(this.rgb)}alpha(t){return this._rgb.a=id(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=d0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return bb(this._rgb,2,t),this}darken(t){return bb(this._rgb,2,-t),this}saturate(t){return bb(this._rgb,1,t),this}desaturate(t){return bb(this._rgb,1,-t),this}rotate(t){return G7e(this._rgb,t),this}}function yl(){}const t8e=(()=>{let e=0;return()=>e++})();function Ln(e){return e==null}function ns(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function jn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function wi(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function mo(e,t){return wi(e)?e:t}function dn(e,t){return typeof e>"u"?t:e}const n8e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,cJ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ea(e,t,a){if(e&&typeof e.call=="function")return e.apply(a,t)}function In(e,t,a,s){let r,i,o;if(ns(e))for(i=e.length,r=0;r<i;r++)t.call(a,e[r],r);else if(jn(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(a,e[o[r]],o[r])}function Cw(e,t){let a,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;++a)if(r=e[a],i=t[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Sw(e){if(ns(e))return e.map(Sw);if(jn(e)){const t=Object.create(null),a=Object.keys(e),s=a.length;let r=0;for(;r<s;++r)t[a[r]]=Sw(e[a[r]]);return t}return e}function dJ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function a8e(e,t,a,s){if(!dJ(e))return;const r=t[e],i=a[e];jn(r)&&jn(i)?Bp(r,i,s):t[e]=Sw(i)}function Bp(e,t,a){const s=ns(t)?t:[t],r=s.length;if(!jn(e))return e;a=a||{};const i=a.merger||a8e;let o;for(let l=0;l<r;++l){if(o=s[l],!jn(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],e,o,a)}return e}function ap(e,t){return Bp(e,t,{merger:s8e})}function s8e(e,t,a){if(!dJ(e))return;const s=t[e],r=a[e];jn(s)&&jn(r)?ap(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Sw(r))}const S8={"":e=>e,x:e=>e.x,y:e=>e.y};function r8e(e){const t=e.split("."),a=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}function i8e(e){const t=r8e(e);return a=>{for(const s of t){if(s==="")break;a=a&&a[s]}return a}}function Hu(e,t){return(S8[t]||(S8[t]=i8e(t)))(e)}function FD(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Hp=e=>typeof e<"u",xd=e=>typeof e=="function",_8=(e,t)=>{if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0};function o8e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Rn=Math.PI,Sa=2*Rn,l8e=Sa+Rn,_w=Number.POSITIVE_INFINITY,c8e=Rn/180,as=Rn/2,Wd=Rn/4,A8=Rn*2/3,uJ=Math.log10,Do=Math.sign;function sp(e,t,a){return Math.abs(e-t)<a}function T8(e){const t=Math.round(e);e=sp(e,t,e/1e3)?t:e;const a=Math.pow(10,Math.floor(uJ(e))),s=e/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function d8e(e){const t=[],a=Math.sqrt(e);let s;for(s=1;s<a;s++)e%s===0&&(t.push(s),t.push(e/s));return a===(a|0)&&t.push(a),t.sort((r,i)=>r-i).pop(),t}function u8e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function qp(e){return!u8e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function m8e(e,t){const a=Math.round(e);return a-t<=e&&a+t>=e}function f8e(e,t,a){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function El(e){return e*(Rn/180)}function h8e(e){return e*(180/Rn)}function E8(e){if(!wi(e))return;let t=1,a=0;for(;Math.round(e*t)/t!==e;)t*=10,a++;return a}function mJ(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.sqrt(a*a+s*s);let i=Math.atan2(s,a);return i<-.5*Rn&&(i+=Sa),{angle:i,distance:r}}function Rk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function g8e(e,t){return(e-t+l8e)%Sa-Rn}function Ri(e){return(e%Sa+Sa)%Sa}function Wp(e,t,a,s){const r=Ri(e),i=Ri(t),o=Ri(a),l=Ri(i-r),c=Ri(o-r),d=Ri(r-i),u=Ri(r-o);return r===i||r===o||s&&i===o||l>c&&d<u}function Os(e,t,a){return Math.max(t,Math.min(a,e))}function p8e(e){return Os(e,-32768,32767)}function ed(e,t,a,s=1e-6){return e>=Math.min(t,a)-s&&e<=Math.max(t,a)+s}function UD(e,t,a){a=a||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,a(i)?r=i:s=i;return{lo:r,hi:s}}const fu=(e,t,a,s)=>UD(e,a,s?r=>{const i=e[r][t];return i<a||i===a&&e[r+1][t]===a}:r=>e[r][t]<a),x8e=(e,t,a)=>UD(e,a,s=>e[s][t]>=a);function y8e(e,t,a){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>a;)r--;return s>0||r<e.length?e.slice(s,r):e}const fJ=["push","pop","shift","splice","unshift"];function b8e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),fJ.forEach(a=>{const s="_onData"+FD(a),r=e[a];Object.defineProperty(e,a,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function k8(e,t){const a=e._chartjs;if(!a)return;const s=a.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(fJ.forEach(i=>{delete e[i]}),delete e._chartjs)}function hJ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const gJ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function pJ(e,t){let a=[],s=!1;return function(...r){a=r,s||(s=!0,gJ.call(window,()=>{s=!1,e.apply(t,a)}))}}function v8e(e,t){let a;return function(...s){return t?(clearTimeout(a),a=setTimeout(e,t,s)):e.apply(this,s),t}}const BD=e=>e==="start"?"left":e==="end"?"right":"center",ks=(e,t,a)=>e==="start"?t:e==="end"?a:(t+a)/2,w8e=(e,t,a,s)=>e===(s?"left":"right")?a:e==="center"?(t+a)/2:t;function N8e(e,t,a){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:h,max:p,minDefined:x,maxDefined:b}=o.getUserBounds();if(x){if(r=Math.min(fu(c,u,h).lo,a?s:fu(t,u,o.getPixelForValue(h)).lo),d){const N=c.slice(0,r+1).reverse().findIndex(v=>!Ln(v[l.axis]));r-=Math.max(0,N)}r=Os(r,0,s-1)}if(b){let N=Math.max(fu(c,o.axis,p,!0).hi+1,a?0:fu(t,u,o.getPixelForValue(p),!0).hi+1);if(d){const v=c.slice(N-1).findIndex(j=>!Ln(j[l.axis]));N+=Math.max(0,v)}i=Os(N,r,s)-r}else i=s-r}return{start:r,count:i}}function j8e(e){const{xScale:t,yScale:a,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==a.min||s.ymax!==a.max;return Object.assign(s,r),i}const vb=e=>e===0||e===1,L8=(e,t,a)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Sa/a)),P8=(e,t,a)=>Math.pow(2,-10*e)*Math.sin((e-t)*Sa/a)+1,rp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*as)+1,easeOutSine:e=>Math.sin(e*as),easeInOutSine:e=>-.5*(Math.cos(Rn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>vb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>vb(e)?e:L8(e,.075,.3),easeOutElastic:e=>vb(e)?e:P8(e,.075,.3),easeInOutElastic(e){return vb(e)?e:e<.5?.5*L8(e*2,.1125,.45):.5+.5*P8(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-rp.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?rp.easeInBounce(e*2)*.5:rp.easeOutBounce(e*2-1)*.5+.5};function HD(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function D8(e){return HD(e)?e:new Up(e)}function qA(e){return HD(e)?e:new Up(e).saturate(.5).darken(.1).hexString()}const C8e=["x","y","borderWidth","radius","tension"],S8e=["color","borderColor","backgroundColor"];function _8e(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:S8e},numbers:{type:"number",properties:C8e}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function A8e(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const O8=new Map;function T8e(e,t){t=t||{};const a=e+JSON.stringify(t);let s=O8.get(a);return s||(s=new Intl.NumberFormat(e,t),O8.set(a,s)),s}function qD(e,t,a){return T8e(t,a).format(e)}const E8e={values(e){return ns(e)?e:""+e},numeric(e,t,a){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(a.length>1){const d=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=k8e(e,a)}const o=uJ(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),qD(e,s,c)}};function k8e(e,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e)),a}var xJ={formatters:E8e};function L8e(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xJ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const qu=Object.create(null),zk=Object.create(null);function ip(e,t){if(!t)return e;const a=t.split(".");for(let s=0,r=a.length;s<r;++s){const i=a[s];e=e[i]||(e[i]=Object.create(null))}return e}function WA(e,t,a){return typeof t=="string"?Bp(ip(e,t),a):Bp(ip(e,""),t)}class P8e{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>qA(r.backgroundColor),this.hoverBorderColor=(s,r)=>qA(r.borderColor),this.hoverColor=(s,r)=>qA(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return WA(this,t,a)}get(t){return ip(this,t)}describe(t,a){return WA(zk,t,a)}override(t,a){return WA(qu,t,a)}route(t,a,s,r){const i=ip(this,t),o=ip(this,s),l="_"+a;Object.defineProperties(i,{[l]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[l],d=o[r];return jn(c)?Object.assign({},d,c):dn(c,d)},set(c){this[l]=c}}})}apply(t){t.forEach(a=>a(this))}}var Pa=new P8e({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_8e,A8e,L8e]);function D8e(e){return!e||Ln(e.size)||Ln(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function M8(e,t,a,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>s&&(s=i),s}function Gd(e,t,a){const s=e.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((t-r)*s)/s+r}function I8(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Fk(e,t,a,s){yJ(e,t,a,s,null)}function yJ(e,t,a,s,r){let i,o,l,c,d,u,h,p;const x=t.pointStyle,b=t.rotation,N=t.radius;let v=(b||0)*c8e;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(a,s),e.rotate(v),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(N)||N<=0)){switch(e.beginPath(),x){default:r?e.ellipse(a,s,r/2,N,0,0,Sa):e.arc(a,s,N,0,Sa),e.closePath();break;case"triangle":u=r?r/2:N,e.moveTo(a+Math.sin(v)*u,s-Math.cos(v)*N),v+=A8,e.lineTo(a+Math.sin(v)*u,s-Math.cos(v)*N),v+=A8,e.lineTo(a+Math.sin(v)*u,s-Math.cos(v)*N),e.closePath();break;case"rectRounded":d=N*.516,c=N-d,o=Math.cos(v+Wd)*c,h=Math.cos(v+Wd)*(r?r/2-d:c),l=Math.sin(v+Wd)*c,p=Math.sin(v+Wd)*(r?r/2-d:c),e.arc(a-h,s-l,d,v-Rn,v-as),e.arc(a+p,s-o,d,v-as,v),e.arc(a+h,s+l,d,v,v+as),e.arc(a-p,s+o,d,v+as,v+Rn),e.closePath();break;case"rect":if(!b){c=Math.SQRT1_2*N,u=r?r/2:c,e.rect(a-u,s-c,2*u,2*c);break}v+=Wd;case"rectRot":h=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-h,s-l),e.lineTo(a+p,s-o),e.lineTo(a+h,s+l),e.lineTo(a-p,s+o),e.closePath();break;case"crossRot":v+=Wd;case"cross":h=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-h,s-l),e.lineTo(a+h,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"star":h=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-h,s-l),e.lineTo(a+h,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o),v+=Wd,h=Math.cos(v)*(r?r/2:N),o=Math.cos(v)*N,l=Math.sin(v)*N,p=Math.sin(v)*(r?r/2:N),e.moveTo(a-h,s-l),e.lineTo(a+h,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"line":o=r?r/2:Math.cos(v)*N,l=Math.sin(v)*N,e.moveTo(a-o,s-l),e.lineTo(a+o,s+l);break;case"dash":e.moveTo(a,s),e.lineTo(a+Math.cos(v)*(r?r/2:N),s+Math.sin(v)*N);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Gp(e,t,a){return a=a||.5,!t||e&&e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a}function WD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function GD(e){e.restore()}function O8e(e,t,a,s,r){if(!t)return e.lineTo(a.x,a.y);if(r==="middle"){const i=(t.x+a.x)/2;e.lineTo(i,t.y),e.lineTo(i,a.y)}else r==="after"!=!!s?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}function M8e(e,t,a,s){if(!t)return e.lineTo(a.x,a.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function I8e(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ln(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function $8e(e,t,a,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,d=a+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(l,u),e.stroke()}}function R8e(e,t){const a=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=a}function Vp(e,t,a,s,r,i={}){const o=ns(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=r.string,I8e(e,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&R8e(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Ln(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,a,s,i.maxWidth)),e.fillText(d,a,s,i.maxWidth),$8e(e,a,s,d,i),s+=Number(r.lineHeight);e.restore()}function Aw(e,t){const{x:a,y:s,w:r,h:i,radius:o}=t;e.arc(a+o.topLeft,s+o.topLeft,o.topLeft,1.5*Rn,Rn,!0),e.lineTo(a,s+i-o.bottomLeft),e.arc(a+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Rn,as,!0),e.lineTo(a+r-o.bottomRight,s+i),e.arc(a+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,as,0,!0),e.lineTo(a+r,s+o.topRight),e.arc(a+r-o.topRight,s+o.topRight,o.topRight,0,-as,!0),e.lineTo(a+o.topLeft,s)}const z8e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,F8e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function U8e(e,t){const a=(""+e).match(z8e);if(!a||a[1]==="normal")return t*1.2;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return t*e}const B8e=e=>+e||0;function VD(e,t){const a={},s=jn(t),r=s?Object.keys(t):t,i=jn(e)?s?o=>dn(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)a[o]=B8e(i(o));return a}function bJ(e){return VD(e,{top:"y",right:"x",bottom:"y",left:"x"})}function bf(e){return VD(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ni(e){const t=bJ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ms(e,t){e=e||{},t=t||Pa.font;let a=dn(e.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let s=dn(e.style,t.style);s&&!(""+s).match(F8e)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:dn(e.family,t.family),lineHeight:U8e(dn(e.lineHeight,t.lineHeight),a),size:a,style:s,weight:dn(e.weight,t.weight),string:""};return r.string=D8e(r),r}function wb(e,t,a,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function H8e(e,t,a){const{min:s,max:r}=e,i=cJ(t,(r-s)/2),o=(l,c)=>a&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function am(e,t){return Object.assign(Object.create(e),t)}function YD(e,t=[""],a,s,r=()=>e[0]){const i=a||e;typeof s>"u"&&(s=jJ("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>YD([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return wJ(l,c,()=>X8e(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return R8(l).includes(c)},ownKeys(l){return R8(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function zf(e,t,a,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:a,_stack:new Set,_descriptors:vJ(e,s),setContext:i=>zf(e,i,a,s),override:i=>zf(e.override(i),t,a,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return wJ(i,o,()=>W8e(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function vJ(e,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:a,indexable:s,isScriptable:xd(a)?a:()=>a,isIndexable:xd(s)?s:()=>s}}const q8e=(e,t)=>e?e+FD(t):t,QD=(e,t)=>jn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function wJ(e,t,a){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=a();return e[t]=s,s}function W8e(e,t,a){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return xd(l)&&o.isScriptable(t)&&(l=G8e(t,l,e,a)),ns(l)&&l.length&&(l=V8e(t,l,e,o.isIndexable)),QD(t,l)&&(l=zf(l,r,i&&i[t],o)),l}function G8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=a;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),QD(e,c)&&(c=KD(r._scopes,r,e,c)),c}function V8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=a;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(jn(t[0])){const c=t,d=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const h=KD(d,r,e,u);t.push(zf(h,i,o&&o[e],l))}}return t}function NJ(e,t,a){return xd(e)?e(t,a):e}const Y8e=(e,t)=>e===!0?t:typeof e=="string"?Hu(t,e):void 0;function Q8e(e,t,a,s,r){for(const i of t){const o=Y8e(a,i);if(o){e.add(o);const l=NJ(o._fallback,a,r);if(typeof l<"u"&&l!==a&&l!==s)return l}else if(o===!1&&typeof s<"u"&&a!==s)return null}return!1}function KD(e,t,a,s){const r=t._rootScopes,i=NJ(t._fallback,a,s),o=[...e,...r],l=new Set;l.add(s);let c=$8(l,o,a,i||a,s);return c===null||typeof i<"u"&&i!==a&&(c=$8(l,o,i,c,s),c===null)?!1:YD(Array.from(l),[""],r,i,()=>K8e(t,a,s))}function $8(e,t,a,s,r){for(;a;)a=Q8e(e,t,a,s,r);return a}function K8e(e,t,a){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return ns(r)&&jn(a)?a:r||{}}function X8e(e,t,a,s){let r;for(const i of t)if(r=jJ(q8e(i,e),a),typeof r<"u")return QD(e,r)?KD(a,s,e,r):r}function jJ(e,t){for(const a of t){if(!a)continue;const s=a[e];if(typeof s<"u")return s}}function R8(e){let t=e._keys;return t||(t=e._keys=Z8e(e._scopes)),t}function Z8e(e){const t=new Set;for(const a of e)for(const s of Object.keys(a).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const J8e=Number.EPSILON||1e-14,Ff=(e,t)=>t<e.length&&!e[t].skip&&e[t],CJ=e=>e==="x"?"y":"x";function eBe(e,t,a,s){const r=e.skip?t:e,i=t,o=a.skip?t:a,l=Rk(i,r),c=Rk(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=s*d,p=s*u;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function tBe(e,t,a){const s=e.length;let r,i,o,l,c,d=Ff(e,0);for(let u=0;u<s-1;++u)if(c=d,d=Ff(e,u+1),!(!c||!d)){if(sp(t[u],0,J8e)){a[u]=a[u+1]=0;continue}r=a[u]/t[u],i=a[u+1]/t[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),a[u]=r*o*t[u],a[u+1]=i*o*t[u])}}function nBe(e,t,a="x"){const s=CJ(a),r=e.length;let i,o,l,c=Ff(e,0);for(let d=0;d<r;++d){if(o=l,l=c,c=Ff(e,d+1),!l)continue;const u=l[a],h=l[s];o&&(i=(u-o[a])/3,l[`cp1${a}`]=u-i,l[`cp1${s}`]=h-i*t[d]),c&&(i=(c[a]-u)/3,l[`cp2${a}`]=u+i,l[`cp2${s}`]=h+i*t[d])}}function aBe(e,t="x"){const a=CJ(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,l,c,d=Ff(e,0);for(o=0;o<s;++o)if(l=c,c=d,d=Ff(e,o+1),!!c){if(d){const u=d[t]-c[t];r[o]=u!==0?(d[a]-c[a])/u:0}i[o]=l?d?Do(r[o-1])!==Do(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}tBe(e,r,i),nBe(e,i,t)}function Nb(e,t,a){return Math.max(Math.min(e,a),t)}function sBe(e,t){let a,s,r,i,o,l=Gp(e[0],t);for(a=0,s=e.length;a<s;++a)o=i,i=l,l=a<s-1&&Gp(e[a+1],t),i&&(r=e[a],o&&(r.cp1x=Nb(r.cp1x,t.left,t.right),r.cp1y=Nb(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=Nb(r.cp2x,t.left,t.right),r.cp2y=Nb(r.cp2y,t.top,t.bottom)))}function rBe(e,t,a,s,r){let i,o,l,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")aBe(e,r);else{let d=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=eBe(d,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}t.capBezierPoints&&sBe(e,a)}function XD(){return typeof window<"u"&&typeof document<"u"}function ZD(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Tw(e,t,a){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[a])):s=e,s}const s1=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function iBe(e,t){return s1(e).getPropertyValue(t)}const oBe=["top","right","bottom","left"];function Nu(e,t,a){const s={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=oBe[r];s[i]=parseFloat(e[t+"-"+i+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const lBe=(e,t,a)=>(e>0||t>0)&&(!a||!a.shadowRoot);function cBe(e,t){const a=e.touches,s=a&&a.length?a[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(lBe(r,i,e.target))l=r,c=i;else{const d=t.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function eu(e,t){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:s}=t,r=s1(a),i=r.boxSizing==="border-box",o=Nu(r,"padding"),l=Nu(r,"border","width"),{x:c,y:d,box:u}=cBe(e,a),h=o.left+(u&&l.left),p=o.top+(u&&l.top);let{width:x,height:b}=t;return i&&(x-=o.width+l.width,b-=o.height+l.height),{x:Math.round((c-h)/x*a.width/s),y:Math.round((d-p)/b*a.height/s)}}function dBe(e,t,a){let s,r;if(t===void 0||a===void 0){const i=e&&ZD(e);if(!i)t=e.clientWidth,a=e.clientHeight;else{const o=i.getBoundingClientRect(),l=s1(i),c=Nu(l,"border","width"),d=Nu(l,"padding");t=o.width-d.width-c.width,a=o.height-d.height-c.height,s=Tw(l.maxWidth,i,"clientWidth"),r=Tw(l.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:s||_w,maxHeight:r||_w}}const td=e=>Math.round(e*10)/10;function uBe(e,t,a,s){const r=s1(e),i=Nu(r,"margin"),o=Tw(r.maxWidth,e,"clientWidth")||_w,l=Tw(r.maxHeight,e,"clientHeight")||_w,c=dBe(e,t,a);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const p=Nu(r,"border","width"),x=Nu(r,"padding");d-=x.width+p.width,u-=x.height+p.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=td(Math.min(d,o,c.maxWidth)),u=td(Math.min(u,l,c.maxHeight)),d&&!u&&(u=td(d/2)),(t!==void 0||a!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=td(Math.floor(u*s))),{width:d,height:u}}function z8(e,t,a){const s=t||1,r=td(e.height*s),i=td(e.width*s);e.height=td(e.height),e.width=td(e.width);const o=e.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const mBe=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};XD()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function F8(e,t){const a=iBe(e,t),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function tu(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}}function fBe(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:s==="middle"?a<.5?e.y:t.y:s==="after"?a<1?e.y:t.y:a>0?t.y:e.y}}function hBe(e,t,a,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=tu(e,r,a),l=tu(r,i,a),c=tu(i,t,a),d=tu(o,l,a),u=tu(l,c,a);return tu(d,u,a)}const gBe=function(e,t){return{x(a){return e+e+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,s){return a-s},leftForLtr(a,s){return a-s}}},pBe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function vf(e,t,a){return e?gBe(t,a):pBe()}function SJ(e,t){let a,s;(t==="ltr"||t==="rtl")&&(a=e.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=s)}function _J(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function AJ(e){return e==="angle"?{between:Wp,compare:g8e,normalize:Ri}:{between:ed,compare:(t,a)=>t-a,normalize:t=>t}}function U8({start:e,end:t,count:a,loop:s,style:r}){return{start:e%a,end:t%a,loop:s&&(t-e+1)%a===0,style:r}}function xBe(e,t,a){const{property:s,start:r,end:i}=a,{between:o,normalize:l}=AJ(s),c=t.length;let{start:d,end:u,loop:h}=e,p,x;if(h){for(d+=c,u+=c,p=0,x=c;p<x&&o(l(t[d%c][s]),r,i);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:e.style}}function yBe(e,t,a){if(!a)return[e];const{property:s,start:r,end:i}=a,o=t.length,{compare:l,between:c,normalize:d}=AJ(s),{start:u,end:h,loop:p,style:x}=xBe(e,t,a),b=[];let N=!1,v=null,j,w,S;const A=()=>c(r,S,j)&&l(r,S)!==0,E=()=>l(i,j)===0||c(i,S,j),_=()=>N||A(),k=()=>!N||E();for(let T=u,O=u;T<=h;++T)w=t[T%o],!w.skip&&(j=d(w[s]),j!==S&&(N=c(j,r,i),v===null&&_()&&(v=l(j,r)===0?T:O),v!==null&&k()&&(b.push(U8({start:v,end:T,loop:p,count:o,style:x})),v=null),O=T,S=j));return v!==null&&b.push(U8({start:v,end:h,loop:p,count:o,style:x})),b}function bBe(e,t){const a=[],s=e.segments;for(let r=0;r<s.length;r++){const i=yBe(s[r],e.points,t);i.length&&a.push(...i)}return a}function vBe(e,t,a,s){let r=0,i=t-1;if(a&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,a&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function wBe(e,t,a,s){const r=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=a;++c){const d=e[c%r];d.skip||d.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=o=d.stop?c:null):(o=c,l.skip&&(t=c)),l=d}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function NBe(e,t){const a=e.points,s=e.options.spanGaps,r=a.length;if(!r)return[];const i=!!e._loop,{start:o,end:l}=vBe(a,r,i,s);if(s===!0)return B8(e,[{start:o,end:l,loop:i}],a,t);const c=l<o?l+r:l,d=!!e._fullLoop&&o===0&&l===r-1;return B8(e,wBe(a,o,c,d),a,t)}function B8(e,t,a,s){return!s||!s.setContext||!a?t:jBe(e,t,a,s)}function jBe(e,t,a,s){const r=e._chart.getContext(),i=H8(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=a.length,d=[];let u=i,h=t[0].start,p=h;function x(b,N,v,j){const w=l?-1:1;if(b!==N){for(b+=c;a[b%c].skip;)b-=w;for(;a[N%c].skip;)N+=w;b%c!==N%c&&(d.push({start:b%c,end:N%c,loop:v,style:j}),u=j,h=N%c)}}for(const b of t){h=l?h:b.start;let N=a[h%c],v;for(p=h+1;p<=b.end;p++){const j=a[p%c];v=H8(s.setContext(am(r,{type:"segment",p0:N,p1:j,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),CBe(v,u)&&x(h,p-1,b.loop,u),N=j,u=v}h<p-1&&x(h,p-1,b.loop,u)}return d}function H8(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function CBe(e,t){if(!t)return!1;const a=[],s=function(r,i){return HD(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function jb(e,t,a){return e.options.clip?e[a]:t[a]}function SBe(e,t){const{xScale:a,yScale:s}=e;return a&&s?{left:jb(a,t,"left"),right:jb(a,t,"right"),top:jb(s,t,"top"),bottom:jb(s,t,"bottom")}:t}function _Be(e,t){const a=t._clip;if(a.disabled)return!1;const s=SBe(t,e.chartArea);return{left:a.left===!1?0:s.left-(a.left===!0?0:a.left),right:a.right===!1?e.width:s.right+(a.right===!0?0:a.right),top:a.top===!1?0:s.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?e.height:s.bottom+(a.bottom===!0?0:a.bottom)}}class ABe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,s,r){const i=a.listeners[r],o=a.duration;i.forEach(l=>l({chart:t,initial:a.initial,numSteps:o,currentStep:Math.min(s-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=gJ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let s=a.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,s)),s}listen(t,a,s){this._getAnims(t).listeners[a].push(s)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const s=a.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var vl=new ABe;const q8="transparent",TBe={boolean(e,t,a){return a>.5?t:e},color(e,t,a){const s=D8(e||q8),r=s.valid&&D8(t||q8);return r&&r.valid?r.mix(s,a).hexString():t},number(e,t,a){return e+(t-e)*a}};class EBe{constructor(t,a,s,r){const i=a[s];r=wb([t.to,r,i,t.from]);const o=wb([t.from,i,r]);this._active=!0,this._fn=t.fn||TBe[t.type||typeof o],this._easing=rp[t.easing]||rp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,a,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=wb([t.to,a,r,t.from]),this._from=wb([t.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||a<s),!this._active){this._target[r]=l,this._notify(!0);return}if(a<0){this._target[r]=i;return}c=a/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,s)=>{t.push({res:a,rej:s})})}_notify(t){const a=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][a]()}}class TJ{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!jn(t))return;const a=Object.keys(Pa.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!jn(i))return;const o={};for(const l of a)o[l]=i[l];(ns(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,a){const s=a.options,r=LBe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&kBe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,a){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(a),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,a));continue}const u=a[d];let h=i[d];const p=s.get(d);if(h)if(p&&h.active()){h.update(p,u,l);continue}else h.cancel();if(!p||!p.duration){t[d]=u;continue}i[d]=h=new EBe(p,t,d,u),r.push(h)}return r}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const s=this._createAnimations(t,a);if(s.length)return vl.add(this._chart,s),!0}}function kBe(e,t){const a=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function LBe(e,t){if(!t)return;let a=e.options;if(!a){e.options=t;return}return a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function W8(e,t){const a=e&&e.options||{},s=a.reverse,r=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function PBe(e,t,a){if(a===!1)return!1;const s=W8(e,a),r=W8(t,a);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function DBe(e){let t,a,s,r;return jn(e)?(t=e.top,a=e.right,s=e.bottom,r=e.left):t=a=s=r=e,{top:t,right:a,bottom:s,left:r,disabled:e===!1}}function EJ(e,t){const a=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)a.push(s[r].index);return a}function G8(e,t,a,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,d;if(t===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===a){if(u=!0,s.all)continue;break}d=e.values[c],wi(d)&&(i||t===0||Do(t)===Do(d))&&(t+=d)}return!u&&!s.all?0:t}function OBe(e,t){const{iScale:a,vScale:s}=t,r=a.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:e[u]};return l}function GA(e,t){const a=e&&e.options.stacked;return a||a===void 0&&t.stack!==void 0}function MBe(e,t,a){return`${e.id}.${t.id}.${a.stack||a.type}`}function IBe(e){const{min:t,max:a,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function $Be(e,t,a){const s=e[t]||(e[t]={});return s[a]||(s[a]={})}function V8(e,t,a,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function Y8(e,t){const{chart:a,_cachedMeta:s}=e,r=a._stacks||(a._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,d=o.axis,u=MBe(i,o,s),h=t.length;let p;for(let x=0;x<h;++x){const b=t[x],{[c]:N,[d]:v}=b,j=b._stacks||(b._stacks={});p=j[d]=$Be(r,u,N),p[l]=v,p._top=V8(p,o,!0,s.type),p._bottom=V8(p,o,!1,s.type);const w=p._visualValues||(p._visualValues={});w[l]=v}}function VA(e,t){const a=e.scales;return Object.keys(a).filter(s=>a[s].axis===t).shift()}function RBe(e,t){return am(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function zBe(e,t,a){return am(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function Cg(e,t){const a=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][a]===void 0)return;delete i[s][a],i[s]._visualValues!==void 0&&i[s]._visualValues[a]!==void 0&&delete i[s]._visualValues[a]}}}const YA=e=>e==="reset"||e==="none",Q8=(e,t)=>t?e:Object.assign({},e),FBe=(e,t,a)=>e&&!t.hidden&&t._stacked&&{keys:EJ(a,!0),values:null};class r1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=GA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Cg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,s=this.getDataset(),r=(h,p,x,b)=>h==="x"?p:h==="r"?b:x,i=a.xAxisID=dn(s.xAxisID,VA(t,"x")),o=a.yAxisID=dn(s.yAxisID,VA(t,"y")),l=a.rAxisID=dn(s.rAxisID,VA(t,"r")),c=a.indexAxis,d=a.iAxisID=r(c,i,o,l),u=a.vAxisID=r(c,o,i,l);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(l),a.iScale=this.getScaleForId(d),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&k8(this._data,this),t._stacked&&Cg(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),s=this._data;if(jn(a)){const r=this._cachedMeta;this._data=OBe(a,r)}else if(s!==a){if(s){k8(s,this);const r=this._cachedMeta;Cg(r),r._parsed=[]}a&&Object.isExtensible(a)&&b8e(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=GA(a.vScale,a),a.stack!==s.stack&&(r=!0,Cg(a),a.stack=s.stack),this._resyncElements(t),(r||i!==a._stacked)&&(Y8(this,a._parsed),a._stacked=GA(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&a===r.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,h,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{ns(r[t])?p=this.parseArrayData(s,r,t,a):jn(r[t])?p=this.parseObjectData(s,r,t,a):p=this.parsePrimitiveData(s,r,t,a);const x=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<a;++u)s._parsed[u+t]=h=p[u],c&&(x()&&(c=!1),d=h);s._sorted=c}o&&Y8(this,p)}parsePrimitiveData(t,a,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(r);let p,x,b;for(p=0,x=r;p<x;++p)b=p+s,h[p]={[l]:u||i.parse(d[b],b),[c]:o.parse(a[b],b)};return h}parseArrayData(t,a,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+s,h=a[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(t,a,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,p,x;for(u=0,h=r;u<h;++u)p=u+s,x=a[p],d[u]={x:i.parse(Hu(x,l),p),y:o.parse(Hu(x,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,s){const r=this.chart,i=this._cachedMeta,o=a[t.axis],l={keys:EJ(r,!0),values:a._stacks[t.axis]._visualValues};return G8(l,o,i.index,{mode:s})}updateRangeFromParsed(t,a,s,r){const i=s[a.axis];let o=i===null?NaN:i;const l=r&&s._stacks[a.axis];r&&l&&(r.values=l,o=G8(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,a){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=FBe(a,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=IBe(l);let p,x;function b(){x=r[p];const N=x[l.axis];return!wi(x[t.axis])||u>N||h<N}for(p=0;p<o&&!(!b()&&(this.updateRangeFromParsed(d,t,x,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!b()){this.updateRangeFromParsed(d,t,x,c);break}}return d}getAllParsedValues(t){const a=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=a.length;r<i;++r)o=a[r][t.axis],wi(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,s=a.iScale,r=a.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=DBe(dn(this.options.clip,PBe(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,s=this._cachedMeta,r=s.data||[],i=a.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?o.push(h):h.draw(t,i))}for(u=0;u<o.length;++u)o[u].draw(t,i)}getStyle(t,a){const s=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,a,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=zBe(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=RBe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",s){const r=a==="active",i=this._cachedDataOpts,o=t+"-"+a,l=i[o],c=this.enableOptionSharing&&Hp(s);if(l)return Q8(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),u),x=Object.keys(Pa.elements[t]),b=()=>this.getContext(s,r,a),N=d.resolveNamedOptions(p,x,b,h);return N.$shared&&(N.$shared=c,i[o]=Object.freeze(Q8(N,c))),N}_resolveAnimations(t,a,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${a}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,a),p=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(p,this.getContext(t,s,a))}const d=new TJ(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||YA(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const s=this.resolveDataElementOptions(t,a),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,s),{sharedOptions:i,includeOptions:o}}updateElement(t,a,s,r){YA(r)?Object.assign(t,s):this._resolveAnimations(a,r).update(t,s)}updateSharedOptions(t,a,s){t&&!YA(a)&&this._resolveAnimations(void 0,a).update(t,s)}_setStyle(t,a,s,r){t.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,a,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=s.length,i=a.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,a,s=!0){const r=this._cachedMeta,i=r.data,o=t+a;let l;const c=d=>{for(d.length+=a,l=d.length-1;l>=o;l--)d[l]=d[l-a]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,a),s&&this.updateElements(i,t,a,"reset")}updateElements(t,a,s,r){}_removeElements(t,a){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,a);s._stacked&&Cg(s,r)}s.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,s,r]=t;this[a](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function UBe(e,t){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=a.length;r<i;r++)s=s.concat(a[r].controller.getAllParsedValues(e));e._cache.$bar=hJ(s.sort((r,i)=>r-i))}return e._cache.$bar}function BBe(e){const t=e.iScale,a=UBe(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Hp(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=a.length;r<i;++r)o=t.getPixelForValue(a[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function HBe(e,t,a,s){const r=a.barThickness;let i,o;return Ln(r)?(i=t.min*a.categoryPercentage,o=a.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function qBe(e,t,a,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=a.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:a.barPercentage,start:d}}function WBe(e,t,a,s){const r=a.parse(e[0],s),i=a.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),t[a.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function kJ(e,t,a,s){return ns(e)?WBe(e,t,a,s):t[a.axis]=a.parse(e,s),t}function K8(e,t,a,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let d,u,h,p;for(d=a,u=a+s;d<u;++d)p=t[d],h={},h[r.axis]=l||r.parse(o[d],d),c.push(kJ(p,h,i,d));return c}function QA(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function GBe(e,t,a){return e!==0?Do(e):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function VBe(e){let t,a,s,r,i;return e.horizontal?(t=e.base>e.x,a="left",s="right"):(t=e.base<e.y,a="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:a,end:s,reverse:t,top:r,bottom:i}}function YBe(e,t,a,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=VBe(e);r==="middle"&&a&&(e.enableBorderRadius=!0,(a._top||0)===s?r=d:(a._bottom||0)===s?r=u:(i[X8(u,o,l,c)]=!0,r=d)),i[X8(r,o,l,c)]=!0,e.borderSkipped=i}function X8(e,t,a,s){return s?(e=QBe(e,t,a),e=Z8(e,a,t)):e=Z8(e,t,a),e}function QBe(e,t,a){return e===t?a:e===a?t:e}function Z8(e,t,a){return e==="start"?t:e==="end"?a:e}function KBe(e,{inflateAmount:t},a){e.inflateAmount=t==="auto"?a===1?.33:0:t}class XBe extends r1{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,a,s,r){return K8(t,a,s,r)}parseArrayData(t,a,s,r){return K8(t,a,s,r)}parseObjectData(t,a,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let p,x,b,N;for(p=s,x=s+r;p<x;++p)N=a[p],b={},b[i.axis]=i.parse(Hu(N,d),p),h.push(kJ(Hu(N,u),b,o,p));return h}updateRangeFromParsed(t,a,s,r){super.updateRangeFromParsed(t,a,s,r);const i=s._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:s,vScale:r}=a,i=this.getParsed(t),o=i._custom,l=QA(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(a,r);for(let x=a;x<a+s;x++){const b=this.getParsed(x),N=i||Ln(b[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),v=this._calculateBarIndexPixels(x,u),j=(b._stacks||{})[l.axis],w={horizontal:d,base:N.base,enableBorderRadius:!j||QA(b._custom)||o===j._top||o===j._bottom,x:d?N.head:v.center,y:d?v.center:N.head,height:d?v.size:Math.abs(N.size),width:d?Math.abs(N.size):v.size};p&&(w.options=h||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=w.options||t[x].options;YBe(w,S,j,o),KBe(w,S,u.ratio),this.updateElement(t[x],x,w,r)}}_getStacks(t,a){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(a),c=l&&l[s.axis],d=u=>{const h=u._parsed.find(x=>x[s.axis]===c),p=h&&h[u.vScale.axis];if(Ln(p)||isNaN(p))return!0};for(const u of r)if(!(a!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[dn(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,s){const r=this._getStacks(t,s),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,s=a.iScale,r=[];let i,o;for(i=0,o=a.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||BBe(a),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),d=c._custom,u=QA(d);let h=c[a.axis],p=0,x=s?this.applyStack(a,c,s):h,b,N;x!==h&&(p=x-h,x=h),u&&(h=d.barStart,x=d.barEnd-d.barStart,h!==0&&Do(h)!==Do(d.barEnd)&&(p=0),p+=h);const v=!Ln(i)&&!u?i:p;let j=a.getPixelForValue(v);if(this.chart.getDataVisibility(t)?b=a.getPixelForValue(p+x):b=j,N=b-j,Math.abs(N)<o){N=GBe(N,a,l)*o,h===l&&(j-=N/2);const w=a.getPixelForDecimal(0),S=a.getPixelForDecimal(1),A=Math.min(w,S),E=Math.max(w,S);j=Math.max(Math.min(j,E),A),b=j+N,s&&!u&&(c._stacks[a.axis]._visualValues[r]=a.getValueForPixel(b)-a.getValueForPixel(j))}if(j===a.getPixelForValue(l)){const w=Do(N)*a.getLineWidthForValue(l)/2;j+=w,N-=w}return{size:N,base:j,head:b,center:b+N/2}}_calculateBarIndexPixels(t,a){const s=a.scale,r=this.options,i=r.skipNull,o=dn(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(a.grouped){const u=i?this._getStackCount(t):a.stackCount,h=r.barThickness==="flex"?qBe(t,a,r,u*d):HBe(t,a,r,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(dn(p,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;l=h.start+h.chunk*b+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,a.min*a.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,a=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function ZBe(e,t,a){let s=1,r=1,i=0,o=0;if(t<Sa){const l=e,c=l+t,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),p=Math.sin(c),x=(S,A,E)=>Wp(S,l,c,!0)?1:Math.max(A,A*a,E,E*a),b=(S,A,E)=>Wp(S,l,c,!0)?-1:Math.min(A,A*a,E,E*a),N=x(0,d,h),v=x(as,u,p),j=b(Rn,d,h),w=b(Rn+as,u,p);s=(N-j)/2,r=(v-w)/2,i=-(N+j)/2,o=-(v+w)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class JBe extends r1{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((c,d)=>{const h=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(l||h.borderRadius),index:d}}):[]}},onClick(t,a,s){s.chart.toggleDataVisibility(a.index),s.chart.update()}}}};constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(jn(s[t])){const{key:c="value"}=this._parsing;i=d=>+Hu(s[d],c)}let o,l;for(o=t,l=t+a;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return El(this.options.rotation-90)}_getCircumference(){return El(this.options.circumference)}_getRotationExtents(){let t=Sa,a=-Sa;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),a=Math.max(a,i+o)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:s}=a,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(n8e(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:b,offsetY:N}=ZBe(h,u,c),v=(s.width-o)/p,j=(s.height-o)/x,w=Math.max(Math.min(v,j)/2,0),S=cJ(this.options.radius,w),A=Math.max(S*c,0),E=(S-A)/this._getVisibleDatasetWeightTotal();this.offsetX=b*S,this.offsetY=N*S,r.total=this.calculateTotal(),this.outerRadius=S-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Sa)}updateElements(t,a,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,p=i&&d.animateScale,x=p?0:this.innerRadius,b=p?0:this.outerRadius,{sharedOptions:N,includeOptions:v}=this._getSharedOptions(a,r);let j=this._getRotation(),w;for(w=0;w<a;++w)j+=this._circumference(w,i);for(w=a;w<a+s;++w){const S=this._circumference(w,i),A=t[w],E={x:u+this.offsetX,y:h+this.offsetY,startAngle:j,endAngle:j+S,circumference:S,outerRadius:b,innerRadius:x};v&&(E.options=N||this.resolveDataElementOptions(w,A.active?"active":r)),j+=S,this.updateElement(A,w,E,r)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let s=0,r;for(r=0;r<a.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?Sa*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=qD(a._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(a+=this._getRingWeight(s));return a}_getRingWeight(t){return Math.max(dn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class eHe extends r1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=a,o=this.chart._animationsDisabled;let{start:l,count:c}=N8e(a,r,o);this._drawStart=l,this._drawCount=c,j8e(a)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},t),this.updateElements(r,l,c,t)}updateElements(t,a,s,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(a,r),p=o.axis,x=l.axis,{spanGaps:b,segment:N}=this.options,v=qp(b)?b:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||i||r==="none",w=a+s,S=t.length;let A=a>0&&this.getParsed(a-1);for(let E=0;E<S;++E){const _=t[E],k=j?_:{};if(E<a||E>=w){k.skip=!0;continue}const T=this.getParsed(E),O=Ln(T[x]),$=k[p]=o.getPixelForValue(T[p],E),R=k[x]=i||O?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,T,c):T[x],E);k.skip=isNaN($)||isNaN(R)||O,k.stop=E>0&&Math.abs(T[p]-A[p])>v,N&&(k.parsed=T,k.raw=d.data[E]),h&&(k.options=u||this.resolveDataElementOptions(E,_.active?"active":r)),j||this.updateElement(_,E,k,r),A=T}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,s=a.options&&a.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class tHe extends JBe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Vd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class JD{static override(t){Object.assign(JD.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Vd()}parse(){return Vd()}format(){return Vd()}add(){return Vd()}diff(){return Vd()}startOf(){return Vd()}endOf(){return Vd()}}var nHe={_date:JD};function aHe(e,t,a,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const d=l._reversePixels?x8e:fu;if(s){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(t);if(h){const p=d(i,t,a-h),x=d(i,t,a+h);return{lo:p.lo,hi:x.hi}}}}else{const u=d(i,t,a);if(c){const{vScale:h}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,u.lo+1).reverse().findIndex(N=>!Ln(N[h.axis]));u.lo-=Math.max(0,x);const b=p.slice(u.hi).findIndex(N=>!Ln(N[h.axis]));u.hi+=Math.max(0,b)}return u}}return{lo:0,hi:i.length-1}}function i1(e,t,a,s,r){const i=e.getSortedVisibleDatasetMetas(),o=a[t];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:p}=aHe(i[l],t,o,r);for(let x=h;x<=p;++x){const b=u[x];b.skip||s(b,d,x)}}}function sHe(e){const t=e.indexOf("x")!==-1,a=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=a?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function KA(e,t,a,s,r){const i=[];return!r&&!e.isPointInArea(t)||i1(e,a,t,function(l,c,d){!r&&!Gp(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function rHe(e,t,a,s){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=mJ(o,{x:t.x,y:t.y});Wp(h,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return i1(e,a,t,i),r}function iHe(e,t,a,s,r,i){let o=[];const l=sHe(a);let c=Number.POSITIVE_INFINITY;function d(u,h,p){const x=u.inRange(t.x,t.y,r);if(s&&!x)return;const b=u.getCenterPoint(r);if(!(!!i||e.isPointInArea(b))&&!x)return;const v=l(t,b);v<c?(o=[{element:u,datasetIndex:h,index:p}],c=v):v===c&&o.push({element:u,datasetIndex:h,index:p})}return i1(e,a,t,d),o}function XA(e,t,a,s,r,i){return!i&&!e.isPointInArea(t)?[]:a==="r"&&!s?rHe(e,t,a,r):iHe(e,t,a,s,r,i)}function J8(e,t,a,s,r){const i=[],o=a==="x"?"inXRange":"inYRange";let l=!1;return i1(e,a,t,(c,d,u)=>{c[o]&&c[o](t[a],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var oHe={modes:{index(e,t,a,s){const r=eu(t,e),i=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?KA(e,r,i,s,o):XA(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,a,s){const r=eu(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?KA(e,r,i,s,o):XA(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=e.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(e,t,a,s){const r=eu(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return KA(e,r,i,s,o)},nearest(e,t,a,s){const r=eu(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return XA(e,r,i,a.intersect,s,o)},x(e,t,a,s){const r=eu(t,e);return J8(e,r,"x",a.intersect,s)},y(e,t,a,s){const r=eu(t,e);return J8(e,r,"y",a.intersect,s)}}};const LJ=["left","top","right","bottom"];function Sg(e,t){return e.filter(a=>a.pos===t)}function eB(e,t){return e.filter(a=>LJ.indexOf(a.pos)===-1&&a.box.axis===t)}function _g(e,t){return e.sort((a,s)=>{const r=t?s:a,i=t?a:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function lHe(e){const t=[];let a,s,r,i,o,l;for(a=0,s=(e||[]).length;a<s;++a)r=e[a],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function cHe(e){const t={};for(const a of e){const{stack:s,pos:r,stackWeight:i}=a;if(!s||!LJ.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function dHe(e,t){const a=cHe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,d=a[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=u?u*r:c&&t.availableHeight)}return a}function uHe(e){const t=lHe(e),a=_g(t.filter(d=>d.box.fullSize),!0),s=_g(Sg(t,"left"),!0),r=_g(Sg(t,"right")),i=_g(Sg(t,"top"),!0),o=_g(Sg(t,"bottom")),l=eB(t,"x"),c=eB(t,"y");return{fullSize:a,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Sg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function tB(e,t,a,s){return Math.max(e[a],t[a])+Math.max(e[s],t[s])}function PJ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function mHe(e,t,a,s){const{pos:r,box:i}=a,o=e.maxPadding;if(!jn(r)){a.size&&(e[r]-=a.size);const h=s[a.stack]||{size:0,count:1};h.size=Math.max(h.size,a.horizontal?i.height:i.width),a.size=h.size/h.count,e[r]+=a.size}i.getPadding&&PJ(o,i.getPadding());const l=Math.max(0,t.outerWidth-tB(o,e,"left","right")),c=Math.max(0,t.outerHeight-tB(o,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function fHe(e){const t=e.maxPadding;function a(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function hHe(e,t){const a=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],a[o])}),i}return s(e?["left","right"]:["top","bottom"])}function Wg(e,t,a,s){const r=[];let i,o,l,c,d,u;for(i=0,o=e.length,d=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,hHe(l.horizontal,t));const{same:h,other:p}=mHe(t,a,l,s);d|=h&&r.length,u=u||p,c.fullSize||r.push(l)}return d&&Wg(r,t,a,s)||u}function Cb(e,t,a,s,r){e.top=a,e.left=t,e.right=t+s,e.bottom=a+r,e.width=s,e.height=r}function nB(e,t,a,s){const r=a.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,d=s[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=t.w*u,p=d.size||c.height;Hp(d.start)&&(o=d.start),c.fullSize?Cb(c,r.left,o,a.outerWidth-r.right-r.left,p):Cb(c,t.left+d.placed,o,h,p),d.start=o,d.placed+=h,o=c.bottom}else{const h=t.h*u,p=d.size||c.width;Hp(d.start)&&(i=d.start),c.fullSize?Cb(c,i,r.top,p,a.outerHeight-r.bottom-r.top):Cb(c,i,t.top+d.placed,p,h),d.start=i,d.placed+=h,i=c.right}}t.x=i,t.y=o}var fi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},e.boxes.push(t)},removeBox(e,t){const a=e.boxes?e.boxes.indexOf(t):-1;a!==-1&&e.boxes.splice(a,1)},configure(e,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(e,t,a,s){if(!e)return;const r=Ni(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(a-r.height,0),l=uHe(e.boxes),c=l.vertical,d=l.horizontal;In(e.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const u=c.reduce((N,v)=>v.box.options&&v.box.options.display===!1?N:N+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},r);PJ(p,Ni(s));const x=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),b=dHe(c.concat(d),h);Wg(l.fullSize,x,h,b),Wg(c,x,h,b),Wg(d,x,h,b)&&Wg(c,x,h,b),fHe(x),nB(l.leftAndTop,x,h,b),x.x+=x.w,x.y+=x.h,nB(l.rightAndBottom,x,h,b),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},In(l.chartArea,N=>{const v=N.box;Object.assign(v,e.chartArea),v.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class DJ{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,s){}removeEventListener(t,a,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,s,r){return a=Math.max(0,a||t.width),s=s||t.height,{width:a,height:Math.max(0,r?Math.floor(a/r):s)}}isAttached(t){return!0}updateConfig(t){}}class gHe extends DJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const tv="$chartjs",pHe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aB=e=>e===null||e==="";function xHe(e,t){const a=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[tv]={initial:{height:s,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",aB(r)){const i=F8(e,"width");i!==void 0&&(e.width=i)}if(aB(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=F8(e,"height");i!==void 0&&(e.height=i)}return e}const OJ=mBe?{passive:!0}:!1;function yHe(e,t,a){e&&e.addEventListener(t,a,OJ)}function bHe(e,t,a){e&&e.canvas&&e.canvas.removeEventListener(t,a,OJ)}function vHe(e,t){const a=pHe[e.type]||e.type,{x:s,y:r}=eu(e,t);return{type:a,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Ew(e,t){for(const a of e)if(a===t||a.contains(t))return!0}function wHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Ew(l.addedNodes,s),o=o&&!Ew(l.removedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function NHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Ew(l.removedNodes,s),o=o&&!Ew(l.addedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const Yp=new Map;let sB=0;function MJ(){const e=window.devicePixelRatio;e!==sB&&(sB=e,Yp.forEach((t,a)=>{a.currentDevicePixelRatio!==e&&t()}))}function jHe(e,t){Yp.size||window.addEventListener("resize",MJ),Yp.set(e,t)}function CHe(e){Yp.delete(e),Yp.size||window.removeEventListener("resize",MJ)}function SHe(e,t,a){const s=e.canvas,r=s&&ZD(s);if(!r)return;const i=pJ((l,c)=>{const d=r.clientWidth;a(l,c),d<r.clientWidth&&a()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),jHe(e,i),o}function ZA(e,t,a){a&&a.disconnect(),t==="resize"&&CHe(e)}function _He(e,t,a){const s=e.canvas,r=pJ(i=>{e.ctx!==null&&a(vHe(i,e))},e);return yHe(s,t,r),r}class AHe extends DJ{acquireContext(t,a){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(xHe(t,a),s):null}releaseContext(t){const a=t.canvas;if(!a[tv])return!1;const s=a[tv].initial;["height","width"].forEach(i=>{const o=s[i];Ln(o)?a.removeAttribute(i):a.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[tv],!0}addEventListener(t,a,s){this.removeEventListener(t,a);const r=t.$proxies||(t.$proxies={}),o={attach:wHe,detach:NHe,resize:SHe}[a]||_He;r[a]=o(t,a,s)}removeEventListener(t,a){const s=t.$proxies||(t.$proxies={}),r=s[a];if(!r)return;({attach:ZA,detach:ZA,resize:ZA}[a]||bHe)(t,a,r),s[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,s,r){return uBe(t,a,s,r)}isAttached(t){const a=t&&ZD(t);return!!(a&&a.isConnected)}}function THe(e){return!XD()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?gHe:AHe}let cc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}hasValue(){return qp(this.x)&&qp(this.y)}getProps(t,a){const s=this.$animations;if(!a||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function EHe(e,t){const a=e.options.ticks,s=kHe(e),r=Math.min(a.maxTicksLimit||s,s),i=a.major.enabled?PHe(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return DHe(t,d,i,o/r),d;const u=LHe(i,t,r);if(o>0){let h,p;const x=o>1?Math.round((c-l)/(o-1)):null;for(Sb(t,d,u,Ln(x)?0:l-x,l),h=0,p=o-1;h<p;h++)Sb(t,d,u,i[h],i[h+1]);return Sb(t,d,u,c,Ln(x)?t.length:c+x),d}return Sb(t,d,u),d}function kHe(e){const t=e.options.offset,a=e._tickSize(),s=e._length/a+(t?0:1),r=e._maxLength/a;return Math.floor(Math.min(s,r))}function LHe(e,t,a){const s=OHe(e),r=t.length/a;if(!s)return Math.max(r,1);const i=d8e(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function PHe(e){const t=[];let a,s;for(a=0,s=e.length;a<s;a++)e[a].major&&t.push(a);return t}function DHe(e,t,a,s){let r=0,i=a[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=a[r*s])}function Sb(e,t,a,s,r){const i=dn(s,0),o=Math.min(dn(r,e.length),e.length);let l=0,c,d,u;for(a=Math.ceil(a),r&&(c=r-s,a=c/Math.floor(c/a)),u=i;u<0;)l++,u=Math.round(i+l*a);for(d=Math.max(i,0);d<o;d++)d===u&&(t.push(e[d]),l++,u=Math.round(i+l*a))}function OHe(e){const t=e.length;let a,s;if(t<2)return!1;for(s=e[0],a=1;a<t;++a)if(e[a]-e[a-1]!==s)return!1;return s}const MHe=e=>e==="left"?"right":e==="right"?"left":e,rB=(e,t,a)=>t==="top"||t==="left"?e[t]+a:e[t]-a,iB=(e,t)=>Math.min(t||e,e);function oB(e,t){const a=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)a.push(e[Math.floor(i)]);return a}function IHe(e,t,a){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),d;if(!(a&&(s===1?d=Math.max(c-i,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(r-1))/2,c+=r<t?d:-d,c<i-l||c>o+l)))return c}function $He(e,t){In(e,a=>{const s=a.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete a.data[s[i]];s.splice(0,r)}})}function Ag(e){return e.drawTicks?e.tickLength:0}function lB(e,t){if(!e.display)return 0;const a=Ms(e.font,t),s=Ni(e.padding);return(ns(e.text)?e.text.length:1)*a.lineHeight+s.height}function RHe(e,t){return am(e,{scale:t,type:"scale"})}function zHe(e,t,a){return am(e,{tick:a,index:t,type:"tick"})}function FHe(e,t,a){let s=BD(e);return(a&&t!=="right"||!a&&t==="right")&&(s=MHe(s)),s}function UHe(e,t,a,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let h=0,p,x,b;const N=o-r,v=l-i;if(e.isHorizontal()){if(x=ks(s,i,l),jn(a)){const j=Object.keys(a)[0],w=a[j];b=u[j].getPixelForValue(w)+N-t}else a==="center"?b=(d.bottom+d.top)/2+N-t:b=rB(e,a,t);p=l-i}else{if(jn(a)){const j=Object.keys(a)[0],w=a[j];x=u[j].getPixelForValue(w)-v+t}else a==="center"?x=(d.left+d.right)/2-v+t:x=rB(e,a,t);b=ks(s,o,r),h=a==="left"?-as:as}return{titleX:x,titleY:b,maxWidth:p,rotation:h}}class fh extends cc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:s,_suggestedMax:r}=this;return t=mo(t,Number.POSITIVE_INFINITY),a=mo(a,Number.NEGATIVE_INFINITY),s=mo(s,Number.POSITIVE_INFINITY),r=mo(r,Number.NEGATIVE_INFINITY),{min:mo(t,s),max:mo(a,r),minDefined:wi(t),maxDefined:wi(a)}}getMinMax(t){let{min:a,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:a,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,t),r||(a=Math.min(a,o.min)),i||(s=Math.max(s,o.max));return a=i&&a>s?s:a,s=r&&a>s?a:s,{min:mo(a,mo(s,a)),max:mo(s,mo(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ea(this.options.beforeUpdate,[this])}update(t,a,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=H8e(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?oB(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=EHe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,s;this.isHorizontal()?(a=this.left,s=this.right):(a=this.top,s=this.bottom,t=!t),this._startPixel=a,this._endPixel=s,this._reversePixels=t,this._length=s-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ea(this.options.afterUpdate,[this])}beforeSetDimensions(){ea(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ea(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ea(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ea(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=ea(a.callback,[i.value,s,t],this)}afterTickToLabelConversion(){ea(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ea(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,s=iB(this.ticks.length,t.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!a.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,x=Os(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:x/(s-1),h+6>l&&(l=x/(s-(t.offset?.5:1)),c=this.maxHeight-Ag(t.grid)-a.padding-lB(t.title,this.chart.options.font),d=Math.sqrt(h*h+p*p),o=h8e(Math.min(Math.asin(Os((u.highest.height+6)/l,-1,1)),Math.asin(Os(c/d,-1,1))-Math.asin(Os(p/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ea(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ea(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=lB(r,a.options.font);if(l?(t.width=this.maxWidth,t.height=Ag(i)+c):(t.height=this.maxHeight,t.width=Ag(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:p}=this._getLabelSizes(),x=s.padding*2,b=El(this.labelRotation),N=Math.cos(b),v=Math.sin(b);if(l){const j=s.mirror?0:v*h.width+N*p.height;t.height=Math.min(this.maxHeight,t.height+j+x)}else{const j=s.mirror?0:N*h.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+j+x)}this._calculatePadding(d,u,v,N)}}this._handleMargins(),l?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?d?(p=r*t.width,x=s*a.height):(p=s*t.height,x=r*a.width):i==="start"?x=a.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=a.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-h+o)*this.width/(this.width-h),0)}else{let u=a.height/2,h=t.height/2;i==="start"?(u=0,h=t.height):i==="end"&&(u=a.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ea(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,s;for(a=0,s=t.length;a<s;a++)Ln(t[a].label)&&(t.splice(a,1),s--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let s=this.ticks;a<s.length&&(s=oB(s,a)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(a/iB(a,s));let d=0,u=0,h,p,x,b,N,v,j,w,S,A,E;for(h=0;h<a;h+=c){if(b=t[h].label,N=this._resolveTickFontOptions(h),r.font=v=N.string,j=i[v]=i[v]||{data:{},gc:[]},w=N.lineHeight,S=A=0,!Ln(b)&&!ns(b))S=M8(r,j.data,j.gc,S,b),A=w;else if(ns(b))for(p=0,x=b.length;p<x;++p)E=b[p],!Ln(E)&&!ns(E)&&(S=M8(r,j.data,j.gc,S,E),A+=w);o.push(S),l.push(A),d=Math.max(S,d),u=Math.max(A,u)}$He(i,a);const _=o.indexOf(d),k=l.indexOf(u),T=O=>({width:o[O]||0,height:l[O]||0});return{first:T(0),last:T(a-1),widest:T(_),highest:T(k),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return p8e(this._alignToPixels?Gd(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const s=a[t];return s.$context||(s.$context=zHe(this.getContext(),t,s))}return this.$context||(this.$context=RHe(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=El(this.labelRotation),s=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),p=Ag(i),x=[],b=l.setContext(this.getContext()),N=b.display?b.width:0,v=N/2,j=function(G){return Gd(s,G,N)};let w,S,A,E,_,k,T,O,$,R,P,I;if(o==="top")w=j(this.bottom),k=this.bottom-p,O=w-v,R=j(t.top)+v,I=t.bottom;else if(o==="bottom")w=j(this.top),R=t.top,I=j(t.bottom)-v,k=w+v,O=this.top+p;else if(o==="left")w=j(this.right),_=this.right-p,T=w-v,$=j(t.left)+v,P=t.right;else if(o==="right")w=j(this.left),$=t.left,P=j(t.right)-v,_=w+v,T=this.left+p;else if(a==="x"){if(o==="center")w=j((t.top+t.bottom)/2+.5);else if(jn(o)){const G=Object.keys(o)[0],K=o[G];w=j(this.chart.scales[G].getPixelForValue(K))}R=t.top,I=t.bottom,k=w+v,O=k+p}else if(a==="y"){if(o==="center")w=j((t.left+t.right)/2);else if(jn(o)){const G=Object.keys(o)[0],K=o[G];w=j(this.chart.scales[G].getPixelForValue(K))}_=w-v,T=_-p,$=t.left,P=t.right}const H=dn(r.ticks.maxTicksLimit,h),Q=Math.max(1,Math.ceil(h/H));for(S=0;S<h;S+=Q){const G=this.getContext(S),K=i.setContext(G),W=l.setContext(G),J=K.lineWidth,Te=K.color,ee=W.dash||[],U=W.dashOffset,je=K.tickWidth,be=K.tickColor,le=K.tickBorderDash||[],Ce=K.tickBorderDashOffset;A=IHe(this,S,c),A!==void 0&&(E=Gd(s,A,J),d?_=T=$=P=E:k=O=R=I=E,x.push({tx1:_,ty1:k,tx2:T,ty2:O,x1:$,y1:R,x2:P,y2:I,width:J,color:Te,borderDash:ee,borderDashOffset:U,tickWidth:je,tickColor:be,tickBorderDash:le,tickBorderDashOffset:Ce}))}return this._ticksLength=h,this._borderValue=w,x}_computeLabelItems(t){const a=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,p=Ag(s.grid),x=p+u,b=h?-u:x,N=-El(this.labelRotation),v=[];let j,w,S,A,E,_,k,T,O,$,R,P,I="middle";if(r==="top")_=this.bottom-b,k=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+b,k=this._getXAxisLabelAlignment();else if(r==="left"){const Q=this._getYAxisLabelAlignment(p);k=Q.textAlign,E=Q.x}else if(r==="right"){const Q=this._getYAxisLabelAlignment(p);k=Q.textAlign,E=Q.x}else if(a==="x"){if(r==="center")_=(t.top+t.bottom)/2+x;else if(jn(r)){const Q=Object.keys(r)[0],G=r[Q];_=this.chart.scales[Q].getPixelForValue(G)+x}k=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")E=(t.left+t.right)/2-x;else if(jn(r)){const Q=Object.keys(r)[0],G=r[Q];E=this.chart.scales[Q].getPixelForValue(G)}k=this._getYAxisLabelAlignment(p).textAlign}a==="y"&&(c==="start"?I="top":c==="end"&&(I="bottom"));const H=this._getLabelSizes();for(j=0,w=l.length;j<w;++j){S=l[j],A=S.label;const Q=i.setContext(this.getContext(j));T=this.getPixelForTick(j)+i.labelOffset,O=this._resolveTickFontOptions(j),$=O.lineHeight,R=ns(A)?A.length:1;const G=R/2,K=Q.color,W=Q.textStrokeColor,J=Q.textStrokeWidth;let Te=k;o?(E=T,k==="inner"&&(j===w-1?Te=this.options.reverse?"left":"right":j===0?Te=this.options.reverse?"right":"left":Te="center"),r==="top"?d==="near"||N!==0?P=-R*$+$/2:d==="center"?P=-H.highest.height/2-G*$+$:P=-H.highest.height+$/2:d==="near"||N!==0?P=$/2:d==="center"?P=H.highest.height/2-G*$:P=H.highest.height-R*$,h&&(P*=-1),N!==0&&!Q.showLabelBackdrop&&(E+=$/2*Math.sin(N))):(_=T,P=(1-R)*$/2);let ee;if(Q.showLabelBackdrop){const U=Ni(Q.backdropPadding),je=H.heights[j],be=H.widths[j];let le=P-U.top,Ce=0-U.left;switch(I){case"middle":le-=je/2;break;case"bottom":le-=je;break}switch(k){case"center":Ce-=be/2;break;case"right":Ce-=be;break;case"inner":j===w-1?Ce-=be:j>0&&(Ce-=be/2);break}ee={left:Ce,top:le,width:be+U.width,height:je+U.height,color:Q.backdropColor}}v.push({label:A,font:O,textOffset:P,options:{rotation:N,color:K,strokeColor:W,strokeWidth:J,textAlign:Te,textBaseline:I,translation:[E,_],backdrop:ee}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-El(this.labelRotation))return t==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let d,u;return a==="left"?r?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):a==="right"?r?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:s,top:r,width:i,height:o}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const a=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(a.display)for(i=0,o=r.length;i<o;++i){const c=r[i];a.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,p;this.isHorizontal()?(d=Gd(t,this.left,o)-o/2,u=Gd(t,this.right,l)+l/2,h=p=c):(h=Gd(t,this.top,o)-o/2,p=Gd(t,this.bottom,l)+l/2,d=u=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(d,h),a.lineTo(u,p),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&WD(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;Vp(s,d,0,u,c,l)}r&&GD(s)}drawTitle(){const{ctx:t,options:{position:a,title:s,reverse:r}}=this;if(!s.display)return;const i=Ms(s.font),o=Ni(s.padding),l=s.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||jn(a)?(c+=o.bottom,ns(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:p}=UHe(this,c,a,l);Vp(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:p,textAlign:FHe(l,a,r),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,s=dn(t.grid&&t.grid.z,-1),r=dn(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==fh.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=a.length;i<o;++i){const l=a[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return Ms(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _b{constructor(t,a,s){this.type=t,this.scope=a,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let s;qHe(a)&&(s=this.register(a));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,BHe(t,o,s),this.override&&Pa.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const a=this.items,s=t.id,r=this.scope;s in a&&delete a[s],r&&s in Pa[r]&&(delete Pa[r][s],this.override&&delete qu[s])}}function BHe(e,t,a){const s=Bp(Object.create(null),[a?Pa.get(a):{},Pa.get(t),e.defaults]);Pa.set(t,s),e.defaultRoutes&&HHe(t,e.defaultRoutes),e.descriptors&&Pa.describe(t,e.descriptors)}function HHe(e,t){Object.keys(t).forEach(a=>{const s=a.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[a].split("."),l=o.pop(),c=o.join(".");Pa.route(i,r,c,l)})}function qHe(e){return"id"in e&&"defaults"in e}class WHe{constructor(){this.controllers=new _b(r1,"datasets",!0),this.elements=new _b(cc,"elements"),this.plugins=new _b(Object,"plugins"),this.scales=new _b(fh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,s){[...a].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):In(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,a,s){const r=FD(t);ea(s["before"+r],[],s),a[t](s),ea(s["after"+r],[],s)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const s=this._typedRegistries[a];if(s.isForType(t))return s}return this.plugins}_get(t,a,s){const r=a.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var xo=new WHe;class GHe{constructor(){this._init=void 0}notify(t,a,s,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,a,s);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,a,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[a,r,i.options];if(ea(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ln(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const s=t&&t.config,r=dn(s.options&&s.options.plugins,{}),i=VHe(s);return r===!1&&!a?[]:QHe(t,i,r,a)}_notifyStateChanges(t){const a=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(a,s),t,"stop"),this._notify(r(s,a),t,"start")}}function VHe(e){const t={},a=[],s=Object.keys(xo.plugins.items);for(let i=0;i<s.length;i++)a.push(xo.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];a.indexOf(o)===-1&&(a.push(o),t[o.id]=!0)}return{plugins:a,localIds:t}}function YHe(e,t){return!t&&e===!1?null:e===!0?{}:e}function QHe(e,{plugins:t,localIds:a},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,d=YHe(s[c],r);d!==null&&i.push({plugin:l,options:KHe(e.config,{plugin:l,local:a[c]},d,o)})}return i}function KHe(e,{plugin:t,local:a},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return a&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Uk(e,t){const a=Pa.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function XHe(e,t){let a=e;return e==="_index_"?a=t:e==="_value_"&&(a=t==="x"?"y":"x"),a}function ZHe(e,t){return e===t?"_index_":"_value_"}function cB(e){if(e==="x"||e==="y"||e==="r")return e}function JHe(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Bk(e,...t){if(cB(e))return e;for(const a of t){const s=a.axis||JHe(a.position)||e.length>1&&cB(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function dB(e,t,a){if(a[t+"AxisID"]===e)return{axis:t}}function e9e(e,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(a.length)return dB(e,"x",a[0])||dB(e,"y",a[0])}return{}}function t9e(e,t){const a=qu[e.type]||{scales:{}},s=t.scales||{},r=Uk(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!jn(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Bk(o,l,e9e(o,e),Pa.scales[l.type]),d=ZHe(c,r),u=a.scales||{};i[o]=ap(Object.create(null),[{axis:c},l,u[c],u[d]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||Uk(l,t),u=(qu[l]||{}).scales||{};Object.keys(u).forEach(h=>{const p=XHe(h,c),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),ap(i[x],[{axis:p},s[x],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];ap(l,[Pa.scales[l.type],Pa.scale])}),i}function IJ(e){const t=e.options||(e.options={});t.plugins=dn(t.plugins,{}),t.scales=t9e(e,t)}function $J(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function n9e(e){return e=e||{},e.data=$J(e.data),IJ(e),e}const uB=new Map,RJ=new Set;function Ab(e,t){let a=uB.get(e);return a||(a=t(),uB.set(e,a),RJ.add(a)),a}const Tg=(e,t,a)=>{const s=Hu(t,a);s!==void 0&&e.add(s)};class a9e{constructor(t){this._config=n9e(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=$J(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),IJ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ab(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return Ab(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return Ab(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,s=this.type;return Ab(`${s}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const s=this._scopeCache;let r=s.get(t);return(!r||a)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,a,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(a);if(l)return l;const c=new Set;a.forEach(u=>{t&&(c.add(t),u.forEach(h=>Tg(c,t,h))),u.forEach(h=>Tg(c,r,h)),u.forEach(h=>Tg(c,qu[i]||{},h)),u.forEach(h=>Tg(c,Pa,h)),u.forEach(h=>Tg(c,zk,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),RJ.has(a)&&o.set(a,d),d}chartOptionScopes(){const{options:t,type:a}=this;return[t,qu[a]||{},Pa.datasets[a]||{},{type:a},Pa,zk]}resolveNamedOptions(t,a,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=mB(this._resolverCache,t,r);let c=o;if(r9e(o,a)){i.$shared=!1,s=xd(s)?s():s;const d=this.createResolver(t,s,l);c=zf(o,s,d)}for(const d of a)i[d]=c[d];return i}createResolver(t,a,s=[""],r){const{resolver:i}=mB(this._resolverCache,t,s);return jn(a)?zf(i,a,void 0,r):i}}function mB(e,t,a){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=a.join();let i=s.get(r);return i||(i={resolver:YD(t,a),subPrefixes:a.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const s9e=e=>jn(e)&&Object.getOwnPropertyNames(e).some(t=>xd(e[t]));function r9e(e,t){const{isScriptable:a,isIndexable:s}=vJ(e);for(const r of t){const i=a(r),o=s(r),l=(o||i)&&e[r];if(i&&(xd(l)||s9e(l))||o&&ns(l))return!0}return!1}var i9e="4.5.1";const o9e=["top","bottom","left","right","chartArea"];function fB(e,t){return e==="top"||e==="bottom"||o9e.indexOf(e)===-1&&t==="x"}function hB(e,t){return function(a,s){return a[e]===s[e]?a[t]-s[t]:a[e]-s[e]}}function gB(e){const t=e.chart,a=t.options.animation;t.notifyPlugins("afterRender"),ea(a&&a.onComplete,[e],t)}function l9e(e){const t=e.chart,a=t.options.animation;ea(a&&a.onProgress,[e],t)}function zJ(e){return XD()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const nv={},pB=e=>{const t=zJ(e);return Object.values(nv).filter(a=>a.canvas===t).pop()};function c9e(e,t,a){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(a>0||i>t)&&(e[i+a]=o)}}}function d9e(e,t,a,s){return!a||e.type==="mouseout"?null:s?t:e}let o1=class{static defaults=Pa;static instances=nv;static overrides=qu;static registry=xo;static version=i9e;static getChart=pB;static register(...t){xo.add(...t),xB()}static unregister(...t){xo.remove(...t),xB()}constructor(t,a){const s=this.config=new a9e(a),r=zJ(t),i=pB(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||THe(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=t8e(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new GHe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=v8e(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],nv[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}vl.listen(this,"complete",gB),vl.listen(this,"progress",l9e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:s,height:r,_aspectRatio:i}=this;return Ln(t)?a&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():z8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return I8(this.canvas,this.ctx),this}stop(){return vl.stop(this),this}resize(t,a){vl.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,a,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,z8(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ea(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};In(a,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,a=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];a&&(i=i.concat(Object.keys(a).map(o=>{const l=a[o],c=Bk(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),In(i,o=>{const l=o.options,c=l.id,d=Bk(c,l),u=dn(l.type,o.dtype);(l.position===void 0||fB(l.position,d)!==fB(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===u)h=s[c];else{const p=xo.getScale(u);h=new p({id:c,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),In(r,(o,l)=>{o||delete s[l]}),In(s,o=>{fi.configure(this,o,o.options),fi.addBox(this,o)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>a){for(let r=a;r<s;++r)this._destroyDatasetMeta(r);t.splice(a,s-a)}this._sortedMetasets=t.slice(0).sort(hB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((s,r)=>{a.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=a.length;s<r;s++){const i=a[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||Uk(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=xo.getController(l),{datasetElementType:d,dataElementType:u}=Pa.datasets[l];Object.assign(c,{dataElementType:xo.getElement(u),datasetElementType:d&&xo.getElement(d)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){In(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const s=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),p=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(p),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||In(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(hB("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){In(this.scales,t=>{fi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!_8(a,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of a){const o=s==="_removeElements"?-i:i;c9e(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<a;i++)if(!_8(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fi.update(this,this.width,this.height,t);const a=this.chartArea,s=a.width<=0||a.height<=0;this._layers=[],In(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,s=this.data.datasets.length;a<s;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,s=this.data.datasets.length;a<s;++a)this._updateDataset(a,xd(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vl.has(this)?this.attached&&!vl.running(this)&&vl.start(this):(this.draw(),gB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,s=[];let r,i;for(r=0,i=a.length;r<i;++r){const o=a[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=_Be(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&WD(a,r),t.controller.draw(),r&&GD(a),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Gp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,s,r){const i=oHe.modes[a];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const a=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=am(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!a.hidden}setDatasetVisibility(t,a){const s=this.getDatasetMeta(t);s.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);Hp(a)?(i.data[a].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),vl.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),I8(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete nv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,s=(i,o)=>{a.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};In(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,s=(c,d)=>{a.addEventListener(this,c,d),t[c]=d},r=(c,d)=>{t[c]&&(a.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},a.isAttached(this.canvas)?l():o()}unbindEvents(){In(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},In(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,s){const r=s?"set":"remove";let i,o,l,c;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Cw(s,a)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,a))}notifyPlugins(t,a,s){return this._plugins.notify(this,t,a,s)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,s){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(a,t),l=s?t:i(t,a);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,a){const s={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,a,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,a,s){const{_active:r=[],options:i}=this,o=a,l=this._getActiveElements(t,r,s,o),c=o8e(t),d=d9e(t,this._lastEvent,s,c);s&&(this._lastEvent=null,ea(i.onHover,[t,l,this],this),c&&ea(i.onClick,[t,l,this],this));const u=!Cw(l,r);return(u||a)&&(this._active=l,this._updateHoverStyles(l,r,a)),this._lastEvent=d,u}_getActiveElements(t,a,s,r){if(t.type==="mouseout")return[];if(!s)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function xB(){return In(o1.instances,e=>e._plugins.invalidate())}function u9e(e,t,a){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/o,Ri(s-a));if(e.beginPath(),e.arc(r,i,o-d/2,s+h/2,a-h/2),l>0){const p=Math.min(d/l,Ri(s-a));e.arc(r,i,l+d/2,a-p/2,s+p/2,!0)}else{const p=Math.min(d/2,o*Ri(s-a));if(u==="round")e.arc(r,i,p,a-Rn/2,s+Rn/2,!0);else if(u==="bevel"){const x=2*p*p,b=-x*Math.cos(a+Rn/2)+r,N=-x*Math.sin(a+Rn/2)+i,v=x*Math.cos(s+Rn/2)+r,j=x*Math.sin(s+Rn/2)+i;e.lineTo(b,N),e.lineTo(v,j)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function m9e(e,t,a){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=r/l;e.beginPath(),e.arc(i,o,l,s-d,a+d),c>r?(d=r/c,e.arc(i,o,c,a+d,s-d,!0)):e.arc(i,o,r,a+as,s-as),e.closePath(),e.clip()}function f9e(e){return VD(e,["outerStart","outerEnd","innerStart","innerEnd"])}function h9e(e,t,a,s){const r=f9e(e.options.borderRadius),i=(a-t)/2,o=Math.min(i,s*t/2),l=c=>{const d=(a-Math.min(i,c))*s/2;return Os(c,0,Math.min(i,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Os(r.innerStart,0,o),innerEnd:Os(r.innerEnd,0,o)}}function Jm(e,t,a,s){return{x:a+e*Math.cos(t),y:s+e*Math.sin(t)}}function kw(e,t,a,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=t,h=Math.max(t.outerRadius+s+a-d,0),p=u>0?u+s+a+d:0;let x=0;const b=r-c;if(s){const Q=u>0?u-s:0,G=h>0?h-s:0,K=(Q+G)/2,W=K!==0?b*K/(K+s):b;x=(b-W)/2}const N=Math.max(.001,b*h-a/Rn)/h,v=(b-N)/2,j=c+v+x,w=r-v-x,{outerStart:S,outerEnd:A,innerStart:E,innerEnd:_}=h9e(t,p,h,w-j),k=h-S,T=h-A,O=j+S/k,$=w-A/T,R=p+E,P=p+_,I=j+E/R,H=w-_/P;if(e.beginPath(),i){const Q=(O+$)/2;if(e.arc(o,l,h,O,Q),e.arc(o,l,h,Q,$),A>0){const J=Jm(T,$,o,l);e.arc(J.x,J.y,A,$,w+as)}const G=Jm(P,w,o,l);if(e.lineTo(G.x,G.y),_>0){const J=Jm(P,H,o,l);e.arc(J.x,J.y,_,w+as,H+Math.PI)}const K=(w-_/p+(j+E/p))/2;if(e.arc(o,l,p,w-_/p,K,!0),e.arc(o,l,p,K,j+E/p,!0),E>0){const J=Jm(R,I,o,l);e.arc(J.x,J.y,E,I+Math.PI,j-as)}const W=Jm(k,j,o,l);if(e.lineTo(W.x,W.y),S>0){const J=Jm(k,O,o,l);e.arc(J.x,J.y,S,j-as,O)}}else{e.moveTo(o,l);const Q=Math.cos(O)*h+o,G=Math.sin(O)*h+l;e.lineTo(Q,G);const K=Math.cos($)*h+o,W=Math.sin($)*h+l;e.lineTo(K,W)}e.closePath()}function g9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){kw(e,t,a,s,c,r);for(let d=0;d<i;++d)e.fill();isNaN(l)||(c=o+(l%Sa||Sa))}return kw(e,t,a,s,c,r),e.fill(),c}function p9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:p,borderRadius:x}=c,b=c.borderAlign==="inner";if(!d)return;e.setLineDash(h||[]),e.lineDashOffset=p,b?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let N=t.endAngle;if(i){kw(e,t,a,s,N,r);for(let v=0;v<i;++v)e.stroke();isNaN(l)||(N=o+(l%Sa||Sa))}b&&m9e(e,t,N),c.selfJoin&&N-o>=Rn&&x===0&&u!=="miter"&&u9e(e,t,N),i||(kw(e,t,a,s,N,r),e.stroke())}class x9e extends cc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.getProps(["x","y"],s),{angle:i,distance:o}=mJ(r,{x:t,y:a}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=dn(h,c-l),b=Wp(i,l,c)&&l!==c,N=x>=Sa||b,v=ed(o,d+p,u+p);return N&&v}getCenterPoint(t){const{x:a,y:s,startAngle:r,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:d}=this.options,u=(r+i)/2,h=(o+l+d+c)/2;return{x:a+Math.cos(u)*h,y:s+Math.sin(u)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:a,circumference:s}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=s>Sa?Math.floor(s/Sa):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Rn,s||0)),d=r*c;t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,g9e(t,this,d,i,o),p9e(t,this,d,i,o),t.restore()}}function FJ(e,t,a=t){e.lineCap=dn(a.borderCapStyle,t.borderCapStyle),e.setLineDash(dn(a.borderDash,t.borderDash)),e.lineDashOffset=dn(a.borderDashOffset,t.borderDashOffset),e.lineJoin=dn(a.borderJoinStyle,t.borderJoinStyle),e.lineWidth=dn(a.borderWidth,t.borderWidth),e.strokeStyle=dn(a.borderColor,t.borderColor)}function y9e(e,t,a){e.lineTo(a.x,a.y)}function b9e(e){return e.stepped?O8e:e.tension||e.cubicInterpolationMode==="monotone"?M8e:y9e}function UJ(e,t,a={}){const s=e.length,{start:r=0,end:i=s-1}=a,{start:o,end:l}=t,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:d<c&&!u?s+d-c:d-c}}function v9e(e,t,a,s){const{points:r,options:i}=t,{count:o,start:l,loop:c,ilen:d}=UJ(r,a,s),u=b9e(i);let{move:h=!0,reverse:p}=s||{},x,b,N;for(x=0;x<=d;++x)b=r[(l+(p?d-x:x))%o],!b.skip&&(h?(e.moveTo(b.x,b.y),h=!1):u(e,N,b,p,i.stepped),N=b);return c&&(b=r[(l+(p?d:0))%o],u(e,N,b,p,i.stepped)),!!c}function w9e(e,t,a,s){const r=t.points,{count:i,start:o,ilen:l}=UJ(r,a,s),{move:c=!0,reverse:d}=s||{};let u=0,h=0,p,x,b,N,v,j;const w=A=>(o+(d?l-A:A))%i,S=()=>{N!==v&&(e.lineTo(u,v),e.lineTo(u,N),e.lineTo(u,j))};for(c&&(x=r[w(0)],e.moveTo(x.x,x.y)),p=0;p<=l;++p){if(x=r[w(p)],x.skip)continue;const A=x.x,E=x.y,_=A|0;_===b?(E<N?N=E:E>v&&(v=E),u=(h*u+A)/++h):(S(),e.lineTo(A,E),b=_,h=0,N=v=E),j=E}S()}function Hk(e){const t=e.options,a=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?w9e:v9e}function N9e(e){return e.stepped?fBe:e.tension||e.cubicInterpolationMode==="monotone"?hBe:tu}function j9e(e,t,a,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,a,s)&&r.closePath()),FJ(e,t.options),e.stroke(r)}function C9e(e,t,a,s){const{segments:r,options:i}=t,o=Hk(t);for(const l of r)FJ(e,i,l.style),e.beginPath(),o(e,t,l,{start:a,end:a+s-1})&&e.closePath(),e.stroke()}const S9e=typeof Path2D=="function";function _9e(e,t,a,s){S9e&&!t.options.segment?j9e(e,t,a,s):C9e(e,t,a,s)}class A9e extends cc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;rBe(this._points,s,t,r,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=NBe(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,s=t.length;return s&&a[t[s-1].end]}interpolate(t,a){const s=this.options,r=t[a],i=this.points,o=bBe(this,{property:a,start:r,end:r});if(!o.length)return;const l=[],c=N9e(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:p}=o[d],x=i[h],b=i[p];if(x===b){l.push(x);continue}const N=Math.abs((r-x[a])/(b[a]-x[a])),v=c(x,b,N,s.stepped);v[a]=t[a],l.push(v)}return l.length===1?l[0]:l}pathSegment(t,a,s){return Hk(this)(t,this,a,s)}path(t,a,s){const r=this.segments,i=Hk(this);let o=this._loop;a=a||0,s=s||this.points.length-a;for(const l of r)o&=i(t,this,l,{start:a,end:a+s-1});return!!o}draw(t,a,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),_9e(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function yB(e,t,a,s){const r=e.options,{[a]:i}=e.getProps([a],s);return Math.abs(t-i)<r.radius+r.hitRadius}class T9e extends cc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(a-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,a){return yB(this,t,"x",a)}inYRange(t,a){return yB(this,t,"y",a)}getCenterPoint(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}size(t){t=t||this.options||{};let a=t.radius||0;a=Math.max(a,a&&t.hoverRadius||0);const s=a&&t.borderWidth||0;return(a+s)*2}draw(t,a){const s=this.options;this.skip||s.radius<.1||!Gp(this,a,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Fk(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function BJ(e,t){const{x:a,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,d,u,h;return e.horizontal?(h=o/2,l=Math.min(a,r),c=Math.max(a,r),d=s-h,u=s+h):(h=i/2,l=a-h,c=a+h,d=Math.min(s,r),u=Math.max(s,r)),{left:l,top:d,right:c,bottom:u}}function nd(e,t,a,s){return e?0:Os(t,a,s)}function E9e(e,t,a){const s=e.options.borderWidth,r=e.borderSkipped,i=bJ(s);return{t:nd(r.top,i.top,0,a),r:nd(r.right,i.right,0,t),b:nd(r.bottom,i.bottom,0,a),l:nd(r.left,i.left,0,t)}}function k9e(e,t,a){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=bf(r),o=Math.min(t,a),l=e.borderSkipped,c=s||jn(r);return{topLeft:nd(!c||l.top||l.left,i.topLeft,0,o),topRight:nd(!c||l.top||l.right,i.topRight,0,o),bottomLeft:nd(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:nd(!c||l.bottom||l.right,i.bottomRight,0,o)}}function L9e(e){const t=BJ(e),a=t.right-t.left,s=t.bottom-t.top,r=E9e(e,a/2,s/2),i=k9e(e,a/2,s/2);return{outer:{x:t.left,y:t.top,w:a,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function JA(e,t,a,s){const r=t===null,i=a===null,l=e&&!(r&&i)&&BJ(e,s);return l&&(r||ed(t,l.left,l.right))&&(i||ed(a,l.top,l.bottom))}function P9e(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function D9e(e,t){e.rect(t.x,t.y,t.w,t.h)}function eT(e,t,a={}){const s=e.x!==a.x?-t:0,r=e.y!==a.y?-t:0,i=(e.x+e.w!==a.x+a.w?t:0)-s,o=(e.y+e.h!==a.y+a.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class O9e extends cc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=L9e(this),l=P9e(o.radius)?Aw:D9e;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,eT(o,a,i)),t.clip(),l(t,eT(i,-a,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,eT(i,a)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,a,s){return JA(this,t,a,s)}inXRange(t,a){return JA(this,t,null,a)}inYRange(t,a){return JA(this,null,t,a)}getCenterPoint(t){const{x:a,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+r)/2:a,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const bB=(e,t)=>{let{boxHeight:a=t,boxWidth:s=t}=e;return e.usePointStyle&&(a=Math.min(a,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(t,a)}},M9e=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class vB extends cc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,s){this.maxWidth=t,this.maxHeight=a,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=ea(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(s=>t.filter(s,this.chart.data))),t.sort&&(a=a.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Ms(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=bB(s,i);let d,u;a.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,a,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-u;return this.legendItems.forEach((b,N)=>{const v=s+a/2+i.measureText(b.text).width;(N===0||d[d.length-1]+v+2*l>o)&&(h+=u,d[d.length-(N>0?0:1)]=0,x+=u,p++),c[N]={left:0,top:x,row:p,width:v,height:r},d[d.length-1]+=v+l}),h}_fitCols(t,a,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-t;let h=l,p=0,x=0,b=0,N=0;return this.legendItems.forEach((v,j)=>{const{itemWidth:w,itemHeight:S}=I9e(s,a,i,v,r);j>0&&x+S+2*l>u&&(h+=p+l,d.push({width:p,height:x}),b+=p+l,N++,p=x=0),c[j]={left:b,top:x,col:N,width:w,height:S},p=Math.max(p,w),x+=S+l}),h+=p,d.push({width:p,height:x}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:s,labels:{padding:r},rtl:i}}=this,o=vf(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=ks(s,this.left+r,this.right-this.lineWidths[l]);for(const d of a)l!==d.row&&(l=d.row,c=ks(s,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+t+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=ks(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const d of a)d.col!==l&&(l=d.col,c=ks(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;WD(t,this),this._draw(),GD(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=Pa.color,c=vf(t.rtl,this.left,this.width),d=Ms(o.font),{padding:u}=o,h=d.size,p=h/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:b,boxHeight:N,itemHeight:v}=bB(o,h),j=function(_,k,T){if(isNaN(b)||b<=0||isNaN(N)||N<0)return;r.save();const O=dn(T.lineWidth,1);if(r.fillStyle=dn(T.fillStyle,l),r.lineCap=dn(T.lineCap,"butt"),r.lineDashOffset=dn(T.lineDashOffset,0),r.lineJoin=dn(T.lineJoin,"miter"),r.lineWidth=O,r.strokeStyle=dn(T.strokeStyle,l),r.setLineDash(dn(T.lineDash,[])),o.usePointStyle){const $={radius:N*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:O},R=c.xPlus(_,b/2),P=k+p;yJ(r,$,R,P,o.pointStyleWidth&&b)}else{const $=k+Math.max((h-N)/2,0),R=c.leftForLtr(_,b),P=bf(T.borderRadius);r.beginPath(),Object.values(P).some(I=>I!==0)?Aw(r,{x:R,y:$,w:b,h:N,radius:P}):r.rect(R,$,b,N),r.fill(),O!==0&&r.stroke()}r.restore()},w=function(_,k,T){Vp(r,T.text,_,k+v/2,d,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},S=this.isHorizontal(),A=this._computeTitleHeight();S?x={x:ks(i,this.left+u,this.right-s[0]),y:this.top+u+A,line:0}:x={x:this.left+u,y:ks(i,this.top+A+u,this.bottom-a[0].height),line:0},SJ(this.ctx,t.textDirection);const E=v+u;this.legendItems.forEach((_,k)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const T=r.measureText(_.text).width,O=c.textAlign(_.textAlign||(_.textAlign=o.textAlign)),$=b+p+T;let R=x.x,P=x.y;c.setWidth(this.width),S?k>0&&R+$+u>this.right&&(P=x.y+=E,x.line++,R=x.x=ks(i,this.left+u,this.right-s[x.line])):k>0&&P+E>this.bottom&&(R=x.x=R+a[x.line].width+u,x.line++,P=x.y=ks(i,this.top+A+u,this.bottom-a[x.line].height));const I=c.x(R);if(j(I,P,_),R=w8e(O,R+b+p,S?R+$:this.right,t.rtl),w(c.x(R),P,_),S)x.x+=$+u;else if(typeof _.text!="string"){const H=d.lineHeight;x.y+=HJ(_,H)+u}else x.y+=E}),_J(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,s=Ms(a.font),r=Ni(a.padding);if(!a.display)return;const i=vf(t.rtl,this.left,this.width),o=this.ctx,l=a.position,c=s.size/2,d=r.top+c;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,h=ks(t.align,h,this.right-p);else{const b=this.columnSizes.reduce((N,v)=>Math.max(N,v.height),0);u=d+ks(t.align,this.top,this.bottom-b-t.labels.padding-this._computeTitleHeight())}const x=ks(l,h,h+p);o.textAlign=i.textAlign(BD(l)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=s.string,Vp(o,a.text,x,u,s)}_computeTitleHeight(){const t=this.options.title,a=Ms(t.font),s=Ni(t.padding);return t.display?a.lineHeight+s.height:0}_getLegendItemAt(t,a){let s,r,i;if(ed(t,this.left,this.right)&&ed(a,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],ed(t,r.left,r.left+r.width)&&ed(a,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const a=this.options;if(!z9e(t.type,a))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=M9e(r,s);r&&!i&&ea(a.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&ea(a.onHover,[t,s,this],this)}else s&&ea(a.onClick,[t,s,this],this)}}function I9e(e,t,a,s,r){const i=$9e(s,e,t,a),o=R9e(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function $9e(e,t,a,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+a.size/2+s.measureText(r).width}function R9e(e,t,a){let s=e;return typeof t.text!="string"&&(s=HJ(t,a)),s}function HJ(e,t){const a=e.text?e.text.length:0;return t*a}function z9e(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var F9e={id:"legend",_element:vB,start(e,t,a){const s=e.legend=new vB({ctx:e.ctx,options:a,chart:e});fi.configure(e,s,a),fi.addBox(e,s)},stop(e){fi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,a){const s=e.legend;fi.configure(e,s,a),s.options=a},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,a){const s=t.datasetIndex,r=a.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(a?0:void 0),u=Ni(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class qJ extends cc{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const r=ns(s.text)?s.text.length:1;this._padding=Ni(s.padding);const i=r*Ms(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=ks(l,s,i),h=a+t,d=i-s):(o.position==="left"?(u=s+t,h=ks(l,r,a),c=Rn*-.5):(u=i-t,h=ks(l,a,r),c=Rn*.5),d=r-a),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const s=Ms(a.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Vp(t,a.text,0,0,s,{color:a.color,maxWidth:c,rotation:d,textAlign:BD(a.align),textBaseline:"middle",translation:[o,l]})}}function U9e(e,t){const a=new qJ({ctx:e.ctx,options:t,chart:e});fi.configure(e,a,t),fi.addBox(e,a),e.titleBlock=a}var B9e={id:"title",_element:qJ,start(e,t,a){U9e(e,a)},stop(e){const t=e.titleBlock;fi.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,a){const s=e.titleBlock;fi.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Gg={average(e){if(!e.length)return!1;let t,a,s=new Set,r=0,i=0;for(t=0,a=e.length;t<a;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let a=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Rk(t,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();a=c.x,s=c.y}return{x:a,y:s}}};function po(e,t){return t&&(ns(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function wl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function H9e(e,t){const{element:a,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:a}}function wB(e,t){const a=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=Ms(t.bodyFont),d=Ms(t.titleFont),u=Ms(t.footerFont),h=i.length,p=r.length,x=s.length,b=Ni(t.padding);let N=b.height,v=0,j=s.reduce((A,E)=>A+E.before.length+E.lines.length+E.after.length,0);if(j+=e.beforeBody.length+e.afterBody.length,h&&(N+=h*d.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),j){const A=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;N+=x*A+(j-x)*c.lineHeight+(j-1)*t.bodySpacing}p&&(N+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let w=0;const S=function(A){v=Math.max(v,a.measureText(A).width+w)};return a.save(),a.font=d.string,In(e.title,S),a.font=c.string,In(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,In(s,A=>{In(A.before,S),In(A.lines,S),In(A.after,S)}),w=0,a.font=u.string,In(e.footer,S),a.restore(),v+=b.width,{width:v,height:N}}function q9e(e,t){const{y:a,height:s}=t;return a<s/2?"top":a>e.height-s/2?"bottom":"center"}function W9e(e,t,a,s){const{x:r,width:i}=s,o=a.caretSize+a.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function G9e(e,t,a,s){const{x:r,width:i}=a,{width:o,chartArea:{left:l,right:c}}=e;let d="center";return s==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),W9e(d,e,t,a)&&(d="center"),d}function NB(e,t,a){const s=a.yAlign||t.yAlign||q9e(e,a);return{xAlign:a.xAlign||t.xAlign||G9e(e,t,a,s),yAlign:s}}function V9e(e,t){let{x:a,width:s}=e;return t==="right"?a-=s:t==="center"&&(a-=s/2),a}function Y9e(e,t,a){let{y:s,height:r}=e;return t==="top"?s+=a:t==="bottom"?s-=r+a:s-=r/2,s}function jB(e,t,a,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=a,d=r+i,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:x}=bf(o);let b=V9e(t,l);const N=Y9e(t,c,d);return c==="center"?l==="left"?b+=d:l==="right"&&(b-=d):l==="left"?b-=Math.max(u,p)+r:l==="right"&&(b+=Math.max(h,x)+r),{x:Os(b,0,s.width-t.width),y:Os(N,0,s.height-t.height)}}function Tb(e,t,a){const s=Ni(a.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function CB(e){return po([],wl(e))}function Q9e(e,t,a){return am(e,{tooltip:t,tooltipItems:a,type:"tooltip"})}function SB(e,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?e.override(a):e}const WJ={beforeTitle:yl,title(e){if(e.length>0){const t=e[0],a=t.chart.data.labels,s=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return a[t.dataIndex]}return""},afterTitle:yl,beforeBody:yl,beforeLabel:yl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const a=e.formattedValue;return Ln(a)||(t+=a),t},labelColor(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:yl,afterBody:yl,beforeFooter:yl,footer:yl,afterFooter:yl};function rr(e,t,a,s){const r=e[t].call(a,s);return typeof r>"u"?WJ[t].call(a,s):r}class _B extends cc{static positioners=Gg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&a.options.animation&&s.animations,i=new TJ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Q9e(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:s}=a,r=rr(s,"beforeTitle",this,t),i=rr(s,"title",this,t),o=rr(s,"afterTitle",this,t);let l=[];return l=po(l,wl(r)),l=po(l,wl(i)),l=po(l,wl(o)),l}getBeforeBody(t,a){return CB(rr(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:s}=a,r=[];return In(t,i=>{const o={before:[],lines:[],after:[]},l=SB(s,i);po(o.before,wl(rr(l,"beforeLabel",this,i))),po(o.lines,rr(l,"label",this,i)),po(o.after,wl(rr(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,a){return CB(rr(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:s}=a,r=rr(s,"beforeFooter",this,t),i=rr(s,"footer",this,t),o=rr(s,"afterFooter",this,t);let l=[];return l=po(l,wl(r)),l=po(l,wl(i)),l=po(l,wl(o)),l}_createItems(t){const a=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=a.length;c<d;++c)l.push(H9e(this.chart,a[c]));return t.filter&&(l=l.filter((u,h,p)=>t.filter(u,h,p,s))),t.itemSort&&(l=l.sort((u,h)=>t.itemSort(u,h,s))),In(l,u=>{const h=SB(t.callbacks,u);r.push(rr(h,"labelColor",this,u)),i.push(rr(h,"labelPointStyle",this,u)),o.push(rr(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,a){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Gg[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=wB(this,s),d=Object.assign({},l,c),u=NB(this.chart,s,d),h=jB(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,s,r){const i=this.getCaretPosition(t,s,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=bf(l),{x:p,y:x}=t,{width:b,height:N}=a;let v,j,w,S,A,E;return i==="center"?(A=x+N/2,r==="left"?(v=p,j=v-o,S=A+o,E=A-o):(v=p+b,j=v+o,S=A-o,E=A+o),w=v):(r==="left"?j=p+Math.max(c,u)+o:r==="right"?j=p+b-Math.max(d,h)-o:j=this.caretX,i==="top"?(S=x,A=S-o,v=j-o,w=j+o):(S=x+N,A=S+o,v=j+o,w=j-o),E=S),{x1:v,x2:j,x3:w,y1:S,y2:A,y3:E}}drawTitle(t,a,s){const r=this.title,i=r.length;let o,l,c;if(i){const d=vf(s.rtl,this.x,this.width);for(t.x=Tb(this,s.titleAlign,s),a.textAlign=d.textAlign(s.titleAlign),a.textBaseline="middle",o=Ms(s.titleFont),l=s.titleSpacing,a.fillStyle=s.titleColor,a.font=o.string,c=0;c<i;++c)a.fillText(r[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,a,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=Ms(i.bodyFont),h=Tb(this,"left",i),p=r.x(h),x=c<u.lineHeight?(u.lineHeight-c)/2:0,b=a.y+x;if(i.usePointStyle){const N={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=r.leftForLtr(p,d)+d/2,j=b+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Fk(t,N,v,j),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Fk(t,N,v,j)}else{t.lineWidth=jn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const N=r.leftForLtr(p,d),v=r.leftForLtr(r.xPlus(p,1),d-2),j=bf(o.borderRadius);Object.values(j).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Aw(t,{x:N,y:b,w:d,h:c,radius:j}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Aw(t,{x:v,y:b+1,w:d-2,h:c-2,radius:j}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(N,b,d,c),t.strokeRect(N,b,d,c),t.fillStyle=o.backgroundColor,t.fillRect(v,b+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,a,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=Ms(s.bodyFont);let p=h.lineHeight,x=0;const b=vf(s.rtl,this.x,this.width),N=function(T){a.fillText(T,b.x(t.x+x),t.y+p/2),t.y+=p+i},v=b.textAlign(o);let j,w,S,A,E,_,k;for(a.textAlign=o,a.textBaseline="middle",a.font=h.string,t.x=Tb(this,v,s),a.fillStyle=s.bodyColor,In(this.beforeBody,N),x=l&&v!=="right"?o==="center"?d/2+u:d+2+u:0,A=0,_=r.length;A<_;++A){for(j=r[A],w=this.labelTextColors[A],a.fillStyle=w,In(j.before,N),S=j.lines,l&&S.length&&(this._drawColorBox(a,t,A,b,s),p=Math.max(h.lineHeight,c)),E=0,k=S.length;E<k;++E)N(S[E]),p=h.lineHeight;In(j.after,N)}x=0,p=h.lineHeight,In(this.afterBody,N),t.y-=i}drawFooter(t,a,s){const r=this.footer,i=r.length;let o,l;if(i){const c=vf(s.rtl,this.x,this.width);for(t.x=Tb(this,s.footerAlign,s),t.y+=s.footerMarginTop,a.textAlign=c.textAlign(s.footerAlign),a.textBaseline="middle",o=Ms(s.footerFont),a.fillStyle=s.footerColor,a.font=o.string,l=0;l<i;++l)a.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,a,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:d,height:u}=s,{topLeft:h,topRight:p,bottomLeft:x,bottomRight:b}=bf(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(l+h,c),o==="top"&&this.drawCaret(t,a,s,r),a.lineTo(l+d-p,c),a.quadraticCurveTo(l+d,c,l+d,c+p),o==="center"&&i==="right"&&this.drawCaret(t,a,s,r),a.lineTo(l+d,c+u-b),a.quadraticCurveTo(l+d,c+u,l+d-b,c+u),o==="bottom"&&this.drawCaret(t,a,s,r),a.lineTo(l+x,c+u),a.quadraticCurveTo(l,c+u,l,c+u-x),o==="center"&&i==="left"&&this.drawCaret(t,a,s,r),a.lineTo(l,c+h),a.quadraticCurveTo(l,c,l+h,c),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Gg[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=wB(this,t),c=Object.assign({},o,this._size),d=NB(a,t,c),u=jB(t,c,d,a);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Ni(a.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,a),SJ(t,a.textDirection),i.y+=o.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),_J(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Cw(s,r),o=this._positionChanged(r,a);(i||o)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,s=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,a,s),l=this._positionChanged(o,t),c=a||!Cw(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),c}_getActiveElements(t,a,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return a.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,a){const{caretX:s,caretY:r,options:i}=this,o=Gg[i.position].call(this,t,a);return o!==!1&&(s!==o.x||r!==o.y)}}var K9e={id:"tooltip",_element:_B,positioners:Gg,afterInit(e,t,a){a&&(e.tooltip=new _B({chart:e,options:a}))},beforeUpdate(e,t,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,t,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,t){if(e.tooltip){const a=t.replay;e.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:WJ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const X9e=(e,t,a,s)=>(typeof t=="string"?(a=e.push(t)-1,s.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function Z9e(e,t,a,s){const r=e.indexOf(t);if(r===-1)return X9e(e,t,a,s);const i=e.lastIndexOf(t);return r!==i?a:r}const J9e=(e,t)=>e===null?null:Os(Math.round(e),0,t);function AB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class eqe extends fh{static id="category";static defaults={ticks:{callback:AB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const s=this.getLabels();for(const{index:r,label:i}of a)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(Ln(t))return null;const s=this.getLabels();return a=isFinite(a)&&s[a]===t?a:Z9e(s,t,dn(a,t),this._addedLabels),J9e(a,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),a||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,a=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=a;o++)r.push({value:o});return r}getLabelForValue(t){return AB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function tqe(e,t){const a=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:p}=e,x=i||1,b=u-1,{min:N,max:v}=t,j=!Ln(o),w=!Ln(l),S=!Ln(d),A=(v-N)/(h+1);let E=T8((v-N)/b/x)*x,_,k,T,O;if(E<1e-14&&!j&&!w)return[{value:N},{value:v}];O=Math.ceil(v/E)-Math.floor(N/E),O>b&&(E=T8(O*E/b/x)*x),Ln(c)||(_=Math.pow(10,c),E=Math.ceil(E*_)/_),r==="ticks"?(k=Math.floor(N/E)*E,T=Math.ceil(v/E)*E):(k=N,T=v),j&&w&&i&&m8e((l-o)/i,E/1e3)?(O=Math.round(Math.min((l-o)/E,u)),E=(l-o)/O,k=o,T=l):S?(k=j?o:k,T=w?l:T,O=d-1,E=(T-k)/O):(O=(T-k)/E,sp(O,Math.round(O),E/1e3)?O=Math.round(O):O=Math.ceil(O));const $=Math.max(E8(E),E8(k));_=Math.pow(10,Ln(c)?$:c),k=Math.round(k*_)/_,T=Math.round(T*_)/_;let R=0;for(j&&(p&&k!==o?(a.push({value:o}),k<o&&R++,sp(Math.round((k+R*E)*_)/_,o,TB(o,A,e))&&R++):k<o&&R++);R<O;++R){const P=Math.round((k+R*E)*_)/_;if(w&&P>l)break;a.push({value:P})}return w&&p&&T!==l?a.length&&sp(a[a.length-1].value,l,TB(l,A,e))?a[a.length-1].value=l:a.push({value:l}):(!w||T===l)&&a.push({value:T}),a}function TB(e,t,{horizontal:a,minRotation:s}){const r=El(s),i=(a?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class nqe extends fh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return Ln(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=a?r:c,l=c=>i=s?i:c;if(t){const c=Do(r),d=Do(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,o=tqe(r,i);return t.bounds==="ticks"&&f8e(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let a=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-a)/Math.max(t.length-1,1)/2;a-=r,s+=r}this._startValue=a,this._endValue=s,this._valueRange=s-a}getLabelForValue(t){return qD(t,this.chart.options.locale,this.options.ticks.format)}}class aqe extends nqe{static id="linear";static defaults={ticks:{callback:xJ.formatters.numeric}};determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=wi(t)?t:0,this.max=wi(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,s=El(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const l1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},or=Object.keys(l1);function EB(e,t){return e-t}function kB(e,t){if(Ln(t))return null;const a=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),wi(o)||(o=typeof s=="string"?a.parse(o,s):a.parse(o)),o===null?null:(r&&(o=r==="week"&&(qp(i)||i===!0)?a.startOf(o,"isoWeek",i):a.startOf(o,r)),+o)}function LB(e,t,a,s){const r=or.length;for(let i=or.indexOf(e);i<r-1;++i){const o=l1[or[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-t)/(l*o.size))<=s)return or[i]}return or[r-1]}function sqe(e,t,a,s,r){for(let i=or.length-1;i>=or.indexOf(a);i--){const o=or[i];if(l1[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return or[a?or.indexOf(a):0]}function rqe(e){for(let t=or.indexOf(e)+1,a=or.length;t<a;++t)if(l1[or[t]].common)return or[t]}function PB(e,t,a){if(!a)e[t]=!0;else if(a.length){const{lo:s,hi:r}=UD(a,t),i=a[s]>=t?a[s]:a[r];e[i]=!0}}function iqe(e,t,a,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=a[l],c>=0&&(t[c].major=!0);return t}function DB(e,t,a){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!a?s:iqe(e,s,r,a)}class OB extends fh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const s=t.time||(t.time={}),r=this._adapter=new nHe._date(t.adapters.date);r.init(a),ap(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:kB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=wi(r)&&!isNaN(r)?r:+a.startOf(Date.now(),s),i=wi(i)&&!isNaN(i)?i:+a.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],s=t[t.length-1]),{min:a,max:s}}buildTicks(){const t=this.options,a=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=y8e(r,i,o);return this._unit=a.unit||(s.autoSkip?LB(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):sqe(this,l.length,a.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:rqe(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),DB(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?a=1-r:a=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;a=Os(a,0,o),s=Os(s,0,o),this._offsets={start:a,end:s,factor:1/(a+1+s)}}_generate(){const t=this._adapter,a=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||LB(i.minUnit,a,s,this._getLabelCapacity(a)),l=dn(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=qp(c)||c===!0,u={};let h=a,p,x;if(d&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,d?"day":o),t.diff(s,a,o)>1e5*l)throw new Error(a+" and "+s+" are too far apart with stepSize of "+l+" "+o);const b=r.ticks.source==="data"&&this.getDataTimestamps();for(p=h,x=0;p<s;p=+t.add(p,l,o),x++)PB(u,p,b);return(p===s||r.bounds==="ticks"||x===1)&&PB(u,p,b),Object.keys(u).sort(EB).map(N=>+N)}getLabelForValue(t){const a=this._adapter,s=this.options.time;return s.tooltipFormat?a.format(t,s.tooltipFormat):a.format(t,s.displayFormats.datetime)}format(t,a){const r=this.options.time.displayFormats,i=this._unit,o=a||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,a,s,r){const i=this.options,o=i.ticks.callback;if(o)return ea(o,[t,a,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],p=s[a],x=d&&h&&p&&p.major;return this._adapter.format(t,r||(x?h:u))}generateTickLabels(t){let a,s,r;for(a=0,s=t.length;a<s;++a)r=t[a],r.label=this._tickFormatFunction(r.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+s)*a.factor)}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,s=this.ctx.measureText(t).width,r=El(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const a=this.options.time,s=a.displayFormats,r=s[a.unit]||s.millisecond,i=this._tickFormatFunction(t,0,DB(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],a,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,s=r.length;a<s;++a)t=t.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,s;if(t.length)return t;const r=this.getLabels();for(a=0,s=r.length;a<s;++a)t.push(kB(this,r[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return hJ(t.sort(EB))}}function Eb(e,t,a){let s=0,r=e.length-1,i,o,l,c;a?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=fu(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=fu(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const d=o-i;return d?l+(c-l)*(t-i)/d:l}class TVe extends OB{static id="timeseries";static defaults=OB.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=Eb(a,this.min),this._tableRange=Eb(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:s}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=t.length;o<l;++o)d=t[o],d>=a&&d<=s&&r.push(d);if(r.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const t=this.min,a=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(a)||s.length===1)&&s.push(a),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),s=this.getLabelTimestamps();return a.length&&s.length?t=this.normalize(a.concat(s)):t=a.length?a:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Eb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return Eb(this._table,s*this._tableRange+this._minPos,!0)}}const GJ="label";function MB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function oqe(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function VJ(e,t){e.labels=t}function YJ(e,t,a=GJ){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[a]===r[a]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function lqe(e,t=GJ){const a={labels:[],datasets:[]};return VJ(a,e.labels),YJ(a,e.datasets,t),a}function cqe(e,t){const{height:a=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...p}=e,x=f.useRef(null),b=f.useRef(null),N=()=>{x.current&&(b.current=new o1(x.current,{type:o,data:lqe(l,i),options:c&&{...c},plugins:d}),MB(t,b.current))},v=()=>{MB(t,null),b.current&&(b.current.destroy(),b.current=null)};return f.useEffect(()=>{!r&&b.current&&c&&oqe(b.current,c)},[r,c]),f.useEffect(()=>{!r&&b.current&&VJ(b.current.config.data,l.labels)},[r,l.labels]),f.useEffect(()=>{!r&&b.current&&l.datasets&&YJ(b.current.config.data,l.datasets,i)},[r,l.datasets]),f.useEffect(()=>{b.current&&(r?(v(),setTimeout(N)):b.current.update(h))},[r,c,l.labels,l.datasets,h]),f.useEffect(()=>{b.current&&(v(),setTimeout(N))},[o]),f.useEffect(()=>(N(),()=>v()),[]),n.jsx("canvas",{ref:x,role:"img",height:a,width:s,...p,children:u})}const dqe=f.forwardRef(cqe);function e3(e,t){return o1.register(t),f.forwardRef((a,s)=>n.jsx(dqe,{...a,ref:s,type:e}))}const uqe=e3("line",eHe),mqe=e3("bar",XBe),fqe=e3("pie",tHe);o1.register(eqe,aqe,O9e,A9e,T9e,x9e,B9e,K9e,F9e);const QJ=e=>n.jsx(aa,{...e}),hqe=e=>n.jsx(e9,{...e}),gqe=e=>n.jsx(sx,{...e}),pqe=e=>n.jsx(pa,{...e}),KJ=e=>n.jsx(hn,{...e}),xqe=e=>n.jsx(sue,{...e}),yqe=[{icon:QJ,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:KJ,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:gqe,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:hqe,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],bqe=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],vqe={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},wqe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},Nqe={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},jqe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},Cqe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Sqe=()=>{const e=[{icon:QJ,label:"New Contact"},{icon:KJ,label:"New Campaign"},{icon:pqe,label:"New Task"},{icon:xqe,label:"New Leads"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,a)=>n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:n.jsx(t.icon,{size:20})}),n.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},a))})]})},_qe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]}),Aqe=({name:e,company:t,assignedBy:a,source:s,date:r})=>{const{text:i,bg:o}=Cqe(s);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-xs text-gray-500",children:t}),a&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",n.jsx("span",{className:"font-semibold text-gray-700",children:a})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:r}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${o} px-2 py-0.5 rounded-full`,children:s})]})]})})},Tqe=({title:e,children:t})=>n.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),Eqe=({title:e,chartData:t,chartOptions:a})=>{const[s,r]=f.useState("bar"),i=s==="pie"?Nqe:t,o=s==="pie"?jqe:a,l=s==="line"?uqe:s==="pie"?fqe:mqe,c=s==="pie"?250:300;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsxs("select",{value:s,onChange:d=>r(d.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[n.jsx("option",{value:"bar",children:"Bar"}),n.jsx("option",{value:"line",children:"Line"}),n.jsx("option",{value:"pie",children:"Pie"})]})]}),n.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:n.jsx(l,{data:i,options:o})})]})};function kqe(){const{user:e}=en();return f.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),n.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:n.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),n.jsx(Sqe,{}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:yqe.map(t=>n.jsx(_qe,{...t},t.title))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsx(Eqe,{title:"Leads & Conversions",chartData:vqe,chartOptions:wqe}),n.jsx(Tqe,{title:"Latest Leads",children:bqe.map((t,a)=>n.jsx(Aqe,{...t},a))})]})]})})}function Lqe(){f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[a,s]=f.useState(""),[r,i]=f.useState("All Statuses"),o=f.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),l=h=>t(h),c=()=>t(null),d=f.useMemo(()=>[{title:"Total Accounts",value:o.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:aa},{title:"Customers",value:o.filter(h=>h.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Oo},{title:"Prospects",value:o.filter(h=>h.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Qn},{title:"Partners",value:o.filter(h=>h.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:nn},{title:"Active",value:o.filter(h=>h.status==="CUSTOMER"||h.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Oo},{title:"Inactive",value:o.filter(h=>h.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:Mo},{title:"Former",value:o.filter(h=>h.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:Mo}],[o]);if(e)return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:n.jsx("div",{children:n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,n.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Website:"})," ",n.jsx("br",{}),n.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Industry:"})," ",n.jsx("br",{}),e.industry]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Territory:"})," ",n.jsx("br",{}),e.territory]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",n.jsx("br",{}),e.phone_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",n.jsx("br",{}),e.billing_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",n.jsx("br",{}),e.shipping_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),e.created_by," on ",e.created_date]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),e.last_updated]})]})]})]});const u=o.filter(h=>{const p=h.company.toLowerCase().includes(a.toLowerCase())||h.url.toLowerCase().includes(a.toLowerCase())||h.industry.toLowerCase().includes(a.toLowerCase())||h.territory.toLowerCase().includes(a.toLowerCase())||h.phone_number.toLowerCase().includes(a.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(h.status==="CUSTOMER"||h.status==="PARTNER")||r==="Inactive"&&h.status==="INACTIVE"||r==="Former"&&h.status==="FORMER"||h.status.toLowerCase()===r.toLowerCase();return p&&x});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[n.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:d.map(h=>n.jsx(Pqe,{...h},h.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:a,onChange:h=>s(h.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:h=>i(h.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Customer"}),n.jsx("option",{children:"Prospect"}),n.jsx("option",{children:"Partner"}),n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Inactive"}),n.jsx("option",{children:"Former"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsxs("tbody",{children:[u.map((h,p)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>l(h),children:[n.jsx("td",{className:"py-3 px-4 break-words",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:h.company}),n.jsx("div",{className:"text-gray-500 text-xs break-words",children:h.url})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h.status==="CUSTOMER"?"bg-green-100 text-green-700":h.status==="PROSPECT"?"bg-purple-100 text-purple-700":h.status==="PARTNER"?"bg-pink-100 text-pink-700":h.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:h.status})}),n.jsx("td",{className:"py-3 px-4 break-words",children:h.industry}),n.jsx("td",{className:"py-3 px-4 break-words",children:h.territory}),n.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:h.phone_number})]})]},p)),u.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const Pqe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]});function Dqe(){f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=f.useState(!1),[a,s]=f.useState(null),[r,i]=f.useState(!1),[o,l]=f.useState(""),[c,d]=f.useState("All Contacts"),[u,h]=f.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=f.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),b=E=>{E.target.id==="modalBackdrop"&&t(!1)},N=E=>{s(E)},v=()=>{s(null)},j=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},w=(E,_)=>{_.stopPropagation(),i(!0),x(E),t(!0)},S=E=>{const{name:_,value:k}=E.target;x(T=>({...T,[_]:k}))},A=E=>{if(E.preventDefault(),r)h(_=>_.map(k=>k.id===p.id?{...p}:k));else{const _={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};h(k=>[...k,_])}t(!1)};return a?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:v,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.account}),n.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:n.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[n.jsx(Ql,{}),"Export"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",n.jsx("br",{}),a.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",n.jsx("br",{}),a.email]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),a.createdBy," on ",a.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.jsx("br",{}),a.title]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",n.jsx("br",{}),a.assigned]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",n.jsx("br",{}),a.workPhone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Account:"})," ",n.jsx("br",{}),a.account]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",n.jsx("br",{}),a.phone1]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),a.lastUpdated]})]}),n.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[n.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.notes?a.notes:"No additional notes were provided for this contact."})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts...",value:o,onChange:E=>l(E.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Contacts"}),n.jsx("option",{children:"Option 1"}),n.jsx("option",{children:"Option 2"}),n.jsx("option",{children:"Option 3"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-xs text-gray-700",children:u.map((E,_)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>N(E),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:E.name}),n.jsx("div",{className:"text-xs text-gray-500",children:E.title})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ix,{className:"text-gray-500"}),n.jsx("span",{children:E.account})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(na,{className:"text-gray-500"}),n.jsx("span",{children:E.email})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:E.phone1})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:E.phone2})]})]})}),n.jsx("td",{className:"py-3 px-4",children:E.department}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(nn,{className:"text-gray-500"}),n.jsx("span",{children:E.assigned})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Et,{className:"text-gray-500"}),n.jsx("span",{children:E.created})]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:k=>w(E,k),className:"text-blue-500 hover:text-blue-700",children:n.jsx(fa,{})})})})]},_))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),n.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),n.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),n.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),n.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),n.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",children:"Assign To"}),n.jsx("option",{value:"Smith",children:"Smith"}),n.jsx("option",{value:"Doe",children:"Doe"}),n.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),n.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const kb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Za=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),Oqe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Za,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Za,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Za,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Za,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Za,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),Mqe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Za,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Za,{label:"Department",name:"department",value:e.department}),n.jsx(Za,{label:"Title",name:"title",value:e.title}),n.jsx(Za,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Za,{label:"Email",name:"email",value:e.email}),n.jsx(Za,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Za,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),Iqe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Za,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Za,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Za,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Description",name:"description",value:e.description}),n.jsx(Za,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function XJ({isOpen:e,onClose:t}){const[a,s]=f.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(Oqe,{data:kb});case 2:return n.jsx(Mqe,{data:kb});case 3:return n.jsx(Iqe,{data:kb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:kb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(rj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const $qe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function ZJ({lead:e=$qe,onBack:t}){const[a,s]=f.useState(!1);return e?n.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),n.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),n.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:n.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsx("p",{children:e.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:e.company})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:e.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:e.department})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:e.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:e.territory})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assign To:"}),n.jsx("p",{children:e.assignedTo})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:e.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:e.workPhone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:e.phone1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:e.phone2})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:e.source})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),n.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",n.jsx("br",{}),e.addressLine2," ",n.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),n.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),n.jsx(XJ,{isOpen:a,onClose:()=>s(!1)})]}):null}const Rqe=Yf.all(),tT=Rqe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function zqe(){const[e,t]=f.useState(null),[a,s]=f.useState(!1),[r,i]=f.useState(null),[o,l]=f.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,d]=f.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[u,h]=f.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=k=>t(k),x=()=>t(null),[b,N]=f.useState(""),[v,j]=f.useState("All Accounts"),w=()=>{s(!1),i(null),h({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=k=>{i(k),s(!0),h({work_ccode:k.work_ccode||"+63",work_phone:k.workPhone||"",m1_ccode:k.m1_ccode||"+63",mobile_phone_1:k.phone1||"",m2_ccode:k.m2_ccode||"+63",mobile_phone_2:k.phone2||""})},A=k=>{window.confirm("Are you sure you want to delete this lead?")&&d(c.filter(T=>T.id!==k))},E=k=>{const{name:T,value:O}=k.target;h($=>({...$,[T]:O}))},_=k=>{k.preventDefault();const T=new FormData(k.target),O=Object.fromEntries(T.entries());O.name=`${O.firstName} ${O.lastName}`,O.assignedTo=o.find($=>$.id.toString()===O.assignedTo)?.first_name+" "+o.find($=>$.id.toString()===O.assignedTo)?.last_name,O.work_ccode=u.work_ccode,O.workPhone=u.work_phone,O.m1_ccode=u.m1_ccode,O.phone1=u.mobile_phone_1,O.m2_ccode=u.m2_ccode,O.phone2=u.mobile_phone_2,d(r?c.map($=>$.id===r.id?{...$,...O}:$):[...c,{...O,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),w()};return e?n.jsx(ZJ,{lead:e,onBack:x}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qn,{className:"mr-2 text-blue-600"})," Leads"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[n.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[n.jsx(Ql,{})," Download"]}),n.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Leads...",value:b,onChange:k=>N(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:k=>j(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Leads"}),n.jsx("option",{children:"New"}),n.jsx("option",{children:"Contacted"}),n.jsx("option",{children:"Qualified"}),n.jsx("option",{children:"Converted"}),n.jsx("option",{children:"Lost"})]})})]}),n.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[n.jsx("div",{children:"Name"}),n.jsx("div",{children:"Account"}),n.jsx("div",{children:"Title"}),n.jsx("div",{children:"Department"}),n.jsx("div",{children:"Email"}),n.jsx("div",{children:"Work Phone"}),n.jsx("div",{children:"Assigned To"}),n.jsx("div",{children:"Updated"}),n.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(k=>n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(k),children:[n.jsx("div",{className:"truncate",children:k.name}),n.jsx("div",{className:"truncate",children:k.company}),n.jsx("div",{className:"truncate",children:k.title}),n.jsx("div",{className:"truncate",children:k.department}),n.jsx("div",{className:"truncate",children:k.email}),n.jsxs("div",{className:"truncate",children:[k.work_ccode," ",k.workPhone]}),n.jsx("div",{className:"truncate",children:k.assignedTo}),n.jsx("div",{className:"truncate",children:k.lastUpdated}),n.jsxs("div",{className:"flex justify-center space-x-2",children:[n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:T=>{T.stopPropagation(),S(k)},children:n.jsx(fa,{})}),n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:T=>{T.stopPropagation(),A(k.id)},children:n.jsx(Gt,{})})]})]},k.id))]}),a&&n.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:w,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:_,children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),n.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),n.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),n.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),n.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),n.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),n.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"work_ccode",value:u.work_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:tT.map(k=>n.jsx("option",{value:k.code,children:k.code},k.code))}),n.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:u.work_phone,onChange:E,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m1_ccode",value:u.m1_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:tT.map(k=>n.jsx("option",{value:k.code,children:k.code},k.code))}),n.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:u.mobile_phone_1,onChange:E,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m2_ccode",value:u.m2_ccode,onChange:E,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:tT.map(k=>n.jsx("option",{value:k.code,children:k.code},k.code))}),n.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:u.mobile_phone_2,onChange:E,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),n.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),n.jsxs("select",{name:"assignedTo",defaultValue:o.find(k=>`${k.first_name} ${k.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",disabled:!0,children:"Select user"}),o.map(k=>n.jsxs("option",{value:k.id,children:[k.first_name," ",k.last_name]},k.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),n.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),n.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),n.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const IB=["To Do","In Progress","Review","Completed"],Eg=10,Fqe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},$B=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Uqe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,u=o?"Contact":l?"Deal":i?"Account":r?"Lead":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},Bqe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id;let N="Lead",v="",j="",w="",S="Lead",A="",E="",_="";const k=l(),T=p(),O=o(),$=h();if(k){N="Account",S="Account",A=T,v=String(k);const R=c(),P=d(),I=x(),H=b();R?(j="Contact",E="Contact",_=I,w=String(R)):P&&(E="Deal",j="Deal",_=H,w=String(P))}else O?(S="Lead",A=$,N="Lead",v=String(O)):e.related_type==="Account"&&(N="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:A,relatedType2Text:E,relatedTo2Text:_,subject:e.title,relatedType1:N,relatedTo1:v,relatedType2:j,relatedTo2:w}};function Hqe(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,h]=f.useState([]),[p,x]=f.useState(!0),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[A,E]=f.useState([]),[_,k]=f.useState(1),[T,O]=f.useState(null),[$,R]=f.useState(!1),P=wt(),I=Zt(),[H,Q]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});f.useEffect(()=>{const he=I.state?.openTaskModal,Z=I.state?.initialTaskData;he&&(i(!0),Z&&Q(_e=>({..._e,...Z})),P(I.pathname,{replace:!0,state:{}}))},[I,P]);const G=async()=>{try{const he=await te.get("/users/all");E(Array.isArray(he.data)?he.data:[])}catch(he){console.error("Failed to fetch users:",he),q.error("Failed to fetch users.")}},K=async()=>{try{x(!0);const he=await te.get("/tasks/all"),_e=(Array.isArray(he.data)?he.data:[]).map(Bqe);_e.sort((ke,ze)=>{const tt=ke.createdAt?new Date(ke.createdAt):0;return(ze.createdAt?new Date(ze.createdAt):0)-tt}),console.log("Fetched Tasks:",_e),h(_e),a==="list"&&k(1)}catch(he){console.error("Failed to load tasks:",he),q.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{!t&&e&&(G(),K())},[t,e]);const W=()=>{l(null),Q({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},J=(he=null,Z=!1)=>{l(he),d(Z),he?Q({id:he.id,subject:he.title||"",description:he.description||"",priority:he.priority||"Normal",status:he.status||"Not started",dueDate:Fqe(he.dueDate),assignedTo:he.assignedToId?String(he.assignedToId):"",notes:he.notes||"",relatedType1Text:he.relatedType1Text||"",relatedTo1Text:he.relatedTo1Text||"",relatedType2Text:he.relatedType2Text||"",relatedTo2Text:he.relatedTo2Text||"",relatedType1:he.relatedType1||"",relatedTo1:he.relatedTo1||"",relatedType2:he.relatedType2||"",relatedTo2:he.relatedTo2||""}):W(),i(!0)},Te=()=>{i(!1),l(null),d(!1),W()},ee=async he=>{const Z=Uqe(he);try{o&&!c?(await te.put(`/tasks/${o.id}`,Z),q.success("Task updated successfully.")):(await te.post("/tasks/create",Z),q.success("Task created successfully.")),i(!1),await K()}catch(_e){console.error("Failed to save task:",_e);const ke=_e.response?.data?.detail||"Failed to save task.";q.error(ke)}},U=he=>{he&&O({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:he.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:he.id}})},je=async()=>{if(!T?.action){O(null);return}const{action:he}=T;R(!0);try{he.type==="delete"&&(await te.delete(`/tasks/${he.targetId}`),q.success("Task deleted successfully."),await K())}catch(Z){console.error("Task action failed:",Z),q.error("Failed to delete task.")}finally{R(!1),O(null)}},be=()=>{$||O(null)},le=f.useMemo(()=>{const he=b.trim().toLowerCase();return[...u].sort((_e,ke)=>{const ze=_e.createdAt?new Date(_e.createdAt):0;return(ke.createdAt?new Date(ke.createdAt):0)-ze}).filter(_e=>{const ke=he===""||_e.title?.toLowerCase().includes(he)||_e.description?.toLowerCase().includes(he)||_e.assignedToName?.toLowerCase().includes(he)||_e.createdBy?.toLowerCase().includes(he),ze=v==="Filter by Status"||_e.status===v,tt=w==="Filter by Priority"||_e.priority===w;return ke&&ze&&tt})},[u,b,v,w]);f.useEffect(()=>{k(1)},[b,v,w,a]),f.useEffect(()=>{if(a==="list"){const he=le.length===0?1:Math.ceil(le.length/Eg);_>he&&k(he)}},[le.length,_,a]);const Ce=f.useMemo(()=>{if(a==="board")return le;const he=(_-1)*Eg;return le.slice(he,he+Eg)},[le,_,a]),Se=f.useMemo(()=>{const he=new Date;return[{title:"To Do",value:u.filter(Z=>Z.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(Z=>Z.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(Z=>Z.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(Z=>Z.dueDate&&new Date(Z.dueDate)<he&&Z.status!=="Completed").length,icon:Wu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(Z=>Z.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Oe=he=>he.dueDate&&new Date(he.dueDate)<new Date&&he.status!=="Completed",ge=he=>{switch(he.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},He=he=>{switch(he){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ne=he=>{switch(he){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>J(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Se.map(he=>n.jsx(qqe,{...he},he.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:b,onChange:he=>N(he.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:he=>j(he.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),IB.map(he=>n.jsx("option",{children:he},he))]}),n.jsxs("select",{value:w,onChange:he=>S(he.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&le.length===0&&n.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&le.length>0&&a==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:IB.map(he=>{const Z=Ce.filter(_e=>_e.status===he);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:he}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:Z.length})]}),n.jsx("div",{className:`space-y-3 ${Z.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:Z.length>0?Z.map(_e=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${ge(_e)}`,onClick:()=>J(_e,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:_e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",_e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",_e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:Oe(_e)?"text-red-600":"text-gray-600",children:_e.dateAssigned?$B(_e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:ke=>{ke.stopPropagation(),J(_e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})}),n.jsx("button",{type:"button",onClick:ke=>{ke.stopPropagation(),U(_e)},className:"text-red-500 hover:text-red-700",children:n.jsx(Gt,{})})]})]},_e.id)):n.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},he)})}),!p&&!t&&le.length>0&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:Ce.map(he=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",he),J(he,!0)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:he.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${He(he.status||"To Do")}`,children:he.status||"To Do"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ne(he.priority||"Low")}`,children:he.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:he.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Oe(he)?"text-red-600 font-medium":""}`,children:he.dateAssigned?$B(he.dateAssigned):""}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",onClick:Z=>Z.stopPropagation(),children:[n.jsxs("button",{type:"button",onClick:()=>J(he),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(ma,{})," Edit"]}),n.jsxs("button",{type:"button",onClick:()=>U(he),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[n.jsx(Gt,{})," Delete"]})]})})]},he.id))})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:le.length,pageSize:Eg,currentPage:le.length===0?0:_,onPrev:()=>k(he=>Math.max(he-1,1)),onNext:()=>k(he=>Math.min(he+1,Math.max(1,Math.ceil(le.length/Eg)||1))),label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Te,onSave:ee,onEdit:()=>d(!1),setFormData:Q,formData:H,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:U}),T&&n.jsx(Wqe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:je,onCancel:be,loading:$})]})}function qqe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Wqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Gqe(){f.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=f.useState(!1),[a,s]=f.useState(!1),[r,i]=f.useState(null),[o,l]=f.useState(""),[c,d]=f.useState("All Statuses"),[u,h]=f.useState({show:!1,action:null,campaign:null}),[p,x]=f.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[b,N]=f.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),v=p.filter(R=>{const P=c==="All Statuses"||R.status===c,I=R.name.toLowerCase().includes(o.toLowerCase())||R.subject.toLowerCase().includes(o.toLowerCase());return P&&I}),j=()=>{s(!1),N({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},w=(R,P)=>{P.stopPropagation(),s(!0),N(R),t(!0)},S=(R,P)=>{P.stopPropagation(),h({show:!0,action:"delete",campaign:R})},A=R=>{R.preventDefault(),h({show:!0,action:a?"edit":"add",campaign:{...b}})},E=()=>{if(u.action==="add"){const R={...u.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(P=>[...P,R]),t(!1)}else u.action==="edit"?(x(R=>R.map(P=>P.id===u.campaign.id?{...u.campaign}:P)),t(!1)):u.action==="delete"&&x(R=>R.filter(P=>P.id!==u.campaign.id));h({show:!1,action:null,campaign:null})},_=()=>{h({show:!1,action:null,campaign:null})},k=R=>i(R),T=()=>i(null),O=R=>{const{name:P,value:I}=R.target;N(H=>({...H,[P]:I}))},$=R=>{R.target.id==="modalBackdrop"&&t(!1)};return r?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:T,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-5 h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),n.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Subject:"})," ",n.jsx("br",{}),r.subject]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),r.createdBy]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created On:"})," ",n.jsx("br",{}),r.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",n.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),n.jsxs("p",{className:"sm:col-span-2",children:[n.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",n.jsx("br",{}),r.content]}),r.status==="Scheduled"&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",n.jsx("br",{}),r.recipients]})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),n.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:o,onChange:R=>l(R.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:R=>d(R.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Draft"}),n.jsx("option",{children:"Scheduled"}),n.jsx("option",{children:"Sent"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),n.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Recipients"}),n.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-sm text-gray-700",children:v.map((R,P)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>k(R),children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:R.name}),n.jsx("td",{className:"py-3 px-4",children:R.subject}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.status==="Scheduled"?"bg-yellow-100 text-yellow-700":R.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:R.status})}),n.jsx("td",{className:"py-3 px-4",children:R.recipients?`${R.recipients} emails`:""}),n.jsx("td",{className:"py-3 px-4",children:R.scheduleDate?new Date(R.scheduleDate).toLocaleString():""}),n.jsx("td",{className:"py-3 px-4 text-center",onClick:I=>I.stopPropagation(),children:n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx("button",{onClick:I=>w(R,I),className:"text-blue-500 hover:text-blue-700",children:n.jsx(fa,{})}),n.jsx("button",{onClick:I=>S(R,I),className:"text-red-500 hover:text-red-700",children:n.jsx(Gt,{})})]})})]},P))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:$,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:R=>R.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:a?"Edit Campaign":"Add New Campaign"}),n.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:b.name,onChange:O,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:b.subject,onChange:O,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"status",value:b.status,onChange:O,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Sent",children:"Sent"})]})]}),b.status==="Scheduled"&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",name:"scheduleDate",value:b.scheduleDate,onChange:O,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"recipients",value:b.recipients,onChange:O,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"content",rows:4,value:b.content,onChange:O,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),u.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:_,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:u.action==="delete"?"Confirm Delete":u.action==="edit"?"Confirm Edit":"Confirm Add"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:u.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):u.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):n.jsxs(n.Fragment,{children:["Add new campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:E,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const Vqe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],RB={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function Yqe(){f.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=f.useState(Vqe),[a,s]=f.useState(!1),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,h]=f.useState("All Categories"),[p,x]=f.useState({name:"",category:"",subject:"",body:""}),[b,N]=f.useState({show:!1,action:null,template:null}),v=()=>{l(null),i(null),s(!1)},j=P=>{x({...p,[P.target.name]:P.target.value})},w=()=>{N({show:!0,action:"add",template:{...p}})},S=P=>{i(P),x({name:P.name,category:P.category,subject:P.subject,body:P.body})},A=()=>{N({show:!0,action:"edit",template:{...p,id:r.id}})},E=P=>{N({show:!0,action:"delete",template:P})},_=P=>{zx.success(`Template "${P.name}" selected for use!`),N({show:!1,action:null,template:null})},k=()=>{const P=b.template;if(b.action==="add"){const I={...P,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(H=>[I,...H]),s(!1),x({name:"",category:"",subject:"",body:""})}else b.action==="edit"?(t(I=>I.map(H=>H.id===P.id?{...P}:H).sort((H,Q)=>new Date(Q.date).getTime()-new Date(H.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),l(null)):b.action==="delete"&&(t(I=>I.filter(H=>H.id!==P.id)),l(null));N({show:!1,action:null,template:null})},T=()=>{N({show:!1,action:null,template:null})},O=P=>l(P),$=e.filter(P=>P.name.toLowerCase().includes(c.toLowerCase())&&(u==="All Categories"||P.category===u)),R=(P,I=!1)=>n.jsxs("div",{className:"flex flex-col justify-between h-full",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:P.name}),n.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${RB[P.category]||RB.default}`,children:P.category})]}),n.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:P.subject}),n.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${I?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:I?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:P.body})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!I&&n.jsxs("button",{onClick:H=>{H.stopPropagation(),_(P)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(hn,{})," Use Template"]}),I&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:H=>{H.stopPropagation(),S(P)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(ma,{})," Edit"]}),n.jsxs("button",{onClick:H=>{H.stopPropagation(),E(P)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[n.jsx(Gt,{})," Delete"]})]}),n.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",P.createdBy," | ",P.date]})]})]});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[n.jsx(Rx,{position:"top-center",reverseOrder:!1}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-black"})," Templates"]}),n.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:P=>d(P.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:u,onChange:P=>h(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Categories"}),n.jsx("option",{children:"Welcome"}),n.jsx("option",{children:"Follow-up"}),n.jsx("option",{children:"Newsletter"}),n.jsx("option",{children:"Promotional"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:$.map(P=>n.jsxs("div",{onClick:()=>O(P),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow",children:R(P)})]},P.id))}),(a||r)&&n.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[n.jsx("button",{onClick:v,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),n.jsxs("form",{onSubmit:P=>{P.preventDefault(),r?A():w()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:j,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"category",value:p.category,onChange:j,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"Welcome",children:"Welcome"}),n.jsx("option",{value:"Follow-up",children:"Follow-up"}),n.jsx("option",{value:"Newsletter",children:"Newsletter"}),n.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:j,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:j,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),o&&!r&&n.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:P=>P.stopPropagation(),children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:R(o,!0)})]})}),b.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:T,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Qt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:b.action==="delete"?"Confirm Delete":b.action==="edit"?"Confirm Update":b.action==="add"?"Confirm Add":"Confirm Use"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:b.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the template"," ",n.jsx("span",{className:"font-semibold",children:b.template.name}),"?"]}):b.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:b.template.name}),"?"]}):b.action==="add"?n.jsxs(n.Fragment,{children:["Add new template"," ",n.jsx("span",{className:"font-semibold",children:b.template.name}),"?"]}):n.jsxs(n.Fragment,{children:["Use template"," ",n.jsx("span",{className:"font-semibold",children:b.template.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const av=e=>{if(e==null||e==="")return 0;const t=Number(e);return Number.isFinite(t)?t:0},ef=(e,t="")=>{const a=av(e);return`${t}${a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},zB=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},Qqe=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"2-digit"})},Kqe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},FB=(e,t,a)=>{const s=new Date,r=e?.contact?`${e.contact.first_name||""} ${e.contact.last_name||""}`.trim():"",i=e?.validity_days?String(e.validity_days):"";return{issuedDate:zB(e?.presented_date)||zB(s),subject:"Price Quotation",forName:e?.account?.name||"",attn:r,intro:"We are pleased to submit our proposal as follows:",notes:e?.notes||"",terms:{validity:i?`${i} days from the date of quotation.`:"",payment:"",deliveryPeriod:"",deliveryPoint:""},preparedBy:t?`${t.first_name||""} ${t.last_name||""}`.trim():"",approvedBy:a?.ceo_name||"Admin"}};function Lb(){const e=wt(),t=Zt(),{quoteId:a}=Bo(),{user:s}=en(),r=s?.company?.currency||"",i=f.useMemo(()=>`quote-print:${a||""}`,[a]),[o,l]=f.useState(()=>{const A=t.state?.quote;return A&&String(A.id)===String(a)?A:null}),[c,d]=f.useState(()=>t.state?.companyInfo||null),[u,h]=f.useState(!1),[p,x]=f.useState(()=>{try{const A=sessionStorage.getItem(i);return A?JSON.parse(A):null}catch{return null}});f.useEffect(()=>{if(!a)return;let A=!0;return(async()=>{try{h(!0);const k=!c?await te.get("/company/invoice-info"):null;if(!A)return;if(k?.data&&d(k.data),!o){const T=await te.get("/quotes/admin/fetch-all"),$=(Array.isArray(T?.data)?T.data:[]).find(R=>String(R.id)===String(a));$&&l($)}}catch(_){const k=_?.response?.data?.detail||_?.message||"Failed to load quotation.";q.error(k)}finally{A&&h(!1)}})(),()=>{A=!1}},[a]),f.useEffect(()=>{o&&x(A=>{if(A)return A;try{const _=sessionStorage.getItem(i);if(_)return JSON.parse(_)}catch{}const E=FB(o,s,c);try{sessionStorage.setItem(i,JSON.stringify(E))}catch{}return E})},[o,s,c,i]);const b=A=>{x(A);try{sessionStorage.setItem(i,JSON.stringify(A))}catch{}},N=Array.isArray(o?.items)?o.items:[],v=av(o?.discount_amount),j=av(o?.tax_rate);if(!p)return n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-gray-700",children:u?"Loading...":""})});const w=p.preparedBy||(s?`${s.first_name||""} ${s.last_name||""}`.trim():""),S=p.approvedBy||c?.ceo_name||"CEO";return n.jsxs("div",{className:"min-h-screen bg-gray-50 quote-print-root",children:[n.jsx("style",{children:`
        @page { size: A4; margin: 5mm; }
        @media print {
          html, body { margin: 0 !important; padding: 0 !important; }
          .no-print { display: none !important; }
          .print-surface { box-shadow: none !important; border: none !important; }
          body { background: white !important; }
          .quote-print-root { background: white !important; }

          /* Remove screen gutters/max-width so print is tight */
          .quote-print-page { max-width: none !important; margin: 0 !important; padding: 0 !important; }

          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

          /* Keep the quote meta proportions while printing (left 2 cols + fixed quotation col) */
          .quote-meta-grid { grid-template-columns: 1fr 1fr 240px !important; padding: 0px; }
        }
      `}),n.jsx("div",{className:"no-print sticky top-0 z-10 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3",children:[n.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>e(-1),children:"Back"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>{if(!o)return;const A=FB(o,s,c);b(A)},disabled:!o,children:"Reset fields"}),n.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 text-sm disabled:opacity-70",onClick:()=>window.print(),disabled:!o||u,children:"Print"})]})]})}),n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6 quote-print-page",children:[n.jsx("div",{className:"no-print bg-white border border-gray-200 rounded-xl p-4 mb-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Date"}),n.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.issuedDate||"",onChange:A=>b({...p,issuedDate:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.subject||"",onChange:A=>b({...p,subject:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"For"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.forName||"",onChange:A=>b({...p,forName:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attn"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.attn||"",onChange:A=>b({...p,attn:A.target.value})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Intro"}),n.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.intro||"",onChange:A=>b({...p,intro:A.target.value})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.notes||"",onChange:A=>b({...p,notes:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Validity"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.validity||"",onChange:A=>b({...p,terms:{...p.terms,validity:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Payment"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.payment||"",onChange:A=>b({...p,terms:{...p.terms,payment:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Period"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPeriod||"",onChange:A=>b({...p,terms:{...p.terms,deliveryPeriod:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Point"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPoint||"",onChange:A=>b({...p,terms:{...p.terms,deliveryPoint:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Approved by"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.approvedBy||"",onChange:A=>b({...p,approvedBy:A.target.value})})]})]})}),n.jsxs("div",{className:"print-surface bg-white border border-gray-200 rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-gray-300 pb-3",children:[n.jsxs("div",{className:"min-w-0 w-4/5",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900 uppercase",children:c?.company_name||""}),c?.company_number?n.jsx("div",{className:"text-sm text-gray-700",children:c.company_number}):null,c?.ceo_email?n.jsxs("div",{className:"text-sm text-gray-700",children:["Email: ",c.ceo_email]}):null,c?.company_website?n.jsxs("div",{className:"text-sm text-gray-700",children:["Web: ",c.company_website]}):null]}),n.jsx("div",{className:"flex items-start gap-3 w-1/6",children:c?.company_logo?n.jsx("img",{src:c.company_logo,alt:"Company logo",className:"w-full h-auto object-contain"}):null})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"quote-meta-grid grid grid-cols-3 text-sm border border-gray-300",children:[n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"For:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.forName||""})]}),n.jsx("div",{className:"quote-meta-quote justify-center text-center p-1 border-b border-t border-r border-gray-300",children:n.jsx("div",{className:"text-xl font-bold text-gray-900",children:"QUOTATION"})}),n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"Attn:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.attn||""})]}),n.jsx("div",{className:"quote-meta-quote justify-center text-center p-2 border-t border-r border-gray-300",children:n.jsxs("div",{className:"text-sm text-gray-700",children:["No."," ",n.jsx("span",{className:"font-semibold",children:Kqe(o?.quote_id||o?.id)})]})}),n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"Subject:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.subject||""})]}),n.jsx("div",{className:"quote-meta-quote md:justify-center border-r border-b border-gray-300 text-center p-2",children:n.jsx("div",{className:"text-sm text-gray-700",children:Qqe(p.issuedDate)})})]}),n.jsx("div",{className:"mt-4 text-sm text-gray-900 whitespace-pre-wrap",children:p.intro||""})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border border-gray-400 border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-14",children:"Item"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 text-left",children:"Description"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Qty"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Unit"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Unit Price"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Total Cost"})]})}),n.jsx("tbody",{children:N.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"border border-gray-400 px-2 py-4 text-center text-gray-600",children:"No line items."})}):N.map((A,E)=>{const _=A?.name?String(A.name).trim():"",k=A?.description?String(A.description).trim():"",T=A?.variant?String(A.variant).trim():"",O=A?.sku?String(A.sku).trim():"",$=T&&O?`${T} (${O})`:O?`(${O})`:T,P=[_,k,$].map(I=>I?String(I).trim():"").filter(Boolean).join(`
`);return n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:E+1}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 whitespace-pre-wrap",children:P}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:av(A?.quantity)||""}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:A?.unit||""}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:ef(A?.unit_price,r)}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:ef(A?.line_total,r)})]},A?.id??E)})})]})}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("table",{className:"text-sm border border-gray-400 border-collapse min-w-[280px]",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"SUB TOTAL"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:ef(o?.subtotal,r)})]}),v>0?n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"Less: Discount"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:ef(o?.discount_amount,r)})]}):null,n.jsxs("tr",{children:[n.jsxs("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:["Tax ",j.toFixed(0),"%"]}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:ef(o?.tax_amount,r)})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-bold",children:"TOTAL"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right font-bold",children:ef(o?.total_amount,r)})]})]})})}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"TERMS & CONDITIONS:"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Validity"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.validity||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Payment"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.payment||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Delivery Period"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPeriod||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Delivery Point"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPoint||""]})]})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"NOTE:"}),n.jsx("div",{className:"text-sm whitespace-pre-wrap text-gray-900",children:p.notes||""})]})]}),n.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-10 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-700",children:"Prepared by:"}),n.jsx("div",{className:"mt-8 border-b border-gray-400"}),n.jsx("div",{className:"mt-2 font-semibold",children:w})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-700",children:"Approved by:"}),n.jsx("div",{className:"mt-8 border-b border-gray-400"}),n.jsx("div",{className:"mt-2 font-semibold",children:S})]})]}),n.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"Generated from Sari-Sari CRM quotation."})]})]})]})}function Xqe({toggleSidebar:e}){const[t,a]=f.useState(!1),s=f.useRef(null),r=Zt(),i=wt(),{logout:o}=Qs(),{user:l,fetchUser:c}=en(),d={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};f.useEffect(()=>{c()},[]),f.useEffect(()=>{const h=()=>{c()};return window.addEventListener("userProfileUpdated",h),()=>{window.removeEventListener("userProfileUpdated",h)}},[c]);const u=d[r.pathname]||"Group Manager Panel";return f.useEffect(()=>{function h(p){s.current&&!s.current.contains(p.target)&&a(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:u})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(rx,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[l?.first_name," ",l?.middle_name," ",l?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{i("/group-manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:o,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Zqe(){const[e,t]=f.useState(!0),[a,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),c=Zt(),{user:d}=en();f.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),f.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),f.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/group-manager/dashboard",className:({isActive:b})=>b?u:h,children:[n.jsx(ix,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/accounts",className:({isActive:b})=>b?u:h,children:[n.jsx(yd,{})," Accounts"]}),n.jsxs($t,{to:"/group-manager/contacts",className:({isActive:b})=>b?u:h,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/group-manager/leads",className:({isActive:b})=>b?u:h,children:[n.jsx(Qn,{})," Leads"]}),n.jsxs($t,{to:"/group-manager/deals",className:({isActive:b})=>b?u:h,children:[n.jsx(tn,{})," Deals"]}),n.jsxs($t,{to:"/group-manager/quotes",className:({isActive:b})=>b?u:h,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs($t,{to:"/group-manager/targets",className:({isActive:b})=>b?u:h,children:[n.jsx(lr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/tasks",className:({isActive:b})=>b?u:h,children:[n.jsx(Yt,{})," Tasks"]}),n.jsxs($t,{to:"/group-manager/meetings",className:({isActive:b})=>b?u:h,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs($t,{to:"/group-manager/calls",className:({isActive:b})=>b?u:h,children:[n.jsx($s,{})," Calls"]}),n.jsxs($t,{to:"/group-manager/audit",className:({isActive:b})=>b?u:h,children:[n.jsx(As,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/group-manager/territory",className:({isActive:b})=>b?u:h,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(sL,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/users",className:({isActive:b})=>b?u:h,children:[n.jsx(aa,{})," Users"]}),n.jsxs($t,{to:"/group-manager/manage-account",className:({isActive:b})=>b?u:h,children:[n.jsx(nn,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Xqe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}const Jqe=e=>n.jsx(Wt,{...e}),eWe=e=>n.jsx(yd,{...e}),JJ=e=>n.jsx(Gs,{...e}),tWe=e=>n.jsx(sx,{...e}),nWe=e=>n.jsx(Bw,{...e}),aWe=e=>n.jsx(Et,{...e}),sWe=e=>n.jsx(Lt,{...e}),rWe=e=>n.jsx(qw,{...e}),eee=e=>n.jsx(Hw,{...e}),iWe=e=>n.jsx(aa,{...e}),tee=e=>n.jsx(nn,{...e}),oWe=e=>n.jsx(Qn,{...e}),nee=e=>n.jsx(tn,{...e}),lWe=e=>n.jsx(hn,{...e}),aee=e=>n.jsx(lr,{...e}),cWe=e=>n.jsx(pa,{...e}),dWe=e=>n.jsx(Et,{...e}),uWe=e=>n.jsx($s,{...e}),mWe=e=>n.jsx(Xl,{...e}),fWe=e=>n.jsx(As,{...e}),see=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},hWe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},gWe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},pWe=e=>{switch(e){case"call":return{Icon:sWe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:rWe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:aWe,color:"text-blue-500",bgColor:"bg-blue-100"}}},xWe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},yWe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=f.useState(!1),l=f.useRef(null),c=[{icon:eWe,label:"Account"},{icon:tee,label:"Contact"},{icon:oWe,label:"Leads"},{icon:nee,label:"Deals"},{icon:lWe,label:"Quotes"},{icon:aee,label:"Target"},{icon:cWe,label:"Task"},{icon:dWe,label:"Meeting"},{icon:uWe,label:"Call"},{icon:fWe,label:"Audit"},{icon:mWe,label:"Territory"}];f.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{t(h.target.value),o(h.target.value.trim().length>0)},u=h=>{s&&s(h),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(Jqe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((h,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(h),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,title:h.label,onClick:()=>{switch(h.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:n.jsx(h.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[h.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},bWe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const h=new Date(u),x=new Date-h,b=Math.floor(x/6e4),N=Math.floor(x/36e5),v=Math.floor(x/864e5);return b<1?"Just now":b<60?`${b} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},vWe=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(eee,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(bWe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},wWe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),NWe=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=f.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),w=[],S=[];for(let A=0;A<=j;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const w=v.close_date||v.closeDate||null,S=w&&w!==null&&w!=="",A=v.stage||"",E=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=v.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const k=_>0;if(E&&(d++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:k,willBeAdded:S&&k,allFields:Object.keys(v)})),S&&E&&k)try{let T=new Date(w);if(isNaN(T.getTime())){const O=String(w).split("T")[0];T=new Date(O+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${v.id}:`,w,"Type:",typeof w);else{const O=T.getFullYear(),$=T.getMonth()+1,R=`${O}-${String($).padStart(2,"0")}`;l[R]||(l[R]=0),l[R]+=_,c++,console.log(` Added deal ${v.id} to month ${R}: ${_}, total: ${l[R]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${R} (Year: ${O}, Month: ${$})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else E&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:k,closeDate:w,amount:_,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(v=>parseInt(v.split("-")[0])),h=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],b=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;x.push(s[v]);const w=l[j]||0;b.push(w),w>0&&console.log(`Month ${s[v]} (${j}): ${w}`)}if(h.length>0){const v=Math.max(...h);if(v>p)for(let j=p+1;j<=v;j++)for(let w=0;w<12;w++){const S=`${j}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${j}`),b.push(A),A>0&&console.log(`Month ${s[w]} ${j} (${S}): ${A}`)}}const N=Math.max(...b,1);return console.log("Final chart data:",{labels:x,revenues:b,maxRevenue:N,hasData:b.some(v=>v>0)}),{labels:x,revenues:b,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(eee,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(ZN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},nT=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},jWe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=gWe(s||"Website"),d=x=>{if(!x)return"Unknown";const b=new Date(x),v=new Date-b,j=Math.floor(v/6e4),w=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:w<24?b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",h=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:h})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},CWe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=wt(),u={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:h,bg:p}=hWe(u),x=parseFloat(t||0),b=o?x>=o?"up":"down":"up",N=b==="up"?tWe:nWe,v=b==="up"?"text-green-400":"text-red-400",j=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/group-manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:j}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${h} ${p} px-2 py-0.5 rounded-full`,children:u})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:see(x,l)}),n.jsx(N,{size:16,className:`${v} mt-1`})]})]})})},SWe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:b}=pWe(h),{text:N,bg:v}=xWe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const k=new Date(_),O=k-new Date,$=Math.floor(O/864e5);return $===0?`Today, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:$===1?`Tomorrow, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:$===-1?`Yesterday, ${k.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:k.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",E=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/group-manager/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/group-manager/meetings/info?id=${o}`)):d("/group-manager/tasks"):d(h==="call"?`/group-manager/calls/info?id=${o}`:h==="meeting"?`/group-manager/meetings/info?id=${o}`:"/group-manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:E,children:[n.jsx("div",{className:`p-2 rounded-lg ${b} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(JJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(tee,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},_We=()=>{const e=wt(),{user:t}=en(),a=t?.company?.currency||"",[s,r]=f.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState([]),[h,p]=f.useState([]),[x,b]=f.useState([]),[N,v]=f.useState([]),[j,w]=f.useState(!0),[S,A]=f.useState(null),[E,_]=f.useState(""),[k,T]=f.useState([]),[O,$]=f.useState([]),[R,P]=f.useState([]),[I,H]=f.useState([]),[Q,G]=f.useState(0),[K,W]=f.useState(new Date),J=f.useRef(null),Te=f.useRef(null),ee=f.useMemo(()=>{try{if(!E.trim())return[];const le=E.toLowerCase().trim(),Ce=[];return Array.isArray(k)&&k.forEach(Se=>{const Oe=`${Se.first_name||""} ${Se.last_name||""}`.trim().toLowerCase(),ge=(Se.company_name||"").toLowerCase(),He=(Se.email||"").toLowerCase(),Ne=(Se.phone||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le)||Ne.includes(le))&&Ce.push({id:Se.id,name:`${Se.first_name||""} ${Se.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:Se.company_name||"No company",route:`/group-manager/leads/${Se.id}`})}),Array.isArray(O)&&O.forEach(Se=>{const Oe=(Se.name||"").toLowerCase(),ge=(Se.account?.name||"").toLowerCase(),He=(Se.description||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le))&&Ce.push({id:Se.id,name:Se.name||"Unnamed Deal",type:"Deal",details:Se.account?.name||"No account",route:`/group-manager/deals/info?id=${Se.id}`})}),Array.isArray(R)&&R.forEach(Se=>{const Oe=(Se.name||"").toLowerCase(),ge=(Se.email||"").toLowerCase(),He=(Se.phone||"").toLowerCase(),Ne=(Se.website||"").toLowerCase();(Oe.includes(le)||ge.includes(le)||He.includes(le)||Ne.includes(le))&&Ce.push({id:Se.id,name:Se.name||"Unnamed Account",type:"Account",details:Se.email||Se.phone||"No contact info",route:"/group-manager/accounts"})}),Ce.slice(0,10)}catch(le){return console.error("Error in search:",le),[]}},[E,k,O,R]),U=le=>{le.route&&(e(le.route),_(""))},je=f.useCallback(async()=>{w(!0),A(null);try{const[le,Ce,Se,Oe,ge,He,Ne,he]=await Promise.all([te.get("/leads/admin/getLeads").catch(ae=>(console.error("Error fetching leads:",ae),{data:[]})),te.get("/deals/admin/fetch-all").catch(ae=>(console.error("Error fetching deals:",ae),{data:[]})),te.get("/accounts/admin/fetch-all").catch(ae=>(console.error("Error fetching accounts:",ae),{data:[]})),te.get("/tasks/all").catch(ae=>(console.error("Error fetching tasks:",ae),{data:[]})),te.get("/meetings/admin/fetch-all").catch(ae=>(console.error("Error fetching meetings:",ae),{data:[]})),te.get("/calls/admin/fetch-all").catch(ae=>(console.error("Error fetching calls:",ae),{data:[]})),te.get("/logs/read-all").catch(ae=>(console.error("Error fetching logs:",ae),{data:[]})),te.get("/targets/admin/fetch-all").catch(ae=>(console.error("Error fetching targets:",ae),{data:[]}))]),Z=Array.isArray(le.data)?le.data:[],_e=Array.isArray(Ce.data)?Ce.data:[],ke=Array.isArray(Se.data)?Se.data:[],ze=Array.isArray(Oe.data)?Oe.data:[],tt=Array.isArray(ge.data)?ge.data:[],De=Array.isArray(He.data)?He.data:[],at=Array.isArray(Ne.data)?Ne.data:[],et=Array.isArray(he.data)?he.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",_e.length),_e.length>0&&(console.log("First deal sample (raw):",JSON.stringify(_e[0],null,2)),console.log("First deal keys:",Object.keys(_e[0]))),T(Z),$(_e),P(ke),H(et);const V=et.reduce((ae,Fe)=>{const ye=Fe.amount||Fe.value||Fe.target_amount||0,We=parseFloat(typeof ye=="string"?ye.replace(/[^\d.-]/g,""):ye);return ae+(Number.isFinite(We)?We:0)},0);G(V);const ne=Z.filter(ae=>ae.status&&!["Lost","Converted"].includes(ae.status)).length,se=ze.filter(ae=>!ae.dueDate||ae.status==="Completed"?!1:new Date(ae.dueDate)<new Date).length;r({activeLeads:ne,totalDeals:_e.length,activeAccounts:ke.length,overdueTasks:se});const Ee=[...Z].sort((ae,Fe)=>new Date(Fe.created_at||0)-new Date(ae.created_at||0)).slice(0,5);o(Ee);const Ie=[..._e].sort((ae,Fe)=>new Date(Fe.created_at||0)-new Date(ae.created_at||0)).slice(0,5);c(Ie);const pe=new Date,Be=[];De.forEach(ae=>{const Fe=ae.due_date||ae.call_time,ye=(ae.status||"").toUpperCase();if(Fe){const We=new Date(Fe);ye==="COMPLETED"||ye==="MISSED"||ye==="NOT_HELD"||ye==="HELD"||Be.push({type:"Call",title:ae.subject||"Untitled Call",assignedTo:ae.assigned_to||(ae.call_assign_to?`${ae.call_assign_to.first_name||""} ${ae.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Fe,priority:(ae.priority||"MEDIUM").toUpperCase(),id:ae.id,activityType:"call",fullData:ae})}}),tt.forEach(ae=>{const Fe=ae.dueDate||ae.start_time,ye=(ae.status||"").toUpperCase();if(Fe){const We=new Date(Fe);ye==="COMPLETED"||ye==="CANCELLED"||ye==="DONE"||Be.push({type:"Meeting",title:ae.subject||ae.activity||"Untitled Meeting",assignedTo:ae.assignedTo||(ae.meet_assign_to?`${ae.meet_assign_to.first_name||""} ${ae.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Fe,priority:(ae.priority||"MEDIUM").toUpperCase(),id:ae.id,activityType:"meeting",fullData:ae})}});const $e={HIGH:1,MEDIUM:2,LOW:3},Ve=Be.sort((ae,Fe)=>{const ye=$e[ae.priority]||3,We=$e[Fe.priority]||3;if(ye!==We)return ye-We;const it=new Date(ae.scheduledDate||0),ht=new Date(Fe.scheduledDate||0);return it-ht}).slice(0,5);u(Ve),p(_e),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",_e.length);const ut=_e.filter(ae=>(ae.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",ut.length),ut.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),ut.forEach((ae,Fe)=>{let ye=ae.amount;ye&&typeof ye=="object"?ye.toString?ye=parseFloat(ye.toString()):ye=parseFloat(ye):ye=parseFloat(ye)||0,console.log(`Deal ${Fe+1}:`,{id:ae.id,name:ae.name,stage:ae.stage,stage_upper:(ae.stage||"").toUpperCase(),amount:ae.amount,amount_parsed:ye,amount_type:typeof ae.amount,close_date:ae.close_date,close_date_type:typeof ae.close_date,close_date_value:ae.close_date?new Date(ae.close_date):null,has_close_date:!!ae.close_date,has_amount:ye>0,all_keys:Object.keys(ae),full_deal:ae})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",_e.map(ae=>ae.stage))),v(_e);const ve=[...at].sort((ae,Fe)=>new Date(Fe.timestamp||0)-new Date(ae.timestamp||0));b(ve)}catch(le){console.error("Error fetching dashboard data:",le),A("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);f.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),je(),J.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),je(),W(new Date)},3e4),()=>{J.current&&clearInterval(J.current)}),[je]),f.useEffect(()=>{if(!t||!t.id)return;let le=0;const Ce=3;let Se=null;const Oe=()=>{const ge=window.location.protocol==="https:"?"wss:":"ws:",He=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ne=`${ge}//${He}/ws/notifications?user_id=${t.id}`;try{const he=new WebSocket(Ne);Te.current=he,he.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),le=0},he.onmessage=Z=>{try{const _e=JSON.parse(Z.data);console.log(" Real-time notification received:",_e),_e.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(_e.event)&&(console.log(" Refreshing dashboard due to:",_e.event),je(),W(new Date))}catch(_e){console.error("Error parsing WebSocket message:",_e)}},he.onerror=Z=>{le===0&&console.warn(" WebSocket connection unavailable (this is optional)")},he.onclose=()=>{le<Ce&&(le++,Se=setTimeout(()=>{t&&t.id&&Oe()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Oe(),()=>{Se&&clearTimeout(Se),Te.current&&(Te.current.close(),Te.current=null)}},[t,je]);const be=[{icon:iWe,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:aee,title:"Total Targets",value:see(Q,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/group-manager/targets")},{icon:nee,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:JJ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",j,"error:",S),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[j&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:S})}),n.jsx("div",{className:"mb-8",children:n.jsx(yWe,{searchQuery:E,onSearchChange:_,searchResults:ee,onSearchResultClick:U})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:be.map(le=>n.jsx(wWe,{...le,loading:j},le.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(vWe,{logs:x,loading:j}),n.jsx(sj,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(aj,{leads:k,deals:O,targets:I,currencySymbol:a,basePath:"/group-manager"})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(NWe,{revenueData:N,loading:j})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(nT,{title:"Latest Leads",children:i.length>0?i.map((le,Ce)=>n.jsx(jWe,{...le},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(nT,{title:"Latest Deals",children:j?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((le,Ce)=>n.jsx(CWe,{...le,currencySymbol:a},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(nT,{title:"Upcoming Activities",children:d.length>0?d.map((le,Ce)=>n.jsx(SWe,{...le},le.id||Ce)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},aT=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],sT={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Pr=e=>e?e.toUpperCase():"",rT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",AWe=e=>{switch(Pr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},TWe=e=>{switch(Pr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function EWe(){const e=wt();f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(null),[h,p]=f.useState(sT),[x,b]=f.useState(null),[N,v]=f.useState([]),[j,w]=f.useState(!1),[S,A]=f.useState([]),[E,_]=f.useState(null),[k,T]=f.useState([]),[O,$]=f.useState([]),[R,P]=f.useState("Filter by Status"),[I,H]=f.useState(""),[Q,G]=f.useState(null),[K,W]=f.useState(!1),[J,Te]=f.useState(1),[ee,U]=f.useState(10),[je,be]=f.useState("Overview"),[le,Ce]=f.useState(""),[Se,Oe]=f.useState(!1),[ge,He]=f.useState({}),[Ne,he]=f.useState(null),{comments:Z,addComment:_e,refresh:ke}=Ta({relatedType:"account",relatedId:x?.id});f.useEffect(()=>{x?.id&&ke()},[x?.id,ke]);const ze=f.useCallback(async(re=null)=>{w(!0);try{const lt=await te.get("/accounts/admin/fetch-all"),kt=[...Array.isArray(lt.data)?lt.data:[]].sort((Kt,Me)=>{const vt=Kt?.created_at||Kt?.updated_at||0,F=Me?.created_at||Me?.updated_at||0;return new Date(F)-new Date(vt)});if(v(kt),re){const Kt=kt.find(Me=>Me.id===re);b(Kt||null)}}catch(lt){console.error(lt),v([]),lt.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[b]),tt=f.useCallback(async()=>{try{const re=await te.get("/users/all");A(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),De=f.useCallback(async()=>{try{const re=await te.get("/territories/fetch");T(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),at=f.useCallback(async()=>{try{const re=await te.get("/accounts/admin/parent-companies");$(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),et=f.useCallback(async re=>{try{const lt=await te.get(`/activities/accounts/${re}`);He(lt.data&&typeof lt.data=="object"?lt.data:{})}catch(lt){console.error(lt),lt.response?.status===404&&(console.warn("No activities found for this account."),He({}))}},[]);f.useEffect(()=>{ze(),tt(),De(),at()},[ze,tt,De,at]),f.useEffect(()=>{x&&Ce(Pr(x.status)||"PROSPECT")},[x]);const V=N.length,ne=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="customer").length,[N]),se=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="prospect").length,[N]),Ee=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="partner").length,[N]),Ie=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="active").length,[N]),pe=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="inactive").length,[N]),Be=f.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="former").length,[N]),$e=f.useMemo(()=>[{title:"Total",value:V,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:ne,icon:Oo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:se,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Ee,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Ie,icon:Oo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:pe,icon:Mo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Be,icon:Mo,color:"text-orange-600",bgColor:"bg-orange-100"}],[V,ne,se,Ee,Ie,pe,Be]),Ve=f.useMemo(()=>{const re=I.trim().toLowerCase(),lt=R.trim().toUpperCase();return N.filter(zt=>{const kt=[zt?.name,zt?.website,zt?.industry,zt?.territory?.name,zt?.phone_number],Kt=re===""||kt.some(vt=>vt==null?!1:vt.toString().toLowerCase().includes(re)),Me=lt==="FILTER BY STATUS"||Pr(zt.status)===lt;return Kt&&Me})},[N,I,R]),ut=Math.max(1,Math.ceil(Ve.length/ee)||1);f.useEffect(()=>{Te(1)},[I,R,ee]),f.useEffect(()=>{Te(re=>{const lt=Math.max(1,Math.ceil(Ve.length/ee)||1);return re>lt?lt:re})},[Ve.length,ee]);const ve=f.useMemo(()=>{const re=(J-1)*ee;return Ve.slice(re,re+ee)},[Ve,J,ee]);Ve.length===0||(J-1)*ee+1,Math.min(J*ee,Ve.length);const ae=()=>Te(re=>Math.max(re-1,1)),Fe=()=>Te(re=>Math.min(re+1,ut)),ye=re=>{b(re),be("Overview"),Ce(Pr(re?.status)||"PROSPECT")},We=()=>b(null),it=re=>{re.target.id==="accountModalBackdrop"&&!K&&We()},ht=()=>{a(!1),r(!1),u(null),p(sT),o(!1),_(null)},Ae=re=>{re.target.id==="modalBackdrop"&&ht()},Je=re=>re?new Date(re).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ce=re=>{const{name:lt,value:zt}=re.target;p(kt=>({...kt,[lt]:zt}))},X=()=>{p(sT),r(!1),u(null),a(!0)},de=re=>{b(null),re.assigned_accs?_(re.assigned_accs):_(null),p({name:re.name||"",website:re.website||"",phone_number:re.phone_number||"",billing_address:re.billing_address||"",shipping_address:re.shipping_address||"",parent_company:re.parent_company||"",industry:re.industry||"",status:Pr(re.status)||"PROSPECT",territory_id:re.territory?.id?String(re.territory.id):"",assigned_to:re.assigned_accs?.id?String(re.assigned_accs.id):""}),r(!0),u(re.id),a(!0)},D=re=>{re&&G({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:re.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:re.id,name:re.name}})},B=async()=>{if(!Q?.action){G(null);return}const{action:re}=Q,{type:lt,payload:zt,targetId:kt,name:Kt}=re;W(!0);try{if(lt==="create"){o(!0);const Me=await te.post("/accounts/admin",zt);at(),q.success(`Account "${Kt}" created successfully.`);const vt=x?.id||null;ht(),await ze(vt),!x&&Me.data?.id}else if(lt==="update"){if(!kt)throw new Error("Missing account identifier for update.");o(!0),await te.put(`/accounts/admin/${kt}`,zt),q.success(`Account "${Kt}" updated successfully.`);const Me=x?.id&&x.id===kt?kt:null;ht(),await ze(Me),x?.id===kt&&b(null)}else if(lt==="delete"){if(!kt)throw new Error("Missing account identifier for deletion.");const Me=x?.id;c(kt),await te.delete(`/accounts/admin/${kt}`),q.success(`Account "${Kt}" deleted successfully.`),await ze(Me&&Me!==kt?Me:null),Me===kt&&b(null)}}catch(Me){console.error(Me);const vt=lt==="create"?"Failed to create account. Please review the details and try again.":lt==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",F=Me.response?.data?.detail||vt;q.error(F),(lt==="create"||lt==="update")&&o(!1),lt==="delete"&&c(null)}finally{(lt==="create"||lt==="update")&&o(!1),lt==="delete"&&c(null),W(!1),G(null)}},oe=()=>{K||G(null)},ue=async()=>{if(!x||!le)return;const re=Pr(le),lt=Pr(x.status);if(re!==lt){Oe(!0);try{await te.put(`/accounts/admin/${x.id}`,{status:re}),q.success(`Account status updated to ${rT(re)}`),v(zt=>zt.map(kt=>kt.id===x.id?{...kt,status:re}:kt)),b(null)}catch(zt){console.error(zt);const kt=zt.response?.data?.detail||"Failed to update account status. Please try again.";q.error(kt)}finally{Oe(!1)}}},[ie,Pe]=f.useState(!1),xe=re=>{re.preventDefault(),Pe(!0);const lt=h.name.trim();if(!lt){q.error("Account name is required.");return}if(!h.assigned_to){q.error("Assigned To is required.");return}const kt={name:lt,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,parent_company:h.parent_company?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},Kt=s&&d?"update":"create";G({title:Kt==="create"?"Confirm New Account":"Confirm Update",message:Kt==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:lt}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:lt}),"?"]}),confirmLabel:Kt==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Kt,payload:kt,targetId:d||null,name:lt}})},fe=[{label:"Filter by Status",value:"Filter by Status"},...aT.map(re=>({label:re.label,value:re.value}))],qe=Q?.action?.type==="delete"?Q.action.targetId:null,Ze=x&&(l===x.id||qe===x.id),pt=x&&l===x.id,Nt=x?AWe(x.status):"",St=x?n.jsx("div",{id:"accountModalBackdrop",onClick:it,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:re=>re.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:We,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nt}`,children:rT(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>de(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>D(x),disabled:!!Ze,children:pt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(re=>n.jsx("button",{onClick:()=>be(re),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${je===re?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:re},re))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[je==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Je(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Je(x.updated_at)||"N/A"})]})]}),n.jsx(Aa,{comments:Z,onAddComment:_e})]}),je==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),je==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ge.tasks&&ge.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ge.tasks.length,")"]})]}),Ne==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.tasks.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||"No description"}),re.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",re.assigned_to.first_name," ",re.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.due_date||re.created_at)})]},`task-${lt}`))})]}),ge.meetings&&ge.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ge.meetings.length,")"]})]}),Ne==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.meetings.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||re.location||"No description"}),re.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",re.host.first_name," ",re.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.start_time||re.created_at)})]},`meeting-${lt}`))})]}),ge.calls&&ge.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ge.calls.length,")"]})]}),Ne==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.calls.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.call_time||re.created_at)})]},`call-${lt}`))})]}),ge.contacts&&ge.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ge.contacts.length,")"]})]}),Ne==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.contacts.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.first_name?`${re.first_name} `:"",re.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.created_at)})]},`contact-${lt}`))})]}),ge.deals&&ge.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ge.deals.length,")"]})]}),Ne==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.deals.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.deal_id?re.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",re.name||re.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:re.stage||re.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.close_date||re.created_at)})]},`deal-${lt}`))})]}),ge.quotes&&ge.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(Ne==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ge.quotes.length,")"]})]}),Ne==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ne==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ge.quotes.map((re,lt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(re.quote_id?re.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(re.presented_date)||""})]},`quote-${lt}`))})]}),(!ge||(!ge.tasks||ge.tasks.length===0)&&(!ge.meetings||ge.meetings.length===0)&&(!ge.calls||ge.calls.length===0)&&(!ge.quotes||ge.quotes.length===0)&&(!ge.deals||ge.deals.length===0)&&(!ge.contacts||ge.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:le||Pr(x?.status)||"PROSPECT",onChange:re=>Ce(re.target.value),children:aT.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))}),n.jsx("button",{onClick:ue,disabled:Se||!le||Pr(le)===Pr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Se||!le||Pr(le)===Pr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Se?"Updating...":"Update"})]})]})]})]})]})}):null,Ht=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{X(),Pe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:$e.map(re=>n.jsx(kWe,{...re},re.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:re=>H(re.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:R,onChange:re=>P(re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:j?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):Ve.length>0?ve.map(re=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ye(re),et(re.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:re.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:re.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${TWe(re.status)}`,children:rT(re.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:re.phone_number||"--"})]})})]},re.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ve.length,pageSize:ee,currentPage:J,onPrev:ae,onNext:Fe,onPageSizeChange:U,label:"accounts"})]}),on=t?n.jsx("div",{id:"modalBackdrop",onClick:Ae,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:re=>re.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ht(),Pe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||K,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:xe,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(tf,{label:"Name",name:"name",value:h.name,onChange:ce,placeholder:"Company name",required:!0,isSubmitted:ie})}),n.jsx(BB,{label:"Parent Company",value:h.parent_company,onChange:re=>{p(lt=>({...lt,parent_company:re}))},items:O.map(re=>({id:re,name:re})),getLabel:re=>re?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(tf,{label:"Website",name:"website",value:h.website,onChange:ce,placeholder:"https://example.com",disabled:i}),n.jsx(tf,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(tf,{label:"Industry",name:"industry",value:h.industry,onChange:ce,placeholder:"Industry",disabled:i}),n.jsx(tf,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:ce,placeholder:"Billing address",disabled:i}),n.jsx(tf,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:ce,placeholder:"Shipping address",disabled:i}),n.jsx(UB,{label:"Status",name:"status",value:h.status,onChange:ce,options:[{value:"",label:"Select status"},...aT],required:!0,disabled:i}),n.jsx(BB,{label:"Assigned To",value:h.assigned_to,onChange:re=>{const lt=S.find(kt=>String(kt.id)===String(re));_(lt);let zt=null;lt&&lt.assigned_territory&&lt.assigned_territory.length===1&&(zt=lt.assigned_territory[0].id),p(kt=>({...kt,assigned_to:re,territory_id:zt}))},items:S||[],getLabel:re=>`${re?.first_name??""} ${re?.last_name??""} (${re?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ie,disabled:i||S.length===0}),n.jsx(UB,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:ce,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(re=>({value:String(re.id),label:re.name}))||[]],disabled:i||!E||!E.assigned_territory||E.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),Pe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||K,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||K,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,cn=Q?n.jsx(PWe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:B,onCancel:oe,loading:K}):null;return n.jsxs(n.Fragment,{children:[Ht,St,on,cn]})}function kWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function tf({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function UB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function BB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const h=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(LWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h,allowFreeText:u})]})}function LWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(j=>String(j.id)===String(t)),N=b?s(b):t,v=f.useMemo(()=>{const j=h.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:j=>{p(j.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&h.trim()&&!v.some(j=>s(j).toLowerCase()===h.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(h.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const w=String(j.id),S=s(j),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!h.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function PWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const iT={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},bl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),fo=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function DWe(){const e=wt(),t=Zt();f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,h]=f.useState(null),[p,x]=f.useState(!1),[b,N]=f.useState(!1),[v,j]=f.useState(!1),[w,S]=f.useState(null),[A,E]=f.useState(!1),[_,k]=f.useState(null),[T,O]=f.useState(iT),[$,R]=f.useState(""),[P,I]=f.useState("Filter by Accounts"),[H,Q]=f.useState(null),[G,K]=f.useState("Overview"),[W,J]=f.useState(1),[Te,ee]=f.useState(10),[U,je]=f.useState({}),[be,le]=f.useState(null),[Ce,Se]=f.useState(null),{comments:Oe,addComment:ge,refresh:He}=Ta({relatedType:"contact",relatedId:u?.id});f.useEffect(()=>{u?.id&&He()},[u?.id,He]),f.useEffect(()=>{const D=t.state?.contactID;D&&(Se(D),e(t.pathname,{replace:!0,state:{}}))},[t,e]),f.useEffect(()=>{if(Ce&&a.length>0&&!r){const D=a.find(B=>B.id===Ce);D?h(D):q.error("Contact not found."),Se(null)}},[Ce,a,r]);const Ne=f.useCallback(async(D=null)=>{i(!0);try{const B=await te.get("/contacts/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((ie,Pe)=>{const xe=ie?.created_at||ie?.updated_at||0,fe=Pe?.created_at||Pe?.updated_at||0;return new Date(fe)-new Date(xe)});if(s(ue),D){const ie=ue.find(Pe=>Pe.id===D);h(ie||null)}}catch(B){console.error(B),s([]),B.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),he=f.useCallback(async()=>{try{const D=await te.get("/accounts/admin/fetch-all"),oe=[...Array.isArray(D.data)?D.data:[]].sort((ue,ie)=>(ue?.name||"").localeCompare(ie?.name||""));l(oe)}catch(D){console.error(D),l([]),D.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Z=f.useCallback(async()=>{try{const D=await te.get("/users/all"),oe=[...Array.isArray(D.data)?D.data:[]].sort((ue,ie)=>bl(ue).localeCompare(bl(ie)));d(oe)}catch(D){console.error(D),d([]),D.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),_e=f.useCallback(async D=>{try{const B=await te.get(`/activities/contact/${D}`);je(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]);f.useEffect(()=>{Ne(),he(),Z()},[Ne,he,Z]);const ke=f.useMemo(()=>{const D=new Map;o.forEach(oe=>{oe?.id&&oe?.name&&D.set(String(oe.id),oe.name)}),a.forEach(oe=>{oe?.account_id&&oe?.account?.name&&D.set(String(oe.account_id),oe.account.name)});const B=Array.from(D.entries()).sort((oe,ue)=>oe[1].localeCompare(ue[1])).map(([oe,ue])=>({value:oe,label:ue}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...B]},[o,a]),ze=f.useMemo(()=>{const D=$.trim().toLowerCase(),B=P.trim();return a.filter(oe=>{const ue=[oe?.first_name,oe?.last_name,oe?.email,oe?.title,oe?.department,oe?.account?.name,oe?.account?.status,oe?.work_phone,oe?.mobile_phone_1,oe?.mobile_phone_2,oe?.assigned_contact?.first_name,oe?.assigned_contact?.last_name,oe?.contact_creator?.first_name,oe?.contact_creator?.last_name,oe?.notes,fo(oe?.created_at),fo(oe?.updated_at)],ie=D===""||ue.some(xe=>xe==null?!1:xe.toString().toLowerCase().includes(D)),Pe=B==="Filter by Accounts"||String(oe.account_id)===B;return ie&&Pe})},[a,$,P]),tt=Math.max(1,Math.ceil(ze.length/Te)||1);f.useEffect(()=>{J(1)},[$,P,Te]),f.useEffect(()=>{J(D=>{const B=Math.max(1,Math.ceil(ze.length/Te)||1);return D>B?B:D})},[ze.length,Te]);const De=f.useMemo(()=>{const D=(W-1)*Te;return ze.slice(D,D+Te)},[ze,W,Te]),at=()=>J(D=>Math.max(D-1,1)),et=()=>J(D=>Math.min(D+1,tt)),V=f.useMemo(()=>{if(!b||!_)return o;const D=a.find(oe=>oe.id===_);return!D||!D.account||o.some(oe=>oe.id===D.account.id)?o:[...o,D.account]},[o,b,_,a]),ne=f.useCallback(()=>{x(!1),N(!1),k(null),O(iT),j(!1),Ve(!1)},[]),se=D=>{D.target.id==="modalBackdrop"&&!v&&!A&&ne()},Ee=D=>{const{name:B,value:oe}=D.target;O(ue=>({...ue,[B]:oe}))},Ie=()=>{O(iT),N(!1),k(null),x(!0)},pe=async D=>{if(!D)return;const B=await te.get(`/accounts/get/${D.account_id}`);O({first_name:D.first_name||"",last_name:D.last_name||"",account_id:B.data.id?B.data.id:"",title:D.title||"",department:D.department||"",email:D.email||"",work_phone:D.work_phone||"",mobile_phone_1:D.mobile_phone_1||"",mobile_phone_2:D.mobile_phone_2||"",notes:D.notes||"",assigned_to:D.assigned_to?String(D.assigned_to):""}),N(!0),k(D.id),x(!0),h(null)},Be=D=>{if(!D)return;const B=bl(D)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},[$e,Ve]=f.useState(!1),ut=D=>{D.preventDefault(),Ve(!0);const B=T.first_name.trim(),oe=T.last_name.trim();if(!B||!oe){q.error("First name and last name are required.");return}if(!T.account_id){q.error("Account is required.");return}if(!T.assigned_to){q.error("Assigned To is required.");return}const ie=T.email?.trim();if(!ie){q.error("Email is required.");return}if(!ie.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ie)){q.error("Please enter a valid email address.");return}const xe={first_name:B,last_name:oe,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},fe=b&&_?"update":"create",qe=`${B} ${oe}`.trim();S({title:fe==="create"?"Confirm New Contact":"Confirm Update",message:fe==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:qe})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:qe}),"?"]}),confirmLabel:fe==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:fe,payload:xe,targetId:_||null,name:qe}})},ve=async()=>{if(!w?.action){S(null);return}const{action:D}=w,{type:B,payload:oe,targetId:ue,name:ie}=D;E(!0);try{if(B==="create"){j(!0),await te.post("/contacts/admin",oe),q.success(`Contact "${ie}" created successfully.`);const Pe=u?.id||null;ne(),await Ne(Pe)}else if(B==="update"){if(!ue)throw new Error("Missing contact identifier for update.");j(!0),await te.put(`/contacts/admin/${ue}`,oe),q.success(`Contact "${ie}" updated successfully.`);const Pe=u?.id&&u.id===ue?ue:u?.id||null;ne(),await Ne(Pe),u?.id===ue&&h(null)}else if(B==="delete"){if(!ue)throw new Error("Missing contact identifier for deletion.");const Pe=u?.id;Q(ue),await te.delete(`/contacts/admin/${ue}`),q.success(`Contact "${ie}" deleted successfully.`),await Ne(Pe&&Pe!==ue?Pe:null),Pe===ue&&h(null)}}catch(Pe){console.error(Pe);const xe=B==="create"?"Failed to create contact. Please review the details and try again.":B==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",fe=Pe.response?.data?.detail||xe;q.error(fe)}finally{(B==="create"||B==="update")&&j(!1),B==="delete"&&Q(null),E(!1),S(null)}},ae=()=>{A||S(null)},Fe=D=>{h(D),K("Overview")},ye=()=>h(null),We=D=>{D.target.id==="contactModalBackdrop"&&!A&&ye()},it=w?.action?.type==="delete"?w.action.targetId:null,ht=u&&(H===u.id||it===u.id),Ae=u&&H===u.id,Je=u?n.jsx("div",{id:"contactModalBackdrop",onClick:We,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:ye,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:bl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>pe(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Be(u),disabled:!!ht,children:Ae?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(D=>n.jsx("button",{onClick:()=>K(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:bl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:fo(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:fo(u.updated_at)||"N/A"})]})]})}),G==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Aa,{comments:Oe,onAddComment:ge})]}),G==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[U.tasks&&U.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",U.tasks.length,")"]})]}),be==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.tasks.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||"No description"}),D.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",D.assigned_to.first_name," ",D.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.due_date||D.created_at)})]},`task-${B}`))})]}),U.meetings&&U.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",U.meetings.length,")"]})]}),be==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.meetings.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||D.location||"No description"}),D.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",D.host.first_name," ",D.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.start_time||D.created_at)})]},`meeting-${B}`))})]}),U.calls&&U.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",U.calls.length,")"]})]}),be==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.calls.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.call_time||D.created_at)})]},`call-${B}`))})]}),U.deals&&U.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",U.deals.length,")"]})]}),be==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.deals.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",D.name||D.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:D.stage||D.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.close_date||D.created_at)})]},`deal-${B}`))})]}),U.quotes&&U.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>le(be==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",U.quotes.length,")"]})]}),be==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),be==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.quotes.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(D.quote_id?D.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:D.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.presented_date)||""})]},`quote-${B}`))})]}),(!U||(!U.tasks||U.tasks.length===0)&&(!U.meetings||U.meetings.length===0)&&(!U.calls||U.calls.length===0)&&(!U.quotes||U.quotes.length===0)&&(!U.deals||U.deals.length===0)&&(!U.contacts||U.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${bl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const D=encodeURIComponent(u.email),B=encodeURIComponent(""),oe=encodeURIComponent(""),ue=`mailto:${D}?subject=${B}&body=${oe}`;window.location.href=ue},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${bl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${bl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ie(),Ve(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:$,onChange:D=>R(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:D=>I(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ke.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value??D.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ze.length>0?De.map(D=>{const B=[{Icon:na,value:D.email,key:"email"},{Icon:Lt,value:D.work_phone,key:"work_phone"},{Icon:od,value:D.mobile_phone_1,key:"mobile_phone_1"},{Icon:od,value:D.mobile_phone_2,key:"mobile_phone_2"}].filter(oe=>!!oe.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{Fe(D),_e(D.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:bl(D)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:D.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ix,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:D.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:B.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:B.map(({Icon:oe,value:ue,key:ie})=>{const Pe=bt.createElement(oe,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Pe,n.jsx("span",{children:ue})]},ie)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.assigned_contact?`${D.assigned_contact.first_name} ${D.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:fo(D.created_at)||"--"})]})})]},D.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ze.length,pageSize:Te,currentPage:W,onPrev:at,onNext:et,onPageSizeChange:ee,label:"contacts"})]}),X=p?n.jsx("div",{id:"modalBackdrop",onClick:se,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ne(),Ve(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||A,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ut,noValidate:!0,children:[n.jsx(Fc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Ee,placeholder:"First name",required:!0,isSubmitted:$e}),n.jsx(Fc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Ee,placeholder:"Last name",required:!0,isSubmitted:$e}),n.jsx(HB,{label:"Account",value:T.account_id,onChange:D=>O(B=>({...B,account_id:D})),items:b?V:o||[],getLabel:D=>D?.name??"",placeholder:"Search account...",disabled:v||(b?V.length===0:o.length===0),required:!0,isSubmitted:$e}),n.jsx(HB,{label:"Assigned To",value:T.assigned_to,onChange:D=>O(B=>({...B,assigned_to:D})),items:c||[],getLabel:D=>`${D?.first_name??""} ${D?.last_name??""} (${D?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:$e,disabled:v||c.length===0}),n.jsx(Fc,{label:"Title",name:"title",value:T.title,onChange:Ee,placeholder:"Job title",disabled:v}),n.jsx(Fc,{label:"Department",name:"department",value:T.department,onChange:Ee,placeholder:"Department",disabled:v}),n.jsx(Fc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Ee,placeholder:"example@email.com",required:!0,isSubmitted:$e}),n.jsx(Fc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Fc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(Fc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:v}),n.jsx(MWe,{label:"Notes",name:"notes",value:T.notes,onChange:Ee,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{ne(),Ve(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||A,children:v?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,de=w?n.jsx(IWe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:ve,onCancel:ae,loading:A}):null;return n.jsxs(n.Fragment,{children:[ce,Je,X,de]})}function Fc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function HB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(OWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function OWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function MWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function IWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const oT=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function ree({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Bo(),[d,u]=f.useState(e||null),[h,p]=f.useState("Overview"),[x,b]=f.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[v,j]=f.useState(null),[w,S]=f.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,E]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,k]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),b(e.status||"New");return}if(!c)return;const I=await te.get(`/leads/get/${c}`);u(I.data),b(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};f.useEffect(()=>{e?(u(e),b(e.status||"New")):c&&T()},[c,e]);const O=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const I=await te.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const H={...d,status:I.data.status};u(H),i&&i(H),a&&a(),t&&t()}catch(I){console.error(I),q.error("Failed to update lead status")}},$=async I=>{const H={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",H),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const G=(await te.post("/accounts/convertedLead",H)).data.id,K={...A,account_id:G,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},J=(await te.post("/contacts/convertedLead",K)).data.id,Te=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ee=_.amount&&_.amount!==""?parseFloat(_.amount):0,U={..._,account_id:G,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:J,probability:Te(),stage:"Prospecting"},je=await te.post("/deals/convertedLead",U),be=await te.put(`/leads/convert/${I.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const G=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";q.error(G)}},R=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=I=>I.toString().toLowerCase().replace(/\b\w/g,H=>H.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${R(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>$(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),h==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),h==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),v==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Yt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oT(I.due_date||I.created_at)})]},`task-${H}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),v==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oT(I.start_time||I.created_at)})]},`meeting-${H}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),v==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),v==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,H)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oT(I.call_time||I.created_at)})]},`call-${H}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),H=encodeURIComponent(""),Q=encodeURIComponent(""),G=`mailto:${I}?subject=${H}&body=${Q}`;window.location.href=G},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>b(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:O,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const $We=Yf.all(),lT=$We.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),RWe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),zWe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},cT={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function FWe(){const e=wt(),{leadID:t}=Bo();zs();const[a,s]=f.useState(null),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]),[p,x]=f.useState(!1),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState(1),[A,E]=f.useState(10),[_,k]=f.useState(cT),[T,O]=f.useState(!1),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState(null),[G,K]=f.useState(!1),[W,J]=f.useState({});f.useRef(null);const[Te,ee]=f.useState(!1),[U,je]=f.useState(null),[be,le]=f.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Ce,Se]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Oe,ge]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const He=async()=>{try{const Ae=await te.get("/leads/getUsers");l(Ae.data)}catch(Ae){console.error(`Error fetching users: ${Ae}`)}},Ne=async()=>{x(!0);try{const Ae=await te.get("/leads/admin/getLeads");h(Ae.data),console.log(Ae.data)}catch(Ae){console.error(`Error fetching leads: ${Ae}`)}finally{x(!1)}};f.useEffect(()=>{He(),Ne()},[]),f.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const Ae=u.find(Je=>Je.id===Number(t));Ae&&s(Ae)}else!t&&!a&&s(null)},[t,u,r,T]),f.useEffect(()=>{if(U){const Je=(de=>{if(!de)return{code:"+63",number:""};const D=de.match(/^(\+\d+)\s(.+)$/);if(D)return{code:D[1],number:D[2]};if(de.startsWith("+")){const B=de.match(/^(\+\d{1,3})/);if(B)return{code:B[1],number:de.substring(B[1].length).trim()}}return{code:"+63",number:de}})(U.work_phone),ce=[];U.work_phone&&ce.push(`Work: ${U.work_phone}`),U.mobile_phone_1&&ce.push(`Mobile 1: ${U.mobile_phone_1}`),U.mobile_phone_2&&ce.push(`Mobile 2: ${U.mobile_phone_2}`);const X=ce.length>0?ce.join(" | "):"";le({name:U.company_name||"",website:"",countryCode:Je.code,phone_number:Je.number,combinedPhoneNumbers:X,billing_address:U.address||"",shipping_address:U.address||"",industry:"",status:"Prospect",territory_id:U.assigned_to?.territory?.id||null,assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),Se({last_name:U.last_name||"",first_name:U.first_name||"",account_id:null,title:U.title||"",department:U.department||"",email:U.email||"",work_phone:U.work_phone||"",mobile_phone_1:U.mobile_phone_1||"",mobile_phone_2:U.mobile_phone_2||"",notes:U.notes||"",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),ge({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null})}},[U]);const he=Ae=>N(Ae.target.value),Z=f.useMemo(()=>{const Ae=b.trim().toLowerCase(),Je=v.trim().toUpperCase();return u.filter(ce=>{const X=[ce?.first_name,ce?.last_name,ce?.company_name,ce?.title,ce?.email,ce?.work_phone,ce?.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:""],de=Ae===""||X.some(B=>B==null||B===""?!1:B.toString().toLowerCase().includes(Ae));let D=!1;return Je==="FILTER BY STATUS"?D=(ce.status?ce.status.toUpperCase():"")!=="CONVERTED":D=(ce.status?ce.status.toUpperCase():"")===Je,de&&D})},[u,b,v]),_e=Math.max(1,Math.ceil(Z.length/A)||1);f.useEffect(()=>{S(1)},[b,v,A]),f.useEffect(()=>{S(Ae=>{const Je=Math.max(1,Math.ceil(Z.length/A)||1);return Ae>Je?Je:Ae})},[Z.length,A]);const ke=f.useMemo(()=>{const Ae=(w-1)*A;return Z.slice(Ae,Ae+A)},[Z,w,A]),ze=()=>S(Ae=>Math.max(Ae-1,1)),tt=()=>S(Ae=>Math.min(Ae+1,_e)),De=f.useCallback(async Ae=>{try{const Je=await te.get(`/activities/lead/${Ae}`);J(Je.data&&typeof Je.data=="object"?Je.data:{})}catch(Je){console.error(Je),Je.response?.status===404&&(console.warn("No activities found for this account."),J({}))}},[]),at=Ae=>{s(Ae),De(Ae.id)},et=()=>{s(null),t&&e("/admin/leads",{replace:!0})},V=()=>{i(!1),k(cT),O(!1),R(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},ne=Ae=>{Ae.target.id==="modalBackdrop"&&V()},se=()=>{k(cT),O(!1),R(null),d(null),i(!0)},Ee=Ae=>{if(!Ae){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Ae),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Je=B=>{if(!B)return{code:"+63",number:""};const oe=B.match(/^(\+\d+)\s(.+)$/);return oe?{code:oe[1],number:oe[2]}:{code:"+63",number:B}},ce=Je(Ae.work_phone),X=Je(Ae.mobile_phone_1),de=Je(Ae.mobile_phone_2);let D="";if(Ae.assigned_to){D=String(Ae.assigned_to.id);const B=o?.find(oe=>oe.id===Ae.assigned_to.id);d(B)}k({first_name:Ae.first_name||"",last_name:Ae.last_name||"",company_name:Ae.company_name||"",title:Ae.title||"",department:Ae.department||"",email:Ae.email||"",work_ccode:ce.code,work_phone:ce.number,m1_ccode:X.code,mobile_phone_1:X.number,m2_ccode:de.code,mobile_phone_2:de.number,address:Ae.address||"",notes:Ae.notes||"",source:Ae.source||"",territory_id:Ae.territory?.id||null,lead_owner:D,status:Ae.status||"New"}),O(!0),R(Ae.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ie=Ae=>{if(!Ae){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Ae);const Je=`${Ae.first_name} ${Ae.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Je}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Ae.id,name:Je}})},pe=Ae=>{const{name:Je,value:ce}=Ae.target;if(k(X=>({...X,[Je]:ce})),Je==="lead_owner"){const X=o.find(de=>de.id===parseInt(ce));d(X)}},[Be,$e]=f.useState(!1),Ve=Ae=>{if(Ae.preventDefault(),$e(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.title?.trim()){q.error("Job title is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const ce={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},X=T&&$?"update":"create",de=`${_.first_name} ${_.last_name}`;Q({title:X==="create"?"Confirm New Lead":"Confirm Update",message:X==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}),confirmLabel:X==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:X,payload:ce,targetId:$||null,name:de}})},ut=async()=>{if(!H?.action){Q(null);return}const{action:Ae}=H,{type:Je,payload:ce,targetId:X,name:de,lead:D}=Ae;console.log(ce),K(!0);try{if(Je==="create")I(!0),await te.post("/leads/create",ce),q.success(`Lead "${de}" created successfully.`),V(),await Ne();else if(Je==="update"){if(!X)throw new Error("Missing lead identifier for update.");I(!0);const B=await te.put(`/leads/${X}`,ce);q.success(`Lead "${de}" updated successfully.`),a&&a.id===X&&s(null),V(),await Ne()}else if(Je==="delete"){if(!X)throw new Error("Missing lead identifier for deletion.");await te.delete(`/leads/${X}`),q.success(`Lead "${de}" deleted successfully.`),a?.id===X&&s(null),await Ne()}}catch(B){console.error(B);const oe=Je==="create"?"Failed to create lead. Please review the details and try again.":Je==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ue=B.response?.data?.detail||oe;q.error(ue)}finally{(Je==="create"||Je==="update")&&I(!1),Je!=="edit"&&(K(!1),Q(null))}},ve=()=>{G||Q(null)},ae=u.filter(Ae=>Ae.status==="New").length,Fe=u.filter(Ae=>Ae.status==="Contacted").length,ye=u.filter(Ae=>Ae.status==="Qualified").length,We=u.filter(Ae=>Ae.status==="Converted").length,it=u.filter(Ae=>Ae.status==="Lost").length,ht=[{title:"New",value:ae,icon:Qn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Fe,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ye,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:We,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:it,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Qn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Ql,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{se(),$e(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ht.map(Ae=>n.jsx(BWe,{...Ae},Ae.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:b,onChange:he,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:v,onChange:Ae=>j(Ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Z.length>0?ke.map(Ae=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>at(Ae),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Ae.first_name," ",Ae.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Ae.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Ae.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Ae.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Ae.assigned_to?`${Ae.assigned_to.first_name} ${Ae.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${zWe(Ae.status||"New")}`,children:RWe(Ae.status||"New")})})]},Ae.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Z.length,pageSize:A,currentPage:w,onPrev:ze,onNext:tt,onPageSizeChange:E,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:ne,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Ae=>Ae.stopPropagation(),children:[n.jsx("button",{onClick:()=>{V(),$e(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:pe,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:pe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Be&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:pe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:pe,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:pe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:pe,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:lT.map(Ae=>n.jsx("option",{value:Ae.code,children:Ae.code},Ae.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:lT.map(Ae=>n.jsx("option",{value:Ae.code,children:Ae.code},Ae.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:lT.map(Ae=>n.jsx("option",{value:Ae.code,children:Ae.code},Ae.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:pe,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Be&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(HWe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:Ae=>`${Ae.first_name} ${Ae.last_name}`,onChange:Ae=>{const Je=o.find(X=>String(X.id)===String(Ae));d(Je);let ce=null;Je&&Je.assigned_territory&&Je.assigned_territory.length===1&&(ce=Je.assigned_territory[0].id),k(X=>({...X,lead_owner:Ae,territory_id:ce}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:pe,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(Ae=>n.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:pe,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:pe,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{V(),$e(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||G,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Ve,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||G,children:P||G?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),H&&n.jsx(UWe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:ut,onCancel:ve,loading:G}),a&&!r&&!T&&n.jsx(ree,{relatedActs:W,lead:a,onBack:et,fetchLeads:Ne,setSelectedLead:s,onEdit:Ee,onDelete:Ie})]})}function UWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function BWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function HWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=f.useState(!1),[d,u]=f.useState(""),h=f.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",b=f.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(j=>(s(j)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const N=v=>{h.current&&!h.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),f.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:h,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:b.length>0?b.map(N=>{const v=String(N.id),j=s(N),w=String(t)===v;return n.jsx("button",{type:"button",onClick:()=>{a(v),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:j||"--"},v)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Pb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ja=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),qWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ja,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ja,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ja,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ja,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ja,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),WWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ja,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ja,{label:"Department",name:"department",value:e.department}),n.jsx(Ja,{label:"Title",name:"title",value:e.title}),n.jsx(Ja,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ja,{label:"Email",name:"email",value:e.email}),n.jsx(Ja,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ja,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),GWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ja,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ja,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ja,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Description",name:"description",value:e.description}),n.jsx(Ja,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function VWe({isOpen:e,onClose:t}){const[a,s]=f.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(qWe,{data:Pb});case 2:return n.jsx(WWe,{data:Pb});case 3:return n.jsx(GWe,{data:Pb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Pb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(rj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function iee({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=f.useState(e?.stage||""),[i,o]=f.useState(!1),l=wt(),{user:c}=en();f.useEffect(()=>{console.log("Group Manager DealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];f.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const h=e.id;o(!0);try{await te.put(`/deals/admin/${h}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),b=`mailto:${h}?subject=${p}&body=${x}`;window.location.href=b},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const h=e.account?.id||e.account_id;l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(h=>n.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function oee({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=zs(),u=d.get("id"),[h,p]=f.useState(e||null),[x,b]=f.useState(s||"Overview"),{user:N}=en(),{comments:v,addComment:j,refresh:w}=Ta({relatedType:"deal",relatedId:h?.id});f.useEffect(()=>{h?.id&&w()},[h?.id,w]);const S=s!==void 0?s:x;if(f.useEffect(()=>{(async()=>{if(u&&!e)try{const O=((await te.get("/deals/admin/fetch-all")).data||[]).find($=>$.id===parseInt(u));if(O){const $={...O,amount:typeof O.amount=="number"?O.amount:parseFloat(O.amount||0),probability:O.probability||0};p($)}else console.warn("Deal not found with ID:",u)}catch(k){console.error("Error fetching deal:",k)}})()},[u,e]),!h&&!u||u&&!h)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function E(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Qt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(h.stage)}`,children:h.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",E(h.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===N?.id||h.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ma,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Gt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):b(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",h.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(h?.stage||"PROSPECTING").toUpperCase(),T=($=>$==="PROSPECTING"?0:$==="QUALIFICATION"?1:$==="PROPOSAL"?2:$==="NEGOTIATION"?3:$==="CLOSED_WON"||$==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map($=>T===$?"orange":T>$?"green":"gray").map(($,R)=>n.jsxs(bt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${$==="green"?"bg-green-500 border-green-500":$==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),R<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},R))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,k)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},k))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",h.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]}),n.jsx(Aa,{comments:v,onAddComment:j})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,k)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},k))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(iee,{selectedDeal:h,onStatusUpdate:l,onClose:a})})]})]})]})})}const YWe=10;function QWe(){f.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Zt(),[a,s]=f.useState(""),[r,i]=f.useState("Filter by Stage"),[o,l]=f.useState("Filter by Owner"),[c,d]=f.useState(null),[u,h]=f.useState("Overview"),[p,x]=f.useState(!1),[b,N]=f.useState(null),[v,j]=f.useState(!1),[w,S]=f.useState(1),[A,E]=f.useState(10),[_,k]=f.useState(!1),[T,O]=f.useState(null),[$,R]=f.useState(!1),[P,I]=f.useState(!1),[H,Q]=f.useState(null),[G,K]=f.useState([]),[W,J]=f.useState([]),[Te,ee]=f.useState([]),[U,je]=f.useState({}),[be,le]=f.useState(null);f.useEffect(()=>{const X=t.state,de=X?.dealID;if(de&&!X?.openDealModal){le(de),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(be&&b?.length>0&&!v){const X=b.find(de=>de.id===be);X?d(X):q.error("Deal not found."),le(null)}},[be,b,v]);const[Ce,Se]=f.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Oe,ge]=f.useState(null),[He,Ne]=f.useState(null),he={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Z=X=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[X]||X||"--",_e=X=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[X]||"bg-gray-100 text-gray-700",ke=f.useCallback(async X=>{try{const de=await te.get(`/activities/deal/${X}`);je(de.data&&typeof de.data=="object"?de.data:{})}catch(de){console.error(de),de.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]),ze=f.useMemo(()=>{const X=a.trim().toLowerCase(),de=r.trim(),D=o.trim();return(b??[]).filter(B=>{const oe=[B?.name,B?.description,B?.account?.name,B?.contact?.first_name,B?.contact?.last_name,B?.assigned_deals?.first_name,B?.assigned_deals?.last_name],ue=X===""||oe.some(xe=>xe==null||xe===""?!1:xe.toString().toLowerCase().includes(X)),ie=de==="Filter by Stage"||de===""||B.stage===he[de]||B.stage===de,Pe=D==="Filter by Owner"||D===""||`${B.assigned_deals?.first_name||""} ${B.assigned_deals?.last_name||""}`.trim().toLowerCase()===D.toLowerCase();return ue&&ie&&Pe})},[b,a,r,o]),tt=Math.max(1,Math.ceil(ze.length/YWe)||1);f.useEffect(()=>{S(1)},[a,r,o]),f.useEffect(()=>{S(X=>{const de=Math.max(1,Math.ceil(ze.length/A)||1);return X>de?de:X})},[ze.length,A]);const De=f.useMemo(()=>{const X=(w-1)*A;return ze.slice(X,X+A)},[ze,w,A]),at=()=>S(X=>Math.max(X-1,1)),et=()=>S(X=>Math.min(X+1,tt)),V=()=>{Se({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),Q(null),x(!0)},ne=async()=>{j(!0);try{const X=await te.get("/deals/admin/fetch-all"),D=[...Array.isArray(X.data)?X.data:[]].sort((B,oe)=>{const ue=B?.created_at?new Date(B.created_at).getTime():0;return(oe?.created_at?new Date(oe.created_at).getTime():0)-ue});N(D)}catch(X){X.response&&X.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(X)}finally{j(!1)}},se=async()=>{try{const X=await te.get("/accounts/admin/fetch-all");K(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},Ee=async()=>{try{const X=await te.get("/contacts/admin/fetch-all");J(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},Ie=async()=>{try{const X=await te.get("/users/all");ee(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&q.warn("Unable to load users (permission denied).")}};f.useEffect(()=>{ne(),se(),Ee(),Ie()},[]);const pe=async X=>{X&&(Se({id:X.id||null,name:X.name||"",account_id:X.account_id?.toString()||"",primary_contact_id:X.primary_contact_id?.toString()||"",stage:X.stage||"PROPOSAL",amount:X.amount?.toString()||"",close_date:X.close_date?new Date(X.close_date).toISOString().split("T")[0]:"",assigned_to:X.assigned_to?.toString()||"",currency:X.currency||"PHP",description:X.description||""}),ge(X.account||null),Ne(X.contact||null),I(!0),Q(X.id),d(null),x(!0))},Be=async(X=!1)=>{try{const de=await te.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((oe,ue)=>{const ie=oe?.created_at?new Date(oe.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-ie});if(N(B),!X&&c&&c.id){const oe=B.find(ue=>ue.id===c.id);oe&&d({...oe})}}catch(de){console.error("Failed to refresh deal data:",de),await ne()}},$e=X=>{const de=X.name.trim();if(!de){q.error("Deal name is required.");return}if(!X.account_id){q.error("Account is required.");return}const D=P&&H?"update":"create",B=de;O({title:D==="create"?"Confirm New Deal":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:D,formData:X,targetId:H||null,name:B}})},Ve=X=>{if(!X)return;const de=X.name||"this deal";O({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:X.id,name:de}})},ut=async()=>{if(!T?.action){O(null);return}const{action:X}=T,{type:de,formData:D,targetId:B,name:oe}=X;R(!0);try{if(de==="create"){k(!0);const ue={name:D.name.trim(),account_id:parseInt(D.account_id),primary_contact_id:D.primary_contact_id?parseInt(D.primary_contact_id):null,stage:D.stage,amount:D.amount?parseFloat(D.amount):null,currency:D.currency||"PHP",close_date:D.close_date||null,description:D.description||null,assigned_to:D.assigned_to?parseInt(D.assigned_to):null};await te.post("/deals/admin/create",ue),q.success(`Deal "${oe}" created successfully.`),x(!1),await ne()}else if(de==="update"){if(!B)throw new Error("Missing deal identifier for update.");k(!0);const ue={};D.name!==void 0&&(ue.name=D.name.trim()),D.account_id!==void 0&&D.account_id!==""&&(ue.account_id=parseInt(D.account_id)),D.primary_contact_id!==void 0&&(ue.primary_contact_id=D.primary_contact_id?parseInt(D.primary_contact_id):null),D.stage!==void 0&&(ue.stage=D.stage),D.amount!==void 0&&D.amount!==""&&(ue.amount=parseFloat(D.amount)),D.currency!==void 0&&(ue.currency=D.currency),D.close_date!==void 0&&(ue.close_date=D.close_date||null),D.description!==void 0&&(ue.description=D.description||null),D.assigned_to!==void 0&&(ue.assigned_to=D.assigned_to?parseInt(D.assigned_to):null),await te.put(`/deals/admin/${B}`,ue),q.success(`Deal "${oe}" updated successfully.`),x(!1),await ne()}else if(de==="delete"){if(!B)throw new Error("Missing deal identifier for deletion.");await te.delete(`/deals/admin/${B}`),q.success(`Deal "${oe}" deleted successfully.`),c?.id===B&&d(null),await ne()}}catch(ue){console.error(ue);const ie=de==="create"?"Failed to create deal. Please review the details and try again.":de==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Pe=ue.response?.data?.detail||ie;q.error(Pe)}finally{(de==="create"||de==="update")&&k(!1),R(!1),O(null)}},ve=()=>{$||O(null)},ae=()=>{x(!1),Se({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ge(null),Ne(null),I(!1),Q(null),k(!1)},Fe=(b??[]).filter(X=>X.stage==="PROSPECTING").length,ye=(b??[]).filter(X=>X.stage==="QUALIFICATION").length,We=(b??[]).filter(X=>X.stage==="PROPOSAL").length,it=(b??[]).filter(X=>X.stage==="NEGOTIATION").length,ht=(b??[]).filter(X=>X.stage==="CLOSED_WON").length,Ae=(b??[]).filter(X=>X.stage==="CLOSED_LOST").length,Je=(b??[]).filter(X=>X.stage==="CLOSED_CANCELLED").length,ce=[{title:"Prospecting",value:Fe,icon:Gw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:ye,icon:fa,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:We,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:it,icon:sd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ht,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Ae,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Je,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:V,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ce.map(X=>n.jsx(XWe,{...X},X.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:X=>s(X.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:X=>i(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:X=>l(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((b??[]).map(X=>`${X.assigned_deals?.first_name} ${X.assigned_deals?.last_name}`))].map((X,de)=>n.jsx("option",{value:X,children:X},de))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:ze.length>0?De.map(X=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...X}),ke(X.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.deal_id?X.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:X.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:X.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.contact?.first_name&&X.contact?.last_name?`${X.contact.first_name} ${X.contact.last_name}`:X.contact?.first_name||X.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_e(X.stage)}`,children:Z(X.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",X.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:X.assigned_deals?.first_name&&X.assigned_deals?.last_name?`${X.assigned_deals.first_name} ${X.assigned_deals.last_name}`:X.assigned_deals?.first_name||X.assigned_deals?.last_name||"--"})]},X.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ze.length,pageSize:A,currentPage:w,onPrev:at,onNext:et,onPageSizeChange:E,label:"deals"}),p&&n.jsx(ZWe,{onClose:ae,formData:Ce,setFormData:Se,isEditing:P,onSubmit:$e,isSubmitting:_||$,accounts:G,contacts:W,users:Te,currentAccount:Oe,currentContact:He}),c&&n.jsx(oee,{relatedActs:U,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:h,onEdit:pe,onDelete:Ve,onStatusUpdate:Be}),T&&n.jsx(KWe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ut,onCancel:ve,loading:$})]})}function KWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function XWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function ZWe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[h,p]=f.useState(!1),x=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){q.error("Deal name is required.");return}const j=Number(t.amount);if(!t.amount||isNaN(j)||j<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},b=v=>{v.target.id==="modalBackdrop"&&e()},N=f.useMemo(()=>{const v=String(t.account_id||"").trim(),j=Array.isArray(l)?l:[];return v?j.filter(w=>{const A=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(E=>E!=null&&String(E).trim()!=="");return A?String(A)===v:!1}):j},[l,t.account_id]);return f.useEffect(()=>{const v=String(t.account_id||"").trim(),j=String(t.primary_contact_id||"").trim();if(!j||!v)return;N.some(S=>String(S?.id)===j)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(dT,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:h,className:"md:col-span-2"}),n.jsx(uT,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:h}),n.jsx(uT,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:N||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:h}),n.jsx(qB,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(dT,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:h}),n.jsx(qB,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(dT,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(uT,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:h,className:"md:col-span-2"}),n.jsx(eGe,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function dT({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function qB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function uT({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const h=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(JWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:h})]})}function JWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,v=N?s(N):"",j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function eGe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const mT=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],fT={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},$i=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},hT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",tGe=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},nGe=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Db=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",kg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",aGe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},gT=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},WB=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},pT=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Lw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},sGe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Lw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Lw(t);return a||null},rGe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},iGe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},oGe=e=>{if(!e)return"";const a=[e.assigned_user?.id,e.assigned_to?.id,e.assigned_to,e.assigned_user_id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function lGe(){const e=wt(),t=Zt(),{user:a}=en(),s=a?.company?.currency||"";f.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=f.useState([]),[o,l]=f.useState(!1),[c,d]=f.useState([]),[u,h]=f.useState([]),[p,x]=f.useState([]),[b,N]=f.useState([]),[v,j]=f.useState(null),[w,S]=f.useState(null),[A,E]=f.useState(!1),[_,k]=f.useState(!1),[T,O]=f.useState(!1),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState(!1),[G,K]=f.useState(null),[W,J]=f.useState(fT),[Te,ee]=f.useState(""),[U,je]=f.useState("Filter by Status"),[be,le]=f.useState(null),Ce=f.useCallback(async()=>{if(w)try{Q(!0);const me=(await te.get("/company/invoice-info"))?.data;e(`/group-manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:me}})}catch(z){const me=z?.response?.data?.detail||z?.message||"Failed to open print page.";q.error(me)}finally{Q(!1)}},[w,e]),[Se,Oe]=f.useState(1),[ge,He]=f.useState(10),[Ne,he]=f.useState("Overview"),[Z,_e]=f.useState("Draft"),[ke,ze]=f.useState([]),[tt,De]=f.useState(null),at=f.useMemo(()=>oGe(w),[w]),{comments:et,addComment:V,refresh:ne}=Ta({relatedType:"quote",relatedId:w?.id});f.useEffect(()=>{w?.id&&ne()},[w?.id,ne]),f.useEffect(()=>{const me=t.state?.quoteID;if(me){De(me),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(tt&&r.length>0&&!o){const z=r.find(me=>me.id===tt);z?S(z):q.error("Quote not found."),De(null)}},[tt,r,o]),f.useEffect(()=>{let z=!0;return(async()=>{const Le=sGe();if(Le&&z){j(Le);return}try{const Re=await te.get("/auth/me"),Qe=Lw(Re?.data);if(Qe&&z){j(Qe);return}}catch{}try{const Re=await te.get("/users/me"),Qe=Lw(Re?.data);if(Qe&&z){j(Qe);return}}catch{}z&&j(null)})(),()=>{z=!1}},[]);const se=f.useCallback(z=>z&&u.find(Le=>String(Le.id)===String(z))?.name||"",[u]),Ee=f.useCallback(z=>{if(!z)return"";const me=p.find(Le=>String(Le.id)===String(z));return me?`${me.first_name} ${me.last_name}`.trim():""},[p]),Ie=f.useCallback(z=>{if(!z)return"--";const me=c.find(Le=>String(Le.id)===String(z));return me?.deal_name||me?.name||`Deal #${WB(z)}`},[c]),pe=f.useCallback(z=>{const me=c.find(Qe=>String(Qe.id)===String(z)),Le=rGe(me);let Re=iGe(me);if(!Re&&Le){const Qe=p.filter(Ke=>String(Ke.account_id||"")===String(Le));if(Qe.length>0){const Ke=[...Qe].sort((At,Ct)=>{const Xt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase(),sa=`${Ct.first_name||""} ${Ct.last_name||""}`.trim().toLowerCase();return Xt.localeCompare(sa)});Re=String(Ke[0].id)}}if(Le&&Re){const Qe=p.find(Ke=>String(Ke.id)===String(Re));Qe?.account_id&&String(Qe.account_id)!==String(Le)&&(Re="")}return{accountId:Le||"",contactId:Re||""}},[c,p]),Be=f.useCallback(z=>{if(!z)return"--";if(z.deal?.deal_name)return z.deal.deal_name;if(z.deal?.name)return z.deal.name;const me=z.deal_id||z.deal?.id;return me?Ie(me):"--"},[Ie]),$e=f.useCallback(z=>{if(!z)return"--";if(z.account?.name)return z.account.name;let me=z.account_id||z.account?.id;if(!me){const Le=z.deal_id||z.deal?.id;Le&&(me=pe(Le).accountId)}return me?se(me)||`Account #${me}`:"--"},[pe,se]),Ve=f.useCallback(z=>{if(!z)return"--";if(z.contact?.first_name||z.contact?.last_name)return`${z.contact?.first_name||""} ${z.contact?.last_name||""}`.trim()||"--";let me=z.contact_id||z.contact?.id;if(!me){const Re=z.deal_id||z.deal?.id;Re&&(me=pe(Re).contactId)}return(me?Ee(me):"")||(me?`Contact #${me}`:"--")},[pe,Ee]),ut=f.useCallback(async(z=null)=>{l(!0);try{const me=await te.get("/quotes/admin/fetch-all"),Re=[...Array.isArray(me.data)?me.data:[]].sort((Qe,Ke)=>{const At=Qe?.created_at||Qe?.updated_at||0,Ct=Ke?.created_at||Ke?.updated_at||0;return new Date(Ct)-new Date(At)});if(i(Re),z){const Qe=Re.find(Ke=>Ke.id===z);S(Qe||null)}}catch(me){console.error(me),i([]),me.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ve=f.useCallback(async()=>{try{const z=await te.get("/deals/admin/fetch-all");d(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),ae=f.useCallback(async()=>{try{const z=await te.get("/accounts/admin/fetch-all");h(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Fe=f.useCallback(async()=>{try{const z=await te.get("/contacts/admin/fetch-all");x(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),ye=f.useCallback(async()=>{try{const z=await te.get("/users/all");N(Array.isArray(z.data)?z.data:[])}catch(z){console.error(z),z.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);f.useEffect(()=>{ut(),ve(),ae(),Fe(),ye()},[ut,ve,ae,Fe,ye]);const We=f.useMemo(()=>{const z=Te.trim().toLowerCase(),me=U.trim();return r.filter(Le=>{const Re=Be(Le),Qe=$e(Le),Ke=Ve(Le),At=gT(Le.presented_date,Le.validity_days),Ct=[Le.quote_id,Re,Qe,Ke,Le.total_amount?.toString(),Le.validity_days?.toString(),Le.presented_date?kg(Le.presented_date):"",At?kg(At):"",Le.assigned_user?.first_name,Le.assigned_user?.last_name,Le.creator?.first_name,Le.creator?.last_name,Le.status,Le.notes,Db(Le.created_at),Db(Le.updated_at)],Xt=z===""||Ct.some(hh=>hh==null?!1:hh.toString().toLowerCase().includes(z)),sa=me==="Filter by Status"||$i(Le.status)===me;return Xt&&sa})},[r,Te,U,Be,$e,Ve]),it=Math.max(1,Math.ceil(We.length/ge)||1);f.useEffect(()=>Oe(1),[Te,U]),f.useEffect(()=>{Oe(z=>{const me=Math.max(1,Math.ceil(We.length/ge)||1);return z>me?me:z})},[We.length,ge]);const ht=f.useMemo(()=>{const z=(Se-1)*ge;return We.slice(z,z+ge)},[We,Se,ge]),Ae=()=>Oe(z=>Math.max(z-1,1)),Je=()=>Oe(z=>Math.min(z+1,it)),ce=z=>{S(z),he("Overview"),_e($i(z?.status)||"Draft")},X=()=>{S(null),he("Overview")},de=z=>{z.target.id==="quoteModalBackdrop"&&!P&&X()},D=f.useCallback(()=>{E(!1),k(!1),K(null),J(fT),O(!1)},[]),B=z=>{z.target.id==="modalBackdrop"&&!T&&!P&&D()},oe=z=>{const{name:me,value:Le}=z.target;if(me==="deal_id"){const{accountId:Re,contactId:Qe}=pe(Le);J(Ke=>({...Ke,deal_id:Le,account_id:Re,contact_id:Qe}));return}J(Re=>({...Re,[me]:Le}))},ue=()=>{J(fT),k(!1),K(null),E(!0)},ie=z=>{if(!z)return;S(null);const me=z.deal?.id?String(z.deal.id):z.deal_id?String(z.deal_id):"",Le=me?pe(me):{accountId:"",contactId:""},Re=z.account?.id?String(z.account.id):z.account_id?String(z.account_id):Le.accountId,Qe=z.contact?.id?String(z.contact.id):z.contact_id?String(z.contact_id):Le.contactId,Ke=z.assigned_user?.id?String(z.assigned_user.id):z.assigned_to?String(z.assigned_to):"";J({deal_id:me,account_id:Re||"",contact_id:Qe||"",total_amount:z.total_amount?.toString()||"",presented_date:aGe(z.presented_date),validity_days:z.validity_days!==null&&z.validity_days!==void 0?String(z.validity_days):"",status:$i(z.status)||"Draft",assigned_to:Ke,notes:z.notes||"",subtotal:parseFloat(z.subtotal)||0,tax_rate:parseFloat(z.tax_rate)||0,tax_amount:parseFloat(z.tax_amount)||0,discount_type:z.discount_type||"",discount_value:parseFloat(z.discount_value)||0,discount_amount:parseFloat(z.discount_amount)||0,currency:z.currency||"PHP",items:Array.isArray(z.items)?z.items.map(At=>({id:At.id,item_type:At.item_type||"Product",name:At.name||"",description:At.description||"",sku:At.sku||"",variant:At.variant||"",unit:At.unit||"pcs",quantity:parseFloat(At.quantity)||1,unit_price:parseFloat(At.unit_price)||0,discount_percent:parseFloat(At.discount_percent)||0,discount_amount:parseFloat(At.discount_amount)||0,line_total:parseFloat(At.line_total)||0,sort_order:At.sort_order||0})):[]}),k(!0),K(z.id),E(!0)},Pe=z=>{if(z.target.checked){const me=ht.map(Le=>Le.id);ze(me)}else ze([])},xe=z=>{ze(me=>me.includes(z)?me.filter(Le=>Le!==z):[...me,z])},fe=z=>{if(!z)return;const me=z.quote_id||"this quote";R({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:me}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:z.id,name:me}})},qe=async()=>{ke.length!==0&&R({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ke.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${ke.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:ke}})},[Ze,pt]=f.useState(!1),Nt=z=>{if(z.preventDefault(),pt(!0),!v){q.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){q.error("Deal is required.");return}if(!W.assigned_to){q.error("Assigned To is required.");return}const Le=pe(W.deal_id),Re=W.items.map((Xt,sa)=>({item_type:Xt.item_type||"Product",name:Xt.name,description:Xt.description||null,sku:Xt.sku||null,variant:Xt.variant||null,unit:Xt.unit||null,quantity:parseFloat(Xt.quantity)||1,unit_price:parseFloat(Xt.unit_price)||0,discount_percent:parseFloat(Xt.discount_percent)||0,sort_order:Xt.sort_order??sa})),Qe={deal_id:Number(W.deal_id),account_id:Le.accountId?Number(Le.accountId):null,contact_id:Le.contactId?Number(Le.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:Re},Ke=_&&G?"update":"create",At=Ie(W.deal_id),Ct=Ke==="create"?{...Qe,created_by_id:Number(v)}:Qe;R({title:Ke==="create"?"Confirm New Quote":"Confirm Update",message:Ke==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:At}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:At}),"?"]}),confirmLabel:Ke==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ke,payload:Ct,targetId:G||null,name:At}})},St=async()=>{if(!$?.action){R(null);return}const{action:z}=$,{type:me,payload:Le,targetId:Re,name:Qe}=z;I(!0);try{if(me==="create")O(!0),await te.post("/quotes/admin",Le),q.success("Quote created successfully."),D(),await ut();else if(me==="update"){if(!Re)throw new Error("Missing quote identifier for update.");O(!0),await te.put(`/quotes/admin/${Re}`,Le),q.success("Quote updated successfully."),D(),await ut(),w?.id===Re&&S(null)}else if(me==="delete"){if(!Re)throw new Error("Missing quote identifier for deletion.");const Ke=w?.id;le(Re),await te.delete(`/quotes/admin/${Re}`),q.success(`Quote "${Qe}" deleted successfully.`),await ut(Ke&&Ke!==Re?Ke:null),Ke===Re&&S(null)}else me==="bulk-delete"&&(await te.post("/quotes/admin/bulk-delete",{quote_ids:ke}),q.success(`Successfully deleted ${ke.length} quotes`),ze([]),await ut())}catch(Ke){console.error(Ke);const At=me==="create"?"Failed to create quote. Please review the details and try again.":me==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(At),(me==="create"||me==="update")&&O(!1),me==="delete"&&le(null)}finally{(me==="create"||me==="update")&&O(!1),me==="delete"&&le(null),I(!1),R(null)}},Ht=()=>{P||R(null)},on=f.useCallback((z,me)=>{const Le=z?.deal_id??z?.deal?.id??"",Re=Le?Number(Le):null,Qe=Re?pe(String(Re)):{accountId:"",contactId:""},Ke=z?.account_id??z?.account?.id??Qe.accountId??null,At=z?.contact_id??z?.contact?.id??Qe.contactId??null,Ct=z?.total_amount??0,Xt=z?.assigned_to??z?.assigned_user?.id??null;return{deal_id:Re,account_id:Ke!=null&&String(Ke).trim()!==""?Number(Ke):null,contact_id:At!=null&&String(At).trim()!==""?Number(At):null,total_amount:Number(Ct),presented_date:z?.presented_date||null,validity_days:z?.validity_days===""||z?.validity_days===void 0||z?.validity_days===null?null:Number(z.validity_days),status:me,assigned_to:Xt!=null&&String(Xt).trim()!==""?Number(Xt):null,notes:z?.notes?.trim()||null}},[pe]),cn=f.useCallback(async()=>{if(!w?.id)return;const z=$i(Z),me=[z,z.toLowerCase()],Le=async Re=>te.patch(`/quotes/admin/${w.id}/status`,{status:Re},{headers:{"Content-Type":"application/json"}});try{let Re=!1;for(const Qe of me)try{await Le(Qe),Re=!0;break}catch(Ke){if(Ke?.response?.status===422)continue;throw Ke}if(!Re){const Qe=on(w,z);if(!Qe.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!Qe.total_amount||Qe.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await te.put(`/quotes/admin/${w.id}`,Qe)}q.success(`Quote status updated to ${z}`),S(null),he("Overview"),await ut()}catch(Re){console.error(Re);const Qe=Re?.response?.data?.message||(Re?.response?.data?.errors?Object.values(Re.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(Qe)}},[w,Z,ut,on]),re=[{label:"Filter by Status",value:"Filter by Status"},...mT.map(z=>({label:z.label,value:z.value}))],lt=$?.action?.type==="delete"?$.action.targetId:null,zt=w&&(be===w.id||lt===w.id),kt=w&&be===w.id,Kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:z=>z.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:X,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Be(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${nGe(w.status)}`,children:hT(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Ce,disabled:H||T||P,children:[n.jsx(hn,{className:"mr-2"}),H?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ie(w),disabled:P||$?.action?.type==="update"&&$.action.targetId===w.id,children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>fe(w),disabled:!!zt,children:kt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(z=>n.jsx("button",{onClick:()=>he(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ne===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:pT(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Be(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:$e(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:Ve(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:kg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:kg(gT(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:hT(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Db(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Db(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(gd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ne==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Aa,{comments:et,onAddComment:V})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${pT(w.quote_id)}`,assigned_to:at,direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:at,status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:at,priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Z||$i(w.status)||"Draft",onChange:z=>_e(z.target.value),children:mT.map(z=>n.jsx("option",{value:z.value,children:z.label},z.value))}),n.jsx("button",{onClick:cn,disabled:$i(Z)===$i(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${$i(Z)===$i(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Me=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ue(),pt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:Te,onChange:z=>ee(z.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:z=>je(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:re.map(z=>n.jsx("option",{value:z.value,children:z.label},z.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ht.length>0&&ke.length===ht.length,onChange:Pe,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ke.length>0?n.jsx("button",{onClick:qe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ke.length} selected items`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):We.length>0?ht.map(z=>{const me=gT(z.presented_date,z.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>ce(z),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Le=>Le.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:ke.includes(z.id),onChange:()=>xe(z.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:pT(z.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Be(z)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:$e(z)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ve(z)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:z.total_amount?`${s}${Number(z.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${tGe(z.status)}`,children:hT(z.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:z.assigned_user?`${z.assigned_user.first_name} ${z.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:kg(me)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},z.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:We.length,pageSize:ge,currentPage:Se,onPrev:Ae,onNext:Je,onPageSizeChange:z=>{He(z),Oe(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),vt=A?n.jsx("div",{id:"modalBackdrop",onClick:B,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:z=>z.stopPropagation(),children:[n.jsx("button",{onClick:()=>{D(),pt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Nt,children:[n.jsx(YB,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:z=>{const{accountId:me,contactId:Le}=pe(z);J(Re=>({...Re,deal_id:z,account_id:me,contact_id:Le}))},items:Array.isArray(c)?c:[],getLabel:z=>`${WB(z?.deal_id??"")} ${z?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Ze,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(VB,{label:"Account",value:se(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(VB,{label:"Contact",value:Ee(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(gd,{items:W.items,onChange:z=>J(me=>({...me,items:z})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:z=>{J(me=>({...me,subtotal:z.subtotal,discount_amount:z.discount_amount,tax_amount:z.tax_amount,total_amount:z.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:z=>J(me=>({...me,discount_type:z.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:z=>J(me=>({...me,discount_value:z.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:z=>J(me=>({...me,tax_rate:z.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(GB,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:oe,disabled:T}),n.jsx(GB,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:oe,placeholder:"30",disabled:T}),n.jsx(YB,{label:"Assigned To",value:W.assigned_to||"",onChange:z=>J(me=>({...me,assigned_to:z})),items:Array.isArray(b)?b:[],getLabel:z=>{const me=`${z?.first_name??""} ${z?.last_name??""}`.trim();return me?z?.role?`${me} (${z.role})`:me:z?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Ze,disabled:T}),n.jsx(cGe,{label:"Status",name:"status",value:W.status,onChange:oe,options:mT,required:!0,disabled:T}),n.jsx(uGe,{label:"Notes",name:"notes",value:W.notes,onChange:oe,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{D(),pt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,F=$?n.jsx(mGe,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:St,onCancel:Ht,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?Kt:Me,vt,F]})}function GB({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function VB({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function cGe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(h=>String(h.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>n.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function YB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(dGe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function dGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),p=f.useRef(null),x=e.find(v=>String(v.id)===String(t)),b=x?s(x):"",N=f.useMemo(()=>{const v=u.trim().toLowerCase();return(v?e.filter(w=>(s(w)||"").toLowerCase().includes(v)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),f.useEffect(()=>{c||h("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:v=>{h(v.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(v=>{const j=String(v.id),w=s(v),S=String(t)===j;return n.jsx("button",{type:"button",onClick:()=>{a(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},j)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function uGe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function mGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function fGe(){const{userRole:e}=Qs();return n.jsx(Wj,{currentUserRole:e,currentUserId:null})}const QB=["Not started","In progress","Deferred","Completed"],KB={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},lee=e=>e&&(KB[e]||KB[String(e).toUpperCase()])||"Not started",hGe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},XB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},gGe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),lee(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,h=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:h}},pGe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=H=>{if(!H)return"";const Q=String(H).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(H)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,h=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,b=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id,j=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",E="",_="Lead",k="",T="",O="";const $=c(),R=b(),P=l(),I=x();if($){w="Account",_="Account",k=R,S=String($);const H=d(),Q=u(),G=N(),K=v(),W=h(),J=j();H?(A="Contact",T="Contact",O=G,E=String(H)):Q?(T="Deal",A="Deal",O=K,E=String(Q)):W&&(T="Quote",A="Quote",O=J,E=String(W))}else P?(_="Lead",k=I,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:lee(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:k,relatedType2Text:T,relatedTo2Text:O,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:E}};function xGe(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,h]=f.useState([]),[p,x]=f.useState(!0),[b,N]=f.useState(""),[v,j]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[A,E]=f.useState([]),[_,k]=f.useState(1),[T,O]=f.useState(10),[$,R]=f.useState(null),[P,I]=f.useState(!1),[H,Q]=f.useState([]),G=wt(),K=Zt(),[W,J]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[Te,ee]=f.useState(null);f.useEffect(()=>{const V=K.state?.openTaskModal,ne=K.state?.initialTaskData,se=K.state?.taskID;V?(i(!0),ne&&J(Ee=>({...Ee,...ne})),G(K.pathname,{replace:!0,state:{}})):se&&(ee(se),G(K.pathname,{replace:!0,state:{}}))},[K,G]),f.useEffect(()=>{if(Te&&u.length>0&&!p){const V=u.find(ne=>ne.id===Te);V?le(V,!0):q.error("Task not found."),ee(null)}},[Te,u,p]);const U=async()=>{try{const V=await te.get("/users/all");E(Array.isArray(V.data)?V.data:[])}catch(V){console.error("Failed to fetch users:",V),q.error("Failed to fetch users.")}},je=async()=>{try{x(!0);const V=await te.get("/tasks/all"),se=(Array.isArray(V.data)?V.data:[]).map(pGe);se.sort((Ee,Ie)=>{const pe=Ee.createdAt?new Date(Ee.createdAt):0;return(Ie.createdAt?new Date(Ie.createdAt):0)-pe}),h(se),a==="list"&&k(1)}catch(V){console.error("Failed to load tasks:",V),q.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{!t&&e&&(U(),je())},[t,e]);const be=()=>{l(null),J({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},le=(V=null,ne=!1)=>{l(V),d(ne),V?J({id:V.id,subject:V.title||"",description:V.description||"",priority:V.priority||"Normal",status:V.status||"Not started",dueDate:hGe(V.dueDate),assignedTo:V.assignedToId?String(V.assignedToId):"",assignedToName:V.assignedToName||"",createdBy:V.createdBy||"",notes:V.notes||"",relatedType1Text:V.relatedType1Text||"",relatedTo1Text:V.relatedTo1Text||"",relatedType2Text:V.relatedType2Text||"",relatedTo2Text:V.relatedTo2Text||"",relatedType1:V.relatedType1||"",relatedTo1:V.relatedTo1||"",relatedType2:V.relatedType2||"",relatedTo2:V.relatedTo2||""}):be(),i(!0)},Ce=()=>{i(!1),l(null),d(!1),be()},Se=async V=>{const ne=gGe(V);try{o&&!c?(await te.put(`/tasks/${o.id}`,ne),q.success("Task updated successfully.")):(await te.post("/tasks/create",ne),q.success("Task created successfully.")),i(!1),await je()}catch(se){console.error("Failed to save task:",se);const Ee=se.response?.data?.detail||"Failed to save task.";q.error(Ee)}},Oe=V=>{V&&R({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:V.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:V.id}})},ge=()=>{if(ke.every(V=>H.includes(V.id)))Q(H.filter(V=>!ke.map(ne=>ne.id).includes(V)));else{const V=ke.map(ne=>ne.id);Q([...new Set([...H,...V])])}},He=V=>{Q(ne=>ne.includes(V)?ne.filter(se=>se!==V):[...ne,V])},Ne=async()=>{H.length!==0&&R({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:H.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${H.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:H}})},he=async()=>{if(!$?.action){R(null);return}const{action:V}=$;I(!0);try{V.type==="delete"?(await te.delete(`/tasks/${V.targetId}`),q.success("Task deleted successfully."),await je()):V.type==="bulk-delete"&&(await te.delete("/tasks/admin/bulk-delete",{data:{task_ids:V.task_ids}}),q.success(`Successfully deleted ${V.task_ids.length} tasks`),Q([]),await je())}catch(ne){console.error("Task action failed:",ne),q.error("Failed to delete task.")}finally{I(!1),R(null)}},Z=()=>{P||R(null)},_e=f.useMemo(()=>{const V=b.trim().toLowerCase();return[...u].sort((se,Ee)=>{const Ie=se.createdAt?new Date(se.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-Ie}).filter(se=>{const Ee=V===""||se.title?.toLowerCase().includes(V)||se.description?.toLowerCase().includes(V)||se.assignedToName?.toLowerCase().includes(V)||se.createdBy?.toLowerCase().includes(V),Ie=v==="Filter by Status"||se.status===v,pe=w==="Filter by Priority"||se.priority===w;return Ee&&Ie&&pe})},[u,b,v,w]);f.useEffect(()=>{k(1)},[b,v,w,a,T]),f.useEffect(()=>{if(a==="list"){const V=_e.length===0?1:Math.ceil(_e.length/T);_>V&&k(V)}},[_e.length,_,a,T]);const ke=f.useMemo(()=>{if(a==="board")return _e;const V=(_-1)*T;return _e.slice(V,V+T)},[_e,_,a,T]),ze=f.useMemo(()=>{const V=new Date;return[{title:"To Do",value:u.filter(ne=>ne.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ne=>ne.status==="In progress").length,icon:Wi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ne=>ne.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ne=>ne.dueDate&&new Date(ne.dueDate)<V&&ne.status!=="Completed").length,icon:Wu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ne=>ne.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),tt=V=>V.dueDate&&new Date(V.dueDate)<new Date&&V.status!=="Completed",De=V=>{switch(V.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},at=V=>{switch(V){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},et=V=>{switch(V){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Wi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>le(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ze.map(V=>n.jsx(yGe,{...V},V.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:b,onChange:V=>N(V.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:v,onChange:V=>j(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),QB.map(V=>n.jsx("option",{children:V},V))]}),n.jsxs("select",{value:w,onChange:V=>S(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(_e.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:QB.map(V=>{const ne=ke.filter(se=>se.status===V);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:V}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ne.length})]}),n.jsx("div",{className:`space-y-3 ${ne.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ne.length>0?ne.map(se=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(se)}`,onClick:()=>le(se,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:se.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",se.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",se.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:tt(se)?"text-red-600":"text-gray-600",children:se.dateAssigned?XB(se.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),le(se)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})}),n.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),Oe(se)},className:"text-red-500 hover:text-red-700",children:n.jsx(Gt,{})})]})]},se.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},V)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ke.length>0&&ke.every(V=>H.includes(V.id)),onChange:ge})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:H.length>0?n.jsx("button",{onClick:Ne,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${H.length} selected tasks`,children:n.jsx(Gt,{size:18})}):""})]})}),n.jsx("tbody",{children:ke.length>0?ke.map(V=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:ne=>ne.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:H.includes(V.id),onChange:()=>He(V.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>le(V,!0),children:V.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>le(V,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${at(V.status||"Not started")}`,children:V.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>le(V,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${et(V.priority||"Low")}`,children:V.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>le(V,!0),children:V.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${tt(V)?"text-red-600 font-medium":""}`,onClick:()=>le(V,!0),children:V.dateAssigned?XB(V.dateAssigned):""}),n.jsx("td",{})]},V.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:_e.length,pageSize:T,currentPage:_e.length===0?0:_,onPrev:()=>k(V=>Math.max(V-1,1)),onNext:()=>k(V=>Math.min(V+1,Math.max(1,Math.ceil(_e.length/T)||1))),onPageSizeChange:V=>{O(V),k(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Ce,onSave:Se,onEdit:()=>d(!1),setFormData:J,formData:W,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:Oe}),$&&n.jsx(bGe,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:he,onCancel:Z,loading:P})]})}function yGe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function bGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const cee=e=>e?e.toUpperCase():"",Ob=e=>{const t=cee(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},vGe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},wGe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},NGe=e=>{const t=cee(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},xT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},jGe=()=>{const e=wt(),t=Zt(),[a]=zs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";f.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=f.useState([]),[l,c]=f.useState(!1),[d,u]=f.useState([]),[h,p]=f.useState(""),[x,b]=f.useState("Filter by Status"),[N,v]=f.useState(!1),[j,w]=f.useState(null),[S,A]=f.useState(1),[E,_]=f.useState(10),[k,T]=f.useState(xT),[O,$]=f.useState(!1),[R,P]=f.useState(null),[I,H]=f.useState(!1),[Q,G]=f.useState(null),[K,W]=f.useState(!1),[J,Te]=f.useState(null);f.useEffect(()=>{const Z=t.state?.openMeetingModal,_e=t.state?.initialMeetingData?.relatedTo||a.get("id"),ke=t.state?.meetingID;Z||_e?(v(!0),t.state?.initialMeetingData&&T(ze=>({...ze,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ke&&(Te(ke),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),f.useEffect(()=>{if(J&&i.length>0&&!l){const Z=i.find(_e=>_e.id===J);Z?w(Z):q.error("Meeting not found."),Te(null)}},[J,i,l]);const ee=async()=>{if(s&&r){const Z=sessionStorage.getItem("meetingDetailData");if(Z)try{const _e=JSON.parse(Z);if(_e.id===parseInt(s)){w(_e),sessionStorage.removeItem("meetingDetailData");return}}catch(_e){console.error(_e)}}c(!0);try{const Z=await te.get("/meetings/admin/fetch-all"),ke=[...Array.isArray(Z.data)?Z.data:[]].sort((ze,tt)=>{const De=ze?.createdAt?new Date(ze.createdAt).getTime():0;return(tt?.createdAt?new Date(tt.createdAt).getTime():0)-De});if(o(ke),s&&!j){const ze=ke.find(tt=>tt.id===parseInt(s));ze&&w(ze)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},U=async()=>{try{const Z=await te.get("/users/all");u(Array.isArray(Z.data)?Z.data:[])}catch(Z){console.error(Z)}};f.useEffect(()=>{ee(),U()},[]);const je=Z=>p(Z.target.value),be=f.useMemo(()=>{const Z=h.trim().toLowerCase(),_e=x.trim().toUpperCase();return i.filter(ke=>{const ze=[ke?.activity,ke?.description,ke?.relatedTo,ke?.assignedTo],tt=Z===""||ze.some(at=>at&&at.toString().toLowerCase().includes(Z)),De=_e==="FILTER BY STATUS"||Ob(ke.status||"PENDING")===_e;return tt&&De})},[i,h,x]),le=f.useMemo(()=>{const Z=(S-1)*E;return be.slice(Z,Z+E)},[be,S,E]),Ce=()=>{v(!1),T(xT),$(!1),P(null),H(!1)},Se=()=>{T(xT),$(!1),P(null),v(!0)},Oe=Z=>{let _e="";if(Z.meet_assign_to?.id)_e=String(Z.meet_assign_to.id);else if(Z.assignedTo){const se=d.find(Ee=>`${Ee.first_name} ${Ee.last_name}`===Z.assignedTo);_e=se?String(se.id):""}const ke=se=>{if(!se)return"";try{const Ee=new Date(se),Ie=Ee.getTimezoneOffset()*6e4;return new Date(Ee.getTime()-Ie).toISOString().slice(0,16)}catch{return""}};let ze="Lead",tt="",De="Contact",at="";if(Z.lead)ze="Lead",tt=String(Z.lead.id);else if(Z.account)ze="Account",tt=String(Z.account.id),Z.contact?(De="Contact",at=String(Z.contact.id)):Z.deal?(De="Deal",at=String(Z.deal.id)):Z.quote&&(De="Quote",at=String(Z.quote.id));else if(Z.relatedType||Z.related_type){const se=Z.relatedType||Z.related_type,Ee=Z.related_to||Z.relatedToId;se==="Lead"?(ze="Lead",tt=String(Ee)):(ze="Account",tt=Z.account_id?String(Z.account_id):"")}const et={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},V=Ob(Z.status),ne=et[V]||"Planned";T({subject:Z.subject||Z.activity||"",location:Z.location||"",startTime:ke(Z.start_time||Z.startTime),endTime:ke(Z.end_time||Z.endTime),status:ne,notes:Z.description||Z.notes||"",assignedTo:_e,relatedType1:ze,relatedTo1:tt,relatedType2:De,relatedTo2:at}),$(!0),P(Z.id),w(null),v(!0)},ge=Z=>{if(!Z.subject?.trim())return q.error("Subject is required.");if(!Z.startTime)return q.error("Start time is required.");if(Z.endTime&&!(new Date(Z.endTime)-new Date(Z.startTime)>0))return q.error("End time must be after start time.");Z.relatedType1,Z.relatedTo1,Z.relatedType1==="Account"&&Z.relatedType2&&Z.relatedTo2&&(Z.relatedType2,Z.relatedTo2);const _e={...Z,assignedTo:parseInt(Z.assignedTo),relatedTo1:parseInt(Z.relatedTo1),relatedTo2:parseInt(Z.relatedTo2)},ke=O&&R?"update":"create";G({title:ke==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ke} "${_e.subject}"?`,confirmLabel:ke==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ke,payload:_e,targetId:R,name:_e.subject}})},He=async()=>{if(!Q?.action)return;const{type:Z,payload:_e,targetId:ke,name:ze}=Q.action;W(!0);try{Z==="create"?(H(!0),await te.post("/meetings/create",_e),q.success(`Meeting "${ze}" created.`),Ce(),await ee()):Z==="update"?(H(!0),await te.put(`/meetings/${ke}`,_e),q.success(`Meeting "${ze}" updated.`),Ce(),await ee()):Z==="delete"&&(await te.delete(`/meetings/${ke}`),q.success(`Meeting "${ze}" deleted.`),j?.id===ke&&w(null),await ee())}catch(tt){const De=tt.response?.data?.detail||"Action failed.";q.error(typeof De=="string"?De:JSON.stringify(De)),console.error(De)}finally{H(!1),W(!1),G(null)}},Ne=Z=>{G({title:"Delete Meeting",message:`Permanently delete "${Z.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:Z.id,name:Z.activity}})},he=async(Z,_e)=>{try{await te.put(`/meetings/${Z}`,{status:_e}),q.success("Status updated"),ee(),w(null)}catch{q.error("Failed to update status")}};return r&&s?j?n.jsx(pd,{meeting:j,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:Oe,onDelete:Ne,onStatusUpdate:he}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Se,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Wt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:je,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:Z=>b(Z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:le.length>0?le.map(Z=>n.jsxs("tr",{onClick:()=>w(Z),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Z.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Z.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Z.lead.title}),Z.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Z.account.name}),Z.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Z.contact.first_name," ",Z.contact.last_name]}),Z.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Z.deal.name}),Z.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:vGe(Z.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:wGe(Z.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Z.meet_assign_to.first_name," ",Z.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${NGe(Ob(Z.status))}`,children:Ob(Z.status).replace("_"," ")})})]},Z.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:be.length,pageSize:E,currentPage:S,onPrev:()=>A(Z=>Math.max(1,Z-1)),onNext:()=>A(Z=>Z+1),onPageSizeChange:_,label:"meetings"}),N&&n.jsx(n1,{onClose:Ce,formData:k,setFormData:T,isEditing:O,onSubmit:ge,isSubmitting:I||K,users:d}),j&&n.jsx(pd,{meeting:j,onClose:()=>w(null),onEdit:Oe,onDelete:Ne,onStatusUpdate:he}),Q&&n.jsx(CGe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:He,onCancel:()=>G(null),loading:K})]})};function CGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const SGe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],_Ge=e=>e?String(e).toUpperCase():"",uf=e=>{const t=_Ge(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},yT=e=>{const t=uf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},ZB=e=>{switch(uf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},JB=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function AGe(){const[e,t]=f.useState(!1),[a,s]=f.useState(null),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]),[p,x]=f.useState(null),[b,N]=f.useState(!1),[v,j]=f.useState(null),[w,S]=f.useState(!1),[A,E]=f.useState(!1),[_,k]=f.useState("PLANNED"),[T,O]=f.useState(!1),[$,R]=f.useState(!1),[P,I]=f.useState(null),{comments:H,addComment:Q,refresh:G}=Ta({relatedType:"call",relatedId:a?.id});f.useEffect(()=>{a?.id&&G()},[a?.id,G]),zs();const K=wt(),W=Zt(),J=ce=>{if(!ce)return"";const X=String(ce).split("-");return X.length===3?`${X[0]}-${X[2]}`:String(ce)},ee={subject:"",call_time:(()=>{const ce=new Date,X=ce.getFullYear(),de=String(ce.getMonth()+1).padStart(2,"0"),D=String(ce.getDate()).padStart(2,"0");return`${X}-${de}-${D}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[U,je]=f.useState(ee);f.useEffect(()=>{const ce=W.state,X=ce?.callID;if(X&&!ce?.openCallModal){I(X),K(W.pathname,{replace:!0,state:{}});return}!ce?.openCallModal||!ce?.initialCallData||ce.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ce.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),je(de=>({...de,...ce.initialCallData,relatedTo1:ce.initialCallData.relatedTo1?String(ce.initialCallData.relatedTo1):"",relatedTo2:ce.initialCallData.relatedTo2?String(ce.initialCallData.relatedTo2):""})),K(W.pathname,{replace:!0,state:{}}))},[W.state,o]),f.useEffect(()=>{if(P&&u.length>0&&!$){const ce=u.find(X=>X.id===P);ce?s(ce):q.error("Call not found."),I(null)}},[P,u,$]);const be=async()=>{try{R(!0);const ce=await te.get("/calls/admin/fetch-all"),de=[...Array.isArray(ce.data)?ce.data:[]].sort((D,B)=>{const oe=D?.created_at?new Date(D.created_at):0;return(B?.created_at?new Date(B.created_at):0)-oe});h(de)}catch(ce){console.error("Error fetching calls:",ce),q.error("Failed to load calls")}finally{R(!1)}},le=async()=>{try{const ce=await te.get("/users/all");x(ce.data)}catch(ce){console.error("Error fetching users: ",ce)}};f.useEffect(()=>{le(),be()},[]);const Ce=[],[Se,Oe]=f.useState(""),[ge,He]=f.useState("Filter by Status"),[Ne,he]=f.useState("Filter by Users"),[Z,_e]=f.useState(1),[ke,ze]=f.useState(10),tt=u,De=Math.max(1,Math.ceil(tt.length/ke)||1);f.useEffect(()=>{_e(1)},[Se,ge,ke]),f.useEffect(()=>{_e(ce=>{const X=Math.max(1,Math.ceil(tt.length/ke)||1);return ce>X?X:ce})},[tt.length,ke]);const at=f.useMemo(()=>{const ce=(Z-1)*ke;return tt.slice(ce,ce+ke)},[tt,Z,ke]),et=()=>_e(ce=>Math.max(ce-1,1)),V=()=>_e(ce=>Math.min(ce+1,De)),ne=u.length,se=u.filter(ce=>uf(ce.status)==="PLANNED").length,Ee=u.filter(ce=>uf(ce.status)==="HELD").length,Ie=u.filter(ce=>uf(ce.status)==="NOT_HELD").length,pe=[{title:"Total",value:ne,icon:$s,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:se,icon:Gs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ee,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ie,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}],[Be,$e]=f.useState("Overview"),Ve=ce=>{const{name:X,value:de}=ce.target;je(D=>{const B={...D,[X]:de};return X==="relatedType1"&&(B.relatedTo1="",de==="Lead"?(B.relatedType2=null,B.relatedTo2=null,d([])):de==="Account"&&(B.relatedType2="Contact")),X==="relatedType2"&&(B.relatedTo2=""),B})};f.useEffect(()=>{const ce=async()=>{try{l([]);let X;U.relatedType1==="Lead"?X=await te.get("/leads/admin/getLeads"):U.relatedType1==="Account"&&(X=await te.get("/accounts/admin/fetch-all"));let de=[];if(X&&Array.isArray(X.data)?de=X.data:de=[],b&&U.relatedTo1)try{let D;U.relatedType1==="Lead"?D=await te.get(`/leads/get/${U.relatedTo1}`):U.relatedType1==="Account"&&(D=await te.get(`/accounts/get/${U.relatedTo1}`)),D&&D.data&&(de.some(oe=>String(oe.id)===String(U.relatedTo1))||(de=[D.data,...de]))}catch(D){console.error("Error fetching specific related item:",D)}l(de)}catch(X){console.error("Error fetching data:",X),l([])}};U.relatedType1&&ce()},[U.relatedType1,b,U.relatedTo1]),f.useEffect(()=>{const ce=async()=>{try{d([]);let X;if(U.relatedType1==="Account"&&U.relatedTo1)U.relatedType2==="Contact"?X=await te.get(`/contacts/from-acc/${U.relatedTo1}`):U.relatedType2==="Deal"?X=await te.get(`/deals/from-acc/${U.relatedTo1}`):U.relatedType2==="Quote"&&(X=await te.get(`/quotes/from-acc/${U.relatedTo1}`));else{d([]);return}let de=[];if(X&&Array.isArray(X.data)?de=X.data:de=[],b&&U.relatedTo2)try{let D;U.relatedType2==="Contact"?D=await te.get(`/contacts/get/${U.relatedTo2}`):U.relatedType2==="Deal"?D=await te.get(`/deals/get/${U.relatedTo2}`):U.relatedType2==="Quote"&&(D=await te.get(`/quotes/get/${U.relatedTo2}`)),D&&D.data&&(de.some(oe=>String(oe.id)===String(U.relatedTo2))||(de=[D.data,...de]))}catch(D){console.error("Error fetching specific related item:",D)}d(de)}catch(X){console.error("Error fetching data:",X),d([])}};U.relatedType2&&ce()},[U.relatedType2,U.relatedTo1,U.relatedType1,b,U.relatedTo2]);const[ut,ve]=f.useState(!1),ae=ce=>{ce.preventDefault(),ve(!0);const X=U.subject;if(!X||X.trim()===""){q.error("Subject is required.");return}if(!U.relatedTo1){q.error(`Please select a ${U.relatedType1||"Lead/Account"}.`);return}if(!U.assigned_to){q.error("Subject is required.");return}const D={...U,duration_minutes:U.duration_minutes?parseInt(U.duration_minutes,10):null,relatedTo1:U.relatedTo1?parseInt(U.relatedTo1,10):null,relatedTo2:U.relatedType1==="Lead"?null:U.relatedTo2?parseInt(U.relatedTo2,10):null,relatedType2:U.relatedType1==="Lead"?null:U.relatedType2,assigned_to:U.assigned_to?parseInt(U.assigned_to,10):null},B=b&&v?"update":"create",oe=(U.subject||"").trim()||"Untitled Call";i({title:B==="create"?"Confirm New Call":"Confirm Update",message:B==="create"?`Create "${oe}"?`:`Save changes to "${oe}"?`,confirmLabel:B==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:B,payload:D,targetId:v||null,name:oe}})},Fe=ce=>s(ce),ye=()=>{t(!1),N(!1),j(null)},We=async()=>{if(!r?.action){i(null);return}const{action:ce}=r,{type:X,payload:de,targetId:D,name:B}=ce;E(!0);try{if(X==="create")S(!0),await te.post("/calls/create",de),q.success(`Call "${B}" created successfully.`),t(!1),je(ee),N(!1),j(null),await be();else if(X==="update"){if(!D)throw new Error("Missing call identifier for update.");S(!0),await te.put(`/calls/${D}`,de),q.success(`Call "${B}" updated successfully.`),t(!1),je(ee),N(!1),j(null),await be()}else if(X==="delete"){if(!D)throw new Error("Missing call identifier for deletion.");await te.delete(`/calls/${D}`),q.success(`Call "${B}" deleted successfully.`),a?.id===D&&s(null),await be()}}catch(oe){const ue=X==="create"?"Failed to create call. Please review the details and try again.":X==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",ie=oe?.response?.data?.detail||ue;q.error(ie)}finally{(X==="create"||X==="update")&&S(!1),E(!1),i(null)}},it=()=>{A||i(null)},ht=async()=>{if(a?.id)try{O(!0),await te.put(`/calls/${a.id}`,{status:_}),q.success(`Status updated to ${yT(_)}`),h(ce=>Array.isArray(ce)?ce.map(X=>X.id===a.id?{...X,status:_}:X):ce),s(null)}catch(ce){const X=ce.response?.data?.detail||"Failed to update status.";q.error(X)}finally{O(!1)}};f.useEffect(()=>{a&&k(uf(a.status))},[a]);const Ae=a?n.jsxs("div",{id:"callModalBackdrop",onClick:ce=>ce.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[$&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${ZB(a.status)}`,children:yT(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ce=oe=>{if(!oe)return"";const ue=new Date(oe),ie=ue.getFullYear(),Pe=String(ue.getMonth()+1).padStart(2,"0"),xe=String(ue.getDate()).padStart(2,"0"),fe=String(ue.getHours()).padStart(2,"0"),qe=String(ue.getMinutes()).padStart(2,"0");return`${ie}-${Pe}-${xe}T${fe}:${qe}`},X=a.lead?"Lead":a.account?"Account":"Lead",de=a.lead?a.lead.id:a.account?a.account.id:null,D=X==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",B=X==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;je({subject:a.subject||"",call_time:ce(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:X,relatedType2:D,relatedTo1:de?String(de):"",relatedTo2:B?String(B):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),j(a.id),s(null),t(!0)},children:[n.jsx(fa,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ce=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ce}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:ce}})},children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ce=>n.jsx("button",{onClick:()=>$e(ce),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Be===ce?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ce},ce))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Be==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(ho,{label:"Call Time",value:JB(a.call_time)}),n.jsx(ho,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(ho,{label:"Direction",value:a.direction||"--"}),n.jsx(ho,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(ho,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(ho,{label:"Account",value:a.account.name}),a.contact&&n.jsx(ho,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(ho,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(ho,{label:"Quote",value:J(a.quote.quote_id)}),n.jsx(ho,{label:"Created At",value:JB(a.created_at)})]})}),Be==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Aa,{comments:H,onAddComment:Q})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:ce=>k(ce.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ht,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,Je=e?n.jsx("div",{id:"modalBackdrop",onClick:ce=>ce.target.id==="modalBackdrop"&&ye(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{ye(),ve(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ae,noValidate:!0,children:[n.jsx(EGe,{label:"Subject",className:"md:col-span-2",name:"subject",value:U.subject,onChange:Ve,isSubmitted:ut,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Ve,value:U.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(bT,{items:Array.isArray(o)?o:[],value:U.relatedTo1??"",placeholder:`Search ${U.relatedType1||"here"}...`,getLabel:ce=>U.relatedType1==="Lead"?ce.title:ce.name??"",onChange:ce=>je(X=>({...X,relatedTo1:ce})),required:!0,isSubmitted:ut,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Ve,value:U.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:U.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(bT,{disabled:U.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:U.relatedTo2??"",placeholder:U.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${U.relatedType2||"Contact"}...`:`No ${U.relatedType2||""} data found`,getLabel:ce=>U.relatedType2==="Contact"?`${ce.first_name??""} ${ce.last_name??""}`.trim():U.relatedType2==="Quote"?J(ce.quote_id)??"":ce.name??"",onChange:ce=>je(X=>({...X,relatedTo2:ce}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:U.call_time,onChange:Ve,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:U.duration_minutes,onChange:Ve,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(bT,{items:Array.isArray(p)?p:[],value:U.assigned_to??"",placeholder:"Search an account...",getLabel:ce=>`${ce.first_name} ${ce.last_name}`,onChange:ce=>je(X=>({...X,assigned_to:ce})),required:!0,isSubmitted:ut})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Ve,value:U.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Ve,value:U.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(kGe,{className:"col-span-2",label:"Notes",value:U.notes,onChange:Ve,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ye(),ve(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":b?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx($s,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{je(ee),N(!1),j(null),t(!0),ve(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:pe.map(ce=>n.jsx(TGe,{...ce},ce.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Se})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:ge,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),SGe.map(ce=>n.jsx("option",{value:ce.value,children:ce.label},ce.value))]}),n.jsxs("select",{defaultValue:Ne,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ce.map(ce=>n.jsx("option",{value:ce.name,children:ce.name},ce.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:$?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):at.length>0?at.map(ce=>n.jsxs("tr",{onClick:()=>Fe(ce),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ce.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[ce.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.lead.title}),ce.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.account.name}),ce.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ce.contact.first_name," ",ce.contact.last_name]}),ce.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.deal.name}),ce.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:J(ce.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ce.call_time?new Date(ce.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ce?.call_assign_to?`${ce.call_assign_to.first_name} ${ce.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ZB(ce.status)}`,children:yT(ce.status)})})]},ce.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:tt.length,pageSize:ke,currentPage:Z,onPrev:et,onNext:V,onPageSizeChange:ze,label:"calls"})]}),Ae,Je,r&&n.jsx(LGe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:We,onCancel:it,loading:A})]})}function TGe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function EGe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function kGe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ho({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function LGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function bT({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),b=e.find(w=>String(w.id)===String(t)),N=b?s(b):"",v=l&&c&&!t,j=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?h:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${v?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(w=>{const S=String(w.id),A=s(w),E=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function PGe(){f.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[a,s]=f.useState(""),[r,i]=f.useState("Filter by Actions"),[o,l]=f.useState(1),[c,d]=f.useState(10),u=async()=>{try{const w=await te.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};f.useEffect(()=>{u()},[]);const h=f.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(E=>{const _=E.timestamp?new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",k=`${E.entity_type||""} ${E.entity_name||E.entity_details?.name||E.entity_details?.title||E.entity_id||""}`,T=`${E.logger?.first_name||""} ${E.logger?.last_name||""}`,O=[_,T,E.action,E.entity_type,k,E.description],$=w===""||O.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),R=S==="FILTER BY ACTIONS"||(E.action||"").toUpperCase()===S;return $&&R}).sort((E,_)=>{const k=E.timestamp?new Date(E.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-k})},[e,a,r]),p=Math.max(1,Math.ceil(h.length/c)||1);f.useEffect(()=>{l(1)},[a,c]),f.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(h.length/c)||1);return w>S?S:w})},[h.length,c]);const x=f.useMemo(()=>{const w=(o-1)*c;return h.slice(w,w+c)},[h,o,c]);h.length===0||(o-1)*c+1,Math.min(o*c,h.length);const b=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),v=()=>{if(!h.length){zx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=h.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(O=>`"${String(O).replace(/"/g,'""')}"`).join(","))].join(`
`),E=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(E),k=document.createElement("a");k.href=_,k.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(_)},j=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Rx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[n.jsx(Ql,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(h)&&h.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:h.length,pageSize:c,currentPage:o,onPrev:b,onNext:N,onPageSizeChange:d,label:"logs"})]})}const c1=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Lg={firstName:"",lastName:"",email:"",password:"",role:""},DGe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Co=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",OGe=e=>{const t=Co(e),a=c1.find(s=>Co(s.value)===t);return a?a.value:e||""},qk=e=>{const t=Co(e),a=c1.find(s=>Co(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},eH=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},vT=(e,{size:t="sm"}={})=>{const a=Co(e),s=DGe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:qk(e)})},MGe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},tH=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function IGe(){const{user:e,loading:t}=en(),[a,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,h]=f.useState(null),[p,x]=f.useState(!1),[b,N]=f.useState(!1),[v,j]=f.useState(null),[w,S]=f.useState(Lg),[A,E]=f.useState(!1),[_,k]=f.useState(null),[T,O]=f.useState(!1),[$,R]=f.useState(1),[P,I]=f.useState(10),[H,Q]=f.useState("Overview"),[G,K]=f.useState(""),[W,J]=f.useState(!1),Te=Co(e?.role);console.log("meow",e);const ee=["ADMIN","CEO","GROUP_MANAGER"].includes(Te),U=!t&&ee,je=f.useMemo(()=>{const pe=c1.filter(Be=>Co(Be.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...pe]},[]),be=f.useCallback(pe=>{pe&&(s(Be=>Be.map($e=>$e.id===pe?{...$e,highlight:!0}:$e)),setTimeout(()=>{s(Be=>Be.map($e=>$e.id===pe?{...$e,highlight:!1}:$e))},2e3))},[]),le=f.useCallback(async()=>{i(!0);try{const pe=await te.get("/users/all"),Be=Array.isArray(pe.data)?pe.data:[],$e=tH(Be);s($e),h(Ve=>Ve&&($e.find(ve=>ve.id===Ve.id)||null)),console.log(pe.data)}catch(pe){console.error("Error fetching users:",pe);const Be=pe.response?.data?.detail||"Failed to load users. Please try again later.";q.error(Be)}finally{i(!1)}},[]);f.useEffect(()=>{!t&&!ee&&e&&q.error("You are not authorized to access User Management.")},[ee,t,e]),f.useEffect(()=>{t||!ee||le()},[t,ee,le]),f.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Ce=f.useMemo(()=>{const pe=o.trim().toLowerCase(),Be=Co(c);return tH(a.filter($e=>{if(!$e)return!1;const Ve=pe===""||[$e.first_name,$e.last_name,`${$e.first_name||""} ${$e.last_name||""}`,$e.email,qk($e.role)].filter(Boolean).some(ve=>ve.toString().toLowerCase().includes(pe)),ut=Be===""||Be==="CEO"&&["CEO","ADMIN"].includes(Co($e.role))||Co($e.role)===Be;return Ve&&ut}))},[a,o,c]),Se=Math.max(1,Math.ceil(Ce.length/P)||1);f.useEffect(()=>{R(1)},[o,c,P]),f.useEffect(()=>{R(pe=>{const Be=Math.max(1,Math.ceil(Ce.length/P)||1);return pe>Be?Be:pe})},[Ce.length,P]);const Oe=f.useMemo(()=>{const pe=($-1)*P;return Ce.slice(pe,pe+P)},[Ce,$,P]);Ce.length===0||($-1)*P+1,Math.min($*P,Ce.length);const ge=()=>R(pe=>Math.max(pe-1,1)),He=()=>R(pe=>Math.min(pe+1,Se)),Ne=()=>{S(Lg),N(!1),j(null),x(!0)},he=pe=>{h(pe),Q("Overview"),K(pe?.is_active?"Active":"Inactive")},Z=pe=>{pe.target.id==="userModalBackdrop"&&!T&&_e()},_e=()=>{h(null)},ke=(pe,Be)=>{S($e=>({...$e,[pe]:Be}))},ze=()=>{const pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Be="";for(let $e=0;$e<10;$e+=1)Be+=pe.charAt(Math.floor(Math.random()*pe.length));ke("password",Be)},tt=()=>{A||T||(x(!1),S(Lg),j(null),N(!1))},De=pe=>{S({firstName:pe.first_name||"",lastName:pe.last_name||"",email:pe.email||"",password:"",role:OGe(pe.role)}),N(!0),j(pe.id),x(!0),h(null)},at=pe=>{k({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[pe.first_name," ",pe.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:pe.id,name:`${pe.first_name||""} ${pe.last_name||""}`.trim()||pe.email||"user"}})},et=pe=>{pe.preventDefault();const Be=w.firstName.trim(),$e=w.lastName.trim(),Ve=w.email.trim(),ut=w.password.trim(),ve=w.role,ae=!(b&&v);if(!Be||!Ve||!ve){q.warn("Please fill in all required fields.");return}if(ae&&!ut){q.warn("Please fill in all required fields.");return}if(ut&&ut.length<8){q.warn("Password should be at least 8 characters long.");return}const Fe={first_name:Be,last_name:$e,email:Ve,role:ve};(ae||ut)&&(Fe.password=ut);const ye=`${Be} ${$e}`.trim(),We=ae?"create":"update";k({title:We==="create"?"Confirm New User":"Confirm User Update",message:We==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:ye})," with role"," ",n.jsx("span",{className:"font-semibold",children:qk(ve)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:ye||Ve}),"?"]}),confirmLabel:We==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:We,payload:Fe,targetId:v,name:ye||Ve}})},V=async()=>{if(!_?.action){k(null);return}const{action:pe}=_,{type:Be,payload:$e,targetId:Ve,name:ut}=pe;O(!0),(Be==="create"||Be==="update")&&E(!0);try{if(Be==="create"){const ae=(await te.post("/users/createuser",$e)).data;await le(),be(ae.id),q.success(`User "${ut}" created successfully.`),x(!1),S(Lg),j(null),N(!1)}else if(Be==="update"){if(!Ve)throw new Error("Missing user identifier for update.");const ae=(await te.put(`/users/updateuser/${Ve}`,$e)).data;await le(),h(null),be(ae.id),q.success(`User "${ut}" updated successfully.`),x(!1),S(Lg),j(null),N(!1)}else if(Be==="delete"){if(!Ve)throw new Error("Missing user identifier for deletion.");await te.delete(`/users/deleteuser/${Ve}`),s(ve=>ve.map(ae=>ae.id===Ve?{...ae,is_active:!1}:ae)),u&&u.id===Ve&&(h(null),K("")),q.success(`User "${ut}" deactivated successfully.`)}}catch(ve){console.error("User management error:",ve);const ae=Be==="create"?"Failed to create user. Please review the details and try again.":Be==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Fe=ve.response?.data?.detail||ae;q.error(Fe)}finally{(Be==="create"||Be==="update")&&E(!1),O(!1),k(null)}},ne=()=>{T||k(null)},se=async()=>{if(!u||!G)return;const pe=u.is_active?"Active":"Inactive";if(G===pe)return;const Be=G==="Active";J(!0);try{const Ve=(await te.put(`/users/updateuser/${u.id}`,{is_active:Be})).data;s(ut=>ut.map(ve=>ve.id===Ve.id?Ve:ve)),h(null),K(""),q.success(`User status updated to ${G}`)}catch($e){console.error("Failed to update user status:",$e);const Ve=$e.response?.data?.detail||"Failed to update user status. Please try again.";q.error(Ve)}finally{J(!1)}},Ee=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!U)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ww,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Ne,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Qn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Wt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:pe=>l(pe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:pe=>d(pe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:je.map(pe=>n.jsx("option",{value:pe.value,children:pe.label},pe.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Ce.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Oe.map(pe=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${pe.highlight?"bg-green-50":""} ${pe.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(pe),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[pe.first_name," ",pe.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>he(pe),children:pe.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(pe),children:vT(pe.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(pe),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${pe.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:pe.is_active?"Active":"Inactive"})})]},pe.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ce.length,pageSize:P,currentPage:$,onPrev:ge,onNext:He,onPageSizeChange:I,label:"users"})]}),Ie=u?n.jsx("div",{id:"userModalBackdrop",onClick:Z,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:_e,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:MGe(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),vT(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>De(u),disabled:T,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>at(u),disabled:T,children:[n.jsx(Gt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(pe=>n.jsx("button",{onClick:()=>Q(pe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${H===pe?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:pe},pe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:H==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:vT(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,pe=>pe.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:eH(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?eH(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const pe=encodeURIComponent(u.email),Be=encodeURIComponent(""),$e=encodeURIComponent(""),Ve=`https://mail.google.com/mail/?view=cm&fs=1&to=${pe}&su=${Be}&body=${$e}`;window.open(Ve,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:G||(u.is_active?"Active":"Inactive"),onChange:pe=>K(pe.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:se,disabled:W||G===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||G===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Ee,Ie,n.jsx($Ge,{open:p,isEditing:b,isSubmitting:A,confirmProcessing:T,formData:w,onClose:tt,onSubmit:et,onChange:ke,onGeneratePassword:ze}),n.jsx(RGe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:V,onCancel:ne})]})}function $Ge({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Qt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(Mb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(Mb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(Mb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(Mb,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...c1],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Mb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function RGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function zGe(){return n.jsxs(Xae,{children:[n.jsx(Fse,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),n.jsxs(_ae,{children:[n.jsx(yt,{path:"/",element:n.jsx(Wie,{})}),n.jsx(yt,{path:"/header",element:n.jsx(n9,{})}),n.jsx(yt,{path:"/signup",element:n.jsx(qde,{})}),n.jsx(yt,{path:"/login",element:n.jsx(Gde,{})}),n.jsx(yt,{path:"/forgot-password",element:n.jsx(Qde,{})}),n.jsx(yt,{path:"/resources",element:n.jsx(Zde,{})}),n.jsx(yt,{path:"/legal",element:n.jsx(eue,{})}),n.jsx(yt,{path:"/admin/quotes/:quoteId/print",element:n.jsx(ul,{requiredRole:"ceo",children:n.jsx(Lb,{})})}),n.jsx(yt,{path:"/sales/quotes/:quoteId/print",element:n.jsx(ul,{requiredRole:"sales",children:n.jsx(Lb,{})})}),n.jsx(yt,{path:"/manager/quotes/:quoteId/print",element:n.jsx(ul,{requiredRole:"manager",children:n.jsx(Lb,{})})}),n.jsx(yt,{path:"/group-manager/quotes/:quoteId/print",element:n.jsx(ul,{requiredRole:"group manager",children:n.jsx(Lb,{})})}),n.jsxs(yt,{path:"/admin",element:n.jsx(ul,{requiredRole:"ceo",children:n.jsx(nue,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(z1e,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(rCe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(cCe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(pCe,{})}),n.jsx(yt,{path:"leads/:leadID",element:n.jsx(VV,{})}),n.jsx(yt,{path:"audit",element:n.jsx(oSe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(d$e,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(x$e,{})}),n.jsx(yt,{path:"users",element:n.jsx(S$e,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(E$e,{})}),n.jsx(yt,{path:"company-details",element:n.jsx(cze,{})}),n.jsx(yt,{path:"deals",element:n.jsx(k$e,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(iZ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(rZ,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(BRe,{})}),n.jsxs(yt,{path:"/admin/territory",children:[n.jsx(yt,{index:!0,element:n.jsx($c,{})}),n.jsx(yt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(yt,{path:"calls",element:n.jsx(W7,{})}),n.jsx(yt,{path:"calls/info",element:n.jsx(W7,{})}),n.jsx(yt,{path:"meetings",element:n.jsx(G7,{})}),n.jsx(yt,{path:"meetings/info",element:n.jsx(G7,{})}),n.jsx(yt,{path:"help",element:n.jsx(dze,{})})]}),n.jsxs(yt,{path:"/sales",element:n.jsx(ul,{requiredRole:"sales",children:n.jsx(mze,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"overview",replace:!0})}),n.jsx(yt,{path:"overview",element:n.jsx(Fze,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(Hze,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(Vze,{})}),n.jsx(yt,{path:"leads",element:n.jsx(eFe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(qZ,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(oFe,{})}),n.jsx(yt,{path:"deals",element:n.jsx(lFe,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(GZ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(WZ,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(vFe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(SFe,{})}),n.jsx(yt,{path:"audit",element:n.jsx(_Fe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(Dy,{})}),n.jsxs(yt,{path:"/sales/territory",children:[n.jsx(yt,{index:!0,element:n.jsx($c,{})}),n.jsx(yt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(yt,{path:"meetings",element:n.jsx(IFe,{})}),n.jsx(yt,{path:"calls",element:n.jsx(FFe,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(kFe,{})})]}),n.jsxs(yt,{path:"/manager",element:n.jsx(ul,{requiredRole:"manager",children:n.jsx(GFe,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(vUe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(jUe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(AUe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(OUe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(tJ,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(UUe,{})}),n.jsx(yt,{path:"deals",element:n.jsx(BUe,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(aJ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(nJ,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(e7e,{})}),n.jsx(yt,{path:"targets",element:n.jsx(r7e,{})}),n.jsx(yt,{path:"meetings",element:n.jsx(j7e,{})}),n.jsx(yt,{path:"audit",element:n.jsx(i7e,{})}),n.jsx(yt,{path:"calls",element:n.jsx(c7e,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(x7e,{})}),n.jsxs(yt,{path:"/manager/territory",children:[n.jsx(yt,{index:!0,element:n.jsx($c,{})}),n.jsx(yt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(yt,{path:"users",element:n.jsx(T7e,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(Dy,{})})]}),n.jsx(yt,{children:n.jsxs(yt,{path:"/marketing",element:n.jsx(ul,{requiredRole:"marketing",children:n.jsx(P7e,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(kqe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(Lqe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(Dqe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(zqe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(ZJ,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(XJ,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(Hqe,{})}),n.jsx(yt,{path:"campaigns",element:n.jsx(Gqe,{})}),n.jsx(yt,{path:"templates",element:n.jsx(Yqe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(Dy,{})})]})}),n.jsxs(yt,{path:"/group-manager",element:n.jsx(ul,{requiredRole:"group manager",children:n.jsx(Zqe,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(_We,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(EWe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(DWe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(FWe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(ree,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(VWe,{})}),n.jsx(yt,{path:"deals",element:n.jsx(QWe,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(oee,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(iee,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(lGe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(fGe,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(xGe,{})}),n.jsxs(yt,{path:"/group-manager/territory",children:[n.jsx(yt,{index:!0,element:n.jsx($c,{})}),n.jsx(yt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(yt,{path:"meetings",element:n.jsx(jGe,{})}),n.jsx(yt,{path:"calls",element:n.jsx(AGe,{})}),n.jsx(yt,{path:"audit",element:n.jsx(PGe,{})}),n.jsx(yt,{path:"users",element:n.jsx(IGe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(Dy,{})})]})]})]})}Ane.createRoot(document.getElementById("root")).render(n.jsx(f.StrictMode,{children:n.jsx(zGe,{})}));
