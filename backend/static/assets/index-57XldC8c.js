function mne(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function Xi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fS={exports:{}},tg={};var MM;function fne(){if(MM)return tg;MM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var l in r)l!=="key"&&(i[l]=r[l])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:o,ref:r!==void 0?r:null,props:i}}return tg.Fragment=t,tg.jsx=a,tg.jsxs=a,tg}var IM;function hne(){return IM||(IM=1,fS.exports=fne()),fS.exports}var n=hne(),hS={exports:{}},Zt={};var $M;function gne(){if($M)return Zt;$M=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function x(K){return K===null||typeof K!="object"?null:(K=p&&K[p]||K["@@iterator"],typeof K=="function"?K:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,b={};function C(K,R,ye){this.props=K,this.context=R,this.refs=b,this.updater=ye||v}C.prototype.isReactComponent={},C.prototype.setState=function(K,R){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,R,"setState")},C.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function w(){}w.prototype=C.prototype;function S(K,R,ye){this.props=K,this.context=R,this.refs=b,this.updater=ye||v}var E=S.prototype=new w;E.constructor=S,N(E,C.prototype),E.isPureReactComponent=!0;var k=Array.isArray;function _(){}var A={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function $(K,R,ye){var pe=ye.ref;return{$$typeof:e,type:K,key:R,ref:pe!==void 0?pe:null,props:ye}}function z(K,R){return $(K.type,R,K.props)}function F(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function P(K){var R={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ye){return R[ye]})}var M=/\/+/g;function G(K,R){return typeof K=="object"&&K!==null&&K.key!=null?P(""+K.key):R.toString(36)}function Q(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(_,_):(K.status="pending",K.then(function(R){K.status==="pending"&&(K.status="fulfilled",K.value=R)},function(R){K.status==="pending"&&(K.status="rejected",K.reason=R)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function V(K,R,ye,pe,Ne){var Se=typeof K;(Se==="undefined"||Se==="boolean")&&(K=null);var Oe=!1;if(K===null)Oe=!0;else switch(Se){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(K.$$typeof){case e:case t:Oe=!0;break;case u:return Oe=K._init,V(Oe(K._payload),R,ye,pe,Ne)}}if(Oe)return Ne=Ne(K),Oe=pe===""?"."+G(K,0):pe,k(Ne)?(ye="",Oe!=null&&(ye=Oe.replace(M,"$&/")+"/"),V(Ne,R,ye,"",function(Ge){return Ge})):Ne!=null&&(F(Ne)&&(Ne=z(Ne,ye+(Ne.key==null||K&&K.key===Ne.key?"":(""+Ne.key).replace(M,"$&/")+"/")+Oe)),R.push(Ne)),1;Oe=0;var ke=pe===""?".":pe+":";if(k(K))for(var he=0;he<K.length;he++)pe=K[he],Se=ke+G(pe,he),Oe+=V(pe,R,ye,Se,Ne);else if(he=x(K),typeof he=="function")for(K=he.call(K),he=0;!(pe=K.next()).done;)pe=pe.value,Se=ke+G(pe,he++),Oe+=V(pe,R,ye,Se,Ne);else if(Se==="object"){if(typeof K.then=="function")return V(Q(K),R,ye,pe,Ne);throw R=String(K),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function X(K,R,ye){if(K==null)return K;var pe=[],Ne=0;return V(K,pe,"","",function(Se){return R.call(ye,Se,Ne++)}),pe}function q(K){if(K._status===-1){var R=K._result;R=R(),R.then(function(ye){(K._status===0||K._status===-1)&&(K._status=1,K._result=ye)},function(ye){(K._status===0||K._status===-1)&&(K._status=2,K._result=ye)}),K._status===-1&&(K._status=0,K._result=R)}if(K._status===1)return K._result.default;throw K._result}var ne=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},oe={map:X,forEach:function(K,R,ye){X(K,function(){R.apply(this,arguments)},ye)},count:function(K){var R=0;return X(K,function(){R++}),R},toArray:function(K){return X(K,function(R){return R})||[]},only:function(K){if(!F(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Zt.Activity=f,Zt.Children=oe,Zt.Component=C,Zt.Fragment=a,Zt.Profiler=r,Zt.PureComponent=S,Zt.StrictMode=s,Zt.Suspense=c,Zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Zt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return A.H.useMemoCache(K)}},Zt.cache=function(K){return function(){return K.apply(null,arguments)}},Zt.cacheSignal=function(){return null},Zt.cloneElement=function(K,R,ye){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var pe=N({},K.props),Ne=K.key;if(R!=null)for(Se in R.key!==void 0&&(Ne=""+R.key),R)!T.call(R,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&R.ref===void 0||(pe[Se]=R[Se]);var Se=arguments.length-2;if(Se===1)pe.children=ye;else if(1<Se){for(var Oe=Array(Se),ke=0;ke<Se;ke++)Oe[ke]=arguments[ke+2];pe.children=Oe}return $(K.type,Ne,pe)},Zt.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},Zt.createElement=function(K,R,ye){var pe,Ne={},Se=null;if(R!=null)for(pe in R.key!==void 0&&(Se=""+R.key),R)T.call(R,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ne[pe]=R[pe]);var Oe=arguments.length-2;if(Oe===1)Ne.children=ye;else if(1<Oe){for(var ke=Array(Oe),he=0;he<Oe;he++)ke[he]=arguments[he+2];Ne.children=ke}if(K&&K.defaultProps)for(pe in Oe=K.defaultProps,Oe)Ne[pe]===void 0&&(Ne[pe]=Oe[pe]);return $(K,Se,Ne)},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(K){return{$$typeof:l,render:K}},Zt.isValidElement=F,Zt.lazy=function(K){return{$$typeof:u,_payload:{_status:-1,_result:K},_init:q}},Zt.memo=function(K,R){return{$$typeof:d,type:K,compare:R===void 0?null:R}},Zt.startTransition=function(K){var R=A.T,ye={};A.T=ye;try{var pe=K(),Ne=A.S;Ne!==null&&Ne(ye,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(_,ne)}catch(Se){ne(Se)}finally{R!==null&&ye.types!==null&&(R.types=ye.types),A.T=R}},Zt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Zt.use=function(K){return A.H.use(K)},Zt.useActionState=function(K,R,ye){return A.H.useActionState(K,R,ye)},Zt.useCallback=function(K,R){return A.H.useCallback(K,R)},Zt.useContext=function(K){return A.H.useContext(K)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(K,R){return A.H.useDeferredValue(K,R)},Zt.useEffect=function(K,R){return A.H.useEffect(K,R)},Zt.useEffectEvent=function(K){return A.H.useEffectEvent(K)},Zt.useId=function(){return A.H.useId()},Zt.useImperativeHandle=function(K,R,ye){return A.H.useImperativeHandle(K,R,ye)},Zt.useInsertionEffect=function(K,R){return A.H.useInsertionEffect(K,R)},Zt.useLayoutEffect=function(K,R){return A.H.useLayoutEffect(K,R)},Zt.useMemo=function(K,R){return A.H.useMemo(K,R)},Zt.useOptimistic=function(K,R){return A.H.useOptimistic(K,R)},Zt.useReducer=function(K,R,ye){return A.H.useReducer(K,R,ye)},Zt.useRef=function(K){return A.H.useRef(K)},Zt.useState=function(K){return A.H.useState(K)},Zt.useSyncExternalStore=function(K,R,ye){return A.H.useSyncExternalStore(K,R,ye)},Zt.useTransition=function(){return A.H.useTransition()},Zt.version="19.2.0",Zt}var RM;function zf(){return RM||(RM=1,hS.exports=gne()),hS.exports}var h=zf();const yt=Xi(h),Nu=mne({__proto__:null,default:yt},[h]);var gS={exports:{}},ng={},pS={exports:{}},xS={};var zM;function pne(){return zM||(zM=1,(function(e){function t(V,X){var q=V.length;V.push(X);e:for(;0<q;){var ne=q-1>>>1,oe=V[ne];if(0<r(oe,X))V[ne]=X,V[q]=oe,q=ne;else break e}}function a(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var X=V[0],q=V.pop();if(q!==X){V[0]=q;e:for(var ne=0,oe=V.length,K=oe>>>1;ne<K;){var R=2*(ne+1)-1,ye=V[R],pe=R+1,Ne=V[pe];if(0>r(ye,q))pe<oe&&0>r(Ne,ye)?(V[ne]=Ne,V[pe]=q,ne=pe):(V[ne]=ye,V[R]=q,ne=R);else if(pe<oe&&0>r(Ne,q))V[ne]=Ne,V[pe]=q,ne=pe;else break e}}return X}function r(V,X){var q=V.sortIndex-X.sortIndex;return q!==0?q:V.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,p=3,x=!1,v=!1,N=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function E(V){for(var X=a(d);X!==null;){if(X.callback===null)s(d);else if(X.startTime<=V)s(d),X.sortIndex=X.expirationTime,t(c,X);else break;X=a(d)}}function k(V){if(N=!1,E(V),!v)if(a(c)!==null)v=!0,_||(_=!0,P());else{var X=a(d);X!==null&&Q(k,X.startTime-V)}}var _=!1,A=-1,T=5,$=-1;function z(){return b?!0:!(e.unstable_now()-$<T)}function F(){if(b=!1,_){var V=e.unstable_now();$=V;var X=!0;try{e:{v=!1,N&&(N=!1,w(A),A=-1),x=!0;var q=p;try{t:{for(E(V),f=a(c);f!==null&&!(f.expirationTime>V&&z());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var oe=ne(f.expirationTime<=V);if(V=e.unstable_now(),typeof oe=="function"){f.callback=oe,E(V),X=!0;break t}f===a(c)&&s(c),E(V)}else s(c);f=a(c)}if(f!==null)X=!0;else{var K=a(d);K!==null&&Q(k,K.startTime-V),X=!1}}break e}finally{f=null,p=q,x=!1}X=void 0}}finally{X?P():_=!1}}}var P;if(typeof S=="function")P=function(){S(F)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,G=M.port2;M.port1.onmessage=F,P=function(){G.postMessage(null)}}else P=function(){C(F,0)};function Q(V,X){A=C(function(){V(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(V){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var q=p;p=X;try{return V()}finally{p=q}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=p;p=V;try{return X()}finally{p=q}},e.unstable_scheduleCallback=function(V,X,q){var ne=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ne+q:ne):q=ne,V){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=q+oe,V={id:u++,callback:X,priorityLevel:V,startTime:q,expirationTime:oe,sortIndex:-1},q>ne?(V.sortIndex=q,t(d,V),a(c)===null&&V===a(d)&&(N?(w(A),A=-1):N=!0,Q(k,q-ne))):(V.sortIndex=oe,t(c,V),v||x||(v=!0,_||(_=!0,P()))),V},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(V){var X=p;return function(){var q=p;p=X;try{return V.apply(this,arguments)}finally{p=q}}}})(xS)),xS}var UM;function xne(){return UM||(UM=1,pS.exports=pne()),pS.exports}var yS={exports:{}},Es={};var FM;function yne(){if(FM)return Es;FM=1;var e=zf();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,d,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Es.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},Es.flushSync=function(c){var d=o.T,u=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=d,s.p=u,s.d.f()}},Es.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(c,d))},Es.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Es.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?s.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:x}):u==="script"&&s.d.X(c,{crossOrigin:f,integrity:p,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Es.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);s.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(c)},Es.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin);s.d.L(c,u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Es.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);s.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(c)},Es.requestFormReset=function(c){s.d.r(c)},Es.unstable_batchedUpdates=function(c,d){return c(d)},Es.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},Es.useFormStatus=function(){return o.H.useHostTransitionStatus()},Es.version="19.2.0",Es}var BM;function QB(){if(BM)return yS.exports;BM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yS.exports=yne(),yS.exports}var HM;function bne(){if(HM)return ng;HM=1;var e=xne(),t=zf(),a=QB();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,y=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(y=g.return),m=g.return;while(m)}return g.tag===3?y:null}function o(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function l(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function d(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var y=m,j=g;;){var L=y.return;if(L===null)break;var O=L.alternate;if(O===null){if(j=L.return,j!==null){y=j;continue}break}if(L.child===O.child){for(O=L.child;O;){if(O===y)return c(L),m;if(O===j)return c(L),g;O=O.sibling}throw Error(s(188))}if(y.return!==j.return)y=L,j=O;else{for(var Y=!1,we=L.child;we;){if(we===y){Y=!0,y=L,j=O;break}if(we===j){Y=!0,j=L,y=O;break}we=we.sibling}if(!Y){for(we=O.child;we;){if(we===y){Y=!0,y=O,j=L;break}if(we===j){Y=!0,j=O,y=L;break}we=we.sibling}if(!Y)throw Error(s(189))}}if(y.alternate!==j)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?m:g}function u(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=u(m),g!==null)return g;m=m.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function P(m){return m===null||typeof m!="object"?null:(m=F&&m[F]||m["@@iterator"],typeof m=="function"?m:null)}var M=Symbol.for("react.client.reference");function G(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===M?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case N:return"Fragment";case C:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList";case $:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case v:return"Portal";case S:return m.displayName||"Context";case w:return(m._context.displayName||"Context")+".Consumer";case E:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case A:return g=m.displayName||null,g!==null?g:G(m.type)||"Memo";case T:g=m._payload,m=m._init;try{return G(m(g))}catch{}}return null}var Q=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},ne=[],oe=-1;function K(m){return{current:m}}function R(m){0>oe||(m.current=ne[oe],ne[oe]=null,oe--)}function ye(m,g){oe++,ne[oe]=m.current,m.current=g}var pe=K(null),Ne=K(null),Se=K(null),Oe=K(null);function ke(m,g){switch(ye(Se,g),ye(Ne,m),ye(pe,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?sM(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=sM(g),m=rM(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}R(pe),ye(pe,m)}function he(){R(pe),R(Ne),R(Se)}function Ge(m){m.memoizedState!==null&&ye(Oe,m);var g=pe.current,y=rM(g,m.type);g!==y&&(ye(Ne,m),ye(pe,y))}function Ce(m){Ne.current===m&&(R(pe),R(Ne)),Oe.current===m&&(R(Oe),Xh._currentValue=q)}var xe,ee;function Ee(m){if(xe===void 0)try{throw Error()}catch(y){var g=y.stack.trim().match(/\n( *(at )?)/);xe=g&&g[1]||"",ee=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+m+ee}var Ae=!1;function Re(m,g){if(!m||Ae)return"";Ae=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var j={DetermineComponentFrameRoot:function(){try{if(g){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(dt){var it=dt}Reflect.construct(m,[],xt)}else{try{xt.call()}catch(dt){it=dt}m.call(xt.prototype)}}else{try{throw Error()}catch(dt){it=dt}(xt=m())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(dt){if(dt&&it&&typeof dt.stack=="string")return[dt.stack,it.stack]}return[null,null]}};j.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(j.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(j.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=j.DetermineComponentFrameRoot(),Y=O[0],we=O[1];if(Y&&we){var ze=Y.split(`
`),st=we.split(`
`);for(L=j=0;j<ze.length&&!ze[j].includes("DetermineComponentFrameRoot");)j++;for(;L<st.length&&!st[L].includes("DetermineComponentFrameRoot");)L++;if(j===ze.length||L===st.length)for(j=ze.length-1,L=st.length-1;1<=j&&0<=L&&ze[j]!==st[L];)L--;for(;1<=j&&0<=L;j--,L--)if(ze[j]!==st[L]){if(j!==1||L!==1)do if(j--,L--,0>L||ze[j]!==st[L]){var ut=`
`+ze[j].replace(" at new "," at ");return m.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",m.displayName)),ut}while(1<=j&&0<=L);break}}}finally{Ae=!1,Error.prepareStackTrace=y}return(y=m?m.displayName||m.name:"")?Ee(y):""}function et(m,g){switch(m.tag){case 26:case 27:case 5:return Ee(m.type);case 16:return Ee("Lazy");case 13:return m.child!==g&&g!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Re(m.type,!1);case 11:return Re(m.type.render,!1);case 1:return Re(m.type,!0);case 31:return Ee("Activity");default:return""}}function De(m){try{var g="",y=null;do g+=et(m,y),y=m,m=m.return;while(m);return g}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var tt=Object.prototype.hasOwnProperty,Je=e.unstable_scheduleCallback,H=e.unstable_cancelCallback,be=e.unstable_shouldYield,le=e.unstable_requestPaint,Z=e.unstable_now,_e=e.unstable_getCurrentPriorityLevel,te=e.unstable_ImmediatePriority,Ue=e.unstable_UserBlockingPriority,Ie=e.unstable_NormalPriority,We=e.unstable_LowPriority,gt=e.unstable_IdlePriority,ve=e.log,Be=e.unstable_setDisableYieldValue,nt=null,Te=null;function Qe(m){if(typeof ve=="function"&&Be(m),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(nt,m)}catch{}}var ct=Math.clz32?Math.clz32:Ze,ht=Math.log,je=Math.LN2;function Ze(m){return m>>>=0,m===0?32:31-(ht(m)/je|0)|0}var ce=256,J=262144,de=4194304;function D(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function B(m,g,y){var j=m.pendingLanes;if(j===0)return 0;var L=0,O=m.suspendedLanes,Y=m.pingedLanes;m=m.warmLanes;var we=j&134217727;return we!==0?(j=we&~O,j!==0?L=D(j):(Y&=we,Y!==0?L=D(Y):y||(y=we&~m,y!==0&&(L=D(y))))):(we=j&~O,we!==0?L=D(we):Y!==0?L=D(Y):y||(y=j&~m,y!==0&&(L=D(y)))),L===0?0:g!==0&&g!==L&&(g&O)===0&&(O=L&-L,y=g&-g,O>=y||O===32&&(y&4194048)!==0)?g:L}function ie(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function ue(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function se(){var m=de;return de<<=1,(de&62914560)===0&&(de=4194304),m}function Pe(m){for(var g=[],y=0;31>y;y++)g.push(m);return g}function ge(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function fe(m,g,y,j,L,O){var Y=m.pendingLanes;m.pendingLanes=y,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=y,m.entangledLanes&=y,m.errorRecoveryDisabledLanes&=y,m.shellSuspendCounter=0;var we=m.entanglements,ze=m.expirationTimes,st=m.hiddenUpdates;for(y=Y&~y;0<y;){var ut=31-ct(y),xt=1<<ut;we[ut]=0,ze[ut]=-1;var it=st[ut];if(it!==null)for(st[ut]=null,ut=0;ut<it.length;ut++){var dt=it[ut];dt!==null&&(dt.lane&=-536870913)}y&=~xt}j!==0&&Fe(m,j,0),O!==0&&L===0&&m.tag!==0&&(m.suspendedLanes|=O&~(Y&~g))}function Fe(m,g,y){m.pendingLanes|=g,m.suspendedLanes&=~g;var j=31-ct(g);m.entangledLanes|=g,m.entanglements[j]=m.entanglements[j]|1073741824|y&261930}function Xe(m,g){var y=m.entangledLanes|=g;for(m=m.entanglements;y;){var j=31-ct(y),L=1<<j;L&g|m[j]&g&&(m[j]|=g),y&=~L}}function pt(m,g){var y=g&-g;return y=(y&42)!==0?1:Nt(y),(y&(m.suspendedLanes|g))!==0?0:y}function Nt(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function St(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function Ht(){var m=X.p;return m!==0?m:(m=window.event,m===void 0?32:TM(m.type))}function on(m,g){var y=X.p;try{return X.p=m,g()}finally{X.p=y}}var cn=Math.random().toString(36).slice(2),re="__reactFiber$"+cn,ot="__reactProps$"+cn,Rt="__reactContainer$"+cn,kt="__reactEvents$"+cn,Yt="__reactListeners$"+cn,Me="__reactHandles$"+cn,vt="__reactResources$"+cn,U="__reactMarker$"+cn;function I(m){delete m[re],delete m[ot],delete m[kt],delete m[Yt],delete m[Me]}function me(m){var g=m[re];if(g)return g;for(var y=m.parentNode;y;){if(g=y[Rt]||y[re]){if(y=g.alternate,g.child!==null||y!==null&&y.child!==null)for(m=mM(m);m!==null;){if(y=m[re])return y;m=mM(m)}return g}m=y,y=m.parentNode}return null}function Le(m){if(m=m[re]||m[Rt]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function $e(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function Ve(m){var g=m[vt];return g||(g=m[vt]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ye(m){m[U]=!0}var At=new Set,Ct={};function Kt(m,g){sa(m,g),sa(m+"Capture",g)}function sa(m,g){for(Ct[m]=g,m=0;m<g.length;m++)At.add(g[m])}var fh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),QD={},YD={};function see(m){return tt.call(YD,m)?!0:tt.call(QD,m)?!1:fh.test(m)?YD[m]=!0:(QD[m]=!0,!1)}function u0(m,g,y){if(see(g))if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var j=g.toLowerCase().slice(0,5);if(j!=="data-"&&j!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+y)}}function m0(m,g,y){if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+y)}}function Vo(m,g,y,j){if(j===null)m.removeAttribute(y);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(y);return}m.setAttributeNS(g,y,""+j)}}function qr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function KD(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ree(m,g,y){var j=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var L=j.get,O=j.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return L.call(this)},set:function(Y){y=""+Y,O.call(this,Y)}}),Object.defineProperty(m,g,{enumerable:j.enumerable}),{getValue:function(){return y},setValue:function(Y){y=""+Y},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function i1(m){if(!m._valueTracker){var g=KD(m)?"checked":"value";m._valueTracker=ree(m,g,""+m[g])}}function XD(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var y=g.getValue(),j="";return m&&(j=KD(m)?m.checked?"true":"false":m.value),m=j,m!==y?(g.setValue(m),!0):!1}function f0(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var iee=/[\n"\\]/g;function Vr(m){return m.replace(iee,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function o1(m,g,y,j,L,O,Y,we){m.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?m.type=Y:m.removeAttribute("type"),g!=null?Y==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+qr(g)):m.value!==""+qr(g)&&(m.value=""+qr(g)):Y!=="submit"&&Y!=="reset"||m.removeAttribute("value"),g!=null?l1(m,Y,qr(g)):y!=null?l1(m,Y,qr(y)):j!=null&&m.removeAttribute("value"),L==null&&O!=null&&(m.defaultChecked=!!O),L!=null&&(m.checked=L&&typeof L!="function"&&typeof L!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?m.name=""+qr(we):m.removeAttribute("name")}function ZD(m,g,y,j,L,O,Y,we){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(m.type=O),g!=null||y!=null){if(!(O!=="submit"&&O!=="reset"||g!=null)){i1(m);return}y=y!=null?""+qr(y):"",g=g!=null?""+qr(g):y,we||g===m.value||(m.value=g),m.defaultValue=g}j=j??L,j=typeof j!="function"&&typeof j!="symbol"&&!!j,m.checked=we?m.checked:!!j,m.defaultChecked=!!j,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(m.name=Y),i1(m)}function l1(m,g,y){g==="number"&&f0(m.ownerDocument)===m||m.defaultValue===""+y||(m.defaultValue=""+y)}function nm(m,g,y,j){if(m=m.options,g){g={};for(var L=0;L<y.length;L++)g["$"+y[L]]=!0;for(y=0;y<m.length;y++)L=g.hasOwnProperty("$"+m[y].value),m[y].selected!==L&&(m[y].selected=L),L&&j&&(m[y].defaultSelected=!0)}else{for(y=""+qr(y),g=null,L=0;L<m.length;L++){if(m[L].value===y){m[L].selected=!0,j&&(m[L].defaultSelected=!0);return}g!==null||m[L].disabled||(g=m[L])}g!==null&&(g.selected=!0)}}function JD(m,g,y){if(g!=null&&(g=""+qr(g),g!==m.value&&(m.value=g),y==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=y!=null?""+qr(y):""}function eO(m,g,y,j){if(g==null){if(j!=null){if(y!=null)throw Error(s(92));if(Q(j)){if(1<j.length)throw Error(s(93));j=j[0]}y=j}y==null&&(y=""),g=y}y=qr(g),m.defaultValue=y,j=m.textContent,j===y&&j!==""&&j!==null&&(m.value=j),i1(m)}function am(m,g){if(g){var y=m.firstChild;if(y&&y===m.lastChild&&y.nodeType===3){y.nodeValue=g;return}}m.textContent=g}var oee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tO(m,g,y){var j=g.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?j?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":j?m.setProperty(g,y):typeof y!="number"||y===0||oee.has(g)?g==="float"?m.cssFloat=y:m[g]=(""+y).trim():m[g]=y+"px"}function nO(m,g,y){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,y!=null){for(var j in y)!y.hasOwnProperty(j)||g!=null&&g.hasOwnProperty(j)||(j.indexOf("--")===0?m.setProperty(j,""):j==="float"?m.cssFloat="":m[j]="");for(var L in g)j=g[L],g.hasOwnProperty(L)&&y[L]!==j&&tO(m,L,j)}else for(var O in g)g.hasOwnProperty(O)&&tO(m,O,g[O])}function c1(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function h0(m){return cee.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Qo(){}var d1=null;function u1(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var sm=null,rm=null;function aO(m){var g=Le(m);if(g&&(m=g.stateNode)){var y=m[ot]||null;e:switch(m=g.stateNode,g.type){case"input":if(o1(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),g=y.name,y.type==="radio"&&g!=null){for(y=m;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Vr(""+g)+'"][type="radio"]'),g=0;g<y.length;g++){var j=y[g];if(j!==m&&j.form===m.form){var L=j[ot]||null;if(!L)throw Error(s(90));o1(j,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(g=0;g<y.length;g++)j=y[g],j.form===m.form&&XD(j)}break e;case"textarea":JD(m,y.value,y.defaultValue);break e;case"select":g=y.value,g!=null&&nm(m,!!y.multiple,g,!1)}}}var m1=!1;function sO(m,g,y){if(m1)return m(g,y);m1=!0;try{var j=m(g);return j}finally{if(m1=!1,(sm!==null||rm!==null)&&(ty(),sm&&(g=sm,m=rm,rm=sm=null,aO(g),m)))for(g=0;g<m.length;g++)aO(m[g])}}function hh(m,g){var y=m.stateNode;if(y===null)return null;var j=y[ot]||null;if(j===null)return null;y=j[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(m=m.type,j=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!j;break e;default:m=!1}if(m)return null;if(y&&typeof y!="function")throw Error(s(231,g,typeof y));return y}var Yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f1=!1;if(Yo)try{var gh={};Object.defineProperty(gh,"passive",{get:function(){f1=!0}}),window.addEventListener("test",gh,gh),window.removeEventListener("test",gh,gh)}catch{f1=!1}var dc=null,h1=null,g0=null;function rO(){if(g0)return g0;var m,g=h1,y=g.length,j,L="value"in dc?dc.value:dc.textContent,O=L.length;for(m=0;m<y&&g[m]===L[m];m++);var Y=y-m;for(j=1;j<=Y&&g[y-j]===L[O-j];j++);return g0=L.slice(m,1<j?1-j:void 0)}function p0(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function x0(){return!0}function iO(){return!1}function Zs(m){function g(y,j,L,O,Y){this._reactName=y,this._targetInst=L,this.type=j,this.nativeEvent=O,this.target=Y,this.currentTarget=null;for(var we in m)m.hasOwnProperty(we)&&(y=m[we],this[we]=y?y(O):O[we]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?x0:iO,this.isPropagationStopped=iO,this}return f(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=x0)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=x0)},persist:function(){},isPersistent:x0}),g}var _d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y0=Zs(_d),ph=f({},_d,{view:0,detail:0}),dee=Zs(ph),g1,p1,xh,b0=f({},ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y1,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==xh&&(xh&&m.type==="mousemove"?(g1=m.screenX-xh.screenX,p1=m.screenY-xh.screenY):p1=g1=0,xh=m),g1)},movementY:function(m){return"movementY"in m?m.movementY:p1}}),oO=Zs(b0),uee=f({},b0,{dataTransfer:0}),mee=Zs(uee),fee=f({},ph,{relatedTarget:0}),x1=Zs(fee),hee=f({},_d,{animationName:0,elapsedTime:0,pseudoElement:0}),gee=Zs(hee),pee=f({},_d,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),xee=Zs(pee),yee=f({},_d,{data:0}),lO=Zs(yee),bee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nee(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=wee[m])?!!g[m]:!1}function y1(){return Nee}var jee=f({},ph,{key:function(m){if(m.key){var g=bee[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=p0(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?vee[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y1,charCode:function(m){return m.type==="keypress"?p0(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?p0(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Cee=Zs(jee),See=f({},b0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cO=Zs(See),_ee=f({},ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y1}),Aee=Zs(_ee),Tee=f({},_d,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eee=Zs(Tee),kee=f({},b0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Lee=Zs(kee),Pee=f({},_d,{newState:0,oldState:0}),Dee=Zs(Pee),Oee=[9,13,27,32],b1=Yo&&"CompositionEvent"in window,yh=null;Yo&&"documentMode"in document&&(yh=document.documentMode);var Mee=Yo&&"TextEvent"in window&&!yh,dO=Yo&&(!b1||yh&&8<yh&&11>=yh),uO=" ",mO=!1;function fO(m,g){switch(m){case"keyup":return Oee.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hO(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var im=!1;function Iee(m,g){switch(m){case"compositionend":return hO(g);case"keypress":return g.which!==32?null:(mO=!0,uO);case"textInput":return m=g.data,m===uO&&mO?null:m;default:return null}}function $ee(m,g){if(im)return m==="compositionend"||!b1&&fO(m,g)?(m=rO(),g0=h1=dc=null,im=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return dO&&g.locale!=="ko"?null:g.data;default:return null}}var Ree={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gO(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!Ree[m.type]:g==="textarea"}function pO(m,g,y,j){sm?rm?rm.push(j):rm=[j]:sm=j,g=ly(g,"onChange"),0<g.length&&(y=new y0("onChange","change",null,y,j),m.push({event:y,listeners:g}))}var bh=null,vh=null;function zee(m){Z5(m,0)}function v0(m){var g=$e(m);if(XD(g))return m}function xO(m,g){if(m==="change")return g}var yO=!1;if(Yo){var v1;if(Yo){var w1="oninput"in document;if(!w1){var bO=document.createElement("div");bO.setAttribute("oninput","return;"),w1=typeof bO.oninput=="function"}v1=w1}else v1=!1;yO=v1&&(!document.documentMode||9<document.documentMode)}function vO(){bh&&(bh.detachEvent("onpropertychange",wO),vh=bh=null)}function wO(m){if(m.propertyName==="value"&&v0(vh)){var g=[];pO(g,vh,m,u1(m)),sO(zee,g)}}function Uee(m,g,y){m==="focusin"?(vO(),bh=g,vh=y,bh.attachEvent("onpropertychange",wO)):m==="focusout"&&vO()}function Fee(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return v0(vh)}function Bee(m,g){if(m==="click")return v0(g)}function Hee(m,g){if(m==="input"||m==="change")return v0(g)}function Gee(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var jr=typeof Object.is=="function"?Object.is:Gee;function wh(m,g){if(jr(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var y=Object.keys(m),j=Object.keys(g);if(y.length!==j.length)return!1;for(j=0;j<y.length;j++){var L=y[j];if(!tt.call(g,L)||!jr(m[L],g[L]))return!1}return!0}function NO(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function jO(m,g){var y=NO(m);m=0;for(var j;y;){if(y.nodeType===3){if(j=m+y.textContent.length,m<=g&&j>=g)return{node:y,offset:g-m};m=j}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=NO(y)}}function CO(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?CO(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function SO(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=f0(m.document);g instanceof m.HTMLIFrameElement;){try{var y=typeof g.contentWindow.location.href=="string"}catch{y=!1}if(y)m=g.contentWindow;else break;g=f0(m.document)}return g}function N1(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var Wee=Yo&&"documentMode"in document&&11>=document.documentMode,om=null,j1=null,Nh=null,C1=!1;function _O(m,g,y){var j=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;C1||om==null||om!==f0(j)||(j=om,"selectionStart"in j&&N1(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Nh&&wh(Nh,j)||(Nh=j,j=ly(j1,"onSelect"),0<j.length&&(g=new y0("onSelect","select",null,g,y),m.push({event:g,listeners:j}),g.target=om)))}function Ad(m,g){var y={};return y[m.toLowerCase()]=g.toLowerCase(),y["Webkit"+m]="webkit"+g,y["Moz"+m]="moz"+g,y}var lm={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionrun:Ad("Transition","TransitionRun"),transitionstart:Ad("Transition","TransitionStart"),transitioncancel:Ad("Transition","TransitionCancel"),transitionend:Ad("Transition","TransitionEnd")},S1={},AO={};Yo&&(AO=document.createElement("div").style,"AnimationEvent"in window||(delete lm.animationend.animation,delete lm.animationiteration.animation,delete lm.animationstart.animation),"TransitionEvent"in window||delete lm.transitionend.transition);function Td(m){if(S1[m])return S1[m];if(!lm[m])return m;var g=lm[m],y;for(y in g)if(g.hasOwnProperty(y)&&y in AO)return S1[m]=g[y];return m}var TO=Td("animationend"),EO=Td("animationiteration"),kO=Td("animationstart"),qee=Td("transitionrun"),Vee=Td("transitionstart"),Qee=Td("transitioncancel"),LO=Td("transitionend"),PO=new Map,_1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_1.push("scrollEnd");function ki(m,g){PO.set(m,g),Kt(g,[m])}var w0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Qr=[],cm=0,A1=0;function N0(){for(var m=cm,g=A1=cm=0;g<m;){var y=Qr[g];Qr[g++]=null;var j=Qr[g];Qr[g++]=null;var L=Qr[g];Qr[g++]=null;var O=Qr[g];if(Qr[g++]=null,j!==null&&L!==null){var Y=j.pending;Y===null?L.next=L:(L.next=Y.next,Y.next=L),j.pending=L}O!==0&&DO(y,L,O)}}function j0(m,g,y,j){Qr[cm++]=m,Qr[cm++]=g,Qr[cm++]=y,Qr[cm++]=j,A1|=j,m.lanes|=j,m=m.alternate,m!==null&&(m.lanes|=j)}function T1(m,g,y,j){return j0(m,g,y,j),C0(m)}function Ed(m,g){return j0(m,null,null,g),C0(m)}function DO(m,g,y){m.lanes|=y;var j=m.alternate;j!==null&&(j.lanes|=y);for(var L=!1,O=m.return;O!==null;)O.childLanes|=y,j=O.alternate,j!==null&&(j.childLanes|=y),O.tag===22&&(m=O.stateNode,m===null||m._visibility&1||(L=!0)),m=O,O=O.return;return m.tag===3?(O=m.stateNode,L&&g!==null&&(L=31-ct(y),m=O.hiddenUpdates,j=m[L],j===null?m[L]=[g]:j.push(g),g.lane=y|536870912),O):null}function C0(m){if(50<Gh)throw Gh=0,$C=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var dm={};function Yee(m,g,y,j){this.tag=m,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(m,g,y,j){return new Yee(m,g,y,j)}function E1(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Ko(m,g){var y=m.alternate;return y===null?(y=Cr(m.tag,g,m.key,m.mode),y.elementType=m.elementType,y.type=m.type,y.stateNode=m.stateNode,y.alternate=m,m.alternate=y):(y.pendingProps=g,y.type=m.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=m.flags&65011712,y.childLanes=m.childLanes,y.lanes=m.lanes,y.child=m.child,y.memoizedProps=m.memoizedProps,y.memoizedState=m.memoizedState,y.updateQueue=m.updateQueue,g=m.dependencies,y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},y.sibling=m.sibling,y.index=m.index,y.ref=m.ref,y.refCleanup=m.refCleanup,y}function OO(m,g){m.flags&=65011714;var y=m.alternate;return y===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,g=y.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function S0(m,g,y,j,L,O){var Y=0;if(j=m,typeof m=="function")E1(m)&&(Y=1);else if(typeof m=="string")Y=ene(m,y,pe.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case $:return m=Cr(31,y,g,L),m.elementType=$,m.lanes=O,m;case N:return kd(y.children,L,O,g);case b:Y=8,L|=24;break;case C:return m=Cr(12,y,g,L|2),m.elementType=C,m.lanes=O,m;case k:return m=Cr(13,y,g,L),m.elementType=k,m.lanes=O,m;case _:return m=Cr(19,y,g,L),m.elementType=_,m.lanes=O,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:Y=10;break e;case w:Y=9;break e;case E:Y=11;break e;case A:Y=14;break e;case T:Y=16,j=null;break e}Y=29,y=Error(s(130,m===null?"null":typeof m,"")),j=null}return g=Cr(Y,y,g,L),g.elementType=m,g.type=j,g.lanes=O,g}function kd(m,g,y,j){return m=Cr(7,m,j,g),m.lanes=y,m}function k1(m,g,y){return m=Cr(6,m,null,g),m.lanes=y,m}function MO(m){var g=Cr(18,null,null,0);return g.stateNode=m,g}function L1(m,g,y){return g=Cr(4,m.children!==null?m.children:[],m.key,g),g.lanes=y,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var IO=new WeakMap;function Yr(m,g){if(typeof m=="object"&&m!==null){var y=IO.get(m);return y!==void 0?y:(g={value:m,source:g,stack:De(g)},IO.set(m,g),g)}return{value:m,source:g,stack:De(g)}}var um=[],mm=0,_0=null,jh=0,Kr=[],Xr=0,uc=null,eo=1,to="";function Xo(m,g){um[mm++]=jh,um[mm++]=_0,_0=m,jh=g}function $O(m,g,y){Kr[Xr++]=eo,Kr[Xr++]=to,Kr[Xr++]=uc,uc=m;var j=eo;m=to;var L=32-ct(j)-1;j&=~(1<<L),y+=1;var O=32-ct(g)+L;if(30<O){var Y=L-L%5;O=(j&(1<<Y)-1).toString(32),j>>=Y,L-=Y,eo=1<<32-ct(g)+L|y<<L|j,to=O+m}else eo=1<<O|y<<L|j,to=m}function P1(m){m.return!==null&&(Xo(m,1),$O(m,1,0))}function D1(m){for(;m===_0;)_0=um[--mm],um[mm]=null,jh=um[--mm],um[mm]=null;for(;m===uc;)uc=Kr[--Xr],Kr[Xr]=null,to=Kr[--Xr],Kr[Xr]=null,eo=Kr[--Xr],Kr[Xr]=null}function RO(m,g){Kr[Xr++]=eo,Kr[Xr++]=to,Kr[Xr++]=uc,eo=g.id,to=g.overflow,uc=m}var vs=null,Zn=null,bn=!1,mc=null,Zr=!1,O1=Error(s(519));function fc(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ch(Yr(g,m)),O1}function zO(m){var g=m.stateNode,y=m.type,j=m.memoizedProps;switch(g[re]=m,g[ot]=j,y){case"dialog":fn("cancel",g),fn("close",g);break;case"iframe":case"object":case"embed":fn("load",g);break;case"video":case"audio":for(y=0;y<qh.length;y++)fn(qh[y],g);break;case"source":fn("error",g);break;case"img":case"image":case"link":fn("error",g),fn("load",g);break;case"details":fn("toggle",g);break;case"input":fn("invalid",g),ZD(g,j.value,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name,!0);break;case"select":fn("invalid",g);break;case"textarea":fn("invalid",g),eO(g,j.value,j.defaultValue,j.children)}y=j.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||g.textContent===""+y||j.suppressHydrationWarning===!0||nM(g.textContent,y)?(j.popover!=null&&(fn("beforetoggle",g),fn("toggle",g)),j.onScroll!=null&&fn("scroll",g),j.onScrollEnd!=null&&fn("scrollend",g),j.onClick!=null&&(g.onclick=Qo),g=!0):g=!1,g||fc(m,!0)}function UO(m){for(vs=m.return;vs;)switch(vs.tag){case 5:case 31:case 13:Zr=!1;return;case 27:case 3:Zr=!0;return;default:vs=vs.return}}function fm(m){if(m!==vs)return!1;if(!bn)return UO(m),bn=!0,!1;var g=m.tag,y;if((y=g!==3&&g!==27)&&((y=g===5)&&(y=m.type,y=!(y!=="form"&&y!=="button")||ZC(m.type,m.memoizedProps)),y=!y),y&&Zn&&fc(m),UO(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Zn=uM(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Zn=uM(m)}else g===27?(g=Zn,Ac(m.type)?(m=aS,aS=null,Zn=m):Zn=g):Zn=vs?ei(m.stateNode.nextSibling):null;return!0}function Ld(){Zn=vs=null,bn=!1}function M1(){var m=mc;return m!==null&&(nr===null?nr=m:nr.push.apply(nr,m),mc=null),m}function Ch(m){mc===null?mc=[m]:mc.push(m)}var I1=K(null),Pd=null,Zo=null;function hc(m,g,y){ye(I1,g._currentValue),g._currentValue=y}function Jo(m){m._currentValue=I1.current,R(I1)}function $1(m,g,y){for(;m!==null;){var j=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,j!==null&&(j.childLanes|=g)):j!==null&&(j.childLanes&g)!==g&&(j.childLanes|=g),m===y)break;m=m.return}}function R1(m,g,y,j){var L=m.child;for(L!==null&&(L.return=m);L!==null;){var O=L.dependencies;if(O!==null){var Y=L.child;O=O.firstContext;e:for(;O!==null;){var we=O;O=L;for(var ze=0;ze<g.length;ze++)if(we.context===g[ze]){O.lanes|=y,we=O.alternate,we!==null&&(we.lanes|=y),$1(O.return,y,m),j||(Y=null);break e}O=we.next}}else if(L.tag===18){if(Y=L.return,Y===null)throw Error(s(341));Y.lanes|=y,O=Y.alternate,O!==null&&(O.lanes|=y),$1(Y,y,m),Y=null}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===m){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}}function hm(m,g,y,j){m=null;for(var L=g,O=!1;L!==null;){if(!O){if((L.flags&524288)!==0)O=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var Y=L.alternate;if(Y===null)throw Error(s(387));if(Y=Y.memoizedProps,Y!==null){var we=L.type;jr(L.pendingProps.value,Y.value)||(m!==null?m.push(we):m=[we])}}else if(L===Oe.current){if(Y=L.alternate,Y===null)throw Error(s(387));Y.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(m!==null?m.push(Xh):m=[Xh])}L=L.return}m!==null&&R1(g,m,y,j),g.flags|=262144}function A0(m){for(m=m.firstContext;m!==null;){if(!jr(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Dd(m){Pd=m,Zo=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function ws(m){return FO(Pd,m)}function T0(m,g){return Pd===null&&Dd(m),FO(m,g)}function FO(m,g){var y=g._currentValue;if(g={context:g,memoizedValue:y,next:null},Zo===null){if(m===null)throw Error(s(308));Zo=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else Zo=Zo.next=g;return y}var Kee=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(y,j){m.push(j)}};this.abort=function(){g.aborted=!0,m.forEach(function(y){return y()})}},Xee=e.unstable_scheduleCallback,Zee=e.unstable_NormalPriority,$a={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function z1(){return{controller:new Kee,data:new Map,refCount:0}}function Sh(m){m.refCount--,m.refCount===0&&Xee(Zee,function(){m.controller.abort()})}var _h=null,U1=0,gm=0,pm=null;function Jee(m,g){if(_h===null){var y=_h=[];U1=0,gm=HC(),pm={status:"pending",value:void 0,then:function(j){y.push(j)}}}return U1++,g.then(BO,BO),g}function BO(){if(--U1===0&&_h!==null){pm!==null&&(pm.status="fulfilled");var m=_h;_h=null,gm=0,pm=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function ete(m,g){var y=[],j={status:"pending",value:null,reason:null,then:function(L){y.push(L)}};return m.then(function(){j.status="fulfilled",j.value=g;for(var L=0;L<y.length;L++)(0,y[L])(g)},function(L){for(j.status="rejected",j.reason=L,L=0;L<y.length;L++)(0,y[L])(void 0)}),j}var HO=V.S;V.S=function(m,g){_5=Z(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Jee(m,g),HO!==null&&HO(m,g)};var Od=K(null);function F1(){var m=Od.current;return m!==null?m:Gn.pooledCache}function E0(m,g){g===null?ye(Od,Od.current):ye(Od,g.pool)}function GO(){var m=F1();return m===null?null:{parent:$a._currentValue,pool:m}}var xm=Error(s(460)),B1=Error(s(474)),k0=Error(s(542)),L0={then:function(){}};function WO(m){return m=m.status,m==="fulfilled"||m==="rejected"}function qO(m,g,y){switch(y=m[y],y===void 0?m.push(g):y!==g&&(g.then(Qo,Qo),g=y),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,QO(m),m;default:if(typeof g.status=="string")g.then(Qo,Qo);else{if(m=Gn,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(j){if(g.status==="pending"){var L=g;L.status="fulfilled",L.value=j}},function(j){if(g.status==="pending"){var L=g;L.status="rejected",L.reason=j}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,QO(m),m}throw Id=g,xm}}function Md(m){try{var g=m._init;return g(m._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Id=y,xm):y}}var Id=null;function VO(){if(Id===null)throw Error(s(459));var m=Id;return Id=null,m}function QO(m){if(m===xm||m===k0)throw Error(s(483))}var ym=null,Ah=0;function P0(m){var g=Ah;return Ah+=1,ym===null&&(ym=[]),qO(ym,m,g)}function Th(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function D0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function YO(m){function g(Ke,He){if(m){var at=Ke.deletions;at===null?(Ke.deletions=[He],Ke.flags|=16):at.push(He)}}function y(Ke,He){if(!m)return null;for(;He!==null;)g(Ke,He),He=He.sibling;return null}function j(Ke){for(var He=new Map;Ke!==null;)Ke.key!==null?He.set(Ke.key,Ke):He.set(Ke.index,Ke),Ke=Ke.sibling;return He}function L(Ke,He){return Ke=Ko(Ke,He),Ke.index=0,Ke.sibling=null,Ke}function O(Ke,He,at){return Ke.index=at,m?(at=Ke.alternate,at!==null?(at=at.index,at<He?(Ke.flags|=67108866,He):at):(Ke.flags|=67108866,He)):(Ke.flags|=1048576,He)}function Y(Ke){return m&&Ke.alternate===null&&(Ke.flags|=67108866),Ke}function we(Ke,He,at,ft){return He===null||He.tag!==6?(He=k1(at,Ke.mode,ft),He.return=Ke,He):(He=L(He,at),He.return=Ke,He)}function ze(Ke,He,at,ft){var Gt=at.type;return Gt===N?ut(Ke,He,at.props.children,ft,at.key):He!==null&&(He.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===T&&Md(Gt)===He.type)?(He=L(He,at.props),Th(He,at),He.return=Ke,He):(He=S0(at.type,at.key,at.props,null,Ke.mode,ft),Th(He,at),He.return=Ke,He)}function st(Ke,He,at,ft){return He===null||He.tag!==4||He.stateNode.containerInfo!==at.containerInfo||He.stateNode.implementation!==at.implementation?(He=L1(at,Ke.mode,ft),He.return=Ke,He):(He=L(He,at.children||[]),He.return=Ke,He)}function ut(Ke,He,at,ft,Gt){return He===null||He.tag!==7?(He=kd(at,Ke.mode,ft,Gt),He.return=Ke,He):(He=L(He,at),He.return=Ke,He)}function xt(Ke,He,at){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=k1(""+He,Ke.mode,at),He.return=Ke,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case x:return at=S0(He.type,He.key,He.props,null,Ke.mode,at),Th(at,He),at.return=Ke,at;case v:return He=L1(He,Ke.mode,at),He.return=Ke,He;case T:return He=Md(He),xt(Ke,He,at)}if(Q(He)||P(He))return He=kd(He,Ke.mode,at,null),He.return=Ke,He;if(typeof He.then=="function")return xt(Ke,P0(He),at);if(He.$$typeof===S)return xt(Ke,T0(Ke,He),at);D0(Ke,He)}return null}function it(Ke,He,at,ft){var Gt=He!==null?He.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Gt!==null?null:we(Ke,He,""+at,ft);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case x:return at.key===Gt?ze(Ke,He,at,ft):null;case v:return at.key===Gt?st(Ke,He,at,ft):null;case T:return at=Md(at),it(Ke,He,at,ft)}if(Q(at)||P(at))return Gt!==null?null:ut(Ke,He,at,ft,null);if(typeof at.then=="function")return it(Ke,He,P0(at),ft);if(at.$$typeof===S)return it(Ke,He,T0(Ke,at),ft);D0(Ke,at)}return null}function dt(Ke,He,at,ft,Gt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Ke=Ke.get(at)||null,we(He,Ke,""+ft,Gt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case x:return Ke=Ke.get(ft.key===null?at:ft.key)||null,ze(He,Ke,ft,Gt);case v:return Ke=Ke.get(ft.key===null?at:ft.key)||null,st(He,Ke,ft,Gt);case T:return ft=Md(ft),dt(Ke,He,at,ft,Gt)}if(Q(ft)||P(ft))return Ke=Ke.get(at)||null,ut(He,Ke,ft,Gt,null);if(typeof ft.then=="function")return dt(Ke,He,at,P0(ft),Gt);if(ft.$$typeof===S)return dt(Ke,He,at,T0(He,ft),Gt);D0(He,ft)}return null}function Ot(Ke,He,at,ft){for(var Gt=null,Cn=null,Ut=He,ln=He=0,pn=null;Ut!==null&&ln<at.length;ln++){Ut.index>ln?(pn=Ut,Ut=null):pn=Ut.sibling;var Sn=it(Ke,Ut,at[ln],ft);if(Sn===null){Ut===null&&(Ut=pn);break}m&&Ut&&Sn.alternate===null&&g(Ke,Ut),He=O(Sn,He,ln),Cn===null?Gt=Sn:Cn.sibling=Sn,Cn=Sn,Ut=pn}if(ln===at.length)return y(Ke,Ut),bn&&Xo(Ke,ln),Gt;if(Ut===null){for(;ln<at.length;ln++)Ut=xt(Ke,at[ln],ft),Ut!==null&&(He=O(Ut,He,ln),Cn===null?Gt=Ut:Cn.sibling=Ut,Cn=Ut);return bn&&Xo(Ke,ln),Gt}for(Ut=j(Ut);ln<at.length;ln++)pn=dt(Ut,Ke,ln,at[ln],ft),pn!==null&&(m&&pn.alternate!==null&&Ut.delete(pn.key===null?ln:pn.key),He=O(pn,He,ln),Cn===null?Gt=pn:Cn.sibling=pn,Cn=pn);return m&&Ut.forEach(function(Pc){return g(Ke,Pc)}),bn&&Xo(Ke,ln),Gt}function Vt(Ke,He,at,ft){if(at==null)throw Error(s(151));for(var Gt=null,Cn=null,Ut=He,ln=He=0,pn=null,Sn=at.next();Ut!==null&&!Sn.done;ln++,Sn=at.next()){Ut.index>ln?(pn=Ut,Ut=null):pn=Ut.sibling;var Pc=it(Ke,Ut,Sn.value,ft);if(Pc===null){Ut===null&&(Ut=pn);break}m&&Ut&&Pc.alternate===null&&g(Ke,Ut),He=O(Pc,He,ln),Cn===null?Gt=Pc:Cn.sibling=Pc,Cn=Pc,Ut=pn}if(Sn.done)return y(Ke,Ut),bn&&Xo(Ke,ln),Gt;if(Ut===null){for(;!Sn.done;ln++,Sn=at.next())Sn=xt(Ke,Sn.value,ft),Sn!==null&&(He=O(Sn,He,ln),Cn===null?Gt=Sn:Cn.sibling=Sn,Cn=Sn);return bn&&Xo(Ke,ln),Gt}for(Ut=j(Ut);!Sn.done;ln++,Sn=at.next())Sn=dt(Ut,Ke,ln,Sn.value,ft),Sn!==null&&(m&&Sn.alternate!==null&&Ut.delete(Sn.key===null?ln:Sn.key),He=O(Sn,He,ln),Cn===null?Gt=Sn:Cn.sibling=Sn,Cn=Sn);return m&&Ut.forEach(function(une){return g(Ke,une)}),bn&&Xo(Ke,ln),Gt}function Fn(Ke,He,at,ft){if(typeof at=="object"&&at!==null&&at.type===N&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case x:e:{for(var Gt=at.key;He!==null;){if(He.key===Gt){if(Gt=at.type,Gt===N){if(He.tag===7){y(Ke,He.sibling),ft=L(He,at.props.children),ft.return=Ke,Ke=ft;break e}}else if(He.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===T&&Md(Gt)===He.type){y(Ke,He.sibling),ft=L(He,at.props),Th(ft,at),ft.return=Ke,Ke=ft;break e}y(Ke,He);break}else g(Ke,He);He=He.sibling}at.type===N?(ft=kd(at.props.children,Ke.mode,ft,at.key),ft.return=Ke,Ke=ft):(ft=S0(at.type,at.key,at.props,null,Ke.mode,ft),Th(ft,at),ft.return=Ke,Ke=ft)}return Y(Ke);case v:e:{for(Gt=at.key;He!==null;){if(He.key===Gt)if(He.tag===4&&He.stateNode.containerInfo===at.containerInfo&&He.stateNode.implementation===at.implementation){y(Ke,He.sibling),ft=L(He,at.children||[]),ft.return=Ke,Ke=ft;break e}else{y(Ke,He);break}else g(Ke,He);He=He.sibling}ft=L1(at,Ke.mode,ft),ft.return=Ke,Ke=ft}return Y(Ke);case T:return at=Md(at),Fn(Ke,He,at,ft)}if(Q(at))return Ot(Ke,He,at,ft);if(P(at)){if(Gt=P(at),typeof Gt!="function")throw Error(s(150));return at=Gt.call(at),Vt(Ke,He,at,ft)}if(typeof at.then=="function")return Fn(Ke,He,P0(at),ft);if(at.$$typeof===S)return Fn(Ke,He,T0(Ke,at),ft);D0(Ke,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,He!==null&&He.tag===6?(y(Ke,He.sibling),ft=L(He,at),ft.return=Ke,Ke=ft):(y(Ke,He),ft=k1(at,Ke.mode,ft),ft.return=Ke,Ke=ft),Y(Ke)):y(Ke,He)}return function(Ke,He,at,ft){try{Ah=0;var Gt=Fn(Ke,He,at,ft);return ym=null,Gt}catch(Ut){if(Ut===xm||Ut===k0)throw Ut;var Cn=Cr(29,Ut,null,Ke.mode);return Cn.lanes=ft,Cn.return=Ke,Cn}}}var $d=YO(!0),KO=YO(!1),gc=!1;function H1(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function G1(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function pc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function xc(m,g,y){var j=m.updateQueue;if(j===null)return null;if(j=j.shared,(An&2)!==0){var L=j.pending;return L===null?g.next=g:(g.next=L.next,L.next=g),j.pending=g,g=C0(m),DO(m,null,y),g}return j0(m,j,g,y),C0(m)}function Eh(m,g,y){if(g=g.updateQueue,g!==null&&(g=g.shared,(y&4194048)!==0)){var j=g.lanes;j&=m.pendingLanes,y|=j,g.lanes=y,Xe(m,y)}}function W1(m,g){var y=m.updateQueue,j=m.alternate;if(j!==null&&(j=j.updateQueue,y===j)){var L=null,O=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};O===null?L=O=Y:O=O.next=Y,y=y.next}while(y!==null);O===null?L=O=g:O=O.next=g}else L=O=g;y={baseState:j.baseState,firstBaseUpdate:L,lastBaseUpdate:O,shared:j.shared,callbacks:j.callbacks},m.updateQueue=y;return}m=y.lastBaseUpdate,m===null?y.firstBaseUpdate=g:m.next=g,y.lastBaseUpdate=g}var q1=!1;function kh(){if(q1){var m=pm;if(m!==null)throw m}}function Lh(m,g,y,j){q1=!1;var L=m.updateQueue;gc=!1;var O=L.firstBaseUpdate,Y=L.lastBaseUpdate,we=L.shared.pending;if(we!==null){L.shared.pending=null;var ze=we,st=ze.next;ze.next=null,Y===null?O=st:Y.next=st,Y=ze;var ut=m.alternate;ut!==null&&(ut=ut.updateQueue,we=ut.lastBaseUpdate,we!==Y&&(we===null?ut.firstBaseUpdate=st:we.next=st,ut.lastBaseUpdate=ze))}if(O!==null){var xt=L.baseState;Y=0,ut=st=ze=null,we=O;do{var it=we.lane&-536870913,dt=it!==we.lane;if(dt?(gn&it)===it:(j&it)===it){it!==0&&it===gm&&(q1=!0),ut!==null&&(ut=ut.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Ot=m,Vt=we;it=g;var Fn=y;switch(Vt.tag){case 1:if(Ot=Vt.payload,typeof Ot=="function"){xt=Ot.call(Fn,xt,it);break e}xt=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Vt.payload,it=typeof Ot=="function"?Ot.call(Fn,xt,it):Ot,it==null)break e;xt=f({},xt,it);break e;case 2:gc=!0}}it=we.callback,it!==null&&(m.flags|=64,dt&&(m.flags|=8192),dt=L.callbacks,dt===null?L.callbacks=[it]:dt.push(it))}else dt={lane:it,tag:we.tag,payload:we.payload,callback:we.callback,next:null},ut===null?(st=ut=dt,ze=xt):ut=ut.next=dt,Y|=it;if(we=we.next,we===null){if(we=L.shared.pending,we===null)break;dt=we,we=dt.next,dt.next=null,L.lastBaseUpdate=dt,L.shared.pending=null}}while(!0);ut===null&&(ze=xt),L.baseState=ze,L.firstBaseUpdate=st,L.lastBaseUpdate=ut,O===null&&(L.shared.lanes=0),Nc|=Y,m.lanes=Y,m.memoizedState=xt}}function XO(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function ZO(m,g){var y=m.callbacks;if(y!==null)for(m.callbacks=null,m=0;m<y.length;m++)XO(y[m],g)}var bm=K(null),O0=K(0);function JO(m,g){m=ll,ye(O0,m),ye(bm,g),ll=m|g.baseLanes}function V1(){ye(O0,ll),ye(bm,bm.current)}function Q1(){ll=O0.current,R(bm),R(O0)}var Sr=K(null),Jr=null;function yc(m){var g=m.alternate;ye(ka,ka.current&1),ye(Sr,m),Jr===null&&(g===null||bm.current!==null||g.memoizedState!==null)&&(Jr=m)}function Y1(m){ye(ka,ka.current),ye(Sr,m),Jr===null&&(Jr=m)}function e3(m){m.tag===22?(ye(ka,ka.current),ye(Sr,m),Jr===null&&(Jr=m)):bc()}function bc(){ye(ka,ka.current),ye(Sr,Sr.current)}function _r(m){R(Sr),Jr===m&&(Jr=null),R(ka)}var ka=K(0);function M0(m){for(var g=m;g!==null;){if(g.tag===13){var y=g.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||tS(y)||nS(y)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var el=0,nn=null,zn=null,Ra=null,I0=!1,vm=!1,Rd=!1,$0=0,Ph=0,wm=null,tte=0;function ba(){throw Error(s(321))}function K1(m,g){if(g===null)return!1;for(var y=0;y<g.length&&y<m.length;y++)if(!jr(m[y],g[y]))return!1;return!0}function X1(m,g,y,j,L,O){return el=O,nn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,V.H=m===null||m.memoizedState===null?$3:mC,Rd=!1,O=y(j,L),Rd=!1,vm&&(O=n3(g,y,j,L)),t3(m),O}function t3(m){V.H=Mh;var g=zn!==null&&zn.next!==null;if(el=0,Ra=zn=nn=null,I0=!1,Ph=0,wm=null,g)throw Error(s(300));m===null||za||(m=m.dependencies,m!==null&&A0(m)&&(za=!0))}function n3(m,g,y,j){nn=m;var L=0;do{if(vm&&(wm=null),Ph=0,vm=!1,25<=L)throw Error(s(301));if(L+=1,Ra=zn=null,m.updateQueue!=null){var O=m.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}V.H=R3,O=g(y,j)}while(vm);return O}function nte(){var m=V.H,g=m.useState()[0];return g=typeof g.then=="function"?Dh(g):g,m=m.useState()[0],(zn!==null?zn.memoizedState:null)!==m&&(nn.flags|=1024),g}function Z1(){var m=$0!==0;return $0=0,m}function J1(m,g,y){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~y}function eC(m){if(I0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}I0=!1}el=0,Ra=zn=nn=null,vm=!1,Ph=$0=0,wm=null}function Bs(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ra===null?nn.memoizedState=Ra=m:Ra=Ra.next=m,Ra}function La(){if(zn===null){var m=nn.alternate;m=m!==null?m.memoizedState:null}else m=zn.next;var g=Ra===null?nn.memoizedState:Ra.next;if(g!==null)Ra=g,zn=m;else{if(m===null)throw nn.alternate===null?Error(s(467)):Error(s(310));zn=m,m={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Ra===null?nn.memoizedState=Ra=m:Ra=Ra.next=m}return Ra}function R0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dh(m){var g=Ph;return Ph+=1,wm===null&&(wm=[]),m=qO(wm,m,g),g=nn,(Ra===null?g.memoizedState:Ra.next)===null&&(g=g.alternate,V.H=g===null||g.memoizedState===null?$3:mC),m}function z0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Dh(m);if(m.$$typeof===S)return ws(m)}throw Error(s(438,String(m)))}function tC(m){var g=null,y=nn.updateQueue;if(y!==null&&(g=y.memoCache),g==null){var j=nn.alternate;j!==null&&(j=j.updateQueue,j!==null&&(j=j.memoCache,j!=null&&(g={data:j.data.map(function(L){return L.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),y===null&&(y=R0(),nn.updateQueue=y),y.memoCache=g,y=g.data[g.index],y===void 0)for(y=g.data[g.index]=Array(m),j=0;j<m;j++)y[j]=z;return g.index++,y}function tl(m,g){return typeof g=="function"?g(m):g}function U0(m){var g=La();return nC(g,zn,m)}function nC(m,g,y){var j=m.queue;if(j===null)throw Error(s(311));j.lastRenderedReducer=y;var L=m.baseQueue,O=j.pending;if(O!==null){if(L!==null){var Y=L.next;L.next=O.next,O.next=Y}g.baseQueue=L=O,j.pending=null}if(O=m.baseState,L===null)m.memoizedState=O;else{g=L.next;var we=Y=null,ze=null,st=g,ut=!1;do{var xt=st.lane&-536870913;if(xt!==st.lane?(gn&xt)===xt:(el&xt)===xt){var it=st.revertLane;if(it===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),xt===gm&&(ut=!0);else if((el&it)===it){st=st.next,it===gm&&(ut=!0);continue}else xt={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},ze===null?(we=ze=xt,Y=O):ze=ze.next=xt,nn.lanes|=it,Nc|=it;xt=st.action,Rd&&y(O,xt),O=st.hasEagerState?st.eagerState:y(O,xt)}else it={lane:xt,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},ze===null?(we=ze=it,Y=O):ze=ze.next=it,nn.lanes|=xt,Nc|=xt;st=st.next}while(st!==null&&st!==g);if(ze===null?Y=O:ze.next=we,!jr(O,m.memoizedState)&&(za=!0,ut&&(y=pm,y!==null)))throw y;m.memoizedState=O,m.baseState=Y,m.baseQueue=ze,j.lastRenderedState=O}return L===null&&(j.lanes=0),[m.memoizedState,j.dispatch]}function aC(m){var g=La(),y=g.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=m;var j=y.dispatch,L=y.pending,O=g.memoizedState;if(L!==null){y.pending=null;var Y=L=L.next;do O=m(O,Y.action),Y=Y.next;while(Y!==L);jr(O,g.memoizedState)||(za=!0),g.memoizedState=O,g.baseQueue===null&&(g.baseState=O),y.lastRenderedState=O}return[O,j]}function a3(m,g,y){var j=nn,L=La(),O=bn;if(O){if(y===void 0)throw Error(s(407));y=y()}else y=g();var Y=!jr((zn||L).memoizedState,y);if(Y&&(L.memoizedState=y,za=!0),L=L.queue,iC(i3.bind(null,j,L,m),[m]),L.getSnapshot!==g||Y||Ra!==null&&Ra.memoizedState.tag&1){if(j.flags|=2048,Nm(9,{destroy:void 0},r3.bind(null,j,L,y,g),null),Gn===null)throw Error(s(349));O||(el&127)!==0||s3(j,g,y)}return y}function s3(m,g,y){m.flags|=16384,m={getSnapshot:g,value:y},g=nn.updateQueue,g===null?(g=R0(),nn.updateQueue=g,g.stores=[m]):(y=g.stores,y===null?g.stores=[m]:y.push(m))}function r3(m,g,y,j){g.value=y,g.getSnapshot=j,o3(g)&&l3(m)}function i3(m,g,y){return y(function(){o3(g)&&l3(m)})}function o3(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!jr(m,y)}catch{return!0}}function l3(m){var g=Ed(m,2);g!==null&&ar(g,m,2)}function sC(m){var g=Bs();if(typeof m=="function"){var y=m;if(m=y(),Rd){Qe(!0);try{y()}finally{Qe(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:m},g}function c3(m,g,y,j){return m.baseState=y,nC(m,zn,typeof j=="function"?j:tl)}function ate(m,g,y,j,L){if(H0(m))throw Error(s(485));if(m=g.action,m!==null){var O={payload:L,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){O.listeners.push(Y)}};V.T!==null?y(!0):O.isTransition=!1,j(O),y=g.pending,y===null?(O.next=g.pending=O,d3(g,O)):(O.next=y.next,g.pending=y.next=O)}}function d3(m,g){var y=g.action,j=g.payload,L=m.state;if(g.isTransition){var O=V.T,Y={};V.T=Y;try{var we=y(L,j),ze=V.S;ze!==null&&ze(Y,we),u3(m,g,we)}catch(st){rC(m,g,st)}finally{O!==null&&Y.types!==null&&(O.types=Y.types),V.T=O}}else try{O=y(L,j),u3(m,g,O)}catch(st){rC(m,g,st)}}function u3(m,g,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(j){m3(m,g,j)},function(j){return rC(m,g,j)}):m3(m,g,y)}function m3(m,g,y){g.status="fulfilled",g.value=y,f3(g),m.state=y,g=m.pending,g!==null&&(y=g.next,y===g?m.pending=null:(y=y.next,g.next=y,d3(m,y)))}function rC(m,g,y){var j=m.pending;if(m.pending=null,j!==null){j=j.next;do g.status="rejected",g.reason=y,f3(g),g=g.next;while(g!==j)}m.action=null}function f3(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function h3(m,g){return g}function g3(m,g){if(bn){var y=Gn.formState;if(y!==null){e:{var j=nn;if(bn){if(Zn){t:{for(var L=Zn,O=Zr;L.nodeType!==8;){if(!O){L=null;break t}if(L=ei(L.nextSibling),L===null){L=null;break t}}O=L.data,L=O==="F!"||O==="F"?L:null}if(L){Zn=ei(L.nextSibling),j=L.data==="F!";break e}}fc(j)}j=!1}j&&(g=y[0])}}return y=Bs(),y.memoizedState=y.baseState=g,j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h3,lastRenderedState:g},y.queue=j,y=O3.bind(null,nn,j),j.dispatch=y,j=sC(!1),O=uC.bind(null,nn,!1,j.queue),j=Bs(),L={state:g,dispatch:null,action:m,pending:null},j.queue=L,y=ate.bind(null,nn,L,O,y),L.dispatch=y,j.memoizedState=m,[g,y,!1]}function p3(m){var g=La();return x3(g,zn,m)}function x3(m,g,y){if(g=nC(m,g,h3)[0],m=U0(tl)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var j=Dh(g)}catch(Y){throw Y===xm?k0:Y}else j=g;g=La();var L=g.queue,O=L.dispatch;return y!==g.memoizedState&&(nn.flags|=2048,Nm(9,{destroy:void 0},ste.bind(null,L,y),null)),[j,O,m]}function ste(m,g){m.action=g}function y3(m){var g=La(),y=zn;if(y!==null)return x3(g,y,m);La(),g=g.memoizedState,y=La();var j=y.queue.dispatch;return y.memoizedState=m,[g,j,!1]}function Nm(m,g,y,j){return m={tag:m,create:y,deps:j,inst:g,next:null},g=nn.updateQueue,g===null&&(g=R0(),nn.updateQueue=g),y=g.lastEffect,y===null?g.lastEffect=m.next=m:(j=y.next,y.next=m,m.next=j,g.lastEffect=m),m}function b3(){return La().memoizedState}function F0(m,g,y,j){var L=Bs();nn.flags|=m,L.memoizedState=Nm(1|g,{destroy:void 0},y,j===void 0?null:j)}function B0(m,g,y,j){var L=La();j=j===void 0?null:j;var O=L.memoizedState.inst;zn!==null&&j!==null&&K1(j,zn.memoizedState.deps)?L.memoizedState=Nm(g,O,y,j):(nn.flags|=m,L.memoizedState=Nm(1|g,O,y,j))}function v3(m,g){F0(8390656,8,m,g)}function iC(m,g){B0(2048,8,m,g)}function rte(m){nn.flags|=4;var g=nn.updateQueue;if(g===null)g=R0(),nn.updateQueue=g,g.events=[m];else{var y=g.events;y===null?g.events=[m]:y.push(m)}}function w3(m){var g=La().memoizedState;return rte({ref:g,nextImpl:m}),function(){if((An&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function N3(m,g){return B0(4,2,m,g)}function j3(m,g){return B0(4,4,m,g)}function C3(m,g){if(typeof g=="function"){m=m();var y=g(m);return function(){typeof y=="function"?y():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function S3(m,g,y){y=y!=null?y.concat([m]):null,B0(4,4,C3.bind(null,g,m),y)}function oC(){}function _3(m,g){var y=La();g=g===void 0?null:g;var j=y.memoizedState;return g!==null&&K1(g,j[1])?j[0]:(y.memoizedState=[m,g],m)}function A3(m,g){var y=La();g=g===void 0?null:g;var j=y.memoizedState;if(g!==null&&K1(g,j[1]))return j[0];if(j=m(),Rd){Qe(!0);try{m()}finally{Qe(!1)}}return y.memoizedState=[j,g],j}function lC(m,g,y){return y===void 0||(el&1073741824)!==0&&(gn&261930)===0?m.memoizedState=g:(m.memoizedState=y,m=T5(),nn.lanes|=m,Nc|=m,y)}function T3(m,g,y,j){return jr(y,g)?y:bm.current!==null?(m=lC(m,y,j),jr(m,g)||(za=!0),m):(el&42)===0||(el&1073741824)!==0&&(gn&261930)===0?(za=!0,m.memoizedState=y):(m=T5(),nn.lanes|=m,Nc|=m,g)}function E3(m,g,y,j,L){var O=X.p;X.p=O!==0&&8>O?O:8;var Y=V.T,we={};V.T=we,uC(m,!1,g,y);try{var ze=L(),st=V.S;if(st!==null&&st(we,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var ut=ete(ze,j);Oh(m,g,ut,Er(m))}else Oh(m,g,j,Er(m))}catch(xt){Oh(m,g,{then:function(){},status:"rejected",reason:xt},Er())}finally{X.p=O,Y!==null&&we.types!==null&&(Y.types=we.types),V.T=Y}}function ite(){}function cC(m,g,y,j){if(m.tag!==5)throw Error(s(476));var L=k3(m).queue;E3(m,L,g,q,y===null?ite:function(){return L3(m),y(j)})}function k3(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:q},next:null};var y={};return g.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:y},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function L3(m){var g=k3(m);g.next===null&&(g=m.alternate.memoizedState),Oh(m,g.next.queue,{},Er())}function dC(){return ws(Xh)}function P3(){return La().memoizedState}function D3(){return La().memoizedState}function ote(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var y=Er();m=pc(y);var j=xc(g,m,y);j!==null&&(ar(j,g,y),Eh(j,g,y)),g={cache:z1()},m.payload=g;return}g=g.return}}function lte(m,g,y){var j=Er();y={lane:j,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},H0(m)?M3(g,y):(y=T1(m,g,y,j),y!==null&&(ar(y,m,j),I3(y,g,j)))}function O3(m,g,y){var j=Er();Oh(m,g,y,j)}function Oh(m,g,y,j){var L={lane:j,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(H0(m))M3(g,L);else{var O=m.alternate;if(m.lanes===0&&(O===null||O.lanes===0)&&(O=g.lastRenderedReducer,O!==null))try{var Y=g.lastRenderedState,we=O(Y,y);if(L.hasEagerState=!0,L.eagerState=we,jr(we,Y))return j0(m,g,L,0),Gn===null&&N0(),!1}catch{}if(y=T1(m,g,L,j),y!==null)return ar(y,m,j),I3(y,g,j),!0}return!1}function uC(m,g,y,j){if(j={lane:2,revertLane:HC(),gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},H0(m)){if(g)throw Error(s(479))}else g=T1(m,y,j,2),g!==null&&ar(g,m,2)}function H0(m){var g=m.alternate;return m===nn||g!==null&&g===nn}function M3(m,g){vm=I0=!0;var y=m.pending;y===null?g.next=g:(g.next=y.next,y.next=g),m.pending=g}function I3(m,g,y){if((y&4194048)!==0){var j=g.lanes;j&=m.pendingLanes,y|=j,g.lanes=y,Xe(m,y)}}var Mh={readContext:ws,use:z0,useCallback:ba,useContext:ba,useEffect:ba,useImperativeHandle:ba,useLayoutEffect:ba,useInsertionEffect:ba,useMemo:ba,useReducer:ba,useRef:ba,useState:ba,useDebugValue:ba,useDeferredValue:ba,useTransition:ba,useSyncExternalStore:ba,useId:ba,useHostTransitionStatus:ba,useFormState:ba,useActionState:ba,useOptimistic:ba,useMemoCache:ba,useCacheRefresh:ba};Mh.useEffectEvent=ba;var $3={readContext:ws,use:z0,useCallback:function(m,g){return Bs().memoizedState=[m,g===void 0?null:g],m},useContext:ws,useEffect:v3,useImperativeHandle:function(m,g,y){y=y!=null?y.concat([m]):null,F0(4194308,4,C3.bind(null,g,m),y)},useLayoutEffect:function(m,g){return F0(4194308,4,m,g)},useInsertionEffect:function(m,g){F0(4,2,m,g)},useMemo:function(m,g){var y=Bs();g=g===void 0?null:g;var j=m();if(Rd){Qe(!0);try{m()}finally{Qe(!1)}}return y.memoizedState=[j,g],j},useReducer:function(m,g,y){var j=Bs();if(y!==void 0){var L=y(g);if(Rd){Qe(!0);try{y(g)}finally{Qe(!1)}}}else L=g;return j.memoizedState=j.baseState=L,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:L},j.queue=m,m=m.dispatch=lte.bind(null,nn,m),[j.memoizedState,m]},useRef:function(m){var g=Bs();return m={current:m},g.memoizedState=m},useState:function(m){m=sC(m);var g=m.queue,y=O3.bind(null,nn,g);return g.dispatch=y,[m.memoizedState,y]},useDebugValue:oC,useDeferredValue:function(m,g){var y=Bs();return lC(y,m,g)},useTransition:function(){var m=sC(!1);return m=E3.bind(null,nn,m.queue,!0,!1),Bs().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,y){var j=nn,L=Bs();if(bn){if(y===void 0)throw Error(s(407));y=y()}else{if(y=g(),Gn===null)throw Error(s(349));(gn&127)!==0||s3(j,g,y)}L.memoizedState=y;var O={value:y,getSnapshot:g};return L.queue=O,v3(i3.bind(null,j,O,m),[m]),j.flags|=2048,Nm(9,{destroy:void 0},r3.bind(null,j,O,y,g),null),y},useId:function(){var m=Bs(),g=Gn.identifierPrefix;if(bn){var y=to,j=eo;y=(j&~(1<<32-ct(j)-1)).toString(32)+y,g="_"+g+"R_"+y,y=$0++,0<y&&(g+="H"+y.toString(32)),g+="_"}else y=tte++,g="_"+g+"r_"+y.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:dC,useFormState:g3,useActionState:g3,useOptimistic:function(m){var g=Bs();g.memoizedState=g.baseState=m;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=y,g=uC.bind(null,nn,!0,y),y.dispatch=g,[m,g]},useMemoCache:tC,useCacheRefresh:function(){return Bs().memoizedState=ote.bind(null,nn)},useEffectEvent:function(m){var g=Bs(),y={impl:m};return g.memoizedState=y,function(){if((An&2)!==0)throw Error(s(440));return y.impl.apply(void 0,arguments)}}},mC={readContext:ws,use:z0,useCallback:_3,useContext:ws,useEffect:iC,useImperativeHandle:S3,useInsertionEffect:N3,useLayoutEffect:j3,useMemo:A3,useReducer:U0,useRef:b3,useState:function(){return U0(tl)},useDebugValue:oC,useDeferredValue:function(m,g){var y=La();return T3(y,zn.memoizedState,m,g)},useTransition:function(){var m=U0(tl)[0],g=La().memoizedState;return[typeof m=="boolean"?m:Dh(m),g]},useSyncExternalStore:a3,useId:P3,useHostTransitionStatus:dC,useFormState:p3,useActionState:p3,useOptimistic:function(m,g){var y=La();return c3(y,zn,m,g)},useMemoCache:tC,useCacheRefresh:D3};mC.useEffectEvent=w3;var R3={readContext:ws,use:z0,useCallback:_3,useContext:ws,useEffect:iC,useImperativeHandle:S3,useInsertionEffect:N3,useLayoutEffect:j3,useMemo:A3,useReducer:aC,useRef:b3,useState:function(){return aC(tl)},useDebugValue:oC,useDeferredValue:function(m,g){var y=La();return zn===null?lC(y,m,g):T3(y,zn.memoizedState,m,g)},useTransition:function(){var m=aC(tl)[0],g=La().memoizedState;return[typeof m=="boolean"?m:Dh(m),g]},useSyncExternalStore:a3,useId:P3,useHostTransitionStatus:dC,useFormState:y3,useActionState:y3,useOptimistic:function(m,g){var y=La();return zn!==null?c3(y,zn,m,g):(y.baseState=m,[m,y.queue.dispatch])},useMemoCache:tC,useCacheRefresh:D3};R3.useEffectEvent=w3;function fC(m,g,y,j){g=m.memoizedState,y=y(j,g),y=y==null?g:f({},g,y),m.memoizedState=y,m.lanes===0&&(m.updateQueue.baseState=y)}var hC={enqueueSetState:function(m,g,y){m=m._reactInternals;var j=Er(),L=pc(j);L.payload=g,y!=null&&(L.callback=y),g=xc(m,L,j),g!==null&&(ar(g,m,j),Eh(g,m,j))},enqueueReplaceState:function(m,g,y){m=m._reactInternals;var j=Er(),L=pc(j);L.tag=1,L.payload=g,y!=null&&(L.callback=y),g=xc(m,L,j),g!==null&&(ar(g,m,j),Eh(g,m,j))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var y=Er(),j=pc(y);j.tag=2,g!=null&&(j.callback=g),g=xc(m,j,y),g!==null&&(ar(g,m,y),Eh(g,m,y))}};function z3(m,g,y,j,L,O,Y){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(j,O,Y):g.prototype&&g.prototype.isPureReactComponent?!wh(y,j)||!wh(L,O):!0}function U3(m,g,y,j){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(y,j),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(y,j),g.state!==m&&hC.enqueueReplaceState(g,g.state,null)}function zd(m,g){var y=g;if("ref"in g){y={};for(var j in g)j!=="ref"&&(y[j]=g[j])}if(m=m.defaultProps){y===g&&(y=f({},y));for(var L in m)y[L]===void 0&&(y[L]=m[L])}return y}function F3(m){w0(m)}function B3(m){console.error(m)}function H3(m){w0(m)}function G0(m,g){try{var y=m.onUncaughtError;y(g.value,{componentStack:g.stack})}catch(j){setTimeout(function(){throw j})}}function G3(m,g,y){try{var j=m.onCaughtError;j(y.value,{componentStack:y.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function gC(m,g,y){return y=pc(y),y.tag=3,y.payload={element:null},y.callback=function(){G0(m,g)},y}function W3(m){return m=pc(m),m.tag=3,m}function q3(m,g,y,j){var L=y.type.getDerivedStateFromError;if(typeof L=="function"){var O=j.value;m.payload=function(){return L(O)},m.callback=function(){G3(g,y,j)}}var Y=y.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(m.callback=function(){G3(g,y,j),typeof L!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var we=j.stack;this.componentDidCatch(j.value,{componentStack:we!==null?we:""})})}function cte(m,g,y,j,L){if(y.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){if(g=y.alternate,g!==null&&hm(g,y,L,!0),y=Sr.current,y!==null){switch(y.tag){case 31:case 13:return Jr===null?ny():y.alternate===null&&va===0&&(va=3),y.flags&=-257,y.flags|=65536,y.lanes=L,j===L0?y.flags|=16384:(g=y.updateQueue,g===null?y.updateQueue=new Set([j]):g.add(j),UC(m,j,L)),!1;case 22:return y.flags|=65536,j===L0?y.flags|=16384:(g=y.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([j])},y.updateQueue=g):(y=g.retryQueue,y===null?g.retryQueue=new Set([j]):y.add(j)),UC(m,j,L)),!1}throw Error(s(435,y.tag))}return UC(m,j,L),ny(),!1}if(bn)return g=Sr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=L,j!==O1&&(m=Error(s(422),{cause:j}),Ch(Yr(m,y)))):(j!==O1&&(g=Error(s(423),{cause:j}),Ch(Yr(g,y))),m=m.current.alternate,m.flags|=65536,L&=-L,m.lanes|=L,j=Yr(j,y),L=gC(m.stateNode,j,L),W1(m,L),va!==4&&(va=2)),!1;var O=Error(s(520),{cause:j});if(O=Yr(O,y),Hh===null?Hh=[O]:Hh.push(O),va!==4&&(va=2),g===null)return!0;j=Yr(j,y),y=g;do{switch(y.tag){case 3:return y.flags|=65536,m=L&-L,y.lanes|=m,m=gC(y.stateNode,j,m),W1(y,m),!1;case 1:if(g=y.type,O=y.stateNode,(y.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(jc===null||!jc.has(O))))return y.flags|=65536,L&=-L,y.lanes|=L,L=W3(L),q3(L,m,y,j),W1(y,L),!1}y=y.return}while(y!==null);return!1}var pC=Error(s(461)),za=!1;function Ns(m,g,y,j){g.child=m===null?KO(g,null,y,j):$d(g,m.child,y,j)}function V3(m,g,y,j,L){y=y.render;var O=g.ref;if("ref"in j){var Y={};for(var we in j)we!=="ref"&&(Y[we]=j[we])}else Y=j;return Dd(g),j=X1(m,g,y,Y,O,L),we=Z1(),m!==null&&!za?(J1(m,g,L),nl(m,g,L)):(bn&&we&&P1(g),g.flags|=1,Ns(m,g,j,L),g.child)}function Q3(m,g,y,j,L){if(m===null){var O=y.type;return typeof O=="function"&&!E1(O)&&O.defaultProps===void 0&&y.compare===null?(g.tag=15,g.type=O,Y3(m,g,O,j,L)):(m=S0(y.type,null,j,g,g.mode,L),m.ref=g.ref,m.return=g,g.child=m)}if(O=m.child,!CC(m,L)){var Y=O.memoizedProps;if(y=y.compare,y=y!==null?y:wh,y(Y,j)&&m.ref===g.ref)return nl(m,g,L)}return g.flags|=1,m=Ko(O,j),m.ref=g.ref,m.return=g,g.child=m}function Y3(m,g,y,j,L){if(m!==null){var O=m.memoizedProps;if(wh(O,j)&&m.ref===g.ref)if(za=!1,g.pendingProps=j=O,CC(m,L))(m.flags&131072)!==0&&(za=!0);else return g.lanes=m.lanes,nl(m,g,L)}return xC(m,g,y,j,L)}function K3(m,g,y,j){var L=j.children,O=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),j.mode==="hidden"){if((g.flags&128)!==0){if(O=O!==null?O.baseLanes|y:y,m!==null){for(j=g.child=m.child,L=0;j!==null;)L=L|j.lanes|j.childLanes,j=j.sibling;j=L&~O}else j=0,g.child=null;return X3(m,g,O,y,j)}if((y&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&E0(g,O!==null?O.cachePool:null),O!==null?JO(g,O):V1(),e3(g);else return j=g.lanes=536870912,X3(m,g,O!==null?O.baseLanes|y:y,y,j)}else O!==null?(E0(g,O.cachePool),JO(g,O),bc(),g.memoizedState=null):(m!==null&&E0(g,null),V1(),bc());return Ns(m,g,L,y),g.child}function Ih(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function X3(m,g,y,j,L){var O=F1();return O=O===null?null:{parent:$a._currentValue,pool:O},g.memoizedState={baseLanes:y,cachePool:O},m!==null&&E0(g,null),V1(),e3(g),m!==null&&hm(m,g,j,!0),g.childLanes=L,null}function W0(m,g){return g=V0({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function Z3(m,g,y){return $d(g,m.child,null,y),m=W0(g,g.pendingProps),m.flags|=2,_r(g),g.memoizedState=null,m}function dte(m,g,y){var j=g.pendingProps,L=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(bn){if(j.mode==="hidden")return m=W0(g,j),g.lanes=536870912,Ih(null,m);if(Y1(g),(m=Zn)?(m=dM(m,Zr),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:uc!==null?{id:eo,overflow:to}:null,retryLane:536870912,hydrationErrors:null},y=MO(m),y.return=g,g.child=y,vs=g,Zn=null)):m=null,m===null)throw fc(g);return g.lanes=536870912,null}return W0(g,j)}var O=m.memoizedState;if(O!==null){var Y=O.dehydrated;if(Y1(g),L)if(g.flags&256)g.flags&=-257,g=Z3(m,g,y);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if(za||hm(m,g,y,!1),L=(y&m.childLanes)!==0,za||L){if(j=Gn,j!==null&&(Y=pt(j,y),Y!==0&&Y!==O.retryLane))throw O.retryLane=Y,Ed(m,Y),ar(j,m,Y),pC;ny(),g=Z3(m,g,y)}else m=O.treeContext,Zn=ei(Y.nextSibling),vs=g,bn=!0,mc=null,Zr=!1,m!==null&&RO(g,m),g=W0(g,j),g.flags|=4096;return g}return m=Ko(m.child,{mode:j.mode,children:j.children}),m.ref=g.ref,g.child=m,m.return=g,m}function q0(m,g){var y=g.ref;if(y===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(s(284));(m===null||m.ref!==y)&&(g.flags|=4194816)}}function xC(m,g,y,j,L){return Dd(g),y=X1(m,g,y,j,void 0,L),j=Z1(),m!==null&&!za?(J1(m,g,L),nl(m,g,L)):(bn&&j&&P1(g),g.flags|=1,Ns(m,g,y,L),g.child)}function J3(m,g,y,j,L,O){return Dd(g),g.updateQueue=null,y=n3(g,j,y,L),t3(m),j=Z1(),m!==null&&!za?(J1(m,g,O),nl(m,g,O)):(bn&&j&&P1(g),g.flags|=1,Ns(m,g,y,O),g.child)}function e5(m,g,y,j,L){if(Dd(g),g.stateNode===null){var O=dm,Y=y.contextType;typeof Y=="object"&&Y!==null&&(O=ws(Y)),O=new y(j,O),g.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=hC,g.stateNode=O,O._reactInternals=g,O=g.stateNode,O.props=j,O.state=g.memoizedState,O.refs={},H1(g),Y=y.contextType,O.context=typeof Y=="object"&&Y!==null?ws(Y):dm,O.state=g.memoizedState,Y=y.getDerivedStateFromProps,typeof Y=="function"&&(fC(g,y,Y,j),O.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(Y=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),Y!==O.state&&hC.enqueueReplaceState(O,O.state,null),Lh(g,j,O,L),kh(),O.state=g.memoizedState),typeof O.componentDidMount=="function"&&(g.flags|=4194308),j=!0}else if(m===null){O=g.stateNode;var we=g.memoizedProps,ze=zd(y,we);O.props=ze;var st=O.context,ut=y.contextType;Y=dm,typeof ut=="object"&&ut!==null&&(Y=ws(ut));var xt=y.getDerivedStateFromProps;ut=typeof xt=="function"||typeof O.getSnapshotBeforeUpdate=="function",we=g.pendingProps!==we,ut||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(we||st!==Y)&&U3(g,O,j,Y),gc=!1;var it=g.memoizedState;O.state=it,Lh(g,j,O,L),kh(),st=g.memoizedState,we||it!==st||gc?(typeof xt=="function"&&(fC(g,y,xt,j),st=g.memoizedState),(ze=gc||z3(g,y,ze,j,it,st,Y))?(ut||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(g.flags|=4194308)):(typeof O.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=j,g.memoizedState=st),O.props=j,O.state=st,O.context=Y,j=ze):(typeof O.componentDidMount=="function"&&(g.flags|=4194308),j=!1)}else{O=g.stateNode,G1(m,g),Y=g.memoizedProps,ut=zd(y,Y),O.props=ut,xt=g.pendingProps,it=O.context,st=y.contextType,ze=dm,typeof st=="object"&&st!==null&&(ze=ws(st)),we=y.getDerivedStateFromProps,(st=typeof we=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==xt||it!==ze)&&U3(g,O,j,ze),gc=!1,it=g.memoizedState,O.state=it,Lh(g,j,O,L),kh();var dt=g.memoizedState;Y!==xt||it!==dt||gc||m!==null&&m.dependencies!==null&&A0(m.dependencies)?(typeof we=="function"&&(fC(g,y,we,j),dt=g.memoizedState),(ut=gc||z3(g,y,ut,j,it,dt,ze)||m!==null&&m.dependencies!==null&&A0(m.dependencies))?(st||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(j,dt,ze),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(j,dt,ze)),typeof O.componentDidUpdate=="function"&&(g.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===m.memoizedProps&&it===m.memoizedState||(g.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===m.memoizedProps&&it===m.memoizedState||(g.flags|=1024),g.memoizedProps=j,g.memoizedState=dt),O.props=j,O.state=dt,O.context=ze,j=ut):(typeof O.componentDidUpdate!="function"||Y===m.memoizedProps&&it===m.memoizedState||(g.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===m.memoizedProps&&it===m.memoizedState||(g.flags|=1024),j=!1)}return O=j,q0(m,g),j=(g.flags&128)!==0,O||j?(O=g.stateNode,y=j&&typeof y.getDerivedStateFromError!="function"?null:O.render(),g.flags|=1,m!==null&&j?(g.child=$d(g,m.child,null,L),g.child=$d(g,null,y,L)):Ns(m,g,y,L),g.memoizedState=O.state,m=g.child):m=nl(m,g,L),m}function t5(m,g,y,j){return Ld(),g.flags|=256,Ns(m,g,y,j),g.child}var yC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bC(m){return{baseLanes:m,cachePool:GO()}}function vC(m,g,y){return m=m!==null?m.childLanes&~y:0,g&&(m|=Tr),m}function n5(m,g,y){var j=g.pendingProps,L=!1,O=(g.flags&128)!==0,Y;if((Y=O)||(Y=m!==null&&m.memoizedState===null?!1:(ka.current&2)!==0),Y&&(L=!0,g.flags&=-129),Y=(g.flags&32)!==0,g.flags&=-33,m===null){if(bn){if(L?yc(g):bc(),(m=Zn)?(m=dM(m,Zr),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:uc!==null?{id:eo,overflow:to}:null,retryLane:536870912,hydrationErrors:null},y=MO(m),y.return=g,g.child=y,vs=g,Zn=null)):m=null,m===null)throw fc(g);return nS(m)?g.lanes=32:g.lanes=536870912,null}var we=j.children;return j=j.fallback,L?(bc(),L=g.mode,we=V0({mode:"hidden",children:we},L),j=kd(j,L,y,null),we.return=g,j.return=g,we.sibling=j,g.child=we,j=g.child,j.memoizedState=bC(y),j.childLanes=vC(m,Y,y),g.memoizedState=yC,Ih(null,j)):(yc(g),wC(g,we))}var ze=m.memoizedState;if(ze!==null&&(we=ze.dehydrated,we!==null)){if(O)g.flags&256?(yc(g),g.flags&=-257,g=NC(m,g,y)):g.memoizedState!==null?(bc(),g.child=m.child,g.flags|=128,g=null):(bc(),we=j.fallback,L=g.mode,j=V0({mode:"visible",children:j.children},L),we=kd(we,L,y,null),we.flags|=2,j.return=g,we.return=g,j.sibling=we,g.child=j,$d(g,m.child,null,y),j=g.child,j.memoizedState=bC(y),j.childLanes=vC(m,Y,y),g.memoizedState=yC,g=Ih(null,j));else if(yc(g),nS(we)){if(Y=we.nextSibling&&we.nextSibling.dataset,Y)var st=Y.dgst;Y=st,j=Error(s(419)),j.stack="",j.digest=Y,Ch({value:j,source:null,stack:null}),g=NC(m,g,y)}else if(za||hm(m,g,y,!1),Y=(y&m.childLanes)!==0,za||Y){if(Y=Gn,Y!==null&&(j=pt(Y,y),j!==0&&j!==ze.retryLane))throw ze.retryLane=j,Ed(m,j),ar(Y,m,j),pC;tS(we)||ny(),g=NC(m,g,y)}else tS(we)?(g.flags|=192,g.child=m.child,g=null):(m=ze.treeContext,Zn=ei(we.nextSibling),vs=g,bn=!0,mc=null,Zr=!1,m!==null&&RO(g,m),g=wC(g,j.children),g.flags|=4096);return g}return L?(bc(),we=j.fallback,L=g.mode,ze=m.child,st=ze.sibling,j=Ko(ze,{mode:"hidden",children:j.children}),j.subtreeFlags=ze.subtreeFlags&65011712,st!==null?we=Ko(st,we):(we=kd(we,L,y,null),we.flags|=2),we.return=g,j.return=g,j.sibling=we,g.child=j,Ih(null,j),j=g.child,we=m.child.memoizedState,we===null?we=bC(y):(L=we.cachePool,L!==null?(ze=$a._currentValue,L=L.parent!==ze?{parent:ze,pool:ze}:L):L=GO(),we={baseLanes:we.baseLanes|y,cachePool:L}),j.memoizedState=we,j.childLanes=vC(m,Y,y),g.memoizedState=yC,Ih(m.child,j)):(yc(g),y=m.child,m=y.sibling,y=Ko(y,{mode:"visible",children:j.children}),y.return=g,y.sibling=null,m!==null&&(Y=g.deletions,Y===null?(g.deletions=[m],g.flags|=16):Y.push(m)),g.child=y,g.memoizedState=null,y)}function wC(m,g){return g=V0({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function V0(m,g){return m=Cr(22,m,null,g),m.lanes=0,m}function NC(m,g,y){return $d(g,m.child,null,y),m=wC(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function a5(m,g,y){m.lanes|=g;var j=m.alternate;j!==null&&(j.lanes|=g),$1(m.return,g,y)}function jC(m,g,y,j,L,O){var Y=m.memoizedState;Y===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:j,tail:y,tailMode:L,treeForkCount:O}:(Y.isBackwards=g,Y.rendering=null,Y.renderingStartTime=0,Y.last=j,Y.tail=y,Y.tailMode=L,Y.treeForkCount=O)}function s5(m,g,y){var j=g.pendingProps,L=j.revealOrder,O=j.tail;j=j.children;var Y=ka.current,we=(Y&2)!==0;if(we?(Y=Y&1|2,g.flags|=128):Y&=1,ye(ka,Y),Ns(m,g,j,y),j=bn?jh:0,!we&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&a5(m,y,g);else if(m.tag===19)a5(m,y,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(L){case"forwards":for(y=g.child,L=null;y!==null;)m=y.alternate,m!==null&&M0(m)===null&&(L=y),y=y.sibling;y=L,y===null?(L=g.child,g.child=null):(L=y.sibling,y.sibling=null),jC(g,!1,L,y,O,j);break;case"backwards":case"unstable_legacy-backwards":for(y=null,L=g.child,g.child=null;L!==null;){if(m=L.alternate,m!==null&&M0(m)===null){g.child=L;break}m=L.sibling,L.sibling=y,y=L,L=m}jC(g,!0,y,null,O,j);break;case"together":jC(g,!1,null,null,void 0,j);break;default:g.memoizedState=null}return g.child}function nl(m,g,y){if(m!==null&&(g.dependencies=m.dependencies),Nc|=g.lanes,(y&g.childLanes)===0)if(m!==null){if(hm(m,g,y,!1),(y&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,y=Ko(m,m.pendingProps),g.child=y,y.return=g;m.sibling!==null;)m=m.sibling,y=y.sibling=Ko(m,m.pendingProps),y.return=g;y.sibling=null}return g.child}function CC(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&A0(m)))}function ute(m,g,y){switch(g.tag){case 3:ke(g,g.stateNode.containerInfo),hc(g,$a,m.memoizedState.cache),Ld();break;case 27:case 5:Ge(g);break;case 4:ke(g,g.stateNode.containerInfo);break;case 10:hc(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,Y1(g),null;break;case 13:var j=g.memoizedState;if(j!==null)return j.dehydrated!==null?(yc(g),g.flags|=128,null):(y&g.child.childLanes)!==0?n5(m,g,y):(yc(g),m=nl(m,g,y),m!==null?m.sibling:null);yc(g);break;case 19:var L=(m.flags&128)!==0;if(j=(y&g.childLanes)!==0,j||(hm(m,g,y,!1),j=(y&g.childLanes)!==0),L){if(j)return s5(m,g,y);g.flags|=128}if(L=g.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),ye(ka,ka.current),j)break;return null;case 22:return g.lanes=0,K3(m,g,y,g.pendingProps);case 24:hc(g,$a,m.memoizedState.cache)}return nl(m,g,y)}function r5(m,g,y){if(m!==null)if(m.memoizedProps!==g.pendingProps)za=!0;else{if(!CC(m,y)&&(g.flags&128)===0)return za=!1,ute(m,g,y);za=(m.flags&131072)!==0}else za=!1,bn&&(g.flags&1048576)!==0&&$O(g,jh,g.index);switch(g.lanes=0,g.tag){case 16:e:{var j=g.pendingProps;if(m=Md(g.elementType),g.type=m,typeof m=="function")E1(m)?(j=zd(m,j),g.tag=1,g=e5(null,g,m,j,y)):(g.tag=0,g=xC(null,g,m,j,y));else{if(m!=null){var L=m.$$typeof;if(L===E){g.tag=11,g=V3(null,g,m,j,y);break e}else if(L===A){g.tag=14,g=Q3(null,g,m,j,y);break e}}throw g=G(m)||m,Error(s(306,g,""))}}return g;case 0:return xC(m,g,g.type,g.pendingProps,y);case 1:return j=g.type,L=zd(j,g.pendingProps),e5(m,g,j,L,y);case 3:e:{if(ke(g,g.stateNode.containerInfo),m===null)throw Error(s(387));j=g.pendingProps;var O=g.memoizedState;L=O.element,G1(m,g),Lh(g,j,null,y);var Y=g.memoizedState;if(j=Y.cache,hc(g,$a,j),j!==O.cache&&R1(g,[$a],y,!0),kh(),j=Y.element,O.isDehydrated)if(O={element:j,isDehydrated:!1,cache:Y.cache},g.updateQueue.baseState=O,g.memoizedState=O,g.flags&256){g=t5(m,g,j,y);break e}else if(j!==L){L=Yr(Error(s(424)),g),Ch(L),g=t5(m,g,j,y);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,Zn=ei(m.firstChild),vs=g,bn=!0,mc=null,Zr=!0,y=KO(g,null,j,y),g.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ld(),j===L){g=nl(m,g,y);break e}Ns(m,g,j,y)}g=g.child}return g;case 26:return q0(m,g),m===null?(y=pM(g.type,null,g.pendingProps,null))?g.memoizedState=y:bn||(y=g.type,m=g.pendingProps,j=cy(Se.current).createElement(y),j[re]=g,j[ot]=m,js(j,y,m),Ye(j),g.stateNode=j):g.memoizedState=pM(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return Ge(g),m===null&&bn&&(j=g.stateNode=fM(g.type,g.pendingProps,Se.current),vs=g,Zr=!0,L=Zn,Ac(g.type)?(aS=L,Zn=ei(j.firstChild)):Zn=L),Ns(m,g,g.pendingProps.children,y),q0(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&bn&&((L=j=Zn)&&(j=Fte(j,g.type,g.pendingProps,Zr),j!==null?(g.stateNode=j,vs=g,Zn=ei(j.firstChild),Zr=!1,L=!0):L=!1),L||fc(g)),Ge(g),L=g.type,O=g.pendingProps,Y=m!==null?m.memoizedProps:null,j=O.children,ZC(L,O)?j=null:Y!==null&&ZC(L,Y)&&(g.flags|=32),g.memoizedState!==null&&(L=X1(m,g,nte,null,null,y),Xh._currentValue=L),q0(m,g),Ns(m,g,j,y),g.child;case 6:return m===null&&bn&&((m=y=Zn)&&(y=Bte(y,g.pendingProps,Zr),y!==null?(g.stateNode=y,vs=g,Zn=null,m=!0):m=!1),m||fc(g)),null;case 13:return n5(m,g,y);case 4:return ke(g,g.stateNode.containerInfo),j=g.pendingProps,m===null?g.child=$d(g,null,j,y):Ns(m,g,j,y),g.child;case 11:return V3(m,g,g.type,g.pendingProps,y);case 7:return Ns(m,g,g.pendingProps,y),g.child;case 8:return Ns(m,g,g.pendingProps.children,y),g.child;case 12:return Ns(m,g,g.pendingProps.children,y),g.child;case 10:return j=g.pendingProps,hc(g,g.type,j.value),Ns(m,g,j.children,y),g.child;case 9:return L=g.type._context,j=g.pendingProps.children,Dd(g),L=ws(L),j=j(L),g.flags|=1,Ns(m,g,j,y),g.child;case 14:return Q3(m,g,g.type,g.pendingProps,y);case 15:return Y3(m,g,g.type,g.pendingProps,y);case 19:return s5(m,g,y);case 31:return dte(m,g,y);case 22:return K3(m,g,y,g.pendingProps);case 24:return Dd(g),j=ws($a),m===null?(L=F1(),L===null&&(L=Gn,O=z1(),L.pooledCache=O,O.refCount++,O!==null&&(L.pooledCacheLanes|=y),L=O),g.memoizedState={parent:j,cache:L},H1(g),hc(g,$a,L)):((m.lanes&y)!==0&&(G1(m,g),Lh(g,null,null,y),kh()),L=m.memoizedState,O=g.memoizedState,L.parent!==j?(L={parent:j,cache:j},g.memoizedState=L,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=L),hc(g,$a,j)):(j=O.cache,hc(g,$a,j),j!==L.cache&&R1(g,[$a],y,!0))),Ns(m,g,g.pendingProps.children,y),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function al(m){m.flags|=4}function SC(m,g,y,j,L){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(L&335544128)===L)if(m.stateNode.complete)m.flags|=8192;else if(P5())m.flags|=8192;else throw Id=L0,B1}else m.flags&=-16777217}function i5(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!wM(g))if(P5())m.flags|=8192;else throw Id=L0,B1}function Q0(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?se():536870912,m.lanes|=g,_m|=g)}function $h(m,g){if(!bn)switch(m.tailMode){case"hidden":g=m.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?m.tail=null:y.sibling=null;break;case"collapsed":y=m.tail;for(var j=null;y!==null;)y.alternate!==null&&(j=y),y=y.sibling;j===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:j.sibling=null}}function Jn(m){var g=m.alternate!==null&&m.alternate.child===m.child,y=0,j=0;if(g)for(var L=m.child;L!==null;)y|=L.lanes|L.childLanes,j|=L.subtreeFlags&65011712,j|=L.flags&65011712,L.return=m,L=L.sibling;else for(L=m.child;L!==null;)y|=L.lanes|L.childLanes,j|=L.subtreeFlags,j|=L.flags,L.return=m,L=L.sibling;return m.subtreeFlags|=j,m.childLanes=y,g}function mte(m,g,y){var j=g.pendingProps;switch(D1(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(g),null;case 1:return Jn(g),null;case 3:return y=g.stateNode,j=null,m!==null&&(j=m.memoizedState.cache),g.memoizedState.cache!==j&&(g.flags|=2048),Jo($a),he(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(m===null||m.child===null)&&(fm(g)?al(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,M1())),Jn(g),null;case 26:var L=g.type,O=g.memoizedState;return m===null?(al(g),O!==null?(Jn(g),i5(g,O)):(Jn(g),SC(g,L,null,j,y))):O?O!==m.memoizedState?(al(g),Jn(g),i5(g,O)):(Jn(g),g.flags&=-16777217):(m=m.memoizedProps,m!==j&&al(g),Jn(g),SC(g,L,m,j,y)),null;case 27:if(Ce(g),y=Se.current,L=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&al(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Jn(g),null}m=pe.current,fm(g)?zO(g):(m=fM(L,j,y),g.stateNode=m,al(g))}return Jn(g),null;case 5:if(Ce(g),L=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&al(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Jn(g),null}if(O=pe.current,fm(g))zO(g);else{var Y=cy(Se.current);switch(O){case 1:O=Y.createElementNS("http://www.w3.org/2000/svg",L);break;case 2:O=Y.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;default:switch(L){case"svg":O=Y.createElementNS("http://www.w3.org/2000/svg",L);break;case"math":O=Y.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;case"script":O=Y.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof j.is=="string"?Y.createElement("select",{is:j.is}):Y.createElement("select"),j.multiple?O.multiple=!0:j.size&&(O.size=j.size);break;default:O=typeof j.is=="string"?Y.createElement(L,{is:j.is}):Y.createElement(L)}}O[re]=g,O[ot]=j;e:for(Y=g.child;Y!==null;){if(Y.tag===5||Y.tag===6)O.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===g)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===g)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}g.stateNode=O;e:switch(js(O,L,j),L){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}j&&al(g)}}return Jn(g),SC(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,y),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==j&&al(g);else{if(typeof j!="string"&&g.stateNode===null)throw Error(s(166));if(m=Se.current,fm(g)){if(m=g.stateNode,y=g.memoizedProps,j=null,L=vs,L!==null)switch(L.tag){case 27:case 5:j=L.memoizedProps}m[re]=g,m=!!(m.nodeValue===y||j!==null&&j.suppressHydrationWarning===!0||nM(m.nodeValue,y)),m||fc(g,!0)}else m=cy(m).createTextNode(j),m[re]=g,g.stateNode=m}return Jn(g),null;case 31:if(y=g.memoizedState,m===null||m.memoizedState!==null){if(j=fm(g),y!==null){if(m===null){if(!j)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[re]=g}else Ld(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Jn(g),m=!1}else y=M1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=y),m=!0;if(!m)return g.flags&256?(_r(g),g):(_r(g),null);if((g.flags&128)!==0)throw Error(s(558))}return Jn(g),null;case 13:if(j=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(L=fm(g),j!==null&&j.dehydrated!==null){if(m===null){if(!L)throw Error(s(318));if(L=g.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));L[re]=g}else Ld(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Jn(g),L=!1}else L=M1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=L),L=!0;if(!L)return g.flags&256?(_r(g),g):(_r(g),null)}return _r(g),(g.flags&128)!==0?(g.lanes=y,g):(y=j!==null,m=m!==null&&m.memoizedState!==null,y&&(j=g.child,L=null,j.alternate!==null&&j.alternate.memoizedState!==null&&j.alternate.memoizedState.cachePool!==null&&(L=j.alternate.memoizedState.cachePool.pool),O=null,j.memoizedState!==null&&j.memoizedState.cachePool!==null&&(O=j.memoizedState.cachePool.pool),O!==L&&(j.flags|=2048)),y!==m&&y&&(g.child.flags|=8192),Q0(g,g.updateQueue),Jn(g),null);case 4:return he(),m===null&&VC(g.stateNode.containerInfo),Jn(g),null;case 10:return Jo(g.type),Jn(g),null;case 19:if(R(ka),j=g.memoizedState,j===null)return Jn(g),null;if(L=(g.flags&128)!==0,O=j.rendering,O===null)if(L)$h(j,!1);else{if(va!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(O=M0(m),O!==null){for(g.flags|=128,$h(j,!1),m=O.updateQueue,g.updateQueue=m,Q0(g,m),g.subtreeFlags=0,m=y,y=g.child;y!==null;)OO(y,m),y=y.sibling;return ye(ka,ka.current&1|2),bn&&Xo(g,j.treeForkCount),g.child}m=m.sibling}j.tail!==null&&Z()>J0&&(g.flags|=128,L=!0,$h(j,!1),g.lanes=4194304)}else{if(!L)if(m=M0(O),m!==null){if(g.flags|=128,L=!0,m=m.updateQueue,g.updateQueue=m,Q0(g,m),$h(j,!0),j.tail===null&&j.tailMode==="hidden"&&!O.alternate&&!bn)return Jn(g),null}else 2*Z()-j.renderingStartTime>J0&&y!==536870912&&(g.flags|=128,L=!0,$h(j,!1),g.lanes=4194304);j.isBackwards?(O.sibling=g.child,g.child=O):(m=j.last,m!==null?m.sibling=O:g.child=O,j.last=O)}return j.tail!==null?(m=j.tail,j.rendering=m,j.tail=m.sibling,j.renderingStartTime=Z(),m.sibling=null,y=ka.current,ye(ka,L?y&1|2:y&1),bn&&Xo(g,j.treeForkCount),m):(Jn(g),null);case 22:case 23:return _r(g),Q1(),j=g.memoizedState!==null,m!==null?m.memoizedState!==null!==j&&(g.flags|=8192):j&&(g.flags|=8192),j?(y&536870912)!==0&&(g.flags&128)===0&&(Jn(g),g.subtreeFlags&6&&(g.flags|=8192)):Jn(g),y=g.updateQueue,y!==null&&Q0(g,y.retryQueue),y=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),j=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(j=g.memoizedState.cachePool.pool),j!==y&&(g.flags|=2048),m!==null&&R(Od),null;case 24:return y=null,m!==null&&(y=m.memoizedState.cache),g.memoizedState.cache!==y&&(g.flags|=2048),Jo($a),Jn(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function fte(m,g){switch(D1(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Jo($a),he(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return Ce(g),null;case 31:if(g.memoizedState!==null){if(_r(g),g.alternate===null)throw Error(s(340));Ld()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(_r(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Ld()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return R(ka),null;case 4:return he(),null;case 10:return Jo(g.type),null;case 22:case 23:return _r(g),Q1(),m!==null&&R(Od),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return Jo($a),null;case 25:return null;default:return null}}function o5(m,g){switch(D1(g),g.tag){case 3:Jo($a),he();break;case 26:case 27:case 5:Ce(g);break;case 4:he();break;case 31:g.memoizedState!==null&&_r(g);break;case 13:_r(g);break;case 19:R(ka);break;case 10:Jo(g.type);break;case 22:case 23:_r(g),Q1(),m!==null&&R(Od);break;case 24:Jo($a)}}function Rh(m,g){try{var y=g.updateQueue,j=y!==null?y.lastEffect:null;if(j!==null){var L=j.next;y=L;do{if((y.tag&m)===m){j=void 0;var O=y.create,Y=y.inst;j=O(),Y.destroy=j}y=y.next}while(y!==L)}}catch(we){Dn(g,g.return,we)}}function vc(m,g,y){try{var j=g.updateQueue,L=j!==null?j.lastEffect:null;if(L!==null){var O=L.next;j=O;do{if((j.tag&m)===m){var Y=j.inst,we=Y.destroy;if(we!==void 0){Y.destroy=void 0,L=g;var ze=y,st=we;try{st()}catch(ut){Dn(L,ze,ut)}}}j=j.next}while(j!==O)}}catch(ut){Dn(g,g.return,ut)}}function l5(m){var g=m.updateQueue;if(g!==null){var y=m.stateNode;try{ZO(g,y)}catch(j){Dn(m,m.return,j)}}}function c5(m,g,y){y.props=zd(m.type,m.memoizedProps),y.state=m.memoizedState;try{y.componentWillUnmount()}catch(j){Dn(m,g,j)}}function zh(m,g){try{var y=m.ref;if(y!==null){switch(m.tag){case 26:case 27:case 5:var j=m.stateNode;break;case 30:j=m.stateNode;break;default:j=m.stateNode}typeof y=="function"?m.refCleanup=y(j):y.current=j}}catch(L){Dn(m,g,L)}}function no(m,g){var y=m.ref,j=m.refCleanup;if(y!==null)if(typeof j=="function")try{j()}catch(L){Dn(m,g,L)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(L){Dn(m,g,L)}else y.current=null}function d5(m){var g=m.type,y=m.memoizedProps,j=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":y.autoFocus&&j.focus();break e;case"img":y.src?j.src=y.src:y.srcSet&&(j.srcset=y.srcSet)}}catch(L){Dn(m,m.return,L)}}function _C(m,g,y){try{var j=m.stateNode;Mte(j,m.type,y,g),j[ot]=g}catch(L){Dn(m,m.return,L)}}function u5(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&Ac(m.type)||m.tag===4}function AC(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||u5(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&Ac(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function TC(m,g,y){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(m,g):(g=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,g.appendChild(m),y=y._reactRootContainer,y!=null||g.onclick!==null||(g.onclick=Qo));else if(j!==4&&(j===27&&Ac(m.type)&&(y=m.stateNode,g=null),m=m.child,m!==null))for(TC(m,g,y),m=m.sibling;m!==null;)TC(m,g,y),m=m.sibling}function Y0(m,g,y){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?y.insertBefore(m,g):y.appendChild(m);else if(j!==4&&(j===27&&Ac(m.type)&&(y=m.stateNode),m=m.child,m!==null))for(Y0(m,g,y),m=m.sibling;m!==null;)Y0(m,g,y),m=m.sibling}function m5(m){var g=m.stateNode,y=m.memoizedProps;try{for(var j=m.type,L=g.attributes;L.length;)g.removeAttributeNode(L[0]);js(g,j,y),g[re]=m,g[ot]=y}catch(O){Dn(m,m.return,O)}}var sl=!1,Ua=!1,EC=!1,f5=typeof WeakSet=="function"?WeakSet:Set,ds=null;function hte(m,g){if(m=m.containerInfo,KC=py,m=SO(m),N1(m)){if("selectionStart"in m)var y={start:m.selectionStart,end:m.selectionEnd};else e:{y=(y=m.ownerDocument)&&y.defaultView||window;var j=y.getSelection&&y.getSelection();if(j&&j.rangeCount!==0){y=j.anchorNode;var L=j.anchorOffset,O=j.focusNode;j=j.focusOffset;try{y.nodeType,O.nodeType}catch{y=null;break e}var Y=0,we=-1,ze=-1,st=0,ut=0,xt=m,it=null;t:for(;;){for(var dt;xt!==y||L!==0&&xt.nodeType!==3||(we=Y+L),xt!==O||j!==0&&xt.nodeType!==3||(ze=Y+j),xt.nodeType===3&&(Y+=xt.nodeValue.length),(dt=xt.firstChild)!==null;)it=xt,xt=dt;for(;;){if(xt===m)break t;if(it===y&&++st===L&&(we=Y),it===O&&++ut===j&&(ze=Y),(dt=xt.nextSibling)!==null)break;xt=it,it=xt.parentNode}xt=dt}y=we===-1||ze===-1?null:{start:we,end:ze}}else y=null}y=y||{start:0,end:0}}else y=null;for(XC={focusedElem:m,selectionRange:y},py=!1,ds=g;ds!==null;)if(g=ds,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,ds=m;else for(;ds!==null;){switch(g=ds,O=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(y=0;y<m.length;y++)L=m[y],L.ref.impl=L.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&O!==null){m=void 0,y=g,L=O.memoizedProps,O=O.memoizedState,j=y.stateNode;try{var Ot=zd(y.type,L);m=j.getSnapshotBeforeUpdate(Ot,O),j.__reactInternalSnapshotBeforeUpdate=m}catch(Vt){Dn(y,y.return,Vt)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,y=m.nodeType,y===9)eS(m);else if(y===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":eS(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,ds=m;break}ds=g.return}}function h5(m,g,y){var j=y.flags;switch(y.tag){case 0:case 11:case 15:il(m,y),j&4&&Rh(5,y);break;case 1:if(il(m,y),j&4)if(m=y.stateNode,g===null)try{m.componentDidMount()}catch(Y){Dn(y,y.return,Y)}else{var L=zd(y.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(L,g,m.__reactInternalSnapshotBeforeUpdate)}catch(Y){Dn(y,y.return,Y)}}j&64&&l5(y),j&512&&zh(y,y.return);break;case 3:if(il(m,y),j&64&&(m=y.updateQueue,m!==null)){if(g=null,y.child!==null)switch(y.child.tag){case 27:case 5:g=y.child.stateNode;break;case 1:g=y.child.stateNode}try{ZO(m,g)}catch(Y){Dn(y,y.return,Y)}}break;case 27:g===null&&j&4&&m5(y);case 26:case 5:il(m,y),g===null&&j&4&&d5(y),j&512&&zh(y,y.return);break;case 12:il(m,y);break;case 31:il(m,y),j&4&&x5(m,y);break;case 13:il(m,y),j&4&&y5(m,y),j&64&&(m=y.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(y=jte.bind(null,y),Hte(m,y))));break;case 22:if(j=y.memoizedState!==null||sl,!j){g=g!==null&&g.memoizedState!==null||Ua,L=sl;var O=Ua;sl=j,(Ua=g)&&!O?ol(m,y,(y.subtreeFlags&8772)!==0):il(m,y),sl=L,Ua=O}break;case 30:break;default:il(m,y)}}function g5(m){var g=m.alternate;g!==null&&(m.alternate=null,g5(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&I(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var ra=null,Js=!1;function rl(m,g,y){for(y=y.child;y!==null;)p5(m,g,y),y=y.sibling}function p5(m,g,y){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(nt,y)}catch{}switch(y.tag){case 26:Ua||no(y,g),rl(m,g,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Ua||no(y,g);var j=ra,L=Js;Ac(y.type)&&(ra=y.stateNode,Js=!1),rl(m,g,y),Qh(y.stateNode),ra=j,Js=L;break;case 5:Ua||no(y,g);case 6:if(j=ra,L=Js,ra=null,rl(m,g,y),ra=j,Js=L,ra!==null)if(Js)try{(ra.nodeType===9?ra.body:ra.nodeName==="HTML"?ra.ownerDocument.body:ra).removeChild(y.stateNode)}catch(O){Dn(y,g,O)}else try{ra.removeChild(y.stateNode)}catch(O){Dn(y,g,O)}break;case 18:ra!==null&&(Js?(m=ra,lM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,y.stateNode),Om(m)):lM(ra,y.stateNode));break;case 4:j=ra,L=Js,ra=y.stateNode.containerInfo,Js=!0,rl(m,g,y),ra=j,Js=L;break;case 0:case 11:case 14:case 15:vc(2,y,g),Ua||vc(4,y,g),rl(m,g,y);break;case 1:Ua||(no(y,g),j=y.stateNode,typeof j.componentWillUnmount=="function"&&c5(y,g,j)),rl(m,g,y);break;case 21:rl(m,g,y);break;case 22:Ua=(j=Ua)||y.memoizedState!==null,rl(m,g,y),Ua=j;break;default:rl(m,g,y)}}function x5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{Om(m)}catch(y){Dn(g,g.return,y)}}}function y5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Om(m)}catch(y){Dn(g,g.return,y)}}function gte(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new f5),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new f5),g;default:throw Error(s(435,m.tag))}}function K0(m,g){var y=gte(m);g.forEach(function(j){if(!y.has(j)){y.add(j);var L=Cte.bind(null,m,j);j.then(L,L)}})}function er(m,g){var y=g.deletions;if(y!==null)for(var j=0;j<y.length;j++){var L=y[j],O=m,Y=g,we=Y;e:for(;we!==null;){switch(we.tag){case 27:if(Ac(we.type)){ra=we.stateNode,Js=!1;break e}break;case 5:ra=we.stateNode,Js=!1;break e;case 3:case 4:ra=we.stateNode.containerInfo,Js=!0;break e}we=we.return}if(ra===null)throw Error(s(160));p5(O,Y,L),ra=null,Js=!1,O=L.alternate,O!==null&&(O.return=null),L.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)b5(g,m),g=g.sibling}var Li=null;function b5(m,g){var y=m.alternate,j=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:er(g,m),tr(m),j&4&&(vc(3,m,m.return),Rh(3,m),vc(5,m,m.return));break;case 1:er(g,m),tr(m),j&512&&(Ua||y===null||no(y,y.return)),j&64&&sl&&(m=m.updateQueue,m!==null&&(j=m.callbacks,j!==null&&(y=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=y===null?j:y.concat(j))));break;case 26:var L=Li;if(er(g,m),tr(m),j&512&&(Ua||y===null||no(y,y.return)),j&4){var O=y!==null?y.memoizedState:null;if(j=m.memoizedState,y===null)if(j===null)if(m.stateNode===null){e:{j=m.type,y=m.memoizedProps,L=L.ownerDocument||L;t:switch(j){case"title":O=L.getElementsByTagName("title")[0],(!O||O[U]||O[re]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=L.createElement(j),L.head.insertBefore(O,L.querySelector("head > title"))),js(O,j,y),O[re]=m,Ye(O),j=O;break e;case"link":var Y=bM("link","href",L).get(j+(y.href||""));if(Y){for(var we=0;we<Y.length;we++)if(O=Y[we],O.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&O.getAttribute("rel")===(y.rel==null?null:y.rel)&&O.getAttribute("title")===(y.title==null?null:y.title)&&O.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Y.splice(we,1);break t}}O=L.createElement(j),js(O,j,y),L.head.appendChild(O);break;case"meta":if(Y=bM("meta","content",L).get(j+(y.content||""))){for(we=0;we<Y.length;we++)if(O=Y[we],O.getAttribute("content")===(y.content==null?null:""+y.content)&&O.getAttribute("name")===(y.name==null?null:y.name)&&O.getAttribute("property")===(y.property==null?null:y.property)&&O.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&O.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Y.splice(we,1);break t}}O=L.createElement(j),js(O,j,y),L.head.appendChild(O);break;default:throw Error(s(468,j))}O[re]=m,Ye(O),j=O}m.stateNode=j}else vM(L,m.type,m.stateNode);else m.stateNode=yM(L,j,m.memoizedProps);else O!==j?(O===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):O.count--,j===null?vM(L,m.type,m.stateNode):yM(L,j,m.memoizedProps)):j===null&&m.stateNode!==null&&_C(m,m.memoizedProps,y.memoizedProps)}break;case 27:er(g,m),tr(m),j&512&&(Ua||y===null||no(y,y.return)),y!==null&&j&4&&_C(m,m.memoizedProps,y.memoizedProps);break;case 5:if(er(g,m),tr(m),j&512&&(Ua||y===null||no(y,y.return)),m.flags&32){L=m.stateNode;try{am(L,"")}catch(Ot){Dn(m,m.return,Ot)}}j&4&&m.stateNode!=null&&(L=m.memoizedProps,_C(m,L,y!==null?y.memoizedProps:L)),j&1024&&(EC=!0);break;case 6:if(er(g,m),tr(m),j&4){if(m.stateNode===null)throw Error(s(162));j=m.memoizedProps,y=m.stateNode;try{y.nodeValue=j}catch(Ot){Dn(m,m.return,Ot)}}break;case 3:if(my=null,L=Li,Li=dy(g.containerInfo),er(g,m),Li=L,tr(m),j&4&&y!==null&&y.memoizedState.isDehydrated)try{Om(g.containerInfo)}catch(Ot){Dn(m,m.return,Ot)}EC&&(EC=!1,v5(m));break;case 4:j=Li,Li=dy(m.stateNode.containerInfo),er(g,m),tr(m),Li=j;break;case 12:er(g,m),tr(m);break;case 31:er(g,m),tr(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,K0(m,j)));break;case 13:er(g,m),tr(m),m.child.flags&8192&&m.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Z0=Z()),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,K0(m,j)));break;case 22:L=m.memoizedState!==null;var ze=y!==null&&y.memoizedState!==null,st=sl,ut=Ua;if(sl=st||L,Ua=ut||ze,er(g,m),Ua=ut,sl=st,tr(m),j&8192)e:for(g=m.stateNode,g._visibility=L?g._visibility&-2:g._visibility|1,L&&(y===null||ze||sl||Ua||Ud(m)),y=null,g=m;;){if(g.tag===5||g.tag===26){if(y===null){ze=y=g;try{if(O=ze.stateNode,L)Y=O.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{we=ze.stateNode;var xt=ze.memoizedProps.style,it=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;we.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(Ot){Dn(ze,ze.return,Ot)}}}else if(g.tag===6){if(y===null){ze=g;try{ze.stateNode.nodeValue=L?"":ze.memoizedProps}catch(Ot){Dn(ze,ze.return,Ot)}}}else if(g.tag===18){if(y===null){ze=g;try{var dt=ze.stateNode;L?cM(dt,!0):cM(ze.stateNode,!1)}catch(Ot){Dn(ze,ze.return,Ot)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;y===g&&(y=null),g=g.return}y===g&&(y=null),g.sibling.return=g.return,g=g.sibling}j&4&&(j=m.updateQueue,j!==null&&(y=j.retryQueue,y!==null&&(j.retryQueue=null,K0(m,y))));break;case 19:er(g,m),tr(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,K0(m,j)));break;case 30:break;case 21:break;default:er(g,m),tr(m)}}function tr(m){var g=m.flags;if(g&2){try{for(var y,j=m.return;j!==null;){if(u5(j)){y=j;break}j=j.return}if(y==null)throw Error(s(160));switch(y.tag){case 27:var L=y.stateNode,O=AC(m);Y0(m,O,L);break;case 5:var Y=y.stateNode;y.flags&32&&(am(Y,""),y.flags&=-33);var we=AC(m);Y0(m,we,Y);break;case 3:case 4:var ze=y.stateNode.containerInfo,st=AC(m);TC(m,st,ze);break;default:throw Error(s(161))}}catch(ut){Dn(m,m.return,ut)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function v5(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;v5(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function il(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)h5(m,g.alternate,g),g=g.sibling}function Ud(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:vc(4,g,g.return),Ud(g);break;case 1:no(g,g.return);var y=g.stateNode;typeof y.componentWillUnmount=="function"&&c5(g,g.return,y),Ud(g);break;case 27:Qh(g.stateNode);case 26:case 5:no(g,g.return),Ud(g);break;case 22:g.memoizedState===null&&Ud(g);break;case 30:Ud(g);break;default:Ud(g)}m=m.sibling}}function ol(m,g,y){for(y=y&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var j=g.alternate,L=m,O=g,Y=O.flags;switch(O.tag){case 0:case 11:case 15:ol(L,O,y),Rh(4,O);break;case 1:if(ol(L,O,y),j=O,L=j.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(st){Dn(j,j.return,st)}if(j=O,L=j.updateQueue,L!==null){var we=j.stateNode;try{var ze=L.shared.hiddenCallbacks;if(ze!==null)for(L.shared.hiddenCallbacks=null,L=0;L<ze.length;L++)XO(ze[L],we)}catch(st){Dn(j,j.return,st)}}y&&Y&64&&l5(O),zh(O,O.return);break;case 27:m5(O);case 26:case 5:ol(L,O,y),y&&j===null&&Y&4&&d5(O),zh(O,O.return);break;case 12:ol(L,O,y);break;case 31:ol(L,O,y),y&&Y&4&&x5(L,O);break;case 13:ol(L,O,y),y&&Y&4&&y5(L,O);break;case 22:O.memoizedState===null&&ol(L,O,y),zh(O,O.return);break;case 30:break;default:ol(L,O,y)}g=g.sibling}}function kC(m,g){var y=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==y&&(m!=null&&m.refCount++,y!=null&&Sh(y))}function LC(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Sh(m))}function Pi(m,g,y,j){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)w5(m,g,y,j),g=g.sibling}function w5(m,g,y,j){var L=g.flags;switch(g.tag){case 0:case 11:case 15:Pi(m,g,y,j),L&2048&&Rh(9,g);break;case 1:Pi(m,g,y,j);break;case 3:Pi(m,g,y,j),L&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Sh(m)));break;case 12:if(L&2048){Pi(m,g,y,j),m=g.stateNode;try{var O=g.memoizedProps,Y=O.id,we=O.onPostCommit;typeof we=="function"&&we(Y,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(ze){Dn(g,g.return,ze)}}else Pi(m,g,y,j);break;case 31:Pi(m,g,y,j);break;case 13:Pi(m,g,y,j);break;case 23:break;case 22:O=g.stateNode,Y=g.alternate,g.memoizedState!==null?O._visibility&2?Pi(m,g,y,j):Uh(m,g):O._visibility&2?Pi(m,g,y,j):(O._visibility|=2,jm(m,g,y,j,(g.subtreeFlags&10256)!==0||!1)),L&2048&&kC(Y,g);break;case 24:Pi(m,g,y,j),L&2048&&LC(g.alternate,g);break;default:Pi(m,g,y,j)}}function jm(m,g,y,j,L){for(L=L&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var O=m,Y=g,we=y,ze=j,st=Y.flags;switch(Y.tag){case 0:case 11:case 15:jm(O,Y,we,ze,L),Rh(8,Y);break;case 23:break;case 22:var ut=Y.stateNode;Y.memoizedState!==null?ut._visibility&2?jm(O,Y,we,ze,L):Uh(O,Y):(ut._visibility|=2,jm(O,Y,we,ze,L)),L&&st&2048&&kC(Y.alternate,Y);break;case 24:jm(O,Y,we,ze,L),L&&st&2048&&LC(Y.alternate,Y);break;default:jm(O,Y,we,ze,L)}g=g.sibling}}function Uh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var y=m,j=g,L=j.flags;switch(j.tag){case 22:Uh(y,j),L&2048&&kC(j.alternate,j);break;case 24:Uh(y,j),L&2048&&LC(j.alternate,j);break;default:Uh(y,j)}g=g.sibling}}var Fh=8192;function Cm(m,g,y){if(m.subtreeFlags&Fh)for(m=m.child;m!==null;)N5(m,g,y),m=m.sibling}function N5(m,g,y){switch(m.tag){case 26:Cm(m,g,y),m.flags&Fh&&m.memoizedState!==null&&tne(y,Li,m.memoizedState,m.memoizedProps);break;case 5:Cm(m,g,y);break;case 3:case 4:var j=Li;Li=dy(m.stateNode.containerInfo),Cm(m,g,y),Li=j;break;case 22:m.memoizedState===null&&(j=m.alternate,j!==null&&j.memoizedState!==null?(j=Fh,Fh=16777216,Cm(m,g,y),Fh=j):Cm(m,g,y));break;default:Cm(m,g,y)}}function j5(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Bh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var j=g[y];ds=j,S5(j,m)}j5(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)C5(m),m=m.sibling}function C5(m){switch(m.tag){case 0:case 11:case 15:Bh(m),m.flags&2048&&vc(9,m,m.return);break;case 3:Bh(m);break;case 12:Bh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,X0(m)):Bh(m);break;default:Bh(m)}}function X0(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var j=g[y];ds=j,S5(j,m)}j5(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:vc(8,g,g.return),X0(g);break;case 22:y=g.stateNode,y._visibility&2&&(y._visibility&=-3,X0(g));break;default:X0(g)}m=m.sibling}}function S5(m,g){for(;ds!==null;){var y=ds;switch(y.tag){case 0:case 11:case 15:vc(8,y,g);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var j=y.memoizedState.cachePool.pool;j!=null&&j.refCount++}break;case 24:Sh(y.memoizedState.cache)}if(j=y.child,j!==null)j.return=y,ds=j;else e:for(y=m;ds!==null;){j=ds;var L=j.sibling,O=j.return;if(g5(j),j===y){ds=null;break e}if(L!==null){L.return=O,ds=L;break e}ds=O}}}var pte={getCacheForType:function(m){var g=ws($a),y=g.data.get(m);return y===void 0&&(y=m(),g.data.set(m,y)),y},cacheSignal:function(){return ws($a).controller.signal}},xte=typeof WeakMap=="function"?WeakMap:Map,An=0,Gn=null,mn=null,gn=0,Pn=0,Ar=null,wc=!1,Sm=!1,PC=!1,ll=0,va=0,Nc=0,Fd=0,DC=0,Tr=0,_m=0,Hh=null,nr=null,OC=!1,Z0=0,_5=0,J0=1/0,ey=null,jc=null,Ya=0,Cc=null,Am=null,cl=0,MC=0,IC=null,A5=null,Gh=0,$C=null;function Er(){return(An&2)!==0&&gn!==0?gn&-gn:V.T!==null?HC():Ht()}function T5(){if(Tr===0)if((gn&536870912)===0||bn){var m=J;J<<=1,(J&3932160)===0&&(J=262144),Tr=m}else Tr=536870912;return m=Sr.current,m!==null&&(m.flags|=32),Tr}function ar(m,g,y){(m===Gn&&(Pn===2||Pn===9)||m.cancelPendingCommit!==null)&&(Tm(m,0),Sc(m,gn,Tr,!1)),ge(m,y),((An&2)===0||m!==Gn)&&(m===Gn&&((An&2)===0&&(Fd|=y),va===4&&Sc(m,gn,Tr,!1)),ao(m))}function E5(m,g,y){if((An&6)!==0)throw Error(s(327));var j=!y&&(g&127)===0&&(g&m.expiredLanes)===0||ie(m,g),L=j?vte(m,g):zC(m,g,!0),O=j;do{if(L===0){Sm&&!j&&Sc(m,g,0,!1);break}else{if(y=m.current.alternate,O&&!yte(y)){L=zC(m,g,!1),O=!1;continue}if(L===2){if(O=g,m.errorRecoveryDisabledLanes&O)var Y=0;else Y=m.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){g=Y;e:{var we=m;L=Hh;var ze=we.current.memoizedState.isDehydrated;if(ze&&(Tm(we,Y).flags|=256),Y=zC(we,Y,!1),Y!==2){if(PC&&!ze){we.errorRecoveryDisabledLanes|=O,Fd|=O,L=4;break e}O=nr,nr=L,O!==null&&(nr===null?nr=O:nr.push.apply(nr,O))}L=Y}if(O=!1,L!==2)continue}}if(L===1){Tm(m,0),Sc(m,g,0,!0);break}e:{switch(j=m,O=L,O){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:Sc(j,g,Tr,!wc);break e;case 2:nr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(L=Z0+300-Z(),10<L)){if(Sc(j,g,Tr,!wc),B(j,0,!0)!==0)break e;cl=g,j.timeoutHandle=iM(k5.bind(null,j,y,nr,ey,OC,g,Tr,Fd,_m,wc,O,"Throttled",-0,0),L);break e}k5(j,y,nr,ey,OC,g,Tr,Fd,_m,wc,O,null,-0,0)}}break}while(!0);ao(m)}function k5(m,g,y,j,L,O,Y,we,ze,st,ut,xt,it,dt){if(m.timeoutHandle=-1,xt=g.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qo},N5(g,O,xt);var Ot=(O&62914560)===O?Z0-Z():(O&4194048)===O?_5-Z():0;if(Ot=nne(xt,Ot),Ot!==null){cl=O,m.cancelPendingCommit=Ot(R5.bind(null,m,g,O,y,j,L,Y,we,ze,ut,xt,null,it,dt)),Sc(m,O,Y,!st);return}}R5(m,g,O,y,j,L,Y,we,ze)}function yte(m){for(var g=m;;){var y=g.tag;if((y===0||y===11||y===15)&&g.flags&16384&&(y=g.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var j=0;j<y.length;j++){var L=y[j],O=L.getSnapshot;L=L.value;try{if(!jr(O(),L))return!1}catch{return!1}}if(y=g.child,g.subtreeFlags&16384&&y!==null)y.return=g,g=y;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Sc(m,g,y,j){g&=~DC,g&=~Fd,m.suspendedLanes|=g,m.pingedLanes&=~g,j&&(m.warmLanes|=g),j=m.expirationTimes;for(var L=g;0<L;){var O=31-ct(L),Y=1<<O;j[O]=-1,L&=~Y}y!==0&&Fe(m,y,g)}function ty(){return(An&6)===0?(Wh(0),!1):!0}function RC(){if(mn!==null){if(Pn===0)var m=mn.return;else m=mn,Zo=Pd=null,eC(m),ym=null,Ah=0,m=mn;for(;m!==null;)o5(m.alternate,m),m=m.return;mn=null}}function Tm(m,g){var y=m.timeoutHandle;y!==-1&&(m.timeoutHandle=-1,Rte(y)),y=m.cancelPendingCommit,y!==null&&(m.cancelPendingCommit=null,y()),cl=0,RC(),Gn=m,mn=y=Ko(m.current,null),gn=g,Pn=0,Ar=null,wc=!1,Sm=ie(m,g),PC=!1,_m=Tr=DC=Fd=Nc=va=0,nr=Hh=null,OC=!1,(g&8)!==0&&(g|=g&32);var j=m.entangledLanes;if(j!==0)for(m=m.entanglements,j&=g;0<j;){var L=31-ct(j),O=1<<L;g|=m[L],j&=~O}return ll=g,N0(),y}function L5(m,g){nn=null,V.H=Mh,g===xm||g===k0?(g=VO(),Pn=3):g===B1?(g=VO(),Pn=4):Pn=g===pC?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Ar=g,mn===null&&(va=1,G0(m,Yr(g,m.current)))}function P5(){var m=Sr.current;return m===null?!0:(gn&4194048)===gn?Jr===null:(gn&62914560)===gn||(gn&536870912)!==0?m===Jr:!1}function D5(){var m=V.H;return V.H=Mh,m===null?Mh:m}function O5(){var m=V.A;return V.A=pte,m}function ny(){va=4,wc||(gn&4194048)!==gn&&Sr.current!==null||(Sm=!0),(Nc&134217727)===0&&(Fd&134217727)===0||Gn===null||Sc(Gn,gn,Tr,!1)}function zC(m,g,y){var j=An;An|=2;var L=D5(),O=O5();(Gn!==m||gn!==g)&&(ey=null,Tm(m,g)),g=!1;var Y=va;e:do try{if(Pn!==0&&mn!==null){var we=mn,ze=Ar;switch(Pn){case 8:RC(),Y=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(g=!0);var st=Pn;if(Pn=0,Ar=null,Em(m,we,ze,st),y&&Sm){Y=0;break e}break;default:st=Pn,Pn=0,Ar=null,Em(m,we,ze,st)}}bte(),Y=va;break}catch(ut){L5(m,ut)}while(!0);return g&&m.shellSuspendCounter++,Zo=Pd=null,An=j,V.H=L,V.A=O,mn===null&&(Gn=null,gn=0,N0()),Y}function bte(){for(;mn!==null;)M5(mn)}function vte(m,g){var y=An;An|=2;var j=D5(),L=O5();Gn!==m||gn!==g?(ey=null,J0=Z()+500,Tm(m,g)):Sm=ie(m,g);e:do try{if(Pn!==0&&mn!==null){g=mn;var O=Ar;t:switch(Pn){case 1:Pn=0,Ar=null,Em(m,g,O,1);break;case 2:case 9:if(WO(O)){Pn=0,Ar=null,I5(g);break}g=function(){Pn!==2&&Pn!==9||Gn!==m||(Pn=7),ao(m)},O.then(g,g);break e;case 3:Pn=7;break e;case 4:Pn=5;break e;case 7:WO(O)?(Pn=0,Ar=null,I5(g)):(Pn=0,Ar=null,Em(m,g,O,7));break;case 5:var Y=null;switch(mn.tag){case 26:Y=mn.memoizedState;case 5:case 27:var we=mn;if(Y?wM(Y):we.stateNode.complete){Pn=0,Ar=null;var ze=we.sibling;if(ze!==null)mn=ze;else{var st=we.return;st!==null?(mn=st,ay(st)):mn=null}break t}}Pn=0,Ar=null,Em(m,g,O,5);break;case 6:Pn=0,Ar=null,Em(m,g,O,6);break;case 8:RC(),va=6;break e;default:throw Error(s(462))}}wte();break}catch(ut){L5(m,ut)}while(!0);return Zo=Pd=null,V.H=j,V.A=L,An=y,mn!==null?0:(Gn=null,gn=0,N0(),va)}function wte(){for(;mn!==null&&!be();)M5(mn)}function M5(m){var g=r5(m.alternate,m,ll);m.memoizedProps=m.pendingProps,g===null?ay(m):mn=g}function I5(m){var g=m,y=g.alternate;switch(g.tag){case 15:case 0:g=J3(y,g,g.pendingProps,g.type,void 0,gn);break;case 11:g=J3(y,g,g.pendingProps,g.type.render,g.ref,gn);break;case 5:eC(g);default:o5(y,g),g=mn=OO(g,ll),g=r5(y,g,ll)}m.memoizedProps=m.pendingProps,g===null?ay(m):mn=g}function Em(m,g,y,j){Zo=Pd=null,eC(g),ym=null,Ah=0;var L=g.return;try{if(cte(m,L,g,y,gn)){va=1,G0(m,Yr(y,m.current)),mn=null;return}}catch(O){if(L!==null)throw mn=L,O;va=1,G0(m,Yr(y,m.current)),mn=null;return}g.flags&32768?(bn||j===1?m=!0:Sm||(gn&536870912)!==0?m=!1:(wc=m=!0,(j===2||j===9||j===3||j===6)&&(j=Sr.current,j!==null&&j.tag===13&&(j.flags|=16384))),$5(g,m)):ay(g)}function ay(m){var g=m;do{if((g.flags&32768)!==0){$5(g,wc);return}m=g.return;var y=mte(g.alternate,g,ll);if(y!==null){mn=y;return}if(g=g.sibling,g!==null){mn=g;return}mn=g=m}while(g!==null);va===0&&(va=5)}function $5(m,g){do{var y=fte(m.alternate,m);if(y!==null){y.flags&=32767,mn=y;return}if(y=m.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!g&&(m=m.sibling,m!==null)){mn=m;return}mn=m=y}while(m!==null);va=6,mn=null}function R5(m,g,y,j,L,O,Y,we,ze){m.cancelPendingCommit=null;do sy();while(Ya!==0);if((An&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if(O=g.lanes|g.childLanes,O|=A1,fe(m,y,O,Y,we,ze),m===Gn&&(mn=Gn=null,gn=0),Am=g,Cc=m,cl=y,MC=O,IC=L,A5=j,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,Ste(Ie,function(){return H5(),null})):(m.callbackNode=null,m.callbackPriority=0),j=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||j){j=V.T,V.T=null,L=X.p,X.p=2,Y=An,An|=4;try{hte(m,g,y)}finally{An=Y,X.p=L,V.T=j}}Ya=1,z5(),U5(),F5()}}function z5(){if(Ya===1){Ya=0;var m=Cc,g=Am,y=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||y){y=V.T,V.T=null;var j=X.p;X.p=2;var L=An;An|=4;try{b5(g,m);var O=XC,Y=SO(m.containerInfo),we=O.focusedElem,ze=O.selectionRange;if(Y!==we&&we&&we.ownerDocument&&CO(we.ownerDocument.documentElement,we)){if(ze!==null&&N1(we)){var st=ze.start,ut=ze.end;if(ut===void 0&&(ut=st),"selectionStart"in we)we.selectionStart=st,we.selectionEnd=Math.min(ut,we.value.length);else{var xt=we.ownerDocument||document,it=xt&&xt.defaultView||window;if(it.getSelection){var dt=it.getSelection(),Ot=we.textContent.length,Vt=Math.min(ze.start,Ot),Fn=ze.end===void 0?Vt:Math.min(ze.end,Ot);!dt.extend&&Vt>Fn&&(Y=Fn,Fn=Vt,Vt=Y);var Ke=jO(we,Vt),He=jO(we,Fn);if(Ke&&He&&(dt.rangeCount!==1||dt.anchorNode!==Ke.node||dt.anchorOffset!==Ke.offset||dt.focusNode!==He.node||dt.focusOffset!==He.offset)){var at=xt.createRange();at.setStart(Ke.node,Ke.offset),dt.removeAllRanges(),Vt>Fn?(dt.addRange(at),dt.extend(He.node,He.offset)):(at.setEnd(He.node,He.offset),dt.addRange(at))}}}}for(xt=[],dt=we;dt=dt.parentNode;)dt.nodeType===1&&xt.push({element:dt,left:dt.scrollLeft,top:dt.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<xt.length;we++){var ft=xt[we];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}py=!!KC,XC=KC=null}finally{An=L,X.p=j,V.T=y}}m.current=g,Ya=2}}function U5(){if(Ya===2){Ya=0;var m=Cc,g=Am,y=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||y){y=V.T,V.T=null;var j=X.p;X.p=2;var L=An;An|=4;try{h5(m,g.alternate,g)}finally{An=L,X.p=j,V.T=y}}Ya=3}}function F5(){if(Ya===4||Ya===3){Ya=0,le();var m=Cc,g=Am,y=cl,j=A5;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ya=5:(Ya=0,Am=Cc=null,B5(m,m.pendingLanes));var L=m.pendingLanes;if(L===0&&(jc=null),St(y),g=g.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(nt,g,void 0,(g.current.flags&128)===128)}catch{}if(j!==null){g=V.T,L=X.p,X.p=2,V.T=null;try{for(var O=m.onRecoverableError,Y=0;Y<j.length;Y++){var we=j[Y];O(we.value,{componentStack:we.stack})}}finally{V.T=g,X.p=L}}(cl&3)!==0&&sy(),ao(m),L=m.pendingLanes,(y&261930)!==0&&(L&42)!==0?m===$C?Gh++:(Gh=0,$C=m):Gh=0,Wh(0)}}function B5(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,Sh(g)))}function sy(){return z5(),U5(),F5(),H5()}function H5(){if(Ya!==5)return!1;var m=Cc,g=MC;MC=0;var y=St(cl),j=V.T,L=X.p;try{X.p=32>y?32:y,V.T=null,y=IC,IC=null;var O=Cc,Y=cl;if(Ya=0,Am=Cc=null,cl=0,(An&6)!==0)throw Error(s(331));var we=An;if(An|=4,C5(O.current),w5(O,O.current,Y,y),An=we,Wh(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(nt,O)}catch{}return!0}finally{X.p=L,V.T=j,B5(m,g)}}function G5(m,g,y){g=Yr(y,g),g=gC(m.stateNode,g,2),m=xc(m,g,2),m!==null&&(ge(m,2),ao(m))}function Dn(m,g,y){if(m.tag===3)G5(m,m,y);else for(;g!==null;){if(g.tag===3){G5(g,m,y);break}else if(g.tag===1){var j=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(jc===null||!jc.has(j))){m=Yr(y,m),y=W3(2),j=xc(g,y,2),j!==null&&(q3(y,j,g,m),ge(j,2),ao(j));break}}g=g.return}}function UC(m,g,y){var j=m.pingCache;if(j===null){j=m.pingCache=new xte;var L=new Set;j.set(g,L)}else L=j.get(g),L===void 0&&(L=new Set,j.set(g,L));L.has(y)||(PC=!0,L.add(y),m=Nte.bind(null,m,g,y),g.then(m,m))}function Nte(m,g,y){var j=m.pingCache;j!==null&&j.delete(g),m.pingedLanes|=m.suspendedLanes&y,m.warmLanes&=~y,Gn===m&&(gn&y)===y&&(va===4||va===3&&(gn&62914560)===gn&&300>Z()-Z0?(An&2)===0&&Tm(m,0):DC|=y,_m===gn&&(_m=0)),ao(m)}function W5(m,g){g===0&&(g=se()),m=Ed(m,g),m!==null&&(ge(m,g),ao(m))}function jte(m){var g=m.memoizedState,y=0;g!==null&&(y=g.retryLane),W5(m,y)}function Cte(m,g){var y=0;switch(m.tag){case 31:case 13:var j=m.stateNode,L=m.memoizedState;L!==null&&(y=L.retryLane);break;case 19:j=m.stateNode;break;case 22:j=m.stateNode._retryCache;break;default:throw Error(s(314))}j!==null&&j.delete(g),W5(m,y)}function Ste(m,g){return Je(m,g)}var ry=null,km=null,FC=!1,iy=!1,BC=!1,_c=0;function ao(m){m!==km&&m.next===null&&(km===null?ry=km=m:km=km.next=m),iy=!0,FC||(FC=!0,Ate())}function Wh(m,g){if(!BC&&iy){BC=!0;do for(var y=!1,j=ry;j!==null;){if(m!==0){var L=j.pendingLanes;if(L===0)var O=0;else{var Y=j.suspendedLanes,we=j.pingedLanes;O=(1<<31-ct(42|m)+1)-1,O&=L&~(Y&~we),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(y=!0,Y5(j,O))}else O=gn,O=B(j,j===Gn?O:0,j.cancelPendingCommit!==null||j.timeoutHandle!==-1),(O&3)===0||ie(j,O)||(y=!0,Y5(j,O));j=j.next}while(y);BC=!1}}function _te(){q5()}function q5(){iy=FC=!1;var m=0;_c!==0&&$te()&&(m=_c);for(var g=Z(),y=null,j=ry;j!==null;){var L=j.next,O=V5(j,g);O===0?(j.next=null,y===null?ry=L:y.next=L,L===null&&(km=y)):(y=j,(m!==0||(O&3)!==0)&&(iy=!0)),j=L}Ya!==0&&Ya!==5||Wh(m),_c!==0&&(_c=0)}function V5(m,g){for(var y=m.suspendedLanes,j=m.pingedLanes,L=m.expirationTimes,O=m.pendingLanes&-62914561;0<O;){var Y=31-ct(O),we=1<<Y,ze=L[Y];ze===-1?((we&y)===0||(we&j)!==0)&&(L[Y]=ue(we,g)):ze<=g&&(m.expiredLanes|=we),O&=~we}if(g=Gn,y=gn,y=B(m,m===g?y:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j=m.callbackNode,y===0||m===g&&(Pn===2||Pn===9)||m.cancelPendingCommit!==null)return j!==null&&j!==null&&H(j),m.callbackNode=null,m.callbackPriority=0;if((y&3)===0||ie(m,y)){if(g=y&-y,g===m.callbackPriority)return g;switch(j!==null&&H(j),St(y)){case 2:case 8:y=Ue;break;case 32:y=Ie;break;case 268435456:y=gt;break;default:y=Ie}return j=Q5.bind(null,m),y=Je(y,j),m.callbackPriority=g,m.callbackNode=y,g}return j!==null&&j!==null&&H(j),m.callbackPriority=2,m.callbackNode=null,2}function Q5(m,g){if(Ya!==0&&Ya!==5)return m.callbackNode=null,m.callbackPriority=0,null;var y=m.callbackNode;if(sy()&&m.callbackNode!==y)return null;var j=gn;return j=B(m,m===Gn?j:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j===0?null:(E5(m,j,g),V5(m,Z()),m.callbackNode!=null&&m.callbackNode===y?Q5.bind(null,m):null)}function Y5(m,g){if(sy())return null;E5(m,g,!0)}function Ate(){zte(function(){(An&6)!==0?Je(te,_te):q5()})}function HC(){if(_c===0){var m=gm;m===0&&(m=ce,ce<<=1,(ce&261888)===0&&(ce=256)),_c=m}return _c}function K5(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:h0(""+m)}function X5(m,g){var y=g.ownerDocument.createElement("input");return y.name=g.name,y.value=g.value,m.id&&y.setAttribute("form",m.id),g.parentNode.insertBefore(y,g),m=new FormData(m),y.parentNode.removeChild(y),m}function Tte(m,g,y,j,L){if(g==="submit"&&y&&y.stateNode===L){var O=K5((L[ot]||null).action),Y=j.submitter;Y&&(g=(g=Y[ot]||null)?K5(g.formAction):Y.getAttribute("formAction"),g!==null&&(O=g,Y=null));var we=new y0("action","action",null,j,L);m.push({event:we,listeners:[{instance:null,listener:function(){if(j.defaultPrevented){if(_c!==0){var ze=Y?X5(L,Y):new FormData(L);cC(y,{pending:!0,data:ze,method:L.method,action:O},null,ze)}}else typeof O=="function"&&(we.preventDefault(),ze=Y?X5(L,Y):new FormData(L),cC(y,{pending:!0,data:ze,method:L.method,action:O},O,ze))},currentTarget:L}]})}}for(var GC=0;GC<_1.length;GC++){var WC=_1[GC],Ete=WC.toLowerCase(),kte=WC[0].toUpperCase()+WC.slice(1);ki(Ete,"on"+kte)}ki(TO,"onAnimationEnd"),ki(EO,"onAnimationIteration"),ki(kO,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(qee,"onTransitionRun"),ki(Vee,"onTransitionStart"),ki(Qee,"onTransitionCancel"),ki(LO,"onTransitionEnd"),sa("onMouseEnter",["mouseout","mouseover"]),sa("onMouseLeave",["mouseout","mouseover"]),sa("onPointerEnter",["pointerout","pointerover"]),sa("onPointerLeave",["pointerout","pointerover"]),Kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qh));function Z5(m,g){g=(g&4)!==0;for(var y=0;y<m.length;y++){var j=m[y],L=j.event;j=j.listeners;e:{var O=void 0;if(g)for(var Y=j.length-1;0<=Y;Y--){var we=j[Y],ze=we.instance,st=we.currentTarget;if(we=we.listener,ze!==O&&L.isPropagationStopped())break e;O=we,L.currentTarget=st;try{O(L)}catch(ut){w0(ut)}L.currentTarget=null,O=ze}else for(Y=0;Y<j.length;Y++){if(we=j[Y],ze=we.instance,st=we.currentTarget,we=we.listener,ze!==O&&L.isPropagationStopped())break e;O=we,L.currentTarget=st;try{O(L)}catch(ut){w0(ut)}L.currentTarget=null,O=ze}}}}function fn(m,g){var y=g[kt];y===void 0&&(y=g[kt]=new Set);var j=m+"__bubble";y.has(j)||(J5(g,m,2,!1),y.add(j))}function qC(m,g,y){var j=0;g&&(j|=4),J5(y,m,j,g)}var oy="_reactListening"+Math.random().toString(36).slice(2);function VC(m){if(!m[oy]){m[oy]=!0,At.forEach(function(y){y!=="selectionchange"&&(Lte.has(y)||qC(y,!1,m),qC(y,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[oy]||(g[oy]=!0,qC("selectionchange",!1,g))}}function J5(m,g,y,j){switch(TM(g)){case 2:var L=rne;break;case 8:L=ine;break;default:L=lS}y=L.bind(null,g,y,m),L=void 0,!f1||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(L=!0),j?L!==void 0?m.addEventListener(g,y,{capture:!0,passive:L}):m.addEventListener(g,y,!0):L!==void 0?m.addEventListener(g,y,{passive:L}):m.addEventListener(g,y,!1)}function QC(m,g,y,j,L){var O=j;if((g&1)===0&&(g&2)===0&&j!==null)e:for(;;){if(j===null)return;var Y=j.tag;if(Y===3||Y===4){var we=j.stateNode.containerInfo;if(we===L)break;if(Y===4)for(Y=j.return;Y!==null;){var ze=Y.tag;if((ze===3||ze===4)&&Y.stateNode.containerInfo===L)return;Y=Y.return}for(;we!==null;){if(Y=me(we),Y===null)return;if(ze=Y.tag,ze===5||ze===6||ze===26||ze===27){j=O=Y;continue e}we=we.parentNode}}j=j.return}sO(function(){var st=O,ut=u1(y),xt=[];e:{var it=PO.get(m);if(it!==void 0){var dt=y0,Ot=m;switch(m){case"keypress":if(p0(y)===0)break e;case"keydown":case"keyup":dt=Cee;break;case"focusin":Ot="focus",dt=x1;break;case"focusout":Ot="blur",dt=x1;break;case"beforeblur":case"afterblur":dt=x1;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=oO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=mee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Aee;break;case TO:case EO:case kO:dt=gee;break;case LO:dt=Eee;break;case"scroll":case"scrollend":dt=dee;break;case"wheel":dt=Lee;break;case"copy":case"cut":case"paste":dt=xee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=cO;break;case"toggle":case"beforetoggle":dt=Dee}var Vt=(g&4)!==0,Fn=!Vt&&(m==="scroll"||m==="scrollend"),Ke=Vt?it!==null?it+"Capture":null:it;Vt=[];for(var He=st,at;He!==null;){var ft=He;if(at=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||at===null||Ke===null||(ft=hh(He,Ke),ft!=null&&Vt.push(Vh(He,ft,at))),Fn)break;He=He.return}0<Vt.length&&(it=new dt(it,Ot,null,y,ut),xt.push({event:it,listeners:Vt}))}}if((g&7)===0){e:{if(it=m==="mouseover"||m==="pointerover",dt=m==="mouseout"||m==="pointerout",it&&y!==d1&&(Ot=y.relatedTarget||y.fromElement)&&(me(Ot)||Ot[Rt]))break e;if((dt||it)&&(it=ut.window===ut?ut:(it=ut.ownerDocument)?it.defaultView||it.parentWindow:window,dt?(Ot=y.relatedTarget||y.toElement,dt=st,Ot=Ot?me(Ot):null,Ot!==null&&(Fn=i(Ot),Vt=Ot.tag,Ot!==Fn||Vt!==5&&Vt!==27&&Vt!==6)&&(Ot=null)):(dt=null,Ot=st),dt!==Ot)){if(Vt=oO,ft="onMouseLeave",Ke="onMouseEnter",He="mouse",(m==="pointerout"||m==="pointerover")&&(Vt=cO,ft="onPointerLeave",Ke="onPointerEnter",He="pointer"),Fn=dt==null?it:$e(dt),at=Ot==null?it:$e(Ot),it=new Vt(ft,He+"leave",dt,y,ut),it.target=Fn,it.relatedTarget=at,ft=null,me(ut)===st&&(Vt=new Vt(Ke,He+"enter",Ot,y,ut),Vt.target=at,Vt.relatedTarget=Fn,ft=Vt),Fn=ft,dt&&Ot)t:{for(Vt=Pte,Ke=dt,He=Ot,at=0,ft=Ke;ft;ft=Vt(ft))at++;ft=0;for(var Gt=He;Gt;Gt=Vt(Gt))ft++;for(;0<at-ft;)Ke=Vt(Ke),at--;for(;0<ft-at;)He=Vt(He),ft--;for(;at--;){if(Ke===He||He!==null&&Ke===He.alternate){Vt=Ke;break t}Ke=Vt(Ke),He=Vt(He)}Vt=null}else Vt=null;dt!==null&&eM(xt,it,dt,Vt,!1),Ot!==null&&Fn!==null&&eM(xt,Fn,Ot,Vt,!0)}}e:{if(it=st?$e(st):window,dt=it.nodeName&&it.nodeName.toLowerCase(),dt==="select"||dt==="input"&&it.type==="file")var Cn=xO;else if(gO(it))if(yO)Cn=Hee;else{Cn=Fee;var Ut=Uee}else dt=it.nodeName,!dt||dt.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?st&&c1(st.elementType)&&(Cn=xO):Cn=Bee;if(Cn&&(Cn=Cn(m,st))){pO(xt,Cn,y,ut);break e}Ut&&Ut(m,it,st),m==="focusout"&&st&&it.type==="number"&&st.memoizedProps.value!=null&&l1(it,"number",it.value)}switch(Ut=st?$e(st):window,m){case"focusin":(gO(Ut)||Ut.contentEditable==="true")&&(om=Ut,j1=st,Nh=null);break;case"focusout":Nh=j1=om=null;break;case"mousedown":C1=!0;break;case"contextmenu":case"mouseup":case"dragend":C1=!1,_O(xt,y,ut);break;case"selectionchange":if(Wee)break;case"keydown":case"keyup":_O(xt,y,ut)}var ln;if(b1)e:{switch(m){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else im?fO(m,y)&&(pn="onCompositionEnd"):m==="keydown"&&y.keyCode===229&&(pn="onCompositionStart");pn&&(dO&&y.locale!=="ko"&&(im||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&im&&(ln=rO()):(dc=ut,h1="value"in dc?dc.value:dc.textContent,im=!0)),Ut=ly(st,pn),0<Ut.length&&(pn=new lO(pn,m,null,y,ut),xt.push({event:pn,listeners:Ut}),ln?pn.data=ln:(ln=hO(y),ln!==null&&(pn.data=ln)))),(ln=Mee?Iee(m,y):$ee(m,y))&&(pn=ly(st,"onBeforeInput"),0<pn.length&&(Ut=new lO("onBeforeInput","beforeinput",null,y,ut),xt.push({event:Ut,listeners:pn}),Ut.data=ln)),Tte(xt,m,st,y,ut)}Z5(xt,g)})}function Vh(m,g,y){return{instance:m,listener:g,currentTarget:y}}function ly(m,g){for(var y=g+"Capture",j=[];m!==null;){var L=m,O=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||O===null||(L=hh(m,y),L!=null&&j.unshift(Vh(m,L,O)),L=hh(m,g),L!=null&&j.push(Vh(m,L,O))),m.tag===3)return j;m=m.return}return[]}function Pte(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function eM(m,g,y,j,L){for(var O=g._reactName,Y=[];y!==null&&y!==j;){var we=y,ze=we.alternate,st=we.stateNode;if(we=we.tag,ze!==null&&ze===j)break;we!==5&&we!==26&&we!==27||st===null||(ze=st,L?(st=hh(y,O),st!=null&&Y.unshift(Vh(y,st,ze))):L||(st=hh(y,O),st!=null&&Y.push(Vh(y,st,ze)))),y=y.return}Y.length!==0&&m.push({event:g,listeners:Y})}var Dte=/\r\n?/g,Ote=/\u0000|\uFFFD/g;function tM(m){return(typeof m=="string"?m:""+m).replace(Dte,`
`).replace(Ote,"")}function nM(m,g){return g=tM(g),tM(m)===g}function Un(m,g,y,j,L,O){switch(y){case"children":typeof j=="string"?g==="body"||g==="textarea"&&j===""||am(m,j):(typeof j=="number"||typeof j=="bigint")&&g!=="body"&&am(m,""+j);break;case"className":m0(m,"class",j);break;case"tabIndex":m0(m,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":m0(m,y,j);break;case"style":nO(m,j,O);break;case"data":if(g!=="object"){m0(m,"data",j);break}case"src":case"href":if(j===""&&(g!=="a"||y!=="href")){m.removeAttribute(y);break}if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(y);break}j=h0(""+j),m.setAttribute(y,j);break;case"action":case"formAction":if(typeof j=="function"){m.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(y==="formAction"?(g!=="input"&&Un(m,g,"name",L.name,L,null),Un(m,g,"formEncType",L.formEncType,L,null),Un(m,g,"formMethod",L.formMethod,L,null),Un(m,g,"formTarget",L.formTarget,L,null)):(Un(m,g,"encType",L.encType,L,null),Un(m,g,"method",L.method,L,null),Un(m,g,"target",L.target,L,null)));if(j==null||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(y);break}j=h0(""+j),m.setAttribute(y,j);break;case"onClick":j!=null&&(m.onclick=Qo);break;case"onScroll":j!=null&&fn("scroll",m);break;case"onScrollEnd":j!=null&&fn("scrollend",m);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(y=j.__html,y!=null){if(L.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"multiple":m.multiple=j&&typeof j!="function"&&typeof j!="symbol";break;case"muted":m.muted=j&&typeof j!="function"&&typeof j!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(j==null||typeof j=="function"||typeof j=="boolean"||typeof j=="symbol"){m.removeAttribute("xlink:href");break}y=h0(""+j),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,""+j):m.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,""):m.removeAttribute(y);break;case"capture":case"download":j===!0?m.setAttribute(y,""):j!==!1&&j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,j):m.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":j!=null&&typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j?m.setAttribute(y,j):m.removeAttribute(y);break;case"rowSpan":case"start":j==null||typeof j=="function"||typeof j=="symbol"||isNaN(j)?m.removeAttribute(y):m.setAttribute(y,j);break;case"popover":fn("beforetoggle",m),fn("toggle",m),u0(m,"popover",j);break;case"xlinkActuate":Vo(m,"http://www.w3.org/1999/xlink","xlink:actuate",j);break;case"xlinkArcrole":Vo(m,"http://www.w3.org/1999/xlink","xlink:arcrole",j);break;case"xlinkRole":Vo(m,"http://www.w3.org/1999/xlink","xlink:role",j);break;case"xlinkShow":Vo(m,"http://www.w3.org/1999/xlink","xlink:show",j);break;case"xlinkTitle":Vo(m,"http://www.w3.org/1999/xlink","xlink:title",j);break;case"xlinkType":Vo(m,"http://www.w3.org/1999/xlink","xlink:type",j);break;case"xmlBase":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:base",j);break;case"xmlLang":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:lang",j);break;case"xmlSpace":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:space",j);break;case"is":u0(m,"is",j);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=lee.get(y)||y,u0(m,y,j))}}function YC(m,g,y,j,L,O){switch(y){case"style":nO(m,j,O);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(y=j.__html,y!=null){if(L.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"children":typeof j=="string"?am(m,j):(typeof j=="number"||typeof j=="bigint")&&am(m,""+j);break;case"onScroll":j!=null&&fn("scroll",m);break;case"onScrollEnd":j!=null&&fn("scrollend",m);break;case"onClick":j!=null&&(m.onclick=Qo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ct.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(L=y.endsWith("Capture"),g=y.slice(2,L?y.length-7:void 0),O=m[ot]||null,O=O!=null?O[y]:null,typeof O=="function"&&m.removeEventListener(g,O,L),typeof j=="function")){typeof O!="function"&&O!==null&&(y in m?m[y]=null:m.hasAttribute(y)&&m.removeAttribute(y)),m.addEventListener(g,j,L);break e}y in m?m[y]=j:j===!0?m.setAttribute(y,""):u0(m,y,j)}}}function js(m,g,y){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fn("error",m),fn("load",m);var j=!1,L=!1,O;for(O in y)if(y.hasOwnProperty(O)){var Y=y[O];if(Y!=null)switch(O){case"src":j=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Un(m,g,O,Y,y,null)}}L&&Un(m,g,"srcSet",y.srcSet,y,null),j&&Un(m,g,"src",y.src,y,null);return;case"input":fn("invalid",m);var we=O=Y=L=null,ze=null,st=null;for(j in y)if(y.hasOwnProperty(j)){var ut=y[j];if(ut!=null)switch(j){case"name":L=ut;break;case"type":Y=ut;break;case"checked":ze=ut;break;case"defaultChecked":st=ut;break;case"value":O=ut;break;case"defaultValue":we=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(s(137,g));break;default:Un(m,g,j,ut,y,null)}}ZD(m,O,we,ze,st,Y,L,!1);return;case"select":fn("invalid",m),j=Y=O=null;for(L in y)if(y.hasOwnProperty(L)&&(we=y[L],we!=null))switch(L){case"value":O=we;break;case"defaultValue":Y=we;break;case"multiple":j=we;default:Un(m,g,L,we,y,null)}g=O,y=Y,m.multiple=!!j,g!=null?nm(m,!!j,g,!1):y!=null&&nm(m,!!j,y,!0);return;case"textarea":fn("invalid",m),O=L=j=null;for(Y in y)if(y.hasOwnProperty(Y)&&(we=y[Y],we!=null))switch(Y){case"value":j=we;break;case"defaultValue":L=we;break;case"children":O=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(91));break;default:Un(m,g,Y,we,y,null)}eO(m,j,L,O);return;case"option":for(ze in y)y.hasOwnProperty(ze)&&(j=y[ze],j!=null)&&(ze==="selected"?m.selected=j&&typeof j!="function"&&typeof j!="symbol":Un(m,g,ze,j,y,null));return;case"dialog":fn("beforetoggle",m),fn("toggle",m),fn("cancel",m),fn("close",m);break;case"iframe":case"object":fn("load",m);break;case"video":case"audio":for(j=0;j<qh.length;j++)fn(qh[j],m);break;case"image":fn("error",m),fn("load",m);break;case"details":fn("toggle",m);break;case"embed":case"source":case"link":fn("error",m),fn("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in y)if(y.hasOwnProperty(st)&&(j=y[st],j!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Un(m,g,st,j,y,null)}return;default:if(c1(g)){for(ut in y)y.hasOwnProperty(ut)&&(j=y[ut],j!==void 0&&YC(m,g,ut,j,y,void 0));return}}for(we in y)y.hasOwnProperty(we)&&(j=y[we],j!=null&&Un(m,g,we,j,y,null))}function Mte(m,g,y,j){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,O=null,Y=null,we=null,ze=null,st=null,ut=null;for(dt in y){var xt=y[dt];if(y.hasOwnProperty(dt)&&xt!=null)switch(dt){case"checked":break;case"value":break;case"defaultValue":ze=xt;default:j.hasOwnProperty(dt)||Un(m,g,dt,null,j,xt)}}for(var it in j){var dt=j[it];if(xt=y[it],j.hasOwnProperty(it)&&(dt!=null||xt!=null))switch(it){case"type":O=dt;break;case"name":L=dt;break;case"checked":st=dt;break;case"defaultChecked":ut=dt;break;case"value":Y=dt;break;case"defaultValue":we=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,g));break;default:dt!==xt&&Un(m,g,it,dt,j,xt)}}o1(m,Y,we,ze,st,ut,O,L);return;case"select":dt=Y=we=it=null;for(O in y)if(ze=y[O],y.hasOwnProperty(O)&&ze!=null)switch(O){case"value":break;case"multiple":dt=ze;default:j.hasOwnProperty(O)||Un(m,g,O,null,j,ze)}for(L in j)if(O=j[L],ze=y[L],j.hasOwnProperty(L)&&(O!=null||ze!=null))switch(L){case"value":it=O;break;case"defaultValue":we=O;break;case"multiple":Y=O;default:O!==ze&&Un(m,g,L,O,j,ze)}g=we,y=Y,j=dt,it!=null?nm(m,!!y,it,!1):!!j!=!!y&&(g!=null?nm(m,!!y,g,!0):nm(m,!!y,y?[]:"",!1));return;case"textarea":dt=it=null;for(we in y)if(L=y[we],y.hasOwnProperty(we)&&L!=null&&!j.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Un(m,g,we,null,j,L)}for(Y in j)if(L=j[Y],O=y[Y],j.hasOwnProperty(Y)&&(L!=null||O!=null))switch(Y){case"value":it=L;break;case"defaultValue":dt=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:L!==O&&Un(m,g,Y,L,j,O)}JD(m,it,dt);return;case"option":for(var Ot in y)it=y[Ot],y.hasOwnProperty(Ot)&&it!=null&&!j.hasOwnProperty(Ot)&&(Ot==="selected"?m.selected=!1:Un(m,g,Ot,null,j,it));for(ze in j)it=j[ze],dt=y[ze],j.hasOwnProperty(ze)&&it!==dt&&(it!=null||dt!=null)&&(ze==="selected"?m.selected=it&&typeof it!="function"&&typeof it!="symbol":Un(m,g,ze,it,j,dt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in y)it=y[Vt],y.hasOwnProperty(Vt)&&it!=null&&!j.hasOwnProperty(Vt)&&Un(m,g,Vt,null,j,it);for(st in j)if(it=j[st],dt=y[st],j.hasOwnProperty(st)&&it!==dt&&(it!=null||dt!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(s(137,g));break;default:Un(m,g,st,it,j,dt)}return;default:if(c1(g)){for(var Fn in y)it=y[Fn],y.hasOwnProperty(Fn)&&it!==void 0&&!j.hasOwnProperty(Fn)&&YC(m,g,Fn,void 0,j,it);for(ut in j)it=j[ut],dt=y[ut],!j.hasOwnProperty(ut)||it===dt||it===void 0&&dt===void 0||YC(m,g,ut,it,j,dt);return}}for(var Ke in y)it=y[Ke],y.hasOwnProperty(Ke)&&it!=null&&!j.hasOwnProperty(Ke)&&Un(m,g,Ke,null,j,it);for(xt in j)it=j[xt],dt=y[xt],!j.hasOwnProperty(xt)||it===dt||it==null&&dt==null||Un(m,g,xt,it,j,dt)}function aM(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ite(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,y=performance.getEntriesByType("resource"),j=0;j<y.length;j++){var L=y[j],O=L.transferSize,Y=L.initiatorType,we=L.duration;if(O&&we&&aM(Y)){for(Y=0,we=L.responseEnd,j+=1;j<y.length;j++){var ze=y[j],st=ze.startTime;if(st>we)break;var ut=ze.transferSize,xt=ze.initiatorType;ut&&aM(xt)&&(ze=ze.responseEnd,Y+=ut*(ze<we?1:(we-st)/(ze-st)))}if(--j,g+=8*(O+Y)/(L.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var KC=null,XC=null;function cy(m){return m.nodeType===9?m:m.ownerDocument}function sM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rM(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function ZC(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var JC=null;function $te(){var m=window.event;return m&&m.type==="popstate"?m===JC?!1:(JC=m,!0):(JC=null,!1)}var iM=typeof setTimeout=="function"?setTimeout:void 0,Rte=typeof clearTimeout=="function"?clearTimeout:void 0,oM=typeof Promise=="function"?Promise:void 0,zte=typeof queueMicrotask=="function"?queueMicrotask:typeof oM<"u"?function(m){return oM.resolve(null).then(m).catch(Ute)}:iM;function Ute(m){setTimeout(function(){throw m})}function Ac(m){return m==="head"}function lM(m,g){var y=g,j=0;do{var L=y.nextSibling;if(m.removeChild(y),L&&L.nodeType===8)if(y=L.data,y==="/$"||y==="/&"){if(j===0){m.removeChild(L),Om(g);return}j--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")j++;else if(y==="html")Qh(m.ownerDocument.documentElement);else if(y==="head"){y=m.ownerDocument.head,Qh(y);for(var O=y.firstChild;O;){var Y=O.nextSibling,we=O.nodeName;O[U]||we==="SCRIPT"||we==="STYLE"||we==="LINK"&&O.rel.toLowerCase()==="stylesheet"||y.removeChild(O),O=Y}}else y==="body"&&Qh(m.ownerDocument.body);y=L}while(y);Om(g)}function cM(m,g){var y=m;m=0;do{var j=y.nextSibling;if(y.nodeType===1?g?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(g?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),j&&j.nodeType===8)if(y=j.data,y==="/$"){if(m===0)break;m--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||m++;y=j}while(y)}function eS(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var y=g;switch(g=g.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":eS(y),I(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}m.removeChild(y)}}function Fte(m,g,y,j){for(;m.nodeType===1;){var L=y;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!j&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(j){if(!m[U])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(O=m.getAttribute("rel"),O==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(O!==L.rel||m.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||m.getAttribute("title")!==(L.title==null?null:L.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(O=m.getAttribute("src"),(O!==(L.src==null?null:L.src)||m.getAttribute("type")!==(L.type==null?null:L.type)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&O&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var O=L.name==null?null:""+L.name;if(L.type==="hidden"&&m.getAttribute("name")===O)return m}else return m;if(m=ei(m.nextSibling),m===null)break}return null}function Bte(m,g,y){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!y||(m=ei(m.nextSibling),m===null))return null;return m}function dM(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=ei(m.nextSibling),m===null))return null;return m}function tS(m){return m.data==="$?"||m.data==="$~"}function nS(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function Hte(m,g){var y=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||y.readyState!=="loading")g();else{var j=function(){g(),y.removeEventListener("DOMContentLoaded",j)};y.addEventListener("DOMContentLoaded",j),m._reactRetry=j}}function ei(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var aS=null;function uM(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="/$"||y==="/&"){if(g===0)return ei(m.nextSibling);g--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||g++}m=m.nextSibling}return null}function mM(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(g===0)return m;g--}else y!=="/$"&&y!=="/&"||g++}m=m.previousSibling}return null}function fM(m,g,y){switch(g=cy(y),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function Qh(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);I(m)}var ti=new Map,hM=new Set;function dy(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var dl=X.d;X.d={f:Gte,r:Wte,D:qte,C:Vte,L:Qte,m:Yte,X:Xte,S:Kte,M:Zte};function Gte(){var m=dl.f(),g=ty();return m||g}function Wte(m){var g=Le(m);g!==null&&g.tag===5&&g.type==="form"?L3(g):dl.r(m)}var Lm=typeof document>"u"?null:document;function gM(m,g,y){var j=Lm;if(j&&typeof g=="string"&&g){var L=Vr(g);L='link[rel="'+m+'"][href="'+L+'"]',typeof y=="string"&&(L+='[crossorigin="'+y+'"]'),hM.has(L)||(hM.add(L),m={rel:m,crossOrigin:y,href:g},j.querySelector(L)===null&&(g=j.createElement("link"),js(g,"link",m),Ye(g),j.head.appendChild(g)))}}function qte(m){dl.D(m),gM("dns-prefetch",m,null)}function Vte(m,g){dl.C(m,g),gM("preconnect",m,g)}function Qte(m,g,y){dl.L(m,g,y);var j=Lm;if(j&&m&&g){var L='link[rel="preload"][as="'+Vr(g)+'"]';g==="image"&&y&&y.imageSrcSet?(L+='[imagesrcset="'+Vr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(L+='[imagesizes="'+Vr(y.imageSizes)+'"]')):L+='[href="'+Vr(m)+'"]';var O=L;switch(g){case"style":O=Pm(m);break;case"script":O=Dm(m)}ti.has(O)||(m=f({rel:"preload",href:g==="image"&&y&&y.imageSrcSet?void 0:m,as:g},y),ti.set(O,m),j.querySelector(L)!==null||g==="style"&&j.querySelector(Yh(O))||g==="script"&&j.querySelector(Kh(O))||(g=j.createElement("link"),js(g,"link",m),Ye(g),j.head.appendChild(g)))}}function Yte(m,g){dl.m(m,g);var y=Lm;if(y&&m){var j=g&&typeof g.as=="string"?g.as:"script",L='link[rel="modulepreload"][as="'+Vr(j)+'"][href="'+Vr(m)+'"]',O=L;switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Dm(m)}if(!ti.has(O)&&(m=f({rel:"modulepreload",href:m},g),ti.set(O,m),y.querySelector(L)===null)){switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Kh(O)))return}j=y.createElement("link"),js(j,"link",m),Ye(j),y.head.appendChild(j)}}}function Kte(m,g,y){dl.S(m,g,y);var j=Lm;if(j&&m){var L=Ve(j).hoistableStyles,O=Pm(m);g=g||"default";var Y=L.get(O);if(!Y){var we={loading:0,preload:null};if(Y=j.querySelector(Yh(O)))we.loading=5;else{m=f({rel:"stylesheet",href:m,"data-precedence":g},y),(y=ti.get(O))&&sS(m,y);var ze=Y=j.createElement("link");Ye(ze),js(ze,"link",m),ze._p=new Promise(function(st,ut){ze.onload=st,ze.onerror=ut}),ze.addEventListener("load",function(){we.loading|=1}),ze.addEventListener("error",function(){we.loading|=2}),we.loading|=4,uy(Y,g,j)}Y={type:"stylesheet",instance:Y,count:1,state:we},L.set(O,Y)}}}function Xte(m,g){dl.X(m,g);var y=Lm;if(y&&m){var j=Ve(y).hoistableScripts,L=Dm(m),O=j.get(L);O||(O=y.querySelector(Kh(L)),O||(m=f({src:m,async:!0},g),(g=ti.get(L))&&rS(m,g),O=y.createElement("script"),Ye(O),js(O,"link",m),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},j.set(L,O))}}function Zte(m,g){dl.M(m,g);var y=Lm;if(y&&m){var j=Ve(y).hoistableScripts,L=Dm(m),O=j.get(L);O||(O=y.querySelector(Kh(L)),O||(m=f({src:m,async:!0,type:"module"},g),(g=ti.get(L))&&rS(m,g),O=y.createElement("script"),Ye(O),js(O,"link",m),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},j.set(L,O))}}function pM(m,g,y,j){var L=(L=Se.current)?dy(L):null;if(!L)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(g=Pm(y.href),y=Ve(L).hoistableStyles,j=y.get(g),j||(j={type:"style",instance:null,count:0,state:null},y.set(g,j)),j):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){m=Pm(y.href);var O=Ve(L).hoistableStyles,Y=O.get(m);if(Y||(L=L.ownerDocument||L,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(m,Y),(O=L.querySelector(Yh(m)))&&!O._p&&(Y.instance=O,Y.state.loading=5),ti.has(m)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ti.set(m,y),O||Jte(L,m,y,Y.state))),g&&j===null)throw Error(s(528,""));return Y}if(g&&j!==null)throw Error(s(529,""));return null;case"script":return g=y.async,y=y.src,typeof y=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Dm(y),y=Ve(L).hoistableScripts,j=y.get(g),j||(j={type:"script",instance:null,count:0,state:null},y.set(g,j)),j):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function Pm(m){return'href="'+Vr(m)+'"'}function Yh(m){return'link[rel="stylesheet"]['+m+"]"}function xM(m){return f({},m,{"data-precedence":m.precedence,precedence:null})}function Jte(m,g,y,j){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?j.loading=1:(g=m.createElement("link"),j.preload=g,g.addEventListener("load",function(){return j.loading|=1}),g.addEventListener("error",function(){return j.loading|=2}),js(g,"link",y),Ye(g),m.head.appendChild(g))}function Dm(m){return'[src="'+Vr(m)+'"]'}function Kh(m){return"script[async]"+m}function yM(m,g,y){if(g.count++,g.instance===null)switch(g.type){case"style":var j=m.querySelector('style[data-href~="'+Vr(y.href)+'"]');if(j)return g.instance=j,Ye(j),j;var L=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return j=(m.ownerDocument||m).createElement("style"),Ye(j),js(j,"style",L),uy(j,y.precedence,m),g.instance=j;case"stylesheet":L=Pm(y.href);var O=m.querySelector(Yh(L));if(O)return g.state.loading|=4,g.instance=O,Ye(O),O;j=xM(y),(L=ti.get(L))&&sS(j,L),O=(m.ownerDocument||m).createElement("link"),Ye(O);var Y=O;return Y._p=new Promise(function(we,ze){Y.onload=we,Y.onerror=ze}),js(O,"link",j),g.state.loading|=4,uy(O,y.precedence,m),g.instance=O;case"script":return O=Dm(y.src),(L=m.querySelector(Kh(O)))?(g.instance=L,Ye(L),L):(j=y,(L=ti.get(O))&&(j=f({},y),rS(j,L)),m=m.ownerDocument||m,L=m.createElement("script"),Ye(L),js(L,"link",j),m.head.appendChild(L),g.instance=L);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(j=g.instance,g.state.loading|=4,uy(j,y.precedence,m));return g.instance}function uy(m,g,y){for(var j=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=j.length?j[j.length-1]:null,O=L,Y=0;Y<j.length;Y++){var we=j[Y];if(we.dataset.precedence===g)O=we;else if(O!==L)break}O?O.parentNode.insertBefore(m,O.nextSibling):(g=y.nodeType===9?y.head:y,g.insertBefore(m,g.firstChild))}function sS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function rS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var my=null;function bM(m,g,y){if(my===null){var j=new Map,L=my=new Map;L.set(y,j)}else L=my,j=L.get(y),j||(j=new Map,L.set(y,j));if(j.has(m))return j;for(j.set(m,null),y=y.getElementsByTagName(m),L=0;L<y.length;L++){var O=y[L];if(!(O[U]||O[re]||m==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=O.getAttribute(g)||"";Y=m+Y;var we=j.get(Y);we?we.push(O):j.set(Y,[O])}}return j}function vM(m,g,y){m=m.ownerDocument||m,m.head.insertBefore(y,g==="title"?m.querySelector("head > title"):null)}function ene(m,g,y){if(y===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function wM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function tne(m,g,y,j){if(y.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var L=Pm(j.href),O=g.querySelector(Yh(L));if(O){g=O._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=fy.bind(m),g.then(m,m)),y.state.loading|=4,y.instance=O,Ye(O);return}O=g.ownerDocument||g,j=xM(j),(L=ti.get(L))&&sS(j,L),O=O.createElement("link"),Ye(O);var Y=O;Y._p=new Promise(function(we,ze){Y.onload=we,Y.onerror=ze}),js(O,"link",j),y.instance=O}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(y,g),(g=y.state.preload)&&(y.state.loading&3)===0&&(m.count++,y=fy.bind(m),g.addEventListener("load",y),g.addEventListener("error",y))}}var iS=0;function nne(m,g){return m.stylesheets&&m.count===0&&gy(m,m.stylesheets),0<m.count||0<m.imgCount?function(y){var j=setTimeout(function(){if(m.stylesheets&&gy(m,m.stylesheets),m.unsuspend){var O=m.unsuspend;m.unsuspend=null,O()}},6e4+g);0<m.imgBytes&&iS===0&&(iS=62500*Ite());var L=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&gy(m,m.stylesheets),m.unsuspend)){var O=m.unsuspend;m.unsuspend=null,O()}},(m.imgBytes>iS?50:800)+g);return m.unsuspend=y,function(){m.unsuspend=null,clearTimeout(j),clearTimeout(L)}}:null}function fy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gy(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var hy=null;function gy(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,hy=new Map,g.forEach(ane,m),hy=null,fy.call(m))}function ane(m,g){if(!(g.state.loading&4)){var y=hy.get(m);if(y)var j=y.get(null);else{y=new Map,hy.set(m,y);for(var L=m.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<L.length;O++){var Y=L[O];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(y.set(Y.dataset.precedence,Y),j=Y)}j&&y.set(null,j)}L=g.instance,Y=L.getAttribute("data-precedence"),O=y.get(Y)||j,O===j&&y.set(null,L),y.set(Y,L),this.count++,j=fy.bind(this),L.addEventListener("load",j),L.addEventListener("error",j),O?O.parentNode.insertBefore(L,O.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(L,m.firstChild)),g.state.loading|=4}}var Xh={$$typeof:S,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function sne(m,g,y,j,L,O,Y,we,ze){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=j,this.onUncaughtError=L,this.onCaughtError=O,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function NM(m,g,y,j,L,O,Y,we,ze,st,ut,xt){return m=new sne(m,g,y,Y,ze,st,ut,xt,we),g=1,O===!0&&(g|=24),O=Cr(3,null,null,g),m.current=O,O.stateNode=m,g=z1(),g.refCount++,m.pooledCache=g,g.refCount++,O.memoizedState={element:j,isDehydrated:y,cache:g},H1(O),m}function jM(m){return m?(m=dm,m):dm}function CM(m,g,y,j,L,O){L=jM(L),j.context===null?j.context=L:j.pendingContext=L,j=pc(g),j.payload={element:y},O=O===void 0?null:O,O!==null&&(j.callback=O),y=xc(m,j,g),y!==null&&(ar(y,m,g),Eh(y,m,g))}function SM(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var y=m.retryLane;m.retryLane=y!==0&&y<g?y:g}}function oS(m,g){SM(m,g),(m=m.alternate)&&SM(m,g)}function _M(m){if(m.tag===13||m.tag===31){var g=Ed(m,67108864);g!==null&&ar(g,m,67108864),oS(m,67108864)}}function AM(m){if(m.tag===13||m.tag===31){var g=Er();g=Nt(g);var y=Ed(m,g);y!==null&&ar(y,m,g),oS(m,g)}}var py=!0;function rne(m,g,y,j){var L=V.T;V.T=null;var O=X.p;try{X.p=2,lS(m,g,y,j)}finally{X.p=O,V.T=L}}function ine(m,g,y,j){var L=V.T;V.T=null;var O=X.p;try{X.p=8,lS(m,g,y,j)}finally{X.p=O,V.T=L}}function lS(m,g,y,j){if(py){var L=cS(j);if(L===null)QC(m,g,j,xy,y),EM(m,j);else if(lne(L,m,g,y,j))j.stopPropagation();else if(EM(m,j),g&4&&-1<one.indexOf(m)){for(;L!==null;){var O=Le(L);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var Y=D(O.pendingLanes);if(Y!==0){var we=O;for(we.pendingLanes|=2,we.entangledLanes|=2;Y;){var ze=1<<31-ct(Y);we.entanglements[1]|=ze,Y&=~ze}ao(O),(An&6)===0&&(J0=Z()+500,Wh(0))}}break;case 31:case 13:we=Ed(O,2),we!==null&&ar(we,O,2),ty(),oS(O,2)}if(O=cS(j),O===null&&QC(m,g,j,xy,y),O===L)break;L=O}L!==null&&j.stopPropagation()}else QC(m,g,j,null,y)}}function cS(m){return m=u1(m),dS(m)}var xy=null;function dS(m){if(xy=null,m=me(m),m!==null){var g=i(m);if(g===null)m=null;else{var y=g.tag;if(y===13){if(m=o(g),m!==null)return m;m=null}else if(y===31){if(m=l(g),m!==null)return m;m=null}else if(y===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return xy=m,null}function TM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case te:return 2;case Ue:return 8;case Ie:case We:return 32;case gt:return 268435456;default:return 32}default:return 32}}var uS=!1,Tc=null,Ec=null,kc=null,Zh=new Map,Jh=new Map,Lc=[],one="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EM(m,g){switch(m){case"focusin":case"focusout":Tc=null;break;case"dragenter":case"dragleave":Ec=null;break;case"mouseover":case"mouseout":kc=null;break;case"pointerover":case"pointerout":Zh.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(g.pointerId)}}function eg(m,g,y,j,L,O){return m===null||m.nativeEvent!==O?(m={blockedOn:g,domEventName:y,eventSystemFlags:j,nativeEvent:O,targetContainers:[L]},g!==null&&(g=Le(g),g!==null&&_M(g)),m):(m.eventSystemFlags|=j,g=m.targetContainers,L!==null&&g.indexOf(L)===-1&&g.push(L),m)}function lne(m,g,y,j,L){switch(g){case"focusin":return Tc=eg(Tc,m,g,y,j,L),!0;case"dragenter":return Ec=eg(Ec,m,g,y,j,L),!0;case"mouseover":return kc=eg(kc,m,g,y,j,L),!0;case"pointerover":var O=L.pointerId;return Zh.set(O,eg(Zh.get(O)||null,m,g,y,j,L)),!0;case"gotpointercapture":return O=L.pointerId,Jh.set(O,eg(Jh.get(O)||null,m,g,y,j,L)),!0}return!1}function kM(m){var g=me(m.target);if(g!==null){var y=i(g);if(y!==null){if(g=y.tag,g===13){if(g=o(y),g!==null){m.blockedOn=g,on(m.priority,function(){AM(y)});return}}else if(g===31){if(g=l(y),g!==null){m.blockedOn=g,on(m.priority,function(){AM(y)});return}}else if(g===3&&y.stateNode.current.memoizedState.isDehydrated){m.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}m.blockedOn=null}function yy(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var y=cS(m.nativeEvent);if(y===null){y=m.nativeEvent;var j=new y.constructor(y.type,y);d1=j,y.target.dispatchEvent(j),d1=null}else return g=Le(y),g!==null&&_M(g),m.blockedOn=y,!1;g.shift()}return!0}function LM(m,g,y){yy(m)&&y.delete(g)}function cne(){uS=!1,Tc!==null&&yy(Tc)&&(Tc=null),Ec!==null&&yy(Ec)&&(Ec=null),kc!==null&&yy(kc)&&(kc=null),Zh.forEach(LM),Jh.forEach(LM)}function by(m,g){m.blockedOn===g&&(m.blockedOn=null,uS||(uS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cne)))}var vy=null;function PM(m){vy!==m&&(vy=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){vy===m&&(vy=null);for(var g=0;g<m.length;g+=3){var y=m[g],j=m[g+1],L=m[g+2];if(typeof j!="function"){if(dS(j||y)===null)continue;break}var O=Le(y);O!==null&&(m.splice(g,3),g-=3,cC(O,{pending:!0,data:L,method:y.method,action:j},j,L))}}))}function Om(m){function g(ze){return by(ze,m)}Tc!==null&&by(Tc,m),Ec!==null&&by(Ec,m),kc!==null&&by(kc,m),Zh.forEach(g),Jh.forEach(g);for(var y=0;y<Lc.length;y++){var j=Lc[y];j.blockedOn===m&&(j.blockedOn=null)}for(;0<Lc.length&&(y=Lc[0],y.blockedOn===null);)kM(y),y.blockedOn===null&&Lc.shift();if(y=(m.ownerDocument||m).$$reactFormReplay,y!=null)for(j=0;j<y.length;j+=3){var L=y[j],O=y[j+1],Y=L[ot]||null;if(typeof O=="function")Y||PM(y);else if(Y){var we=null;if(O&&O.hasAttribute("formAction")){if(L=O,Y=O[ot]||null)we=Y.formAction;else if(dS(L)!==null)continue}else we=Y.action;typeof we=="function"?y[j+1]=we:(y.splice(j,3),j-=3),PM(y)}}}function DM(){function m(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(Y){return L=Y})},focusReset:"manual",scroll:"manual"})}function g(){L!==null&&(L(),L=null),j||setTimeout(y,20)}function y(){if(!j&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var j=!1,L=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(y,100),function(){j=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),L!==null&&(L(),L=null)}}}function mS(m){this._internalRoot=m}wy.prototype.render=mS.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var y=g.current,j=Er();CM(y,j,m,g,null,null)},wy.prototype.unmount=mS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;CM(m.current,2,null,m,null,null),ty(),g[Rt]=null}};function wy(m){this._internalRoot=m}wy.prototype.unstable_scheduleHydration=function(m){if(m){var g=Ht();m={blockedOn:null,target:m,priority:g};for(var y=0;y<Lc.length&&g!==0&&g<Lc[y].priority;y++);Lc.splice(y,0,m),y===0&&kM(m)}};var OM=t.version;if(OM!=="19.2.0")throw Error(s(527,OM,"19.2.0"));X.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=d(g),m=m!==null?u(m):null,m=m===null?null:m.stateNode,m};var dne={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ny.isDisabled&&Ny.supportsFiber)try{nt=Ny.inject(dne),Te=Ny}catch{}}return ng.createRoot=function(m,g){if(!r(m))throw Error(s(299));var y=!1,j="",L=F3,O=B3,Y=H3;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onUncaughtError!==void 0&&(L=g.onUncaughtError),g.onCaughtError!==void 0&&(O=g.onCaughtError),g.onRecoverableError!==void 0&&(Y=g.onRecoverableError)),g=NM(m,1,!1,null,null,y,j,null,L,O,Y,DM),m[Rt]=g.current,VC(m),new mS(g)},ng.hydrateRoot=function(m,g,y){if(!r(m))throw Error(s(299));var j=!1,L="",O=F3,Y=B3,we=H3,ze=null;return y!=null&&(y.unstable_strictMode===!0&&(j=!0),y.identifierPrefix!==void 0&&(L=y.identifierPrefix),y.onUncaughtError!==void 0&&(O=y.onUncaughtError),y.onCaughtError!==void 0&&(Y=y.onCaughtError),y.onRecoverableError!==void 0&&(we=y.onRecoverableError),y.formState!==void 0&&(ze=y.formState)),g=NM(m,1,!0,g,y??null,j,L,ze,O,Y,we,DM),g.context=jM(null),y=g.current,j=Er(),j=Nt(j),L=pc(j),L.callback=null,xc(y,L,j),y=j,g.current.lanes=y,ge(g,y),ao(g),m[Rt]=g.current,VC(m),new wy(g)},ng.version="19.2.0",ng}var GM;function vne(){if(GM)return gS.exports;GM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gS.exports=bne(),gS.exports}var wne=vne();var WM="popstate";function Nne(e={}){function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return gT("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(s,r){return typeof r=="string"?r:op(r)}return Cne(t,a,null,e)}function da(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jne(){return Math.random().toString(36).substring(2,10)}function qM(e,t){return{usr:e.state,key:e.key,idx:t}}function gT(e,t,a=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Uf(t):t,state:a,key:t&&t.key||s||jne()}}function op({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Uf(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Cne(e,t,a,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function f(){l="POP";let b=u(),C=b==null?null:b-d;d=b,c&&c({action:l,location:N.location,delta:C})}function p(b,C){l="PUSH";let w=gT(N.location,b,C);d=u()+1;let S=qM(w,d),E=N.createHref(w);try{o.pushState(S,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(E)}i&&c&&c({action:l,location:N.location,delta:1})}function x(b,C){l="REPLACE";let w=gT(N.location,b,C);d=u();let S=qM(w,d),E=N.createHref(w);o.replaceState(S,"",E),i&&c&&c({action:l,location:N.location,delta:0})}function v(b){return Sne(b)}let N={get action(){return l},get location(){return e(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(WM,f),c=b,()=>{r.removeEventListener(WM,f),c=null}},createHref(b){return t(r,b)},createURL:v,encodeLocation(b){let C=v(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:x,go(b){return o.go(b)}};return N}function Sne(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),da(a,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:op(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function YB(e,t,a="/"){return _ne(e,t,a,!1)}function _ne(e,t,a,s){let r=typeof t=="string"?Uf(t):t,i=Dl(r.pathname||"/",a);if(i==null)return null;let o=KB(e);Ane(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Rne(i);l=Ine(o[c],d,s)}return l}function KB(e,t=[],a=[],s="",r=!1){let i=(o,l,c=r,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;da(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let f=El([s,u.relativePath]),p=a.concat(u);o.children&&o.children.length>0&&(da(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),KB(o.children,t,p,f,c)),!(o.path==null&&!o.index)&&t.push({path:f,score:One(f,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of XB(o.path))i(o,l,!0,c)}),t}function XB(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=XB(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ane(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:Mne(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var Tne=/^:[\w-]+$/,Ene=3,kne=2,Lne=1,Pne=10,Dne=-2,VM=e=>e==="*";function One(e,t){let a=e.split("/"),s=a.length;return a.some(VM)&&(s+=Dne),t&&(s+=kne),a.filter(r=>!VM(r)).reduce((r,i)=>r+(Tne.test(i)?Ene:i===""?Lne:Pne),s)}function Mne(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function Ine(e,t,a=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=tv({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!f&&d&&a&&!s[s.length-1].route.index&&(f=tv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:El([i,f.pathname]),pathnameBase:Bne(El([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=El([i,f.pathnameBase]))}return o}function tv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=$ne(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:f},p)=>{if(u==="*"){let v=l[p]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[p];return f&&!x?d[u]=void 0:d[u]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function $ne(e,t=!1,a=!0){xi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function Rne(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Dl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}var zne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Une(e,t="/"){let{pathname:a,search:s="",hash:r=""}=typeof e=="string"?Uf(e):e,i;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?i=QM(a.substring(1),"/"):i=QM(a,t)):i=t,{pathname:i,search:Hne(s),hash:Gne(r)}}function QM(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function bS(e,t,a,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Fne(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function Rk(e){let t=Fne(e);return t.map((a,s)=>s===t.length-1?a.pathname:a.pathnameBase)}function zk(e,t,a,s=!1){let r;typeof e=="string"?r=Uf(e):(r={...e},da(!r.pathname||!r.pathname.includes("?"),bS("?","pathname","search",r)),da(!r.pathname||!r.pathname.includes("#"),bS("#","pathname","hash",r)),da(!r.search||!r.search.includes("#"),bS("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=a;else{let f=t.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=Une(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var El=e=>e.join("/").replace(/\/\/+/g,"/"),Bne=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Hne=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gne=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Wne=class{constructor(e,t,a,s=!1){this.status=e,this.statusText=t||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function qne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Vne(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ZB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function JB(e,t){let a=e;if(typeof a!="string"||!zne.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,r=!1;if(ZB)try{let i=new URL(window.location.href),o=a.startsWith("//")?new URL(i.protocol+a):new URL(a),l=Dl(o.pathname,t);o.origin===i.origin&&l!=null?a=l+o.search+o.hash:r=!0}catch{xi(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eH=["POST","PUT","PATCH","DELETE"];new Set(eH);var Qne=["GET",...eH];new Set(Qne);var Ff=h.createContext(null);Ff.displayName="DataRouter";var Ew=h.createContext(null);Ew.displayName="DataRouterState";var Yne=h.createContext(!1),tH=h.createContext({isTransitioning:!1});tH.displayName="ViewTransition";var Kne=h.createContext(new Map);Kne.displayName="Fetchers";var Xne=h.createContext(null);Xne.displayName="Await";var Hr=h.createContext(null);Hr.displayName="Navigation";var Yp=h.createContext(null);Yp.displayName="Location";var Ci=h.createContext({outlet:null,matches:[],isDataRoute:!1});Ci.displayName="Route";var Uk=h.createContext(null);Uk.displayName="RouteError";var nH="REACT_ROUTER_ERROR",Zne="REDIRECT",Jne="ROUTE_ERROR_RESPONSE";function eae(e){if(e.startsWith(`${nH}:${Zne}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function tae(e){if(e.startsWith(`${nH}:${Jne}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Wne(t.status,t.statusText,t.data)}catch{}}function nae(e,{relative:t}={}){da(Bf(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=h.useContext(Hr),{hash:r,pathname:i,search:o}=Kp(e,{relative:t}),l=i;return a!=="/"&&(l=i==="/"?a:El([a,i])),s.createHref({pathname:l,search:o,hash:r})}function Bf(){return h.useContext(Yp)!=null}function Jt(){return da(Bf(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Yp).location}var aH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sH(e){h.useContext(Hr).static||h.useLayoutEffect(e)}function wt(){let{isDataRoute:e}=h.useContext(Ci);return e?xae():aae()}function aae(){da(Bf(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(Ff),{basename:t,navigator:a}=h.useContext(Hr),{matches:s}=h.useContext(Ci),{pathname:r}=Jt(),i=JSON.stringify(Rk(s)),o=h.useRef(!1);return sH(()=>{o.current=!0}),h.useCallback((c,d={})=>{if(xi(o.current,aH),!o.current)return;if(typeof c=="number"){a.go(c);return}let u=zk(c,JSON.parse(i),r,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:El([t,u.pathname])),(d.replace?a.replace:a.push)(u,d.state,d)},[t,a,i,r,e])}var sae=h.createContext(null);function rae(e){let t=h.useContext(Ci).outlet;return h.useMemo(()=>t&&h.createElement(sae.Provider,{value:e},t),[t,e])}function Ql(){let{matches:e}=h.useContext(Ci),t=e[e.length-1];return t?t.params:{}}function Kp(e,{relative:t}={}){let{matches:a}=h.useContext(Ci),{pathname:s}=Jt(),r=JSON.stringify(Rk(a));return h.useMemo(()=>zk(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function iae(e,t){return rH(e,t)}function rH(e,t,a,s,r){da(Bf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(Hr),{matches:o}=h.useContext(Ci),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",f=l&&l.route;{let w=f&&f.path||"";oH(d,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Jt(),x;if(t){let w=typeof t=="string"?Uf(t):t;da(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=p;let v=x.pathname||"/",N=v;if(u!=="/"){let w=u.replace(/^\//,"").split("/");N="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=YB(e,{pathname:N});xi(f||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),xi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=uae(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:El([u,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:El([u,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,a,s,r);return t&&C?h.createElement(Yp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function oae(){let e=pae(),t=qne(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),a?h.createElement("pre",{style:r},a):null,o)}var lae=h.createElement(oae,null),iH=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=tae(e.digest);a&&(e=a)}let t=e!==void 0?h.createElement(Ci.Provider,{value:this.props.routeContext},h.createElement(Uk.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?h.createElement(cae,{error:e},t):t}};iH.contextType=Yne;var vS=new WeakMap;function cae({children:e,error:t}){let{basename:a}=h.useContext(Hr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=eae(t.digest);if(s){let r=vS.get(t);if(r)throw r;let i=JB(s.location,a);if(ZB&&!vS.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw vS.set(t,o),o}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function dae({routeContext:e,match:t,children:a}){let s=h.useContext(Ff);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(Ci.Provider,{value:e},a)}function uae(e,t=[],a=null,s=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,o=a?.errors;if(o!=null){let u=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);da(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(a)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:x}=a,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=a&&s?(u,f)=>{s(u,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:Vne(a.matches),errorInfo:f})}:void 0;return i.reduceRight((u,f,p)=>{let x,v=!1,N=null,b=null;a&&(x=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||lae,l&&(c<0&&p===0?(oH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):c===p&&(v=!0,b=f.route.hydrateFallbackElement||null)));let C=t.concat(i.slice(0,p+1)),w=()=>{let S;return x?S=N:v?S=b:f.route.Component?S=h.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,h.createElement(dae,{match:f,routeContext:{outlet:u,matches:C,isDataRoute:a!=null},children:S})};return a&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?h.createElement(iH,{location:a.location,revalidation:a.revalidation,component:N,error:x,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):w()},null)}function Fk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mae(e){let t=h.useContext(Ff);return da(t,Fk(e)),t}function fae(e){let t=h.useContext(Ew);return da(t,Fk(e)),t}function hae(e){let t=h.useContext(Ci);return da(t,Fk(e)),t}function Bk(e){let t=hae(e),a=t.matches[t.matches.length-1];return da(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function gae(){return Bk("useRouteId")}function pae(){let e=h.useContext(Uk),t=fae("useRouteError"),a=Bk("useRouteError");return e!==void 0?e:t.errors?.[a]}function xae(){let{router:e}=mae("useNavigate"),t=Bk("useNavigate"),a=h.useRef(!1);return sH(()=>{a.current=!0}),h.useCallback(async(r,i={})=>{xi(a.current,aH),a.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var YM={};function oH(e,t,a){!t&&!YM[e]&&(YM[e]=!0,xi(!1,a))}h.memo(yae);function yae({routes:e,future:t,state:a,onError:s}){return rH(e,void 0,a,s,t)}function li({to:e,replace:t,state:a,relative:s}){da(Bf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=h.useContext(Hr);xi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(Ci),{pathname:o}=Jt(),l=wt(),c=zk(e,Rk(i),o,s==="path"),d=JSON.stringify(c);return h.useEffect(()=>{l(JSON.parse(d),{replace:t,state:a,relative:s})},[l,d,s,t,a]),null}function Xp(e){return rae(e.context)}function bt(e){da(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bae({basename:e="/",children:t=null,location:a,navigationType:s="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){da(!Bf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:l,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[l,r,i,o]);typeof a=="string"&&(a=Uf(a));let{pathname:d="/",search:u="",hash:f="",state:p=null,key:x="default"}=a,v=h.useMemo(()=>{let N=Dl(d,l);return N==null?null:{location:{pathname:N,search:u,hash:f,state:p,key:x},navigationType:s}},[l,d,u,f,p,x,s]);return xi(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:h.createElement(Hr.Provider,{value:c},h.createElement(Yp.Provider,{children:t,value:v}))}function vae({children:e,location:t}){return iae(pT(e),t)}function pT(e,t=[]){let a=[];return h.Children.forEach(e,(s,r)=>{if(!h.isValidElement(s))return;let i=[...t,r];if(s.type===h.Fragment){a.push.apply(a,pT(s.props.children,i));return}da(s.type===bt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),da(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=pT(s.props.children,i)),a.push(o)}),a}var Ob="get",Mb="application/x-www-form-urlencoded";function kw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function wae(e){return kw(e)&&e.tagName.toLowerCase()==="button"}function Nae(e){return kw(e)&&e.tagName.toLowerCase()==="form"}function jae(e){return kw(e)&&e.tagName.toLowerCase()==="input"}function Cae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Sae(e,t){return e.button===0&&(!t||t==="_self")&&!Cae(e)}function xT(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let s=e[a];return t.concat(Array.isArray(s)?s.map(r=>[a,r]):[[a,s]])},[]))}function _ae(e,t){let a=xT(e);return t&&t.forEach((s,r)=>{a.has(r)||t.getAll(r).forEach(i=>{a.append(r,i)})}),a}var jy=null;function Aae(){if(jy===null)try{new FormData(document.createElement("form"),0),jy=!1}catch{jy=!0}return jy}var Tae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wS(e){return e!=null&&!Tae.has(e)?(xi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mb}"`),null):e}function Eae(e,t){let a,s,r,i,o;if(Nae(e)){let l=e.getAttribute("action");s=l?Dl(l,t):null,a=e.getAttribute("method")||Ob,r=wS(e.getAttribute("enctype"))||Mb,i=new FormData(e)}else if(wae(e)||jae(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Dl(c,t):null,a=e.getAttribute("formmethod")||l.getAttribute("method")||Ob,r=wS(e.getAttribute("formenctype"))||wS(l.getAttribute("enctype"))||Mb,i=new FormData(l,e),!Aae()){let{name:d,type:u,value:f}=e;if(u==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,f)}}else{if(kw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Ob,s=null,r=Mb,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:a.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hk(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kae(e,t,a,s){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&Dl(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function Lae(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Pae(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Dae(e,t,a){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await Lae(i,a);return o.links?o.links():[]}return[]}));return $ae(s.flat(1).filter(Pae).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function KM(e,t,a,s,r,i){let o=(c,d)=>a[d]?c.route.id!==a[d].route.id:!0,l=(c,d)=>a[d].pathname!==c.pathname||a[d].route.path?.endsWith("*")&&a[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Oae(e,t,{includeHydrateFallback:a}={}){return Mae(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Mae(e){return[...new Set(e)]}function Iae(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}function $ae(e,t){let a=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(Iae(r));return a.has(i)||(a.add(i),s.push({key:i,link:r})),s},[])}function lH(){let e=h.useContext(Ff);return Hk(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Rae(){let e=h.useContext(Ew);return Hk(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Gk=h.createContext(void 0);Gk.displayName="FrameworkContext";function cH(){let e=h.useContext(Gk);return Hk(e,"You must render this element inside a <HydratedRouter> element"),e}function zae(e,t){let a=h.useContext(Gk),[s,r]=h.useState(!1),[i,o]=h.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:f}=t,p=h.useRef(null);h.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let N=C=>{C.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(N,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[e]),h.useEffect(()=>{if(s){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[s]);let x=()=>{r(!0)},v=()=>{r(!1),o(!1)};return a?e!=="intent"?[i,p,{}]:[i,p,{onFocus:ag(l,x),onBlur:ag(c,v),onMouseEnter:ag(d,x),onMouseLeave:ag(u,v),onTouchStart:ag(f,x)}]:[!1,p,{}]}function ag(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function Uae({page:e,...t}){let{router:a}=lH(),s=h.useMemo(()=>YB(a.routes,e,a.basename),[a.routes,e,a.basename]);return s?h.createElement(Bae,{page:e,matches:s,...t}):null}function Fae(e){let{manifest:t,routeModules:a}=cH(),[s,r]=h.useState([]);return h.useEffect(()=>{let i=!1;return Dae(e,t,a).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,a]),s}function Bae({page:e,matches:t,...a}){let s=Jt(),{future:r,manifest:i,routeModules:o}=cH(),{basename:l}=lH(),{loaderData:c,matches:d}=Rae(),u=h.useMemo(()=>KM(e,t,d,i,s,"data"),[e,t,d,i,s]),f=h.useMemo(()=>KM(e,t,d,i,s,"assets"),[e,t,d,i,s]),p=h.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let N=new Set,b=!1;if(t.forEach(w=>{let S=i.routes[w.route.id];!S||!S.hasLoader||(!u.some(E=>E.route.id===w.route.id)&&w.route.id in c&&o[w.route.id]?.shouldRevalidate||S.hasClientLoader?b=!0:N.add(w.route.id))}),N.size===0)return[];let C=kae(e,l,r.unstable_trailingSlashAwareDataRequests,"data");return b&&N.size>0&&C.searchParams.set("_routes",t.filter(w=>N.has(w.route.id)).map(w=>w.route.id).join(",")),[C.pathname+C.search]},[l,r.unstable_trailingSlashAwareDataRequests,c,s,i,u,t,e,o]),x=h.useMemo(()=>Oae(f,i),[f,i]),v=Fae(f);return h.createElement(h.Fragment,null,p.map(N=>h.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...a})),x.map(N=>h.createElement("link",{key:N,rel:"modulepreload",href:N,...a})),v.map(({key:N,link:b})=>h.createElement("link",{key:N,nonce:a.nonce,...b,crossOrigin:b.crossOrigin??a.crossOrigin})))}function Hae(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var Gae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gae&&(window.__reactRouterVersion="7.13.0")}catch{}function Wae({basename:e,children:t,unstable_useTransitions:a,window:s}){let r=h.useRef();r.current==null&&(r.current=Nne({window:s,v5Compat:!0}));let i=r.current,[o,l]=h.useState({action:i.action,location:i.location}),c=h.useCallback(d=>{a===!1?l(d):h.startTransition(()=>l(d))},[a]);return h.useLayoutEffect(()=>i.listen(c),[i,c]),h.createElement(bae,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:a})}var dH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uH=h.forwardRef(function({onClick:t,discover:a="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},v){let{basename:N,unstable_useTransitions:b}=h.useContext(Hr),C=typeof d=="string"&&dH.test(d),w=JB(d,N);d=w.to;let S=nae(d,{relative:r}),[E,k,_]=zae(s,x),A=Qae(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:b});function T(z){t&&t(z),z.defaultPrevented||A(z)}let $=h.createElement("a",{...x,..._,href:w.absoluteURL||S,onClick:w.isExternal||i?t:T,ref:Hae(v,k),target:c,"data-discover":!C&&a==="render"?"true":void 0});return E&&!C?h.createElement(h.Fragment,null,$,h.createElement(Uae,{page:S})):$});uH.displayName="Link";var It=h.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let f=Kp(o,{relative:d.relative}),p=Jt(),x=h.useContext(Ew),{navigator:v,basename:N}=h.useContext(Hr),b=x!=null&&Jae(f)&&l===!0,C=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,w=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(w=w.toLowerCase(),S=S?S.toLowerCase():null,C=C.toLowerCase()),S&&N&&(S=Dl(S,N)||S);const E=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=w===C||!r&&w.startsWith(C)&&w.charAt(E)==="/",_=S!=null&&(S===C||!r&&S.startsWith(C)&&S.charAt(C.length)==="/"),A={isActive:k,isPending:_,isTransitioning:b},T=k?t:void 0,$;typeof s=="function"?$=s(A):$=[s,k?"active":null,_?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(A):i;return h.createElement(uH,{...d,"aria-current":T,className:$,ref:u,style:z,to:o,viewTransition:l},typeof c=="function"?c(A):c)});It.displayName="NavLink";var qae=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:s,replace:r,state:i,method:o=Ob,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},v)=>{let{unstable_useTransitions:N}=h.useContext(Hr),b=Xae(),C=Zae(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&dH.test(l),E=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let _=k.nativeEvent.submitter,A=_?.getAttribute("formmethod")||o,T=()=>b(_||k.currentTarget,{fetcherKey:t,method:A,navigate:a,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p});N&&a!==!1?h.startTransition(()=>T()):T()};return h.createElement("form",{ref:v,method:w,action:C,onSubmit:s?c:E,...x,"data-discover":!S&&e==="render"?"true":void 0})});qae.displayName="Form";function Vae(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mH(e){let t=h.useContext(Ff);return da(t,Vae(e)),t}function Qae(e,{target:t,replace:a,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=wt(),u=Jt(),f=Kp(e,{relative:i});return h.useCallback(p=>{if(Sae(p,t)){p.preventDefault();let x=a!==void 0?a:op(u)===op(f),v=()=>d(e,{replace:x,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?h.startTransition(()=>v()):v()}},[u,d,f,a,s,t,e,r,i,o,l,c])}function Us(e){xi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(xT(e)),a=h.useRef(!1),s=Jt(),r=h.useMemo(()=>_ae(s.search,a.current?null:t.current),[s.search]),i=wt(),o=h.useCallback((l,c)=>{const d=xT(typeof l=="function"?l(new URLSearchParams(r)):l);a.current=!0,i("?"+d,c)},[i,r]);return[r,o]}var Yae=0,Kae=()=>`__${String(++Yae)}__`;function Xae(){let{router:e}=mH("useSubmit"),{basename:t}=h.useContext(Hr),a=gae(),s=e.fetch,r=e.navigate;return h.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:u,body:f}=Eae(i,t);if(o.navigate===!1){let p=o.fetcherKey||Kae();await s(p,a,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:f,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await r(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:f,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,r,t,a])}function Zae(e,{relative:t}={}){let{basename:a}=h.useContext(Hr),s=h.useContext(Ci);da(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Kp(e||".",{relative:t})},o=Jt();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:El([a,i.pathname])),op(i)}function Jae(e,{relative:t}={}){let a=h.useContext(tH);da(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=mH("useViewTransitionState"),r=Kp(e,{relative:t});if(!a.isTransitioning)return!1;let i=Dl(a.currentLocation.pathname,s)||a.currentLocation.pathname,o=Dl(a.nextLocation.pathname,s)||a.nextLocation.pathname;return tv(r.pathname,o)!=null||tv(r.pathname,i)!=null}var Hi=QB();const Cy=Xi(Hi);function fH(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(a=fH(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Pt(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=fH(e))&&(s&&(s+=" "),s+=t);return s}function ese(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}ese(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Zp=e=>typeof e=="number"&&!isNaN(e),ju=e=>typeof e=="string",Ol=e=>typeof e=="function",tse=e=>ju(e)||Zp(e),yT=e=>ju(e)||Ol(e)?e:null,nse=(e,t)=>e===!1||Zp(e)&&e>0?e:t,bT=e=>h.isValidElement(e)||ju(e)||Ol(e)||Zp(e);function ase(e,t,a=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,a)})})}function sse({enter:e,exit:t,appendPosition:a=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:d,isIn:u,playToast:f}){let p=a?`${e}--${o}`:e,x=a?`${t}--${o}`:t,v=h.useRef(0);return h.useLayoutEffect(()=>{let N=d.current,b=p.split(" "),C=w=>{w.target===d.current&&(f(),N.removeEventListener("animationend",C),N.removeEventListener("animationcancel",C),v.current===0&&w.type!=="animationcancel"&&N.classList.remove(...b))};N.classList.add(...b),N.addEventListener("animationend",C),N.addEventListener("animationcancel",C)},[]),h.useEffect(()=>{let N=d.current,b=()=>{N.removeEventListener("animationend",b),s?ase(N,c,r):c()};u||(l?b():(v.current=1,N.className+=` ${x}`,N.addEventListener("animationend",b)))},[u]),yt.createElement(yt.Fragment,null,i)}}function XM(e,t){return{content:hH(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function hH(e,t,a=!1){return h.isValidElement(e)&&!ju(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):Ol(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):e}function rse({closeToast:e,theme:t,ariaLabel:a="close"}){return yt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":a},yt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},yt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function ise({delay:e,isRunning:t,closeToast:a,type:s="default",hide:r,className:i,controlledProgress:o,progress:l,rtl:c,isIn:d,theme:u}){let f=r||o&&l===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(p.transform=`scaleX(${l})`);let x=Pt("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),v=Ol(i)?i({rtl:c,type:s,defaultClassName:x}):Pt(x,i),N={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{d&&a()}};return yt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},yt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),yt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:v,style:p,...N}))}var ose=1,gH=()=>`${ose++}`;function lse(e,t,a){let s=1,r=0,i=[],o=[],l=t,c=new Map,d=new Set,u=w=>(d.add(w),()=>d.delete(w)),f=()=>{o=Array.from(c.values()),d.forEach(w=>w())},p=({containerId:w,toastId:S,updateId:E})=>{let k=w?w!==e:e!==1,_=c.has(S)&&E==null;return k||_},x=(w,S)=>{c.forEach(E=>{var k;(S==null||S===E.props.toastId)&&((k=E.toggle)==null||k.call(E,w))})},v=w=>{var S,E;(E=(S=w.props)==null?void 0:S.onClose)==null||E.call(S,w.removalReason),w.isActive=!1},N=w=>{if(w==null)c.forEach(v);else{let S=c.get(w);S&&v(S)}f()},b=()=>{r-=i.length,i=[]},C=w=>{var S,E;let{toastId:k,updateId:_}=w.props,A=_==null;w.staleId&&c.delete(w.staleId),w.isActive=!0,c.set(k,w),f(),a(XM(w,A?"added":"updated")),A&&((E=(S=w.props).onOpen)==null||E.call(S))};return{id:e,props:l,observe:u,toggle:x,removeToast:N,toasts:c,clearQueue:b,buildToast:(w,S)=>{if(p(S))return;let{toastId:E,updateId:k,data:_,staleId:A,delay:T}=S,$=k==null;$&&r++;let z={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([P,M])=>M!=null)),toastId:E,updateId:k,data:_,isIn:!1,className:yT(S.className||l.toastClassName),progressClassName:yT(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:nse(S.autoClose,l.autoClose),closeToast(P){c.get(E).removalReason=P,N(E)},deleteToast(){let P=c.get(E);if(P!=null){if(a(XM(P,"removed")),c.delete(E),r--,r<0&&(r=0),i.length>0){C(i.shift());return}f()}}};z.closeButton=l.closeButton,S.closeButton===!1||bT(S.closeButton)?z.closeButton=S.closeButton:S.closeButton===!0&&(z.closeButton=bT(l.closeButton)?l.closeButton:!0);let F={content:w,props:z,staleId:A};l.limit&&l.limit>0&&r>l.limit&&$?i.push(F):Zp(T)?setTimeout(()=>{C(F)},T):C(F)},setProps(w){l=w},setToggle:(w,S)=>{let E=c.get(w);E&&(E.toggle=S)},isToastActive:w=>{var S;return(S=c.get(w))==null?void 0:S.isActive},getSnapshot:()=>o}}var Gs=new Map,lp=[],vT=new Set,cse=e=>vT.forEach(t=>t(e)),pH=()=>Gs.size>0;function dse(){lp.forEach(e=>yH(e.content,e.options)),lp=[]}var use=(e,{containerId:t})=>{var a;return(a=Gs.get(t||1))==null?void 0:a.toasts.get(e)};function xH(e,t){var a;if(t)return!!((a=Gs.get(t))!=null&&a.isToastActive(e));let s=!1;return Gs.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function mse(e){if(!pH()){lp=lp.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||tse(e))Gs.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Gs.get(e.containerId);t?t.removeToast(e.id):Gs.forEach(a=>{a.removeToast(e.id)})}}var fse=(e={})=>{Gs.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function yH(e,t){bT(e)&&(pH()||lp.push({content:e,options:t}),Gs.forEach(a=>{a.buildToast(e,t)}))}function hse(e){var t;(t=Gs.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function bH(e,t){Gs.forEach(a=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===a.id)&&a.toggle(e,t?.id)})}function gse(e){let t=e.containerId||1;return{subscribe(a){let s=lse(t,e,cse);Gs.set(t,s);let r=s.observe(a);return dse(),()=>{r(),Gs.delete(t)}},setProps(a){var s;(s=Gs.get(t))==null||s.setProps(a)},getSnapshot(){var a;return(a=Gs.get(t))==null?void 0:a.getSnapshot()}}}function pse(e){return vT.add(e),()=>{vT.delete(e)}}function xse(e){return e&&(ju(e.toastId)||Zp(e.toastId))?e.toastId:gH()}function Jp(e,t){return yH(e,t),t.toastId}function Lw(e,t){return{...t,type:t&&t.type||e,toastId:xse(t)}}function Pw(e){return(t,a)=>Jp(t,Lw(e,a))}function W(e,t){return Jp(e,Lw("default",t))}W.loading=(e,t)=>Jp(e,Lw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function yse(e,{pending:t,error:a,success:s},r){let i;t&&(i=ju(t)?W.loading(t,r):W.loading(t.render,{...r,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,u,f)=>{if(u==null){W.dismiss(i);return}let p={type:d,...o,...r,data:f},x=ju(u)?{render:u}:u;return i?W.update(i,{...p,...x}):W(x.render,{...p,...x}),f},c=Ol(e)?e():e;return c.then(d=>l("success",s,d)).catch(d=>l("error",a,d)),c}W.promise=yse;W.success=Pw("success");W.info=Pw("info");W.error=Pw("error");W.warning=Pw("warning");W.warn=W.warning;W.dark=(e,t)=>Jp(e,Lw("default",{theme:"dark",...t}));function bse(e){mse(e)}W.dismiss=bse;W.clearWaitingQueue=fse;W.isActive=xH;W.update=(e,t={})=>{let a=use(e,t);if(a){let{props:s,content:r}=a,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:gH()};i.toastId!==e&&(i.staleId=e);let o=i.render||r;delete i.render,Jp(o,i)}};W.done=e=>{W.update(e,{progress:1})};W.onChange=pse;W.play=e=>bH(!0,e);W.pause=e=>bH(!1,e);function vse(e){var t;let{subscribe:a,getSnapshot:s,setProps:r}=h.useRef(gse(e)).current;r(e);let i=(t=h.useSyncExternalStore(a,s,s))==null?void 0:t.slice();function o(l){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:u}=d.props;c.has(u)||c.set(u,[]),c.get(u).push(d)}),Array.from(c,d=>l(d[0],d[1]))}return{getToastToRender:o,isToastActive:xH,count:i?.length}}function wse(e){let[t,a]=h.useState(!1),[s,r]=h.useState(!1),i=h.useRef(null),o=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:f}=e;hse({id:e.toastId,containerId:e.containerId,fn:a}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||C(),window.addEventListener("focus",b),window.addEventListener("blur",C)}function x(){window.removeEventListener("focus",b),window.removeEventListener("blur",C)}function v(A){if(e.draggable===!0||e.draggable===A.pointerType){w();let T=i.current;o.canCloseOnClick=!0,o.canDrag=!0,T.style.transition="none",e.draggableDirection==="x"?(o.start=A.clientX,o.removalDistance=T.offsetWidth*(e.draggablePercent/100)):(o.start=A.clientY,o.removalDistance=T.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function N(A){let{top:T,bottom:$,left:z,right:F}=i.current.getBoundingClientRect();A.nativeEvent.type!=="touchend"&&e.pauseOnHover&&A.clientX>=z&&A.clientX<=F&&A.clientY>=T&&A.clientY<=$?C():b()}function b(){a(!0)}function C(){a(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",E),document.addEventListener("pointerup",k)}function S(){document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",k)}function E(A){let T=i.current;if(o.canDrag&&T){o.didMove=!0,t&&C(),e.draggableDirection==="x"?o.delta=A.clientX-o.start:o.delta=A.clientY-o.start,o.start!==A.clientX&&(o.canCloseOnClick=!1);let $=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;T.style.transform=`translate3d(${$},0)`,T.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function k(){S();let A=i.current;if(o.canDrag&&o.didMove&&A){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}A.style.transition="transform 0.2s, opacity 0.2s",A.style.removeProperty("transform"),A.style.removeProperty("opacity")}}let _={onPointerDown:v,onPointerUp:N};return l&&c&&(_.onMouseEnter=C,e.stacked||(_.onMouseLeave=b)),f&&(_.onClick=A=>{u&&u(A),o.canCloseOnClick&&d(!0)}),{playToast:b,pauseToast:C,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:_}}var Nse=typeof window<"u"?h.useLayoutEffect:h.useEffect,Dw=({theme:e,type:t,isLoading:a,...s})=>yt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function jse(e){return yt.createElement(Dw,{...e},yt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Cse(e){return yt.createElement(Dw,{...e},yt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Sse(e){return yt.createElement(Dw,{...e},yt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function _se(e){return yt.createElement(Dw,{...e},yt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Ase(){return yt.createElement("div",{className:"Toastify__spinner"})}var wT={info:Cse,warning:jse,success:Sse,error:_se,spinner:Ase},Tse=e=>e in wT;function Ese({theme:e,type:t,isLoading:a,icon:s}){let r=null,i={theme:e,type:t};return s===!1||(Ol(s)?r=s({...i,isLoading:a}):h.isValidElement(s)?r=h.cloneElement(s,i):a?r=wT.spinner():Tse(t)&&(r=wT[t](i))),r}var kse=e=>{let{isRunning:t,preventExitTransition:a,toastRef:s,eventHandlers:r,playToast:i}=wse(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:f,closeToast:p,transition:x,position:v,className:N,style:b,progressClassName:C,updateId:w,role:S,progress:E,rtl:k,toastId:_,deleteToast:A,isIn:T,isLoading:$,closeOnClick:z,theme:F,ariaLabel:P}=e,M=Pt("Toastify__toast",`Toastify__toast-theme--${F}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":z}),G=Ol(N)?N({rtl:k,position:v,type:u,defaultClassName:M}):Pt(M,N),Q=Ese(e),V=!!E||!c,X={closeToast:p,type:u,theme:F},q=null;return o===!1||(Ol(o)?q=o(X):h.isValidElement(o)?q=h.cloneElement(o,X):q=rse(X)),yt.createElement(x,{isIn:T,done:A,position:v,preventExitTransition:a,nodeRef:s,playToast:i},yt.createElement("div",{id:_,tabIndex:0,onClick:d,"data-in":T,className:G,...r,style:b,ref:s,...T&&{role:S,"aria-label":P}},Q!=null&&yt.createElement("div",{className:Pt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!$})},Q),hH(l,e,!t),q,!e.customProgressBar&&yt.createElement(ise,{...w&&!V?{key:`p-${w}`}:{},rtl:k,theme:F,delay:c,isRunning:t,isIn:T,closeToast:p,hide:f,type:u,className:C,controlledProgress:V,progress:E||0})))},Lse=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Pse=sse(Lse("bounce",!0)),Dse={position:"top-right",transition:Pse,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function Ose(e){let t={...Dse,...e},a=e.stacked,[s,r]=h.useState(!0),i=h.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=vse(t),{className:d,style:u,rtl:f,containerId:p,hotKeys:x}=t;function v(b){let C=Pt("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":f});return Ol(d)?d({position:b,rtl:f,defaultClassName:C}):Pt(C,yT(d))}function N(){a&&(r(!0),W.play())}return Nse(()=>{var b;if(a){let C=i.current.querySelectorAll('[data-in="true"]'),w=12,S=(b=t.position)==null?void 0:b.includes("top"),E=0,k=0;Array.from(C).reverse().forEach((_,A)=>{let T=_;T.classList.add("Toastify__toast--stacked"),A>0&&(T.dataset.collapsed=`${s}`),T.dataset.pos||(T.dataset.pos=S?"top":"bot");let $=E*(s?.2:1)+(s?0:w*A);T.style.setProperty("--y",`${S?$:$*-1}px`),T.style.setProperty("--g",`${w}`),T.style.setProperty("--s",`${1-(s?k:0)}`),E+=T.offsetHeight,k+=.025})}},[s,c,a]),h.useEffect(()=>{function b(C){var w;let S=i.current;x(C)&&((w=S.querySelector('[tabIndex="0"]'))==null||w.focus(),r(!1),W.pause()),C.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),W.play())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[x]),yt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{a&&(r(!1),W.pause())},onMouseLeave:N,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((b,C)=>{let w=C.length?{...u}:{...u,pointerEvents:"none"};return yt.createElement("div",{tabIndex:-1,className:v(b),"data-stacked":a,style:w,key:`c-${b}`},C.map(({content:S,props:E})=>yt.createElement(kse,{...E,stacked:a,collapseAll:N,isIn:l(E.toastId,E.containerId),key:`t-${E.key}`},S)))}))}function vH(e,t){return function(){return e.apply(t,arguments)}}const{toString:Mse}=Object.prototype,{getPrototypeOf:Wk}=Object,{iterator:Ow,toStringTag:wH}=Symbol,Mw=(e=>t=>{const a=Mse.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Zi=e=>(e=e.toLowerCase(),t=>Mw(t)===e),Iw=e=>t=>typeof t===e,{isArray:Hf}=Array,bf=Iw("undefined");function ex(e){return e!==null&&!bf(e)&&e.constructor!==null&&!bf(e.constructor)&&dr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const NH=Zi("ArrayBuffer");function Ise(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&NH(e.buffer),t}const $se=Iw("string"),dr=Iw("function"),jH=Iw("number"),tx=e=>e!==null&&typeof e=="object",Rse=e=>e===!0||e===!1,Ib=e=>{if(Mw(e)!=="object")return!1;const t=Wk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(wH in e)&&!(Ow in e)},zse=e=>{if(!tx(e)||ex(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Use=Zi("Date"),Fse=Zi("File"),Bse=Zi("Blob"),Hse=Zi("FileList"),Gse=e=>tx(e)&&dr(e.pipe),Wse=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||dr(e.append)&&((t=Mw(e))==="formdata"||t==="object"&&dr(e.toString)&&e.toString()==="[object FormData]"))},qse=Zi("URLSearchParams"),[Vse,Qse,Yse,Kse]=["ReadableStream","Request","Response","Headers"].map(Zi),Xse=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nx(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Hf(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(ex(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function CH(e,t){if(ex(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s=a.length,r;for(;s-- >0;)if(r=a[s],t===r.toLowerCase())return r;return null}const su=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,SH=e=>!bf(e)&&e!==su;function NT(){const{caseless:e,skipUndefined:t}=SH(this)&&this||{},a={},s=(r,i)=>{const o=e&&CH(a,i)||i;Ib(a[o])&&Ib(r)?a[o]=NT(a[o],r):Ib(r)?a[o]=NT({},r):Hf(r)?a[o]=r.slice():(!t||!bf(r))&&(a[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&nx(arguments[r],s);return a}const Zse=(e,t,a,{allOwnKeys:s}={})=>(nx(t,(r,i)=>{a&&dr(r)?e[i]=vH(r,a):e[i]=r},{allOwnKeys:s}),e),Jse=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ere=(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},tre=(e,t,a,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=a!==!1&&Wk(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},nre=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return s!==-1&&s===a},are=e=>{if(!e)return null;if(Hf(e))return e;let t=e.length;if(!jH(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},sre=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Wk(Uint8Array)),rre=(e,t)=>{const s=(e&&e[Ow]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},ire=(e,t)=>{let a;const s=[];for(;(a=e.exec(t))!==null;)s.push(a);return s},ore=Zi("HTMLFormElement"),lre=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,r){return s.toUpperCase()+r}),ZM=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),cre=Zi("RegExp"),_H=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};nx(a,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},dre=e=>{_H(e,(t,a)=>{if(dr(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(dr(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},ure=(e,t)=>{const a={},s=r=>{r.forEach(i=>{a[i]=!0})};return Hf(e)?s(e):s(String(e).split(t)),a},mre=()=>{},fre=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function hre(e){return!!(e&&dr(e.append)&&e[wH]==="FormData"&&e[Ow])}const gre=e=>{const t=new Array(10),a=(s,r)=>{if(tx(s)){if(t.indexOf(s)>=0)return;if(ex(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Hf(s)?[]:{};return nx(s,(o,l)=>{const c=a(o,r+1);!bf(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return a(e,0)},pre=Zi("AsyncFunction"),xre=e=>e&&(tx(e)||dr(e))&&dr(e.then)&&dr(e.catch),AH=((e,t)=>e?setImmediate:t?((a,s)=>(su.addEventListener("message",({source:r,data:i})=>{r===su&&i===a&&s.length&&s.shift()()},!1),r=>{s.push(r),su.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",dr(su.postMessage)),yre=typeof queueMicrotask<"u"?queueMicrotask.bind(su):typeof process<"u"&&process.nextTick||AH,bre=e=>e!=null&&dr(e[Ow]),lt={isArray:Hf,isArrayBuffer:NH,isBuffer:ex,isFormData:Wse,isArrayBufferView:Ise,isString:$se,isNumber:jH,isBoolean:Rse,isObject:tx,isPlainObject:Ib,isEmptyObject:zse,isReadableStream:Vse,isRequest:Qse,isResponse:Yse,isHeaders:Kse,isUndefined:bf,isDate:Use,isFile:Fse,isBlob:Bse,isRegExp:cre,isFunction:dr,isStream:Gse,isURLSearchParams:qse,isTypedArray:sre,isFileList:Hse,forEach:nx,merge:NT,extend:Zse,trim:Xse,stripBOM:Jse,inherits:ere,toFlatObject:tre,kindOf:Mw,kindOfTest:Zi,endsWith:nre,toArray:are,forEachEntry:rre,matchAll:ire,isHTMLForm:ore,hasOwnProperty:ZM,hasOwnProp:ZM,reduceDescriptors:_H,freezeMethods:dre,toObjectSet:ure,toCamelCase:lre,noop:mre,toFiniteNumber:fre,findKey:CH,global:su,isContextDefined:SH,isSpecCompliantForm:hre,toJSONObject:gre,isAsyncFn:pre,isThenable:xre,setImmediate:AH,asap:yre,isIterable:bre};function an(e,t,a,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}lt.inherits(an,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lt.toJSONObject(this.config),code:this.code,status:this.status}}});const TH=an.prototype,EH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{EH[e]={value:e}});Object.defineProperties(an,EH);Object.defineProperty(TH,"isAxiosError",{value:!0});an.from=(e,t,a,s,r,i)=>{const o=Object.create(TH);lt.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return an.call(o,l,c,a,s,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const vre=null;function jT(e){return lt.isPlainObject(e)||lt.isArray(e)}function kH(e){return lt.endsWith(e,"[]")?e.slice(0,-2):e}function JM(e,t,a){return e?e.concat(t).map(function(r,i){return r=kH(r),!a&&i?"["+r+"]":r}).join(a?".":""):t}function wre(e){return lt.isArray(e)&&!e.some(jT)}const Nre=lt.toFlatObject(lt,{},null,function(t){return/^is[A-Z]/.test(t)});function $w(e,t,a){if(!lt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=lt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,b){return!lt.isUndefined(b[N])});const s=a.metaTokens,r=a.visitor||u,i=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&lt.isSpecCompliantForm(t);if(!lt.isFunction(r))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(lt.isDate(v))return v.toISOString();if(lt.isBoolean(v))return v.toString();if(!c&&lt.isBlob(v))throw new an("Blob is not supported. Use a Buffer instead.");return lt.isArrayBuffer(v)||lt.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,N,b){let C=v;if(v&&!b&&typeof v=="object"){if(lt.endsWith(N,"{}"))N=s?N:N.slice(0,-2),v=JSON.stringify(v);else if(lt.isArray(v)&&wre(v)||(lt.isFileList(v)||lt.endsWith(N,"[]"))&&(C=lt.toArray(v)))return N=kH(N),C.forEach(function(S,E){!(lt.isUndefined(S)||S===null)&&t.append(o===!0?JM([N],E,i):o===null?N:N+"[]",d(S))}),!1}return jT(v)?!0:(t.append(JM(b,N,i),d(v)),!1)}const f=[],p=Object.assign(Nre,{defaultVisitor:u,convertValue:d,isVisitable:jT});function x(v,N){if(!lt.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(v),lt.forEach(v,function(C,w){(!(lt.isUndefined(C)||C===null)&&r.call(t,C,lt.isString(w)?w.trim():w,N,p))===!0&&x(C,N?N.concat(w):[w])}),f.pop()}}if(!lt.isObject(e))throw new TypeError("data must be an object");return x(e),t}function eI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function qk(e,t){this._pairs=[],e&&$w(e,this,t)}const LH=qk.prototype;LH.append=function(t,a){this._pairs.push([t,a])};LH.toString=function(t){const a=t?function(s){return t.call(this,s,eI)}:eI;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function jre(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function PH(e,t,a){if(!t)return e;const s=a&&a.encode||jre;lt.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(t,a):i=lt.isURLSearchParams(t)?t.toString():new qk(t,a).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class tI{constructor(){this.handlers=[]}use(t,a,s){return this.handlers.push({fulfilled:t,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){lt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const DH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cre=typeof URLSearchParams<"u"?URLSearchParams:qk,Sre=typeof FormData<"u"?FormData:null,_re=typeof Blob<"u"?Blob:null,Are={isBrowser:!0,classes:{URLSearchParams:Cre,FormData:Sre,Blob:_re},protocols:["http","https","file","blob","url","data"]},Vk=typeof window<"u"&&typeof document<"u",CT=typeof navigator=="object"&&navigator||void 0,Tre=Vk&&(!CT||["ReactNative","NativeScript","NS"].indexOf(CT.product)<0),Ere=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kre=Vk&&window.location.href||"http://localhost",Lre=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vk,hasStandardBrowserEnv:Tre,hasStandardBrowserWebWorkerEnv:Ere,navigator:CT,origin:kre},Symbol.toStringTag,{value:"Module"})),Os={...Lre,...Are};function Pre(e,t){return $w(e,new Os.classes.URLSearchParams,{visitor:function(a,s,r,i){return Os.isNode&&lt.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Dre(e){return lt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ore(e){const t={},a=Object.keys(e);let s;const r=a.length;let i;for(s=0;s<r;s++)i=a[s],t[i]=e[i];return t}function OH(e){function t(a,s,r,i){let o=a[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=a.length;return o=!o&&lt.isArray(r)?r.length:o,c?(lt.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!lt.isObject(r[o]))&&(r[o]=[]),t(a,s,r[o],i)&&lt.isArray(r[o])&&(r[o]=Ore(r[o])),!l)}if(lt.isFormData(e)&&lt.isFunction(e.entries)){const a={};return lt.forEachEntry(e,(s,r)=>{t(Dre(s),r,a,0)}),a}return null}function Mre(e,t,a){if(lt.isString(e))try{return(t||JSON.parse)(e),lt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const ax={transitional:DH,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const s=a.getContentType()||"",r=s.indexOf("application/json")>-1,i=lt.isObject(t);if(i&&lt.isHTMLForm(t)&&(t=new FormData(t)),lt.isFormData(t))return r?JSON.stringify(OH(t)):t;if(lt.isArrayBuffer(t)||lt.isBuffer(t)||lt.isStream(t)||lt.isFile(t)||lt.isBlob(t)||lt.isReadableStream(t))return t;if(lt.isArrayBufferView(t))return t.buffer;if(lt.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Pre(t,this.formSerializer).toString();if((l=lt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return $w(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),Mre(t)):t}],transformResponse:[function(t){const a=this.transitional||ax.transitional,s=a&&a.forcedJSONParsing,r=this.responseType==="json";if(lt.isResponse(t)||lt.isReadableStream(t))return t;if(t&&lt.isString(t)&&(s&&!this.responseType||r)){const o=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?an.from(l,an.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Os.classes.FormData,Blob:Os.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lt.forEach(["delete","get","head","post","put","patch"],e=>{ax.headers[e]={}});const Ire=lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$re=e=>{const t={};let a,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),a=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!a||t[a]&&Ire[a])&&(a==="set-cookie"?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t},nI=Symbol("internals");function sg(e){return e&&String(e).trim().toLowerCase()}function $b(e){return e===!1||e==null?e:lt.isArray(e)?e.map($b):String(e)}function Rre(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}const zre=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function NS(e,t,a,s,r){if(lt.isFunction(s))return s.call(this,t,a);if(r&&(t=a),!!lt.isString(t)){if(lt.isString(s))return t.indexOf(s)!==-1;if(lt.isRegExp(s))return s.test(t)}}function Ure(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,s)=>a.toUpperCase()+s)}function Fre(e,t){const a=lt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let ur=class{constructor(t){t&&this.set(t)}set(t,a,s){const r=this;function i(l,c,d){const u=sg(c);if(!u)throw new Error("header name must be a non-empty string");const f=lt.findKey(r,u);(!f||r[f]===void 0||d===!0||d===void 0&&r[f]!==!1)&&(r[f||c]=$b(l))}const o=(l,c)=>lt.forEach(l,(d,u)=>i(d,u,c));if(lt.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(lt.isString(t)&&(t=t.trim())&&!zre(t))o($re(t),a);else if(lt.isObject(t)&&lt.isIterable(t)){let l={},c,d;for(const u of t){if(!lt.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?lt.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,a)}else t!=null&&i(a,t,s);return this}get(t,a){if(t=sg(t),t){const s=lt.findKey(this,t);if(s){const r=this[s];if(!a)return r;if(a===!0)return Rre(r);if(lt.isFunction(a))return a.call(this,r,s);if(lt.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=sg(t),t){const s=lt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!a||NS(this,this[s],s,a)))}return!1}delete(t,a){const s=this;let r=!1;function i(o){if(o=sg(o),o){const l=lt.findKey(s,o);l&&(!a||NS(s,s[l],l,a))&&(delete s[l],r=!0)}}return lt.isArray(t)?t.forEach(i):i(t),r}clear(t){const a=Object.keys(this);let s=a.length,r=!1;for(;s--;){const i=a[s];(!t||NS(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const a=this,s={};return lt.forEach(this,(r,i)=>{const o=lt.findKey(s,i);if(o){a[o]=$b(r),delete a[i];return}const l=t?Ure(i):String(i).trim();l!==i&&delete a[i],a[l]=$b(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return lt.forEach(this,(s,r)=>{s!=null&&s!==!1&&(a[r]=t&&lt.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const s=new this(t);return a.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[nI]=this[nI]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=sg(o);s[l]||(Fre(r,o),s[l]=!0)}return lt.isArray(t)?t.forEach(i):i(t),this}};ur.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);lt.reduceDescriptors(ur.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[a]=s}}});lt.freezeMethods(ur);function jS(e,t){const a=this||ax,s=t||a,r=ur.from(s.headers);let i=s.data;return lt.forEach(e,function(l){i=l.call(a,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function MH(e){return!!(e&&e.__CANCEL__)}function Gf(e,t,a){an.call(this,e??"canceled",an.ERR_CANCELED,t,a),this.name="CanceledError"}lt.inherits(Gf,an,{__CANCEL__:!0});function IH(e,t,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):t(new an("Request failed with status code "+a.status,[an.ERR_BAD_REQUEST,an.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Bre(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Hre(e,t){e=e||10;const a=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];o||(o=d),a[r]=c,s[r]=d;let f=i,p=0;for(;f!==r;)p+=a[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),d-o<t)return;const x=u&&d-u;return x?Math.round(p*1e3/x):void 0}}function Gre(e,t){let a=0,s=1e3/t,r,i;const o=(d,u=Date.now())=>{a=u,r=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-a;f>=s?o(d,u):(r=d,i||(i=setTimeout(()=>{i=null,o(r)},s-f)))},()=>r&&o(r)]}const nv=(e,t,a=3)=>{let s=0;const r=Hre(50,250);return Gre(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,d=r(c),u=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},a)},aI=(e,t)=>{const a=e!=null;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},sI=e=>(...t)=>lt.asap(()=>e(...t)),Wre=Os.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,Os.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(Os.origin),Os.navigator&&/(msie|trident)/i.test(Os.navigator.userAgent)):()=>!0,qre=Os.hasStandardBrowserEnv?{write(e,t,a,s,r,i){const o=[e+"="+encodeURIComponent(t)];lt.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),lt.isString(s)&&o.push("path="+s),lt.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Vre(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Qre(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $H(e,t,a){let s=!Vre(t);return e&&(s||a==!1)?Qre(e,t):t}const rI=e=>e instanceof ur?{...e}:e;function Cu(e,t){t=t||{};const a={};function s(d,u,f,p){return lt.isPlainObject(d)&&lt.isPlainObject(u)?lt.merge.call({caseless:p},d,u):lt.isPlainObject(u)?lt.merge({},u):lt.isArray(u)?u.slice():u}function r(d,u,f,p){if(lt.isUndefined(u)){if(!lt.isUndefined(d))return s(void 0,d,f,p)}else return s(d,u,f,p)}function i(d,u){if(!lt.isUndefined(u))return s(void 0,u)}function o(d,u){if(lt.isUndefined(u)){if(!lt.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,f){if(f in t)return s(d,u);if(f in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,f)=>r(rI(d),rI(u),f,!0)};return lt.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||r,p=f(e[u],t[u],u);lt.isUndefined(p)&&f!==l||(a[u]=p)}),a}const RH=e=>{const t=Cu({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=ur.from(o),t.url=PH($H(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),lt.isFormData(a)){if(Os.hasStandardBrowserEnv||Os.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(lt.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&o.set(u,f)})}}if(Os.hasStandardBrowserEnv&&(s&&lt.isFunction(s)&&(s=s(t)),s||s!==!1&&Wre(t.url))){const c=r&&i&&qre.read(i);c&&o.set(r,c)}return t},Yre=typeof XMLHttpRequest<"u",Kre=Yre&&function(e){return new Promise(function(a,s){const r=RH(e);let i=r.data;const o=ur.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=r,u,f,p,x,v;function N(){x&&x(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function C(){if(!b)return;const S=ur.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};IH(function(A){a(A),N()},function(A){s(A),N()},k),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(s(new an("Request aborted",an.ECONNABORTED,e,b)),b=null)},b.onerror=function(E){const k=E&&E.message?E.message:"Network Error",_=new an(k,an.ERR_NETWORK,e,b);_.event=E||null,s(_),b=null},b.ontimeout=function(){let E=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||DH;r.timeoutErrorMessage&&(E=r.timeoutErrorMessage),s(new an(E,k.clarifyTimeoutError?an.ETIMEDOUT:an.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&lt.forEach(o.toJSON(),function(E,k){b.setRequestHeader(k,E)}),lt.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),l&&l!=="json"&&(b.responseType=r.responseType),d&&([p,v]=nv(d,!0),b.addEventListener("progress",p)),c&&b.upload&&([f,x]=nv(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(u=S=>{b&&(s(!S||S.type?new Gf(null,e,b):S),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const w=Bre(r.url);if(w&&Os.protocols.indexOf(w)===-1){s(new an("Unsupported protocol "+w+":",an.ERR_BAD_REQUEST,e));return}b.send(i||null)})},Xre=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let s=new AbortController,r;const i=function(d){if(!r){r=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof an?u:new Gf(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new an(`timeout ${t} of ms exceeded`,an.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>lt.asap(l),c}},Zre=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let s=0,r;for(;s<a;)r=s+t,yield e.slice(s,r),s=r},Jre=async function*(e,t){for await(const a of eie(e))yield*Zre(a,t)},eie=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:s}=await t.read();if(a)break;yield s}}finally{await t.cancel()}},iI=(e,t,a,s)=>{const r=Jre(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await r.next();if(d){l(),c.close();return}let f=u.byteLength;if(a){let p=i+=f;a(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},oI=64*1024,{isFunction:Sy}=lt,tie=(({Request:e,Response:t})=>({Request:e,Response:t}))(lt.global),{ReadableStream:lI,TextEncoder:cI}=lt.global,dI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},nie=e=>{e=lt.merge.call({skipUndefined:!0},tie,e);const{fetch:t,Request:a,Response:s}=e,r=t?Sy(t):typeof fetch=="function",i=Sy(a),o=Sy(s);if(!r)return!1;const l=r&&Sy(lI),c=r&&(typeof cI=="function"?(v=>N=>v.encode(N))(new cI):async v=>new Uint8Array(await new a(v).arrayBuffer())),d=i&&l&&dI(()=>{let v=!1;const N=new a(Os.origin,{body:new lI,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!N}),u=o&&l&&dI(()=>lt.isReadableStream(new s("").body)),f={stream:u&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!f[v]&&(f[v]=(N,b)=>{let C=N&&N[v];if(C)return C.call(N);throw new an(`Response type '${v}' is not supported`,an.ERR_NOT_SUPPORT,b)})});const p=async v=>{if(v==null)return 0;if(lt.isBlob(v))return v.size;if(lt.isSpecCompliantForm(v))return(await new a(Os.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(lt.isArrayBufferView(v)||lt.isArrayBuffer(v))return v.byteLength;if(lt.isURLSearchParams(v)&&(v=v+""),lt.isString(v))return(await c(v)).byteLength},x=async(v,N)=>{const b=lt.toFiniteNumber(v.getContentLength());return b??p(N)};return async v=>{let{url:N,method:b,data:C,signal:w,cancelToken:S,timeout:E,onDownloadProgress:k,onUploadProgress:_,responseType:A,headers:T,withCredentials:$="same-origin",fetchOptions:z}=RH(v),F=t||fetch;A=A?(A+"").toLowerCase():"text";let P=Xre([w,S&&S.toAbortSignal()],E),M=null;const G=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let Q;try{if(_&&d&&b!=="get"&&b!=="head"&&(Q=await x(T,C))!==0){let K=new a(N,{method:"POST",body:C,duplex:"half"}),R;if(lt.isFormData(C)&&(R=K.headers.get("content-type"))&&T.setContentType(R),K.body){const[ye,pe]=aI(Q,nv(sI(_)));C=iI(K.body,oI,ye,pe)}}lt.isString($)||($=$?"include":"omit");const V=i&&"credentials"in a.prototype,X={...z,signal:P,method:b.toUpperCase(),headers:T.normalize().toJSON(),body:C,duplex:"half",credentials:V?$:void 0};M=i&&new a(N,X);let q=await(i?F(M,z):F(N,X));const ne=u&&(A==="stream"||A==="response");if(u&&(k||ne&&G)){const K={};["status","statusText","headers"].forEach(Ne=>{K[Ne]=q[Ne]});const R=lt.toFiniteNumber(q.headers.get("content-length")),[ye,pe]=k&&aI(R,nv(sI(k),!0))||[];q=new s(iI(q.body,oI,ye,()=>{pe&&pe(),G&&G()}),K)}A=A||"text";let oe=await f[lt.findKey(f,A)||"text"](q,v);return!ne&&G&&G(),await new Promise((K,R)=>{IH(K,R,{data:oe,headers:ur.from(q.headers),status:q.status,statusText:q.statusText,config:v,request:M})})}catch(V){throw G&&G(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new an("Network Error",an.ERR_NETWORK,v,M),{cause:V.cause||V}):an.from(V,V&&V.code,v,M)}}},aie=new Map,zH=e=>{let t=e?e.env:{};const{fetch:a,Request:s,Response:r}=t,i=[s,r,a];let o=i.length,l=o,c,d,u=aie;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:nie(t)),u=d;return d};zH();const ST={http:vre,xhr:Kre,fetch:{get:zH}};lt.forEach(ST,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const uI=e=>`- ${e}`,sie=e=>lt.isFunction(e)||e===null||e===!1,UH={getAdapter:(e,t)=>{e=lt.isArray(e)?e:[e];const{length:a}=e;let s,r;const i={};for(let o=0;o<a;o++){s=e[o];let l;if(r=s,!sie(s)&&(r=ST[(l=String(s)).toLowerCase()],r===void 0))throw new an(`Unknown adapter '${l}'`);if(r&&(lt.isFunction(r)||(r=r.get(t))))break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(uI).join(`
`):" "+uI(o[0]):"as no adapter specified";throw new an("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:ST};function CS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gf(null,e)}function mI(e){return CS(e),e.headers=ur.from(e.headers),e.data=jS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),UH.getAdapter(e.adapter||ax.adapter,e)(e).then(function(s){return CS(e),s.data=jS.call(e,e.transformResponse,s),s.headers=ur.from(s.headers),s},function(s){return MH(s)||(CS(e),s&&s.response&&(s.response.data=jS.call(e,e.transformResponse,s.response),s.response.headers=ur.from(s.response.headers))),Promise.reject(s)})}const FH="1.12.2",Rw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Rw[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const fI={};Rw.transitional=function(t,a,s){function r(i,o){return"[Axios v"+FH+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new an(r(o," has been removed"+(a?" in "+a:"")),an.ERR_DEPRECATED);return a&&!fI[o]&&(fI[o]=!0,console.warn(r(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,l):!0}};Rw.spelling=function(t){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function rie(e,t,a){if(typeof e!="object")throw new an("options must be an object",an.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new an("option "+i+" must be "+c,an.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new an("Unknown option "+i,an.ERR_BAD_OPTION)}}const Rb={assertOptions:rie,validators:Rw},so=Rb.validators;let fu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new tI,response:new tI}}async request(t,a){try{return await this._request(t,a)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Cu(this.defaults,a);const{transitional:s,paramsSerializer:r,headers:i}=a;s!==void 0&&Rb.assertOptions(s,{silentJSONParsing:so.transitional(so.boolean),forcedJSONParsing:so.transitional(so.boolean),clarifyTimeoutError:so.transitional(so.boolean)},!1),r!=null&&(lt.isFunction(r)?a.paramsSerializer={serialize:r}:Rb.assertOptions(r,{encode:so.function,serialize:so.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Rb.assertOptions(a,{baseUrl:so.spelling("baseURL"),withXsrfToken:so.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&lt.merge(i.common,i[a.method]);i&&lt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),a.headers=ur.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(c=c&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let u,f=0,p;if(!c){const v=[mI.bind(this),void 0];for(v.unshift(...l),v.push(...d),p=v.length,u=Promise.resolve(a);f<p;)u=u.then(v[f++],v[f++]);return u}p=l.length;let x=a;for(;f<p;){const v=l[f++],N=l[f++];try{x=v(x)}catch(b){N.call(this,b);break}}try{u=mI.call(this,x)}catch(v){return Promise.reject(v)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=Cu(this.defaults,t);const a=$H(t.baseURL,t.url,t.allowAbsoluteUrls);return PH(a,t.params,t.paramsSerializer)}};lt.forEach(["delete","get","head","options"],function(t){fu.prototype[t]=function(a,s){return this.request(Cu(s||{},{method:t,url:a,data:(s||{}).data}))}});lt.forEach(["post","put","patch"],function(t){function a(s){return function(i,o,l){return this.request(Cu(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}fu.prototype[t]=a(),fu.prototype[t+"Form"]=a(!0)});let iie=class BH{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Gf(i,o,l),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=s=>{t.abort(s)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new BH(function(r){t=r}),cancel:t}}};function oie(e){return function(a){return e.apply(null,a)}}function lie(e){return lt.isObject(e)&&e.isAxiosError===!0}const _T={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_T).forEach(([e,t])=>{_T[t]=e});function HH(e){const t=new fu(e),a=vH(fu.prototype.request,t);return lt.extend(a,fu.prototype,t,{allOwnKeys:!0}),lt.extend(a,t,null,{allOwnKeys:!0}),a.create=function(r){return HH(Cu(e,r))},a}const Oa=HH(ax);Oa.Axios=fu;Oa.CanceledError=Gf;Oa.CancelToken=iie;Oa.isCancel=MH;Oa.VERSION=FH;Oa.toFormData=$w;Oa.AxiosError=an;Oa.Cancel=Oa.CanceledError;Oa.all=function(t){return Promise.all(t)};Oa.spread=oie;Oa.isAxiosError=lie;Oa.mergeConfig=Cu;Oa.AxiosHeaders=ur;Oa.formToJSON=e=>OH(lt.isHTMLForm(e)?new FormData(e):e);Oa.getAdapter=UH.getAdapter;Oa.HttpStatusCode=_T;Oa.default=Oa;const{Axios:Mqe,AxiosError:Iqe,CanceledError:$qe,isCancel:Rqe,CancelToken:zqe,VERSION:Uqe,all:Fqe,Cancel:Bqe,isAxiosError:Hqe,spread:Gqe,toFormData:Wqe,AxiosHeaders:qqe,HttpStatusCode:Vqe,formToJSON:Qqe,getAdapter:Yqe,mergeConfig:Kqe}=Oa,cie="https://crm.sari-sari.com",ae=Oa.create({baseURL:`${cie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});ae.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));ae.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const die="isLoggedIn",_y="userRole",Ys=()=>{const[e,t]=h.useState(!!localStorage.getItem(_y)),[a,s]=h.useState(localStorage.getItem(_y)||""),r=wt();h.useEffect(()=>{const d=localStorage.getItem(_y);d?(t(!0),s(d)):o()},[]);const i=d=>{localStorage.setItem(_y,d.role),localStorage.setItem(die,!0),t(!0),s(d.role)},o=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await ae.post("/auth/logout")}catch(d){console.log("Failed to logout from server:",d)}o(),r("/")},userRole:a,setUserRole:s,login:d=>{i(d),d.role==="CEO"||d.role==="Admin"?r("/admin"):d.role==="Manager"?r("/manager/dashboard"):r("/")}}},rg=({children:e,requiredRole:t})=>{const{isLoggedIn:a,userRole:s}=Ys();if(!a)return n.jsx(li,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?n.jsx(li,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?n.jsx(li,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?n.jsx(li,{to:"/manager/dashboard",replace:!0}):s==="SALES"?n.jsx(li,{to:"/sales/dashboard",replace:!0}):n.jsx(li,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?n.jsx(li,{to:"/",replace:!0}):e};var GH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hI=yt.createContext&&yt.createContext(GH),uie=["attr","size","title"];function mie(e,t){if(e==null)return{};var a=fie(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function fie(e,t){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},av.apply(this,arguments)}function gI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function sv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(a),!0).forEach(function(s){hie(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gI(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function hie(e,t,a){return t=gie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gie(e){var t=pie(e,"string");return typeof t=="symbol"?t:t+""}function pie(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WH(e){return e&&e.map((t,a)=>yt.createElement(t.tag,sv({key:a},t.attr),WH(t.child)))}function _t(e){return t=>yt.createElement(xie,av({attr:sv({},e.attr)},t),WH(e.child))}function xie(e){var t=a=>{var{attr:s,size:r,title:i}=e,o=mie(e,uie),l=r||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),yt.createElement("svg",av({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,o,{className:c,style:sv(sv({color:e.color||a.color},a.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&yt.createElement("title",null,i),e.children)};return hI!==void 0?yt.createElement(hI.Consumer,null,a=>t(a)):t(GH)}function qi(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Wf(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function mi(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function zw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function AT(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function yie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function Uw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function sx(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function bie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function SS(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function vie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function rx(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function Fw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function en(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Et(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function qH(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function _a(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Qt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function Qk(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function Tt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function wie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function zt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Nie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function Ts(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function qs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function VH(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Yl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function ga(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function ma(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function Su(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function _u(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function hn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function jie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function ix(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function pI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(e)}function QH(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function Yk(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function _o(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function na(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function ox(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function Cie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function Sie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"},child:[]}]})(e)}function Rs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Lt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function xI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function yn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function Kk(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function qt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function _ie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function Xk(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function Bw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function id(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function Kl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function lr(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Wt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function _S(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function ad(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Aie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Mo(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Yn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function Io(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function sn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function aa(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function zs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Xt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const YH=()=>{const[e,t]=h.useState(!1),a=h.useRef(null);return h.useEffect(()=>{const s=r=>{a.current&&!a.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),h.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),n.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:" CRM"})]})}),n.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[n.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),n.jsx("a",{href:"#solutions",className:"hover:text-accent transition duration-150",children:"Solutions"}),n.jsx("a",{href:"#insights",className:"hover:text-accent transition duration-150",children:"Insights"}),n.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[n.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),n.jsxs("div",{className:"flex sm:hidden items-center relative",ref:a,children:[n.jsx("button",{onClick:()=>t(!e),children:e?n.jsx(Xt,{className:"w-6 h-6 text-white"}):n.jsx(ox,{className:"w-6 h-6 text-white"})}),e&&n.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:n.jsxs("nav",{className:"flex flex-col",children:[n.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),n.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function Tie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function Xl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Eie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function Hw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function kie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Lie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const Pie=()=>{const e=["/image/Dashboard1.png","/image/lead1.png","/image/dashboard.jpg"],[t,a]=h.useState(0),[s,r]=h.useState(!1),i=h.useRef(null),[o,l]=h.useState(0),[c,d]=h.useState(0);h.useEffect(()=>(s||(i.current=setInterval(()=>{a(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const u=x=>l(x.targetTouches[0].clientX),f=x=>d(x.targetTouches[0].clientX),p=()=>{o-c>75&&a(x=>(x+1)%e.length),c-o>75&&a(x=>(x-1+e.length)%e.length)};return n.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"lg:text-left text-center",children:[n.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",n.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),n.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),n.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:u,onTouchMove:f,onTouchEnd:p,children:[e.map((x,v)=>n.jsx("img",{src:x,alt:`Slide ${v+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${v===t?"opacity-100":"opacity-0"}`},v)),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,v)=>n.jsx("button",{onClick:()=>a(v),className:`w-3 h-3 rounded-full transition-all ${v===t?"bg-accent":"bg-gray-400 opacity-50"}`},v))})]})]})]})})},Die=({Icon:e,title:t,description:a})=>n.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[n.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:n.jsx(e,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),n.jsx("p",{className:"text-gray-400",children:a})]}),Oie=()=>{const e=[{Icon:Lie,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:Tie,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:kie,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:Eie,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return n.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),n.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,a)=>n.jsx(Die,{...t},a))})]})})},Mie=()=>n.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),n.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),n.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),Iie=()=>n.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-2 md:grid-cols-5 gap-8",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsx("p",{className:"text-sm text-white mt-4",children:" 2025 Sari-Sari CRM"})]}),[{title:"Platform",links:["AI Features","Automation","Integrations","APIs"]},{title:"Resources",links:["Case Studies","Webinars","Security","Support"]},{title:"Company",links:["Leadership","Partnerships","Careers","Newsroom"]},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"]}].map((e,t)=>n.jsxs("div",{children:[n.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),n.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((a,s)=>n.jsx("li",{children:n.jsx("a",{href:"#",className:"hover:text-accent",children:a})},s))})]},t))]})}),$ie=()=>(h.useEffect(()=>{document.title="Sari-Sari CRM"},[]),n.jsxs("main",{className:"font-inter",children:[n.jsx(YH,{}),n.jsx(Pie,{}),n.jsx(Oie,{}),n.jsx(Mie,{}),n.jsx(Iie,{})]}));function Gu(e){return _t({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Kn(e){return _t({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function xd(e){return _t({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class Pg extends Error{}Pg.prototype.name="InvalidTokenError";function Rie(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,a)=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function zie(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Rie(t)}catch{return atob(t)}}function KH(e,t){if(typeof e!="string")throw new Pg("Invalid token specified: must be a string");t||(t={});const a=t.header===!0?0:1,s=e.split(".")[a];if(typeof s!="string")throw new Pg(`Invalid token specified: missing part #${a+1}`);let r;try{r=zie(s)}catch(i){throw new Pg(`Invalid token specified: invalid base64 for part #${a+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new Pg(`Invalid token specified: invalid json for part #${a+1} (${i.message})`)}}function qa(e,t,a=void 0){const s={};for(const r in e){const i=e[r];let o="",l=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(o+=(l===!0?"":" ")+t(d),l=!1,a&&a[d]&&(o+=" "+a[d]))}s[r]=o}return s}function Au(e,...t){const a=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${a} for the full message.`}function Wn(e){if(typeof e!="string")throw new Error(Au(7));return e.charAt(0).toUpperCase()+e.slice(1)}var AS={exports:{}},Bn={};var yI;function Uie(){if(yI)return Bn;yI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function v(N){if(typeof N=="object"&&N!==null){var b=N.$$typeof;switch(b){case e:switch(N=N.type,N){case a:case r:case s:case c:case d:case p:return N;default:switch(N=N&&N.$$typeof,N){case o:case l:case f:case u:return N;case i:return N;default:return b}}case t:return b}}}return Bn.ContextConsumer=i,Bn.ContextProvider=o,Bn.Element=e,Bn.ForwardRef=l,Bn.Fragment=a,Bn.Lazy=f,Bn.Memo=u,Bn.Portal=t,Bn.Profiler=r,Bn.StrictMode=s,Bn.Suspense=c,Bn.SuspenseList=d,Bn.isContextConsumer=function(N){return v(N)===i},Bn.isContextProvider=function(N){return v(N)===o},Bn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Bn.isForwardRef=function(N){return v(N)===l},Bn.isFragment=function(N){return v(N)===a},Bn.isLazy=function(N){return v(N)===f},Bn.isMemo=function(N){return v(N)===u},Bn.isPortal=function(N){return v(N)===t},Bn.isProfiler=function(N){return v(N)===r},Bn.isStrictMode=function(N){return v(N)===s},Bn.isSuspense=function(N){return v(N)===c},Bn.isSuspenseList=function(N){return v(N)===d},Bn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===a||N===r||N===s||N===c||N===d||typeof N=="object"&&N!==null&&(N.$$typeof===f||N.$$typeof===u||N.$$typeof===o||N.$$typeof===i||N.$$typeof===l||N.$$typeof===x||N.getModuleId!==void 0)},Bn.typeOf=v,Bn}var bI;function Fie(){return bI||(bI=1,AS.exports=Uie()),AS.exports}var Zk=Fie();function No(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function XH(e){if(h.isValidElement(e)||Zk.isValidElementType(e)||!No(e))return e;const t={};return Object.keys(e).forEach(a=>{t[a]=XH(e[a])}),t}function $r(e,t,a={clone:!0}){const s=a.clone?{...e}:e;return No(e)&&No(t)&&Object.keys(t).forEach(r=>{h.isValidElement(t[r])||Zk.isValidElementType(t[r])?s[r]=t[r]:No(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&No(e[r])?s[r]=$r(e[r],t[r],a):a.clone?s[r]=No(t[r])?XH(t[r]):t[r]:s[r]=t[r]}),s}function Vg(e,t){return t?$r(e,t,{clone:!1}):e}function vI(e,t){if(!e.containerQueries)return t;const a=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return a.length?a.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function Bie(e,t){return t==="@"||t.startsWith("@")&&(e.some(a=>t.startsWith(`@${a}`))||!!t.match(/^@\d/))}function Hie(e,t){const a=t.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,r]=a,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function Gie(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function a(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(a(s,i),s);return a(r),{...e,containerQueries:r}}const Gw={xs:0,sm:600,md:900,lg:1200,xl:1536},wI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Gw[e]}px)`},Wie={containerQueries:e=>({up:t=>{let a=typeof t=="number"?t:Gw[t]||t;return typeof a=="number"&&(a=`${a}px`),e?`@container ${e} (min-width:${a})`:`@container (min-width:${a})`}})};function Ml(e,t,a){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||wI;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=a(t[c]),o),{})}if(typeof t=="object"){const i=s.breakpoints||wI;return Object.keys(t).reduce((o,l)=>{if(Bie(i.keys,l)){const c=Hie(s.containerQueries?s:Wie,l);c&&(o[c]=a(t[l],l))}else if(Object.keys(i.values||Gw).includes(l)){const c=i.up(l);o[c]=a(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return a(t)}function qie(e={}){return e.keys?.reduce((a,s)=>{const r=e.up(s);return a[r]={},a},{})||{}}function NI(e,t){return e.reduce((a,s)=>{const r=a[s];return(!r||Object.keys(r).length===0)&&delete a[s],a},t)}function Ww(e,t,a=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&a){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function rv(e,t,a,s=a){let r;return typeof e=="function"?r=e(a):Array.isArray(e)?r=e[a]||s:r=Ww(e,a)||s,t&&(r=t(r,s,e)),r}function Ma(e){const{prop:t,cssProperty:a=e.prop,themeKey:s,transform:r}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,d=Ww(c,s)||{};return Ml(o,l,f=>{let p=rv(d,r,f);return f===p&&typeof f=="string"&&(p=rv(d,r,`${t}${f==="default"?"":Wn(f)}`,f)),a===!1?p:{[a]:p}})};return i.propTypes={},i.filterProps=[t],i}function Vie(e){const t={};return a=>(t[a]===void 0&&(t[a]=e(a)),t[a])}const Qie={m:"margin",p:"padding"},Yie={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},jI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Kie=Vie(e=>{if(e.length>2)if(jI[e])e=jI[e];else return[e];const[t,a]=e.split(""),s=Qie[t],r=Yie[a]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),Jk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],eL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Jk,...eL];function lx(e,t,a,s){const r=Ww(e,t,!0)??a;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=r[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof r=="function"?r:()=>{}}function tL(e){return lx(e,"spacing",8)}function cx(e,t){return typeof t=="string"||t==null?t:e(t)}function Xie(e,t){return a=>e.reduce((s,r)=>(s[r]=cx(t,a),s),{})}function Zie(e,t,a,s){if(!t.includes(a))return null;const r=Kie(a),i=Xie(r,s),o=e[a];return Ml(e,o,i)}function ZH(e,t){const a=tL(e.theme);return Object.keys(e).map(s=>Zie(e,t,s,a)).reduce(Vg,{})}function wa(e){return ZH(e,Jk)}wa.propTypes={};wa.filterProps=Jk;function Na(e){return ZH(e,eL)}Na.propTypes={};Na.filterProps=eL;function qw(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),a=s=>Object.keys(s).reduce((r,i)=>t[i]?Vg(r,t[i](s)):r,{});return a.propTypes={},a.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),a}function ui(e){return typeof e!="number"?e:`${e}px solid`}function Si(e,t){return Ma({prop:e,themeKey:"borders",transform:t})}const Jie=Si("border",ui),eoe=Si("borderTop",ui),toe=Si("borderRight",ui),noe=Si("borderBottom",ui),aoe=Si("borderLeft",ui),soe=Si("borderColor"),roe=Si("borderTopColor"),ioe=Si("borderRightColor"),ooe=Si("borderBottomColor"),loe=Si("borderLeftColor"),coe=Si("outline",ui),doe=Si("outlineColor"),Vw=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=lx(e.theme,"shape.borderRadius",4),a=s=>({borderRadius:cx(t,s)});return Ml(e,e.borderRadius,a)}return null};Vw.propTypes={};Vw.filterProps=["borderRadius"];qw(Jie,eoe,toe,noe,aoe,soe,roe,ioe,ooe,loe,Vw,coe,doe);const Qw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=lx(e.theme,"spacing",8),a=s=>({gap:cx(t,s)});return Ml(e,e.gap,a)}return null};Qw.propTypes={};Qw.filterProps=["gap"];const Yw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=lx(e.theme,"spacing",8),a=s=>({columnGap:cx(t,s)});return Ml(e,e.columnGap,a)}return null};Yw.propTypes={};Yw.filterProps=["columnGap"];const Kw=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=lx(e.theme,"spacing",8),a=s=>({rowGap:cx(t,s)});return Ml(e,e.rowGap,a)}return null};Kw.propTypes={};Kw.filterProps=["rowGap"];const uoe=Ma({prop:"gridColumn"}),moe=Ma({prop:"gridRow"}),foe=Ma({prop:"gridAutoFlow"}),hoe=Ma({prop:"gridAutoColumns"}),goe=Ma({prop:"gridAutoRows"}),poe=Ma({prop:"gridTemplateColumns"}),xoe=Ma({prop:"gridTemplateRows"}),yoe=Ma({prop:"gridTemplateAreas"}),boe=Ma({prop:"gridArea"});qw(Qw,Yw,Kw,uoe,moe,foe,hoe,goe,poe,xoe,yoe,boe);function df(e,t){return t==="grey"?t:e}const voe=Ma({prop:"color",themeKey:"palette",transform:df}),woe=Ma({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:df}),Noe=Ma({prop:"backgroundColor",themeKey:"palette",transform:df});qw(voe,woe,Noe);function Or(e){return e<=1&&e!==0?`${e*100}%`:e}const joe=Ma({prop:"width",transform:Or}),nL=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=a=>{const s=e.theme?.breakpoints?.values?.[a]||Gw[a];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Or(a)}};return Ml(e,e.maxWidth,t)}return null};nL.filterProps=["maxWidth"];const Coe=Ma({prop:"minWidth",transform:Or}),Soe=Ma({prop:"height",transform:Or}),_oe=Ma({prop:"maxHeight",transform:Or}),Aoe=Ma({prop:"minHeight",transform:Or});Ma({prop:"size",cssProperty:"width",transform:Or});Ma({prop:"size",cssProperty:"height",transform:Or});const Toe=Ma({prop:"boxSizing"});qw(joe,nL,Coe,Soe,_oe,Aoe,Toe);const dx={border:{themeKey:"borders",transform:ui},borderTop:{themeKey:"borders",transform:ui},borderRight:{themeKey:"borders",transform:ui},borderBottom:{themeKey:"borders",transform:ui},borderLeft:{themeKey:"borders",transform:ui},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ui},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Vw},color:{themeKey:"palette",transform:df},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:df},backgroundColor:{themeKey:"palette",transform:df},p:{style:Na},pt:{style:Na},pr:{style:Na},pb:{style:Na},pl:{style:Na},px:{style:Na},py:{style:Na},padding:{style:Na},paddingTop:{style:Na},paddingRight:{style:Na},paddingBottom:{style:Na},paddingLeft:{style:Na},paddingX:{style:Na},paddingY:{style:Na},paddingInline:{style:Na},paddingInlineStart:{style:Na},paddingInlineEnd:{style:Na},paddingBlock:{style:Na},paddingBlockStart:{style:Na},paddingBlockEnd:{style:Na},m:{style:wa},mt:{style:wa},mr:{style:wa},mb:{style:wa},ml:{style:wa},mx:{style:wa},my:{style:wa},margin:{style:wa},marginTop:{style:wa},marginRight:{style:wa},marginBottom:{style:wa},marginLeft:{style:wa},marginX:{style:wa},marginY:{style:wa},marginInline:{style:wa},marginInlineStart:{style:wa},marginInlineEnd:{style:wa},marginBlock:{style:wa},marginBlockStart:{style:wa},marginBlockEnd:{style:wa},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Qw},rowGap:{style:Kw},columnGap:{style:Yw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Or},maxWidth:{style:nL},minWidth:{transform:Or},height:{transform:Or},maxHeight:{transform:Or},minHeight:{transform:Or},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Eoe(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),a=new Set(t);return e.every(s=>a.size===Object.keys(s).length)}function koe(e,t){return typeof e=="function"?e(t):e}function Loe(){function e(a,s,r,i){const o={[a]:s,theme:r},l=i[a];if(!l)return{[a]:s};const{cssProperty:c=a,themeKey:d,transform:u,style:f}=l;if(s==null)return null;if(d==="typography"&&s==="inherit")return{[a]:s};const p=Ww(r,d)||{};return f?f(o):Ml(o,s,v=>{let N=rv(p,u,v);return v===N&&typeof v=="string"&&(N=rv(p,u,`${a}${v==="default"?"":Wn(v)}`,v)),c===!1?N:{[c]:N}})}function t(a){const{sx:s,theme:r={},nested:i}=a||{};if(!s)return null;const o=r.unstable_sxConfig??dx;function l(c){let d=c;if(typeof c=="function")d=c(r);else if(typeof c!="object")return c;if(!d)return null;const u=qie(r.breakpoints),f=Object.keys(u);let p=u;return Object.keys(d).forEach(x=>{const v=koe(d[x],r);if(v!=null)if(typeof v=="object")if(o[x])p=Vg(p,e(x,v,r,o));else{const N=Ml({theme:r},v,b=>({[x]:b}));Eoe(N,v)?p[x]=t({sx:v,theme:r,nested:!0}):p=Vg(p,N)}else p=Vg(p,e(x,v,r,o))}),!i&&r.modularCssLayers?{"@layer sx":vI(r,NI(f,p))}:vI(r,NI(f,p))}return Array.isArray(s)?s.map(l):l(s)}return t}const vf=Loe();vf.filterProps=["sx"];const Poe=e=>{const t={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??dx;return Object.keys(e).forEach(s=>{a[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function Doe(e){const{sx:t,...a}=e,{systemProps:s,otherProps:r}=Poe(a);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return No(l)?{...s,...l}:s}:i={...s,...t},{...r,sx:i}}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},qe.apply(null,arguments)}function Ooe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Moe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Ioe=(function(){function e(a){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Moe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Ooe(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),ks="-ms-",iv="-moz-",Tn="-webkit-",JH="comm",aL="rule",sL="decl",$oe="@import",e9="@keyframes",Roe="@layer",zoe=Math.abs,Xw=String.fromCharCode,Uoe=Object.assign;function Foe(e,t){return As(e,0)^45?(((t<<2^As(e,0))<<2^As(e,1))<<2^As(e,2))<<2^As(e,3):0}function t9(e){return e.trim()}function Boe(e,t){return(e=t.exec(e))?e[0]:e}function En(e,t,a){return e.replace(t,a)}function TT(e,t){return e.indexOf(t)}function As(e,t){return e.charCodeAt(t)|0}function cp(e,t,a){return e.slice(t,a)}function bo(e){return e.length}function rL(e){return e.length}function Ay(e,t){return t.push(e),e}function Hoe(e,t){return e.map(t).join("")}var Zw=1,wf=1,n9=0,gr=0,Ba=0,qf="";function Jw(e,t,a,s,r,i,o){return{value:e,root:t,parent:a,type:s,props:r,children:i,line:Zw,column:wf,length:o,return:""}}function ig(e,t){return Uoe(Jw("",null,null,"",null,null,0),e,{length:-e.length},t)}function Goe(){return Ba}function Woe(){return Ba=gr>0?As(qf,--gr):0,wf--,Ba===10&&(wf=1,Zw--),Ba}function Rr(){return Ba=gr<n9?As(qf,gr++):0,wf++,Ba===10&&(wf=1,Zw++),Ba}function Eo(){return As(qf,gr)}function zb(){return gr}function ux(e,t){return cp(qf,e,t)}function dp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function a9(e){return Zw=wf=1,n9=bo(qf=e),gr=0,[]}function s9(e){return qf="",e}function Ub(e){return t9(ux(gr-1,ET(e===91?e+2:e===40?e+1:e)))}function qoe(e){for(;(Ba=Eo())&&Ba<33;)Rr();return dp(e)>2||dp(Ba)>3?"":" "}function Voe(e,t){for(;--t&&Rr()&&!(Ba<48||Ba>102||Ba>57&&Ba<65||Ba>70&&Ba<97););return ux(e,zb()+(t<6&&Eo()==32&&Rr()==32))}function ET(e){for(;Rr();)switch(Ba){case e:return gr;case 34:case 39:e!==34&&e!==39&&ET(Ba);break;case 40:e===41&&ET(e);break;case 92:Rr();break}return gr}function Qoe(e,t){for(;Rr()&&e+Ba!==57;)if(e+Ba===84&&Eo()===47)break;return"/*"+ux(t,gr-1)+"*"+Xw(e===47?e:Rr())}function Yoe(e){for(;!dp(Eo());)Rr();return ux(e,gr)}function Koe(e){return s9(Fb("",null,null,null,[""],e=a9(e),0,[0],e))}function Fb(e,t,a,s,r,i,o,l,c){for(var d=0,u=0,f=o,p=0,x=0,v=0,N=1,b=1,C=1,w=0,S="",E=r,k=i,_=s,A=S;b;)switch(v=w,w=Rr()){case 40:if(v!=108&&As(A,f-1)==58){TT(A+=En(Ub(w),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:A+=Ub(w);break;case 9:case 10:case 13:case 32:A+=qoe(v);break;case 92:A+=Voe(zb()-1,7);continue;case 47:switch(Eo()){case 42:case 47:Ay(Xoe(Qoe(Rr(),zb()),t,a),c);break;default:A+="/"}break;case 123*N:l[d++]=bo(A)*C;case 125*N:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+u:C==-1&&(A=En(A,/\f/g,"")),x>0&&bo(A)-f&&Ay(x>32?SI(A+";",s,a,f-1):SI(En(A," ","")+";",s,a,f-2),c);break;case 59:A+=";";default:if(Ay(_=CI(A,t,a,d,u,r,l,S,E=[],k=[],f),i),w===123)if(u===0)Fb(A,t,_,_,E,i,f,l,k);else switch(p===99&&As(A,3)===110?100:p){case 100:case 108:case 109:case 115:Fb(e,_,_,s&&Ay(CI(e,_,_,0,0,r,l,S,r,E=[],f),k),r,k,f,l,s?E:k);break;default:Fb(A,_,_,_,[""],k,0,l,k)}}d=u=x=0,N=C=1,S=A="",f=o;break;case 58:f=1+bo(A),x=v;default:if(N<1){if(w==123)--N;else if(w==125&&N++==0&&Woe()==125)continue}switch(A+=Xw(w),w*N){case 38:C=u>0?1:(A+="\f",-1);break;case 44:l[d++]=(bo(A)-1)*C,C=1;break;case 64:Eo()===45&&(A+=Ub(Rr())),p=Eo(),u=f=bo(S=A+=Yoe(zb())),w++;break;case 45:v===45&&bo(A)==2&&(N=0)}}return i}function CI(e,t,a,s,r,i,o,l,c,d,u){for(var f=r-1,p=r===0?i:[""],x=rL(p),v=0,N=0,b=0;v<s;++v)for(var C=0,w=cp(e,f+1,f=zoe(N=o[v])),S=e;C<x;++C)(S=t9(N>0?p[C]+" "+w:En(w,/&\f/g,p[C])))&&(c[b++]=S);return Jw(e,t,a,r===0?aL:l,c,d,u)}function Xoe(e,t,a){return Jw(e,t,a,JH,Xw(Goe()),cp(e,2,-2),0)}function SI(e,t,a,s){return Jw(e,t,a,sL,cp(e,0,s),cp(e,s+1,-1),s)}function uf(e,t){for(var a="",s=rL(e),r=0;r<s;r++)a+=t(e[r],r,e,t)||"";return a}function Zoe(e,t,a,s){switch(e.type){case Roe:if(e.children.length)break;case $oe:case sL:return e.return=e.return||e.value;case JH:return"";case e9:return e.return=e.value+"{"+uf(e.children,s)+"}";case aL:e.value=e.props.join(",")}return bo(a=uf(e.children,s))?e.return=e.value+"{"+a+"}":""}function Joe(e){var t=rL(e);return function(a,s,r,i){for(var o="",l=0;l<t;l++)o+=e[l](a,s,r,i)||"";return o}}function ele(e){return function(t){t.root||(t=t.return)&&e(t)}}function r9(e){var t=Object.create(null);return function(a){return t[a]===void 0&&(t[a]=e(a)),t[a]}}var tle=function(t,a,s){for(var r=0,i=0;r=i,i=Eo(),r===38&&i===12&&(a[s]=1),!dp(i);)Rr();return ux(t,gr)},nle=function(t,a){var s=-1,r=44;do switch(dp(r)){case 0:r===38&&Eo()===12&&(a[s]=1),t[s]+=tle(gr-1,a,s);break;case 2:t[s]+=Ub(r);break;case 4:if(r===44){t[++s]=Eo()===58?"&\f":"",a[s]=t[s].length;break}default:t[s]+=Xw(r)}while(r=Rr());return t},ale=function(t,a){return s9(nle(a9(t),a))},_I=new WeakMap,sle=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var a=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&a.charCodeAt(0)!==58&&!_I.get(s))&&!r){_I.set(t,!0);for(var i=[],o=ale(a,i),l=s.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},rle=function(t){if(t.type==="decl"){var a=t.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(t.return="",t.value="")}};function i9(e,t){switch(Foe(e,t)){case 5103:return Tn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Tn+e+iv+e+ks+e+e;case 6828:case 4268:return Tn+e+ks+e+e;case 6165:return Tn+e+ks+"flex-"+e+e;case 5187:return Tn+e+En(e,/(\w+).+(:[^]+)/,Tn+"box-$1$2"+ks+"flex-$1$2")+e;case 5443:return Tn+e+ks+"flex-item-"+En(e,/flex-|-self/,"")+e;case 4675:return Tn+e+ks+"flex-line-pack"+En(e,/align-content|flex-|-self/,"")+e;case 5548:return Tn+e+ks+En(e,"shrink","negative")+e;case 5292:return Tn+e+ks+En(e,"basis","preferred-size")+e;case 6060:return Tn+"box-"+En(e,"-grow","")+Tn+e+ks+En(e,"grow","positive")+e;case 4554:return Tn+En(e,/([^-])(transform)/g,"$1"+Tn+"$2")+e;case 6187:return En(En(En(e,/(zoom-|grab)/,Tn+"$1"),/(image-set)/,Tn+"$1"),e,"")+e;case 5495:case 3959:return En(e,/(image-set\([^]*)/,Tn+"$1$`$1");case 4968:return En(En(e,/(.+:)(flex-)?(.*)/,Tn+"box-pack:$3"+ks+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tn+e+e;case 4095:case 3583:case 4068:case 2532:return En(e,/(.+)-inline(.+)/,Tn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(bo(e)-1-t>6)switch(As(e,t+1)){case 109:if(As(e,t+4)!==45)break;case 102:return En(e,/(.+:)(.+)-([^]+)/,"$1"+Tn+"$2-$3$1"+iv+(As(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~TT(e,"stretch")?i9(En(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(As(e,t+1)!==115)break;case 6444:switch(As(e,bo(e)-3-(~TT(e,"!important")&&10))){case 107:return En(e,":",":"+Tn)+e;case 101:return En(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tn+(As(e,14)===45?"inline-":"")+"box$3$1"+Tn+"$2$3$1"+ks+"$2box$3")+e}break;case 5936:switch(As(e,t+11)){case 114:return Tn+e+ks+En(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Tn+e+ks+En(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Tn+e+ks+En(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Tn+e+ks+e+e}return e}var ile=function(t,a,s,r){if(t.length>-1&&!t.return)switch(t.type){case sL:t.return=i9(t.value,t.length);break;case e9:return uf([ig(t,{value:En(t.value,"@","@"+Tn)})],r);case aL:if(t.length)return Hoe(t.props,function(i){switch(Boe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return uf([ig(t,{props:[En(i,/:(read-\w+)/,":"+iv+"$1")]})],r);case"::placeholder":return uf([ig(t,{props:[En(i,/:(plac\w+)/,":"+Tn+"input-$1")]}),ig(t,{props:[En(i,/:(plac\w+)/,":"+iv+"$1")]}),ig(t,{props:[En(i,/:(plac\w+)/,ks+"input-$1")]})],r)}return""})}},ole=[ile],lle=function(t){var a=t.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(N){var b=N.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var r=t.stylisPlugins||ole,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(N){for(var b=N.getAttribute("data-emotion").split(" "),C=1;C<b.length;C++)i[b[C]]=!0;l.push(N)});var c,d=[sle,rle];{var u,f=[Zoe,ele(function(N){u.insert(N)})],p=Joe(d.concat(r,f)),x=function(b){return uf(Koe(b),p)};c=function(b,C,w,S){u=w,x(b?b+"{"+C.styles+"}":C.styles),S&&(v.inserted[C.name]=!0)}}var v={key:a,sheet:new Ioe({key:a,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},TS={exports:{}},kn={};var AI;function cle(){if(AI)return kn;AI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(k){if(typeof k=="object"&&k!==null){var _=k.$$typeof;switch(_){case t:switch(k=k.type,k){case c:case d:case s:case i:case r:case f:return k;default:switch(k=k&&k.$$typeof,k){case l:case u:case v:case x:case o:return k;default:return _}}case a:return _}}}function E(k){return S(k)===d}return kn.AsyncMode=c,kn.ConcurrentMode=d,kn.ContextConsumer=l,kn.ContextProvider=o,kn.Element=t,kn.ForwardRef=u,kn.Fragment=s,kn.Lazy=v,kn.Memo=x,kn.Portal=a,kn.Profiler=i,kn.StrictMode=r,kn.Suspense=f,kn.isAsyncMode=function(k){return E(k)||S(k)===c},kn.isConcurrentMode=E,kn.isContextConsumer=function(k){return S(k)===l},kn.isContextProvider=function(k){return S(k)===o},kn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},kn.isForwardRef=function(k){return S(k)===u},kn.isFragment=function(k){return S(k)===s},kn.isLazy=function(k){return S(k)===v},kn.isMemo=function(k){return S(k)===x},kn.isPortal=function(k){return S(k)===a},kn.isProfiler=function(k){return S(k)===i},kn.isStrictMode=function(k){return S(k)===r},kn.isSuspense=function(k){return S(k)===f},kn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===s||k===d||k===i||k===r||k===f||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===u||k.$$typeof===b||k.$$typeof===C||k.$$typeof===w||k.$$typeof===N)},kn.typeOf=S,kn}var TI;function dle(){return TI||(TI=1,TS.exports=cle()),TS.exports}var ES,EI;function ule(){if(EI)return ES;EI=1;var e=dle(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function o(v){return e.isMemo(v)?r:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function x(v,N,b){if(typeof N!="string"){if(p){var C=f(N);C&&C!==p&&x(v,C,b)}var w=c(N);d&&(w=w.concat(d(N)));for(var S=o(v),E=o(N),k=0;k<w.length;++k){var _=w[k];if(!a[_]&&!(b&&b[_])&&!(E&&E[_])&&!(S&&S[_])){var A=u(N,_);try{l(v,_,A)}catch{}}}}return v}return ES=x,ES}ule();var mle=!0;function o9(e,t,a){var s="";return a.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var iL=function(t,a,s){var r=t.key+"-"+a.name;(s===!1||mle===!1)&&t.registered[r]===void 0&&(t.registered[r]=a.styles)},l9=function(t,a,s){iL(t,a,s);var r=t.key+"-"+a.name;if(t.inserted[a.name]===void 0){var i=a;do t.insert(a===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function fle(e){for(var t=0,a,s=0,r=e.length;r>=4;++s,r-=4)a=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,t=(a&65535)*1540483477+((a>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var hle={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},gle=/[A-Z]|^ms/g,ple=/_EMO_([^_]+?)_([^]*?)_EMO_/g,c9=function(t){return t.charCodeAt(1)===45},kI=function(t){return t!=null&&typeof t!="boolean"},kS=r9(function(e){return c9(e)?e:e.replace(gle,"-$&").toLowerCase()}),LI=function(t,a){switch(t){case"animation":case"animationName":if(typeof a=="string")return a.replace(ple,function(s,r,i){return vo={name:r,styles:i,next:vo},r})}return hle[t]!==1&&!c9(t)&&typeof a=="number"&&a!==0?a+"px":a};function up(e,t,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var r=a;if(r.anim===1)return vo={name:r.name,styles:r.styles,next:vo},r.name;var i=a;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)vo={name:o.name,styles:o.styles,next:vo},o=o.next;var l=i.styles+";";return l}return xle(e,t,a)}case"function":{if(e!==void 0){var c=vo,d=a(e);return vo=c,up(e,t,d)}break}}var u=a;if(t==null)return u;var f=t[u];return f!==void 0?f:u}function xle(e,t,a){var s="";if(Array.isArray(a))for(var r=0;r<a.length;r++)s+=up(e,t,a[r])+";";else for(var i in a){var o=a[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=i+"{"+t[l]+"}":kI(l)&&(s+=kS(i)+":"+LI(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)kI(o[c])&&(s+=kS(i)+":"+LI(i,o[c])+";");else{var d=up(e,t,o);switch(i){case"animation":case"animationName":{s+=kS(i)+":"+d+";";break}default:s+=i+"{"+d+"}"}}}return s}var PI=/label:\s*([^\s;{]+)\s*(;|$)/g,vo;function eN(e,t,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";vo=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=up(a,t,i);else{var o=i;r+=o[0]}for(var l=1;l<e.length;l++)if(r+=up(a,t,e[l]),s){var c=i;r+=c[l]}PI.lastIndex=0;for(var d="",u;(u=PI.exec(r))!==null;)d+="-"+u[1];var f=fle(r)+d;return{name:f,styles:r,next:vo}}var yle=function(t){return t()},ble=Nu.useInsertionEffect?Nu.useInsertionEffect:!1,d9=ble||yle,u9=h.createContext(typeof HTMLElement<"u"?lle({key:"css"}):null);u9.Provider;var m9=function(t){return h.forwardRef(function(a,s){var r=h.useContext(u9);return t(a,r,s)})},oL=h.createContext({}),lL={}.hasOwnProperty,kT="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",vle=function(t,a){var s={};for(var r in a)lL.call(a,r)&&(s[r]=a[r]);return s[kT]=t,s},wle=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return iL(a,s,r),d9(function(){return l9(a,s,r)}),null},Nle=m9(function(e,t,a){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[kT],i=[s],o="";typeof e.className=="string"?o=o9(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=eN(i,void 0,h.useContext(oL));o+=t.key+"-"+l.name;var c={};for(var d in e)lL.call(e,d)&&d!=="css"&&d!==kT&&(c[d]=e[d]);return c.className=o,a&&(c.ref=a),h.createElement(h.Fragment,null,h.createElement(wle,{cache:t,serialized:l,isStringTag:typeof r=="string"}),h.createElement(r,c))}),jle=Nle,DI=function(t,a){var s=arguments;if(a==null||!lL.call(a,"css"))return h.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=jle,i[1]=vle(t,a);for(var o=2;o<r;o++)i[o]=s[o];return h.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(DI||(DI={}));function cL(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return eN(t)}function mx(){var e=cL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Cle=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Sle=r9(function(e){return Cle.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),_le=Sle,Ale=function(t){return t!=="theme"},OI=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?_le:Ale},MI=function(t,a,s){var r;if(a){var i=a.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},Tle=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return iL(a,s,r),d9(function(){return l9(a,s,r)}),null},Ele=function e(t,a){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,o;a!==void 0&&(i=a.label,o=a.target);var l=MI(t,a,s),c=l||OI(r),d=!c("as");return function(){var u=arguments,f=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&f.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var p=u[0];f.push(p[0]);for(var x=u.length,v=1;v<x;v++)f.push(u[v],p[v])}var N=m9(function(b,C,w){var S=d&&b.as||r,E="",k=[],_=b;if(b.theme==null){_={};for(var A in b)_[A]=b[A];_.theme=h.useContext(oL)}typeof b.className=="string"?E=o9(C.registered,k,b.className):b.className!=null&&(E=b.className+" ");var T=eN(f.concat(k),C.registered,_);E+=C.key+"-"+T.name,o!==void 0&&(E+=" "+o);var $=d&&l===void 0?OI(S):c,z={};for(var F in b)d&&F==="as"||$(F)&&(z[F]=b[F]);return z.className=E,w&&(z.ref=w),h.createElement(h.Fragment,null,h.createElement(Tle,{cache:C,serialized:T,isStringTag:typeof S=="string"}),h.createElement(S,z))});return N.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=r,N.__emotion_styles=f,N.__emotion_forwardProp=l,Object.defineProperty(N,"toString",{value:function(){return"."+o}}),N.withComponent=function(b,C){var w=e(b,qe({},a,C,{shouldForwardProp:MI(N,C,!0)}));return w.apply(void 0,f)},N}},kle=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],LT=Ele.bind(null);kle.forEach(function(e){LT[e]=LT(e)});function Lle(e,t){return LT(e,t)}function Ple(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const II=[];function hu(e){return II[0]=e,eN(II)}const Dle=e=>{const t=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return t.sort((a,s)=>a.val-s.val),t.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function Ole(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...r}=e,i=Dle(t),o=Object.keys(i);function l(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${a})`}function d(p,x){const v=o.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a}) and (max-width:${(v!==-1&&typeof t[o[v]]=="number"?t[o[v]]:x)-s/100}${a})`}function u(p){return o.indexOf(p)+1<o.length?d(p,o[o.indexOf(p)+1]):l(p)}function f(p){const x=o.indexOf(p);return x===0?l(o[1]):x===o.length-1?c(o[x]):d(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:d,only:u,not:f,unit:a,...r}}const Mle={borderRadius:4};function f9(e=8,t=tL({spacing:e})){if(e.mui)return e;const a=(...s)=>(s.length===0?[1]:s).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return a.mui=!0,a}function Ile(e,t){const a=this;if(a.vars){if(!a.colorSchemes?.[e]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return a.palette.mode===e?t:{}}function dL(e={},...t){const{breakpoints:a={},palette:s={},spacing:r,shape:i={},...o}=e,l=Ole(a),c=f9(r);let d=$r({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...Mle,...i}},o);return d=Gie(d),d.applyStyles=Ile,d=t.reduce((u,f)=>$r(u,f),d),d.unstable_sxConfig={...dx,...o?.unstable_sxConfig},d.unstable_sx=function(f){return vf({sx:f,theme:this})},d}function $le(e){return Object.keys(e).length===0}function h9(e=null){const t=h.useContext(oL);return!t||$le(t)?e:t}const Rle=dL();function g9(e=Rle){return h9(e)}const $I=e=>e,zle=()=>{let e=$I;return{configure(t){e=t},generate(t){return e(t)},reset(){e=$I}}},Ule=zle(),Fle={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Va(e,t,a="Mui"){const s=Fle[t];return s?`${a}-${s}`:`${Ule.generate(e)}-${t}`}function Aa(e,t,a="Mui"){const s={};return t.forEach(r=>{s[r]=Va(e,r,a)}),s}function p9(e){const{variants:t,...a}=e,s={variants:t,style:hu(a),isProcessed:!0};return s.style===a||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=hu(r.style))}),s}const Ble=dL();function Bb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function ru(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Hle(e){return e?(t,a)=>a[e]:null}function Gle(e,t,a){e.theme=Vle(e.theme)?a:e.theme[t]||e.theme}function Hb(e,t,a){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>Hb(e,r,a));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=a?ru(s.style,a):s.style;else{const{variants:i,...o}=s;r=a?ru(hu(o),a):o}return x9(e,s.variants,[r],a)}return s?.isProcessed?a?ru(hu(s.style),a):s.style:a?ru(hu(s),a):s}function x9(e,t,a=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(r))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&e.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},a.push(s?ru(hu(o.style(r)),s):o.style(r))):a.push(s?ru(hu(o.style),s):o.style)}return a}function Wle(e={}){const{themeId:t,defaultTheme:a=Ble,rootShouldForwardProp:s=Bb,slotShouldForwardProp:r=Bb}=e;function i(l){Gle(l,t,a)}return(l,c={})=>{Ple(l,_=>_.filter(A=>A!==vf));const{name:d,slot:u,skipVariantsResolver:f,skipSx:p,overridesResolver:x=Hle(Yle(u)),...v}=c,N=d&&d.startsWith("Mui")||u?"components":"custom",b=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,C=p||!1;let w=Bb;u==="Root"||u==="root"?w=s:u?w=r:Qle(l)&&(w=void 0);const S=Lle(l,{shouldForwardProp:w,label:qle(),...v}),E=_=>{if(_.__emotion_real===_)return _;if(typeof _=="function")return function(T){return Hb(T,_,T.theme.modularCssLayers?N:void 0)};if(No(_)){const A=p9(_);return function($){return A.variants?Hb($,A,$.theme.modularCssLayers?N:void 0):$.theme.modularCssLayers?ru(A.style,N):A.style}}return _},k=(..._)=>{const A=[],T=_.map(E),$=[];if(A.push(i),d&&x&&$.push(function(M){const Q=M.theme.components?.[d]?.styleOverrides;if(!Q)return null;const V={};for(const X in Q)V[X]=Hb(M,Q[X],M.theme.modularCssLayers?"theme":void 0);return x(M,V)}),d&&!b&&$.push(function(M){const Q=M.theme?.components?.[d]?.variants;return Q?x9(M,Q,[],M.theme.modularCssLayers?"theme":void 0):null}),C||$.push(vf),Array.isArray(T[0])){const P=T.shift(),M=new Array(A.length).fill(""),G=new Array($.length).fill("");let Q;Q=[...M,...P,...G],Q.raw=[...M,...P.raw,...G],A.unshift(Q)}const z=[...A,...T,...$],F=S(...z);return l.muiName&&(F.muiName=l.muiName),F};return S.withConfig&&(k.withConfig=S.withConfig),k}}function qle(e,t){return void 0}function Vle(e){for(const t in e)return!1;return!0}function Qle(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Yle(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Tu(e,t,a=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)s[i]=o||{};else if(!o)s[i]=l;else{s[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=c;s[i][d]=Tu(o[d],l[d],a)}}}else i==="className"&&a&&t.className?s.className=Pt(e?.className,t?.className):i==="style"&&a&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function y9(e){const{theme:t,name:a,props:s}=e;return!t||!t.components||!t.components[a]||!t.components[a].defaultProps?s:Tu(t.components[a].defaultProps,s)}function Kle({props:e,name:t,defaultTheme:a,themeId:s}){let r=g9(a);return r=r[s]||r,y9({theme:r,name:t,props:e})}const rs=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Xle(e,t,a,s,r){const[i,o]=h.useState(()=>r&&a?a(e).matches:s?s(e).matches:t);return rs(()=>{if(!a)return;const l=a(e),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[e,a]),i}const Zle={...Nu},b9=Zle.useSyncExternalStore;function Jle(e,t,a,s,r){const i=h.useCallback(()=>t,[t]),o=h.useMemo(()=>{if(r&&a)return()=>a(e).matches;if(s!==null){const{matches:u}=s(e);return()=>u}return i},[i,e,s,r,a]),[l,c]=h.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const u=a(e);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[i,a,e]);return b9(c,l,o)}function v9(e={}){const{themeId:t}=e;return function(s,r={}){let i=h9();i&&t&&(i=i[t]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=y9({name:"MuiUseMediaQuery",props:r,theme:i});let f=typeof s=="function"?s(i):s;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(b9!==void 0?Jle:Xle)(f,l,c,d,u)}}v9();function ece(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}function uL(e,t=0,a=1){return ece(e,t,a)}function tce(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function od(e){if(e.type)return e;if(e.charAt(0)==="#")return od(tce(e));const t=e.indexOf("("),a=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(Au(9,e));let s=e.substring(t+1,e.length-1),r;if(a==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Au(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:a,values:s,colorSpace:r}}const nce=e=>{const t=od(e);return t.values.slice(0,3).map((a,s)=>t.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},Dg=(e,t)=>{try{return nce(e)}catch{return e}};function tN(e){const{type:t,colorSpace:a}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function w9(e){e=od(e);const{values:t}=e,a=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),o=(d,u=(d+a/30)%12)=>r-i*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),tN({type:l,values:c})}function PT(e){e=od(e);let t=e.type==="hsl"||e.type==="hsla"?od(w9(e)).values:e.values;return t=t.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ace(e,t){const a=PT(e),s=PT(t);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function N9(e,t){return e=od(e),t=uL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,tN(e)}function Bd(e,t,a){try{return N9(e,t)}catch{return e}}function nN(e,t){if(e=od(e),t=uL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]*=1-t;return tN(e)}function On(e,t,a){try{return nN(e,t)}catch{return e}}function aN(e,t){if(e=od(e),t=uL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*t;else if(e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*t;return tN(e)}function Mn(e,t,a){try{return aN(e,t)}catch{return e}}function sce(e,t=.15){return PT(e)>.5?nN(e,t):aN(e,t)}function Ty(e,t,a){try{return sce(e,t)}catch{return e}}const rce=h.createContext(),fx=()=>h.useContext(rce)??!1,ice=h.createContext(void 0);function oce(e){const{theme:t,name:a,props:s}=e;if(!t||!t.components||!t.components[a])return s;const r=t.components[a];return r.defaultProps?Tu(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?Tu(r,s,t.components.mergeClassNameAndStyle):s}function lce({props:e,name:t}){const a=h.useContext(ice);return oce({props:e,name:t,theme:{components:a}})}let RI=0;function cce(e){const[t,a]=h.useState(e),s=e||t;return h.useEffect(()=>{t==null&&(RI+=1,a(`mui-${RI}`))},[t]),s}const dce={...Nu},zI=dce.useId;function sN(e){if(zI!==void 0){const t=zI();return e??t}return cce(e)}const UI={theme:void 0};function uce(e){let t,a;return function(r){let i=t;return(i===void 0||r.theme!==a)&&(UI.theme=r.theme,i=p9(e(UI)),t=i,a=r.theme),i}}function mce(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const FI=(e,t,a,s=[])=>{let r=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(r)?r[Number(i)]=a:r&&typeof r=="object"&&(r[i]=a):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},fce=(e,t,a)=>{function s(r,i=[],o=[]){Object.entries(r).forEach(([l,c])=>{(!a||a&&!a([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}s(e)},hce=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function LS(e,t){const{prefix:a,shouldSkipGeneratingVar:s}=t||{},r={},i={},o={};return fce(e,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const u=`--${a?`${a}-`:""}${l.join("-")}`,f=hce(l,c);Object.assign(r,{[u]:f}),FI(i,l,`var(${u})`,d),FI(o,l,`var(${u}, ${f})`,d)}},l=>l[0]==="vars"),{css:r,vars:i,varsWithDefaults:o}}function gce(e,t={}){const{getSelector:a=C,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...d}=e,{vars:u,css:f,varsWithDefaults:p}=LS(d,t);let x=p;const v={},{[c]:N,...b}=o;if(Object.entries(b||{}).forEach(([E,k])=>{const{vars:_,css:A,varsWithDefaults:T}=LS(k,t);x=$r(x,T),v[E]={css:A,vars:_}}),N){const{css:E,vars:k,varsWithDefaults:_}=LS(N,t);x=$r(x,_),v[c]={css:E,vars:k}}function C(E,k){let _=r;if(r==="class"&&(_=".%s"),r==="data"&&(_="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(_=`[${r}="%s"]`),E){if(_==="media")return e.defaultColorScheme===E?":root":{[`@media (prefers-color-scheme: ${o[E]?.palette?.mode||E})`]:{":root":k}};if(_)return e.defaultColorScheme===E?`:root, ${_.replace("%s",String(E))}`:_.replace("%s",String(E))}return":root"}return{vars:x,generateThemeVars:()=>{let E={...u};return Object.entries(v).forEach(([,{vars:k}])=>{E=$r(E,k)}),E},generateStyleSheets:()=>{const E=[],k=e.defaultColorScheme||"light";function _($,z){Object.keys(z).length&&E.push(typeof $=="string"?{[$]:{...z}}:$)}_(a(void 0,{...f}),f);const{[k]:A,...T}=v;if(A){const{css:$}=A,z=o[k]?.palette?.mode,F=!s&&z?{colorScheme:z,...$}:{...$};_(a(k,{...F}),F)}return Object.entries(T).forEach(([$,{css:z}])=>{const F=o[$]?.palette?.mode,P=!s&&F?{colorScheme:F,...z}:{...z};_(a($,{...P}),P)}),i&&E.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),E}}}function pce(e){return function(a){return e==="media"?`@media (prefers-color-scheme: ${a})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${a}"] &`:e==="class"?`.${a} &`:e==="data"?`[data-${a}] &`:`${e.replace("%s",a)} &`:"&"}}const mp={black:"#000",white:"#fff"},xce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Mm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Im={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},og={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},$m={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Rm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},zm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function j9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:mp.white,default:mp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const C9=j9();function S9(){return{text:{primary:mp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:mp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const DT=S9();function BI(e,t,a,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(a)?e[t]=e[a]:t==="light"?e.light=aN(e.main,r):t==="dark"&&(e.dark=nN(e.main,i)))}function HI(e,t,a,s,r){const i=r.light||r,o=r.dark||r*1.5;t[a]||(t.hasOwnProperty(s)?t[a]=t[s]:a==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function yce(e="light"){return e==="dark"?{main:$m[200],light:$m[50],dark:$m[400]}:{main:$m[700],light:$m[400],dark:$m[800]}}function bce(e="light"){return e==="dark"?{main:Mm[200],light:Mm[50],dark:Mm[400]}:{main:Mm[500],light:Mm[300],dark:Mm[700]}}function vce(e="light"){return e==="dark"?{main:Im[500],light:Im[300],dark:Im[700]}:{main:Im[700],light:Im[400],dark:Im[800]}}function wce(e="light"){return e==="dark"?{main:Rm[400],light:Rm[300],dark:Rm[700]}:{main:Rm[700],light:Rm[500],dark:Rm[900]}}function Nce(e="light"){return e==="dark"?{main:zm[400],light:zm[300],dark:zm[700]}:{main:zm[800],light:zm[500],dark:zm[900]}}function jce(e="light"){return e==="dark"?{main:og[400],light:og[300],dark:og[700]}:{main:"#ed6c02",light:og[500],dark:og[900]}}function Cce(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function mL(e){const{mode:t="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:r,...i}=e,o=e.primary||yce(t),l=e.secondary||bce(t),c=e.error||vce(t),d=e.info||wce(t),u=e.success||Nce(t),f=e.warning||jce(t);function p(b){return r?Cce(b):ace(b,DT.text.primary)>=a?DT.text.primary:C9.text.primary}const x=({color:b,name:C,mainShade:w=500,lightShade:S=300,darkShade:E=700})=>{if(b={...b},!b.main&&b[w]&&(b.main=b[w]),!b.hasOwnProperty("main"))throw new Error(Au(11,C?` (${C})`:"",w));if(typeof b.main!="string")throw new Error(Au(12,C?` (${C})`:"",JSON.stringify(b.main)));return r?(HI(r,b,"light",S,s),HI(r,b,"dark",E,s)):(BI(b,"light",S,s),BI(b,"dark",E,s)),b.contrastText||(b.contrastText=p(b.main)),b};let v;return t==="light"?v=j9():t==="dark"&&(v=S9()),$r({common:{...mp},mode:t,primary:x({color:o,name:"primary"}),secondary:x({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:f,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:u,name:"success"}),grey:xce,contrastThreshold:a,getContrastText:p,augmentColor:x,tonalOffset:s,...v},i)}function Sce(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function _ce(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Ace(e){return Math.round(e*1e5)/1e5}const GI={textTransform:"uppercase"},WI='"Roboto", "Helvetica", "Arial", sans-serif';function Tce(e,t){const{fontFamily:a=WI,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...f}=typeof t=="function"?t(e):t,p=s/14,x=u||(b=>`${b/c*p}rem`),v=(b,C,w,S,E)=>({fontFamily:a,fontWeight:b,fontSize:x(C),lineHeight:w,...a===WI?{letterSpacing:`${Ace(S/C)}em`}:{},...E,...d}),N={h1:v(r,96,1.167,-1.5),h2:v(r,60,1.2,-.5),h3:v(i,48,1.167,0),h4:v(i,34,1.235,.25),h5:v(i,24,1.334,0),h6:v(o,20,1.6,.15),subtitle1:v(i,16,1.75,.15),subtitle2:v(o,14,1.57,.1),body1:v(i,16,1.5,.15),body2:v(i,14,1.43,.15),button:v(o,14,1.75,.4,GI),caption:v(i,12,1.66,.4),overline:v(i,12,2.66,1,GI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return $r({htmlFontSize:c,pxToRem:x,fontFamily:a,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...N},f,{clone:!1})}const Ece=.2,kce=.14,Lce=.12;function ia(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Ece})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${kce})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Lce})`].join(",")}const Pce=["none",ia(0,2,1,-1,0,1,1,0,0,1,3,0),ia(0,3,1,-2,0,2,2,0,0,1,5,0),ia(0,3,3,-2,0,3,4,0,0,1,8,0),ia(0,2,4,-1,0,4,5,0,0,1,10,0),ia(0,3,5,-1,0,5,8,0,0,1,14,0),ia(0,3,5,-1,0,6,10,0,0,1,18,0),ia(0,4,5,-2,0,7,10,1,0,2,16,1),ia(0,5,5,-3,0,8,10,1,0,3,14,2),ia(0,5,6,-3,0,9,12,1,0,3,16,2),ia(0,6,6,-3,0,10,14,1,0,4,18,3),ia(0,6,7,-4,0,11,15,1,0,4,20,3),ia(0,7,8,-4,0,12,17,2,0,5,22,4),ia(0,7,8,-4,0,13,19,2,0,5,24,4),ia(0,7,9,-4,0,14,21,2,0,5,26,4),ia(0,8,9,-5,0,15,22,2,0,6,28,5),ia(0,8,10,-5,0,16,24,2,0,6,30,5),ia(0,8,11,-5,0,17,26,2,0,6,32,5),ia(0,9,11,-5,0,18,28,2,0,7,34,6),ia(0,9,12,-6,0,19,29,2,0,7,36,6),ia(0,10,13,-6,0,20,31,3,0,8,38,7),ia(0,10,13,-6,0,21,33,3,0,8,40,7),ia(0,10,14,-6,0,22,35,3,0,8,42,7),ia(0,11,14,-7,0,23,36,3,0,9,44,8),ia(0,11,15,-7,0,24,38,3,0,9,46,8)],Dce={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Oce={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function qI(e){return`${Math.round(e)}ms`}function Mce(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Ice(e){const t={...Dce,...e.easing},a={...Oce,...e.duration};return{getAutoHeightDuration:Mce,create:(r=["all"],i={})=>{const{duration:o=a.standard,easing:l=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof o=="string"?o:qI(o)} ${l} ${typeof c=="string"?c:qI(c)}`).join(",")},...e,easing:t,duration:a}}const $ce={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Rce(e){return No(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function _9(e={}){const t={...e};function a(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[o,l]=r[i];!Rce(l)||o.startsWith("unstable_")?delete s[o]:No(l)&&(s[o]={...l},a(s[o]))}}return a(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function VI(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const zce=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let a=0;for(let s=0;s<t.length;s+=1)a+=+t[s];return a};function Uce(e){Object.assign(e,{alpha(t,a){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:N9(t,zce(a))},lighten(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${VI(a)})`:aN(t,a)},darken(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${VI(a)})`:nN(t,a)}})}function OT(e={},...t){const{breakpoints:a,mixins:s={},spacing:r,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:d,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Au(20));const f=mL({...i,colorSpace:d}),p=dL(e);let x=$r(p,{mixins:_ce(p.breakpoints,s),palette:f,shadows:Pce.slice(),typography:Tce(f,l),transitions:Ice(o),zIndex:{...$ce}});return x=$r(x,u),x=t.reduce((v,N)=>$r(v,N),x),x.unstable_sxConfig={...dx,...u?.unstable_sxConfig},x.unstable_sx=function(N){return vf({sx:N,theme:this})},x.toRuntimeSource=_9,Uce(x),x}function Fce(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Bce=[...Array(25)].map((e,t)=>{if(t===0)return"none";const a=Fce(t);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function A9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function T9(e){return e==="dark"?Bce:[]}function Hce(e){const{palette:t={mode:"light"},opacity:a,overlays:s,colorSpace:r,...i}=e,o=mL({...t,colorSpace:r});return{palette:o,opacity:{...A9(o.mode),...a},overlays:s||T9(o.mode),...i}}function Gce(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Wce=e=>[...[...Array(25)].map((t,a)=>`--${e?`${e}-`:""}overlays-${a}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],qce=e=>(t,a)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return Wce(e.cssVarPrefix).forEach(l=>{o[l]=a[l],delete a[l]}),i==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:o}}:i?{[i.replace("%s",t)]:o,[`${s}, ${i.replace("%s",t)}`]:a}:{[s]:{...a,...o}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:a}};if(i)return i.replace("%s",String(t))}return s};function Vce(e,t){t.forEach(a=>{e[a]||(e[a]={})})}function mt(e,t,a){!e[t]&&a&&(e[t]=a)}function Og(e){return typeof e!="string"||!e.startsWith("hsl")?e:w9(e)}function ul(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Dg(Og(e[t])))}function Qce(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const ro=e=>{try{return e()}catch{}},Yce=(e="mui")=>mce(e);function PS(e,t,a,s,r){if(!a)return;a=a===!0?{}:a;const i=r==="dark"?"dark":"light";if(!s){t[r]=Hce({...a,palette:{mode:i,...a?.palette},colorSpace:e});return}const{palette:o,...l}=OT({...s,palette:{mode:i,...a?.palette},colorSpace:e});return t[r]={...a,palette:o,opacity:{...A9(i),...a?.opacity},overlays:a?.overlays||T9(i)},l}function Kce(e={},...t){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=Gce,colorSchemeSelector:c=a.light&&a.dark?"media":void 0,rootSelector:d=":root",...u}=e,f=Object.keys(a)[0],p=s||(a.light&&f!=="light"?"light":f),x=Yce(i),{[p]:v,light:N,dark:b,...C}=a,w={...C};let S=v;if((p==="dark"&&!("dark"in a)||p==="light"&&!("light"in a))&&(S=!0),!S)throw new Error(Au(21,p));let E;o&&(E="oklch");const k=PS(E,w,S,u,p);N&&!w.light&&PS(E,w,N,void 0,"light"),b&&!w.dark&&PS(E,w,b,void 0,"dark");let _={defaultColorScheme:p,...k,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:w,font:{...Sce(k.typography),...k.font},spacing:Qce(u.spacing)};Object.keys(_.colorSchemes).forEach(F=>{const P=_.colorSchemes[F].palette,M=Q=>{const V=Q.split("-"),X=V[1],q=V[2];return x(Q,P[X][q])};P.mode==="light"&&(mt(P.common,"background","#fff"),mt(P.common,"onBackground","#000")),P.mode==="dark"&&(mt(P.common,"background","#000"),mt(P.common,"onBackground","#fff"));function G(Q,V,X){if(E){let q;return Q===Bd&&(q=`transparent ${((1-X)*100).toFixed(0)}%`),Q===On&&(q=`#000 ${(X*100).toFixed(0)}%`),Q===Mn&&(q=`#fff ${(X*100).toFixed(0)}%`),`color-mix(in ${E}, ${V}, ${q})`}return Q(V,X)}if(Vce(P,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),P.mode==="light"){mt(P.Alert,"errorColor",G(On,P.error.light,.6)),mt(P.Alert,"infoColor",G(On,P.info.light,.6)),mt(P.Alert,"successColor",G(On,P.success.light,.6)),mt(P.Alert,"warningColor",G(On,P.warning.light,.6)),mt(P.Alert,"errorFilledBg",M("palette-error-main")),mt(P.Alert,"infoFilledBg",M("palette-info-main")),mt(P.Alert,"successFilledBg",M("palette-success-main")),mt(P.Alert,"warningFilledBg",M("palette-warning-main")),mt(P.Alert,"errorFilledColor",ro(()=>P.getContrastText(P.error.main))),mt(P.Alert,"infoFilledColor",ro(()=>P.getContrastText(P.info.main))),mt(P.Alert,"successFilledColor",ro(()=>P.getContrastText(P.success.main))),mt(P.Alert,"warningFilledColor",ro(()=>P.getContrastText(P.warning.main))),mt(P.Alert,"errorStandardBg",G(Mn,P.error.light,.9)),mt(P.Alert,"infoStandardBg",G(Mn,P.info.light,.9)),mt(P.Alert,"successStandardBg",G(Mn,P.success.light,.9)),mt(P.Alert,"warningStandardBg",G(Mn,P.warning.light,.9)),mt(P.Alert,"errorIconColor",M("palette-error-main")),mt(P.Alert,"infoIconColor",M("palette-info-main")),mt(P.Alert,"successIconColor",M("palette-success-main")),mt(P.Alert,"warningIconColor",M("palette-warning-main")),mt(P.AppBar,"defaultBg",M("palette-grey-100")),mt(P.Avatar,"defaultBg",M("palette-grey-400")),mt(P.Button,"inheritContainedBg",M("palette-grey-300")),mt(P.Button,"inheritContainedHoverBg",M("palette-grey-A100")),mt(P.Chip,"defaultBorder",M("palette-grey-400")),mt(P.Chip,"defaultAvatarColor",M("palette-grey-700")),mt(P.Chip,"defaultIconColor",M("palette-grey-700")),mt(P.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),mt(P.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),mt(P.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),mt(P.LinearProgress,"primaryBg",G(Mn,P.primary.main,.62)),mt(P.LinearProgress,"secondaryBg",G(Mn,P.secondary.main,.62)),mt(P.LinearProgress,"errorBg",G(Mn,P.error.main,.62)),mt(P.LinearProgress,"infoBg",G(Mn,P.info.main,.62)),mt(P.LinearProgress,"successBg",G(Mn,P.success.main,.62)),mt(P.LinearProgress,"warningBg",G(Mn,P.warning.main,.62)),mt(P.Skeleton,"bg",E?G(Bd,P.text.primary,.11):`rgba(${M("palette-text-primaryChannel")} / 0.11)`),mt(P.Slider,"primaryTrack",G(Mn,P.primary.main,.62)),mt(P.Slider,"secondaryTrack",G(Mn,P.secondary.main,.62)),mt(P.Slider,"errorTrack",G(Mn,P.error.main,.62)),mt(P.Slider,"infoTrack",G(Mn,P.info.main,.62)),mt(P.Slider,"successTrack",G(Mn,P.success.main,.62)),mt(P.Slider,"warningTrack",G(Mn,P.warning.main,.62));const Q=E?G(On,P.background.default,.6825):Ty(P.background.default,.8);mt(P.SnackbarContent,"bg",Q),mt(P.SnackbarContent,"color",ro(()=>E?DT.text.primary:P.getContrastText(Q))),mt(P.SpeedDialAction,"fabHoverBg",Ty(P.background.paper,.15)),mt(P.StepConnector,"border",M("palette-grey-400")),mt(P.StepContent,"border",M("palette-grey-400")),mt(P.Switch,"defaultColor",M("palette-common-white")),mt(P.Switch,"defaultDisabledColor",M("palette-grey-100")),mt(P.Switch,"primaryDisabledColor",G(Mn,P.primary.main,.62)),mt(P.Switch,"secondaryDisabledColor",G(Mn,P.secondary.main,.62)),mt(P.Switch,"errorDisabledColor",G(Mn,P.error.main,.62)),mt(P.Switch,"infoDisabledColor",G(Mn,P.info.main,.62)),mt(P.Switch,"successDisabledColor",G(Mn,P.success.main,.62)),mt(P.Switch,"warningDisabledColor",G(Mn,P.warning.main,.62)),mt(P.TableCell,"border",G(Mn,G(Bd,P.divider,1),.88)),mt(P.Tooltip,"bg",G(Bd,P.grey[700],.92))}if(P.mode==="dark"){mt(P.Alert,"errorColor",G(Mn,P.error.light,.6)),mt(P.Alert,"infoColor",G(Mn,P.info.light,.6)),mt(P.Alert,"successColor",G(Mn,P.success.light,.6)),mt(P.Alert,"warningColor",G(Mn,P.warning.light,.6)),mt(P.Alert,"errorFilledBg",M("palette-error-dark")),mt(P.Alert,"infoFilledBg",M("palette-info-dark")),mt(P.Alert,"successFilledBg",M("palette-success-dark")),mt(P.Alert,"warningFilledBg",M("palette-warning-dark")),mt(P.Alert,"errorFilledColor",ro(()=>P.getContrastText(P.error.dark))),mt(P.Alert,"infoFilledColor",ro(()=>P.getContrastText(P.info.dark))),mt(P.Alert,"successFilledColor",ro(()=>P.getContrastText(P.success.dark))),mt(P.Alert,"warningFilledColor",ro(()=>P.getContrastText(P.warning.dark))),mt(P.Alert,"errorStandardBg",G(On,P.error.light,.9)),mt(P.Alert,"infoStandardBg",G(On,P.info.light,.9)),mt(P.Alert,"successStandardBg",G(On,P.success.light,.9)),mt(P.Alert,"warningStandardBg",G(On,P.warning.light,.9)),mt(P.Alert,"errorIconColor",M("palette-error-main")),mt(P.Alert,"infoIconColor",M("palette-info-main")),mt(P.Alert,"successIconColor",M("palette-success-main")),mt(P.Alert,"warningIconColor",M("palette-warning-main")),mt(P.AppBar,"defaultBg",M("palette-grey-900")),mt(P.AppBar,"darkBg",M("palette-background-paper")),mt(P.AppBar,"darkColor",M("palette-text-primary")),mt(P.Avatar,"defaultBg",M("palette-grey-600")),mt(P.Button,"inheritContainedBg",M("palette-grey-800")),mt(P.Button,"inheritContainedHoverBg",M("palette-grey-700")),mt(P.Chip,"defaultBorder",M("palette-grey-700")),mt(P.Chip,"defaultAvatarColor",M("palette-grey-300")),mt(P.Chip,"defaultIconColor",M("palette-grey-300")),mt(P.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),mt(P.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),mt(P.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),mt(P.LinearProgress,"primaryBg",G(On,P.primary.main,.5)),mt(P.LinearProgress,"secondaryBg",G(On,P.secondary.main,.5)),mt(P.LinearProgress,"errorBg",G(On,P.error.main,.5)),mt(P.LinearProgress,"infoBg",G(On,P.info.main,.5)),mt(P.LinearProgress,"successBg",G(On,P.success.main,.5)),mt(P.LinearProgress,"warningBg",G(On,P.warning.main,.5)),mt(P.Skeleton,"bg",E?G(Bd,P.text.primary,.13):`rgba(${M("palette-text-primaryChannel")} / 0.13)`),mt(P.Slider,"primaryTrack",G(On,P.primary.main,.5)),mt(P.Slider,"secondaryTrack",G(On,P.secondary.main,.5)),mt(P.Slider,"errorTrack",G(On,P.error.main,.5)),mt(P.Slider,"infoTrack",G(On,P.info.main,.5)),mt(P.Slider,"successTrack",G(On,P.success.main,.5)),mt(P.Slider,"warningTrack",G(On,P.warning.main,.5));const Q=E?G(Mn,P.background.default,.985):Ty(P.background.default,.98);mt(P.SnackbarContent,"bg",Q),mt(P.SnackbarContent,"color",ro(()=>E?C9.text.primary:P.getContrastText(Q))),mt(P.SpeedDialAction,"fabHoverBg",Ty(P.background.paper,.15)),mt(P.StepConnector,"border",M("palette-grey-600")),mt(P.StepContent,"border",M("palette-grey-600")),mt(P.Switch,"defaultColor",M("palette-grey-300")),mt(P.Switch,"defaultDisabledColor",M("palette-grey-600")),mt(P.Switch,"primaryDisabledColor",G(On,P.primary.main,.55)),mt(P.Switch,"secondaryDisabledColor",G(On,P.secondary.main,.55)),mt(P.Switch,"errorDisabledColor",G(On,P.error.main,.55)),mt(P.Switch,"infoDisabledColor",G(On,P.info.main,.55)),mt(P.Switch,"successDisabledColor",G(On,P.success.main,.55)),mt(P.Switch,"warningDisabledColor",G(On,P.warning.main,.55)),mt(P.TableCell,"border",G(On,G(Bd,P.divider,1),.68)),mt(P.Tooltip,"bg",G(Bd,P.grey[700],.92))}ul(P.background,"default"),ul(P.background,"paper"),ul(P.common,"background"),ul(P.common,"onBackground"),ul(P,"divider"),Object.keys(P).forEach(Q=>{const V=P[Q];Q!=="tonalOffset"&&V&&typeof V=="object"&&(V.main&&mt(P[Q],"mainChannel",Dg(Og(V.main))),V.light&&mt(P[Q],"lightChannel",Dg(Og(V.light))),V.dark&&mt(P[Q],"darkChannel",Dg(Og(V.dark))),V.contrastText&&mt(P[Q],"contrastTextChannel",Dg(Og(V.contrastText))),Q==="text"&&(ul(P[Q],"primary"),ul(P[Q],"secondary")),Q==="action"&&(V.active&&ul(P[Q],"active"),V.selected&&ul(P[Q],"selected")))})}),_=t.reduce((F,P)=>$r(F,P),_);const A={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:l,getSelector:qce(_),enableContrastVars:o},{vars:T,generateThemeVars:$,generateStyleSheets:z}=gce(_,A);return _.vars=T,Object.entries(_.colorSchemes[_.defaultColorScheme]).forEach(([F,P])=>{_[F]=P}),_.generateThemeVars=$,_.generateStyleSheets=z,_.generateSpacing=function(){return f9(u.spacing,tL(this))},_.getColorSchemeSelector=pce(c),_.spacing=_.generateSpacing(),_.shouldSkipGeneratingVar=l,_.unstable_sxConfig={...dx,...u?.unstable_sxConfig},_.unstable_sx=function(P){return vf({sx:P,theme:this})},_.toRuntimeSource=_9,_}function QI(e,t,a){e.colorSchemes&&a&&(e.colorSchemes[t]={...a!==!0&&a,palette:mL({...a===!0?{}:a.palette,mode:t})})}function Xce(e={},...t){const{palette:a,cssVariables:s=!1,colorSchemes:r=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...o}=e,l=i||"light",c=r?.[l],d={...r,...a?{[l]:{...typeof c!="boolean"&&c,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in e))return OT(e,...t);let u=a;"palette"in e||d[l]&&(d[l]!==!0?u=d[l].palette:l==="dark"&&(u={mode:"dark"}));const f=OT({...e,palette:u},...t);return f.defaultColorScheme=l,f.colorSchemes=d,f.palette.mode==="light"&&(f.colorSchemes.light={...d.light!==!0&&d.light,palette:f.palette},QI(f,"dark",d.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:f.palette},QI(f,"light",d.light)),f}return!a&&!("light"in d)&&l==="light"&&(d.light=!0),Kce({...o,colorSchemes:d,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const fL=Xce(),rN="$$material";function Ho(){const e=g9(fL);return e[rN]||e}function Zce(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const E9=e=>Zce(e)&&e!=="classes",un=Wle({themeId:rN,defaultTheme:fL,rootShouldForwardProp:E9});function Jce(){return Doe}function yd(e){return lce(e)}function $o(...e){const t=h.useRef(void 0),a=h.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return h.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=a(s))},e)}function ede(e){return typeof e=="string"}function k9(e,t,a){return e===void 0||ede(e)?t:{...t,ownerState:{...t.ownerState,...a}}}function L9(e,t,a){return typeof e=="function"?e(t,a):e}function tde(e,t=[]){if(e===void 0)return{};const a={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{a[s]=e[s]}),a}function YI(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(a=>!(a.match(/^on[A-Z]/)&&typeof e[a]=="function")).forEach(a=>{t[a]=e[a]}),t}function P9(e){const{getSlotProps:t,additionalProps:a,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=Pt(a?.className,i,r?.className,s?.className),v={...a?.style,...r?.style,...s?.style},N={...a,...r,...s};return x.length>0&&(N.className=x),Object.keys(v).length>0&&(N.style=v),{props:N,internalRef:void 0}}const o=tde({...r,...s}),l=YI(s),c=YI(r),d=t(o),u=Pt(d?.className,a?.className,i,r?.className,s?.className),f={...d?.style,...a?.style,...r?.style,...s?.style},p={...d,...a,...c,...l};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:d.ref}}function KI(e,t){const{className:a,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:d,slots:u={[e]:void 0},slotProps:f={[e]:void 0},...p}=i,x=u[e]||s,v=L9(f[e],r),{props:{component:N,...b},internalRef:C}=P9({className:a,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:v}),w=$o(C,v?.ref,t.ref),S=e==="root"?N||d:N,E=k9(x,{...e==="root"&&!d&&!u[e]&&o,...e!=="root"&&!u[e]&&o,...b,...S&&!l&&{as:S},...S&&l&&{component:S},ref:w},r);return[x,E]}function xn(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function MT(e,t){return MT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},MT(e,t)}function D9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,MT(e,t)}const XI={disabled:!1},ov=yt.createContext(null);var nde=function(t){return t.scrollTop},Mg="unmounted",Vd="exited",Qd="entering",ef="entered",IT="exiting",Zl=(function(e){D9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=r,l=o&&!o.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?l?(c=Vd,i.appearStatus=Qd):c=ef:s.unmountOnExit||s.mountOnEnter?c=Mg:c=Vd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var o=r.in;return o&&i.status===Mg?{status:Vd}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(r){var i=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Qd&&o!==ef&&(i=Qd):(o===Qd||o===ef)&&(i=IT)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var r=this.props.timeout,i,o,l;return i=o=l=r,r!=null&&typeof r!="number"&&(i=r.exit,o=r.enter,l=r.appear!==void 0?r.appear:o),{exit:i,enter:o,appear:l}},a.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Qd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Cy.findDOMNode(this);o&&nde(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Vd&&this.setState({status:Mg})},a.performEnter=function(r){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:r,c=this.props.nodeRef?[l]:[Cy.findDOMNode(this),l],d=c[0],u=c[1],f=this.getTimeouts(),p=l?f.appear:f.enter;if(!r&&!o||XI.disabled){this.safeSetState({status:ef},function(){i.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:Qd},function(){i.props.onEntering(d,u),i.onTransitionEnd(p,function(){i.safeSetState({status:ef},function(){i.props.onEntered(d,u)})})})},a.performExit=function(){var r=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:Cy.findDOMNode(this);if(!i||XI.disabled){this.safeSetState({status:Vd},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:IT},function(){r.props.onExiting(l),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Vd},function(){r.props.onExited(l)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},a.setNextCallback=function(r){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,r(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},a.onTransitionEnd=function(r,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Cy.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}r!=null&&setTimeout(this.nextCallback,r)},a.render=function(){var r=this.state.status;if(r===Mg)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=xn(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return yt.createElement(ov.Provider,{value:null},typeof o=="function"?o(r,l):yt.cloneElement(yt.Children.only(o),l))},t})(yt.Component);Zl.contextType=ov;Zl.propTypes={};function Um(){}Zl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Um,onEntering:Um,onEntered:Um,onExit:Um,onExiting:Um,onExited:Um};Zl.UNMOUNTED=Mg;Zl.EXITED=Vd;Zl.ENTERING=Qd;Zl.ENTERED=ef;Zl.EXITING=IT;function ade(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hL(e,t){var a=function(i){return t&&h.isValidElement(i)?t(i):i},s=Object.create(null);return e&&h.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=a(r)}),s}function sde(e,t){e=e||{},t=t||{};function a(u){return u in t?t[u]:e[u]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var d=s[c][o];l[s[c][o]]=a(d)}l[c]=a(c)}for(o=0;o<r.length;o++)l[r[o]]=a(r[o]);return l}function iu(e,t,a){return a[t]!=null?a[t]:e.props[t]}function rde(e,t){return hL(e.children,function(a){return h.cloneElement(a,{onExited:t.bind(null,a),in:!0,appear:iu(a,"appear",e),enter:iu(a,"enter",e),exit:iu(a,"exit",e)})})}function ide(e,t,a){var s=hL(e.children),r=sde(t,s);return Object.keys(r).forEach(function(i){var o=r[i];if(h.isValidElement(o)){var l=i in t,c=i in s,d=t[i],u=h.isValidElement(d)&&!d.props.in;c&&(!l||u)?r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:!0,exit:iu(o,"exit",e),enter:iu(o,"enter",e)}):!c&&l&&!u?r[i]=h.cloneElement(o,{in:!1}):c&&l&&h.isValidElement(d)&&(r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:d.props.in,exit:iu(o,"exit",e),enter:iu(o,"enter",e)}))}}),r}var ode=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},lde={component:"div",childFactory:function(t){return t}},gL=(function(e){D9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=i.handleExited.bind(ade(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?rde(r,l):ide(r,o,l),firstRender:!1}},a.handleExited=function(r,i){var o=hL(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(l){var c=qe({},l.children);return delete c[r.key],{children:c}}))},a.render=function(){var r=this.props,i=r.component,o=r.childFactory,l=xn(r,["component","childFactory"]),c=this.state.contextValue,d=ode(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?yt.createElement(ov.Provider,{value:c},d):yt.createElement(ov.Provider,{value:c},yt.createElement(i,l,d))},t})(yt.Component);gL.propTypes={};gL.defaultProps=lde;function O9(e){return parseInt(h.version,10)>=19?e?.props?.ref||null:e?.ref||null}const cde=e=>e.scrollTop;function ZI(e,t){const{timeout:a,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof a=="number"?a:a[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const dde={entering:{opacity:1},entered:{opacity:1}},ude=h.forwardRef(function(t,a){const s=Ho(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:d,onEnter:u,onEntered:f,onEntering:p,onExit:x,onExited:v,onExiting:N,style:b,timeout:C=r,TransitionComponent:w=Zl,...S}=t,E=h.useRef(null),k=$o(E,O9(l),a),_=G=>Q=>{if(G){const V=E.current;Q===void 0?G(V):G(V,Q)}},A=_(p),T=_((G,Q)=>{cde(G);const V=ZI({style:b,timeout:C,easing:c},{mode:"enter"});G.style.webkitTransition=s.transitions.create("opacity",V),G.style.transition=s.transitions.create("opacity",V),u&&u(G,Q)}),$=_(f),z=_(N),F=_(G=>{const Q=ZI({style:b,timeout:C,easing:c},{mode:"exit"});G.style.webkitTransition=s.transitions.create("opacity",Q),G.style.transition=s.transitions.create("opacity",Q),x&&x(G)}),P=_(v),M=G=>{i&&i(E.current,G)};return n.jsx(w,{appear:o,in:d,nodeRef:E,onEnter:T,onEntered:$,onEntering:A,onExit:F,onExited:P,onExiting:z,addEndListener:M,timeout:C,...S,children:(G,{ownerState:Q,...V})=>h.cloneElement(l,{style:{opacity:0,visibility:G==="exited"&&!d?"hidden":void 0,...dde[G],...b,...l.props.style},ref:k,...V})})});function mde(e){return Va("MuiBackdrop",e)}Aa("MuiBackdrop",["root","invisible"]);const fde=e=>{const{classes:t,invisible:a}=e;return qa({root:["root",a&&"invisible"]},mde,t)},hde=un("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),gde=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:l=!1,open:c,components:d={},componentsProps:u={},slotProps:f={},slots:p={},TransitionComponent:x,transitionDuration:v,...N}=s,b={...s,component:o,invisible:l},C=fde(b),w={transition:x,root:d.Root,...p},S={...u,...f},E={component:o,slots:w,slotProps:S},[k,_]=KI("root",{elementType:hde,externalForwardedProps:E,className:Pt(C.root,i),ownerState:b}),[A,T]=KI("transition",{elementType:ude,externalForwardedProps:E,ownerState:b});return n.jsx(A,{in:c,timeout:v,...N,...T,children:n.jsx(k,{"aria-hidden":!0,..._,classes:C,ref:a,children:r})})}),Eu=uce;function pde(e){return typeof e.main=="string"}function xde(e,t=[]){if(!pde(e))return!1;for(const a of t)if(!e.hasOwnProperty(a)||typeof e[a]!="string")return!1;return!0}function fp(e=[]){return([,t])=>t&&xde(t,e)}function yde(e){return Va("MuiCircularProgress",e)}Aa("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Di=44,$T=mx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,RT=mx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,bde=typeof $T!="string"?cL`
        animation: ${$T} 1.4s linear infinite;
      `:null,vde=typeof RT!="string"?cL`
        animation: ${RT} 1.4s ease-in-out infinite;
      `:null,wde=e=>{const{classes:t,variant:a,color:s,disableShrink:r}=e,i={root:["root",a,`color${Wn(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Wn(a)}`,r&&"circleDisableShrink"]};return qa(i,yde,t)},Nde=un("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`color${Wn(a.color)}`]]}})(Eu(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:bde||{animation:`${$T} 1.4s linear infinite`}},...Object.entries(e.palette).filter(fp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),jde=un("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Cde=un("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.circle,t[`circle${Wn(a.variant)}`],a.disableShrink&&t.circleDisableShrink]}})(Eu(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:vde||{animation:`${RT} 1.4s ease-in-out infinite`}}]}))),Sde=un("circle",{name:"MuiCircularProgress",slot:"Track"})(Eu(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),pL=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:u=3.6,value:f=0,variant:p="indeterminate",...x}=s,v={...s,color:i,disableShrink:o,size:c,thickness:u,value:f,variant:p,enableTrackSlot:l},N=wde(v),b={},C={},w={};if(p==="determinate"){const S=2*Math.PI*((Di-u)/2);b.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(f),b.strokeDashoffset=`${((100-f)/100*S).toFixed(3)}px`,C.transform="rotate(-90deg)"}return n.jsx(Nde,{className:Pt(N.root,r),style:{width:c,height:c,...C,...d},ownerState:v,ref:a,role:"progressbar",...w,...x,children:n.jsxs(jde,{className:N.svg,ownerState:v,viewBox:`${Di/2} ${Di/2} ${Di} ${Di}`,children:[l?n.jsx(Sde,{className:N.track,ownerState:v,cx:Di,cy:Di,r:(Di-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,n.jsx(Cde,{className:N.circle,style:b,ownerState:v,cx:Di,cy:Di,r:(Di-u)/2,fill:"none",strokeWidth:u})]})})});function M9(e){return n.jsx(gde,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:n.jsx(pL,{color:"inherit"})})}var Cs={},Ey={},JI;function _de(){if(JI)return Ey;JI=1,Object.defineProperty(Ey,"__esModule",{value:!0});function e(t,a){return t.reduce((s,r)=>{const i=String(r[a]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return Ey.default=e,Ey}var ky={},e$;function Ade(){if(e$)return ky;e$=1,Object.defineProperty(ky,"__esModule",{value:!0});function e(t,a){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=a[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return ky.default=e,ky}var Ly={},t$;function Tde(){if(t$)return Ly;t$=1,Object.defineProperty(Ly,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return Ly.default=e,Ly}var n$;function Ede(){if(n$)return Cs;n$=1;var e=Cs&&Cs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.customList=Cs.customArray=Cs.findOne=Cs.filter=Cs.all=Cs.utils=void 0;const t=e(_de()),a=e(Ade()),s=e(Tde());Cs.utils={groupBy:t.default};function r(){return s.default}Cs.all=r;function i(d,u){return s.default.filter(f=>f[d]===u)}Cs.filter=i;function o(d,u){return s.default.find(f=>f[d]===u)}Cs.findOne=o;function l(d={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:u,sortDataBy:f,filter:p}={}){const x=[];let v=s.default;if(typeof p=="function"&&(v=v.filter(p)),f){const N=new Intl.Collator([],{sensitivity:"accent"});v.sort((b,C)=>N.compare(b[f],C[f]))}if(v.forEach(N=>{const b={};for(const C in d)b[C]=(0,a.default)(d[C],N);x.push(b)}),u&&d[u]){const N=new Intl.Collator([],{sensitivity:"accent"});x.sort((b,C)=>N.compare(b[u],C[u]))}return x}Cs.customArray=l;function c(d="countryCode",u="{countryNameEn} ({countryCode})",{filter:f}={}){const p={};let x=s.default;return typeof f=="function"&&(x=x.filter(f)),x.forEach(v=>{const N=(0,a.default)(u,v);p[String(v[d])]=N}),p}return Cs.customList=c,Cs}var Vf=Ede();const zT=(...e)=>e.flat().filter(Boolean).join(" "),kde=Vf.all(),I9=kde.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),UT=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],Lde=()=>{const e=wt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back to Home"]})},Pde=h.memo(({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isVisible:o,onTogglePass:l,error:c,isSelect:d,options:u})=>{const f=t.toLowerCase().includes("password"),p=f?o?"text":"password":s,x=zT("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",f?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),n.jsxs("div",{className:"relative",children:[d?n.jsx("select",{id:t,value:r,onChange:i,required:!0,className:x,children:u.map(v=>n.jsx("option",{value:v,children:v},v))}):n.jsx("input",{id:t,type:p,placeholder:a,value:r,onChange:i,required:!0,className:x}),f&&n.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]}),c&&n.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),tu=Pde,Dde=h.memo(({currentStep:e,totalSteps:t})=>n.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:UT.map(a=>n.jsxs(h.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[n.jsx("div",{className:zT("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",a.id===e?"bg-amber-500 text-white shadow-lg":a.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:a.id<e?n.jsx(Qk,{className:"size-5"}):a.id}),n.jsx("span",{className:zT("mt-2 text-xs font-medium hidden sm:block",a.id===e?"text-amber-600":"text-gray-500"),children:a.title})]}),a.id<t&&n.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},a.id))})),Ode=h.memo(({formData:e,handleChange:t,handleCodeChange:a,handleTogglePass:s,isPassVisible:r,formError:i,signupError:o,termsAccepted:l,handleTerms:c,isButtonDisabled:d,handleSubmit:u,handleGoogleLogin:f})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx(tu,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(tu,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:a,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:I9.map(p=>n.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),n.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(tu,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),n.jsx(tu,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),n.jsx(tu,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),o&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:o}),n.jsxs("div",{className:"flex items-start pt-2",children:[n.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),n.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),i&&n.jsx("div",{className:"mt-4 p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium animate-pulse",children:i}),n.jsx("button",{type:"submit",onClick:u,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),Mde=h.memo(({companyData:e,handleCodeChange1:t,handleSubmit:a,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:o,setStep:l,setIsSubmitted:c,setFormError:d})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(tu,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:I9.map(u=>n.jsxs("option",{value:u.code,children:[u.name," ",u.code]},u.code))}),n.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(tu,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),n.jsxs("div",{className:"flex space-x-4 mt-8",children:[n.jsxs("button",{type:"button",onClick:()=>{l(1),c(!1),d(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[n.jsx(yie,{className:"size-4 mr-2"})," Back"]}),n.jsx("button",{onClick:a,type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),Ide=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[a,s]=h.useState(1),[r,i]=h.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[o,l]=h.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,d]=h.useState({}),[u,f]=h.useState(!1),[p,x]=h.useState(null),[v,N]=h.useState(!1),{login:b}=Ys(),[C,w]=h.useState({plan_name:"Free",price:0}),[S,E]=h.useState(!1),[k,_]=h.useState(null);h.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),h.useEffect(()=>{const q=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:A}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){q();return}const ne=document.createElement("script");ne.src="https://accounts.google.com/gsi/client",ne.async=!0,ne.defer=!0,ne.onload=q,document.body.appendChild(ne)},[]);const A=async q=>{E(!0);try{const ne=KH(q.credential);console.log("Google user:",ne);try{await ae.post("/auth/email-check",{email:ne.email})}catch(oe){const K=oe.response?.data?.detail||"An error occurred.";_(K),E(!1);return}i(oe=>({...oe,email:ne.email,first_name:ne.given_name||"",last_name:ne.family_name||"",password:"",profilePicture:ne.picture||"",googleId:ne.sub,auth_provider:"google",id_token:q.credential})),s(2)}catch(ne){console.error("Google signup error:",ne),x("Failed to process Google account. Please try again.")}finally{_(null),x(null),E(!1)}},T=h.useCallback(q=>{const{id:ne,value:oe}=q.target;l(K=>({...K,[ne]:oe})),x(null)},[]),$=h.useCallback(q=>{const{id:ne,value:oe}=q.target;N(!1),i(K=>{const R={...K,[ne]:oe};if(a===1){let ye=null;if(ne==="password"&&oe.length>0&&oe.length<8)ye="Password must be at least 8 characters.";else if(ne==="password"||ne==="confirmPassword"){const pe=ne==="password"?oe:R.password,Ne=ne==="confirmPassword"?oe:R.confirmPassword;pe&&Ne&&pe!==Ne&&(ye="Passwords don't match.")}x(ye)}return R})},[a]),z=h.useCallback(q=>i(ne=>({...ne,countryCode:q.target.value})),[]),F=h.useCallback(q=>l(ne=>({...ne,countryCode:q.target.value})),[]),P=h.useCallback(q=>d(ne=>({...ne,[q]:!ne[q]})),[]),M=h.useCallback(q=>f(q.target.checked),[]),G=async q=>{if(q.preventDefault(),N(!1),x(null),a===1){if(!e.every(oe=>r[oe].trim()!=="")||!u){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.password.length<8){x("Password must be at least 8 characters long.");return}if(r.auth_provider==="google"){s(2);return}try{(await ae.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(oe){oe.response&&oe.response.data&&oe.response.data.detail?x(oe.response.data.detail):x("Something went wrong. Please try again.")}finally{E(!1)}}else if(a===2){if(!t.every(oe=>(o[oe]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:oe,...K}=r,R={...o,company_number:`${o.countryCode} ${o.company_number}`},pe=(await ae.post("/company/create",R)).data.id,Ne={...K,company_id:pe,phone_number:`${K.countryCode} ${K.phone_number}`};if(console.log(" Sending payload:",Ne),K.auth_provider==="google"){const Se=await ae.post("/auth/google/signup",Ne),Oe={...C,company_id:pe,status:"Active"},ke=await ae.post("/subscription/subscribe",Oe);x(null),N(!0),b(Se.data)}else{const Se=await ae.post("/auth/signup",Ne),Oe={...C,company_id:pe,status:"Active"},ke=await ae.post("/subscription/subscribe",Oe);x(null),N(!0),b(Se.data)}}catch(oe){if(oe.response?.data?.detail){const K=oe.response.data.detail;if(Array.isArray(K)){const R=K.map(ye=>ye.msg).join(", ");x(R)}else x(typeof K=="object"?K.msg||JSON.stringify(K):K)}else x("Something went wrong. Please try again.")}finally{E(!1)}}},Q=h.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:q=>{const{credential:ne}=q;i(oe=>({...oe,first_name:ne.given_name||"",last_name:ne.family_name||"",email:ne.email||"",profile_picture:ne.picture||"",auth_provider:"google",id_token:ne})),s(2)}}),window.google.accounts.id.prompt()}catch(q){console.error("Google login error:",q),x("Google login failed. Please try again.")}},[i,x,s]),V=h.useMemo(()=>{if(a===1){const q=e.every(K=>(r[K]||"").trim()!==""),ne=r.password.length>=8,oe=r.password===r.confirmPassword;return!u||!!p||!q||!ne||!oe}return a===2?!t.every(ne=>(o[ne]||"").trim()!=="")||!!p:!1},[a,u,p,r,o]),X=UT.find(q=>q.id===a);return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsxs("div",{className:"flex items-center text-gray-800",children:[n.jsx(en,{className:"size-6 text-amber-500 mr-2"}),n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&n.jsx(M9,{isLoading:S}),n.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:n.jsx(Lde,{})}),n.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:X.title}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:X.subtitle})]}),n.jsx(Dde,{currentStep:a,totalSteps:UT.length}),a===1&&n.jsx("div",{id:"googleSignupBtn"}),n.jsxs("form",{className:"mt-8",children:[a===1&&n.jsx(Ode,{formData:r,handleChange:$,handleCodeChange:z,handleTogglePass:P,isPassVisible:c,formError:p,signupError:k,termsAccepted:u,handleTerms:M,isButtonDisabled:V,handleSubmit:G,handleGoogleLogin:Q}),a===2&&n.jsx(Mde,{handleSubmit:G,companyData:o,handleCompanyChange:T,formError:p,isSubmitted:v,isButtonDisabled:V,setStep:s,setIsSubmitted:N,setFormError:x,handleCodeChange1:F}),a===1&&n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",n.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},$de=()=>{const e=wt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back to Home"]})},a$=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isPassVisible:o,onTogglePass:l})=>{const c=t.toLowerCase().includes("password"),d=c?o?"text":"password":s;return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:t,type:d,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&n.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]})},Rde=()=>{const[e,t]=h.useState({email:"",password:""}),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(!1),{isLoggedIn:c,login:d,userRole:u}=Ys(),f=wt();h.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),h.useEffect(()=>{c&&(u==="CEO"||u==="Admin"?f("/admin"):u==="Group Manager"?f("/group-manager"):u==="Manager"?f("/manager"):u==="Marketing"?f("/marketing"):u==="Sales"&&f("/sales"))},[c,f,u]);const p=N=>{const{id:b,value:C}=N.target;t(w=>({...w,[b]:C}))},x=async N=>{N.preventDefault(),i(null);try{const b=await ae.post("/auth/login",e);d(b.data),i(null)}catch(b){b.response&&b.response.data&&b.response.data.detail?i(b.response.data.detail):i("Something went wrong. Please try again.")}};h.useEffect(()=>{const N=document.createElement("script");return N.src="https://accounts.google.com/gsi/client",N.async=!0,N.defer=!0,N.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:v}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(N),()=>{document.body.contains(N)&&document.body.removeChild(N)}},[]);const v=async N=>{l(!0);try{const b=KH(N.credential),C=await ae.post("/auth/google/login",{id_token:N.credential});d(C.data)}catch(b){console.error("Google login failed:",b);const C=b.response?.data?.detail||"Google login failed. Please try again.";i(C)}finally{l(!1)}};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),o&&n.jsx(M9,{isLoading:o}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx($de,{}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),n.jsx("div",{id:"googleLoginBtn"}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[n.jsx(a$,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),n.jsx(a$,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:a,onTogglePass:()=>s(N=>!N)}),r&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),n.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),n.jsx("div",{className:"text-center mt-1",children:n.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",n.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},zde=({onClick:e})=>n.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back"]}),DS=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,icon:o})=>{const[l,c]=h.useState(!1),d=s==="password";return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative flex items-center",children:[o&&n.jsx(o,{className:"absolute left-3 text-gray-500 size-5"}),n.jsx("input",{id:t,type:d&&l?"text":s,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&n.jsx("button",{type:"button",onClick:()=>c(u=>!u),className:"absolute right-3 text-gray-500",children:l?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]})},Ude=({otp:e,setOtp:t})=>n.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((a,s)=>n.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const o=[...e];o[s]=i,t(o)}}},s))}),Fde=()=>{const e=wt(),[t,a]=h.useState(1),[s,r]=h.useState(""),[i,o]=h.useState(["","","","","",""]),[l,c]=h.useState(""),[d,u]=h.useState(""),f=N=>{N.preventDefault(),a(2)},p=N=>{N.preventDefault(),a(3)},x=N=>{if(N.preventDefault(),l!==d){alert("Passwords do not match!");return}alert("Password reset successfully!")},v=()=>{t>1?a(t-1):e("/login")};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(zde,{onClick:v}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),n.jsxs("form",{onSubmit:f,className:"space-y-6 cursor-pointer",children:[n.jsx(DS,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:N=>r(N.target.value),icon:na}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",n.jsx("strong",{children:s}),"."]})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsx(Ude,{otp:i,setOtp:o}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsx(DS,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:l,onChange:N=>c(N.target.value),icon:_o}),n.jsx(DS,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:d,onChange:N=>u(N.target.value),icon:_o}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},tn=()=>{const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(!0),o=wt(),l=async()=>{try{const d=await ae.get("/auth/me");t(d.data),s(!0)}catch(d){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",d)}finally{i(!1)}};return h.useEffect(()=>{l()},[]),{user:e,isLoggedIn:a,loading:r,fetchUser:l,logout:async()=>{try{await ae.post("/auth/logout")}catch{}t(null),s(!1),o("/login")}}};function Bt({message:e="Loading..."}){return n.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const Bde=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function Py(){const{user:e,loading:t,fetchUser:a}=tn(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,v]=h.useState(!1),[N,b]=h.useState(!1),[C,w]=h.useState(!1),[S,E]=h.useState(null),[k,_]=h.useState(null),A=h.useRef(null),[T,$]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[z,F]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&($({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const P=(X,q)=>{$(ne=>({...ne,[X]:q}))},M=(X,q)=>{F(ne=>({...ne,[X]:q}))},G=X=>{const q=X.target.files?.[0];if(!q)return;if(!q.type.startsWith("image/")){W.error("Please select an image file");return}if(q.size>5*1024*1024){W.error("Image size should be less than 5MB");return}const ne=new FileReader;ne.onloadend=()=>{E(ne.result),_(ne.result)},ne.readAsDataURL(q)},Q=async X=>{if(X.preventDefault(),!T.firstName.trim()||!T.lastName.trim()){W.warn("Please fill in all required fields.");return}o(!0);try{const q={first_name:T.firstName.trim(),last_name:T.lastName.trim(),phone_number:T.phoneNumber.trim()||null};S!==null&&(q.profile_picture=S),await ae.put("/users/me",q),await a(),c(!1),E(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),W.success("Account information updated successfully!")}catch(q){console.error("Error updating account:",q);const ne=q.response?.data?.detail||"Failed to update account information. Please try again.";W.error(ne)}finally{o(!1)}},V=async X=>{if(X.preventDefault(),!z.newPassword||!z.confirmPassword){W.warn("Please fill in all password fields.");return}if(z.newPassword.length<8){W.warn("Password must be at least 8 characters long.");return}if(z.newPassword!==z.confirmPassword){W.warn("New password and confirm password do not match.");return}w(!0);try{const q={password:z.newPassword};await ae.put("/users/me",q),await a(),F({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),w(!1),W.success("Password changed successfully!")}catch(q){console.error("Error changing password:",q);const ne=q.response?.data?.detail||"Failed to change password. Please try again.";W.error(ne)}finally{w(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Bt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(sn,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!l&&n.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ga,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[k?n.jsx("div",{className:"relative",children:n.jsx("img",{src:k,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:Bde(e.first_name,e.last_name)}),l&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:A,accept:"image/*",onChange:G,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(qH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),l?n.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:T.firstName,onChange:X=>P("firstName",X.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:T.lastName,onChange:X=>P("lastName",X.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:T.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:T.phoneNumber,onChange:X=>P("phoneNumber",X.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{c(!1),$({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),E(null),_(e.profile_picture||null),A.current&&(A.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[n.jsx(Kk,{}),i?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(_o,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:V,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(_o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:z.newPassword,onChange:X=>M("newPassword",X.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>v(X=>!X),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(_o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:N?void 0:{WebkitTextSecurity:"disc"},value:z.confirmPassword,onChange:X=>M("confirmPassword",X.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>b(X=>!X),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":N?"Hide password":"Show password",children:N?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:C,children:[n.jsx(_o,{}),C?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(QH,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}const iN=e=>{const t="https://crm.sari-sari.com";try{const a=new URL(t),s=a.protocol==="https:"?"wss":"ws",r=a.hostname,i=a.port||(a.protocol==="https:"?443:80),o=`${s}://${r}:${i}/ws/notifications?user_id=${e}`;return console.log(" WebSocket URL:",o),o}catch(a){return console.error("Error parsing API URL:",a),`ws://localhost:8000/ws/notifications?user_id=${e}`}};function Hde({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Jt(),p=wt(),{logout:x}=Ys(),{user:v,fetchUser:N}=tn(),C={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[f.pathname]||"Admin Panel";return h.useEffect(()=>{const w=()=>{N()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[N]),h.useEffect(()=>{if(!v?.id)return;const w=iN(v.id);console.log(" Connecting to WebSocket:",w);const S=new WebSocket(w);let E;const k=()=>{E=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return S.onopen=()=>{console.log(" Admin WS Connected"),clearTimeout(E)},S.onmessage=_=>{try{const A=JSON.parse(_.data);console.log(" Notification received:",A),o(T=>[A,...T]),c(T=>T+1)}catch(A){console.error("Error parsing notification:",A)}},S.onerror=_=>{console.error(" Admin WS Error:",_)},S.onclose=()=>{console.log(" Admin WS Disconnected"),k()},()=>{clearTimeout(E),S&&S.readyState===WebSocket.OPEN&&S.close()}},[v?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ox,{className:"text-2xl"})}),v?.company?.company_logo&&n.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(rx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:w.title||w.message||"New Update"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{p("/admin/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/admin/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Gde(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Jt(),{user:d}=tn();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const f=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);h.useEffect(()=>{f&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(It,{to:"/admin/dashboard",className:({isActive:v})=>v?p:x,children:[n.jsx(ix,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/admin/accounts",className:({isActive:v})=>v?p:x,children:[n.jsx(xd,{})," Accounts"]}),n.jsxs(It,{to:"/admin/contacts",className:({isActive:v})=>v?p:x,children:[n.jsx(sn,{})," Contacts"]}),n.jsxs(It,{to:"/admin/leads",className:({isActive:v})=>v?p:x,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs(It,{to:"/admin/deals",className:({isActive:v})=>v?p:x,children:[n.jsx(en,{})," Deals"]}),n.jsxs(It,{to:"/admin/quotes",className:({isActive:v})=>v?p:x,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs(It,{to:"/admin/targets",className:({isActive:v})=>v?p:x,children:[n.jsx(lr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/admin/tasks",className:({isActive:v})=>v?p:x,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs(It,{to:"/admin/meetings",className:({isActive:v})=>v?p:x,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs(It,{to:"/admin/calls",className:({isActive:v})=>v?p:x,children:[n.jsx(Rs,{})," Calls"]}),n.jsxs(It,{to:"/admin/audit",className:({isActive:v})=>v?p:x,children:[n.jsx(Ts,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(It,{to:"/admin/territory",className:({isActive:v})=>v?p:x,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xk,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/admin/users",className:({isActive:v})=>v?p:x,children:[n.jsx(aa,{})," Users"]}),n.jsxs(It,{to:"/admin/manage-account",className:({isActive:v})=>v?p:x,children:[n.jsx(sn,{})," Manage Account"]}),n.jsxs(It,{to:"/admin/company-details",className:({isActive:v})=>v?p:x,children:[n.jsx(Bw,{})," Settings"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Hde,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}function Wde(e){return _t({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function qde(e){return _t({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Vde(e){return _t({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function _i({props:e,name:t}){return Kle({props:e,name:t,defaultTheme:fL,themeId:rN})}function Il(e){const{elementType:t,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,o=r?{}:L9(a,s),{props:l,internalRef:c}=P9({...i,externalSlotProps:o}),d=$o(c,o?.ref,e.additionalProps?.ref);return k9(t,{...l,ref:d},s)}function gs(e){const t=h.useRef(e);return rs(()=>{t.current=e}),h.useRef((...a)=>(0,t.current)(...a)).current}var lv=Symbol("NOT_FOUND");function Qde(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Yde(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Kde(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${a}]`)}}var s$=e=>Array.isArray(e)?e:[e];function Xde(e){const t=Array.isArray(e[0])?e[0]:e;return Kde(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Zde(e,t){const a=[],{length:s}=e;for(let r=0;r<s;r++)a.push(e[r].apply(null,t));return a}function Jde(e){let t;return{get(a){return t&&e(t.key,a)?t.value:lv},put(a,s){t={key:a,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function eue(e,t){let a=[];function s(l){const c=a.findIndex(d=>t(l,d.key));if(c>-1){const d=a[c];return c>0&&(a.splice(c,1),a.unshift(d)),d.value}return lv}function r(l,c){s(l)===lv&&(a.unshift({key:l,value:c}),a.length>e&&a.pop())}function i(){return a}function o(){a=[]}return{get:s,put:r,getEntries:i,clear:o}}var tue=(e,t)=>e===t;function nue(e){return function(a,s){if(a===null||s===null||a.length!==s.length)return!1;const{length:r}=a;for(let i=0;i<r;i++)if(!e(a[i],s[i]))return!1;return!0}}function aue(e,t){const a=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=tue,maxSize:r=1,resultEqualityCheck:i}=a,o=nue(s);let l=0;const c=r<=1?Jde(o):eue(r,o);function d(){let u=c.get(arguments);if(u===lv){if(u=e.apply(null,arguments),l++,i){const p=c.getEntries().find(x=>i(x.value,u));p&&(u=p.value,l!==0&&l--)}c.put(arguments,u)}return u}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>l,d.resetResultsCount=()=>{l=0},d}var sue=class{constructor(e){this.value=e}deref(){return this.value}},rue=typeof WeakRef<"u"?WeakRef:sue,iue=0,r$=1;function Dy(){return{s:iue,v:void 0,o:null,p:null}}function $9(e,t={}){let a=Dy();const{resultEqualityCheck:s}=t;let r,i=0;function o(){let l=a;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const x=arguments[f];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const N=v.get(x);N===void 0?(l=Dy(),v.set(x,l)):l=N}else{let v=l.p;v===null&&(l.p=v=new Map);const N=v.get(x);N===void 0?(l=Dy(),v.set(x,l)):l=N}}const d=l;let u;if(l.s===r$)u=l.v;else if(u=e.apply(null,arguments),i++,s){const f=r?.deref?.()??r;f!=null&&s(f,u)&&(u=f,i!==0&&i--),r=typeof u=="object"&&u!==null||typeof u=="function"?new rue(u):u}return d.s=r$,d.v=u,u}return o.clearCache=()=>{a=Dy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function R9(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,o=0,l,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),Qde(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...a,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:x=$9,argsMemoizeOptions:v=[]}=u,N=s$(p),b=s$(v),C=Xde(r),w=f(function(){return i++,d.apply(null,arguments)},...N),S=x(function(){o++;const k=Zde(C,arguments);return l=w.apply(null,k),l},...b);return Object.assign(S,{resultFunc:d,memoizedResultFunc:w,dependencies:C,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var rt=R9($9),oue=Object.assign((e,t=rt)=>{Yde(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),s=a.map(i=>e[i]);return t(s,(...i)=>i.reduce((o,l,c)=>(o[a[c]]=l,o),{}))},{withTypes:()=>oue});const lue=R9({memoize:aue,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),jt=(e,t,a,s,r,i,o,l,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let d;if(e&&t&&a&&s&&r&&i&&o&&l)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x),S=i(u,f,p,x),E=o(u,f,p,x);return l(v,N,b,C,w,S,E,f,p,x)};else if(e&&t&&a&&s&&r&&i&&o)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x),S=i(u,f,p,x);return o(v,N,b,C,w,S,f,p,x)};else if(e&&t&&a&&s&&r&&i)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x);return i(v,N,b,C,w,f,p,x)};else if(e&&t&&a&&s&&r)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x);return r(v,N,b,C,f,p,x)};else if(e&&t&&a&&s)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x);return s(v,N,b,f,p,x)};else if(e&&t&&a)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x);return a(v,N,f,p,x)};else if(e&&t)d=(u,f,p,x)=>{const v=e(u,f,p,x);return t(v,f,p,x)};else if(e)d=e;else throw new Error("Missing arguments");return d},oN=e=>(...t)=>{const a=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,o=Math.max(r.length-i,0);if(o>3)throw new Error("Unsupported number of arguments");return(c,d,u,f)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=a.get(p);if(!x){const v=t.length===1?[C=>C,r]:t;let N=t;const b=[void 0,void 0,void 0];switch(o){case 0:break;case 1:{N=[...v.slice(0,-1),()=>b[0],r];break}case 2:{N=[...v.slice(0,-1),()=>b[0],()=>b[1],r];break}case 3:{N=[...v.slice(0,-1),()=>b[0],()=>b[1],()=>b[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(N=[...N,e]),x=lue(...N),x.selectorArgs=b,a.set(p,x)}switch(o){case 3:x.selectorArgs[2]=f;case 2:x.selectorArgs[1]=u;case 1:x.selectorArgs[0]=d}switch(o){case 0:return x(c);case 1:return x(c,d);case 2:return x(c,d,u);case 3:return x(c,d,u,f);default:throw new Error("unreachable")}}},Ia=oN();var OS={exports:{}},MS={},IS={exports:{}},$S={};var i$;function cue(){if(i$)return $S;i$=1;var e=zf();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var a=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(f,p){var x=p(),v=s({inst:{value:x,getSnapshot:p}}),N=v[0].inst,b=v[1];return i(function(){N.value=x,N.getSnapshot=p,c(N)&&b({inst:N})},[f,x,p]),r(function(){return c(N)&&b({inst:N}),f(function(){c(N)&&b({inst:N})})},[f]),o(x),x}function c(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!a(f,x)}catch{return!0}}function d(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return $S.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,$S}var o$;function due(){return o$||(o$=1,IS.exports=cue()),IS.exports}var l$;function uue(){if(l$)return MS;l$=1;var e=zf(),t=due();function a(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var s=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return MS.useSyncExternalStoreWithSelector=function(d,u,f,p,x){var v=i(null);if(v.current===null){var N={hasValue:!1,value:null};v.current=N}else N=v.current;v=l(function(){function C(_){if(!w){if(w=!0,S=_,_=p(_),x!==void 0&&N.hasValue){var A=N.value;if(x(A,_))return E=A}return E=_}if(A=E,s(S,_))return A;var T=p(_);return x!==void 0&&x(A,T)?(S=_,A):(S=_,E=T)}var w=!1,S,E,k=f===void 0?null:f;return[function(){return C(u())},k===null?void 0:function(){return C(k())}]},[u,f,p,x]);var b=r(d,v[0],v[1]);return o(function(){N.hasValue=!0,N.value=b},[b]),c(b),b},MS}var c$;function mue(){return c$||(c$=1,OS.exports=uue()),OS.exports}var z9=mue();function fue(e,t,a,s,r){const i=o=>t(o,a,s,r);return z9.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const d$={};function lN(e,t){const a=h.useRef(d$);return a.current===d$&&(a.current=e(t)),a}const hue=[];function U9(e){h.useEffect(e,hue)}const gue=()=>{};function pue(e,t,a){const s=lN(xue,{store:e,selector:t}).current;s.effect=a,U9(s.onMount)}function xue(e){const{store:t,selector:a}=e;let s=a(t.state);const r={effect:gue,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const o=a(i);if(!Object.is(s,o)){const l=s;s=o,r.effect(l,o)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class xL{static create(t){return new xL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const a=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(a!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const a in t)if(!Object.is(this.state[a],t[a])){this.setState(qe({},this.state,t));return}}set(t,a){Object.is(this.state[t],a)||this.setState(qe({},this.state,{[t]:a}))}}const cN=({params:e,store:t})=>{h.useEffect(()=>{t.set("animation",qe({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const a=h.useCallback(()=>{let s=!1;return t.set("animation",qe({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",qe({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return rs(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=l=>{l.matches?r=a():r?.()},o=window.matchMedia("(prefers-reduced-motion)");return i(o),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[a,t]),{instance:{disableAnimation:a}}};cN.params={skipAnimation:!0};cN.getDefaultizedParams=({params:e})=>qe({},e,{skipAnimation:e.skipAnimation??!1});cN.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const yue=e=>e.animation,bue=jt(yue,e=>e.skip||e.skipAnimationRequests>0);function vue(e,t){const a=h.useRef(!0);h.useEffect(()=>{if(a.current){a.current=!1;return}return e()},t)}function FT(e){return e&&e.ownerDocument||document}function wue(e){return FT(e).defaultView||window}const Ft=fue,dN="DEFAULT_X_AXIS_KEY",Nue="DEFAULT_Y_AXIS_KEY",jue={top:20,bottom:20,left:20,right:20},Cue=45,Sue=25,F9=20,Go=e=>e.cartesianAxis?.x,Jl=e=>e.cartesianAxis?.y,_ue=jt(Jl,function(t){return(t??[]).reduce((a,s)=>s.position==="left"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Aue=jt(Jl,function(t){return(t??[]).reduce((a,s)=>s.position==="right"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Tue=jt(Go,function(t){return(t??[]).reduce((a,s)=>s.position==="top"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Eue=jt(Go,function(t){return(t??[]).reduce((a,s)=>s.position==="bottom"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),kue=Ia(_ue,Aue,Tue,Eue,function(t,a,s,r){return{left:t,right:a,top:s,bottom:r}}),hx=e=>e.dimensions,Lue=e=>e.dimensions.margin,pr=Ia(hx,Lue,kue,function({width:t,height:a},{top:s,right:r,bottom:i,left:o},{left:l,right:c,top:d,bottom:u}){return{width:t-o-r-l-c,left:o+l,right:r+c,height:a-s-i-d-u,top:s+d,bottom:i+u}}),Pue=jt(hx,e=>e.width),Due=jt(hx,e=>e.height),B9=jt(hx,e=>e.propsWidth),H9=jt(hx,e=>e.propsHeight);function Oue(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?qe({},t,e):e}const Mue=10,uN=({params:e,store:t,svgRef:a})=>{const s=e.width!==void 0&&e.height!==void 0,r=h.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,o]=h.useState(0),[l,c]=h.useState(0),d=h.useCallback(()=>{const v=a?.current;if(!v)return{};const b=wue(v).getComputedStyle(v),C=Math.floor(parseFloat(b.height))||0,w=Math.floor(parseFloat(b.width))||0;return(t.state.dimensions.width!==w||t.state.dimensions.height!==C)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??w,height:e.height??C,propsWidth:e.width,propsHeight:e.height}),{height:C,width:w}},[t,a,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);vue(()=>{const v=e.width??t.state.dimensions.width,N=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:v,height:N,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),h.useEffect(()=>{r.current.displayError=!0},[]),rs(()=>{if(s||!r.current.initialCompute||r.current.computeRun>Mue)return;const v=d();v.width!==i||v.height!==l?(r.current.computeRun+=1,v.width!==void 0&&o(v.width),v.height!==void 0&&c(v.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[l,i,d,s]),rs(()=>{if(s)return()=>{};d();const v=a.current;if(typeof ResizeObserver>"u")return()=>{};let N;const b=new ResizeObserver(()=>{N=requestAnimationFrame(()=>{d()})});return v&&b.observe(v),()=>{N&&cancelAnimationFrame(N),v&&b.unobserve(v)}},[d,s,a]);const u=Ft(t,pr),f=h.useCallback(v=>v>=u.left-1&&v<=u.left+u.width,[u.left,u.width]),p=h.useCallback(v=>v>=u.top-1&&v<=u.top+u.height,[u.height,u.top]);return{instance:{isPointInside:h.useCallback((v,N,b)=>b&&"closest"in b&&b.closest("[data-drawing-container]")?!0:f(v)&&p(N),[f,p]),isXInside:f,isYInside:p}}};uN.params={width:!0,height:!0,margin:!0};uN.getDefaultizedParams=({params:e})=>qe({},e,{margin:Oue(e.margin,jue)});uN.getInitialState=({width:e,height:t,margin:a})=>({dimensions:{margin:a,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const yL=({params:e,store:t})=>(rs(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});yL.params={experimentalFeatures:!0};yL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const Iue=e=>e.experimentalFeatures,mN=jt(Iue,e=>!!e?.preferStrictDomainInLineCharts);let u$=0;const $ue=()=>(u$+=1,`mui-chart-${u$}`),bL=({params:e,store:t})=>(h.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",qe({},t.state.id,{chartId:e.id??$ue()}))},[t,e.id]),{});bL.params={id:!0};bL.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const Rue=e=>e.id,zue=jt(Rue,e=>e.chartId),Uue=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Fue=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],G9=e=>e==="dark"?Fue:Uue,W9=({series:e,colors:t,seriesConfig:a})=>{const s={};return e.forEach((r,i)=>{const o=a[r.type].getSeriesWithDefaultValues(r,i,t),l=o.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[l]!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);s[r.type].series[l]=o,s[r.type].seriesOrder.push(l)}),s},Bue=(e,t,a)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,a)??i)}),s},fN=({params:e,store:t,seriesConfig:a})=>{const{series:s,dataset:r,theme:i,colors:o}=e,l=h.useRef(!0);return h.useEffect(()=>{if(l.current){l.current=!1;return}t.set("series",qe({},t.state.series,{defaultizedSeries:W9({series:s,colors:typeof o=="function"?o(i):o,seriesConfig:a}),dataset:r}))},[o,r,s,i,a,t]),{}};fN.params={dataset:!0,series:!0,colors:!0,theme:!0};const Hue=[];fN.getDefaultizedParams=({params:e})=>qe({},e,{series:e.series?.length?e.series:Hue,colors:e.colors??G9,theme:e.theme??"light"});fN.getInitialState=({series:e=[],colors:t,theme:a,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:W9({series:e,colors:typeof t=="function"?t(a):t,seriesConfig:i}),dataset:s}});const vL=e=>e.series,Gue=jt(vL,e=>e.defaultizedSeries),Gr=jt(vL,e=>e.seriesConfig),Wue=jt(vL,e=>e.dataset),xa=Ia(Gue,Gr,Wue,function(t,a,s){return Bue(t,a,s)}),que={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class q9{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in que)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,a,s,r){this.element=t,this.pointerManager=a,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const o=`${this.name}ChangeState`;this.element.addEventListener(o,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,a){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return a;const s=this.pointerOptions[t];return s?qe({},a,s):a}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const a=`${this.name}ChangeState`;this.element.removeEventListener(a,this.handleStateChange)}}class Vue{activeGestures=new Map;registerActiveGesture(t,a){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:a,element:t};s.add(r)}unregisterActiveGesture(t,a){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===a&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const a=this.activeGestures.get(t);return a?Array.from(a).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,a){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===a):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class Que{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(a=>a==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(a))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Yue{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const a=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(a,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const o=qe({},i,{type:"forceCancel"});this.pointers.set(r,o)}}this.notifyHandlers(a),this.pointers.clear()};handlePointerEvent=t=>{const{type:a,pointerId:s}=t;if(a==="pointerdown"||a==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(a==="pointerup"||a==="pointercancel"||a==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(a=>a(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Kue{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Vue;keyboardManager=new Que;constructor(t){this.pointerManager=new Yue({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(a=>{this.addGestureTemplate(a)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}setGestureState(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}registerElement(t,a,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,a,i)}),a}registerSingleGesture(t,a,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(a)||this.elementGestureMap.set(a,new Map);const i=this.elementGestureMap.get(a);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,a));const o=r.clone(s);return o.init(a,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,o),!0}unregisterElement(t,a){const s=this.elementGestureMap.get(a);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(a),s.size===0&&this.elementGestureMap.delete(a),!0)}unregisterAllGestures(t){const a=this.elementGestureMap.get(t);if(a){for(const[,s]of a)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Wu extends q9{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,a,s,r){super.init(t,a,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,a){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(a===s.target||s.target===this.originalTarget||a===this.originalTarget||"contains"in a&&a.contains(s.target))||"getRootNode"in a&&a.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(a))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Xue(e,t){const a=t.x-e.x,s=t.y-e.y;return Math.sqrt(a*a+s*s)}function RS(e){if(e.length<2)return 0;let t=0,a=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=Xue({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),a+=1;return a>0?t/a:0}function $l(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((a,s)=>(a.x+=s.clientX,a.y+=s.clientY,a),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function gi(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const Oy=1e-5,Dc=1e-5,m$=.15;function Zue(e,t){const a=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=Jue(t,e),o=Math.abs(a)>Math.abs(s)?"horizontal":"vertical",l=i||o==="horizontal"?Oy:m$,c=i?Oy:o==="horizontal"?m$:Oy;return Math.abs(a)>l&&(r.horizontal=a>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":o,r}function Jue(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,a)*180/Math.PI;return r>=-45+Dc&&r<=-22.5+Dc||r>=22.5+Dc&&r<=45+Dc||r>=135+Dc&&r<=157.5+Dc||r>=-157.5+Dc&&r<=-135+Dc}function eme(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const a=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return a&&s}const f$=0,tme=e=>e>f$?1:e<-f$?-1:0,Fc=e=>{e.cancelable&&e.preventDefault()};class wL extends Wu{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new wL(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,a)=>{if(a.type!=="pointermove"||a.pointerType!=="mouse"&&a.pointerType!=="pen")return;this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r||!this.isWithinPointerCount(s,a.pointerType))return;if(this.shouldPreventGesture(r,a.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,a);return}const i={x:a.clientX,y:a.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,a)),this.emitMoveEvent(r,"ongoing",s,a)};emitMoveEvent(t,a,s,r){const i=this.state.lastPosition||$l(s),o=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,activeGestures:o,customData:this.customData},c=gi(this.name,a),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(d)}}class gu extends Wu{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new gu(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=qe({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancel(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.cancel(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.cancel(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(o=>{this.state.startPointers.set(o.pointerId,o)}),this.originalTarget=r,this.state.startCentroid=$l(i),this.state.lastCentroid=qe({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,a.pointerType)){const o=$l(i),l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y,d=Math.sqrt(l*l+c*c),u=Zue(this.state.lastCentroid??this.state.startCentroid,o),f=this.state.lastCentroid?o.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?o.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&eme(u,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,a,o),this.emitPanEvent(r,"ongoing",i,a,o)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,a,o)),this.state.lastCentroid=o,this.state.lastDirection=u}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType)){const l=this.state.lastCentroid||this.state.startCentroid;a.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,a,l),this.emitPanEvent(r,"end",i,a,l),this.resetState()}}else this.resetState();break}};emitPanEvent(t,a,s,r,i){if(!this.state.startCentroid)return;const o=this.state.lastDeltas?.x??0,l=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,d=c?(r.timeStamp-c.timeStamp)/1e3:0,u=d>0?o/d:0,f=d>0?l/d:0,p=Math.sqrt(u*u+f*f),x=this.gesturesRegistry.getActiveGestures(t),v={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,deltaX:o,deltaY:l,direction:this.state.lastDirection,velocityX:u,velocityY:f,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},N=gi(this.name,a),b=new CustomEvent(N,{bubbles:!0,cancelable:!0,composed:!0,detail:v});t.dispatchEvent(b),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,a,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",a,s,this.state.lastCentroid),this.emitPanEvent(r,"end",a,s,this.state.lastCentroid)}this.resetState()}}class NL extends Wu{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(qe({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new NL(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=qe({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,a),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(a.type){case"pointerdown":if(i.length>=2&&!this.isActive){const o=RS(i);this.state.startDistance=o,this.state.lastDistance=o,this.state.lastTime=a.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,a.pointerType)){const o=RS(i),l=Math.abs(o-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?o/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const u=(a.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(o-this.state.lastDistance)/u;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=o,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=a.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,a):(this.isActive=!0,this.emitPinchEvent(r,"start",i,a),this.emitPinchEvent(r,"ongoing",i,a))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType))a.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,a),this.emitPinchEvent(r,"end",i,a),this.resetState();else if(o.length>=2){const l=RS(o);this.state.startDistance=l/this.state.lastScale}}break}};emitPinchEvent(t,a,s,r){const i=$l(s),o=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:o,velocity:this.state.velocity,activeGestures:c,direction:tme(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const u=gi(this.name,a),f=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(f)}}class hN extends Wu{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new hN(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=qe({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancelPress(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&this.cancelPress(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelPress(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=$l(i),this.state.lastPosition=qe({},this.state.startCentroid),this.state.startTime=a.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const o=this.state.lastPosition;this.emitPressEvent(r,"start",i,a,o),this.emitPressEvent(r,"ongoing",i,a,o)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=$l(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(r,i,a)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const o=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,a,o)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,a);break}};emitPressEvent(t,a,s,r,i){const o=this.gesturesRegistry.getActiveGestures(t),l=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:l,activeGestures:o,customData:this.customData},d=gi(this.name,a),u=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(u),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,a,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",a,s,r),this.emitPressEvent(t??this.element,"end",a,s,r)}this.resetState()}}class jL extends Wu{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new hN({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new gu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new jL(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.pressGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Fc,{passive:!1}),this.element.addEventListener("touchmove",Fc,{passive:!1}),this.element.addEventListener("touchend",Fc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Fc),this.element.removeEventListener("touchmove",Fc),this.element.removeEventListener("touchend",Fc)}}class hp extends Wu{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new hp(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,a.pointerType)||!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelTap(r,i,a);return}switch(a.type){case"pointerdown":this.isActive||(this.state.startCentroid=$l(i),this.state.lastPosition=qe({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=$l(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(r,i,a)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const o=this.state.lastPosition||this.state.startCentroid;if(!o){this.cancelTap(r,i,a);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,a,o),this.resetState()):(this.state.lastTapTime=a.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,a);break}};fireTapEvent(t,a,s,r){const i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(l),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,a,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=gi(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}this.resetState()}}class CL extends Wu{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new hp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new gu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new CL(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.tapGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(gi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Fc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Fc)}}class cv extends q9{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new cv(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,a){const s=t.length>0?$l(t):{x:a.clientX,y:a.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:a.target,srcEvent:a,phase:"ongoing",pointers:t,timeStamp:a.timeStamp,deltaX:a.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:a.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:a.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:a.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const o=gi(this.name,"ongoing"),l=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(l)}}const Fm=e=>e.preventDefault(),SL=({svgRef:e})=>{const t=h.useRef(null);h.useEffect(()=>{const r=e.current;t.current||(t.current=new Kue({gestures:[new gu({name:"pan",threshold:0,maxPointers:1}),new wL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new hp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new hN({name:"quickPress",duration:50}),new gu({name:"brush",threshold:0,maxPointers:1}),new gu({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new NL({name:"zoomPinch",threshold:5}),new cv({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new cv({name:"panTurnWheel",sensitivity:.5}),new CL({name:"zoomTapAndDrag",dragThreshold:10}),new jL({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new hp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const a=h.useCallback((r,i,o)=>{const l=e.current;return l?.addEventListener(r,i,o),{cleanup:()=>l?.removeEventListener(r,i)}},[e]),s=h.useCallback((r,i)=>{const o=e.current,l=t.current;!l||!o||l.setGestureOptions(r,o,i??{})},[e,t]);return h.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Fm),r?.addEventListener("gesturechange",Fm),r?.addEventListener("gestureend",Fm),()=>{r?.removeEventListener("gesturestart",Fm),r?.removeEventListener("gesturechange",Fm),r?.removeEventListener("gestureend",Fm)}},[e]),{instance:{addInteractionListener:a,updateZoomInteractionListeners:s}}};SL.params={};SL.getInitialState=()=>({});const nme=[bL,yL,uN,fN,SL,cN],ame=["apiRef"],sme=e=>{let{plugins:t}=e,a=xn(e.props,ame);const s={};t.forEach(o=>{Object.assign(s,o.params)});const r={};return Object.keys(a).forEach(o=>{const l=a[o];s[o]&&(r[o]=l)}),t.reduce((o,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:o}):o,r)};let h$=0;function rme(e,t,a){const s=sN(),r=h.useMemo(()=>[...nme,...e],[e]),i=sme({plugins:r,props:t});i.id=i.id??s;const l=h.useRef({}).current,c=ome(t.apiRef),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null);if(f.current==null){h$+=1;const v={cacheKey:{id:h$}};r.forEach(N=>{N.getInitialState&&Object.assign(v,N.getInitialState(i,v,a))}),f.current=new xL(v)}const p=v=>{const N=v({instance:l,params:i,plugins:r,store:f.current,svgRef:u,chartRootRef:d,seriesConfig:a});N.publicAPI&&Object.assign(c.current,N.publicAPI),N.instance&&Object.assign(l,N.instance)};return r.forEach(p),{contextValue:h.useMemo(()=>({store:f.current,publicAPI:c.current,instance:l,svgRef:u,chartRootRef:d}),[l,c])}}function ime(e){return e.current==null&&(e.current={}),e}function ome(e){const t=h.useRef({});return e?ime(e):t}const V9=h.createContext(null);const Q9=()=>{},Y9=4,K9=20+2*Y9,lme=40+2*Y9,cme="hover",My={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:K9,showTooltip:cme}},_L=(e,t,a,s)=>{if(e)return e===!0?qe({axisId:t,axisDirection:a},My,{reverse:s??!1}):qe({axisId:t,axisDirection:a},My,{reverse:s??!1},e,{slider:qe({},My.slider,{size:e.slider?.preview??My.slider.preview?lme:K9},e.slider)})};function X9(e,t){const a={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:dN,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"bottom":"none",d=i.position??c,u=Sue+(i.label?F9:0),f=i.id??`defaultized-x-axis-${o}`,p=qe({offset:a[d]},i,{id:f,position:d,height:i.height??u,zoom:_L(i.zoom,f,"x",i.reverse)});if(d!=="none"&&(a[d]+=p.height,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return qe({},p,{data:t.map(x=>x[l])})})}function Z9(e,t){const a={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:Nue,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"left":"none",d=i.position??c,u=Cue+(i.label?F9:0),f=i.id??`defaultized-y-axis-${o}`,p=qe({offset:a[d]},i,{id:f,position:d,width:i.width??u,zoom:_L(i.zoom,f,"y",i.reverse)});if(d!=="none"&&(a[d]+=p.width,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return qe({},p,{data:t.map(x=>x[l])})})}function dme(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function qu(e){return e.scaleType==="band"}function Vu(e){return e.scaleType==="point"}function ume(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function mme(e){return e.scaleType==="symlog"}function gx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function AL(e){let t=e,a=e;e.length===1&&(t=(o,l)=>e(o)-l,a=fme(e));function s(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)<0?c=u+1:d=u}return c}function r(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)>0?d=u:c=u+1}return c}function i(o,l,c,d){c==null&&(c=0),d==null&&(d=o.length);const u=s(o,l,c,d-1);return u>c&&t(o[u-1],l)>-t(o[u],l)?u-1:u}return{left:s,center:i,right:r}}function fme(e){return(t,a)=>gx(e(t),a)}function J9(e){return e===null?NaN:+e}function*hme(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const gme=AL(gx),px=gme.right;AL(J9).center;class dv extends Map{constructor(t,a=yme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(g$(this,t))}has(t){return super.has(g$(this,t))}set(t,a){return super.set(pme(this,t),a)}delete(t){return super.delete(xme(this,t))}}function g$({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):a}function pme({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):(e.set(s,a),a)}function xme({_intern:e,_key:t},a){const s=t(a);return e.has(s)&&(a=e.get(a),e.delete(s)),a}function yme(e){return e!==null&&typeof e=="object"?e.valueOf():e}var BT=Math.sqrt(50),HT=Math.sqrt(10),GT=Math.sqrt(2);function WT(e,t,a){var s,r=-1,i,o,l;if(t=+t,e=+e,a=+a,e===t&&a>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(l=eG(e,t,a))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),d=Math.round(t/l);for(c*l<e&&++c,d*l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)*l}else{l=-l;let c=Math.round(e*l),d=Math.round(t*l);for(c/l<e&&++c,d/l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)/l}return s&&o.reverse(),o}function eG(e,t,a){var s=(t-e)/Math.max(0,a),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=BT?10:i>=HT?5:i>=GT?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=BT?10:i>=HT?5:i>=GT?2:1)}function qT(e,t,a){var s=Math.abs(t-e)/Math.max(0,a),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=BT?r*=10:i>=HT?r*=5:i>=GT&&(r*=2),t<e?-r:r}function p$(e,t){let a;for(const s of e)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function x$(e,t){let a;for(const s of e)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function tG(e,t,a=0,s=e.length-1,r=gx){for(;s>a;){if(s-a>600){const c=s-a+1,d=t-a+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),x=Math.max(a,Math.floor(t-d*f/c+p)),v=Math.min(s,Math.floor(t+(c-d)*f/c+p));tG(e,t,x,v,r)}const i=e[t];let o=a,l=s;for(lg(e,a,t),r(e[s],i)>0&&lg(e,a,s);o<l;){for(lg(e,o,l),++o,--l;r(e[o],i)<0;)++o;for(;r(e[l],i)>0;)--l}r(e[a],i)===0?lg(e,a,l):(++l,lg(e,l,s)),l<=t&&(a=l+1),t<=l&&(s=l-1)}return e}function lg(e,t,a){const s=e[t];e[t]=e[a],e[a]=s}function bme(e,t,a){if(e=Float64Array.from(hme(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return x$(e);if(t>=1)return p$(e);var s,r=(s-1)*t,i=Math.floor(r),o=p$(tG(e,i).subarray(0,i+1)),l=x$(e.subarray(i+1));return o+(l-o)*(r-i)}}function vme(e,t,a=J9){if(s=e.length){if((t=+t)<=0||s<2)return+a(e[0],0,e);if(t>=1)return+a(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),o=+a(e[i],i,e),l=+a(e[i+1],i+1,e);return o+(l-o)*(r-i)}}function nG(e,t,a){e=+e,t=+t,a=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+a;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/a))|0,i=new Array(r);++s<r;)i[s]=e+s*a;return i}function Ai(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ec(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const VT=Symbol("implicit");function gp(){var e=new dv,t=[],a=[],s=VT;function r(i){let o=e.get(i);if(o===void 0){if(s!==VT)return s;e.set(i,o=t.push(i)-1)}return a[o%a.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new dv;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(i){return arguments.length?(a=Array.from(i),r):a.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return gp(t,a).unknown(s)},Ai.apply(r,arguments),r}function TL(){var e=gp().unknown(void 0),t=e.domain,a=e.range,s=0,r=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,x=r<s,v=x?r:s,N=x?s:r;i=(N-v)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),v+=(N-v-i*(p-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=nG(p).map(function(C){return v+i*C});return a(x?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,f()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return TL(t(),[s,r]).round(l).paddingInner(c).paddingOuter(d).align(u)},Ai.apply(f(),arguments)}function aG(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return aG(t())},e}function wme(){return aG(TL.apply(null,arguments).paddingInner(1))}function EL(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function sG(e,t){var a=Object.create(e.prototype);for(var s in t)a[s]=t[s];return a}function xx(){}var pp=.7,uv=1/pp,mf="\\s*([+-]?\\d+)\\s*",xp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nme=/^#([0-9a-f]{3,8})$/,jme=new RegExp(`^rgb\\(${mf},${mf},${mf}\\)$`),Cme=new RegExp(`^rgb\\(${ko},${ko},${ko}\\)$`),Sme=new RegExp(`^rgba\\(${mf},${mf},${mf},${xp}\\)$`),_me=new RegExp(`^rgba\\(${ko},${ko},${ko},${xp}\\)$`),Ame=new RegExp(`^hsl\\(${xp},${ko},${ko}\\)$`),Tme=new RegExp(`^hsla\\(${xp},${ko},${ko},${xp}\\)$`),y$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};EL(xx,yp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:b$,formatHex:b$,formatHex8:Eme,formatHsl:kme,formatRgb:v$,toString:v$});function b$(){return this.rgb().formatHex()}function Eme(){return this.rgb().formatHex8()}function kme(){return rG(this).formatHsl()}function v$(){return this.rgb().formatRgb()}function yp(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=Nme.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?w$(t):a===3?new cr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?Iy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?Iy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jme.exec(e))?new cr(t[1],t[2],t[3],1):(t=Cme.exec(e))?new cr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Sme.exec(e))?Iy(t[1],t[2],t[3],t[4]):(t=_me.exec(e))?Iy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ame.exec(e))?C$(t[1],t[2]/100,t[3]/100,1):(t=Tme.exec(e))?C$(t[1],t[2]/100,t[3]/100,t[4]):y$.hasOwnProperty(e)?w$(y$[e]):e==="transparent"?new cr(NaN,NaN,NaN,0):null}function w$(e){return new cr(e>>16&255,e>>8&255,e&255,1)}function Iy(e,t,a,s){return s<=0&&(e=t=a=NaN),new cr(e,t,a,s)}function Lme(e){return e instanceof xx||(e=yp(e)),e?(e=e.rgb(),new cr(e.r,e.g,e.b,e.opacity)):new cr}function QT(e,t,a,s){return arguments.length===1?Lme(e):new cr(e,t,a,s??1)}function cr(e,t,a,s){this.r=+e,this.g=+t,this.b=+a,this.opacity=+s}EL(cr,QT,sG(xx,{brighter(e){return e=e==null?uv:Math.pow(uv,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?pp:Math.pow(pp,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cr(pu(this.r),pu(this.g),pu(this.b),mv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N$,formatHex:N$,formatHex8:Pme,formatRgb:j$,toString:j$}));function N$(){return`#${ou(this.r)}${ou(this.g)}${ou(this.b)}`}function Pme(){return`#${ou(this.r)}${ou(this.g)}${ou(this.b)}${ou((isNaN(this.opacity)?1:this.opacity)*255)}`}function j$(){const e=mv(this.opacity);return`${e===1?"rgb(":"rgba("}${pu(this.r)}, ${pu(this.g)}, ${pu(this.b)}${e===1?")":`, ${e})`}`}function mv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ou(e){return e=pu(e),(e<16?"0":"")+e.toString(16)}function C$(e,t,a,s){return s<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new Ui(e,t,a,s)}function rG(e){if(e instanceof Ui)return new Ui(e.h,e.s,e.l,e.opacity);if(e instanceof xx||(e=yp(e)),!e)return new Ui;if(e instanceof Ui)return e;e=e.rgb();var t=e.r/255,a=e.g/255,s=e.b/255,r=Math.min(t,a,s),i=Math.max(t,a,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(a-s)/l+(a<s)*6:a===i?o=(s-t)/l+2:o=(t-a)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new Ui(o,l,c,e.opacity)}function Dme(e,t,a,s){return arguments.length===1?rG(e):new Ui(e,t,a,s??1)}function Ui(e,t,a,s){this.h=+e,this.s=+t,this.l=+a,this.opacity=+s}EL(Ui,Dme,sG(xx,{brighter(e){return e=e==null?uv:Math.pow(uv,e),new Ui(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?pp:Math.pow(pp,e),new Ui(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*t,r=2*a-s;return new cr(zS(e>=240?e-240:e+120,r,s),zS(e,r,s),zS(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new Ui(S$(this.h),$y(this.s),$y(this.l),mv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mv(this.opacity);return`${e===1?"hsl(":"hsla("}${S$(this.h)}, ${$y(this.s)*100}%, ${$y(this.l)*100}%${e===1?")":`, ${e})`}`}}));function S$(e){return e=(e||0)%360,e<0?e+360:e}function $y(e){return Math.max(0,Math.min(1,e||0))}function zS(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const kL=e=>()=>e;function Ome(e,t){return function(a){return e+a*t}}function Mme(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(s){return Math.pow(e+s*t,a)}}function Ime(e){return(e=+e)==1?iG:function(t,a){return a-t?Mme(t,a,e):kL(isNaN(t)?a:t)}}function iG(e,t){var a=t-e;return a?Ome(e,a):kL(isNaN(e)?t:e)}const _$=(function e(t){var a=Ime(t);function s(r,i){var o=a((r=QT(r)).r,(i=QT(i)).r),l=a(r.g,i.g),c=a(r.b,i.b),d=iG(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=l(u),r.b=c(u),r.opacity=d(u),r+""}}return s.gamma=e,s})(1);function $me(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<a;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function Rme(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function zme(e,t){var a=t?t.length:0,s=e?Math.min(a,e.length):0,r=new Array(s),i=new Array(a),o;for(o=0;o<s;++o)r[o]=Qf(e[o],t[o]);for(;o<a;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=r[o](l);return i}}function LL(e,t){var a=new Date;return e=+e,t=+t,function(s){return a.setTime(e*(1-s)+t*s),a}}function Nf(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function Ume(e,t){var a={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?a[r]=Qf(e[r],t[r]):s[r]=t[r];return function(i){for(r in a)s[r]=a[r](i);return s}}var YT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,US=new RegExp(YT.source,"g");function Fme(e){return function(){return e}}function Bme(e){return function(t){return e(t)+""}}function PL(e,t){var a=YT.lastIndex=US.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=YT.exec(e))&&(r=US.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:Nf(s,r)})),a=US.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Bme(c[0].x):Fme(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function Qf(e,t){var a=typeof t,s;return t==null||a==="boolean"?kL(t):(a==="number"?Nf:a==="string"?(s=yp(t))?(t=s,_$):PL:t instanceof yp?_$:t instanceof Date?LL:Rme(t)?$me:Array.isArray(t)?zme:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ume:Nf)(e,t)}function DL(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function Hme(e,t){t===void 0&&(t=e,e=Qf);for(var a=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);a<s;)i[a]=e(r,r=t[++a]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function Gme(e){return function(){return e}}function fv(e){return+e}var A$=[0,1];function Ws(e){return e}function KT(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:Gme(isNaN(t)?NaN:.5)}function Wme(e,t){var a;return e>t&&(a=e,e=t,t=a),function(s){return Math.max(e,Math.min(t,s))}}function qme(e,t,a){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=KT(r,s),i=a(o,i)):(s=KT(s,r),i=a(i,o)),function(l){return i(s(l))}}function Vme(e,t,a){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=KT(e[o],e[o+1]),i[o]=a(t[o],t[o+1]);return function(l){var c=px(e,l,1,s)-1;return i[c](r[c](l))}}function yx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gN(){var e=A$,t=A$,a=Qf,s,r,i,o=Ws,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==Ws&&(o=Wme(e[0],e[p-1])),l=p>2?Vme:qme,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(s),t,a)))(s(o(p)))}return f.invert=function(p){return o(r((d||(d=l(t,e.map(s),Nf)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,fv),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),a=DL,u()},f.clamp=function(p){return arguments.length?(o=p?!0:Ws,u()):o!==Ws},f.interpolate=function(p){return arguments.length?(a=p,u()):a},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,x){return s=p,r=x,u()}}function OL(){return gN()(Ws,Ws)}function Qme(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hv(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function jf(e){return e=hv(Math.abs(e)),e?e[1]:NaN}function Yme(e,t){return function(a,s){for(var r=a.length,i=[],o=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(a.substring(r-=l,r+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Kme(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var Xme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bp(e){if(!(t=Xme.exec(e)))throw new Error("invalid format: "+e);var t;return new ML({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bp.prototype=ML.prototype;function ML(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ML.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zme(e){e:for(var t=e.length,a=1,s=-1,r;a<t;++a)switch(e[a]){case".":s=r=a;break;case"0":s===0&&(s=a),r=a;break;default:if(!+e[a])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var oG;function Jme(e,t){var a=hv(e,t);if(!a)return e+"";var s=a[0],r=a[1],i=r-(oG=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+hv(e,Math.max(0,t+i-1))[0]}function T$(e,t){var a=hv(e,t);if(!a)return e+"";var s=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const E$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Qme,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>T$(e*100,t),r:T$,s:Jme,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function k$(e){return e}var L$=Array.prototype.map,P$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function efe(e){var t=e.grouping===void 0||e.thousands===void 0?k$:Yme(L$.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?k$:Kme(L$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=bp(f);var p=f.fill,x=f.align,v=f.sign,N=f.symbol,b=f.zero,C=f.width,w=f.comma,S=f.precision,E=f.trim,k=f.type;k==="n"?(w=!0,k="g"):E$[k]||(S===void 0&&(S=12),E=!0,k="g"),(b||p==="0"&&x==="=")&&(b=!0,p="0",x="=");var _=N==="$"?a:N==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",A=N==="$"?s:/[%p]/.test(k)?o:"",T=E$[k],$=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function z(F){var P=_,M=A,G,Q,V;if(k==="c")M=T(F)+M,F="";else{F=+F;var X=F<0||1/F<0;if(F=isNaN(F)?c:T(Math.abs(F),S),E&&(F=Zme(F)),X&&+F==0&&v!=="+"&&(X=!1),P=(X?v==="("?v:l:v==="-"||v==="("?"":v)+P,M=(k==="s"?P$[8+oG/3]:"")+M+(X&&v==="("?")":""),$){for(G=-1,Q=F.length;++G<Q;)if(V=F.charCodeAt(G),48>V||V>57){M=(V===46?r+F.slice(G+1):F.slice(G))+M,F=F.slice(0,G);break}}}w&&!b&&(F=t(F,1/0));var q=P.length+F.length+M.length,ne=q<C?new Array(C-q+1).join(p):"";switch(w&&b&&(F=t(ne+F,ne.length?C-M.length:1/0),ne=""),x){case"<":F=P+F+M+ne;break;case"=":F=P+ne+F+M;break;case"^":F=ne.slice(0,q=ne.length>>1)+P+F+M+ne.slice(q);break;default:F=ne+P+F+M;break}return i(F)}return z.toString=function(){return f+""},z}function u(f,p){var x=d((f=bp(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(jf(p)/3)))*3,N=Math.pow(10,-v),b=P$[8+v/3];return function(C){return x(N*C)+b}}return{format:d,formatPrefix:u}}var Ry,IL,lG;tfe({thousands:",",grouping:[3],currency:["$",""]});function tfe(e){return Ry=efe(e),IL=Ry.format,lG=Ry.formatPrefix,Ry}function nfe(e){return Math.max(0,-jf(Math.abs(e)))}function afe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jf(t)/3)))*3-jf(Math.abs(e)))}function sfe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jf(t)-jf(e))+1}function cG(e,t,a,s){var r=qT(e,t,a),i;switch(s=bp(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=afe(r,o))&&(s.precision=i),lG(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=sfe(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=nfe(r))&&(s.precision=i-(s.type==="%")*2);break}}return IL(s)}function bd(e){var t=e.domain;return e.ticks=function(a){var s=t();return WT(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var r=t();return cG(r[0],r[r.length-1],a??10,s)},e.nice=function(a){a==null&&(a=10);var s=t(),r=0,i=s.length-1,o=s[r],l=s[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=r,r=i,i=d);u-- >0;){if(d=eG(o,l,a),d===c)return s[r]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function pN(){var e=OL();return e.copy=function(){return yx(e,pN())},Ai.apply(e,arguments),bd(e)}function dG(e){var t;function a(s){return s==null||isNaN(s=+s)?t:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(e=Array.from(s,fv),a):e.slice()},a.unknown=function(s){return arguments.length?(t=s,a):t},a.copy=function(){return dG(e).unknown(t)},e=arguments.length?Array.from(e,fv):[0,1],bd(a)}function uG(e,t){e=e.slice();var a=0,s=e.length-1,r=e[a],i=e[s],o;return i<r&&(o=a,a=s,s=o,o=r,r=i,i=o),e[a]=t.floor(r),e[s]=t.ceil(i),e}function D$(e){return Math.log(e)}function O$(e){return Math.exp(e)}function rfe(e){return-Math.log(-e)}function ife(e){return-Math.exp(-e)}function ofe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function lfe(e){return e===10?ofe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function cfe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function M$(e){return(t,a)=>-e(-t,a)}function $L(e){const t=e(D$,O$),a=t.domain;let s=10,r,i;function o(){return r=cfe(s),i=lfe(s),a()[0]<0?(r=M$(r),i=M$(i),e(rfe,ife)):e(D$,O$),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(a(l),o()):a()},t.ticks=l=>{const c=a();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=r(d),x=r(u),v,N;const b=l==null?10:+l;let C=[];if(!(s%1)&&x-p<b){if(p=Math.floor(p),x=Math.ceil(x),d>0){for(;p<=x;++p)for(v=1;v<s;++v)if(N=p<0?v/i(-p):v*i(p),!(N<d)){if(N>u)break;C.push(N)}}else for(;p<=x;++p)for(v=s-1;v>=1;--v)if(N=p>0?v/i(-p):v*i(p),!(N<d)){if(N>u)break;C.push(N)}C.length*2<b&&(C=WT(d,u,b))}else C=WT(p,x,Math.min(x-p,b)).map(i);return f?C.reverse():C},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=bp(c)).precision==null&&(c.trim=!0),c=IL(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let f=u/i(Math.round(r(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>a(uG(a(),{floor:l=>i(Math.floor(r(l))),ceil:l=>i(Math.ceil(r(l)))})),t}function vp(){const e=$L(gN()).domain([1,10]);return e.copy=()=>yx(e,vp()).base(e.base()),Ai.apply(e,arguments),e}function I$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function RL(e){var t=1,a=e(I$(t),$$(t));return a.constant=function(s){return arguments.length?e(I$(t=+s),$$(t)):t},bd(a)}function zL(){var e=RL(gN());return e.copy=function(){return yx(e,zL()).constant(e.constant())},Ai.apply(e,arguments)}function R$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function dfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ufe(e){return e<0?-e*e:e*e}function UL(e){var t=e(Ws,Ws),a=1;function s(){return a===1?e(Ws,Ws):a===.5?e(dfe,ufe):e(R$(a),R$(1/a))}return t.exponent=function(r){return arguments.length?(a=+r,s()):a},bd(t)}function xN(){var e=UL(gN());return e.copy=function(){return yx(e,xN()).exponent(e.exponent())},Ai.apply(e,arguments),e}function mG(){return xN.apply(null,arguments).exponent(.5)}function z$(e){return Math.sign(e)*e*e}function mfe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function fG(){var e=OL(),t=[0,1],a=!1,s;function r(i){var o=mfe(e(i));return isNaN(o)?s:a?Math.round(o):o}return r.invert=function(i){return e.invert(z$(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,fv)).map(z$)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(a=!!i,r):a},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return fG(e.domain(),t).round(a).clamp(e.clamp()).unknown(s)},Ai.apply(r,arguments),bd(r)}function hG(){var e=[],t=[],a=[],s;function r(){var o=0,l=Math.max(1,t.length);for(a=new Array(l-1);++o<l;)a[o-1]=vme(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[px(a,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?a[l-1]:e[0],l<a.length?a[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(gx),r()},i.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return a.slice()},i.copy=function(){return hG().domain(e).range(t).unknown(s)},Ai.apply(i,arguments)}function gG(){var e=0,t=1,a=1,s=[.5],r=[0,1],i;function o(c){return c!=null&&c<=c?r[px(s,c,0,a)]:i}function l(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*t-(c-a)*e)/(a+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(a=(r=Array.from(c)).length-1,l()):r.slice()},o.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=a?[s[a-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return gG().domain([e,t]).range(r).unknown(i)},Ai.apply(bd(o),arguments)}function FL(){var e=[.5],t=[0,1],a,s=1;function r(i){return i!=null&&i<=i?t[px(e,i,0,s)]:a}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return FL().domain(e).range(t).unknown(a)},Ai.apply(r,arguments)}const FS=new Date,BS=new Date;function is(e,t,a,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const o=r(i),l=r.ceil(i);return i-o<l-i?o:l},r.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),r.range=(i,o,l)=>{const c=[];if(i=r.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},r.filter=i=>is(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),a&&(r.count=(i,o)=>(FS.setTime(+i),BS.setTime(+o),e(FS),e(BS),Math.floor(a(FS,BS))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?o=>s(o)%i===0:o=>r.count(0,o)%i===0):r)),r}const gv=is(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?is(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):gv);gv.range;const _l=1e3,fi=_l*60,Al=fi*60,Rl=Al*24,BL=Rl*7,U$=Rl*30,HS=Rl*365,lu=is(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_l)},(e,t)=>(t-e)/_l,e=>e.getUTCSeconds());lu.range;const HL=is(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_l)},(e,t)=>{e.setTime(+e+t*fi)},(e,t)=>(t-e)/fi,e=>e.getMinutes());HL.range;const GL=is(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fi)},(e,t)=>(t-e)/fi,e=>e.getUTCMinutes());GL.range;const WL=is(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_l-e.getMinutes()*fi)},(e,t)=>{e.setTime(+e+t*Al)},(e,t)=>(t-e)/Al,e=>e.getHours());WL.range;const qL=is(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Al)},(e,t)=>(t-e)/Al,e=>e.getUTCHours());qL.range;const bx=is(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fi)/Rl,e=>e.getDate()-1);bx.range;const yN=is(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rl,e=>e.getUTCDate()-1);yN.range;const pG=is(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rl,e=>Math.floor(e/Rl));pG.range;function Qu(e){return is(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*fi)/BL)}const bN=Qu(0),pv=Qu(1),ffe=Qu(2),hfe=Qu(3),Cf=Qu(4),gfe=Qu(5),pfe=Qu(6);bN.range;pv.range;ffe.range;hfe.range;Cf.range;gfe.range;pfe.range;function Yu(e){return is(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/BL)}const vN=Yu(0),xv=Yu(1),xfe=Yu(2),yfe=Yu(3),Sf=Yu(4),bfe=Yu(5),vfe=Yu(6);vN.range;xv.range;xfe.range;yfe.range;Sf.range;bfe.range;vfe.range;const VL=is(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());VL.range;const QL=is(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());QL.range;const zl=is(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());zl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:is(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});zl.range;const Ul=is(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ul.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:is(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});Ul.range;function xG(e,t,a,s,r,i){const o=[[lu,1,_l],[lu,5,5*_l],[lu,15,15*_l],[lu,30,30*_l],[i,1,fi],[i,5,5*fi],[i,15,15*fi],[i,30,30*fi],[r,1,Al],[r,3,3*Al],[r,6,6*Al],[r,12,12*Al],[s,1,Rl],[s,2,2*Rl],[a,1,BL],[t,1,U$],[t,3,3*U$],[e,1,HS]];function l(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const x=f&&typeof f.range=="function"?f:c(d,u,f),v=x?x.range(d,+u+1):[];return p?v.reverse():v}function c(d,u,f){const p=Math.abs(u-d)/f,x=AL(([,,b])=>b).right(o,p);if(x===o.length)return e.every(qT(d/HS,u/HS,f));if(x===0)return gv.every(Math.max(qT(d,u,f),1));const[v,N]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return v.every(N)}return[l,c]}const[wfe,Nfe]=xG(Ul,QL,vN,pG,qL,GL),[jfe,Cfe]=xG(zl,VL,bN,bx,WL,HL);function GS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function WS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cg(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function Sfe(e){var t=e.dateTime,a=e.date,s=e.time,r=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=dg(r),u=ug(r),f=dg(i),p=ug(i),x=dg(o),v=ug(o),N=dg(l),b=ug(l),C=dg(c),w=ug(c),S={a:X,A:q,b:ne,B:oe,c:null,d:q$,e:q$,f:Qfe,g:she,G:ihe,H:Wfe,I:qfe,j:Vfe,L:yG,m:Yfe,M:Kfe,p:K,q:R,Q:Y$,s:K$,S:Xfe,u:Zfe,U:Jfe,V:ehe,w:the,W:nhe,x:null,X:null,y:ahe,Y:rhe,Z:ohe,"%":Q$},E={a:ye,A:pe,b:Ne,B:Se,c:null,d:V$,e:V$,f:uhe,g:whe,G:jhe,H:lhe,I:che,j:dhe,L:vG,m:mhe,M:fhe,p:Oe,q:ke,Q:Y$,s:K$,S:hhe,u:ghe,U:phe,V:xhe,w:yhe,W:bhe,x:null,X:null,y:vhe,Y:Nhe,Z:Che,"%":Q$},k={a:z,A:F,b:P,B:M,c:G,d:G$,e:G$,f:Ffe,g:H$,G:B$,H:W$,I:W$,j:$fe,L:Ufe,m:Ife,M:Rfe,p:$,q:Mfe,Q:Hfe,s:Gfe,S:zfe,u:kfe,U:Lfe,V:Pfe,w:Efe,W:Dfe,x:Q,X:V,y:H$,Y:B$,Z:Ofe,"%":Bfe};S.x=_(a,S),S.X=_(s,S),S.c=_(t,S),E.x=_(a,E),E.X=_(s,E),E.c=_(t,E);function _(he,Ge){return function(Ce){var xe=[],ee=-1,Ee=0,Ae=he.length,Re,et,De;for(Ce instanceof Date||(Ce=new Date(+Ce));++ee<Ae;)he.charCodeAt(ee)===37&&(xe.push(he.slice(Ee,ee)),(et=F$[Re=he.charAt(++ee)])!=null?Re=he.charAt(++ee):et=Re==="e"?" ":"0",(De=Ge[Re])&&(Re=De(Ce,et)),xe.push(Re),Ee=ee+1);return xe.push(he.slice(Ee,ee)),xe.join("")}}function A(he,Ge){return function(Ce){var xe=cg(1900,void 0,1),ee=T(xe,he,Ce+="",0),Ee,Ae;if(ee!=Ce.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(Ge&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(Ee=WS(cg(xe.y,0,1)),Ae=Ee.getUTCDay(),Ee=Ae>4||Ae===0?xv.ceil(Ee):xv(Ee),Ee=yN.offset(Ee,(xe.V-1)*7),xe.y=Ee.getUTCFullYear(),xe.m=Ee.getUTCMonth(),xe.d=Ee.getUTCDate()+(xe.w+6)%7):(Ee=GS(cg(xe.y,0,1)),Ae=Ee.getDay(),Ee=Ae>4||Ae===0?pv.ceil(Ee):pv(Ee),Ee=bx.offset(Ee,(xe.V-1)*7),xe.y=Ee.getFullYear(),xe.m=Ee.getMonth(),xe.d=Ee.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),Ae="Z"in xe?WS(cg(xe.y,0,1)).getUTCDay():GS(cg(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(Ae+5)%7:xe.w+xe.U*7-(Ae+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,WS(xe)):GS(xe)}}function T(he,Ge,Ce,xe){for(var ee=0,Ee=Ge.length,Ae=Ce.length,Re,et;ee<Ee;){if(xe>=Ae)return-1;if(Re=Ge.charCodeAt(ee++),Re===37){if(Re=Ge.charAt(ee++),et=k[Re in F$?Ge.charAt(ee++):Re],!et||(xe=et(he,Ce,xe))<0)return-1}else if(Re!=Ce.charCodeAt(xe++))return-1}return xe}function $(he,Ge,Ce){var xe=d.exec(Ge.slice(Ce));return xe?(he.p=u.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function z(he,Ge,Ce){var xe=x.exec(Ge.slice(Ce));return xe?(he.w=v.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function F(he,Ge,Ce){var xe=f.exec(Ge.slice(Ce));return xe?(he.w=p.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function P(he,Ge,Ce){var xe=C.exec(Ge.slice(Ce));return xe?(he.m=w.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function M(he,Ge,Ce){var xe=N.exec(Ge.slice(Ce));return xe?(he.m=b.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function G(he,Ge,Ce){return T(he,t,Ge,Ce)}function Q(he,Ge,Ce){return T(he,a,Ge,Ce)}function V(he,Ge,Ce){return T(he,s,Ge,Ce)}function X(he){return o[he.getDay()]}function q(he){return i[he.getDay()]}function ne(he){return c[he.getMonth()]}function oe(he){return l[he.getMonth()]}function K(he){return r[+(he.getHours()>=12)]}function R(he){return 1+~~(he.getMonth()/3)}function ye(he){return o[he.getUTCDay()]}function pe(he){return i[he.getUTCDay()]}function Ne(he){return c[he.getUTCMonth()]}function Se(he){return l[he.getUTCMonth()]}function Oe(he){return r[+(he.getUTCHours()>=12)]}function ke(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var Ge=_(he+="",S);return Ge.toString=function(){return he},Ge},parse:function(he){var Ge=A(he+="",!1);return Ge.toString=function(){return he},Ge},utcFormat:function(he){var Ge=_(he+="",E);return Ge.toString=function(){return he},Ge},utcParse:function(he){var Ge=A(he+="",!0);return Ge.toString=function(){return he},Ge}}}var F$={"-":"",_:" ",0:"0"},ys=/^\s*\d+/,_fe=/^%/,Afe=/[\\^$*+?|[\]().{}]/g;function _n(e,t,a){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<a?new Array(a-i+1).join(t)+r:r)}function Tfe(e){return e.replace(Afe,"\\$&")}function dg(e){return new RegExp("^(?:"+e.map(Tfe).join("|")+")","i")}function ug(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function Efe(e,t,a){var s=ys.exec(t.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function kfe(e,t,a){var s=ys.exec(t.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function Lfe(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function Pfe(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function Dfe(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function B$(e,t,a){var s=ys.exec(t.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function H$(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Ofe(e,t,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function Mfe(e,t,a){var s=ys.exec(t.slice(a,a+1));return s?(e.q=s[0]*3-3,a+s[0].length):-1}function Ife(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function G$(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function $fe(e,t,a){var s=ys.exec(t.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function W$(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function Rfe(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function zfe(e,t,a){var s=ys.exec(t.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function Ufe(e,t,a){var s=ys.exec(t.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function Ffe(e,t,a){var s=ys.exec(t.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function Bfe(e,t,a){var s=_fe.exec(t.slice(a,a+1));return s?a+s[0].length:-1}function Hfe(e,t,a){var s=ys.exec(t.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function Gfe(e,t,a){var s=ys.exec(t.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function q$(e,t){return _n(e.getDate(),t,2)}function Wfe(e,t){return _n(e.getHours(),t,2)}function qfe(e,t){return _n(e.getHours()%12||12,t,2)}function Vfe(e,t){return _n(1+bx.count(zl(e),e),t,3)}function yG(e,t){return _n(e.getMilliseconds(),t,3)}function Qfe(e,t){return yG(e,t)+"000"}function Yfe(e,t){return _n(e.getMonth()+1,t,2)}function Kfe(e,t){return _n(e.getMinutes(),t,2)}function Xfe(e,t){return _n(e.getSeconds(),t,2)}function Zfe(e){var t=e.getDay();return t===0?7:t}function Jfe(e,t){return _n(bN.count(zl(e)-1,e),t,2)}function bG(e){var t=e.getDay();return t>=4||t===0?Cf(e):Cf.ceil(e)}function ehe(e,t){return e=bG(e),_n(Cf.count(zl(e),e)+(zl(e).getDay()===4),t,2)}function the(e){return e.getDay()}function nhe(e,t){return _n(pv.count(zl(e)-1,e),t,2)}function ahe(e,t){return _n(e.getFullYear()%100,t,2)}function she(e,t){return e=bG(e),_n(e.getFullYear()%100,t,2)}function rhe(e,t){return _n(e.getFullYear()%1e4,t,4)}function ihe(e,t){var a=e.getDay();return e=a>=4||a===0?Cf(e):Cf.ceil(e),_n(e.getFullYear()%1e4,t,4)}function ohe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_n(t/60|0,"0",2)+_n(t%60,"0",2)}function V$(e,t){return _n(e.getUTCDate(),t,2)}function lhe(e,t){return _n(e.getUTCHours(),t,2)}function che(e,t){return _n(e.getUTCHours()%12||12,t,2)}function dhe(e,t){return _n(1+yN.count(Ul(e),e),t,3)}function vG(e,t){return _n(e.getUTCMilliseconds(),t,3)}function uhe(e,t){return vG(e,t)+"000"}function mhe(e,t){return _n(e.getUTCMonth()+1,t,2)}function fhe(e,t){return _n(e.getUTCMinutes(),t,2)}function hhe(e,t){return _n(e.getUTCSeconds(),t,2)}function ghe(e){var t=e.getUTCDay();return t===0?7:t}function phe(e,t){return _n(vN.count(Ul(e)-1,e),t,2)}function wG(e){var t=e.getUTCDay();return t>=4||t===0?Sf(e):Sf.ceil(e)}function xhe(e,t){return e=wG(e),_n(Sf.count(Ul(e),e)+(Ul(e).getUTCDay()===4),t,2)}function yhe(e){return e.getUTCDay()}function bhe(e,t){return _n(xv.count(Ul(e)-1,e),t,2)}function vhe(e,t){return _n(e.getUTCFullYear()%100,t,2)}function whe(e,t){return e=wG(e),_n(e.getUTCFullYear()%100,t,2)}function Nhe(e,t){return _n(e.getUTCFullYear()%1e4,t,4)}function jhe(e,t){var a=e.getUTCDay();return e=a>=4||a===0?Sf(e):Sf.ceil(e),_n(e.getUTCFullYear()%1e4,t,4)}function Che(){return"+0000"}function Q$(){return"%"}function Y$(e){return+e}function K$(e){return Math.floor(+e/1e3)}var Bm,NG,jG;She({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function She(e){return Bm=Sfe(e),NG=Bm.format,Bm.parse,jG=Bm.utcFormat,Bm.utcParse,Bm}function _he(e){return new Date(e)}function Ahe(e){return e instanceof Date?+e:+new Date(+e)}function YL(e,t,a,s,r,i,o,l,c,d){var u=OL(),f=u.invert,p=u.domain,x=d(".%L"),v=d(":%S"),N=d("%I:%M"),b=d("%I %p"),C=d("%a %d"),w=d("%b %d"),S=d("%B"),E=d("%Y");function k(_){return(c(_)<_?x:l(_)<_?v:o(_)<_?N:i(_)<_?b:s(_)<_?r(_)<_?C:w:a(_)<_?S:E)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?p(Array.from(_,Ahe)):p().map(_he)},u.ticks=function(_){var A=p();return e(A[0],A[A.length-1],_??10)},u.tickFormat=function(_,A){return A==null?k:d(A)},u.nice=function(_){var A=p();return(!_||typeof _.range!="function")&&(_=t(A[0],A[A.length-1],_??10)),_?p(uG(A,_)):u},u.copy=function(){return yx(u,YL(e,t,a,s,r,i,o,l,c,d))},u}function KL(){return Ai.apply(YL(jfe,Cfe,zl,VL,bN,bx,WL,HL,lu,NG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function CG(){return Ai.apply(YL(wfe,Nfe,Ul,QL,vN,yN,qL,GL,lu,jG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wN(){var e=0,t=1,a,s,r,i,o=Ws,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(r===0?.5:(f=(i(f)-a)*r,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,a=i(e=+e),s=i(t=+t),r=a===s?0:1/(s-a),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(p){var x,v;return arguments.length?([x,v]=p,o=f(x,v),d):[o(0),o(1)]}}return d.range=u(Qf),d.rangeRound=u(DL),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,a=f(e),s=f(t),r=a===s?0:1/(s-a),d}}function vd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function XL(){var e=bd(wN()(Ws));return e.copy=function(){return vd(e,XL())},ec.apply(e,arguments)}function SG(){var e=$L(wN()).domain([1,10]);return e.copy=function(){return vd(e,SG()).base(e.base())},ec.apply(e,arguments)}function _G(){var e=RL(wN());return e.copy=function(){return vd(e,_G()).constant(e.constant())},ec.apply(e,arguments)}function ZL(){var e=UL(wN());return e.copy=function(){return vd(e,ZL()).exponent(e.exponent())},ec.apply(e,arguments)}function The(){return ZL.apply(null,arguments).exponent(.5)}function AG(){var e=[],t=Ws;function a(s){if(s!=null&&!isNaN(s=+s))return t((px(e,s,1)-1)/(e.length-1))}return a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(gx),a},a.interpolator=function(s){return arguments.length?(t=s,a):t},a.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(r,i)=>bme(e,i/s))},a.copy=function(){return AG(t).domain(e)},ec.apply(a,arguments)}function NN(){var e=0,t=.5,a=1,s=1,r,i,o,l,c,d=Ws,u,f=!1,p;function x(N){return isNaN(N=+N)?p:(N=.5+((N=+u(N))-i)*(s*N<s*i?l:c),d(f?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,a]=N,r=u(e=+e),i=u(t=+t),o=u(a=+a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x):[e,t,a]},x.clamp=function(N){return arguments.length?(f=!!N,x):f},x.interpolator=function(N){return arguments.length?(d=N,x):d};function v(N){return function(b){var C,w,S;return arguments.length?([C,w,S]=b,d=Hme(N,[C,w,S]),x):[d(0),d(.5),d(1)]}}return x.range=v(Qf),x.rangeRound=v(DL),x.unknown=function(N){return arguments.length?(p=N,x):p},function(N){return u=N,r=N(e),i=N(t),o=N(a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x}}function TG(){var e=bd(NN()(Ws));return e.copy=function(){return vd(e,TG())},ec.apply(e,arguments)}function EG(){var e=$L(NN()).domain([.1,1,10]);return e.copy=function(){return vd(e,EG()).base(e.base())},ec.apply(e,arguments)}function kG(){var e=RL(NN());return e.copy=function(){return vd(e,kG()).constant(e.constant())},ec.apply(e,arguments)}function JL(){var e=UL(NN());return e.copy=function(){return vd(e,JL()).exponent(e.exponent())},ec.apply(e,arguments)}function Ehe(){return JL.apply(null,arguments).exponent(.5)}function LG(e){return e.type==="piecewise"?FL(e.thresholds,e.colors):XL([e.min??0,e.max??100],e.color)}function _f(e){return e.values?gp(e.values,e.colors).unknown(e.unknownColor??null):gp(e.colors.map((t,a)=>a),e.colors).unknown(e.unknownColor??null)}function ff(e){return e.type==="ordinal"?_f(e):LG(e)}function PG(e,t,a){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,o=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),l=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(o,Math.max(l,i??a))}function DG(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function eP(e){return Math.floor(Math.abs(e)/50)}function X$(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function jN(...e){let t=new dv(void 0,X$),a=[],s=[],r=0,i=1,o,l,c=!1,d=0,u=0,f=.5;const p=b=>{const C=t.get(b);if(C!==void 0)return s[C%s.length]},x=()=>{const b=a.length,C=i<r,w=C?i:r,S=C?r:i;o=(S-w)/Math.max(1,b-d+u*2),c&&(o=Math.floor(o));const E=w+(S-w-o*(b-d))*f;l=o*(1-d);const k=c?Math.round(E):E;l=c?Math.round(l):l;const A=nG(b).map(T=>k+o*T);return s=C?A.reverse():A,p};p.domain=function(b){if(!arguments.length)return a.slice();a=[],t=new dv(void 0,X$);for(const C of b)t.has(C)||t.set(C,a.push(C)-1);return x()},p.range=function(b){if(!arguments.length)return[r,i];const[C,w]=b;return r=+C,i=+w,x()},p.rangeRound=function(b){const[C,w]=b;return r=+C,i=+w,c=!0,x()},p.bandwidth=function(){return l},p.step=function(){return o},p.round=function(b){return arguments.length?(c=!!b,x()):c},p.padding=function(b){return arguments.length?(d=Math.min(1,u=+b),x()):d},p.paddingInner=function(b){return arguments.length?(d=Math.min(1,b),x()):d},p.paddingOuter=function(b){return arguments.length?(u=+b,x()):u},p.align=function(b){return arguments.length?(f=Math.max(0,Math.min(1,b)),x()):f},p.copy=()=>jN(a,[r,i]).round(c).paddingInner(d).paddingOuter(u).align(f);const[v,N]=e;return e.length>1?(p.domain(v),p.range(N)):v?p.range(v):x(),p}function OG(...e){const t=jN(...e).paddingInner(1),a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=a();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function MG(...e){const t=zL(...e),a=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=khe(t);return t.ticks=o=>{const l=a(o),c=t.constant();let d=0,u=0,f=0;l.forEach(x=>{x>-c&&x<c&&(u+=1),x<=-c&&(d+=1),x>=c&&(f+=1)});const p=[];if(d>0&&p.push(...s.ticks(d)),u>0){const x=r.ticks(u);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(f>0){const x=i.ticks(f);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(o=10,l)=>{const c=t.constant(),[d,u]=t.domain(),f=u-d,p=s.domain(),x=p[1]-p[0],N=(f===0?0:x/f)*o,b=r.domain(),C=b[1]-b[0],S=(f===0?0:C/f)*o,E=i.domain(),k=E[1]-E[0],A=(f===0?0:k/f)*o,T=s.tickFormat(N,l),$=r.tickFormat(S,l),z=i.tickFormat(A,l);return F=>(F.valueOf()<=-c?T:F.valueOf()>=c?z:$)(F)},t.copy=()=>MG(t.domain(),t.range()).constant(t.constant()),t}function khe(e){const t=e.constant(),a=e.domain(),s=[a[0],Math.min(a[1],-t)],r=vp(s,e.range()),i=[Math.max(a[0],-t),Math.min(a[1],t)],o=pN(i,e.range()),l=[Math.max(a[0],t),a[1]],c=vp(l,e.range());return{negativeScale:r,linearScale:o,positiveScale:c}}function CN(e,t,a){switch(e){case"log":return vp(t,a);case"pow":return xN(t,a);case"sqrt":return mG(t,a);case"time":return KL(t,a);case"utc":return CG(t,a);case"symlog":return MG(t,a);default:return pN(t,a)}}const XT=e=>e?.[0]instanceof Date;function ZT(e,t,a){const s=KL(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(a)(r):`${r.toLocaleString()}`}let Z$,J$;class Lhe{types=new Set;constructor(){if(Z$)throw new Error("You can only create one instance!");Z$=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class Phe{types=new Set;constructor(){if(J$)throw new Error("You can only create one instance!");J$=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const SN=new Lhe;SN.addType("bar");SN.addType("line");SN.addType("scatter");const IG=new Phe;IG.addType("radar");function _N(e){return SN.getTypes().has(e)}function yv(e){return _N(e.type)}const Dhe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(_N).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function bs(e){return e.bandwidth!==void 0}function Ohe(e){return bs(e)&&e.paddingOuter!==void 0}function Mhe(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a?[s[1],s[0]]:s}const Ihe=.2,$he=.1;function $G({scales:e,drawingArea:t,formattedSeries:a,axis:s,seriesConfig:r,axisDirection:i,zoomMap:o,domains:l}){if(s===void 0)return{axis:{},axisIds:[]};const c=Dhe(i,r,a,s[0].id),d={};return s.forEach(u=>{const f=u,p=e[f.id],x=o?.get(f.id),v=x?[x.start,x.end]:[0,100],N=Mhe(t,i,f.reverse??!1),b=!f.ignoreTooltip&&c.has(f.id),C=f.data??[];if(bs(p)){const _=i==="y"?[N[1],N[0]]:N;if(Ohe(p)&&qu(f)){const A=f.categoryGapRatio??Ihe,T=f.barGapRatio??$he;d[f.id]=qe({offset:0,height:0,categoryGapRatio:A,barGapRatio:T,triggerTooltip:b},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?_f(qe({values:f.data},f.colorMap)):ff(f.colorMap))})}if(Vu(f)&&(d[f.id]=qe({offset:0,height:0,triggerTooltip:b},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?_f(qe({values:f.data},f.colorMap)):ff(f.colorMap))})),XT(f.data)){const A=ZT(f.data,_,f.tickNumber);d[f.id].valueFormatter=f.valueFormatter??A}return}if(f.scaleType==="band"||f.scaleType==="point")return;const w=l[f.id].tickNumber,S=f,E=S.scaleType??"linear",k=DG(w,v);d[f.id]=qe({offset:0,height:0,triggerTooltip:b},S,{data:C,scaleType:E,scale:p,tickNumber:k,colorScale:S.colorMap&&LG(S.colorMap),valueFormatter:f.valueFormatter??dme(k,CN(E,N.map(_=>p.invert(_)),N))})}),{axis:d,axisIds:s.map(({id:u})=>u)}}function Rhe(e){return e!=null}function zhe(e,t,a,s){const r=e?.length??0,i=Math.floor(t*r/100),o=Math.ceil(a*r/100);return function(c,d){return(c[s]??e?.[d])==null?!0:d>=i&&d<o}}function Uhe(e,t,a,s,r){const i=e[0].valueOf(),o=e[1].valueOf(),l=i+t*(o-i)/100,c=i+a*(o-i)/100;return function(u,f){const p=u[s]??r?.[f];return p==null?!0:p>=l&&p<=c}}const Fhe=e=>({currentAxisId:t,seriesXAxisId:a,seriesYAxisId:s,isDefaultAxis:r})=>(i,o)=>!(t===a?s:a)||r?Object.values(e??{})[0]?.(i,o)??!0:[s,a].filter(d=>d!==t).map(d=>e[d??""]).filter(Rhe).every(d=>d(i,o)),e6=e=>(t=[])=>t.reduce((a,s)=>{const{zoom:r,id:i,reverse:o}=s,l=_L(r,i,e,o);return l&&(a[i]=l),a},{}),Bhe=.2;function RG(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a.reverse?[s[1],s[0]]:s}function zG(e,t){const a=[0,1];if(qu(e)){const i=e.categoryGapRatio??Bhe;return jN(t,a).paddingInner(i).paddingOuter(i/2)}if(Vu(e))return OG(t,a);const s=e.scaleType??"linear",r=CN(s,t,a);return mme(e)&&e.constant!=null&&r.constant(e.constant),r}const UG=(e,t)=>{const a=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*a/s,i=e[1]+(100-t[1])*a/s;return[r,i]},Hhe=(e,t,a,s,r,i,o)=>{const l=a==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return l?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:o})??[1/0,-1/0]};function AN(e,t,a,s,r,i){const o=Object.keys(a).filter(_N);let l=[1/0,-1/0];for(const c of o){const[d,u]=Hhe(c,e,t,a,s,r,i);l=[Math.min(l[0],d),Math.max(l[1],u)]}return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l}const Ghe=(e,t,a,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&a===0)return"strict"}return"nice"};function FG(e,t,a){return CN(e??"linear",t,[0,1]).nice(a).domain()}function BG(e,t,a,s,[r,i],o,l){const c=GG(e,t,a,s,l);let d=WG(e,r,i);if(typeof c=="function"){const{min:f,max:p}=c(r.valueOf(),i.valueOf());d[0]=f,d[1]=p}const u=PG(e,d,o);return c==="nice"&&(d=FG(e.scaleType,d,u)),d=["min"in e?e.min??d[0]:d[0],"max"in e?e.max??d[1]:d[1]],{domain:d,tickNumber:u}}function HG(e,t,a,s,[r,i],o,l){const c=GG(e,t,a,s,l);let d=WG(e,r,i);if(typeof c=="function"){const{min:u,max:f}=c(r.valueOf(),i.valueOf());d[0]=u,d[1]=f}return c==="nice"&&(d=FG(e.scaleType,d,o)),[e.min??d[0],e.max??d[1]]}function GG(e,t,a,s,r){return r?Ghe(e,t,a,s):e.domainLimit??"nice"}function WG(e,t,a){let s=t,r=a;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class Whe{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,a){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(a>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=a}pop(){if(this.length===0)return;const t=this.ids,a=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],o=a[r];let l=0;const c=r>>1;for(;l<c;){const d=(l<<1)+1,u=d+1,f=d+(+(u<r)&+(a[u]<a[d]));if(a[f]>=o)break;t[l]=t[f],a[l]=a[f],l=f}t[l]=i,a[l]=o}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const t6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],qS=3;class tP{static from(t,a=0){if(a%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,a+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==qS)throw new Error(`Got v${i} data when expected v${qS}.`);const o=t6[r&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,a+2,1),[c]=new Uint32Array(t,a+4,1);return new tP(c,l,o,void 0,t,a)}constructor(t,a=16,s=Float64Array,r=ArrayBuffer,i,o=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.byteOffset=o;let l=t,c=l;this._levelBounds=[l*4];do l=Math.ceil(l/this.nodeSize),c+=l,this._levelBounds.push(c*4);while(l!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const d=t6.indexOf(s),u=c*4*s.BYTES_PER_ELEMENT;if(d<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,o+8,c*4),this._indices=new this.IndexArrayType(i,o+8+u,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const f=this.data=new r(8+u+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(f,8,c*4),this._indices=new this.IndexArrayType(f,8+u,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(f,0,2).set([251,(qS<<4)+d]),new Uint16Array(f,2,1)[0]=a,new Uint32Array(f,4,1)[0]=t}this._queue=new Whe}add(t,a,s=t,r=a){const i=this._pos>>2,o=this._boxes;return this._indices[i]=i,o[this._pos++]=t,o[this._pos++]=a,o[this._pos++]=s,o[this._pos++]=r,t<this.minX&&(this.minX=t),a<this.minY&&(this.minY=a),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const a=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let o=0,l=0;o<this.numItems;o++){const c=t[l++],d=t[l++],u=t[l++],f=t[l++],p=Math.floor(i*((c+u)/2-this.minX)/a),x=Math.floor(i*((d+f)/2-this.minY)/s);r[o]=Qhe(p,x)}JT(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,l=0;o<this._levelBounds.length-1;o++){const c=this._levelBounds[o];for(;l<c;){const d=l;let u=t[l++],f=t[l++],p=t[l++],x=t[l++];for(let v=1;v<this.nodeSize&&l<c;v++)u=Math.min(u,t[l++]),f=Math.min(f,t[l++]),p=Math.max(p,t[l++]),x=Math.max(x,t[l++]);this._indices[this._pos>>2]=d,t[this._pos++]=u,t[this._pos++]=f,t[this._pos++]=p,t[this._pos++]=x}}}search(t,a,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const l=[],c=[];for(;o!==void 0;){const d=Math.min(o+this.nodeSize*4,n6(o,this._levelBounds));for(let u=o;u<d;u+=4){if(s<this._boxes[u]||r<this._boxes[u+1]||t>this._boxes[u+2]||a>this._boxes[u+3])continue;const f=this._indices[u>>2]|0;o>=this.numItems*4?l.push(f):(i===void 0||i(f))&&(c.push(f),c.push(this._boxes[u]),c.push(this._boxes[u+1]))}o=l.pop()}return c}neighbors(t,a,s=1/0,r=1/0,i,o=qhe){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=this._queue,d=[];e:for(;l!==void 0;){const u=Math.min(l+this.nodeSize*4,n6(l,this._levelBounds));for(let f=l;f<u;f+=4){const p=this._indices[f>>2]|0,x=this._boxes[f],v=this._boxes[f+1],N=this._boxes[f+2],b=this._boxes[f+3],C=t<x?x-t:t>N?t-N:0,w=a<v?v-a:a>b?a-b:0,S=o(C,w);S>r||(l>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(d.push(c.pop()>>1),d.length===s))break e;l=c.length?c.pop()>>1:void 0}return c.clear(),d}}function qhe(e,t){return e*e+t*t}function n6(e,t){let a=0,s=t.length-1;for(;a<s;){const r=a+s>>1;t[r]>e?s=r:a=r+1}return t[a]}function JT(e,t,a,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const o=e[s],l=e[s+r>>1],c=e[r];let d=c;const u=Math.max(o,l);c>u?d=u:u===o?d=Math.max(l,c):u===l&&(d=Math.max(o,c));let f=s-1,p=r+1;for(;;){do f++;while(e[f]<d);do p--;while(e[p]>d);if(f>=p)break;Vhe(e,t,a,f,p)}JT(e,t,a,s,p,i),JT(e,t,a,p+1,r,i)}function Vhe(e,t,a,s,r){const i=e[s];e[s]=e[r],e[r]=i;const o=4*s,l=4*r,c=t[o],d=t[o+1],u=t[o+2],f=t[o+3];t[o]=t[l],t[o+1]=t[l+1],t[o+2]=t[l+2],t[o+3]=t[l+3],t[l]=c,t[l+1]=d,t[l+2]=u,t[l+3]=f;const p=a[s];a[s]=a[r],a[r]=p}function Qhe(e,t){let a=e^t,s=65535^a,r=65535^(e|t),i=e&(t^65535),o=a|s>>1,l=a>>1^a,c=r>>1^s&i>>1^r,d=a&r>>1^i>>1^i;a=o,s=l,r=c,i=d,o=a&a>>2^s&s>>2,l=a&s>>2^s&(a^s)>>2,c^=a&r>>2^s&i>>2,d^=s&r>>2^(a^s)&i>>2,a=o,s=l,r=c,i=d,o=a&a>>4^s&s>>4,l=a&s>>4^s&(a^s)>>4,c^=a&r>>4^s&i>>4,d^=s&r>>4^(a^s)&i>>4,a=o,s=l,r=c,i=d,c^=a&r>>8^s&i>>8,d^=s&r>>8^(a^s)&i>>8,a=c^c>>1,s=d^d>>1;let u=e^t,f=s|65535^(u|a);return u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,(f<<1|u)>>>0}const Yhe=e=>{const t=new Map;return e.forEach(a=>{t.set(a.axisId,a)}),t},qG=e=>e.zoom,Khe=jt(Go,Jl,(e,t)=>e?.some(a=>!!a.zoom)||t?.some(a=>!!a.zoom)||!1),VG=jt(qG,e=>e?.isInteracting),wd=Ia(qG,function(t){return t?.zoomData&&Yhe(t?.zoomData)}),a6=jt(wd,(e,t)=>e?.get(t)),vx=Ia(Go,Jl,function(t,a){return qe({},e6("x")(t),e6("y")(a))});jt(vx,(e,t)=>e[t]);const Xhe=jt(pr,function(t){return eP(t.width)}),Zhe=jt(pr,function(t){return eP(t.height)}),nP=Ia(Go,xa,Gr,mN,Xhe,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(qu(u)||Vu(u)){l[u.id]={domain:u.data};return}const f=AN(u,"x",s,d,a);l[u.id]=BG(u,"x",d,a,f,i,r)}),{axes:t,domains:l}}),aP=Ia(Jl,xa,Gr,mN,Zhe,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(qu(u)||Vu(u)){l[u.id]={domain:u.data};return}const f=AN(u,"y",s,d,a);l[u.id]=BG(u,"y",d,a,f,i,r)}),{axes:t,domains:l}}),QG=Ia(wd,vx,nP,aP,function(t,a,{axes:s,domains:r},{axes:i,domains:o}){if(!t||!a)return;let l=!1;const c={},d=[...s??[],...i??[]];for(let u=0;u<d.length;u+=1){const f=d[u];if(!a[f.id]||a[f.id].filterMode!=="discard")continue;const p=t.get(f.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=u<(s?.length??0)?"x":"y";if(f.scaleType==="band"||f.scaleType==="point")c[f.id]=zhe(f.data,p.start,p.end,x);else{const{domain:v}=x==="x"?r[f.id]:o[f.id];c[f.id]=Uhe(v,p.start,p.end,x,f.data)}l=!0}if(l)return Fhe(c)}),Jhe=Ia(xa,Gr,wd,vx,QG,mN,nP,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,f)=>{const p=c[u.id].domain;if(qu(u)||Vu(u)){d[u.id]=p;return}const x=s?.get(u.id),v=r?.[u.id],N=x===void 0&&!v?i:void 0;if(!N){d[u.id]=p;return}const b=c[u.id].tickNumber,C=AN(u,"x",a,f,t,N);d[u.id]=HG(u,"x",f,t,C,b,o)}),d}),ege=Ia(xa,Gr,wd,vx,QG,mN,aP,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,f)=>{const p=c[u.id].domain;if(qu(u)||Vu(u)){d[u.id]=p;return}const x=s?.get(u.id),v=r?.[u.id],N=x===void 0&&!v?i:void 0;if(!N){d[u.id]=p;return}const b=c[u.id].tickNumber,C=AN(u,"y",a,f,t,N);d[u.id]=HG(u,"y",f,t,C,b,o)}),d}),YG=Ia(Go,Jhe,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=zG(i,o)}),s}),KG=Ia(Jl,ege,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=zG(i,o)}),s}),tge=Ia(Go,YG,pr,wd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=RG(s,"x",l),f=a[l.id].copy(),p=UG(u,d);f.range(p),i[l.id]=f}),i}),nge=Ia(Jl,KG,pr,wd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=RG(s,"y",l),f=a[l.id].copy(),p=bs(f)?u.reverse():u,x=UG(p,d);f.range(x),i[l.id]=f}),i}),Ks=Ia(pr,xa,Gr,wd,nP,tge,function(t,a,s,r,{axes:i,domains:o},l){return $G({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:o})}),Xs=Ia(pr,xa,Gr,wd,aP,nge,function(t,a,s,r,{axes:i,domains:o},l){return $G({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:o})});jt(Ks,Xs,(e,t,a)=>e?.axis[a]??t?.axis[a]);jt(Go,Jl,(e,t,a)=>{const s=e?.find(r=>r.id===a)??t?.find(r=>r.id===a)??null;if(s)return s});const age=jt(Go,e=>e[0].id),sge=jt(Jl,e=>e[0].id),rge=new Map,ige=()=>rge,oge=Ia(xa,YG,KG,age,sge,function(t,a,s,r,i){const o=t.scatter,l=new Map;return o&&o.seriesOrder.forEach(c=>{const{data:d,xAxisId:u=r,yAxisId:f=i}=o.series[c],p=new tP(d.length),x=a[u],v=s[f];for(const N of d)p.add(x(N.x),v(N.y));p.finish(),l.set(c,p)}),l});function Hm(e){return e instanceof Date?e.getTime():e}function Af(e,t){const{scale:a,data:s,reverse:r}=e;if(!bs(a)){const o=a.invert(t);if(s===void 0)return-1;const l=Hm(o);return s?.findIndex((d,u)=>{const f=Hm(d);return f>l&&(u===0||Math.abs(l-f)<=Math.abs(l-Hm(s[u-1])))||f<=l&&(u===s.length-1||Math.abs(Hm(o)-f)<Math.abs(Hm(o)-Hm(s[u+1])))})}const i=a.bandwidth()===0?Math.floor((t-Math.min(...a.range())+a.step()/2)/a.step()):Math.floor((t-Math.min(...a.range()))/a.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function s6(e,t,a,s){if(!bs(e)){if(s===null){const r=e.invert(a);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function wp(e,t){const a=e.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a.matrixTransform(e.getScreenCTM().inverse())}const lge=Object.is;function XG(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let a=0,s=0;for(const r in e)if(a+=1,!lge(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return a===s}const wx=({store:e})=>{const t=gs(function(){e.set("interaction",qe({},e.state.interaction,{pointer:null,item:null}))}),a=gs(function(o){const l=e.state.interaction.item;if(!o){l!==null&&e.set("interaction",qe({},e.state.interaction,{item:null}));return}l===null||Object.keys(o).some(c=>o[c]!==l[c])||e.set("interaction",qe({},e.state.interaction,{item:null}))}),s=gs(function(o,l){XG(e.state.interaction.item,o)||e.set("interaction",qe({},e.state.interaction,{lastUpdate:l.interaction,item:o}))}),r=gs(function(o){e.set("interaction",qe({},e.state.interaction,{pointer:o,lastUpdate:o!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:a,setPointerCoordinate:r}}};wx.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});wx.params={};const TN=e=>e.interaction,cge=jt(TN,e=>e!==void 0),ZG=jt(TN,e=>e?.item??null),JG=jt(TN,e=>e?.pointer??null),Nx=jt(JG,e=>e&&e.x),jx=jt(JG,e=>e&&e.y),dge=jt(ZG,e=>e!==null),Cx=jt(TN,e=>e?.lastUpdate),uge=new Set(["bar","line","scatter","pie"]);function eW(e){return uge.has(e)}function tW(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):-1,o=s.filter(eW);for(let u=0;u<o.length;u+=1){const f=(r+u)%o.length,p=e[o[f]],x=u===0?i+1:0;for(let v=x;v<p.seriesOrder.length;v+=1)if(p.series[p.seriesOrder[v]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[v]}}const l=r,c=e[o[l]],d=i;for(let u=0;u<d;u+=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function nW(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):1,o=s.filter(eW);for(let u=0;u<o.length;u+=1){const f=(o.length+r-u)%o.length,p=e[o[f]],x=u===0?i+1:p.seriesOrder.length;for(let v=1;v<x;v+=1){const N=(p.seriesOrder.length+i-v)%p.seriesOrder.length;if(p.series[p.seriesOrder[N]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[N]}}}const l=r,c=e[o[l]],d=c.seriesOrder;for(let u=d.length-1;u>i;u-=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function aW(e,t,a){if(t==="sankey")return!1;const s=e[t]?.series[a]?.data;return s&&s.length>0}function mge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!aW(t,a,s)){const i=tW(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function fge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!aW(t,a,s)){const i=nW(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function hge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=tW(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function gge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=nW(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const EN=({params:e,store:t,svgRef:a})=>{const s=gs(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",qe({},t.state.keyboardNavigation,{item:null}))});return h.useEffect(()=>{const r=a.current;if(!r||!e.enableKeyboardNavigation)return;function i(o){let l=t.state.keyboardNavigation.item;switch(o.key){case"ArrowRight":l=mge(t.state);break;case"ArrowLeft":l=fge(t.state);break;case"ArrowDown":{l=gge(t.state);break}case"ArrowUp":{l=hge(t.state);break}}l!==t.state.keyboardNavigation.item&&(o.preventDefault(),t.update(qe({},t.state.highlight&&{highlight:qe({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:qe({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:qe({},t.state.keyboardNavigation,{item:l})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[a,s,e.enableKeyboardNavigation,t]),rs(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",qe({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};EN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});EN.params={enableKeyboardNavigation:!0};const Ku=e=>e.keyboardNavigation;jt(Ku,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const pge=jt(Ku,e=>e?.item!=null),kN=jt(Ku,e=>e?.item?.type),LN=jt(Ku,e=>e?.item?.seriesId),PN=jt(Ku,e=>e?.item?.dataIndex),xge=jt(Ku,e=>!!e?.enableKeyboardNavigation),sW=e=>(t,a,s,r,i)=>{if(t===void 0||a===void 0||s===void 0)return;const o=i[t]?.series[a];if(!o)return;let l=e==="x"?"xAxisId"in o&&o.xAxisId:"yAxisId"in o&&o.yAxisId;return(l===void 0||l===!1)&&(l=r.axisIds[0]),{axisId:l,dataIndex:s}},yge=jt(kN,LN,PN,Ks,xa,sW("x")),bge=jt(kN,LN,PN,Xs,xa,sW("y")),rW=jt(Ku,function(t){if(t?.item==null)return null;const{type:a,seriesId:s}=t.item;return a===void 0||s===void 0?null:t.item}),vge=jt(kN,LN,PN,function(t,a,s){return a!==void 0&&s!==void 0}),iW=jt(Cx,ZG,rW,(e,t,a)=>e==="keyboard"?a:t??null),wge=jt(Cx,dge,vge,(e,t,a)=>e==="keyboard"?a:t),Nge=jt(iW,pr,Gr,Ks,Xs,xa,function(t,a,s,{axis:r,axisIds:i},{axis:o,axisIds:l},c,d="top"){if(!t)return null;const u=c[t.type]?.series[t.seriesId];if(u){const f={},p=yv(u)?u.xAxisId??i[0]:void 0,x=yv(u)?u.yAxisId??l[0]:void 0;return p!==void 0&&(f.x=r[p]),x!==void 0&&(f.y=o[x]),s[u.type].tooltipItemPositionGetter?.({series:c,drawingArea:a,axesConfig:f,identifier:t,placement:d})??null}return null});function hf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!hf(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const o=r[i];if(!hf(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e),s=a.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(let r=0;r<s;r+=1){const i=a[r];if(!hf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function eE(e,t,a=t.axisIds[0]){return Array.isArray(a)?a.map(s=>Af(t.axis[s],e)):Af(t.axis[a],e)}const oW=(e,t,a)=>{if(e===null)return null;const s=eE(e,t,a);return s===-1?null:s},sP=jt(Nx,Ks,oW),rP=jt(jx,Xs,oW),jge=jt(Nx,jx,Ks,Xs,(e,t,a,s)=>[...e===null?[]:a.axisIds.map(r=>({axisId:r,dataIndex:eE(e,a,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:eE(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function lW(e,t,a,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const o=t.axis[r];return s6(o.scale,o.data,e,a[i])}):s6(t.axis[s].scale,t.axis[s].data,e,a)}const Cge=jt(Nx,Ks,sP,(e,t,a,s)=>e===null||t.axisIds.length===0?null:lW(e,t,a,s)),Sge=jt(jx,Xs,rP,(e,t,a,s)=>e===null||t.axisIds.length===0?null:lW(e,t,a,s)),cW=[],dW=oN({memoizeOptions:{resultEqualityCheck:hf}})(Nx,Ks,(e,t)=>e===null?cW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Af(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),uW=oN({memoizeOptions:{resultEqualityCheck:hf}})(jx,Xs,(e,t)=>e===null?cW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Af(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),_ge=jt(dW,uW,(e,t)=>e.length>0||t.length>0);function Age(e){return e.setPointerCoordinate!==void 0}const Yf=({params:e,store:t,seriesConfig:a,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:o,dataset:l,onHighlightedAxisChange:c}=e,d=Ft(t,pr),u=Ft(t,xa),f=Ft(t,cge),{axis:p,axisIds:x}=Ft(t,Ks),{axis:v,axisIds:N}=Ft(t,Xs);Q9({controlled:e.highlightedAxis}),rs(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const b=h.useRef(!0);h.useEffect(()=>{if(b.current){b.current=!1;return}t.set("cartesianAxis",{x:X9(i,l),y:Z9(o,l)})},[a,d,i,o,l,t]);const C=x[0],w=N[0];pue(t,jge,(E,k)=>{if(c&&!Object.is(E,k)){if(E.length!==k.length){c(k);return}E?.some(({axisId:_,dataIndex:A},T)=>k[T].axisId!==_||k[T].dataIndex!==A)&&c(k)}});const S=Age(r);return h.useEffect(()=>{const E=s.current;if(!f||!S||!E||e.disableAxisListener)return()=>{};const k=r.addInteractionListener("moveEnd",P=>{P.detail.activeGestures.pan||r.cleanInteraction()}),_=r.addInteractionListener("panEnd",P=>{P.detail.activeGestures.move||r.cleanInteraction()}),A=r.addInteractionListener("quickPressEnd",P=>{!P.detail.activeGestures.move&&!P.detail.activeGestures.pan&&r.cleanInteraction()}),T=P=>{const M=P.detail.srcEvent,G=P.detail.target,Q=wp(E,M);if(P.detail.srcEvent.buttons>=1&&G?.hasPointerCapture(P.detail.srcEvent.pointerId)&&!G?.closest("[data-charts-zoom-slider]")&&G?.releasePointerCapture(P.detail.srcEvent.pointerId),!r.isPointInside(Q.x,Q.y,G)){r.cleanInteraction?.();return}r.setPointerCoordinate(Q)},$=r.addInteractionListener("move",T),z=r.addInteractionListener("pan",T),F=r.addInteractionListener("quickPress",T);return()=>{$.cleanup(),k.cleanup(),z.cleanup(),_.cleanup(),F.cleanup(),A.cleanup()}},[s,t,p,C,v,w,r,e.disableAxisListener,f,S]),h.useEffect(()=>{const E=s.current,k=e.onAxisClick;if(E===null||!k)return()=>{};const _=r.addInteractionListener("tap",A=>{let T=null,$=!1;const z=wp(E,A.detail.srcEvent),F=Af(p[C],z.x);$=F!==-1,T=$?F:Af(v[w],z.y);const P=$?x[0]:N[0];if(T==null||T===-1)return;const M=($?p:v)[P].data[T],G={};Object.keys(u).filter(Q=>["bar","line"].includes(Q)).forEach(Q=>{u[Q]?.seriesOrder.forEach(V=>{const X=u[Q].series[V],q=X.xAxisId,ne=X.yAxisId,oe=$?q:ne;(oe===void 0||oe===P)&&(G[V]=X.data[T])})}),k(A.detail.srcEvent,{dataIndex:T,axisValue:M,seriesValues:G})});return()=>{_.cleanup()}},[e.onAxisClick,u,s,p,x,v,N,C,w,r]),{}};Yf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Yf.getDefaultizedParams=({params:e})=>qe({},e,{colors:e.colors??G9,theme:e.theme??"light",defaultizedXAxis:X9(e.xAxis,e.dataset),defaultizedYAxis:Z9(e.yAxis,e.dataset)});Yf.getInitialState=e=>qe({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Wo=e=>e.brush;jt(Wo,e=>e?.start);jt(Wo,e=>e?.current);const Tge=jt(Wo,e=>e?.start?.x??null),Ege=jt(Wo,e=>e?.start?.y??null),kge=jt(Wo,e=>e?.current?.x??null),Lge=jt(Wo,e=>e?.current?.y??null);jt(Tge,Ege,kge,Lge,(e,t,a,s)=>e===null||t===null||a===null||s===null?null:{start:{x:e,y:t},current:{x:a,y:s}});const Pge=jt(xa,e=>{let t=!1,a=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(a=!0)}),a?"xy":t?"y":"x"}),Dge=jt(vx,function(t){let a=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(a=!0)}),a&&s?"xy":s?"y":a?"x":null});jt(Pge,Dge,(e,t)=>t??e);const mW=jt(Wo,e=>e?.enabled||e?.isZoomBrushEnabled),fW=jt(mW,Wo,(e,t)=>e&&t?.start!==null&&t?.current!==null),DN=jt(Wo,fW,(e,t)=>t&&e?.preventHighlight),Oge=jt(Wo,fW,(e,t)=>t&&e?.preventTooltip),Sx=({store:e,svgRef:t,instance:a,params:s})=>{const r=Ft(e,mW);rs(()=>{e.set("brush",qe({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=gs(function(d){e.set("brush",qe({},e.state.brush,{start:e.state.brush.start??d,current:d}))}),o=gs(function(){e.set("brush",qe({},e.state.brush,{start:null,current:null}))}),l=gs(function(d){e.state.brush.isZoomBrushEnabled!==d&&e.set("brush",qe({},e.state.brush,{isZoomBrushEnabled:d}))});return h.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const d=N=>{if(N.detail.target?.closest("[data-charts-zoom-slider]"))return;const b=wp(c,{clientX:N.detail.initialCentroid.x,clientY:N.detail.initialCentroid.y});i(b)},u=N=>{const b=wp(c,{clientX:N.detail.centroid.x,clientY:N.detail.centroid.y});i(b)},f=a.addInteractionListener("brushStart",d),p=a.addInteractionListener("brush",u),x=a.addInteractionListener("brushCancel",o),v=a.addInteractionListener("brushEnd",o);return()=>{f.cleanup(),p.cleanup(),v.cleanup(),x.cleanup()}},[t,a,e,o,i,r]),{instance:{setBrushCoordinates:i,clearBrush:o,setZoomBrushEnabled:l}}};Sx.params={brushConfig:!0};Sx.getDefaultizedParams=({params:e})=>qe({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});Sx.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const Kf=e=>e.controlledCartesianAxisHighlight,hW=(e,t,a,s)=>s?[]:a!==void 0?a.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],gW=Ia(sP,Ks,Kf,DN,hW);Ia(rP,Xs,Kf,DN,hW);const pW=(e,t,a,s,r,i,o)=>{if(o)return[];if(s!==void 0)return s.map(u=>qe({},u,{value:a.axis[u.axisId]?.data?.[u.dataIndex]})).filter(({value:u})=>u!==void 0);const l=t!==null&&{axisId:a.axisIds[0],dataIndex:e,value:t},c=r&&a.axis[r.axisId]?.data?.[r.dataIndex],d=r&&c!=null&&qe({},r,{value:c});if(i==="pointer"){if(l)return[l];if(d)return[d]}if(i==="keyboard"){if(d)return[d];if(l)return[l]}return[]},Mge=jt(sP,Cge,Ks,Kf,yge,Cx,DN,pW),Ige=jt(rP,Sge,Xs,Kf,bge,Cx,DN,pW),xW=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);jt(Kf,Ks,xW);jt(Kf,Xs,xW);function r6(e,t){return e.id!==void 0?e:qe({id:t},e)}function i6(e){return e.colorMap?qe({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?_f(qe({values:e.data},e.colorMap)):ff(e.colorMap.type==="continuous"?qe({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function yW(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const a={},s=[];return e.forEach((r,i)=>{const o=r.dataKey,l=r.id??`defaultized-z-axis-${i}`;if(o===void 0||r.data!==void 0){a[l]=i6(r6(r,l)),s.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");a[l]=i6(r6(qe({},r,{data:t.map(c=>c[o])}),l)),s.push(l)}),{axis:a,axisIds:s}}const _x=({params:e,store:t})=>{const{zAxis:a,dataset:s}=e,r=h.useRef(!0);return h.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",yW(a,s))},[a,s,t]),{}};_x.params={zAxis:!0,dataset:!0};_x.getInitialState=e=>({zAxis:yW(e.zAxis,e.dataset)});const $ge=e=>e,Rge=jt($ge,e=>e.zAxis),Ax=({store:e,params:t})=>{Q9({controlled:t.highlightedItem}),rs(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",qe({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const a=gs(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=gs(r=>{const i=e.getSnapshot().highlight;i.isControlled||XG(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:a,setHighlight:s}}};Ax.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});Ax.params={highlightedItem:!0,onHighlightChange:!0};function bv(e){let t=1/0,a=-1/0;for(const s of e??[])s<t&&(t=s),s>a&&(a=s);return[t,a]}const o6=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},bW=e=>{const{axis:t,getFilters:a,isDefaultAxis:s}=e,r=a?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((o,l)=>r({x:null,y:null},l)):t.data;return bv(i??[])},vW=e=>t=>{const{series:a,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(a).filter(o=>{const l=e==="x"?a[o].xAxisId:a[o].yAxisId;return l===s.id||i&&l===void 0}).reduce((o,l)=>{const{stackedData:c}=a[l],d=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:a[l].xAxisId,seriesYAxisId:a[l].yAxisId}),[u,f]=c?.reduce((p,x,v)=>d&&(!d(o6(x[0],e),v)||!d(o6(x[1],e),v))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(u,o[0]),Math.max(f,o[1])]},[1/0,-1/0])},zge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?vW("x")(e):bW(e),Uge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?bW(e):vW("y")(e);function Nn(e){return function(){return e}}const wW=Math.cos,vv=Math.sin,Ji=Math.sqrt,l6=1e-12,wv=Math.PI,xu=2*wv,tE=Math.PI,nE=2*tE,Yd=1e-6,Fge=nE-Yd;function NW(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function Bge(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return NW;const a=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*a)/a+s[r]}}class Hge{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?NW:Bge(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,s,r){this._append`Q${+t},${+a},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,a,s,r,i,o){this._append`C${+t},${+a},${+s},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,a,s,r,i){if(t=+t,a=+a,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=r-a,u=o-t,f=l-a,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(p>Yd)if(!(Math.abs(f*c-d*u)>Yd)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let x=s-o,v=r-l,N=c*c+d*d,b=x*x+v*v,C=Math.sqrt(N),w=Math.sqrt(p),S=i*Math.tan((tE-Math.acos((N+p-b)/(2*C*w)))/2),E=S/w,k=S/C;Math.abs(E-1)>Yd&&this._append`L${t+E*u},${a+E*f}`,this._append`A${i},${i},0,0,${+(f*x>u*v)},${this._x1=t+k*c},${this._y1=a+k*d}`}}arc(t,a,s,r,i,o){if(t=+t,a=+a,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(r),c=s*Math.sin(r),d=t+l,u=a+c,f=1^o,p=o?r-i:i-r;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Yd||Math.abs(this._y1-u)>Yd)&&this._append`L${d},${u}`,s&&(p<0&&(p=p%nE+nE),p>Fge?this._append`A${s},${s},0,1,${f},${t-l},${a-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:p>Yd&&this._append`A${s},${s},0,${+(p>=tE)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=a+s*Math.sin(i)}`)}rect(t,a,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function iP(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);t=s}return e},()=>new Hge(t)}function ON(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jW(e){this._context=e}jW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Tx(e){return new jW(e)}function CW(e){return e[0]}function SW(e){return e[1]}function oP(e,t){var a=Nn(!0),s=null,r=Tx,i=null,o=iP(l);e=typeof e=="function"?e:e===void 0?CW:Nn(e),t=typeof t=="function"?t:t===void 0?SW:Nn(t);function l(c){var d,u=(c=ON(c)).length,f,p=!1,x;for(s==null&&(i=r(x=o())),d=0;d<=u;++d)!(d<u&&a(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Nn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Nn(+c),l):t},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:Nn(!!c),l):a},l.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),l):r},l.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),l):s},l}function Ig(e,t,a){var s=null,r=Nn(!0),i=null,o=Tx,l=null,c=iP(d);e=typeof e=="function"?e:e===void 0?CW:Nn(+e),t=typeof t=="function"?t:Nn(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?SW:Nn(+a);function d(f){var p,x,v,N=(f=ON(f)).length,b,C=!1,w,S=new Array(N),E=new Array(N);for(i==null&&(l=o(w=c())),p=0;p<=N;++p){if(!(p<N&&r(b=f[p],p,f))===C)if(C=!C)x=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=x;--v)l.point(S[v],E[v]);l.lineEnd(),l.areaEnd()}C&&(S[p]=+e(b,p,f),E[p]=+t(b,p,f),l.point(s?+s(b,p,f):S[p],a?+a(b,p,f):E[p]))}if(w)return l=null,w+""||null}function u(){return oP().defined(r).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Nn(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Nn(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:Nn(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Nn(+f),a=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Nn(+f),d):t},d.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Nn(+f),d):a},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(a)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:Nn(!!f),d):r},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}function Gge(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Wge(e){return e}function qge(){var e=Wge,t=Gge,a=null,s=Nn(0),r=Nn(xu),i=Nn(0);function o(l){var c,d=(l=ON(l)).length,u,f,p=0,x=new Array(d),v=new Array(d),N=+s.apply(this,arguments),b=Math.min(xu,Math.max(-xu,r.apply(this,arguments)-N)),C,w=Math.min(Math.abs(b)/d,i.apply(this,arguments)),S=w*(b<0?-1:1),E;for(c=0;c<d;++c)(E=v[x[c]=c]=+e(l[c],c,l))>0&&(p+=E);for(t!=null?x.sort(function(k,_){return t(v[k],v[_])}):a!=null&&x.sort(function(k,_){return a(l[k],l[_])}),c=0,f=p?(b-d*S)/p:0;c<d;++c,N=C)u=x[c],E=v[u],C=N+(E>0?E*f:0)+S,v[u]={data:l[u],index:c,value:E,startAngle:N,endAngle:C,padAngle:w};return v}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:Nn(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,a=null,o):t},o.sort=function(l){return arguments.length?(a=l,t=null,o):a},o.startAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Nn(+l),o):s},o.endAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Nn(+l),o):r},o.padAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Nn(+l),o):i},o}class _W{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function AW(e){return new _W(e,!0)}function TW(e){return new _W(e,!1)}const MN={draw(e,t){const a=Ji(t/wv);e.moveTo(a,0),e.arc(0,0,a,0,xu)}},EW={draw(e,t){const a=Ji(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},kW=Ji(1/3),Vge=kW*2,LW={draw(e,t){const a=Ji(t/Vge),s=a*kW;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},PW={draw(e,t){const a=Ji(t),s=-a/2;e.rect(s,s,a,a)}},Qge=.8908130915292852,DW=vv(wv/10)/vv(7*wv/10),Yge=vv(xu/10)*DW,Kge=-wW(xu/10)*DW,OW={draw(e,t){const a=Ji(t*Qge),s=Yge*a,r=Kge*a;e.moveTo(0,-a),e.lineTo(s,r);for(let i=1;i<5;++i){const o=xu*i/5,l=wW(o),c=vv(o);e.lineTo(c*a,-l*a),e.lineTo(l*s-c*r,c*s+l*r)}e.closePath()}},VS=Ji(3),MW={draw(e,t){const a=-Ji(t/(VS*3));e.moveTo(0,a*2),e.lineTo(-VS*a,-a),e.lineTo(VS*a,-a),e.closePath()}},ni=-.5,ai=Ji(3)/2,aE=1/Ji(12),Xge=(aE/2+1)*3,IW={draw(e,t){const a=Ji(t/Xge),s=a/2,r=a*aE,i=s,o=a*aE+a,l=-i,c=o;e.moveTo(s,r),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ni*s-ai*r,ai*s+ni*r),e.lineTo(ni*i-ai*o,ai*i+ni*o),e.lineTo(ni*l-ai*c,ai*l+ni*c),e.lineTo(ni*s+ai*r,ni*r-ai*s),e.lineTo(ni*i+ai*o,ni*o-ai*i),e.lineTo(ni*l+ai*c,ni*c-ai*l),e.closePath()}},$W=[MN,EW,LW,PW,OW,MW,IW];function lP(e,t){let a=null,s=iP(r);e=typeof e=="function"?e:Nn(e||MN),t=typeof t=="function"?t:Nn(t===void 0?64:+t);function r(){let i;if(a||(a=i=s()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),i)return a=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:Nn(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:Nn(+i),r):t},r.context=function(i){return arguments.length?(a=i??null,r):a},r}function Nv(){}function jv(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function RW(e){this._context=e}RW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zge(e){return new RW(e)}function zW(e){this._context=e}zW.prototype={areaStart:Nv,areaEnd:Nv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jge(e){return new zW(e)}function UW(e){this._context=e}UW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function epe(e){return new UW(e)}function c6(e,t,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function cP(e,t){this._context=e,this._k=(1-t)/6}cP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:c6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:c6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function a(s){return new cP(s,t)}return a.tension=function(s){return e(+s)},a})(0);function tpe(e,t,a){var s=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>l6){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>l6){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*d+e._y1*e._l23_2a-a*e._l12_2a)/u}e._context.bezierCurveTo(s,r,i,o,e._x2,e._y2)}function FW(e,t){this._context=e,this._alpha=t}FW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:tpe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const npe=(function e(t){function a(s){return t?new FW(s,t):new cP(s,0)}return a.alpha=function(s){return e(+s)},a})(.5);function BW(e){this._context=e}BW.prototype={areaStart:Nv,areaEnd:Nv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ape(e){return new BW(e)}function d6(e){return e<0?-1:1}function u6(e,t,a){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(a-e._y1)/(r||s<0&&-0),l=(i*r+o*s)/(s+r);return(d6(i)+d6(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function m6(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function QS(e,t,a){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,r+l*t,i-l,o-l*a,i,o)}function Cv(e){this._context=e}Cv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:QS(this,this._t0,m6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,QS(this,m6(this,a=u6(this,e,t)),a);break;default:QS(this,this._t0,a=u6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function HW(e){this._context=new GW(e)}(HW.prototype=Object.create(Cv.prototype)).point=function(e,t){Cv.prototype.point.call(this,t,e)};function GW(e){this._context=e}GW.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,s,r,i){this._context.bezierCurveTo(t,e,s,a,i,r)}};function sE(e){return new Cv(e)}function WW(e){return new HW(e)}function qW(e){this._context=e}qW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var s=f6(e),r=f6(t),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[o],t[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function f6(e){var t,a=e.length-1,s,r=new Array(a),i=new Array(a),o=new Array(a);for(r[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)s=r[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(r[a-1]=o[a-1]/i[a-1],t=a-2;t>=0;--t)r[t]=(o[t]-r[t+1])/i[t];for(i[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function VW(e){return new qW(e)}function IN(e,t){this._context=e,this._t=t}IN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function QW(e){return new IN(e,.5)}function YW(e){return new IN(e,0)}function KW(e){return new IN(e,1)}function ld(e,t){if((o=e.length)>1)for(var a=1,s,r,i=e[t[0]],o,l=i.length;a<o;++a)for(r=i,i=e[t[a]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function ku(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function spe(e,t){return e[t]}function rpe(e){const t=[];return t.key=e,t}function dP(){var e=Nn([]),t=ku,a=ld,s=spe;function r(i){var o=Array.from(e.apply(this,arguments),rpe),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(f,o[l].key,d,i)]).data=f;for(l=0,u=ON(t(o));l<c;++l)o[u[l]].index=l;return a(o,u),o}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Nn(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:Nn(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?ku:typeof i=="function"?i:Nn(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(a=i??ld,r):a},r}function XW(e,t){if((s=e.length)>0){for(var a,s,r=0,i=e[0].length,o;r<i;++r){for(o=a=0;a<s;++a)o+=e[a][r][1]||0;if(o)for(a=0;a<s;++a)e[a][r][1]/=o}ld(e,t)}}function ipe(e,t){if((c=e.length)>0)for(var a,s=0,r,i,o,l,c,d=e[t[0]].length;s<d;++s)for(o=l=0,a=0;a<c;++a)(i=(r=e[t[a]][s])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=l,r[0]=l+=i):(r[0]=0,r[1]=i)}function ZW(e,t){if((r=e.length)>0){for(var a=0,s=e[t[0]],r,i=s.length;a<i;++a){for(var o=0,l=0;o<r;++o)l+=e[o][a][1]||0;s[a][1]+=s[a][0]=-l/2}ld(e,t)}}function JW(e,t){if(!(!((o=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var a=0,s=1,r,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[s][1]||0,p=u[s-1][1]||0,x=(f-p)/2,v=0;v<l;++v){var N=e[t[v]],b=N[s][1]||0,C=N[s-1][1]||0;x+=b-C}c+=f,d+=x*f}r[s-1][1]+=r[s-1][0]=a,c&&(a-=d/c)}r[s-1][1]+=r[s-1][0]=a,ld(e,t)}}function eq(e){var t=e.map(ope);return ku(e).sort(function(a,s){return t[a]-t[s]})}function ope(e){for(var t=-1,a=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,a=t);return a}function tq(e){var t=e.map(nq);return ku(e).sort(function(a,s){return t[a]-t[s]})}function nq(e){for(var t=0,a=-1,s=e.length,r;++a<s;)(r=+e[a][1])&&(t+=r);return t}function lpe(e){return tq(e).reverse()}function cpe(e){var t=e.length,a,s,r=e.map(nq),i=eq(e),o=0,l=0,c=[],d=[];for(a=0;a<t;++a)s=i[a],o<l?(o+=r[s],c.push(s)):(l+=r[s],d.push(s));return d.reverse().concat(c)}function dpe(e){return ku(e).reverse()}const YS={appearance:eq,ascending:tq,descending:lpe,insideOut:cpe,none:ku,reverse:dpe},KS={expand:XW,diverging:ipe,none:ld,silhouette:ZW,wiggle:JW},aq=e=>{const{series:t,seriesOrder:a,defaultStrategy:s}=e,r=[],i={};return a.forEach(o=>{const{stack:l,stackOrder:c,stackOffset:d}=t[o];l===void 0?r.push({ids:[o],stackingOrder:YS.none,stackingOffset:KS.none}):i[l]===void 0?(i[l]=r.length,r.push({ids:[o],stackingOrder:YS[c??s?.stackOrder??"none"],stackingOffset:KS[d??s?.stackOffset??"diverging"]})):(r[i[l]].ids.push(o),c!==void 0&&(r[i[l]].stackingOrder=YS[c]),d!==void 0&&(r[i[l]].stackingOffset=KS[d]))}),r},upe=e=>e==null?"":e.toLocaleString(),mpe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=aq(e),i=t??[];a.forEach(l=>{const c=s[l].data;if(c!==void 0)c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return r.forEach(l=>{const{ids:c,stackingOffset:d,stackingOrder:u}=l,f=dP().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const v=s[p].dataKey;o[p]=qe({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??upe},s[p],{data:v?t.map(N=>{const b=N[v];return typeof b=="number"?b:null}):s[p].data,stackedData:f[x].map(([N,b])=>[N,b])})})}),{seriesOrder:a,stackingGroups:r,series:o}};function Vi(e,t){return typeof e=="function"?e(t):e}const fpe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])};function uP(e){return e.colorGetter?e.colorGetter:()=>e.color}const hpe=(e,t,a)=>{const s=e.layout==="vertical",r=s?t?.colorScale:a?.colorScale,i=s?a?.colorScale:t?.colorScale,o=s?t?.data:a?.data,l=uP(e);return i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d);return u===null?l({value:d,dataIndex:c}):u}:r&&o?c=>{if(c===void 0)return e.color;const d=o[c],u=d===null?l({value:d,dataIndex:c}):r(d);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},gpe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},ppe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Qn(){const e=Wr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function Ti(){const e=Qn();return Ft(e,pr)}function $N(){const e=Qn();return Ft(e,zue)}function mP(e){return IG.getTypes().has(e)}const xpe=(e,t,a,s,r,i,o)=>{const l=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=o[t]?.series??{},[d,u]=l?.({series:c,axis:a,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[f,p]=e;return[Math.min(d,f),Math.max(u,p)]},ype=(e,t,a,s,r)=>{const o=Object.keys(a).filter(mP).reduce((l,c)=>xpe(l,c,e,t,a,s,r),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Qc=(e,t)=>e===void 0?t:Math.PI*e/180,bpe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(mP).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function vpe(e,t,a){if(t==="rotation"){if(a.scaleType==="point"){const s=[Qc(a.startAngle,0),Qc(a.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/a.data.length),s}return[Qc(a.startAngle,0),Qc(a.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const wpe=.2,Npe=.1;function sq({drawingArea:e,formattedSeries:t,axis:a,seriesConfig:s,axisDirection:r}){if(a===void 0)return{axis:{},axisIds:[]};const i=bpe(r,s,t,a[0].id),o={};return a.forEach((l,c)=>{const d=l,u=vpe(e,r,d),[f,p]=ype(d,r,s,c,t),x=!d.ignoreTooltip&&i.has(d.id),v=d.data??[];if(qu(d)){const $=d.categoryGapRatio??wpe,z=d.barGapRatio??Npe;if(o[d.id]=qe({offset:0,categoryGapRatio:$,barGapRatio:z,triggerTooltip:x},d,{data:v,scale:jN(d.data,u).paddingInner($).paddingOuter($/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?_f(qe({values:d.data},d.colorMap)):ff(d.colorMap))}),XT(d.data)){const F=ZT(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??F}}if(Vu(d)&&(o[d.id]=qe({offset:0,triggerTooltip:x},d,{data:v,scale:OG(d.data,u),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?_f(qe({values:d.data},d.colorMap)):ff(d.colorMap))}),XT(d.data))){const $=ZT(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??$}if(!ume(d))return;const N=d.scaleType??"linear",b=d.domainLimit??"nice",C=[d.min??f,d.max??p];if(typeof b=="function"){const{min:$,max:z}=b(f,p);C[0]=$,C[1]=z}const w=PG(d,C,eP(Math.abs(u[1]-u[0]))),S=DG(w,u),E=CN(N,C,u),k=b==="nice"?E.nice(w):E,[_,A]=k.domain(),T=[d.min??_,d.max??A];o[d.id]=qe({offset:0,triggerTooltip:x},d,{data:v,scaleType:N,scale:k.domain(T),tickNumber:S,colorScale:d.colorMap&&ff(d.colorMap)})}),{axis:o,axisIds:a.map(({id:l})=>l)}}const rq=e=>e.polarAxis,iq=jt(rq,e=>e?.rotation),jpe=jt(rq,e=>e?.radius),Xu=jt(iq,pr,xa,Gr,(e,t,a,s)=>sq({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"rotation"}));jt(jpe,pr,xa,Gr,(e,t,a,s)=>sq({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"radius"}));const Cpe=jt(pr,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),Spe=e=>(t,a)=>Math.atan2(t-e.cx,e.cy-a);function RN(e){return(e%360+360)%360}const XS=2*Math.PI;function _pe(e){return(e%XS+XS)%XS}function h6(e,t){const{scale:a,data:s,reverse:r}=e;if(!bs(a))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=_pe(t-Math.min(...a.range())),o=a.bandwidth()===0?Math.floor((i+a.step()/2)/a.step())%s.length:Math.floor(i/a.step());return o<0||o>=s.length?-1:r?s.length-1-o:o}function xr(){const e=Qn(),{axis:t,axisIds:a}=Ft(e,Ks);return{xAxis:t,xAxisIds:a}}function yr(){const e=Qn(),{axis:t,axisIds:a}=Ft(e,Xs);return{yAxis:t,yAxisIds:a}}function Ape(e){const t=Qn(),{axis:a,axisIds:s}=Ft(t,Ks),r=s[0];return a[r]}function Tpe(e){const t=Qn(),{axis:a,axisIds:s}=Ft(t,Xs),r=s[0];return a[r]}function oq(){const e=Qn(),{axis:t,axisIds:a}=Ft(e,Xu);return{rotationAxis:t,rotationAxisIds:a}}function Epe(e){const t=Qn(),{axis:a,axisIds:s}=Ft(t,Xu),r=s[0];return a[r]}function Xf(e){if(bs(e))return a=>(e(a)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?a=>a===t[0]?e(a):NaN:a=>e(a)}function fP(){const e=Qn(),{axis:t,axisIds:a}=Ft(e,Rge)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:a}}function hP(){const e=Wr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function zN(){const e=Qn();return Ft(e,xa)}const kpe=jt(xa,(e,t)=>e[t]);Ia(xa,(e,t,a)=>{if(!a||Array.isArray(a)&&a.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(a))return e[t]?.series?.[a];const s=[];for(const r of a){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const Lpe=e=>{const t=Qn();return Ft(t,kpe,e)};function Ex(){return Lpe("line")}function Ppe(){return!1}function lq(e,t){return!e||!t?Ppe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function Dpe(){return!1}function cq(e,t){return!e||!t?Dpe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function gP(e,t,a){return e?.highlight==="series"&&t?.seriesId===a}function Ope(e,t,a){return gP(e,t,a)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===a}function dq(e,t,a){return e?.highlight==="item"&&t?.seriesId===a?t.dataIndex:null}function Mpe(e,t,a){return gP(e,t,a)||dq(e,t,a)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===a?t.dataIndex:null}const Ipe=e=>e.highlight,$pe=jt(xa,e=>{const t=new Map;return Object.keys(e).forEach(a=>{const s=e[a];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),tc=Ia(Ipe,rW,function(t,a){return t.isControlled||t.lastUpdate==="pointer"?t.item:a}),Nd=jt($pe,tc,function(t,a){if(!a)return null;const s=t.get(a.seriesId);return s===void 0?null:s}),Rpe=jt(Nd,tc,lq),zpe=jt(Nd,tc,cq),Upe=jt(Nd,tc,function(t,a,s){return lq(t,a)(s)});jt(Nd,tc,gP);jt(Nd,tc,Ope);jt(Nd,tc,Mpe);jt(Nd,tc,dq);const Fpe=jt(Nd,tc,function(t,a,s){return cq(t,a)(s)});function uq(e){const t=Qn(),a=Ft(t,Upe,e),s=Ft(t,Fpe,e);return{isHighlighted:a,isFaded:!a&&s}}function Bpe(){const e=Qn(),t=Ft(e,Rpe),a=Ft(e,zpe);return{isHighlighted:t,isFaded:a}}function Hpe(e,t){return Object.keys(e).flatMap(a=>{const s=t[a].legendGetter;return s===void 0?[]:s(e[a])})}function Gpe(){const e=zN(),t=Qn(),a=Ft(t,Gr);return{items:Hpe(e,a)}}function pP(){const e=$N();return h.useCallback(t=>`${e}-gradient-${t}`,[e])}function Wpe(){const e=$N();return h.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var ZS,g6;function qpe(){if(g6)return ZS;g6=1;var e=4,t=.001,a=1e-7,s=10,r=11,i=1/(r-1),o=typeof Float32Array=="function";function l(N,b){return 1-3*b+3*N}function c(N,b){return 3*b-6*N}function d(N){return 3*N}function u(N,b,C){return((l(b,C)*N+c(b,C))*N+d(b))*N}function f(N,b,C){return 3*l(b,C)*N*N+2*c(b,C)*N+d(b)}function p(N,b,C,w,S){var E,k,_=0;do k=b+(C-b)/2,E=u(k,w,S)-N,E>0?C=k:b=k;while(Math.abs(E)>a&&++_<s);return k}function x(N,b,C,w){for(var S=0;S<e;++S){var E=f(b,C,w);if(E===0)return b;var k=u(b,C,w)-N;b-=k/E}return b}function v(N){return N}return ZS=function(b,C,w,S){if(!(0<=b&&b<=1&&0<=w&&w<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===C&&w===S)return v;for(var E=o?new Float32Array(r):new Array(r),k=0;k<r;++k)E[k]=u(k*i,b,w);function _(A){for(var T=0,$=1,z=r-1;$!==z&&E[$]<=A;++$)T+=i;--$;var F=(A-E[$])/(E[$+1]-E[$]),P=T+F*i,M=f(P,b,w);return M>=t?x(A,P,b,w):M===0?P:p(A,T,T+i,b,w)}return function(T){return T===0?0:T===1?1:u(_(T),C,S)}},ZS}var Vpe=qpe();const Qpe=Xi(Vpe),UN=300,xP="cubic-bezier(0.66, 0, 0.34, 1)",Ype=Qpe(.66,0,.34,1);var Tf=0,$g=0,mg=0,mq=1e3,Sv,Rg,_v=0,Lu=0,FN=0,Np=typeof performance=="object"&&performance.now?performance:Date,fq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yP(){return Lu||(fq(Kpe),Lu=Np.now()+FN)}function Kpe(){Lu=0}function Av(){this._call=this._time=this._next=null}Av.prototype=hq.prototype={constructor:Av,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?yP():+a)+(t==null?0:+t),!this._next&&Rg!==this&&(Rg?Rg._next=this:Sv=this,Rg=this),this._call=e,this._time=a,rE()},stop:function(){this._call&&(this._call=null,this._time=1/0,rE())}};function hq(e,t,a){var s=new Av;return s.restart(e,t,a),s}function Xpe(){yP(),++Tf;for(var e=Sv,t;e;)(t=Lu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Tf}function p6(){Lu=(_v=Np.now())+FN,Tf=$g=0;try{Xpe()}finally{Tf=0,Jpe(),Lu=0}}function Zpe(){var e=Np.now(),t=e-_v;t>mq&&(FN-=t,_v=e)}function Jpe(){for(var e,t=Sv,a,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:Sv=a);Rg=e,rE(s)}function rE(e){if(!Tf){$g&&($g=clearTimeout($g));var t=e-Lu;t>24?(e<1/0&&($g=setTimeout(p6,e-Np.now()-FN)),mg&&(mg=clearInterval(mg))):(mg||(_v=Np.now(),mg=setInterval(Zpe,mq)),Tf=1,fq(p6))}}function exe(e,t,a){var s=new Av;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,a),s}class txe{elapsed=0;timer=null;constructor(t,a,s){this.duration=t,this.easingFn=a,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const a=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(a);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=yP()-this.elapsed;return this.timer=hq(a=>this.timerCallback(a),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),exe(()=>this.timerCallback(this.duration)),this}}function nxe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r+=1){const i=a[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function axe(e,{createInterpolator:t,applyProps:a,skip:s,initialProps:r=e}){const i=h.useRef(r),o=h.useRef(null),l=h.useRef(null),c=h.useRef(e);rs(()=>{c.current=e},[e]),rs(()=>{s&&(o.current?.finish(),o.current=null,l.current=null,i.current=e)},[e,s]);const d=h.useCallback(f=>{const p=i.current,x=t(p,e);o.current=new txe(UN,Ype,v=>{const N=x(v);i.current=N,a(f,N)})},[a,t,e]);return[h.useCallback(f=>{if(f===null){o.current?.stop();return}const p=l.current;if(p===f){if(nxe(c.current,e)){o.current?.resume();return}o.current?.stop()}p&&o.current?.stop(),l.current=f,(o.current||!s)&&d(f)},[d,e,s]),i.current]}function gq(e,{createInterpolator:t,transformProps:a,applyProps:s,skip:r,initialProps:i=e,ref:o}){const l=a??(f=>f),[c,d]=axe(e,{initialProps:i,createInterpolator:t,applyProps:(f,p)=>s(f,l(p)),skip:r}),u=a(r?e:d);return qe({},u,{ref:$o(c,o)})}function sxe(e){return gq({d:e.d},{createInterpolator:(t,a)=>{const s=PL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function rxe(e){return gq({d:e.d},{createInterpolator:(t,a)=>{const s=PL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function ixe(){return Wr().chartRootRef}const oxe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},lxe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:qe({},e)}}}}),pq={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${oxe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},cxe=pq;lxe(pq);const dxe=["localeText"],iE=h.createContext(null);function uxe(e){const{localeText:t}=e,a=xn(e,dxe),{localeText:s}=h.useContext(iE)??{localeText:void 0},r=_i({props:a,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:o}=r,l=h.useMemo(()=>qe({},cxe,o,s,t),[o,s,t]),c=h.useMemo(()=>({localeText:l}),[l]);return n.jsx(iE.Provider,{value:c,children:i})}const xq=()=>{const e=h.useContext(iE);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function mxe({bandWidth:e,numberOfGroups:t,gapRatio:a}){if(a===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*a),r=a*s;return{barWidth:s,offset:r}}function fxe(e,t,a){const s=e&&t>0,r=!e&&t<0,i=s||r;return a?!i:i}function hxe(e){const{verticalLayout:t,xAxisConfig:a,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:o,groupIndex:l}=e,c=t?a:s,d=(t?s.reverse:a.reverse)??!1,{barWidth:u,offset:f}=mxe({bandWidth:c.scale.bandwidth(),numberOfGroups:o,gapRatio:c.barGapRatio}),p=l*(u+f),x=a.scale,v=s.scale,N=c.data[i],b=r.data[i];if(b==null)return null;const w=r.stackedData[i].map(A=>t?v(A):x(A)),S=Math.round(Math.min(...w)),E=Math.round(Math.max(...w)),k=b===0?0:Math.max(r.minBarSize,E-S),_=fxe(t,b,d)?E-k:S;return{x:t?x(N)+p:_,y:t?_:v(N)+p,height:t?k:u,width:t?u:k}}const gxe=e=>{const{series:t,identifier:a,axesConfig:s,placement:r}=e;if(!a||a.dataIndex===void 0)return null;const i=t.bar?.series[a.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const o=hxe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:a.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(f=>f.ids.includes(i.id))});if(o==null)return null;const{x:l,y:c,width:d,height:u}=o;switch(r){case"right":return{x:l+d,y:c+u/2};case"bottom":return{x:l+d/2,y:c+u};case"left":return{x:l,y:c+u/2};default:return{x:l+d/2,y:c}}},pxe=(e,t,a)=>qe({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),xxe={seriesProcessor:mpe,colorProcessor:hpe,legendGetter:fpe,tooltipGetter:gpe,tooltipItemPositionGetter:gxe,axisTooltipGetter:ppe,xExtremumGetter:zge,yExtremumGetter:Uge,getSeriesWithDefaultValues:pxe},yxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.x!==null&&(p.x<i&&(i=p.x),p.x>o&&(o=p.x))}}return[i,o]},bxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.y!==null&&(p.y<i&&(i=p.y),p.y>o&&(o=p.y))}}return[i,o]},vxe=({series:e,seriesOrder:t},a)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const o=i?.datasetKeys,l=["x","y"].filter(d=>typeof o?.[d]!="string");if(i?.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${l.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=o?a?.map(d=>({x:d[o.x]??null,y:d[o.y]??null,z:o.z&&d[o.z],id:o.id&&d[o.id]}))??[]:i.data??[];return[r,qe({labelMarkType:"circle",markerSize:4},i,{preview:qe({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:t}),wxe=(e,t,a,s)=>{const r=s?.colorScale,i=a?.colorScale,o=t?.colorScale,l=uP(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const f=r(s?.data?.[c]);if(f!==null)return f}const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):r(d.z);return u===null?l({value:d,dataIndex:c}):u}:i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d.y);return u===null?l({value:d,dataIndex:c}):u}:o?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):o(d.x);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},Nxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},jxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Cxe=(e,t,a)=>qe({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Sxe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.scatter?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[a.dataIndex].x,o=r.data?.[a.dataIndex].y;return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},_xe={seriesProcessor:vxe,colorProcessor:wxe,legendGetter:Nxe,tooltipGetter:jxe,tooltipItemPositionGetter:Sxe,xExtremumGetter:yxe,yExtremumGetter:bxe,getSeriesWithDefaultValues:Cxe},Axe=e=>{const{axis:t}=e;return bv(t.data??[])};function Txe(e,t,a,s){return a.reduce((r,i,o)=>{if(t[o]===null)return r;const[l,c]=e(i);return s&&(!s({y:l,x:null},o)||!s({y:c,x:null},o))?r:[Math.min(l,c,r[0]),Math.max(l,c,r[1])]},[1/0,-1/0])}const Exe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const o=t[i].yAxisId;return o===a.id||s&&o===void 0}).reduce((i,o)=>{const{area:l,stackedData:c,data:d}=t[o],u=l!==void 0,f=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),p=u&&a.scaleType!=="log"&&typeof t[o].baseline!="string"?b=>b:b=>[b[1],b[1]],x=Txe(p,d,c,f),[v,N]=x;return[Math.min(v,i[0]),Math.max(N,i[1])]},[1/0,-1/0])};function kxe(e,t){const a={};return Object.keys(e).forEach(s=>{a[s]=qe({},e[s],{valueFormatter:e[s].valueFormatter??t})}),a}const Lxe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=aq(qe({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];a.forEach(l=>{const c=s[l].data;c!==void 0&&c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d})});const o={};return r.forEach(l=>{const{ids:c,stackingOrder:d,stackingOffset:u}=l,f=dP().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const v=s[p].dataKey;o[p]=qe({labelMarkType:"line"},s[p],{data:v?t.map(N=>{const b=N[v];return typeof b=="number"?b:null}):s[p].data,stackedData:f[x].map(([N,b])=>[N,b])})})}),{seriesOrder:a,stackingGroups:r,series:kxe(o,l=>l==null?"":l.toLocaleString())}},bP=(e,t,a)=>{const s=a?.colorScale,r=t?.colorScale,i=uP(e);return s?o=>{if(o===void 0)return e.color;const l=e.data[o],c=l===null?i({value:l,dataIndex:o}):s(l);return c===null?i({value:l,dataIndex:o}):c}:r?o=>{if(o===void 0)return e.color;const l=t.data?.[o],c=l===null?i({value:l,dataIndex:o}):r(l);return c===null?i({value:l,dataIndex:o}):c}:o=>{if(o===void 0)return e.color;const l=e.data[o];return i({value:l,dataIndex:o})}},Pxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Vi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},Dxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Vi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Oxe=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),Mxe=(e,t,a)=>qe({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Ixe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.line?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[a.dataIndex],o=r.data[a.dataIndex];return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},$xe={colorProcessor:bP,seriesProcessor:Lxe,legendGetter:Pxe,tooltipGetter:Dxe,tooltipItemPositionGetter:Ixe,axisTooltipGetter:Oxe,xExtremumGetter:Axe,yExtremumGetter:Exe,getSeriesWithDefaultValues:Mxe},Rxe=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,a)=>a-t;case"asc":return(t,a)=>t-a;default:return null}},zxe=e=>{const{seriesOrder:t,series:a}=e,s={};return t.forEach(r=>{const i=qge().startAngle(Qc(a[r].startAngle??0)).endAngle(Qc(a[r].endAngle??360)).padAngle(Qc(a[r].paddingAngle??0)).sortValues(Rxe(a[r].sortingValues??"none"))(a[r].data.map(o=>o.value));s[r]=qe({labelMarkType:"circle",valueFormatter:o=>o.value.toLocaleString()},a[r],{data:a[r].data.map((o,l)=>qe({},o,{id:o.id??`auto-generated-pie-id-${r}-${l}`},i[l])).map((o,l)=>qe({labelMarkType:"circle"},o,{formattedValue:a[r].valueFormatter?.(qe({},o,{label:Vi(o.label,"arc")}),{dataIndex:l})??o.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},Uxe=e=>t=>e.data[t].color,Fxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>(a[r].data.forEach((i,o)=>{const l=Vi(i.label,"legend");l!==void 0&&s.push({markType:i.labelMarkType??a[r].labelMarkType,id:i.id??o,seriesId:r,color:i.color,label:l,itemId:i.id??o})}),s),[])},Bxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=Vi(r.label,"tooltip"),o=qe({},r,{label:i}),l=t.valueFormatter(o,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:i,value:o,formattedValue:l,markType:r.labelMarkType??t.labelMarkType}},Hxe=(e,t,a)=>qe({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>qe({},s,{color:s.color??a[r%a.length]}))});function Tv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*t/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function Gxe(e,t){const{height:a,width:s}=t,{cx:r,cy:i}=e,o=Math.min(s,a)/2,l=Tv(r??"50%",s),c=Tv(i??"50%",a);return{cx:l,cy:c,availableRadius:o}}const Wxe=e=>{const{series:t,drawingArea:a,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:o,cy:l,availableRadius:c}=Gxe({cx:i.cx,cy:i.cy},a),{data:d,innerRadius:u=0,outerRadius:f}=i,p=Math.max(0,Tv(u??0,c)),x=Math.max(0,Tv(f??c,c)),v=d[s.dataIndex];if(!v)return null;const N=[[p,v.startAngle],[p,v.endAngle],[x,v.startAngle],[x,v.endAngle]].map(([E,k])=>({x:o+E*Math.sin(k),y:l-E*Math.cos(k)})),[b,C]=bv(N.map(E=>E.x)),[w,S]=bv(N.map(E=>E.y));switch(r){case"bottom":return{x:(C+b)/2,y:S};case"left":return{x:b,y:(S+w)/2};case"right":return{x:C,y:(S+w)/2};default:return{x:(C+b)/2,y:w}}},qxe={colorProcessor:Uxe,seriesProcessor:zxe,legendGetter:Fxe,tooltipGetter:Bxe,tooltipItemPositionGetter:Wxe,getSeriesWithDefaultValues:Hxe},Vxe={bar:xxe,scatter:_xe,line:$xe,pie:qxe},Qxe=[_x,wx,Yf,Ax];function Yxe(e){const{children:t,plugins:a=Qxe,pluginParams:s={},seriesConfig:r=Vxe}=e,{contextValue:i}=rme(a,s,r);return n.jsx(V9.Provider,{value:i,children:t})}const Wr=()=>{const e=h.useContext(V9);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function Kxe(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const BN=(e,t)=>{const{instance:a}=Wr(),s=h.useRef(!1),r=gs(()=>{s.current=!0,a.setItemInteraction(e,{interaction:"pointer"}),a.setHighlight(e)}),i=gs(()=>{s.current=!1,a.removeItemInteraction(e),a.clearHighlight()});return h.useEffect(()=>()=>{s.current&&i()},[i]),h.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:Kxe}),[t,r,i])};function yq(e){return e.replace(" ","_")}const bq=Aa("MuiAppearingMask",["animate"]),Xxe=un("rect")({animationName:"animate-width",animationTimingFunction:xP,animationDuration:"0s",[`&.${bq.animate}`]:{animationDuration:`${UN}ms`},"@keyframes animate-width":{from:{width:0}}});function vq(e){const t=Ti(),a=$N(),s=yq(`${a}-${e.id}`);return n.jsxs(h.Fragment,{children:[n.jsx("clipPath",{id:s,children:n.jsx(Xxe,{className:e.skipAnimation?"":bq.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),n.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const Zxe=["skipAnimation","ownerState"];function Jxe(e){const{skipAnimation:t,ownerState:a}=e,s=xn(e,Zxe),r=sxe(e);return n.jsx(vq,{skipAnimation:t,id:`${a.id}-area-clip`,children:n.jsx("path",qe({fill:a.gradientId?`url(#${a.gradientId})`:a.color,filter:a.isHighlighted?"brightness(140%)":a.gradientId?void 0:"brightness(120%)",opacity:a.isFaded?.3:1,stroke:"none","data-series":a.id,"data-highlighted":a.isHighlighted||void 0,"data-faded":a.isFaded||void 0},s,r))})}const e0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function t0e(e){return Va("MuiAreaElement",e)}const n0e=Aa("MuiAreaElement",["root","highlighted","faded","series"]),a0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return qa(i,t0e,t)};function s0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=xn(e,e0e),d=BN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=uq({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=a0e(p),v=i?.area??Jxe,N=Il({elementType:v,externalSlotProps:o?.area,additionalProps:qe({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(v,qe({},c,N))}function vP(e){const t=Qn(),a=Ft(t,bue);return e||a}function wP(){const e=Qn();return Ft(e,VG)}function wq(e){switch(e){case"catmullRom":return npe.alpha(.5);case"linear":return Tx;case"monotoneX":return sE;case"monotoneY":return WW;case"natural":return VW;case"step":return QW;case"stepBefore":return YW;case"stepAfter":return KW;case"bumpY":return TW;case"bumpX":return AW;default:return sE}}function r0e(e,t){const a=Ex(),s=xr().xAxisIds[0],r=yr().yAxisIds[0],i=pP();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(let p=f.length-1;p>=0;p-=1){const x=f[p],{xAxisId:v=s,yAxisId:N=r,stackedData:b,data:C,connectNulls:w,baseline:S,curve:E,strictStepCurve:k,area:_}=l[x];if(!_||!(v in e)||!(N in t))continue;const A=e[v].scale,T=Xf(A),$=t[N].scale,z=e[v].data,F=t[N].colorScale&&i(N)||e[v].colorScale&&i(v)||void 0,P=E?.includes("step")&&!k&&bs(A),M=z?.flatMap((X,q)=>{const ne=C[q]==null;if(P){const oe=[{x:X,y:b[q],nullData:ne,isExtension:!1}];return!ne&&(q===0||C[q-1]==null)&&oe.unshift({x:(A(X)??0)-(A.step()-A.bandwidth())/2,y:b[q],nullData:ne,isExtension:!0}),!ne&&(q===C.length-1||C[q+1]==null)&&oe.push({x:(A(X)??0)+(A.step()+A.bandwidth())/2,y:b[q],nullData:ne,isExtension:!0}),oe}return{x:X,y:b[q],nullData:ne}})??[],G=w?M.filter(X=>!X.nullData):M,V=Ig().x(X=>X.isExtension?X.x:T(X.x)).defined(X=>w||!X.nullData||!!X.isExtension).y0(X=>{if(typeof S=="number")return $(S);if(S==="max")return $.range()[1];if(S==="min")return $.range()[0];const q=X.y&&$(X.y[0]);return Number.isNaN(q)?$.range()[0]:q}).y1(X=>X.y&&$(X.y[1])).curve(wq(E))(G)||"";d.push({area:l[x].area,color:l[x].color,gradientId:F,d:V,seriesId:x})}}return d},[a,s,r,e,t,i])}const i0e=["slots","slotProps","onItemClick","skipAnimation"],o0e=un("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${n0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),l0e=()=>{const{xAxis:e}=xr(),{yAxis:t}=yr();return r0e(e,t)};function c0e(e){const{slots:t,slotProps:a,onItemClick:s,skipAnimation:r}=e,i=xn(e,i0e),o=wP(),l=vP(o||r),c=l0e();return n.jsx(o0e,qe({},i,{children:c.map(({d,seriesId:u,color:f,area:p,gradientId:x})=>!!p&&n.jsx(s0e,{id:u,d,color:f,gradientId:x,slots:t,slotProps:a,onClick:s&&(v=>s(v,{type:"line",seriesId:u})),skipAnimation:l},u))}))}const d0e=["skipAnimation","ownerState"],u0e=h.forwardRef(function(t,a){const{skipAnimation:s,ownerState:r}=t,i=xn(t,d0e),o=rxe(qe({},t,{ref:a}));return n.jsx(vq,{skipAnimation:s,id:`${r.id}-line-clip`,children:n.jsx("path",qe({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,o))})}),m0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function f0e(e){return Va("MuiLineElement",e)}const h0e=Aa("MuiLineElement",["root","highlighted","faded","series"]),g0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return qa(i,f0e,t)};function p0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=xn(e,m0e),d=BN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=uq({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=g0e(p),v=i?.line??u0e,N=Il({elementType:v,externalSlotProps:o?.line,additionalProps:qe({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(v,qe({},c,N))}function x0e(e,t){const a=Ex(),s=xr().xAxisIds[0],r=yr().yAxisIds[0],i=pP();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(const p of f){const{xAxisId:x=s,yAxisId:v=r,stackedData:N,data:b,connectNulls:C,curve:w,strictStepCurve:S}=l[p];if(!(x in e)||!(v in t))continue;const E=e[x].scale,k=Xf(E),_=t[v].scale,A=e[x].data,T=t[v].colorScale&&i(v)||e[x].colorScale&&i(x)||void 0,$=w?.includes("step")&&!S&&bs(E),z=A?.flatMap((G,Q)=>{const V=b[Q]==null;if($){const X=[{x:G,y:N[Q],nullData:V,isExtension:!1}];return!V&&(Q===0||b[Q-1]==null)&&X.unshift({x:(E(G)??0)-(E.step()-E.bandwidth())/2,y:N[Q],nullData:V,isExtension:!0}),!V&&(Q===b.length-1||b[Q+1]==null)&&X.push({x:(E(G)??0)+(E.step()+E.bandwidth())/2,y:N[Q],nullData:V,isExtension:!0}),X}return{x:G,y:N[Q],nullData:V}})??[],F=C?z.filter(G=>!G.nullData):z,M=oP().x(G=>G.isExtension?G.x:k(G.x)).defined(G=>C||!G.nullData||!!G.isExtension).y(G=>_(G.y[1])).curve(wq(w))(F)||"";d.push({color:l[p].color,gradientId:T,d:M,seriesId:p})}}return d},[a,s,r,e,t,i])}const y0e=["slots","slotProps","skipAnimation","onItemClick"],b0e=un("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${h0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),v0e=()=>{const{xAxis:e}=xr(),{yAxis:t}=yr();return x0e(e,t)};function w0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=xn(e,y0e),o=wP(),l=vP(o||s),c=v0e();return n.jsx(b0e,qe({},i,{children:c.map(({d,seriesId:u,color:f,gradientId:p})=>n.jsx(p0e,{id:u,d,color:f,gradientId:p,skipAnimation:l,slots:t,slotProps:a,onClick:r&&(x=>r(x,{type:"line",seriesId:u}))},u))}))}function N0e(e){return Va("MuiMarkElement",e)}const Nq=Aa("MuiMarkElement",["root","highlighted","faded","animate","series"]),jq=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r,skipAnimation:i}=e,o={root:["root",`series-${a}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return qa(o,N0e,t)},j0e=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],C0e=un("circle")({[`&.${Nq.animate}`]:{transitionDuration:`${UN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:xP}});function S0e(e){const{x:t,y:a,id:s,classes:r,color:i,dataIndex:o,onClick:l,skipAnimation:c,isFaded:d=!1,isHighlighted:u=!1}=e,f=xn(e,j0e),p=Ho(),x=BN({type:"line",seriesId:s,dataIndex:o}),N=jq({id:s,classes:r,isHighlighted:u,isFaded:d,skipAnimation:c});return n.jsx(C0e,qe({},f,{cx:t,cy:a,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:N.root,onClick:l,cursor:l?"pointer":"unset"},x,{"data-highlighted":u||void 0,"data-faded":d||void 0}))}function Cq(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const _0e=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],A0e=un("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${Nq.animate}`]:{transitionDuration:`${UN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:xP}}));function T0e(e){const{x:t,y:a,id:s,classes:r,color:i,shape:o,dataIndex:l,onClick:c,skipAnimation:d,isFaded:u=!1,isHighlighted:f=!1}=e,p=xn(e,_0e),x=BN({type:"line",seriesId:s,dataIndex:l}),v={id:s,classes:r,isHighlighted:f,isFaded:u,color:i,skipAnimation:d},N=jq(v);return n.jsx(A0e,qe({},p,{style:{transform:`translate(${t}px, ${a}px)`,transformOrigin:`${t}px ${a}px`},ownerState:v,className:N.root,d:lP($W[Cq(o)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":f||void 0,"data-faded":u||void 0}))}const E0e=["slots","slotProps","skipAnimation","onItemClick"];function k0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=xn(e,E0e),o=wP(),l=vP(o||s),c=Ex(),{xAxis:d,xAxisIds:u}=xr(),{yAxis:f,yAxisIds:p}=yr(),x=$N(),{instance:v,store:N}=Wr(),{isFaded:b,isHighlighted:C}=Bpe(),w=Ft(N,gW),S=h.useMemo(()=>{const T={};for(const{dataIndex:$,axisId:z}of w)T[z]===void 0?T[z]=new Set([$]):T[z].add($);return T},[w]);if(c===void 0)return null;const{series:E,stackingGroups:k}=c,_=u[0],A=p[0];return n.jsx("g",qe({},i,{children:k.flatMap(({ids:T})=>T.map($=>{const{xAxisId:z=_,yAxisId:F=A,stackedData:P,data:M,showMark:G=!0,shape:Q="circle"}=E[$];if(G===!1)return null;const V=Xf(d[z].scale),X=f[F].scale,q=d[z].data;if(q===void 0)throw new Error(`MUI X Charts: ${z===dN?"The first `xAxis`":`The x-axis with id "${z}"`} should have data property to be able to display a line plot.`);const ne=yq(`${x}-${$}-line-clip`),oe=bP(E[$],d[z],f[F]),K=t?.mark??(Q==="circle"?S0e:T0e),R=C({seriesId:$}),ye=!R&&b({seriesId:$});return n.jsx("g",{clipPath:`url(#${ne})`,"data-series":$,children:q?.map((pe,Ne)=>{const Se=M[Ne]==null?null:P[Ne][1];return{x:V(pe),y:Se===null?null:X(Se),position:pe,value:Se,index:Ne}}).filter(({x:pe,y:Ne,index:Se,position:Oe,value:ke})=>ke===null||Ne===null||!v.isPointInside(pe,Ne)?!1:G===!0?!0:G({x:pe,y:Ne,index:Se,position:Oe,value:ke})).map(({x:pe,y:Ne,index:Se})=>n.jsx(K,qe({id:$,dataIndex:Se,shape:Q,color:oe(Se),x:pe,y:Ne,skipAnimation:l,onClick:r&&(Oe=>r(Oe,{type:"line",seriesId:$,dataIndex:Se})),isHighlighted:S[z]?.has(Se)||R,isFaded:ye},a?.mark),`${$}-${Se}`))},$)}))}))}function HN(){const[e,t]=h.useState(typeof window<"u"||!1);return h.useEffect(()=>{t(!0)},[]),e}function NP(e){return typeof e=="number"&&!Number.isFinite(e)}const oE={start:0,extremities:0,end:1,middle:.5};function JS(e,t,a){return e(t)-(e.step()-e.bandwidth())/2+oE[a]*e.step()}function L0e(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,isInside:l}=e;if(bs(t)){const p=t.domain(),x=o??"middle";if(t.bandwidth()>0){const N=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,b=t.range()[0]>t.range()[1],C=N.findIndex(S=>l(JS(t,S,b?"start":"end"))),w=N.findLastIndex(S=>l(JS(t,S,b?"end":"start")));return[...N.slice(C,w+1).map(S=>{const E=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:E})??E,offset:JS(t,S,i),labelOffset:x==="tick"?0:t.step()*(oE[x]-oE[i])}}),...i==="extremities"&&w===p.length-1&&l(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(N=>{const b=`${N}`;return{value:N,formattedValue:s?.(N,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:b})??b,offset:t(N),labelOffset:0}})}if(t.domain().some(NP))return[];const d=o,u=typeof r=="object"?r:P0e(t,a),f=[];for(let p=0;p<u.length;p+=1){const x=u[p],v=t(x);if(l(v)){const N=t.tickFormat(a)(x);f.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:N})??N,offset:v,labelOffset:d==="middle"?t(u[p-1]??0)-(v+t(u[p-1]??0))/2:0})}}return f}function P0e(e,t){const a=e.domain();return a[0]===a[1]?[a[0]]:e.ticks(t)}function GN(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,direction:l}=e,{instance:c}=Wr(),d=l==="x"?c.isXInside:c.isYInside;return h.useMemo(()=>L0e({scale:t,tickNumber:a,tickPlacement:i,tickInterval:r,tickLabelPlacement:o,valueFormatter:s,isInside:d}),[t,a,i,r,o,s,d])}function D0e(e=!1){const[t,a]=h.useState(!1);return rs(()=>{e||a(!0)},[e]),h.useEffect(()=>{e&&a(!0)},[e]),t}const Sq=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function O0e(e){return e.length}function M0e(e){const t=Sq.segment(e);let a=0;for(const s of t)a+=1;return a}const I0e=Sq?M0e:O0e;function $0e(e){return e*(Math.PI/180)}const _q=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function R0e(e,t){return e.slice(0,t)}function z0e(e,t){const a=_q.segment(e);let s="",r=0;for(const i of a)if(s+=i.segment,r+=1,r>=t)break;return s}const U0e=_q?z0e:R0e,x6="";function Aq(e,t){const{width:a,height:s,measureText:r}=t,i=$0e(t.angle),o=r(e),l=Math.abs(o.width*Math.cos(i))+Math.abs(o.height*Math.sin(i)),c=Math.abs(o.width*Math.sin(i))+Math.abs(o.height*Math.cos(i));return l<=a&&c<=s}function Tq(e,t){if(t(e))return e;let a=e,s=1,r=1/2;const i=I0e(e);let o=i,l=i,c=null;do{if(l=o,o=Math.floor(i*r),o===0)break;a=U0e(e,o).trim();const d=t(a+x6);s+=1,d?(c=a,r+=1/2**s):r-=1/2**s}while(Math.abs(o-l)!==1);return c?c+x6:""}function Eq(){return typeof window>"u"}const Yc=new Map,kq=2e3,F0e=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function jP(e,t){return F0e.has(e)&&t===+t?`${t}px`:t}const B0e=/([A-Z])/g;function CP(e){return String(e).replace(B0e,t=>`-${t.toLowerCase()}`)}function Lq(e){let t="";for(const a in e)if(Object.hasOwn(e,a)){const s=a,r=e[s];if(r===void 0)continue;t+=`${CP(s)}:${jP(s,r)};`}return t}const kx=(e,t={})=>{if(e==null||Eq())return{width:0,height:0};const a=String(e),s=Lq(t),r=`${a}-${s}`,i=Yc.get(r);if(i)return i;try{const o=Dq(),l=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(d=>(l.style[CP(d)]=jP(d,t[d]),d)),l.textContent=a,o.replaceChildren(l);const c=Pq(l);return Yc.set(r,c),Yc.size+1>kq&&Yc.clear(),c}catch{return{width:0,height:0}}};function H0e(e,t={}){if(Eq())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const a=new Map,s=[],r=Lq(t);for(const c of e){const d=`${c}-${r}`,u=Yc.get(d);u?a.set(c,u):s.push(c)}const i=Dq(),o=qe({},t);Object.keys(o).map(c=>(i.style[CP(c)]=jP(c,o[c]),c));const l=[];for(const c of s){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.textContent=`${c}`,l.push(d)}i.replaceChildren(...l);for(let c=0;c<s.length;c+=1){const d=s[c],u=i.children[c],f=Pq(u),p=`${d}-${r}`;Yc.set(p,f),a.set(d,f)}return Yc.size+1>kq&&Yc.clear(),a}function Pq(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let sr=null;function Dq(){return sr===null&&(sr=document.createElementNS("http://www.w3.org/2000/svg","svg"),sr.setAttribute("aria-hidden","true"),sr.style.position="absolute",sr.style.top="-20000px",sr.style.left="0",sr.style.padding="0",sr.style.margin="0",sr.style.border="none",sr.style.pointerEvents="none",sr.style.visibility="hidden",sr.style.contain="strict",document.body.appendChild(sr)),sr}function G0e(e,t,a,s,r){const i=new Map,o=RN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>90&&o<270&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.left+t.width+t.right-d.offset-d.labelOffset)*c),f=p=>Aq(p,{width:u,height:a,angle:o,measureText:x=>kx(x,r)});i.set(d,Tq(d.formattedValue.toString(),f))}return i}const y6=5;function W0e(e,t,a=0){const s=Math.min(Math.abs(a)%180,Math.abs(Math.abs(a)%180-180)%180);if(s<y6)return e;if(s>90-y6)return t;const r=Qc(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function q0e(e,{tickLabelStyle:t,tickLabelInterval:a,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:o}){if(typeof a=="function")return new Set(e.filter((f,p)=>a(f.value,p)));let l=0;const c=r?-1:1,d=e.filter(f=>{const{offset:p,labelOffset:x,formattedValue:v}=f;if(v==="")return!1;const N=p+x;return o(N)}),u=Q0e(d,t);return new Set(d.filter((f,p)=>{const{offset:x,labelOffset:v}=f,N=x+v;if(p>0&&c*N<c*(l+s))return!1;const{width:b,height:C}=i?V0e(u,f):{width:0,height:0},w=W0e(b,C,t?.angle),S=N-c*w/2;return p>0&&c*S<c*(l+s)?!1:(l=N+c*w/2,!0)}))}function V0e(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let a=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(a=Math.max(a,i.width),s+=i.height)}return{width:a,height:s}}function Q0e(e,t){const a=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>a.add(r));return H0e(a,t)}function Oq(e){return Va("MuiChartsAxis",e)}const zy=Aa("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),Mq=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionX",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return qa(r,Oq,t)},lE=3,Y0e=4,Iq={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function K0e({style:e,needsComputation:t,text:a}){return a.split(`
`).map(s=>qe({text:s},t?kx(s,e):{width:0,height:0}))}const X0e=["x","y","style","text","ownerState"],Z0e=["angle","textAnchor","dominantBaseline"];function WN(e){const{x:t,y:a,style:s,text:r}=e,i=xn(e,X0e),o=s??{},{angle:l,textAnchor:c,dominantBaseline:d}=o,u=xn(o,Z0e),f=HN(),p=h.useMemo(()=>K0e({style:u,needsComputation:f&&r.includes(`
`),text:r}),[u,r,f]);let x;switch(d){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return n.jsx("text",qe({},i,{transform:l?`rotate(${l}, ${t}, ${a})`:void 0,x:t,y:a,textAnchor:c,dominantBaseline:d,style:u,children:p.map((v,N)=>n.jsx("tspan",{x:t,dy:`${N===0?x:p[0].height}px`,dominantBaseline:d,children:v.text},N))}))}function $q(e){const t=RN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function Rq(e){const t=RN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function zq(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const J0e=["scale","tickNumber","reverse"];function Uq(e){const{xAxis:t,xAxisIds:a}=xr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i,reverse:o}=s,l=xn(s,J0e),c=_i({props:qe({},l,e),name:"MuiChartsXAxis"}),d=qe({},Iq,c),{position:u,tickLabelStyle:f,slots:p,slotProps:x}=d,v=Ho(),N=fx(),b=Mq(d),C=u==="bottom"?1:-1,w=p?.axisTick??"line",S=p?.axisTickLabel??WN,E=$q((u==="bottom"?0:180)-(f?.angle??0)),k=Rq((u==="bottom"?0:180)-(f?.angle??0)),_=Il({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:qe({},v.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:N?zq(E):E,dominantBaseline:k},f)},className:b.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:d,tickNumber:i,positionSign:C,classes:b,Tick:w,TickLabel:S,axisTickLabelProps:_,reverse:o}}function eye(e){const{axisLabelHeight:t}=e,{xScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d,reverse:u}=Uq(e),f=fx(),p=D0e(),{disableTicks:x,tickSize:v,valueFormatter:N,slotProps:b,tickInterval:C,tickLabelInterval:w,tickPlacement:S,tickLabelPlacement:E,tickLabelMinGap:k,height:_}=s,A=Ti(),{instance:T}=Wr(),$=HN(),z=x?4:v,F=GN({scale:a,tickNumber:r,valueFormatter:N,tickInterval:C,tickPlacement:S,tickLabelPlacement:E,direction:"x"}),P=q0e(F,{tickLabelStyle:d.style,tickLabelInterval:w,tickLabelMinGap:k,reverse:u,isMounted:p,isXInside:T.isXInside}),M=Math.max(0,_-(t>0?t+Y0e:0)-z-lE),G=$?G0e(P,A,M,f,d.style):new Map(Array.from(P).map(Q=>[Q,Q.formattedValue]));return n.jsx(h.Fragment,{children:F.map((Q,V)=>{const{offset:X,labelOffset:q}=Q,ne=q??0,oe=i*(z+lE),K=T.isXInside(X),R=G.get(Q),ye=P.has(Q);return n.jsxs("g",{transform:`translate(${X}, 0)`,className:o.tickContainer,children:[!x&&K&&n.jsx(l,qe({y2:i*z,className:o.tick},b?.axisTick)),R!==void 0&&ye&&n.jsx(c,qe({x:ne,y:oe},d,{text:R}))]},V)})})}const fg={start:0,extremities:0,end:1,middle:.5,tick:0};function Fq(e){const{scale:t,tickInterval:a,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return h.useMemo(()=>{const o=t.domain(),l=typeof a=="function"&&o.filter(a)||typeof a=="object"&&a||o;if(t.bandwidth()>0){const c=b6(l,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return b6(l,i,r,s,t)},[t,a,i,r,s])}function b6(e,t,a,s,r){const i=[],o=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let d=0;d<e.length;d+=1){const u=e[d],f=t[c].getValue(u,d),p=i[i.length-1];if(p?.value!==f||p?.groupIndex!==c){l=1;const v=bs(r)?r(u)-(r.step()-r.bandwidth())/2+fg[a]*r.step():r(u),N=r.step()*l*(fg[s]-fg[a]);i.push({value:f,formattedValue:`${f}`,offset:v,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:N}),o.has(d)||o.set(d,new Set);const b=o.get(d);for(const C of b.values())i[C].ignoreTick=!0;b.add(i.length-1)}else{l+=1;const v=r.step()*l*(fg[s]-fg[a]);p.labelOffset=v}}return i}const v6={tickSize:6},tye=(e,t,a)=>{const s=e[t]??{},r=a??v6.tickSize,i=r*t*2+r;return qe({},v6,s,{tickSize:s.tickSize??i})};function nye(e){const{xScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=Uq(e);if(!bs(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=a,N=a.groups,{instance:b}=Wr(),C=Fq({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:N});return n.jsx(h.Fragment,{children:C.map((w,S)=>{const{offset:E,labelOffset:k}=w,_=k??0,A=b.isXInside(E),T=w.formattedValue,$=w.ignoreTick??!1,z=w.groupIndex??0,F=tye(N,z,d),P=s*F.tickSize,M=s*(F.tickSize+lE);return n.jsxs("g",{transform:`translate(${E}, 0)`,className:r.tickContainer,"data-group-index":z,children:[!c&&!$&&A&&n.jsx(i,qe({y2:P,className:r.tick},f?.axisTick)),T!==void 0&&n.jsx(o,qe({x:_,y:M},l,{style:qe({},l.style,F.tickLabelStyle),text:T}))]},S)})})}const Bq=un("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${zy.tickLabel}`]:qe({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${zy.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${zy.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${zy.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),aye=["axis"],sye=["scale","tickNumber","reverse"],rye=un(Bq,{name:"MuiChartsXAxis",slot:"Root"})({});function iye(e){let{axis:t}=e,a=xn(e,aye);const{scale:s}=t,r=xn(t,sye),i=_i({props:qe({},r,a),name:"MuiChartsXAxis"}),o=qe({},Iq,i),{position:l,labelStyle:c,offset:d,slots:u,slotProps:f,sx:p,disableLine:x,label:v,height:N}=o,b=Ho(),C=Mq(o),{left:w,top:S,width:E,height:k}=Ti(),_=l==="bottom"?1:-1,A=u?.axisLine??"line",T=u?.axisLabel??WN,$=Il({elementType:T,externalSlotProps:f?.axisLabel,additionalProps:{style:qe({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:l==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(l==="none")return null;const z=v?kx(v,$.style).height:0,F=s.domain(),M=bs(s)?F.length===0:F.some(NP);let G=null;M||(G="groups"in t&&Array.isArray(t.groups)?n.jsx(nye,qe({},a)):n.jsx(eye,qe({},a,{axisLabelHeight:z})));const Q={x:w+E/2,y:_*N};return n.jsxs(rye,{transform:`translate(0, ${l==="bottom"?S+k+d:S-d})`,className:C.root,sx:p,children:[!x&&n.jsx(A,qe({x1:w,x2:w+E,className:C.line},f?.axisLine)),G,v&&n.jsx("g",{className:C.label,children:n.jsx(T,qe({},Q,$,{text:v}))})]})}function oye(e){const{xAxis:t,xAxisIds:a}=xr(),s=t[e.axisId??a[0]];return s?n.jsx(iye,qe({},e,{axis:s})):(`${e.axisId}`,null)}function lye(e,t,a,s,r){const i=new Map,o=RN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>180&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.top+t.height+t.bottom-d.offset-d.labelOffset)*c),f=p=>Aq(p,{width:a,height:u,angle:o,measureText:x=>kx(x,r)});i.set(d,Tq(d.formattedValue.toString(),f))}return i}const Hq=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionY",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return qa(r,Oq,t)},cE=2,cye=2,Gq={disableLine:!1,disableTicks:!1,tickSize:6},dye=["scale","tickNumber","reverse"];function Wq(e){const{yAxis:t,yAxisIds:a}=yr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i}=s,o=xn(s,dye),l=_i({props:qe({},o,e),name:"MuiChartsYAxis"}),c=qe({},Gq,l),{position:d,tickLabelStyle:u,slots:f,slotProps:p}=c,x=Ho(),v=fx(),N=Hq(c),b=d==="right"?1:-1,C=typeof u?.fontSize=="number"?u.fontSize:12,w=f?.axisTick??"line",S=f?.axisTickLabel??WN,E=$q((d==="right"?-90:90)-(u?.angle??0)),k=Rq((d==="right"?-90:90)-(u?.angle??0)),_=Il({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:qe({},x.typography.caption,{fontSize:C,textAnchor:v?zq(E):E,dominantBaseline:k},u)},className:N.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:b,classes:N,Tick:w,TickLabel:S,axisTickLabelProps:_}}function uye(e){const{axisLabelHeight:t}=e,{yScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d}=Wq(e),u=fx(),{disableTicks:f,tickSize:p,valueFormatter:x,slotProps:v,tickPlacement:N,tickLabelPlacement:b,tickInterval:C,tickLabelInterval:w,width:S}=s,E=Ti(),{instance:k}=Wr(),_=HN(),A=f?4:p,T=GN({scale:a,tickNumber:r,valueFormatter:x,tickPlacement:N,tickLabelPlacement:b,tickInterval:C,direction:"y"}),$=Math.max(0,S-(t>0?t+cye:0)-A-cE),z=_?lye(T,E,$,u,d.style):new Map(Array.from(T).map(F=>[F,F.formattedValue]));return n.jsx(h.Fragment,{children:T.map((F,P)=>{const{offset:M,labelOffset:G,value:Q}=F,V=i*(A+cE),X=G,q=typeof w=="function"&&!w?.(Q,P),ne=k.isYInside(M),oe=z.get(F);return ne?n.jsxs("g",{transform:`translate(0, ${M})`,className:o.tickContainer,children:[!f&&n.jsx(l,qe({x2:i*A,className:o.tick},v?.axisTick)),oe!==void 0&&!q&&n.jsx(c,qe({x:V,y:X,text:oe},d))]},P):null})})}const w6={tickSize:6},mye=(e,t,a)=>{const s=e[t]??{},r=a??w6.tickSize,i=r*t*2+r;return qe({},w6,s,{tickSize:s.tickSize??i})};function fye(e){const{yScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=Wq(e);if(!bs(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=a,N=a.groups,{instance:b}=Wr(),C=Fq({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:N});return n.jsx(h.Fragment,{children:C.map((w,S)=>{const{offset:E,labelOffset:k}=w,_=k??0,A=b.isYInside(E),T=w.formattedValue,$=w.ignoreTick??!1,z=w.groupIndex??0,F=mye(N,z,d),P=s*F.tickSize,M=s*(F.tickSize+cE);return n.jsxs("g",{transform:`translate(0, ${E})`,className:r.tickContainer,"data-group-index":z,children:[!c&&!$&&A&&n.jsx(i,qe({x2:P,className:r.tick},f?.axisTick)),T!==void 0&&n.jsx(o,qe({x:M,y:_},l,{style:qe({},l.style,F.tickLabelStyle),text:T}))]},S)})})}const hye=["axis"],gye=["scale","tickNumber","reverse"],pye=un(Bq,{name:"MuiChartsYAxis",slot:"Root"})({});function xye(e){let{axis:t}=e,a=xn(e,hye);const{scale:s}=t,r=xn(t,gye),i=HN(),o=_i({props:qe({},r,a),name:"MuiChartsYAxis"}),l=qe({},Gq,o),{position:c,disableLine:d,label:u,labelStyle:f,offset:p,width:x,sx:v,slots:N,slotProps:b}=l,C=Ho(),w=Hq(l),{left:S,top:E,width:k,height:_}=Ti(),A=c==="right"?1:-1,T=N?.axisLine??"line",$=N?.axisLabel??WN,z=Il({elementType:T,externalSlotProps:b?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),F=Il({elementType:$,externalSlotProps:b?.axisLabel,additionalProps:{style:qe({},C.typography.body1,{lineHeight:1,fontSize:14,angle:A*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},f)},ownerState:{}});if(c==="none")return null;const P={x:A*x,y:E+_/2},M=u==null?0:kx(u,F.style).height,G=s.domain(),V=bs(s)?G.length===0:G.some(NP);let X=null;return V||(X="groups"in t&&Array.isArray(t.groups)?n.jsx(fye,qe({},a)):n.jsx(uye,qe({},a,{axisLabelHeight:M}))),n.jsxs(pye,{transform:`translate(${c==="right"?S+k+p:S-p}, 0)`,className:w.root,sx:v,children:[!d&&n.jsx(T,qe({y1:E,y2:E+_,className:w.line},z)),X,u&&i&&n.jsx("g",{className:w.label,children:n.jsx($,qe({},P,F,{text:u}))})]})}function yye(e){const{yAxis:t,yAxisIds:a}=yr(),s=t[e.axisId??a[0]];return s?n.jsx(xye,qe({},e,{axis:s})):(`${e.axisId}`,null)}function bye(e){const{slots:t,slotProps:a}=e,{xAxisIds:s,xAxis:r}=xr(),{yAxisIds:i,yAxis:o}=yr();return n.jsxs(h.Fragment,{children:[s.map(l=>!r[l].position||r[l].position==="none"?null:n.jsx(oye,{slots:t,slotProps:a,axisId:l},l)),i.map(l=>!o[l].position||o[l].position==="none"?null:n.jsx(yye,{slots:t,slotProps:a,axisId:l},l))]})}function vye(e){return Va("MuiTypography",e)}Aa("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const wye={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Nye=Jce(),jye=e=>{const{align:t,gutterBottom:a,noWrap:s,paragraph:r,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${Wn(t)}`,a&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return qa(l,vye,o)},Cye=un("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${Wn(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(Eu(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,a])=>t!=="inherit"&&a&&typeof a=="object").map(([t,a])=>({props:{variant:t},style:a})),...Object.entries(e.palette).filter(fp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Wn(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),N6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},SP=h.forwardRef(function(t,a){const{color:s,...r}=yd({props:t,name:"MuiTypography"}),i=!wye[s],o=Nye({...r,...i&&{color:s}}),{align:l="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:f=!1,paragraph:p=!1,variant:x="body1",variantMapping:v=N6,...N}=o,b={...o,align:l,color:s,className:c,component:d,gutterBottom:u,noWrap:f,paragraph:p,variant:x,variantMapping:v},C=d||(p?"p":v[x]||N6[x])||"span",w=jye(b);return n.jsx(Cye,{as:C,ref:a,className:Pt(w.root,c),...N,ownerState:b,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...N.style}})});function Sye(e){return Va("MuiChartsTooltip",e)}const tf=Aa("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),qN=e=>qa({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},Sye,e);function _ye(){const e=Qn(),t=Ft(e,iW),a=Ft(e,Gr),s=zN(),{xAxis:r,xAxisIds:i}=xr(),{yAxis:o,yAxisIds:l}=yr(),{zAxis:c,zAxisIds:d}=fP(),{rotationAxis:u,rotationAxisIds:f}=oq();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=yv(p)?p.xAxisId??i[0]:void 0,v=yv(p)?p.yAxisId??l[0]:void 0,N="zAxisId"in p?p.zAxisId??d[0]:d[0],b=f[0],C=a[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,v!==void 0?o[v]:void 0,N!==void 0?c[N]:void 0)??(()=>""),w={};return x!==void 0&&(w.x=r[x]),v!==void 0&&(w.y=o[v]),b!==void 0&&(w.rotation=u[b]),a[p.type].tooltipGetter({series:p,axesConfig:w,getColor:C,identifier:t})}const dE=un("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),uE=un("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${tf.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),mE=un("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),af=un(SP,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${tf.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${tf.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${tf.valueCell}, &.${tf.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${tf.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function Aye(e){return Va("MuiChartsLabelMark",e)}const Gm=Aa("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Tye=e=>{const{type:t}=e;return qa({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},Aye,e.classes)},qq=(e,t,a)=>h.forwardRef(function(r,i){const o=_i({props:r,name:e}),l=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},c=Tu(l,o),d=Ho(),u=t.classesResolver?.(c,d),f=h.forwardRef(a);return n.jsx(f,qe({},c,{classes:u,ref:i}))}),Eye=["type","color","className","classes"],kye=un("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Gm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Gm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Gm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Gm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Gm.mask} > *`]:{height:"100%",width:"100%"},[`& .${Gm.mask}`]:{height:"100%",width:"100%"}})),Ev=qq("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Tye},function(t,a){const{type:s,color:r,className:i,classes:o}=t,l=xn(t,Eye),c=s;return n.jsx(kye,qe({className:Pt(o?.root,i),ownerState:t,"aria-hidden":"true",ref:a},l,{children:n.jsx("div",{className:o?.mask,children:typeof c=="function"?n.jsx(c,{className:o?.fill,color:r}):n.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?n.jsx("circle",{className:o?.fill,r:"12",cx:"12",cy:"12",fill:r}):n.jsx("rect",{className:o?.fill,width:"24",height:"24",fill:r})})})}))});function Lye(e){const{classes:t,sx:a}=e,s=_ye(),r=qN(t);if(!s)return null;if("values"in s){const{label:d,color:u,markType:f}=s;return n.jsx(dE,{sx:a,className:r.paper,children:n.jsxs(uE,{className:r.table,children:[n.jsxs(SP,{component:"caption",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Ev,{type:f,color:u,className:r.mark})}),d]}),n.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>n.jsxs(mE,{className:r.row,children:[n.jsx(af,{className:Pt(r.labelCell,r.cell),component:"th",children:x}),n.jsx(af,{className:Pt(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:o,formattedValue:l,markType:c}=s;return n.jsx(dE,{sx:a,className:r.paper,children:n.jsx(uE,{className:r.table,children:n.jsx("tbody",{children:n.jsxs(mE,{className:r.row,children:[n.jsxs(af,{className:Pt(r.labelCell,r.cell),component:"th",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Ev,{type:c,color:i,className:r.mark})}),o]}),n.jsx(af,{className:Pt(r.valueCell,r.cell),component:"td",children:l})]})})})})}function Pye(e){const t=Qn(),a=Ft(t,Gr);return h.useMemo(()=>{const r={};return Object.keys(a).forEach(i=>{r[i]=a[i].colorProcessor}),r},[a])}const Dye=v9({themeId:rN});function Oye(){const e=hP(),[t,a]=h.useState(null);return h.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=o=>{o.pointerType!=="mouse"&&a(null)},i=o=>{a({pointerType:o.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function Mye(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const Iye="@media (pointer: fine)",$ye=()=>Dye(Iye,{defaultMatches:!0}),Vq=(e,t)=>t,Qq=(e,t)=>t;function Yq(e,t,a){return Array.isArray(a)?a.map(s=>h6(t.axis[s],e)):h6(t.axis[a],e)}const Kq=jt(Nx,jx,Cpe,(e,t,a)=>e===null||t===null?null:Spe(a)(e,t)),Rye=jt(Kq,Xu,Vq,(e,t,a=t.axisIds[0])=>e===null?null:Yq(e,t,a)),Xq=jt(Kq,Xu,Qq,(e,t,a=t.axisIds)=>e===null?null:Yq(e,t,a));jt(Xu,Rye,Vq,(e,t,a=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[a]?.data;return s?s[t]:null});jt(Xu,Xq,Qq,(e,t,a=e.axisIds)=>t===null?null:a.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const Zq=oN({memoizeOptions:{resultEqualityCheck:hf}})(Xq,Xu,(e,t)=>e===null?[]:t.axisIds.map((a,s)=>({axisId:a,dataIndex:e[s]})).filter(({axisId:a,dataIndex:s})=>t.axis[a].triggerTooltip&&s>=0)),zye=jt(Zq,e=>e.length>0);function e_(e,t,a){const s=e.data?.[t]??null,i=(e.valueFormatter??(o=>e.scaleType==="utc"?Mye(o):o.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:a,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function Uye(e={}){const{multipleAxes:t,directions:a}=e,s=Ape(),r=Tpe(),i=Epe(),o=Qn(),l=Ft(o,dW),c=Ft(o,uW),d=Ft(o,Zq),u=zN(),{xAxis:f}=xr(),{yAxis:p}=yr(),{zAxis:x,zAxisIds:v}=fP(),{rotationAxis:N}=oq(),b=Pye();if(l.length===0&&c.length===0&&d.length===0)return null;const C=[];return(a===void 0||a.includes("x"))&&l.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(e_(f[w],S,"x"))}),(a===void 0||a.includes("y"))&&c.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(e_(p[w],S,"y"))}),(a===void 0||a.includes("rotation"))&&d.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(e_(N[w],S,"rotation"))}),Object.keys(u).filter(_N).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(E=>{const k=S.series[E],_=k.xAxisId??s.id,A=k.yAxisId??r.id,T=C.findIndex(({axisDirection:$,axisId:z})=>$==="x"&&z===_||$==="y"&&z===A);if(T>=0){const $="zAxisId"in k?k.zAxisId:v[0],{dataIndex:z}=C[T],F=b[w]?.(k,f[_],p[A],$?x[$]:void 0)(z)??"",P=k.data[z]??null,M=k.valueFormatter(P,{dataIndex:z}),G=Vi(k.label,"tooltip")??null;C[T].seriesItems.push({seriesId:E,color:F,value:P,formattedValue:M,formattedLabel:G,markType:k.labelMarkType})}}):[]}),Object.keys(u).filter(mP).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(E=>{const k=S.series[E],_=k.rotationAxisId??i?.id,A=C.findIndex(({axisDirection:T,axisId:$})=>T==="rotation"&&$===_);if(A>=0){const{dataIndex:T}=C[A],$=b[w]?.(k)(T)??"",z=k.data[T]??null,F=k.valueFormatter(z,{dataIndex:T}),P=Vi(k.label,"tooltip")??null;C[A].seriesItems.push({seriesId:E,color:$,value:z,formattedValue:F,formattedLabel:P,markType:k.labelMarkType})}}):[]}),t?C:C.length===0?C[0]:null}function Fye(e){return Uye(qe({},e,{multipleAxes:!0}))}function Bye(e){const t=qN(e.classes),a=Fye();return a===null?null:n.jsx(dE,{sx:e.sx,className:t.paper,children:a.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:o,seriesItems:l})=>n.jsxs(uE,{className:t.table,children:[i!=null&&!r.hideTooltip&&n.jsx(SP,{component:"caption",children:o}),n.jsx("tbody",{children:l.map(({seriesId:c,color:d,formattedValue:u,formattedLabel:f,markType:p})=>u==null?null:n.jsxs(mE,{className:t.row,children:[n.jsxs(af,{className:Pt(t.labelCell,t.cell),component:"th",children:[n.jsx("div",{className:t.markContainer,children:n.jsx(Ev,{type:p,color:d,className:t.mark})}),f||null]}),n.jsx(af,{className:Pt(t.valueCell,t.cell),component:"td",children:u})]},c))})]},s))})}var mr="top",yi="bottom",bi="right",fr="left",_P="auto",Lx=[mr,yi,bi,fr],Ef="start",jp="end",Hye="clippingParents",Jq="viewport",hg="popper",Gye="reference",j6=Lx.reduce(function(e,t){return e.concat([t+"-"+Ef,t+"-"+jp])},[]),eV=[].concat(Lx,[_P]).reduce(function(e,t){return e.concat([t,t+"-"+Ef,t+"-"+jp])},[]),Wye="beforeRead",qye="read",Vye="afterRead",Qye="beforeMain",Yye="main",Kye="afterMain",Xye="beforeWrite",Zye="write",Jye="afterWrite",ebe=[Wye,qye,Vye,Qye,Yye,Kye,Xye,Zye,Jye];function Ro(e){return e?(e.nodeName||"").toLowerCase():null}function Ur(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Pu(e){var t=Ur(e).Element;return e instanceof t||e instanceof Element}function pi(e){var t=Ur(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function AP(e){if(typeof ShadowRoot>"u")return!1;var t=Ur(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function tbe(e){var t=e.state;Object.keys(t.elements).forEach(function(a){var s=t.styles[a]||{},r=t.attributes[a]||{},i=t.elements[a];!pi(i)||!Ro(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(o){var l=r[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function nbe(e){var t=e.state,a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.elements.arrow.style,a.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:a[s]),l=o.reduce(function(c,d){return c[d]="",c},{});!pi(r)||!Ro(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const abe={name:"applyStyles",enabled:!0,phase:"write",fn:tbe,effect:nbe,requires:["computeStyles"]};function Lo(e){return e.split("-")[0]}var yu=Math.max,kv=Math.min,kf=Math.round;function fE(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tV(){return!/^((?!chrome|android).)*safari/i.test(fE())}function Lf(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&pi(e)&&(r=e.offsetWidth>0&&kf(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&kf(s.height)/e.offsetHeight||1);var o=Pu(e)?Ur(e):window,l=o.visualViewport,c=!tV()&&a,d=(s.left+(c&&l?l.offsetLeft:0))/r,u=(s.top+(c&&l?l.offsetTop:0))/i,f=s.width/r,p=s.height/i;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d,x:d,y:u}}function TP(e){var t=Lf(e),a=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:s}}function nV(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(a&&AP(a)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Fl(e){return Ur(e).getComputedStyle(e)}function sbe(e){return["table","td","th"].indexOf(Ro(e))>=0}function jd(e){return((Pu(e)?e.ownerDocument:e.document)||window.document).documentElement}function VN(e){return Ro(e)==="html"?e:e.assignedSlot||e.parentNode||(AP(e)?e.host:null)||jd(e)}function C6(e){return!pi(e)||Fl(e).position==="fixed"?null:e.offsetParent}function rbe(e){var t=/firefox/i.test(fE()),a=/Trident/i.test(fE());if(a&&pi(e)){var s=Fl(e);if(s.position==="fixed")return null}var r=VN(e);for(AP(r)&&(r=r.host);pi(r)&&["html","body"].indexOf(Ro(r))<0;){var i=Fl(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Px(e){for(var t=Ur(e),a=C6(e);a&&sbe(a)&&Fl(a).position==="static";)a=C6(a);return a&&(Ro(a)==="html"||Ro(a)==="body"&&Fl(a).position==="static")?t:a||rbe(e)||t}function EP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qg(e,t,a){return yu(e,kv(t,a))}function ibe(e,t,a){var s=Qg(e,t,a);return s>a?a:s}function aV(){return{top:0,right:0,bottom:0,left:0}}function sV(e){return Object.assign({},aV(),e)}function rV(e,t){return t.reduce(function(a,s){return a[s]=e,a},{})}var obe=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,sV(typeof t!="number"?t:rV(t,Lx))};function lbe(e){var t,a=e.state,s=e.name,r=e.options,i=a.elements.arrow,o=a.modifiersData.popperOffsets,l=Lo(a.placement),c=EP(l),d=[fr,bi].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var f=obe(r.padding,a),p=TP(i),x=c==="y"?mr:fr,v=c==="y"?yi:bi,N=a.rects.reference[u]+a.rects.reference[c]-o[c]-a.rects.popper[u],b=o[c]-a.rects.reference[c],C=Px(i),w=C?c==="y"?C.clientHeight||0:C.clientWidth||0:0,S=N/2-b/2,E=f[x],k=w-p[u]-f[v],_=w/2-p[u]/2+S,A=Qg(E,_,k),T=c;a.modifiersData[s]=(t={},t[T]=A,t.centerOffset=A-_,t)}}function cbe(e){var t=e.state,a=e.options,s=a.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||nV(t.elements.popper,r)&&(t.elements.arrow=r))}const dbe={name:"arrow",enabled:!0,phase:"main",fn:lbe,effect:cbe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pf(e){return e.split("-")[1]}var ube={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mbe(e,t){var a=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:kf(a*r)/r||0,y:kf(s*r)/r||0}}function S6(e){var t,a=e.popper,s=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,f=e.isFixed,p=o.x,x=p===void 0?0:p,v=o.y,N=v===void 0?0:v,b=typeof u=="function"?u({x,y:N}):{x,y:N};x=b.x,N=b.y;var C=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),S=fr,E=mr,k=window;if(d){var _=Px(a),A="clientHeight",T="clientWidth";if(_===Ur(a)&&(_=jd(a),Fl(_).position!=="static"&&l==="absolute"&&(A="scrollHeight",T="scrollWidth")),_=_,r===mr||(r===fr||r===bi)&&i===jp){E=yi;var $=f&&_===k&&k.visualViewport?k.visualViewport.height:_[A];N-=$-s.height,N*=c?1:-1}if(r===fr||(r===mr||r===yi)&&i===jp){S=bi;var z=f&&_===k&&k.visualViewport?k.visualViewport.width:_[T];x-=z-s.width,x*=c?1:-1}}var F=Object.assign({position:l},d&&ube),P=u===!0?mbe({x,y:N},Ur(a)):{x,y:N};if(x=P.x,N=P.y,c){var M;return Object.assign({},F,(M={},M[E]=w?"0":"",M[S]=C?"0":"",M.transform=(k.devicePixelRatio||1)<=1?"translate("+x+"px, "+N+"px)":"translate3d("+x+"px, "+N+"px, 0)",M))}return Object.assign({},F,(t={},t[E]=w?N+"px":"",t[S]=C?x+"px":"",t.transform="",t))}function fbe(e){var t=e.state,a=e.options,s=a.gpuAcceleration,r=s===void 0?!0:s,i=a.adaptive,o=i===void 0?!0:i,l=a.roundOffsets,c=l===void 0?!0:l,d={placement:Lo(t.placement),variation:Pf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,S6(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,S6(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const hbe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:fbe,data:{}};var Uy={passive:!0};function gbe(e){var t=e.state,a=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,l=o===void 0?!0:o,c=Ur(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",a.update,Uy)}),l&&c.addEventListener("resize",a.update,Uy),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",a.update,Uy)}),l&&c.removeEventListener("resize",a.update,Uy)}}const pbe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gbe,data:{}};var xbe={left:"right",right:"left",bottom:"top",top:"bottom"};function Gb(e){return e.replace(/left|right|bottom|top/g,function(t){return xbe[t]})}var ybe={start:"end",end:"start"};function _6(e){return e.replace(/start|end/g,function(t){return ybe[t]})}function kP(e){var t=Ur(e),a=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:a,scrollTop:s}}function LP(e){return Lf(jd(e)).left+kP(e).scrollLeft}function bbe(e,t){var a=Ur(e),s=jd(e),r=a.visualViewport,i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;var d=tV();(d||!d&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l+LP(e),y:c}}function vbe(e){var t,a=jd(e),s=kP(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=yu(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=yu(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+LP(e),c=-s.scrollTop;return Fl(r||a).direction==="rtl"&&(l+=yu(a.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function PP(e){var t=Fl(e),a=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+s)}function iV(e){return["html","body","#document"].indexOf(Ro(e))>=0?e.ownerDocument.body:pi(e)&&PP(e)?e:iV(VN(e))}function Yg(e,t){var a;t===void 0&&(t=[]);var s=iV(e),r=s===((a=e.ownerDocument)==null?void 0:a.body),i=Ur(s),o=r?[i].concat(i.visualViewport||[],PP(s)?s:[]):s,l=t.concat(o);return r?l:l.concat(Yg(VN(o)))}function hE(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wbe(e,t){var a=Lf(e,!1,t==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function A6(e,t,a){return t===Jq?hE(bbe(e,a)):Pu(t)?wbe(t,a):hE(vbe(jd(e)))}function Nbe(e){var t=Yg(VN(e)),a=["absolute","fixed"].indexOf(Fl(e).position)>=0,s=a&&pi(e)?Px(e):e;return Pu(s)?t.filter(function(r){return Pu(r)&&nV(r,s)&&Ro(r)!=="body"}):[]}function jbe(e,t,a,s){var r=t==="clippingParents"?Nbe(e):[].concat(t),i=[].concat(r,[a]),o=i[0],l=i.reduce(function(c,d){var u=A6(e,d,s);return c.top=yu(u.top,c.top),c.right=kv(u.right,c.right),c.bottom=kv(u.bottom,c.bottom),c.left=yu(u.left,c.left),c},A6(e,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function oV(e){var t=e.reference,a=e.element,s=e.placement,r=s?Lo(s):null,i=s?Pf(s):null,o=t.x+t.width/2-a.width/2,l=t.y+t.height/2-a.height/2,c;switch(r){case mr:c={x:o,y:t.y-a.height};break;case yi:c={x:o,y:t.y+t.height};break;case bi:c={x:t.x+t.width,y:l};break;case fr:c={x:t.x-a.width,y:l};break;default:c={x:t.x,y:t.y}}var d=r?EP(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Ef:c[d]=c[d]-(t[u]/2-a[u]/2);break;case jp:c[d]=c[d]+(t[u]/2-a[u]/2);break}}return c}function Cp(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=s===void 0?e.placement:s,i=a.strategy,o=i===void 0?e.strategy:i,l=a.boundary,c=l===void 0?Hye:l,d=a.rootBoundary,u=d===void 0?Jq:d,f=a.elementContext,p=f===void 0?hg:f,x=a.altBoundary,v=x===void 0?!1:x,N=a.padding,b=N===void 0?0:N,C=sV(typeof b!="number"?b:rV(b,Lx)),w=p===hg?Gye:hg,S=e.rects.popper,E=e.elements[v?w:p],k=jbe(Pu(E)?E:E.contextElement||jd(e.elements.popper),c,u,o),_=Lf(e.elements.reference),A=oV({reference:_,element:S,placement:r}),T=hE(Object.assign({},S,A)),$=p===hg?T:_,z={top:k.top-$.top+C.top,bottom:$.bottom-k.bottom+C.bottom,left:k.left-$.left+C.left,right:$.right-k.right+C.right},F=e.modifiersData.offset;if(p===hg&&F){var P=F[r];Object.keys(z).forEach(function(M){var G=[bi,yi].indexOf(M)>=0?1:-1,Q=[mr,yi].indexOf(M)>=0?"y":"x";z[M]+=P[Q]*G})}return z}function Cbe(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=a.boundary,i=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,d=c===void 0?eV:c,u=Pf(s),f=u?l?j6:j6.filter(function(v){return Pf(v)===u}):Lx,p=f.filter(function(v){return d.indexOf(v)>=0});p.length===0&&(p=f);var x=p.reduce(function(v,N){return v[N]=Cp(e,{placement:N,boundary:r,rootBoundary:i,padding:o})[Lo(N)],v},{});return Object.keys(x).sort(function(v,N){return x[v]-x[N]})}function Sbe(e){if(Lo(e)===_P)return[];var t=Gb(e);return[_6(e),t,_6(t)]}function _be(e){var t=e.state,a=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!0:o,c=a.fallbackPlacements,d=a.padding,u=a.boundary,f=a.rootBoundary,p=a.altBoundary,x=a.flipVariations,v=x===void 0?!0:x,N=a.allowedAutoPlacements,b=t.options.placement,C=Lo(b),w=C===b,S=c||(w||!v?[Gb(b)]:Sbe(b)),E=[b].concat(S).reduce(function(pe,Ne){return pe.concat(Lo(Ne)===_P?Cbe(t,{placement:Ne,boundary:u,rootBoundary:f,padding:d,flipVariations:v,allowedAutoPlacements:N}):Ne)},[]),k=t.rects.reference,_=t.rects.popper,A=new Map,T=!0,$=E[0],z=0;z<E.length;z++){var F=E[z],P=Lo(F),M=Pf(F)===Ef,G=[mr,yi].indexOf(P)>=0,Q=G?"width":"height",V=Cp(t,{placement:F,boundary:u,rootBoundary:f,altBoundary:p,padding:d}),X=G?M?bi:fr:M?yi:mr;k[Q]>_[Q]&&(X=Gb(X));var q=Gb(X),ne=[];if(i&&ne.push(V[P]<=0),l&&ne.push(V[X]<=0,V[q]<=0),ne.every(function(pe){return pe})){$=F,T=!1;break}A.set(F,ne)}if(T)for(var oe=v?3:1,K=function(Ne){var Se=E.find(function(Oe){var ke=A.get(Oe);if(ke)return ke.slice(0,Ne).every(function(he){return he})});if(Se)return $=Se,"break"},R=oe;R>0;R--){var ye=K(R);if(ye==="break")break}t.placement!==$&&(t.modifiersData[s]._skip=!0,t.placement=$,t.reset=!0)}}const Abe={name:"flip",enabled:!0,phase:"main",fn:_be,requiresIfExists:["offset"],data:{_skip:!1}};function T6(e,t,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-t.height-a.y,right:e.right-t.width+a.x,bottom:e.bottom-t.height+a.y,left:e.left-t.width-a.x}}function E6(e){return[mr,bi,yi,fr].some(function(t){return e[t]>=0})}function Tbe(e){var t=e.state,a=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,o=Cp(t,{elementContext:"reference"}),l=Cp(t,{altBoundary:!0}),c=T6(o,s),d=T6(l,r,i),u=E6(c),f=E6(d);t.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const Ebe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Tbe};function kbe(e,t,a){var s=Lo(e),r=[fr,mr].indexOf(s)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},t,{placement:e})):a,o=i[0],l=i[1];return o=o||0,l=(l||0)*r,[fr,bi].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function Lbe(e){var t=e.state,a=e.options,s=e.name,r=a.offset,i=r===void 0?[0,0]:r,o=eV.reduce(function(u,f){return u[f]=kbe(f,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=o}const Pbe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Lbe};function Dbe(e){var t=e.state,a=e.name;t.modifiersData[a]=oV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Obe={name:"popperOffsets",enabled:!0,phase:"read",fn:Dbe,data:{}};function Mbe(e){return e==="x"?"y":"x"}function Ibe(e){var t=e.state,a=e.options,s=e.name,r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!1:o,c=a.boundary,d=a.rootBoundary,u=a.altBoundary,f=a.padding,p=a.tether,x=p===void 0?!0:p,v=a.tetherOffset,N=v===void 0?0:v,b=Cp(t,{boundary:c,rootBoundary:d,padding:f,altBoundary:u}),C=Lo(t.placement),w=Pf(t.placement),S=!w,E=EP(C),k=Mbe(E),_=t.modifiersData.popperOffsets,A=t.rects.reference,T=t.rects.popper,$=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,z=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(_){if(i){var M,G=E==="y"?mr:fr,Q=E==="y"?yi:bi,V=E==="y"?"height":"width",X=_[E],q=X+b[G],ne=X-b[Q],oe=x?-T[V]/2:0,K=w===Ef?A[V]:T[V],R=w===Ef?-T[V]:-A[V],ye=t.elements.arrow,pe=x&&ye?TP(ye):{width:0,height:0},Ne=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:aV(),Se=Ne[G],Oe=Ne[Q],ke=Qg(0,A[V],pe[V]),he=S?A[V]/2-oe-ke-Se-z.mainAxis:K-ke-Se-z.mainAxis,Ge=S?-A[V]/2+oe+ke+Oe+z.mainAxis:R+ke+Oe+z.mainAxis,Ce=t.elements.arrow&&Px(t.elements.arrow),xe=Ce?E==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,ee=(M=F?.[E])!=null?M:0,Ee=X+he-ee-xe,Ae=X+Ge-ee,Re=Qg(x?kv(q,Ee):q,X,x?yu(ne,Ae):ne);_[E]=Re,P[E]=Re-X}if(l){var et,De=E==="x"?mr:fr,tt=E==="x"?yi:bi,Je=_[k],H=k==="y"?"height":"width",be=Je+b[De],le=Je-b[tt],Z=[mr,fr].indexOf(C)!==-1,_e=(et=F?.[k])!=null?et:0,te=Z?be:Je-A[H]-T[H]-_e+z.altAxis,Ue=Z?Je+A[H]+T[H]-_e-z.altAxis:le,Ie=x&&Z?ibe(te,Je,Ue):Qg(x?te:be,Je,x?Ue:le);_[k]=Ie,P[k]=Ie-Je}t.modifiersData[s]=P}}const $be={name:"preventOverflow",enabled:!0,phase:"main",fn:Ibe,requiresIfExists:["offset"]};function Rbe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function zbe(e){return e===Ur(e)||!pi(e)?kP(e):Rbe(e)}function Ube(e){var t=e.getBoundingClientRect(),a=kf(t.width)/e.offsetWidth||1,s=kf(t.height)/e.offsetHeight||1;return a!==1||s!==1}function Fbe(e,t,a){a===void 0&&(a=!1);var s=pi(t),r=pi(t)&&Ube(t),i=jd(t),o=Lf(e,r,a),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!a)&&((Ro(t)!=="body"||PP(i))&&(l=zbe(t)),pi(t)?(c=Lf(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=LP(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function Bbe(e){var t=new Map,a=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){a.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!a.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return e.forEach(function(i){a.has(i.name)||r(i)}),s}function Hbe(e){var t=Bbe(e);return ebe.reduce(function(a,s){return a.concat(t.filter(function(r){return r.phase===s}))},[])}function Gbe(e){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(e())})})),t}}function Wbe(e){var t=e.reduce(function(a,s){var r=a[s.name];return a[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,a},{});return Object.keys(t).map(function(a){return t[a]})}var k6={placement:"bottom",modifiers:[],strategy:"absolute"};function L6(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function qbe(e){e===void 0&&(e={});var t=e,a=t.defaultModifiers,s=a===void 0?[]:a,r=t.defaultOptions,i=r===void 0?k6:r;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},k6,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],p=!1,x={state:u,setOptions:function(C){var w=typeof C=="function"?C(u.options):C;N(),u.options=Object.assign({},i,u.options,w),u.scrollParents={reference:Pu(l)?Yg(l):l.contextElement?Yg(l.contextElement):[],popper:Yg(c)};var S=Hbe(Wbe([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(E){return E.enabled}),v(),x.update()},forceUpdate:function(){if(!p){var C=u.elements,w=C.reference,S=C.popper;if(L6(w,S)){u.rects={reference:Fbe(w,Px(S),u.options.strategy==="fixed"),popper:TP(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(z){return u.modifiersData[z.name]=Object.assign({},z.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var k=u.orderedModifiers[E],_=k.fn,A=k.options,T=A===void 0?{}:A,$=k.name;typeof _=="function"&&(u=_({state:u,options:T,name:$,instance:x})||u)}}}},update:Gbe(function(){return new Promise(function(b){x.forceUpdate(),b(u)})}),destroy:function(){N(),p=!0}};if(!L6(l,c))return x;x.setOptions(d).then(function(b){!p&&d.onFirstUpdate&&d.onFirstUpdate(b)});function v(){u.orderedModifiers.forEach(function(b){var C=b.name,w=b.options,S=w===void 0?{}:w,E=b.effect;if(typeof E=="function"){var k=E({state:u,name:C,instance:x,options:S}),_=function(){};f.push(k||_)}})}function N(){f.forEach(function(b){return b()}),f=[]}return x}}var Vbe=[pbe,Obe,hbe,abe,Pbe,Abe,$be,dbe,Ebe],Qbe=qbe({defaultModifiers:Vbe});function P6(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Ybe(e){return typeof e=="function"?e():e}const Kbe=h.forwardRef(function(t,a){const{children:s,container:r,disablePortal:i=!1}=t,[o,l]=h.useState(null),c=$o(h.isValidElement(s)?O9(s):null,a);if(rs(()=>{i||l(Ybe(r)||document.body)},[r,i]),rs(()=>{if(o&&!i)return P6(a,o),()=>{P6(a,null)}},[a,o,i]),i){if(h.isValidElement(s)){const d={ref:c};return h.cloneElement(s,d)}return s}return o&&Hi.createPortal(s,o)});function Xbe(e){return Va("MuiPopper",e)}Aa("MuiPopper",["root"]);function Zbe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function gE(e){return typeof e=="function"?e():e}function Jbe(e){return e.nodeType!==void 0}const eve=e=>{const{classes:t}=e;return qa({root:["root"]},Xbe,t)},tve={},nve=h.forwardRef(function(t,a){const{anchorEl:s,children:r,direction:i,disablePortal:o,modifiers:l,open:c,placement:d,popperOptions:u,popperRef:f,slotProps:p={},slots:x={},TransitionProps:v,ownerState:N,...b}=t,C=h.useRef(null),w=$o(C,a),S=h.useRef(null),E=$o(S,f),k=h.useRef(E);rs(()=>{k.current=E},[E]),h.useImperativeHandle(f,()=>S.current,[]);const _=Zbe(d,i),[A,T]=h.useState(_),[$,z]=h.useState(gE(s));h.useEffect(()=>{S.current&&S.current.forceUpdate()}),h.useEffect(()=>{s&&z(gE(s))},[s]),rs(()=>{if(!$||!c)return;const Q=q=>{T(q.placement)};let V=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:q})=>{Q(q)}}];l!=null&&(V=V.concat(l)),u&&u.modifiers!=null&&(V=V.concat(u.modifiers));const X=Qbe($,C.current,{placement:_,...u,modifiers:V});return k.current(X),()=>{X.destroy(),k.current(null)}},[$,o,l,c,u,_]);const F={placement:A};v!==null&&(F.TransitionProps=v);const P=eve(t),M=x.root??"div",G=Il({elementType:M,externalSlotProps:p.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:w},ownerState:t,className:P.root});return n.jsx(M,{...G,children:typeof r=="function"?r(F):r})}),ave=h.forwardRef(function(t,a){const{anchorEl:s,children:r,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:d,open:u,placement:f="bottom",popperOptions:p=tve,popperRef:x,style:v,transition:N=!1,slotProps:b={},slots:C={},...w}=t,[S,E]=h.useState(!0),k=()=>{E(!1)},_=()=>{E(!0)};if(!c&&!u&&(!N||S))return null;let A;if(i)A=i;else if(s){const z=gE(s);A=z&&Jbe(z)?FT(z).body:FT(null).body}const T=!u&&c&&(!N||S)?"none":void 0,$=N?{in:u,onEnter:k,onExited:_}:void 0;return n.jsx(Kbe,{disablePortal:l,container:A,children:n.jsx(nve,{anchorEl:s,direction:o,disablePortal:l,modifiers:d,ref:a,open:N?!S:u,placement:f,popperOptions:p,popperRef:x,slotProps:b,slots:C,...w,style:{position:"fixed",top:0,left:0,display:T,...v},TransitionProps:$,children:r})})}),sve=un(ave,{name:"MuiPopper",slot:"Root"})({}),rve=h.forwardRef(function(t,a){const s=fx(),r=yd({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:v,popperOptions:N,popperRef:b,transition:C,slots:w,slotProps:S,...E}=r,k=w?.root??l?.Root,_={anchorEl:i,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:v,popperOptions:N,popperRef:b,transition:C,...E};return n.jsx(sve,{as:o,direction:s?"rtl":"ltr",slots:{root:k},slotProps:S??c,..._,ref:a})});function ive(e){const{children:t,defer:a=!1,fallback:s=null}=e,[r,i]=h.useState(!1);return rs(()=>{a||i(!0)},[a]),h.useEffect(()=>{a&&i(!0)},[a]),r?t:s}function D6(e){let t,a;const s=()=>{a=null,e(...t)};function r(...i){t=i,a||(a=requestAnimationFrame(s))}return r.clear=()=>{a&&(cancelAnimationFrame(a),a=null)},r}function ove(){const e=Qn(),t=Ft(e,iq),a=Ft(e,Go);return t!==void 0?"polar":a!==void 0?"cartesian":"none"}const lve=["trigger","position","anchor","classes","children"],O6=()=>!1;function cve(e,t,a){return a?O6:e==="item"?wge:t==="polar"?zye:t==="cartesian"?_ge:O6}const dve=un(rve,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function uve(e){const t=_i({props:e,name:"MuiChartsTooltipContainer"}),{trigger:a="axis",position:s,anchor:r="pointer",classes:i,children:o}=t,l=xn(t,lve),c=hP(),d=qN(i),u=Oye(),f=$ye(),p=h.useRef(null),x=lN(()=>({x:0,y:0})),v=ove(),N=Qn(),b=Ft(N,Oge),C=Ft(N,cve(a,v,b)),S=Ft(N,Cx)==="keyboard"?"node":r,E=Ft(N,a==="item"&&S==="node"?Nge:()=>null,s);h.useEffect(()=>{const $=c.current;if($===null)return()=>{};if(E!==null){const P=D6(()=>{x.current={x:$.getBoundingClientRect().left+(E?.x??0),y:$.getBoundingClientRect().top+(E?.y??0)},p.current?.update()});return P(),()=>P.clear()}const z=D6((P,M)=>{x.current={x:P,y:M},p.current?.update()}),F=P=>{z(P.clientX,P.clientY)};return $.addEventListener("pointerdown",F),$.addEventListener("pointermove",F),$.addEventListener("pointerenter",F),()=>{$.removeEventListener("pointerdown",F),$.removeEventListener("pointermove",F),$.removeEventListener("pointerenter",F),z.clear()}},[c,x,E]);const k=h.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),_=u?.pointerType==="mouse"||f,A=u?.pointerType==="touch"||!f,T=h.useMemo(()=>[{name:"offset",options:{offset:()=>A?[0,64]:[0,8]}},..._?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[_,A]);return a==="none"?null:n.jsx(ive,{children:C&&n.jsx(dve,qe({},l,{className:d?.root,open:C,placement:l.placement??s??(_?"right-start":"top"),popperRef:p,anchorEl:k,modifiers:T,children:o}))})}function mve(e){const{classes:t,trigger:a="axis"}=e,s=qN(t);return n.jsx(uve,qe({},e,{classes:t,children:a==="axis"?n.jsx(Bye,{classes:s}):n.jsx(Lye,{classes:s})}))}const fve=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function hve(e){return Va("MuiChartsLegend",e)}const gve=e=>{const{classes:t,direction:a}=e;return qa({root:["root",a],item:["item"],mark:["mark"],label:["label"],series:["series"]},hve,t)},M6=Aa("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),pve=["slots","slotProps"],xve=["ownerState"],yve=(e,t,a,s)=>{function r(i,o){const l=_i({props:i,name:e}),c=typeof a.defaultProps=="function"?a.defaultProps(l):a.defaultProps??{},d=Tu(c,l),u=d,{slots:f,slotProps:p}=u,x=xn(u,pve),v=Ho(),N=a.classesResolver?.(d,v),b=f?.[t]??s,C=a.propagateSlots&&!f?.[t],w=Il({elementType:b,externalSlotProps:p?.[t],additionalProps:qe({},x,{classes:N},C&&{slots:f,slotProps:p}),ownerState:{}}),S=xn(w,xve),E=qe({},S);for(const k of a.omitProps??[])delete E[k];return n.jsx(b,qe({},E,{ref:o}))}return h.forwardRef(r)};function bve(e){return Va("MuiChartsLabel",e)}Aa("MuiChartsLabel",["root"]);const vve=e=>qa({root:["root"]},bve,e.classes),wve=["children","className","classes"],Nve=qq("MuiChartsLabel",{classesResolver:vve},function(t,a){const{children:s,className:r,classes:i}=t,o=xn(t,wve);return n.jsx("span",qe({className:Pt(i?.root,r),ref:a},o,{children:s}))}),jve=["direction","onItemClick","className","classes"],Cve=un("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>qe({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${M6.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${M6.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),Sve=yve("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:gve},h.forwardRef(function(t,a){const s=Gpe(),{onItemClick:r,className:i,classes:o}=t,l=xn(t,jve);if(s.items.length===0)return null;const c=r?"button":"div";return n.jsx(Cve,qe({className:Pt(o?.root,i),ref:a},l,{ownerState:t,children:s.items.map((d,u)=>n.jsx("li",{className:o?.item,"data-series":d.id,children:n.jsxs(c,{className:o?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(f=>r(f,fve(d),u)):void 0,children:[n.jsx(Ev,{className:o?.mark,color:d.color,type:d.markType}),n.jsx(Nve,{className:o?.label,children:d.label})]})},d.id))}))}));function _ve(e){return Va("MuiChartsAxisHighlight",e)}Aa("MuiChartsAxisHighlight",["root"]);const Lv=un("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:qe({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:qe({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function Ave(e){const{type:t,classes:a}=e,{left:s,width:r}=Ti(),i=Qn(),o=Ft(i,Ige),l=Ft(i,Xs);return o.length===0?null:o.map(({axisId:c,value:d})=>{const f=l.axis[c].scale,p=Xf(f),x=t==="band"&&d!==null&&bs(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Lv,{d:`M ${s} ${f(d)-(f.step()-f.bandwidth())/2} l 0 ${f.step()} l ${r} 0 l 0 ${-f.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Lv,{d:`M ${s} ${p(d)} L ${s+r} ${p(d)}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Tve(e){const{type:t,classes:a}=e,{top:s,height:r}=Ti(),i=Qn(),o=Ft(i,Mge),l=Ft(i,Ks);return o.length===0?null:o.map(({axisId:c,value:d})=>{const f=l.axis[c].scale,p=Xf(f),x=t==="band"&&d!==null&&bs(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Lv,{d:`M ${f(d)-(f.step()-f.bandwidth())/2} ${s} l ${f.step()} 0 l 0 ${r} l ${-f.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Lv,{d:`M ${p(d)} ${s} L ${p(d)} ${s+r}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const Eve=()=>qa({root:["root"]},_ve);function kve(e){const{x:t,y:a}=e,s=Eve();return n.jsxs(h.Fragment,{children:[t&&t!=="none"&&n.jsx(Tve,{type:t,classes:s}),a&&a!=="none"&&n.jsx(Ave,{type:a,classes:s})]})}function Lve(e){const{id:t,offset:a}=e,{left:s,top:r,width:i,height:o}=Ti(),l=qe({top:0,right:0,bottom:0,left:0},a);return n.jsx("clipPath",{id:t,children:n.jsx("rect",{x:s-l.left,y:r-l.top,width:i+l.left+l.right,height:o+l.top+l.bottom})})}const Pve=parseInt(h.version,10),Dve=["x","y","id","classes","color","shape"];function Ove(e){return Va("MuiHighlightElement",e)}Aa("MuiHighlightElement",["root"]);const Mve=e=>{const{classes:t,id:a}=e,s={root:["root",`series-${a}`]};return qa(s,Ove,t)};function Ive(e){const{x:t,y:a,color:s,shape:r}=e,i=xn(e,Dve),o=Mve(e),l=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:lP($W[Cq(r)])()},d=Pve>18?{transformOrigin:`${t} ${a}`}:{"transform-origin":`${t} ${a}`};return n.jsx(l,qe({pointerEvents:"none",className:o.root,transform:`translate(${t} ${a})`,fill:s},d,c,i))}const $ve=["slots","slotProps"];function Rve(e){const{slots:t,slotProps:a}=e,s=xn(e,$ve),r=Ex(),{xAxis:i,xAxisIds:o}=xr(),{yAxis:l,yAxisIds:c}=yr(),{instance:d}=Wr(),u=Qn(),f=Ft(u,gW);if(f.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,v=o[0],N=c[0],b=t?.lineHighlight??Ive;return n.jsx("g",qe({},s,{children:f.flatMap(({dataIndex:C,axisId:w})=>x.flatMap(({ids:S})=>S.flatMap(E=>{const{xAxisId:k=v,yAxisId:_=N,stackedData:A,data:T,disableHighlight:$,shape:z="circle"}=p[E];if($||T[C]==null||w!==k)return null;const F=Xf(i[k].scale),P=l[_].scale,M=i[k].data;if(M===void 0)throw new Error(`MUI X Charts: ${k===dN?"The first `xAxis`":`The x-axis with id "${k}"`} should have data property to be able to display a line plot.`);const G=F(M[C]),Q=P(A[C][1]);if(!d.isPointInside(G,Q))return null;const V=bP(p[E],i[k],l[_]);return n.jsx(b,qe({id:E,color:V(C),x:G,y:Q,shape:z},a?.lineHighlight),`${E}`)})))}))}function zve(e){return Va("MuiChartsGrid",e)}const I6=Aa("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),Uve=un("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${I6.verticalLine}`]:t.verticalLine},{[`&.${I6.horizontalLine}`]:t.horizontalLine},t.root]})({}),lV=un("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Fve(e){const{instance:t}=Wr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=GN({scale:o,tickNumber:l,tickInterval:c,direction:"x"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isXInside(f)?n.jsx(lV,{y1:s,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${u?.getTime?.()??u}`):null)})}function Bve(e){const{instance:t}=Wr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=GN({scale:o,tickNumber:l,tickInterval:c,direction:"y"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isYInside(f)?n.jsx(lV,{y1:f,y2:f,x1:s,x2:r,className:i.horizontalLine},`horizontal-${u?.getTime?.()??u}`):null)})}const Hve=["vertical","horizontal"],Gve=({classes:e})=>qa({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},zve,e);function Wve(e){const t=_i({props:e,name:"MuiChartsGrid"}),a=Ti(),{vertical:s,horizontal:r}=t,i=xn(t,Hve),{xAxis:o,xAxisIds:l}=xr(),{yAxis:c,yAxisIds:d}=yr(),u=Gve(t),f=c[d[0]],p=o[l[0]];return n.jsxs(Uve,qe({},i,{className:u.root,children:[s&&n.jsx(Fve,{axis:p,start:a.top,end:a.height+a.top,classes:u}),r&&n.jsx(Bve,{axis:f,start:a.left,end:a.width+a.left,classes:u})]}))}const qve=["message"],Vve=un("text")(({theme:e})=>qe({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Qve(e){const{message:t}=e,a=xn(e,qve),{top:s,left:r,height:i,width:o}=Ti(),{localeText:l}=xq();return n.jsx(Vve,qe({x:r+o/2,y:s+i/2},a,{children:t??l.loading}))}const Yve=["message"],Kve=un("text")(({theme:e})=>qe({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Xve(e){const{message:t}=e,a=xn(e,Yve),{top:s,left:r,height:i,width:o}=Ti(),{localeText:l}=xq();return n.jsx(Kve,qe({x:r+o/2,y:s+i/2},a,{children:t??l.noData}))}function Zve(){const e=zN();return Object.values(e).every(t=>{if(!t)return!0;const{series:a,seriesOrder:s}=t;return s.every(r=>{const i=a[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function Jve(e){const t=Zve();if(e.loading){const a=e.slots?.loadingOverlay??Qve;return n.jsx(a,qe({},e.slotProps?.loadingOverlay))}if(t){const a=e.slots?.noDataOverlay??Xve;return n.jsx(a,qe({},e.slotProps?.noDataOverlay))}return null}const ewe=[_x,Sx,wx,Yf,Ax,EN],twe=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],nwe=e=>{const{xAxis:t,yAxis:a,series:s,width:r,height:i,margin:o,colors:l,dataset:c,sx:d,onAreaClick:u,onLineClick:f,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:v,grid:N,children:b,slots:C,slotProps:w,skipAnimation:S,loading:E,highlightedItem:k,onHighlightChange:_,className:A,brushConfig:T}=e,$=xn(e,twe),F=`${sN()}-clip-path`,P=h.useMemo(()=>s.map(Se=>qe({disableHighlight:!!v,type:"line"},Se)),[v,s]),M=qe({},$,{series:P,width:r,height:i,margin:o,colors:l,dataset:c,xAxis:t??[{id:dN,scaleType:"point",data:Array.from({length:Math.max(...s.map(Se=>(Se.data??c??[]).length))},(Se,Oe)=>Oe)}],yAxis:a,highlightedItem:k,onHighlightChange:_,disableAxisListener:w?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:A,skipAnimation:S,brushConfig:T,plugins:ewe}),G={vertical:N?.vertical,horizontal:N?.horizontal},Q={clipPath:`url(#${F})`},V={id:F},X={slots:C,slotProps:w,onItemClick:u},q={slots:C,slotProps:w,onItemClick:f},ne={slots:C,slotProps:w,onItemClick:p,skipAnimation:S},oe={slots:C,slotProps:w,loading:E},K={slots:C,slotProps:w},R=qe({x:"line"},x),ye={slots:C,slotProps:w},pe={slots:C,slotProps:w};return{chartsWrapperProps:{sx:d,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:M,gridProps:G,clipPathProps:V,clipPathGroupProps:Q,areaPlotProps:X,linePlotProps:q,markPlotProps:ne,overlayProps:oe,chartsAxisProps:K,axisHighlightProps:R,lineHighlightPlotProps:ye,legendProps:pe,children:b}};function awe(e,t,a,s,r,i,o,l,c,d,u,f=1/0,p=1){const x=s.copy(),v=r.copy();x.range([0,1]),v.range([0,1]);const N=function(T){const $=x(a[T].x),z=v(a[T].y);return $>=i&&$<=o&&z>=l&&z<=c},b=s.range()[1]-s.range()[0],C=r.range()[1]-r.range()[0],w=b*b,S=C*C;function E(A,T){return w*A*A+S*T*T}const k=x($6(s,d,A=>a[A]?.x)),_=v($6(r,u,A=>a[A]?.y));return e.neighbors(k,_,p,f!=null?f*f:1/0,N,E)}function $6(e,t,a){if(bs(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a(s)}return e.invert(t)}const QN=({svgRef:e,params:t,store:a,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:o}=t,l=Ft(a,pr),{axis:c,axisIds:d}=Ft(a,Ks),{axis:u,axisIds:f}=Ft(a,Xs),p=Ft(a,VG),{series:x,seriesOrder:v}=Ft(a,xa)?.scatter??{},N=Ft(a,p?ige:oge),b=d[0],C=f[0];rs(()=>{a.set("voronoi",{isVoronoiEnabled:!r})},[a,r]),h.useEffect(()=>{if(e.current===null||r)return;const E=e.current;function k(G){const Q=wp(E,G);if(!s.isPointInside(Q.x,Q.y))return"outside-chart";let V;for(const X of v??[]){const q=(x??{})[X],ne=N.get(X);if(!ne)continue;const oe=q.xAxisId??b,K=q.yAxisId??C,R=a6(a.getSnapshot(),oe),ye=a6(a.getSnapshot(),K),pe=i==="item"?q.markerSize:i,Ne=(R?.start??0)/100,Se=(R?.end??100)/100,Oe=(ye?.start??0)/100,ke=(ye?.end??100)/100,he=c[oe].scale,Ge=u[K].scale,Ce=awe(ne,l,q.data,he,Ge,Ne,Se,Oe,ke,Q.x,Q.y,pe)[0];if(Ce===void 0)continue;const xe=q.data[Ce],ee=he(xe.x),Ee=Ge(xe.y),Ae=(ee-Q.x)**2+(Ee-Q.y)**2;(V===void 0||Ae<V.distanceSq)&&(V={dataIndex:Ce,seriesId:X,distanceSq:Ae})}return V===void 0?"no-point-found":{seriesId:V.seriesId,dataIndex:V.dataIndex}}const _=s.addInteractionListener("moveEnd",G=>{G.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),A=s.addInteractionListener("panEnd",G=>{G.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),T=s.addInteractionListener("quickPressEnd",G=>{!G.detail.activeGestures.move&&!G.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),$=G=>{const Q=k(G.detail.srcEvent);if(Q==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(Q==="outside-voronoi-max-radius"||Q==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:V,dataIndex:X}=Q;s.setItemInteraction?.({type:"scatter",seriesId:V,dataIndex:X},{interaction:"pointer"}),s.setHighlight?.({seriesId:V,dataIndex:X})},z=s.addInteractionListener("tap",G=>{const Q=k(G.detail.srcEvent);if(typeof Q!="string"&&o){const{seriesId:V,dataIndex:X}=Q;o(G.detail.srcEvent,{type:"scatter",seriesId:V,dataIndex:X})}}),F=s.addInteractionListener("move",$),P=s.addInteractionListener("pan",$),M=s.addInteractionListener("quickPress",$);return()=>{z.cleanup(),F.cleanup(),_.cleanup(),P.cleanup(),A.cleanup(),M.cleanup(),T.cleanup()}},[e,u,c,i,o,r,l,s,v,x,N,b,C,a]);const w=gs(()=>{a.set("voronoi",{isVoronoiEnabled:!0})}),S=gs(()=>{a.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:w,disableVoronoi:S}}};QN.getDefaultizedParams=({params:e})=>qe({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});QN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});QN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const cV=[_x,Sx,wx,Yf,Ax,QN,EN],swe=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],rwe=(e,t)=>{const a=e,{width:s,height:r,margin:i,children:o,series:l,colors:c,dataset:d,desc:u,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:N,onItemClick:b,disableAxisListener:C,highlightedItem:w,onHighlightChange:S,sx:E,title:k,xAxis:_,yAxis:A,zAxis:T,rotationAxis:$,radiusAxis:z,skipAnimation:F,seriesConfig:P,plugins:M,localeText:G,slots:Q,slotProps:V,experimentalFeatures:X,enableKeyboardNavigation:q,brushConfig:ne}=a,oe=xn(a,swe),K=qe({title:k,desc:u,sx:E,ref:t},oe);return{chartDataProviderProps:{margin:i,series:l,colors:c,dataset:d,disableAxisListener:C,highlightedItem:w,onHighlightChange:S,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:N,onItemClick:b,xAxis:_,yAxis:A,zAxis:T,rotationAxis:$,radiusAxis:z,skipAnimation:F,width:s,height:r,localeText:G,seriesConfig:P,experimentalFeatures:X,enableKeyboardNavigation:q,brushConfig:ne,plugins:M??cV,slots:Q,slotProps:V},chartsSurfaceProps:K,children:o}};function R6(e){try{return e.matches(":focus-visible")}catch{}return!1}class Pv{static create(){return new Pv}static use(){const t=lN(Pv.create).current,[a,s]=h.useState(!1);return t.shouldMount=a,t.setShouldMount=s,h.useEffect(t.mountEffect,[a]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=owe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function iwe(){return Pv.use()}function owe(){let e,t;const a=new Promise((s,r)=>{e=s,t=r});return a.resolve=e,a.reject=t,a}class DP{static create(){return new DP}currentId=null;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function lwe(){const e=lN(DP.create).current;return U9(e.disposeEffect),e}function cwe(e){const{className:t,classes:a,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:d}=e,[u,f]=h.useState(!1),p=Pt(t,a.ripple,a.rippleVisible,s&&a.ripplePulsate),x={width:o,height:o,top:-(o/2)+i,left:-(o/2)+r},v=Pt(a.child,u&&a.childLeaving,s&&a.childPulsate);return!l&&!u&&f(!0),h.useEffect(()=>{if(!l&&c!=null){const N=setTimeout(c,d);return()=>{clearTimeout(N)}}},[c,l,d]),n.jsx("span",{className:p,style:x,children:n.jsx("span",{className:v})})}const ci=Aa("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),pE=550,dwe=80,uwe=mx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,mwe=mx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,fwe=mx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,hwe=un("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),gwe=un(cwe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ci.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${uwe};
    animation-duration: ${pE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ci.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ci.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ci.childLeaving} {
    opacity: 0;
    animation-name: ${mwe};
    animation-duration: ${pE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ci.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${fwe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,pwe=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...l}=s,[c,d]=h.useState([]),u=h.useRef(0),f=h.useRef(null);h.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const p=h.useRef(!1),x=lwe(),v=h.useRef(null),N=h.useRef(null),b=h.useCallback(E=>{const{pulsate:k,rippleX:_,rippleY:A,rippleSize:T,cb:$}=E;d(z=>[...z,n.jsx(gwe,{classes:{ripple:Pt(i.ripple,ci.ripple),rippleVisible:Pt(i.rippleVisible,ci.rippleVisible),ripplePulsate:Pt(i.ripplePulsate,ci.ripplePulsate),child:Pt(i.child,ci.child),childLeaving:Pt(i.childLeaving,ci.childLeaving),childPulsate:Pt(i.childPulsate,ci.childPulsate)},timeout:pE,pulsate:k,rippleX:_,rippleY:A,rippleSize:T},u.current)]),u.current+=1,f.current=$},[i]),C=h.useCallback((E={},k={},_=()=>{})=>{const{pulsate:A=!1,center:T=r||k.pulsate,fakeElement:$=!1}=k;if(E?.type==="mousedown"&&p.current){p.current=!1;return}E?.type==="touchstart"&&(p.current=!0);const z=$?null:N.current,F=z?z.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,M,G;if(T||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)P=Math.round(F.width/2),M=Math.round(F.height/2);else{const{clientX:Q,clientY:V}=E.touches&&E.touches.length>0?E.touches[0]:E;P=Math.round(Q-F.left),M=Math.round(V-F.top)}if(T)G=Math.sqrt((2*F.width**2+F.height**2)/3),G%2===0&&(G+=1);else{const Q=Math.max(Math.abs((z?z.clientWidth:0)-P),P)*2+2,V=Math.max(Math.abs((z?z.clientHeight:0)-M),M)*2+2;G=Math.sqrt(Q**2+V**2)}E?.touches?v.current===null&&(v.current=()=>{b({pulsate:A,rippleX:P,rippleY:M,rippleSize:G,cb:_})},x.start(dwe,()=>{v.current&&(v.current(),v.current=null)})):b({pulsate:A,rippleX:P,rippleY:M,rippleSize:G,cb:_})},[r,b,x]),w=h.useCallback(()=>{C({},{pulsate:!0})},[C]),S=h.useCallback((E,k)=>{if(x.clear(),E?.type==="touchend"&&v.current){v.current(),v.current=null,x.start(0,()=>{S(E,k)});return}v.current=null,d(_=>_.length>0?_.slice(1):_),f.current=k},[x]);return h.useImperativeHandle(a,()=>({pulsate:w,start:C,stop:S}),[w,C,S]),n.jsx(hwe,{className:Pt(ci.root,i.root,o),ref:N,...l,children:n.jsx(gL,{component:null,exit:!0,children:c})})});function xwe(e){return Va("MuiButtonBase",e)}const ywe=Aa("MuiButtonBase",["root","disabled","focusVisible"]),bwe=e=>{const{disabled:t,focusVisible:a,focusVisibleClassName:s,classes:r}=e,o=qa({root:["root",t&&"disabled",a&&"focusVisible"]},xwe,r);return a&&s&&(o.root+=` ${s}`),o},vwe=un("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ywe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),dV=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:v="a",onBlur:N,onClick:b,onContextMenu:C,onDragLeave:w,onFocus:S,onFocusVisible:E,onKeyDown:k,onKeyUp:_,onMouseDown:A,onMouseLeave:T,onMouseUp:$,onTouchEnd:z,onTouchMove:F,onTouchStart:P,tabIndex:M=0,TouchRippleProps:G,touchRippleRef:Q,type:V,...X}=s,q=h.useRef(null),ne=iwe(),oe=$o(ne.ref,Q),[K,R]=h.useState(!1);d&&K&&R(!1),h.useImperativeHandle(r,()=>({focusVisible:()=>{R(!0),q.current.focus()}}),[]);const ye=ne.shouldMount&&!u&&!d;h.useEffect(()=>{K&&p&&!u&&ne.pulsate()},[u,p,K,ne]);const pe=ml(ne,"start",A,f),Ne=ml(ne,"stop",C,f),Se=ml(ne,"stop",w,f),Oe=ml(ne,"stop",$,f),ke=ml(ne,"stop",be=>{K&&be.preventDefault(),T&&T(be)},f),he=ml(ne,"start",P,f),Ge=ml(ne,"stop",z,f),Ce=ml(ne,"stop",F,f),xe=ml(ne,"stop",be=>{R6(be.target)||R(!1),N&&N(be)},!1),ee=gs(be=>{q.current||(q.current=be.currentTarget),R6(be.target)&&(R(!0),E&&E(be)),S&&S(be)}),Ee=()=>{const be=q.current;return c&&c!=="button"&&!(be.tagName==="A"&&be.href)},Ae=gs(be=>{p&&!be.repeat&&K&&be.key===" "&&ne.stop(be,()=>{ne.start(be)}),be.target===be.currentTarget&&Ee()&&be.key===" "&&be.preventDefault(),k&&k(be),be.target===be.currentTarget&&Ee()&&be.key==="Enter"&&!d&&(be.preventDefault(),b&&b(be))}),Re=gs(be=>{p&&be.key===" "&&K&&!be.defaultPrevented&&ne.stop(be,()=>{ne.pulsate(be)}),_&&_(be),b&&be.target===be.currentTarget&&Ee()&&be.key===" "&&!be.defaultPrevented&&b(be)});let et=c;et==="button"&&(X.href||X.to)&&(et=v);const De={};et==="button"?(De.type=V===void 0?"button":V,De.disabled=d):(!X.href&&!X.to&&(De.role="button"),d&&(De["aria-disabled"]=d));const tt=$o(a,q),Je={...s,centerRipple:i,component:c,disabled:d,disableRipple:u,disableTouchRipple:f,focusRipple:p,tabIndex:M,focusVisible:K},H=bwe(Je);return n.jsxs(vwe,{as:et,className:Pt(H.root,l),ownerState:Je,onBlur:xe,onClick:b,onContextMenu:Ne,onFocus:ee,onKeyDown:Ae,onKeyUp:Re,onMouseDown:pe,onMouseLeave:ke,onMouseUp:Oe,onDragLeave:Se,onTouchEnd:Ge,onTouchMove:Ce,onTouchStart:he,ref:tt,tabIndex:d?-1:M,type:V,...De,...X,children:[o,ye?n.jsx(pwe,{ref:oe,center:i,...G}):null]})});function ml(e,t,a,s=!1){return gs(r=>(a&&a(r),s||e[t](r),!0))}function wwe(e){return Va("MuiIconButton",e)}const z6=Aa("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Nwe=e=>{const{classes:t,disabled:a,color:s,edge:r,size:i,loading:o}=e,l={root:["root",o&&"loading",a&&"disabled",s!=="default"&&`color${Wn(s)}`,r&&`edge${Wn(r)}`,`size${Wn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return qa(l,wwe,t)},jwe=un(dV,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.loading&&t.loading,a.color!=="default"&&t[`color${Wn(a.color)}`],a.edge&&t[`edge${Wn(a.edge)}`],t[`size${Wn(a.size)}`]]}})(Eu(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Eu(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(fp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(fp()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${z6.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${z6.loading}`]:{color:"transparent"}}))),Cwe=un("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Swe=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:f,loading:p=null,loadingIndicator:x,...v}=s,N=sN(f),b=x??n.jsx(pL,{"aria-labelledby":N,color:"inherit",size:16}),C={...s,edge:r,color:l,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:b,size:u},w=Nwe(C);return n.jsxs(jwe,{id:p?N:f,className:Pt(w.root,o),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:a,...v,ownerState:C,children:[typeof p=="boolean"&&n.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:n.jsx(Cwe,{className:w.loadingIndicator,ownerState:C,children:p&&b})}),i]})});function _we(e){return Va("MuiButton",e)}const Hd=Aa("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Awe=h.createContext({}),Twe=h.createContext(void 0),Ewe=e=>{const{color:t,disableElevation:a,fullWidth:s,size:r,variant:i,loading:o,loadingPosition:l,classes:c}=e,d={root:["root",o&&"loading",i,`${i}${Wn(t)}`,`size${Wn(r)}`,`${i}Size${Wn(r)}`,`color${Wn(t)}`,a&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${Wn(l)}`],startIcon:["icon","startIcon",`iconSize${Wn(r)}`],endIcon:["icon","endIcon",`iconSize${Wn(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=qa(d,_we,c);return{...c,...u}},uV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],kwe=un(dV,{shouldForwardProp:e=>E9(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${Wn(a.color)}`],t[`size${Wn(a.size)}`],t[`${a.variant}Size${Wn(a.size)}`],a.color==="inherit"&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth,a.loading&&t.loading]}})(Eu(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Hd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Hd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Hd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Hd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(fp()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Hd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Hd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Hd.loading}`]:{color:"transparent"}}}]}})),Lwe=un("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,a.loading&&t.startIconLoadingStart,t[`iconSize${Wn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...uV]})),Pwe=un("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,a.loading&&t.endIconLoadingEnd,t[`iconSize${Wn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...uV]})),Dwe=un("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),U6=un("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Owe=h.forwardRef(function(t,a){const s=h.useContext(Awe),r=h.useContext(Twe),i=Tu(s,t),o=yd({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:u,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:v,focusVisibleClassName:N,fullWidth:b=!1,id:C,loading:w=null,loadingIndicator:S,loadingPosition:E="center",size:k="medium",startIcon:_,type:A,variant:T="text",...$}=o,z=sN(C),F=S??n.jsx(pL,{"aria-labelledby":z,color:"inherit",size:16}),P={...o,color:c,component:d,disabled:f,disableElevation:p,disableFocusRipple:x,fullWidth:b,loading:w,loadingIndicator:F,loadingPosition:E,size:k,type:A,variant:T},M=Ewe(P),G=(_||w&&E==="start")&&n.jsx(Lwe,{className:M.startIcon,ownerState:P,children:_||n.jsx(U6,{className:M.loadingIconPlaceholder,ownerState:P})}),Q=(v||w&&E==="end")&&n.jsx(Pwe,{className:M.endIcon,ownerState:P,children:v||n.jsx(U6,{className:M.loadingIconPlaceholder,ownerState:P})}),V=r||"",X=typeof w=="boolean"?n.jsx("span",{className:M.loadingWrapper,style:{display:"contents"},children:w&&n.jsx(Dwe,{className:M.loadingIndicator,ownerState:P,children:F})}):null;return n.jsxs(kwe,{ownerState:P,className:Pt(s.className,M.root,u,V),component:d,disabled:f||w,focusRipple:!x,focusVisibleClassName:Pt(M.focusVisible,N),ref:a,type:A,id:w?z:C,...$,classes:M,children:[G,E!=="end"&&X,l,E==="end"&&X,Q]})}),Mwe={baseButton:Owe,baseIconButton:Swe},Iwe={},$we=qe({},Mwe,Iwe),Rwe=h.createContext(null);function zwe(e){const{slots:t,slotProps:a={},defaultSlots:s,children:r}=e,i=h.useMemo(()=>({slots:qe({},s,t),slotProps:a}),[s,t,a]);return n.jsx(Rwe.Provider,{value:i,children:r})}const Uwe=["children","localeText","plugins","seriesConfig","slots","slotProps"],Fwe=e=>{const t=_i({props:e,name:"MuiChartDataProvider"}),{children:a,localeText:s,plugins:r=cV,seriesConfig:i,slots:o,slotProps:l}=t,c=xn(t,Uwe),d=Ho(),u={plugins:r,seriesConfig:i,pluginParams:qe({theme:d.palette.mode},c)};return{children:a,localeText:s,chartProviderProps:u,slots:o,slotProps:l}};function Bwe(e){const{children:t,localeText:a,chartProviderProps:s,slots:r,slotProps:i}=Fwe(e);return n.jsx(Yxe,qe({},s,{children:n.jsx(uxe,{localeText:a,children:n.jsx(zwe,{slots:r,slotProps:i,defaultSlots:$we,children:t})})}))}function F6(e){const{isReversed:t,gradientId:a,size:s,direction:r,scale:i,colorMap:o}=e;return s<=0?null:n.jsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((l,c)=>{const d=i(l);if(d===void 0)return null;const u=t?1-d/s:d/s;return Number.isNaN(u)?null:n.jsxs(h.Fragment,{children:[n.jsx("stop",{offset:u,stopColor:o.colors[c],stopOpacity:1}),n.jsx("stop",{offset:u,stopColor:o.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const Hwe=10;function B6(e){const{gradientUnits:t,isReversed:a,gradientId:s,size:r,direction:i,scale:o,colorScale:l,colorMap:c}=e,d=[c.min??0,c.max??100],u=d.map(o).filter(v=>v!==void 0);if(u.length!==2)return null;const f=typeof d[0]=="number"?Nf(d[0],d[1]):LL(d[0],d[1]),p=Math.round((Math.max(...u)-Math.min(...u))/Hwe),x=`${d[0]}-${d[1]}-`;return n.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${a?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(v,N)=>{const b=f(N/p);if(b===void 0)return null;const C=o(b);if(C===void 0)return null;const w=a?1-C/r:C/r,S=l(b);return S===null?null:n.jsx("stop",{offset:w,stopColor:S,stopOpacity:1},x+N)})})}const Gwe=10,Wwe=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function t_(e){const{isReversed:t,gradientId:a,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],o=typeof i[0]=="number"?Nf(i[0],i[1]):LL(i[0],i[1]),l=Gwe,c=`${i[0]}-${i[1]}-`;return n.jsx("linearGradient",qe({id:a},Wwe(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(d,u)=>{const f=u/l,p=o(f);if(p===void 0)return null;const x=s(p);return x===null?null:n.jsx("stop",{offset:f,stopColor:x,stopOpacity:1},c+u)})}))}function qwe(){const{top:e,height:t,bottom:a,left:s,width:r,right:i}=Ti(),o=e+t+a,l=s+r+i,c=pP(),d=Wpe(),{xAxis:u,xAxisIds:f}=xr(),{yAxis:p,yAxisIds:x}=yr(),{zAxis:v,zAxisIds:N}=fP(),b=x.filter(S=>p[S].colorMap!==void 0),C=f.filter(S=>u[S].colorMap!==void 0),w=N.filter(S=>v[S].colorMap!==void 0);return b.length===0&&C.length===0&&w.length===0?null:n.jsxs("defs",{children:[b.map(S=>{const E=c(S),k=d(S),{colorMap:_,scale:A,colorScale:T,reverse:$}=p[S];return _?.type==="piecewise"?n.jsx(F6,{isReversed:!$,scale:A,colorMap:_,size:o,gradientId:E,direction:"y"},E):_?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(B6,{isReversed:!$,scale:A,colorScale:T,colorMap:_,size:o,gradientId:E,direction:"y"}),n.jsx(t_,{isReversed:$,colorScale:T,colorMap:_,gradientId:k})]},E):null}),C.map(S=>{const E=c(S),k=d(S),{colorMap:_,scale:A,reverse:T,colorScale:$}=u[S];return _?.type==="piecewise"?n.jsx(F6,{isReversed:T,scale:A,colorMap:_,size:l,gradientId:E,direction:"x"},E):_?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(B6,{isReversed:T,scale:A,colorScale:$,colorMap:_,size:l,gradientId:E,direction:"x"}),n.jsx(t_,{isReversed:T,colorScale:$,colorMap:_,gradientId:k})]},E):null}),w.map(S=>{const E=d(S),{colorMap:k,colorScale:_}=v[S];return k?.type==="continuous"?n.jsx(t_,{colorScale:_,colorMap:k,gradientId:E},E):null})]})}function Vwe(e){return Va("MuiChartsSurface",e)}const Qwe=()=>qa({root:["root"]},Vwe);Aa("MuiChartsSurface",["root"]);const Ywe=["children","className","title","desc"],Kwe=un("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),Xwe=h.forwardRef(function(t,a){const s=Qn(),r=Ft(s,Pue),i=Ft(s,Due),o=Ft(s,B9),l=Ft(s,H9),c=Ft(s,xge),d=Ft(s,pge),u=Ft(s,Khe),f=hP(),p=$o(f,a),x=_i({props:t,name:"MuiChartsSurface"}),{children:v,className:N,title:b,desc:C}=x,w=xn(x,Ywe),S=Qwe(),E=i>0&&r>0;return n.jsxs(Kwe,qe({ownerState:{width:o,height:l,hasZoom:u},viewBox:`0 0 ${r} ${i}`,className:Pt(S.root,N),tabIndex:c?0:void 0,"data-has-focused-item":d||void 0},w,{ref:p,children:[b&&n.jsx("title",{children:b}),C&&n.jsx("desc",{children:C}),n.jsx(qwe,{}),E&&v]}))}),H6=Aa("MuiChartsToolbar",["root"]),Zwe=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",Jwe=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",eNe=(e,t,a)=>e?'"chart"':t==="vertical"?a?.horizontal==="start"?'"legend chart"':'"chart legend"':a?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,tNe=(e=!1,t="horizontal",a="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:a==="start"?`auto ${r}`:`${r} auto`},nNe=(e=!1,t="horizontal",a="top")=>t==="vertical"||e?"1fr":a==="bottom"?"1fr auto":"auto 1fr",aNe=un("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>Bb(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const a=tNe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=nNe(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=eNe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:a,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${H6.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${a.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${H6.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:Zwe(e.legendPosition),alignItems:Jwe(e.legendPosition)}});function sNe(e){const{children:t,sx:a,extendVertically:s}=e,r=ixe(),i=Qn(),o=Ft(i,B9),l=Ft(i,H9);return n.jsx(aNe,{ref:r,ownerState:e,sx:a,extendVertically:s??l===void 0,width:o,children:t})}function rNe(){const e=Qn(),t=Ft(e,kN),a=Ft(e,LN),s=Ft(e,PN);return h.useMemo(()=>t===void 0||a===void 0||s===void 0?null:{seriesType:t,seriesId:a,dataIndex:s},[t,a,s])}const Fy=6;function iNe(){const e=Ho(),t=rNe(),a=Ex(),{xAxis:s,xAxisIds:r}=xr(),{yAxis:i,yAxisIds:o}=yr();if(t===null||t.seriesType!=="line"||!a)return null;const l=a?.series[t.seriesId],c=l.xAxisId??r[0],d=l.yAxisId??o[0];return n.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-Fy,y:i[d].scale(l.stackedData[t.dataIndex][1])-Fy,width:2*Fy,height:2*Fy,rx:3,ry:3})}const YN=h.forwardRef(function(t,a){const s=_i({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:o,clipPathProps:l,clipPathGroupProps:c,areaPlotProps:d,linePlotProps:u,markPlotProps:f,overlayProps:p,chartsAxisProps:x,axisHighlightProps:v,lineHighlightPlotProps:N,legendProps:b,children:C}=nwe(s),{chartDataProviderProps:w,chartsSurfaceProps:S}=rwe(i,a),E=s.slots?.tooltip??mve,k=s.slots?.toolbar;return n.jsx(Bwe,qe({},w,{children:n.jsxs(sNe,qe({},r,{children:[s.showToolbar&&k?n.jsx(k,qe({},s.slotProps?.toolbar)):null,!s.hideLegend&&n.jsx(Sve,qe({},b)),n.jsxs(Xwe,qe({},S,{children:[n.jsx(Wve,qe({},o)),n.jsxs("g",qe({},c,{children:[n.jsx(c0e,qe({},d)),n.jsx(w0e,qe({},u)),n.jsx(Jve,qe({},p)),n.jsx(kve,qe({},v))]})),n.jsx(iNe,{}),n.jsx(bye,qe({},x)),n.jsx("g",{"data-drawing-container":!0,children:n.jsx(k0e,qe({},f))}),n.jsx(Rve,qe({},N)),n.jsx(Lve,qe({},l)),C]})),!s.loading&&n.jsx(E,qe({},s.slotProps?.tooltip))]}))}))});function oNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const KN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Zf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function OP(e){return"nodeType"in e}function br(e){var t,a;return e?Zf(e)?e:OP(e)&&(t=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?t:window:window}function MP(e){const{Document:t}=br(e);return e instanceof t}function Dx(e){return Zf(e)?!1:e instanceof br(e).HTMLElement}function mV(e){return e instanceof br(e).SVGElement}function Jf(e){return e?Zf(e)?e.document:OP(e)?MP(e)?e:Dx(e)||mV(e)?e.ownerDocument:document:document:document}const zo=KN?h.useLayoutEffect:h.useEffect;function IP(e){const t=h.useRef(e);return zo(()=>{t.current=e}),h.useCallback(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function lNe(){const e=h.useRef(null),t=h.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),a=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,a]}function Sp(e,t){t===void 0&&(t=[e]);const a=h.useRef(e);return zo(()=>{a.current!==e&&(a.current=e)},t),a}function Ox(e,t){const a=h.useRef();return h.useMemo(()=>{const s=e(a.current);return a.current=s,s},[...t])}function Dv(e){const t=IP(e),a=h.useRef(null),s=h.useCallback(r=>{r!==a.current&&t?.(r,a.current),a.current=r},[]);return[a,s]}function xE(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let n_={};function Mx(e,t){return h.useMemo(()=>{if(t)return t;const a=n_[e]==null?0:n_[e]+1;return n_[e]=a,e+"-"+a},[e,t])}function fV(e){return function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];return s.reduce((i,o)=>{const l=Object.entries(o);for(const[c,d]of l){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const gf=fV(1),_p=fV(-1);function cNe(e){return"clientX"in e&&"clientY"in e}function $P(e){if(!e)return!1;const{KeyboardEvent:t}=br(e.target);return t&&e instanceof t}function dNe(e){if(!e)return!1;const{TouchEvent:t}=br(e.target);return t&&e instanceof t}function yE(e){if(dNe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:a}=e.touches[0];return{x:t,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:a}=e.changedTouches[0];return{x:t,y:a}}}return cNe(e)?{x:e.clientX,y:e.clientY}:null}const Ap=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:a}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:a}=e;return"scaleX("+t+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[Ap.Translate.toString(e),Ap.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:a,easing:s}=e;return t+" "+a+"ms "+s}}}),G6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uNe(e){return e.matches(G6)?e:e.querySelector(G6)}const mNe={display:"none"};function fNe(e){let{id:t,value:a}=e;return yt.createElement("div",{id:t,style:mNe},a)}function hNe(e){let{id:t,announcement:a,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return yt.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},a)}function gNe(){const[e,t]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const hV=h.createContext(null);function pNe(e){const t=h.useContext(hV);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function xNe(){const[e]=h.useState(()=>new Set),t=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:r,event:i}=s;e.forEach(o=>{var l;return(l=o[r])==null?void 0:l.call(o,i)})},[e]),t]}const yNe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},bNe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was moved over droppable area "+a.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was dropped over droppable area "+a.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function vNe(e){let{announcements:t=bNe,container:a,hiddenTextDescribedById:s,screenReaderInstructions:r=yNe}=e;const{announce:i,announcement:o}=gNe(),l=Mx("DndLiveRegion"),[c,d]=h.useState(!1);if(h.useEffect(()=>{d(!0)},[]),pNe(h.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:x}=f;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(f){let{active:p,over:x}=f;i(t.onDragOver({active:p,over:x}))},onDragEnd(f){let{active:p,over:x}=f;i(t.onDragEnd({active:p,over:x}))},onDragCancel(f){let{active:p,over:x}=f;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!c)return null;const u=yt.createElement(yt.Fragment,null,yt.createElement(fNe,{id:s,value:r.draggable}),yt.createElement(hNe,{id:l,announcement:o}));return a?Hi.createPortal(u,a):u}var ts;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ts||(ts={}));function Ov(){}function W6(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function wNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Qi=Object.freeze({x:0,y:0});function gV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function pV(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return a-s}function NNe(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return s-a}function q6(e){let{left:t,top:a,height:s,width:r}=e;return[{x:t,y:a},{x:t+r,y:a},{x:t,y:a+s},{x:t+r,y:a+s}]}function xV(e,t){if(!e||e.length===0)return null;const[a]=e;return a[t]}function V6(e,t,a){return t===void 0&&(t=e.left),a===void 0&&(a=e.top),{x:t+e.width*.5,y:a+e.height*.5}}const jNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=V6(t,t.left,t.top),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=gV(V6(c),r);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(pV)},CNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=q6(t),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=q6(c),u=r.reduce((p,x,v)=>p+gV(d[v],x),0),f=Number((u/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(pV)};function SNe(e,t){const a=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=r-s,l=i-a;if(s<r&&a<i){const c=t.width*t.height,d=e.width*e.height,u=o*l,f=u/(c+d-u);return Number(f.toFixed(4))}return 0}const _Ne=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=[];for(const i of s){const{id:o}=i,l=a.get(o);if(l){const c=SNe(l,t);c>0&&r.push({id:o,data:{droppableContainer:i,value:c}})}}return r.sort(NNe)};function ANe(e,t,a){return{...e,scaleX:t&&a?t.width/a.width:1,scaleY:t&&a?t.height/a.height:1}}function yV(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Qi}function TNe(e){return function(a){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...a})}}const ENe=TNe(1);function kNe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function LNe(e,t,a){const s=kNe(t);if(!s)return e;const{scaleX:r,scaleY:i,x:o,y:l}=s,c=e.left-o-(1-r)*parseFloat(a),d=e.top-l-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),u=r?e.width/r:e.width,f=i?e.height/i:e.height;return{width:u,height:f,top:d,right:c+u,bottom:d+f,left:c}}const PNe={ignoreTransform:!1};function eh(e,t){t===void 0&&(t=PNe);let a=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=br(e).getComputedStyle(e);d&&(a=LNe(a,d,u))}const{top:s,left:r,width:i,height:o,bottom:l,right:c}=a;return{top:s,left:r,width:i,height:o,bottom:l,right:c}}function Q6(e){return eh(e,{ignoreTransform:!0})}function DNe(e){const t=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:t,bottom:a,width:t,height:a}}function ONe(e,t){return t===void 0&&(t=br(e).getComputedStyle(e)),t.position==="fixed"}function MNe(e,t){t===void 0&&(t=br(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?a.test(i):!1})}function XN(e,t){const a=[];function s(r){if(t!=null&&a.length>=t||!r)return a;if(MP(r)&&r.scrollingElement!=null&&!a.includes(r.scrollingElement))return a.push(r.scrollingElement),a;if(!Dx(r)||mV(r)||a.includes(r))return a;const i=br(e).getComputedStyle(r);return r!==e&&MNe(r,i)&&a.push(r),ONe(r,i)?a:s(r.parentNode)}return e?s(e):a}function bV(e){const[t]=XN(e,1);return t??null}function a_(e){return!KN||!e?null:Zf(e)?e:OP(e)?MP(e)||e===Jf(e).scrollingElement?window:Dx(e)?e:null:null}function vV(e){return Zf(e)?e.scrollX:e.scrollLeft}function wV(e){return Zf(e)?e.scrollY:e.scrollTop}function bE(e){return{x:vV(e),y:wV(e)}}var hs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(hs||(hs={}));function NV(e){return!KN||!e?!1:e===document.scrollingElement}function jV(e){const t={x:0,y:0},a=NV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:r,isLeft:i,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const INe={x:.2,y:.2};function $Ne(e,t,a,s,r){let{top:i,left:o,right:l,bottom:c}=a;s===void 0&&(s=10),r===void 0&&(r=INe);const{isTop:d,isBottom:u,isLeft:f,isRight:p}=jV(e),x={x:0,y:0},v={x:0,y:0},N={height:t.height*r.y,width:t.width*r.x};return!d&&i<=t.top+N.height?(x.y=hs.Backward,v.y=s*Math.abs((t.top+N.height-i)/N.height)):!u&&c>=t.bottom-N.height&&(x.y=hs.Forward,v.y=s*Math.abs((t.bottom-N.height-c)/N.height)),!p&&l>=t.right-N.width?(x.x=hs.Forward,v.x=s*Math.abs((t.right-N.width-l)/N.width)):!f&&o<=t.left+N.width&&(x.x=hs.Backward,v.x=s*Math.abs((t.left+N.width-o)/N.width)),{direction:x,speed:v}}function RNe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:a,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:a,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function CV(e){return e.reduce((t,a)=>gf(t,bE(a)),Qi)}function zNe(e){return e.reduce((t,a)=>t+vV(a),0)}function UNe(e){return e.reduce((t,a)=>t+wV(a),0)}function FNe(e,t){if(t===void 0&&(t=eh),!e)return;const{top:a,left:s,bottom:r,right:i}=t(e);bV(e)&&(r<=0||i<=0||a>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const BNe=[["x",["left","right"],zNe],["y",["top","bottom"],UNe]];class RP{constructor(t,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=XN(a),r=CV(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of BNe)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(s),u=r[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Kg{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=t}add(t,a,s){var r;(r=this.target)==null||r.addEventListener(t,a,s),this.listeners.push([t,a,s])}}function HNe(e){const{EventTarget:t}=br(e);return e instanceof t?e:Jf(e)}function s_(e,t){const a=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(a**2+s**2)>t:"x"in t&&"y"in t?a>t.x&&s>t.y:"x"in t?a>t.x:"y"in t?s>t.y:!1}var di;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(di||(di={}));function Y6(e){e.preventDefault()}function GNe(e){e.stopPropagation()}var vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(vn||(vn={}));const SV={start:[vn.Space,vn.Enter],cancel:[vn.Esc],end:[vn.Space,vn.Enter,vn.Tab]},WNe=(e,t)=>{let{currentCoordinates:a}=t;switch(e.code){case vn.Right:return{...a,x:a.x+25};case vn.Left:return{...a,x:a.x-25};case vn.Down:return{...a,y:a.y+25};case vn.Up:return{...a,y:a.y-25}}};class zP{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:a}}=t;this.props=t,this.listeners=new Kg(Jf(a)),this.windowListeners=new Kg(br(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(di.Resize,this.handleCancel),this.windowListeners.add(di.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(di.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:a}=this.props,s=t.node.current;s&&FNe(s),a(Qi)}handleKeyDown(t){if($P(t)){const{active:a,context:s,options:r}=this.props,{keyboardCodes:i=SV,coordinateGetter:o=WNe,scrollBehavior:l="smooth"}=r,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:Qi;this.referenceCoordinates||(this.referenceCoordinates=u);const f=o(t,{active:a,context:s.current,currentCoordinates:u});if(f){const p=_p(f,u),x={x:0,y:0},{scrollableAncestors:v}=s.current;for(const N of v){const b=t.code,{isTop:C,isRight:w,isLeft:S,isBottom:E,maxScroll:k,minScroll:_}=jV(N),A=RNe(N),T={x:Math.min(b===vn.Right?A.right-A.width/2:A.right,Math.max(b===vn.Right?A.left:A.left+A.width/2,f.x)),y:Math.min(b===vn.Down?A.bottom-A.height/2:A.bottom,Math.max(b===vn.Down?A.top:A.top+A.height/2,f.y))},$=b===vn.Right&&!w||b===vn.Left&&!S,z=b===vn.Down&&!E||b===vn.Up&&!C;if($&&T.x!==f.x){const F=N.scrollLeft+p.x,P=b===vn.Right&&F<=k.x||b===vn.Left&&F>=_.x;if(P&&!p.y){N.scrollTo({left:F,behavior:l});return}P?x.x=N.scrollLeft-F:x.x=b===vn.Right?N.scrollLeft-k.x:N.scrollLeft-_.x,x.x&&N.scrollBy({left:-x.x,behavior:l});break}else if(z&&T.y!==f.y){const F=N.scrollTop+p.y,P=b===vn.Down&&F<=k.y||b===vn.Up&&F>=_.y;if(P&&!p.x){N.scrollTo({top:F,behavior:l});return}P?x.y=N.scrollTop-F:x.y=b===vn.Down?N.scrollTop-k.y:N.scrollTop-_.y,x.y&&N.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,gf(_p(f,this.referenceCoordinates),x))}}}handleMove(t,a){const{onMove:s}=this.props;t.preventDefault(),s(a)}handleEnd(t){const{onEnd:a}=this.props;t.preventDefault(),this.detach(),a()}handleCancel(t){const{onCancel:a}=this.props;t.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}zP.activators=[{eventName:"onKeyDown",handler:(e,t,a)=>{let{keyboardCodes:s=SV,onActivation:r}=t,{active:i}=a;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function K6(e){return!!(e&&"distance"in e)}function X6(e){return!!(e&&"delay"in e)}class UP{constructor(t,a,s){var r;s===void 0&&(s=HNe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=a;const{event:i}=t,{target:o}=i;this.props=t,this.events=a,this.document=Jf(o),this.documentListeners=new Kg(this.document),this.listeners=new Kg(s),this.windowListeners=new Kg(br(o)),this.initialCoordinates=(r=yE(i))!=null?r:Qi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(di.Resize,this.handleCancel),this.windowListeners.add(di.DragStart,Y6),this.windowListeners.add(di.VisibilityChange,this.handleCancel),this.windowListeners.add(di.ContextMenu,Y6),this.documentListeners.add(di.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(X6(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(K6(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,a){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:t}=this,{onStart:a}=this.props;t&&(this.activated=!0,this.documentListeners.add(di.Click,GNe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(di.SelectionChange,this.removeTextSelection),a(t))}handleMove(t){var a;const{activated:s,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!r)return;const c=(a=yE(t))!=null?a:Qi,d=_p(r,c);if(!s&&l){if(K6(l)){if(l.tolerance!=null&&s_(d,l.tolerance))return this.handleCancel();if(s_(d,l.distance))return this.handleStart()}if(X6(l)&&s_(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleCancel(){const{onAbort:t,onCancel:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleKeydown(t){t.code===vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const qNe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class FP extends UP{constructor(t){const{event:a}=t,s=Jf(a.target);super(t,qNe,s)}}FP.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const VNe={move:{name:"mousemove"},end:{name:"mouseup"}};var vE;(function(e){e[e.RightClick=2]="RightClick"})(vE||(vE={}));class QNe extends UP{constructor(t){super(t,VNe,Jf(t.event.target))}}QNe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return a.button===vE.RightClick?!1:(s?.({event:a}),!0)}}];const r_={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class YNe extends UP{constructor(t){super(t,r_)}static setup(){return window.addEventListener(r_.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(r_.move.name,t)};function t(){}}}YNe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;const{touches:r}=a;return r.length>1?!1:(s?.({event:a}),!0)}}];var Xg;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Xg||(Xg={}));var Mv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Mv||(Mv={}));function KNe(e){let{acceleration:t,activator:a=Xg.Pointer,canScroll:s,draggingRect:r,enabled:i,interval:o=5,order:l=Mv.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:f,threshold:p}=e;const x=ZNe({delta:f,disabled:!i}),[v,N]=lNe(),b=h.useRef({x:0,y:0}),C=h.useRef({x:0,y:0}),w=h.useMemo(()=>{switch(a){case Xg.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Xg.DraggableRect:return r}},[a,r,c]),S=h.useRef(null),E=h.useCallback(()=>{const _=S.current;if(!_)return;const A=b.current.x*C.current.x,T=b.current.y*C.current.y;_.scrollBy(A,T)},[]),k=h.useMemo(()=>l===Mv.TreeOrder?[...d].reverse():d,[l,d]);h.useEffect(()=>{if(!i||!d.length||!w){N();return}for(const _ of k){if(s?.(_)===!1)continue;const A=d.indexOf(_),T=u[A];if(!T)continue;const{direction:$,speed:z}=$Ne(_,T,w,t,p);for(const F of["x","y"])x[F][$[F]]||(z[F]=0,$[F]=0);if(z.x>0||z.y>0){N(),S.current=_,v(E,o),b.current=z,C.current=$;return}}b.current={x:0,y:0},C.current={x:0,y:0},N()},[t,E,s,N,i,o,JSON.stringify(w),JSON.stringify(x),v,d,k,u,JSON.stringify(p)])}const XNe={x:{[hs.Backward]:!1,[hs.Forward]:!1},y:{[hs.Backward]:!1,[hs.Forward]:!1}};function ZNe(e){let{delta:t,disabled:a}=e;const s=xE(t);return Ox(r=>{if(a||!s||!r)return XNe;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[hs.Backward]:r.x[hs.Backward]||i.x===-1,[hs.Forward]:r.x[hs.Forward]||i.x===1},y:{[hs.Backward]:r.y[hs.Backward]||i.y===-1,[hs.Forward]:r.y[hs.Forward]||i.y===1}}},[a,t,s])}function JNe(e,t){const a=t!=null?e.get(t):void 0,s=a?a.node.current:null;return Ox(r=>{var i;return t==null?null:(i=s??r)!=null?i:null},[s,t])}function eje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{const{sensor:r}=s,i=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...a,...i]},[]),[e,t])}var Tp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Tp||(Tp={}));var wE;(function(e){e.Optimized="optimized"})(wE||(wE={}));const Z6=new Map;function tje(e,t){let{dragging:a,dependencies:s,config:r}=t;const[i,o]=h.useState(null),{frequency:l,measure:c,strategy:d}=r,u=h.useRef(e),f=b(),p=Sp(f),x=h.useCallback(function(C){C===void 0&&(C=[]),!p.current&&o(w=>w===null?C:w.concat(C.filter(S=>!w.includes(S))))},[p]),v=h.useRef(null),N=Ox(C=>{if(f&&!a)return Z6;if(!C||C===Z6||u.current!==e||i!=null){const w=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const E=S.node.current,k=E?new RP(c(E),E):null;S.rect.current=k,k&&w.set(S.id,k)}return w}return C},[e,i,a,f,c]);return h.useEffect(()=>{u.current=e},[e]),h.useEffect(()=>{f||x()},[a,f]),h.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),h.useEffect(()=>{f||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{x(),v.current=null},l))},[l,f,x,...s]),{droppableRects:N,measureDroppableContainers:x,measuringScheduled:i!=null};function b(){switch(d){case Tp.Always:return!1;case Tp.BeforeDragging:return a;default:return!a}}}function _V(e,t){return Ox(a=>e?a||(typeof t=="function"?t(e):e):null,[t,e])}function nje(e,t){return _V(e,t)}function aje(e){let{callback:t,disabled:a}=e;const s=IP(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function ZN(e){let{callback:t,disabled:a}=e;const s=IP(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function sje(e){return new RP(eh(e),e)}function J6(e,t,a){t===void 0&&(t=sje);const[s,r]=h.useState(null);function i(){r(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??a)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=aje({callback(c){if(e)for(const d of c){const{type:u,target:f}=d;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=ZN({callback:i});return zo(()=>{i(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function rje(e){const t=_V(e);return yV(e,t)}const eR=[];function ije(e){const t=h.useRef(e),a=Ox(s=>e?s&&s!==eR&&e&&t.current&&e.parentNode===t.current.parentNode?s:XN(e):eR,[e]);return h.useEffect(()=>{t.current=e},[e]),a}function oje(e){const[t,a]=h.useState(null),s=h.useRef(e),r=h.useCallback(i=>{const o=a_(i.target);o&&a(l=>l?(l.set(o,bE(o)),new Map(l)):null)},[]);return h.useEffect(()=>{const i=s.current;if(e!==i){o(i);const l=e.map(c=>{const d=a_(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,bE(d)]):null}).filter(c=>c!=null);a(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const d=a_(c);d?.removeEventListener("scroll",r)})}},[r,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>gf(i,o),Qi):CV(e):Qi,[e,t])}function tR(e,t){t===void 0&&(t=[]);const a=h.useRef(null);return h.useEffect(()=>{a.current=null},t),h.useEffect(()=>{const s=e!==Qi;s&&!a.current&&(a.current=e),!s&&a.current&&(a.current=null)},[e]),a.current?_p(e,a.current):Qi}function lje(e){h.useEffect(()=>{if(!KN)return;const t=e.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of t)a?.()}},e.map(t=>{let{sensor:a}=t;return a}))}function cje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{let{eventName:r,handler:i}=s;return a[r]=o=>{i(o,t)},a},{}),[e,t])}function AV(e){return h.useMemo(()=>e?DNe(e):null,[e])}const nR=[];function dje(e,t){t===void 0&&(t=eh);const[a]=e,s=AV(a?br(a):null),[r,i]=h.useState(nR);function o(){i(()=>e.length?e.map(c=>NV(c)?s:new RP(t(c),c)):nR)}const l=ZN({callback:o});return zo(()=>{l?.disconnect(),o(),e.forEach(c=>l?.observe(c))},[e]),r}function uje(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Dx(t)?t:e}function mje(e){let{measure:t}=e;const[a,s]=h.useState(null),r=h.useCallback(d=>{for(const{target:u}of d)if(Dx(u)){s(f=>{const p=t(u);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=ZN({callback:r}),o=h.useCallback(d=>{const u=uje(d);i?.disconnect(),u&&i?.observe(u),s(u?t(u):null)},[t,i]),[l,c]=Dv(o);return h.useMemo(()=>({nodeRef:l,rect:a,setRef:c}),[a,l,c])}const fje=[{sensor:FP,options:{}},{sensor:zP,options:{}}],hje={current:{}},Wb={draggable:{measure:Q6},droppable:{measure:Q6,strategy:Tp.WhileDragging,frequency:wE.Optimized},dragOverlay:{measure:eh}};class Zg extends Map{get(t){var a;return t!=null&&(a=super.get(t))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:a}=t;return!a})}getNodeFor(t){var a,s;return(a=(s=this.get(t))==null?void 0:s.node.current)!=null?a:void 0}}const gje={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Zg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ov},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wb,measureDroppableContainers:Ov,windowRect:null,measuringScheduled:!1},pje={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ov,draggableNodes:new Map,over:null,measureDroppableContainers:Ov},JN=h.createContext(pje),TV=h.createContext(gje);function xje(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Zg}}}function yje(e,t){switch(t.type){case ts.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ts.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ts.DragEnd:case ts.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ts.RegisterDroppable:{const{element:a}=t,{id:s}=a,r=new Zg(e.droppable.containers);return r.set(s,a),{...e,droppable:{...e.droppable,containers:r}}}case ts.SetDroppableDisabled:{const{id:a,key:s,disabled:r}=t,i=e.droppable.containers.get(a);if(!i||s!==i.key)return e;const o=new Zg(e.droppable.containers);return o.set(a,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case ts.UnregisterDroppable:{const{id:a,key:s}=t,r=e.droppable.containers.get(a);if(!r||s!==r.key)return e;const i=new Zg(e.droppable.containers);return i.delete(a),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function bje(e){let{disabled:t}=e;const{active:a,activatorEvent:s,draggableNodes:r}=h.useContext(JN),i=xE(s),o=xE(a?.id);return h.useEffect(()=>{if(!t&&!s&&i&&o!=null){if(!$P(i)||document.activeElement===i.target)return;const l=r.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const f=uNe(u);if(f){f.focus();break}}})}},[s,t,r,o,i]),null}function vje(e,t){let{transform:a,...s}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...s}),a):a}function wje(e){return h.useMemo(()=>({draggable:{...Wb.draggable,...e?.draggable},droppable:{...Wb.droppable,...e?.droppable},dragOverlay:{...Wb.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Nje(e){let{activeNode:t,measure:a,initialRect:s,config:r=!0}=e;const i=h.useRef(!1),{x:o,y:l}=typeof r=="boolean"?{x:r,y:r}:r;zo(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!s)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const u=a(d),f=yV(u,s);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=bV(d);p&&p.scrollBy({top:f.y,left:f.x})}},[t,o,l,s,a])}const EV=h.createContext({...Qi,scaleX:1,scaleY:1});var Bc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Bc||(Bc={}));const jje=h.memo(function(t){var a,s,r,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=fje,collisionDetection:f=_Ne,measuring:p,modifiers:x,...v}=t;const N=h.useReducer(yje,void 0,xje),[b,C]=N,[w,S]=xNe(),[E,k]=h.useState(Bc.Uninitialized),_=E===Bc.Initialized,{draggable:{active:A,nodes:T,translate:$},droppable:{containers:z}}=b,F=A!=null?T.get(A):null,P=h.useRef({initial:null,translated:null}),M=h.useMemo(()=>{var de;return A!=null?{id:A,data:(de=F?.data)!=null?de:hje,rect:P}:null},[A,F]),G=h.useRef(null),[Q,V]=h.useState(null),[X,q]=h.useState(null),ne=Sp(v,Object.values(v)),oe=Mx("DndDescribedBy",o),K=h.useMemo(()=>z.getEnabled(),[z]),R=wje(p),{droppableRects:ye,measureDroppableContainers:pe,measuringScheduled:Ne}=tje(K,{dragging:_,dependencies:[$.x,$.y],config:R.droppable}),Se=JNe(T,A),Oe=h.useMemo(()=>X?yE(X):null,[X]),ke=J(),he=nje(Se,R.draggable.measure);Nje({activeNode:A!=null?T.get(A):null,config:ke.layoutShiftCompensation,initialRect:he,measure:R.draggable.measure});const Ge=J6(Se,R.draggable.measure,he),Ce=J6(Se?Se.parentElement:null),xe=h.useRef({activatorEvent:null,active:null,activeNode:Se,collisionRect:null,collisions:null,droppableRects:ye,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ee=z.getNodeFor((a=xe.current.over)==null?void 0:a.id),Ee=mje({measure:R.dragOverlay.measure}),Ae=(s=Ee.nodeRef.current)!=null?s:Se,Re=_?(r=Ee.rect)!=null?r:Ge:null,et=!!(Ee.nodeRef.current&&Ee.rect),De=rje(et?null:Ge),tt=AV(Ae?br(Ae):null),Je=ije(_?ee??Se:null),H=dje(Je),be=vje(x,{transform:{x:$.x-De.x,y:$.y-De.y,scaleX:1,scaleY:1},activatorEvent:X,active:M,activeNodeRect:Ge,containerNodeRect:Ce,draggingNodeRect:Re,over:xe.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:Je,scrollableAncestorRects:H,windowRect:tt}),le=Oe?gf(Oe,$):null,Z=oje(Je),_e=tR(Z),te=tR(Z,[Ge]),Ue=gf(be,_e),Ie=Re?ENe(Re,be):null,We=M&&Ie?f({active:M,collisionRect:Ie,droppableRects:ye,droppableContainers:K,pointerCoordinates:le}):null,gt=xV(We,"id"),[ve,Be]=h.useState(null),nt=et?be:gf(be,te),Te=ANe(nt,(i=ve?.rect)!=null?i:null,Ge),Qe=h.useRef(null),ct=h.useCallback((de,D)=>{let{sensor:B,options:ie}=D;if(G.current==null)return;const ue=T.get(G.current);if(!ue)return;const se=de.nativeEvent,Pe=new B({active:G.current,activeNode:ue,event:se,options:ie,context:xe,onAbort(fe){if(!T.get(fe))return;const{onDragAbort:Xe}=ne.current,pt={id:fe};Xe?.(pt),w({type:"onDragAbort",event:pt})},onPending(fe,Fe,Xe,pt){if(!T.get(fe))return;const{onDragPending:St}=ne.current,Ht={id:fe,constraint:Fe,initialCoordinates:Xe,offset:pt};St?.(Ht),w({type:"onDragPending",event:Ht})},onStart(fe){const Fe=G.current;if(Fe==null)return;const Xe=T.get(Fe);if(!Xe)return;const{onDragStart:pt}=ne.current,Nt={activatorEvent:se,active:{id:Fe,data:Xe.data,rect:P}};Hi.unstable_batchedUpdates(()=>{pt?.(Nt),k(Bc.Initializing),C({type:ts.DragStart,initialCoordinates:fe,active:Fe}),w({type:"onDragStart",event:Nt}),V(Qe.current),q(se)})},onMove(fe){C({type:ts.DragMove,coordinates:fe})},onEnd:ge(ts.DragEnd),onCancel:ge(ts.DragCancel)});Qe.current=Pe;function ge(fe){return async function(){const{active:Xe,collisions:pt,over:Nt,scrollAdjustedTranslate:St}=xe.current;let Ht=null;if(Xe&&St){const{cancelDrop:on}=ne.current;Ht={activatorEvent:se,active:Xe,collisions:pt,delta:St,over:Nt},fe===ts.DragEnd&&typeof on=="function"&&await Promise.resolve(on(Ht))&&(fe=ts.DragCancel)}G.current=null,Hi.unstable_batchedUpdates(()=>{C({type:fe}),k(Bc.Uninitialized),Be(null),V(null),q(null),Qe.current=null;const on=fe===ts.DragEnd?"onDragEnd":"onDragCancel";if(Ht){const cn=ne.current[on];cn?.(Ht),w({type:on,event:Ht})}})}}},[T]),ht=h.useCallback((de,D)=>(B,ie)=>{const ue=B.nativeEvent,se=T.get(ie);if(G.current!==null||!se||ue.dndKit||ue.defaultPrevented)return;const Pe={active:se};de(B,D.options,Pe)===!0&&(ue.dndKit={capturedBy:D.sensor},G.current=ie,ct(B,D))},[T,ct]),je=eje(u,ht);lje(u),zo(()=>{Ge&&E===Bc.Initializing&&k(Bc.Initialized)},[Ge,E]),h.useEffect(()=>{const{onDragMove:de}=ne.current,{active:D,activatorEvent:B,collisions:ie,over:ue}=xe.current;if(!D||!B)return;const se={active:D,activatorEvent:B,collisions:ie,delta:{x:Ue.x,y:Ue.y},over:ue};Hi.unstable_batchedUpdates(()=>{de?.(se),w({type:"onDragMove",event:se})})},[Ue.x,Ue.y]),h.useEffect(()=>{const{active:de,activatorEvent:D,collisions:B,droppableContainers:ie,scrollAdjustedTranslate:ue}=xe.current;if(!de||G.current==null||!D||!ue)return;const{onDragOver:se}=ne.current,Pe=ie.get(gt),ge=Pe&&Pe.rect.current?{id:Pe.id,rect:Pe.rect.current,data:Pe.data,disabled:Pe.disabled}:null,fe={active:de,activatorEvent:D,collisions:B,delta:{x:ue.x,y:ue.y},over:ge};Hi.unstable_batchedUpdates(()=>{Be(ge),se?.(fe),w({type:"onDragOver",event:fe})})},[gt]),zo(()=>{xe.current={activatorEvent:X,active:M,activeNode:Se,collisionRect:Ie,collisions:We,droppableRects:ye,draggableNodes:T,draggingNode:Ae,draggingNodeRect:Re,droppableContainers:z,over:ve,scrollableAncestors:Je,scrollAdjustedTranslate:Ue},P.current={initial:Re,translated:Ie}},[M,Se,We,Ie,T,Ae,Re,ye,z,ve,Je,Ue]),KNe({...ke,delta:$,draggingRect:Ie,pointerCoordinates:le,scrollableAncestors:Je,scrollableAncestorRects:H});const Ze=h.useMemo(()=>({active:M,activeNode:Se,activeNodeRect:Ge,activatorEvent:X,collisions:We,containerNodeRect:Ce,dragOverlay:Ee,draggableNodes:T,droppableContainers:z,droppableRects:ye,over:ve,measureDroppableContainers:pe,scrollableAncestors:Je,scrollableAncestorRects:H,measuringConfiguration:R,measuringScheduled:Ne,windowRect:tt}),[M,Se,Ge,X,We,Ce,Ee,T,z,ye,ve,pe,Je,H,R,Ne,tt]),ce=h.useMemo(()=>({activatorEvent:X,activators:je,active:M,activeNodeRect:Ge,ariaDescribedById:{draggable:oe},dispatch:C,draggableNodes:T,over:ve,measureDroppableContainers:pe}),[X,je,M,Ge,C,oe,T,ve,pe]);return yt.createElement(hV.Provider,{value:S},yt.createElement(JN.Provider,{value:ce},yt.createElement(TV.Provider,{value:Ze},yt.createElement(EV.Provider,{value:Te},d)),yt.createElement(bje,{disabled:l?.restoreFocus===!1})),yt.createElement(vNe,{...l,hiddenTextDescribedById:oe}));function J(){const de=Q?.autoScrollEnabled===!1,D=typeof c=="object"?c.enabled===!1:c===!1,B=_&&!de&&!D;return typeof c=="object"?{...c,enabled:B}:{enabled:B}}}),Cje=h.createContext(null),aR="button",Sje="Draggable";function _je(e){let{id:t,data:a,disabled:s=!1,attributes:r}=e;const i=Mx(Sje),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:f,over:p}=h.useContext(JN),{role:x=aR,roleDescription:v="draggable",tabIndex:N=0}=r??{},b=c?.id===t,C=h.useContext(b?EV:Cje),[w,S]=Dv(),[E,k]=Dv(),_=cje(o,t),A=Sp(a);zo(()=>(f.set(t,{id:t,key:i,node:w,activatorNode:E,data:A}),()=>{const $=f.get(t);$&&$.key===i&&f.delete(t)}),[f,t]);const T=h.useMemo(()=>({role:x,tabIndex:N,"aria-disabled":s,"aria-pressed":b&&x===aR?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[s,x,N,b,v,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:T,isDragging:b,listeners:s?void 0:_,node:w,over:p,setNodeRef:S,setActivatorNodeRef:k,transform:C}}function Aje(){return h.useContext(TV)}const Tje="Droppable",Eje={timeout:25};function kje(e){let{data:t,disabled:a=!1,id:s,resizeObserverConfig:r}=e;const i=Mx(Tje),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=h.useContext(JN),u=h.useRef({disabled:a}),f=h.useRef(!1),p=h.useRef(null),x=h.useRef(null),{disabled:v,updateMeasurementsFor:N,timeout:b}={...Eje,...r},C=Sp(N??s),w=h.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(C.current)?C.current:[C.current]),x.current=null},b)},[b]),S=ZN({callback:w,disabled:v||!o}),E=h.useCallback((T,$)=>{S&&($&&(S.unobserve($),f.current=!1),T&&S.observe(T))},[S]),[k,_]=Dv(E),A=Sp(t);return h.useEffect(()=>{!S||!k.current||(S.disconnect(),f.current=!1,S.observe(k.current))},[k,S]),h.useEffect(()=>(l({type:ts.RegisterDroppable,element:{id:s,key:i,disabled:a,node:k,rect:p,data:A}}),()=>l({type:ts.UnregisterDroppable,key:i,id:s})),[s]),h.useEffect(()=>{a!==u.current.disabled&&(l({type:ts.SetDroppableDisabled,id:s,key:i,disabled:a}),u.current.disabled=a)},[s,i,a,l]),{active:o,rect:p,isOver:c?.id===s,node:k,over:c,setNodeRef:_}}function BP(e,t,a){const s=e.slice();return s.splice(a<0?s.length+a:a,0,s.splice(t,1)[0]),s}function Lje(e,t){return e.reduce((a,s,r)=>{const i=t.get(s);return i&&(a[r]=i),a},Array(e.length))}function By(e){return e!==null&&e>=0}function Pje(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function Dje(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const HP=e=>{let{rects:t,activeIndex:a,overIndex:s,index:r}=e;const i=BP(t,s,a),o=t[r],l=i[r];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},kV="Sortable",LV=yt.createContext({activeIndex:-1,containerId:kV,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:HP,disabled:{draggable:!1,droppable:!1}});function Oje(e){let{children:t,id:a,items:s,strategy:r=HP,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=Aje(),f=Mx(kV,a),p=l.rect!==null,x=h.useMemo(()=>s.map(_=>typeof _=="object"&&"id"in _?_.id:_),[s]),v=o!=null,N=o?x.indexOf(o.id):-1,b=d?x.indexOf(d.id):-1,C=h.useRef(x),w=!Pje(x,C.current),S=b!==-1&&N===-1||w,E=Dje(i);zo(()=>{w&&v&&u(x)},[w,x,v,u]),h.useEffect(()=>{C.current=x},[x]);const k=h.useMemo(()=>({activeIndex:N,containerId:f,disabled:E,disableTransforms:S,items:x,overIndex:b,useDragOverlay:p,sortedRects:Lje(x,c),strategy:r}),[N,f,E.draggable,E.droppable,S,x,b,c,p,r]);return yt.createElement(LV.Provider,{value:k},t)}const Mje=e=>{let{id:t,items:a,activeIndex:s,overIndex:r}=e;return BP(a,s,r).indexOf(t)},Ije=e=>{let{containerId:t,isSorting:a,wasDragging:s,index:r,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!s||l!==i&&r===o?!1:a?!0:o!==r&&t===c},$je={duration:200,easing:"ease"},PV="transform",Rje=Ap.Transition.toString({property:PV,duration:0,easing:"linear"}),zje={roleDescription:"sortable"};function Uje(e){let{disabled:t,index:a,node:s,rect:r}=e;const[i,o]=h.useState(null),l=h.useRef(a);return zo(()=>{if(!t&&a!==l.current&&s.current){const c=r.current;if(c){const d=eh(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&o(u)}}a!==l.current&&(l.current=a)},[t,a,s,r]),h.useEffect(()=>{i&&o(null)},[i]),i}function Fje(e){let{animateLayoutChanges:t=Ije,attributes:a,disabled:s,data:r,getNewIndex:i=Mje,id:o,strategy:l,resizeObserverConfig:c,transition:d=$je}=e;const{items:u,containerId:f,activeIndex:p,disabled:x,disableTransforms:v,sortedRects:N,overIndex:b,useDragOverlay:C,strategy:w}=h.useContext(LV),S=Bje(s,x),E=u.indexOf(o),k=h.useMemo(()=>({sortable:{containerId:f,index:E,items:u},...r}),[f,r,E,u]),_=h.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:A,node:T,isOver:$,setNodeRef:z}=kje({id:o,data:k,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:F,activatorEvent:P,activeNodeRect:M,attributes:G,setNodeRef:Q,listeners:V,isDragging:X,over:q,setActivatorNodeRef:ne,transform:oe}=_je({id:o,data:k,attributes:{...zje,...a},disabled:S.draggable}),K=oNe(z,Q),R=!!F,ye=R&&!v&&By(p)&&By(b),pe=!C&&X,Ne=pe&&ye?oe:null,Oe=ye?Ne??(l??w)({rects:N,activeNodeRect:M,activeIndex:p,overIndex:b,index:E}):null,ke=By(p)&&By(b)?i({id:o,items:u,activeIndex:p,overIndex:b}):E,he=F?.id,Ge=h.useRef({activeId:he,items:u,newIndex:ke,containerId:f}),Ce=u!==Ge.current.items,xe=t({active:F,containerId:f,isDragging:X,isSorting:R,id:o,index:E,items:u,newIndex:Ge.current.newIndex,previousItems:Ge.current.items,previousContainerId:Ge.current.containerId,transition:d,wasDragging:Ge.current.activeId!=null}),ee=Uje({disabled:!xe,index:E,node:T,rect:A});return h.useEffect(()=>{R&&Ge.current.newIndex!==ke&&(Ge.current.newIndex=ke),f!==Ge.current.containerId&&(Ge.current.containerId=f),u!==Ge.current.items&&(Ge.current.items=u)},[R,ke,f,u]),h.useEffect(()=>{if(he===Ge.current.activeId)return;if(he!=null&&Ge.current.activeId==null){Ge.current.activeId=he;return}const Ae=setTimeout(()=>{Ge.current.activeId=he},50);return()=>clearTimeout(Ae)},[he]),{active:F,activeIndex:p,attributes:G,data:k,rect:A,index:E,newIndex:ke,items:u,isOver:$,isSorting:R,isDragging:X,listeners:V,node:T,overIndex:b,over:q,setNodeRef:K,setActivatorNodeRef:ne,setDroppableNodeRef:z,setDraggableNodeRef:Q,transform:ee??Oe,transition:Ee()};function Ee(){if(ee||Ce&&Ge.current.newIndex===E)return Rje;if(!(pe&&!$P(P)||!d)&&(R||xe))return Ap.Transition.toString({...d,property:PV})}}function Bje(e,t){var a,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function Iv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Hje=[vn.Down,vn.Right,vn.Up,vn.Left],Gje=(e,t)=>{let{context:{active:a,collisionRect:s,droppableRects:r,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(Hje.includes(e.code)){if(e.preventDefault(),!a||!s)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=r.get(f.id);if(p)switch(e.code){case vn.Down:s.top<p.top&&c.push(f);break;case vn.Up:s.top>p.top&&c.push(f);break;case vn.Left:s.left>p.left&&c.push(f);break;case vn.Right:s.left<p.left&&c.push(f);break}});const d=CNe({collisionRect:s,droppableRects:r,droppableContainers:c});let u=xV(d,"id");if(u===o?.id&&d.length>1&&(u=d[1].id),u!=null){const f=i.get(a.id),p=i.get(u),x=p?r.get(p.id):null,v=p?.node.current;if(v&&x&&f&&p){const b=XN(v).some((_,A)=>l[A]!==_),C=DV(f,p),w=Wje(f,p),S=b||!C?{x:0,y:0}:{x:w?s.width-x.width:0,y:w?s.height-x.height:0},E={x:x.left,y:x.top};return S.x&&S.y?E:_p(E,S)}}}};function DV(e,t){return!Iv(e)||!Iv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Wje(e,t){return!Iv(e)||!Iv(t)||!DV(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Po=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,NE=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",qje=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},Vje=(e,t)=>{if(!e||e.length===0)return;const a=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:NE(c.created_at)})),s=Object.keys(a[0]).join(","),r=a.map(c=>Object.values(c).map(d=>typeof d=="string"?`"${d.replace(/"/g,'""')}"`:d).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),o=encodeURI(i),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${t}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},jE=({label:e,count:t,value:a,width:s,color:r,onClick:i,isActive:o,isLead:l,weightedValue:c,currencySymbol:d,conversionRate:u,compact:f=!1})=>n.jsxs("div",{className:"flex flex-col items-center w-full",children:[u&&n.jsx("div",{className:`flex justify-center relative z-0 ${f?"-my-1":"-my-2 mb-1"}`,children:n.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${f?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[n.jsx(AT,{className:"mr-1"})," ",u,"%"]})}),n.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${o?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[n.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${o?"text-blue-700":"text-gray-500"}`,children:e}),n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),n.jsxs("div",{className:`${f?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[n.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:n.jsx("span",{className:`z-10 drop-shadow-md ${f?"text-xs":"text-sm"}`,children:l?t:Po(a,d)})}),!l&&c>0&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/a*parseFloat(s)}%`}})]})]})]}),Qje=({id:e,children:t})=>{const{attributes:a,listeners:s,setNodeRef:r,transform:i,transition:o,isDragging:l}=Fje({id:e}),c={transform:Ap.Transform.toString(i),transition:o,zIndex:l?50:"auto",opacity:l?.5:1,position:"relative"};return n.jsx("div",{ref:r,style:c,className:"h-full",children:yt.cloneElement(t,{dragHandleProps:{...a,...s}})})},Yje=({user:e,metrics:t,stages:a,currencySymbol:s,target:r,dragHandleProps:i})=>{t.filteredDeals.reduce((f,p)=>f+parseFloat(p.amount||0)*((p.probability||0)/100),0);const o=t.metrics.CLOSED_WON?.value||0,l=t.metrics.CLOSED_LOST?.value||0,c=t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count,d=c>0?(t.metrics.CLOSED_WON.count/c*100).toFixed(0):0,u=r>0?o/r*100:0;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow relative group",children:[n.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),n.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[n.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",d,"%"]}),n.jsxs("span",{className:"text-red-600 bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:["Lost: ",Po(l,s)]})]})]})]}),i&&n.jsx("button",{...i,className:"p-1.5 text-gray-300 hover:text-blue-500 hover:bg-blue-50 rounded-md cursor-grab active:cursor-grabbing transition-colors touch-none",title:"Drag to reorder",children:n.jsx(Cie,{size:16})})]}),r>0?n.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[n.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),n.jsxs("span",{className:u>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[u.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${u>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(u,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Po(o,s)})]}),n.jsxs("span",{children:["Target: ",Po(r,s)]})]})]}):n.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),n.jsx("div",{className:"flex-grow space-y-2",children:a.map((f,p)=>{const x=t.metrics[f.key];let v=null;if(p>0){const N=a[p-1].key,b=t.metrics[N].count;b>0&&(v=(x.count/b*100).toFixed(0))}return n.jsx(jE,{label:f.label,count:x.count,value:x.value,width:x.width,color:x.color,isLead:!f.isDeal,weightedValue:x.weightedValue,currencySymbol:s,conversionRate:v,compact:!0,onClick:()=>{},isActive:!1},f.key)})})]})},Kje=({data:e,stageKey:t,currencySymbol:a})=>{const s=wt(),[r,i]=h.useState({key:null,direction:"desc"}),o=t==="LEADS",l=t==="CLOSED_WON",c=t==="CLOSED_LOST",d=!o&&!l&&!c,u=h.useMemo(()=>r.key?[...e].sort((x,v)=>{let N=x[r.key],b=v[r.key];return(r.key==="amount"||r.key==="probability")&&(N=parseFloat(x[r.key]||0),b=parseFloat(v[r.key]||0)),N<b?r.direction==="asc"?-1:1:N>b?r.direction==="asc"?1:-1:0}):e,[e,r]),f=x=>{i({key:x,direction:r.key===x&&r.direction==="desc"?"asc":"desc"})},p=({columnKey:x})=>r.key!==x?n.jsx(AT,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):r.direction==="asc"?n.jsx(bie,{className:"inline ml-1 text-blue-600"}):n.jsx(AT,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[n.jsx(Yk,{size:48,className:"mb-4 opacity-50"}),n.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:n.jsx("div",{className:"overflow-x-auto flex-grow",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>f("name"),children:["Name ",n.jsx(p,{columnKey:"name"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),o&&n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>f("amount"),children:["Value ",n.jsx(p,{columnKey:"amount"})]}),n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>f("probability"),children:["Prob. ",n.jsx(p,{columnKey:"probability"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),l&&n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>f("amount"),children:["Booked ",n.jsx(p,{columnKey:"amount"})]}),c&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-red-600 cursor-pointer group",onClick:()=>f("amount"),children:["Lost Value ",n.jsx(p,{columnKey:"amount"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Lost Date"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(x=>{const v=o?0:qje(x.stage_updated_at||x.created_at),N=v>30&&d;return n.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>s(o?`/admin/leads/${x.id}`:`/admin/deals/info?id=${x.id}`),children:[n.jsxs("td",{className:"p-4",children:[n.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:o?`${x.first_name} ${x.last_name}`:x.name}),n.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:NE(x.created_at)})]}),n.jsx("td",{className:"p-4 text-sm text-gray-600",children:o?x.company_name:x.account?.name}),o&&n.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[x.email&&n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx(na,{className:"mr-1"})," ",x.email]}),x.phone&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lt,{className:"mr-1"})," ",x.phone]})]}),d&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:Po(x.amount,a)}),n.jsx("td",{className:"p-4 text-center",children:n.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${x.probability>=80?"bg-green-100 text-green-700":x.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[x.probability,"%"]})}),n.jsx("td",{className:"p-4 text-center",children:N?n.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[n.jsx(qi,{size:14,className:"mr-1"}),n.jsxs("span",{className:"text-xs font-bold",children:[v,"d"]})]}):n.jsxs("span",{className:"text-xs text-gray-400",children:[v,"d"]})})]}),l&&n.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:Po(x.amount,a)}),c&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-bold text-red-600 opacity-75",children:Po(x.amount,a)}),n.jsx("td",{className:"p-4 text-center text-xs text-gray-500",children:NE(x.stage_updated_at)})]}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[n.jsx(sn,{className:"mr-1"}),o?x.lead_owner?.first_name||x.owner?.first_name||x.assigned_to?.first_name||"Unassigned":x.assigned_deals?.first_name||x.deal_creator?.first_name||"Unassigned"]})})]},x.id)})})]})})})},Xje=({leads:e,deals:t,currencySymbol:a,targets:s=[]})=>{const[r,i]=h.useState("ALL"),[o,l]=h.useState("ALL"),[c,d]=h.useState("ALL"),[u,f]=h.useState("AGGREGATE"),[p,x]=h.useState([]),v=wNe(W6(FP,{activationConstraint:{distance:5}}),W6(zP,{coordinateGetter:Gje})),N=h.useMemo(()=>{const A=new Date;if(o==="THIS_MONTH")return{start:new Date(A.getFullYear(),A.getMonth(),1),end:new Date(A.getFullYear(),A.getMonth()+1,0)};if(o==="THIS_QUARTER"){const T=Math.floor(A.getMonth()/3)*3;return{start:new Date(A.getFullYear(),T,1),end:new Date(A.getFullYear(),T+3,0)}}return o==="THIS_YEAR"?{start:new Date(A.getFullYear(),0,1),end:new Date(A.getFullYear(),11,31)}:null},[o]),b=h.useMemo(()=>s.filter(A=>{if(c!=="ALL"){const T=A.user?.id||A.user_id||A.assigned_to;if(parseInt(T)!==parseInt(c))return!1}if(N){const T=new Date(A.start_date),$=new Date(A.end_date);return T<=N.end&&$>=N.start}return!0}),[s,c,N]),C=h.useMemo(()=>{const A=new Map,T=$=>{$&&$.id&&A.set($.id,`${$.first_name} ${$.last_name}`)};return e.forEach($=>T($.lead_owner||$.owner||$.assigned_to)),t.forEach($=>{T($.assigned_deals),T($.deal_creator)}),Array.from(A.entries()).map(([$,z])=>({id:$,name:z}))},[e,t]),w=h.useMemo(()=>{const A=new Date;let T=null;o==="THIS_MONTH"?T=new Date(A.getFullYear(),A.getMonth(),1):o==="THIS_QUARTER"?T=new Date(A.getFullYear(),Math.floor(A.getMonth()/3)*3,1):o==="THIS_YEAR"&&(T=new Date(A.getFullYear(),0,1));const $=V=>{const X=new Date(V.created_at);if(T&&X<T)return!1;if(c!=="ALL"){const q=parseInt(c);return!!(V.lead_owner&&(V.lead_owner.id||V.lead_owner)===q||V.assigned_to?.id===q||V.owner?.id===q||V.assigned_deals?.id===q||V.created_by===q)}return!0},z=e.filter($),F=t.filter($),P=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],M=(V,X)=>{const q=P.reduce((oe,K)=>(oe[K.key]={...K,count:0,value:0,weightedValue:0,items:[]},oe),{});q.LEADS.count=V.length,q.LEADS.items=V,X.forEach(oe=>{const K=(oe.stage||"").toUpperCase();if(q[K]){q[K].count++,q[K].items.push(oe);const R=parseFloat(oe.amount||0);q[K].value+=R,q[K].weightedValue+=R*((oe.probability||0)/100)}});const ne=Math.max(...Object.values(q).map(oe=>oe.count),1);return Object.keys(q).forEach(oe=>{const K=q[oe];K.width=K.count===0?"0%":`${Math.max(K.count/ne*100,15)}%`}),{metrics:q,filteredDeals:X,filteredLeads:V}},G=M(z,F),Q=[];return u==="COMPARE"&&(c==="ALL"?C:C.filter(X=>X.id===parseInt(c))).forEach(X=>{const q=parseInt(X.id),ne=z.filter(ye=>(ye.lead_owner?.id||ye.lead_owner||ye.assigned_to?.id||ye.owner?.id)===q),oe=F.filter(ye=>(ye.assigned_deals?.id||ye.created_by)===q),K=b.find(ye=>{const pe=ye.user?.id||ye.user_id||ye.assigned_to;return parseInt(pe)===q}),R=parseFloat(K?.amount||K?.target_amount||K?.value||0);(ne.length>0||oe.length>0||R>0)&&Q.push({user:X,data:M(ne,oe),target:R})}),{stages:P,aggregate:G,userGroups:Q}},[t,e,o,c,u,C,b]),S=h.useMemo(()=>{if(!w.userGroups.length)return[];const A=[...w.userGroups];return p.length>0&&A.sort((T,$)=>{const z=p.indexOf(T.user.id),F=p.indexOf($.user.id);return z!==-1&&F!==-1?z-F:z!==-1?-1:F!==-1?1:0}),A},[w.userGroups,p]),E=A=>{const{active:T,over:$}=A;T.id!==$.id&&x(z=>{const F=S.map(G=>G.user.id),P=F.indexOf(T.id),M=F.indexOf($.id);return BP(F,P,M)})},k=h.useMemo(()=>{const A=b.reduce((q,ne)=>q+parseFloat(ne.amount||ne.target_amount||ne.value||0),0),T=w.aggregate.metrics,$=T.CLOSED_WON?.value||0,z=T.CLOSED_WON?.count||0,F=T.CLOSED_LOST?.value||0,P=T.CLOSED_LOST?.count||0,M=T.LEADS?.count||0,G=A>0?$/A*100:0,Q=z+P,V=Q>0?z/Q*100:0,X=M>0?z/M*100:0;return{totalTarget:A,totalWon:$,totalLost:F,progress:G,winRate:V,conversionRate:X}},[b,w]),_=h.useMemo(()=>r==="ALL"?[]:w.aggregate.metrics[r]?.items||[],[r,w]);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[n.jsx(Yk,{className:"mr-2"})," Pipeline Intelligence"]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Analyze pipeline velocity and bottlenecks."})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[n.jsxs("select",{value:o,onChange:A=>l(A.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Time"}),n.jsx("option",{value:"THIS_MONTH",children:"This Month"}),n.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),n.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),n.jsxs("select",{value:c,onChange:A=>d(A.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Users"}),C.map(A=>n.jsx("option",{value:A.id,children:A.name},A.id))]}),n.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[n.jsx("button",{onClick:()=>f("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),n.jsx("button",{onClick:()=>f("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]}),u==="COMPARE"?n.jsx(jje,{sensors:v,collisionDetection:jNe,onDragEnd:E,children:n.jsx(Oje,{items:S.map(A=>A.user.id),strategy:HP,children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[S.map(A=>n.jsx(Qje,{id:A.user.id,children:n.jsx(Yje,{user:A.user,metrics:A.data,stages:w.stages.filter(T=>T.key!=="CLOSED_LOST"),currencySymbol:a,target:A.target})},A.user.id)),S.length===0&&n.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]})})}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[n.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-4 bottom-4 w-0.5 bg-gray-100 -z-0"}),w.stages.filter(A=>A.key!=="CLOSED_LOST").map((A,T)=>{const $=w.aggregate.metrics[A.key];let z=null;if(T>0){const F=w.stages[T-1].key,P=w.aggregate.metrics[F].count;P>0&&(z=($.count/P*100).toFixed(0))}return n.jsx(jE,{label:A.label,count:$.count,value:$.value,width:$.width,color:$.color,isLead:!A.isDeal,weightedValue:$.weightedValue,currencySymbol:a,isActive:r===A.key,conversionRate:z,onClick:()=>i(A.key)},A.key)})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsx("div",{className:"mb-2 text-xs font-bold text-gray-400 uppercase",children:"Funnel Health"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[n.jsxs("div",{className:"bg-green-50 rounded p-2 border border-green-100",children:[n.jsx("p",{className:"text-[9px] text-green-600 uppercase font-bold",children:"Win Rate"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[k.winRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-100",children:[n.jsx("p",{className:"text-[9px] text-blue-600 uppercase font-bold",children:"Conversion"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[k.conversionRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-red-50 rounded p-2 border border-red-100",children:[n.jsx("p",{className:"text-[9px] text-red-600 uppercase font-bold",children:"Lost Value"}),n.jsx("p",{className:"text-sm font-bold text-gray-800",children:Po(k.totalLost,a)})]})]}),n.jsx(jE,{label:"Closed Lost",count:w.aggregate.metrics.CLOSED_LOST.count,value:w.aggregate.metrics.CLOSED_LOST.value,width:w.aggregate.metrics.CLOSED_LOST.width,color:"bg-red-500 opacity-90",isLead:!1,weightedValue:0,currencySymbol:a,isActive:r==="CLOSED_LOST",onClick:()=>i("CLOSED_LOST")},"CLOSED_LOST"),n.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[n.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[n.jsx(lr,{className:"mr-1"})," Total Target"]}),n.jsxs("span",{className:k.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[k.progress.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${k.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(k.progress,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Po(k.totalWon,a)})]}),n.jsxs("span",{children:["Goal: ",Po(k.totalTarget,a)]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-8 h-[600px] flex flex-col",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:r==="ALL"?n.jsx("span",{children:"Select a stage to view details"}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${w.aggregate.metrics[r]?.color}`}),w.stages.find(A=>A.key===r)?.label," Details",n.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[_.length," records"]})]})}),r!=="ALL"&&_.length>0&&n.jsxs("button",{onClick:()=>Vje(_,`Funnel_${r}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[n.jsx(Yl,{className:"mr-1"})," Export"]})]}),r==="ALL"?n.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[n.jsx(jie,{size:48,className:"mb-4 text-blue-100"}),n.jsx("p",{children:"Click on any stage bar (including Lost Deals) to inspect records."})]}):n.jsx(Kje,{data:_,stageKey:r,currencySymbol:a})]})]})]})},Zje=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e)}`,Jje=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-s)/864e5+1)/7)},e1e=({currencySymbol:e=""})=>{const[t,a]=h.useState("month"),[s,r]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!1),f=new Date,p=f.getFullYear(),x=f.getMonth()+1,v=Jje(f),N=h.useCallback(async()=>{u(!0);try{const S=new URLSearchParams;S.append("period_type","MONTHLY"),S.append("period_year",p),S.append("period_number",x);const E=await ae.get(`/targets/leaderboard?${S.toString()}`).catch(()=>({data:{entries:[]}}));o(E.data?.entries||[]);const k=new URLSearchParams;k.append("period_type","ANNUAL"),k.append("period_year",p);const _=await ae.get(`/targets/leaderboard?${k.toString()}`).catch(()=>({data:{entries:[]}}));c(_.data?.entries||[]);const A=new Date,T=new Date;T.setDate(T.getDate()-7);const $=new URLSearchParams;$.append("start_date",T.toISOString().split("T")[0]),$.append("end_date",A.toISOString().split("T")[0]);const z=await ae.get(`/targets/leaderboard?${$.toString()}`).catch(()=>({data:{entries:[]}}));r(z.data?.entries||[])}catch(S){console.error("Error fetching leaderboard data:",S)}finally{u(!1)}},[p,x]);h.useEffect(()=>{N()},[N]);const b=h.useMemo(()=>{let S=[];switch(t){case"week":S=s;break;case"month":S=i;break;case"year":S=l;break;default:S=i}return Array.isArray(S)?S.slice(0,5):[]},[t,s,i,l]),C=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"year",label:"Year"}],w=S=>{switch(S){case 0:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 1:return"bg-gray-100 text-gray-600 border-gray-300";case 2:return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-50 text-gray-500 border-gray-200"}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ad,{className:"text-blue-500",size:20}),n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Top 5 Performers"})]})}),n.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:C.map(S=>n.jsx("button",{onClick:()=>a(S.id),className:`flex-1 py-1.5 px-3 text-xs font-medium rounded-md transition-all duration-200 ${t===S.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:S.label},S.id))}),d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):b.length>0?n.jsx("div",{className:"space-y-3 flex-1",children:b.map((S,E)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border ${w(E)}`,children:E+1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-[120px]",children:S.user_name||"Unknown Rep"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full ${S.achievement_percentage>=100?"bg-green-500":S.achievement_percentage>=50?"bg-yellow-500":"bg-red-400"}`,style:{width:`${Math.min(S.achievement_percentage,100)}%`}})}),n.jsxs("span",{className:"text-[10px] text-gray-500",children:[S.achievement_percentage?.toFixed(1),"%"]})]})]})]}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:Zje(S.achieved_amount||0,e)})]},S.user_id||E))}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[n.jsx(Et,{size:32,className:"mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No data for this period"})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:n.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:[t==="week"&&`Week ${v}, ${p}`,t==="month"&&`${f.toLocaleString("default",{month:"long"})} ${p}`,t==="year"&&`Year ${p}`]})})]})},t1e=e=>n.jsx(qt,{...e}),n1e=e=>n.jsx(xd,{...e}),GP=e=>n.jsx(qs,{...e}),a1e=e=>n.jsx(sx,{...e}),s1e=e=>n.jsx(zw,{...e}),r1e=e=>n.jsx(Et,{...e}),i1e=e=>n.jsx(Lt,{...e}),o1e=e=>n.jsx(Fw,{...e}),OV=e=>n.jsx(Uw,{...e}),l1e=e=>n.jsx(aa,{...e}),MV=e=>n.jsx(sn,{...e}),c1e=e=>n.jsx(Yn,{...e}),IV=e=>n.jsx(en,{...e}),d1e=e=>n.jsx(hn,{...e}),$V=e=>n.jsx(lr,{...e}),u1e=e=>n.jsx(_a,{...e}),m1e=e=>n.jsx(Et,{...e}),f1e=e=>n.jsx(Rs,{...e}),h1e=e=>n.jsx(Xl,{...e}),g1e=e=>n.jsx(Ts,{...e}),RV=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},p1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},x1e=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},y1e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},b1e=e=>{switch(e){case"call":return{Icon:i1e,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:o1e,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:r1e,color:"text-blue-500",bgColor:"bg-blue-100"}}},v1e=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},w1e=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:n1e,label:"Account"},{icon:MV,label:"Contact"},{icon:c1e,label:"Leads"},{icon:IV,label:"Deals"},{icon:d1e,label:"Quotes"},{icon:$V,label:"Target"},{icon:u1e,label:"Task"},{icon:m1e,label:"Meeting"},{icon:f1e,label:"Call"},{icon:g1e,label:"Audit"},{icon:h1e,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(t1e,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[f.label]&&r(x[f.label])},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},N1e=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},j1e=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(OV,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(N1e,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},C1e=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),S1e=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(!e||e.length===0){const N=new Date().getMonth(),b=[],C=[];for(let w=0;w<=N;w++)b.push(s[w]),C.push(0);return{labels:b,revenues:C,maxRevenue:0}}const l={};e.forEach(v=>{const N=v.close_date||v.closeDate||null,b=v.stage||"",C=b.toUpperCase()==="CLOSED_WON"||b==="CLOSED_WON";let w=v.amount;w&&typeof w=="object"&&w.toString?w=parseFloat(w.toString()):w=parseFloat(w)||0;const S=w>0;if(N&&N!==null&&C&&S)try{let E=new Date(N);if(isNaN(E.getTime())){const k=String(N).split("T")[0];E=new Date(k+"T00:00:00")}if(!isNaN(E.getTime())){const k=E.getFullYear(),_=E.getMonth()+1,A=`${k}-${String(_).padStart(2,"0")}`;l[A]||(l[A]=0),l[A]+=w}}catch(E){console.error("Error parsing deal date:",N,E)}});const c=Object.keys(l).map(v=>parseInt(v.split("-")[0])),d=c.length>0?[...new Set(c)].sort():[],u=new Date().getFullYear(),f=[],p=[];for(let v=0;v<12;v++){const N=`${u}-${String(v+1).padStart(2,"0")}`;f.push(s[v]),p.push(l[N]||0)}if(d.length>0){const v=Math.max(...d);if(v>u)for(let N=u+1;N<=v;N++)for(let b=0;b<12;b++){const C=`${N}-${String(b+1).padStart(2,"0")}`,w=l[C]||0;f.push(`${s[b]} ${N}`),p.push(w)}}const x=Math.max(...p,1);return{labels:f,revenues:p,maxRevenue:x}},[e]),i=r.labels,o=r.revenues;return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(OV,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&o&&o.length>0?n.jsx(YN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},i_=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},_1e=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=y1e(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},A1e=({name:e,amount:t,account:a,stage:s,created_at:r,stage_updated_at:i,id:o,previousAmount:l,currencySymbol:c})=>{const d=wt(),f={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=x1e(f),v=p1e(i||r),N=v>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",b=parseFloat(t||0),C=l?b>=l?"up":"down":"up",w=C==="up"?a1e:s1e,S=C==="up"?"text-green-400":"text-red-400",E=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>o&&d(`/admin/deals/info?id=${o}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),N&&n.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[n.jsx(GP,{size:10,className:"mr-1"})," ",v," days stuck"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:E}),n.jsx("div",{className:"mt-1 flex items-center space-x-2",children:n.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:f})})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:RV(b,c)}),n.jsx(w,{size:16,className:`${S} mt-1`})]})]})})},T1e=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=b1e(f),{text:N,bg:b}=v1e(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const A=new Date(_),$=A-new Date,z=Math.floor($/864e5);return z===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),E=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/admin/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/admin/meetings/info?id=${o}`)):d("/admin/tasks"):d(f==="call"?`/admin/calls/info?id=${o}`:f==="meeting"?`/admin/meetings/info?id=${o}`:"/admin/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(GP,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(MV,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",E]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},E1e=()=>{const e=wt(),{user:t}=tn(),a=t?.company?.currency||"",[s,r]=h.useState([]),[i,o]=h.useState(0),[l,c]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,v]=h.useState([]),[N,b]=h.useState([]),[C,w]=h.useState([]),[S,E]=h.useState(!0),[k,_]=h.useState(null),[A,T]=h.useState(""),[$,z]=h.useState([]),[F,P]=h.useState([]),[M,G]=h.useState([]),[Q,V]=h.useState(new Date),X=h.useRef(null);h.useRef(null);const q=h.useMemo(()=>{try{if(!A.trim())return[];const R=A.toLowerCase().trim(),ye=[];return Array.isArray($)&&$.forEach(pe=>{const Ne=`${pe.first_name||""} ${pe.last_name||""}`.trim().toLowerCase(),Se=(pe.company_name||"").toLowerCase(),Oe=(pe.email||"").toLowerCase(),ke=(pe.phone||"").toLowerCase();(Ne.includes(R)||Se.includes(R)||Oe.includes(R)||ke.includes(R))&&ye.push({id:pe.id,name:`${pe.first_name||""} ${pe.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:pe.company_name||"No company",route:`/admin/leads/${pe.id}`})}),Array.isArray(F)&&F.forEach(pe=>{const Ne=(pe.name||"").toLowerCase(),Se=(pe.account?.name||"").toLowerCase(),Oe=(pe.description||"").toLowerCase();(Ne.includes(R)||Se.includes(R)||Oe.includes(R))&&ye.push({id:pe.id,name:pe.name||"Unnamed Deal",type:"Deal",details:pe.account?.name||"No account",route:`/admin/deals/info?id=${pe.id}`})}),Array.isArray(M)&&M.forEach(pe=>{const Ne=(pe.name||"").toLowerCase(),Se=(pe.email||"").toLowerCase(),Oe=(pe.phone||"").toLowerCase(),ke=(pe.website||"").toLowerCase();(Ne.includes(R)||Se.includes(R)||Oe.includes(R)||ke.includes(R))&&ye.push({id:pe.id,name:pe.name||"Unnamed Account",type:"Account",details:pe.email||pe.phone||"No contact info",route:"/admin/accounts"})}),ye.slice(0,10)}catch(R){return console.error("Error in search:",R),[]}},[A,$,F,M]),ne=R=>{R.route&&(e(R.route),T(""))},oe=h.useCallback(async()=>{E(!0),_(null);try{const[R,ye,pe,Ne,Se,Oe,ke,he]=await Promise.all([ae.get("/leads/admin/getLeads").catch(_e=>(console.error("Error fetching leads:",_e),{data:[]})),ae.get("/deals/admin/fetch-all").catch(_e=>(console.error("Error fetching deals:",_e),{data:[]})),ae.get("/accounts/admin/fetch-all").catch(_e=>(console.error("Error fetching accounts:",_e),{data:[]})),ae.get("/tasks/all").catch(_e=>(console.error("Error fetching tasks:",_e),{data:[]})),ae.get("/meetings/admin/fetch-all").catch(_e=>(console.error("Error fetching meetings:",_e),{data:[]})),ae.get("/calls/admin/fetch-all").catch(_e=>(console.error("Error fetching calls:",_e),{data:[]})),ae.get("/logs/read-all").catch(_e=>(console.error("Error fetching logs:",_e),{data:[]})),ae.get("/targets/admin/fetch-all").catch(_e=>(console.error("Error fetching targets:",_e),{data:[]}))]),Ge=Array.isArray(R.data)?R.data:[],Ce=Array.isArray(ye.data)?ye.data:[],xe=Array.isArray(pe.data)?pe.data:[],ee=Array.isArray(Ne.data)?Ne.data:[],Ee=Array.isArray(Se.data)?Se.data:[],Ae=Array.isArray(Oe.data)?Oe.data:[],Re=Array.isArray(ke.data)?ke.data:[],et=Array.isArray(he.data)?he.data:[];z(Ge),P(Ce),G(xe),r(et);const De=et.reduce((_e,te)=>{const Ue=te.amount||te.value||te.target_amount||0,Ie=parseFloat(typeof Ue=="string"?Ue.replace(/[^\d.-]/g,""):Ue);return _e+(isNaN(Ie)?0:Ie)},0);o(De),c({activeLeads:Ge.filter(_e=>_e.status&&!["Lost","Converted"].includes(_e.status)).length,totalDeals:Ce.length,activeAccounts:xe.length,overdueTasks:ee.filter(_e=>!_e.dueDate||_e.status==="Completed"?!1:new Date(_e.dueDate)<new Date).length});const tt=[...Ge].sort((_e,te)=>new Date(te.created_at||0)-new Date(_e.created_at||0)).slice(0,5);u(tt);const Je=[...Ce].sort((_e,te)=>new Date(te.created_at||0)-new Date(_e.created_at||0)).slice(0,5);p(Je);const H=[];Ae.forEach(_e=>{const te=_e.due_date||_e.call_time,Ue=(_e.status||"").toUpperCase();te&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(Ue)&&H.push({type:"Call",title:_e.subject||"Untitled Call",assignedTo:_e.assigned_to||(_e.call_assign_to?`${_e.call_assign_to.first_name||""} ${_e.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:te,priority:(_e.priority||"MEDIUM").toUpperCase(),id:_e.id,activityType:"call",fullData:_e})}),Ee.forEach(_e=>{const te=_e.dueDate||_e.start_time,Ue=(_e.status||"").toUpperCase();te&&!["COMPLETED","CANCELLED","DONE"].includes(Ue)&&H.push({type:"Meeting",title:_e.subject||_e.activity||"Untitled Meeting",assignedTo:_e.assignedTo||(_e.meet_assign_to?`${_e.meet_assign_to.first_name||""} ${_e.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:te,priority:(_e.priority||"MEDIUM").toUpperCase(),id:_e.id,activityType:"meeting",fullData:_e})});const be={HIGH:1,MEDIUM:2,LOW:3},le=H.sort((_e,te)=>{const Ue=be[_e.priority]||3,Ie=be[te.priority]||3;return Ue!==Ie?Ue-Ie:new Date(_e.scheduledDate||0)-new Date(te.scheduledDate||0)}).slice(0,5);v(le),w(Ce);const Z=[...Re].sort((_e,te)=>new Date(te.timestamp||0)-new Date(_e.timestamp||0));b(Z)}catch(R){console.error("Error fetching dashboard data:",R),_("Failed to load dashboard data. Please refresh the page.")}finally{E(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",oe(),X.current=setInterval(()=>{oe(),V(new Date)},3e4),()=>{X.current&&clearInterval(X.current)}),[oe]);const K=[{icon:l1e,title:"Active Leads",value:l.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:$V,title:"Total Targets",value:RV(i,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:IV,title:"Total Deals",value:l.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:GP,title:"Overdue Tasks",value:l.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[k&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:k})}),n.jsx("div",{className:"mb-8",children:n.jsx(w1e,{searchQuery:A,onSearchChange:T,searchResults:q,onSearchResultClick:ne})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:K.map(R=>n.jsx(C1e,{...R,loading:S},R.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(j1e,{logs:N,loading:S}),n.jsx(e1e,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(Xje,{leads:$,deals:F,targets:s,currencySymbol:a})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(S1e,{revenueData:C,loading:S})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(i_,{title:"Latest Leads",children:d.length>0?d.map((R,ye)=>n.jsx(_1e,{...R},R.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(i_,{title:"Latest Deals",children:f.length>0?f.map((R,ye)=>n.jsx(A1e,{...R,stage_updated_at:R.stage_updated_at,currencySymbol:a},R.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(i_,{title:"Upcoming Activities",children:x.length>0?x.map((R,ye)=>n.jsx(T1e,{...R},R.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function rn({totalItems:e=0,pageSize:t=10,currentPage:a=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:o=[10,20,30,40,50],className:l="",label:c="records"}){const d=e===0?1:Math.ceil(e/t),u=e===0?0:(a-1)*t+1,f=Math.min(a*t,e),p=a<=1||e===0,x=a>=d||e===0,v="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",N="bg-black text-white hover:bg-gray-900",b="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return n.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${l}`,children:[n.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:u,"-",f," of ",e," ",c]}),i&&n.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[n.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),n.jsx("select",{value:t,onChange:C=>i(Number(C.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:o.map(C=>n.jsx("option",{value:C,children:C},C))})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[n.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${v} ${p?b:N}`,children:[n.jsx(wie,{className:"text-base"}),"Prev"]}),n.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:a," of"," ",e===0?0:d]}),n.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${v} ${x?b:N}`,children:["Next",n.jsx(zt,{className:"text-base"})]})]})]})}const k1e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L1e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,s)=>s?s.toUpperCase():a.toLowerCase()),sR=e=>{const t=L1e(e);return t.charAt(0).toUpperCase()+t.slice(1)},zV=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim(),P1e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var D1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const O1e=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...D1e,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:zV("lucide",r),...!i&&!P1e(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));const th=(e,t)=>{const a=h.forwardRef(({className:s,...r},i)=>h.createElement(O1e,{ref:i,iconNode:t,className:zV(`lucide-${k1e(sR(e))}`,`lucide-${e}`,s),...r}));return a.displayName=sR(e),a};const M1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],I1e=th("globe",M1e);const $1e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],rR=th("lock",$1e);const R1e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],z1e=th("message-circle",R1e);const U1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],F1e=th("message-square",U1e);const B1e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],H1e=th("send",B1e);const G1e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ej=th("x",G1e);function Ta({comments:e=[],onAddComment:t,currentUser:a}){const[s,r]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(!1),d=async u=>{if(u.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(f){console.error("Failed to add comment:",f)}finally{c(!1)}}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[n.jsx(F1e,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&n.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),n.jsx("div",{className:"mt-4",children:e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(z1e,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),n.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):n.jsx("div",{className:"space-y-3",children:e.map(u=>n.jsxs("div",{className:"flex gap-3 p-3 bg-gray-100 rounded-lg border border-gray-100",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-9 h-9 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:u.comment_creator?.profile_picture?n.jsx("img",{src:`${u.comment_creator.profile_picture}`,alt:`${u.comment_creator?.first_name||u.comment_creator?.email||"User"}'s profile`,className:"w-9 h-9 rounded-full object-cover"}):u.comment_creator?.first_name?.[0]||u.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:u.comment_creator?.first_name||u.comment_creator?.email||"Unknown User"}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),u.is_private&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[n.jsx(rR,{className:"w-3 h-3"}),"Private"]})]}),n.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words text-xs",children:u.comment})]})]},u.id))})}),n.jsxs("form",{onSubmit:d,className:"mt-6 pt-4 border-t border-gray-200 text-sm",children:[n.jsx("div",{className:"relative",children:n.jsx("textarea",{value:s,onChange:u=>r(u.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsx("button",{type:"button",onClick:()=>o(!i),className:`cursor-pointer flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsx(rR,{className:"w-4 h-4"}),"Private"]}):n.jsxs(n.Fragment,{children:[n.jsx(I1e,{className:"w-4 h-4"}),"Public"]})}),n.jsxs("button",{type:"submit",disabled:!s.trim()||l,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n.jsx(H1e,{className:"w-4 h-4"}),l?"Posting...":"Post Comment"]})]})]})]})}async function W1e({relatedType:e,relatedId:t}){const a=await ae.get("/comments",{params:{related_type:e,related_id:t}});return Array.isArray(a.data)?a.data:[]}async function q1e({relatedType:e,relatedId:t,comment:a,isPrivate:s}){return(await ae.post("/comments",{related_type:e,related_id:t,comment:a,is_private:!!s})).data}function Ea({relatedType:e,relatedId:t}){const[a,s]=h.useState([]),[r,i]=h.useState(!1),o=h.useCallback(async()=>{if(!e||!t){s([]);return}i(!0);try{const c=await W1e({relatedType:e,relatedId:t});s(c)}finally{i(!1)}},[e,t]),l=h.useCallback(async({comment:c,is_private:d})=>{!e||!t||(await q1e({relatedType:e,relatedId:t,comment:c,isPrivate:d}),await o())},[e,t,o]);return h.useEffect(()=>{o()},[o]),{comments:a,loading:r,refresh:o,addComment:l}}const o_=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],l_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},ir=e=>e?e.toUpperCase():"",c_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",V1e=e=>{switch(ir(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Q1e=e=>{switch(ir(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function Y1e(){const e=wt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(l_),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,E]=h.useState([]),[k,_]=h.useState(null),[A,T]=h.useState([]),[$,z]=h.useState([]),[F,P]=h.useState("Filter by Status"),[M,G]=h.useState(""),[Q,V]=h.useState(null),[X,q]=h.useState(!1),[ne,oe]=h.useState(1),[K,R]=h.useState(10),[ye,pe]=h.useState("Overview"),[Ne,Se]=h.useState(""),[Oe,ke]=h.useState(!1),[he,Ge]=h.useState([]),[Ce,xe]=h.useState({}),[ee,Ee]=h.useState(null),{comments:Ae,addComment:Re,refresh:et}=Ea({relatedType:"account",relatedId:x?.id});h.useEffect(()=>{x?.id&&et()},[x?.id,et]);const De=h.useCallback(async(Me=null)=>{w(!0);try{const vt=await ae.get("/accounts/admin/fetch-all"),I=[...Array.isArray(vt.data)?vt.data:[]].sort((me,Le)=>{const $e=me?.created_at||me?.updated_at||0,Ve=Le?.created_at||Le?.updated_at||0;return new Date(Ve)-new Date($e)});if(b(I),Me){const me=I.find(Le=>Le.id===Me);v(me||null)}}catch(vt){console.error(vt),b([]),vt.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),tt=h.useCallback(async()=>{try{const Me=await ae.get("/users/all");E(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),Je=h.useCallback(async()=>{try{const Me=await ae.get("/territories/fetch");T(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&W.warn("Unable to load territories (permission denied).")}},[]),H=h.useCallback(async()=>{try{const Me=await ae.get("/accounts/admin/parent-companies");z(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&W.warn("Unable to load parent companies (permission denied).")}},[]),be=h.useCallback(async Me=>{try{const vt=await ae.get(`/activities/accounts/${Me}`);xe(vt.data&&typeof vt.data=="object"?vt.data:{})}catch(vt){console.error(vt),vt.response?.status===404&&(console.warn("No activities found for this account."),xe({}))}},[]);h.useEffect(()=>{De(),tt(),Je(),H()},[De,tt,Je,H]),h.useEffect(()=>{oe(1)},[M,F,K]);const le=h.useMemo(()=>{const Me=M.toLowerCase(),vt=F;return N.filter(U=>{const I=U.name?.toLowerCase().includes(Me)||U.website?.toLowerCase().includes(Me)||U.phone_number?.toLowerCase().includes(Me)||U.industry?.toLowerCase().includes(Me)||U.parent_company?.toLowerCase().includes(Me)||U.territory?.name?.toLowerCase().includes(Me),me=vt==="Filter by Status"||ir(U.status)===ir(vt);return I&&me})},[N,M,F]),Z=Math.max(1,Math.ceil(le.length/K)||1);h.useEffect(()=>{oe(Me=>{const vt=Math.max(1,Math.ceil(le.length/K)||1);return Me>vt?vt:Me})},[le.length,K]);const _e=h.useMemo(()=>{const Me=(ne-1)*K;return le.slice(Me,Me+K)},[le,ne,K]),te=Me=>{if(Me.target.checked){const vt=_e.map(U=>U.id);Ge(vt)}else Ge([])},Ue=Me=>{Ge(vt=>vt.includes(Me)?vt.filter(U=>U!==Me):[...vt,Me])},Ie=async()=>{he.length!==0&&V({title:"Delete Accounts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:he.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${he.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:he}})};le.length===0||(ne-1)*K+1,Math.min(ne*K,le.length);const We=()=>oe(Me=>Math.max(Me-1,1)),gt=()=>oe(Me=>Math.min(Me+1,Z));h.useEffect(()=>{x&&Se(ir(x.status)||"PROSPECT")},[x]);const ve=N.length,Be=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="customer").length,[N]),nt=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="prospect").length,[N]),Te=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="partner").length,[N]),Qe=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="active").length,[N]),ct=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="inactive").length,[N]),ht=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="former").length,[N]),je=h.useMemo(()=>[{title:"Total",value:ve,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Be,icon:Mo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:nt,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Te,icon:sn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Qe,icon:Mo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ct,icon:Io,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ht,icon:Io,color:"text-orange-600",bgColor:"bg-orange-100"}],[ve,Be,nt,Te,Qe,ct,ht]),Ze=Me=>{v(Me),pe("Overview"),Se(ir(Me?.status)||"PROSPECT")},ce=()=>v(null),J=Me=>{Me.target.id==="accountModalBackdrop"&&!X&&ce()},de=()=>{a(!1),r(!1),u(null),p(l_),o(!1),_(null)},D=Me=>{Me.target.id==="modalBackdrop"&&de()},B=Me=>Me?new Date(Me).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ie=Me=>{const{name:vt,value:U}=Me.target;p(I=>({...I,[vt]:U}))},ue=()=>{p(l_),r(!1),u(null),a(!0)},se=Me=>{v(null),Me.assigned_accs?_(Me.assigned_accs):_(null),p({name:Me.name||"",website:Me.website||"",phone_number:Me.phone_number||"",billing_address:Me.billing_address||"",shipping_address:Me.shipping_address||"",industry:Me.industry||"",status:ir(Me.status)||"PROSPECT",territory_id:Me.territory?.id?String(Me.territory.id):"",assigned_to:Me.assigned_accs?.id?String(Me.assigned_accs.id):""}),r(!0),u(Me.id),a(!0)},Pe=Me=>{Me&&V({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:Me.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Me.id,name:Me.name}})},ge=async()=>{if(!Q?.action){V(null);return}const{action:Me}=Q,{type:vt,payload:U,targetId:I,name:me,accountIds:Le}=Me;q(!0);try{if(vt==="create"){o(!0);const $e=await ae.post("/accounts/admin",U);H(),W.success(`Account "${me}" created successfully.`);const Ve=x?.id||null;de(),await De(Ve),!x&&$e.data?.id}else if(vt==="update"){if(!I)throw new Error("Missing account identifier for update.");o(!0),await ae.put(`/accounts/admin/${I}`,U),W.success(`Account "${me}" updated successfully.`);const $e=x?.id&&x.id===I?I:null;de(),await De($e),x?.id===I&&v(null)}else if(vt==="delete"){if(!I)throw new Error("Missing account identifier for deletion.");const $e=x?.id;c(I),await ae.delete(`/accounts/admin/${I}`),W.success(`Account "${me}" deleted successfully.`),await De($e&&$e!==I?$e:null),$e===I&&v(null)}else vt==="bulk-delete"&&(await ae.delete("/accounts/admin/bulk-delete",{data:{account_ids:Le}}),W.success(`Successfully deleted ${Le.length} accounts`),Ge([]),await De())}catch($e){console.error($e);const Ve=vt==="create"?"Failed to create account. Please review the details and try again.":vt==="update"?"Failed to update account. Please review the details and try again.":vt==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ye=$e.response?.data?.detail||Ve;W.error(Ye),(vt==="create"||vt==="update")&&o(!1),vt==="delete"&&c(null)}finally{(vt==="create"||vt==="update")&&o(!1),vt==="delete"&&c(null),q(!1),V(null)}},fe=()=>{X||V(null)},Fe=async()=>{if(!x||!Ne)return;const Me=ir(Ne),vt=ir(x.status);if(Me!==vt){ke(!0);try{await ae.put(`/accounts/admin/${x.id}`,{status:Me}),W.success(`Account status updated to ${c_(Me)}`),b(U=>U.map(I=>I.id===x.id?{...I,status:Me}:I)),v(null)}catch(U){console.error(U);const I=U.response?.data?.detail||"Failed to update account status. Please try again.";W.error(I)}finally{ke(!1)}}},[Xe,pt]=h.useState(!1),Nt=Me=>{Me.preventDefault(),pt(!0);const vt=f.name.trim();if(!vt){W.error("Account name is required.");return}if(!f.assigned_to){W.error("Assigned To is required.");return}const I={name:vt,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},me=s&&d?"update":"create";V({title:me==="create"?"Confirm New Account":"Confirm Update",message:me==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:vt}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:vt}),"?"]}),confirmLabel:me==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:me,payload:I,targetId:d||null,name:vt}})},St=[{label:"Filter by Status",value:"Filter by Status"},...o_.map(Me=>({label:Me.label,value:Me.value}))],Ht=Q?.action?.type==="delete"?Q.action.targetId:null,on=x&&(l===x.id||Ht===x.id),cn=x&&l===x.id,re=x?V1e(x.status):"",ot=x?n.jsx("div",{id:"accountModalBackdrop",onClick:J,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Me=>Me.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:ce,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${re}`,children:c_(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>se(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Pe(x),disabled:!!on,children:cn?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(Me=>n.jsx("button",{onClick:()=>pe(Me),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===Me?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Me},Me))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:B(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:B(x.updated_at)||"N/A"})]})]})}),n.jsx(Ta,{comments:Ae,onAddComment:Re})]}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Ce.tasks&&Ce.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Ce.tasks.length,")"]})]}),ee==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),ee==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.tasks.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.description||"No description"}),Me.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",Me.assigned_to.first_name," ",Me.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.due_date||Me.created_at)})]},`task-${vt}`))})]}),Ce.meetings&&Ce.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Ce.meetings.length,")"]})]}),ee==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),ee==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.meetings.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.description||Me.location||"No description"}),Me.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",Me.host.first_name," ",Me.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.start_time||Me.created_at)})]},`meeting-${vt}`))})]}),Ce.calls&&Ce.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Ce.calls.length,")"]})]}),ee==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),ee==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.calls.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.call_time||Me.created_at)})]},`call-${vt}`))})]}),Ce.contacts&&Ce.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Ce.contacts.length,")"]})]}),ee==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),ee==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.contacts.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(sn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Me.first_name?`${Me.first_name} `:"",Me.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Me.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.created_at)})]},`contact-${vt}`))})]}),Ce.deals&&Ce.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Ce.deals.length,")"]})]}),ee==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),ee==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.deals.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Me.deal_id?Me.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",Me.name||Me.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:Me.stage||Me.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.close_date||Me.created_at)})]},`deal-${vt}`))})]}),Ce.quotes&&Ce.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Ce.quotes.length,")"]})]}),ee==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),ee==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.quotes.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(Me.quote_id?Me.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Me.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.presented_date)||""})]},`quote-${vt}`))})]}),(!Ce||(!Ce.tasks||Ce.tasks.length===0)&&(!Ce.meetings||Ce.meetings.length===0)&&(!Ce.calls||Ce.calls.length===0)&&(!Ce.quotes||Ce.quotes.length===0)&&(!Ce.deals||Ce.deals.length===0)&&(!Ce.contacts||Ce.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Ne||ir(x?.status)||"PROSPECT",onChange:Me=>Se(Me.target.value),children:o_.map(Me=>n.jsx("option",{value:Me.value,children:Me.label},Me.value))}),n.jsx("button",{onClick:Fe,disabled:Oe||!Ne||ir(Ne)===ir(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!Ne||ir(Ne)===ir(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,Rt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ue(),pt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:je.map(Me=>n.jsx(K1e,{...Me},Me.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:Me=>G(Me.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:F,onChange:Me=>P(Me.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:St.map(Me=>n.jsx("option",{value:Me.value,children:Me.label},Me.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:_e.length>0&&_e.every(Me=>he.includes(Me.id)),onChange:te,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:he.length>0?n.jsx("button",{onClick:Ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${he.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):le.length>0?_e.map(Me=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Ze(Me),be(Me.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("input",{type:"checkbox",checked:he.includes(Me.id),onChange:()=>Ue(Me.id),onClick:vt=>vt.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Me.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:Me.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Q1e(Me.status)}`,children:c_(Me.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Me.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Me.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:Me.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Me.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:le.length,pageSize:K,currentPage:ne,onPrev:We,onNext:gt,onPageSizeChange:Me=>{R(Me),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),kt=t?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:Me=>Me.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),pt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||X,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Nt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Wm,{label:"Name",name:"name",value:f.name,onChange:ie,placeholder:"Company name",required:!0,isSubmitted:Xe})}),n.jsx(oR,{label:"Parent Company",value:f.parent_company,onChange:Me=>{p(vt=>({...vt,parent_company:Me}))},items:$.map(Me=>({id:Me,name:Me})),getLabel:Me=>Me?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Wm,{label:"Website",name:"website",value:f.website,onChange:ie,placeholder:"https://example.com",disabled:i}),n.jsx(Wm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:ie,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Wm,{label:"Industry",name:"industry",value:f.industry,onChange:ie,placeholder:"Industry",disabled:i}),n.jsx(Wm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:ie,placeholder:"Billing address",disabled:i}),n.jsx(Wm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:ie,placeholder:"Shipping address",disabled:i}),n.jsx(iR,{label:"Status",name:"status",value:f.status,onChange:ie,options:[{value:"",label:"Select status"},...o_],required:!0,disabled:i}),n.jsx(oR,{label:"Assigned To",value:f.assigned_to,onChange:Me=>{const vt=S.find(I=>String(I.id)===String(Me));_(vt);let U=null;vt&&vt.assigned_territory&&vt.assigned_territory.length===1&&(U=vt.assigned_territory[0].id),p(I=>({...I,assigned_to:Me,territory_id:U}))},items:S||[],getLabel:Me=>`${Me?.first_name??""} ${Me?.last_name??""} (${Me?.role?.toUpperCase()==="CEO"?"Admin":Me?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Xe,disabled:i||S.length===0}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(iR,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:ie,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(Me=>({value:String(Me.id),label:Me.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{de(),pt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||X,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||X,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,Yt=Q?n.jsx(Z1e,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:ge,onCancel:fe,loading:X}):null;return n.jsxs(n.Fragment,{children:[Rt,ot,kt,Yt]})}function K1e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Wm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function iR({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function oR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(X1e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function X1e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),E=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Z1e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Ix(e){return _t({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const d_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},fl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),io=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function J1e(){const e=wt(),t=Jt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[E,k]=h.useState(!1),[_,A]=h.useState(null),[T,$]=h.useState(d_),[z,F]=h.useState(""),[P,M]=h.useState("Filter by Accounts"),[G,Q]=h.useState(null),[V,X]=h.useState("Overview"),[q,ne]=h.useState(1),[oe,K]=h.useState(10),[R,ye]=h.useState({}),[pe,Ne]=h.useState(null),[Se,Oe]=h.useState([]),[ke,he]=h.useState(null),{comments:Ge,addComment:Ce,refresh:xe}=Ea({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&xe()},[u?.id,xe]),h.useEffect(()=>{const se=t.state?.contactID;se&&(he(se),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(ke&&a.length>0&&!r){const se=a.find(Pe=>Pe.id===ke);se?f(se):W.error("Contact not found."),he(null)}},[ke,a,r]);const ee=h.useCallback(async(se=null)=>{i(!0);try{const Pe=await ae.get("/contacts/admin/fetch-all"),fe=[...Array.isArray(Pe.data)?Pe.data:[]].sort((Fe,Xe)=>{const pt=Fe?.created_at||Fe?.updated_at||0,Nt=Xe?.created_at||Xe?.updated_at||0;return new Date(Nt)-new Date(pt)});if(s(fe),se){const Fe=fe.find(Xe=>Xe.id===se);f(Fe||null)}}catch(Pe){console.error(Pe),s([]),Pe.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),Ee=h.useCallback(async()=>{try{const se=await ae.get("/accounts/admin/fetch-all"),ge=[...Array.isArray(se.data)?se.data:[]].sort((fe,Fe)=>(fe?.name||"").localeCompare(Fe?.name||""));l(ge)}catch(se){console.error(se),l([]),se.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const se=await ae.get("/users/all"),ge=[...Array.isArray(se.data)?se.data:[]].sort((fe,Fe)=>fl(fe).localeCompare(fl(Fe)));d(ge)}catch(se){console.error(se),d([]),se.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),Re=h.useCallback(async se=>{try{const Pe=await ae.get(`/activities/contact/${se}`);ye(Pe.data&&typeof Pe.data=="object"?Pe.data:{})}catch(Pe){console.error(Pe),Pe.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{ee(),Ee(),Ae()},[ee,Ee,Ae]);const et=h.useMemo(()=>{const se=new Map;o.forEach(ge=>{ge?.id&&ge?.name&&se.set(String(ge.id),ge.name)}),a.forEach(ge=>{ge?.account_id&&ge?.account?.name&&se.set(String(ge.account_id),ge.account.name)});const Pe=Array.from(se.entries()).sort((ge,fe)=>ge[1].localeCompare(fe[1])).map(([ge,fe])=>({value:ge,label:fe}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Pe]},[o,a]),De=h.useMemo(()=>{const se=z.trim().toLowerCase(),Pe=P.trim();return a.filter(ge=>{const fe=[ge?.first_name,ge?.last_name,ge?.email,ge?.title,ge?.department,ge?.account?.name,ge?.account?.status,ge?.work_phone,ge?.mobile_phone_1,ge?.mobile_phone_2,ge?.assigned_contact?.first_name,ge?.assigned_contact?.last_name,ge?.contact_creator?.first_name,ge?.contact_creator?.last_name,ge?.notes,io(ge?.created_at),io(ge?.updated_at)],Fe=se===""||fe.some(pt=>pt==null?!1:pt.toString().toLowerCase().includes(se)),Xe=Pe==="Filter by Accounts"||String(ge.account_id)===Pe;return Fe&&Xe})},[a,z,P]),tt=Math.max(1,Math.ceil(De.length/oe)||1);h.useEffect(()=>{ne(1)},[z,P,oe]),h.useEffect(()=>{ne(se=>{const Pe=Math.max(1,Math.ceil(De.length/oe)||1);return se>Pe?Pe:se})},[De.length,oe]);const Je=h.useMemo(()=>{const se=(q-1)*oe;return De.slice(se,se+oe)},[De,q,oe]),H=()=>ne(se=>Math.max(se-1,1)),be=()=>ne(se=>Math.min(se+1,tt)),le=se=>{if(se.target.checked){const Pe=Je.map(ge=>ge.id);Oe(Pe)}else Oe([])},Z=se=>{Oe(Pe=>Pe.includes(se)?Pe.filter(ge=>ge!==se):[...Pe,se])},_e=async()=>{Se.length!==0&&S({title:"Delete Contacts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Se.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${Se.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:Se}})},te=h.useCallback(()=>{x(!1),N(!1),A(null),$(d_),C(!1),nt(!1)},[]),Ue=se=>{se.target.id==="modalBackdrop"&&!b&&!E&&te()},Ie=se=>{const{name:Pe,value:ge}=se.target;$(fe=>({...fe,[Pe]:ge}))},We=()=>{$(d_),N(!1),A(null),x(!0)},gt=se=>{se&&($({first_name:se.first_name||"",last_name:se.last_name||"",account_id:se.account_id?String(se.account_id):"",title:se.title||"",department:se.department||"",email:se.email||"",work_phone:se.work_phone||"",mobile_phone_1:se.mobile_phone_1||"",mobile_phone_2:se.mobile_phone_2||"",notes:se.notes||"",assigned_to:se.assigned_to?String(se.assigned_to):""}),N(!0),A(se.id),x(!0),f(null))},ve=se=>{if(!se)return;const Pe=fl(se)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Pe}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:se.id,name:Pe}})},[Be,nt]=h.useState(!1),Te=se=>{se.preventDefault(),nt(!0);const Pe=T.first_name.trim(),ge=T.last_name.trim();if(!Pe||!ge){W.error("First name and last name are required.");return}if(!T.account_id){W.error("Account is required.");return}if(!T.assigned_to){W.error("Assigned To is required.");return}const Fe=T.email?.trim();if(!Fe){W.error("Email is required.");return}if(!Fe.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Fe)){W.error("Please enter a valid email address.");return}const pt={first_name:Pe,last_name:ge,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},Nt=v&&_?"update":"create",St=`${Pe} ${ge}`.trim();S({title:Nt==="create"?"Confirm New Contact":"Confirm Update",message:Nt==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:St})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:St}),"?"]}),confirmLabel:Nt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Nt,payload:pt,targetId:_||null,name:St}})},Qe=async()=>{if(!w?.action){S(null);return}const{action:se}=w,{type:Pe,payload:ge,targetId:fe,name:Fe}=se;k(!0);try{if(Pe==="create"){C(!0),await ae.post("/contacts/admin",ge),W.success(`Contact "${Fe}" created successfully.`);const Xe=u?.id||null;te(),await ee(Xe)}else if(Pe==="update"){if(!fe)throw new Error("Missing contact identifier for update.");C(!0),await ae.put(`/contacts/admin/${fe}`,ge),W.success(`Contact "${Fe}" updated successfully.`);const Xe=u?.id&&u.id===fe?fe:u?.id||null;te(),await ee(Xe),u?.id===fe&&f(null)}else if(Pe==="delete"){if(!fe)throw new Error("Missing contact identifier for deletion.");const Xe=u?.id;Q(fe),await ae.delete(`/contacts/admin/${fe}`),W.success(`Contact "${Fe}" deleted successfully.`),await ee(Xe&&Xe!==fe?Xe:null),Xe===fe&&f(null)}else if(Pe==="bulk-delete"){const Xe=se.contact_ids;await ae.delete("/contacts/admin/bulk-delete",{data:{contact_ids:Xe}}),W.success(`Successfully deleted ${Xe.length} contacts`),Oe([]),await ee()}}catch(Xe){console.error(Xe);const pt=Pe==="create"?"Failed to create contact. Please review the details and try again.":Pe==="update"?"Failed to update contact. Please review the details and try again.":Pe==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",Nt=Xe.response?.data?.detail||pt;W.error(Nt)}finally{(Pe==="create"||Pe==="update")&&C(!1),Pe==="delete"&&Q(null),k(!1),S(null)}},ct=()=>{E||S(null)},ht=se=>{f(se),X("Overview")},je=()=>f(null),Ze=se=>{se.target.id==="contactModalBackdrop"&&!E&&je()},ce=w?.action?.type==="delete"?w.action.targetId:null,J=u&&(G===u.id||ce===u.id),de=u&&G===u.id,D=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Ze,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:se=>se.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:je,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:fl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>gt(u),disabled:E||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ve(u),disabled:!!J,children:de?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(se=>n.jsx("button",{onClick:()=>X(se),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===se?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:se},se))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:fl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:io(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:io(u.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Ta,{comments:Ge,onAddComment:Ce})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[R.tasks&&R.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",R.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.tasks.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.description||"No description"}),se.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",se.assigned_to.first_name," ",se.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:io(se.due_date||se.created_at)})]},`task-${Pe}`))})]}),R.meetings&&R.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",R.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.meetings.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.description||se.location||"No description"}),se.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",se.host.first_name," ",se.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:io(se.start_time||se.created_at)})]},`meeting-${Pe}`))})]}),R.calls&&R.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",R.calls.length,")"]})]}),pe==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.calls.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:io(se.call_time||se.created_at)})]},`call-${Pe}`))})]}),R.deals&&R.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",R.deals.length,")"]})]}),pe==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.deals.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[se.deal_id?se.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",se.name||se.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:se.stage||se.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:io(se.close_date||se.created_at)})]},`deal-${Pe}`))})]}),R.quotes&&R.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",R.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.quotes.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(se.quote_id?se.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:io(se.presented_date)||""})]},`quote-${Pe}`))})]}),(!R||(!R.tasks||R.tasks.length===0)&&(!R.meetings||R.meetings.length===0)&&(!R.calls||R.calls.length===0)&&(!R.quotes||R.quotes.length===0)&&(!R.deals||R.deals.length===0)&&(!R.contacts||R.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${fl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const se=encodeURIComponent(u.email),Pe=encodeURIComponent(""),ge=encodeURIComponent(""),fe=`mailto:${se}?subject=${Pe}&body=${ge}`;window.location.href=fe},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${fl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${fl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,B=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{We(),nt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:se=>F(se.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:se=>M(se.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:et.map(se=>n.jsx("option",{value:se.value,children:se.label},se.value??se.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:Je.length>0&&Se.length===Je.length,onChange:le})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Se.length>0?n.jsx("button",{onClick:_e,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Se.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):De.length>0?Je.map(se=>{const Pe=[{Icon:na,value:se.email,key:"email"},{Icon:Lt,value:se.work_phone,key:"work_phone"},{Icon:id,value:se.mobile_phone_1,key:"mobile_phone_1"},{Icon:id,value:se.mobile_phone_2,key:"mobile_phone_2"}].filter(ge=>!!ge.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:ge=>{ge.target.closest('input[type="checkbox"]')||ge.target.closest("button")||(ht(se),Re(se.id))},children:[n.jsx("td",{className:"py-3 px-4 text-center align-top",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:Se.includes(se.id),onChange:()=>Z(se.id)})}),n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:fl(se)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:se.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ix,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:se.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:Pe.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Pe.map(({Icon:ge,value:fe,key:Fe})=>{const Xe=yt.createElement(ge,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Xe,n.jsx("span",{children:fe})]},Fe)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:se.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(sn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:se.assigned_contact?`${se.assigned_contact.first_name} ${se.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:io(se.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${se.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:se.status||"Active"})}),n.jsx("td",{className:"py-3 px-4 align-top"})]},se.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:De.length,pageSize:oe,currentPage:q,onPrev:H,onNext:be,onPageSizeChange:se=>{K(se),ne(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),ie=p?n.jsx("div",{id:"modalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:se=>se.stopPropagation(),children:[n.jsx("button",{onClick:()=>{te(),nt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||E,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Te,noValidate:!0,children:[n.jsx(Oc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Ie,placeholder:"First name",required:!0,isSubmitted:Be}),n.jsx(Oc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Ie,placeholder:"Last name",required:!0,isSubmitted:Be}),n.jsx(lR,{label:"Account",value:T.account_id,onChange:se=>$(Pe=>({...Pe,account_id:se})),items:o||[],getLabel:se=>se?.name??"",placeholder:"Search account...",required:!0,isSubmitted:Be,disabled:b||o.length===0}),n.jsx(lR,{label:"Assigned To",value:T.assigned_to,onChange:se=>$(Pe=>({...Pe,assigned_to:se})),items:c||[],getLabel:se=>`${se?.first_name??""} ${se?.last_name??""} (${se?.role?.toUpperCase()==="CEO"?"Admin":se?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Be,disabled:b||c.length===0}),n.jsx(Oc,{label:"Title",name:"title",value:T.title,onChange:Ie,placeholder:"Job title",disabled:b}),n.jsx(Oc,{label:"Department",name:"department",value:T.department,onChange:Ie,placeholder:"Department",disabled:b}),n.jsx(Oc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Ie,placeholder:"example@email.com",required:!0,isSubmitted:Be}),n.jsx(Oc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Oc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Oc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(tCe,{label:"Notes",name:"notes",value:T.notes,onChange:Ie,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{te(),nt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||E,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,ue=w?n.jsx(nCe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Qe,onCancel:ct,loading:E}):null;return n.jsxs(n.Fragment,{children:[B,D,ie,ue]})}function Oc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function lR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(eCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function eCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function tCe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function nCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const u_=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function UV({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Ql(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[E,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,A]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const M=await ae.get(`/leads/get/${c}`);u(M.data),v(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),A({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&T()},[c,e]);const $=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){W.error("Lead must be Qualified before it can be converted.");return}const M=await ae.put(`/leads/${d.id}/update/status`,{status:x});W.success("Lead status updated successfully");const G={...d,status:M.data.status};u(G),i&&i(G),a&&a(),t&&t()}catch(M){console.error(M),W.error("Failed to update lead status")}},z=async M=>{const G={...w,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",G),console.log("Contact data: ",E),console.log("Deal data: ",_),console.log("Lead data: ",M);try{const V=(await ae.post("/accounts/convertedLead",G)).data.id,X={...E,account_id:V,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},ne=(await ae.post("/contacts/convertedLead",X)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},K=_.amount&&_.amount!==""?parseFloat(_.amount):0,R={..._,account_id:V,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:ne,probability:oe(),stage:"Prospecting"},ye=await ae.post("/deals/convertedLead",R),pe=await ae.put(`/leads/convert/${M.id}`);i&&i(null),a(),W.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const V=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";W.error(V)}},F=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=M=>M.toString().toLowerCase().replace(/\b\w/g,G=>G.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${F(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>z(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:u_(M.due_date||M.created_at)})]},`task-${G}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:u_(M.start_time||M.created_at)})]},`meeting-${G}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:u_(M.call_time||M.created_at)})]},`call-${G}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),G=encodeURIComponent(""),Q=encodeURIComponent(""),V=`mailto:${M}?subject=${G}&body=${Q}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>v(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:$,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const aCe=Vf.all(),m_=aCe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),sCe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),rCe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},f_={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function iCe(){const e=wt(),{leadID:t}=Ql();Us();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(""),[E,k]=h.useState(1),[_,A]=h.useState(10),[T,$]=h.useState(f_),[z,F]=h.useState(!1),[P,M]=h.useState(null),[G,Q]=h.useState(!1),[V,X]=h.useState(null),[q,ne]=h.useState(!1),[oe,K]=h.useState([]),[R,ye]=h.useState({});h.useRef(null);const[pe,Ne]=h.useState(!1),[Se,Oe]=h.useState(null),[ke,he]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Ge,Ce]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[xe,ee]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ee=async()=>{try{const ue=await ae.get("/leads/getUsers");l(ue.data)}catch(ue){console.error(`Error fetching users: ${ue}`)}},Ae=async()=>{x(!0);try{const ue=await ae.get("/leads/admin/getLeads");f(ue.data),console.log(ue.data)}catch(ue){console.error(`Error fetching leads: ${ue}`)}finally{x(!1)}};h.useEffect(()=>{Ee(),Ae()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!z){const ue=u.find(se=>se.id===Number(t));ue&&s(ue)}else!t&&!a&&s(null)},[t,u,r,z]),h.useEffect(()=>{if(Se){const se=(fe=>{if(!fe)return{code:"+63",number:""};const Fe=fe.match(/^(\+\d+)\s(.+)$/);if(Fe)return{code:Fe[1],number:Fe[2]};if(fe.startsWith("+")){const Xe=fe.match(/^(\+\d{1,3})/);if(Xe)return{code:Xe[1],number:fe.substring(Xe[1].length).trim()}}return{code:"+63",number:fe}})(Se.work_phone),Pe=[];Se.work_phone&&Pe.push(`Work: ${Se.work_phone}`),Se.mobile_phone_1&&Pe.push(`Mobile 1: ${Se.mobile_phone_1}`),Se.mobile_phone_2&&Pe.push(`Mobile 2: ${Se.mobile_phone_2}`);const ge=Pe.length>0?Pe.join(" | "):"";he({name:Se.company_name||"",website:"",countryCode:se.code,phone_number:se.number,combinedPhoneNumbers:ge,billing_address:Se.address||"",shipping_address:Se.address||"",industry:"",status:"Prospect",territory_id:Se.assigned_to?.territory?.id||null,assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null}),Ce({last_name:Se.last_name||"",first_name:Se.first_name||"",account_id:null,title:Se.title||"",department:Se.department||"",email:Se.email||"",work_phone:Se.work_phone||"",mobile_phone_1:Se.mobile_phone_1||"",mobile_phone_2:Se.mobile_phone_2||"",notes:Se.notes||"",assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null}),ee({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null})}},[Se]);const Re=ue=>N(ue.target.value),et=h.useMemo(()=>{let ue=[...u];const se=v.trim().toLowerCase();se&&(ue=ue.filter(ge=>[ge?.first_name,ge?.last_name,ge?.company_name,ge?.title,ge?.email,ge?.work_phone,ge?.assigned_to?`${ge.assigned_to.first_name} ${ge.assigned_to.last_name}`:""].some(Fe=>Fe&&Fe.toString().toLowerCase().includes(se))));const Pe=b.trim().toUpperCase();return Pe&&Pe!=="FILTER BY STATUS"?ue=ue.filter(ge=>(ge.status?ge.status.toUpperCase():"")===Pe):ue=ue.filter(ge=>(ge.status?ge.status.toUpperCase():"")!=="CONVERTED"),w&&ue.sort((ge,fe)=>{const Fe=`${ge.first_name} ${ge.last_name}`,Xe=`${fe.first_name} ${fe.last_name}`;return w==="asc"?Fe.localeCompare(Xe):Xe.localeCompare(Fe)}),ue},[u,v,b,w]),De=Math.max(1,Math.ceil(et.length/_)||1);h.useEffect(()=>{k(1)},[v,b]),h.useEffect(()=>{k(ue=>{const se=Math.max(1,Math.ceil(et.length/_)||1);return ue>se?se:ue})},[et.length,_]);const tt=h.useMemo(()=>{const ue=(E-1)*_;return et.slice(ue,ue+_)},[et,E,_]),Je=()=>k(ue=>Math.max(ue-1,1)),H=()=>k(ue=>Math.min(ue+1,De)),be=ue=>{A(ue),k(1)},le=h.useCallback(async ue=>{try{const se=await ae.get(`/activities/lead/${ue}`);ye(se.data&&typeof se.data=="object"?se.data:{})}catch(se){console.error(se),se.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Z=ue=>{s(ue),le(ue.id)},_e=()=>{s(null),t&&e("/admin/leads",{replace:!0})},te=()=>{i(!1),$(f_),F(!1),M(null),Q(!1),d(null),sessionStorage.removeItem("editLeadData")},Ue=ue=>{ue.target.id==="modalBackdrop"&&te()},Ie=()=>{$(f_),F(!1),M(null),d(null),i(!0)},We=ue=>{if(!ue){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ue),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const se=Xe=>{if(!Xe)return{code:"+63",number:""};const pt=Xe.match(/^(\+\d+)\s(.+)$/);return pt?{code:pt[1],number:pt[2]}:{code:"+63",number:Xe}},Pe=se(ue.work_phone),ge=se(ue.mobile_phone_1),fe=se(ue.mobile_phone_2);let Fe="";if(ue.assigned_to){Fe=String(ue.assigned_to.id);const Xe=o?.find(pt=>pt.id===ue.assigned_to.id);d(Xe)}$({first_name:ue.first_name||"",last_name:ue.last_name||"",company_name:ue.company_name||"",title:ue.title||"",department:ue.department||"",email:ue.email||"",work_ccode:Pe.code,work_phone:Pe.number,m1_ccode:ge.code,mobile_phone_1:ge.number,m2_ccode:fe.code,mobile_phone_2:fe.number,address:ue.address||"",notes:ue.notes||"",source:ue.source||"",territory_id:ue.territory?.id||null,lead_owner:Fe,status:ue.status||"New"}),F(!0),M(ue.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},gt=ue=>{if(!ue){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ue);const se=`${ue.first_name} ${ue.last_name}`||"this lead";X({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:se}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:se}})},ve=ue=>{const{name:se,value:Pe}=ue.target;if($(ge=>({...ge,[se]:Pe})),se==="lead_owner"){const ge=o.find(fe=>fe.id===parseInt(Pe));d(ge)}},[Be,nt]=h.useState(!1),Te=ue=>{if(ue.preventDefault(),nt(!0),!T.last_name?.trim()){W.error("Last name is required.");return}if(!T.company_name?.trim()){W.error("Company is required.");return}if(!T.title?.trim()){W.error("Job title is required.");return}if(!T.email?.trim()){W.error("Email is required.");return}if(!T.email.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)){W.error("Please enter a valid email address with a dot in the domain.");return}if(!T.lead_owner){W.error("Please assign a lead owner.");return}const Pe={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},ge=z&&P?"update":"create",fe=`${T.first_name} ${T.last_name}`;X({title:ge==="create"?"Confirm New Lead":"Confirm Update",message:ge==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:ge==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:ge,payload:Pe,targetId:P||null,name:fe}})},Qe=ue=>{if(ue.target.checked){const se=tt.map(Pe=>Pe.id);K(se)}else K([])},ct=ue=>{K(se=>se.includes(ue)?se.filter(Pe=>Pe!==ue):[...se,ue])},ht=async()=>{oe.length!==0&&X({title:"Delete Leads",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:oe.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${oe.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:oe}})},je=async()=>{if(!V?.action){X(null);return}const{action:ue}=V,{type:se,payload:Pe,targetId:ge,name:fe,lead:Fe,leadIds:Xe}=ue;console.log(Pe),ne(!0);try{if(se==="create")Q(!0),await ae.post("/leads/create",Pe),W.success(`Lead "${fe}" created successfully.`),te(),await Ae();else if(se==="update"){if(!ge)throw new Error("Missing lead identifier for update.");Q(!0);const pt=await ae.put(`/leads/${ge}`,Pe);W.success(`Lead "${fe}" updated successfully.`),a&&a.id===ge&&s(null),te(),await Ae()}else if(se==="delete"){if(!ge)throw new Error("Missing lead identifier for deletion.");await ae.delete(`/leads/${ge}`),W.success(`Lead "${fe}" deleted successfully.`),a?.id===ge&&s(null),await Ae()}else se==="bulk-delete"&&(await ae.delete("/leads/admin/bulk-delete",{data:{lead_ids:Xe}}),W.success(`Successfully deleted ${Xe.length} leads`),K([]),await Ae())}catch(pt){console.error(pt);const Nt=se==="create"?"Failed to create lead. Please review the details and try again.":se==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",St=pt.response?.data?.detail||Nt;W.error(St)}finally{(se==="create"||se==="update")&&Q(!1),se!=="edit"&&(ne(!1),X(null))}},Ze=()=>{q||X(null)},ce=u.filter(ue=>ue.status==="New").length,J=u.filter(ue=>ue.status==="Contacted").length,de=u.filter(ue=>ue.status==="Qualified").length,D=u.filter(ue=>ue.status==="Converted").length,B=u.filter(ue=>ue.status==="Lost").length,ie=[{title:"New",value:ce,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:J,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:de,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:D,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:B,icon:zs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{W.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yl,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{Ie(),nt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ie.map(ue=>n.jsx(lCe,{...ue},ue.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Re,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:ue=>C(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:w,onChange:ue=>S(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"",children:"Sort by Name"}),n.jsx("option",{value:"asc",children:"A-Z"}),n.jsx("option",{value:"desc",children:"Z-A"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:tt.length>0&&tt.every(ue=>oe.includes(ue.id)),onChange:Qe})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:oe.length>0?n.jsx("button",{onClick:ht,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${oe.length} selected leads`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:et.length>0?tt.map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:se=>se.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:oe.includes(ue.id),onChange:()=>ct(ue.id)})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Z(ue),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ue.first_name," ",ue.last_name]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Z(ue),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ue.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Z(ue),children:ue.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Z(ue),children:ue.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Z(ue),children:ue.assigned_to?`${ue.assigned_to.first_name} ${ue.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Z(ue),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${rCe(ue.status||"New")}`,children:sCe(ue.status||"New")})}),n.jsx("td",{})]},ue.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:et.length,pageSize:_,currentPage:E,onPrev:Je,onNext:H,onPageSizeChange:be,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ue=>ue.stopPropagation(),children:[n.jsx("button",{onClick:()=>{te(),nt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:z?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:ve,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:T.last_name,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${Be&&!T.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!T.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!T.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:ve,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!T.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:m_.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:m_.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:m_.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:T.address,onChange:ve,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Be&&!T.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(cCe,{items:Array.isArray(o)?o:[],value:T.lead_owner??"",placeholder:"Search a user...",getLabel:ue=>`${ue.first_name} ${ue.last_name}`,onChange:ue=>{const se=o.find(ge=>String(ge.id)===String(ue));d(se);let Pe=null;se&&se.assigned_territory&&se.assigned_territory.length===1&&(Pe=se.assigned_territory[0].id),$(ge=>({...ge,lead_owner:ue,territory_id:Pe}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:ve,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ue=>n.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:ve,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:ve,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{te(),nt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:G||q,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Te,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:G||q,children:G||q?"Processing...":z?"Update Lead":"Save Lead"})]})]})]})}),V&&n.jsx(oCe,{open:!0,title:V.title,message:V.message,confirmLabel:V.confirmLabel,cancelLabel:V.cancelLabel,variant:V.variant,onConfirm:je,onCancel:Ze,loading:q}),a&&!r&&!z&&n.jsx(UV,{relatedActs:R,lead:a,onBack:_e,fetchLeads:Ae,setSelectedLead:s,onEdit:We,onDelete:gt})]})}function oCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function lCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function cCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}let dCe={data:""},uCe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||dCe},mCe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fCe=/\/\*[^]*?\*\/|  +/g,cR=/\n+/g,Wc=(e,t)=>{let a="",s="",r="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":s+=i[1]=="f"?Wc(o,i):i+"{"+Wc(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=Wc(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Wc.p?Wc.p(i,o):i+":"+o+";")}return a+(t&&r?t+"{"+r+"}":r)+s},hl={},FV=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+FV(e[a]);return t}return e},hCe=(e,t,a,s,r)=>{let i=FV(e),o=hl[i]||(hl[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!hl[o]){let c=i!==e?e:(d=>{let u,f,p=[{}];for(;u=mCe.exec(d.replace(fCe,""));)u[4]?p.shift():u[3]?(f=u[3].replace(cR," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(cR," ").trim();return p[0]})(e);hl[o]=Wc(r?{["@keyframes "+o]:c}:c,a?"":"."+o)}let l=a&&hl.g?hl.g:null;return a&&(hl.g=hl[o]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(hl[o],t,s,l),o},gCe=(e,t,a)=>e.reduce((s,r,i)=>{let o=t[i];if(o&&o.call){let l=o(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Wc(l,""):l===!1?"":l}return s+r+(o??"")},"");function tj(e){let t=this||{},a=e.call?e(t.p):e;return hCe(a.unshift?a.raw?gCe(a,[].slice.call(arguments,1),t.p):a.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):a,uCe(t.target),t.g,t.o,t.k)}let BV,CE,SE;tj.bind({g:1});let Bl=tj.bind({k:1});function pCe(e,t,a,s){Wc.p=t,BV=e,CE=a,SE=s}function Cd(e,t){let a=this||{};return function(){let s=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;a.p=Object.assign({theme:CE&&CE()},l),a.o=/ *go\d+/.test(c),l.className=tj.apply(a,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),SE&&d[0]&&SE(l),BV(d,l)}return r}}var xCe=e=>typeof e=="function",$v=(e,t)=>xCe(e)?e(t):e,yCe=(()=>{let e=0;return()=>(++e).toString()})(),HV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),bCe=20,WP="default",GV=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return GV(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},qb=[],WV={toasts:[],pausedAt:void 0,settings:{toastLimit:bCe}},Ao={},qV=(e,t=WP)=>{Ao[t]=GV(Ao[t]||WV,e),qb.forEach(([a,s])=>{a===t&&s(Ao[t])})},VV=e=>Object.keys(Ao).forEach(t=>qV(e,t)),vCe=e=>Object.keys(Ao).find(t=>Ao[t].toasts.some(a=>a.id===e)),nj=(e=WP)=>t=>{qV(t,e)},wCe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},NCe=(e={},t=WP)=>{let[a,s]=h.useState(Ao[t]||WV),r=h.useRef(Ao[t]);h.useEffect(()=>(r.current!==Ao[t]&&s(Ao[t]),qb.push([t,s]),()=>{let o=qb.findIndex(([l])=>l===t);o>-1&&qb.splice(o,1)}),[t]);let i=a.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||wCe[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...a,toasts:i}},jCe=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||yCe()}),$x=e=>(t,a)=>{let s=jCe(t,e,a);return nj(s.toasterId||vCe(s.id))({type:2,toast:s}),s.id},ns=(e,t)=>$x("blank")(e,t);ns.error=$x("error");ns.success=$x("success");ns.loading=$x("loading");ns.custom=$x("custom");ns.dismiss=(e,t)=>{let a={type:3,toastId:e};t?nj(t)(a):VV(a)};ns.dismissAll=e=>ns.dismiss(void 0,e);ns.remove=(e,t)=>{let a={type:4,toastId:e};t?nj(t)(a):VV(a)};ns.removeAll=e=>ns.remove(void 0,e);ns.promise=(e,t,a)=>{let s=ns.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?$v(t.success,r):void 0;return i?ns.success(i,{id:s,...a,...a?.success}):ns.dismiss(s),r}).catch(r=>{let i=t.error?$v(t.error,r):void 0;i?ns.error(i,{id:s,...a,...a?.error}):ns.dismiss(s)}),e};var CCe=1e3,SCe=(e,t="default")=>{let{toasts:a,pausedAt:s}=NCe(e,t),r=h.useRef(new Map).current,i=h.useCallback((f,p=CCe)=>{if(r.has(f))return;let x=setTimeout(()=>{r.delete(f),o({type:4,toastId:f})},p);r.set(f,x)},[]);h.useEffect(()=>{if(s)return;let f=Date.now(),p=a.map(x=>{if(x.duration===1/0)return;let v=(x.duration||0)+x.pauseDuration-(f-x.createdAt);if(v<0){x.visible&&ns.dismiss(x.id);return}return setTimeout(()=>ns.dismiss(x.id,t),v)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[a,s,t]);let o=h.useCallback(nj(t),[t]),l=h.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=h.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),d=h.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),u=h.useCallback((f,p)=>{let{reverseOrder:x=!1,gutter:v=8,defaultPosition:N}=p||{},b=a.filter(S=>(S.position||N)===(f.position||N)&&S.height),C=b.findIndex(S=>S.id===f.id),w=b.filter((S,E)=>E<C&&S.visible).length;return b.filter(S=>S.visible).slice(...x?[w+1]:[0,w]).reduce((S,E)=>S+(E.height||0)+v,0)},[a]);return h.useEffect(()=>{a.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=r.get(f.id);p&&(clearTimeout(p),r.delete(f.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},_Ce=Bl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ACe=Bl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,TCe=Bl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ECe=Cd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_Ce} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ACe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${TCe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,kCe=Bl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,LCe=Cd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${kCe} 1s linear infinite;
`,PCe=Bl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,DCe=Bl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,OCe=Cd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PCe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${DCe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,MCe=Cd("div")`
  position: absolute;
`,ICe=Cd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,$Ce=Bl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RCe=Cd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${$Ce} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,zCe=({toast:e})=>{let{icon:t,type:a,iconTheme:s}=e;return t!==void 0?typeof t=="string"?h.createElement(RCe,null,t):t:a==="blank"?null:h.createElement(ICe,null,h.createElement(LCe,{...s}),a!=="loading"&&h.createElement(MCe,null,a==="error"?h.createElement(ECe,{...s}):h.createElement(OCe,{...s})))},UCe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,FCe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,BCe="0%{opacity:0;} 100%{opacity:1;}",HCe="0%{opacity:1;} 100%{opacity:0;}",GCe=Cd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,WCe=Cd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qCe=(e,t)=>{let a=e.includes("top")?1:-1,[s,r]=HV()?[BCe,HCe]:[UCe(a),FCe(a)];return{animation:t?`${Bl(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Bl(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},VCe=h.memo(({toast:e,position:t,style:a,children:s})=>{let r=e.height?qCe(e.position||t||"top-center",e.visible):{opacity:0},i=h.createElement(zCe,{toast:e}),o=h.createElement(WCe,{...e.ariaProps},$v(e.message,e));return h.createElement(GCe,{className:e.className,style:{...r,...a,...e.style}},typeof s=="function"?s({icon:i,message:o}):h.createElement(h.Fragment,null,i,o))});pCe(h.createElement);var QCe=({id:e,className:t,style:a,onHeightUpdate:s,children:r})=>{let i=h.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return h.createElement("div",{ref:i,className:t,style:a},r)},YCe=(e,t)=>{let a=e.includes("top"),s=a?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:HV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...s,...r}},KCe=tj`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Hy=16,Rx=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:s,children:r,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=SCe(a,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Hy,left:Hy,right:Hy,bottom:Hy,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),x=YCe(f,p);return h.createElement(QCe,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?KCe:"",style:x},u.type==="custom"?$v(u.message,u):r?r(u):h.createElement(VCe,{toast:u,position:f}))}))},zx=ns;function XCe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ae.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,$=[_,T,k.action,k.entity_type,A,k.description],z=w===""||$.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),F=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&F}).sort((k,_)=>{const A=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-A})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){zx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),E=[w.join(","),...S.map(T=>T.map($=>`"${String($).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),A=document.createElement("a");A.href=_,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(_)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Rx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ts,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Yl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var ZCe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function qP(e){if(typeof e!="string")return!1;var t=ZCe;return t.includes(e)}var JCe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],eSe=new Set(JCe);function QV(e){return typeof e!="string"?!1:eSe.has(e)}function YV(e){return typeof e=="string"&&e.startsWith("data-")}function Fr(e){if(typeof e!="object"||e===null)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(QV(a)||YV(a))&&(t[a]=e[a]);return t}function Du(e){if(e==null)return null;if(h.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Fr(t)}return typeof e=="object"&&!Array.isArray(e)?Fr(e):null}function Vs(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(QV(a)||YV(a)||qP(a))&&(t[a]=e[a]);return t}function tSe(e){return e==null?null:h.isValidElement(e)?Vs(e.props):typeof e=="object"&&!Array.isArray(e)?Vs(e):null}var nSe=["children","width","height","viewBox","className","style","title","desc"];function _E(){return _E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},_E.apply(null,arguments)}function aSe(e,t){if(e==null)return{};var a,s,r=sSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function sSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var VP=h.forwardRef((e,t)=>{var{children:a,width:s,height:r,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=aSe(e,nSe),f=i||{width:s,height:r,x:0,y:0},p=Pt("recharts-surface",o);return h.createElement("svg",_E({},Vs(u),{className:p,width:s,height:r,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),h.createElement("title",null,c),h.createElement("desc",null,d),a)}),rSe=["children","className"];function AE(){return AE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},AE.apply(null,arguments)}function iSe(e,t){if(e==null)return{};var a,s,r=oSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function oSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var xs=h.forwardRef((e,t)=>{var{children:a,className:s}=e,r=iSe(e,rSe),i=Pt("recharts-layer",s);return h.createElement("g",AE({className:i},Vs(r),{ref:t}),a)}),KV=h.createContext(null),lSe=()=>h.useContext(KV),h_={},g_={},dR;function cSe(){return dR||(dR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==="__proto__"}e.isUnsafeProperty=t})(g_)),g_}var p_={},uR;function XV(){return uR||(uR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=t})(p_)),p_}var x_={},mR;function QP(){return mR||(mR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=t})(x_)),x_}var y_={},b_={},fR;function dSe(){return fR||(fR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(t).join(",");const s=String(a);return s==="0"&&Object.is(Number(a),-0)?"-0":s}e.toString=t})(b_)),b_}var hR;function YP(){return hR||(hR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dSe(),a=QP();function s(r){if(Array.isArray(r))return r.map(a.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],o=r.length;if(o===0)return i;let l=0,c="",d="",u=!1;for(r.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const f=r[l];d?f==="\\"&&l+1<o?(l++,c+=r[l]):f===d?d="":c+=f:u?f==='"'||f==="'"?d=f:f==="]"?(u=!1,i.push(c),c=""):c+=f:f==="["?(u=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,l++}return c&&i.push(c),i}e.toPath=s})(y_)),y_}var gR;function KP(){return gR||(gR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cSe(),a=XV(),s=QP(),r=YP();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?a.isDeepKey(c)?i(l,r.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let f=0;f<c.length;f++){if(u==null||t.isUnsafeProperty(c[f]))return d;u=u[c[f]]}return u===void 0?d:u}e.get=i})(h_)),h_}var v_,pR;function uSe(){return pR||(pR=1,v_=KP().get),v_}var mSe=uSe();const Ou=Xi(mSe);var fSe=4;function Kc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fSe,a=10**t,s=Math.round(e*a)/a;return Object.is(s,-0)?0:s}function ja(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return e.reduce((r,i,o)=>{var l=a[o-1];return typeof l=="string"?r+l+i:l!==void 0?r+Kc(l)+i:r+i},"")}var ps=e=>e===0?0:e>0?1:-1,Yi=e=>typeof e=="number"&&e!=+e,Hl=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Mt=e=>(typeof e=="number"||e instanceof Number)&&!Yi(e),Uo=e=>Mt(e)||typeof e=="string",hSe=0,Ep=e=>{var t=++hSe;return"".concat(e||"").concat(t)},$s=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Mt(t)&&typeof t!="string")return s;var i;if(Hl(t)){if(a==null)return s;var o=t.indexOf("%");i=a*parseFloat(t.slice(0,o))/100}else i=+t;return Yi(i)&&(i=s),r&&a!=null&&i>a&&(i=a),i},ZV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},s=0;s<t;s++)if(!a[String(e[s])])a[String(e[s])]=!0;else return!0;return!1};function la(e,t,a){return Mt(e)&&Mt(t)?Kc(e+a*(t-e)):t}function JV(e,t,a){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):Ou(s,t))===a)}var ua=e=>e===null||typeof e>"u",Ux=e=>ua(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function gSe(e){return e!=null}function Fx(){}var pSe=["type","size","sizeType"];function TE(){return TE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},TE.apply(null,arguments)}function xR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function yR(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(a),!0).forEach(function(s){xSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xSe(e,t,a){return(t=ySe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ySe(e){var t=bSe(e,"string");return typeof t=="symbol"?t:t+""}function bSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vSe(e,t){if(e==null)return{};var a,s,r=wSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function wSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var eQ={symbolCircle:MN,symbolCross:EW,symbolDiamond:LW,symbolSquare:PW,symbolStar:OW,symbolTriangle:MW,symbolWye:IW},NSe=Math.PI/180,jSe=e=>{var t="symbol".concat(Ux(e));return eQ[t]||MN},CSe=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*NSe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},SSe=(e,t)=>{eQ["symbol".concat(Ux(e))]=t},XP=e=>{var{type:t="circle",size:a=64,sizeType:s="area"}=e,r=vSe(e,pSe),i=yR(yR({},r),{},{type:t,size:a,sizeType:s}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var p=jSe(o),x=lP().type(p).size(CSe(a,s,o)),v=x();if(v!==null)return v},{className:c,cx:d,cy:u}=i,f=Vs(i);return Mt(d)&&Mt(u)&&Mt(a)?h.createElement("path",TE({},f,{className:Pt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:l()})):null};XP.registerSymbol=SSe;var tQ=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,ZP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(h.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(r=>{qP(r)&&(s[r]=(i=>a[r](a,i)))}),s},_Se=(e,t,a)=>s=>(e(t,a,s),null),Bx=(e,t,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];qP(r)&&typeof i=="function"&&(s||(s={}),s[r]=_Se(i,t,a))}),s};function bR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ASe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bR(Object(a),!0).forEach(function(s){TSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function TSe(e,t,a){return(t=ESe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ESe(e){var t=kSe(e,"string");return typeof t=="symbol"?t:t+""}function kSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qa(e,t){var a=ASe({},e),s=t,r=Object.keys(t),i=r.reduce((o,l)=>(o[l]===void 0&&s[l]!==void 0&&(o[l]=s[l]),o),a);return i}function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Rv.apply(null,arguments)}function vR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function LSe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?vR(Object(a),!0).forEach(function(s){PSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function PSe(e,t,a){return(t=DSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DSe(e){var t=OSe(e,"string");return typeof t=="symbol"?t:t+""}function OSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oi=32,MSe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function ISe(e){var{data:t,iconType:a,inactiveColor:s}=e,r=oi/2,i=oi/6,o=oi/3,l=t.inactive?s:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var d;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:r,x2:oi,y2:r,className:"recharts-legend-icon"})}if(c==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(r,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,`
            H`).concat(oi,"M").concat(2*o,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return h.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(oi/8,"h").concat(oi,"v").concat(oi*3/4,"h").concat(-oi,"z"),className:"recharts-legend-icon"});if(h.isValidElement(t.legendIcon)){var u=LSe({},t);return delete u.legendIcon,h.cloneElement(t.legendIcon,u)}return h.createElement(XP,{fill:l,cx:r,cy:r,size:oi,sizeType:"diameter",type:c})}function $Se(e){var{payload:t,iconSize:a,layout:s,formatter:r,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:oi,height:oi},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var p=u.formatter||r,x=Pt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,N=p?p(u.value,u,f):u.value;return h.createElement("li",Rv({className:x,style:c,key:"legend-item-".concat(f)},Bx(e,u,f)),h.createElement(VP,{width:a,height:a,viewBox:l,style:d,"aria-label":"".concat(N," legend icon")},h.createElement(ISe,{data:u,iconType:o,inactiveColor:i})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},N))})}var RSe=e=>{var t=Qa(e,MSe),{payload:a,layout:s,align:r}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:i},h.createElement($Se,Rv({},t,{payload:a})))},w_={},N_={},wR;function zSe(){return wR||(wR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){const r=new Map;for(let i=0;i<a.length;i++){const o=a[i],l=s(o);r.has(l)||r.set(l,o)}return Array.from(r.values())}e.uniqBy=t})(N_)),N_}var j_={},NR;function nQ(){return NR||(NR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a}e.identity=t})(j_)),j_}var C_={},S_={},__={},jR;function USe(){return jR||(jR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=t})(__)),__}var CR;function JP(){return CR||(CR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=USe();function a(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=a})(S_)),S_}var A_={},SR;function FSe(){return SR||(SR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="object"&&a!==null}e.isObjectLike=t})(A_)),A_}var _R;function BSe(){return _R||(_R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JP(),a=FSe();function s(r){return a.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(C_)),C_}var T_={},E_={},AR;function HSe(){return AR||(AR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KP();function a(s){return function(r){return t.get(r,s)}}e.property=a})(E_)),E_}var k_={},L_={},P_={},D_={},TR;function aQ(){return TR||(TR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=t})(D_)),D_}var O_={},ER;function sQ(){return ER||(ER=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=t})(O_)),O_}var M_={},kR;function rQ(){return kR||(kR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){return a===s||Number.isNaN(a)&&Number.isNaN(s)}e.eq=t})(M_)),M_}var LR;function GSe(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aQ(),a=sQ(),s=rQ();function r(u,f,p){return typeof p!="function"?r(u,f,()=>{}):i(u,f,function x(v,N,b,C,w,S){const E=p(v,N,b,C,w,S);return E!==void 0?!!E:i(v,N,x,S)},new Map)}function i(u,f,p,x){if(f===u)return!0;switch(typeof f){case"object":return o(u,f,p,x);case"function":return Object.keys(f).length>0?i(u,{...f},p,x):s.eq(u,f);default:return t.isObject(u)?typeof f=="string"?f==="":!0:s.eq(u,f)}}function o(u,f,p,x){if(f==null)return!0;if(Array.isArray(f))return c(u,f,p,x);if(f instanceof Map)return l(u,f,p,x);if(f instanceof Set)return d(u,f,p,x);const v=Object.keys(f);if(u==null||a.isPrimitive(u))return v.length===0;if(v.length===0)return!0;if(x?.has(f))return x.get(f)===u;x?.set(f,u);try{for(let N=0;N<v.length;N++){const b=v[N];if(!a.isPrimitive(u)&&!(b in u)||f[b]===void 0&&u[b]!==void 0||f[b]===null&&u[b]!==null||!p(u[b],f[b],b,u,f,x))return!1}return!0}finally{x?.delete(f)}}function l(u,f,p,x){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[v,N]of f.entries()){const b=u.get(v);if(p(b,N,v,u,f,x)===!1)return!1}return!0}function c(u,f,p,x){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const v=new Set;for(let N=0;N<f.length;N++){const b=f[N];let C=!1;for(let w=0;w<u.length;w++){if(v.has(w))continue;const S=u[w];let E=!1;if(p(S,b,N,u,f,x)&&(E=!0),E){v.add(w),C=!0;break}}if(!C)return!1}return!0}function d(u,f,p,x){return f.size===0?!0:u instanceof Set?c([...u],[...f],p,x):!1}e.isMatchWith=r,e.isSetMatch=d})(P_)),P_}var PR;function iQ(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GSe();function a(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=a})(L_)),L_}var I_={},$_={},R_={},DR;function WSe(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Object.getOwnPropertySymbols(a).filter(s=>Object.prototype.propertyIsEnumerable.call(a,s))}e.getSymbols=t})(R_)),R_}var z_={},OR;function oQ(){return OR||(OR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=t})(z_)),z_}var U_={},MR;function lQ(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",a="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",f="[object Function]",p="[object ArrayBuffer]",x="[object Object]",v="[object Error]",N="[object DataView]",b="[object Uint8Array]",C="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",E="[object BigUint64Array]",k="[object Int8Array]",_="[object Int16Array]",A="[object Int32Array]",T="[object BigInt64Array]",$="[object Float32Array]",z="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=E,e.booleanTag=r,e.dataViewTag=N,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=$,e.float64ArrayTag=z,e.functionTag=f,e.int16ArrayTag=_,e.int32ArrayTag=A,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=d,e.stringTag=a,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=C})(U_)),U_}var F_={},IR;function qSe(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=t})(F_)),F_}var $R;function cQ(){return $R||($R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WSe(),a=oQ(),s=lQ(),r=sQ(),i=qSe();function o(u,f){return l(u,void 0,u,new Map,f)}function l(u,f,p,x=new Map,v=void 0){const N=v?.(u,f,p,x);if(N!==void 0)return N;if(r.isPrimitive(u))return u;if(x.has(u))return x.get(u);if(Array.isArray(u)){const b=new Array(u.length);x.set(u,b);for(let C=0;C<u.length;C++)b[C]=l(u[C],C,p,x,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;x.set(u,b);for(const[C,w]of u)b.set(C,l(w,C,p,x,v));return b}if(u instanceof Set){const b=new Set;x.set(u,b);for(const C of u)b.add(l(C,void 0,p,x,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);x.set(u,b);for(let C=0;C<u.length;C++)b[C]=l(u[C],C,p,x,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return x.set(u,b),c(b,u,p,x,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return x.set(u,b),c(b,u,p,x,v),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof Error){const b=new u.constructor;return x.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,p,x,v),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof Number){const b=new Number(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof String){const b=new String(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return x.set(u,b),c(b,u,p,x,v),b}return u}function c(u,f,p=u,x,v){const N=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<N.length;b++){const C=N[b],w=Object.getOwnPropertyDescriptor(u,C);(w==null||w.writable)&&(u[C]=l(f[C],C,p,x,v))}}function d(u){switch(a.getTag(u)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})($_)),$_}var RR;function VSe(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cQ();function a(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=a})(I_)),I_}var zR;function QSe(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iQ(),a=VSe();function s(r){return r=a.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(k_)),k_}var B_={},H_={},G_={},UR;function YSe(){return UR||(UR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cQ(),a=lQ();function s(r,i){return t.cloneDeepWith(r,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!==void 0)return u;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case a.numberTag:case a.stringTag:case a.booleanTag:{const f=new r.constructor(r?.valueOf());return t.copyProperties(f,r),f}case a.argumentsTag:{const f={};return t.copyProperties(f,r),f.length=r.length,f[Symbol.iterator]=r[Symbol.iterator],f}default:return}})}e.cloneDeepWith=s})(G_)),G_}var FR;function KSe(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YSe();function a(s){return t.cloneDeepWith(s)}e.cloneDeep=a})(H_)),H_}var W_={},q_={},BR;function dQ(){return BR||(BR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function a(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=a})(q_)),q_}var V_={},HR;function XSe(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oQ();function a(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=a})(V_)),V_}var GR;function ZSe(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XV(),a=dQ(),s=XSe(),r=YP();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const f=c[u];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||s.isArguments(d))&&a.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=i})(W_)),W_}var WR;function JSe(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iQ(),a=QP(),s=KSe(),r=KP(),i=ZSe();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=a.toKey(l);break}}return c=s.cloneDeep(c),function(d){const u=r.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(B_)),B_}var qR;function e_e(){return qR||(qR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nQ(),a=HSe(),s=QSe(),r=JSe();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?r.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return a.property(o)}}e.iteratee=i})(T_)),T_}var VR;function t_e(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zSe(),a=nQ(),s=BSe(),r=e_e();function i(o,l=a.identity){return s.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.iteratee(l)):[]}e.uniqBy=i})(w_)),w_}var Q_,QR;function n_e(){return QR||(QR=1,Q_=t_e().uniqBy),Q_}var a_e=n_e();const YR=Xi(a_e);function uQ(e,t,a){return t===!0?YR(e,a):typeof t=="function"?YR(e,t):e}var e4=h.createContext(null),s_e=e=>e,Xn=()=>{var e=h.useContext(e4);return e?e.store.dispatch:s_e},Vb=()=>{},r_e=()=>Vb,i_e=(e,t)=>e===t;function $t(e){var t=h.useContext(e4);return z9.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:r_e,t?t.store.getState:Vb,t?t.store.getState:Vb,t?e:Vb,i_e)}var Y_={},K_={},X_={},KR;function o_e(){return KR||(KR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const a=(s,r,i)=>{if(s!==r){const o=t(s),l=t(r);if(o===l&&o===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=a})(X_)),X_}var Z_={},J_={},XR;function mQ(){return XR||(XR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=t})(J_)),J_}var ZR;function l_e(){return ZR||(ZR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mQ(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!a.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=r})(Z_)),Z_}var JR;function c_e(){return JR||(JR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o_e(),a=l_e(),s=YP();function r(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(x=>String(x));const d=(x,v)=>{let N=x;for(let b=0;b<v.length&&N!=null;++b)N=N[v[b]];return N},u=(x,v)=>v==null||x==null?v:typeof x=="object"&&"key"in x?Object.hasOwn(v,x.key)?v[x.key]:d(v,x.path):typeof x=="function"?x(v):Array.isArray(x)?d(v,x):typeof v=="object"?v[x]:v,f=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||a.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:f.map(v=>u(v,x))})).slice().sort((x,v)=>{for(let N=0;N<f.length;N++){const b=t.compareValues(x.criteria[N],v.criteria[N],l[N]);if(b!==0)return b}return 0}).map(x=>x.original)}e.orderBy=r})(K_)),K_}var e2={},ez;function d_e(){return ez||(ez=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s=1){const r=[],i=Math.floor(s),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):r.push(u)}};return o(a,0),r}e.flatten=t})(e2)),e2}var t2={},tz;function fQ(){return tz||(tz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dQ(),a=JP(),s=aQ(),r=rQ();function i(o,l,c){return s.isObject(c)&&(typeof l=="number"&&a.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],o):!1}e.isIterateeCall=i})(t2)),t2}var nz;function u_e(){return nz||(nz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c_e(),a=d_e(),s=fQ();function r(i,...o){const l=o.length;return l>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,a.flatten(o),["asc"])}e.sortBy=r})(Y_)),Y_}var n2,az;function m_e(){return az||(az=1,n2=u_e().sortBy),n2}var f_e=m_e();const aj=Xi(f_e);var hQ=e=>e.legend.settings,h_e=e=>e.legend.size,g_e=e=>e.legend.payload,p_e=rt([g_e,hQ],(e,t)=>{var{itemSorter:a}=t,s=e.flat(1);return a?aj(s,a):s});function x_e(){return $t(p_e)}var Gy=1;function gQ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,a]=h.useState({height:0,left:0,top:0,width:0}),s=h.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Gy||Math.abs(o.left-t.left)>Gy||Math.abs(o.top-t.top)>Gy||Math.abs(o.width-t.width)>Gy)&&a({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function Ss(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var y_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",sz=y_e,a2=()=>Math.random().toString(36).substring(7).split("").join("."),b_e={INIT:`@@redux/INIT${a2()}`,REPLACE:`@@redux/REPLACE${a2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${a2()}`},zv=b_e;function t4(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function pQ(e,t,a){if(typeof e!="function")throw new Error(Ss(2));if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Ss(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Ss(1));return a(pQ)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((b,C)=>{o.set(C,b)}))}function u(){if(c)throw new Error(Ss(3));return r}function f(b){if(typeof b!="function")throw new Error(Ss(4));if(c)throw new Error(Ss(5));let C=!0;d();const w=l++;return o.set(w,b),function(){if(C){if(c)throw new Error(Ss(6));C=!1,d(),o.delete(w),i=null}}}function p(b){if(!t4(b))throw new Error(Ss(7));if(typeof b.type>"u")throw new Error(Ss(8));if(typeof b.type!="string")throw new Error(Ss(17));if(c)throw new Error(Ss(9));try{c=!0,r=s(r,b)}finally{c=!1}return(i=o).forEach(w=>{w()}),b}function x(b){if(typeof b!="function")throw new Error(Ss(10));s=b,p({type:zv.REPLACE})}function v(){const b=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Ss(11));function w(){const E=C;E.next&&E.next(u())}return w(),{unsubscribe:b(w)}},[sz](){return this}}}return p({type:zv.INIT}),{dispatch:p,subscribe:f,getState:u,replaceReducer:x,[sz]:v}}function v_e(e){Object.keys(e).forEach(t=>{const a=e[t];if(typeof a(void 0,{type:zv.INIT})>"u")throw new Error(Ss(12));if(typeof a(void 0,{type:zv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ss(13))})}function xQ(e){const t=Object.keys(e),a={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(a[o]=e[o])}const s=Object.keys(a);let r;try{v_e(a)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const d={};for(let u=0;u<s.length;u++){const f=s[u],p=a[f],x=o[f],v=p(x,l);if(typeof v>"u")throw l&&l.type,new Error(Ss(14));d[f]=v,c=c||v!==x}return c=c||s.length!==Object.keys(o).length,c?d:o}}function Uv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,a)=>(...s)=>t(a(...s)))}function w_e(...e){return t=>(a,s)=>{const r=t(a,s);let i=()=>{throw new Error(Ss(15))};const o={getState:r.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=Uv(...l)(r.dispatch),{...r,dispatch:i}}}function yQ(e){return t4(e)&&"type"in e&&typeof e.type=="string"}var bQ=Symbol.for("immer-nothing"),rz=Symbol.for("immer-draftable"),Qs=Symbol.for("immer-state");function Fi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ir=Object,Df=Ir.getPrototypeOf,Fv="constructor",sj="prototype",EE="configurable",Bv="enumerable",Qb="writable",kp="value",Gl=e=>!!e&&!!e[Qs];function Ki(e){return e?vQ(e)||rj(e)||!!e[rz]||!!e[Fv]?.[rz]||ij(e)||oj(e):!1}var N_e=Ir[sj][Fv].toString(),iz=new WeakMap;function vQ(e){if(!e||!n4(e))return!1;const t=Df(e);if(t===null||t===Ir[sj])return!0;const a=Ir.hasOwnProperty.call(t,Fv)&&t[Fv];if(a===Object)return!0;if(!nf(a))return!1;let s=iz.get(a);return s===void 0&&(s=Function.toString.call(a),iz.set(a,s)),s===N_e}function Hx(e,t,a=!0){Gx(e)===0?(a?Reflect.ownKeys(e):Ir.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function Gx(e){const t=e[Qs];return t?t.type_:rj(e)?1:ij(e)?2:oj(e)?3:0}var oz=(e,t,a=Gx(e))=>a===2?e.has(t):Ir[sj].hasOwnProperty.call(e,t),kE=(e,t,a=Gx(e))=>a===2?e.get(t):e[t],Hv=(e,t,a,s=Gx(e))=>{s===2?e.set(t,a):s===3?e.add(a):e[t]=a};function j_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var rj=Array.isArray,ij=e=>e instanceof Map,oj=e=>e instanceof Set,n4=e=>typeof e=="object",nf=e=>typeof e=="function",s2=e=>typeof e=="boolean";function C_e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var wl=e=>e.copy_||e.base_,a4=e=>e.modified_?e.copy_:e.base_;function LE(e,t){if(ij(e))return new Map(e);if(oj(e))return new Set(e);if(rj(e))return Array[sj].slice.call(e);const a=vQ(e);if(t===!0||t==="class_only"&&!a){const s=Ir.getOwnPropertyDescriptors(e);delete s[Qs];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l[Qb]===!1&&(l[Qb]=!0,l[EE]=!0),(l.get||l.set)&&(s[o]={[EE]:!0,[Qb]:!0,[Bv]:l[Bv],[kp]:e[o]})}return Ir.create(Df(e),s)}else{const s=Df(e);if(s!==null&&a)return{...e};const r=Ir.create(s);return Ir.assign(r,e)}}function s4(e,t=!1){return lj(e)||Gl(e)||!Ki(e)||(Gx(e)>1&&Ir.defineProperties(e,{set:Wy,add:Wy,clear:Wy,delete:Wy}),Ir.freeze(e),t&&Hx(e,(a,s)=>{s4(s,!0)},!1)),e}function S_e(){Fi(2)}var Wy={[kp]:S_e};function lj(e){return e===null||!n4(e)?!0:Ir.isFrozen(e)}var Gv="MapSet",PE="Patches",lz="ArrayMethods",wQ={};function Mu(e){const t=wQ[e];return t||Fi(0,e),t}var cz=e=>!!wQ[e],Lp,NQ=()=>Lp,__e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:cz(Gv)?Mu(Gv):void 0,arrayMethodsPlugin_:cz(lz)?Mu(lz):void 0});function dz(e,t){t&&(e.patchPlugin_=Mu(PE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function DE(e){OE(e),e.drafts_.forEach(A_e),e.drafts_=null}function OE(e){e===Lp&&(Lp=e.parent_)}var uz=e=>Lp=__e(Lp,e);function A_e(e){const t=e[Qs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function mz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(e!==void 0&&e!==a){a[Qs].modified_&&(DE(t),Fi(4)),Ki(e)&&(e=fz(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(a[Qs].base_,e,t)}else e=fz(t,a);return T_e(t,e,!0),DE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bQ?e:void 0}function fz(e,t){if(lj(t))return t;const a=t[Qs];if(!a)return r4(t,e.handledSet_,e);if(!cj(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:s}=a;if(s)for(;s.length>0;)s.pop()(e);SQ(a,e)}return a.copy_}function T_e(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&s4(t,a)}function jQ(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var cj=(e,t)=>e.scope_===t,E_e=[];function CQ(e,t,a,s){const r=wl(e),i=e.type_;if(s!==void 0&&kE(r,s,i)===t){Hv(r,s,a,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Hx(r,(c,d)=>{if(Gl(d)){const u=l.get(d)||[];u.push(c),l.set(d,u)}})}const o=e.draftLocations_.get(t)??E_e;for(const l of o)Hv(r,l,a,i)}function k_e(e,t,a){e.callbacks_.push(function(r){const i=t;if(!i||!cj(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const o=a4(i);CQ(e,i.draft_??i,o,a),SQ(i,r)})}function SQ(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}jQ(e)}}function L_e(e,t,a){const{scope_:s}=e;if(Gl(a)){const r=a[Qs];cj(r,s)&&r.callbacks_.push(function(){Yb(e);const o=a4(r);CQ(e,a,o,t)})}else Ki(a)&&e.callbacks_.push(function(){const i=wl(e);kE(i,t,e.type_)===a&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&r4(kE(e.copy_,t,e.type_),s.handledSet_,s)})}function r4(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||Gl(e)||t.has(e)||!Ki(e)||lj(e)||(t.add(e),Hx(e,(s,r)=>{if(Gl(r)){const i=r[Qs];if(cj(i,a)){const o=a4(i);Hv(e,s,o,e.type_),jQ(i)}}else Ki(r)&&r4(r,t,a)})),e}function P_e(e,t){const a=rj(e),s={type_:a?1:0,scope_:t?t.scope_:NQ(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=i4;a&&(r=[s],i=Pp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,[l,s]}var i4={get(e,t){if(t===Qs)return e;let a=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&a?.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const r=wl(e);if(!oz(r,t,e.type_))return D_e(e,r,t);const i=r[t];if(e.finalized_||!Ki(i)||s&&e.operationMethod&&a?.isMutatingArrayMethod(e.operationMethod)&&C_e(t))return i;if(i===r2(e.base_,t)){Yb(e);const o=e.type_===1?+t:t,l=IE(e.scope_,i,e,o);return e.copy_[o]=l}return i},has(e,t){return t in wl(e)},ownKeys(e){return Reflect.ownKeys(wl(e))},set(e,t,a){const s=_Q(wl(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=r2(wl(e),t),i=r?.[Qs];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(j_e(a,r)&&(a!==void 0||oz(e.base_,t,e.type_)))return!0;Yb(e),ME(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),L_e(e,t,a)),!0},deleteProperty(e,t){return Yb(e),r2(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),ME(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=wl(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{[Qb]:!0,[EE]:e.type_!==1||t!=="length",[Bv]:s[Bv],[kp]:a[t]}},defineProperty(){Fi(11)},getPrototypeOf(e){return Df(e.base_)},setPrototypeOf(){Fi(12)}},Pp={};Hx(i4,(e,t)=>{Pp[e]=function(){const a=arguments;return a[0]=a[0][0],t.apply(this,a)}});Pp.deleteProperty=function(e,t){return Pp.set.call(this,e,t,void 0)};Pp.set=function(e,t,a){return i4.set.call(this,e[0],t,a,e[0])};function r2(e,t){const a=e[Qs];return(a?wl(a):e)[t]}function D_e(e,t,a){const s=_Q(t,a);return s?kp in s?s[kp]:s.get?.call(e.draft_):void 0}function _Q(e,t){if(!(t in e))return;let a=Df(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Df(a)}}function ME(e){e.modified_||(e.modified_=!0,e.parent_&&ME(e.parent_))}function Yb(e){e.copy_||(e.assigned_=new Map,e.copy_=LE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var O_e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,s,r)=>{if(nf(a)&&!nf(s)){const o=s;s=a;const l=this;return function(d=o,...u){return l.produce(d,f=>s.call(this,f,...u))}}nf(s)||Fi(6),r!==void 0&&!nf(r)&&Fi(7);let i;if(Ki(a)){const o=uz(this),l=IE(o,a,void 0);let c=!0;try{i=s(l),c=!1}finally{c?DE(o):OE(o)}return dz(o,r),mz(i,o)}else if(!a||!n4(a)){if(i=s(a),i===void 0&&(i=a),i===bQ&&(i=void 0),this.autoFreeze_&&s4(i,!0),r){const o=[],l=[];Mu(PE).generateReplacementPatches_(a,i,{patches_:o,inversePatches_:l}),r(o,l)}return i}else Fi(1,a)},this.produceWithPatches=(a,s)=>{if(nf(a))return(l,...c)=>this.produceWithPatches(l,d=>a(d,...c));let r,i;return[this.produce(a,s,(l,c)=>{r=l,i=c}),r,i]},s2(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),s2(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),s2(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ki(t)||Fi(8),Gl(t)&&(t=Wi(t));const a=uz(this),s=IE(a,t,void 0);return s[Qs].isManual_=!0,OE(a),s}finishDraft(t,a){const s=t&&t[Qs];(!s||!s.isManual_)&&Fi(9);const{scope_:r}=s;return dz(r,a),mz(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,a){let s;for(s=a.length-1;s>=0;s--){const i=a[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(a=a.slice(s+1));const r=Mu(PE).applyPatches_;return Gl(t)?r(t,a):this.produce(t,i=>r(i,a))}};function IE(e,t,a,s){const[r,i]=ij(t)?Mu(Gv).proxyMap_(t,a):oj(t)?Mu(Gv).proxySet_(t,a):P_e(t,a);return(a?.scope_??NQ()).drafts_.push(r),i.callbacks_=a?.callbacks_??[],i.key_=s,a&&s!==void 0?k_e(a,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),r}function Wi(e){return Gl(e)||Fi(10,e),AQ(e)}function AQ(e){if(!Ki(e)||lj(e))return e;const t=e[Qs];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=LE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=LE(e,!0);return Hx(a,(r,i)=>{Hv(a,r,AQ(i))},s),t&&(t.finalized_=!1),a}var M_e=new O_e,TQ=M_e.produce;function EQ(e){return({dispatch:a,getState:s})=>r=>i=>typeof i=="function"?i(a,s,e):r(i)}var I_e=EQ(),$_e=EQ,R_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Uv:Uv.apply(null,arguments)};function vi(e,t){function a(...s){if(t){let r=t(...s);if(!r)throw new Error(zr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=s=>yQ(s)&&s.type===e,a}var kQ=class zg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zg.prototype)}static get[Symbol.species](){return zg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zg(...t[0].concat(this)):new zg(...t.concat(this))}};function hz(e){return Ki(e)?TQ(e,()=>{}):e}function qy(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}function z_e(e){return typeof e=="boolean"}var U_e=()=>function(t){const{thunk:a=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let o=new kQ;return a&&(z_e(a)?o.push(I_e):o.push($_e(a.extraArgument))),o},LQ="RTK_autoBatch",oa=()=>e=>({payload:e,meta:{[LQ]:!0}}),gz=e=>t=>{setTimeout(t,e)},PQ=(e={type:"raf"})=>t=>(...a)=>{const s=t(...a);let r=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gz(10):e.type==="callback"?e.queueNotification:gz(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const f=()=>r&&u(),p=s.subscribe(f);return l.add(u),()=>{p(),l.delete(u)}},dispatch(u){try{return r=!u?.meta?.[LQ],i=!r,i&&(o||(o=!0,c(d))),s.dispatch(u)}finally{r=!0}}})},F_e=e=>function(a){const{autoBatch:s=!0}=a??{};let r=new kQ(e);return s&&r.push(PQ(typeof s=="object"?s:void 0)),r};function B_e(e){const t=U_e(),{reducer:a=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof a=="function")l=a;else if(t4(a))l=xQ(a);else throw new Error(zr(1));let c;typeof s=="function"?c=s(t):c=t();let d=Uv;r&&(d=R_e({trace:!1,...typeof r=="object"&&r}));const u=w_e(...c),f=F_e(u);let p=typeof o=="function"?o(f):f();const x=d(...p);return pQ(l,i,x)}function DQ(e){const t={},a=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(zr(28));if(l in t)throw new Error(zr(29));return t[l]=o,r},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&a.push({matcher:i.settled,reducer:o.settled}),r},addMatcher(i,o){return a.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,a,s]}function H_e(e){return typeof e=="function"}function G_e(e,t){let[a,s,r]=DQ(t),i;if(H_e(e))i=()=>hz(e());else{const l=hz(e);i=()=>l}function o(l=i(),c){let d=[a[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[r]),d.reduce((u,f)=>{if(f)if(Gl(u)){const x=f(u,c);return x===void 0?u:x}else{if(Ki(u))return TQ(u,p=>f(p,c));{const p=f(u,c);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},l)}return o.getInitialState=i,o}var W_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",q_e=(e=21)=>{let t="",a=e;for(;a--;)t+=W_e[Math.random()*64|0];return t},V_e=Symbol.for("rtk-slice-createasyncthunk");function Q_e(e,t){return`${e}/${t}`}function Y_e({creators:e}={}){const t=e?.asyncThunk?.[V_e];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(zr(11));const o=(typeof s.reducers=="function"?s.reducers(X_e()):s.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,E){const k=typeof S=="string"?S:S.type;if(!k)throw new Error(zr(12));if(k in c.sliceCaseReducersByType)throw new Error(zr(13));return c.sliceCaseReducersByType[k]=E,d},addMatcher(S,E){return c.sliceMatchers.push({matcher:S,reducer:E}),d},exposeAction(S,E){return c.actionCreators[S]=E,d},exposeCaseReducer(S,E){return c.sliceCaseReducersByName[S]=E,d}};l.forEach(S=>{const E=o[S],k={reducerName:S,type:Q_e(r,S),createNotation:typeof s.reducers=="function"};J_e(E)?t2e(k,E,d,t):Z_e(k,E,d)});function u(){const[S={},E=[],k=void 0]=typeof s.extraReducers=="function"?DQ(s.extraReducers):[s.extraReducers],_={...S,...c.sliceCaseReducersByType};return G_e(s.initialState,A=>{for(let T in _)A.addCase(T,_[T]);for(let T of c.sliceMatchers)A.addMatcher(T.matcher,T.reducer);for(let T of E)A.addMatcher(T.matcher,T.reducer);k&&A.addDefaultCase(k)})}const f=S=>S,p=new Map,x=new WeakMap;let v;function N(S,E){return v||(v=u()),v(S,E)}function b(){return v||(v=u()),v.getInitialState()}function C(S,E=!1){function k(A){let T=A[S];return typeof T>"u"&&E&&(T=qy(x,k,b)),T}function _(A=f){const T=qy(p,E,()=>new WeakMap);return qy(T,A,()=>{const $={};for(const[z,F]of Object.entries(s.selectors??{}))$[z]=K_e(F,A,()=>qy(x,A,b),E);return $})}return{reducerPath:S,getSelectors:_,get selectors(){return _(k)},selectSlice:k}}const w={name:r,reducer:N,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...C(i),injectInto(S,{reducerPath:E,...k}={}){const _=E??i;return S.inject({reducerPath:_,reducer:N},k),{...w,...C(_,!0)}}};return w}}function K_e(e,t,a,s){function r(i,...o){let l=t(i);return typeof l>"u"&&s&&(l=a()),e(l,...o)}return r.unwrapped=e,r}var vr=Y_e();function X_e(){function e(t,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...a}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...a){return t(...a)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:a}},asyncThunk:e}}function Z_e({type:e,reducerName:t,createNotation:a},s,r){let i,o;if("reducer"in s){if(a&&!e2e(s))throw new Error(zr(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?vi(e,o):vi(e))}function J_e(e){return e._reducerDefinitionType==="asyncThunk"}function e2e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function t2e({type:e,reducerName:t},a,s,r){if(!r)throw new Error(zr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=a,f=r(e,i,u);s.exposeAction(t,f),o&&s.addCase(f.fulfilled,o),l&&s.addCase(f.pending,l),c&&s.addCase(f.rejected,c),d&&s.addMatcher(f.settled,d),s.exposeCaseReducer(t,{fulfilled:o||Vy,pending:l||Vy,rejected:c||Vy,settled:d||Vy})}function Vy(){}var n2e="task",OQ="listener",MQ="completed",o4="cancelled",a2e=`task-${o4}`,s2e=`task-${MQ}`,$E=`${OQ}-${o4}`,r2e=`${OQ}-${MQ}`,dj=class{constructor(e){this.code=e,this.message=`${n2e} ${o4} (reason: ${e})`}name="TaskAbortError";message},l4=(e,t)=>{if(typeof e!="function")throw new TypeError(zr(32))},Wv=()=>{},IQ=(e,t=Wv)=>(e.catch(t),e),$Q=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),bu=e=>{if(e.aborted)throw new dj(e.reason)};function RQ(e,t){let a=Wv;return new Promise((s,r)=>{const i=()=>r(new dj(e.reason));if(e.aborted){i();return}a=$Q(e,i),t.finally(()=>a()).then(s,r)}).finally(()=>{a=Wv})}var i2e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof dj?"cancelled":"rejected",error:a}}finally{t?.()}},qv=e=>t=>IQ(RQ(e,t).then(a=>(bu(e),a))),zQ=e=>{const t=qv(e);return a=>t(new Promise(s=>setTimeout(s,a)))},{assign:pf}=Object,pz={},uj="listenerMiddleware",o2e=(e,t)=>{const a=s=>$Q(e,()=>s.abort(e.reason));return(s,r)=>{l4(s);const i=new AbortController;a(i);const o=i2e(async()=>{bu(e),bu(i.signal);const l=await s({pause:qv(i.signal),delay:zQ(i.signal),signal:i.signal});return bu(i.signal),l},()=>i.abort(s2e));return r?.autoJoin&&t.push(o.catch(Wv)),{result:qv(e)(o),cancel(){i.abort(a2e)}}}},l2e=(e,t)=>{const a=async(s,r)=>{bu(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:s,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});i=()=>{u(),d()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await RQ(t,Promise.race(l));return bu(t),c}finally{i()}};return(s,r)=>IQ(a(s,r))},UQ=e=>{let{type:t,actionCreator:a,matcher:s,predicate:r,effect:i}=e;if(t)r=vi(t).match;else if(a)t=a.type,r=a.match;else if(s)r=s;else if(!r)throw new Error(zr(21));return l4(i),{predicate:r,type:t,effect:i}},FQ=pf(e=>{const{type:t,predicate:a,effect:s}=UQ(e);return{id:q_e(),effect:s,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(zr(22))}}},{withTypes:()=>FQ}),xz=(e,t)=>{const{type:a,effect:s,predicate:r}=UQ(t);return Array.from(e.values()).find(i=>(typeof a=="string"?i.type===a:i.predicate===r)&&i.effect===s)},RE=e=>{e.pending.forEach(t=>{t.abort($E)})},c2e=(e,t)=>()=>{for(const a of t.keys())RE(a);e.clear()},yz=(e,t,a)=>{try{e(t,a)}catch(s){setTimeout(()=>{throw s},0)}},BQ=pf(vi(`${uj}/add`),{withTypes:()=>BQ}),d2e=vi(`${uj}/removeAll`),HQ=pf(vi(`${uj}/remove`),{withTypes:()=>HQ}),u2e=(...e)=>{console.error(`${uj}/error`,...e)},Wx=(e={})=>{const t=new Map,a=new Map,s=x=>{const v=a.get(x)??0;a.set(x,v+1)},r=x=>{const v=a.get(x)??1;v===1?a.delete(x):a.set(x,v-1)},{extra:i,onError:o=u2e}=e;l4(o);const l=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),v=>{x.unsubscribe(),v?.cancelActive&&RE(x)}),c=x=>{const v=xz(t,x)??FQ(x);return l(v)};pf(c,{withTypes:()=>c});const d=x=>{const v=xz(t,x);return v&&(v.unsubscribe(),x.cancelActive&&RE(v)),!!v};pf(d,{withTypes:()=>d});const u=async(x,v,N,b)=>{const C=new AbortController,w=l2e(c,C.signal),S=[];try{x.pending.add(C),s(x),await Promise.resolve(x.effect(v,pf({},N,{getOriginalState:b,condition:(E,k)=>w(E,k).then(Boolean),take:w,delay:zQ(C.signal),pause:qv(C.signal),extra:i,signal:C.signal,fork:o2e(C.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((E,k,_)=>{E!==C&&(E.abort($E),_.delete(E))})},cancel:()=>{C.abort($E),x.pending.delete(C)},throwIfCancelled:()=>{bu(C.signal)}})))}catch(E){E instanceof dj||yz(o,E,{raisedBy:"effect"})}finally{await Promise.all(S),C.abort(r2e),r(x),x.pending.delete(C)}},f=c2e(t,a);return{middleware:x=>v=>N=>{if(!yQ(N))return v(N);if(BQ.match(N))return c(N.payload);if(d2e.match(N)){f();return}if(HQ.match(N))return d(N.payload);let b=x.getState();const C=()=>{if(b===pz)throw new Error(zr(23));return b};let w;try{if(w=v(N),t.size>0){const S=x.getState(),E=Array.from(t.values());for(const k of E){let _=!1;try{_=k.predicate(N,S,b)}catch(A){_=!1,yz(o,A,{raisedBy:"predicate"})}_&&u(k,N,x,C)}}}finally{b=pz}return w},startListening:c,stopListening:d,clearListeners:f}};function zr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var m2e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},GQ=vr({name:"chartLayout",initialState:m2e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,s,r,i;e.margin.top=(a=t.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:f2e,setLayout:h2e,setChartSize:g2e,setScale:p2e}=GQ.actions,x2e=GQ.reducer;function WQ(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function pa(e){return Number.isFinite(e)}function Fo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function bz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function sf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bz(Object(a),!0).forEach(function(s){y2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function y2e(e,t,a){return(t=b2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b2e(e){var t=v2e(e,"string");return typeof t=="symbol"?t:t+""}function v2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hn(e,t,a){return ua(e)||ua(t)?a:Uo(t)?Ou(e,t,a):typeof t=="function"?t(e):a}var w2e=(e,t,a)=>{if(t&&a){var{width:s,height:r}=a,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Mt(e[i]))return sf(sf({},e),{},{[i]:e[i]+(s||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Mt(e[o]))return sf(sf({},e),{},{[o]:e[o]+(r||0)})}return e},Sd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",qQ=(e,t,a,s)=>{if(s)return e.map(l=>l.coordinate);var r,i,o=e.map(l=>(l.coordinate===t&&(r=!0),l.coordinate===a&&(i=!0),l.coordinate));return r||o.push(t),i||o.push(a),o},VQ=(e,t,a)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:f,niceTicks:p,axisType:x}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,N=r==="category"&&o.bandwidth?o.bandwidth()/v:0;if(N=x==="angleAxis"&&i&&i.length>=2?ps(i[0]-i[1])*2*N:N,f||p){var b=(f||p||[]).map((C,w)=>{var S=s?s.indexOf(C):C;return{coordinate:o(S)+N,value:C,offset:N,index:w}});return b.filter(C=>!Yi(C.coordinate))}return c&&d?d.map((C,w)=>({coordinate:o(C)+N,value:C,index:w,offset:N})):o.ticks&&u!=null?o.ticks(u).map((C,w)=>({coordinate:o(C)+N,value:C,offset:N,index:w})):o.domain().map((C,w)=>({coordinate:o(C)+N,value:s?s[C]:C,index:w,offset:N}))},vz=1e-4,N2e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var a=t.length,s=e.range(),r=Math.min(s[0],s[1])-vz,i=Math.max(s[0],s[1])+vz,o=e(t[0]),l=e(t[a-1]);(o<r||o>i||l<r||l>i)&&e.domain([t[0],t[a-1]])}},j2e=(e,t)=>{if(!t||t.length!==2||!Mt(t[0])||!Mt(t[1]))return e;var a=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!Mt(e[0])||e[0]<a)&&(r[0]=a),(!Mt(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<a&&(r[1]=a),r},C2e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0,l=0;l<a;++l){var c=e[l],d=c?.[r];if(d!=null){var u=d[1],f=d[0],p=Yi(u)?f:u;p>=0?(d[0]=i,d[1]=i+p,i=u):(d[0]=o,d[1]=o+p,o=u)}}}},S2e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0;o<a;++o){var l=e[o],c=l?.[r];if(c!=null){var d=Yi(c[1])?c[0]:c[1];d>=0?(c[0]=i,c[1]=i+d,i=c[1]):(c[0]=0,c[1]=0)}}}},_2e={sign:C2e,expand:XW,none:ld,silhouette:ZW,wiggle:JW,positive:S2e},A2e=(e,t,a)=>{var s,r=(s=_2e[a])!==null&&s!==void 0?s:ld,i=dP().keys(t).value((l,c)=>Number(Hn(l,c,0))).order(ku).offset(r),o=i(e);return o.forEach((l,c)=>{l.forEach((d,u)=>{var f=Hn(e[u],t[c],0);Array.isArray(f)&&f.length===2&&Mt(f[0])&&Mt(f[1])&&(d[0]=f[0],d[1]=f[1])})}),o};function T2e(e){return e==null?void 0:String(e)}function wz(e){var{axis:t,ticks:a,bandSize:s,entry:r,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ua(r[t.dataKey])){var l=JV(a,"value",r[t.dataKey]);if(l)return l.coordinate+s/2}return a[i]?a[i].coordinate+s/2:null}var c=Hn(r,ua(o)?t.dataKey:o);return ua(c)?null:t.scale(c)}var Nz=e=>{var{axis:t,ticks:a,offset:s,bandSize:r,entry:i,index:o}=e;if(t.type==="category")return a[o]?a[o].coordinate+s:null;var l=Hn(i,t.dataKey,t.scale.domain()[o]);return ua(l)?null:t.scale(l)-r/2+s},E2e=e=>{var{numericAxis:t}=e,a=t.scale.domain();if(t.type==="number"){var s=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return s<=0&&r>=0?0:r<0?r:s}return a[0]},k2e=e=>{var t=e.flat(2).filter(Mt);return[Math.min(...t),Math.max(...t)]},L2e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],P2e=(e,t,a)=>{if(e!=null)return L2e(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:o}=i,l=o.reduce((c,d)=>{var u=WQ(d,t,a),f=k2e(u);return!pa(f[0])||!pa(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]))},jz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Cz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Of=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&t&&t.length>=2){for(var r=aj(t,u=>u.coordinate),i=1/0,o=1,l=r.length;o<l;o++){var c=r[o],d=r[o-1];i=Math.min((c?.coordinate||0)-(d?.coordinate||0),i)}return i===1/0?0:i}return a?void 0:0};function Sz(e){var{tooltipEntrySettings:t,dataKey:a,payload:s,value:r,name:i}=e;return sf(sf({},t),{},{dataKey:a,payload:s,value:r,name:i})}function nh(e,t){if(e)return String(e);if(typeof t=="string")return t}var D2e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},O2e=(e,t)=>t==="centric"?e.angle:e.radius,nc=e=>e.layout.width,ac=e=>e.layout.height,M2e=e=>e.layout.scale,QQ=e=>e.layout.margin,mj=rt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),fj=rt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),YQ="data-recharts-item-index",KQ="data-recharts-item-id",qx=60;function _z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Qy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?_z(Object(a),!0).forEach(function(s){I2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_z(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function I2e(e,t,a){return(t=$2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $2e(e){var t=R2e(e,"string");return typeof t=="symbol"?t:t+""}function R2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z2e=e=>e.brush.height;function U2e(e){var t=fj(e);return t.reduce((a,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:qx;return a+r}return a},0)}function F2e(e){var t=fj(e);return t.reduce((a,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:qx;return a+r}return a},0)}function B2e(e){var t=mj(e);return t.reduce((a,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?a+s.height:a,0)}function H2e(e){var t=mj(e);return t.reduce((a,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?a+s.height:a,0)}var os=rt([nc,ac,QQ,z2e,U2e,F2e,B2e,H2e,hQ,h_e],(e,t,a,s,r,i,o,l,c,d)=>{var u={left:(a.left||0)+r,right:(a.right||0)+i},f={top:(a.top||0)+o,bottom:(a.bottom||0)+l},p=Qy(Qy({},f),u),x=p.bottom;p.bottom+=s,p=w2e(p,c,d);var v=e-p.left-p.right,N=t-p.top-p.bottom;return Qy(Qy({brushBottom:x},p),{},{width:Math.max(v,0),height:Math.max(N,0)})}),G2e=rt(os,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),c4=rt(nc,ac,(e,t)=>({x:0,y:0,width:e,height:t})),W2e=h.createContext(null),Fs=()=>h.useContext(W2e)!=null,hj=e=>e.brush,gj=rt([hj,os,QQ],(e,t,a)=>({height:e.height,x:Mt(e.x)?e.x:t.left,y:Mt(e.y)?e.y:t.top+t.height+t.brushBottom-(a?.bottom||0),width:Mt(e.width)?e.width:t.width})),i2={},o2={},l2={},Az;function q2e(){return Az||(Az=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s,{signal:r,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{l!==null&&(a.apply(o,l),o=void 0,l=null)},f=()=>{d&&u(),N()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},s)},v=()=>{p!==null&&(clearTimeout(p),p=null)},N=()=>{v(),o=void 0,l=null},b=()=>{u()},C=function(...w){if(r?.aborted)return;o=this,l=w;const S=p==null;x(),c&&S&&u()};return C.schedule=x,C.cancel=N,C.flush=b,r?.addEventListener("abort",N,{once:!0}),C}e.debounce=t})(l2)),l2}var Tz;function V2e(){return Tz||(Tz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q2e();function a(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,f=null;const p=t.debounce(function(...N){u=s.apply(this,N),f=null},r,{edges:d}),x=function(...N){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(u=s.apply(this,N),f=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,N),u)},v=()=>(p.flush(),u);return x.cancel=p.cancel,x.flush=v,x}e.debounce=a})(o2)),o2}var Ez;function Q2e(){return Ez||(Ez=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V2e();function a(s,r=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(s,r,{leading:o,maxWait:r,trailing:l})}e.throttle=a})(i2)),i2}var c2,kz;function Y2e(){return kz||(kz=1,c2=Q2e().throttle),c2}var K2e=Y2e();const X2e=Xi(K2e);var Vv=function(t,a){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(a.replace(/%s/g,()=>r[o++]))}},XQ=(e,t,a)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:o}=a,l=Hl(s)?e:Number(s),c=Hl(r)?t:Number(r);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},Z2e={width:0,height:0,overflow:"visible"},J2e={width:0,overflowX:"visible"},eAe={height:0,overflowY:"visible"},tAe={},nAe=e=>{var{width:t,height:a}=e,s=Hl(t),r=Hl(a);return s&&r?Z2e:s?J2e:r?eAe:tAe};function aAe(e){var{width:t,height:a,aspect:s}=e,r=t,i=a;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function zE(){return zE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},zE.apply(null,arguments)}function Lz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Pz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Lz(Object(a),!0).forEach(function(s){sAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function sAe(e,t,a){return(t=rAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rAe(e){var t=iAe(e,"string");return typeof t=="symbol"?t:t+""}function iAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZQ=h.createContext({width:-1,height:-1});function oAe(e){return Fo(e.width)&&Fo(e.height)}function JQ(e){var{children:t,width:a,height:s}=e,r=h.useMemo(()=>({width:a,height:s}),[a,s]);return oAe(r)?h.createElement(ZQ.Provider,{value:r},t):null}var d4=()=>h.useContext(ZQ),lAe=h.forwardRef((e,t)=>{var{aspect:a,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:f,className:p,onResize:x,style:v={}}=e,N=h.useRef(null),b=h.useRef();b.current=x,h.useImperativeHandle(t,()=>N.current);var[C,w]=h.useState({containerWidth:s.width,containerHeight:s.height}),S=h.useCallback((T,$)=>{w(z=>{var F=Math.round(T),P=Math.round($);return z.containerWidth===F&&z.containerHeight===P?z:{containerWidth:F,containerHeight:P}})},[]);h.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Fx;var T=P=>{var M,{width:G,height:Q}=P[0].contentRect;S(G,Q),(M=b.current)===null||M===void 0||M.call(b,G,Q)};u>0&&(T=X2e(T,u,{trailing:!0,leading:!1}));var $=new ResizeObserver(T),{width:z,height:F}=N.current.getBoundingClientRect();return S(z,F),$.observe(N.current),()=>{$.disconnect()}},[S,u]);var{containerWidth:E,containerHeight:k}=C;Vv(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:_,calculatedHeight:A}=XQ(E,k,{width:r,height:i,aspect:a,maxHeight:c});return Vv(_!=null&&_>0||A!=null&&A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,A,r,i,o,l,a),h.createElement("div",{id:f?"".concat(f):void 0,className:Pt("recharts-responsive-container",p),style:Pz(Pz({},v),{},{width:r,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:N},h.createElement("div",{style:nAe({width:r,height:i})},h.createElement(JQ,{width:_,height:A},d)))}),d2=h.forwardRef((e,t)=>{var a=d4();if(Fo(a.width)&&Fo(a.height))return e.children;var{width:s,height:r}=aAe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=XQ(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return Mt(i)&&Mt(o)?h.createElement(JQ,{width:i,height:o},e.children):h.createElement(lAe,zE({},e,{width:s,height:r,ref:t}))});function eY(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var pj=()=>{var e,t=Fs(),a=$t(G2e),s=$t(gj),r=(e=$t(hj))===null||e===void 0?void 0:e.padding;return!t||!s||!r?a:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},cAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},tY=()=>{var e;return(e=$t(os))!==null&&e!==void 0?e:cAe},u4=()=>$t(nc),m4=()=>$t(ac),dAe=()=>$t(e=>e.layout.margin),wn=e=>e.layout.layoutType,ah=()=>$t(wn),uAe=()=>{var e=ah();return e!==void 0},xj=e=>{var t=Xn(),a=Fs(),{width:s,height:r}=e,i=d4(),o=s,l=r;return i&&(o=i.width>0?i.width:s,l=i.height>0?i.height:r),h.useEffect(()=>{!a&&Fo(o)&&Fo(l)&&t(g2e({width:o,height:l}))},[t,a,o,l]),null},nY=Symbol.for("immer-nothing"),Dz=Symbol.for("immer-draftable"),Br=Symbol.for("immer-state");function Bi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Dp=Object.getPrototypeOf;function Mf(e){return!!e&&!!e[Br]}function Iu(e){return e?aY(e)||Array.isArray(e)||!!e[Dz]||!!e.constructor?.[Dz]||Vx(e)||bj(e):!1}var mAe=Object.prototype.constructor.toString(),Oz=new WeakMap;function aY(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let s=Oz.get(a);return s===void 0&&(s=Function.toString.call(a),Oz.set(a,s)),s===mAe}function Qv(e,t,a=!0){yj(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function yj(e){const t=e[Br];return t?t.type_:Array.isArray(e)?1:Vx(e)?2:bj(e)?3:0}function UE(e,t){return yj(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sY(e,t,a){const s=yj(e);s===2?e.set(t,a):s===3?e.add(a):e[t]=a}function fAe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Vx(e){return e instanceof Map}function bj(e){return e instanceof Set}function Kd(e){return e.copy_||e.base_}function FE(e,t){if(Vx(e))return new Map(e);if(bj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=aY(e);if(t===!0||t==="class_only"&&!a){const s=Object.getOwnPropertyDescriptors(e);delete s[Br];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Dp(e),s)}else{const s=Dp(e);if(s!==null&&a)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function f4(e,t=!1){return vj(e)||Mf(e)||!Iu(e)||(yj(e)>1&&Object.defineProperties(e,{set:Yy,add:Yy,clear:Yy,delete:Yy}),Object.freeze(e),t&&Object.values(e).forEach(a=>f4(a,!0))),e}function hAe(){Bi(2)}var Yy={value:hAe};function vj(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var gAe={};function $u(e){const t=gAe[e];return t||Bi(0,e),t}var Op;function rY(){return Op}function pAe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Mz(e,t){t&&($u("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function BE(e){HE(e),e.drafts_.forEach(xAe),e.drafts_=null}function HE(e){e===Op&&(Op=e.parent_)}function Iz(e){return Op=pAe(Op,e)}function xAe(e){const t=e[Br];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return e!==void 0&&e!==a?(a[Br].modified_&&(BE(t),Bi(4)),Iu(e)&&(e=Yv(t,e),t.parent_||Kv(t,e)),t.patches_&&$u("Patches").generateReplacementPatches_(a[Br].base_,e,t.patches_,t.inversePatches_)):e=Yv(t,a,[]),BE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==nY?e:void 0}function Yv(e,t,a){if(vj(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Br];if(!r)return Qv(t,(i,o)=>Rz(e,r,t,i,o,a),s),t;if(r.scope_!==e)return t;if(!r.modified_)return Kv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),Qv(o,(c,d)=>Rz(e,r,i,c,d,a,l),s),Kv(e,i,!1),a&&e.patches_&&$u("Patches").generatePatches_(r,a,e.patches_,e.inversePatches_)}return r.copy_}function Rz(e,t,a,s,r,i,o){if(r==null||typeof r!="object"&&!o)return;const l=vj(r);if(!(l&&!o)){if(Mf(r)){const c=i&&t&&t.type_!==3&&!UE(t.assigned_,s)?i.concat(s):void 0,d=Yv(e,r,c);if(sY(a,s,d),Mf(d))e.canAutoFreeze_=!1;else return}else o&&a.add(r);if(Iu(r)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&l)return;Yv(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Vx(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))&&Kv(e,r)}}}function Kv(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&f4(t,a)}function yAe(e,t){const a=Array.isArray(e),s={type_:a?1:0,scope_:t?t.scope_:rY(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=h4;a&&(r=[s],i=Mp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,l}var h4={get(e,t){if(t===Br)return e;const a=Kd(e);if(!UE(a,t))return bAe(e,a,t);const s=a[t];return e.finalized_||!Iu(s)?s:s===u2(e.base_,t)?(m2(e),e.copy_[t]=WE(s,e)):s},has(e,t){return t in Kd(e)},ownKeys(e){return Reflect.ownKeys(Kd(e))},set(e,t,a){const s=iY(Kd(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=u2(Kd(e),t),i=r?.[Br];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(fAe(a,r)&&(a!==void 0||UE(e.base_,t)))return!0;m2(e),GE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty(e,t){return u2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,m2(e),GE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Kd(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:a[t]}},defineProperty(){Bi(11)},getPrototypeOf(e){return Dp(e.base_)},setPrototypeOf(){Bi(12)}},Mp={};Qv(h4,(e,t)=>{Mp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Mp.deleteProperty=function(e,t){return Mp.set.call(this,e,t,void 0)};Mp.set=function(e,t,a){return h4.set.call(this,e[0],t,a,e[0])};function u2(e,t){const a=e[Br];return(a?Kd(a):e)[t]}function bAe(e,t,a){const s=iY(t,a);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function iY(e,t){if(!(t in e))return;let a=Dp(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Dp(a)}}function GE(e){e.modified_||(e.modified_=!0,e.parent_&&GE(e.parent_))}function m2(e){e.copy_||(e.copy_=FE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,a,s)=>{if(typeof t=="function"&&typeof a!="function"){const i=a;a=t;const o=this;return function(c=i,...d){return o.produce(c,u=>a.call(this,u,...d))}}typeof a!="function"&&Bi(6),s!==void 0&&typeof s!="function"&&Bi(7);let r;if(Iu(t)){const i=Iz(this),o=WE(t,void 0);let l=!0;try{r=a(o),l=!1}finally{l?BE(i):HE(i)}return Mz(i,s),$z(r,i)}else if(!t||typeof t!="object"){if(r=a(t),r===void 0&&(r=t),r===nY&&(r=void 0),this.autoFreeze_&&f4(r,!0),s){const i=[],o=[];$u("Patches").generateReplacementPatches_(t,r,i,o),s(i,o)}return r}else Bi(1,t)},this.produceWithPatches=(t,a)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,r;return[this.produce(t,a,(o,l)=>{s=o,r=l}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Iu(e)||Bi(8),Mf(e)&&(e=wAe(e));const t=Iz(this),a=WE(e,void 0);return a[Br].isManual_=!0,HE(t),a}finishDraft(e,t){const a=e&&e[Br];(!a||!a.isManual_)&&Bi(9);const{scope_:s}=a;return Mz(s,t),$z(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const r=t[a];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}a>-1&&(t=t.slice(a+1));const s=$u("Patches").applyPatches_;return Mf(e)?s(e,t):this.produce(e,r=>s(r,t))}};function WE(e,t){const a=Vx(e)?$u("MapSet").proxyMap_(e,t):bj(e)?$u("MapSet").proxySet_(e,t):yAe(e,t);return(t?t.scope_:rY()).drafts_.push(a),a}function wAe(e){return Mf(e)||Bi(10,e),oY(e)}function oY(e){if(!Iu(e)||vj(e))return e;const t=e[Br];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=FE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=FE(e,!0);return Qv(a,(r,i)=>{sY(a,r,oY(i))},s),t&&(t.finalized_=!1),a}var NAe=new vAe;NAe.produce;var jAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},lY=vr({name:"legend",initialState:jAe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:oa()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Wi(e).payload.indexOf(a);r>-1&&(e.payload[r]=s)},prepare:oa()},removeLegendPayload:{reducer(e,t){var a=Wi(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:oa()}}}),{setLegendSize:zz,setLegendSettings:CAe,addLegendPayload:cY,replaceLegendPayload:dY,removeLegendPayload:uY}=lY.actions,SAe=lY.reducer,_Ae=["contextPayload"];function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},qE.apply(null,arguments)}function Uz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function If(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Uz(Object(a),!0).forEach(function(s){AAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Uz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function AAe(e,t,a){return(t=TAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TAe(e){var t=EAe(e,"string");return typeof t=="symbol"?t:t+""}function EAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kAe(e,t){if(e==null)return{};var a,s,r=LAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LAe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function PAe(e){return e.value}function DAe(e){var{contextPayload:t}=e,a=kAe(e,_Ae),s=uQ(t,e.payloadUniqBy,PAe),r=If(If({},a),{},{payload:s});return h.isValidElement(e.content)?h.cloneElement(e.content,r):typeof e.content=="function"?h.createElement(e.content,r):h.createElement(RSe,r)}function OAe(e,t,a,s,r,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((s||0)-i.width)/2}:d=l==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((r||0)-i.height)/2}:u=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),If(If({},d),u)}function MAe(e){var t=Xn();return h.useEffect(()=>{t(CAe(e))},[t,e]),null}function IAe(e){var t=Xn();return h.useEffect(()=>(t(zz(e)),()=>{t(zz({width:0,height:0}))}),[t,e]),null}function $Ae(e,t,a,s){return e==="vertical"&&Mt(t)?{height:t}:e==="horizontal"?{width:a||s}:null}var RAe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function mY(e){var t=Qa(e,RAe),a=x_e(),s=lSe(),r=dAe(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[d,u]=gQ([a]),f=u4(),p=m4();if(f==null||p==null)return null;var x=f-(r?.left||0)-(r?.right||0),v=$Ae(t.layout,o,i,x),N=c?l:If(If({position:"absolute",width:v?.width||i||"auto",height:v?.height||o||"auto"},OAe(l,t,r,f,p,d)),l),b=c??s;if(b==null||a==null)return null;var C=h.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:u},h.createElement(MAe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&h.createElement(IAe,{width:d.width,height:d.height}),h.createElement(DAe,qE({},t,v,{margin:r,chartWidth:f,chartHeight:p,contextPayload:a})));return Hi.createPortal(C,b)}mY.displayName="Legend";function VE(){return VE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},VE.apply(null,arguments)}function Fz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function f2(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Fz(Object(a),!0).forEach(function(s){zAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function zAe(e,t,a){return(t=UAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function UAe(e){var t=FAe(e,"string");return typeof t=="symbol"?t:t+""}function FAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BAe(e){return Array.isArray(e)&&Uo(e[0])&&Uo(e[1])?e.join(" ~ "):e}var HAe=e=>{var{separator:t=" : ",contentStyle:a={},itemStyle:s={},labelStyle:r={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var k={padding:0,margin:0},_=(l?aj(i,l):i).map((A,T)=>{if(A.type==="none")return null;var $=A.formatter||o||BAe,{value:z,name:F}=A,P=z,M=F;if($){var G=$(z,F,A,T,i);if(Array.isArray(G))[P,M]=G;else if(G!=null)P=G;else return null}var Q=f2({display:"block",paddingTop:4,paddingBottom:4,color:A.color||"#000"},s);return h.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:Q},Uo(M)?h.createElement("span",{className:"recharts-tooltip-item-name"},M):null,Uo(M)?h.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,h.createElement("span",{className:"recharts-tooltip-item-value"},P),h.createElement("span",{className:"recharts-tooltip-item-unit"},A.unit||""))});return h.createElement("ul",{className:"recharts-tooltip-item-list",style:k},_)}return null},v=f2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=f2({margin:0},r),b=!ua(u),C=b?u:"",w=Pt("recharts-default-tooltip",c),S=Pt("recharts-tooltip-label",d);b&&f&&i!==void 0&&i!==null&&(C=f(u,i));var E=p?{role:"status","aria-live":"assertive"}:{};return h.createElement("div",VE({className:w,style:v},E),h.createElement("p",{className:S,style:N},h.isValidElement(C)?C:"".concat(C)),x())},gg="recharts-tooltip-wrapper",GAe={visibility:"hidden"};function WAe(e){var{coordinate:t,translateX:a,translateY:s}=e;return Pt(gg,{["".concat(gg,"-right")]:Mt(a)&&t&&Mt(t.x)&&a>=t.x,["".concat(gg,"-left")]:Mt(a)&&t&&Mt(t.x)&&a<t.x,["".concat(gg,"-bottom")]:Mt(s)&&t&&Mt(t.y)&&s>=t.y,["".concat(gg,"-top")]:Mt(s)&&t&&Mt(t.y)&&s<t.y})}function Bz(e){var{allowEscapeViewBox:t,coordinate:a,key:s,offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&Mt(i[s]))return i[s];var u=a[s]-l-(r>0?r:0),f=a[s]+r;if(t[s])return o[s]?u:f;var p=c[s];if(p==null)return 0;if(o[s]){var x=u,v=p;return x<v?Math.max(f,p):Math.max(u,p)}if(d==null)return 0;var N=f+l,b=p+d;return N>b?Math.max(u,p):Math.max(f,p)}function qAe(e){var{translateX:t,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function VAe(e){var{allowEscapeViewBox:t,coordinate:a,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,f;return o.height>0&&o.width>0&&a?(u=Bz({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=Bz({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=qAe({translateX:u,translateY:f,useTranslate3d:l})):d=GAe,{cssProperties:d,cssClasses:WAe({translateX:u,translateY:f,coordinate:a})}}function Hz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ky(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Hz(Object(a),!0).forEach(function(s){QE(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function QE(e,t,a){return(t=QAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QAe(e){var t=YAe(e,"string");return typeof t=="symbol"?t:t+""}function YAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class KAe extends h.PureComponent{constructor(){super(...arguments),QE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),QE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var a,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,a;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:a,animationDuration:s,animationEasing:r,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:f,useTranslate3d:p,viewBox:x,wrapperStyle:v,lastBoundingBox:N,innerRef:b,hasPortalFromProps:C}=this.props,{cssClasses:w,cssProperties:S}=VAe({allowEscapeViewBox:a,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:{height:N.height,width:N.width},useTranslate3d:p,viewBox:x}),E=C?{}:Ky(Ky({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=Ky(Ky({},E),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return h.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},i)}}var fY=()=>{var e;return(e=$t(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function YE(){return YE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},YE.apply(null,arguments)}function Gz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Wz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Gz(Object(a),!0).forEach(function(s){XAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function XAe(e,t,a){return(t=ZAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ZAe(e){var t=JAe(e,"string");return typeof t=="symbol"?t:t+""}function JAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qz={curveBasisClosed:Jge,curveBasisOpen:epe,curveBasis:Zge,curveBumpX:AW,curveBumpY:TW,curveLinearClosed:ape,curveLinear:Tx,curveMonotoneX:sE,curveMonotoneY:WW,curveNatural:VW,curveStep:QW,curveStepAfter:KW,curveStepBefore:YW},Xv=e=>pa(e.x)&&pa(e.y),Vz=e=>e.base!=null&&Xv(e.base)&&Xv(e),pg=e=>e.x,xg=e=>e.y,eTe=(e,t)=>{if(typeof e=="function")return e;var a="curve".concat(Ux(e));return(a==="curveMonotone"||a==="curveBump")&&t?qz["".concat(a).concat(t==="vertical"?"Y":"X")]:qz[a]||Tx},tTe=e=>{var{type:t="linear",points:a=[],baseLine:s,layout:r,connectNulls:i=!1}=e,o=eTe(t,r),l=i?a.filter(Xv):a,c;if(Array.isArray(s)){var d=a.map((x,v)=>Wz(Wz({},x),{},{base:s[v]}));r==="vertical"?c=Ig().y(xg).x1(pg).x0(x=>x.base.x):c=Ig().x(pg).y1(xg).y0(x=>x.base.y);var u=c.defined(Vz).curve(o),f=i?d.filter(Vz):d;return u(f)}r==="vertical"&&Mt(s)?c=Ig().y(xg).x1(pg).x0(s):Mt(s)?c=Ig().x(pg).y1(xg).y0(s):c=oP().x(pg).y(xg);var p=c.defined(Xv).curve(o);return p(l)},g4=e=>{var{className:t,points:a,path:s,pathRef:r}=e,i=ah();if((!a||!a.length)&&!s)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=a&&a.length?tTe(o):s;return h.createElement("path",YE({},Fr(e),ZP(e),{className:Pt("recharts-curve",t),d:l===null?void 0:l,ref:r}))},nTe=["x","y","top","left","width","height","className"];function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},KE.apply(null,arguments)}function Qz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function aTe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Qz(Object(a),!0).forEach(function(s){sTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function sTe(e,t,a){return(t=rTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rTe(e){var t=iTe(e,"string");return typeof t=="symbol"?t:t+""}function iTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oTe(e,t){if(e==null)return{};var a,s,r=lTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var cTe=(e,t,a,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(a),dTe=e=>{var{x:t=0,y:a=0,top:s=0,left:r=0,width:i=0,height:o=0,className:l}=e,c=oTe(e,nTe),d=aTe({x:t,y:a,top:s,left:r,width:i,height:o},c);return!Mt(t)||!Mt(a)||!Mt(i)||!Mt(o)||!Mt(s)||!Mt(r)?null:h.createElement("path",KE({},Vs(d),{className:Pt("recharts-cross",l),d:cTe(t,a,i,o,s,r)}))};function uTe(e,t,a,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-r,width:e==="horizontal"?s:a.width-1,height:e==="horizontal"?a.height-1:s}}function Yz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Kz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(a),!0).forEach(function(s){mTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function mTe(e,t,a){return(t=fTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fTe(e){var t=hTe(e,"string");return typeof t=="symbol"?t:t+""}function hTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gTe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),hY=(e,t,a)=>e.map(s=>"".concat(gTe(s)," ").concat(t,"ms ").concat(a)).join(","),pTe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((a,s)=>a.filter(r=>s.includes(r))),Ip=(e,t)=>Object.keys(t).reduce((a,s)=>Kz(Kz({},a),{},{[s]:e(s,t[s])}),{});function Xz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ka(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(a),!0).forEach(function(s){xTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xTe(e,t,a){return(t=yTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yTe(e){var t=bTe(e,"string");return typeof t=="symbol"?t:t+""}function bTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zv=(e,t,a)=>e+(t-e)*a,XE=e=>{var{from:t,to:a}=e;return t!==a},gY=(e,t,a)=>{var s=Ip((r,i)=>{if(XE(i)){var[o,l]=e(i.from,i.to,i.velocity);return Ka(Ka({},i),{},{from:o,velocity:l})}return i},t);return a<1?Ip((r,i)=>XE(i)&&s[r]!=null?Ka(Ka({},i),{},{velocity:Zv(i.velocity,s[r].velocity,a),from:Zv(i.from,s[r].from,a)}):i,t):gY(e,s,a-1)};function vTe(e,t,a,s,r,i){var o,l=s.reduce((p,x)=>Ka(Ka({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>Ip((p,x)=>x.from,l),d=()=>!Object.values(l).filter(XE).length,u=null,f=p=>{o||(o=p);var x=p-o,v=x/a.dt;l=gY(a,l,v),r(Ka(Ka(Ka({},e),t),c())),o=p,d()||(u=i.setTimeout(f))};return()=>(u=i.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}function wTe(e,t,a,s,r,i,o){var l=null,c=r.reduce((f,p)=>{var x=e[p],v=t[p];return x==null||v==null?f:Ka(Ka({},f),{},{[p]:[x,v]})},{}),d,u=f=>{d||(d=f);var p=(f-d)/s,x=Ip((N,b)=>Zv(...b,a(p)),c);if(i(Ka(Ka(Ka({},e),t),x)),p<1)l=o.setTimeout(u);else{var v=Ip((N,b)=>Zv(...b,a(1)),c);i(Ka(Ka(Ka({},e),t),v))}};return()=>(l=o.setTimeout(u),()=>{var f;(f=l)===null||f===void 0||f()})}const NTe=(e,t,a,s,r,i)=>{var o=pTe(e,t);return a==null?()=>(r(Ka(Ka({},e),t)),()=>{}):a.isStepper===!0?vTe(e,t,a,o,r,i):wTe(e,t,a,s,o,r,i)};var Jv=1e-4,pY=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],xY=(e,t)=>e.map((a,s)=>a*t**s).reduce((a,s)=>a+s),Zz=(e,t)=>a=>{var s=pY(e,t);return xY(s,a)},jTe=(e,t)=>a=>{var s=pY(e,t),r=[...s.map((i,o)=>i*o).slice(1),0];return xY(r,a)},CTe=e=>{var t,a=e.split("(");if(a.length!==2||a[0]!=="cubic-bezier")return null;var s=(t=a[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},STe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=CTe(a[0]);if(r)return r}}return a.length===4?a:[0,0,1,1]},_Te=(e,t,a,s)=>{var r=Zz(e,a),i=Zz(t,s),o=jTe(e,a),l=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,f=u,p=0;p<8;++p){var x=r(f)-u,v=o(f);if(Math.abs(x-u)<Jv||v<Jv)return i(f);f=l(f-x/v)}return i(f)};return c.isStepper=!1,c},Jz=function(){return _Te(...STe(...arguments))},ATe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:s=8,dt:r=17}=t,i=(o,l,c)=>{var d=-(o-l)*a,u=c*s,f=c+(d-u)*r/1e3,p=c*r/1e3+o;return Math.abs(p-l)<Jv&&Math.abs(f)<Jv?[l,0]:[p,f]};return i.isStepper=!0,i.dt=r,i},TTe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Jz(e);case"spring":return ATe();default:if(e.split("(")[0]==="cubic-bezier")return Jz(e)}return typeof e=="function"?e:null};function ETe(e){var t,a=()=>null,s=!1,r=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){r=e.setTimeout(i.bind(null,d),c);return}i(c),r=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,a(t)),typeof o=="object"&&(t=o,a(t)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,r&&(r(),r=null),i(o)},subscribe:o=>(a=o,()=>{a=()=>null}),getTimeoutController:()=>e}}class kTe{setTimeout(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=o=>{o-s>=a?t(o):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function LTe(){return ETe(new kTe)}var PTe=h.createContext(LTe);function DTe(e,t){var a=h.useContext(PTe);return h.useMemo(()=>t??a(e),[e,t,a])}var OTe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),wj={isSsr:OTe()},MTe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},eU={t:0},h2={t:1};function Qx(e){var t=Qa(e,MTe),{isActive:a,canBegin:s,duration:r,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=a==="auto"?!wj.isSsr:a,f=DTe(t.animationId,t.animationManager),[p,x]=h.useState(u?eU:h2),v=h.useRef(null);return h.useEffect(()=>{u||x(h2)},[u]),h.useEffect(()=>{if(!u||!s)return Fx;var N=NTe(eU,h2,TTe(i),r,x,f.getTimeoutController()),b=()=>{v.current=N()};return f.start([c,o,b,r,l]),()=>{f.stop(),v.current&&v.current(),l()}},[u,s,r,i,o,c,l,f]),d(p.t)}function Yx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=h.useRef(Ep(t)),s=h.useRef(e);return s.current!==e&&(a.current=Ep(t),s.current=e),a.current}var ITe=["radius"],$Te=["radius"],tU,nU,aU,sU,rU,iU,oU,lU,cU,dU;function uU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function mU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?uU(Object(a),!0).forEach(function(s){RTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function RTe(e,t,a){return(t=zTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zTe(e){var t=UTe(e,"string");return typeof t=="symbol"?t:t+""}function UTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ew(){return ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ew.apply(null,arguments)}function fU(e,t){if(e==null)return{};var a,s,r=FTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function FTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function oo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var hU=(e,t,a,s,r)=>{var i=Kc(a),o=Kc(s),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,d=i>=0?1:-1,u=o>=0&&i>=0||o<0&&i<0?1:0,f;if(l>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,v=4;x<v;x++)p[x]=r[x]>l?l:r[x];f=ja(tU||(tU=oo(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=ja(nU||(nU=oo(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+d*p[0],t)),f+=ja(aU||(aU=oo(["L ",",",""])),e+a-d*p[1],t),p[1]>0&&(f+=ja(sU||(sU=oo(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+a,t+c*p[1])),f+=ja(rU||(rU=oo(["L ",",",""])),e+a,t+s-c*p[2]),p[2]>0&&(f+=ja(iU||(iU=oo(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+a-d*p[2],t+s)),f+=ja(oU||(oU=oo(["L ",",",""])),e+d*p[3],t+s),p[3]>0&&(f+=ja(lU||(lU=oo(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+s-c*p[3])),f+="Z"}else if(l>0&&r===+r&&r>0){var N=Math.min(l,r);f=ja(cU||(cU=oo(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*N,N,N,u,e+d*N,t,e+a-d*N,t,N,N,u,e+a,t+c*N,e+a,t+s-c*N,N,N,u,e+a-d*N,t+s,e+d*N,t+s,N,N,u,e,t+s-c*N)}else f=ja(dU||(dU=oo(["M ",","," h "," v "," h "," Z"])),e,t,a,s,-a);return f},gU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yY=e=>{var t=Qa(e,gU),a=h.useRef(null),[s,r]=h.useState(-1);h.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var X=a.current.getTotalLength();X&&r(X)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:p,animationBegin:x,isAnimationActive:v,isUpdateAnimationActive:N}=t,b=h.useRef(l),C=h.useRef(c),w=h.useRef(i),S=h.useRef(o),E=h.useMemo(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),k=Yx(E,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var _=Pt("recharts-rectangle",u);if(!N){var A=Vs(t),{radius:T}=A,$=fU(A,ITe);return h.createElement("path",ew({},$,{x:Kc(i),y:Kc(o),width:Kc(l),height:Kc(c),radius:typeof d=="number"?d:void 0,className:_,d:hU(i,o,l,c,d)}))}var z=b.current,F=C.current,P=w.current,M=S.current,G="0px ".concat(s===-1?1:s,"px"),Q="".concat(s,"px 0px"),V=hY(["strokeDasharray"],p,typeof f=="string"?f:gU.animationEasing);return h.createElement(Qx,{animationId:k,key:k,canBegin:s>0,duration:p,easing:f,isActive:N,begin:x},X=>{var q=la(z,l,X),ne=la(F,c,X),oe=la(P,i,X),K=la(M,o,X);a.current&&(b.current=q,C.current=ne,w.current=oe,S.current=K);var R;v?X>0?R={transition:V,strokeDasharray:Q}:R={strokeDasharray:G}:R={strokeDasharray:Q};var ye=Vs(t),{radius:pe}=ye,Ne=fU(ye,$Te);return h.createElement("path",ew({},Ne,{radius:typeof d=="number"?d:void 0,className:_,d:hU(oe,K,q,ne,d),ref:a,style:mU(mU({},R),t.style)}))})};function pU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?pU(Object(a),!0).forEach(function(s){BTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function BTe(e,t,a){return(t=HTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HTe(e){var t=GTe(e,"string");return typeof t=="symbol"?t:t+""}function GTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tw=Math.PI/180,WTe=e=>e*180/Math.PI,Ha=(e,t,a,s)=>({x:e+Math.cos(-tw*s)*a,y:t+Math.sin(-tw*s)*a}),bY=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},qTe=(e,t)=>{var{x:a,y:s}=e,{x:r,y:i}=t;return Math.sqrt((a-r)**2+(s-i)**2)},VTe=(e,t)=>{var{x:a,y:s}=e,{cx:r,cy:i}=t,o=qTe({x:a,y:s},{x:r,y:i});if(o<=0)return{radius:o,angle:0};var l=(a-r)/o,c=Math.acos(l);return s>i&&(c=2*Math.PI-c),{radius:o,angle:WTe(c),angleInRadian:c}},QTe=e=>{var{startAngle:t,endAngle:a}=e,s=Math.floor(t/360),r=Math.floor(a/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:a-i*360}},YTe=(e,t)=>{var{startAngle:a,endAngle:s}=t,r=Math.floor(a/360),i=Math.floor(s/360),o=Math.min(r,i);return e+o*360},KTe=(e,t)=>{var{chartX:a,chartY:s}=e,{radius:r,angle:i}=VTe({x:a,y:s},t),{innerRadius:o,outerRadius:l}=t;if(r<o||r>l||r===0)return null;var{startAngle:c,endAngle:d}=QTe(t),u=i,f;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}return f?xU(xU({},t),{},{radius:r,angle:YTe(u,t)}):null};function vY(e){var{cx:t,cy:a,radius:s,startAngle:r,endAngle:i}=e,o=Ha(t,a,s,r),l=Ha(t,a,s,i);return{points:[o,l],cx:t,cy:a,radius:s,startAngle:r,endAngle:i}}var yU,bU,vU,wU,NU,jU,CU;function ZE(){return ZE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ZE.apply(null,arguments)}function cu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var XTe=(e,t)=>{var a=ps(t-e),s=Math.min(Math.abs(t-e),359.999);return a*s},Xy=e=>{var{cx:t,cy:a,radius:s,angle:r,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+s,u=Math.asin(l/d)/tw,f=c?r:r+i*u,p=Ha(t,a,d,f),x=Ha(t,a,s,f),v=c?r-i*u:r,N=Ha(t,a,d*Math.cos(u*tw),v);return{center:p,circleTangency:x,lineTangency:N,theta:u}},wY=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:i,endAngle:o}=e,l=XTe(i,o),c=i+l,d=Ha(t,a,r,i),u=Ha(t,a,r,c),f=ja(yU||(yU=cu(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(l)>180),+(i>c),u.x,u.y);if(s>0){var p=Ha(t,a,s,i),x=Ha(t,a,s,c);f+=ja(bU||(bU=cu(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(l)>180),+(i<=c),p.x,p.y)}else f+=ja(vU||(vU=cu(["L ",","," Z"])),t,a);return f},ZTe=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=ps(d-c),{circleTangency:f,lineTangency:p,theta:x}=Xy({cx:t,cy:a,radius:r,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:N,theta:b}=Xy({cx:t,cy:a,radius:r,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),C=l?Math.abs(c-d):Math.abs(c-d)-x-b;if(C<0)return o?ja(wU||(wU=cu(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):wY({cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:c,endAngle:d});var w=ja(NU||(NU=cu(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(u<0),f.x,f.y,r,r,+(C>180),+(u<0),v.x,v.y,i,i,+(u<0),N.x,N.y);if(s>0){var{circleTangency:S,lineTangency:E,theta:k}=Xy({cx:t,cy:a,radius:s,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:_,lineTangency:A,theta:T}=Xy({cx:t,cy:a,radius:s,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),$=l?Math.abs(c-d):Math.abs(c-d)-k-T;if($<0&&i===0)return"".concat(w,"L").concat(t,",").concat(a,"Z");w+=ja(jU||(jU=cu(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),A.x,A.y,i,i,+(u<0),_.x,_.y,s,s,+($>180),+(u>0),S.x,S.y,i,i,+(u<0),E.x,E.y)}else w+=ja(CU||(CU=cu(["L",",","Z"])),t,a);return w},JTe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},NY=e=>{var t=Qa(e,JTe),{cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(i<r||d===u)return null;var p=Pt("recharts-sector",f),x=i-r,v=$s(o,x,0,!0),N;return v>0&&Math.abs(d-u)<360?N=ZTe({cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(v,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):N=wY({cx:a,cy:s,innerRadius:r,outerRadius:i,startAngle:d,endAngle:u}),h.createElement("path",ZE({},Vs(t),{className:p,d:N}))};function eEe(e,t,a){if(e==="horizontal")return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(tQ(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:o,angle:l}=t,c=Ha(s,r,i,l),d=Ha(s,r,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return vY(t)}}var g2={},p2={},x2={},SU;function tEe(){return SU||(SU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mQ();function a(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=a})(x2)),x2}var _U;function nEe(){return _U||(_U=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tEe();function a(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=a})(p2)),p2}var AU;function aEe(){return AU||(AU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fQ(),a=nEe();function s(r,i,o){o&&typeof o!="number"&&t.isIterateeCall(r,i,o)&&(i=o=void 0),r=a.toFinite(r),i===void 0?(i=r,r=0):i=a.toFinite(i),o=o===void 0?r<i?1:-1:a.toFinite(o);const l=Math.max(Math.ceil((i-r)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=r,r+=o;return c}e.range=s})(g2)),g2}var y2,TU;function sEe(){return TU||(TU=1,y2=aEe().range),y2}var rEe=sEe();const jY=Xi(rEe),Ug=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:TL,scaleDiverging:TG,scaleDivergingLog:EG,scaleDivergingPow:JL,scaleDivergingSqrt:Ehe,scaleDivergingSymlog:kG,scaleIdentity:dG,scaleImplicit:VT,scaleLinear:pN,scaleLog:vp,scaleOrdinal:gp,scalePoint:wme,scalePow:xN,scaleQuantile:hG,scaleQuantize:gG,scaleRadial:fG,scaleSequential:XL,scaleSequentialLog:SG,scaleSequentialPow:ZL,scaleSequentialQuantile:AG,scaleSequentialSqrt:The,scaleSequentialSymlog:_G,scaleSqrt:mG,scaleSymlog:zL,scaleThreshold:FL,scaleTime:KL,scaleUtc:CG,tickFormat:cG},Symbol.toStringTag,{value:"Module"}));var sc=e=>e.chartData,Nj=rt([sc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),p4=(e,t,a,s)=>s?Nj(e):sc(e),iEe=(e,t,a)=>a?Nj(e):sc(e);function cd(e){if(Array.isArray(e)&&e.length===2){var[t,a]=e;if(pa(t)&&pa(a))return!0}return!1}function EU(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function CY(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,s]=e,r,i;if(pa(a))r=a;else if(typeof a=="function")return;if(pa(s))i=s;else if(typeof s=="function")return;var o=[r,i];if(cd(o))return o}}function oEe(e,t,a){if(!(!a&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,a);if(cd(s))return EU(s,t,a)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,o,l;if(r==="auto")t!=null&&(o=Math.min(...t));else if(Mt(r))o=r;else if(typeof r=="function")try{t!=null&&(o=r(t?.[0]))}catch{}else if(typeof r=="string"&&jz.test(r)){var c=jz.exec(r);if(c==null||c[1]==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Mt(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&Cz.test(i)){var u=Cz.exec(i);if(u==null||u[1]==null||t==null)l=void 0;else{var f=+u[1];l=t[1]+f}}else l=t?.[1];var p=[o,l];if(cd(p))return t==null?p:EU(p,t,a)}}}var sh=1e9,lEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},y4,ca=!0,wi="[DecimalError] ",vu=wi+"Invalid argument: ",x4=wi+"Exponent out of range: ",rh=Math.floor,Xd=Math.pow,cEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr,fs=1e7,ta=7,SY=9007199254740991,nw=rh(SY/ta),Dt={};Dt.absoluteValue=Dt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Dt.comparedTo=Dt.cmp=function(e){var t,a,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,a=s<r?s:r;t<a;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};Dt.decimalPlaces=Dt.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*ta;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};Dt.dividedBy=Dt.div=function(e){return kl(this,new this.constructor(e))};Dt.dividedToIntegerBy=Dt.idiv=function(e){var t=this,a=t.constructor;return qn(kl(t,new a(e),0,1),a.precision)};Dt.equals=Dt.eq=function(e){return!this.cmp(e)};Dt.exponent=function(){return Wa(this)};Dt.greaterThan=Dt.gt=function(e){return this.cmp(e)>0};Dt.greaterThanOrEqualTo=Dt.gte=function(e){return this.cmp(e)>=0};Dt.isInteger=Dt.isint=function(){return this.e>this.d.length-2};Dt.isNegative=Dt.isneg=function(){return this.s<0};Dt.isPositive=Dt.ispos=function(){return this.s>0};Dt.isZero=function(){return this.s===0};Dt.lessThan=Dt.lt=function(e){return this.cmp(e)<0};Dt.lessThanOrEqualTo=Dt.lte=function(e){return this.cmp(e)<1};Dt.logarithm=Dt.log=function(e){var t,a=this,s=a.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Mr))throw Error(wi+"NaN");if(a.s<1)throw Error(wi+(a.s?"NaN":"-Infinity"));return a.eq(Mr)?new s(0):(ca=!1,t=kl($p(a,i),$p(e,i),i),ca=!0,qn(t,r))};Dt.minus=Dt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?TY(t,e):_Y(t,(e.s=-e.s,e))};Dt.modulo=Dt.mod=function(e){var t,a=this,s=a.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(wi+"NaN");return a.s?(ca=!1,t=kl(a,e,0,1).times(e),ca=!0,a.minus(t)):qn(new s(a),r)};Dt.naturalExponential=Dt.exp=function(){return AY(this)};Dt.naturalLogarithm=Dt.ln=function(){return $p(this)};Dt.negated=Dt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Dt.plus=Dt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_Y(t,e):TY(t,(e.s=-e.s,e))};Dt.precision=Dt.sd=function(e){var t,a,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vu+e);if(t=Wa(r)+1,s=r.d.length-1,a=s*ta+1,s=r.d[s],s){for(;s%10==0;s/=10)a--;for(s=r.d[0];s>=10;s/=10)a++}return e&&t>a?t:a};Dt.squareRoot=Dt.sqrt=function(){var e,t,a,s,r,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(wi+"NaN")}for(e=Wa(l),ca=!1,r=Math.sqrt(+l),r==0||r==1/0?(t=To(l.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=rh((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),a=c.precision,r=o=a+3;;)if(i=s,s=i.plus(kl(l,i,o+2)).times(.5),To(i.d).slice(0,o)===(t=To(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),r==o&&t=="4999"){if(qn(i,a+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return ca=!0,qn(s,a)};Dt.times=Dt.mul=function(e){var t,a,s,r,i,o,l,c,d,u=this,f=u.constructor,p=u.d,x=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,a=u.e+e.e,c=p.length,d=x.length,c<d&&(i=p,p=x,x=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,r=c+s;r>s;)l=i[r]+x[s]*p[r-s-1]+t,i[r--]=l%fs|0,t=l/fs|0;i[r]=(i[r]+t)%fs|0}for(;!i[--o];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,ca?qn(e,f.precision):e};Dt.toDecimalPlaces=Dt.todp=function(e,t){var a=this,s=a.constructor;return a=new s(a),e===void 0?a:(Bo(e,0,sh),t===void 0?t=s.rounding:Bo(t,0,8),qn(a,e+Wa(a)+1,t))};Dt.toExponential=function(e,t){var a,s=this,r=s.constructor;return e===void 0?a=Ru(s,!0):(Bo(e,0,sh),t===void 0?t=r.rounding:Bo(t,0,8),s=qn(new r(s),e+1,t),a=Ru(s,!0,e+1)),a};Dt.toFixed=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?Ru(r):(Bo(e,0,sh),t===void 0?t=i.rounding:Bo(t,0,8),s=qn(new i(r),e+Wa(r)+1,t),a=Ru(s.abs(),!1,e+Wa(s)+1),r.isneg()&&!r.isZero()?"-"+a:a)};Dt.toInteger=Dt.toint=function(){var e=this,t=e.constructor;return qn(new t(e),Wa(e)+1,t.rounding)};Dt.toNumber=function(){return+this};Dt.toPower=Dt.pow=function(e){var t,a,s,r,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Mr);if(l=new c(l),!l.s){if(e.s<1)throw Error(wi+"Infinity");return l}if(l.eq(Mr))return l;if(s=c.precision,e.eq(Mr))return qn(l,s);if(t=e.e,a=e.d.length-1,o=t>=a,i=l.s,o){if((a=u<0?-u:u)<=SY){for(r=new c(Mr),t=Math.ceil(s/ta+4),ca=!1;a%2&&(r=r.times(l),LU(r.d,t)),a=rh(a/2),a!==0;)l=l.times(l),LU(l.d,t);return ca=!0,e.s<0?new c(Mr).div(r):qn(r,s)}}else if(i<0)throw Error(wi+"NaN");return i=i<0&&e.d[Math.max(t,a)]&1?-1:1,l.s=1,ca=!1,r=e.times($p(l,s+d)),ca=!0,r=AY(r),r.s=i,r};Dt.toPrecision=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?(a=Wa(r),s=Ru(r,a<=i.toExpNeg||a>=i.toExpPos)):(Bo(e,1,sh),t===void 0?t=i.rounding:Bo(t,0,8),r=qn(new i(r),e,t),a=Wa(r),s=Ru(r,e<=a||a<=i.toExpNeg,e)),s};Dt.toSignificantDigits=Dt.tosd=function(e,t){var a=this,s=a.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Bo(e,1,sh),t===void 0?t=s.rounding:Bo(t,0,8)),qn(new s(a),e,t)};Dt.toString=Dt.valueOf=Dt.val=Dt.toJSON=Dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Wa(e),a=e.constructor;return Ru(e,t<=a.toExpNeg||t>=a.toExpPos)};function _Y(e,t){var a,s,r,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),ca?qn(t,f):t;if(c=e.d,d=t.d,o=e.e,r=t.e,c=c.slice(),i=o-r,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,r=o,l=c.length),o=Math.ceil(f/ta),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),a=0;i;)a=(c[--i]=c[i]+d[i]+a)/fs|0,c[i]%=fs;for(a&&(c.unshift(a),++r),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=r,ca?qn(t,f):t}function Bo(e,t,a){if(e!==~~e||e<t||e>a)throw Error(vu+e)}function To(e){var t,a,s,r=e.length-1,i="",o=e[0];if(r>0){for(i+=o,t=1;t<r;t++)s=e[t]+"",a=ta-s.length,a&&(i+=Hc(a)),i+=s;o=e[t],s=o+"",a=ta-s.length,a&&(i+=Hc(a))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var kl=(function(){function e(s,r){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*r+o,s[l]=i%fs|0,o=i/fs|0;return o&&s.unshift(o),s}function t(s,r,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=r[l]){c=s[l]>r[l]?1:-1;break}return c}function a(s,r,i){for(var o=0;i--;)s[i]-=o,o=s[i]<r[i]?1:0,s[i]=o*fs+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,o){var l,c,d,u,f,p,x,v,N,b,C,w,S,E,k,_,A,T,$=s.constructor,z=s.s==r.s?1:-1,F=s.d,P=r.d;if(!s.s)return new $(s);if(!r.s)throw Error(wi+"Division by zero");for(c=s.e-r.e,A=P.length,k=F.length,x=new $(z),v=x.d=[],d=0;P[d]==(F[d]||0);)++d;if(P[d]>(F[d]||0)&&--c,i==null?w=i=$.precision:o?w=i+(Wa(s)-Wa(r))+1:w=i,w<0)return new $(0);if(w=w/ta+2|0,d=0,A==1)for(u=0,P=P[0],w++;(d<k||u)&&w--;d++)S=u*fs+(F[d]||0),v[d]=S/P|0,u=S%P|0;else{for(u=fs/(P[0]+1)|0,u>1&&(P=e(P,u),F=e(F,u),A=P.length,k=F.length),E=A,N=F.slice(0,A),b=N.length;b<A;)N[b++]=0;T=P.slice(),T.unshift(0),_=P[0],P[1]>=fs/2&&++_;do u=0,l=t(P,N,A,b),l<0?(C=N[0],A!=b&&(C=C*fs+(N[1]||0)),u=C/_|0,u>1?(u>=fs&&(u=fs-1),f=e(P,u),p=f.length,b=N.length,l=t(f,N,p,b),l==1&&(u--,a(f,A<p?T:P,p))):(u==0&&(l=u=1),f=P.slice()),p=f.length,p<b&&f.unshift(0),a(N,f,b),l==-1&&(b=N.length,l=t(P,N,A,b),l<1&&(u++,a(N,A<b?T:P,b))),b=N.length):l===0&&(u++,N=[0]),v[d++]=u,l&&N[0]?N[b++]=F[E]||0:(N=[F[E]],b=1);while((E++<k||N[0]!==void 0)&&w--)}return v[0]||v.shift(),x.e=c,qn(x,o?i+Wa(x)+1:i)}})();function AY(e,t){var a,s,r,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(Wa(e)>16)throw Error(x4+Wa(e));if(!e.s)return new u(Mr);for(ca=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Xd(2,d))/Math.LN10*2+5|0,l+=s,a=r=i=new u(Mr),u.precision=l;;){if(r=qn(r.times(e),l),a=a.times(++c),o=i.plus(kl(r,a,l)),To(o.d).slice(0,l)===To(i.d).slice(0,l)){for(;d--;)i=qn(i.times(i),l);return u.precision=f,t==null?(ca=!0,qn(i,f)):i}i=o}}function Wa(e){for(var t=e.e*ta,a=e.d[0];a>=10;a/=10)t++;return t}function b2(e,t,a){if(t>e.LN10.sd())throw ca=!0,a&&(e.precision=a),Error(wi+"LN10 precision limit exceeded");return qn(new e(e.LN10),t)}function Hc(e){for(var t="";e--;)t+="0";return t}function $p(e,t){var a,s,r,i,o,l,c,d,u,f=1,p=10,x=e,v=x.d,N=x.constructor,b=N.precision;if(x.s<1)throw Error(wi+(x.s?"NaN":"-Infinity"));if(x.eq(Mr))return new N(0);if(t==null?(ca=!1,d=b):d=t,x.eq(10))return t==null&&(ca=!0),b2(N,d);if(d+=p,N.precision=d,a=To(v),s=a.charAt(0),i=Wa(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)x=x.times(e),a=To(x.d),s=a.charAt(0),f++;i=Wa(x),s>1?(x=new N("0."+a),i++):x=new N(s+"."+a.slice(1))}else return c=b2(N,d+2,b).times(i+""),x=$p(new N(s+"."+a.slice(1)),d-p).plus(c),N.precision=b,t==null?(ca=!0,qn(x,b)):x;for(l=o=x=kl(x.minus(Mr),x.plus(Mr),d),u=qn(x.times(x),d),r=3;;){if(o=qn(o.times(u),d),c=l.plus(kl(o,new N(r),d)),To(c.d).slice(0,d)===To(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(b2(N,d+2,b).times(i+""))),l=kl(l,new N(f),d),N.precision=b,t==null?(ca=!0,qn(l,b)):l;l=c,r+=2}}function kU(e,t){var a,s,r;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,a=a-s-1,e.e=rh(a/ta),e.d=[],s=(a+1)%ta,a<0&&(s+=ta),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=ta;s<r;)e.d.push(+t.slice(s,s+=ta));t=t.slice(s),s=ta-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),ca&&(e.e>nw||e.e<-nw))throw Error(x4+a)}else e.s=0,e.e=0,e.d=[0];return e}function qn(e,t,a){var s,r,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=ta,r=t,d=f[u=0];else{if(u=Math.ceil((s+1)/ta),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;s%=ta,r=s-ta+o}if(a!==void 0&&(i=Xd(10,o-r-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=a<4?(l||c)&&(a==0||a==(e.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(s>0?r>0?d/Xd(10,o-r):0:f[u-1])%10&1||a==(e.s<0?8:7))),t<1||!f[0])return c?(i=Wa(e),f.length=1,t=t-i-1,f[0]=Xd(10,(ta-t%ta)%ta),e.e=rh(-t/ta)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,i=1,u--):(f.length=u+1,i=Xd(10,ta-s),f[u]=r>0?(d/Xd(10,o-r)%Xd(10,r)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==fs&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=fs)break;f[u--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(ca&&(e.e>nw||e.e<-nw))throw Error(x4+Wa(e));return e}function TY(e,t){var a,s,r,i,o,l,c,d,u,f,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),ca?qn(t,x):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(a=c,o=-o,l=f.length):(a=f,s=d,l=c.length),r=Math.max(Math.ceil(x/ta),l)+2,o>r&&(o=r,a.length=1),a.reverse(),r=o;r--;)a.push(0);a.reverse()}else{for(r=c.length,l=f.length,u=r<l,u&&(l=r),r=0;r<l;r++)if(c[r]!=f[r]){u=c[r]<f[r];break}o=0}for(u&&(a=c,c=f,f=a,t.s=-t.s),l=c.length,r=f.length-l;r>0;--r)c[l++]=0;for(r=f.length;r>o;){if(c[--r]<f[r]){for(i=r;i&&c[--i]===0;)c[i]=fs-1;--c[i],c[r]+=fs}c[r]-=f[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,ca?qn(t,x):t):new p(0)}function Ru(e,t,a){var s,r=Wa(e),i=To(e.d),o=i.length;return t?(a&&(s=a-o)>0?i=i.charAt(0)+"."+i.slice(1)+Hc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+Hc(-r-1)+i,a&&(s=a-o)>0&&(i+=Hc(s))):r>=o?(i+=Hc(r+1-o),a&&(s=a-r-1)>0&&(i=i+"."+Hc(s))):((s=r+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),a&&(s=a-o)>0&&(r+1===o&&(i+="."),i+=Hc(s))),e.s<0?"-"+i:i}function LU(e,t){if(e.length>t)return e.length=t,!0}function EY(e){var t,a,s;function r(i){var o=this;if(!(o instanceof r))return new r(i);if(o.constructor=r,i instanceof r){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(vu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return kU(o,i.toString())}else if(typeof i!="string")throw Error(vu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,cEe.test(i))kU(o,i);else throw Error(vu+i)}if(r.prototype=Dt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=EY,r.config=r.set=dEe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(a=s[t++])||(e[a]=this[a]);return r.config(e),r}function dEe(e){if(!e||typeof e!="object")throw Error(wi+"Object expected");var t,a,s,r=["precision",1,sh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[a=r[t]])!==void 0)if(rh(s)===s&&s>=r[t+1]&&s<=r[t+2])this[a]=s;else throw Error(vu+a+": "+s);if((s=e[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(vu+a+": "+s);return this}var y4=EY(lEe);Mr=new y4(1);const $n=y4;var uEe=e=>e,kY={},LY=e=>e===kY,PU=e=>function t(){return arguments.length===0||arguments.length===1&&LY(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},PY=(e,t)=>e===1?t:PU(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var i=s.filter(o=>o!==kY).length;return i>=e?t(...s):PY(e-i,PU(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=s.map(u=>LY(u)?l.shift():u);return t(...d,...l)}))}),mEe=e=>PY(e.length,e),JE=(e,t)=>{for(var a=[],s=e;s<t;++s)a[s-e]=s;return a},fEe=mEe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(a=>t[a]).map(e)),hEe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(!a.length)return uEe;var r=a.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function DY(e){var t;return e===0?t=1:t=Math.floor(new $n(e).abs().log(10).toNumber())+1,t}function OY(e,t,a){for(var s=new $n(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(a),r++;return i}var MY=e=>{var[t,a]=e,[s,r]=[t,a];return t>a&&([s,r]=[a,t]),[s,r]},IY=(e,t,a)=>{if(e.lte(0))return new $n(0);var s=DY(e.toNumber()),r=new $n(10).pow(s),i=e.div(r),o=s!==1?.05:.1,l=new $n(Math.ceil(i.div(o).toNumber())).add(a).mul(o),c=l.mul(r);return t?new $n(c.toNumber()):new $n(Math.ceil(c.toNumber()))},gEe=(e,t,a)=>{var s=new $n(1),r=new $n(e);if(!r.isint()&&a){var i=Math.abs(e);i<1?(s=new $n(10).pow(DY(e)-1),r=new $n(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new $n(Math.floor(e)))}else e===0?r=new $n(Math.floor((t-1)/2)):a||(r=new $n(Math.floor(e)));var o=Math.floor((t-1)/2),l=hEe(fEe(c=>r.add(new $n(c-o).mul(s)).toNumber()),JE);return l(0,t)},$Y=function(t,a,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-t)/(s-1)))return{step:new $n(0),tickMin:new $n(0),tickMax:new $n(0)};var o=IY(new $n(a).sub(t).div(s-1),r,i),l;t<=0&&a>=0?l=new $n(0):(l=new $n(t).add(a).div(2),l=l.sub(new $n(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new $n(a).sub(l).div(o).toNumber()),u=c+d+1;return u>s?$Y(t,a,s,r,i+1):(u<s&&(d=a>0?d+(s-u):d,c=a>0?c:c+(s-u)),{step:o,tickMin:l.sub(new $n(c).mul(o)),tickMax:l.add(new $n(d).mul(o))})},pEe=function(t){var[a,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,c]=MY([a,s]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...JE(0,r-1).map(()=>1/0)]:[...JE(0,r-1).map(()=>-1/0),c];return a>s?d.reverse():d}if(l===c)return gEe(l,r,i);var{step:u,tickMin:f,tickMax:p}=$Y(l,c,o,i,0),x=OY(f,p.add(new $n(.1).mul(u)),u);return a>s?x.reverse():x},xEe=function(t,a){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=MY([s,r]);if(o===-1/0||l===1/0)return[s,r];if(o===l)return[o];var c=Math.max(a,2),d=IY(new $n(l).sub(o).div(c-1),i,0),u=[...OY(new $n(o),new $n(l),d),l];return i===!1&&(u=u.map(f=>Math.round(f))),s>r?u.reverse():u},RY=e=>e.rootProps.maxBarSize,yEe=e=>e.rootProps.barGap,zY=e=>e.rootProps.barCategoryGap,bEe=e=>e.rootProps.barSize,Kx=e=>e.rootProps.stackOffset,UY=e=>e.rootProps.reverseStackOrder,b4=e=>e.options.chartName,v4=e=>e.rootProps.syncId,FY=e=>e.rootProps.syncMethod,w4=e=>e.options.eventEmitter,Ga={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},jl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Dr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},jj=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},vEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:jl.angleAxisId,includeHidden:!1,name:void 0,reversed:jl.reversed,scale:jl.scale,tick:jl.tick,tickCount:void 0,ticks:void 0,type:jl.type,unit:void 0},wEe={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Dr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,ticks:void 0,type:Dr.type,unit:void 0},NEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:jl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jl.scale,tick:jl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},jEe={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Dr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,ticks:void 0,type:"category",unit:void 0},N4=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?NEe:vEe,j4=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?jEe:wEe,Cj=e=>e.polarOptions,C4=rt([nc,ac,os],bY),BY=rt([Cj,C4],(e,t)=>{if(e!=null)return $s(e.innerRadius,t,0)}),HY=rt([Cj,C4],(e,t)=>{if(e!=null)return $s(e.outerRadius,t,t*.8)}),CEe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]},GY=rt([Cj],CEe);rt([N4,GY],jj);var WY=rt([C4,BY,HY],(e,t,a)=>{if(!(e==null||t==null||a==null))return[t,a]});rt([j4,WY],jj);var qY=rt([wn,Cj,BY,HY,nc,ac],(e,t,a,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||a==null||s==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:$s(o,r,r/2),cy:$s(l,i,i/2),innerRadius:a,outerRadius:s,startAngle:c,endAngle:d,clockWise:!1}}}),fa=(e,t)=>t,Xx=(e,t,a)=>a;function S4(e){return e?.id}function VY(e,t,a){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=a,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:s;if(!(d==null||d.length===0)){var u=S4(l);d.forEach((f,p)=>{var x=i==null||r?p:String(Hn(f,i,null)),v=Hn(f,l.dataKey,0),N;o.has(x)?N=o.get(x):N={},Object.assign(N,{[u]:v}),o.set(x,N)})}}),Array.from(o.values())}function Sj(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var _j=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Aj(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function SEe(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}var ls=e=>{var t=wn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ih=e=>e.tooltip.settings.axisId;function DU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function aw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?DU(Object(a),!0).forEach(function(s){_Ee(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function _Ee(e,t,a){return(t=AEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function AEe(e){var t=TEe(e,"string");return typeof t=="symbol"?t:t+""}function TEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ek=[0,"auto"],us={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},QY=(e,t)=>e.cartesianAxis.xAxis[t],rc=(e,t)=>{var a=QY(e,t);return a??us},ms={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ek,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:qx},YY=(e,t)=>e.cartesianAxis.yAxis[t],ic=(e,t)=>{var a=YY(e,t);return a??ms},EEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_4=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return a??EEe},ya=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);case"zAxis":return _4(e,a);case"angleAxis":return N4(e,a);case"radiusAxis":return j4(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},kEe=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Zx=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);case"angleAxis":return N4(e,a);case"radiusAxis":return j4(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},KY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function A4(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var Tj=e=>e.graphicalItems.cartesianItems,LEe=rt([fa,Xx],A4),T4=(e,t,a)=>e.filter(a).filter(s=>t?.includeHidden===!0?!0:!s.hide),Jx=rt([Tj,ya,LEe],T4,{memoizeOptions:{resultEqualityCheck:Aj}}),XY=rt([Jx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Sj)),ZY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),PEe=rt([Jx],ZY),E4=e=>e.map(t=>t.data).filter(Boolean).flat(1),DEe=rt([Jx],E4,{memoizeOptions:{resultEqualityCheck:Aj}}),k4=(e,t)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:a.slice(s,r+1)},L4=rt([DEe,p4],k4),P4=(e,t,a)=>t?.dataKey!=null?e.map(s=>({value:Hn(s,t.dataKey)})):a.length>0?a.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:Hn(r,s)}))):e.map(s=>({value:s})),Ej=rt([L4,ya,Jx],P4);function JY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Kb(e){if(Uo(e)||e instanceof Date){var t=Number(e);if(pa(t))return t}}function OU(e){if(Array.isArray(e)){var t=[Kb(e[0]),Kb(e[1])];return cd(t)?t:void 0}var a=Kb(e);if(a!=null)return[a,a]}function Wl(e){return e.map(Kb).filter(gSe)}function OEe(e,t,a){return!a||typeof t!="number"||Yi(t)?[]:a.length?Wl(a.flatMap(s=>{var r=Hn(e,s.dataKey),i,o;if(Array.isArray(r)?[i,o]=r:i=o=r,!(!pa(i)||!pa(o)))return[t-i,t+o]})):[]}var cs=e=>{var t=ls(e),a=ih(e);return Zx(e,t,a)},e0=rt([cs],e=>e?.dataKey),MEe=rt([XY,p4,cs],VY),eK=(e,t,a,s)=>{var r={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=s?[...c].reverse():c,u=d.map(S4);return[l,{stackedData:A2e(e,u,a),graphicalItems:d}]}))},tk=rt([MEe,XY,Kx,UY],eK),tK=(e,t,a,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&a!=="zAxis"){var o=P2e(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},IEe=rt([ya],e=>e.allowDataOverflow),D4=e=>{var t;if(e==null||!("domain"in e))return ek;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var a=Wl(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:ek},O4=rt([ya],D4),M4=rt([O4,IEe],CY),$Ee=rt([tk,sc,fa,M4],tK,{memoizeOptions:{resultEqualityCheck:_j}}),kj=e=>e.errorBars,REe=(e,t,a)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>JY(a,s)),sw=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var r=a.filter(Boolean);if(r.length!==0){var i=r.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},I4=(e,t,a,s,r)=>{var i,o;if(a.length>0&&e.forEach(l=>{a.forEach(c=>{var d,u,f=(d=s[c.id])===null||d===void 0?void 0:d.filter(C=>JY(r,C)),p=Hn(l,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),x=OEe(l,p,f);if(x.length>=2){var v=Math.min(...x),N=Math.max(...x);(i==null||v<i)&&(i=v),(o==null||N>o)&&(o=N)}var b=OU(p);b!=null&&(i=i==null?b[0]:Math.min(i,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var c=OU(Hn(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),pa(i)&&pa(o))return[i,o]},zEe=rt([L4,ya,PEe,kj,fa],I4,{memoizeOptions:{resultEqualityCheck:_j}});function UEe(e){var{value:t}=e;if(Uo(t)||t instanceof Date)return t}var FEe=(e,t,a)=>{var s=e.map(UEe).filter(r=>r!=null);return a&&(t.dataKey==null||t.allowDuplicatedCategory&&ZV(s))?jY(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},nK=e=>e.referenceElements.dots,oh=(e,t,a)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===a:s.yAxisId===a),BEe=rt([nK,fa,Xx],oh),aK=e=>e.referenceElements.areas,HEe=rt([aK,fa,Xx],oh),sK=e=>e.referenceElements.lines,GEe=rt([sK,fa,Xx],oh),rK=(e,t)=>{if(e!=null){var a=Wl(e.map(s=>t==="xAxis"?s.x:s.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},WEe=rt(BEe,fa,rK),iK=(e,t)=>{if(e!=null){var a=Wl(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},qEe=rt([HEe,fa],iK);function VEe(e){var t;if(e.x!=null)return Wl([e.x]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return a==null||a.length===0?[]:Wl(a)}function QEe(e){var t;if(e.y!=null)return Wl([e.y]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return a==null||a.length===0?[]:Wl(a)}var oK=(e,t)=>{if(e!=null){var a=e.flatMap(s=>t==="xAxis"?VEe(s):QEe(s));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},YEe=rt([GEe,fa],oK),KEe=rt(WEe,YEe,qEe,(e,t,a)=>sw(e,a,t)),$4=(e,t,a,s,r,i,o,l)=>{if(a!=null)return a;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?sw(s,i,r):sw(i,r);return oEe(t,d,e.allowDataOverflow)},XEe=rt([ya,O4,M4,$Ee,zEe,KEe,wn,fa],$4,{memoizeOptions:{resultEqualityCheck:_j}}),ZEe=[0,1],R4=(e,t,a,s,r,i,o)=>{if(!((e==null||a==null||a.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=Sd(t,i);if(d&&l==null){var u;return jY(0,(u=a?.length)!==null&&u!==void 0?u:0)}return c==="category"?FEe(s,e,d):r==="expand"?ZEe:o}},z4=rt([ya,wn,L4,Ej,Kx,fa,XEe],R4),lK=(e,t,a,s,r)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Ux(i));return l in Ug?l:"point"}}},lh=rt([ya,wn,KY,b4,fa],lK);function JEe(e){if(e!=null){if(e in Ug)return Ug[e]();var t="scale".concat(Ux(e));if(t in Ug)return Ug[t]()}}function U4(e,t,a,s){if(!(a==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(s);var r=JEe(t);if(r!=null){var i=r.domain(a).range(s);return N2e(i),i}}}var F4=(e,t,a)=>{var s=D4(t);if(!(a!=="auto"&&a!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&cd(e))return pEe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&cd(e))return xEe(e,t.tickCount,t.allowDecimals)}},B4=rt([z4,Zx,lh],F4),H4=(e,t,a,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&cd(t)&&Array.isArray(a)&&a.length>0){var r=t[0],i=a[0],o=t[1],l=a[a.length-1];return[Math.min(r,i),Math.max(o,l)]}return t},eke=rt([ya,z4,B4,fa],H4),tke=rt(Ej,ya,(e,t)=>{if(!(!t||t.type!=="number")){var a=1/0,s=Array.from(Wl(e.map(f=>f.value))).sort((f,p)=>f-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var o=i-r;if(o===0)return 1/0;for(var l=0;l<s.length-1;l++){var c=s[l],d=s[l+1];if(!(c==null||d==null)){var u=d-c;a=Math.min(a,u)}}return a/o}}),cK=rt(tke,wn,zY,os,(e,t,a,s,r)=>r,(e,t,a,s,r)=>{if(!pa(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var o=$s(a,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),nke=(e,t,a)=>{var s=rc(e,t);return s==null||typeof s.padding!="string"?0:cK(e,"xAxis",t,a,s.padding)},ake=(e,t,a)=>{var s=ic(e,t);return s==null||typeof s.padding!="string"?0:cK(e,"yAxis",t,a,s.padding)},ske=rt(rc,nke,(e,t)=>{var a,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((a=r.left)!==null&&a!==void 0?a:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),rke=rt(ic,ake,(e,t)=>{var a,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((a=r.top)!==null&&a!==void 0?a:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),ike=rt([os,ske,gj,hj,(e,t,a)=>a],(e,t,a,s,r)=>{var{padding:i}=s;return r?[i.left,a.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),oke=rt([os,wn,rke,gj,hj,(e,t,a)=>a],(e,t,a,s,r,i)=>{var{padding:o}=r;return i?[s.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),t0=(e,t,a,s)=>{var r;switch(t){case"xAxis":return ike(e,a,s);case"yAxis":return oke(e,a,s);case"zAxis":return(r=_4(e,a))===null||r===void 0?void 0:r.range;case"angleAxis":return GY(e);case"radiusAxis":return WY(e,a);default:return}},dK=rt([ya,t0],jj),Lj=rt([ya,lh,eke,dK],U4);rt([Jx,kj,fa],REe);function uK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Pj=(e,t)=>t,Dj=(e,t,a)=>a,lke=rt(mj,Pj,Dj,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(uK)),cke=rt(fj,Pj,Dj,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(uK)),mK=(e,t)=>({width:e.width,height:t.height}),dke=(e,t)=>{var a=typeof t.width=="number"?t.width:qx;return{width:a,height:e.height}},fK=rt(os,rc,mK),uke=(e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},mke=(e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}},fke=rt(ac,os,lke,Pj,Dj,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=mK(t,l);o==null&&(o=uke(t,s,e));var d=s==="top"&&!r||s==="bottom"&&r;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),hke=rt(nc,os,cke,Pj,Dj,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=dke(t,l);o==null&&(o=mke(t,s,e));var d=s==="left"&&!r||s==="right"&&r;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),gke=(e,t)=>{var a=rc(e,t);if(a!=null)return fke(e,a.orientation,a.mirror)},pke=rt([os,rc,gke,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),xke=(e,t)=>{var a=ic(e,t);if(a!=null)return hke(e,a.orientation,a.mirror)},yke=rt([os,ic,xke,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),hK=rt(os,ic,(e,t)=>{var a=typeof t.width=="number"?t.width:qx;return{width:a,height:e.height}}),MU=(e,t,a)=>{switch(t){case"xAxis":return fK(e,a).width;case"yAxis":return hK(e,a).height;default:return}},gK=(e,t,a,s)=>{if(a!=null){var{allowDuplicatedCategory:r,type:i,dataKey:o}=a,l=Sd(e,s),c=t.map(d=>d.value);if(o&&l&&i==="category"&&r&&ZV(c))return c}},G4=rt([wn,Ej,ya,fa],gK),pK=(e,t,a,s)=>{if(!(a==null||a.dataKey==null)){var{type:r,scale:i}=a,o=Sd(e,s);if(o&&(r==="number"||i!=="auto"))return t.map(l=>l.value)}},W4=rt([wn,Ej,Zx,fa],pK),IU=rt([wn,kEe,lh,Lj,G4,W4,t0,B4,fa],(e,t,a,s,r,i,o,l,c)=>{if(t!=null){var d=Sd(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:d,niceTicks:l,range:o,realScaleType:a,scale:s}}}),bke=(e,t,a,s,r,i,o,l,c)=>{if(!(t==null||s==null)){var d=Sd(e,c),{type:u,ticks:f,tickCount:p}=t,x=a==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,v=u==="category"&&s.bandwidth?s.bandwidth()/x:0;v=c==="angleAxis"&&i!=null&&i.length>=2?ps(i[0]-i[1])*2*v:v;var N=f||r;if(N){var b=N.map((C,w)=>{var S=o?o.indexOf(C):C;return{index:w,coordinate:s(S)+v,value:C,offset:v}});return b.filter(C=>pa(C.coordinate))}return d&&l?l.map((C,w)=>({coordinate:s(C)+v,value:C,index:w,offset:v})).filter(C=>pa(C.coordinate)):s.ticks?s.ticks(p).map(C=>({coordinate:s(C)+v,value:C,offset:v})):s.domain().map((C,w)=>({coordinate:s(C)+v,value:o?o[C]:C,index:w,offset:v}))}},xK=rt([wn,Zx,lh,Lj,B4,t0,G4,W4,fa],bke),vke=(e,t,a,s,r,i,o)=>{if(!(t==null||a==null||s==null||s[0]===s[1])){var l=Sd(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&s?.length>=2?ps(s[0]-s[1])*2*d:d,l&&i?i.map((u,f)=>({coordinate:a(u)+d,value:u,index:f,offset:d})):a.ticks?a.ticks(c).map(u=>({coordinate:a(u)+d,value:u,offset:d})):a.domain().map((u,f)=>({coordinate:a(u)+d,value:r?r[u]:u,index:f,offset:d}))}},dd=rt([wn,Zx,Lj,t0,G4,W4,fa],vke),ud=rt(ya,Lj,(e,t)=>{if(!(e==null||t==null))return aw(aw({},e),{},{scale:t})}),wke=rt([ya,lh,z4,dK],U4);rt((e,t,a)=>_4(e,a),wke,(e,t)=>{if(!(e==null||t==null))return aw(aw({},e),{},{scale:t})});var Nke=rt([wn,mj,fj],(e,t,a)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),yK=e=>e.options.defaultTooltipEventType,bK=e=>e.options.validateTooltipEventTypes;function vK(e,t,a){if(e==null)return t;var s=e?"axis":"item";return a==null?t:a.includes(s)?s:t}function q4(e,t){var a=yK(e),s=bK(e);return vK(t,a,s)}function jke(e){return $t(t=>q4(t,e))}var wK=(e,t)=>{var a,s=Number(t);if(!(Yi(s)||t==null))return s>=0?e==null||(a=e[s])===null||a===void 0?void 0:a.value:void 0},Cke=e=>e.tooltip.settings,qc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Ske={itemInteraction:{click:qc,hover:qc},axisInteraction:{click:qc,hover:qc},keyboardInteraction:qc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},NK=vr({name:"tooltip",initialState:Ske,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:oa()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Wi(e).tooltipItemPayloads.indexOf(a);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:oa()},removeTooltipEntrySettings:{reducer(e,t){var a=Wi(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:oa()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:_ke,replaceTooltipEntrySettings:Ake,removeTooltipEntrySettings:Tke,setTooltipSettingsState:Eke,setActiveMouseOverItemIndex:jK,mouseLeaveItem:kke,mouseLeaveChart:CK,setActiveClickItemIndex:Lke,setMouseOverAxisIndex:SK,setMouseClickAxisIndex:Pke,setSyncInteraction:nk,setKeyboardInteraction:ak}=NK.actions,Dke=NK.reducer;function $U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Zy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$U(Object(a),!0).forEach(function(s){Oke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$U(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Oke(e,t,a){return(t=Mke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Mke(e){var t=Ike(e,"string");return typeof t=="symbol"?t:t+""}function Ike(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ke(e,t,a){return t==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Rke(e){return e.index!=null}var _K=(e,t,a,s)=>{if(t==null)return qc;var r=$ke(e,t,a);if(r==null)return qc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Rke(r)){if(i)return Zy(Zy({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return Zy(Zy({},qc),{},{coordinate:r.coordinate})};function zke(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function Uke(e,t){var a=zke(e),s=t[0],r=t[1];if(a===void 0)return!1;var i=Math.min(s,r),o=Math.max(s,r);return a>=i&&a<=o}function Fke(e,t,a){if(a==null||t==null)return!0;var s=Hn(e,t);return s==null||!cd(a)?!0:Uke(s,a)}var V4=(e,t,a,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!pa(i))return r;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),d=t[c];return d==null||Fke(d,a,s)?String(c):null},AK=(e,t,a,s,r,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=r?.[Number(i)];if(u)return a==="horizontal"?{x:u.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:u.coordinate}}},TK=(e,t,a,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(a==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},n0=e=>e.options.tooltipPayloadSearcher,ch=e=>e.tooltip;function RU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function zU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?RU(Object(a),!0).forEach(function(s){Bke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Bke(e,t,a){return(t=Hke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Hke(e){var t=Gke(e,"string");return typeof t=="symbol"?t:t+""}function Gke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wke(e,t){return e??t}var EK=(e,t,a,s,r,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=a,f=[];return e.reduce((p,x)=>{var v,{dataDefinedOnItem:N,settings:b}=x,C=Wke(N,l),w=Array.isArray(C)?WQ(C,d,u):C,S=(v=b?.dataKey)!==null&&v!==void 0?v:s,E=b?.nameKey,k;if(s&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=JV(w,s,r):k=i(w,t,c,E),Array.isArray(k))k.forEach(A=>{var T=zU(zU({},b),{},{name:A.name,unit:A.unit,color:void 0,fill:void 0});p.push(Sz({tooltipEntrySettings:T,dataKey:A.dataKey,payload:A.payload,value:Hn(A.payload,A.dataKey),name:A.name}))});else{var _;p.push(Sz({tooltipEntrySettings:b,dataKey:S,payload:k,value:Hn(k,S),name:(_=Hn(k,E))!==null&&_!==void 0?_:b?.name}))}return p},f)}},Q4=rt([cs,wn,KY,b4,ls],lK),qke=rt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Vke=rt([ls,ih],A4),dh=rt([qke,cs,Vke],T4,{memoizeOptions:{resultEqualityCheck:Aj}}),Qke=rt([dh],e=>e.filter(Sj)),Yke=rt([dh],E4,{memoizeOptions:{resultEqualityCheck:Aj}}),uh=rt([Yke,sc],k4),Kke=rt([Qke,sc,cs],VY),Y4=rt([uh,cs,dh],P4),kK=rt([cs],D4),Xke=rt([cs],e=>e.allowDataOverflow),LK=rt([kK,Xke],CY),Zke=rt([dh],e=>e.filter(Sj)),Jke=rt([Kke,Zke,Kx,UY],eK),eLe=rt([Jke,sc,ls,LK],tK),tLe=rt([dh],ZY),nLe=rt([uh,cs,tLe,kj,ls],I4,{memoizeOptions:{resultEqualityCheck:_j}}),aLe=rt([nK,ls,ih],oh),sLe=rt([aLe,ls],rK),rLe=rt([aK,ls,ih],oh),iLe=rt([rLe,ls],iK),oLe=rt([sK,ls,ih],oh),lLe=rt([oLe,ls],oK),cLe=rt([sLe,lLe,iLe],sw),dLe=rt([cs,kK,LK,eLe,nLe,cLe,wn,ls],$4),a0=rt([cs,wn,uh,Y4,Kx,ls,dLe],R4),uLe=rt([a0,cs,Q4],F4),mLe=rt([cs,a0,uLe,ls],H4),PK=e=>{var t=ls(e),a=ih(e),s=!1;return t0(e,t,a,s)},DK=rt([cs,PK],jj),OK=rt([cs,Q4,mLe,DK],U4),fLe=rt([wn,Y4,cs,ls],gK),hLe=rt([wn,Y4,cs,ls],pK),gLe=(e,t,a,s,r,i,o,l)=>{if(t){var{type:c}=t,d=Sd(e,l);if(s){var u=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=c==="category"&&s.bandwidth?s.bandwidth()/u:0;return f=l==="angleAxis"&&r!=null&&r?.length>=2?ps(r[0]-r[1])*2*f:f,d&&o?o.map((p,x)=>({coordinate:s(p)+f,value:p,index:x,offset:f})):s.domain().map((p,x)=>({coordinate:s(p)+f,value:i?i[p]:p,index:x,offset:f}))}}},oc=rt([wn,cs,Q4,OK,PK,fLe,hLe,ls],gLe),K4=rt([yK,bK,Cke],(e,t,a)=>vK(a.shared,e,t)),MK=e=>e.tooltip.settings.trigger,X4=e=>e.tooltip.settings.defaultIndex,s0=rt([ch,K4,MK,X4],_K),md=rt([s0,uh,e0,a0],V4),IK=rt([oc,md],wK),Z4=rt([s0],e=>{if(e)return e.dataKey}),pLe=rt([s0],e=>{if(e)return e.graphicalItemId}),$K=rt([ch,K4,MK,X4],TK),xLe=rt([nc,ac,wn,os,oc,X4,$K,n0],AK),yLe=rt([s0,xLe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),bLe=rt([s0],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),vLe=rt([$K,md,sc,e0,IK,n0,K4],EK),wLe=rt([vLe],e=>{if(e!=null){var t=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(t))}});function UU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function FU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UU(Object(a),!0).forEach(function(s){NLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function NLe(e,t,a){return(t=jLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jLe(e){var t=CLe(e,"string");return typeof t=="symbol"?t:t+""}function CLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SLe=()=>$t(cs),_Le=()=>{var e=SLe(),t=$t(oc),a=$t(OK);return Of(!e||!a?void 0:FU(FU({},e),{},{scale:a}),t)};function BU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function qm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?BU(Object(a),!0).forEach(function(s){ALe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ALe(e,t,a){return(t=TLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TLe(e){var t=ELe(e,"string");return typeof t=="symbol"?t:t+""}function ELe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kLe=(e,t,a,s)=>{var r=t.find(i=>i&&i.index===a);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},LLe=(e,t,a,s)=>{var r=t.find(d=>d&&d.index===a);if(r){if(e==="centric"){var i=r.coordinate,{radius:o}=s;return qm(qm(qm({},s),Ha(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=r.coordinate,{angle:c}=s;return qm(qm(qm({},s),Ha(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function PLe(e,t){var{chartX:a,chartY:s}=e;return a>=t.left&&a<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var RK=(e,t,a,s,r)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,d,u,f,p,x=l>0?(c=a[l-1])===null||c===void 0?void 0:c.coordinate:(d=a[o-1])===null||d===void 0?void 0:d.coordinate,v=(u=a[l])===null||u===void 0?void 0:u.coordinate,N=l>=o-1?(f=a[0])===null||f===void 0?void 0:f.coordinate:(p=a[l+1])===null||p===void 0?void 0:p.coordinate,b=void 0;if(!(x==null||v==null||N==null))if(ps(v-x)!==ps(N-v)){var C=[];if(ps(N-v)===ps(r[1]-r[0])){b=N;var w=v+r[1]-r[0];C[0]=Math.min(w,(w+x)/2),C[1]=Math.max(w,(w+x)/2)}else{b=x;var S=N+r[1]-r[0];C[0]=Math.min(v,(S+v)/2),C[1]=Math.max(v,(S+v)/2)}var E=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(e>E[0]&&e<=E[1]||e>=C[0]&&e<=C[1]){var k;return(k=a[l])===null||k===void 0?void 0:k.index}}else{var _=Math.min(x,N),A=Math.max(x,N);if(e>(_+v)/2&&e<=(A+v)/2){var T;return(T=a[l])===null||T===void 0?void 0:T.index}}}else if(t)for(var $=0;$<o;$++){var z=t[$];if(z!=null){var F=t[$+1],P=t[$-1];if($===0&&F!=null&&e<=(z.coordinate+F.coordinate)/2||$===o-1&&P!=null&&e>(z.coordinate+P.coordinate)/2||$>0&&$<o-1&&P!=null&&F!=null&&e>(z.coordinate+P.coordinate)/2&&e<=(z.coordinate+F.coordinate)/2)return z.index}}return-1},DLe=()=>$t(b4),J4=(e,t)=>t,zK=(e,t,a)=>a,eD=(e,t,a,s)=>s,OLe=rt(oc,e=>aj(e,t=>t.coordinate)),tD=rt([ch,J4,zK,eD],_K),nD=rt([tD,uh,e0,a0],V4),MLe=(e,t,a)=>{if(t!=null){var s=ch(e);return t==="axis"?a==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:a==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},UK=rt([ch,J4,zK,eD],TK),rw=rt([nc,ac,wn,os,oc,eD,UK,n0],AK),ILe=rt([tD,rw],(e,t)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:t}),FK=rt([oc,nD],wK),$Le=rt([UK,nD,sc,e0,FK,n0,J4],EK),RLe=rt([tD,nD],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),zLe=(e,t,a,s,r,i,o)=>{if(!(!e||!a||!s||!r)&&PLe(e,o)){var l=D2e(e,t),c=RK(l,i,r,a,s),d=kLe(t,r,c,e);return{activeIndex:String(c),activeCoordinate:d}}},ULe=(e,t,a,s,r,i,o)=>{if(!(!e||!s||!r||!i||!a)){var l=KTe(e,a);if(l){var c=O2e(l,t),d=RK(c,o,i,s,r),u=LLe(t,i,d,l);return{activeIndex:String(d),activeCoordinate:u}}}},FLe=(e,t,a,s,r,i,o,l)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?zLe(e,t,s,r,i,o,l):ULe(e,t,a,s,r,i,o)},BLe=rt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(t!=null){var s=e[t];if(s!=null)return a?s.panoramaElement:s.element}}),HLe=rt(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Ga)),a=Array.from(new Set(t));return a.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:SEe}});function HU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function GU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?HU(Object(a),!0).forEach(function(s){GLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function GLe(e,t,a){return(t=WLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function WLe(e){var t=qLe(e,"string");return typeof t=="symbol"?t:t+""}function qLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VLe={},QLe={zIndexMap:Object.values(Ga).reduce((e,t)=>GU(GU({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),VLe)},YLe=new Set(Object.values(Ga));function KLe(e){return YLe.has(e)}var BK=vr({name:"zIndex",initialState:QLe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:oa()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!KLe(a)&&delete e.zIndexMap[a])},prepare:oa()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:s,isPanorama:r}=t.payload;e.zIndexMap[a]?r?e.zIndexMap[a].panoramaElement=s:e.zIndexMap[a].element=s:e.zIndexMap[a]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:oa()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:oa()}}}),{registerZIndexPortal:XLe,unregisterZIndexPortal:ZLe,registerZIndexPortalElement:JLe,unregisterZIndexPortalElement:ePe}=BK.actions,tPe=BK.reducer;function wr(e){var{zIndex:t,children:a}=e,s=uAe(),r=s&&t!==void 0&&t!==0,i=Fs(),o=Xn();h.useLayoutEffect(()=>r?(o(XLe({zIndex:t})),()=>{o(ZLe({zIndex:t}))}):Fx,[o,t,r]);var l=$t(c=>BLe(c,t,i));return r?l?Hi.createPortal(a,l):null:a}function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},sk.apply(null,arguments)}function WU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Jy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?WU(Object(a),!0).forEach(function(s){nPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):WU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function nPe(e,t,a){return(t=aPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function aPe(e){var t=sPe(e,"string");return typeof t=="symbol"?t:t+""}function sPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rPe(e){var{cursor:t,cursorComp:a,cursorProps:s}=e;return h.isValidElement(t)?h.cloneElement(t,s):h.createElement(a,s)}function iPe(e){var t,{coordinate:a,payload:s,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:u}=e,f=a,p=s,x=r;if(!c||!f||u!=="ScatterChart"&&d!=="axis")return null;var v,N,b;if(u==="ScatterChart")v=f,N=dTe,b=Ga.cursorLine;else if(u==="BarChart")v=uTe(l,f,i,o),N=yY,b=Ga.cursorRectangle;else if(l==="radial"&&tQ(f)){var{cx:C,cy:w,radius:S,startAngle:E,endAngle:k}=vY(f);v={cx:C,cy:w,startAngle:E,endAngle:k,innerRadius:S,outerRadius:S},N=NY,b=Ga.cursorLine}else v={points:eEe(l,f,i)},N=g4,b=Ga.cursorLine;var _=typeof c=="object"&&"className"in c?c.className:void 0,A=Jy(Jy(Jy(Jy({stroke:"#ccc",pointerEvents:"none"},i),v),Du(c)),{},{payload:p,payloadIndex:x,className:Pt("recharts-tooltip-cursor",_)});return h.createElement(wr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},h.createElement(rPe,{cursor:c,cursorComp:N,cursorProps:A}))}function oPe(e){var t=_Le(),a=tY(),s=ah(),r=DLe();return t==null||a==null||s==null||r==null?null:h.createElement(iPe,sk({},e,{offset:a,layout:s,tooltipAxisBandSize:t,chartName:r}))}var HK=h.createContext(null),lPe=()=>h.useContext(HK),v2={exports:{}},qU;function cPe(){return qU||(qU=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function r(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new r(u,f||c,p),v=a?a+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=a?a+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,x=f.length,v=new Array(x);p<x;p++)v[p]=f[p].fn;return v},l.prototype.listenerCount=function(d){var u=a?a+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,p,x,v){var N=a?a+d:d;if(!this._events[N])return!1;var b=this._events[N],C=arguments.length,w,S;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),C){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,p),!0;case 5:return b.fn.call(b.context,u,f,p,x),!0;case 6:return b.fn.call(b.context,u,f,p,x,v),!0}for(S=1,w=new Array(C-1);S<C;S++)w[S-1]=arguments[S];b.fn.apply(b.context,w)}else{var E=b.length,k;for(S=0;S<E;S++)switch(b[S].once&&this.removeListener(d,b[S].fn,void 0,!0),C){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,u);break;case 3:b[S].fn.call(b[S].context,u,f);break;case 4:b[S].fn.call(b[S].context,u,f,p);break;default:if(!w)for(k=1,w=new Array(C-1);k<C;k++)w[k-1]=arguments[k];b[S].fn.apply(b[S].context,w)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,p){var x=a?a+d:d;if(!this._events[x])return this;if(!u)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===u&&(!p||v.once)&&(!f||v.context===f)&&o(this,x);else{for(var N=0,b=[],C=v.length;N<C;N++)(v[N].fn!==u||p&&!v[N].once||f&&v[N].context!==f)&&b.push(v[N]);b.length?this._events[x]=b.length===1?b[0]:b:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l})(v2)),v2.exports}var dPe=cPe();const uPe=Xi(dPe);var Rp=new uPe,rk="recharts.syncEvent.tooltip",VU="recharts.syncEvent.brush";function aD(e,t){if(t){var a=Number.parseInt(t,10);if(!Yi(a))return e?.[a]}}var mPe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},GK=vr({name:"options",initialState:mPe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),fPe=GK.reducer,{createEventEmitter:hPe}=GK.actions;function gPe(e){return e.tooltip.syncInteraction}var pPe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},WK=vr({name:"chartData",initialState:pPe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:s}=t.payload;a!=null&&(e.dataStartIndex=a),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:QU,setDataStartEndIndexes:xPe,setComputedData:Zqe}=WK.actions,yPe=WK.reducer,bPe=["x","y"];function YU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Vm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?YU(Object(a),!0).forEach(function(s){vPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):YU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vPe(e,t,a){return(t=wPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wPe(e){var t=NPe(e,"string");return typeof t=="symbol"?t:t+""}function NPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jPe(e,t){if(e==null)return{};var a,s,r=CPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function CPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function SPe(){var e=$t(v4),t=$t(w4),a=Xn(),s=$t(FY),r=$t(oc),i=ah(),o=pj(),l=$t(c=>c.rootProps.className);h.useEffect(()=>{if(e==null)return Fx;var c=(d,u,f)=>{if(t!==f&&e===d){if(s==="index"){var p;if(o&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var x=u.payload.coordinate,{x:v,y:N}=x,b=jPe(x,bPe),{x:C,y:w,width:S,height:E}=u.payload.sourceViewBox,k=Vm(Vm({},b),{},{x:o.x+(S?(v-C)/S:0)*o.width,y:o.y+(E?(N-w)/E:0)*o.height});a(Vm(Vm({},u),{},{payload:Vm(Vm({},u.payload),{},{coordinate:k})}))}else a(u);return}if(r!=null){var _;if(typeof s=="function"){var A={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},T=s(r,A);_=r[T]}else s==="value"&&(_=r.find(V=>String(V.value)===u.payload.label));var{coordinate:$}=u.payload;if(_==null||u.payload.active===!1||$==null||o==null){a(nk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:F}=$,P=Math.min(z,o.x+o.width),M=Math.min(F,o.y+o.height),G={x:i==="horizontal"?_.coordinate:P,y:i==="horizontal"?M:_.coordinate},Q=nk({active:u.payload.active,coordinate:G,dataKey:u.payload.dataKey,index:String(_.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});a(Q)}}};return Rp.on(rk,c),()=>{Rp.off(rk,c)}},[l,a,t,e,s,r,i,o])}function _Pe(){var e=$t(v4),t=$t(w4),a=Xn();h.useEffect(()=>{if(e==null)return Fx;var s=(r,i,o)=>{t!==o&&e===r&&a(xPe(i))};return Rp.on(VU,s),()=>{Rp.off(VU,s)}},[a,t,e])}function APe(){var e=Xn();h.useEffect(()=>{e(hPe())},[e]),SPe(),_Pe()}function TPe(e,t,a,s,r,i){var o=$t(x=>MLe(x,e,t)),l=$t(w4),c=$t(v4),d=$t(FY),u=$t(gPe),f=u?.active,p=pj();h.useEffect(()=>{if(!f&&c!=null&&l!=null){var x=nk({active:i,coordinate:a,dataKey:o,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});Rp.emit(rk,c,x,l)}},[f,a,o,r,s,l,c,d,i,p])}function KU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function XU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KU(Object(a),!0).forEach(function(s){EPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function EPe(e,t,a){return(t=kPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kPe(e){var t=LPe(e,"string");return typeof t=="symbol"?t:t+""}function LPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PPe(e){return e.dataKey}function DPe(e,t){return h.isValidElement(e)?h.cloneElement(e,t):typeof e=="function"?h.createElement(e,t):h.createElement(HAe,t)}var ZU=[],OPe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function w2(e){var t,a,s=Qa(e,OPe),{active:r,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:f,payloadUniqBy:p,position:x,reverseDirection:v,useTranslate3d:N,wrapperStyle:b,cursor:C,shared:w,trigger:S,defaultIndex:E,portal:k,axisId:_}=s,A=Xn(),T=typeof E=="number"?String(E):E;h.useEffect(()=>{A(Eke({shared:w,trigger:S,axisId:_,active:r,defaultIndex:T}))},[A,w,S,_,r,T]);var $=pj(),z=fY(),F=jke(w),{activeIndex:P,isActive:M}=(t=$t(Oe=>RLe(Oe,F,S,T)))!==null&&t!==void 0?t:{},G=$t(Oe=>$Le(Oe,F,S,T)),Q=$t(Oe=>FK(Oe,F,S,T)),V=$t(Oe=>ILe(Oe,F,S,T)),X=G,q=lPe(),ne=(a=r??M)!==null&&a!==void 0?a:!1,[oe,K]=gQ([X,ne]),R=F==="axis"?Q:void 0;TPe(F,S,V,R,P,ne);var ye=k??q;if(ye==null||$==null||F==null)return null;var pe=X??ZU;ne||(pe=ZU),d&&pe.length&&(pe=uQ(pe.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||s.includeHidden)),p,PPe));var Ne=pe.length>0,Se=h.createElement(KAe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:u,active:ne,coordinate:V,hasPayload:Ne,offset:f,position:x,reverseDirection:v,useTranslate3d:N,viewBox:$,wrapperStyle:b,lastBoundingBox:oe,innerRef:K,hasPortalFromProps:!!k},DPe(c,XU(XU({},s),{},{payload:pe,label:R,active:ne,activeIndex:P,coordinate:V,accessibilityLayer:z})));return h.createElement(h.Fragment,null,Hi.createPortal(Se,ye),ne&&h.createElement(oPe,{cursor:C,tooltipEventType:F,coordinate:V,payload:pe,index:P}))}var Oj=e=>null;Oj.displayName="Cell";function MPe(e,t,a){return(t=IPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function IPe(e){var t=$Pe(e,"string");return typeof t=="symbol"?t:t+""}function $Pe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class RPe{constructor(t){MPe(this,"cache",new Map),this.maxSize=t}get(t){var a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function JU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function zPe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?JU(Object(a),!0).forEach(function(s){UPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):JU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function UPe(e,t,a){return(t=FPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function FPe(e){var t=BPe(e,"string");return typeof t=="symbol"?t:t+""}function BPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HPe={cacheSize:2e3,enableCache:!0},qK=zPe({},HPe),eF=new RPe(qK.cacheSize),GPe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tF="recharts_measurement_span";function WPe(e,t){var a=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l)}var nF=(e,t)=>{try{var a=document.getElementById(tF);a||(a=document.createElement("span"),a.setAttribute("id",tF),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,GPe,t),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},Jg=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||wj.isSsr)return{width:0,height:0};if(!qK.enableCache)return nF(t,a);var s=WPe(t,a),r=eF.get(s);if(r)return r;var i=nF(t,a);return eF.set(s,i),i},VK;function qPe(e,t,a){return(t=VPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function VPe(e){var t=QPe(e,"string");return typeof t=="symbol"?t:t+""}function QPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YPe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,KPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,XPe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ZPe=["cm","mm","pt","pc","in","Q","px"];function JPe(e){return ZPe.includes(e)}var rf="NaN";function e4e(e,t){return e*XPe[t]}class _s{static parse(t){var a,[,s,r]=(a=KPe.exec(t))!==null&&a!==void 0?a:[];return s==null?_s.NaN:new _s(parseFloat(s),r??"")}constructor(t,a){this.num=t,this.unit=a,this.num=t,this.unit=a,Yi(t)&&(this.unit=""),a!==""&&!YPe.test(a)&&(this.num=NaN,this.unit=""),JPe(a)&&(this.num=e4e(t,a),this.unit="px")}add(t){return this.unit!==t.unit?new _s(NaN,""):new _s(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new _s(NaN,""):new _s(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new _s(NaN,""):new _s(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new _s(NaN,""):new _s(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Yi(this.num)}}VK=_s;qPe(_s,"NaN",new VK(NaN,""));function QK(e){if(e==null||e.includes(rf))return rf;for(var t=e;t.includes("*")||t.includes("/");){var a,[,s,r,i]=(a=aF.exec(t))!==null&&a!==void 0?a:[],o=_s.parse(s??""),l=_s.parse(i??""),c=r==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return rf;t=t.replace(aF,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,f,p]=(d=sF.exec(t))!==null&&d!==void 0?d:[],x=_s.parse(u??""),v=_s.parse(p??""),N=f==="+"?x.add(v):x.subtract(v);if(N.isNaN())return rf;t=t.replace(sF,N.toString())}return t}var rF=/\(([^()]*)\)/;function t4e(e){for(var t=e,a;(a=rF.exec(t))!=null;){var[,s]=a;t=t.replace(rF,QK(s))}return t}function n4e(e){var t=e.replace(/\s+/g,"");return t=t4e(t),t=QK(t),t}function a4e(e){try{return n4e(e)}catch{return rf}}function N2(e){var t=a4e(e.slice(5,-1));return t===rf?"":t}var s4e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],r4e=["dx","dy","angle","className","breakAll"];function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ik.apply(null,arguments)}function iF(e,t){if(e==null)return{};var a,s,r=i4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function i4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var YK=/[ \f\n\r\t\v\u2028\u2029]+/,KK=e=>{var{children:t,breakAll:a,style:s}=e;try{var r=[];ua(t)||(a?r=t.toString().split(""):r=t.toString().split(YK));var i=r.map(l=>({word:l,width:Jg(l,s).width})),o=a?0:Jg("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function o4e(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var XK=(e,t,a,s)=>e.reduce((r,i)=>{var{word:o,width:l}=i,c=r[r.length-1];if(c&&l!=null&&(t==null||s||c.width+l+a<Number(t)))c.words.push(o),c.width+=l+a;else{var d={words:[o],width:l};r.push(d)}return r},[]),ZK=e=>e.reduce((t,a)=>t.width>a.width?t:a),l4e="",oF=(e,t,a,s,r,i,o,l)=>{var c=e.slice(0,t),d=KK({breakAll:a,style:s,children:c+l4e});if(!d)return[!1,[]];var u=XK(d.wordsWithComputedWidth,i,o,l),f=u.length>r||ZK(u).width>Number(i);return[f,u]},c4e=(e,t,a,s,r)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=Mt(i),u=String(o),f=XK(t,s,a,r);if(!d||r)return f;var p=f.length>i||ZK(f).width>Number(s);if(!p)return f;for(var x=0,v=u.length-1,N=0,b;x<=v&&N<=u.length-1;){var C=Math.floor((x+v)/2),w=C-1,[S,E]=oF(u,w,c,l,i,s,a,r),[k]=oF(u,C,c,l,i,s,a,r);if(!S&&!k&&(x=C+1),S&&k&&(v=C-1),!S&&k){b=E;break}N++}return b||f},lF=e=>{var t=ua(e)?[]:e.toString().split(YK);return[{words:t,width:void 0}]},d4e=e=>{var{width:t,scaleToFit:a,children:s,style:r,breakAll:i,maxLines:o}=e;if((t||a)&&!wj.isSsr){var l,c,d=KK({breakAll:i,children:s,style:r});if(d){var{wordsWithComputedWidth:u,spaceWidth:f}=d;l=u,c=f}else return lF(s);return c4e({breakAll:i,children:s,maxLines:o,style:r},l,c,t,!!a)}return lF(s)},JK="#808080",u4e={angle:0,breakAll:!1,capHeight:"0.71em",fill:JK,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Mj=h.forwardRef((e,t)=>{var a=Qa(e,u4e),{x:s,y:r,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=a,f=iF(a,s4e),p=h.useMemo(()=>d4e({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:x,dy:v,angle:N,className:b,breakAll:C}=f,w=iF(f,r4e);if(!Uo(s)||!Uo(r)||p.length===0)return null;var S=Number(s)+(Mt(x)?x:0),E=Number(r)+(Mt(v)?v:0);if(!pa(S)||!pa(E))return null;var k;switch(u){case"start":k=N2("calc(".concat(o,")"));break;case"middle":k=N2("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:k=N2("calc(".concat(p.length-1," * -").concat(i,")"));break}var _=[];if(c){var A=p[0].width,{width:T}=f;_.push("scale(".concat(Mt(T)&&Mt(A)?T/A:1,")"))}return N&&_.push("rotate(".concat(N,", ").concat(S,", ").concat(E,")")),_.length&&(w.transform=_.join(" ")),h.createElement("text",ik({},Vs(w),{ref:t,x:S,y:E,className:Pt("recharts-text",b),textAnchor:d,fill:l.includes("url")?JK:l}),p.map(($,z)=>{var F=$.words.join(C?"":" ");return h.createElement("tspan",{x:S,dy:z===0?k:i,key:"".concat(F,"-").concat(z)},F)}))});Mj.displayName="Text";var m4e=["labelRef"],f4e=["content"];function cF(e,t){if(e==null)return{};var a,s,r=h4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function h4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function dF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Pa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?dF(Object(a),!0).forEach(function(s){g4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function g4e(e,t,a){return(t=p4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p4e(e){var t=x4e(e,"string");return typeof t=="symbol"?t:t+""}function x4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Cl.apply(null,arguments)}var eX=h.createContext(null),y4e=e=>{var{x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o,children:l}=e,c=h.useMemo(()=>({x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o}),[t,a,s,r,i,o]);return h.createElement(eX.Provider,{value:c},l)},tX=()=>{var e=h.useContext(eX),t=pj();return e||eY(t)},b4e=h.createContext(null),v4e=()=>{var e=h.useContext(b4e),t=$t(qY);return e||t},w4e=e=>{var{value:t,formatter:a}=e,s=ua(e.children)?t:e.children;return typeof a=="function"?a(s):s},sD=e=>e!=null&&typeof e=="function",N4e=(e,t)=>{var a=ps(t-e),s=Math.min(Math.abs(t-e),360);return a*s},j4e=(e,t,a,s,r)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:f,endAngle:p,clockWise:x}=r,v=(d+u)/2,N=N4e(f,p),b=N>=0?1:-1,C,w;switch(t){case"insideStart":C=f+b*i,w=x;break;case"insideEnd":C=p-b*i,w=!x;break;case"end":C=p+b*i,w=x;break;default:throw new Error("Unsupported position ".concat(t))}w=N<=0?w:!w;var S=Ha(l,c,v,C),E=Ha(l,c,v,C+(w?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(E.x,",").concat(E.y),_=ua(e.id)?Ep("recharts-radial-line-"):e.id;return h.createElement("text",Cl({},s,{dominantBaseline:"central",className:Pt("recharts-radial-bar-label",o)}),h.createElement("defs",null,h.createElement("path",{id:_,d:k})),h.createElement("textPath",{xlinkHref:"#".concat(_)},a))},C4e=(e,t,a)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(a==="outside"){var{x:u,y:f}=Ha(s,r,o+t,d);return{x:u,y:f,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+o)/2,{x,y:v}=Ha(s,r,p,d);return{x,y:v,textAnchor:"middle",verticalAnchor:"middle"}},ok=e=>"cx"in e&&Mt(e.cx),S4e=(e,t)=>{var{parentViewBox:a,offset:s,position:r}=e,i;a!=null&&!ok(a)&&(i=a);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:u}=t,f=o,p=o+(c-d)/2,x=(f+p)/2,v=(c+d)/2,N=f+c/2,b=u>=0?1:-1,C=b*s,w=b>0?"end":"start",S=b>0?"start":"end",E=c>=0?1:-1,k=E*s,_=E>0?"end":"start",A=E>0?"start":"end";if(r==="top"){var T={x:f+c/2,y:l-C,textAnchor:"middle",verticalAnchor:w};return Pa(Pa({},T),i?{height:Math.max(l-i.y,0),width:c}:{})}if(r==="bottom"){var $={x:p+d/2,y:l+u+C,textAnchor:"middle",verticalAnchor:S};return Pa(Pa({},$),i?{height:Math.max(i.y+i.height-(l+u),0),width:d}:{})}if(r==="left"){var z={x:x-k,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return Pa(Pa({},z),i?{width:Math.max(z.x-i.x,0),height:u}:{})}if(r==="right"){var F={x:x+v+k,y:l+u/2,textAnchor:A,verticalAnchor:"middle"};return Pa(Pa({},F),i?{width:Math.max(i.x+i.width-F.x,0),height:u}:{})}var P=i?{width:v,height:u}:{};return r==="insideLeft"?Pa({x:x+k,y:l+u/2,textAnchor:A,verticalAnchor:"middle"},P):r==="insideRight"?Pa({x:x+v-k,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},P):r==="insideTop"?Pa({x:f+c/2,y:l+C,textAnchor:"middle",verticalAnchor:S},P):r==="insideBottom"?Pa({x:p+d/2,y:l+u-C,textAnchor:"middle",verticalAnchor:w},P):r==="insideTopLeft"?Pa({x:f+k,y:l+C,textAnchor:A,verticalAnchor:S},P):r==="insideTopRight"?Pa({x:f+c-k,y:l+C,textAnchor:_,verticalAnchor:S},P):r==="insideBottomLeft"?Pa({x:p+k,y:l+u-C,textAnchor:A,verticalAnchor:w},P):r==="insideBottomRight"?Pa({x:p+d-k,y:l+u-C,textAnchor:_,verticalAnchor:w},P):r&&typeof r=="object"&&(Mt(r.x)||Hl(r.x))&&(Mt(r.y)||Hl(r.y))?Pa({x:o+$s(r.x,v),y:l+$s(r.y,u),textAnchor:"end",verticalAnchor:"end"},P):Pa({x:N,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},_4e={angle:0,offset:5,zIndex:Ga.label,position:"middle",textBreakAll:!1};function Gc(e){var t=Qa(e,_4e),{viewBox:a,position:s,value:r,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=v4e(),f=tX(),p=s==="center"?f:u??f,x,v,N;if(a==null?x=p:ok(a)?x=a:x=eY(a),!x||ua(r)&&ua(i)&&!h.isValidElement(o)&&typeof o!="function")return null;var b=Pa(Pa({},t),{},{viewBox:x});if(h.isValidElement(o)){var{labelRef:C}=b,w=cF(b,m4e);return h.cloneElement(o,w)}if(typeof o=="function"){var{content:S}=b,E=cF(b,f4e);if(v=h.createElement(o,E),h.isValidElement(v))return v}else v=w4e(t);var k=Vs(t);if(ok(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return j4e(t,s,v,k,x);N=C4e(x,t.offset,t.position)}else N=S4e(t,x);return h.createElement(wr,{zIndex:t.zIndex},h.createElement(Mj,Cl({ref:d,className:Pt("recharts-label",l)},k,N,{textAnchor:o4e(k.textAnchor)?k.textAnchor:N.textAnchor,breakAll:c}),v))}Gc.displayName="Label";var A4e=(e,t,a)=>{if(!e)return null;var s={viewBox:t,labelRef:a};return e===!0?h.createElement(Gc,Cl({key:"label-implicit"},s)):Uo(e)?h.createElement(Gc,Cl({key:"label-implicit",value:e},s)):h.isValidElement(e)?e.type===Gc?h.cloneElement(e,Pa({key:"label-implicit"},s)):h.createElement(Gc,Cl({key:"label-implicit",content:e},s)):sD(e)?h.createElement(Gc,Cl({key:"label-implicit",content:e},s)):e&&typeof e=="object"?h.createElement(Gc,Cl({},e,{key:"label-implicit"},s)):null};function T4e(e){var{label:t,labelRef:a}=e,s=tX();return A4e(t,s,a)||null}var j2={},C2={},uF;function E4e(){return uF||(uF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a[a.length-1]}e.last=t})(C2)),C2}var S2={},mF;function k4e(){return mF||(mF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=t})(S2)),S2}var fF;function L4e(){return fF||(fF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E4e(),a=k4e(),s=JP();function r(i){if(s.isArrayLike(i))return t.last(a.toArray(i))}e.last=r})(j2)),j2}var _2,hF;function P4e(){return hF||(hF=1,_2=L4e().last),_2}var D4e=P4e();const O4e=Xi(D4e);var M4e=["valueAccessor"],I4e=["dataKey","clockWise","id","textBreakAll","zIndex"];function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},iw.apply(null,arguments)}function gF(e,t){if(e==null)return{};var a,s,r=$4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var R4e=e=>Array.isArray(e.value)?O4e(e.value):e.value,nX=h.createContext(void 0),aX=nX.Provider,sX=h.createContext(void 0),z4e=sX.Provider;function U4e(){return h.useContext(nX)}function F4e(){return h.useContext(sX)}function Xb(e){var{valueAccessor:t=R4e}=e,a=gF(e,M4e),{dataKey:s,clockWise:r,id:i,textBreakAll:o,zIndex:l}=a,c=gF(a,I4e),d=U4e(),u=F4e(),f=d||u;return!f||!f.length?null:h.createElement(wr,{zIndex:l??Ga.label},h.createElement(xs,{className:"recharts-label-list"},f.map((p,x)=>{var v,N=ua(s)?t(p,x):Hn(p&&p.payload,s),b=ua(i)?{}:{id:"".concat(i,"-").concat(x)};return h.createElement(Gc,iw({key:"label-".concat(x)},Vs(p),c,b,{fill:(v=a.fill)!==null&&v!==void 0?v:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:o,viewBox:p.viewBox,index:x,zIndex:0}))})))}Xb.displayName="LabelList";function rD(e){var{label:t}=e;return t?t===!0?h.createElement(Xb,{key:"labelList-implicit"}):h.isValidElement(t)||sD(t)?h.createElement(Xb,{key:"labelList-implicit",content:t}):typeof t=="object"?h.createElement(Xb,iw({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lk.apply(null,arguments)}var rX=e=>{var{cx:t,cy:a,r:s,className:r}=e,i=Pt("recharts-dot",r);return Mt(t)&&Mt(a)&&Mt(s)?h.createElement("circle",lk({},Fr(e),ZP(e),{className:i,cx:t,cy:a,r:s})):null},iX=e=>e.graphicalItems.polarItems,B4e=rt([fa,Xx],A4),Ij=rt([iX,ya,B4e],T4),H4e=rt([Ij],E4),$j=rt([H4e,Nj],k4),G4e=rt([$j,ya,Ij],P4);rt([$j,ya,Ij],(e,t,a)=>a.length>0?e.flatMap(s=>a.flatMap(r=>{var i,o=Hn(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Hn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var pF=()=>{},W4e=rt([$j,ya,Ij,kj,fa],I4),q4e=rt([ya,O4,M4,pF,W4e,pF,wn,fa],$4),oX=rt([ya,wn,$j,G4e,Kx,fa,q4e],R4),V4e=rt([oX,ya,lh],F4);rt([ya,oX,V4e,fa],H4);var Q4e={radiusAxis:{},angleAxis:{}},lX=vr({name:"polarAxis",initialState:Q4e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Jqe,removeRadiusAxis:eVe,addAngleAxis:tVe,removeAngleAxis:nVe}=lX.actions,Y4e=lX.reducer;function xF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function yF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?xF(Object(a),!0).forEach(function(s){K4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function K4e(e,t,a){return(t=X4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function X4e(e){var t=Z4e(e,"string");return typeof t=="symbol"?t:t+""}function Z4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J4e=(e,t)=>t,iD=rt([iX,J4e],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),eDe=[],oD=(e,t,a)=>a?.length===0?eDe:a,cX=rt([Nj,iD,oD],(e,t,a)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&a!=null&&(r=a.map(i=>yF(yF({},t.presentationProps),i.props))),r!=null)return r}}),tDe=rt([cX,iD,oD],(e,t,a)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,o=Hn(s,t.nameKey,t.name),l;return a!=null&&(i=a[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=a[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?l=s.fill:l=t.fill,{value:nh(o,t.dataKey),color:l,payload:s,type:t.legendType}})}),nDe=rt([cX,iD,oD,os],(e,t,a,s)=>{if(!(t==null||e==null))return tOe({offset:s,pieSettings:t,displayedData:e,cells:a})}),bF=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",vF=null,A2=null,dX=e=>{if(e===vF&&Array.isArray(A2))return A2;var t=[];return h.Children.forEach(e,a=>{ua(a)||(Zk.isFragment(a)?t=t.concat(dX(a.props.children)):t.push(a))}),A2=t,vF=e,t};function lD(e,t){var a=[],s=[];return Array.isArray(t)?s=t.map(r=>bF(r)):s=[bF(t)],dX(e).forEach(r=>{var i=Ou(r,"type.displayName")||Ou(r,"type.name");i&&s.indexOf(i)!==-1&&a.push(r)}),a}var uX=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,T2={},wF;function aDe(){return wF||(wF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const r=a[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${r}]`}let s=a;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(a)===s}e.isPlainObject=t})(T2)),T2}var E2,NF;function sDe(){return NF||(NF=1,E2=aDe().isPlainObject),E2}var rDe=sDe();const iDe=Xi(rDe);var jF,CF,SF,_F,AF;function TF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function EF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TF(Object(a),!0).forEach(function(s){oDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oDe(e,t,a){return(t=lDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lDe(e){var t=cDe(e,"string");return typeof t=="symbol"?t:t+""}function cDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ow(){return ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ow.apply(null,arguments)}function yg(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var kF=(e,t,a,s,r)=>{var i=a-s,o;return o=ja(jF||(jF=yg(["M ",",",""])),e,t),o+=ja(CF||(CF=yg(["L ",",",""])),e+a,t),o+=ja(SF||(SF=yg(["L ",",",""])),e+a-i/2,t+r),o+=ja(_F||(_F=yg(["L ",",",""])),e+a-i/2-s,t+r),o+=ja(AF||(AF=yg(["L ",","," Z"])),e,t),o},dDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uDe=e=>{var t=Qa(e,dDe),{x:a,y:s,upperWidth:r,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:f}=t,p=h.useRef(null),[x,v]=h.useState(-1),N=h.useRef(r),b=h.useRef(i),C=h.useRef(o),w=h.useRef(a),S=h.useRef(s),E=Yx(e,"trapezoid-");if(h.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var G=p.current.getTotalLength();G&&v(G)}catch{}},[]),a!==+a||s!==+s||r!==+r||i!==+i||o!==+o||r===0&&i===0||o===0)return null;var k=Pt("recharts-trapezoid",l);if(!f)return h.createElement("g",null,h.createElement("path",ow({},Vs(t),{className:k,d:kF(a,s,r,i,o)})));var _=N.current,A=b.current,T=C.current,$=w.current,z=S.current,F="0px ".concat(x===-1?1:x,"px"),P="".concat(x,"px 0px"),M=hY(["strokeDasharray"],d,c);return h.createElement(Qx,{animationId:E,key:E,canBegin:x>0,duration:d,easing:c,isActive:f,begin:u},G=>{var Q=la(_,r,G),V=la(A,i,G),X=la(T,o,G),q=la($,a,G),ne=la(z,s,G);p.current&&(N.current=Q,b.current=V,C.current=X,w.current=q,S.current=ne);var oe=G>0?{transition:M,strokeDasharray:P}:{strokeDasharray:F};return h.createElement("path",ow({},Vs(t),{className:k,d:kF(q,ne,Q,V,X),ref:p,style:EF(EF({},oe),t.style)}))})},mDe=["option","shapeType","activeClassName"];function fDe(e,t){if(e==null)return{};var a,s,r=hDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function LF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function lw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?LF(Object(a),!0).forEach(function(s){gDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):LF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function gDe(e,t,a){return(t=pDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pDe(e){var t=xDe(e,"string");return typeof t=="symbol"?t:t+""}function xDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yDe(e,t){return lw(lw({},t),e)}function bDe(e,t){return e==="symbols"}function PF(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return h.createElement(yY,a);case"trapezoid":return h.createElement(uDe,a);case"sector":return h.createElement(NY,a);case"symbols":if(bDe(t))return h.createElement(XP,a);break;case"curve":return h.createElement(g4,a);default:return null}}function vDe(e){return h.isValidElement(e)?e.props:e}function cD(e){var{option:t,shapeType:a,activeClassName:s="recharts-active-shape"}=e,r=fDe(e,mDe),i;if(h.isValidElement(t))i=h.cloneElement(t,lw(lw({},r),vDe(t)));else if(typeof t=="function")i=t(r,r.index);else if(iDe(t)&&typeof t!="boolean"){var o=yDe(t,r);i=h.createElement(PF,{shapeType:a,elementProps:o})}else{var l=r;i=h.createElement(PF,{shapeType:a,elementProps:l})}return r.isActive?h.createElement(xs,{className:s},i):i}var dD=(e,t,a)=>{var s=Xn();return(r,i)=>o=>{e?.(r,i,o),s(jK({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}},uD=e=>{var t=Xn();return(a,s)=>r=>{e?.(a,s,r),t(kke())}},mD=(e,t,a)=>{var s=Xn();return(r,i)=>o=>{e?.(r,i,o),s(Lke({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}};function fD(e){var{tooltipEntrySettings:t}=e,a=Xn(),s=Fs(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(_ke(t)):r.current!==t&&a(Ake({prev:r.current,next:t})),r.current=t)},[t,a,s]),h.useLayoutEffect(()=>()=>{r.current&&(a(Tke(r.current)),r.current=null)},[a]),null}function mX(e){var{legendPayload:t}=e,a=Xn(),s=Fs(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(cY(t)):r.current!==t&&a(dY({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(uY(r.current)),r.current=null)},[a]),null}function wDe(e){var{legendPayload:t}=e,a=Xn(),s=$t(wn),r=h.useRef(null);return h.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?a(cY(t)):r.current!==t&&a(dY({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(uY(r.current)),r.current=null)},[a]),null}var k2,NDe=()=>{var[e]=h.useState(()=>Ep("uid-"));return e},jDe=(k2=Nu.useId)!==null&&k2!==void 0?k2:NDe;function CDe(e,t){var a=jDe();return t||(e?"".concat(e,"-").concat(a):a)}var SDe=h.createContext(void 0),hD=e=>{var{id:t,type:a,children:s}=e,r=CDe("recharts-".concat(a),t);return h.createElement(SDe.Provider,{value:r},s(r))},_De={cartesianItems:[],polarItems:[]},fX=vr({name:"graphicalItems",initialState:_De,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:oa()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:s}=t.payload,r=Wi(e).cartesianItems.indexOf(a);r>-1&&(e.cartesianItems[r]=s)},prepare:oa()},removeCartesianGraphicalItem:{reducer(e,t){var a=Wi(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:oa()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:oa()},removePolarGraphicalItem:{reducer(e,t){var a=Wi(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:oa()}}}),{addCartesianGraphicalItem:ADe,replaceCartesianGraphicalItem:TDe,removeCartesianGraphicalItem:EDe,addPolarGraphicalItem:kDe,removePolarGraphicalItem:LDe}=fX.actions,PDe=fX.reducer,DDe=e=>{var t=Xn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(ADe(e)):a.current!==e&&t(TDe({prev:a.current,next:e})),a.current=e},[t,e]),h.useLayoutEffect(()=>()=>{a.current&&(t(EDe(a.current)),a.current=null)},[t]),null},hX=h.memo(DDe);function ODe(e){var t=Xn();return h.useLayoutEffect(()=>(t(kDe(e)),()=>{t(LDe(e))}),[t,e]),null}var MDe=["key"],IDe=["onMouseEnter","onClick","onMouseLeave"],$De=["id"],RDe=["id"];function DF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ca(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?DF(Object(a),!0).forEach(function(s){zDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function zDe(e,t,a){return(t=UDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function UDe(e){var t=FDe(e,"string");return typeof t=="symbol"?t:t+""}function FDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},fd.apply(null,arguments)}function Rj(e,t){if(e==null)return{};var a,s,r=BDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function BDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function HDe(e){var t=h.useMemo(()=>lD(e.children,Oj),[e.children]),a=$t(s=>tDe(s,e.id,t));return a==null?null:h.createElement(wDe,{legendPayload:a})}var GDe=h.memo(e=>{var{dataKey:t,nameKey:a,sectors:s,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:a,name:nh(l,t),hide:c,type:d,color:o,unit:"",graphicalItemId:u}};return h.createElement(fD,{tooltipEntrySettings:f})}),WDe=(e,t)=>e>t?"start":e<t?"end":"middle",qDe=(e,t,a)=>$s(typeof t=="function"?t(e):t,a,a*.8),VDe=(e,t,a)=>{var{top:s,left:r,width:i,height:o}=t,l=bY(i,o),c=r+$s(e.cx,i,i/2),d=s+$s(e.cy,o,o/2),u=$s(e.innerRadius,l,0),f=qDe(a,e.outerRadius,l),p=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:f,maxRadius:p}},QDe=(e,t)=>{var a=ps(t-e),s=Math.min(Math.abs(t-e),360);return a*s};function YDe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var KDe=(e,t)=>{if(h.isValidElement(e))return h.cloneElement(e,t);if(typeof e=="function")return e(t);var a=Pt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=Rj(t,MDe);return h.createElement(g4,fd({},r,{type:"linear",className:a}))},XDe=(e,t,a)=>{if(h.isValidElement(e))return h.cloneElement(e,t);var s=a;if(typeof e=="function"&&(s=e(t),h.isValidElement(s)))return s;var r=Pt("recharts-pie-label-text",YDe(e));return h.createElement(Mj,fd({},t,{alignmentBaseline:"middle",className:r}),s)};function ZDe(e){var{sectors:t,props:a,showLabels:s}=e,{label:r,labelLine:i,dataKey:o}=a;if(!s||!r||!t)return null;var l=Fr(a),c=Du(r),d=Du(i),u=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,f=t.map((p,x)=>{var v=(p.startAngle+p.endAngle)/2,N=Ha(p.cx,p.cy,p.outerRadius+u,v),b=Ca(Ca(Ca(Ca({},l),p),{},{stroke:"none"},c),{},{index:x,textAnchor:WDe(N.x,p.cx)},N),C=Ca(Ca(Ca(Ca({},l),p),{},{fill:"none",stroke:p.fill},d),{},{index:x,points:[Ha(p.cx,p.cy,p.outerRadius,v),N],key:"line"});return h.createElement(wr,{zIndex:Ga.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},h.createElement(xs,null,i&&KDe(i,C),XDe(r,b,Hn(p,o))))});return h.createElement(xs,{className:"recharts-pie-labels"},f)}function JDe(e){var{sectors:t,props:a,showLabels:s}=e,{label:r}=a;return typeof r=="object"&&r!=null&&"position"in r?h.createElement(rD,{label:r}):h.createElement(ZDe,{sectors:t,props:a,showLabels:s})}function eOe(e){var{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:r,shape:i,id:o}=e,l=$t(md),c=$t(Z4),d=$t(pLe),{onMouseEnter:u,onClick:f,onMouseLeave:p}=r,x=Rj(r,IDe),v=dD(u,r.dataKey,o),N=uD(p),b=mD(f,r.dataKey,o);return t==null||t.length===0?null:h.createElement(h.Fragment,null,t.map((C,w)=>{if(C?.startAngle===0&&C?.endAngle===0&&t.length!==1)return null;var S=d==null||d===o,E=String(w)===l&&(c==null||r.dataKey===c)&&S,k=l?s:null,_=a&&E?a:k,A=Ca(Ca({},C),{},{stroke:C.stroke,tabIndex:-1,[YQ]:w,[KQ]:o});return h.createElement(xs,fd({key:"sector-".concat(C?.startAngle,"-").concat(C?.endAngle,"-").concat(C.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},Bx(x,C,w),{onMouseEnter:v(C,w),onMouseLeave:N(C,w),onClick:b(C,w)}),h.createElement(cD,fd({option:i??_,index:w,shapeType:"sector",isActive:E},A)))}))}function tOe(e){var t,{pieSettings:a,displayedData:s,cells:r,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:f}=a,p=Math.abs(a.minAngle),x=QDe(l,c),v=Math.abs(x),N=s.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,b=s.filter(_=>Hn(_,d,0)!==0).length,C=(v>=360?b:b-1)*N,w=v-b*p-C,S=s.reduce((_,A)=>{var T=Hn(A,d,0);return _+(Mt(T)?T:0)},0),E;if(S>0){var k;E=s.map((_,A)=>{var T=Hn(_,d,0),$=Hn(_,u,A),z=VDe(a,i,_),F=(Mt(T)?T:0)/S,P,M=Ca(Ca({},_),r&&r[A]&&r[A].props);A?P=k.endAngle+ps(x)*N*(T!==0?1:0):P=l;var G=P+ps(x)*((T!==0?p:0)+F*w),Q=(P+G)/2,V=(z.innerRadius+z.outerRadius)/2,X=[{name:$,value:T,payload:M,dataKey:d,type:f,graphicalItemId:a.id}],q=Ha(z.cx,z.cy,V,Q);return k=Ca(Ca(Ca(Ca({},a.presentationProps),{},{percent:F,cornerRadius:typeof o=="string"?parseFloat(o):o,name:$,tooltipPayload:X,midAngle:Q,middleRadius:V,tooltipPosition:q},M),z),{},{value:T,dataKey:d,startAngle:P,endAngle:G,payload:M,paddingAngle:ps(x)*N}),k})}return E}function nOe(e){var{showLabels:t,sectors:a,children:s}=e,r=h.useMemo(()=>!t||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,t]);return h.createElement(z4e,{value:t?r:void 0},s)}function aOe(e){var{props:t,previousSectorsRef:a,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=t,x=Yx(t,"recharts-pie-"),v=a.current,[N,b]=h.useState(!1),C=h.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),w=h.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return h.createElement(nOe,{showLabels:!N,sectors:r},h.createElement(Qx,{animationId:x,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:w,onAnimationEnd:C,key:x},S=>{var E=[],k=r&&r[0],_=k?.startAngle;return r?.forEach((A,T)=>{var $=v&&v[T],z=T>0?Ou(A,"paddingAngle",0):0;if($){var F=la($.endAngle-$.startAngle,A.endAngle-A.startAngle,S),P=Ca(Ca({},A),{},{startAngle:_+z,endAngle:_+F+z});E.push(P),_=P.endAngle}else{var{endAngle:M,startAngle:G}=A,Q=la(0,M-G,S),V=Ca(Ca({},A),{},{startAngle:_+z,endAngle:_+Q+z});E.push(V),_=V.endAngle}}),a.current=E,h.createElement(xs,null,h.createElement(eOe,{sectors:E,activeShape:d,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:s}))}),h.createElement(JDe,{showLabels:!N,sectors:r,props:t}),t.children)}var sOe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ga.area};function rOe(e){var{id:t}=e,a=Rj(e,$De),{hide:s,className:r,rootTabIndex:i}=e,o=h.useMemo(()=>lD(e.children,Oj),[e.children]),l=$t(u=>nDe(u,t,o)),c=h.useRef(null),d=Pt("recharts-pie",r);return s||l==null?(c.current=null,h.createElement(xs,{tabIndex:i,className:d})):h.createElement(wr,{zIndex:e.zIndex},h.createElement(GDe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),h.createElement(xs,{tabIndex:i,className:d},h.createElement(aOe,{props:Ca(Ca({},a),{},{sectors:l}),previousSectorsRef:c,id:t})))}function gX(e){var t=Qa(e,sOe),{id:a}=t,s=Rj(t,RDe),r=Fr(s);return h.createElement(hD,{id:a,type:"pie"},i=>h.createElement(h.Fragment,null,h.createElement(ODe,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),h.createElement(HDe,fd({},s,{id:i})),h.createElement(rOe,fd({},s,{id:i}))))}gX.displayName="Pie";var iOe=["points"];function OF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function L2(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?OF(Object(a),!0).forEach(function(s){oOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oOe(e,t,a){return(t=lOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lOe(e){var t=cOe(e,"string");return typeof t=="symbol"?t:t+""}function cOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},cw.apply(null,arguments)}function dOe(e,t){if(e==null)return{};var a,s,r=uOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function uOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function mOe(e){var{option:t,dotProps:a,className:s}=e;if(h.isValidElement(t))return h.cloneElement(t,a);if(typeof t=="function")return t(a);var r=Pt(s,typeof t!="boolean"?t.className:""),i=a??{},{points:o}=i,l=dOe(i,iOe);return h.createElement(rX,cw({},l,{className:r}))}function fOe(e,t){return e==null?!1:t?!0:e.length===1}function hOe(e){var{points:t,dot:a,className:s,dotClassName:r,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:d=Ga.scatter}=e;if(!fOe(t,a))return null;var u=uX(a),f=tSe(a),p=t.map((v,N)=>{var b,C,w=L2(L2(L2({r:3},o),f),{},{index:N,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(C=v.y)!==null&&C!==void 0?C:void 0,dataKey:i,value:v.value,payload:v.payload,points:t});return h.createElement(mOe,{key:"dot-".concat(N),option:a,dotProps:w,className:r})}),x={};return l&&c!=null&&(x.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),h.createElement(wr,{zIndex:d},h.createElement(xs,cw({className:s},x),p))}function MF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function IF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?MF(Object(a),!0).forEach(function(s){gOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):MF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function gOe(e,t,a){return(t=pOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pOe(e){var t=xOe(e,"string");return typeof t=="symbol"?t:t+""}function xOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pX=0,yOe={xAxis:{},yAxis:{},zAxis:{}},xX=vr({name:"cartesianAxis",initialState:yOe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:oa()},replaceXAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.xAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:oa()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:oa()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:oa()},replaceYAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.yAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:oa()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:oa()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:oa()},replaceZAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.zAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:oa()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:oa()},updateYAxisWidth(e,t){var{id:a,width:s}=t.payload,r=e.yAxis[a];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var o=[...i,s].slice(-3);e.yAxis[a]=IF(IF({},e.yAxis[a]),{},{width:s,widthHistory:o})}}}}),{addXAxis:bOe,replaceXAxis:vOe,removeXAxis:wOe,addYAxis:NOe,replaceYAxis:jOe,removeYAxis:COe,addZAxis:aVe,replaceZAxis:sVe,removeZAxis:rVe,updateYAxisWidth:SOe}=xX.actions,_Oe=xX.reducer,AOe=rt([os],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),TOe=rt([AOe,nc,ac],(e,t,a)=>{if(!(!e||t==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),gD=()=>$t(TOe),EOe=()=>$t(wLe);function $F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function P2(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$F(Object(a),!0).forEach(function(s){kOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$F(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function kOe(e,t,a){return(t=LOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function LOe(e){var t=POe(e,"string");return typeof t=="symbol"?t:t+""}function POe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DOe=e=>{var{point:t,childIndex:a,mainColor:s,activeDot:r,dataKey:i,clipPath:o}=e;if(r===!1||t.x==null||t.y==null)return null;var l={index:a,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=P2(P2(P2({},l),Du(r)),ZP(r)),d;return h.isValidElement(r)?d=h.cloneElement(r,c):typeof r=="function"?d=r(c):d=h.createElement(rX,c),h.createElement(xs,{className:"recharts-active-dot",clipPath:o},d)};function OOe(e){var{points:t,mainColor:a,activeDot:s,itemDataKey:r,clipPath:i,zIndex:o=Ga.activeDot}=e,l=$t(md),c=EOe();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return ua(d)?null:h.createElement(wr,{zIndex:o},h.createElement(DOe,{point:d,childIndex:Number(l),mainColor:a,dataKey:r,activeDot:s,clipPath:i}))}var RF=(e,t,a)=>{var s=a??e;if(!ua(s))return $s(s,t,0)},MOe=(e,t,a)=>{var s={},r=e.filter(Sj),i=e.filter(d=>d.stackId==null),o=r.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),s),l=Object.entries(o).map(d=>{var[u,f]=d,p=f.map(v=>v.dataKey),x=RF(t,a,f[0].barSize);return{stackId:u,dataKeys:p,barSize:x}}),c=i.map(d=>{var u=[d.dataKey].filter(p=>p!=null),f=RF(t,a,d.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...l,...c]};function zF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function eb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?zF(Object(a),!0).forEach(function(s){IOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function IOe(e,t,a){return(t=$Oe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $Oe(e){var t=ROe(e,"string");return typeof t=="symbol"?t:t+""}function ROe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zOe(e,t,a,s,r){var i=s.length;if(!(i<1)){var o=$s(e,a,0,!0),l,c=[];if(pa(s[0].barSize)){var d=!1,u=a/i,f=s.reduce((C,w)=>C+(w.barSize||0),0);f+=(i-1)*o,f>=a&&(f-=(i-1)*o,o=0),f>=a&&u>0&&(d=!0,u*=.9,f=i*u);var p=(a-f)/2>>0,x={offset:p-o,size:0};l=s.reduce((C,w)=>{var S,E={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+o,size:d?u:(S=w.barSize)!==null&&S!==void 0?S:0}},k=[...C,E];return x=k[k.length-1].position,k},c)}else{var v=$s(t,a,0,!0);a-2*v-(i-1)*o<=0&&(o=0);var N=(a-2*v-(i-1)*o)/i;N>1&&(N>>=0);var b=pa(r)?Math.min(N,r):N;l=s.reduce((C,w,S)=>[...C,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:v+(N+o)*S+(N-b)/2,size:b}}],c)}return l}}var UOe=(e,t,a,s,r,i,o)=>{var l=ua(o)?t:o,c=zOe(a,s,r!==i?r:i,e,l);return r!==i&&c!=null&&(c=c.map(d=>eb(eb({},d),{},{position:eb(eb({},d.position),{},{offset:d.position.offset-r/2})}))),c},FOe=(e,t)=>{var a=S4(t);if(!(!e||a==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(o=>o.key===a)}}}};function BOe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&pa(e.zIndex)?e.zIndex:t}var yX=e=>{var{chartData:t}=e,a=Xn(),s=Fs();return h.useEffect(()=>s?()=>{}:(a(QU(t)),()=>{a(QU(void 0))}),[t,a,s]),null},UF={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},bX=vr({name:"brush",initialState:UF,reducers:{setBrushSettings(e,t){return t.payload==null?UF:t.payload}}}),{setBrushSettings:iVe}=bX.actions,HOe=bX.reducer;function GOe(e,t,a){return(t=WOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function WOe(e){var t=qOe(e,"string");return typeof t=="symbol"?t:t+""}function qOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pD{static create(t){return new pD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:a,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(a){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var a=this.range(),s=a[0],r=a[a.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}GOe(pD,"EPS",1e-4);function VOe(e){return(e%180+180)%180}var QOe=function(t){var{width:a,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=VOe(r),o=i*Math.PI/180,l=Math.atan(s/a),c=o>l&&o<Math.PI-l?s/Math.sin(o):a/Math.cos(o);return Math.abs(c)},YOe={dots:[],areas:[],lines:[]},vX=vr({name:"referenceElements",initialState:YOe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=Wi(e).dots.findIndex(s=>s===t.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=Wi(e).areas.findIndex(s=>s===t.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=Wi(e).lines.findIndex(s=>s===t.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:oVe,removeDot:lVe,addArea:cVe,removeArea:dVe,addLine:uVe,removeLine:mVe}=vX.actions,KOe=vX.reducer,XOe=h.createContext(void 0),ZOe=e=>{var{children:t}=e,[a]=h.useState("".concat(Ep("recharts"),"-clip")),s=gD();if(s==null)return null;var{x:r,y:i,width:o,height:l}=s;return h.createElement(XOe.Provider,{value:a},h.createElement("defs",null,h.createElement("clipPath",{id:a},h.createElement("rect",{x:r,y:i,height:l,width:o}))),t)};function wX(e,t){if(t<1)return[];if(t===1)return e;for(var a=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&a.push(r)}return a}function JOe(e,t,a){var s={width:e.width+t.width,height:e.height+t.height};return QOe(s,a)}function e3e(e,t,a){var s=a==="width",{x:r,y:i,width:o,height:l}=e;return t===1?{start:s?r:i,end:s?r+o:i+l}:{start:s?r+o:i+l,end:s?r:i}}function zp(e,t,a,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=a();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function t3e(e,t){return wX(e,t+1)}function n3e(e,t,a,s,r){for(var i=(s||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,f=function(){var v=s?.[c];if(v===void 0)return{v:wX(s,d)};var N=c,b,C=()=>(b===void 0&&(b=a(v,N)),b),w=v.coordinate,S=c===0||zp(e,w,C,u,l);S||(c=0,u=o,d+=1),S&&(u=w+e*(C()/2+r),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function a3e(e,t,a,s,r){var i=(s||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,d=1;d<=o;d++){for(var u=(o-1)%d,f=l,p=!0,x=function(){var w=s[v],S=v,E,k=()=>(E===void 0&&(E=a(w,S)),E),_=w.coordinate,A=v===u||zp(e,_,k,f,c);if(!A)return p=!1,1;A&&(f=_+e*(k()/2+r))},v=u;v<o&&!x();v+=d);if(p){for(var N=[],b=u;b<o;b+=d)N.push(s[b]);return N}}return[]}function FF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ps(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?FF(Object(a),!0).forEach(function(s){s3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function s3e(e,t,a){return(t=r3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r3e(e){var t=i3e(e,"string");return typeof t=="symbol"?t:t+""}function i3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o3e(e,t,a,s,r){for(var i=(s||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(p){var x=i[p],v,N=()=>(v===void 0&&(v=a(x,p)),v);if(p===o-1){var b=e*(x.coordinate+e*N()/2-c);i[p]=x=Ps(Ps({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else i[p]=x=Ps(Ps({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var C=zp(e,x.tickCoord,N,l,c);C&&(c=x.tickCoord-e*(N()/2+r),i[p]=Ps(Ps({},x),{},{isShow:!0}))}},u=o-1;u>=0;u--)d(u);return i}function l3e(e,t,a,s,r,i){var o=(s||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=s[l-1],f=a(u,l-1),p=e*(u.coordinate+e*f/2-d);if(o[l-1]=u=Ps(Ps({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var x=zp(e,u.tickCoord,()=>f,c,d);x&&(d=u.tickCoord-e*(f/2+r),o[l-1]=Ps(Ps({},u),{},{isShow:!0}))}}for(var v=i?l-1:l,N=function(w){var S=o[w],E,k=()=>(E===void 0&&(E=a(S,w)),E);if(w===0){var _=e*(S.coordinate-e*k()/2-c);o[w]=S=Ps(Ps({},S),{},{tickCoord:_<0?S.coordinate-_*e:S.coordinate})}else o[w]=S=Ps(Ps({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var A=zp(e,S.tickCoord,k,c,d);A&&(c=S.tickCoord+e*(k()/2+r),o[w]=Ps(Ps({},S),{},{isShow:!0}))}},b=0;b<v;b++)N(b);return o}function xD(e,t,a){var{tick:s,ticks:r,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!r||!r.length||!s)return[];if(Mt(c)||wj.isSsr){var p;return(p=t3e(r,Mt(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],v=l==="top"||l==="bottom"?"width":"height",N=u&&v==="width"?Jg(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},b=(S,E)=>{var k=typeof d=="function"?d(S.value,E):S.value;return v==="width"?JOe(Jg(k,{fontSize:t,letterSpacing:a}),N,f):Jg(k,{fontSize:t,letterSpacing:a})[v]},C=r.length>=2?ps(r[1].coordinate-r[0].coordinate):1,w=e3e(i,C,v);return c==="equidistantPreserveStart"?n3e(C,w,b,r,o):c==="equidistantPreserveEnd"?a3e(C,w,b,r,o):(c==="preserveStart"||c==="preserveStartEnd"?x=l3e(C,w,b,r,o,c==="preserveStartEnd"):x=o3e(C,w,b,r,o),x.filter(S=>S.isShow))}var c3e=e=>{var{ticks:t,label:a,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=a?a.getBoundingClientRect().width:0,c=r+i,d=o+c+l+(a?s:0);return Math.round(d)}return 0},d3e=["axisLine","width","height","className","hide","ticks","axisType"];function u3e(e,t){if(e==null)return{};var a,s,r=m3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function m3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},zu.apply(null,arguments)}function BF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Fa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?BF(Object(a),!0).forEach(function(s){f3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function f3e(e,t,a){return(t=h3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h3e(e){var t=g3e(e,"string");return typeof t=="symbol"?t:t+""}function g3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ll={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ga.axis};function p3e(e){var{x:t,y:a,width:s,height:r,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=Fa(Fa(Fa({},c),Fr(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);d=Fa(Fa({},d),{},{x1:t,y1:a+u*r,x2:t+s,y2:a+u*r})}else{var f=+(i==="left"&&!o||i==="right"&&o);d=Fa(Fa({},d),{},{x1:t+f*s,y1:a,x2:t+f*s,y2:a+r})}return h.createElement("line",zu({},d,{className:Pt("recharts-cartesian-axis-line",Ou(l,"className"))}))}function x3e(e,t,a,s,r,i,o,l,c){var d,u,f,p,x,v,N=l?-1:1,b=e.tickSize||o,C=Mt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=u=e.coordinate,p=a+ +!l*r,f=p-N*b,v=f-N*c,x=C;break;case"left":f=p=e.coordinate,u=t+ +!l*s,d=u-N*b,x=d-N*c,v=C;break;case"right":f=p=e.coordinate,u=t+ +l*s,d=u+N*b,x=d+N*c,v=C;break;default:d=u=e.coordinate,p=a+ +l*r,f=p+N*b,v=f+N*c,x=C;break}return{line:{x1:d,y1:f,x2:u,y2:p},tick:{x,y:v}}}function y3e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function b3e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function v3e(e){var{option:t,tickProps:a,value:s}=e,r,i=Pt(a.className,"recharts-cartesian-axis-tick-value");if(h.isValidElement(t))r=h.cloneElement(t,Fa(Fa({},a),{},{className:i}));else if(typeof t=="function")r=t(Fa(Fa({},a),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Pt(o,t?.className)),r=h.createElement(Mj,zu({},a,{className:o}),s)}return r}var w3e=h.forwardRef((e,t)=>{var{ticks:a=[],tick:s,tickLine:r,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:f,x:p,y:x,width:v,height:N,tickSize:b,tickMargin:C,fontSize:w,letterSpacing:S,getTicksConfig:E,events:k,axisType:_}=e,A=xD(Fa(Fa({},E),{},{ticks:a}),w,S),T=y3e(u,f),$=b3e(u,f),z=Fr(E),F=Du(s),P={};typeof r=="object"&&(P=r);var M=Fa(Fa({},z),{},{fill:"none"},P),G=A.map(X=>Fa({entry:X},x3e(X,p,x,v,N,u,b,f,C))),Q=G.map(X=>{var{entry:q,line:ne}=X;return h.createElement(xs,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(q.value,"-").concat(q.coordinate,"-").concat(q.tickCoord)},r&&h.createElement("line",zu({},M,ne,{className:Pt("recharts-cartesian-axis-tick-line",Ou(r,"className"))})))}),V=G.map((X,q)=>{var{entry:ne,tick:oe}=X,K=Fa(Fa(Fa(Fa({textAnchor:T,verticalAnchor:$},z),{},{stroke:"none",fill:i},F),oe),{},{index:q,payload:ne,visibleTicksCount:A.length,tickFormatter:o,padding:c},d);return h.createElement(xs,zu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},Bx(k,ne,q)),s&&h.createElement(v3e,{option:s,tickProps:K,value:"".concat(typeof o=="function"?o(ne.value,q):ne.value).concat(l||"")}))});return h.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},V.length>0&&h.createElement(wr,{zIndex:Ga.label},h.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:t},V)),Q.length>0&&h.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},Q))}),N3e=h.forwardRef((e,t)=>{var{axisLine:a,width:s,height:r,className:i,hide:o,ticks:l,axisType:c}=e,d=u3e(e,d3e),[u,f]=h.useState(""),[p,x]=h.useState(""),v=h.useRef(null);h.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return c3e({ticks:v.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=h.useCallback(b=>{if(b){var C=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=C;var w=C[0];if(w){var S=window.getComputedStyle(w),E=S.fontSize,k=S.letterSpacing;(E!==u||k!==p)&&(f(E),x(k))}}},[u,p]);return o||s!=null&&s<=0||r!=null&&r<=0?null:h.createElement(wr,{zIndex:e.zIndex},h.createElement(xs,{className:Pt("recharts-cartesian-axis",i)},h.createElement(p3e,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:Fr(e)}),h.createElement(w3e,{ref:N,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),h.createElement(y4e,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},h.createElement(T4e,{label:e.label,labelRef:e.labelRef}),e.children)))}),yD=h.forwardRef((e,t)=>{var a=Qa(e,Ll);return h.createElement(N3e,zu({},a,{ref:t}))});yD.displayName="CartesianAxis";var j3e=["x1","y1","x2","y2","key"],C3e=["offset"],S3e=["xAxisId","yAxisId"],_3e=["xAxisId","yAxisId"];function HF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ds(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?HF(Object(a),!0).forEach(function(s){A3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function A3e(e,t,a){return(t=T3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T3e(e){var t=E3e(e,"string");return typeof t=="symbol"?t:t+""}function E3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},du.apply(null,arguments)}function dw(e,t){if(e==null)return{};var a,s,r=k3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function k3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var L3e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:s,y:r,width:i,height:o,ry:l}=e;return h.createElement("rect",{x:s,y:r,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function NX(e){var{option:t,lineItemProps:a}=e,s;if(h.isValidElement(t))s=h.cloneElement(t,a);else if(typeof t=="function")s=t(a);else{var r,{x1:i,y1:o,x2:l,y2:c,key:d}=a,u=dw(a,j3e),f=(r=Fr(u))!==null&&r!==void 0?r:{},{offset:p}=f,x=dw(f,C3e);s=h.createElement("line",du({},x,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return s}function P3e(e){var{x:t,width:a,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=dw(e,S3e),c=r.map((d,u)=>{var f=Ds(Ds({},l),{},{x1:t,y1:d,x2:t+a,y2:d,key:"line-".concat(u),index:u});return h.createElement(NX,{key:"line-".concat(u),option:s,lineItemProps:f})});return h.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function D3e(e){var{y:t,height:a,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=dw(e,_3e),c=r.map((d,u)=>{var f=Ds(Ds({},l),{},{x1:d,y1:t,x2:d,y2:t+a,key:"line-".concat(u),index:u});return h.createElement(NX,{option:s,lineItemProps:f,key:"line-".concat(u)})});return h.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function O3e(e){var{horizontalFill:t,fillOpacity:a,x:s,y:r,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],v=x?r+o-f:d[p+1]-f;if(v<=0)return null;var N=p%t.length;return h.createElement("rect",{key:"react-".concat(p),y:f,x:s,height:v,width:i,stroke:"none",fill:t[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function M3e(e){var{vertical:t=!0,verticalFill:a,fillOpacity:s,x:r,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!a||!a.length)return null;var d=c.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],v=x?r+o-f:d[p+1]-f;if(v<=0)return null;var N=p%a.length;return h.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:v,height:l,stroke:"none",fill:a[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var I3e=(e,t)=>{var{xAxis:a,width:s,height:r,offset:i}=e;return qQ(xD(Ds(Ds(Ds({},Ll),a),{},{ticks:VQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},$3e=(e,t)=>{var{yAxis:a,width:s,height:r,offset:i}=e;return qQ(xD(Ds(Ds(Ds({},Ll),a),{},{ticks:VQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},R3e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ga.grid};function ck(e){var t=u4(),a=m4(),s=tY(),r=Ds(Ds({},Qa(e,R3e)),{},{x:Mt(e.x)?e.x:s.left,y:Mt(e.y)?e.y:s.top,width:Mt(e.width)?e.width:s.width,height:Mt(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:p,verticalValues:x}=r,v=Fs(),N=$t($=>IU($,"xAxis",i,v)),b=$t($=>IU($,"yAxis",o,v));if(!Fo(d)||!Fo(u)||!Mt(l)||!Mt(c))return null;var C=r.verticalCoordinatesGenerator||I3e,w=r.horizontalCoordinatesGenerator||$3e,{horizontalPoints:S,verticalPoints:E}=r;if((!S||!S.length)&&typeof w=="function"){var k=p&&p.length,_=w({yAxis:b?Ds(Ds({},b),{},{ticks:k?p:b.ticks}):void 0,width:t??d,height:a??u,offset:s},k?!0:f);Vv(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(S=_)}if((!E||!E.length)&&typeof C=="function"){var A=x&&x.length,T=C({xAxis:N?Ds(Ds({},N),{},{ticks:A?x:N.ticks}):void 0,width:t??d,height:a??u,offset:s},A?!0:f);Vv(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(E=T)}return h.createElement(wr,{zIndex:r.zIndex},h.createElement("g",{className:"recharts-cartesian-grid"},h.createElement(L3e,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),h.createElement(O3e,du({},r,{horizontalPoints:S})),h.createElement(M3e,du({},r,{verticalPoints:E})),h.createElement(P3e,du({},r,{offset:s,horizontalPoints:S,xAxis:N,yAxis:b})),h.createElement(D3e,du({},r,{offset:s,verticalPoints:E,xAxis:N,yAxis:b}))))}ck.displayName="CartesianGrid";var z3e={},jX=vr({name:"errorBars",initialState:z3e,reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:s,next:r}=t.payload;e[a]&&(e[a]=e[a].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]&&(e[a]=e[a].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:fVe,replaceErrorBar:hVe,removeErrorBar:gVe}=jX.actions,U3e=jX.reducer,F3e=["children"];function B3e(e,t){if(e==null)return{};var a,s,r=H3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function H3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var G3e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},W3e=h.createContext(G3e);function CX(e){var{children:t}=e,a=B3e(e,F3e);return h.createElement(W3e.Provider,{value:a},t)}function bD(e,t){var a,s,r=$t(d=>rc(d,e)),i=$t(d=>ic(d,t)),o=(a=r?.allowDataOverflow)!==null&&a!==void 0?a:us.allowDataOverflow,l=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:ms.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function SX(e){var{xAxisId:t,yAxisId:a,clipPathId:s}=e,r=gD(),{needClipX:i,needClipY:o,needClip:l}=bD(t,a);if(!l||!r)return null;var{x:c,y:d,width:u,height:f}=r;return h.createElement("clipPath",{id:"clipPath-".concat(s)},h.createElement("rect",{x:i?c:c-u/2,y:o?d:d-f/2,width:i?u:u*2,height:o?f:f*2}))}var _X=(e,t,a,s)=>ud(e,"xAxis",t,s),AX=(e,t,a,s)=>dd(e,"xAxis",t,s),TX=(e,t,a,s)=>ud(e,"yAxis",a,s),EX=(e,t,a,s)=>dd(e,"yAxis",a,s),q3e=rt([wn,_X,TX,AX,EX],(e,t,a,s,r)=>Sd(e,"xAxis")?Of(t,s,!1):Of(a,r,!1)),V3e=(e,t,a,s,r)=>r;function Q3e(e){return e.type==="line"}var Y3e=rt([Tj,V3e],(e,t)=>e.filter(Q3e).find(a=>a.id===t)),K3e=rt([wn,_X,TX,AX,EX,Y3e,q3e,p4],(e,t,a,s,r,i,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(i==null||t==null||a==null||s==null||r==null||s.length===0||r.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(d,u+1),x!=null)return R5e({layout:e,xAxis:t,yAxis:a,xAxisTicks:s,yAxisTicks:r,dataKey:f,bandSize:o,displayedData:x})}});function X3e(e){var t=Du(e),a=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,o=Number(r),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=a),(Number.isNaN(l)||l<0)&&(l=s),{r:o,strokeWidth:l}}return{r:a,strokeWidth:s}}var D2={exports:{}},O2={};var GF;function Z3e(){if(GF)return O2;GF=1;var e=zf();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var a=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return O2.useSyncExternalStoreWithSelector=function(c,d,u,f,p){var x=r(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=o(function(){function b(k){if(!C){if(C=!0,w=k,k=f(k),p!==void 0&&v.hasValue){var _=v.value;if(p(_,k))return S=_}return S=k}if(_=S,a(w,k))return _;var A=f(k);return p!==void 0&&p(_,A)?(w=k,_):(w=k,S=A)}var C=!1,w,S,E=u===void 0?null:u;return[function(){return b(d())},E===null?void 0:function(){return b(E())}]},[d,u,f,p]);var N=s(c,x[0],x[1]);return i(function(){v.hasValue=!0,v.value=N},[N]),l(N),N},O2}var WF;function J3e(){return WF||(WF=1,D2.exports=Z3e()),D2.exports}var e5e=J3e();function t5e(e){e()}function n5e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){t5e(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let s=e;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0;const r=t={callback:a,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var qF={notify(){},get:()=>[]};function a5e(e,t){let a,s=qF,r=0,i=!1;function o(N){u();const b=s.subscribe(N);let C=!1;return()=>{C||(C=!0,b(),f())}}function l(){s.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){r++,a||(a=e.subscribe(c),s=n5e())}function f(){r--,a&&r===0&&(a(),a=void 0,s.clear(),s=qF)}function p(){i||(i=!0,u())}function x(){i&&(i=!1,f())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return v}var s5e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r5e=s5e(),i5e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",o5e=i5e(),l5e=()=>r5e||o5e?h.useLayoutEffect:h.useEffect,c5e=l5e();function VF(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function d5e(e,t){if(VF(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r])||!VF(e[a[r]],t[a[r]]))return!1;return!0}var u5e=Symbol.for("react-redux-context"),m5e=typeof globalThis<"u"?globalThis:{};function f5e(){if(!h.createContext)return{};const e=m5e[u5e]??=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var h5e=f5e();function g5e(e){const{children:t,context:a,serverState:s,store:r}=e,i=h.useMemo(()=>{const c=a5e(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=h.useMemo(()=>r.getState(),[r]);c5e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=a||h5e;return h.createElement(l.Provider,{value:i},t)}var p5e=g5e,x5e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function y5e(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function zj(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of a)if(x5e.has(s)){if(e[s]==null&&t[s]==null)continue;if(!d5e(e[s],t[s]))return!1}else if(!y5e(e[s],t[s]))return!1;return!0}var b5e=["id"],v5e=["type","layout","connectNulls","needClip","shape"],w5e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Up.apply(null,arguments)}function QF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function wo(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?QF(Object(a),!0).forEach(function(s){N5e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function N5e(e,t,a){return(t=j5e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j5e(e){var t=C5e(e,"string");return typeof t=="symbol"?t:t+""}function C5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vD(e,t){if(e==null)return{};var a,s,r=S5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function S5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var _5e=e=>{var{dataKey:t,name:a,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:nh(a,t),payload:e}]},A5e=h.memo(e=>{var{dataKey:t,data:a,stroke:s,strokeWidth:r,fill:i,name:o,hide:l,unit:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:nh(o,t),hide:l,type:d,color:s,unit:c,graphicalItemId:u}};return h.createElement(fD,{tooltipEntrySettings:f})}),kX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function T5e(e,t){for(var a=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...a];return s}var E5e=(e,t,a)=>{var s=a.reduce((f,p)=>f+p);if(!s)return kX(t,e);for(var r=Math.floor(e/s),i=e%s,o=t-e,l=[],c=0,d=0;c<a.length;d+=a[c],++c)if(d+a[c]>i){l=[...a.slice(0,c),i-d];break}var u=l.length%2===0?[0,o]:[o];return[...T5e(a,r),...l,...u].map(f=>"".concat(f,"px")).join(", ")};function k5e(e){var{clipPathId:t,points:a,props:s}=e,{dot:r,dataKey:i,needClip:o}=s,{id:l}=s,c=vD(s,b5e),d=Fr(c);return h.createElement(hOe,{points:a,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:d,needClip:o,clipPathId:t})}function L5e(e){var{showLabels:t,children:a,points:s}=e,r=h.useMemo(()=>s?.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wo(wo({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return h.createElement(aX,{value:t?r:void 0},a)}function YF(e){var{clipPathId:t,pathRef:a,points:s,strokeDasharray:r,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:d,shape:u}=i,f=vD(i,v5e),p=wo(wo({},Vs(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:s,type:o,layout:l,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return h.createElement(h.Fragment,null,s?.length>1&&h.createElement(cD,Up({shapeType:"curve",option:u},p,{pathRef:a})),h.createElement(k5e,{points:s,clipPathId:t,props:i}))}function P5e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function D5e(e){var{clipPathId:t,props:a,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,animateNewValues:p,width:x,height:v,onAnimationEnd:N,onAnimationStart:b}=a,C=r.current,w=Yx(o,"recharts-line-"),S=h.useRef(w),[E,k]=h.useState(!1),_=!E,A=h.useCallback(()=>{typeof N=="function"&&N(),k(!1)},[N]),T=h.useCallback(()=>{typeof b=="function"&&b(),k(!0)},[b]),$=P5e(s.current),z=h.useRef(0);S.current!==w&&(z.current=i.current,S.current=w);var F=z.current;return h.createElement(L5e,{points:o,showLabels:_},a.children,h.createElement(Qx,{animationId:w,begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:A,onAnimationStart:T,key:w},P=>{var M=la(F,$+F,P),G=Math.min(M,$),Q;if(c)if(l){var V="".concat(l).split(/[,\s]+/gim).map(ne=>parseFloat(ne));Q=E5e(G,$,V)}else Q=kX($,G);else Q=l==null?void 0:String(l);if(P>0&&$>0&&(r.current=o,i.current=Math.max(i.current,G)),C){var X=C.length/o.length,q=P===1?o:o.map((ne,oe)=>{var K=Math.floor(oe*X);if(C[K]){var R=C[K];return wo(wo({},ne),{},{x:la(R.x,ne.x,P),y:la(R.y,ne.y,P)})}return p?wo(wo({},ne),{},{x:la(x*2,ne.x,P),y:la(v/2,ne.y,P)}):wo(wo({},ne),{},{x:ne.x,y:ne.y})});return r.current=q,h.createElement(YF,{props:a,points:q,clipPathId:t,pathRef:s,strokeDasharray:Q})}return h.createElement(YF,{props:a,points:o,clipPathId:t,pathRef:s,strokeDasharray:Q})}),h.createElement(rD,{label:a.label}))}function O5e(e){var{clipPathId:t,props:a}=e,s=h.useRef(null),r=h.useRef(0),i=h.useRef(null);return h.createElement(D5e,{props:a,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var M5e=(e,t)=>{var a,s;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:Hn(e.payload,t)}};class I5e extends h.Component{render(){var{hide:t,dot:a,points:s,className:r,xAxisId:i,yAxisId:o,top:l,left:c,width:d,height:u,id:f,needClip:p,zIndex:x}=this.props;if(t)return null;var v=Pt("recharts-line",r),N=f,{r:b,strokeWidth:C}=X3e(a),w=uX(a),S=b*2+C,E=p?"url(#clipPath-".concat(w?"":"dots-").concat(N,")"):void 0;return h.createElement(wr,{zIndex:x},h.createElement(xs,{className:v},p&&h.createElement("defs",null,h.createElement(SX,{clipPathId:N,xAxisId:i,yAxisId:o}),!w&&h.createElement("clipPath",{id:"clipPath-dots-".concat(N)},h.createElement("rect",{x:c-S/2,y:l-S/2,width:d+S,height:u+S}))),h.createElement(CX,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:M5e,errorBarOffset:0},h.createElement(O5e,{props:this.props,clipPathId:N}))),h.createElement(OOe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:E}))}}var LX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ga.line,type:"linear"};function $5e(e){var t=Qa(e,LX),{activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:f,legendType:p,xAxisId:x,yAxisId:v,id:N}=t,b=vD(t,w5e),{needClip:C}=bD(x,v),w=gD(),S=ah(),E=Fs(),k=$t(z=>K3e(z,x,v,E,N));if(S!=="horizontal"&&S!=="vertical"||k==null||w==null)return null;var{height:_,width:A,x:T,y:$}=w;return h.createElement(I5e,Up({},b,{id:N,connectNulls:l,dot:c,activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:d,label:f,legendType:p,xAxisId:x,yAxisId:v,points:k,layout:S,height:_,width:A,left:T,top:$,needClip:C}))}function R5e(e){var{layout:t,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var f=Hn(d,o);if(t==="horizontal"){var p=wz({axis:a,ticks:r,bandSize:l,entry:d,index:u}),x=ua(f)?null:s.scale(f);return{x:p,y:x,value:f,payload:d}}var v=ua(f)?null:a.scale(f),N=wz({axis:s,ticks:i,bandSize:l,entry:d,index:u});return v==null||N==null?null:{x:v,y:N,value:f,payload:d}}).filter(Boolean)}function z5e(e){var t=Qa(e,LX),a=Fs();return h.createElement(hD,{id:t.id,type:"line"},s=>h.createElement(h.Fragment,null,h.createElement(mX,{legendPayload:_5e(t)}),h.createElement(A5e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),h.createElement(hX,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),h.createElement($5e,Up({},t,{id:s}))))}var dk=h.memo(z5e,zj);dk.displayName="Line";function Zu(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&a!==void 0?a:pX}function Ju(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&a!==void 0?a:pX}var U5e="Invariant failed";function F5e(e,t){throw new Error(U5e)}function uk(){return uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},uk.apply(null,arguments)}function uw(e){return h.createElement(cD,uk({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var B5e=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(Mt(t))return t;var i=Mt(s)||ua(s);return i?t(s,r):(i||F5e(),a)}},H5e=(e,t,a)=>a,G5e=(e,t)=>t,r0=rt([Tj,G5e],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),W5e=rt([r0],e=>e?.maxBarSize),q5e=(e,t,a,s)=>s,V5e=rt([wn,Tj,Zu,Ju,H5e],(e,t,a,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Q5e=(e,t,a)=>{var s=wn(e),r=Zu(e,t),i=Ju(e,t);if(!(r==null||i==null))return s==="horizontal"?tk(e,"yAxis",i,a):tk(e,"xAxis",r,a)},Y5e=(e,t)=>{var a=wn(e),s=Zu(e,t),r=Ju(e,t);if(!(s==null||r==null))return a==="horizontal"?MU(e,"xAxis",s):MU(e,"yAxis",r)},K5e=rt([V5e,bEe,Y5e],MOe),X5e=(e,t,a)=>{var s,r,i=r0(e,t);if(i!=null){var o=Zu(e,t),l=Ju(e,t);if(!(o==null||l==null)){var c=wn(e),d=RY(e),{maxBarSize:u}=i,f=ua(u)?d:u,p,x;return c==="horizontal"?(p=ud(e,"xAxis",o,a),x=dd(e,"xAxis",o,a)):(p=ud(e,"yAxis",l,a),x=dd(e,"yAxis",l,a)),(s=(r=Of(p,x,!0))!==null&&r!==void 0?r:f)!==null&&s!==void 0?s:0}}},PX=(e,t,a)=>{var s=wn(e),r=Zu(e,t),i=Ju(e,t);if(!(r==null||i==null)){var o,l;return s==="horizontal"?(o=ud(e,"xAxis",r,a),l=dd(e,"xAxis",r,a)):(o=ud(e,"yAxis",i,a),l=dd(e,"yAxis",i,a)),Of(o,l)}},Z5e=rt([K5e,RY,yEe,zY,X5e,PX,W5e],UOe),J5e=(e,t,a)=>{var s=Zu(e,t);if(s!=null)return ud(e,"xAxis",s,a)},eMe=(e,t,a)=>{var s=Ju(e,t);if(s!=null)return ud(e,"yAxis",s,a)},tMe=(e,t,a)=>{var s=Zu(e,t);if(s!=null)return dd(e,"xAxis",s,a)},nMe=(e,t,a)=>{var s=Ju(e,t);if(s!=null)return dd(e,"yAxis",s,a)},aMe=rt([Z5e,r0],(e,t)=>{if(!(e==null||t==null)){var a=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),sMe=rt([Q5e,r0],FOe),rMe=rt([os,c4,J5e,eMe,tMe,nMe,aMe,wn,iEe,PX,sMe,r0,q5e],(e,t,a,s,r,i,o,l,c,d,u,f,p)=>{var{chartData:x,dataStartIndex:v,dataEndIndex:N}=c;if(!(f==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||a==null||s==null||r==null||i==null||d==null)){var{data:b}=f,C;if(b!=null&&b.length>0?C=b:C=x?.slice(v,N+1),C!=null)return OMe({layout:l,barSettings:f,pos:o,parentViewBox:t,bandSize:d,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:C,offset:e,cells:p,dataStartIndex:v})}}),iMe=["index"];function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},mk.apply(null,arguments)}function oMe(e,t){if(e==null)return{};var a,s,r=lMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var DX=h.createContext(void 0),cMe=e=>{var t=h.useContext(DX);if(t!=null)return t.stackId;if(e!=null)return T2e(e)},dMe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),uMe=e=>{var t=h.useContext(DX);if(t!=null){var{stackId:a}=t;return"url(#".concat(dMe(a,e),")")}},mMe=e=>{var{index:t}=e,a=oMe(e,iMe),s=uMe(t);return h.createElement(xs,mk({className:"recharts-bar-stack-layer",clipPath:s},a))},fMe=["onMouseEnter","onMouseLeave","onClick"],hMe=["value","background","tooltipPosition"],gMe=["id"],pMe=["onMouseEnter","onClick","onMouseLeave"];function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ql.apply(null,arguments)}function KF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Hs(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KF(Object(a),!0).forEach(function(s){xMe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xMe(e,t,a){return(t=yMe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yMe(e){var t=bMe(e,"string");return typeof t=="symbol"?t:t+""}function bMe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mw(e,t){if(e==null)return{};var a,s,r=vMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function vMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var wMe=e=>{var{dataKey:t,name:a,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:nh(a,t),payload:e}]},NMe=h.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:s,fill:r,name:i,hide:o,unit:l,tooltipType:c,id:d}=e,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:nh(i,t),hide:o,type:c,color:r,unit:l,graphicalItemId:d}};return h.createElement(fD,{tooltipEntrySettings:u})});function jMe(e){var t=$t(md),{data:a,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=mw(i,fMe),u=dD(o,s,i.id),f=uD(l),p=mD(c,s,i.id);if(!r||a==null)return null;var x=Du(r);return h.createElement(wr,{zIndex:BOe(r,Ga.barBackground)},a.map((v,N)=>{var{value:b,background:C,tooltipPosition:w}=v,S=mw(v,hMe);if(!C)return null;var E=u(v,N),k=f(v,N),_=p(v,N),A=Hs(Hs(Hs(Hs(Hs({option:r,isActive:String(N)===t},S),{},{fill:"#eee"},C),x),Bx(d,v,N)),{},{onMouseEnter:E,onMouseLeave:k,onClick:_,dataKey:s,index:N,className:"recharts-bar-background-rectangle"});return h.createElement(uw,ql({key:"background-bar-".concat(N)},A))}))}function CMe(e){var{showLabels:t,children:a,rects:s}=e,r=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Hs(Hs({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return h.createElement(aX,{value:t?r:void 0},a)}function SMe(e){var{shape:t,activeBar:a,baseProps:s,entry:r,index:i,dataKey:o}=e,l=$t(md),c=$t(Z4),d=a&&String(i)===l&&(c==null||o===c),u=d?a:t;return d?h.createElement(wr,{zIndex:Ga.activeBar},h.createElement(uw,ql({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))):h.createElement(uw,ql({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))}function _Me(e){var{shape:t,baseProps:a,entry:s,index:r,dataKey:i}=e;return h.createElement(uw,ql({},a,{name:String(a.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function AMe(e){var t,{data:a,props:s}=e,r=(t=Fr(s))!==null&&t!==void 0?t:{},{id:i}=r,o=mw(r,gMe),{shape:l,dataKey:c,activeBar:d}=s,{onMouseEnter:u,onClick:f,onMouseLeave:p}=s,x=mw(s,pMe),v=dD(u,c,i),N=uD(p),b=mD(f,c,i);return a?h.createElement(h.Fragment,null,a.map((C,w)=>h.createElement(mMe,ql({index:w,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(w),className:"recharts-bar-rectangle"},Bx(x,C,w),{onMouseEnter:v(C,w),onMouseLeave:N(C,w),onClick:b(C,w)}),d?h.createElement(SMe,{shape:l,activeBar:d,baseProps:o,entry:C,index:w,dataKey:c}):h.createElement(_Me,{shape:l,baseProps:o,entry:C,index:w,dataKey:c})))):null}function TMe(e){var{props:t,previousRectanglesRef:a}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,f=a.current,p=Yx(t,"recharts-bar-"),[x,v]=h.useState(!1),N=!x,b=h.useCallback(()=>{typeof d=="function"&&d(),v(!1)},[d]),C=h.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return h.createElement(CMe,{showLabels:N,rects:s},h.createElement(Qx,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:b,onAnimationStart:C,key:p},w=>{var S=w===1?s:s?.map((E,k)=>{var _=f&&f[k];if(_)return Hs(Hs({},E),{},{x:la(_.x,E.x,w),y:la(_.y,E.y,w),width:la(_.width,E.width,w),height:la(_.height,E.height,w)});if(r==="horizontal"){var A=la(0,E.height,w),T=la(E.stackedBarStart,E.y,w);return Hs(Hs({},E),{},{y:T,height:A})}var $=la(0,E.width,w),z=la(E.stackedBarStart,E.x,w);return Hs(Hs({},E),{},{width:$,x:z})});return w>0&&(a.current=S??null),S==null?null:h.createElement(xs,null,h.createElement(AMe,{props:t,data:S}))}),h.createElement(rD,{label:t.label}),t.children)}function EMe(e){var t=h.useRef(null);return h.createElement(TMe,{previousRectanglesRef:t,props:e})}var OX=0,kMe=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Hn(e,t)}};class LMe extends h.PureComponent{render(){var{hide:t,data:a,dataKey:s,className:r,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||a==null)return null;var u=Pt("recharts-bar",r),f=d;return h.createElement(xs,{className:u,id:d},l&&h.createElement("defs",null,h.createElement(SX,{clipPathId:f,xAxisId:i,yAxisId:o})),h.createElement(xs,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},h.createElement(jMe,{data:a,dataKey:s,background:c,allOtherBarProps:this.props}),h.createElement(EMe,this.props)))}}var PMe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:OX,xAxisId:0,yAxisId:0,zIndex:Ga.bar};function DMe(e){var{xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:f}=bD(t,a),p=ah(),x=Fs(),v=lD(e.children,Oj),N=$t(w=>rMe(w,e.id,x,v));if(p!=="vertical"&&p!=="horizontal")return null;var b,C=N?.[0];return C==null||C.height==null||C.width==null?b=0:b=p==="vertical"?C.height/2:C.width/2,h.createElement(CX,{xAxisId:t,yAxisId:a,data:N,dataPointFormatter:kMe,errorBarOffset:b},h.createElement(LMe,ql({},e,{layout:p,needClip:f,data:N,xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function OMe(e){var{layout:t,barSettings:{dataKey:a,minPointSize:s},pos:r,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:f,offset:p,cells:x,parentViewBox:v,dataStartIndex:N}=e,b=t==="horizontal"?l:o,C=u?b.scale.domain():null,w=E2e({numericAxis:b}),S=b.scale(w);return f.map((E,k)=>{var _,A,T,$,z,F;if(u){var P=u[k+N];if(P==null)return null;_=j2e(P,C)}else _=Hn(E,a),Array.isArray(_)||(_=[w,_]);var M=B5e(s,OX)(_[1],k);if(t==="horizontal"){var G,[Q,V]=[l.scale(_[0]),l.scale(_[1])];A=Nz({axis:o,ticks:c,bandSize:i,offset:r.offset,entry:E,index:k}),T=(G=V??Q)!==null&&G!==void 0?G:void 0,$=r.size;var X=Q-V;if(z=Yi(X)?0:X,F={x:A,y:p.top,width:$,height:p.height},Math.abs(M)>0&&Math.abs(z)<Math.abs(M)){var q=ps(z||M)*(Math.abs(M)-Math.abs(z));T-=q,z+=q}}else{var[ne,oe]=[o.scale(_[0]),o.scale(_[1])];if(A=ne,T=Nz({axis:l,ticks:d,bandSize:i,offset:r.offset,entry:E,index:k}),$=oe-ne,z=r.size,F={x:p.left,y:T,width:p.width,height:z},Math.abs(M)>0&&Math.abs($)<Math.abs(M)){var K=ps($||M)*(Math.abs(M)-Math.abs($));$+=K}}if(A==null||T==null||$==null||z==null)return null;var R=Hs(Hs({},E),{},{stackedBarStart:S,x:A,y:T,width:$,height:z,value:u?_:_[1],payload:E,background:F,tooltipPosition:{x:A+$/2,y:T+z/2},parentViewBox:v},x&&x[k]&&x[k].props);return R}).filter(Boolean)}function MMe(e){var t=Qa(e,PMe),a=cMe(t.stackId),s=Fs();return h.createElement(hD,{id:t.id,type:"bar"},r=>h.createElement(h.Fragment,null,h.createElement(mX,{legendPayload:wMe(t)}),h.createElement(NMe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),h.createElement(hX,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),h.createElement(wr,{zIndex:t.zIndex},h.createElement(DMe,ql({},t,{id:r})))))}var fk=h.memo(MMe,zj);fk.displayName="Bar";var IMe=["domain","range"],$Me=["domain","range"];function XF(e,t){if(e==null)return{};var a,s,r=RMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function RMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function ZF(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function MX(e,t){if(e===t)return!0;var{domain:a,range:s}=e,r=XF(e,IMe),{domain:i,range:o}=t,l=XF(t,$Me);return!ZF(a,i)||!ZF(s,o)?!1:zj(r,l)}var zMe=["dangerouslySetInnerHTML","ticks","scale"],UMe=["id","scale"];function hk(){return hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},hk.apply(null,arguments)}function JF(e,t){if(e==null)return{};var a,s,r=FMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function FMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function BMe(e){var t=Xn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(bOe(e)):a.current!==e&&t(vOe({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(wOe(a.current)),a.current=null)},[t]),null}var HMe=e=>{var{xAxisId:t,className:a}=e,s=$t(c4),r=Fs(),i="xAxis",o=$t(C=>xK(C,i,t,r)),l=$t(C=>fK(C,t)),c=$t(C=>pke(C,t)),d=$t(C=>QY(C,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:f,scale:p}=e,x=JF(e,zMe),{id:v,scale:N}=d,b=JF(d,UMe);return h.createElement(yD,hk({},x,b,{x:c.x,y:c.y,width:l.width,height:l.height,className:Pt("recharts-".concat(i," ").concat(i),a),viewBox:s,ticks:o,axisType:i}))},GMe={allowDataOverflow:us.allowDataOverflow,allowDecimals:us.allowDecimals,allowDuplicatedCategory:us.allowDuplicatedCategory,angle:us.angle,axisLine:Ll.axisLine,height:us.height,hide:!1,includeHidden:us.includeHidden,interval:us.interval,minTickGap:us.minTickGap,mirror:us.mirror,orientation:us.orientation,padding:us.padding,reversed:us.reversed,scale:us.scale,tick:us.tick,tickCount:us.tickCount,tickLine:Ll.tickLine,tickSize:Ll.tickSize,type:us.type,xAxisId:0},WMe=e=>{var t=Qa(e,GMe);return h.createElement(h.Fragment,null,h.createElement(BMe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),h.createElement(HMe,t))},gk=h.memo(WMe,MX);gk.displayName="XAxis";var qMe=["dangerouslySetInnerHTML","ticks","scale"],VMe=["id","scale"];function pk(){return pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pk.apply(null,arguments)}function e7(e,t){if(e==null)return{};var a,s,r=QMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function QMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function YMe(e){var t=Xn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(NOe(e)):a.current!==e&&t(jOe({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(COe(a.current)),a.current=null)},[t]),null}var KMe=e=>{var{yAxisId:t,className:a,width:s,label:r}=e,i=h.useRef(null),o=h.useRef(null),l=$t(c4),c=Fs(),d=Xn(),u="yAxis",f=$t(_=>hK(_,t)),p=$t(_=>yke(_,t)),x=$t(_=>xK(_,u,t,c)),v=$t(_=>YY(_,t));if(h.useLayoutEffect(()=>{if(!(s!=="auto"||!f||sD(r)||h.isValidElement(r)||v==null)){var _=i.current;if(_){var A=_.getCalculatedWidth();Math.round(f.width)!==Math.round(A)&&d(SOe({id:t,width:A}))}}},[x,f,d,r,t,s,v]),f==null||p==null||v==null)return null;var{dangerouslySetInnerHTML:N,ticks:b,scale:C}=e,w=e7(e,qMe),{id:S,scale:E}=v,k=e7(v,VMe);return h.createElement(yD,pk({},w,k,{ref:i,labelRef:o,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:f.width,height:f.height,className:Pt("recharts-".concat(u," ").concat(u),a),viewBox:l,ticks:x,axisType:u}))},XMe={allowDataOverflow:ms.allowDataOverflow,allowDecimals:ms.allowDecimals,allowDuplicatedCategory:ms.allowDuplicatedCategory,angle:ms.angle,axisLine:Ll.axisLine,hide:!1,includeHidden:ms.includeHidden,interval:ms.interval,minTickGap:ms.minTickGap,mirror:ms.mirror,orientation:ms.orientation,padding:ms.padding,reversed:ms.reversed,scale:ms.scale,tick:ms.tick,tickCount:ms.tickCount,tickLine:Ll.tickLine,tickSize:Ll.tickSize,type:ms.type,width:ms.width,yAxisId:0},ZMe=e=>{var t=Qa(e,XMe);return h.createElement(h.Fragment,null,h.createElement(YMe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),h.createElement(KMe,t))},xk=h.memo(ZMe,MX);xk.displayName="YAxis";var JMe=(e,t)=>t,wD=rt([JMe,wn,qY,ls,DK,oc,OLe,os],FLe),ND=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/s)}},IX=vi("mouseClick"),$X=Wx();$X.startListening({actionCreator:IX,effect:(e,t)=>{var a=e.payload,s=wD(t.getState(),ND(a));s?.activeIndex!=null&&t.dispatch(Pke({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var yk=vi("mouseMove"),RX=Wx(),tb=null;RX.startListening({actionCreator:yk,effect:(e,t)=>{var a=e.payload;tb!==null&&cancelAnimationFrame(tb);var s=ND(a);tb=requestAnimationFrame(()=>{var r=t.getState(),i=q4(r,r.tooltip.settings.shared);if(i==="axis"){var o=wD(r,s);o?.activeIndex!=null?t.dispatch(SK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(CK())}tb=null})}});function eIe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var t7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},zX=vr({name:"rootProps",initialState:t7,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(a=t.payload.barGap)!==null&&a!==void 0?a:t7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),tIe=zX.reducer,{updateOptions:nIe}=zX.actions,UX=vr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:aIe}=UX.actions,sIe=UX.reducer,FX=vi("keyDown"),BX=vi("focus"),jD=Wx();jD.startListening({actionCreator:FX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=V4(r,uh(a),e0(a),a0(a)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=oc(a);if(i==="Enter"){var d=rw(a,"axis","hover",String(r.index));t.dispatch(ak({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var u=Nke(a),f=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=l+p*f;if(!(c==null||x>=c.length||x<0)){var v=rw(a,"axis","hover",String(x));t.dispatch(ak({active:!0,activeIndex:x.toString(),activeCoordinate:v}))}}}}}});jD.startListening({actionCreator:BX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip;if(!r.active&&r.index==null){var i="0",o=rw(a,"axis","hover",String(i));t.dispatch(ak({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ii=vi("externalEvent"),HX=Wx(),M2=new Map;HX.startListening({actionCreator:ii,effect:(e,t)=>{var{handler:a,reactEvent:s}=e.payload;if(a!=null){s.persist();var r=s.type,i=M2.get(r);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:yLe(l),activeDataKey:Z4(l),activeIndex:md(l),activeLabel:IK(l),activeTooltipIndex:md(l),isTooltipActive:bLe(l)};a(c,s)}finally{M2.delete(r)}});M2.set(r,o)}}});var rIe=rt([ch],e=>e.tooltipItemPayloads),iIe=rt([rIe,n0,(e,t)=>t,(e,t,a)=>a],(e,t,a,s)=>{var r=e.find(l=>l.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var o=t(i,a);return o}}}),GX=vi("touchMove"),WX=Wx();WX.startListening({actionCreator:GX,effect:(e,t)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var s=t.getState(),r=q4(s,s.tooltip.settings.shared);if(r==="axis"){var i=a.touches[0];if(i==null)return;var o=wD(s,ND({clientX:i.clientX,clientY:i.clientY,currentTarget:a.currentTarget}));o?.activeIndex!=null&&t.dispatch(SK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var l,c=a.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(YQ),f=(l=d.getAttribute(KQ))!==null&&l!==void 0?l:void 0,p=dh(s).find(N=>N.id===f);if(u==null||p==null||f==null)return;var{dataKey:x}=p,v=iIe(s,u,f);t.dispatch(jK({activeDataKey:x,activeIndex:u,activeCoordinate:v,activeGraphicalItemId:f}))}}}});var oIe=xQ({brush:HOe,cartesianAxis:_Oe,chartData:yPe,errorBars:U3e,graphicalItems:PDe,layout:x2e,legend:SAe,options:fPe,polarAxis:Y4e,polarOptions:sIe,referenceElements:KOe,rootProps:tIe,tooltip:Dke,zIndex:tPe}),lIe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return B_e({reducer:oIe,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([$X.middleware,RX.middleware,jD.middleware,HX.middleware,WX.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(PQ({type:"raf"}))},devTools:{serialize:{replacer:eIe},name:"recharts-".concat(a)}})};function qX(e){var{preloadedState:t,children:a,reduxStoreName:s}=e,r=Fs(),i=h.useRef(null);if(r)return a;i.current==null&&(i.current=lIe(t,s));var o=e4;return h.createElement(p5e,{context:o,store:i.current},a)}function cIe(e){var{layout:t,margin:a}=e,s=Xn(),r=Fs();return h.useEffect(()=>{r||(s(h2e(t)),s(f2e(a)))},[s,r,t,a]),null}var VX=h.memo(cIe,zj);function QX(e){var t=Xn();return h.useEffect(()=>{t(nIe(e))},[t,e]),null}function n7(e){var{zIndex:t,isPanorama:a}=e,s=h.useRef(null),r=Xn();return h.useLayoutEffect(()=>(s.current&&r(JLe({zIndex:t,element:s.current,isPanorama:a})),()=>{r(ePe({zIndex:t,isPanorama:a}))}),[r,t,a]),h.createElement("g",{tabIndex:-1,ref:s})}function a7(e){var{children:t,isPanorama:a}=e,s=$t(HLe);if(!s||s.length===0)return t;var r=s.filter(o=>o<0),i=s.filter(o=>o>0);return h.createElement(h.Fragment,null,r.map(o=>h.createElement(n7,{key:o,zIndex:o,isPanorama:a})),t,i.map(o=>h.createElement(n7,{key:o,zIndex:o,isPanorama:a})))}var dIe=["children"];function uIe(e,t){if(e==null)return{};var a,s,r=mIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function mIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function fw(){return fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},fw.apply(null,arguments)}var fIe={width:"100%",height:"100%",display:"block"},hIe=h.forwardRef((e,t)=>{var a=u4(),s=m4(),r=fY();if(!Fo(a)||!Fo(s))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=r?0:void 0,typeof o.role=="string"?u=o.role:u=r?"application":void 0),h.createElement(VP,fw({},o,{title:l,desc:c,role:u,tabIndex:d,width:a,height:s,style:fIe,ref:t}),i)}),gIe=e=>{var{children:t}=e,a=$t(gj);if(!a)return null;var{width:s,height:r,y:i,x:o}=a;return h.createElement(VP,{width:s,height:r,x:o,y:i},t)},s7=h.forwardRef((e,t)=>{var{children:a}=e,s=uIe(e,dIe),r=Fs();return r?h.createElement(gIe,null,h.createElement(a7,{isPanorama:!0},a)):h.createElement(hIe,fw({ref:t},s),h.createElement(a7,{isPanorama:!1},a))});function pIe(){var e=Xn(),[t,a]=h.useState(null),s=$t(M2e);return h.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;pa(i)&&i!==s&&e(p2e(i))}},[t,e,s]),a}function r7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xIe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?r7(Object(a),!0).forEach(function(s){yIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function yIe(e,t,a){return(t=bIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bIe(e){var t=vIe(e,"string");return typeof t=="symbol"?t:t+""}function vIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Uu.apply(null,arguments)}var wIe=()=>(APe(),null);function hw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var NIe=h.forwardRef((e,t)=>{var a,s,r=h.useRef(null),[i,o]=h.useState({containerWidth:hw((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:hw((s=e.style)===null||s===void 0?void 0:s.height)}),l=h.useCallback((d,u)=>{o(f=>{var p=Math.round(d),x=Math.round(u);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),c=h.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=d.getBoundingClientRect();l(u,f);var p=v=>{var{width:N,height:b}=v[0].contentRect;l(N,b)},x=new ResizeObserver(p);x.observe(d),r.current=x}},[t,l]);return h.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[l]),h.createElement(h.Fragment,null,h.createElement(xj,{width:i.containerWidth,height:i.containerHeight}),h.createElement("div",Uu({ref:c},e)))}),jIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e,[r,i]=h.useState({containerWidth:hw(a),containerHeight:hw(s)}),o=h.useCallback((c,d)=>{i(u=>{var f=Math.round(c),p=Math.round(d);return u.containerWidth===f&&u.containerHeight===p?u:{containerWidth:f,containerHeight:p}})},[]),l=h.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();o(d,u)}},[t,o]);return h.createElement(h.Fragment,null,h.createElement(xj,{width:r.containerWidth,height:r.containerHeight}),h.createElement("div",Uu({ref:l},e)))}),CIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return h.createElement(h.Fragment,null,h.createElement(xj,{width:a,height:s}),h.createElement("div",Uu({ref:t},e)))}),SIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return Hl(a)||Hl(s)?h.createElement(jIe,Uu({},e,{ref:t})):h.createElement(CIe,Uu({},e,{ref:t}))});function _Ie(e){return e===!0?NIe:SIe}var AIe=h.forwardRef((e,t)=>{var{children:a,className:s,height:r,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:p,onTouchEnd:x,onTouchMove:v,onTouchStart:N,style:b,width:C,responsive:w,dispatchTouchEvents:S=!0}=e,E=h.useRef(null),k=Xn(),[_,A]=h.useState(null),[T,$]=h.useState(null),z=pIe(),F=d4(),P=F?.width>0?F.width:C,M=F?.height>0?F.height:r,G=h.useCallback(he=>{z(he),typeof t=="function"&&t(he),A(he),$(he),he!=null&&(E.current=he)},[z,t,A,$]),Q=h.useCallback(he=>{k(IX(he)),k(ii({handler:i,reactEvent:he}))},[k,i]),V=h.useCallback(he=>{k(yk(he)),k(ii({handler:d,reactEvent:he}))},[k,d]),X=h.useCallback(he=>{k(CK()),k(ii({handler:u,reactEvent:he}))},[k,u]),q=h.useCallback(he=>{k(yk(he)),k(ii({handler:f,reactEvent:he}))},[k,f]),ne=h.useCallback(()=>{k(BX())},[k]),oe=h.useCallback(he=>{k(FX(he.key))},[k]),K=h.useCallback(he=>{k(ii({handler:o,reactEvent:he}))},[k,o]),R=h.useCallback(he=>{k(ii({handler:l,reactEvent:he}))},[k,l]),ye=h.useCallback(he=>{k(ii({handler:c,reactEvent:he}))},[k,c]),pe=h.useCallback(he=>{k(ii({handler:p,reactEvent:he}))},[k,p]),Ne=h.useCallback(he=>{k(ii({handler:N,reactEvent:he}))},[k,N]),Se=h.useCallback(he=>{S&&k(GX(he)),k(ii({handler:v,reactEvent:he}))},[k,S,v]),Oe=h.useCallback(he=>{k(ii({handler:x,reactEvent:he}))},[k,x]),ke=_Ie(w);return h.createElement(HK.Provider,{value:_},h.createElement(KV.Provider,{value:T},h.createElement(ke,{width:P??b?.width,height:M??b?.height,className:Pt("recharts-wrapper",s),style:xIe({position:"relative",cursor:"default",width:P,height:M},b),onClick:Q,onContextMenu:K,onDoubleClick:R,onFocus:ne,onKeyDown:oe,onMouseDown:ye,onMouseEnter:V,onMouseLeave:X,onMouseMove:q,onMouseUp:pe,onTouchEnd:Oe,onTouchMove:Se,onTouchStart:Ne,ref:G},h.createElement(wIe,null),a)))}),TIe=["width","height","responsive","children","className","style","compact","title","desc"];function EIe(e,t){if(e==null)return{};var a,s,r=kIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var YX=h.forwardRef((e,t)=>{var{width:a,height:s,responsive:r,children:i,className:o,style:l,compact:c,title:d,desc:u}=e,f=EIe(e,TIe),p=Fr(f);return c?h.createElement(h.Fragment,null,h.createElement(xj,{width:a,height:s}),h.createElement(s7,{otherAttributes:p,title:d,desc:u},i)):h.createElement(AIe,{className:o,style:l,width:a,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},h.createElement(s7,{otherAttributes:p,title:d,desc:u,ref:t},h.createElement(ZOe,null,i)))});function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},bk.apply(null,arguments)}var LIe={top:5,right:5,bottom:5,left:5},PIe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:LIe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},KX=h.forwardRef(function(t,a){var s,r=Qa(t.categoricalChartProps,PIe),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return h.createElement(qX,{preloadedState:{options:u},reduxStoreName:(s=d.id)!==null&&s!==void 0?s:i},h.createElement(yX,{chartData:d.data}),h.createElement(VX,{layout:r.layout,margin:r.margin}),h.createElement(QX,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(YX,bk({},r,{ref:a})))}),DIe=["axis"],OIe=h.forwardRef((e,t)=>h.createElement(KX,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:DIe,tooltipPayloadSearcher:aD,categoricalChartProps:e,ref:t})),MIe=["axis","item"],IIe=h.forwardRef((e,t)=>h.createElement(KX,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:MIe,tooltipPayloadSearcher:aD,categoricalChartProps:e,ref:t}));function $Ie(e){var t=Xn();return h.useEffect(()=>{t(aIe(e))},[t,e]),null}var RIe=["layout"];function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},vk.apply(null,arguments)}function zIe(e,t){if(e==null)return{};var a,s,r=UIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function UIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var FIe={top:5,right:5,bottom:5,left:5},XX={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:FIe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},BIe=h.forwardRef(function(t,a){var s,r=Qa(t.categoricalChartProps,XX),{layout:i}=r,o=zIe(r,RIe),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u}=t,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u,eventEmitter:void 0};return h.createElement(qX,{preloadedState:{options:f},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:l},h.createElement(yX,{chartData:r.data}),h.createElement(VX,{layout:i,margin:r.margin}),h.createElement(QX,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement($Ie,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),h.createElement(YX,vk({},o,{ref:a})))});function i7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function o7(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?i7(Object(a),!0).forEach(function(s){HIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function HIe(e,t,a){return(t=GIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function GIe(e){var t=WIe(e,"string");return typeof t=="symbol"?t:t+""}function WIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qIe=["item"],VIe=o7(o7({},XX),{},{layout:"centric",startAngle:0,endAngle:360}),QIe=h.forwardRef((e,t)=>{var a=Qa(e,VIe);return h.createElement(BIe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:qIe,tooltipPayloadSearcher:aD,categoricalChartProps:a,ref:t})});const l7={user_id:"",start_date:"",end_date:"",target_amount:"",period_type:"CUSTOM",period_year:new Date().getFullYear(),period_number:1},YIe=[{value:"MONTHLY",label:"Monthly"},{value:"QUARTERLY",label:"Quarterly"},{value:"SEMIANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"},{value:"CUSTOM",label:"Custom"}],c7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function KIe({name:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",required:o=!1,isSubmitted:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=t.find(C=>String(C.id)===String(a)),v=x?r(x):"",N=o&&l&&!a,b=h.useMemo(()=>{const C=u.toLowerCase();return C?t.filter(w=>r(w).toLowerCase().includes(C)):t},[t,u,r]);return h.useEffect(()=>{const C=w=>{p.current&&!p.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),n.jsxs("div",{ref:p,className:"relative flex justify-center w-full",children:[n.jsx("input",{value:c?u:v,placeholder:i,onFocus:()=>d(!0),onChange:C=>{f(C.target.value),d(!0)},className:`w-full border rounded-lg p-1 text-gray-700 focus:outline-none focus:ring-1
          ${N?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`}),c&&n.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:b.length?b.map(C=>n.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(C.id)}}),d(!1),f("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(C)},C.id)):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function Uj({currentUserRole:e,currentUserId:t}){const{user:a,mutate:s}=tn(),r=a?.company?.currency||"",i=r==="$"?Wde:Vde;h.useEffect(()=>{s&&s()},[s]),h.useEffect(()=>{a?.company&&console.log("Dashboard detected Company Settings:",a.company)},[a]),h.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(!1),[p,x]=h.useState(""),[v,N]=h.useState(1),[b,C]=h.useState(10),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[_,A]=h.useState(!1),[T,$]=h.useState(null),[z,F]=h.useState(l7),[P,M]=h.useState(null),[G,Q]=h.useState(null),[V,X]=h.useState(!1),[q,ne]=h.useState([]),[oe,K]=h.useState(!1),[R,ye]=h.useState("annual"),[pe,Ne]=h.useState(1),[Se,Oe]=h.useState("overview"),[ke,he]=h.useState(null),[Ge,Ce]=h.useState(!1),[xe,ee]=h.useState(null),[Ee,Ae]=h.useState(!1),[Re,et]=h.useState(null),[De,tt]=h.useState(null),[Je,H]=h.useState(new Date().getFullYear()),[be,le]=h.useState(""),[Z,_e]=h.useState(1),te=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),Ue=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),Ie=h.useCallback(async()=>{f(!0);try{const ge=await ae.get("/targets/admin/fetch-all");l(ge.data)}catch(ge){console.error(ge),W.error("Failed to load targets.")}finally{f(!1)}},[]),We=h.useCallback(async()=>{try{if(te){const ge=await ae.get("/targets/admin/get-users");d(ge.data)}}catch(ge){console.error(ge)}},[te]),gt=h.useCallback(async()=>{try{const ge=await ae.get("/targets/fiscal-settings");tt(ge.data)}catch(ge){console.error("Failed to fetch fiscal settings:",ge)}},[]),ve=h.useCallback(async()=>{Ce(!0);try{const ge=new URLSearchParams;be&&ge.append("period_type",be),Je&&ge.append("period_year",Je),Z&&ge.append("period_number",Z);const fe=await ae.get(`/targets/leaderboard?${ge.toString()}`);he(fe.data)}catch(ge){console.error(ge),W.error("Failed to load leaderboard.")}finally{Ce(!1)}},[be,Je,Z]),Be=h.useCallback(async()=>{try{const ge=new URLSearchParams;be&&ge.append("period_type",be),Je&&ge.append("period_year",Je),Z&&ge.append("period_number",Z);const fe=await ae.get(`/targets/team-summary?${ge.toString()}`);et(fe.data)}catch(ge){console.error(ge)}},[be,Je,Z]),nt=h.useCallback(async ge=>{Ae(!0);try{const fe=await ae.get(`/targets/history/${ge}`);ee(fe.data)}catch(fe){console.error(fe),W.error("Failed to load user history.")}finally{Ae(!1)}},[]);h.useEffect(()=>{Ie(),We(),gt()},[Ie,We,gt]),h.useEffect(()=>{Se==="leaderboard"&&(ve(),Be())},[Se,ve,Be]);const Te=h.useMemo(()=>{const ge=o.reduce((pt,Nt)=>pt+(Number(Nt.target_amount)||0),0),fe=o.reduce((pt,Nt)=>pt+(Number(Nt.achieved_amount)||0),0),Fe=ge>0?(fe/ge*100).toFixed(1):0,Xe=Math.max(0,ge-fe);return{totalTarget:ge,totalAchieved:fe,achievement:Fe,remaining:Xe,totalCount:o.length}},[o]),Qe=h.useCallback(()=>(fe=>R==="annual"?fe:fe.filter(Fe=>{const Xe=new Date(Fe.start_date),pt=new Date(Fe.end_date),Nt=Xe.getMonth(),St=pt.getMonth();let Ht=!1;if(R==="semiannual")pe===1?Ht=Nt<=5&&St>=0:Ht=Nt<=11&&St>=6;else if(R==="trimester"){const cn=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][pe-1];Ht=Nt<=cn.end&&St>=cn.start}else if(R==="quarterly"){const cn=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][pe-1];Ht=Nt<=cn.end&&St>=cn.start}return Ht}))(o),[o,R,pe]),ct=h.useMemo(()=>{const ge=Qe(),fe={};ge.forEach(Nt=>{const St=Nt.user_id,Ht=Nt.user?`${Nt.user.first_name} ${Nt.user.last_name}`:"Unknown";fe[St]||(fe[St]={userId:St,name:Ht,targetAmount:0,achievedAmount:0}),fe[St].targetAmount+=Number(Nt.target_amount)||0,fe[St].achievedAmount+=Number(Nt.achieved_amount)||0});const Fe=Object.values(fe).map((Nt,St)=>({...Nt,fill:c7[St%c7.length]})),Xe=Fe.reduce((Nt,St)=>Nt+St.targetAmount,0);return Fe.map(Nt=>({...Nt,percentage:Xe>0?(Nt.targetAmount/Xe*100).toFixed(1):0}))},[Qe]),ht=h.useMemo(()=>ct.slice(0,8).map(ge=>({name:ge.name.split(" ")[0],achievement:Number(ge.achievedAmount),target:Number(ge.targetAmount)})),[ct]),je=h.useMemo(()=>{const ge=p.toLowerCase();return o.filter(fe=>(fe.user?`${fe.user.first_name} ${fe.user.last_name}`.toLowerCase():"").includes(ge)||fe.start_date?.includes(ge)||fe.end_date?.includes(ge))},[o,p]),Ze=Math.max(1,Math.ceil(je.length/b)),ce=h.useMemo(()=>{const ge=(v-1)*b;return je.slice(ge,ge+b)},[je,v,b]),J=ge=>{const{name:fe,value:Fe}=ge.target;F(Xe=>({...Xe,[fe]:Fe}))},de=()=>{F(l7),k(!1),$(null),K(!1),S(!0)},D=ge=>{F({user_id:ge.user?.id?String(ge.user.id):"",start_date:ge.start_date||"",end_date:ge.end_date||"",target_amount:ge.target_amount?.toString()||"",period_type:ge.period_type||"CUSTOM",period_year:ge.period_year||new Date().getFullYear(),period_number:ge.period_number||1}),k(!0),$(ge.id),K(!1),S(!0),M(null)},B=ge=>{const fe=ge.user?`${ge.user.first_name} ${ge.user.last_name}`:"Unknown";Q({title:"Delete Target",message:n.jsxs("span",{children:["Are you sure you want to delete the target for"," ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await ae.delete(`/targets/admin/${ge.id}`),W.success("Target deleted successfully."),Ie(),M(null)}})},ie=()=>{if(ce.every(ge=>q.includes(ge.id)))ne(q.filter(ge=>!ce.map(fe=>fe.id).includes(ge)));else{const ge=ce.map(fe=>fe.id);ne([...new Set([...q,...ge])])}},ue=ge=>{ne(fe=>fe.includes(ge)?fe.filter(Fe=>Fe!==ge):[...fe,ge])},se=async()=>{q.length!==0&&Q({title:"Delete Targets",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:q.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${q.length} Target(s)`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await ae.post("/targets/admin/bulk-delete",{target_ids:q}),W.success(`Successfully deleted ${q.length} targets`),ne([]),Ie()}})},Pe=ge=>{if(ge.preventDefault(),K(!0),!z.user_id){W.error("Assign User is required.");return}if(!z.period_type){W.error("Period Type is required.");return}if(z.period_type==="CUSTOM"){W.error("Period Type cannot be Custom. Please select a valid period type.");return}if(z.period_type!=="CUSTOM"&&z.period_type!=="ANNUAL"&&!z.period_number){W.error("Please select a period.");return}if(!z.target_amount||Number(z.target_amount)<=0){W.error("Target amount must be greater than 0.");return}if(new Date(z.end_date)<new Date(z.start_date)){W.error("End date must be after start date.");return}const fe={user_id:Number(z.user_id),target_amount:Number(z.target_amount),start_date:z.start_date,end_date:z.end_date,period_type:z.period_type||"CUSTOM",period_year:z.period_year||new Date().getFullYear(),period_number:z.period_number||null},Fe=E?"Update Target":"Create Target";Q({title:Fe,message:"Are you sure you want to proceed?",confirmLabel:Fe,cancelLabel:"Cancel",variant:"primary",action:async()=>{A(!0);try{E?(await ae.put(`/targets/admin/${T}`,fe),W.success("Target updated successfully.")):(await ae.post("/targets/admin/create",fe),W.success("Target created successfully.")),S(!1),Ie()}catch(Xe){console.error(Xe);const pt=Xe.response?.data?.detail||Xe.message||"Operation failed.";W.error(pt)}finally{A(!1)}}})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&n.jsx(Bt,{message:"Loading targets..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[n.jsx(lr,{className:"mr-2 text-blue-600"})," Targets"]}),te&&n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:de,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&n.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[n.jsxs("button",{onClick:()=>Oe("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(xI,{className:"inline mr-2"}),"Overview"]}),n.jsxs("button",{onClick:()=>Oe("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(SS,{className:"inline mr-2"}),"Leaderboard"]}),n.jsxs("button",{onClick:()=>Oe("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(qs,{className:"inline mr-2"}),"History"]})]}),Se==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(Mc,{title:"Total Targets",value:Te.totalCount,icon:n.jsx(lr,{size:22}),color:"blue"}),n.jsx(Mc,{title:"Target Amount",value:`${r}${Te.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(i,{size:22}),color:"green"}),n.jsx(Mc,{title:"Achieved Amount",value:`${r}${Te.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(ad,{size:22}),color:"purple"}),n.jsx(Mc,{title:"Achievement Rate",value:`${Te.achievement}%`,icon:n.jsx(lr,{size:22}),color:"orange"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"mb-4 text-center",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),n.jsx("div",{className:"h-[38px] w-full invisible"})]}),ht.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(d2,{width:"100%",height:"100%",children:n.jsxs(IIe,{data:ht,children:[n.jsx(ck,{strokeDasharray:"3 3",vertical:!1}),n.jsx(gk,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(xk,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,ge=>Math.ceil(ge/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(w2,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:ge=>`Sales: ${ge}`,formatter:(ge,fe,Fe)=>{if(!Fe||!Fe.payload)return[ge,fe];const Xe=Fe.payload,pt=Number(Xe.achievement)||0,Nt=Number(Xe.target)||0,St=Math.max(0,Nt-pt),Ht=Nt>0?(pt/Nt*100).toFixed(1):0;return fe==="Achieved"?[`${r}${pt.toLocaleString()} (${Ht}%)`,"Achieved"]:fe==="Remaining"?[`${r}${St.toLocaleString()}`,"Remaining"]:[ge,fe]}}),n.jsx(fk,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:ge,y:fe,width:Fe,value:Xe,payload:pt})=>{if(!pt||pt.target===void 0)return null;const Nt=(Xe/pt.target*100).toFixed(0),St=fe-10<0?10:fe-10;return n.jsxs("text",{x:ge+Fe/2,y:St,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[Nt,"%"]})}}),n.jsx(fk,{dataKey:ge=>Math.max(0,ge.target-ge.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(vie,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[n.jsxs("select",{value:R,onChange:ge=>{ye(ge.target.value),Ne(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"annual",children:"Annual"}),n.jsx("option",{value:"semiannual",children:"Every 6 Months"}),n.jsx("option",{value:"trimester",children:"Every 4 Months"}),n.jsx("option",{value:"quarterly",children:"Quarterly"})]}),R!=="annual"&&n.jsxs("select",{value:pe,onChange:ge=>Ne(parseInt(ge.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[R==="semiannual"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Jun"}),n.jsx("option",{value:2,children:"Jul - Dec"})]}),R==="trimester"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Apr"}),n.jsx("option",{value:2,children:"May - Aug"}),n.jsx("option",{value:3,children:"Sep - Dec"})]}),R==="quarterly"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),n.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),n.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),n.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),ct.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(d2,{width:"100%",height:"100%",children:n.jsxs(QIe,{children:[n.jsx(w2,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:ge,payload:fe})=>{if(ge&&fe&&fe.length>0){const Fe=fe[0].payload;return n.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:Fe.name}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[n.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",r,Number(Fe.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),n.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",Fe.percentage,"%"]})]})}return null}}),n.jsx(gX,{data:ct,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:ge,percentage:fe,fill:Fe})=>n.jsxs("text",{fill:Fe,fontSize:12,fontWeight:600,children:[ge.split(" ")[0],": ",fe,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(xI,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),te&&n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search targets...",value:p,onChange:ge=>x(ge.target.value),className:"w-full outline-none"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:n.jsxs("tr",{children:[Ue&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ce.length>0&&ce.every(ge=>q.includes(ge.id)),onChange:ie})}),n.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),Ue&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:q.length>0?n.jsx("button",{onClick:se,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${q.length} selected targets`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:ce.length>0?ce.map(ge=>{const fe=Number(ge.target_amount)>0?(Number(ge.achieved_amount)/Number(ge.target_amount)*100).toFixed(1):0;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[Ue&&n.jsx("td",{className:"py-3 px-4",onClick:Fe=>Fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:q.includes(ge.id),onChange:()=>ue(ge.id)})}),n.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>M(ge),children:ge.user?`${ge.user.first_name} ${ge.user.last_name}`:"Unknown"}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>M(ge),children:[r,Number(ge.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>M(ge),children:[r,Number(ge.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(ge),children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${fe>=100?"bg-green-500":fe>=75?"bg-blue-500":fe>=50?"bg-yellow-500":"bg-red-500"}`,children:[fe,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(ge),children:ge.start_date}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(ge),children:ge.end_date}),n.jsx("td",{})]},ge.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:je.length,pageSize:b,currentPage:v,onPrev:()=>N(ge=>Math.max(ge-1,1)),onNext:()=>N(ge=>Math.min(ge+1,Ze)),onPageSizeChange:ge=>{C(ge),N(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),Se==="leaderboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),n.jsx("select",{value:Je,onChange:ge=>H(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((ge,fe)=>{const Fe=new Date().getFullYear()-fe;return n.jsx("option",{value:Fe,children:Fe},Fe)})}),n.jsxs("select",{value:be,onChange:ge=>{le(ge.target.value),_e(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"MONTHLY",children:"Monthly"}),n.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),n.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),n.jsx("option",{value:"ANNUAL",children:"Annual"})]}),be==="QUARTERLY"&&n.jsxs("select",{value:Z,onChange:ge=>_e(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"Q1"}),n.jsx("option",{value:2,children:"Q2"}),n.jsx("option",{value:3,children:"Q3"}),n.jsx("option",{value:4,children:"Q4"})]}),be==="SEMIANNUAL"&&n.jsxs("select",{value:Z,onChange:ge=>_e(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),n.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),be==="MONTHLY"&&n.jsx("select",{value:Z,onChange:ge=>_e(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((ge,fe)=>n.jsx("option",{value:fe+1,children:ge},fe))}),n.jsx("button",{onClick:ve,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),Re&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Mc,{title:"Sales Reps",value:Re.total_sales_reps,icon:n.jsx(aa,{size:22}),color:"blue"}),n.jsx(Mc,{title:"Met Quota",value:Re.above_target_count,icon:n.jsx(ad,{size:22}),color:"green"}),n.jsx(Mc,{title:"Below Quota",value:Re.below_target_count,icon:n.jsx(_S,{size:22}),color:"orange"}),n.jsx(Mc,{title:"Team Achievement",value:`${Re.overall_achievement}%`,icon:n.jsx(lr,{size:22}),color:"purple"})]}),Ge?n.jsx(Bt,{message:"Loading leaderboard..."}):ke?.entries?.length>0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[n.jsx(SS,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",ke.period_type!=="ALL"&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",ke.period_type," ",ke.period_year,")"]})]})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),n.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:ke.entries.map(ge=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${ge.rank===1?"bg-yellow-100 text-yellow-700":ge.rank===2?"bg-gray-100 text-gray-700":ge.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:ge.rank})}),n.jsx("td",{className:"py-3 px-4 font-medium",children:ge.user_name}),n.jsx("td",{className:"py-3 px-4 text-gray-500",children:ge.role}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(ge.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(ge.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${ge.achievement_percentage>=100?"bg-green-500":ge.achievement_percentage>=75?"bg-blue-500":ge.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[ge.achievement_percentage,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("button",{onClick:()=>{nt(ge.user_id),Oe("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},ge.user_id))})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(SS,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"No leaderboard data available for the selected period."})]}),Re?.needs_attention?.length>0&&n.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[n.jsx(_S,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Re.needs_attention.map(ge=>n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[n.jsx("p",{className:"font-medium text-gray-800",children:ge.user_name}),n.jsx("p",{className:"text-sm text-gray-500",children:ge.role}),n.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[n.jsxs("span",{className:"text-red-600 font-semibold",children:[ge.achievement_percentage,"%"]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[r,Number(ge.remaining_amount).toLocaleString()," remaining"]})]})]},ge.user_id))})]})]}),Se==="history"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),n.jsx("div",{className:"flex gap-4 flex-wrap",children:n.jsxs("select",{onChange:ge=>ge.target.value&&nt(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:xe?.user_id||"",children:[n.jsx("option",{value:"",children:"-- Select User --"}),c.map(ge=>n.jsxs("option",{value:ge.id,children:[ge.first_name," ",ge.last_name]},ge.id))]})})]}),Ee?n.jsx(Bt,{message:"Loading history..."}):xe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:xe.user_name}),xe.current_period&&xe.previous_period&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:xe.current_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[xe.current_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(xe.current_period.achieved_amount).toLocaleString()," / ",r,Number(xe.current_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:xe.previous_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[xe.previous_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(xe.previous_period.achieved_amount).toLocaleString()," / ",r,Number(xe.previous_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:`rounded-lg p-4 ${xe.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[n.jsx("p",{className:"text-sm font-medium",style:{color:xe.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),n.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${xe.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[xe.growth_percentage>=0?n.jsx(ad,{className:"mr-2"}):n.jsx(_S,{className:"mr-2"}),xe.growth_percentage>=0?"+":"",xe.growth_percentage?.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[xe.growth_amount>=0?"+":"",r,Number(xe.growth_amount||0).toLocaleString()]})]})]}),xe.periods?.length>0&&n.jsx("div",{className:"h-64",children:n.jsx(d2,{width:"100%",height:"100%",children:n.jsxs(OIe,{data:[...xe.periods].reverse(),children:[n.jsx(ck,{strokeDasharray:"3 3"}),n.jsx(gk,{dataKey:"period_label",tick:{fontSize:12}}),n.jsx(xk,{tick:{fontSize:12}}),n.jsx(w2,{formatter:(ge,fe)=>[`${r}${Number(ge).toLocaleString()}`,fe==="achieved_amount"?"Achieved":"Target"]}),n.jsx(mY,{}),n.jsx(dk,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2}),n.jsx(dk,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2})]})})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),n.jsx("tbody",{children:xe.periods.map((ge,fe)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:ge.period_label}),n.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[ge.start_date," - ",ge.end_date]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(ge.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(ge.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${ge.achievement_percentage>=100?"bg-green-500":ge.achievement_percentage>=75?"bg-blue-500":ge.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[ge.achievement_percentage,"%"]})})]},fe))})]})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(qs,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),P&&n.jsx(XIe,{target:P,currencySymbol:r,onClose:()=>M(null),onEdit:()=>D(P),onDelete:()=>B(P),canEdit:te,canDelete:Ue}),w&&te&&n.jsx(ZIe,{formData:z,users:c,isEditing:E,isSubmitting:_,isSubmitted:oe,onChange:J,onClose:()=>S(!1),onSubmit:Pe,fiscalSettings:De}),G&&n.jsx(JIe,{...G,loading:V,onConfirm:async()=>{X(!0),await G.action(),X(!1),Q(null)},onCancel:()=>Q(null)})]})}function Mc({title:e,value:t,icon:a,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[n.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:a}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),n.jsx("p",{className:"text-2xl font-bold",children:t})]})]})}function XIe({target:e,onClose:t,onEdit:a,onDelete:s,canEdit:r,canDelete:i,currencySymbol:o}){const l=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:c=>c.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),n.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:n.jsx(Xt,{size:25})})]}),r&&n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),i&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"})]}),n.jsxs("div",{className:"p-4 lg:p-6",children:[n.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),n.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),n.jsxs("p",{className:"text-green-600 font-semibold",children:[o,Number(e.target_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),n.jsxs("p",{className:"text-blue-600 font-semibold",children:[o,Number(e.achieved_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),n.jsxs("p",{className:`font-semibold ${l>=100?"text-green-600":l>=75?"text-blue-600":l>=50?"text-yellow-600":"text-red-600"}`,children:[l,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),n.jsx("p",{children:e.start_date})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),n.jsx("p",{children:e.end_date})]})]})})]})]})})}function ZIe({formData:e,users:t,isEditing:a,isSubmitting:s,onChange:r,onClose:i,onSubmit:o,fiscalSettings:l,isSubmitted:c}){const d=l?.fiscal_start_month||1,u=c&&(!e.target_amount||Number(e.target_amount)<=0),f=c&&(e.period_type==="CUSTOM"||!e.period_type),p=C=>{const w=C.getFullYear(),S=String(C.getMonth()+1).padStart(2,"0"),E=String(C.getDate()).padStart(2,"0");return`${w}-${S}-${E}`},x=(C,w,S)=>{let E,k;if(C==="MONTHLY")E=new Date(w,S-1,1),k=new Date(w,S,0);else if(C==="QUARTERLY"){const _=(S-1)*3,A=(d-1+_)%12;let T=w;d>1&&(A>=d-1?T=w-1:T=w),E=new Date(T,A,1);const $=(A+2)%12,z=A+2>=12?T+1:T;k=new Date(z,$+1,0)}else if(C==="SEMIANNUAL"){const _=(S-1)*6,A=(d-1+_)%12;let T=w;d>1&&(A>=d-1?T=w-1:T=w),E=new Date(T,A,1);const $=(A+5)%12,z=A+5>=12?T+1:T;k=new Date(z,$+1,0)}else if(C==="ANNUAL"){const _=d-1;let A=d>1?w-1:w;E=new Date(A,_,1);const T=(d-2+12)%12;k=new Date(A+1,T+1,0)}return{startDate:E,endDate:k}},v=C=>{const w=C.target.value;if(r({target:{name:"period_type",value:w}}),w!=="CUSTOM"){const S=e.period_year||new Date().getFullYear(),E=e.period_number||1,{startDate:k,endDate:_}=x(w,S,E);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}},N=C=>{const w=Number(C.target.value);r({target:{name:"period_number",value:w}});const S=e.period_year||new Date().getFullYear(),E=e.period_type;if(E!=="CUSTOM"){const{startDate:k,endDate:_}=x(E,S,w);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}},b=C=>{const w=Number(C.target.value);r({target:{name:"period_year",value:w}});const S=e.period_type,E=e.period_number||1;if(S!=="CUSTOM"){const{startDate:k,endDate:_}=x(S,w,E);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}};return h.useEffect(()=>{if(e.period_type!=="CUSTOM"&&!e.start_date){const C=e.period_year||new Date().getFullYear(),w=e.period_number||1,{startDate:S,endDate:E}=x(e.period_type,C,w);S&&E&&(r({target:{name:"start_date",value:p(S)}}),r({target:{name:"end_date",value:p(E)}}))}},[l]),n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:n.jsx(Xt,{size:24})}),n.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:a?"Edit Target":"Add New Target"}),n.jsxs("form",{onSubmit:o,noValidate:!0,className:"grid gap-4 text-base",children:[n.jsxs("div",{className:"flex flex-col gap-1 relative",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Assign User ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(KIe,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:C=>`${C.first_name} ${C.last_name}`,placeholder:"Search user...",required:!0,isSubmitted:c})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Period Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:"period_type",value:e.period_type,onChange:v,isSubmitted:c,className:`w-full border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                ${f?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`,children:YIe.map(C=>n.jsx("option",{value:C.value,children:C.label},C.value))})]}),e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),n.jsxs("select",{name:"period_number",value:e.period_number,onChange:N,required:!0,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((C,w)=>n.jsx("option",{value:w+1,children:C},w)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(C=>n.jsxs("option",{value:C,children:["Q",C," ",l?.quarters?.[`Q${C}`]?`(${l.quarters[`Q${C}`]})`:""]},C)),e.period_type==="SEMIANNUAL"&&[1,2].map(C=>n.jsxs("option",{value:C,children:["H",C," ",l?.halves?.[`H${C}`]?`(${l.halves[`H${C}`]})`:`(${C===1?"Jan-Jun":"Jul-Dec"})`]},C))]})]}),e.period_type!=="CUSTOM"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:d!==1?"Fiscal Year":"Year"}),n.jsx("select",{name:"period_year",value:e.period_year,onChange:b,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((C,w)=>{const S=new Date().getFullYear()+1-w;return n.jsx("option",{value:S,children:d!==1?`FY${S}`:S},S)})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Target Amount ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
        ${u?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Start Date ",e.period_type!=="CUSTOM"&&n.jsx("span",{className:"text-gray-400 text-xs",children:"(auto-calculated)"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":"Save Target"})]})]})]})})}function JIe({title:e,message:t,confirmLabel:a,cancelLabel:s,variant:r,loading:i,onConfirm:o,onCancel:l}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),n.jsx("button",{onClick:o,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":a})]})]})})}function e$e(){const{userRole:e}=Ys();return n.jsx(Uj,{currentUserRole:e,currentUserId:null})}const d7=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],I2={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},nb=e=>{const t=parseFloat(e.quantity)||0,a=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*a,i=r*(s/100),o=r-i;return{discount_amount:i,line_total:o}},Ic=(e,t="")=>{const a=parseFloat(e)||0;return`${t}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function hd({items:e=[],onChange:t,currencySymbol:a="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:o=0,onTotalsChange:l}){const[c,d]=h.useState(null),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState({...I2});h.useEffect(()=>{if(l){const T=e.reduce((M,G)=>M+(parseFloat(G.line_total)||0),0);let $=0;i==="percentage"&&o?$=T*(parseFloat(o)/100):i==="fixed"&&o&&($=parseFloat(o));const z=T-$,F=z*(parseFloat(r)/100),P=z+F;l({subtotal:T,discount_amount:$,tax_amount:F,total_amount:P})}},[e,r,i,o,l]);const b=h.useCallback(()=>{if(!v.name.trim()){W.error("Item name is required");return}if(parseFloat(v.unit_price)<=0){W.error("Unit price must be greater than 0");return}if(parseFloat(v.quantity)<=0){W.error("Quantity must be greater than 0");return}const T=nb(v),$={...v,...T,sort_order:e.length};t([...e,$]),N({...I2}),x(!1),W.success("Item added")},[v,e,t]),C=T=>{if(!u){W.error("No item being edited");return}if(!u.name.trim()){W.error("Item name is required");return}if(parseFloat(u.unit_price)<=0){W.error("Unit price must be greater than 0");return}if(parseFloat(u.quantity)<=0){W.error("Quantity must be greater than 0");return}const $=nb(u),z={...u,...$},F=e.map((P,M)=>M===T?z:P);t(F),d(null),f(null),W.success("Item updated")},w=h.useCallback(T=>{const $=e.filter((z,F)=>F!==T);$.forEach((z,F)=>{z.sort_order=F}),t($),W.success("Item removed")},[e,t]),S=h.useCallback((T,$)=>{const z=$==="up"?T-1:T+1;if(z<0||z>=e.length)return;const F=[...e];[F[T],F[z]]=[F[z],F[T]],F.forEach((P,M)=>{P.sort_order=M}),t(F)},[e,t]),E=T=>{d(T),f({...e[T]})},k=()=>{d(null),f(null)},_=e.reduce((T,$)=>T+(parseFloat($.line_total)||0),0),A=(T,$)=>c===$&&!s?n.jsxs("tr",{className:"bg-blue-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("select",{value:u.item_type,onChange:F=>f(P=>({...P,item_type:F.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:d7.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("input",{type:"text",value:u.name,onChange:F=>f(P=>({...P,name:F.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),n.jsx("input",{type:"text",value:u.variant||"",onChange:F=>f(P=>({...P,variant:F.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"text",value:u.sku||"",onChange:F=>f(P=>({...P,sku:F.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"number",value:u.quantity,onChange:F=>f(P=>({...P,quantity:F.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:u.unit||"",onChange:F=>f(P=>({...P,unit:F.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"number",value:u.unit_price,onChange:F=>f(P=>({...P,unit_price:F.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"number",value:u.discount_percent||0,onChange:F=>f(P=>({...P,discount_percent:F.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),n.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Ic(nb(u).line_total,a)}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>C($),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:n.jsx(Qk,{size:16})}),n.jsx("button",{type:"button",onClick:k,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:n.jsx(Xt,{size:16})})]})})]},T.id||`edit-${$}`):n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${T.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:T.item_type})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("div",{className:"font-medium text-gray-900",children:T.name}),T.variant&&n.jsx("div",{className:"text-xs text-gray-500",children:T.variant}),T.description&&n.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:T.description})]}),n.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:T.sku||"-"}),n.jsxs("td",{className:"px-3 py-2 text-center",children:[n.jsx("span",{className:"font-medium",children:parseFloat(T.quantity).toLocaleString()}),T.unit&&n.jsx("span",{className:"text-gray-500 text-sm ml-1",children:T.unit})]}),n.jsx("td",{className:"px-3 py-2 text-right",children:Ic(T.unit_price,a)}),n.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(T.discount_percent)>0?n.jsxs("span",{className:"text-red-600",children:["-",parseFloat(T.discount_percent).toFixed(1),"%"]}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Ic(T.line_total,a)}),!s&&n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>S($,"up"),disabled:$===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:n.jsx(Nie,{size:14})}),n.jsx("button",{type:"button",onClick:()=>S($,"down"),disabled:$===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:n.jsx(Tt,{size:14})}),n.jsx("button",{type:"button",onClick:()=>E($),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:n.jsx(ga,{size:14})}),n.jsx("button",{type:"button",onClick:()=>w($),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:n.jsx(Wt,{size:14})})]})})]},T.id||`row-${$}`);return n.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-300",children:[n.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&n.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&n.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[n.jsx(yn,{size:14}),"Add Item"]})]}),p&&!s&&n.jsxs("div",{className:"p-4 bg-blue-50 border border-gray-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),n.jsx("select",{value:v.item_type,onChange:T=>N({...v,item_type:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",children:d7.map(T=>n.jsx("option",{value:T.value,children:T.label},T.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:v.name,onChange:T=>N({...v,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),n.jsx("input",{type:"text",value:v.sku,onChange:T=>N({...v,sku:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),n.jsx("input",{type:"text",value:v.variant,onChange:T=>N({...v,variant:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:v.quantity,onChange:T=>N({...v,quantity:T.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:v.unit,onChange:T=>N({...v,unit:T.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:a}),n.jsx("input",{type:"number",value:v.unit_price,onChange:T=>N({...v,unit_price:T.target.value}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),n.jsx("input",{type:"number",value:v.discount_percent,onChange:T=>N({...v,discount_percent:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),n.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:Ic(nb(v).line_total,a)})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),n.jsx("textarea",{value:v.description,onChange:T=>N({...v,description:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[n.jsx("button",{onClick:()=>{x(!1),N({...I2})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),n.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&n.jsx("th",{className:"px-3 py-2 w-28"})]})}),n.jsx("tbody",{children:e.map((T,$)=>A(T,$))})]})}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("p",{children:"No items added yet."}),!s&&n.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&n.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"w-64 space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium",children:Ic(_,a)})]}),parseFloat(o)>0&&n.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[n.jsxs("span",{children:["Discount (",i==="percentage"?`${o}%`:"Fixed","):"]}),n.jsxs("span",{children:["-",Ic(i==="percentage"?_*(parseFloat(o)/100):parseFloat(o),a)]})]}),parseFloat(r)>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),n.jsx("span",{children:Ic((_-(i==="percentage"?_*(parseFloat(o)/100):parseFloat(o)||0))*(parseFloat(r)/100),a)})]}),n.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Ic((()=>{let T=0;i==="percentage"&&o?T=_*(parseFloat(o)/100):i==="fixed"&&o&&(T=parseFloat(o));const $=_-T,z=$*(parseFloat(r)/100);return $+z})(),a)})]})]})})})]})}const ha=e=>e==null?"":String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"),ZX=e=>{if(e==null||e==="")return 0;const t=Number(e);return Number.isFinite(t)?t:0},Qm=(e,t="")=>{const a=ZX(e);return`${t}${a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},t$e=e=>{if(!e)return null;const t=String(e).trim();return t?(t.startsWith("data:image/"),t):null},n$e=async(e,t=2500)=>{const a=[];try{const s=Array.from(e.images||[]);for(const r of s)r.complete||a.push(new Promise(i=>{r.addEventListener("load",i,{once:!0}),r.addEventListener("error",i,{once:!0})}))}catch{}e.fonts&&typeof e.fonts.ready?.then=="function"&&a.push(e.fonts.ready.catch(()=>{})),await Promise.race([Promise.all(a),new Promise(s=>setTimeout(s,t))])},a$e=async e=>{const t=document.createElement("iframe");t.setAttribute("aria-hidden","true"),t.style.position="fixed",t.style.right="0",t.style.bottom="0",t.style.width="0",t.style.height="0",t.style.border="0",t.style.opacity="0",t.style.pointerEvents="none",document.body.appendChild(t);const a=t.contentDocument,s=t.contentWindow;if(!a||!s)throw t.remove(),new Error("Print frame unavailable");return a.open(),a.write(e),a.close(),await n$e(a),await new Promise((r,i)=>{let o=!1;const l=()=>{if(!o){o=!0;try{t.remove()}catch{}}},c=()=>{l(),r(!0)},d=setTimeout(()=>{l(),r(!0)},4e3);try{s.addEventListener("afterprint",c,{once:!0}),s.focus(),s.print()}catch(u){clearTimeout(d),l(),i(u)}})};function Fj({quote:e,companyInfo:t,currencySymbol:a,title:s="Invoice"}){if(!e)throw new Error("Missing quote");const r=A=>A?new Date(A).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",i=A=>{if(!A)return"";const T=String(A).split("-");return T.length===3?`${T[0]}-${T[2]}`:String(A)},o=e.quote_id||e.id,l=i(o),c=r(e.created_at||e.updated_at),d=t?.company_name||"",u=t?.company_number||"",f=t?.ceo_email||"",p=t$e(t?.company_logo),x=e?.account?.name||"",v=e?.contact?`${e.contact.first_name||""} ${e.contact.last_name||""}`.trim():"",N=e?.contact?.email||"",b=Array.isArray(e.items)?e.items:[],C=e.subtotal??0,w=e.discount_amount??0,S=e.tax_amount??0,E=e.total_amount??0,k=b.length>0?b.map((A,T)=>{const $=ZX(A.quantity),z=A.unit||"",F=A.unit_price??0,P=A.line_total??0,G=[A.description,A.variant,A.sku].filter(Q=>Q!=null&&String(Q).trim()).map(Q=>String(Q).trim()).join("  ");return`
              <tr>
                <td>${T+1}</td>
                <td>
                  <div class="item-name">${ha(A.name||"")}</div>
                  ${G?`<div class="muted">${ha(G)}</div>`:""}
                </td>
                <td class="right">${ha($)}${z?` ${ha(z)}`:""}</td>
                <td class="right">${ha(Qm(F,a))}</td>
                <td class="right">${ha(Qm(P,a))}</td>
              </tr>
            `}).join(`
`):`
        <tr>
          <td colspan="5" class="muted">No line items.</td>
        </tr>
      `,_=`
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>${ha(s)} - ${ha(l)}</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');

      :root {
        --color-secondary: #232F3E;
        --color-tertiary: #37475A;
        --color-paper-white: #fbfbf8;
        --font-inter: "Inter", sans-serif;
      }

      @media print {
        .no-print { display: none !important; }
        html, body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      }

      html, body { margin: 0; padding: 0; }
      body {
        font-family: var(--font-inter);
        color: var(--color-secondary);
        background: #fff;
      }

      .page { padding: 28px; }
      .top-actions { display: flex; justify-content: flex-end; margin-bottom: 12px; gap: 8px; }
      button {
        border: 1px solid var(--color-tertiary);
        border-radius: 10px;
        background: var(--color-paper-white);
        color: var(--color-secondary);
        padding: 8px 10px;
        cursor: pointer;
        font-family: var(--font-inter);
      }

      .row { display: flex; gap: 16px; align-items: flex-start; justify-content: space-between; }
      .col { flex: 1; }
      .muted { font-size: 12px; opacity: 0.9; }
      .kicker { font-size: 10px; text-transform: uppercase; letter-spacing: 0.08em; opacity: 0.85; }
      .logo { max-height: 56px; max-width: 220px; object-fit: contain; }

      .card {
        border: 1px solid var(--color-tertiary);
        border-radius: 14px;
        background: #fff;
        padding: 14px;
      }

        .card-1 {
        background: #fff;
        padding: 14px;
      }

      .header { margin-bottom: 14px; }
      .title { margin: 0; font-size: 20px; font-weight: 700; }
      /* ===== Invoice Header Redesign ===== */

.invoice-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.invoice-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.invoice-center {
  flex: 1;
  text-align: center;
}

.invoice-right {
  text-align: right;
  min-width: 160px;
}

.quote-label {
  font-size: 12px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  opacity: 0.8;
}

.quote-number {
  font-size: 28px;
  font-weight: 900;
  letter-spacing: 0.6px;
}

.issued-label {
  font-size: 12px;
  opacity: 0.8;
}

.issued-date {
  font-size: 14px;
  font-weight: 700;
}

      .meta { font-size: 13px; line-height: 1.6; margin-top: 6px; }
      .meta strong { font-weight: 700; }

      .grid2 { display: grid; grid-template-columns: 1fr 360px; gap: 16px; align-items: start; }

      @media (max-width: 860px) {
        .grid2 { grid-template-columns: 1fr; }
      }

      table { width: 100%; border-collapse: collapse; margin-top: 14px; }
      th, td { border-bottom: 1px solid var(--color-tertiary); padding: 10px 8px; vertical-align: top; }
      th {
        text-align: left;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        background: var(--color-paper-white);
        border-top: 1px solid var(--color-tertiary);
      }
      tr:last-child td { border-bottom: 1px solid var(--color-tertiary); }

      .right { text-align: right; white-space: nowrap; }
      .item-name { font-weight: 700; font-size: 14px; margin-bottom: 2px; }

      .totalsWrap { display: flex; justify-content: flex-end; margin-top: 12px; }
      .totals {
        width: 360px;
        border: 1px solid var(--color-tertiary);
        border-radius: 14px;
        padding: 12px 14px;
        background: var(--color-paper-white);
      }
      .totalsRow { display: flex; justify-content: space-between; padding: 6px 0; font-size: 14px; }
      .totalsRow strong { font-weight: 800; }
      .divider { height: 1px; background: var(--color-tertiary); opacity: 0.6; margin: 10px 0; }

      .footer { margin-top: 18px; font-size: 12px; opacity: 0.9; }
    </style>
  </head>
  <body>
    <div class="page">
      <div class="top-actions no-print">
        <button onclick="window.print()">Print</button>
      </div>

      <div class="grid2 header">
        <div class="card-1">
  <div class="invoice-header-row">

    <!-- Left: Logo + Title -->
    <div class="invoice-left">
      ${p?`<img class="logo" alt="Company logo" src="${ha(p)}" />`:""}
      <div>
        <div class="kicker">Business Invoice</div>
        <div class="title">${ha(s)}</div>
      </div>
    </div>

    <!-- Center: Quote / Invoice No -->
    <div class="invoice-center">
      <div class="quote-label">Quote No</div>
      <div class="quote-number">${ha(l)}</div>
    </div>

    <!-- Right: Issued Date -->
    <div class="invoice-right">
      ${c?`
        <div class="issued-label">Issued</div>
        <div class="issued-date">${ha(c)}</div>
      `:""}
    </div>

  </div>
</div>


        <div class="card">
          <div style="font-weight:800; font-size: 14px; margin-bottom: 6px;">${ha(d)}</div>
          ${u?`<div class="meta">Company No: ${ha(u)}</div>`:""}
          ${f?`<div class="meta">Email: ${ha(f)}</div>`:""}
        </div>
      </div>

      <div class="card" style="margin-top: 14px;">
        <div class="kicker">Bill To</div>
        <div style="margin-top: 6px;">
          ${x?`<div style="font-weight:700;">${ha(x)}</div>`:""}
          ${v?`<div>${ha(v)}</div>`:""}
          ${N?`<div class="muted">${ha(N)}</div>`:""}
        </div>
      </div>

      <table>
        <thead>
          <tr>
            <th style="width: 44px;">#</th>
            <th>Item</th>
            <th style="width: 120px;" class="right">Qty</th>
            <th style="width: 140px;" class="right">Unit Price</th>
            <th style="width: 140px;" class="right">Line Total</th>
          </tr>
        </thead>
        <tbody>
          ${k}
        </tbody>
      </table>

      <div class="totalsWrap">
        <div class="totals">
          <div class="totalsRow"><div>Subtotal</div><div>${ha(Qm(C,a))}</div></div>
          <div class="totalsRow"><div>Discount</div><div>-${ha(Qm(w,a))}</div></div>
          <div class="totalsRow"><div>Tax</div><div>${ha(Qm(S,a))}</div></div>
          <div class="divider"></div>
          <div class="totalsRow"><div><strong>Total</strong></div><div><strong>${ha(Qm(E,a))}</strong></div></div>
        </div>
      </div>

      ${e.notes?`
        <div class="card" style="margin-top: 14px;">
          <div class="kicker">Notes</div>
          <div style="margin-top: 6px; white-space: pre-wrap; font-size: 13px;">${ha(e.notes)}</div>
        </div>
      `:""}

      <div class="footer">
        Generated from Sari-Sari CRM quote. This printout is for business use.
      </div>
    </div>
  </body>
</html>
  `.trim();a$e(_).catch(()=>{const A=window.open("","_blank","noopener,noreferrer");if(!A)throw new Error("Popup blocked. Please allow popups to print.");A.document.open(),A.document.write(_),A.document.close(),A.onload=()=>{try{A.focus(),A.print()}catch{}}})}const $2=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],R2={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Mi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},z2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",s$e=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},r$e=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},ab=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",bg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",i$e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},U2=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},u7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},F2=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},gw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},o$e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=gw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=gw(t);return a||null},l$e=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},c$e=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function d$e(){const e=wt(),t=Jt(),{user:a}=tn(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[E,k]=h.useState(!1),[_,A]=h.useState(!1),[T,$]=h.useState(!1),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState(!1),[V,X]=h.useState(null),[q,ne]=h.useState(R2),[oe,K]=h.useState(""),[R,ye]=h.useState("Filter by Status"),[pe,Ne]=h.useState(null),Se=h.useCallback(async()=>{if(w)try{Q(!0);const I=(await ae.get("/company/invoice-info"))?.data;Fj({quote:w,companyInfo:I,currencySymbol:s,title:"Invoice"})}catch(U){const I=U?.response?.data?.detail||U?.message||"Failed to print invoice.";W.error(I)}finally{Q(!1)}},[w,s]),[Oe,ke]=h.useState(1),[he,Ge]=h.useState(10),[Ce,xe]=h.useState("Overview"),[ee,Ee]=h.useState("Draft"),[Ae,Re]=h.useState([]),[et,De]=h.useState(null),{comments:tt,addComment:Je,refresh:H}=Ea({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&H()},[w?.id,H]),h.useEffect(()=>{const I=t.state?.quoteID;if(I){De(I),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(et&&r.length>0&&!o){const U=r.find(I=>I.id===et);U?S(U):W.error("Quote not found."),De(null)}},[et,p,o]),h.useEffect(()=>{let U=!0;return(async()=>{const me=o$e();if(me&&U){C(me);return}try{const Le=await ae.get("/auth/me"),$e=gw(Le?.data);if($e&&U){C($e);return}}catch{}try{const Le=await ae.get("/users/me"),$e=gw(Le?.data);if($e&&U){C($e);return}}catch{}U&&C(null)})(),()=>{U=!1}},[]);const be=h.useCallback(U=>U&&u.find(me=>String(me.id)===String(U))?.name||"",[u]),le=h.useCallback(U=>{if(!U)return"";const I=p.find(me=>String(me.id)===String(U));return I?`${I.first_name} ${I.last_name}`.trim():""},[p]),Z=h.useCallback(U=>{if(!U)return"--";const I=c.find(me=>String(me.id)===String(U));return I?.deal_name||I?.name||`Deal #${u7(U)}`},[c]),_e=h.useCallback(U=>{const I=c.find($e=>String($e.id)===String(U)),me=l$e(I);let Le=c$e(I);if(!Le&&me){const $e=p.filter(Ve=>String(Ve.account_id||"")===String(me));if($e.length>0){const Ve=[...$e].sort((Ye,At)=>{const Ct=`${Ye.first_name||""} ${Ye.last_name||""}`.trim().toLowerCase(),Kt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Kt)});Le=String(Ve[0].id)}}if(me&&Le){const $e=p.find(Ve=>String(Ve.id)===String(Le));$e?.account_id&&String($e.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),te=h.useCallback(U=>{if(!U)return"--";if(U.deal?.deal_name)return U.deal.deal_name;if(U.deal?.name)return U.deal.name;const I=U.deal_id||U.deal?.id;return I?Z(I):"--"},[Z]),Ue=h.useCallback(U=>{if(!U)return"--";if(U.account?.name)return U.account.name;let I=U.account_id||U.account?.id;if(!I){const me=U.deal_id||U.deal?.id;me&&(I=_e(me).accountId)}return I?be(I)||`Account #${I}`:"--"},[_e,be]),Ie=h.useCallback(U=>{if(!U)return"--";if(U.contact?.first_name||U.contact?.last_name)return`${U.contact?.first_name||""} ${U.contact?.last_name||""}`.trim()||"--";let I=U.contact_id||U.contact?.id;if(!I){const Le=U.deal_id||U.deal?.id;Le&&(I=_e(Le).contactId)}return(I?le(I):"")||(I?`Contact #${I}`:"--")},[_e,le]),We=h.useCallback(async(U=null)=>{l(!0);try{const I=await ae.get("/quotes/admin/fetch-all"),Le=[...Array.isArray(I.data)?I.data:[]].sort(($e,Ve)=>{const Ye=$e?.created_at||$e?.updated_at||0,At=Ve?.created_at||Ve?.updated_at||0;return new Date(At)-new Date(Ye)});if(i(Le),U){const $e=Le.find(Ve=>Ve.id===U);S($e||null)}}catch(I){console.error(I),i([]),I.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),gt=h.useCallback(async()=>{try{const U=await ae.get("/deals/admin/fetch-all");d(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load deals (permission denied).")}},[]),ve=h.useCallback(async()=>{try{const U=await ae.get("/accounts/admin/fetch-all");f(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const U=await ae.get("/contacts/admin/fetch-all");x(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},[]),nt=h.useCallback(async()=>{try{const U=await ae.get("/users/all");N(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{We(),gt(),ve(),Be(),nt()},[We,gt,ve,Be,nt]);const Te=h.useMemo(()=>{const U=oe.trim().toLowerCase(),I=R.trim();return r.filter(me=>{const Le=te(me),$e=Ue(me),Ve=Ie(me),Ye=U2(me.presented_date,me.validity_days),At=[me.quote_id,Le,$e,Ve,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?bg(me.presented_date):"",Ye?bg(Ye):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,ab(me.created_at),ab(me.updated_at)],Ct=U===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(U)),Kt=I==="Filter by Status"||Mi(me.status)===I;return Ct&&Kt})},[r,oe,R,te,Ue,Ie]),Qe=Math.max(1,Math.ceil(Te.length/he)||1);h.useEffect(()=>ke(1),[oe,R]),h.useEffect(()=>{ke(U=>{const I=Math.max(1,Math.ceil(Te.length/he)||1);return U>I?I:U})},[Te.length,he]);const ct=h.useMemo(()=>{const U=(Oe-1)*he;return Te.slice(U,U+he)},[Te,Oe,he]),ht=()=>ke(U=>Math.max(U-1,1)),je=()=>ke(U=>Math.min(U+1,Qe)),Ze=U=>{S(U),xe("Overview"),Ee(Mi(U?.status)||"Draft")},ce=()=>{S(null),xe("Overview")},J=U=>{U.target.id==="quoteModalBackdrop"&&!P&&ce()},de=h.useCallback(()=>{k(!1),A(!1),X(null),ne(R2),$(!1)},[]),D=U=>{U.target.id==="modalBackdrop"&&!T&&!P&&de()},B=U=>{const{name:I,value:me}=U.target;if(I==="deal_id"){const{accountId:Le,contactId:$e}=_e(me);ne(Ve=>({...Ve,deal_id:me,account_id:Le,contact_id:$e}));return}ne(Le=>({...Le,[I]:me}))},ie=()=>{const U=a?.company?.tax_rate??0;ne({...R2,tax_rate:U}),A(!1),X(null),k(!0)},ue=U=>{if(!U)return;S(null);const I=U.deal?.id?String(U.deal.id):U.deal_id?String(U.deal_id):"",me=I?_e(I):{accountId:"",contactId:""},Le=U.account?.id?String(U.account.id):U.account_id?String(U.account_id):me.accountId,$e=U.contact?.id?String(U.contact.id):U.contact_id?String(U.contact_id):me.contactId,Ve=U.assigned_user?.id?String(U.assigned_user.id):U.assigned_to?String(U.assigned_to):"";ne({deal_id:I,account_id:Le||"",contact_id:$e||"",total_amount:U.total_amount?.toString()||"",presented_date:i$e(U.presented_date),validity_days:U.validity_days!==null&&U.validity_days!==void 0?String(U.validity_days):"",status:Mi(U.status)||"Draft",assigned_to:Ve,notes:U.notes||"",subtotal:parseFloat(U.subtotal)||0,tax_rate:parseFloat(U.tax_rate)||0,tax_amount:parseFloat(U.tax_amount)||0,discount_type:U.discount_type||"",discount_value:parseFloat(U.discount_value)||0,discount_amount:parseFloat(U.discount_amount)||0,currency:U.currency||"PHP",items:Array.isArray(U.items)?U.items.map(Ye=>({id:Ye.id,item_type:Ye.item_type||"Product",name:Ye.name||"",description:Ye.description||"",sku:Ye.sku||"",variant:Ye.variant||"",unit:Ye.unit||"pcs",quantity:parseFloat(Ye.quantity)||1,unit_price:parseFloat(Ye.unit_price)||0,discount_percent:parseFloat(Ye.discount_percent)||0,discount_amount:parseFloat(Ye.discount_amount)||0,line_total:parseFloat(Ye.line_total)||0,sort_order:Ye.sort_order||0})):[]}),A(!0),X(U.id),k(!0)},se=U=>{if(U.target.checked){const I=ct.map(me=>me.id);Re(I)}else Re([])},Pe=U=>{Re(I=>I.includes(U)?I.filter(me=>me!==U):[...I,U])},ge=U=>{if(!U)return;const I=U.quote_id||"this quote";F({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:I}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id,name:I}})},fe=async()=>{Ae.length!==0&&F({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ae.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ae.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ae}})},[Fe,Xe]=h.useState(!1),pt=U=>{if(U.preventDefault(),Xe(!0),!b){W.error("Unable to determine current user. Please log in again.");return}if(!q.deal_id){W.error("Deal is required.");return}if(!q.assigned_to){W.error("Assigned To is required.");return}const me=_e(q.deal_id),Le=q.items.map((Ct,Kt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Kt})),$e={deal_id:Number(q.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(q.subtotal)||0,tax_rate:parseFloat(q.tax_rate)||0,tax_amount:parseFloat(q.tax_amount)||0,discount_type:q.discount_type||null,discount_value:parseFloat(q.discount_value)||0,discount_amount:parseFloat(q.discount_amount)||0,total_amount:parseFloat(q.total_amount)||0,currency:q.currency||"PHP",presented_date:q.presented_date||null,validity_days:q.validity_days===""?null:Number(q.validity_days),status:q.status||"Draft",assigned_to:q.assigned_to?Number(q.assigned_to):null,notes:q.notes?.trim()||null,items:Le},Ve=_&&V?"update":"create",Ye=Z(q.deal_id),At=Ve==="create"?{...$e,created_by_id:Number(b)}:$e;F({title:Ve==="create"?"Confirm New Quote":"Confirm Update",message:Ve==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}),confirmLabel:Ve==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:At,targetId:V||null,name:Ye}})},Nt=async()=>{if(!z?.action){F(null);return}const{action:U}=z,{type:I,payload:me,targetId:Le,name:$e}=U;M(!0);try{if(I==="create")$(!0),await ae.post("/quotes/admin",me),W.success("Quote created successfully."),de(),await We();else if(I==="update"){if(!Le)throw new Error("Missing quote identifier for update.");$(!0),await ae.put(`/quotes/admin/${Le}`,me),W.success("Quote updated successfully."),de(),await We(),w?.id===Le&&S(null)}else if(I==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Ve=w?.id;Ne(Le),await ae.delete(`/quotes/admin/${Le}`),W.success(`Quote "${$e}" deleted successfully.`),await We(Ve&&Ve!==Le?Ve:null),Ve===Le&&S(null)}else I==="bulk-delete"&&(await ae.post("/quotes/admin/bulk-delete",{quote_ids:Ae}),W.success(`Successfully deleted ${Ae.length} quotes`),Re([]),await We())}catch(Ve){console.error(Ve);const Ye=I==="create"?"Failed to create quote. Please review the details and try again.":I==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";W.error(Ye),(I==="create"||I==="update")&&$(!1),I==="delete"&&Ne(null)}finally{(I==="create"||I==="update")&&$(!1),I==="delete"&&Ne(null),M(!1),F(null)}},St=()=>{P||F(null)},Ht=h.useCallback((U,I)=>{const me=U?.deal_id??U?.deal?.id??"",Le=me?Number(me):null,$e=Le?_e(String(Le)):{accountId:"",contactId:""},Ve=U?.account_id??U?.account?.id??$e.accountId??null,Ye=U?.contact_id??U?.contact?.id??$e.contactId??null,At=U?.total_amount??0,Ct=U?.assigned_to??U?.assigned_user?.id??null;return{deal_id:Le,account_id:Ve!=null&&String(Ve).trim()!==""?Number(Ve):null,contact_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,total_amount:Number(At),presented_date:U?.presented_date||null,validity_days:U?.validity_days===""||U?.validity_days===void 0||U?.validity_days===null?null:Number(U.validity_days),status:I,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:U?.notes?.trim()||null}},[_e]),on=h.useCallback(async()=>{if(!w?.id)return;const U=Mi(ee),I=[U,U.toLowerCase()],me=async Le=>ae.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const $e of I)try{await me($e),Le=!0;break}catch(Ve){if(Ve?.response?.status===422)continue;throw Ve}if(!Le){const $e=Ht(w,U);if(!$e.deal_id){W.error("Cannot update status: missing deal_id on selected quote.");return}if(!$e.total_amount||$e.total_amount<=0){W.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ae.put(`/quotes/admin/${w.id}`,$e)}W.success(`Quote status updated to ${U}`),S(null),xe("Overview"),await We()}catch(Le){console.error(Le);const $e=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";W.error($e)}},[w,ee,We,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...$2.map(U=>({label:U.label,value:U.value}))],re=z?.action?.type==="delete"?z.action.targetId:null,ot=w&&(pe===w.id||re===w.id),Rt=w&&pe===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:J,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:U=>U.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:te(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${r$e(w.status)}`,children:z2(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Se,disabled:G||T||P,children:[n.jsx(hn,{className:"mr-2"}),G?"Preparing...":"Print Invoice"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||z?.action?.type==="update"&&z.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ge(w),disabled:!!ot,children:Rt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(U=>n.jsx("button",{onClick:()=>xe(U),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===U?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:U},U))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:F2(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:te(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:Ie(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:bg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:bg(U2(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:z2(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ab(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ab(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(hd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Ta,{comments:tt,onAddComment:Je})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${F2(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ee||Mi(w.status)||"Draft",onChange:U=>Ee(U.target.value),children:$2.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))}),n.jsx("button",{onClick:on,disabled:Mi(ee)===Mi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Mi(ee)===Mi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Yt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ie(),Xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:oe,onChange:U=>K(U.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:R,onChange:U=>ye(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ct.length>0&&Ae.length===ct.length,onChange:se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ae.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ae.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Te.length>0?ct.map(U=>{const I=U2(U.presented_date,U.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ze(U),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ae.includes(U.id),onChange:()=>Pe(U.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:F2(U.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:te(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ue(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ie(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:U.total_amount?`${s}${Number(U.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${s$e(U.status)}`,children:z2(U.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:U.assigned_user?`${U.assigned_user.first_name} ${U.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:bg(I)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},U.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Te.length,pageSize:he,currentPage:Oe,onPrev:ht,onNext:je,onPageSizeChange:U=>{Ge(U),ke(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=E?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:U=>U.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(h7,{label:"Deal",name:"deal_id",value:q.deal_id,onChange:U=>{const{accountId:I,contactId:me}=_e(U);ne(Le=>({...Le,deal_id:U,account_id:I,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:U=>`${u7(U?.deal_id??"")} ${U?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Fe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(f7,{label:"Account",value:be(q.account_id)||(q.account_id?`Account #${q.account_id}`:""),disabled:!0}),n.jsx(f7,{label:"Contact",value:le(q.contact_id)||(q.contact_id?`Contact #${q.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(hd,{items:q.items,onChange:U=>ne(I=>({...I,items:U})),currencySymbol:s,readOnly:T,taxRate:q.tax_rate,discountType:q.discount_type,discountValue:q.discount_value,onTotalsChange:U=>{ne(I=>({...I,subtotal:U.subtotal,discount_amount:U.discount_amount,tax_amount:U.tax_amount,total_amount:U.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:q.discount_type||"",onChange:U=>ne(I=>({...I,discount_type:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",q.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:q.discount_value||"",onChange:U=>ne(I=>({...I,discount_value:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:q.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!q.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:q.tax_rate??"",onChange:U=>ne(I=>({...I,tax_rate:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(q.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(m7,{label:"Presented Date",name:"presented_date",type:"date",value:q.presented_date,onChange:B,disabled:T}),n.jsx(m7,{label:"Validity Days",name:"validity_days",type:"number",value:q.validity_days,onChange:B,placeholder:"30",disabled:T}),n.jsx(h7,{label:"Assigned To",value:q.assigned_to||"",onChange:U=>ne(I=>({...I,assigned_to:U})),items:Array.isArray(v)?v:[],getLabel:U=>{const I=`${U?.first_name??""} ${U?.last_name??""}`.trim();if(!I)return U?.email||"";const me=U?.role?.toUpperCase()==="CEO"?"Admin":U?.role;return me?`${I} (${me})`:I},placeholder:"Search assignee...",required:!0,isSubmitted:Fe,disabled:T}),n.jsx(u$e,{label:"Status",name:"status",value:q.status,onChange:B,options:$2,required:!0,disabled:T}),n.jsx(f$e,{label:"Notes",name:"notes",value:q.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=z?n.jsx(h$e,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Yt,Me,vt]})}function m7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function f7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function u$e({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function h7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(m$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function m$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function f$e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function h$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const Bj=[{value:"CEO",label:"CEO"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],vg={firstName:"",lastName:"",email:"",password:"",role:""},g$e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},jo=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",p$e=e=>{const t=jo(e),a=Bj.find(s=>jo(s.value)===t);return a?a.value:e||""},wk=e=>{const t=jo(e),a=Bj.find(s=>jo(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},g7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},B2=(e,{size:t="sm"}={})=>{const a=jo(e),s=g$e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:wk(e)})},x$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},p7=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function y$e(){const{user:e,loading:t}=tn(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(vg),[E,k]=h.useState(!1),[_,A]=h.useState(null),[T,$]=h.useState(!1),[z,F]=h.useState(1),[P,M]=h.useState(10),[G,Q]=h.useState("Overview"),[V,X]=h.useState(""),[q,ne]=h.useState(!1),[oe,K]=h.useState([]),R=jo(e?.role),ye=["ADMIN","CEO"].includes(R),pe=!t&&ye,Ne=h.useMemo(()=>{const ve=Bj.filter(Be=>jo(Be.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ve]},[]),Se=h.useCallback(ve=>{ve&&(s(Be=>Be.map(nt=>nt.id===ve?{...nt,highlight:!0}:nt)),setTimeout(()=>{s(Be=>Be.map(nt=>nt.id===ve?{...nt,highlight:!1}:nt))},2e3))},[]),Oe=h.useCallback(async()=>{i(!0);try{const ve=await ae.get("/users/all"),Be=Array.isArray(ve.data)?ve.data:[],nt=p7(Be);s(nt),f(Te=>Te&&(nt.find(ct=>ct.id===Te.id)||null)),console.log(ve.data)}catch(ve){console.error("Error fetching users:",ve);const Be=ve.response?.data?.detail||"Failed to load users. Please try again later.";W.error(Be)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!ye&&e&&W.error("You are not authorized to access User Management.")},[ye,t,e]),h.useEffect(()=>{t||!ye||Oe()},[t,ye,Oe]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const ke=h.useMemo(()=>{const ve=o.trim().toLowerCase(),Be=jo(c);return p7(a.filter(nt=>{if(!nt)return!1;const Te=ve===""||[nt.first_name,nt.last_name,`${nt.first_name||""} ${nt.last_name||""}`,nt.email,wk(nt.role)].filter(Boolean).some(ct=>ct.toString().toLowerCase().includes(ve)),Qe=Be===""||Be==="CEO"&&["CEO","ADMIN"].includes(jo(nt.role))||jo(nt.role)===Be;return Te&&Qe}))},[a,o,c]),he=Math.max(1,Math.ceil(ke.length/P)||1);h.useEffect(()=>{F(1)},[o,c,P]),h.useEffect(()=>{F(ve=>{const Be=Math.max(1,Math.ceil(ke.length/P)||1);return ve>Be?Be:ve})},[ke.length,P]);const Ge=h.useMemo(()=>{const ve=(z-1)*P;return ke.slice(ve,ve+P)},[ke,z,P]);ke.length===0||(z-1)*P+1,Math.min(z*P,ke.length);const Ce=()=>F(ve=>Math.max(ve-1,1)),xe=()=>F(ve=>Math.min(ve+1,he)),ee=()=>{S(vg),N(!1),C(null),x(!0)},Ee=ve=>{f(ve),Q("Overview"),X(ve?.is_active?"Active":"Inactive")},Ae=ve=>{ve.target.id==="userModalBackdrop"&&!T&&Re()},Re=()=>{f(null)},et=(ve,Be)=>{S(nt=>({...nt,[ve]:Be}))},De=()=>{const ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Be="";for(let nt=0;nt<10;nt+=1)Be+=ve.charAt(Math.floor(Math.random()*ve.length));et("password",Be)},tt=()=>{E||T||(x(!1),S(vg),C(null),N(!1))},Je=ve=>{S({firstName:ve.first_name||"",lastName:ve.last_name||"",email:ve.email||"",password:"",role:p$e(ve.role)}),N(!0),C(ve.id),x(!0),f(null)},H=ve=>{A({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ve.first_name," ",ve.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ve.id,name:`${ve.first_name||""} ${ve.last_name||""}`.trim()||ve.email||"user"}})},be=ve=>{ve.preventDefault();const Be=w.firstName.trim(),nt=w.lastName.trim(),Te=w.email.trim(),Qe=w.password.trim(),ct=w.role,ht=!(v&&b);if(!Be||!Te||!ct){W.warn("Please fill in all required fields.");return}if(ht&&!Qe){W.warn("Please fill in all required fields.");return}if(Qe&&Qe.length<8){W.warn("Password should be at least 8 characters long.");return}const je={first_name:Be,last_name:nt,email:Te,role:ct};(ht||Qe)&&(je.password=Qe);const Ze=`${Be} ${nt}`.trim(),ce=ht?"create":"update";A({title:ce==="create"?"Confirm New User":"Confirm User Update",message:ce==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Ze})," with role"," ",n.jsx("span",{className:"font-semibold",children:wk(ct)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Ze||Te}),"?"]}),confirmLabel:ce==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:ce,payload:je,targetId:b,name:Ze||Te}})},le=async()=>{oe.length!==0&&A({title:"Delete Users",message:n.jsxs("span",{children:["Are you sure you want to deactivate"," ",n.jsx("span",{className:"font-semibold",children:oe.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${oe.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:oe}})},Z=ve=>{if(ve.target.checked){const Be=Ge.map(nt=>nt.id);K(Be)}else K([])},_e=ve=>{K(Be=>Be.includes(ve)?Be.filter(nt=>nt!==ve):[...Be,ve])},te=async()=>{if(!_?.action){A(null);return}const{action:ve}=_,{type:Be,payload:nt,targetId:Te,name:Qe}=ve;$(!0),(Be==="create"||Be==="update")&&k(!0);try{if(Be==="create"){const ht=(await ae.post("/users/createuser",nt)).data;await Oe(),Se(ht.id),W.success(`User "${Qe}" created successfully.`),x(!1),S(vg),C(null),N(!1)}else if(Be==="update"){if(!Te)throw new Error("Missing user identifier for update.");const ht=(await ae.put(`/users/updateuser/${Te}`,nt)).data;await Oe(),f(null),Se(ht.id),W.success(`User "${Qe}" updated successfully.`),x(!1),S(vg),C(null),N(!1)}else if(Be==="delete"){if(!Te)throw new Error("Missing user identifier for deletion.");await ae.delete(`/users/deleteuser/${Te}`),s(ct=>ct.map(ht=>ht.id===Te?{...ht,is_active:!1}:ht)),u&&u.id===Te&&(f(null),X("")),W.success(`User "${Qe}" deactivated successfully.`)}else Be==="bulk-delete"&&(await ae.delete("/users/admin/bulk-delete",{data:{user_ids:ve.user_ids}}),s(ct=>ct.map(ht=>ve.user_ids.includes(ht.id)?{...ht,is_active:!1}:ht)),u&&ve.user_ids.includes(u.id)&&(f(null),X("")),W.success(`Successfully deactivated ${ve.user_ids.length} users`),K([]))}catch(ct){console.error("User management error:",ct);const ht=Be==="create"?"Failed to create user. Please review the details and try again.":Be==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",je=ct.response?.data?.detail||ht;W.error(je)}finally{(Be==="create"||Be==="update")&&k(!1),$(!1),A(null)}},Ue=()=>{T||A(null)},Ie=async()=>{if(!u||!V)return;const ve=u.is_active?"Active":"Inactive";if(V===ve)return;const Be=V==="Active";ne(!0);try{const Te=(await ae.put(`/users/updateuser/${u.id}`,{is_active:Be})).data;s(Qe=>Qe.map(ct=>ct.id===Te.id?Te:ct)),f(null),X(""),W.success(`User status updated to ${V}`)}catch(nt){console.error("Failed to update user status:",nt);const Te=nt.response?.data?.detail||"Failed to update user status. Please try again.";W.error(Te)}finally{ne(!1)}},We=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!pe)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Bw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:ee,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ve=>l(ve.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ve=>d(ve.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ne.map(ve=>n.jsx("option",{value:ve.value,children:ve.label},ve.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ge.length>0&&Ge.every(ve=>oe.includes(ve.id)),onChange:Z})}),n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:oe.length>0?n.jsx("button",{onClick:le,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${oe.length} selected users`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):ke.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Ge.map(ve=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ve.highlight?"bg-green-50":""} ${ve.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4",onClick:Be=>Be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:oe.includes(ve.id),onChange:()=>_e(ve.id)})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ee(ve),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ve.first_name," ",ve.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ee(ve),children:ve.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ee(ve),children:B2(ve.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ee(ve),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ve.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ve.is_active?"Active":"Inactive"})})]},ve.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:ke.length,pageSize:P,currentPage:z,onPrev:Ce,onNext:xe,onPageSizeChange:ve=>{M(ve),F(1)},label:"users"})]}),gt=u?n.jsx("div",{id:"userModalBackdrop",onClick:Ae,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Re,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:x$e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),B2(u.role,{size:"md"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Je(u),disabled:T,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>H(u),disabled:T,children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ve=>n.jsx("button",{onClick:()=>Q(ve),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===ve?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ve},ve))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:B2(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,ve=>ve.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:g7(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?g7(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const ve=encodeURIComponent(u.email),Be=encodeURIComponent(""),nt=encodeURIComponent(""),Te=`https://mail.google.com/mail/?view=cm&fs=1&to=${ve}&su=${Be}&body=${nt}`;window.open(Te,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(u.is_active?"Active":"Inactive"),onChange:ve=>X(ve.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Ie,disabled:q||V===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${q||V===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:q?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[We,gt,n.jsx(b$e,{open:p,isEditing:v,isSubmitting:E,confirmProcessing:T,formData:w,onClose:tt,onSubmit:be,onChange:et,onGeneratePassword:De}),n.jsx(v$e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:te,onCancel:Ue})]})}function b$e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(sb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(sb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(sb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(sb,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...Bj],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function sb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function v$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const w$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function N$e(){const{user:e,loading:t,fetchUser:a}=tn(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,v]=h.useState(null),[N,b]=h.useState(null),C=h.useRef(null),[w,S]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[E,k]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),b(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const _=(F,P)=>{S(M=>({...M,[F]:P}))},A=(F,P)=>{k(M=>({...M,[F]:P}))},T=F=>{const P=F.target.files?.[0];if(!P)return;if(!P.type.startsWith("image/")){W.error("Please select an image file");return}if(P.size>5*1024*1024){W.error("Image size should be less than 5MB");return}const M=new FileReader;M.onloadend=()=>{v(M.result),b(M.result)},M.readAsDataURL(P)},$=async F=>{if(F.preventDefault(),!w.firstName.trim()||!w.lastName.trim()){W.warn("Please fill in all required fields.");return}r(!0);try{const P={first_name:w.firstName.trim(),last_name:w.lastName.trim(),phone_number:w.phoneNumber.trim()||null};x!==null&&(P.profile_picture=x),await ae.put("/users/me",P),await a(),o(!1),v(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),W.success("Account information updated successfully!")}catch(P){console.error("Error updating account:",P);const M=P.response?.data?.detail||"Failed to update account information. Please try again.";W.error(M)}finally{r(!1)}},z=async F=>{if(F.preventDefault(),!E.newPassword||!E.confirmPassword){W.warn("Please fill in all password fields.");return}if(E.newPassword.length<8){W.warn("Password must be at least 8 characters long.");return}if(E.newPassword!==E.confirmPassword){W.warn("New password and confirm password do not match.");return}p(!0);try{const P={password:E.newPassword};await ae.put("/users/me",P),await a(),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),W.success("Password changed successfully!")}catch(P){console.error("Error changing password:",P);const M=P.response?.data?.detail||"Failed to change password. Please try again.";W.error(M)}finally{p(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Bt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(sn,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&n.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ga,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[N?n.jsx("div",{className:"relative",children:n.jsx("img",{src:N,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:w$e(e.first_name,e.last_name)}),i&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:C,accept:"image/*",onChange:T,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(qH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?w.firstName:e.first_name," ",i?w.lastName:e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role.toUpperCase()==="CEO"&&"Admin"})]})]}),i?n.jsxs("form",{onSubmit:$,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.firstName,onChange:F=>_("firstName",F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.lastName,onChange:F=>_("lastName",F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:w.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:w.phoneNumber,onChange:F=>_("phoneNumber",F.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{o(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(null),b(e.profile_picture||null),C.current&&(C.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[n.jsx(Kk,{}),s?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(_o,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:z,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(_o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:l?void 0:{WebkitTextSecurity:"disc"},value:E.newPassword,onChange:F=>A("newPassword",F.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>c(F=>!F),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(_o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:d?void 0:{WebkitTextSecurity:"disc"},value:E.confirmPassword,onChange:F=>A("confirmPassword",F.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>u(F=>!F),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":d?"Hide password":"Show password",children:d?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:f,children:[n.jsx(_o,{}),f?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(QH,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function JX({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=wt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){W.error("No deal selected");return}if(!s||s===e.stage){W.info("Please select a different stage");return}const u=e.id;o(!0);try{await ae.put(`/deals/admin/${u}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{W.success("Deal status updated successfully")},300)}catch(f){console.error(f);const p=f.response?.data?.detail||"Failed to update deal status";W.error(p)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const u=encodeURIComponent(e.contact.email),f=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${u}?subject=${f}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:u=>r(u.target.value),disabled:i,children:c.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))}),n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function eZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l,relatedActs:c}){const d=wt(),[u]=Us(),f=u.get("id"),[p,x]=h.useState(e||null),[v,N]=h.useState(s||"Overview"),[b,C]=h.useState(null),[w,S]=h.useState(""),{userRole:E}=Ys(),{comments:k,addComment:_,refresh:A}=Ea({relatedType:"deal",relatedId:p?.id});h.useEffect(()=>{p?.id&&A()},[p?.id,A]);const T=s!==void 0?s:v;if(h.useEffect(()=>{E.toLowerCase()==="ceo"||E.toLowerCase()==="admin"?S("admin"):E.toLowerCase()==="group manager"||E.toLowerCase()==="group_manager"?S("group-manager"):E.toLowerCase()==="manager"?S("manager"):E.toLowerCase()==="sales"?S("sales"):S("guest")},[E]),h.useEffect(()=>{(async()=>{if(f&&!e)try{const G=((await ae.get("/deals/admin/fetch-all")).data||[]).find(Q=>Q.id===parseInt(f));if(G){const Q={...G,amount:typeof G.amount=="number"?G.amount:parseFloat(G.amount||0),probability:G.probability||0};x(Q)}else console.warn("Deal not found with ID:",f)}catch(P){console.error("Error fetching deal:",P)}})()},[f,e]),!p&&!f||f&&!p)return null;const $=F=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[F]||"bg-gray-100 text-gray-700";function z(F){return F?new Date(F).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${$(p.stage)}`,children:p.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",z(p.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(F=>n.jsx("button",{onClick:()=>{r?r(F):N(F)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${T===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[T==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",p.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const F=(p?.stage||"PROSPECTING").toUpperCase(),M=(Q=>Q==="PROSPECTING"?0:Q==="QUALIFICATION"?1:Q==="PROPOSAL"?2:Q==="NEGOTIATION"?3:Q==="CLOSED_WON"||Q==="CLOSED_LOST"?4:-1)(F);return[0,1,2,3,4].map(Q=>M===Q?"orange":M>Q?"green":"gray").map((Q,V)=>n.jsxs(yt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${Q==="green"?"bg-green-500 border-green-500":Q==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),V<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},V))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((F,P)=>n.jsx("span",{className:"text-center flex-1 break-words",children:F},P))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",p.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),T==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),n.jsx(Ta,{comments:k,onAddComment:_})]}),s==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map((F,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/tasks`,{state:{taskID:F.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:F.subject||F.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:F.description||"No description"}),F.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",F.assigned_to.first_name," ",F.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z(F.due_date||F.created_at)})]},`task-${P}`))})]}),c.meetings&&c.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map((F,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/meetings`,{state:{meetingID:F.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:F.subject||F.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:F.description||F.location||"No description"}),F.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",F.host.first_name," ",F.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z(F.start_time||F.created_at)})]},`meeting-${P}`))})]}),c.calls&&c.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map((F,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/calls`,{state:{callID:F.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:F.subject||F.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:F.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z(F.call_time||F.created_at)})]},`call-${P}`))})]}),c.quotes&&c.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),b==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map((F,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/quotes`,{state:{quoteID:F.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(F.quote_id?F.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:F.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z(F.presented_date)||""})]},`quote-${P}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]}),T==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(JX,{selectedDeal:p,onStatusUpdate:l,onClose:a})})]})]})]})})}function j$e(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Jt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[E,k]=h.useState(10),[_,A]=h.useState(!1),[T,$]=h.useState(null),[z,F]=h.useState(!1),[P,M]=h.useState([]),[G,Q]=h.useState(!1),[V,X]=h.useState(null),[q,ne]=h.useState([]),[oe,K]=h.useState([]),[R,ye]=h.useState([]),[pe,Ne]=h.useState({}),[Se,Oe]=h.useState(null);h.useEffect(()=>{const de=t.state,D=de?.dealID;if(D&&!de?.openDealModal){Oe(D),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Se&&v?.length>0&&!b){const de=v.find(D=>D.id===Se);de?d(de):W.error("Deal not found."),Oe(null)}},[Se,v,b]);const[ke,he]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Ge={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Ce=de=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[de]||de||"--",xe=de=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[de]||"bg-gray-100 text-gray-700",ee=h.useCallback(async de=>{try{const D=await ae.get(`/activities/deal/${de}`);Ne(D.data&&typeof D.data=="object"?D.data:{})}catch(D){console.error(D),D.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]),Ee=h.useMemo(()=>{const de=a.trim().toLowerCase(),D=r.trim(),B=o.trim();return(v??[]).filter(ie=>{const ue=[ie?.name,ie?.description,ie?.account?.name,ie?.contact?.first_name,ie?.contact?.last_name,ie?.assigned_deals?.first_name,ie?.assigned_deals?.last_name],se=de===""||ue.some(fe=>fe==null||fe===""?!1:fe.toString().toLowerCase().includes(de)),Pe=D==="Filter by Stage"||D===""||ie.stage===Ge[D]||ie.stage===D,ge=B==="Filter by Owner"||B===""||`${ie.assigned_deals?.first_name||""} ${ie.assigned_deals?.last_name||""}`.trim().toLowerCase()===B.toLowerCase();return se&&Pe&&ge})},[v,a,r,o]),Ae=Math.max(1,Math.ceil(Ee.length/E)||1);h.useEffect(()=>{S(1)},[a,r,o,E]),h.useEffect(()=>{S(de=>{const D=Math.max(1,Math.ceil(Ee.length/E)||1);return de>D?D:de})},[Ee.length,E]);const Re=h.useMemo(()=>{const de=(w-1)*E;return Ee.slice(de,de+E)},[Ee,w,E]),et=()=>S(de=>Math.max(de-1,1)),De=()=>S(de=>Math.min(de+1,Ae)),tt=()=>{he({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Q(!1),X(null),x(!0)},Je=async()=>{C(!0);try{const de=await ae.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((ie,ue)=>{const se=ie?.created_at?new Date(ie.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-se});N(B)}catch(de){de.response&&de.response.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch deals. Please try again later."),console.error(de)}finally{C(!1)}},H=async()=>{try{const de=await ae.get("/accounts/admin/fetch-all");ne(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},be=async()=>{try{const de=await ae.get("/contacts/admin/fetch-all");K(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},le=async()=>{try{const de=await ae.get("/users/all");ye(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&W.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Je(),H(),be(),le()},[]);const Z=de=>{de&&(he({id:de.id||null,name:de.name||"",account_id:de.account_id?.toString()||"",primary_contact_id:de.primary_contact_id?.toString()||"",stage:de.stage||"PROPOSAL",amount:de.amount?.toString()||"",close_date:de.close_date?new Date(de.close_date).toISOString().split("T")[0]:"",assigned_to:de.assigned_to?.toString()||"",currency:de.currency||"PHP",description:de.description||""}),Q(!0),X(de.id),d(null),x(!0))},_e=async(de=!1)=>{try{const D=await ae.get("/deals/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>{const Pe=ue?.created_at?new Date(ue.created_at).getTime():0;return(se?.created_at?new Date(se.created_at).getTime():0)-Pe});if(N(ie),!de&&c&&c.id){const ue=ie.find(se=>se.id===c.id);ue&&d({...ue})}}catch(D){console.error("Failed to refresh deal data:",D),await Je()}},te=de=>{const D=de.name.trim();if(!D){W.error("Deal name is required.");return}if(!de.account_id){W.error("Account is required.");return}const B=G&&V?"update":"create",ie=D;$({title:B==="create"?"Confirm New Deal":"Confirm Update",message:B==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:ie}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ie}),"?"]}),confirmLabel:B==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:B,formData:de,targetId:V||null,name:ie}})},Ue=de=>{if(!de)return;const D=de.name||"this deal";$({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:D}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:de.id,name:D}})},Ie=de=>{if(de.target.checked){const D=Re.map(B=>B.id);M(D)}else M([])},We=de=>{M(D=>D.includes(de)?D.filter(B=>B!==de):[...D,de])},gt=async()=>{P.length!==0&&$({title:"Delete Deals",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:P.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${P.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:P}})},ve=async()=>{if(!T?.action){$(null);return}const{action:de}=T,{type:D,formData:B,targetId:ie,name:ue}=de;F(!0);try{if(D==="create"){A(!0);const se={name:B.name.trim(),account_id:parseInt(B.account_id),primary_contact_id:B.primary_contact_id?parseInt(B.primary_contact_id):null,stage:B.stage,amount:B.amount?parseFloat(B.amount):null,currency:B.currency||"PHP",close_date:B.close_date||null,description:B.description||null,assigned_to:B.assigned_to?parseInt(B.assigned_to):null};await ae.post("/deals/admin/create",se),W.success(`Deal "${ue}" created successfully.`),x(!1),await Je()}else if(D==="update"){if(!ie)throw new Error("Missing deal identifier for update.");A(!0);const se={};B.name!==void 0&&(se.name=B.name.trim()),B.account_id!==void 0&&B.account_id!==""&&(se.account_id=parseInt(B.account_id)),B.primary_contact_id!==void 0&&(se.primary_contact_id=B.primary_contact_id?parseInt(B.primary_contact_id):null),B.stage!==void 0&&(se.stage=B.stage),B.amount!==void 0&&B.amount!==""&&(se.amount=parseFloat(B.amount)),B.currency!==void 0&&(se.currency=B.currency),B.close_date!==void 0&&(se.close_date=B.close_date||null),B.description!==void 0&&(se.description=B.description||null),B.assigned_to!==void 0&&(se.assigned_to=B.assigned_to?parseInt(B.assigned_to):null),await ae.put(`/deals/admin/${ie}`,se),W.success(`Deal "${ue}" updated successfully.`),x(!1),await Je()}else if(D==="delete"){if(!ie)throw new Error("Missing deal identifier for deletion.");await ae.delete(`/deals/admin/${ie}`),W.success(`Deal "${ue}" deleted successfully.`),c?.id===ie&&d(null),await Je()}else if(D==="bulk-delete"){const{dealIds:se}=de;await ae.delete("/deals/admin/bulk-delete",{data:{deal_ids:se}}),W.success(`Successfully deleted ${se.length} deals`),M([]),await Je()}}catch(se){console.error(se);const Pe=D==="create"?"Failed to create deal. Please review the details and try again.":D==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",ge=se.response?.data?.detail||Pe;W.error(ge)}finally{(D==="create"||D==="update")&&A(!1),F(!1),$(null)}},Be=()=>{z||$(null)},nt=()=>{x(!1),he({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Q(!1),X(null),A(!1)},Te=(v??[]).filter(de=>de.stage==="PROSPECTING").length,Qe=(v??[]).filter(de=>de.stage==="QUALIFICATION").length,ct=(v??[]).filter(de=>de.stage==="PROPOSAL").length,ht=(v??[]).filter(de=>de.stage==="NEGOTIATION").length,je=(v??[]).filter(de=>de.stage==="CLOSED_WON").length,Ze=(v??[]).filter(de=>de.stage==="CLOSED_LOST").length,ce=(v??[]).filter(de=>de.stage==="CLOSED_CANCELLED").length,J=[{title:"Prospecting",value:Te,icon:Hw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Qe,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:ct,icon:en,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ht,icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:je,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Ze,icon:zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ce,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(en,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:tt,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:J.map(de=>n.jsx(S$e,{...de},de.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:de=>s(de.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:de=>i(de.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:de=>l(de.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(de=>`${de.assigned_deals?.first_name} ${de.assigned_deals?.last_name}`))].map((de,D)=>n.jsx("option",{value:de,children:de},D))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Re.length>0&&Re.every(de=>P.includes(de.id)),onChange:Ie})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:P.length>0?n.jsx("button",{onClick:gt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${P.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ee.length>0?Re.map(de=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...de}),ee(de.id)},children:[n.jsx("td",{className:"py-3 px-4",onClick:D=>D.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:P.includes(de.id),onChange:()=>We(de.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.deal_id?de.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:de.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:de.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.contact?.first_name&&de.contact?.last_name?`${de.contact.first_name} ${de.contact.last_name}`:de.contact?.first_name||de.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${xe(de.stage)}`,children:Ce(de.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",de.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.assigned_deals?.first_name&&de.assigned_deals?.last_name?`${de.assigned_deals.first_name} ${de.assigned_deals.last_name}`:de.assigned_deals?.first_name||de.assigned_deals?.last_name||"--"})]},de.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ee.length,pageSize:E,currentPage:w,onPrev:et,onNext:De,onPageSizeChange:de=>{k(de),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(_$e,{onClose:nt,formData:ke,setFormData:he,isEditing:G,onSubmit:te,isSubmitting:_||z,accounts:q,contacts:oe,users:R}),c&&n.jsx(eZ,{relatedActs:pe,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:Z,onDelete:Ue,onStatusUpdate:_e}),T&&n.jsx(C$e,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ve,onCancel:Be,loading:z})]})}function C$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function S$e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function _$e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[]}){const[d,u]=h.useState(!1),f=v=>{if(v.preventDefault(),u(!0),!t.name?.trim()){W.error("Deal name is required.");return}const N=Number(t.amount);if(!t.amount||isNaN(N)||N<=0){W.error("Amount must be a number greater than 0.");return}if(!t.account_id){W.error("Please select an account.");return}if(!t.primary_contact_id){W.error("Please select a primary contact.");return}if(!t.assigned_to){W.error("Please assign this deal to a user.");return}r?.(t)},p=v=>{v.target.id==="modalBackdrop"&&e()},x=h.useMemo(()=>{const v=String(t.account_id||"").trim(),N=Array.isArray(l)?l:[];return v?N.filter(b=>{const w=[b?.account_id,b?.accountId,b?.account?.id,b?.account?.account_id,b?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return w?String(w)===v:!1}):N},[l,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),N=String(t.primary_contact_id||"").trim();if(!N||!v)return;x.some(C=>String(C?.id)===N)||a(C=>({...C,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,a]),n.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:f,noValidate:!0,children:[n.jsx(H2,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(G2,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:d}),n.jsx(G2,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:x||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:d,disabled:i}),n.jsx(x7,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(H2,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:d}),n.jsx(x7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(H2,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(G2,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(T$e,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function H2({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function x7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function G2({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(A$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function A$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function T$e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var E$e=Object.defineProperty,k$e=(e,t,a)=>t in e?E$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,W2=(e,t,a)=>(k$e(e,typeof t!="symbol"?t+"":t,a),a);let L$e=class{constructor(){W2(this,"current",this.detect()),W2(this,"handoffState","pending"),W2(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Do=new L$e;function i0(e){var t;return Do.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function Nk(e){var t,a;return Do.isServer?null:e==null?document:(a=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?a:document}function tZ(e){var t,a;return(a=(t=Nk(e))==null?void 0:t.activeElement)!=null?a:null}function P$e(e){return tZ(e)===e}function Hj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function lc(){let e=[],t={addEventListener(a,s,r,i){return a.addEventListener(s,r,i),t.add(()=>a.removeEventListener(s,r,i))},requestAnimationFrame(...a){let s=requestAnimationFrame(...a);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...a){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...a))},setTimeout(...a){let s=setTimeout(...a);return t.add(()=>clearTimeout(s))},microTask(...a){let s={current:!0};return Hj(()=>{s.current&&a[0]()}),t.add(()=>{s.current=!1})},style(a,s,r){let i=a.style.getPropertyValue(s);return Object.assign(a.style,{[s]:r}),this.add(()=>{Object.assign(a.style,{[s]:i})})},group(a){let s=lc();return a(s),this.add(()=>s.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let s=e.indexOf(a);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let a of e.splice(0))a()}};return t}function Gj(){let[e]=h.useState(lc);return h.useEffect(()=>()=>e.dispose(),[e]),e}let hr=(e,t)=>{Do.isServer?h.useEffect(e,t):h.useLayoutEffect(e,t)};function em(e){let t=h.useRef(e);return hr(()=>{t.current=e},[e]),t}let Vn=function(e){let t=em(e);return yt.useCallback((...a)=>t.current(...a),[t])};function o0(e){return h.useMemo(()=>e,Object.values(e))}let D$e=h.createContext(void 0);function O$e(){return h.useContext(D$e)}function jk(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Vl(e,t,...a){if(e in t){let r=t[e];return typeof r=="function"?r(...a):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Vl),s}var pw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(pw||{}),Xc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Xc||{});function Ei(){let e=I$e();return h.useCallback(t=>M$e({mergeRefs:e,...t}),[e])}function M$e({ourProps:e,theirProps:t,slot:a,defaultTag:s,features:r,visible:i=!0,name:o,mergeRefs:l}){l=l??$$e;let c=nZ(t,e);if(i)return rb(c,a,s,o,l);let d=r??0;if(d&2){let{static:u=!1,...f}=c;if(u)return rb(f,a,s,o,l)}if(d&1){let{unmount:u=!0,...f}=c;return Vl(u?0:1,{0(){return null},1(){return rb({...f,hidden:!0,style:{display:"none"}},a,s,o,l)}})}return rb(c,a,s,o,l)}function rb(e,t={},a,s,r){let{as:i=a,children:o,refName:l="ref",...c}=q2(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},u=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let p=!1,x=[];for(let[v,N]of Object.entries(t))typeof N=="boolean"&&(p=!0),N===!0&&x.push(v.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(p){f["data-headlessui-state"]=x.join(" ");for(let v of x)f[`data-${v}`]=""}}if(ep(i)&&(Object.keys(Zd(c)).length>0||Object.keys(Zd(f)).length>0))if(!h.isValidElement(u)||Array.isArray(u)&&u.length>1||z$e(u)){if(Object.keys(Zd(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Zd(c)).concat(Object.keys(Zd(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,x=p?.className,v=typeof x=="function"?(...C)=>jk(x(...C),c.className):jk(x,c.className),N=v?{className:v}:{},b=nZ(u.props,Zd(q2(c,["ref"])));for(let C in f)C in b&&delete f[C];return h.cloneElement(u,Object.assign({},b,f,d,{ref:r(R$e(u),d.ref)},N))}return h.createElement(i,Object.assign({},q2(c,["ref"]),!ep(i)&&d,!ep(i)&&f),u)}function I$e(){let e=h.useRef([]),t=h.useCallback(a=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(a):s.current=a)},[]);return(...a)=>{if(!a.every(s=>s==null))return e.current=a,t}}function $$e(...e){return e.every(t=>t==null)?void 0:t=>{for(let a of e)a!=null&&(typeof a=="function"?a(t):a.current=t)}}function nZ(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(a[r]!=null||(a[r]=[]),a[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(a[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in a)Object.assign(t,{[s](r,...i){let o=a[s];for(let l of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function Nr(e){var t;return Object.assign(h.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Zd(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function q2(e,t=[]){let a=Object.assign({},e);for(let s of t)s in a&&delete a[s];return a}function R$e(e){return yt.version.split(".")[0]>="19"?e.props.ref:e.ref}function ep(e){return e===h.Fragment||e===Symbol.for("react.fragment")}function z$e(e){return ep(e.type)}let U$e="span";var xw=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(xw||{});function F$e(e,t){var a;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(a=r["aria-hidden"])!=null?a:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Ei()({ourProps:i,theirProps:r,slot:{},defaultTag:U$e,name:"Hidden"})}let Ck=Nr(F$e);function B$e(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function sd(e){return B$e(e)&&"tagName"in e}function Fu(e){return sd(e)&&"accessKey"in e}function Zc(e){return sd(e)&&"tabIndex"in e}function H$e(e){return sd(e)&&"style"in e}function G$e(e){return Fu(e)&&e.nodeName==="IFRAME"}function W$e(e){return Fu(e)&&e.nodeName==="INPUT"}let aZ=Symbol();function q$e(e,t=!0){return Object.assign(e,{[aZ]:t})}function qo(...e){let t=h.useRef(e);h.useEffect(()=>{t.current=e},[e]);let a=Vn(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[aZ])?void 0:a}let CD=h.createContext(null);CD.displayName="DescriptionContext";function sZ(){let e=h.useContext(CD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,sZ),t}return e}function V$e(){let[e,t]=h.useState([]);return[e.length>0?e.join(" "):void 0,h.useMemo(()=>function(a){let s=Vn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=h.useMemo(()=>({register:s,slot:a.slot,name:a.name,props:a.props,value:a.value}),[s,a.slot,a.name,a.props,a.value]);return yt.createElement(CD.Provider,{value:r},a.children)},[t])]}let Q$e="p";function Y$e(e,t){let a=h.useId(),s=O$e(),{id:r=`headlessui-description-${a}`,...i}=e,o=sZ(),l=qo(t);hr(()=>o.register(r),[r,o.register]);let c=o0({...o.slot,disabled:s||!1}),d={ref:l,...o.props,id:r};return Ei()({ourProps:d,theirProps:i,slot:c,defaultTag:Q$e,name:o.name||"Description"})}let K$e=Nr(Y$e),X$e=Object.assign(K$e,{});var rZ=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(rZ||{});let Z$e=h.createContext(()=>{});function J$e({value:e,children:t}){return yt.createElement(Z$e.Provider,{value:e},t)}let iZ=class extends Map{constructor(t){super(),this.factory=t}get(t){let a=super.get(t);return a===void 0&&(a=this.factory(t),this.set(t,a)),a}};var e6e=Object.defineProperty,t6e=(e,t,a)=>t in e?e6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,n6e=(e,t,a)=>(t6e(e,t+"",a),a),oZ=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},si=(e,t,a)=>(oZ(e,t,"read from private field"),a?a.call(e):t.get(e)),V2=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},y7=(e,t,a,s)=>(oZ(e,t,"write to private field"),t.set(e,a),a),po,Fg,Bg;let a6e=class{constructor(t){V2(this,po,{}),V2(this,Fg,new iZ(()=>new Set)),V2(this,Bg,new Set),n6e(this,"disposables",lc()),y7(this,po,t),Do.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return si(this,po)}subscribe(t,a){if(Do.isServer)return()=>{};let s={selector:t,callback:a,current:t(si(this,po))};return si(this,Bg).add(s),this.disposables.add(()=>{si(this,Bg).delete(s)})}on(t,a){return Do.isServer?()=>{}:(si(this,Fg).get(t).add(a),this.disposables.add(()=>{si(this,Fg).get(t).delete(a)}))}send(t){let a=this.reduce(si(this,po),t);if(a!==si(this,po)){y7(this,po,a);for(let s of si(this,Bg)){let r=s.selector(si(this,po));lZ(s.current,r)||(s.current=r,s.callback(r))}for(let s of si(this,Fg).get(t.type))s(si(this,po),t)}}};po=new WeakMap,Fg=new WeakMap,Bg=new WeakMap;function lZ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Q2(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Q2(e.entries(),t.entries()):b7(e)&&b7(t)?Q2(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Q2(e,t){do{let a=e.next(),s=t.next();if(a.done&&s.done)return!0;if(a.done||s.done||!Object.is(a.value,s.value))return!1}while(!0)}function b7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var s6e=Object.defineProperty,r6e=(e,t,a)=>t in e?s6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,v7=(e,t,a)=>(r6e(e,typeof t!="symbol"?t+"":t,a),a),i6e=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(i6e||{});let o6e={0(e,t){let a=t.id,s=e.stack,r=e.stack.indexOf(a);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(a),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,a]}},1(e,t){let a=t.id,s=e.stack.indexOf(a);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},l6e=class cZ extends a6e{constructor(){super(...arguments),v7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),v7(this,"selectors",{isTop:(t,a)=>t.stack[t.stack.length-1]===a,inStack:(t,a)=>t.stack.includes(a)})}static new(){return new cZ({stack:[]})}reduce(t,a){return Vl(a.type,o6e,t,a)}};const dZ=new iZ(()=>l6e.new());function uZ(e,t,a=lZ){return e5e.useSyncExternalStoreWithSelector(Vn(s=>e.subscribe(c6e,s)),Vn(()=>e.state),Vn(()=>e.state),Vn(t),a)}function c6e(e){return e}function l0(e,t){let a=h.useId(),s=dZ.get(t),[r,i]=uZ(s,h.useCallback(o=>[s.selectors.isTop(o,a),s.selectors.inStack(o,a)],[s,a]));return hr(()=>{if(e)return s.actions.push(a),()=>s.actions.pop(a)},[s,e,a]),e?i?r:!0:!1}let Sk=new Map,tp=new Map;function w7(e){var t;let a=(t=tp.get(e))!=null?t:0;return tp.set(e,a+1),a!==0?()=>N7(e):(Sk.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>N7(e))}function N7(e){var t;let a=(t=tp.get(e))!=null?t:1;if(a===1?tp.delete(e):tp.set(e,a-1),a!==1)return;let s=Sk.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,Sk.delete(e))}function d6e(e,{allowed:t,disallowed:a}={}){let s=l0(e,"inert-others");hr(()=>{var r,i;if(!s)return;let o=lc();for(let c of(r=a?.())!=null?r:[])c&&o.add(w7(c));let l=(i=t?.())!=null?i:[];for(let c of l){if(!c)continue;let d=i0(c);if(!d)continue;let u=c.parentElement;for(;u&&u!==d.body;){for(let f of u.children)l.some(p=>f.contains(p))||o.add(w7(f));u=u.parentElement}}return o.dispose},[s,t,a])}function u6e(e,t,a){let s=em(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});h.useEffect(()=>{if(!e)return;let r=t===null?null:Fu(t)?t:t.current;if(!r)return;let i=lc();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,s,e])}let yw=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),m6e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Sl=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Sl||{}),_k=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(_k||{}),f6e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(f6e||{});function h6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(yw)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function g6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(m6e)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var mZ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(mZ||{});function p6e(e,t=0){var a;return e===((a=i0(e))==null?void 0:a.body)?!1:Vl(t,{0(){return e.matches(yw)},1(){let s=e;for(;s!==null;){if(s.matches(yw))return!0;s=s.parentElement}return!1}})}var x6e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(x6e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Pl(e){e?.focus({preventScroll:!0})}let y6e=["textarea","input"].join(",");function b6e(e){var t,a;return(a=(t=e?.matches)==null?void 0:t.call(e,y6e))!=null?a:!1}function v6e(e,t=a=>a){return e.slice().sort((a,s)=>{let r=t(a),i=t(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function np(e,t,{sorted:a=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?Nk(e[0]):document:Nk(e),o=Array.isArray(e)?a?v6e(e):e:t&64?g6e(e):h6e(e);r.length>0&&o.length>1&&(o=o.filter(x=>!r.some(v=>v!=null&&"current"in v?v?.current===x:v===x))),s=s??i?.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},u=0,f=o.length,p;do{if(u>=f||u+f<=0)return 0;let x=c+u;if(t&16)x=(x+f)%f;else{if(x<0)return 3;if(x>=f)return 1}p=o[x],p?.focus(d),u+=l}while(p!==tZ(p));return t&6&&b6e(p)&&p.select(),2}function fZ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function w6e(){return/Android/gi.test(window.navigator.userAgent)}function j7(){return fZ()||w6e()}function ib(e,t,a,s){let r=em(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function hZ(e,t,a,s){let r=em(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const C7=30;function N6e(e,t,a){let s=em(a),r=h.useCallback(function(l,c){if(l.defaultPrevented)return;let d=c(l);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of u)if(f!==null&&(f.contains(d)||l.composed&&l.composedPath().includes(f)))return;return!p6e(d,mZ.Loose)&&d.tabIndex!==-1&&l.preventDefault(),s.current(l,d)},[s,t]),i=h.useRef(null);ib(e,"pointerdown",l=>{var c,d;j7()||(i.current=((d=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:d[0])||l.target)},!0),ib(e,"pointerup",l=>{if(j7()||!i.current)return;let c=i.current;return i.current=null,r(l,()=>c)},!0);let o=h.useRef({x:0,y:0});ib(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),ib(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=C7||Math.abs(c.y-o.current.y)>=C7))return r(l,()=>Zc(l.target)?l.target:null)},!0),hZ(e,"blur",l=>r(l,()=>G$e(window.document.activeElement)?window.document.activeElement:null),!0)}function SD(...e){return h.useMemo(()=>i0(...e),[...e])}function gZ(e,t,a,s){let r=em(a);h.useEffect(()=>{e=e??window;function i(o){r.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function j6e(e){return h.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function C6e(e,t){let a=e(),s=new Set;return{getSnapshot(){return a},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let o=t[r].call(a,...i);o&&(a=o,s.forEach(l=>l()))}}}function S6e(){let e;return{before({doc:t}){var a;let s=t.documentElement,r=(a=t.defaultView)!=null?a:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:a}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);a.style(s,"paddingRight",`${i}px`)}}}function _6e(){return fZ()?{before({doc:e,d:t,meta:a}){function s(r){for(let i of a().containers)for(let o of i())if(o.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=lc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(Zc(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),u=e.querySelector(d);Zc(u)&&!s(u)&&(o=u)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),Zc(c.target)&&H$e(c.target))if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;l.style(d,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(Zc(l.target)){if(W$e(l.target))return;if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function A6e(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function S7(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let uu=C6e(()=>new Map,{PUSH(e,t){var a;let s=(a=this.get(e))!=null?a:{doc:e,count:0,d:lc(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=S7(s.meta),this.set(e,s),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t),a.computedMeta=S7(a.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[_6e(),S6e(),A6e()];a.forEach(({before:s})=>s?.(t)),a.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});uu.subscribe(()=>{let e=uu.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let s=t.get(a.doc)==="hidden",r=a.count!==0;(r&&!s||!r&&s)&&uu.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&uu.dispatch("TEARDOWN",a)}});function T6e(e,t,a=()=>({containers:[]})){let s=j6e(uu),r=t?s.get(t):void 0,i=r?r.count>0:!1;return hr(()=>{if(!(!t||!e))return uu.dispatch("PUSH",t,a),()=>uu.dispatch("POP",t,a)},[e,t]),i}function E6e(e,t,a=()=>[document.body]){let s=l0(e,"scroll-lock");T6e(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],a]}})}function k6e(e=0){let[t,a]=h.useState(e),s=h.useCallback(c=>a(c),[]),r=h.useCallback(c=>a(d=>d|c),[]),i=h.useCallback(c=>(t&c)===c,[t]),o=h.useCallback(c=>a(d=>d&~c),[]),l=h.useCallback(c=>a(d=>d^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:l}}var L6e={},_7,A7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((_7=process==null?void 0:L6e)==null?void 0:_7.NODE_ENV)==="test"&&typeof((A7=Element?.prototype)==null?void 0:A7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var P6e=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(P6e||{});function D6e(e){let t={};for(let a in e)e[a]===!0&&(t[`data-${a}`]="");return t}function O6e(e,t,a,s){let[r,i]=h.useState(a),{hasFlag:o,addFlag:l,removeFlag:c}=k6e(e&&r?3:0),d=h.useRef(!1),u=h.useRef(!1),f=Gj();return hr(()=>{var p;if(e){if(a&&i(!0),!t){a&&l(3);return}return(p=s?.start)==null||p.call(s,a),M6e(t,{inFlight:d,prepare(){u.current?u.current=!1:u.current=d.current,d.current=!0,!u.current&&(a?(l(3),c(4)):(l(4),c(2)))},run(){u.current?a?(c(3),l(4)):(c(4),l(3)):a?c(1):l(1)},done(){var x;u.current&&R6e(t)||(d.current=!1,c(7),a||i(!1),(x=s?.end)==null||x.call(s,a))}})}},[e,a,t,f]),e?[r,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function M6e(e,{prepare:t,run:a,done:s,inFlight:r}){let i=lc();return $6e(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(I6e(e,s))})}),i.dispose}function I6e(e,t){var a,s;let r=lc();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let o=(s=(a=e.getAnimations)==null?void 0:a.call(e).filter(l=>l instanceof CSSTransition))!=null?s:[];return o.length===0?(t(),r.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),r.dispose)}function $6e(e,{inFlight:t,prepare:a}){if(t!=null&&t.current){a();return}let s=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=s}function R6e(e){var t,a;return((a=(t=e.getAnimations)==null?void 0:t.call(e))!=null?a:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function _D(e,t){let a=h.useRef([]),s=Vn(e);h.useEffect(()=>{let r=[...a.current];for(let[i,o]of t.entries())if(a.current[i]!==o){let l=s(t,r);return a.current=t,l}},[s,...t])}let Wj=h.createContext(null);Wj.displayName="OpenClosedContext";var Gi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Gi||{});function qj(){return h.useContext(Wj)}function z6e({value:e,children:t}){return yt.createElement(Wj.Provider,{value:e},t)}function U6e({children:e}){return yt.createElement(Wj.Provider,{value:null},e)}function F6e(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vc=[];F6e(()=>{function e(t){if(!Zc(t.target)||t.target===document.body||Vc[0]===t.target)return;let a=t.target;a=a.closest(yw),Vc.unshift(a??t.target),Vc=Vc.filter(s=>s!=null&&s.isConnected),Vc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function pZ(e){let t=Vn(e),a=h.useRef(!1);h.useEffect(()=>(a.current=!1,()=>{a.current=!0,Hj(()=>{a.current&&t()})}),[t])}let xZ=h.createContext(!1);function B6e(){return h.useContext(xZ)}function T7(e){return yt.createElement(xZ.Provider,{value:e.force},e.children)}function H6e(e){let t=B6e(),a=h.useContext(bZ),[s,r]=h.useState(()=>{var i;if(!t&&a!==null)return(i=a.current)!=null?i:null;if(Do.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return h.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),h.useEffect(()=>{t||a!==null&&r(a.current)},[a,r,t]),s}let yZ=h.Fragment,G6e=Nr(function(e,t){let{ownerDocument:a=null,...s}=e,r=h.useRef(null),i=qo(q$e(p=>{r.current=p}),t),o=SD(r.current),l=a??o,c=H6e(l),d=h.useContext(Ak),u=Gj(),f=Ei();return pZ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Hi.createPortal(yt.createElement("div",{"data-headlessui-portal":"",ref:p=>{u.dispose(),d&&p&&u.add(d.register(p))}},f({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:yZ,name:"Portal"})),c):null});function W6e(e,t){let a=qo(t),{enabled:s=!0,ownerDocument:r,...i}=e,o=Ei();return s?yt.createElement(G6e,{...i,ownerDocument:r,ref:a}):o({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:yZ,name:"Portal"})}let q6e=h.Fragment,bZ=h.createContext(null);function V6e(e,t){let{target:a,...s}=e,r={ref:qo(t)},i=Ei();return yt.createElement(bZ.Provider,{value:a},i({ourProps:r,theirProps:s,defaultTag:q6e,name:"Popover.Group"}))}let Ak=h.createContext(null);function Q6e(){let e=h.useContext(Ak),t=h.useRef([]),a=Vn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Vn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),r=h.useMemo(()=>({register:a,unregister:s,portals:t}),[a,s,t]);return[t,h.useMemo(()=>function({children:i}){return yt.createElement(Ak.Provider,{value:r},i)},[r])]}let Y6e=Nr(W6e),vZ=Nr(V6e),K6e=Object.assign(Y6e,{Group:vZ});function X6e(e,t=typeof document<"u"?document.defaultView:null,a){let s=l0(e,"escape");gZ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===rZ.Escape&&a(r))})}function Z6e(){var e;let[t]=h.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,s]=h.useState((e=t?.matches)!=null?e:!1);return hr(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),a}function J6e({defaultContainers:e=[],portals:t,mainTreeNode:a}={}){let s=Vn(()=>{var r,i;let o=i0(a),l=[];for(let c of e)c!==null&&(sd(c)?l.push(c):"current"in c&&sd(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(r=o?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&sd(c)&&c.id!=="headlessui-portal-root"&&(a&&(c.contains(a)||c.contains((i=a?.getRootNode())==null?void 0:i.host))||l.some(d=>c.contains(d))||l.push(c));return l});return{resolveContainers:s,contains:Vn(r=>s().some(i=>i.contains(r)))}}let wZ=h.createContext(null);function E7({children:e,node:t}){let[a,s]=h.useState(null),r=NZ(t??a);return yt.createElement(wZ.Provider,{value:r},e,r===null&&yt.createElement(Ck,{features:xw.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=i0(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&sd(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function NZ(e=null){var t;return(t=h.useContext(wZ))!=null?t:e}function eRe(){let e=typeof document>"u";return"useSyncExternalStore"in Nu?(t=>t.useSyncExternalStore)(Nu)(()=>()=>{},()=>!1,()=>!e):!1}function Vj(){let e=eRe(),[t,a]=h.useState(Do.isHandoffComplete);return t&&Do.isHandoffComplete===!1&&a(!1),h.useEffect(()=>{t!==!0&&a(!0)},[t]),h.useEffect(()=>Do.handoff(),[]),e?!1:t}function AD(){let e=h.useRef(!1);return hr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Hg=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Hg||{});function tRe(){let e=h.useRef(0);return hZ(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function jZ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let a of e.current)sd(a.current)&&t.add(a.current);return t}let nRe="div";var nu=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(nu||{});function aRe(e,t){let a=h.useRef(null),s=qo(a,t),{initialFocus:r,initialFocusFallback:i,containers:o,features:l=15,...c}=e;Vj()||(l=0);let d=SD(a.current);oRe(l,{ownerDocument:d});let u=lRe(l,{ownerDocument:d,container:a,initialFocus:r,initialFocusFallback:i});cRe(l,{ownerDocument:d,container:a,containers:o,previousActiveElement:u});let f=tRe(),p=Vn(w=>{if(!Fu(a.current))return;let S=a.current;(E=>E())(()=>{Vl(f.current,{[Hg.Forwards]:()=>{np(S,Sl.First,{skipElements:[w.relatedTarget,i]})},[Hg.Backwards]:()=>{np(S,Sl.Last,{skipElements:[w.relatedTarget,i]})}})})}),x=l0(!!(l&2),"focus-trap#tab-lock"),v=Gj(),N=h.useRef(!1),b={ref:s,onKeyDown(w){w.key=="Tab"&&(N.current=!0,v.requestAnimationFrame(()=>{N.current=!1}))},onBlur(w){if(!(l&4))return;let S=jZ(o);Fu(a.current)&&S.add(a.current);let E=w.relatedTarget;Zc(E)&&E.dataset.headlessuiFocusGuard!=="true"&&(CZ(S,E)||(N.current?np(a.current,Vl(f.current,{[Hg.Forwards]:()=>Sl.Next,[Hg.Backwards]:()=>Sl.Previous})|Sl.WrapAround,{relativeTo:w.target}):Zc(w.target)&&Pl(w.target)))}},C=Ei();return yt.createElement(yt.Fragment,null,x&&yt.createElement(Ck,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:xw.Focusable}),C({ourProps:b,theirProps:c,defaultTag:nRe,name:"FocusTrap"}),x&&yt.createElement(Ck,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:xw.Focusable}))}let sRe=Nr(aRe),rRe=Object.assign(sRe,{features:nu});function iRe(e=!0){let t=h.useRef(Vc.slice());return _D(([a],[s])=>{s===!0&&a===!1&&Hj(()=>{t.current.splice(0)}),s===!1&&a===!0&&(t.current=Vc.slice())},[e,Vc,t]),Vn(()=>{var a;return(a=t.current.find(s=>s!=null&&s.isConnected))!=null?a:null})}function oRe(e,{ownerDocument:t}){let a=!!(e&8),s=iRe(a);_D(()=>{a||P$e(t?.body)&&Pl(s())},[a]),pZ(()=>{a&&Pl(s())})}function lRe(e,{ownerDocument:t,container:a,initialFocus:s,initialFocusFallback:r}){let i=h.useRef(null),o=l0(!!(e&1),"focus-trap#initial-focus"),l=AD();return _D(()=>{if(e===0)return;if(!o){r!=null&&r.current&&Pl(r.current);return}let c=a.current;c&&Hj(()=>{if(!l.current)return;let d=t?.activeElement;if(s!=null&&s.current){if(s?.current===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(s!=null&&s.current)Pl(s.current);else{if(e&16){if(np(c,Sl.First|Sl.AutoFocus)!==_k.Error)return}else if(np(c,Sl.First)!==_k.Error)return;if(r!=null&&r.current&&(Pl(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,o,e]),i}function cRe(e,{ownerDocument:t,container:a,containers:s,previousActiveElement:r}){let i=AD(),o=!!(e&4);gZ(t?.defaultView,"focus",l=>{if(!o||!i.current)return;let c=jZ(s);Fu(a.current)&&c.add(a.current);let d=r.current;if(!d)return;let u=l.target;Fu(u)?CZ(c,u)?(r.current=u,Pl(u)):(l.preventDefault(),l.stopPropagation(),Pl(d)):Pl(r.current)},!0)}function CZ(e,t){for(let a of e)if(a.contains(t))return!0;return!1}function SZ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!ep((t=e.as)!=null?t:AZ)||yt.Children.count(e.children)===1}let Qj=h.createContext(null);Qj.displayName="TransitionContext";var dRe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(dRe||{});function uRe(){let e=h.useContext(Qj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function mRe(){let e=h.useContext(Yj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Yj=h.createContext(null);Yj.displayName="NestingContext";function Kj(e){return"children"in e?Kj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function _Z(e,t){let a=em(e),s=h.useRef([]),r=AD(),i=Gj(),o=Vn((x,v=Xc.Hidden)=>{let N=s.current.findIndex(({el:b})=>b===x);N!==-1&&(Vl(v,{[Xc.Unmount](){s.current.splice(N,1)},[Xc.Hidden](){s.current[N].state="hidden"}}),i.microTask(()=>{var b;!Kj(s)&&r.current&&((b=a.current)==null||b.call(a))}))}),l=Vn(x=>{let v=s.current.find(({el:N})=>N===x);return v?v.state!=="visible"&&(v.state="visible"):s.current.push({el:x,state:"visible"}),()=>o(x,Xc.Unmount)}),c=h.useRef([]),d=h.useRef(Promise.resolve()),u=h.useRef({enter:[],leave:[]}),f=Vn((x,v,N)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([b])=>b!==x)),t?.chains.current[v].push([x,new Promise(b=>{c.current.push(b)})]),t?.chains.current[v].push([x,new Promise(b=>{Promise.all(u.current[v].map(([C,w])=>w)).then(()=>b())})]),v==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>N(v)):N(v)}),p=Vn((x,v,N)=>{Promise.all(u.current[v].splice(0).map(([b,C])=>C)).then(()=>{var b;(b=c.current.shift())==null||b()}).then(()=>N(v))});return h.useMemo(()=>({children:s,register:l,unregister:o,onStart:f,onStop:p,wait:d,chains:u}),[l,o,s,f,p,u,d])}let AZ=h.Fragment,TZ=pw.RenderStrategy;function fRe(e,t){var a,s;let{transition:r=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:d,enterFrom:u,enterTo:f,entered:p,leave:x,leaveFrom:v,leaveTo:N,...b}=e,[C,w]=h.useState(null),S=h.useRef(null),E=SZ(e),k=qo(...E?[S,t,w]:t===null?[]:[t]),_=(a=b.unmount)==null||a?Xc.Unmount:Xc.Hidden,{show:A,appear:T,initial:$}=uRe(),[z,F]=h.useState(A?"visible":"hidden"),P=mRe(),{register:M,unregister:G}=P;hr(()=>M(S),[M,S]),hr(()=>{if(_===Xc.Hidden&&S.current){if(A&&z!=="visible"){F("visible");return}return Vl(z,{hidden:()=>G(S),visible:()=>M(S)})}},[z,S,M,G,A,_]);let Q=Vj();hr(()=>{if(E&&Q&&z==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,z,Q,E]);let V=$&&!T,X=T&&A&&$,q=h.useRef(!1),ne=_Z(()=>{q.current||(F("hidden"),G(S))},P),oe=Vn(Oe=>{q.current=!0;let ke=Oe?"enter":"leave";ne.onStart(S,ke,he=>{he==="enter"?i?.():he==="leave"&&l?.()})}),K=Vn(Oe=>{let ke=Oe?"enter":"leave";q.current=!1,ne.onStop(S,ke,he=>{he==="enter"?o?.():he==="leave"&&c?.()}),ke==="leave"&&!Kj(ne)&&(F("hidden"),G(S))});h.useEffect(()=>{E&&r||(oe(A),K(A))},[A,E,r]);let R=!(!r||!E||!Q||V),[,ye]=O6e(R,C,A,{start:oe,end:K}),pe=Zd({ref:k,className:((s=jk(b.className,X&&d,X&&u,ye.enter&&d,ye.enter&&ye.closed&&u,ye.enter&&!ye.closed&&f,ye.leave&&x,ye.leave&&!ye.closed&&v,ye.leave&&ye.closed&&N,!ye.transition&&A&&p))==null?void 0:s.trim())||void 0,...D6e(ye)}),Ne=0;z==="visible"&&(Ne|=Gi.Open),z==="hidden"&&(Ne|=Gi.Closed),A&&z==="hidden"&&(Ne|=Gi.Opening),!A&&z==="visible"&&(Ne|=Gi.Closing);let Se=Ei();return yt.createElement(Yj.Provider,{value:ne},yt.createElement(z6e,{value:Ne},Se({ourProps:pe,theirProps:b,defaultTag:AZ,features:TZ,visible:z==="visible",name:"Transition.Child"})))}function hRe(e,t){let{show:a,appear:s=!1,unmount:r=!0,...i}=e,o=h.useRef(null),l=SZ(e),c=qo(...l?[o,t]:t===null?[]:[t]);Vj();let d=qj();if(a===void 0&&d!==null&&(a=(d&Gi.Open)===Gi.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=h.useState(a?"visible":"hidden"),p=_Z(()=>{a||f("hidden")}),[x,v]=h.useState(!0),N=h.useRef([a]);hr(()=>{x!==!1&&N.current[N.current.length-1]!==a&&(N.current.push(a),v(!1))},[N,a]);let b=h.useMemo(()=>({show:a,appear:s,initial:x}),[a,s,x]);hr(()=>{a?f("visible"):!Kj(p)&&o.current!==null&&f("hidden")},[a,p]);let C={unmount:r},w=Vn(()=>{var k;x&&v(!1),(k=e.beforeEnter)==null||k.call(e)}),S=Vn(()=>{var k;x&&v(!1),(k=e.beforeLeave)==null||k.call(e)}),E=Ei();return yt.createElement(Yj.Provider,{value:p},yt.createElement(Qj.Provider,{value:b},E({ourProps:{...C,as:h.Fragment,children:yt.createElement(EZ,{ref:c,...C,...i,beforeEnter:w,beforeLeave:S})},theirProps:{},defaultTag:h.Fragment,features:TZ,visible:u==="visible",name:"Transition"})))}function gRe(e,t){let a=h.useContext(Qj)!==null,s=qj()!==null;return yt.createElement(yt.Fragment,null,!a&&s?yt.createElement(Tk,{ref:t,...e}):yt.createElement(EZ,{ref:t,...e}))}let Tk=Nr(hRe),EZ=Nr(fRe),TD=Nr(gRe),Zb=Object.assign(Tk,{Child:TD,Root:Tk});var pRe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(pRe||{}),xRe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(xRe||{});let yRe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},ED=h.createContext(null);ED.displayName="DialogContext";function Xj(e){let t=h.useContext(ED);if(t===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,Xj),a}return t}function bRe(e,t){return Vl(t.type,yRe,e,t)}let k7=Nr(function(e,t){let a=h.useId(),{id:s=`headlessui-dialog-${a}`,open:r,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:u=!1,...f}=e,p=h.useRef(!1);l=(function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=qj();r===void 0&&x!==null&&(r=(x&Gi.Open)===Gi.Open);let v=h.useRef(null),N=qo(v,t),b=SD(v.current),C=r?0:1,[w,S]=h.useReducer(bRe,{titleId:null,descriptionId:null,panelRef:h.createRef()}),E=Vn(()=>i(!1)),k=Vn(ye=>S({type:0,id:ye})),_=Vj()?C===0:!1,[A,T]=Q6e(),$={get current(){var ye;return(ye=w.panelRef.current)!=null?ye:v.current}},z=NZ(),{resolveContainers:F}=J6e({mainTreeNode:z,portals:A,defaultContainers:[$]}),P=x!==null?(x&Gi.Closing)===Gi.Closing:!1;d6e(d||P?!1:_,{allowed:Vn(()=>{var ye,pe;return[(pe=(ye=v.current)==null?void 0:ye.closest("[data-headlessui-portal]"))!=null?pe:null]}),disallowed:Vn(()=>{var ye;return[(ye=z?.closest("body > *:not(#headlessui-portal-root)"))!=null?ye:null]})});let M=dZ.get(null);hr(()=>{if(_)return M.actions.push(s),()=>M.actions.pop(s)},[M,s,_]);let G=uZ(M,h.useCallback(ye=>M.selectors.isTop(ye,s),[M,s]));N6e(G,F,ye=>{ye.preventDefault(),E()}),X6e(G,b?.defaultView,ye=>{ye.preventDefault(),ye.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),E()}),E6e(d||P?!1:_,b,F),u6e(_,v,E);let[Q,V]=V$e(),X=h.useMemo(()=>[{dialogState:C,close:E,setTitleId:k,unmount:u},w],[C,E,k,u,w]),q=o0({open:C===0}),ne={ref:N,id:s,role:l,tabIndex:-1,"aria-modal":d?void 0:C===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":Q,unmount:u},oe=!Z6e(),K=nu.None;_&&!d&&(K|=nu.RestoreFocus,K|=nu.TabLock,c&&(K|=nu.AutoFocus),oe&&(K|=nu.InitialFocus));let R=Ei();return yt.createElement(U6e,null,yt.createElement(T7,{force:!0},yt.createElement(K6e,null,yt.createElement(ED.Provider,{value:X},yt.createElement(vZ,{target:v},yt.createElement(T7,{force:!1},yt.createElement(V,{slot:q},yt.createElement(T,null,yt.createElement(rRe,{initialFocus:o,initialFocusFallback:v,containers:F,features:K},yt.createElement(J$e,{value:E},R({ourProps:ne,theirProps:f,slot:q,defaultTag:vRe,features:wRe,visible:C===0,name:"Dialog"})))))))))))}),vRe="div",wRe=pw.RenderStrategy|pw.Static;function NRe(e,t){let{transition:a=!1,open:s,...r}=e,i=qj(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||a)&&!r.static?yt.createElement(E7,null,yt.createElement(Zb,{show:s,transition:a,unmount:r.unmount},yt.createElement(k7,{ref:t,...r}))):yt.createElement(E7,null,yt.createElement(k7,{ref:t,open:s,...r}))}let jRe="div";function CRe(e,t){let a=h.useId(),{id:s=`headlessui-dialog-panel-${a}`,transition:r=!1,...i}=e,[{dialogState:o,unmount:l},c]=Xj("Dialog.Panel"),d=qo(t,c.panelRef),u=o0({open:o===0}),f=Vn(b=>{b.stopPropagation()}),p={ref:d,id:s,onClick:f},x=r?TD:h.Fragment,v=r?{unmount:l}:{},N=Ei();return yt.createElement(x,{...v},N({ourProps:p,theirProps:i,slot:u,defaultTag:jRe,name:"Dialog.Panel"}))}let SRe="div";function _Re(e,t){let{transition:a=!1,...s}=e,[{dialogState:r,unmount:i}]=Xj("Dialog.Backdrop"),o=o0({open:r===0}),l={ref:t,"aria-hidden":!0},c=a?TD:h.Fragment,d=a?{unmount:i}:{},u=Ei();return yt.createElement(c,{...d},u({ourProps:l,theirProps:s,slot:o,defaultTag:SRe,name:"Dialog.Backdrop"}))}let ARe="h2";function TRe(e,t){let a=h.useId(),{id:s=`headlessui-dialog-title-${a}`,...r}=e,[{dialogState:i,setTitleId:o}]=Xj("Dialog.Title"),l=qo(t);h.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=o0({open:i===0}),d={ref:l,id:s};return Ei()({ourProps:d,theirProps:r,slot:c,defaultTag:ARe,name:"Dialog.Title"})}let ERe=Nr(NRe),kRe=Nr(CRe);Nr(_Re);let LRe=Nr(TRe),L7=Object.assign(ERe,{Panel:kRe,Title:LRe,Description:X$e});function c0({isOpen:e,onClose:t,onSave:a,onEdit:s,setFormData:r,formData:i,isEditing:o=!1,viewMode:l=!1,users:c=[],currentUser:d,onDelete:u}){const[f,p]=h.useState([]),[x,v]=h.useState([]),[N,b]=h.useState({}),{comments:C,addComment:w,refresh:S}=Ea({relatedType:"task",relatedId:i?.id});h.useEffect(()=>{i?.id&&S()},[i?.id,S]);const E=z=>{if(!z)return"";const F=String(z).split("-");return F.length===3?`${F[0]}-${F[2]}`:String(z)},k=z=>{const{name:F,value:P}=z.target;F==="subject"&&P.trim()&&b(M=>({...M,subject:!1})),r(M=>{const G={...M,[F]:P};return F==="relatedType1"&&(G.relatedTo1="",P==="Lead"?(G.relatedType2=null,G.relatedTo2=null,v([])):P==="Account"&&(G.relatedType2="Contact")),F==="relatedType2"&&(G.relatedTo2=""),G})};h.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let F;i.relatedType1==="Lead"?F=await ae.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(F=await ae.get("/accounts/admin/fetch-all"));let P=[];if(F&&Array.isArray(F.data)&&(P=F.data),o&&i.relatedTo1)try{let M;i.relatedType1==="Lead"?M=await ae.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(M=await ae.get(`/accounts/get/${i.relatedTo1}`)),M&&M.data&&(P.some(Q=>String(Q.id)===String(i.relatedTo1))||(P=[M.data,...P]))}catch(M){console.error("Error fetching specific related item:",M)}p(P)}catch(F){console.error("Error fetching related 1 data:",F),p([])}})()},[i.relatedType1,e,o,i.relatedTo1]),h.useEffect(()=>{if(!e||l)return;(async()=>{try{if(v([]),i.relatedType1==="Account"&&i.relatedTo1){let F;i.relatedType2==="Contact"?F=await ae.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"?F=await ae.get(`/deals/from-acc/${i.relatedTo1}`):i.relatedType2==="Quote"&&(F=await ae.get(`/quotes/from-acc/${i.relatedTo1}`));let P=[];if(F&&Array.isArray(F.data)&&(P=F.data),o&&i.relatedTo2)try{let M;i.relatedType2==="Contact"?M=await ae.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"?M=await ae.get(`/deals/get/${i.relatedTo2}`):i.relatedType2==="Quote"&&(M=await ae.get(`/quotes/get/${i.relatedTo2}`)),M&&M.data&&(P.some(Q=>String(Q.id)===String(i.relatedTo2))||(P=[M.data,...P]))}catch(M){console.error("Error fetching specific related item:",M)}v(P)}}catch(F){console.error("Error fetching related 2 data:",F),v([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,l,o]);const[_,A]=h.useState(!1);h.useEffect(()=>{e&&(A(!1),b({}))},[e]);const T=z=>{z.preventDefault(),A(!0);const F={};i.subject?.trim()||(F.subject=!0,W.error("Title is required")),b(F),i.relatedTo1||(F.relatedTo1=!0,W.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||(F.assignedTo=!0,W.error("Assigned To is required.")),!(Object.keys(F).length>0)&&a?.(i)},$=l?"Task Details":o?"Edit Task":"Create Task";return n.jsx(Zb,{appear:!0,show:e,as:h.Fragment,children:n.jsxs(L7,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(Zb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/40"})}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:n.jsx(Zb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsx(L7.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:n.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[n.jsx("button",{onClick:()=>{t(),A(!1),b({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Kn,{size:25})}),n.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:$}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:z=>z.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),n.jsx("button",{onClick:()=>{t(),A(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"p-6 lg:p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:"Edit"}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>u(i),children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),n.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),n.jsx("p",{children:i.relatedTo2Text})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Priority:"}),n.jsx("p",{children:i.priority||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:i.status||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Due Date:"}),n.jsx("p",{children:i.dueDate||""})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"font-semibold",children:"Description:"}),n.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]}),n.jsx(Ta,{comments:C,onAddComment:w})]})]})]})}),!l&&n.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title"," ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:k,disabled:l,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${N.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${l?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:k,value:i.relatedType1,disabled:l,className:"w-full pr-6 rounded-md text-sm mb-2",children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(Y2,{disabled:!1,items:Array.isArray(f)?f:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:z=>i.relatedType1==="Lead"?z.title:z.name??"",onChange:z=>r(F=>({...F,relatedTo1:z})),required:!0,isSubmitted:_})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:k,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:l||i.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(Y2,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:z=>i.relatedType2==="Contact"?`${z.first_name??""} ${z.last_name??""}`.trim():i.relatedType2==="Quote"?E(z.quote_id)??"":z.name??"",onChange:z=>r(F=>({...F,relatedTo2:z}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),n.jsx("textarea",{name:"description",value:i.description,onChange:k,disabled:l,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Normal",children:"Normal"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),n.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To"," ",d?.role!=="Sales"&&n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(Y2,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:d?.role==="Sales"?`${d.first_name} ${d.last_name}`:"Search an account...",getLabel:z=>`${z.first_name} ${z.last_name}`,onChange:z=>r(F=>({...F,assignedTo:z})),disabled:l||d?.role==="Sales",required:d?.role!=="Sales",isSubmitted:_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",value:i.status,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Not started",children:"Not started"}),n.jsx("option",{value:"In progress",children:"In Progress"}),n.jsx("option",{value:"Deferred",children:"Deferred"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),!l&&n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{t(),A(!1),b({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:o?"Update Task":"Create Task"})]})]})]})})})})})]})})}function Y2({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const P7=["Not started","In progress","Deferred","Completed"],D7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},kZ=e=>e&&(D7[e]||D7[String(e).toUpperCase()])||"Not started",PRe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},O7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},DRe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),kZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},ORe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=G=>{if(!G)return"";const Q=String(G).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(G)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",E="",k="",_="Lead",A="",T="",$="";const z=c(),F=v(),P=l(),M=x();if(z){w="Account",_="Account",A=F,S=String(z);const G=d(),Q=u(),V=N(),X=b(),q=f(),ne=C();G?(E="Contact",T="Contact",$=V,k=String(G)):Q?(T="Deal",E="Deal",$=X,k=String(Q)):q&&(T="Quote",E="Quote",$=ne,k=String(q))}else P?(_="Lead",A=M,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:kZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:A,relatedType2Text:T,relatedTo2Text:$,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:E,relatedTo2:k}};function MRe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=tn(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[_,A]=h.useState(1),[T,$]=h.useState(10),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState([]),V=wt(),X=Jt(),[q,ne]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,K]=h.useState(null);h.useEffect(()=>{const H=X.state?.openTaskModal,be=X.state?.initialTaskData,le=X.state?.taskID;H?(i(!0),be&&ne(Z=>({...Z,...be})),V(X.pathname,{replace:!0,state:{}})):le&&(K(le),V(X.pathname,{replace:!0,state:{}}))},[X,V]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const H=u.find(be=>be.id===oe);H?Ne(H,!0):W.error("Task not found."),K(null)}},[oe,u,p]);const R=async()=>{try{const H=await ae.get("/users/all");k(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),W.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const H=await ae.get("/tasks/all"),le=(Array.isArray(H.data)?H.data:[]).map(ORe);le.sort((Z,_e)=>{const te=Z.createdAt?new Date(Z.createdAt):0;return(_e.createdAt?new Date(_e.createdAt):0)-te}),f(le),a==="list"&&A(1)}catch(H){console.error("Failed to load tasks:",H),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){R(),ye();const H=iN(e.id),be=new WebSocket(H);return be.onopen=()=>{console.log(" Connected to task notifications")},be.onmessage=le=>{try{const Z=JSON.parse(le.data);Z.type==="task_status_updated"&&(W.info(` ${Z.message}`,{position:"top-right",autoClose:4e3}),ye())}catch(Z){console.error("Error parsing notification:",Z)}},be.onerror=le=>{console.error(" WebSocket error:",le)},be.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{be&&be.readyState===WebSocket.OPEN&&be.close()}}},[t,e]);const pe=()=>{l(null),ne({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ne=(H=null,be=!1)=>{l(H),d(be),H?ne({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:PRe(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):pe(),i(!0)},Se=()=>{i(!1),l(null),d(!1),pe()},Oe=async H=>{const be=DRe(H);try{o&&!c?(await ae.put(`/tasks/${o.id}`,be),W.success("Task updated successfully.")):(await ae.post("/tasks/create",be),W.success("Task created successfully.")),i(!1),await ye()}catch(le){console.error("Failed to save task:",le);const Z=le.response?.data?.detail||"Failed to save task.";W.error(Z)}},ke=H=>{H&&F({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},he=()=>{if(Ae.every(H=>G.includes(H.id)))Q(G.filter(H=>!Ae.map(be=>be.id).includes(H)));else{const H=Ae.map(be=>be.id);Q([...new Set([...G,...H])])}},Ge=H=>{Q(be=>be.includes(H)?be.filter(le=>le!==H):[...be,H])},Ce=async()=>{G.length!==0&&F({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:G}})},xe=async()=>{if(!z?.action){F(null);return}const{action:H}=z;M(!0);try{H.type==="delete"?(await ae.delete(`/tasks/${H.targetId}`),W.success("Task deleted successfully."),await ye()):H.type==="bulk-delete"&&(await ae.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),W.success(`Successfully deleted ${H.task_ids.length} tasks`),Q([]),await ye())}catch(be){console.error("Task action failed:",be),W.error("Failed to delete task.")}finally{M(!1),F(null)}},ee=()=>{P||F(null)},Ee=h.useMemo(()=>{const H=v.trim().toLowerCase();return[...u].sort((le,Z)=>{const _e=le.createdAt?new Date(le.createdAt):0;return(Z.createdAt?new Date(Z.createdAt):0)-_e}).filter(le=>{const Z=H===""||le.title?.toLowerCase().includes(H)||le.description?.toLowerCase().includes(H)||le.assignedToName?.toLowerCase().includes(H)||le.createdBy?.toLowerCase().includes(H),_e=b==="Filter by Status"||le.status===b,te=w==="Filter by Priority"||le.priority===w;return Z&&_e&&te})},[u,v,b,w]);h.useEffect(()=>{A(1)},[v,b,w,a,T]),h.useEffect(()=>{if(a==="list"){const H=Ee.length===0?1:Math.ceil(Ee.length/T);_>H&&A(H)}},[Ee.length,_,a,T]);const Ae=h.useMemo(()=>{if(a==="board")return Ee;const H=(_-1)*T;return Ee.slice(H,H+T)},[Ee,_,a,T]),Re=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:qs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:qi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<H&&be.status!=="Completed").length,icon:Wf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),et=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",De=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},tt=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Je=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(qi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Re.map(H=>n.jsx(IRe,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:H=>C(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),P7.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ee.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:P7.map(H=>{const be=Ae.filter(le=>le.status===H);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:H}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:be.length})]}),n.jsx("div",{className:`space-y-3 ${be.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:be.length>0?be.map(le=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(le)}`,onClick:()=>Ne(le,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:le.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",le.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",le.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:et(le)?"text-red-600":"text-gray-600",children:le.dateAssigned?O7(le.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),Ne(le)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ga,{})}),n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ke(le)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},le.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},H)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ae.length>0&&Ae.every(H=>G.includes(H.id)),onChange:he})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:G.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected tasks`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ae.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.includes(H.id),onChange:()=>Ge(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ne(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${tt(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Je(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ne(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${et(H)?"text-red-600 font-medium":""}`,onClick:()=>Ne(H,!0),children:H.dateAssigned?O7(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ee.length,pageSize:T,currentPage:Ee.length===0?0:_,onPrev:()=>A(H=>Math.max(H-1,1)),onNext:()=>A(H=>Math.min(H+1,Math.max(1,Math.ceil(Ee.length/T)||1))),onPageSizeChange:H=>{$(H),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Se,onSave:Oe,onEdit:()=>d(!1),setFormData:ne,formData:q,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:ke}),z&&n.jsx($Re,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:xe,onCancel:ee,loading:P})]})}function IRe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function $Re({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function RRe(e){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const K2={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function zRe({label:e,options:t,selectedValues:a,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:o=!1,required:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null);h.useEffect(()=>{function C(w){p.current&&!p.current.contains(w.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const x=t.filter(C=>C.label.toLowerCase().includes(u.toLowerCase())),v=C=>{const w=a.includes(C);let S;w?S=a.filter(E=>E!==C):S=[...a,C],s(S)},N=(C,w)=>{C.stopPropagation(),s(a.filter(S=>S!==w))},b=t.filter(C=>a.includes(C.value));return n.jsxs("div",{className:"relative",ref:p,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsxs("div",{onClick:()=>!r&&d(!c),className:`w-full border ${l&&o&&a.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[a.length===0&&n.jsx("span",{className:"text-gray-400 select-none",children:i}),b.map(C=>n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[C.label,!r&&n.jsx(Xt,{className:"cursor-pointer hover:text-indigo-900",onClick:w=>N(w,C.value)})]},C.value)),n.jsx("div",{className:"ml-auto text-gray-400",children:n.jsx(Tt,{})})]}),c&&!r&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[n.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:n.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[n.jsx(qt,{className:"text-gray-400 mr-2"}),n.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:u,onChange:C=>f(C.target.value),autoFocus:!0})]})}),n.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(C=>{const w=a.includes(C.value);return n.jsxs("div",{onClick:()=>v(C.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${w?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[n.jsx("span",{children:C.label}),w&&n.jsx(Qk,{className:"text-indigo-600"})]},C.value)}):n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function $c(){h.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=wt(),{id:t}=Ql(),[a,s]=h.useState(""),[r,i]=h.useState(""),[o,l]=h.useState(""),[c,d]=h.useState(null),[u,f]=h.useState(!1),[p,x]=h.useState([]),[v,N]=h.useState(!1),[b,C]=h.useState([]),[w,S]=h.useState(K2),[E,k]=h.useState(!1),[_,A]=h.useState(!1),[T,$]=h.useState(null),[z,F]=h.useState(null),[P,M]=h.useState("board"),[G,Q]=h.useState(null),[V,X]=h.useState(!1),[q,ne]=h.useState(null),[oe,K]=h.useState(1),[R,ye]=h.useState(10),[pe,Ne]=h.useState([]),Se=h.useRef(!1),{userRole:Oe}=Ys(),ke=h.useMemo(()=>{const ve=new Map;return p.forEach(Be=>{const nt=`${Be.name}-${Be.manager_id||"no-manager"}`;if(!ve.has(nt))ve.set(nt,{...Be,assigned_users_list:Be.assigned_to?[Be.assigned_to]:[]});else{const Te=ve.get(nt);Be.assigned_to&&(Te.assigned_users_list.some(Qe=>Qe.id===Be.assigned_to.id)||Te.assigned_users_list.push(Be.assigned_to))}}),Array.from(ve.values())},[p]),he=h.useMemo(()=>{const ve=a.trim().toLowerCase(),Be=r.trim().toLowerCase(),nt=o.trim();return[...ke].sort((Qe,ct)=>{const ht=Qe?.created_at?new Date(Qe.created_at):0;return(ct?.created_at?new Date(ct.created_at):0)-ht}).filter(Qe=>{const ct=Qe.name?.toLowerCase()||"",ht=Qe.description?.toLowerCase()||"",je=Qe.managed_by?`${Qe.managed_by.first_name} ${Qe.managed_by.last_name}`.toLowerCase():"",Ze=Qe.status?.toString().toLowerCase()||"",ce=Qe.assigned_users_list.map(ie=>`${ie.first_name} ${ie.last_name}`.toLowerCase()).join(" "),de=ve===""||[ct,ht,je,Ze,ce].some(ie=>ie&&ie.includes(ve)),D=Be===""||Ze===Be,B=nt===""||String(Qe.managed_by?.id||"")===nt||Qe.assigned_users_list.some(ie=>String(ie.id)===nt);return de&&D&&B})},[ke,a,r,o]);h.useEffect(()=>{if(Se.current){Se.current=!1;return}if(t&&ke.length>0&&!E&&!u&&!_){const ve=ke.find(Be=>Be.id===parseInt(t));ve&&d(ve)}!t&&!E&&!u&&d(null)},[t,ke,E,u,_]),h.useEffect(()=>{K(1)},[a,r,o]),h.useEffect(()=>{K(ve=>{const Be=Math.max(1,Math.ceil(he.length/R)||1);return ve>Be?Be:ve})},[he.length,R]);const Ge=async()=>{try{const ve=await ae.get("/users/read/territory");C(ve.data)}catch(ve){console.error("Error fetching users:",ve)}},Ce=async()=>{N(!0);try{const ve=await ae.get("/territories/fetch"),Be=Array.isArray(ve.data)?ve.data:[];x(Be),console.log(ve.data)}catch(ve){console.error("Error fetching territories:",ve)}finally{N(!1)}};h.useEffect(()=>{Ge(),Ce()},[]);const xe=ve=>{const{name:Be,value:nt}=ve.target;S(Te=>({...Te,[Be]:nt}))},ee=ve=>{S(Be=>({...Be,user_ids:ve}))},Ee=()=>{S(K2),k(!1),$(null),f(!0)},Ae=(ve=!0)=>{f(!1),k(!1),$(null),S(K2)},Re=ve=>{if(!ve)return;const Be=ve.assigned_users_list?ve.assigned_users_list.map(nt=>String(nt.id)):[];S({name:ve.name||"",description:ve.description||"",manager_id:ve.managed_by?String(ve.managed_by.id):"",user_ids:Be,company_id:ve.company_id?String(ve.company_id):""}),k(!0),$(ve.id),d(null),f(!0)},[et,De]=h.useState(!1),tt=ve=>{ve.preventDefault(),De(!0);const Be=w.name.trim();if(!Be){W.error("Territory name is required.");return}if(!w.manager_id){W.error("Territory manager is required.");return}if(w.user_ids.length===0){W.error("Please assign at least one user.");return}let nt=w.company_id?Number(w.company_id):null;if(!nt&&w.user_ids.length>0){const ct=w.user_ids[0],ht=b.find(je=>String(je.id)===String(ct));ht&&ht.company&&(nt=ht.company.id)}const Te={name:Be,description:w.description?.trim()||"",manager_id:w.manager_id?Number(w.manager_id):null,user_ids:w.user_ids.map(ct=>Number(ct)),company_id:nt},Qe=E&&T?"update":"create";Q({title:Qe==="create"?"Confirm New Territory":"Confirm Update",message:n.jsxs("span",{children:[Qe==="create"?"Create":"Update"," territory ",n.jsx("span",{className:"font-semibold",children:Be})," with ",Te.user_ids.length," assigned users?"]}),confirmLabel:Qe==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:Te,targetId:T,name:Be}})},Je=ve=>{ve&&Q({title:"Delete Territory Group",message:n.jsxs("span",{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:ve.name}),"?",n.jsx("br",{}),n.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",ve.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ve.id,name:ve.name}})},H=async()=>{pe.length!==0&&Q({title:"Delete Territories",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:pe.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${pe.length} Territory(ies)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:pe}})},be=ve=>{if(ve.target.checked){const Be=te.map(nt=>nt.id);Ne(Be)}else Ne([])},le=ve=>{Ne(Be=>Be.includes(ve)?Be.filter(nt=>nt!==ve):[...Be,ve])},Z=async()=>{if(!G?.action){Q(null);return}const{action:ve}=G,{type:Be,payload:nt,targetId:Te,name:Qe}=ve;X(!0);try{Be==="create"?(A(!0),await ae.post("/territories/assign",nt),W.success(`Territory "${Qe}" created.`),await Ce(),await Ge(),Ae(!1)):Be==="update"?(A(!0),await ae.put(`/territories/${Te}`,nt),W.success(`Territory "${Qe}" updated.`),Se.current=!0,Ae(!1),d(null),t&&e("/admin/territory"),await Ce(),await Ge()):Be==="delete"?(ne(Te),await ae.delete(`/territories/${Te}`),W.success(`Territory "${Qe}" deleted.`),await Ce(),c?.id===Te&&d(null)):Be==="bulk-delete"&&(await ae.delete("/territories/admin/bulk-delete",{data:{territory_ids:ve.territory_ids}}),W.success(`Successfully deleted ${ve.territory_ids.length} territories`),Ne([]),await Ce())}catch(ct){console.error(ct),W.error("An error occurred.")}finally{A(!1),De(!1),ne(null),X(!1),Q(null)}},_e=()=>{V||Q(null)},te=h.useMemo(()=>{if(P==="board")return he;const ve=(oe-1)*R;return he.slice(ve,ve+R)},[he,oe,R,P]),Ue=he.length>0,Ie=()=>K(ve=>Math.max(ve-1,1)),We=()=>K(ve=>Math.min(ve+1,Math.ceil(he.length/R)||1)),gt=ve=>!ve||ve.length===0?"Unassigned":ve.length===1?`${ve[0].first_name} ${ve[0].last_name}`:`${ve[0].first_name} ${ve[0].last_name} +${ve.length-1} more`;return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading territories..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[n.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[n.jsx(Xl,{className:"mr-2 text-blue-600"})," Territory"]}),n.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(Oe.toLowerCase())&&(Array.isArray(b)&&b.length>0?n.jsxs("button",{onClick:Ee,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[n.jsx(yn,{})," Create Territory"]}):n.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[n.jsx(RRe,{})," Add users to assign territories"]}))})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:a,onChange:ve=>s(ve.target.value)})]}),Oe.toLowerCase()!=="sales"&&n.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:n.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:o,onChange:ve=>l(ve.target.value),children:[n.jsx("option",{value:"",children:"Filter by Users"}),b.map(ve=>n.jsxs("option",{value:String(ve.id),children:[ve.first_name," ",ve.last_name]},ve.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>M("board"),className:`px-4 py-2 rounded-full text-sm ${P==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),n.jsx("button",{onClick:()=>M("list"),className:`px-4 py-2 rounded-full text-sm ${P==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),P==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Ue?te.map(ve=>n.jsxs("div",{onClick:()=>{d(ve);let Be;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?Be="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?Be="group-manager":Oe.toLowerCase()==="manager"?Be="manager":Be="sales",e(`/${Be}/territory/${ve.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:ve.name}),ve.description&&n.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:ve.description}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[n.jsx(sn,{})," ",gt(ve.assigned_users_list)]}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),n.jsx("div",{className:"text-gray-400 text-xs text-right",children:ve.created_at?new Date(ve.created_at).toLocaleDateString():""})]},ve.id)):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),P==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[Oe.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:te.length>0&&te.every(ve=>pe.includes(ve.id)),onChange:be})}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Manager"}),Oe.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:pe.length>0?n.jsx("button",{onClick:H,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${pe.length} selected territories`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ue?te.map(ve=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[Oe.toLowerCase()!=="sales"&&n.jsx("td",{className:"py-3 px-4",onClick:Be=>Be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:pe.includes(ve.id),onChange:()=>le(ve.id)})}),n.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{d(ve);let Be;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?Be="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?Be="group-manager":Oe.toLowerCase()==="manager"?Be="manager":Be="sales",e(`/${Be}/territory/${ve.id}`)},children:ve.name}),n.jsx("td",{className:"py-3 px-4",children:gt(ve.assigned_users_list)}),n.jsx("td",{className:"py-3 px-4",children:ve.managed_by?`${ve.managed_by.first_name}`:""}),n.jsx("td",{})]},ve.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[n.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{d(null);let ve;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?ve="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?ve="group-manager":Oe.toLowerCase()==="manager"?ve="manager":ve="sales",e(`/${ve}/territory`)},children:n.jsx(Xt,{size:24})}),n.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),n.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Manager"}),n.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Assigned To"}),n.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(ve=>n.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[n.jsx(sn,{})," ",ve.first_name," ",ve.last_name]},ve.id)):"Unassigned"})]})]}),!["sales","manager"].includes(Oe.toLowerCase())&&n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:()=>Re(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(ga,{})," Edit"]}),n.jsxs("button",{onClick:()=>Je(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(Wt,{})," Delete"]})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[n.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{Ae(),De(!1)},children:[n.jsx(Xt,{size:22})," "]}),n.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:E?"Edit Territory":"Create Territory"}),n.jsxs("form",{className:"space-y-4",onSubmit:tt,noValidate:!0,children:[n.jsx(URe,{label:"Territory Name",name:"name",value:w.name,onChange:xe,required:!0,isSubmitted:et}),n.jsx(FRe,{label:"Territory Manager",name:"manager_id",value:w.manager_id,onChange:xe,options:[{value:"",label:"Assign Manager"},...b.map(ve=>({value:String(ve.id),label:`${ve.first_name} ${ve.last_name}`}))],required:!0,isSubmitted:et}),n.jsx(zRe,{label:n.jsxs(n.Fragment,{children:["Assign Users ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:b.map(ve=>({value:String(ve.id),label:`${ve.first_name} ${ve.last_name}`})),selectedValues:w.user_ids,onChange:ee,required:!0,isSubmitted:et}),n.jsx(BRe,{label:"Description",name:"description",value:w.description,onChange:xe}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>{Ae(),De(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-tertiary text-white rounded",children:_?"Saving...":"Save Territory"})]})]})]})}),P==="list"&&n.jsx(rn,{className:"mt-4",totalItems:he.length,pageSize:R,currentPage:oe,onPrev:Ie,onNext:We,onPageSizeChange:ve=>{ye(ve),K(1)},label:"territories"}),G&&n.jsx(HRe,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:Z,onCancel:_e,loading:V})]})})}function URe({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${d}
`})]})}function FRe({label:e,name:t,value:a,onChange:s,options:r,disabled:i=!1,required:o=!1,isSubmitted:l=!1}){const c=l&&o&&!a;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))})]})}function BRe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function HRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const GRe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"},{value:"INACTIVE",label:"INACTIVE"}],WRe=e=>e?String(e).toUpperCase():"",au=e=>{const t=WRe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":t==="INACTIVE"?"INACTIVE":"PLANNED"},X2=e=>{const t=au(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":t==="INACTIVE"?"INACTIVE":"--"},M7=e=>{switch(au(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";case"INACTIVE":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},I7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function $7(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[_,A]=h.useState("PLANNED"),[T,$]=h.useState(!1),[z,F]=h.useState(!1),[P,M]=h.useState(10),[G,Q]=h.useState(1),[V,X]=h.useState([]),[q,ne]=h.useState(null),{comments:oe,addComment:K,refresh:R}=Ea({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&R()},[a?.id,R]),Us();const ye=wt(),pe=Jt(),Ne=B=>{if(!B)return"";const ie=String(B).split("-");return ie.length===3?`${ie[0]}-${ie[2]}`:String(B)},Oe={subject:"",call_time:(()=>{const B=new Date,ie=B.getFullYear(),ue=String(B.getMonth()+1).padStart(2,"0"),se=String(B.getDate()).padStart(2,"0");return`${ie}-${ue}-${se}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[ke,he]=h.useState(Oe);h.useEffect(()=>{const B=pe.state,ie=B?.callID;if(ie&&!B?.openCallModal){ne(ie),ye(pe.pathname,{replace:!0,state:{}});return}!B?.openCallModal||!B?.initialCallData||B.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||B.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),he(ue=>({...ue,...B.initialCallData,relatedTo1:B.initialCallData.relatedTo1?String(B.initialCallData.relatedTo1):"",relatedTo2:B.initialCallData.relatedTo2?String(B.initialCallData.relatedTo2):""})),ye(pe.pathname,{replace:!0,state:{}}))},[pe.state,o]),h.useEffect(()=>{if(q&&u.length>0&&!z){const B=u.find(ie=>ie.id===q);B?s(B):W.error("Call not found."),ne(null)}},[q,u,z]);const Ge=async()=>{try{F(!0);const B=await ae.get("/calls/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((se,Pe)=>{const ge=se?.created_at?new Date(se.created_at):0;return(Pe?.created_at?new Date(Pe.created_at):0)-ge});f(ue)}catch(B){console.error("Error fetching calls:",B),W.error("Failed to load calls")}finally{F(!1)}},Ce=async()=>{try{const B=await ae.get("/users/all");x(B.data)}catch(B){console.error("Error fetching users: ",B)}};h.useEffect(()=>{Ce(),Ge()},[]);const[xe,ee]=h.useState(""),[Ee,Ae]=h.useState("Filter by Status"),[Re,et]=h.useState("Filter by Users");h.useEffect(()=>{Q(1)},[xe,Ee,Re,P]);const De=h.useMemo(()=>u.filter(B=>{const ie=!xe||[B.subject,B.notes,B.lead?.title,B.account?.name,B.contact?.first_name,B.contact?.last_name,B.deal?.name].some(ge=>ge&&String(ge).toLowerCase().includes(xe.toLowerCase())),ue=Ee==="Filter by Status"||au(B.status)===Ee,se=B.call_assign_to?`${B.call_assign_to.first_name} ${B.call_assign_to.last_name}`:"";return ie&&ue&&(Re==="Filter by Users"||se===Re)}),[u,xe,Ee,Re]),tt=h.useMemo(()=>{const B=(G-1)*P;return De.slice(B,B+P)},[De,G,P]),Je=Array.isArray(p)?p.map(B=>({id:B.id,name:`${B.first_name} ${B.last_name}`})):[],H=()=>Q(B=>Math.max(1,B-1)),be=()=>Q(B=>Math.min(B+1,Math.ceil(De.length/P)||1)),le=B=>{if(B.target.checked){const ie=tt.map(ue=>ue.id);X(ie)}else X([])},Z=B=>{X(ie=>ie.includes(B)?ie.filter(ue=>ue!==B):[...ie,B])},_e=u.length,te=u.filter(B=>au(B.status)==="PLANNED").length,Ue=u.filter(B=>au(B.status)==="HELD").length,Ie=u.filter(B=>au(B.status)==="NOT_HELD").length,We=[{title:"Total",value:_e,icon:Rs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:te,icon:qs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ue,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ie,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}],[gt,ve]=h.useState("Overview"),Be=B=>{const{name:ie,value:ue}=B.target;he(se=>{const Pe={...se,[ie]:ue};return ie==="relatedType1"&&(Pe.relatedTo1="",ue==="Lead"?(Pe.relatedType2=null,Pe.relatedTo2=null,d([])):ue==="Account"&&(Pe.relatedType2="Contact")),ie==="relatedType2"&&(Pe.relatedTo2=""),Pe})};h.useEffect(()=>{const B=async()=>{try{l([]);let ie;ke.relatedType1==="Lead"?ie=await ae.get("/leads/admin/getLeads"):ke.relatedType1==="Account"&&(ie=await ae.get("/accounts/admin/fetch-all")),ie&&Array.isArray(ie.data)?l(ie.data):l([])}catch(ie){console.error("Error fetching data:",ie),l([])}};ke.relatedType1&&B()},[ke.relatedType1]),h.useEffect(()=>{const B=async()=>{try{d([]);let ie;if(ke.relatedType1==="Account"&&ke.relatedTo1)ke.relatedType2==="Contact"?ie=await ae.get(`/contacts/from-acc/${ke.relatedTo1}`):ke.relatedType2==="Deal"?ie=await ae.get(`/deals/from-acc/${ke.relatedTo1}`):ke.relatedType2==="Quote"&&(ie=await ae.get(`/quotes/from-acc/${ke.relatedTo1}`));else{d([]);return}ie&&Array.isArray(ie.data)?d(ie.data):d([])}catch(ie){console.error("Error fetching data:",ie),d([])}};ke.relatedType2&&B()},[ke.relatedType2,ke.relatedTo1,ke.relatedType1]);const[nt,Te]=h.useState(!1),Qe=B=>{B.preventDefault(),Te(!0);const ie=ke.subject;if(!ie||ie.trim()===""){W.error("Subject is required.");return}if(!ke.relatedTo1){W.error(`Please select a ${ke.relatedType1||"Lead/Account"}.`);return}if(!ke.assigned_to){W.error("Subject is required.");return}const se={...ke,duration_minutes:ke.duration_minutes?parseInt(ke.duration_minutes,10):null,relatedTo1:ke.relatedTo1?parseInt(ke.relatedTo1,10):null,relatedTo2:ke.relatedType1==="Lead"?null:ke.relatedTo2?parseInt(ke.relatedTo2,10):null,relatedType2:ke.relatedType1==="Lead"?null:ke.relatedType2,assigned_to:ke.assigned_to?parseInt(ke.assigned_to,10):null},Pe=v&&b?"update":"create",ge=(ke.subject||"").trim()||"Untitled Call";i({title:Pe==="create"?"Confirm New Call":"Confirm Update",message:Pe==="create"?`Create "${ge}"?`:`Save changes to "${ge}"?`,confirmLabel:Pe==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Pe,payload:se,targetId:b||null,name:ge}})},ct=B=>s(B),ht=()=>{t(!1),N(!1),C(null)},je=async()=>{V.length!==0&&i({title:"Delete Calls",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:V.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${V.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:V}})},Ze=async()=>{if(!r?.action){i(null);return}const{action:B}=r,{type:ie,payload:ue,targetId:se,name:Pe}=B;k(!0);try{if(ie==="create")S(!0),await ae.post("/calls/create",ue),W.success(`Call "${Pe}" created successfully.`),t(!1),he(Oe),N(!1),C(null),await Ge();else if(ie==="update"){if(!se)throw new Error("Missing call identifier for update.");S(!0),await ae.put(`/calls/${se}`,ue),W.success(`Call "${Pe}" updated successfully.`),t(!1),he(Oe),N(!1),C(null),await Ge()}else if(ie==="delete"){if(!se)throw new Error("Missing call identifier for deletion.");await ae.delete(`/calls/${se}`),W.success(`Call "${Pe}" deleted successfully.`),a?.id===se&&s(null),await Ge()}else ie==="bulk-delete"&&(await ae.delete("/calls/admin/bulk-delete",{data:{call_ids:V}}),W.success(`Successfully deleted ${V.length} calls`),X([]),await Ge())}catch(ge){const fe=ie==="create"?"Failed to create call. Please review the details and try again.":ie==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",Fe=ge?.response?.data?.detail||fe;W.error(Fe)}finally{(ie==="create"||ie==="update")&&S(!1),k(!1),i(null)}},ce=()=>{E||i(null)},J=async()=>{if(a?.id)try{$(!0),await ae.put(`/calls/${a.id}`,{status:_}),W.success(`Status updated to ${X2(_)}`),f(B=>Array.isArray(B)?B.map(ie=>ie.id===a.id?{...ie,status:_}:ie):B),s(null)}catch(B){const ie=B.response?.data?.detail||"Failed to update status.";W.error(ie)}finally{$(!1)}};h.useEffect(()=>{a&&A(au(a.status))},[a]);const de=a?n.jsxs("div",{id:"callModalBackdrop",onClick:B=>B.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${M7(a.status)}`,children:X2(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const B=ge=>{if(!ge)return"";const fe=new Date(ge),Fe=fe.getFullYear(),Xe=String(fe.getMonth()+1).padStart(2,"0"),pt=String(fe.getDate()).padStart(2,"0"),Nt=String(fe.getHours()).padStart(2,"0"),St=String(fe.getMinutes()).padStart(2,"0");return`${Fe}-${Xe}-${pt}T${Nt}:${St}`},ie=a.lead?"Lead":a.account?"Account":"Lead",ue=a.lead?a.lead.id:a.account?a.account.id:null,se=ie==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",Pe=ie==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;he({subject:a.subject||"",call_time:B(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:ie,relatedType2:se,relatedTo1:ue?String(ue):"",relatedTo2:Pe?String(Pe):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const B=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${B}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:B}})},children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(B=>n.jsx("button",{onClick:()=>ve(B),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${gt===B?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:B},B))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[gt==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(lo,{label:"Call Time",value:I7(a.call_time)}),n.jsx(lo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(lo,{label:"Direction",value:a.direction||"--"}),n.jsx(lo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(lo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(lo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(lo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(lo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(lo,{label:"Quote",value:Ne(a.quote.quote_id)}),n.jsx(lo,{label:"Created At",value:I7(a.created_at)})]})}),gt==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Ta,{comments:oe,onAddComment:K})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:B=>A(B.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:J,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,D=e?n.jsx("div",{id:"modalBackdrop",onClick:B=>B.target.id==="modalBackdrop"&&ht(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{ht(),Te(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Qe,noValidate:!0,children:[n.jsx(VRe,{label:"Subject",className:"md:col-span-2",name:"subject",value:ke.subject,onChange:Be,isSubmitted:nt,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Be,value:ke.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w||v,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(Z2,{items:Array.isArray(o)?o:[],value:ke.relatedTo1??"",placeholder:`Search ${ke.relatedType1||"here"}...`,getLabel:B=>ke.relatedType1==="Lead"?B.title:B.name??"",onChange:B=>he(ie=>({...ie,relatedTo1:B})),required:!0,isSubmitted:nt,disabled:w||v})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Be,value:ke.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:ke.relatedType1==="Lead"||w||v,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(Z2,{disabled:ke.relatedType1==="Lead"||w||v,items:Array.isArray(c)?c:[],value:ke.relatedTo2??"",placeholder:ke.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${ke.relatedType2||"Contact"}...`:`No ${ke.relatedType2||""} data found`,getLabel:B=>ke.relatedType2==="Contact"?`${B.first_name??""} ${B.last_name??""}`.trim():ke.relatedType2==="Quote"?Ne(B.quote_id)??"":B.name??"",onChange:B=>he(ie=>({...ie,relatedTo2:B}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:ke.call_time,onChange:Be,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:ke.duration_minutes,onChange:Be,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" ","Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(Z2,{items:Array.isArray(p)?p:[],value:ke.assigned_to??"",placeholder:"Search an account...",getLabel:B=>`${B.first_name} ${B.last_name}`,onChange:B=>he(ie=>({...ie,assigned_to:B})),required:!0,isSubmitted:nt})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Be,value:ke.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Be,value:ke.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(QRe,{className:"col-span-2",label:"Notes",value:ke.notes,onChange:Be,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),Te(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Rs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{he(Oe),N(!1),C(null),t(!0),Te(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:We.map(B=>n.jsx(qRe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:xe,onChange:B=>ee(B.target.value)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:Ee,onChange:B=>Ae(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),GRe.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))]}),n.jsxs("select",{value:Re,onChange:B=>et(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Je.map(B=>n.jsx("option",{value:B.name,children:B.name},B.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:tt.length>0&&V.length===tt.length,onChange:le,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:V.length>0?n.jsx("button",{onClick:je,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${V.length} selected calls`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:z?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):tt.length>0?tt.map(B=>n.jsxs("tr",{onClick:()=>ct(B),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:ie=>ie.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:V.includes(B.id),onChange:()=>Z(B.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:B.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[B.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.lead.title}),B.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.account.name}),B.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[B.contact.first_name," ",B.contact.last_name]}),B.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.deal.name}),B.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne(B.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:B.call_time?new Date(B.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:B?.call_assign_to?`${B.call_assign_to.first_name} ${B.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M7(B.status)}`,children:X2(B.status)})}),n.jsx("td",{className:"py-3 px-4"})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:De.length,pageSize:P,currentPage:G,onPrev:H,onNext:be,onPageSizeChange:B=>{M(B),Q(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),de,D,r&&n.jsx(YRe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Ze,onCancel:ce,loading:E})]})}function qRe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function VRe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function QRe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function lo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function YRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Z2({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Zj=({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:o=[]})=>{const c=(()=>{const A=new Date,T=A.getFullYear(),$=String(A.getMonth()+1).padStart(2,"0"),z=String(A.getDate()).padStart(2,"0");return{startTime:`${T}-${$}-${z}T08:00`,endTime:`${T}-${$}-${z}T09:00`}})(),[d,u]=h.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[f,p]=h.useState([]),[x,v]=h.useState([]);h.useEffect(()=>{t!==void 0&&a&&(!t.startTime||!t.endTime)&&a(A=>({...A,startTime:A.startTime||c.startTime,endTime:A.endTime||c.endTime}))},[]);const N=A=>{if(!A)return"";const T=String(A).split("-");return T.length===3?`${T[0]}-${T[2]}`:String(A)},b=t!==void 0?t:d,C=a||u,{userRole:w}=Ys();h.useEffect(()=>{const A=async()=>{try{p([]);let T;b.relatedType1==="Lead"?T=await ae.get("/leads/admin/getLeads"):b.relatedType1==="Account"&&(T=await ae.get("/accounts/admin/fetch-all"));let $=[];if(T&&Array.isArray(T.data)&&($=T.data),s&&b.relatedTo1)try{let z;b.relatedType1==="Lead"?z=await ae.get(`/leads/get/${b.relatedTo1}`):b.relatedType1==="Account"&&(z=await ae.get(`/accounts/get/${b.relatedTo1}`)),z&&z.data&&($.some(P=>String(P.id)===String(b.relatedTo1))||($=[z.data,...$]))}catch(z){console.error("Error fetching specific related item:",z)}p($)}catch(T){console.error("Error fetching relatedTo1 data:",T),p([])}};b.relatedType1&&A()},[b.relatedType1,w,s,b.relatedTo1]),h.useEffect(()=>{const A=async()=>{try{if(v([]),b.relatedType1==="Account"&&b.relatedTo1){let T;b.relatedType2==="Contact"?T=await ae.get(`/contacts/from-acc/${b.relatedTo1}`):b.relatedType2==="Deal"?T=await ae.get(`/deals/from-acc/${b.relatedTo1}`):b.relatedType2==="Quote"&&(T=await ae.get(`/quotes/from-acc/${b.relatedTo1}`)),T&&Array.isArray(T.data)?v(T.data):v([])}else v([])}catch(T){console.error("Error fetching relatedTo2 data:",T),v([])}};b.relatedType2&&A()},[b.relatedType2,b.relatedTo1,b.relatedType1]);const S=A=>{const{name:T,value:$}=A.target;C(z=>{const F={...z,[T]:$};return T==="relatedType1"&&(z.relatedType1!==$&&(F.relatedTo1=""),$==="Lead"?(F.relatedType2=null,F.relatedTo2=null,v([])):$==="Account"&&(F.relatedType2="Contact",F.relatedTo2="")),T==="relatedType2"&&z.relatedType2!==$&&(F.relatedTo2=""),F})},[E,k]=h.useState(!1),_=A=>{if(A.preventDefault(),k(!0),b.status==="--"){W.warn("Please select a valid status.");return}const T=b.subject;if(!T||T.trim()===""){W.error("Subject is required.");return}if(!b.assignedTo){W.error("Assigned To is required.");return}if(!b.relatedTo1){W.error(`Please select a ${b.relatedType1||"Lead/Account"}.`);return}r?r(b):e()};return n.jsx("div",{id:"modalBackdrop",onClick:A=>A.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:_,noValidate:!0,children:[n.jsx(ob,{label:"Subject",name:"subject",value:b.subject,onChange:S,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:E,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:S,value:b.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400",disabled:i,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-8 pl-8 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(J2,{items:Array.isArray(f)?f:[],disabled:i,value:b.relatedTo1??"",placeholder:`Search ${b.relatedType1||"here"}...`,getLabel:A=>b.relatedType1==="Lead"?A.title:A.name??"",onChange:A=>C(T=>({...T,relatedTo1:A})),required:!0,isSubmitted:E})]}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsx("div",{className:"relative w-25",children:n.jsxs("select",{name:"relatedType2",onChange:S,value:b.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||b.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]})}),n.jsx(J2,{items:Array.isArray(x)?x:[],value:b.relatedTo2??"",placeholder:b.relatedType1==="Lead"?"":x?.length?`Search ${b.relatedType2}...`:`No ${b.relatedType2} data found`,getLabel:A=>b.relatedType2==="Contact"?`${A.first_name??""} ${A.last_name??""}`.trim():b.relatedType2==="Quote"?N(A.quote_id)??"":A.name??"",onChange:A=>C(T=>({...T,relatedTo2:A})),disabled:b.relatedType1==="Lead"})]}),n.jsx(ob,{label:"Location",name:"location",className:"md:col-span-2",value:b.location,onChange:S,disabled:i}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[n.jsx(ob,{label:"Start Time",name:"startTime",type:"datetime-local",value:b.startTime,onChange:S,disabled:i}),n.jsx(ob,{label:"End Time",name:"endTime",type:"datetime-local",value:b.endTime,onChange:S,disabled:i})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(J2,{items:Array.isArray(o)?o:[],value:b.assignedTo??"",placeholder:"Search an account...",getLabel:A=>`${A.first_name} ${A.last_name}`,onChange:A=>C(T=>({...T,assignedTo:A})),disabled:w==="Sales",required:!0,isSubmitted:E})]}),n.jsx(KRe,{label:"Status",name:"status",value:b.status,onChange:S,options:["--","Planned","Held","Not held"].map(A=>({value:A,label:A.replace("_"," ")})),disabled:i}),n.jsx(XRe,{label:"Notes",name:"notes",value:b.notes,onChange:S,rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function ob({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function KRe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l="",isSubmitted:c=!1}){const d=c&&i&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,hasError:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))})]})}function XRe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function J2({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const gd=({meeting:e,onClose:t,onEdit:a,onDelete:s,onStatusUpdate:r,currentUser:i,isSalesView:o=!1})=>{wt();const[l,c]=h.useState("Overview"),d=E=>{if(!E)return"";const k=String(E).split("-");return k.length===3?`${k[0]}-${k[2]}`:String(E)},u=E=>{const k=(E||"").toUpperCase();return k==="PLANNED"||k==="IN PROGRESS"?"PLANNED":k==="HELD"||k==="DONE"?"HELD":k==="NOT HELD"?"NOT_HELD":"PLANNED"},f=E=>{const k=(E||"").toUpperCase();return k==="PLANNED"?"PLANNED":k==="HELD"?"HELD":k==="NOT HELD"||k==="NOT_HELD"?"NOT HELD":"PENDING"},[p,x]=h.useState(u(e?.status||"PENDING")),[v,N]=h.useState(!1),{comments:b,addComment:C,refresh:w}=Ea({relatedType:"meeting",relatedId:e?.id});if(h.useEffect(()=>{e?.id&&w()},[e?.id,w]),!e)return null;const S=E=>{const k=(E||"").toUpperCase(),_=k==="PLANNED"?"PENDING":k==="HELD"?"COMPLETED":k==="NOT_HELD"?"CANCELLED":k;switch(k){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(_){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),n.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${S(u(e.status))}`,children:u(e.status||"PENDING").replace("_"," ")})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:(!o||e.created_by===i?.id)&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{a&&a(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{s&&s(e)},className:`inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm text-white transition focus:outline-none ${o?"bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-400":"bg-red-500 hover:bg-red-600 focus:ring-2 focus:ring-red-400"}`,children:[o?n.jsx(mi,{className:"mr-2"}):n.jsx(Wt,{className:"mr-2"}),o?"Archive":"Delete"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(E=>n.jsx("button",{onClick:()=>c(E),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${l===E?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:E},E))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[l==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Start Time:"}),n.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"End Time:"}),n.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),n.jsx("p",{children:e.subject||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Location:"}),n.jsx("p",{children:e.location||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Lead:"}),n.jsx("p",{children:e.lead.title})]}),e.account&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:e.account.name})]}),e.contact&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:e.deal.name})]}),e.quote&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote:"}),n.jsx("p",{children:d(e.quote.quote_id)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u(e.status||"PENDING").replace("_"," ")})]})]})}),l==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]}),n.jsx(Ta,{comments:b,onAddComment:C})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:E=>x(E.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const E=f(p);if(u(e.status)!==p){N(!0);try{await r(e.id,E)}catch(k){console.error("Failed to update status:",k)}finally{N(!1)}}},disabled:p===e.status||v,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===e.status||v?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:v?"Updating...":"Update"})]})]})]})]})})})},LZ=e=>e?e.toUpperCase():"",lb=e=>{const t=LZ(e);return t==="INACTIVE"?"INACTIVE":t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},ZRe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},JRe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},eze=e=>{const t=LZ(e);if(t==="INACTIVE")return"bg-gray-200 text-gray-700";switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},eA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},R7=()=>{const e=wt(),t=Jt(),[a]=Us(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,E]=h.useState(1),[k,_]=h.useState(10),[A,T]=h.useState(eA),[$,z]=h.useState(!1),[F,P]=h.useState(null),[M,G]=h.useState(!1),[Q,V]=h.useState(null),[X,q]=h.useState(!1),[ne,oe]=h.useState([]),[K,R]=h.useState(null);h.useEffect(()=>{const De=t.state?.openMeetingModal,tt=t.state?.initialMeetingData?.relatedTo||a.get("id"),Je=t.state?.meetingID;De||tt?(b(!0),t.state?.initialMeetingData&&T(H=>({...H,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Je&&(R(Je),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(K&&i.length>0&&!l){const De=i.find(tt=>tt.id===K);De?w(De):W.error("Meeting not found."),R(null)}},[K,i,l]);const ye=async()=>{if(s&&r){const De=sessionStorage.getItem("meetingDetailData");if(De)try{const tt=JSON.parse(De);if(tt.id===parseInt(s)){w(tt),sessionStorage.removeItem("meetingDetailData");return}}catch(tt){console.error(tt)}}c(!0);try{const De=await ae.get("/meetings/admin/fetch-all"),Je=[...Array.isArray(De.data)?De.data:[]].sort((H,be)=>{const le=H?.created_at?new Date(H.created_at).getTime():0;return(be?.created_at?new Date(be.created_at).getTime():0)-le});if(o(Je),s&&!C){const H=Je.find(be=>be.id===parseInt(s));H&&w(H)}}catch{W.error("Failed to load meetings.")}finally{c(!1)}},pe=async()=>{try{const De=await ae.get("/users/all");u(Array.isArray(De.data)?De.data:[])}catch(De){console.error(De)}};h.useEffect(()=>{ye(),pe()},[]);const Ne=De=>p(De.target.value),Se=De=>{if(De.target.checked){const tt=he.map(Je=>Je.id);oe(tt)}else oe([])},Oe=De=>{oe(tt=>tt.includes(De)?tt.filter(Je=>Je!==De):[...tt,De])},ke=h.useMemo(()=>{const De=f.trim().toLowerCase(),tt=x.trim().toUpperCase();return i.filter(Je=>{const H=[Je?.activity,Je?.description,Je?.relatedTo,Je?.assignedTo],be=De===""||H.some(Z=>Z&&Z.toString().toLowerCase().includes(De)),le=tt==="FILTER BY STATUS"||lb(Je.status||"PENDING")===tt;return be&&le})},[i,f,x]);h.useEffect(()=>{E(1)},[f,x,k]);const he=h.useMemo(()=>{const De=(S-1)*k;return ke.slice(De,De+k)},[ke,S,k]),Ge=()=>{b(!1),T(eA),z(!1),P(null),G(!1)},Ce=()=>{T(eA),z(!1),P(null),b(!0)},xe=De=>{let tt="";if(De.meet_assign_to?.id)tt=String(De.meet_assign_to.id);else if(De.assignedTo){const Ie=d.find(We=>`${We.first_name} ${We.last_name}`===De.assignedTo);tt=Ie?String(Ie.id):""}const Je=Ie=>{if(!Ie)return"";try{const We=new Date(Ie),gt=We.getTimezoneOffset()*6e4;return new Date(We.getTime()-gt).toISOString().slice(0,16)}catch{return""}};let H="Lead",be="",le="Contact",Z="";if(De.lead)H="Lead",be=String(De.lead.id);else if(De.account)H="Account",be=String(De.account.id),De.contact?(le="Contact",Z=String(De.contact.id)):De.deal?(le="Deal",Z=String(De.deal.id)):De.quote&&(le="Quote",Z=String(De.quote.id));else if(De.relatedType||De.related_type){const Ie=De.relatedType||De.related_type,We=De.related_to||De.relatedToId;Ie==="Lead"?(H="Lead",be=String(We)):(H="Account",be=De.account_id?String(De.account_id):"")}const _e={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},te=lb(De.status),Ue=_e[te]||"Planned";T({subject:De.subject||De.activity||"",location:De.location||"",startTime:Je(De.start_time||De.startTime),endTime:Je(De.end_time||De.endTime),status:Ue,notes:De.description||De.notes||"",assignedTo:tt,relatedType1:H,relatedTo1:be,relatedType2:le,relatedTo2:Z}),z(!0),P(De.id),w(null),b(!0)},ee=De=>{if(!De.subject?.trim())return W.error("Subject is required.");if(!De.startTime)return W.error("Start time is required.");if(De.endTime&&!(new Date(De.endTime)-new Date(De.startTime)>0))return W.error("End time must be after start time.");De.relatedType1,De.relatedTo1,De.relatedType1==="Account"&&De.relatedType2&&De.relatedTo2&&(De.relatedType2,De.relatedTo2);const tt={...De,assignedTo:parseInt(De.assignedTo),relatedTo1:parseInt(De.relatedTo1),relatedTo2:parseInt(De.relatedTo2)},Je=$&&F?"update":"create";V({title:Je==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Je} "${tt.subject}"?`,confirmLabel:Je==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Je,payload:tt,targetId:F,name:tt.subject}})},Ee=async()=>{if(!Q?.action)return;const{type:De,payload:tt,targetId:Je,name:H}=Q.action;q(!0);try{if(De==="create")G(!0),await ae.post("/meetings/create",tt),W.success(`Meeting "${H}" created.`),Ge(),await ye();else if(De==="update")G(!0),await ae.put(`/meetings/${Je}`,tt),W.success(`Meeting "${H}" updated.`),Ge(),await ye();else if(De==="delete")await ae.delete(`/meetings/${Je}`),W.success(`Meeting "${H}" deleted.`),C?.id===Je&&w(null),await ye();else if(De==="bulk-delete"){const{meeting_ids:be}=Q.action;await ae.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:be}}),W.success(`${be.length} meetings deleted.`),oe([]),await ye()}}catch(be){const le=be.response?.data?.detail||"Action failed.";W.error(typeof le=="string"?le:JSON.stringify(le)),console.error(le)}finally{G(!1),q(!1),V(null)}},Ae=async()=>{ne.length!==0&&V({title:"Delete Meetings",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ne.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${ne.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:ne}})},Re=De=>{V({title:"Delete Meeting",message:`Permanently delete "${De.subject}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:De.id,name:De.subject}})},et=async(De,tt)=>{try{await ae.put(`/meetings/${De}`,{status:tt}),W.success("Status updated"),ye(),w(null)}catch{W.error("Failed to update status")}};return r&&s?C?n.jsx(gd,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:xe,onDelete:Re,onStatusUpdate:et,isSalesView:!1}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Ce,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:Ne,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:De=>v(De.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:he.length>0&&ne.length===he.length,onChange:Se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ne.length>0?n.jsx("button",{onClick:Ae,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ne.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:he.length>0?he.map(De=>n.jsxs("tr",{onClick:()=>w(De),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:tt=>tt.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:ne.includes(De.id),onChange:()=>Oe(De.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:De.subject}),n.jsxs("td",{className:"py-3 px-4",children:[De.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.lead.title}),De.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.account.name}),De.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[De.contact.first_name," ",De.contact.last_name]}),De.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.deal.name}),De.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:JRe(De.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:ZRe(De.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[De.meet_assign_to.first_name," ",De.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${eze(lb(De.status))}`,children:lb(De.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},De.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:ke.length,pageSize:k,currentPage:S,onPrev:()=>E(De=>Math.max(1,De-1)),onNext:()=>E(De=>Math.min(De+1,Math.ceil(ke.length/k)||1)),onPageSizeChange:_,label:"meetings"}),N&&n.jsx(Zj,{onClose:Ge,formData:A,setFormData:T,isEditing:$,onSubmit:ee,isSubmitting:M||X,users:d}),C&&n.jsx(gd,{meeting:C,onClose:()=>w(null),onEdit:xe,onDelete:Re,onStatusUpdate:et,isSalesView:!1}),Q&&n.jsx(tze,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:Ee,onCancel:()=>V(null),loading:X})]})};function tze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}function nze(){const{user:e,mutate:t}=tn(),a=h.useRef(null),[s,r]=h.useState(""),[i,o]=h.useState(""),[l,c]=h.useState("January"),[d,u]=h.useState(0),[f,p]=h.useState(null),[x,v]=h.useState(null),[N,b]=h.useState(!1),[C,w]=h.useState({type:"",text:""}),S=["January","February","March","April","May","June","July","August","September","October","November","December"];h.useEffect(()=>{e?.company&&(e.company.company_name&&r(e.company.company_name),e.company.currency&&o(e.company.currency),e.company.quota_period&&c(e.company.quota_period),e.company.tax_rate!==void 0&&u(e.company.tax_rate),e.company.company_logo&&p(e.company.company_logo))},[e]);const E=T=>{const $=T.target.files?.[0];if(!$)return;if(!$.type.startsWith("image/")){w({type:"error",text:"Please select an image file"});return}if($.size>2*1024*1024){w({type:"error",text:"Image size should be less than 2MB"});return}const z=new FileReader;z.onloadend=()=>{v(z.result)},z.readAsDataURL($)},k=()=>{v(""),p(null)},_=async T=>{T.preventDefault(),b(!0),w({type:"",text:""});try{const $={company_name:s,currency:i,quota_period:l,tax_rate:parseFloat(d)};x!==null&&($.company_logo=x),await ae.put("/company/update-name",$),t&&await t(),v(null),w({type:"success",text:"Company settings updated successfully!"})}catch($){console.error("Update error:",$);const z=$.response?.data?.detail||"Failed to update settings.";w({type:"error",text:z})}finally{b(!1)}},A=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return n.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[n.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[n.jsx(en,{})," Company Details"]}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),n.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[!A&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[n.jsx(Wf,{}),n.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),n.jsx("input",{type:"text",value:s,onChange:T=>r(T.target.value),disabled:!A||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(pI,{className:"text-gray-500"})," Company Logo"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:x||f?n.jsx("img",{src:x||f,alt:"Company Logo",className:"w-16 h-16 object-contain border border-gray-200 rounded-lg bg-gray-50"}):n.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",children:n.jsx(pI,{className:"text-gray-400 text-xl"})})}),A&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("input",{type:"file",ref:a,accept:"image/*",onChange:E,className:"hidden",id:"company-logo-upload"}),n.jsxs("button",{type:"button",onClick:()=>a.current?.click(),disabled:N,className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:[n.jsx(Aie,{className:"text-gray-500"}),x||f?"Change Logo":"Upload Logo"]}),(x||f)&&n.jsx("button",{type:"button",onClick:k,disabled:N,className:"text-xs text-red-600 hover:text-red-700 transition",children:"Remove Logo"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Max 2MB, PNG or JPG"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Et,{className:"text-gray-500"})," Fiscal Year Start"]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:l,onChange:T=>c(T.target.value),disabled:!A||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:S.map(T=>n.jsx("option",{value:T,children:T},T))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Sie,{className:"text-gray-500"})," Default Tax Rate"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",step:"0.01",value:d,onChange:T=>u(T.target.value),disabled:!A||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50",placeholder:"0.00"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-8 pointer-events-none text-gray-400 font-medium",children:"%"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(VH,{className:"text-gray-500"})," Currency"]}),n.jsxs("div",{className:"flex gap-3 max-w-xs",children:[n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!A||N?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"",checked:i==="",onChange:()=>o(""),disabled:!A||N,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!A||N?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"$",checked:i==="$",onChange:()=>o("$"),disabled:!A||N,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]}),C.text&&n.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${C.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:C.text}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:A&&n.jsxs("button",{type:"submit",disabled:N,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[n.jsx(Kk,{}),N?"Updating...":"Save Settings"]})})]})]})}function aze({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Jt(),p=wt(),{logout:x}=Ys(),{user:v,fetchUser:N}=tn(),C={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[f.pathname]||"Sales Panel";h.useEffect(()=>{N();const _=()=>{N()};return window.addEventListener("userProfileUpdated",_),()=>{window.removeEventListener("userProfileUpdated",_)}},[]),h.useEffect(()=>{const _=async()=>{try{const A=await ae.get("/logs/notifications");console.log(" Fetched notifications from DB:",A.data);const T=(A.data||[]).map($=>{const z=$.entity_id||$.new_data?.id,F=($.entity_type||"").toLowerCase();return S({id:$.id,type:$.notif_type||$.notification_type||$.type||w($),title:$.title||$.description,assignedBy:$.assignedBy||$.name,createdAt:$.createdAt||$.timestamp,read:$.is_read??$.read??!1,leadId:F==="lead"?z:$.leadId||$.lead_id,taskId:F==="task"?z:$.taskId||$.task_id,contactId:F==="contact"?z:$.contactId||$.contact_id,dealId:F==="deal"?z:$.dealId||$.deal_id,accountId:F==="account"?z:$.accountId||$.account_id})});o(T),c(T.filter($=>!$.read).length)}catch(A){console.error("Failed to load history notifications",A)}};v?.id&&_()},[v?.id]);const w=_=>{const A=String(_.action||_.type||"").toUpperCase(),T={TASK_ASSIGNMENT:"task_assignment",LEAD_ASSIGNMENT:"lead_assignment",LEAD_UPDATE:"lead_update",CONTACT_ASSIGNMENT:"contact_assignment",CONTACT_UPDATE:"contact_update",DEAL_ASSIGNMENT:"deal_assignment",DEAL_UPDATE:"deal_update",ACCOUNT_ASSIGNMENT:"account_assignment",ACCOUNT_UPDATE:"account_update",TERRITORY_ASSIGNMENT:"territory_assignment",CREATE:"create",UPDATE:"update",DELETE:"delete"};if(T[A])return T[A];const $=String(_.title||_.description||"").toLowerCase(),z=String(_.entity_type||"").toLowerCase(),F=A.includes("UPDATE"),P=A.includes("CREATE");return A.includes("DELETE"),$.includes("task")||z==="task"?F?"task_update":"task_assignment":$.includes("territory")||z==="territory"?"territory_assignment":$.includes("lead")||z==="lead"?F?"lead_update":P?"lead_assignment":"lead_update":$.includes("contact")||z==="contact"?F?"contact_update":P?"contact_assignment":"contact_update":$.includes("deal")||z==="deal"?F?"deal_update":P?"deal_assignment":"deal_update":$.includes("account")||z==="account"?F?"account_update":P?"account_assignment":"account_update":$.includes("quote")||z==="quote"?"quote":$.includes("meeting")||z==="meeting"?"meeting":$.includes("call")||z==="call"?"call":"info"},S=_=>{const A={..._};switch(A.read=!!A.read,A.type){case"territory_assignment":A.title=A.title||`You have been assigned to ${A.territoryName||"a territory"}`;break;case"lead_assigned":A.type="lead_assignment",A.title=A.title||`New lead assigned: ${A.leadName||A.company||"Lead"}`;break;case"lead_assignment":A.title=A.title||`New lead assigned: ${A.leadName||A.company||"Lead"}`;break;case"lead_update":A.title=A.title||`Lead updated: ${A.leadName||A.company||"Lead"}`;break;case"task_assignment":case"task_update":A.title=A.title||`Task: ${A.taskTitle||"Task"}`;break;case"contact_assignment":A.title=A.title||`New contact assigned: ${A.contactName||A.contact||"Contact"}`;break;case"contact_update":A.title=A.title||`Contact updated: ${A.contactName||A.contact||"Contact"}`;break;case"deal_assignment":A.title=A.title||`New deal assigned: ${A.dealName||A.name||"Deal"}`;break;case"deal_update":A.title=A.title||`Deal updated: ${A.dealName||A.name||"Deal"}`;break;case"account_assignment":A.title=A.title||`New account assigned: ${A.accountName||A.name||"Account"}`;break;case"account_update":A.title=A.title||`Account updated: ${A.accountName||A.name||"Account"}`;break;case"quote":A.title=A.title||"Quote activity";break;case"meeting":A.title=A.title||"Meeting activity";break;case"call":A.title=A.title||"Call activity";break;default:A.title=A.title||"Activity"}return A},E=_=>{switch(_.type){case"task_assignment":p(`/sales/tasks/${_.taskId||_.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${_.leadId||_.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${_.contactId||_.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${_.dealId||_.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${_.accountId||_.account_id||""}`);break;default:p("/sales/overview")}},k=async _=>{if(_.read){E(_);return}try{await ae.patch(`/logs/mark-read/${_.id}`),o(A=>A.map(T=>T.id===_.id?{...T,read:!0}:T)),c(A=>A>0?A-1:0),E(_)}catch(A){console.error("Failed to mark notification as read",A),E(_)}};return h.useEffect(()=>{if(!v?.id)return;const _=iN(v.id);console.log(" Connecting to WebSocket:",_);const A=new WebSocket(_);let T;const $=()=>{T=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return A.onopen=()=>{console.log(" Sales WS Connected to:",_),clearTimeout(T)},A.onmessage=z=>{try{const F=JSON.parse(z.data);console.log(" Notification received:",F);const P=S(F);o(M=>[P,...M]),c(M=>M+1)}catch(F){console.error("Error parsing notification:",F)}},A.onclose=()=>{console.log(" Sales WS Disconnected"),$()},A.onerror=z=>{console.error(" Sales WS Error:",z)},()=>{clearTimeout(T),A&&A.readyState===WebSocket.OPEN&&A.close()}},[v?.id]),h.useEffect(()=>{function _(A){d.current&&!d.current.contains(A.target)&&a(!1),u.current&&!u.current.contains(A.target)&&r(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ox,{className:"text-2xl"})}),v?.company?.company_logo&&n.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(rx,{className:"text-xl sm:text-2xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&n.jsx("button",{onClick:async()=>{try{await ae.patch("/logs/mark-all-read"),o(_=>_.map(A=>({...A,read:!0}))),c(0)}catch(_){console.error("Failed to mark all notifications as read",_)}},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((_,A)=>n.jsxs("div",{onClick:()=>k(_),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${_.read?"bg-gray-50":"bg-white"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${_.type==="task_assignment"||_.type==="task_update"?"bg-purple-100 text-purple-700":_.type==="lead_assignment"||_.type==="lead_update"?"bg-green-100 text-green-700":_.type==="contact_assignment"||_.type==="contact_update"?"bg-amber-100 text-amber-700":_.type==="deal_assignment"||_.type==="deal_update"?"bg-indigo-100 text-indigo-700":_.type==="account_assignment"||_.type==="account_update"?"bg-cyan-100 text-cyan-700":_.type==="territory_assignment"?"bg-blue-100 text-blue-700":_.type==="quote"?"bg-pink-100 text-pink-700":_.type==="meeting"?"bg-teal-100 text-teal-700":_.type==="call"?"bg-red-100 text-red-700":_.type==="create"?"bg-emerald-100 text-emerald-700":_.type==="update"?"bg-yellow-100 text-yellow-700":_.type==="delete"?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"}`,children:_.type==="task_assignment"||_.type==="task_update"?"Task":_.type==="lead_assignment"?"Lead":_.type==="lead_update"?"Lead Update":_.type==="contact_assignment"?"Contact":_.type==="contact_update"?"Contact Update":_.type==="deal_assignment"?"Deal":_.type==="deal_update"?"Deal Update":_.type==="account_assignment"?"Account":_.type==="account_update"?"Account Update":_.type==="territory_assignment"?"Territory":_.type==="quote"?"Quote":_.type==="meeting"?"Meeting":_.type==="call"?"Call":_.type==="create"?"Created":_.type==="update"?"Updated":_.type==="delete"?"Deleted":"Activity"}),!_.read&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:_.title}),n.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:_.assignedBy?`Assigned by ${_.assignedBy}`:"System"}),n.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:_.createdAt?new Date(_.createdAt).toLocaleString():""})]})]},_.id??A)):n.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]}),v?.company&&n.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100 w-full justify-center",children:[v.company.company_logo&&n.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-6 h-6 object-contain rounded"}),n.jsx("span",{className:"text-xs text-gray-500 truncate",children:v.company.company_name})]})]}),n.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[n.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),a(!1)},children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function sze(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),{user:r}=tn(),[i,o]=h.useState(!1);h.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const l=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Jt(),d=l.includes(c.pathname);h.useEffect(()=>{d&&o(!0)},[c.pathname]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(It,{to:"/sales/overview",className:({isActive:p})=>p?u:f,children:[n.jsx(ix,{})," Dashboard"]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>o(!i),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/sales/accounts",className:({isActive:p})=>p?u:f,children:[n.jsx(xd,{})," Accounts"]}),n.jsxs(It,{to:"/sales/contacts",className:({isActive:p})=>p?u:f,children:[n.jsx(sn,{})," Contacts"]}),n.jsxs(It,{to:"/sales/leads",className:({isActive:p})=>p?u:f,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs(It,{to:"/sales/deals",className:({isActive:p})=>p?u:f,children:[n.jsx(en,{})," Deals"]}),n.jsxs(It,{to:"/sales/quotes",className:({isActive:p})=>p?u:f,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs(It,{to:"/sales/targets",className:({isActive:p})=>p?u:f,children:[n.jsx(lr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/sales/tasks",className:({isActive:p})=>p?u:f,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs(It,{to:"/sales/meetings",className:({isActive:p})=>p?u:f,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs(It,{to:"/sales/calls",className:({isActive:p})=>p?u:f,children:[n.jsx(Rs,{})," Calls"]}),n.jsxs(It,{to:"/sales/audit",className:({isActive:p})=>p?u:f,children:[n.jsx(Ts,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(It,{to:"/sales/territory",className:({isActive:p})=>p?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs(It,{to:"/sales/manage-account",className:({isActive:p})=>p?u:f,children:[n.jsx(sn,{className:"text-lg"}),n.jsx("span",{children:"Manage Account"})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(aze,{toggleSidebar:()=>t(!0)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}const rze=e=>n.jsx(qt,{...e}),PZ=e=>n.jsx(xd,{...e}),DZ=e=>n.jsx(qs,{...e}),ize=e=>n.jsx(sx,{...e}),oze=e=>n.jsx(zw,{...e}),lze=e=>n.jsx(Et,{...e}),cze=e=>n.jsx(Lt,{...e}),dze=e=>n.jsx(Fw,{...e}),OZ=e=>n.jsx(Uw,{...e}),uze=e=>n.jsx(aa,{...e}),MZ=e=>n.jsx(sn,{...e}),mze=e=>n.jsx(Yn,{...e}),IZ=e=>n.jsx(en,{...e}),fze=e=>n.jsx(hn,{...e}),hze=e=>n.jsx(lr,{...e}),gze=e=>n.jsx(_a,{...e}),pze=e=>n.jsx(Et,{...e}),xze=e=>n.jsx(Rs,{...e}),yze=e=>n.jsx(Xl,{...e}),bze=e=>n.jsx(Ts,{...e}),$Z=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,vze=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},wze=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Nze=e=>{switch(e){case"call":return{Icon:cze,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:dze,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:lze,color:"text-blue-500",bgColor:"bg-blue-100"}}},jze=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Cze=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:PZ,label:"Account"},{icon:MZ,label:"Contact"},{icon:mze,label:"Leads"},{icon:IZ,label:"Deals"},{icon:fze,label:"Quotes"},{icon:hze,label:"Target"},{icon:gze,label:"Task"},{icon:pze,label:"Meeting"},{icon:xze,label:"Call"},{icon:bze,label:"Audit"},{icon:yze,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(rze,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},Sze=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},_ze=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(OZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(Sze,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},Aze=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),Tze=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let E=0;E<=C;E++)w.push(s[E]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",E=b.stage||"",k=E.toUpperCase()==="CLOSED_WON"||E==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const A=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:E,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(b)})),S&&k&&A)try{let T=new Date(w);if(isNaN(T.getTime())){const $=String(w).split("T")[0];T=new Date($+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const $=T.getFullYear(),z=T.getMonth()+1,F=`${$}-${String(z).padStart(2,"0")}`;l[F]||(l[F]=0),l[F]+=_,c++,console.log(` Added deal ${b.id} to month ${F}: ${_}, total: ${l[F]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${F} (Year: ${$}, Month: ${z})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,E=l[S]||0;x.push(`${s[w]} ${C}`),v.push(E),E>0&&console.log(`Month ${s[w]} ${C} (${S}): ${E}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(OZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(YN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},Eze=({pipelineData:e,loading:t})=>{const a=wt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/sales/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/sales/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:$Z(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},tA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},kze=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=wze(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},Lze=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=wt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=vze(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?ize:oze,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/sales/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:$Z(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},Pze=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=Nze(f),{text:N,bg:b}=jze(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const A=new Date(_),$=A-new Date,z=Math.floor($/864e5);return z===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),E=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/sales/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/sales/meetings/info?id=${o}`)):d("/sales/tasks"):d(f==="call"?`/sales/calls/info?id=${o}`:f==="meeting"?`/sales/meetings/info?id=${o}`:"/sales/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(DZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(MZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",E]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},Dze=()=>{const e=wt(),{user:t}=tn(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[E,k]=h.useState(""),[_,A]=h.useState([]),[T,$]=h.useState([]),[z,F]=h.useState([]),[P,M]=h.useState(new Date),G=h.useRef(null),Q=h.useRef(null),V=h.useMemo(()=>{try{if(!E.trim())return[];const oe=E.toLowerCase().trim(),K=[];return Array.isArray(_)&&_.forEach(R=>{const ye=`${R.first_name||""} ${R.last_name||""}`.trim().toLowerCase(),pe=(R.company_name||"").toLowerCase(),Ne=(R.email||"").toLowerCase(),Se=(R.phone||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:R.id,name:`${R.first_name||""} ${R.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:R.company_name||"No company",route:`/sales/leads/${R.id}`})}),Array.isArray(T)&&T.forEach(R=>{const ye=(R.name||"").toLowerCase(),pe=(R.account?.name||"").toLowerCase(),Ne=(R.description||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe))&&K.push({id:R.id,name:R.name||"Unnamed Deal",type:"Deal",details:R.account?.name||"No account",route:`/sales/deals/info?id=${R.id}`})}),Array.isArray(z)&&z.forEach(R=>{const ye=(R.name||"").toLowerCase(),pe=(R.email||"").toLowerCase(),Ne=(R.phone||"").toLowerCase(),Se=(R.website||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:R.id,name:R.name||"Unnamed Account",type:"Account",details:R.email||R.phone||"No contact info",route:"/sales/accounts"})}),K.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[E,_,T,z]),X=oe=>{oe.route&&(e(oe.route),k(""))},q=h.useCallback(async()=>{C(!0),S(null);try{const[oe,K,R,ye,pe,Ne,Se]=await Promise.all([ae.get("/leads/sales/getLeads").catch(Z=>(console.error("Error fetching leads:",Z),{data:[]})),ae.get("/deals/sales/fetch-all").catch(Z=>(console.error("Error fetching deals:",Z),{data:[]})),ae.get("/accounts/sales/fetch-all").catch(Z=>(console.error("Error fetching accounts:",Z),{data:[]})),ae.get("/tasks/all").catch(Z=>(console.error("Error fetching tasks:",Z),{data:[]})),ae.get("/meetings/sales/fetch-all").catch(Z=>(console.error("Error fetching meetings:",Z),{data:[]})),ae.get("/calls/sales/fetch-all").catch(Z=>(console.error("Error fetching calls:",Z),{data:[]})),ae.get("/logs/read-all").catch(Z=>(console.error("Error fetching logs:",Z),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],ke=Array.isArray(K.data)?K.data:[],he=Array.isArray(R.data)?R.data:[],Ge=Array.isArray(ye.data)?ye.data:[],Ce=Array.isArray(pe.data)?pe.data:[],xe=Array.isArray(Ne.data)?Ne.data:[],ee=Array.isArray(Se.data)?Se.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),A(Oe),$(ke),F(he);const Ee=Oe.filter(Z=>Z.status&&!["Lost","Converted"].includes(Z.status)).length,Ae=Ge.filter(Z=>!Z.dueDate||Z.status==="Completed"?!1:new Date(Z.dueDate)<new Date).length;s({activeLeads:Ee,totalDeals:ke.length,activeAccounts:he.length,overdueTasks:Ae});const Re=[...Oe].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);i(Re);const et=[...ke].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);l(et);const De=new Date,tt=[];xe.forEach(Z=>{const _e=Z.due_date||Z.call_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="MISSED"||te==="NOT_HELD"||te==="HELD"||tt.push({type:"Call",title:Z.subject||"Untitled Call",assignedTo:Z.assigned_to||(Z.call_assign_to?`${Z.call_assign_to.first_name||""} ${Z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"call",fullData:Z})}}),Ce.forEach(Z=>{const _e=Z.dueDate||Z.start_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="CANCELLED"||te==="DONE"||tt.push({type:"Meeting",title:Z.subject||Z.activity||"Untitled Meeting",assignedTo:Z.assignedTo||(Z.meet_assign_to?`${Z.meet_assign_to.first_name||""} ${Z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"meeting",fullData:Z})}});const Je={HIGH:1,MEDIUM:2,LOW:3},H=tt.sort((Z,_e)=>{const te=Je[Z.priority]||3,Ue=Je[_e.priority]||3;if(te!==Ue)return te-Ue;const Ie=new Date(Z.scheduledDate||0),We=new Date(_e.scheduledDate||0);return Ie-We}).slice(0,5);d(H),f(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const be=ke.filter(Z=>(Z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",be.length),be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),be.forEach((Z,_e)=>{let te=Z.amount;te&&typeof te=="object"?te.toString?te=parseFloat(te.toString()):te=parseFloat(te):te=parseFloat(te)||0,console.log(`Deal ${_e+1}:`,{id:Z.id,name:Z.name,stage:Z.stage,stage_upper:(Z.stage||"").toUpperCase(),amount:Z.amount,amount_parsed:te,amount_type:typeof Z.amount,close_date:Z.close_date,close_date_type:typeof Z.close_date,close_date_value:Z.close_date?new Date(Z.close_date):null,has_close_date:!!Z.close_date,has_amount:te>0,all_keys:Object.keys(Z),full_deal:Z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(Z=>Z.stage))),N(ke);const le=[...ee].sort((Z,_e)=>new Date(_e.timestamp||0)-new Date(Z.timestamp||0));x(le)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),q(),G.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),q(),M(new Date)},3e4),()=>{G.current&&clearInterval(G.current)}),[q]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const K=3;let R=null;const ye=()=>{const pe=window.location.protocol==="https:"?"wss:":"ws:",Ne=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Se=`${pe}//${Ne}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Se);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=ke=>{try{const he=JSON.parse(ke.data);console.log(" Real-time notification received:",he),he.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(he.event)&&(console.log(" Refreshing dashboard due to:",he.event),q(),M(new Date))}catch(he){console.error("Error parsing WebSocket message:",he)}},Oe.onerror=ke=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<K&&(oe++,R=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{R&&clearTimeout(R),Q.current&&(Q.current.close(),Q.current=null)}},[t,q]);const ne=[{icon:uze,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:IZ,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:PZ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/sales/accounts")},{icon:DZ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")}];return console.log("SalesOverview rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(Cze,{searchQuery:E,onSearchChange:k,searchResults:V,onSearchResultClick:X}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:ne.map(oe=>n.jsx(Aze,{...oe,loading:b},oe.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(_ze,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(Tze,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(Eze,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(tA,{title:"Latest Leads",children:r.length>0?r.map((oe,K)=>n.jsx(kze,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(tA,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((oe,K)=>n.jsx(Lze,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(tA,{title:"Upcoming Activities",children:c.length>0?c.map((oe,K)=>n.jsx(Pze,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},nA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],aA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},kr=e=>e?e.toUpperCase():"",sA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",Oze=e=>{switch(kr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Mze=e=>{switch(kr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function Ize(){const e=wt(),{user:t}=tn(),a=t?.role==="Sales";h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(null),[f,p]=h.useState(null),[x,v]=h.useState(aA),[N,b]=h.useState(null),[C,w]=h.useState([]),[S,E]=h.useState(!1),[k,_]=h.useState([]),[A,T]=h.useState(null),[$,z]=h.useState([]),[F,P]=h.useState([]),[M,G]=h.useState("Filter by Status"),[Q,V]=h.useState(""),[X,q]=h.useState(null),[ne,oe]=h.useState(!1),[K,R]=h.useState(1),[ye,pe]=h.useState(10),[Ne,Se]=h.useState("Overview"),[Oe,ke]=h.useState(""),[he,Ge]=h.useState(!1),[Ce,xe]=h.useState([]),[ee,Ee]=h.useState({}),[Ae,Re]=h.useState(null);h.useEffect(()=>{s&&!i&&a&&t&&!x.assigned_to&&v(I=>({...I,assigned_to:t.id}))},[s,i,a,t,x.assigned_to]);const{comments:et,addComment:De,refresh:tt}=Ea({relatedType:"account",relatedId:N?.id});h.useEffect(()=>{N?.id&&tt()},[N?.id,tt]);const Je=h.useCallback(async(I=null)=>{E(!0);try{const me=await ae.get("/accounts/admin/fetch-all"),$e=[...Array.isArray(me.data)?me.data:[]].sort((Ve,Ye)=>{const At=Ve?.created_at||Ve?.updated_at||0,Ct=Ye?.created_at||Ye?.updated_at||0;return new Date(Ct)-new Date(At)});if(w($e),I){const Ve=$e.find(Ye=>Ye.id===I);b(Ve||null)}}catch(me){console.error(me),w([]),me.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch accounts. Please try again later.")}finally{E(!1)}},[b]),H=h.useCallback(async()=>{try{const I=await ae.get("/users/all");_(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),be=h.useCallback(async()=>{try{const I=await ae.get("/territories/fetch");z(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&W.warn("Unable to load territories (permission denied).")}},[]),le=h.useCallback(async()=>{try{const I=await ae.get("/accounts/admin/parent-companies");P(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&W.warn("Unable to load parent companies (permission denied).")}},[]),Z=h.useCallback(async I=>{try{const me=await ae.get(`/activities/accounts/${I}`);Ee(me.data&&typeof me.data=="object"?me.data:{})}catch(me){console.error(me),me.response?.status===404&&(console.warn("No activities found for this account."),Ee({}))}},[]);h.useEffect(()=>{Je(),H(),be(),le()},[Je,H,be,le]),h.useEffect(()=>{N&&ke(kr(N.status)||"PROSPECT")},[N]);const _e=C.filter(I=>I.acc_creator?.id===t?.id&&I.assigned_accs?.id===t?.id),te=_e.length,Ue=h.useMemo(()=>_e.filter(I=>I.status?.toLowerCase()==="customer").length,[_e]),Ie=h.useMemo(()=>_e.filter(I=>I.status?.toLowerCase()==="prospect").length,[_e]),We=h.useMemo(()=>_e.filter(I=>I.status?.toLowerCase()==="partner").length,[_e]),gt=h.useMemo(()=>_e.filter(I=>I.status?.toLowerCase()==="active").length,[_e]),ve=h.useMemo(()=>_e.filter(I=>I.status?.toLowerCase()==="inactive").length,[_e]),Be=h.useMemo(()=>_e.filter(I=>I.status?.toLowerCase()==="former").length,[_e]),nt=h.useMemo(()=>[{title:"Total",value:te,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Ue,icon:Mo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ie,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:We,icon:sn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:gt,icon:Mo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ve,icon:Io,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Be,icon:Io,color:"text-orange-600",bgColor:"bg-orange-100"}],[te,Ue,Ie,We,gt,ve,Be]),Te=h.useMemo(()=>{const I=Q.trim().toLowerCase(),me=M.trim().toUpperCase();return C.filter(Le=>{if(!(t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER")&&Le.status?.toUpperCase()==="INACTIVE")return!1;const Ve=[Le?.name,Le?.website,Le?.industry,Le?.territory?.name,Le?.phone_number],Ye=I===""||Ve.some(Ct=>Ct==null?!1:Ct.toString().toLowerCase().includes(I)),At=me==="FILTER BY STATUS"||kr(Le.status)===me;return Ye&&At})},[C,Q,M,t]),Qe=Math.max(1,Math.ceil(Te.length/ye)||1);h.useEffect(()=>{R(1)},[Q,M]),h.useEffect(()=>{R(I=>{const me=Math.max(1,Math.ceil(Te.length/ye)||1);return I>me?me:I})},[Te.length,ye]);const ct=h.useMemo(()=>{const I=(K-1)*ye;return Te.slice(I,I+ye)},[Te,K,ye]),ht=I=>{if(I.target.checked){const me=ct.filter(Le=>Le.assigned_accs?.id===t?.id&&Le.acc_creator?.id===t?.id).map(Le=>Le.id);xe(me)}else xe([])},je=I=>{xe(me=>me.includes(I)?me.filter(Le=>Le!==I):[...me,I])},Ze=async()=>{if(Ce.length===0)return;const I=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",me=I?"delete":"archive",Le=I?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",$e=!I;q({title:`${me.charAt(0).toUpperCase()+me.slice(1)} Accounts`,message:n.jsxs("span",{children:["Are you sure you want to ",me," ",n.jsx("span",{className:"font-semibold",children:Ce.length})," selected accounts? ",Le]}),confirmLabel:`${me.charAt(0).toUpperCase()+me.slice(1)} ${Ce.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:$e?mi:null,isArchive:$e,action:{type:"bulk-delete",accountIds:Ce}})};Te.length===0||(K-1)*ye+1,Math.min(K*ye,Te.length);const ce=()=>R(I=>Math.max(I-1,1)),J=()=>R(I=>Math.min(I+1,Qe)),de=I=>{b(I),Se("Overview"),ke(kr(I?.status)||"PROSPECT")},D=()=>b(null),B=I=>{I.target.id==="accountModalBackdrop"&&!ne&&D()},ie=()=>{r(!1),o(!1),p(null),v(aA),c(!1),T(null)},ue=I=>{I.target.id==="modalBackdrop"&&ie()},se=I=>I?new Date(I).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Pe=I=>{const{name:me,value:Le}=I.target;v($e=>({...$e,[me]:Le}))},ge=()=>{v(aA),o(!1),p(null),r(!0)},fe=I=>{b(null),I.assigned_accs?T(I.assigned_accs):T(null),v({name:I.name||"",website:I.website||"",phone_number:I.phone_number||"",billing_address:I.billing_address||"",shipping_address:I.shipping_address||"",industry:I.industry||"",status:kr(I.status)||"PROSPECT",territory_id:I.territory?.id?String(I.territory.id):"",assigned_to:I.assigned_accs?.id?String(I.assigned_accs.id):""}),o(!0),p(I.id),r(!0)},Fe=I=>{if(!I)return;const me=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Le=me?"delete":"archive",$e=me?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",Ve=!me;q({title:`${Le.charAt(0).toUpperCase()+Le.slice(1)} Account`,message:n.jsxs("span",{children:["Are you sure you want to ",Le," the account"," ",n.jsx("span",{className:"font-semibold",children:I.name}),"? ",$e]}),confirmLabel:`${Le.charAt(0).toUpperCase()+Le.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:Ve?mi:null,isArchive:Ve,action:{type:"delete",targetId:I.id,name:I.name}})},Xe=async()=>{if(!X?.action){q(null);return}const{action:I}=X,{type:me,payload:Le,targetId:$e,name:Ve}=I;oe(!0);try{if(me==="create"){c(!0);const Ye=await ae.post("/accounts/admin",Le);le(),W.success(`Account "${Ve}" created successfully.`);const At=N?.id||null;ie(),await Je(At),!N&&Ye.data?.id}else if(me==="update"){if(!$e)throw new Error("Missing account identifier for update.");c(!0),await ae.put(`/accounts/admin/${$e}`,Le),W.success(`Account "${Ve}" updated successfully.`);const Ye=N?.id&&N.id===$e?$e:null;ie(),await Je(Ye),N?.id===$e&&b(null)}else if(me==="delete"){if(!$e)throw new Error("Missing account identifier for deletion.");const Ye=N?.id;u($e);const Ct=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?`Account "${Ve}" deleted successfully.`:`Account "${Ve}" archived successfully.`;await ae.delete(`/accounts/admin/${$e}`),W.success(Ct),await Je(Ye&&Ye!==$e?Ye:null),Ye===$e&&b(null)}else if(me==="bulk-delete"){const{accountIds:Ye}=I,Ct=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?"deleted":"archived";await ae.delete("/accounts/admin/bulk-delete",{data:{account_ids:Ye}}),W.success(`Successfully ${Ct} ${Ye.length} accounts`),xe([]),await Je()}}catch(Ye){console.error(Ye);const At=me==="create"?"Failed to create account. Please review the details and try again.":me==="update"?"Failed to update account. Please review the details and try again.":me==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ct=Ye.response?.data?.detail||At;W.error(Ct),(me==="create"||me==="update")&&c(!1),me==="delete"&&u(null)}finally{(me==="create"||me==="update")&&c(!1),me==="delete"&&u(null),oe(!1),q(null)}},pt=()=>{ne||q(null)},Nt=async()=>{if(!N||!Oe)return;const I=kr(Oe),me=kr(N.status);if(I!==me){Ge(!0);try{await ae.put(`/accounts/admin/${N.id}`,{status:I}),W.success(`Account status updated to ${sA(I)}`),w(Le=>Le.map($e=>$e.id===N.id?{...$e,status:I}:$e)),b(null)}catch(Le){console.error(Le);const $e=Le.response?.data?.detail||"Failed to update account status. Please try again.";W.error($e)}finally{Ge(!1)}}},[St,Ht]=h.useState(!1),on=I=>{I.preventDefault(),Ht(!0);const me=x.name.trim();if(!me){W.error("Account name is required.");return}if(!x.assigned_to){W.error("Assigned To is required.");return}const $e={name:me,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},Ve=i&&f?"update":"create";q({title:Ve==="create"?"Confirm New Account":"Confirm Update",message:Ve==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}),confirmLabel:Ve==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:$e,targetId:f||null,name:me}})},cn=[{label:"Filter by Status",value:"Filter by Status"},...nA.map(I=>({label:I.label,value:I.value}))],re=X?.action?.type==="delete"?X.action.targetId:null,ot=N&&(d===N.id||re===N.id),Rt=N&&d===N.id,kt=N?Oze(N.status):"",Yt=N?n.jsx("div",{id:"accountModalBackdrop",onClick:B,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:D,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:N.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${kt}`,children:sA(N.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:N.assigned_accs&&N.assigned_accs.id===t?.id&&N.acc_creator&&N.acc_creator.id===t?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(N),disabled:X?.action?.type==="update"&&X.action.targetId===N.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Fe(N),disabled:!!ot,children:Rt?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(mi,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(I=>n.jsx("button",{onClick:()=>Se(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Ne===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:N.website?n.jsx("a",{href:N.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:N.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:N.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:N.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:N.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:N.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:N.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:N.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_accs?`${N.assigned_accs.first_name} ${N.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.acc_creator?`${N.acc_creator.first_name} ${N.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:se(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:se(N.updated_at)||"N/A"})]})]}),n.jsx(Ta,{comments:et,onAddComment:De})]}),Ne==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:C.notes||"No notes available."})]})]}),Ne==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ee.tasks&&ee.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ee.tasks.length,")"]})]}),Ae==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ae==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.tasks.map((I,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se(I.due_date||I.created_at)})]},`task-${me}`))})]}),ee.meetings&&ee.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ee.meetings.length,")"]})]}),Ae==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ae==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.meetings.map((I,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se(I.start_time||I.created_at)})]},`meeting-${me}`))})]}),ee.calls&&ee.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ee.calls.length,")"]})]}),Ae==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ae==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.calls.map((I,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se(I.call_time||I.created_at)})]},`call-${me}`))})]}),ee.contacts&&ee.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ee.contacts.length,")"]})]}),Ae==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ae==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.contacts.map((I,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(sn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[I.first_name?`${I.first_name} `:"",I.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:I.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se(I.created_at)})]},`contact-${me}`))})]}),ee.deals&&ee.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ee.deals.length,")"]})]}),Ae==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ae==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.deals.map((I,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[I.deal_id?I.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",I.name||I.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:I.stage||I.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se(I.close_date||I.created_at)})]},`deal-${me}`))})]}),ee.quotes&&ee.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ee.quotes.length,")"]})]}),Ae==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ae==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.quotes.map((I,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(I.quote_id?I.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:I.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se(I.presented_date)||""})]},`quote-${me}`))})]}),(!ee||(!ee.tasks||ee.tasks.length===0)&&(!ee.meetings||ee.meetings.length===0)&&(!ee.calls||ee.calls.length===0)&&(!ee.quotes||ee.quotes.length===0)&&(!ee.deals||ee.deals.length===0)&&(!ee.contacts||ee.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assignedTo:N.assigned_accs?.id?String(N.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Oe||kr(N?.status)||"PROSPECT",onChange:I=>ke(I.target.value),children:nA.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value))}),n.jsx("button",{onClick:Nt,disabled:he||!Oe||kr(Oe)===kr(N?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${he||!Oe||kr(Oe)===kr(N?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:he?"Updating...":"Update"})]})]})]})]})]})}):null,Me=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ge(),Ht(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:nt.map(I=>n.jsx($ze,{...I},I.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:Q,onChange:I=>V(I.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:M,onChange:I=>G(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:ct.length>0&&ct.filter(I=>I.assigned_accs?.id===t?.id&&I.acc_creator?.id===t?.id).every(I=>Ce.includes(I.id))&&ct.some(I=>I.assigned_accs?.id===t?.id&&I.acc_creator?.id===t?.id),onChange:ht,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ce.length>0?n.jsx("button",{onClick:Ze,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Ce.length} selected accounts`,children:n.jsx(mi,{size:18})}):""})]})}),n.jsx("tbody",{children:S?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Te.length>0?ct.map(I=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{de(I),Z(I.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:I.assigned_accs?.id===t?.id&&I.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:Ce.includes(I.id),onChange:()=>je(I.id),onClick:me=>me.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:I.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:I.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Mze(I.status)}`,children:sA(I.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:I.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:I.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:I.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},I.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Te.length,pageSize:ye,currentPage:K,onPrev:ce,onNext:J,onPageSizeChange:I=>{pe(I),R(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),vt=s?n.jsx("div",{id:"modalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:I=>I.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ie(),Ht(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:l||ne,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:on,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Ym,{label:"Name",name:"name",value:x.name,onChange:Pe,placeholder:"Company name",required:!0,isSubmitted:St})}),n.jsx(U7,{label:"Parent Company",value:x.parent_company,onChange:I=>{v(me=>({...me,parent_company:I}))},items:F.map(I=>({id:I,name:I})),getLabel:I=>I?.name||"",placeholder:"Select parent company...",disabled:l}),n.jsx(Ym,{label:"Website",name:"website",value:x.website,onChange:Pe,placeholder:"https://example.com",disabled:l}),n.jsx(Ym,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:Pe,placeholder:"09xx xxx xxxx",type:"tel",disabled:l}),n.jsx(Ym,{label:"Industry",name:"industry",value:x.industry,onChange:Pe,placeholder:"Industry",disabled:l}),n.jsx(Ym,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:Pe,placeholder:"Billing address",disabled:l}),n.jsx(Ym,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:Pe,placeholder:"Shipping address",disabled:l}),n.jsx(z7,{label:"Status",name:"status",value:x.status,onChange:Pe,options:[{value:"",label:"Select status"},...nA],required:!0,disabled:l}),n.jsx(U7,{label:"Assigned To",value:x.assigned_to,onChange:I=>{const me=k.find($e=>String($e.id)===String(I));T(me);let Le=null;me&&me.assigned_territory&&me.assigned_territory.length===1&&(Le=me.assigned_territory[0].id),v($e=>({...$e,assigned_to:I,territory_id:Le}))},items:k||[],getLabel:I=>`${I?.first_name??""} ${I?.last_name??""} (${I?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:St,disabled:l||k.length===0||a}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(z7,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:Pe,options:[{value:"",label:A?A.assigned_territory&&A.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...A&&A.assigned_territory&&A.assigned_territory.map(I=>({value:String(I.id),label:I.name}))||[]],disabled:l||!A||!A.assigned_territory||A.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ie(),Ht(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:l||ne,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:l||ne,children:l?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,U=X?n.jsx(zze,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,cancelLabel:X.cancelLabel,variant:X.variant,onConfirm:Xe,onCancel:pt,loading:ne,icon:X.icon,isArchive:X.isArchive}):null;return n.jsxs(n.Fragment,{children:[Me,Yt,vt,U]})}function $ze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Ym({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function z7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function U7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Rze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function Rze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),E=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function zze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const rA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},gl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Oi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Uze(){const e=wt(),t=Jt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[E,k]=h.useState(!1),[_,A]=h.useState(null),[T,$]=h.useState(rA),[z,F]=h.useState(""),[P,M]=h.useState("Filter by Accounts"),[G,Q]=h.useState(null),[V,X]=h.useState("Overview"),[q,ne]=h.useState(1),[oe,K]=h.useState(10),[R,ye]=h.useState({}),[pe,Ne]=h.useState(null),[Se,Oe]=h.useState(null),[ke,he]=h.useState(null),[Ge,Ce]=h.useState([]),{comments:xe,addComment:ee,refresh:Ee}=Ea({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&Ee()},[u?.id,Ee]),h.useEffect(()=>{const fe=t.state?.contactID;fe&&(he(fe),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(ke&&a.length>0&&!r){const fe=a.find(Fe=>Fe.id===ke);fe?f(fe):W.error("Contact not found."),he(null)}},[ke,a,r]),h.useEffect(()=>{async function fe(){try{const Fe=await ae.get("/auth/me");Oe(Fe.data)}catch(Fe){console.error("Failed to fetch current user",Fe)}}fe()},[]);const Ae=h.useCallback(async(fe=null)=>{i(!0);try{const Fe=await ae.get("/contacts/admin/fetch-all"),pt=[...Array.isArray(Fe.data)?Fe.data:[]].sort((Nt,St)=>{const Ht=Nt?.created_at||Nt?.updated_at||0,on=St?.created_at||St?.updated_at||0;return new Date(on)-new Date(Ht)});if(s(pt),fe){const Nt=pt.find(St=>St.id===fe);f(Nt||null)}}catch(Fe){console.error(Fe),s([]),Fe.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),Re=h.useCallback(async()=>{try{const fe=await ae.get("/accounts/admin/fetch-all"),Xe=[...Array.isArray(fe.data)?fe.data:[]].sort((pt,Nt)=>(pt?.name||"").localeCompare(Nt?.name||""));l(Xe)}catch(fe){console.error(fe),l([]),fe.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),et=h.useCallback(async()=>{try{const fe=await ae.get("/users/all"),Xe=[...Array.isArray(fe.data)?fe.data:[]].sort((pt,Nt)=>gl(pt).localeCompare(gl(Nt)));d(Xe)}catch(fe){console.error(fe),d([]),fe.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),De=h.useCallback(async fe=>{try{const Fe=await ae.get(`/activities/contact/${fe}`);ye(Fe.data&&typeof Fe.data=="object"?Fe.data:{})}catch(Fe){console.error(Fe),Fe.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{Ae(),Re(),et()},[Ae,Re,et]);const tt=h.useMemo(()=>{const fe=new Map;o.forEach(Xe=>{Xe?.id&&Xe?.name&&fe.set(String(Xe.id),Xe.name)}),a.forEach(Xe=>{Xe?.account_id&&Xe?.account?.name&&fe.set(String(Xe.account_id),Xe.account.name)});const Fe=Array.from(fe.entries()).sort((Xe,pt)=>Xe[1].localeCompare(pt[1])).map(([Xe,pt])=>({value:Xe,label:pt}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Fe]},[o,a]),Je=h.useMemo(()=>{const fe=z.trim().toLowerCase(),Fe=P.trim();return a.filter(Xe=>{const pt=[Xe?.first_name,Xe?.last_name,Xe?.email,Xe?.title,Xe?.department,Xe?.account?.name,Xe?.account?.status,Xe?.work_phone,Xe?.mobile_phone_1,Xe?.mobile_phone_2,Xe?.assigned_contact?.first_name,Xe?.assigned_contact?.last_name,Xe?.contact_creator?.first_name,Xe?.contact_creator?.last_name,Xe?.notes,Oi(Xe?.created_at),Oi(Xe?.updated_at)],Nt=fe===""||pt.some(Ht=>Ht==null?!1:Ht.toString().toLowerCase().includes(fe)),St=Fe==="Filter by Accounts"||String(Xe.account_id)===Fe;return Nt&&St})},[a,z,P]),H=Math.max(1,Math.ceil(Je.length/oe)||1);h.useEffect(()=>{ne(1)},[z,P]),h.useEffect(()=>{ne(fe=>{const Fe=Math.max(1,Math.ceil(Je.length/oe)||1);return fe>Fe?Fe:fe})},[Je.length,oe]);const be=h.useMemo(()=>{const fe=(q-1)*oe;return Je.slice(fe,fe+oe)},[Je,q,oe]),le=()=>ne(fe=>Math.max(fe-1,1)),Z=()=>ne(fe=>Math.min(fe+1,H)),_e=h.useMemo(()=>{if(!v||!_)return o;const fe=a.find(Xe=>Xe.id===_);return!fe||!fe.account||o.some(Xe=>Xe.id===fe.account.id)?o:[...o,fe.account]},[o,v,_,a]),te=h.useCallback(()=>{x(!1),N(!1),A(null),$(rA),C(!1),ct(!1)},[]),Ue=fe=>{fe.target.id==="modalBackdrop"&&!b&&!E&&te()},Ie=fe=>{const{name:Fe,value:Xe}=fe.target;$(pt=>({...pt,[Fe]:Xe}))},We=()=>{$(rA),N(!1),A(null),x(!0),Se?.role==="Sales"&&$(fe=>({...fe,assigned_to:Se.id}))},gt=async fe=>{if(!fe)return;const Fe=await ae.get(`/accounts/get/${fe.account_id}`);$({first_name:fe.first_name||"",last_name:fe.last_name||"",account_id:Fe.data.id?Fe.data.id:"",title:fe.title||"",department:fe.department||"",email:fe.email||"",work_phone:fe.work_phone||"",mobile_phone_1:fe.mobile_phone_1||"",mobile_phone_2:fe.mobile_phone_2||"",notes:fe.notes||"",assigned_to:fe.assigned_to?String(fe.assigned_to):""}),N(!0),A(fe.id),x(!0),f(null)},ve=fe=>{if(!fe)return;const Fe=gl(fe)||"this contact",Xe=Se?.role==="Admin"||Se?.role==="CEO"||Se?.role==="MANAGER"||Se?.role==="GROUP MANAGER",pt=Xe?"delete":"archive",Nt=Xe?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",St=!Xe;S({title:`${pt.charAt(0).toUpperCase()+pt.slice(1)} Contact`,message:n.jsxs("span",{children:["Are you sure you want to ",pt," ",n.jsx("span",{className:"font-semibold",children:Fe}),"? ",Nt]}),confirmLabel:`${pt.charAt(0).toUpperCase()+pt.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:St?mi:null,isArchive:St,action:{type:"delete",targetId:fe.id,name:Fe}})},Be=()=>{const fe=be.filter(Fe=>Fe.assigned_contact?.id===Se?.id&&Fe.contact_creator?.id===Se?.id);Ge.length===fe.length&&fe.length>0?Ce([]):Ce(fe.map(Fe=>Fe.id))},nt=fe=>{Ce(Fe=>Fe.includes(fe)?Fe.filter(Xe=>Xe!==fe):[...Fe,fe])},Te=async()=>{if(Ge.length===0)return;const fe=Se?.role==="Admin"||Se?.role==="CEO"||Se?.role==="MANAGER"||Se?.role==="GROUP MANAGER",Fe=fe?"delete":"archive",Xe=fe?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",pt=!fe;S({title:`${Fe.charAt(0).toUpperCase()+Fe.slice(1)} Contacts`,message:n.jsxs("span",{children:["Are you sure you want to ",Fe," ",n.jsx("span",{className:"font-semibold",children:Ge.length})," selected contacts? ",Xe]}),confirmLabel:`${Fe.charAt(0).toUpperCase()+Fe.slice(1)} ${Ge.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:pt?mi:null,isArchive:pt,action:{type:"bulk-delete",contactIds:Ge}})},[Qe,ct]=h.useState(!1),ht=fe=>{fe.preventDefault(),ct(!0);const Fe=T.first_name.trim(),Xe=T.last_name.trim();if(!Fe||!Xe){W.error("First name and last name are required.");return}if(!T.account_id){W.error("Account is required.");return}if(!T.assigned_to){W.error("Assigned To is required.");return}const Nt=T.email?.trim();if(!Nt){W.error("Email is required.");return}if(!Nt.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Nt)){W.error("Please enter a valid email address.");return}const Ht={first_name:Fe,last_name:Xe,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},on=v&&_?"update":"create",cn=`${Fe} ${Xe}`.trim();S({title:on==="create"?"Confirm New Contact":"Confirm Update",message:on==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:cn})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:cn}),"?"]}),confirmLabel:on==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:on,payload:Ht,targetId:_||null,name:cn}})},je=async()=>{if(!w?.action){S(null);return}const{action:fe}=w,{type:Fe,payload:Xe,targetId:pt,name:Nt}=fe;k(!0);try{if(Fe==="create"){C(!0),await ae.post("/contacts/admin",Xe),W.success(`Contact "${Nt}" created successfully.`);const St=u?.id||null;te(),await Ae(St)}else if(Fe==="update"){if(!pt)throw new Error("Missing contact identifier for update.");C(!0),await ae.put(`/contacts/admin/${pt}`,Xe),W.success(`Contact "${Nt}" updated successfully.`);const St=u?.id&&u.id===pt?pt:u?.id||null;te(),await Ae(St),u?.id===pt&&f(null)}else if(Fe==="delete"){if(!pt)throw new Error("Missing contact identifier for deletion.");const St=u?.id;Q(pt);const on=Se?.role==="Admin"||Se?.role==="CEO"||Se?.role==="MANAGER"||Se?.role==="GROUP MANAGER"?`Contact "${Nt}" deleted successfully.`:`Contact "${Nt}" archived successfully.`;await ae.delete(`/contacts/admin/${pt}`),W.success(on),await Ae(St&&St!==pt?St:null),St===pt&&f(null)}else if(Fe==="bulk-delete"){const{contactIds:St}=fe;if(!St||St.length===0)throw new Error("No contacts provided for bulk deletion.");const on=Se?.role==="Admin"||Se?.role==="CEO"||Se?.role==="MANAGER"||Se?.role==="GROUP MANAGER"?`Successfully deleted ${St.length} contact(s).`:`Successfully archived ${St.length} contact(s).`;await ae.delete("/contacts/admin/bulk-delete",{data:{contact_ids:St}}),W.success(on),Ce([]),await Ae(),f(null)}}catch(St){console.error(St);const Ht=Fe==="create"?"Failed to create contact. Please review the details and try again.":Fe==="update"?"Failed to update contact. Please review the details and try again.":Fe==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",on=St.response?.data?.detail||Ht;W.error(on)}finally{(Fe==="create"||Fe==="update")&&C(!1),Fe==="delete"&&Q(null),k(!1),S(null)}},Ze=()=>{E||S(null)},ce=fe=>{f(fe),X("Overview")},J=()=>f(null),de=fe=>{fe.target.id==="contactModalBackdrop"&&!E&&J()},D=w?.action?.type==="delete"?w.action.targetId:null,B=u&&(G===u.id||D===u.id),ie=u&&G===u.id,ue=u?n.jsx("div",{id:"contactModalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:fe=>fe.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:J,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:gl(u)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:u.assigned_contact&&u.assigned_contact.id===Se?.id&&u.contact_creator&&u.contact_creator.id===Se?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>gt(u),disabled:E||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>ve(u),disabled:!!B,children:ie?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(mi,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(fe=>n.jsx("button",{onClick:()=>X(fe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===fe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:fe},fe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:gl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Oi(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Oi(u.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Ta,{comments:xe,onAddComment:ee})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[R.tasks&&R.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",R.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.tasks.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.description||"No description"}),fe.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",fe.assigned_to.first_name," ",fe.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(fe.due_date||fe.created_at)})]},`task-${Fe}`))})]}),R.meetings&&R.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",R.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.meetings.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.description||fe.location||"No description"}),fe.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",fe.host.first_name," ",fe.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(fe.start_time||fe.created_at)})]},`meeting-${Fe}`))})]}),R.calls&&R.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",R.calls.length,")"]})]}),pe==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.calls.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(fe.call_time||fe.created_at)})]},`call-${Fe}`))})]}),R.contacts&&R.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",R.contacts.length,")"]})]}),pe==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.contacts.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(sn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[fe.first_name?`${fe.first_name} `:"",fe.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fe.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(fe.created_at)})]},`contact-${Fe}`))})]}),R.deals&&R.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",R.deals.length,")"]})]}),pe==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.deals.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[fe.deal_id?fe.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",fe.name||fe.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:fe.stage||fe.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(fe.close_date||fe.created_at)})]},`deal-${Fe}`))})]}),R.quotes&&R.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",R.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.quotes.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(fe.quote_id?fe.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fe.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Oi(fe.presented_date)||""})]},`quote-${Fe}`))})]}),(!R||(!R.tasks||R.tasks.length===0)&&(!R.meetings||R.meetings.length===0)&&(!R.calls||R.calls.length===0)&&(!R.quotes||R.quotes.length===0)&&(!R.deals||R.deals.length===0)&&(!R.contacts||R.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${gl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const fe=encodeURIComponent(u.email),Fe=encodeURIComponent(""),Xe=encodeURIComponent(""),pt=`mailto:${fe}?subject=${Fe}&body=${Xe}`;window.location.href=pt},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${gl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${gl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,se=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{We(),ct(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:fe=>F(fe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:fe=>M(fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:tt.map(fe=>n.jsx("option",{value:fe.value,children:fe.label},fe.value??fe.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:be.length>0&&be.filter(fe=>fe.assigned_contact?.id===Se?.id&&fe.contact_creator?.id===Se?.id).every(fe=>Ge.includes(fe.id))&&be.some(fe=>fe.assigned_contact?.id===Se?.id&&fe.contact_creator?.id===Se?.id),onChange:Be,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ge.length>0?n.jsx("button",{onClick:Te,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Ge.length} selected contacts`,children:n.jsx(mi,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Je.length>0?be.map(fe=>{const Fe=[{Icon:na,value:fe.email,key:"email"},{Icon:Lt,value:fe.work_phone,key:"work_phone"},{Icon:id,value:fe.mobile_phone_1,key:"mobile_phone_1"},{Icon:id,value:fe.mobile_phone_2,key:"mobile_phone_2"}].filter(Xe=>!!Xe.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:Xe=>Xe.stopPropagation(),children:fe.assigned_contact&&fe.assigned_contact.id===Se?.id&&fe.contact_creator&&fe.contact_creator.id===Se?.id?n.jsx("input",{type:"checkbox",checked:Ge.includes(fe.id),onChange:()=>nt(fe.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Xe=>Xe.stopPropagation()}):null}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:gl(fe)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:fe.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ix,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:fe.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:Fe.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Fe.map(({Icon:Xe,value:pt,key:Nt})=>{const St=yt.createElement(Xe,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[St,n.jsx("span",{children:pt})]},Nt)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:fe.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(sn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:fe.assigned_contact?`${fe.assigned_contact.first_name} ${fe.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:Oi(fe.created_at)||"--"})]})})]},fe.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Je.length,pageSize:oe,currentPage:q,onPrev:le,onNext:Z,onPageSizeChange:fe=>{K(fe),ne(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Pe=p?n.jsx("div",{id:"modalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:fe=>fe.stopPropagation(),children:[n.jsx("button",{onClick:()=>{te(),ct(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||E,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ht,noValidate:!0,children:[n.jsx(Rc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Ie,placeholder:"First name",required:!0,isSubmitted:Qe}),n.jsx(Rc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Ie,placeholder:"Last name",required:!0,isSubmitted:Qe}),n.jsx(F7,{label:"Account",value:T.account_id,onChange:fe=>$(Fe=>({...Fe,account_id:fe})),items:v?_e:o||[],getLabel:fe=>fe?.name??"",placeholder:"Search account...",disabled:b||(v?_e.length===0:o.length===0),required:!0,isSubmitted:Qe}),n.jsx(F7,{label:"Assigned To",value:T.assigned_to,onChange:fe=>$(Fe=>({...Fe,assigned_to:fe})),items:c||[],getLabel:fe=>`${fe?.first_name??""} ${fe?.last_name??""} (${fe?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Qe,disabled:b||c.length===0||Se?.role==="Sales"}),n.jsx(Rc,{label:"Title",name:"title",value:T.title,onChange:Ie,placeholder:"Job title",disabled:b}),n.jsx(Rc,{label:"Department",name:"department",value:T.department,onChange:Ie,placeholder:"Department",disabled:b}),n.jsx(Rc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Ie,placeholder:"example@email.com",required:!0,isSubmitted:Qe}),n.jsx(Rc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Rc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Rc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Bze,{label:"Notes",name:"notes",value:T.notes,onChange:Ie,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{te(),ct(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||E,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,ge=w?n.jsx(Hze,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:je,onCancel:Ze,loading:E,icon:w.icon,isArchive:w.isArchive}):null;return n.jsxs(n.Fragment,{children:[se,ue,Pe,ge]})}function Rc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function F7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Fze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function Fze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Bze({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Hze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const iA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function RZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Ql(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[E,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,A]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const M=await ae.get(`/leads/get/${c}`);u(M.data),v(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),A({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&T()},[c,e]);const $=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){W.error("Lead must be Qualified before it can be converted.");return}const M=await ae.put(`/leads/${d.id}/update/status`,{status:x});W.success("Lead status updated successfully");const G={...d,status:M.data.status};u(G),i&&i(G),a&&a(),t&&t()}catch(M){console.error(M),W.error("Failed to update lead status")}},z=async M=>{const G={...w,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",G),console.log("Contact data: ",E),console.log("Deal data: ",_),console.log("Lead data: ",M);try{const V=(await ae.post("/accounts/convertedLead",G)).data.id,X={...E,account_id:V,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},ne=(await ae.post("/contacts/convertedLead",X)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},K=_.amount&&_.amount!==""?parseFloat(_.amount):0,R={..._,account_id:V,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:ne,probability:oe(),stage:"Prospecting"},ye=await ae.post("/deals/convertedLead",R),pe=await ae.put(`/leads/convert/${M.id}`);i&&i(null),a(),W.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const V=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";W.error(V)}},F=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=M=>M.toString().toLowerCase().replace(/\b\w/g,G=>G.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${F(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>z(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:iA(M.due_date||M.created_at)})]},`task-${G}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:iA(M.start_time||M.created_at)})]},`meeting-${G}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:iA(M.call_time||M.created_at)})]},`call-${G}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),G=encodeURIComponent(""),Q=encodeURIComponent(""),V=`mailto:${M}?subject=${G}&body=${Q}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>v(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:$,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Gze=Vf.all(),oA=Gze.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),Wze=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),qze=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},lA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Vze(){const e=wt(),{leadID:t}=Ql();Us();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[E,k]=h.useState(10),[_,A]=h.useState(lA),[T,$]=h.useState(!1),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState(null),[V,X]=h.useState(!1),[q,ne]=h.useState({});h.useRef(null);const[oe,K]=h.useState(!1),[R,ye]=h.useState(null),[pe,Ne]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Se,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[ke,he]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ge=async()=>{try{const ce=await ae.get("/leads/getUsers");l(ce.data)}catch(ce){console.error(`Error fetching users: ${ce}`)}},Ce=async()=>{x(!0);try{const ce=await ae.get("/leads/admin/getLeads");f(ce.data),console.log(ce.data)}catch(ce){console.error(`Error fetching leads: ${ce}`)}finally{x(!1)}};h.useEffect(()=>{Ge(),Ce()},[]);const{user:xe}=tn(),ee=xe?.role==="Sales";h.useEffect(()=>{r&&!T&&ee&&xe&&!_.lead_owner&&A(ce=>({...ce,lead_owner:xe.id}))},[r,T,ee,xe,_.lead_owner]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const ce=u.find(J=>J.id===Number(t));ce&&s(ce)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(R){const J=(B=>{if(!B)return{code:"+63",number:""};const ie=B.match(/^(\+\d+)\s(.+)$/);if(ie)return{code:ie[1],number:ie[2]};if(B.startsWith("+")){const ue=B.match(/^(\+\d{1,3})/);if(ue)return{code:ue[1],number:B.substring(ue[1].length).trim()}}return{code:"+63",number:B}})(R.work_phone),de=[];R.work_phone&&de.push(`Work: ${R.work_phone}`),R.mobile_phone_1&&de.push(`Mobile 1: ${R.mobile_phone_1}`),R.mobile_phone_2&&de.push(`Mobile 2: ${R.mobile_phone_2}`);const D=de.length>0?de.join(" | "):"";Ne({name:R.company_name||"",website:"",countryCode:J.code,phone_number:J.number,combinedPhoneNumbers:D,billing_address:R.address||"",shipping_address:R.address||"",industry:"",status:"Prospect",territory_id:R.assigned_to?.territory?.id||null,assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),Oe({last_name:R.last_name||"",first_name:R.first_name||"",account_id:null,title:R.title||"",department:R.department||"",email:R.email||"",work_phone:R.work_phone||"",mobile_phone_1:R.mobile_phone_1||"",mobile_phone_2:R.mobile_phone_2||"",notes:R.notes||"",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),he({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null})}},[R]);const Ee=ce=>N(ce.target.value),Ae=h.useMemo(()=>{const ce=v.trim().toLowerCase(),J=b.trim().toUpperCase();return u.filter(de=>{const D=[de?.first_name,de?.last_name,de?.company_name,de?.title,de?.email,de?.work_phone,de?.assigned_to?`${de.assigned_to.first_name} ${de.assigned_to.last_name}`:""],B=ce===""||D.some(ue=>ue==null||ue===""?!1:ue.toString().toLowerCase().includes(ce));let ie=!1;return J==="FILTER BY STATUS"?ie=(de.status?de.status.toUpperCase():"")!=="CONVERTED":ie=(de.status?de.status.toUpperCase():"")===J,B&&ie})},[u,v,b]),Re=Math.max(1,Math.ceil(Ae.length/E)||1);h.useEffect(()=>{S(1)},[v,b]),h.useEffect(()=>{S(ce=>{const J=Math.max(1,Math.ceil(Ae.length/E)||1);return ce>J?J:ce})},[Ae.length,E]);const et=h.useMemo(()=>{const ce=(w-1)*E;return Ae.slice(ce,ce+E)},[Ae,w,E]),De=()=>S(ce=>Math.max(ce-1,1)),tt=()=>S(ce=>Math.min(ce+1,Re)),Je=h.useCallback(async ce=>{try{const J=await ae.get(`/activities/lead/${ce}`);ne(J.data&&typeof J.data=="object"?J.data:{})}catch(J){console.error(J),J.response?.status===404&&(console.warn("No activities found for this account."),ne({}))}},[]),H=ce=>{s(ce),Je(ce.id)},be=()=>{s(null),t&&e("/admin/leads",{replace:!0})},le=()=>{i(!1),A(lA),$(!1),F(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},Z=ce=>{ce.target.id==="modalBackdrop"&&le()},_e=()=>{A(lA),$(!1),F(null),d(null),i(!0)},te=ce=>{if(!ce){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ce),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const J=ue=>{if(!ue)return{code:"+63",number:""};const se=ue.match(/^(\+\d+)\s(.+)$/);return se?{code:se[1],number:se[2]}:{code:"+63",number:ue}},de=J(ce.work_phone),D=J(ce.mobile_phone_1),B=J(ce.mobile_phone_2);let ie="";if(ce.assigned_to){ie=String(ce.assigned_to.id);const ue=o?.find(se=>se.id===ce.assigned_to.id);d(ue)}A({first_name:ce.first_name||"",last_name:ce.last_name||"",company_name:ce.company_name||"",title:ce.title||"",department:ce.department||"",email:ce.email||"",work_ccode:de.code,work_phone:de.number,m1_ccode:D.code,mobile_phone_1:D.number,m2_ccode:B.code,mobile_phone_2:B.number,address:ce.address||"",notes:ce.notes||"",source:ce.source||"",territory_id:ce.territory?.id||null,lead_owner:ie,status:ce.status||"New"}),$(!0),F(ce.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ue=ce=>{if(!ce){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ce);const J=`${ce.first_name} ${ce.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:J}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ce.id,name:J}})},Ie=ce=>{const{name:J,value:de}=ce.target;if(A(D=>({...D,[J]:de})),J==="lead_owner"){const D=o.find(B=>B.id===parseInt(de));d(D)}},[We,gt]=h.useState(!1),ve=ce=>{if(ce.preventDefault(),gt(!0),!_.last_name?.trim()){W.error("Last name is required.");return}if(!_.company_name?.trim()){W.error("Company is required.");return}if(!_.email?.trim()){W.error("Email is required.");return}if(!_.email.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){W.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){W.error("Please assign a lead owner.");return}const de={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},D=T&&z?"update":"create",B=`${_.first_name} ${_.last_name}`;Q({title:D==="create"?"Confirm New Lead":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:D,payload:de,targetId:z||null,name:B}})},Be=async()=>{if(!G?.action){Q(null);return}const{action:ce}=G,{type:J,payload:de,targetId:D,name:B,lead:ie}=ce;console.log(de),X(!0);try{if(J==="create")M(!0),await ae.post("/leads/create",de),W.success(`Lead "${B}" created successfully.`),le(),await Ce();else if(J==="update"){if(!D)throw new Error("Missing lead identifier for update.");M(!0);const ue=await ae.put(`/leads/${D}`,de);W.success(`Lead "${B}" updated successfully.`),a&&a.id===D&&s(null),le(),await Ce()}else if(J==="delete"){if(!D)throw new Error("Missing lead identifier for deletion.");await ae.delete(`/leads/${D}`),W.success(`Lead "${B}" deleted successfully.`),a?.id===D&&s(null),await Ce()}}catch(ue){console.error(ue);const se=J==="create"?"Failed to create lead. Please review the details and try again.":J==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",Pe=ue.response?.data?.detail||se;W.error(Pe)}finally{(J==="create"||J==="update")&&M(!1),J!=="edit"&&(X(!1),Q(null))}},nt=()=>{V||Q(null)},Te=u.filter(ce=>ce.status==="New").length,Qe=u.filter(ce=>ce.status==="Contacted").length,ct=u.filter(ce=>ce.status==="Qualified").length,ht=u.filter(ce=>ce.status==="Converted").length,je=u.filter(ce=>ce.status==="Lost").length,Ze=[{title:"New",value:Te,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Qe,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ct,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:ht,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:je,icon:zs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{_e(),gt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ze.map(ce=>n.jsx(Yze,{...ce},ce.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Ee,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:ce=>C(ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Ae.length>0?et.map(ce=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>H(ce),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ce.first_name," ",ce.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ce.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${qze(ce.status||"New")}`,children:Wze(ce.status||"New")})})]},ce.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ae.length,pageSize:E,currentPage:w,onPrev:De,onNext:tt,onPageSizeChange:ce=>{k(ce),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ce=>ce.stopPropagation(),children:[n.jsx("button",{onClick:()=>{le(),gt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:Ie,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${We&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:Ie,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:Ie,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${We&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:oA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:oA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:oA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:Ie,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${We&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(Kze,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",disabled:P||ee,getLabel:ce=>`${ce.first_name} ${ce.last_name}`,onChange:ce=>{const J=o.find(D=>String(D.id)===String(ce));d(J);let de=null;J&&J.assigned_territory&&J.assigned_territory.length===1&&(de=J.assigned_territory[0].id),A(D=>({...D,lead_owner:ce,territory_id:de}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:Ie,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ce=>n.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:Ie,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:Ie,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{le(),gt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||V,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:ve,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||V,children:P||V?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),G&&n.jsx(Qze,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:Be,onCancel:nt,loading:V}),a&&!r&&!T&&n.jsx(RZ,{relatedActs:q,lead:a,onBack:be,fetchLeads:Ce,setSelectedLead:s,onEdit:te,onDelete:Ue})]})}function Qze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Yze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Kze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const cb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Xa=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),Xze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Xa,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Xa,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Xa,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Xa,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Xa,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),Zze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Xa,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Xa,{label:"Department",name:"department",value:e.department}),n.jsx(Xa,{label:"Title",name:"title",value:e.title}),n.jsx(Xa,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Xa,{label:"Email",name:"email",value:e.email}),n.jsx(Xa,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Xa,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),Jze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Xa,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Xa,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Xa,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"Description",name:"description",value:e.description}),n.jsx(Xa,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function eUe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(Xze,{data:cb});case 2:return n.jsx(Zze,{data:cb});case 3:return n.jsx(Jze,{data:cb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:cb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(ej,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function zZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=wt(),{user:c}=tn();h.useEffect(()=>{console.log("SalesDealsQuickAction mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){W.error("No deal selected");return}if(!s||s===e.stage){W.info("Please select a different stage");return}const f=e.id;o(!0);try{await ae.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{W.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";W.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function UZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=Us(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=tn(),{comments:b,addComment:C,refresh:w}=Ea({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const $=((await ae.get("/deals/admin/fetch-all")).data||[]).find(z=>z.id===parseInt(u));if($){const z={...$,amount:typeof $.amount=="number"?$.amount:parseFloat($.amount||0),probability:$.probability||0};p(z)}else console.warn("Deal not found with ID:",u)}catch(A){console.error("Error fetching deal:",A)}})()},[u,e]),!f&&!u||u&&!f)return null;const E=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${E(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):v(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(z=>z==="PROSPECTING"?0:z==="QUALIFICATION"?1:z==="PROPOSAL"?2:z==="NEGOTIATION"?3:z==="CLOSED_WON"||z==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(z=>T===z?"orange":T>z?"green":"gray").map((z,F)=>n.jsxs(yt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${z==="green"?"bg-green-500 border-green-500":z==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),F<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},F))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,A)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},A))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Ta,{comments:b,onAddComment:C})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,A)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},A))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(zZ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function tUe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Jt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[E,k]=h.useState(10),[_,A]=h.useState(!1),[T,$]=h.useState(null),[z,F]=h.useState(!1),[P,M]=h.useState(!1),[G,Q]=h.useState(null),[V,X]=h.useState([]),[q,ne]=h.useState([]),[oe,K]=h.useState([]),[R,ye]=h.useState({}),[pe,Ne]=h.useState(null);h.useEffect(()=>{const D=t.state,B=D?.dealID;if(B&&!D?.openDealModal){Ne(B),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(pe&&v?.length>0&&!b){const D=v.find(B=>B.id===pe);D?d(D):W.error("Deal not found."),Ne(null)}},[pe,v,b]);const[Se,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ke,he]=h.useState(null),[Ge,Ce]=h.useState(null),xe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ee=D=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[D]||D||"--",Ee=D=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[D]||"bg-gray-100 text-gray-700",Ae=h.useCallback(async D=>{try{const B=await ae.get(`/activities/deal/${D}`);ye(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Re=h.useMemo(()=>{const D=a.trim().toLowerCase(),B=r.trim(),ie=o.trim();return(v??[]).filter(ue=>{const se=[ue?.name,ue?.description,ue?.account?.name,ue?.contact?.first_name,ue?.contact?.last_name,ue?.assigned_deals?.first_name,ue?.assigned_deals?.last_name],Pe=D===""||se.some(Fe=>Fe==null||Fe===""?!1:Fe.toString().toLowerCase().includes(D)),ge=B==="Filter by Stage"||B===""||ue.stage===xe[B]||ue.stage===B,fe=ie==="Filter by Owner"||ie===""||`${ue.assigned_deals?.first_name||""} ${ue.assigned_deals?.last_name||""}`.trim().toLowerCase()===ie.toLowerCase();return Pe&&ge&&fe})},[v,a,r,o]),et=Math.max(1,Math.ceil(Re.length/E)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(D=>{const B=Math.max(1,Math.ceil(Re.length/E)||1);return D>B?B:D})},[Re.length,E]);const De=h.useMemo(()=>{const D=(w-1)*E;return Re.slice(D,D+E)},[Re,w,E]),tt=()=>S(D=>Math.max(D-1,1)),Je=()=>S(D=>Math.min(D+1,et)),H=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),Q(null),x(!0)},be=async()=>{C(!0);try{const D=await ae.get("/deals/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>{const Pe=ue?.created_at?new Date(ue.created_at).getTime():0;return(se?.created_at?new Date(se.created_at).getTime():0)-Pe});N(ie)}catch(D){D.response&&D.response.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch deals. Please try again later."),console.error(D)}finally{C(!1)}},le=async()=>{try{const D=await ae.get("/accounts/admin/fetch-all");X(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},Z=async()=>{try{const D=await ae.get("/contacts/admin/fetch-all");ne(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},_e=async()=>{try{const D=await ae.get("/users/all");K(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&W.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{be(),le(),Z(),_e()},[]);const{user:te}=tn(),Ue=te?.role==="Sales";h.useEffect(()=>{p&&!P&&Ue&&te&&!Se.assigned_to&&Oe(D=>({...D,assigned_to:te.id}))},[p,P,Ue,te,Se.assigned_to]);const Ie=async D=>{D&&(Oe({id:D.id||null,name:D.name||"",account_id:D.account_id?.toString()||"",primary_contact_id:D.primary_contact_id?.toString()||"",stage:D.stage||"PROPOSAL",amount:D.amount?.toString()||"",close_date:D.close_date?new Date(D.close_date).toISOString().split("T")[0]:"",assigned_to:D.assigned_to?.toString()||"",currency:D.currency||"PHP",description:D.description||""}),he(D.account||null),Ce(D.contact||null),M(!0),Q(D.id),d(null),x(!0))},We=async(D=!1)=>{try{const B=await ae.get("/deals/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((se,Pe)=>{const ge=se?.created_at?new Date(se.created_at).getTime():0;return(Pe?.created_at?new Date(Pe.created_at).getTime():0)-ge});if(N(ue),!D&&c&&c.id){const se=ue.find(Pe=>Pe.id===c.id);se&&d({...se})}}catch(B){console.error("Failed to refresh deal data:",B),await be()}},gt=D=>{const B=D.name.trim();if(!B){W.error("Deal name is required.");return}if(!D.account_id){W.error("Account is required.");return}const ie=P&&G?"update":"create",ue=B;$({title:ie==="create"?"Confirm New Deal":"Confirm Update",message:ie==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:ue}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ue}),"?"]}),confirmLabel:ie==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ie,formData:D,targetId:G||null,name:ue}})},ve=D=>{if(!D)return;const B=D.name||"this deal";$({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},Be=async()=>{if(!T?.action){$(null);return}const{action:D}=T,{type:B,formData:ie,targetId:ue,name:se}=D;F(!0);try{if(B==="create"){A(!0);const Pe={name:ie.name.trim(),account_id:parseInt(ie.account_id),primary_contact_id:ie.primary_contact_id?parseInt(ie.primary_contact_id):null,stage:ie.stage,amount:ie.amount?parseFloat(ie.amount):null,currency:ie.currency||"PHP",close_date:ie.close_date||null,description:ie.description||null,assigned_to:ie.assigned_to?parseInt(ie.assigned_to):null};await ae.post("/deals/admin/create",Pe),W.success(`Deal "${se}" created successfully.`),x(!1),await be()}else if(B==="update"){if(!ue)throw new Error("Missing deal identifier for update.");A(!0);const Pe={};ie.name!==void 0&&(Pe.name=ie.name.trim()),ie.account_id!==void 0&&ie.account_id!==""&&(Pe.account_id=parseInt(ie.account_id)),ie.primary_contact_id!==void 0&&(Pe.primary_contact_id=ie.primary_contact_id?parseInt(ie.primary_contact_id):null),ie.stage!==void 0&&(Pe.stage=ie.stage),ie.amount!==void 0&&ie.amount!==""&&(Pe.amount=parseFloat(ie.amount)),ie.currency!==void 0&&(Pe.currency=ie.currency),ie.close_date!==void 0&&(Pe.close_date=ie.close_date||null),ie.description!==void 0&&(Pe.description=ie.description||null),ie.assigned_to!==void 0&&(Pe.assigned_to=ie.assigned_to?parseInt(ie.assigned_to):null),await ae.put(`/deals/admin/${ue}`,Pe),W.success(`Deal "${se}" updated successfully.`),x(!1),await be()}else if(B==="delete"){if(!ue)throw new Error("Missing deal identifier for deletion.");await ae.delete(`/deals/admin/${ue}`),W.success(`Deal "${se}" deleted successfully.`),c?.id===ue&&d(null),await be()}}catch(Pe){console.error(Pe);const ge=B==="create"?"Failed to create deal. Please review the details and try again.":B==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",fe=Pe.response?.data?.detail||ge;W.error(fe)}finally{(B==="create"||B==="update")&&A(!1),F(!1),$(null)}},nt=()=>{z||$(null)},Te=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),he(null),Ce(null),M(!1),Q(null),A(!1)},Qe=(v??[]).filter(D=>D.stage==="PROSPECTING").length,ct=(v??[]).filter(D=>D.stage==="QUALIFICATION").length,ht=(v??[]).filter(D=>D.stage==="PROPOSAL").length,je=(v??[]).filter(D=>D.stage==="NEGOTIATION").length,Ze=(v??[]).filter(D=>D.stage==="CLOSED_WON").length,ce=(v??[]).filter(D=>D.stage==="CLOSED_LOST").length,J=(v??[]).filter(D=>D.stage==="CLOSED_CANCELLED").length,de=[{title:"Prospecting",value:Qe,icon:Hw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:ct,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:ht,icon:en,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:je,icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Ze,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ce,icon:zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:J,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(en,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:H,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:de.map(D=>n.jsx(aUe,{...D},D.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:D=>s(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:D=>i(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(D=>`${D.assigned_deals?.first_name} ${D.assigned_deals?.last_name}`))].map((D,B)=>n.jsx("option",{value:D,children:D},B))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Re.length>0?De.map(D=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...D}),Ae(D.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:D.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:D.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.contact?.first_name&&D.contact?.last_name?`${D.contact.first_name} ${D.contact.last_name}`:D.contact?.first_name||D.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ee(D.stage)}`,children:ee(D.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",D.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.assigned_deals?.first_name&&D.assigned_deals?.last_name?`${D.assigned_deals.first_name} ${D.assigned_deals.last_name}`:D.assigned_deals?.first_name||D.assigned_deals?.last_name||"--"})]},D.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:E,currentPage:w,onPrev:tt,onNext:Je,onPageSizeChange:D=>{k(D),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(sUe,{onClose:Te,formData:Se,setFormData:Oe,isEditing:P,onSubmit:gt,isSubmitting:_||z,accounts:V,contacts:q,users:oe,currentAccount:ke,currentContact:Ge}),c&&n.jsx(UZ,{relatedActs:R,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:Ie,onDelete:ve,onStatusUpdate:We}),T&&n.jsx(nUe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:Be,onCancel:nt,loading:z})]})}function nUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function aUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function sUe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const{user:f}=tn(),p=f?.role==="Sales";h.useEffect(()=>{!s&&p&&f&&!t.assigned_to&&a(w=>({...w,assigned_to:f.id}))},[s,p,f,t.assigned_to,a]);const[x,v]=h.useState(!1),N=w=>{if(w.preventDefault(),v(!0),!t.name?.trim()){W.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){W.error("Amount must be a number greater than 0.");return}if(!t.account_id){W.error("Please select an account.");return}if(!t.primary_contact_id){W.error("Please select a primary contact.");return}r?.(t)},b=w=>{w.target.id==="modalBackdrop"&&e()},C=h.useMemo(()=>{const w=String(t.account_id||"").trim(),S=Array.isArray(l)?l:[];return w?S.filter(E=>{const _=[E?.account_id,E?.accountId,E?.account?.id,E?.account?.account_id,E?.account?.accountId].find(A=>A!=null&&String(A).trim()!=="");return _?String(_)===w:!1}):S},[l,t.account_id]);return h.useEffect(()=>{const w=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!w)return;C.some(k=>String(k?.id)===S)||a(k=>({...k,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,C,a]),n.jsx("div",{id:"modalBackdrop",onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:w=>w.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:N,noValidate:!0,children:[n.jsx(cA,{label:"Deal Name",name:"name",value:t.name,onChange:w=>a({...t,name:w.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),n.jsx(dA,{label:"Account",value:t.account_id||"",onChange:w=>a({...t,account_id:w}),items:o||[],getLabel:w=>w?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:x}),n.jsx(dA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:w=>a({...t,primary_contact_id:w}),items:C||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:x}),n.jsx(B7,{label:"Stage",name:"stage",value:t.stage,onChange:w=>a({...t,stage:w.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(cA,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:w=>a({...t,amount:w.target.value}),placeholder:"0",required:!0,isSubmitted:x}),n.jsx(B7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:w=>a({...t,currency:w.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(cA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:w=>a({...t,close_date:w.target.value}),disabled:i}),n.jsx(dA,{label:"Assign To",value:t.assigned_to||"",onChange:w=>a({...t,assigned_to:w}),items:c||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||p,className:"md:col-span-2"}),n.jsx(iUe,{label:"Description",name:"description",value:t.description,onChange:w=>a({...t,description:w.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function cA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function B7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function dA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(rUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function rUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c={hasError:c}}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function iUe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const uA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],mA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ii=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},fA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",oUe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},lUe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},db=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",wg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",cUe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},hA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},H7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},G7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},bw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},dUe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=bw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=bw(t);return a||null},uUe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},mUe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function fUe(){const e=wt(),t=Jt(),{user:a}=tn(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[E,k]=h.useState(!1),[_,A]=h.useState(!1),[T,$]=h.useState(!1),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState(!1),[V,X]=h.useState(null),[q,ne]=h.useState(mA),[oe,K]=h.useState(""),[R,ye]=h.useState("Filter by Status"),[pe,Ne]=h.useState(null),Se=h.useCallback(async()=>{if(w)try{Q(!0);const I=(await ae.get("/company/invoice-info"))?.data;Fj({quote:w,companyInfo:I,currencySymbol:s,title:"Invoice"})}catch(U){const I=U?.response?.data?.detail||U?.message||"Failed to print invoice.";W.error(I)}finally{Q(!1)}},[w,s]),[Oe,ke]=h.useState(1),[he,Ge]=h.useState(10),[Ce,xe]=h.useState("Overview"),[ee,Ee]=h.useState("Draft"),[Ae,Re]=h.useState([]),[et,De]=h.useState(null),{comments:tt,addComment:Je,refresh:H}=Ea({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&H()},[w?.id,H]),h.useEffect(()=>{const I=t.state?.quoteID;if(I){De(I),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(et&&r.length>0&&!o){const U=r.find(I=>I.id===et);U?S(U):W.error("Quote not found."),De(null)}},[et,p,o]),h.useEffect(()=>{let U=!0;return(async()=>{const me=dUe();if(me&&U){C(me);return}try{const Le=await ae.get("/auth/me"),$e=bw(Le?.data);if($e&&U){C($e);return}}catch{}try{const Le=await ae.get("/users/me"),$e=bw(Le?.data);if($e&&U){C($e);return}}catch{}U&&C(null)})(),()=>{U=!1}},[]);const be=h.useCallback(U=>U&&u.find(me=>String(me.id)===String(U))?.name||"",[u]),le=h.useCallback(U=>{if(!U)return"";const I=p.find(me=>String(me.id)===String(U));return I?`${I.first_name} ${I.last_name}`.trim():""},[p]),Z=h.useCallback(U=>{if(!U)return"--";const I=c.find(me=>String(me.id)===String(U));return I?.deal_name||I?.name||`Deal #${H7(U)}`},[c]),_e=h.useCallback(U=>{const I=c.find($e=>String($e.id)===String(U)),me=uUe(I);let Le=mUe(I);if(!Le&&me){const $e=p.filter(Ve=>String(Ve.account_id||"")===String(me));if($e.length>0){const Ve=[...$e].sort((Ye,At)=>{const Ct=`${Ye.first_name||""} ${Ye.last_name||""}`.trim().toLowerCase(),Kt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Kt)});Le=String(Ve[0].id)}}if(me&&Le){const $e=p.find(Ve=>String(Ve.id)===String(Le));$e?.account_id&&String($e.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),te=h.useCallback(U=>{if(!U)return"--";if(U.deal?.deal_name)return U.deal.deal_name;if(U.deal?.name)return U.deal.name;const I=U.deal_id||U.deal?.id;return I?Z(I):"--"},[Z]),Ue=h.useCallback(U=>{if(!U)return"--";if(U.account?.name)return U.account.name;let I=U.account_id||U.account?.id;if(!I){const me=U.deal_id||U.deal?.id;me&&(I=_e(me).accountId)}return I?be(I)||`Account #${I}`:"--"},[_e,be]),Ie=h.useCallback(U=>{if(!U)return"--";if(U.contact?.first_name||U.contact?.last_name)return`${U.contact?.first_name||""} ${U.contact?.last_name||""}`.trim()||"--";let I=U.contact_id||U.contact?.id;if(!I){const Le=U.deal_id||U.deal?.id;Le&&(I=_e(Le).contactId)}return(I?le(I):"")||(I?`Contact #${I}`:"--")},[_e,le]),We=h.useCallback(async(U=null)=>{l(!0);try{const I=await ae.get("/quotes/admin/fetch-all"),Le=[...Array.isArray(I.data)?I.data:[]].sort(($e,Ve)=>{const Ye=$e?.created_at||$e?.updated_at||0,At=Ve?.created_at||Ve?.updated_at||0;return new Date(At)-new Date(Ye)});if(i(Le),U){const $e=Le.find(Ve=>Ve.id===U);S($e||null)}}catch(I){console.error(I),i([]),I.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),gt=h.useCallback(async()=>{try{const U=await ae.get("/deals/admin/fetch-all");d(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load deals (permission denied).")}},[]),ve=h.useCallback(async()=>{try{const U=await ae.get("/accounts/admin/fetch-all");f(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const U=await ae.get("/contacts/admin/fetch-all");x(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},[]),nt=h.useCallback(async()=>{try{const U=await ae.get("/users/all");N(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{We(),gt(),ve(),Be(),nt()},[We,gt,ve,Be,nt]);const Te=h.useMemo(()=>{const U=oe.trim().toLowerCase(),I=R.trim();return r.filter(me=>{const Le=te(me),$e=Ue(me),Ve=Ie(me),Ye=hA(me.presented_date,me.validity_days),At=[me.quote_id,Le,$e,Ve,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?wg(me.presented_date):"",Ye?wg(Ye):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,db(me.created_at),db(me.updated_at)],Ct=U===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(U)),Kt=I==="Filter by Status"||Ii(me.status)===I;return Ct&&Kt})},[r,oe,R,te,Ue,Ie]),Qe=Math.max(1,Math.ceil(Te.length/he)||1);h.useEffect(()=>ke(1),[oe,R]),h.useEffect(()=>{ke(U=>{const I=Math.max(1,Math.ceil(Te.length/he)||1);return U>I?I:U})},[Te.length,he]);const ct=h.useMemo(()=>{const U=(Oe-1)*he;return Te.slice(U,U+he)},[Te,Oe,he]),ht=()=>ke(U=>Math.max(U-1,1)),je=()=>ke(U=>Math.min(U+1,Qe)),Ze=U=>{S(U),xe("Overview"),Ee(Ii(U?.status)||"Draft")},ce=()=>{S(null),xe("Overview")},J=U=>{U.target.id==="quoteModalBackdrop"&&!P&&ce()},de=h.useCallback(()=>{k(!1),A(!1),X(null),ne(mA),$(!1)},[]),D=U=>{U.target.id==="modalBackdrop"&&!T&&!P&&de()},B=U=>{const{name:I,value:me}=U.target;if(I==="deal_id"){const{accountId:Le,contactId:$e}=_e(me);ne(Ve=>({...Ve,deal_id:me,account_id:Le,contact_id:$e}));return}ne(Le=>({...Le,[I]:me}))},ie=()=>{const U={...mA};a?.role?.toUpperCase()==="SALES"&&b&&(U.assigned_to=String(b)),ne(U),A(!1),X(null),k(!0)},ue=U=>{if(!U)return;S(null);const I=U.deal?.id?String(U.deal.id):U.deal_id?String(U.deal_id):"",me=I?_e(I):{accountId:"",contactId:""},Le=U.account?.id?String(U.account.id):U.account_id?String(U.account_id):me.accountId,$e=U.contact?.id?String(U.contact.id):U.contact_id?String(U.contact_id):me.contactId,Ve=U.assigned_user?.id?String(U.assigned_user.id):U.assigned_to?String(U.assigned_to):"";ne({deal_id:I,account_id:Le||"",contact_id:$e||"",total_amount:U.total_amount?.toString()||"",presented_date:cUe(U.presented_date),validity_days:U.validity_days!==null&&U.validity_days!==void 0?String(U.validity_days):"",status:Ii(U.status)||"Draft",assigned_to:Ve,notes:U.notes||"",subtotal:parseFloat(U.subtotal)||0,tax_rate:parseFloat(U.tax_rate)||0,tax_amount:parseFloat(U.tax_amount)||0,discount_type:U.discount_type||"",discount_value:parseFloat(U.discount_value)||0,discount_amount:parseFloat(U.discount_amount)||0,currency:U.currency||"PHP",items:Array.isArray(U.items)?U.items.map(Ye=>({id:Ye.id,item_type:Ye.item_type||"Product",name:Ye.name||"",description:Ye.description||"",sku:Ye.sku||"",variant:Ye.variant||"",unit:Ye.unit||"pcs",quantity:parseFloat(Ye.quantity)||1,unit_price:parseFloat(Ye.unit_price)||0,discount_percent:parseFloat(Ye.discount_percent)||0,discount_amount:parseFloat(Ye.discount_amount)||0,line_total:parseFloat(Ye.line_total)||0,sort_order:Ye.sort_order||0})):[]}),A(!0),X(U.id),k(!0)},se=U=>{if(U.target.checked){const I=ct.map(me=>me.id);Re(I)}else Re([])},Pe=U=>{Re(I=>I.includes(U)?I.filter(me=>me!==U):[...I,U])},ge=U=>{if(!U)return;const I=U.quote_id||"this quote";F({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:I}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id,name:I}})},fe=async()=>{Ae.length!==0&&F({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ae.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ae.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ae}})},[Fe,Xe]=h.useState(!1),pt=U=>{if(U.preventDefault(),Xe(!0),!b){W.error("Unable to determine current user. Please log in again.");return}if(!q.deal_id){W.error("Deal is required.");return}if(!q.assigned_to&&a?.role?.toUpperCase()!=="SALES"){W.error("Assigned To is required.");return}const me=_e(q.deal_id),Le=q.items.map((Ct,Kt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Kt})),$e={deal_id:Number(q.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(q.subtotal)||0,tax_rate:parseFloat(q.tax_rate)||0,tax_amount:parseFloat(q.tax_amount)||0,discount_type:q.discount_type||null,discount_value:parseFloat(q.discount_value)||0,discount_amount:parseFloat(q.discount_amount)||0,total_amount:parseFloat(q.total_amount)||0,currency:q.currency||"PHP",presented_date:q.presented_date||null,validity_days:q.validity_days===""?null:Number(q.validity_days),status:q.status||"Draft",assigned_to:q.assigned_to?Number(q.assigned_to):null,notes:q.notes?.trim()||null,items:Le},Ve=_&&V?"update":"create",Ye=Z(q.deal_id),At=Ve==="create"?{...$e,created_by_id:Number(b)}:$e;F({title:Ve==="create"?"Confirm New Quote":"Confirm Update",message:Ve==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}),confirmLabel:Ve==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:At,targetId:V||null,name:Ye}})},Nt=async()=>{if(!z?.action){F(null);return}const{action:U}=z,{type:I,payload:me,targetId:Le,name:$e}=U;M(!0);try{if(I==="create")$(!0),await ae.post("/quotes/admin",me),W.success("Quote created successfully."),de(),await We();else if(I==="update"){if(!Le)throw new Error("Missing quote identifier for update.");$(!0),await ae.put(`/quotes/admin/${Le}`,me),W.success("Quote updated successfully."),de(),await We(),w?.id===Le&&S(null)}else if(I==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Ve=w?.id;Ne(Le),await ae.delete(`/quotes/admin/${Le}`),W.success(`Quote "${$e}" deleted successfully.`),await We(Ve&&Ve!==Le?Ve:null),Ve===Le&&S(null)}else I==="bulk-delete"&&(await ae.post("/quotes/admin/bulk-delete",{quote_ids:Ae}),W.success(`Successfully deleted ${Ae.length} quotes`),Re([]),await We())}catch(Ve){console.error(Ve);const Ye=I==="create"?"Failed to create quote. Please review the details and try again.":I==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";W.error(Ye),(I==="create"||I==="update")&&$(!1),I==="delete"&&Ne(null)}finally{(I==="create"||I==="update")&&$(!1),I==="delete"&&Ne(null),M(!1),F(null)}},St=()=>{P||F(null)},Ht=h.useCallback((U,I)=>{const me=U?.deal_id??U?.deal?.id??"",Le=me?Number(me):null,$e=Le?_e(String(Le)):{accountId:"",contactId:""},Ve=U?.account_id??U?.account?.id??$e.accountId??null,Ye=U?.contact_id??U?.contact?.id??$e.contactId??null,At=U?.total_amount??0,Ct=U?.assigned_to??U?.assigned_user?.id??null;return{deal_id:Le,account_id:Ve!=null&&String(Ve).trim()!==""?Number(Ve):null,contact_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,total_amount:Number(At),presented_date:U?.presented_date||null,validity_days:U?.validity_days===""||U?.validity_days===void 0||U?.validity_days===null?null:Number(U.validity_days),status:I,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:U?.notes?.trim()||null}},[_e]),on=h.useCallback(async()=>{if(!w?.id)return;const U=Ii(ee),I=[U,U.toLowerCase()],me=async Le=>ae.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const $e of I)try{await me($e),Le=!0;break}catch(Ve){if(Ve?.response?.status===422)continue;throw Ve}if(!Le){const $e=Ht(w,U);if(!$e.deal_id){W.error("Cannot update status: missing deal_id on selected quote.");return}if(!$e.total_amount||$e.total_amount<=0){W.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ae.put(`/quotes/admin/${w.id}`,$e)}W.success(`Quote status updated to ${U}`),S(null),xe("Overview"),await We()}catch(Le){console.error(Le);const $e=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";W.error($e)}},[w,ee,We,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...uA.map(U=>({label:U.label,value:U.value}))],re=z?.action?.type==="delete"?z.action.targetId:null,ot=w&&(pe===w.id||re===w.id),Rt=w&&pe===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:J,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:U=>U.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:te(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${lUe(w.status)}`,children:fA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Se,disabled:G||T||P,children:[n.jsx(hn,{className:"mr-2"}),G?"Preparing...":"Print Invoice"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||z?.action?.type==="update"&&z.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ge(w),disabled:!!ot,children:Rt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(U=>n.jsx("button",{onClick:()=>xe(U),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===U?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:U},U))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:G7(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:te(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:Ie(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:wg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:wg(hA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:fA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:db(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:db(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(hd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Ta,{comments:tt,onAddComment:Je})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ee||Ii(w.status)||"Draft",onChange:U=>Ee(U.target.value),children:uA.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))}),n.jsx("button",{onClick:on,disabled:Ii(ee)===Ii(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ii(ee)===Ii(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Yt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ie(),Xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:oe,onChange:U=>K(U.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:R,onChange:U=>ye(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ct.length>0&&Ae.length===ct.length,onChange:se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ae.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ae.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Te.length>0?ct.map(U=>{const I=hA(U.presented_date,U.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ze(U),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ae.includes(U.id),onChange:()=>Pe(U.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:G7(U.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:te(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ue(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ie(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:U.total_amount?`${s}${Number(U.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${oUe(U.status)}`,children:fA(U.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:U.assigned_user?`${U.assigned_user.first_name} ${U.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:wg(I)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},U.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Te.length,pageSize:he,currentPage:Oe,onPrev:ht,onNext:je,onPageSizeChange:U=>{Ge(U),ke(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=E?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:U=>U.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(V7,{label:"Deal",name:"deal_id",value:q.deal_id,onChange:U=>{const{accountId:I,contactId:me}=_e(U);ne(Le=>({...Le,deal_id:U,account_id:I,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:U=>`${H7(U?.deal_id??"")} ${U?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Fe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(q7,{label:"Account",value:be(q.account_id)||(q.account_id?`Account #${q.account_id}`:""),disabled:!0}),n.jsx(q7,{label:"Contact",value:le(q.contact_id)||(q.contact_id?`Contact #${q.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(hd,{items:q.items,onChange:U=>ne(I=>({...I,items:U})),currencySymbol:s,readOnly:T,taxRate:q.tax_rate,discountType:q.discount_type,discountValue:q.discount_value,onTotalsChange:U=>{ne(I=>({...I,subtotal:U.subtotal,discount_amount:U.discount_amount,tax_amount:U.tax_amount,total_amount:U.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:q.discount_type||"",onChange:U=>ne(I=>({...I,discount_type:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",q.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:q.discount_value||"",onChange:U=>ne(I=>({...I,discount_value:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:q.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!q.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:q.tax_rate||"",onChange:U=>ne(I=>({...I,tax_rate:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(q.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(W7,{label:"Presented Date",name:"presented_date",type:"date",value:q.presented_date,onChange:B,disabled:T}),n.jsx(W7,{label:"Validity Days",name:"validity_days",type:"number",value:q.validity_days,onChange:B,placeholder:"30",disabled:T}),a?.role?.toUpperCase()==="SALES"?n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assigned To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white text-black font-medium",children:(()=>{const U=v.find(I=>String(I.id)===q.assigned_to);return U?`${U.first_name} ${U.last_name}`:"Assigning..."})()})]}):n.jsx(V7,{label:"Assigned To",value:q.assigned_to||"",onChange:U=>ne(I=>({...I,assigned_to:U})),items:Array.isArray(v)?v:[],getLabel:U=>{const I=`${U?.first_name??""} ${U?.last_name??""}`.trim();return I?U?.role?`${I} (${U.role})`:I:U?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Fe,disabled:T}),n.jsx(hUe,{label:"Status",name:"status",value:q.status,onChange:B,options:uA,required:!0,disabled:T}),n.jsx(pUe,{label:"Notes",name:"notes",value:q.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=z?n.jsx(xUe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Yt,Me,vt]})}function W7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function q7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function hUe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function V7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(gUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function gUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function pUe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function xUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function yUe(){const{userRole:e}=Ys();return n.jsx(Uj,{currentUserRole:e,currentUserId:null})}function bUe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ae.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,$=[_,T,k.action,k.entity_type,A,k.description],z=w===""||$.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),F=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&F}).sort((k,_)=>{const A=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-A})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){zx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),E=[w.join(","),...S.map(T=>T.map($=>`"${String($).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),A=document.createElement("a");A.href=_,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(_)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Rx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ts,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Yl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const Q7=["Not started","In progress","Deferred","Completed"],Y7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},FZ=e=>e&&(Y7[e]||Y7[String(e).toUpperCase()])||"Not started",vUe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},K7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},wUe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),FZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},NUe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=G=>{if(!G)return"";const Q=String(G).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(G)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",E="",k="",_="Lead",A="",T="",$="";const z=c(),F=v(),P=l(),M=x();if(z){w="Account",_="Account",A=F,S=String(z);const G=d(),Q=u(),V=N(),X=b(),q=f(),ne=C();G?(E="Contact",T="Contact",$=V,k=String(G)):Q?(T="Deal",E="Deal",$=X,k=String(Q)):q&&(T="Quote",E="Quote",$=ne,k=String(q))}else P?(_="Lead",A=M,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:FZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:A,relatedType2Text:T,relatedTo2Text:$,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:E,relatedTo2:k}};function jUe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=tn(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[_,A]=h.useState(1),[T,$]=h.useState(10),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState([]),V=wt(),X=Jt(),[q,ne]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,K]=h.useState(null);h.useEffect(()=>{const H=X.state?.openTaskModal,be=X.state?.initialTaskData,le=X.state?.taskID;H?(i(!0),be&&ne(Z=>({...Z,...be})),V(X.pathname,{replace:!0,state:{}})):le&&(K(le),V(X.pathname,{replace:!0,state:{}}))},[X,V]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const H=u.find(be=>be.id===oe);H?Ne(H,!0):W.error("Task not found."),K(null)}},[oe,u,p]);const R=async()=>{try{const H=await ae.get("/users/all");k(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),W.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const H=await ae.get("/tasks/all"),le=(Array.isArray(H.data)?H.data:[]).map(NUe);le.sort((Z,_e)=>{const te=Z.createdAt?new Date(Z.createdAt):0;return(_e.createdAt?new Date(_e.createdAt):0)-te}),f(le),a==="list"&&A(1)}catch(H){console.error("Failed to load tasks:",H),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){R(),ye();const H=iN(e.id),be=new WebSocket(H);return be.onopen=()=>{console.log(" Connected to task notifications")},be.onmessage=le=>{try{const Z=JSON.parse(le.data);Z.type==="task_status_updated"&&(W.info(` ${Z.message}`,{position:"top-right",autoClose:4e3}),ye())}catch(Z){console.error("Error parsing notification:",Z)}},be.onerror=le=>{console.error(" WebSocket error:",le)},be.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{be.readyState===WebSocket.OPEN&&be.close()}}},[t,e]);const pe=()=>{l(null),ne({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:e?.role==="Sales"?String(e.id):"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ne=(H=null,be=!1)=>{l(H),d(be),H?ne({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:vUe(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):pe(),i(!0)},Se=()=>{i(!1),l(null),d(!1),pe()},Oe=async H=>{const be=wUe(H);try{o&&!c?(await ae.put(`/tasks/${o.id}`,be),W.success("Task updated successfully.")):(await ae.post("/tasks/create",be),W.success("Task created successfully.")),i(!1),await ye()}catch(le){console.error("Failed to save task:",le);const Z=le.response?.data?.detail||"Failed to save task.";W.error(Z)}},ke=H=>{H&&F({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},he=()=>{if(Ae.every(H=>G.includes(H.id)))Q(G.filter(H=>!Ae.map(be=>be.id).includes(H)));else{const H=Ae.map(be=>be.id);Q([...new Set([...G,...H])])}},Ge=H=>{Q(be=>be.includes(H)?be.filter(le=>le!==H):[...be,H])},Ce=async()=>{G.length!==0&&F({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:G}})},xe=async()=>{if(!z?.action){F(null);return}const{action:H}=z;M(!0);try{H.type==="delete"?(await ae.delete(`/tasks/${H.targetId}`),W.success("Task deleted successfully."),await ye()):H.type==="bulk-delete"&&(await ae.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),W.success(`Successfully deleted ${H.task_ids.length} tasks`),Q([]),await ye())}catch(be){console.error("Task action failed:",be),W.error("Failed to delete task.")}finally{M(!1),F(null)}},ee=()=>{P||F(null)},Ee=h.useMemo(()=>{const H=v.trim().toLowerCase();return[...u].sort((le,Z)=>{const _e=le.createdAt?new Date(le.createdAt):0;return(Z.createdAt?new Date(Z.createdAt):0)-_e}).filter(le=>{const Z=H===""||le.title?.toLowerCase().includes(H)||le.description?.toLowerCase().includes(H)||le.assignedToName?.toLowerCase().includes(H)||le.createdBy?.toLowerCase().includes(H),_e=b==="Filter by Status"||le.status===b,te=w==="Filter by Priority"||le.priority===w;return Z&&_e&&te})},[u,v,b,w]);h.useEffect(()=>{A(1)},[v,b,w,a,T]),h.useEffect(()=>{if(a==="list"){const H=Ee.length===0?1:Math.ceil(Ee.length/T);_>H&&A(H)}},[Ee.length,_,a,T]);const Ae=h.useMemo(()=>{if(a==="board")return Ee;const H=(_-1)*T;return Ee.slice(H,H+T)},[Ee,_,a,T]),Re=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:qs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:qi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<H&&be.status!=="Completed").length,icon:Wf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),et=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",De=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},tt=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Je=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(qi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Re.map(H=>n.jsx(CUe,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:H=>C(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),Q7.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ee.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:Q7.map(H=>{const be=Ae.filter(le=>le.status===H);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:H}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:be.length})]}),n.jsx("div",{className:`space-y-3 ${be.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:be.length>0?be.map(le=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(le)}`,onClick:()=>Ne(le,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:le.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",le.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",le.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:et(le)?"text-red-600":"text-gray-600",children:le.dateAssigned?K7(le.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),Ne(le)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ga,{})}),n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ke(le)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},le.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},H)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ae.length>0&&Ae.every(H=>G.includes(H.id)),onChange:he})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:G.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected tasks`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ae.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.includes(H.id),onChange:()=>Ge(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ne(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${tt(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Je(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ne(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${et(H)?"text-red-600 font-medium":""}`,onClick:()=>Ne(H,!0),children:H.dateAssigned?K7(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ee.length,pageSize:T,currentPage:Ee.length===0?0:_,onPrev:()=>A(H=>Math.max(H-1,1)),onNext:()=>A(H=>Math.min(H+1,Math.max(1,Math.ceil(Ee.length/T)||1))),onPageSizeChange:H=>{$(H),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Se,onSave:Oe,onEdit:()=>d(!1),setFormData:ne,formData:q,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:ke}),z&&n.jsx(SUe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:xe,onCancel:ee,loading:P})]})}function CUe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function SUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const BZ=e=>e?e.toUpperCase():"",ub=e=>{const t=BZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},_Ue=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},AUe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},TUe=e=>{const t=BZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},gA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},EUe=()=>{const e=wt(),t=Jt(),{user:a}=tn(),s=a?.role==="Sales",[r]=Us(),i=r.get("id"),o=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[l,c]=h.useState([]),[d,u]=h.useState(!1),[f,p]=h.useState([]),[x,v]=h.useState(""),[N,b]=h.useState("Filter by Status"),[C,w]=h.useState(!1),[S,E]=h.useState(null),[k,_]=h.useState(1),[A,T]=h.useState(10),[$,z]=h.useState(gA),[F,P]=h.useState(!1),[M,G]=h.useState(null),[Q,V]=h.useState(!1),[X,q]=h.useState(null),[ne,oe]=h.useState(!1),[K,R]=h.useState(null),[ye,pe]=h.useState([]),[Ne,Se]=h.useState(null);h.useEffect(()=>{C&&!F&&s&&a&&!$.assignedTo&&z(le=>({...le,assignedTo:a.id}))},[C,F,a,s]),h.useEffect(()=>{const le=t.state?.openMeetingModal,Z=t.state?.initialMeetingData?.relatedTo||r.get("id"),_e=t.state?.meetingID;le||Z?(w(!0),t.state?.initialMeetingData&&z(te=>({...te,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):_e&&(R(_e),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),h.useEffect(()=>{if(K&&l.length>0&&!d){const le=l.find(Z=>Z.id===K);le?E(le):W.error("Meeting not found."),R(null)}},[K,l,d]);const Oe=async()=>{if(i&&o){const le=sessionStorage.getItem("meetingDetailData");if(le)try{const Z=JSON.parse(le);if(Z.id===parseInt(i)){E(Z),sessionStorage.removeItem("meetingDetailData");return}}catch(Z){console.error(Z)}}u(!0);try{const le=await ae.get("/meetings/admin/fetch-all"),_e=[...Array.isArray(le.data)?le.data:[]].sort((te,Ue)=>{const Ie=te?.created_at?new Date(te.created_at).getTime():0;return(Ue?.created_at?new Date(Ue.created_at).getTime():0)-Ie});if(c(_e),i&&!S){const te=_e.find(Ue=>Ue.id===parseInt(i));te&&E(te)}}catch{W.error("Failed to load meetings.")}finally{u(!1)}},ke=async()=>{try{const le=await ae.get("/users/all");p(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le)}};h.useEffect(()=>{async function le(){try{const Z=await ae.get("/auth/me");Se(Z.data)}catch(Z){console.error("Failed to fetch current user",Z)}}le()},[]),h.useEffect(()=>{Oe(),ke()},[]);const he=le=>v(le.target.value),Ge=h.useMemo(()=>{const le=x.trim().toLowerCase(),Z=N.trim().toUpperCase();return l.filter(_e=>{const te=[_e?.activity,_e?.description,_e?.relatedTo,_e?.assignedTo],Ue=le===""||te.some(We=>We&&We.toString().toLowerCase().includes(le)),Ie=Z==="FILTER BY STATUS"||ub(_e.status||"PENDING")===Z;return Ue&&Ie})},[l,x,N]),Ce=h.useMemo(()=>{const le=(k-1)*A;return Ge.slice(le,le+A)},[Ge,k,A]),xe=()=>{w(!1),z(gA),P(!1),G(null),V(!1)},ee=()=>{z(gA),P(!1),G(null),w(!0)},Ee=le=>{let Z="";if(le.meet_assign_to?.id)Z=String(le.meet_assign_to.id);else if(le.assignedTo){const nt=f.find(Te=>`${Te.first_name} ${Te.last_name}`===le.assignedTo);Z=nt?String(nt.id):""}const _e=nt=>{if(!nt)return"";try{const Te=new Date(nt),Qe=Te.getTimezoneOffset()*6e4;return new Date(Te.getTime()-Qe).toISOString().slice(0,16)}catch{return""}};let te="Lead",Ue="",Ie="Contact",We="";if(le.lead)te="Lead",Ue=String(le.lead.id);else if(le.account)te="Account",Ue=String(le.account.id),le.contact?(Ie="Contact",We=String(le.contact.id)):le.deal?(Ie="Deal",We=String(le.deal.id)):le.quote&&(Ie="Quote",We=String(le.quote.id));else if(le.relatedType||le.related_type){const nt=le.relatedType||le.related_type,Te=le.related_to||le.relatedToId;nt==="Lead"?(te="Lead",Ue=String(Te)):(te="Account",Ue=le.account_id?String(le.account_id):"")}const gt={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},ve=ub(le.status),Be=gt[ve]||"Planned";z({subject:le.subject||le.activity||"",location:le.location||"",startTime:_e(le.start_time||le.startTime),endTime:_e(le.end_time||le.endTime),status:Be,notes:le.description||le.notes||"",assignedTo:Z,relatedType1:te,relatedTo1:Ue,relatedType2:Ie,relatedTo2:We}),P(!0),G(le.id),E(null),w(!0)},Ae=le=>{if(!le.subject?.trim())return W.error("Subject is required.");if(!le.startTime)return W.error("Start time is required.");if(le.endTime&&!(new Date(le.endTime)-new Date(le.startTime)>0))return W.error("End time must be after start time.");le.relatedType1,le.relatedTo1,le.relatedType1==="Account"&&le.relatedType2&&le.relatedTo2&&(le.relatedType2,le.relatedTo2);const Z={...le,assignedTo:parseInt(le.assignedTo),relatedTo1:parseInt(le.relatedTo1),relatedTo2:parseInt(le.relatedTo2)},_e=F&&M?"update":"create";q({title:_e==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${_e} "${Z.subject}"?`,confirmLabel:_e==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:_e,payload:Z,targetId:M,name:Z.subject}})},Re=async()=>{if(!X?.action)return;const{type:le,payload:Z,targetId:_e,name:te}=X.action;oe(!0);try{le==="create"?(V(!0),await ae.post("/meetings/create",Z),W.success(`Meeting "${te}" created.`),xe(),await Oe()):le==="update"?(V(!0),await ae.put(`/meetings/${_e}`,Z),W.success(`Meeting "${te}" updated.`),xe(),await Oe()):le==="delete"?(await ae.delete(`/meetings/${_e}`),W.success(`Meeting "${te}" archived.`),S?.id===_e&&E(null),await Oe()):le==="bulk-delete"&&(await ae.post("/meetings/sales/bulk-delete",{meeting_ids:X.action.meetingIds}),W.success(`Successfully archived ${X.action.meetingIds.length} meeting(s)`),pe([]),await Oe())}catch(Ue){const Ie=Ue.response?.data?.detail||"Action failed.";W.error(typeof Ie=="string"?Ie:JSON.stringify(Ie)),console.error(Ie)}finally{V(!1),oe(!1),q(null)}},et=le=>{Je("single")},De=()=>{const le=Ce.filter(Z=>Z.created_by===Ne?.id);ye.length===le.length&&le.length>0?pe([]):pe(le.map(Z=>Z.id))},tt=le=>{pe(Z=>Z.includes(le)?Z.filter(_e=>_e!==le):[...Z,le])},Je=le=>{if(le==="single"){const Z=S.subject||"this meeting";q({title:"Archive Meeting",message:`Are you sure you want to archive "${Z}"?`,confirmLabel:"Archive Meeting",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:S.id,name:Z}})}else if(le==="bulk"){if(ye.length===0)return;q({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:ye.length})," selected meetings?"]}),confirmLabel:`Archive ${ye.length} meeting(s)`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",meetingIds:ye}})}},H=()=>{Je("bulk")},be=async(le,Z)=>{try{await ae.put(`/meetings/${le}`,{status:Z}),W.success("Status updated"),Oe(),E(null)}catch{W.error("Failed to update status")}};return o&&i?S?n.jsx(gd,{meeting:S,onClose:()=>{E(null),e("/admin/dashboard")},onEdit:Ee,onDelete:et,onStatusUpdate:be,currentUser:Ne,isSalesView:!0}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[d&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:ee,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:he,className:"w-full outline-none"})]}),n.jsxs("select",{value:N,onChange:le=>b(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Ce.length>0&&Ce.filter(le=>le.created_by===Ne?.id).every(le=>ye.includes(le.id))&&Ce.some(le=>le.created_by===Ne?.id),onChange:De,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ye.length>0?n.jsx("button",{onClick:H,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${ye.length} selected meetings`,children:n.jsx(mi,{size:18})}):""})]})}),n.jsx("tbody",{children:Ce.length>0?Ce.map(le=>n.jsxs("tr",{onClick:()=>E(le),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-center",onClick:Z=>Z.stopPropagation(),children:Ne&&le.created_by===Ne.id?n.jsx("input",{type:"checkbox",checked:ye.includes(le.id),onChange:()=>tt(le.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Z=>Z.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:le.subject}),n.jsxs("td",{className:"py-3 px-4",children:[le.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:le.lead.title}),le.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:le.account.name}),le.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[le.contact.first_name," ",le.contact.last_name]}),le.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:le.deal.name}),le.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:_Ue(le.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:AUe(le.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[le.meet_assign_to.first_name," ",le.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${TUe(ub(le.status))}`,children:ub(le.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4"})]},le.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:Ge.length,pageSize:A,currentPage:k,onPrev:()=>_(le=>Math.max(1,le-1)),onNext:()=>_(le=>le+1),onPageSizeChange:le=>{T(le),_(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),C&&n.jsx(Zj,{onClose:xe,formData:$,setFormData:z,isEditing:F,onSubmit:Ae,isSubmitting:Q||ne,users:f,currentUser:a}),S&&n.jsx(gd,{meeting:S,onClose:()=>E(null),onEdit:Ee,onDelete:et,onStatusUpdate:be,currentUser:Ne,isSalesView:!0}),X&&n.jsx(kUe,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,variant:X.variant,onConfirm:Re,onCancel:()=>q(null),loading:ne})]})};function kUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const LUe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],PUe=e=>e?String(e).toUpperCase():"",of=e=>{const t=PUe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},pA=e=>{const t=of(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},X7=e=>{switch(of(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},xA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Z7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function DUe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[_,A]=h.useState("PLANNED"),[T,$]=h.useState(!1),[z,F]=h.useState(!1),[P,M]=h.useState(1),[G,Q]=h.useState(10),[V,X]=h.useState(null),[q,ne]=h.useState([]),[oe,K]=h.useState(null),{comments:R,addComment:ye,refresh:pe}=Ea({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&pe()},[a?.id,pe]),Us();const Ne=wt(),Se=Jt(),{user:Oe}=tn(),ke=Oe?.role==="Sales",Ge={subject:"",call_time:(()=>{const D=new Date,B=D.getFullYear(),ie=String(D.getMonth()+1).padStart(2,"0"),ue=String(D.getDate()).padStart(2,"0");return`${B}-${ie}-${ue}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Ce,xe]=h.useState(Ge);h.useEffect(()=>{e&&!v&&ke&&Oe&&!Ce.assigned_to&&xe(D=>({...D,assigned_to:Oe.id}))},[e,v,Oe,ke]),h.useEffect(()=>{const D=Se.state,B=D?.callID;if(B&&!D?.openCallModal){X(B),Ne(Se.pathname,{replace:!0,state:{}});return}!D?.openCallModal||!D?.initialCallData||D.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||D.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),xe(ie=>({...ie,...D.initialCallData,relatedTo1:D.initialCallData.relatedTo1?String(D.initialCallData.relatedTo1):"",relatedTo2:D.initialCallData.relatedTo2?String(D.initialCallData.relatedTo2):""})),Ne(Se.pathname,{replace:!0,state:{}}))},[Se.state,o]),h.useEffect(()=>{if(V&&u.length>0&&!z){const D=u.find(B=>B.id===V);D?s(D):W.error("Call not found."),X(null)}},[V,u,z]);const ee=async()=>{try{F(!0);const D=await ae.get("/calls/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>{const Pe=ue?.created_at?new Date(ue.created_at):0;return(se?.created_at?new Date(se.created_at):0)-Pe});f(ie)}catch(D){console.error("Error fetching calls:",D),W.error("Failed to load calls")}finally{F(!1)}},Ee=async()=>{try{const D=await ae.get("/users/all");x(D.data)}catch(D){console.error("Error fetching users: ",D)}};h.useEffect(()=>{async function D(){try{const B=await ae.get("/auth/me");K(B.data)}catch(B){console.error("Failed to fetch current user",B)}}D()},[]),h.useEffect(()=>{Ee(),ee()},[]);const Ae=[],Re="",et="Filter by Status",De="Filter by Users",tt=u,Je=h.useMemo(()=>{const D=(P-1)*G;return tt.slice(D,D+G)},[tt,P,G]),H=u.length,be=u.filter(D=>of(D.status)==="PLANNED").length,le=u.filter(D=>of(D.status)==="HELD").length,Z=u.filter(D=>of(D.status)==="NOT_HELD").length,_e=[{title:"Total",value:H,icon:Rs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:be,icon:qs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:le,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Z,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}],[te,Ue]=h.useState("Overview"),Ie=D=>{const{name:B,value:ie}=D.target;xe(ue=>{const se={...ue,[B]:ie};return B==="relatedType1"&&(se.relatedTo1="",ie==="Lead"?(se.relatedType2=null,se.relatedTo2=null,d([])):ie==="Account"&&(se.relatedType2="Contact")),B==="relatedType2"&&(se.relatedTo2=""),se})};h.useEffect(()=>{const D=async()=>{try{l([]);let B;Ce.relatedType1==="Lead"?B=await ae.get("/leads/admin/getLeads"):Ce.relatedType1==="Account"&&(B=await ae.get("/accounts/admin/fetch-all"));let ie=[];if(B&&Array.isArray(B.data)?ie=B.data:ie=[],v&&Ce.relatedTo1)try{let ue;Ce.relatedType1==="Lead"?ue=await ae.get(`/leads/get/${Ce.relatedTo1}`):Ce.relatedType1==="Account"&&(ue=await ae.get(`/accounts/get/${Ce.relatedTo1}`)),ue&&ue.data&&(ie.some(Pe=>String(Pe.id)===String(Ce.relatedTo1))||(ie=[ue.data,...ie]))}catch(ue){console.error("Error fetching specific related item:",ue)}l(ie)}catch(B){console.error("Error fetching data:",B),l([])}};Ce.relatedType1&&D()},[Ce.relatedType1,v,Ce.relatedTo1]),h.useEffect(()=>{const D=async()=>{try{d([]);let B;if(Ce.relatedType1==="Account"&&Ce.relatedTo1)Ce.relatedType2==="Contact"?B=await ae.get(`/contacts/from-acc/${Ce.relatedTo1}`):Ce.relatedType2==="Deal"?B=await ae.get(`/deals/from-acc/${Ce.relatedTo1}`):Ce.relatedType2==="Quote"&&(B=await ae.get(`/quotes/from-acc/${Ce.relatedTo1}`));else{d([]);return}B&&Array.isArray(B.data)?d(B.data):d([])}catch(B){console.error("Error fetching data:",B),d([])}};Ce.relatedType2&&D()},[Ce.relatedType2,Ce.relatedTo1,Ce.relatedType1]);const[We,gt]=h.useState(!1),ve=D=>{D.preventDefault(),gt(!0);const B=Ce.subject;if(!B||B.trim()===""){W.error("Subject is required.");return}if(!Ce.relatedTo1){W.error(`Please select a ${Ce.relatedType1||"Lead/Account"}.`);return}if(!Ce.assigned_to){W.error("Subject is required.");return}const ue={...Ce,duration_minutes:Ce.duration_minutes?parseInt(Ce.duration_minutes,10):null,relatedTo1:Ce.relatedTo1?parseInt(Ce.relatedTo1,10):null,relatedTo2:Ce.relatedType1==="Lead"?null:Ce.relatedTo2?parseInt(Ce.relatedTo2,10):null,relatedType2:Ce.relatedType1==="Lead"?null:Ce.relatedType2,assigned_to:Ce.assigned_to?parseInt(Ce.assigned_to,10):null},se=v&&b?"update":"create",Pe=(Ce.subject||"").trim()||"Untitled Call";i({title:se==="create"?"Confirm New Call":"Confirm Update",message:se==="create"?`Create "${Pe}"?`:`Save changes to "${Pe}"?`,confirmLabel:se==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:ue,targetId:b||null,name:Pe}})},Be=D=>s(D),nt=()=>{t(!1),N(!1),C(null)},Te=async()=>{if(!r?.action){i(null);return}const{action:D}=r,{type:B,payload:ie,targetId:ue,name:se,callIds:Pe}=D;k(!0);try{if(B==="bulk-delete")await ae.post("/calls/bulk-delete",{call_ids:Pe}),W.success(`Successfully archived ${Pe.length} call(s).`),ne([]),await ee();else if(B==="create")S(!0),await ae.post("/calls/create",ie),W.success(`Call "${se}" created successfully.`),t(!1),xe(Ge),N(!1),C(null),await ee();else if(B==="update"){if(!ue)throw new Error("Missing call identifier for update.");S(!0),await ae.put(`/calls/${ue}`,ie),W.success(`Call "${se}" updated successfully.`),t(!1),xe(Ge),N(!1),C(null),await ee()}else if(B==="delete"){if(!ue)throw new Error("Missing call identifier for archival.");await ae.delete(`/calls/${ue}`),W.success(`Call "${se}" archived successfully.`),a?.id===ue&&s(null),await ee()}}catch(ge){const fe=B==="create"?"Failed to create call. Please review the details and try again.":B==="update"?"Failed to update call. Please review the details and try again.":"Failed to archive call. Please try again.",Fe=ge?.response?.data?.detail||fe;W.error(Fe)}finally{(B==="create"||B==="update")&&S(!1),k(!1),i(null)}},Qe=()=>{E||i(null)},ct=async()=>{if(a?.id)try{$(!0),await ae.put(`/calls/${a.id}`,{status:_}),W.success(`Status updated to ${pA(_)}`),f(D=>Array.isArray(D)?D.map(B=>B.id===a.id?{...B,status:_}:B):D),s(null)}catch(D){const B=D.response?.data?.detail||"Failed to update status.";W.error(B)}finally{$(!1)}},ht=()=>{const D=Je.filter(B=>B.call_creator?.id===oe?.id);q.length===D.length&&D.length>0?ne([]):ne(D.map(B=>B.id))},je=D=>{ne(B=>B.includes(D)?B.filter(ie=>ie!==D):[...B,D])},Ze=D=>{if(D==="single"){const B=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${B}"? This call will be hidden from your view but admins can still see it.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"warning",action:{type:"delete",targetId:a.id,name:B}})}else if(D==="bulk"){if(q.length===0)return;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:q.length})," selected calls? These calls will be hidden from your view but admins can still see them."]}),confirmLabel:`Archive ${q.length} call(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-delete",callIds:q}})}},ce=()=>{Ze("bulk")};h.useEffect(()=>{a&&A(of(a.status))},[a]);const J=a?n.jsxs("div",{id:"callModalBackdrop",onClick:D=>D.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${X7(a.status)}`,children:pA(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a.call_creator?.id===oe?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const D=Pe=>{if(!Pe)return"";const ge=new Date(Pe),fe=ge.getFullYear(),Fe=String(ge.getMonth()+1).padStart(2,"0"),Xe=String(ge.getDate()).padStart(2,"0"),pt=String(ge.getHours()).padStart(2,"0"),Nt=String(ge.getMinutes()).padStart(2,"0");return`${fe}-${Fe}-${Xe}T${pt}:${Nt}`},B=a.lead?"Lead":a.account?"Account":"Lead",ie=a.lead?a.lead.id:a.account?a.account.id:null,ue=B==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",se=B==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;xe({subject:a.subject||"",call_time:D(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:B,relatedType2:ue,relatedTo1:ie?String(ie):"",relatedTo2:se?String(se):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Ze("single"),children:[n.jsx(mi,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(D=>n.jsx("button",{onClick:()=>Ue(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${te===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[te==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(co,{label:"Call Time",value:Z7(a.call_time)}),n.jsx(co,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(co,{label:"Direction",value:a.direction||"--"}),n.jsx(co,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(co,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(co,{label:"Account",value:a.account.name}),a.contact&&n.jsx(co,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(co,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(co,{label:"Quote",value:xA(a.quote.quote_id)}),n.jsx(co,{label:"Created At",value:Z7(a.created_at)})]})}),te==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Ta,{comments:R,onAddComment:ye})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:D=>A(D.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ct,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,de=e?n.jsx("div",{id:"modalBackdrop",onClick:D=>D.target.id==="modalBackdrop"&&nt(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{nt(),gt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ve,noValidate:!0,children:[n.jsx(MUe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Ce.subject,onChange:Ie,isSubmitted:We,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Ie,value:Ce.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(yA,{items:Array.isArray(o)?o:[],value:Ce.relatedTo1??"",placeholder:`Search ${Ce.relatedType1||"here"}...`,getLabel:D=>Ce.relatedType1==="Lead"?D.title:D.name??"",onChange:D=>xe(B=>({...B,relatedTo1:D})),required:!0,isSubmitted:We,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Ie,value:Ce.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Ce.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(yA,{disabled:Ce.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:Ce.relatedTo2??"",placeholder:Ce.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Ce.relatedType2||"Contact"}...`:`No ${Ce.relatedType2||""} data found`,getLabel:D=>Ce.relatedType2==="Contact"?`${D.first_name??""} ${D.last_name??""}`.trim():Ce.relatedType2==="Quote"?xA(D.quote_id)??"":D.name??"",onChange:D=>xe(B=>({...B,relatedTo2:D}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Ce.call_time,onChange:Ie,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Ce.duration_minutes,onChange:Ie,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(yA,{items:Array.isArray(p)?p:[],value:Ce.assigned_to??"",placeholder:"Search an account...",getLabel:D=>`${D.first_name} ${D.last_name}`,onChange:D=>xe(B=>({...B,assigned_to:D})),disabled:ke,required:!0,isSubmitted:We})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Ie,value:Ce.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Ie,value:Ce.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(IUe,{className:"col-span-2",label:"Notes",value:Ce.notes,onChange:Ie,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{nt(),gt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Rs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{xe(Ge),N(!1),C(null),t(!0),gt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:_e.map(D=>n.jsx(OUe,{...D},D.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Re})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:et,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),LUe.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value))]}),n.jsxs("select",{defaultValue:De,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ae.map(D=>n.jsx("option",{value:D.name,children:D.name},D.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Je.length>0&&Je.filter(D=>D.call_creator?.id===oe?.id).every(D=>q.includes(D.id))&&Je.some(D=>D.call_creator?.id===oe?.id),onChange:ht,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:q.length>0?n.jsx("button",{onClick:ce,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${q.length} selected calls`,children:n.jsx(mi,{size:18})}):""})]})}),n.jsx("tbody",{children:z?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):Je.length>0?Je.map(D=>n.jsxs("tr",{onClick:()=>Be(D),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:B=>B.stopPropagation(),children:D.call_creator?.id===oe?.id?n.jsx("input",{type:"checkbox",checked:q.includes(D.id),onChange:()=>je(D.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:B=>B.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:D.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[D.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.lead.title}),D.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.account.name}),D.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[D.contact.first_name," ",D.contact.last_name]}),D.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.deal.name}),D.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:xA(D.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:D.call_time?new Date(D.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:D?.call_assign_to?`${D.call_assign_to.first_name} ${D.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${X7(D.status)}`,children:pA(D.status)})}),n.jsx("td",{})]},D.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:tt.length,pageSize:G,currentPage:P,onPrev:()=>M(D=>Math.max(D-1,1)),onNext:()=>M(D=>Math.min(D+1,Math.max(1,Math.ceil(tt.length/G)||1))),onPageSizeChange:D=>{Q(D),M(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),J,de,r&&n.jsx($Ue,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,variant:r.variant,onConfirm:Te,onCancel:Qe,loading:E})]})}function OUe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function MUe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function IUe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function co({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function $Ue({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function yA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function RUe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Jt(),p=wt(),{logout:x}=Ys(),{user:v,fetchUser:N}=tn(),C={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[f.pathname]||"Manager Panel";return h.useEffect(()=>{N()},[]),h.useEffect(()=>{const w=()=>N();return window.addEventListener("userProfileUpdated",w),()=>window.removeEventListener("userProfileUpdated",w)},[N]),h.useEffect(()=>{if(!v?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",E=w?"localhost:8000":window.location.host,k=`${S}//${E}/ws/notifications?user_id=${v.id}`,_=new WebSocket(k);return _.onmessage=A=>{const T=JSON.parse(A.data);o($=>[T,...$]),c($=>$+1)},()=>_.close()},[v?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ox,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(rx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function zUe(){const[e,t]=h.useState(!0),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Jt(),{user:d}=tn();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(It,{to:"/manager/dashboard",className:({isActive:v})=>v?u:f,children:[n.jsx(ix,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/manager/accounts",className:({isActive:v})=>v?u:f,children:[n.jsx(xd,{})," Accounts"]}),n.jsxs(It,{to:"/manager/contacts",className:({isActive:v})=>v?u:f,children:[n.jsx(sn,{})," Contacts"]}),n.jsxs(It,{to:"/manager/leads",className:({isActive:v})=>v?u:f,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs(It,{to:"/manager/deals",className:({isActive:v})=>v?u:f,children:[n.jsx(en,{})," Deals"]}),n.jsxs(It,{to:"/manager/quotes",className:({isActive:v})=>v?u:f,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs(It,{to:"/manager/targets",className:({isActive:v})=>v?u:f,children:[n.jsx(lr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/manager/tasks",className:({isActive:v})=>v?u:f,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs(It,{to:"/manager/meetings",className:({isActive:v})=>v?u:f,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs(It,{to:"/manager/calls",className:({isActive:v})=>v?u:f,children:[n.jsx(Rs,{})," Calls"]}),n.jsxs(It,{to:"/manager/audit",className:({isActive:v})=>v?u:f,children:[n.jsx(Ts,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(It,{to:"/manager/territory",className:({isActive:v})=>v?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xk,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/manager/users",className:({isActive:v})=>v?u:f,children:[n.jsx(aa,{})," Users"]}),n.jsxs(It,{to:"/manager/manage-account",className:({isActive:v})=>v?u:f,children:[n.jsx(sn,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(RUe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}const UUe=e=>n.jsx(qt,{...e}),HZ=e=>n.jsx(xd,{...e}),GZ=e=>n.jsx(qs,{...e}),FUe=e=>n.jsx(sx,{...e}),BUe=e=>n.jsx(zw,{...e}),HUe=e=>n.jsx(Et,{...e}),GUe=e=>n.jsx(Lt,{...e}),WUe=e=>n.jsx(Fw,{...e}),WZ=e=>n.jsx(Uw,{...e}),qUe=e=>n.jsx(aa,{...e}),qZ=e=>n.jsx(sn,{...e}),VUe=e=>n.jsx(Yn,{...e}),VZ=e=>n.jsx(en,{...e}),QUe=e=>n.jsx(hn,{...e}),YUe=e=>n.jsx(lr,{...e}),KUe=e=>n.jsx(_a,{...e}),XUe=e=>n.jsx(Et,{...e}),ZUe=e=>n.jsx(Rs,{...e}),JUe=e=>n.jsx(Xl,{...e}),eFe=e=>n.jsx(Ts,{...e}),QZ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,tFe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},nFe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},aFe=e=>{switch(e){case"call":return{Icon:GUe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:WUe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:HUe,color:"text-blue-500",bgColor:"bg-blue-100"}}},sFe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},rFe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:HZ,label:"Account"},{icon:qZ,label:"Contact"},{icon:VUe,label:"Leads"},{icon:VZ,label:"Deals"},{icon:QUe,label:"Quotes"},{icon:YUe,label:"Target"},{icon:KUe,label:"Task"},{icon:XUe,label:"Meeting"},{icon:ZUe,label:"Call"},{icon:eFe,label:"Audit"},{icon:JUe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(UUe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},iFe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},oFe=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(WZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(iFe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},lFe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),cFe=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let E=0;E<=C;E++)w.push(s[E]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",E=b.stage||"",k=E.toUpperCase()==="CLOSED_WON"||E==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const A=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:E,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(b)})),S&&k&&A)try{let T=new Date(w);if(isNaN(T.getTime())){const $=String(w).split("T")[0];T=new Date($+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const $=T.getFullYear(),z=T.getMonth()+1,F=`${$}-${String(z).padStart(2,"0")}`;l[F]||(l[F]=0),l[F]+=_,c++,console.log(` Added deal ${b.id} to month ${F}: ${_}, total: ${l[F]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${F} (Year: ${$}, Month: ${z})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,E=l[S]||0;x.push(`${s[w]} ${C}`),v.push(E),E>0&&console.log(`Month ${s[w]} ${C} (${S}): ${E}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(WZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(YN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},dFe=({pipelineData:e,loading:t})=>{const a=wt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/manager/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/manager/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:QZ(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},bA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},uFe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=nFe(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},mFe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=wt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=tFe(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?FUe:BUe,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:QZ(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},fFe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=aFe(f),{text:N,bg:b}=sFe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const A=new Date(_),$=A-new Date,z=Math.floor($/864e5);return z===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),E=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/manager/meetings/info?id=${o}`)):d("/manager/tasks"):d(f==="call"?`/manager/calls/info?id=${o}`:f==="meeting"?`/manager/meetings/info?id=${o}`:"/manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(GZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(qZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",E]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},hFe=()=>{const e=wt(),{user:t}=tn(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[E,k]=h.useState(""),[_,A]=h.useState([]),[T,$]=h.useState([]),[z,F]=h.useState([]),[P,M]=h.useState(new Date),G=h.useRef(null),Q=h.useRef(null),V=h.useMemo(()=>{try{if(!E.trim())return[];const oe=E.toLowerCase().trim(),K=[];return Array.isArray(_)&&_.forEach(R=>{const ye=`${R.first_name||""} ${R.last_name||""}`.trim().toLowerCase(),pe=(R.company_name||"").toLowerCase(),Ne=(R.email||"").toLowerCase(),Se=(R.phone||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:R.id,name:`${R.first_name||""} ${R.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:R.company_name||"No company",route:`/manager/leads/${R.id}`})}),Array.isArray(T)&&T.forEach(R=>{const ye=(R.name||"").toLowerCase(),pe=(R.account?.name||"").toLowerCase(),Ne=(R.description||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe))&&K.push({id:R.id,name:R.name||"Unnamed Deal",type:"Deal",details:R.account?.name||"No account",route:`/manager/deals/info?id=${R.id}`})}),Array.isArray(z)&&z.forEach(R=>{const ye=(R.name||"").toLowerCase(),pe=(R.email||"").toLowerCase(),Ne=(R.phone||"").toLowerCase(),Se=(R.website||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:R.id,name:R.name||"Unnamed Account",type:"Account",details:R.email||R.phone||"No contact info",route:"/manager/accounts"})}),K.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[E,_,T,z]),X=oe=>{oe.route&&(e(oe.route),k(""))},q=h.useCallback(async()=>{C(!0),S(null);try{const[oe,K,R,ye,pe,Ne,Se]=await Promise.all([ae.get("/leads/manager/getLeads").catch(Z=>(console.error("Error fetching leads:",Z),{data:[]})),ae.get("/deals/manager/fetch-all").catch(Z=>(console.error("Error fetching deals:",Z),{data:[]})),ae.get("/accounts/manager/fetch-all").catch(Z=>(console.error("Error fetching accounts:",Z),{data:[]})),ae.get("/tasks/all").catch(Z=>(console.error("Error fetching tasks:",Z),{data:[]})),ae.get("/meetings/manager/fetch-all").catch(Z=>(console.error("Error fetching meetings:",Z),{data:[]})),ae.get("/calls/manager/fetch-all").catch(Z=>(console.error("Error fetching calls:",Z),{data:[]})),ae.get("/logs/read-all").catch(Z=>(console.error("Error fetching logs:",Z),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],ke=Array.isArray(K.data)?K.data:[],he=Array.isArray(R.data)?R.data:[],Ge=Array.isArray(ye.data)?ye.data:[],Ce=Array.isArray(pe.data)?pe.data:[],xe=Array.isArray(Ne.data)?Ne.data:[],ee=Array.isArray(Se.data)?Se.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),A(Oe),$(ke),F(he);const Ee=Oe.filter(Z=>Z.status&&!["Lost","Converted"].includes(Z.status)).length,Ae=Ge.filter(Z=>!Z.dueDate||Z.status==="Completed"?!1:new Date(Z.dueDate)<new Date).length;s({activeLeads:Ee,totalDeals:ke.length,activeAccounts:he.length,overdueTasks:Ae});const Re=[...Oe].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);i(Re);const et=[...ke].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);l(et);const De=new Date,tt=[];xe.forEach(Z=>{const _e=Z.due_date||Z.call_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="MISSED"||te==="NOT_HELD"||te==="HELD"||tt.push({type:"Call",title:Z.subject||"Untitled Call",assignedTo:Z.assigned_to||(Z.call_assign_to?`${Z.call_assign_to.first_name||""} ${Z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"call",fullData:Z})}}),Ce.forEach(Z=>{const _e=Z.dueDate||Z.start_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="CANCELLED"||te==="DONE"||tt.push({type:"Meeting",title:Z.subject||Z.activity||"Untitled Meeting",assignedTo:Z.assignedTo||(Z.meet_assign_to?`${Z.meet_assign_to.first_name||""} ${Z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"meeting",fullData:Z})}});const Je={HIGH:1,MEDIUM:2,LOW:3},H=tt.sort((Z,_e)=>{const te=Je[Z.priority]||3,Ue=Je[_e.priority]||3;if(te!==Ue)return te-Ue;const Ie=new Date(Z.scheduledDate||0),We=new Date(_e.scheduledDate||0);return Ie-We}).slice(0,5);d(H),f(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const be=ke.filter(Z=>(Z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",be.length),be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),be.forEach((Z,_e)=>{let te=Z.amount;te&&typeof te=="object"?te.toString?te=parseFloat(te.toString()):te=parseFloat(te):te=parseFloat(te)||0,console.log(`Deal ${_e+1}:`,{id:Z.id,name:Z.name,stage:Z.stage,stage_upper:(Z.stage||"").toUpperCase(),amount:Z.amount,amount_parsed:te,amount_type:typeof Z.amount,close_date:Z.close_date,close_date_type:typeof Z.close_date,close_date_value:Z.close_date?new Date(Z.close_date):null,has_close_date:!!Z.close_date,has_amount:te>0,all_keys:Object.keys(Z),full_deal:Z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(Z=>Z.stage))),N(ke);const le=[...ee].sort((Z,_e)=>new Date(_e.timestamp||0)-new Date(Z.timestamp||0));x(le)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),q(),G.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),q(),M(new Date)},3e4),()=>{G.current&&clearInterval(G.current)}),[q]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const K=3;let R=null;const ye=()=>{const pe=window.location.protocol==="https:"?"wss:":"ws:",Ne=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Se=`${pe}//${Ne}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Se);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=ke=>{try{const he=JSON.parse(ke.data);console.log(" Real-time notification received:",he),he.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(he.event)&&(console.log(" Refreshing dashboard due to:",he.event),q(),M(new Date))}catch(he){console.error("Error parsing WebSocket message:",he)}},Oe.onerror=ke=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<K&&(oe++,R=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{R&&clearTimeout(R),Q.current&&(Q.current.close(),Q.current=null)}},[t,q]);const ne=[{icon:qUe,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:VZ,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:HZ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/manager/accounts")},{icon:GZ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(rFe,{searchQuery:E,onSearchChange:k,searchResults:V,onSearchResultClick:X}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:ne.map(oe=>n.jsx(lFe,{...oe,loading:b},oe.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(oFe,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(cFe,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(dFe,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(bA,{title:"Latest Leads",children:r.length>0?r.map((oe,K)=>n.jsx(uFe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(bA,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((oe,K)=>n.jsx(mFe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(bA,{title:"Upcoming Activities",children:c.length>0?c.map((oe,K)=>n.jsx(fFe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},vA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],wA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Lr=e=>e?e.toUpperCase():"",NA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",gFe=e=>{switch(Lr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},pFe=e=>{switch(Lr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function xFe(){const e=wt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(wA),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,E]=h.useState([]),[k,_]=h.useState(null),[A,T]=h.useState([]),[$,z]=h.useState([]),[F,P]=h.useState("Filter by Status"),[M,G]=h.useState(""),[Q,V]=h.useState(null),[X,q]=h.useState(!1),[ne,oe]=h.useState(1),[K,R]=h.useState(10),[ye,pe]=h.useState("Overview"),[Ne,Se]=h.useState(""),[Oe,ke]=h.useState(!1),[he,Ge]=h.useState({}),[Ce,xe]=h.useState(null),{comments:ee,addComment:Ee,refresh:Ae}=Ea({relatedType:"account",relatedId:x?.id});h.useEffect(()=>{x?.id&&Ae()},[x?.id,Ae]);const Re=h.useCallback(async(re=null)=>{w(!0);try{const ot=await ae.get("/accounts/admin/fetch-all"),kt=[...Array.isArray(ot.data)?ot.data:[]].sort((Yt,Me)=>{const vt=Yt?.created_at||Yt?.updated_at||0,U=Me?.created_at||Me?.updated_at||0;return new Date(U)-new Date(vt)});if(b(kt),re){const Yt=kt.find(Me=>Me.id===re);v(Yt||null)}}catch(ot){console.error(ot),b([]),ot.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),et=h.useCallback(async()=>{try{const re=await ae.get("/users/all");E(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),De=h.useCallback(async()=>{try{const re=await ae.get("/territories/fetch");T(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&W.warn("Unable to load territories (permission denied).")}},[]),tt=h.useCallback(async()=>{try{const re=await ae.get("/accounts/admin/parent-companies");z(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&W.warn("Unable to load parent companies (permission denied).")}},[]),Je=h.useCallback(async re=>{try{const ot=await ae.get(`/activities/accounts/${re}`);Ge(ot.data&&typeof ot.data=="object"?ot.data:{})}catch(ot){console.error(ot),ot.response?.status===404&&(console.warn("No activities found for this account."),Ge({}))}},[]);h.useEffect(()=>{Re(),et(),De(),tt()},[Re,et,De,tt]),h.useEffect(()=>{x&&Se(Lr(x.status)||"PROSPECT")},[x]);const H=N.length,be=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="customer").length,[N]),le=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="prospect").length,[N]),Z=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="partner").length,[N]),_e=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="active").length,[N]),te=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="inactive").length,[N]),Ue=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="former").length,[N]),Ie=h.useMemo(()=>[{title:"Total",value:H,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:be,icon:Mo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:le,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Z,icon:sn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:_e,icon:Mo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:te,icon:Io,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Ue,icon:Io,color:"text-orange-600",bgColor:"bg-orange-100"}],[H,be,le,Z,_e,te,Ue]),We=h.useMemo(()=>{const re=M.trim().toLowerCase(),ot=F.trim().toUpperCase();return N.filter(Rt=>{const kt=[Rt?.name,Rt?.website,Rt?.industry,Rt?.territory?.name,Rt?.phone_number],Yt=re===""||kt.some(vt=>vt==null?!1:vt.toString().toLowerCase().includes(re)),Me=ot==="FILTER BY STATUS"||Lr(Rt.status)===ot;return Yt&&Me})},[N,M,F]),gt=Math.max(1,Math.ceil(We.length/K)||1);h.useEffect(()=>{oe(1)},[M,F]),h.useEffect(()=>{oe(re=>{const ot=Math.max(1,Math.ceil(We.length/K)||1);return re>ot?ot:re})},[We.length]);const ve=h.useMemo(()=>{const re=(ne-1)*K;return We.slice(re,re+K)},[We,ne]);We.length===0||(ne-1)*K+1,Math.min(ne*K,We.length);const Be=()=>oe(re=>Math.max(re-1,1)),nt=()=>oe(re=>Math.min(re+1,gt)),Te=re=>{v(re),pe("Overview"),Se(Lr(re?.status)||"PROSPECT")},Qe=()=>v(null),ct=re=>{re.target.id==="accountModalBackdrop"&&!X&&Qe()},ht=()=>{a(!1),r(!1),u(null),p(wA),o(!1),_(null)},je=re=>{re.target.id==="modalBackdrop"&&ht()},Ze=re=>re?new Date(re).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ce=re=>{const{name:ot,value:Rt}=re.target;p(kt=>({...kt,[ot]:Rt}))},J=()=>{p(wA),r(!1),u(null),a(!0)},de=re=>{v(null),re.assigned_accs?_(re.assigned_accs):_(null),p({name:re.name||"",website:re.website||"",phone_number:re.phone_number||"",billing_address:re.billing_address||"",shipping_address:re.shipping_address||"",industry:re.industry||"",status:Lr(re.status)||"PROSPECT",territory_id:re.territory?.id?String(re.territory.id):"",assigned_to:re.assigned_accs?.id?String(re.assigned_accs.id):""}),r(!0),u(re.id),a(!0)},D=re=>{re&&V({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:re.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:re.id,name:re.name}})},B=async()=>{if(!Q?.action){V(null);return}const{action:re}=Q,{type:ot,payload:Rt,targetId:kt,name:Yt}=re;q(!0);try{if(ot==="create"){o(!0);const Me=await ae.post("/accounts/admin",Rt);tt(),W.success(`Account "${Yt}" created successfully.`);const vt=x?.id||null;ht(),await Re(vt),!x&&Me.data?.id}else if(ot==="update"){if(!kt)throw new Error("Missing account identifier for update.");o(!0),await ae.put(`/accounts/admin/${kt}`,Rt),W.success(`Account "${Yt}" updated successfully.`);const Me=x?.id&&x.id===kt?kt:null;ht(),await Re(Me),x?.id===kt&&v(null)}else if(ot==="delete"){if(!kt)throw new Error("Missing account identifier for deletion.");const Me=x?.id;c(kt),await ae.delete(`/accounts/admin/${kt}`),W.success(`Account "${Yt}" deleted successfully.`),await Re(Me&&Me!==kt?Me:null),Me===kt&&v(null)}}catch(Me){console.error(Me);const vt=ot==="create"?"Failed to create account. Please review the details and try again.":ot==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",U=Me.response?.data?.detail||vt;W.error(U),(ot==="create"||ot==="update")&&o(!1),ot==="delete"&&c(null)}finally{(ot==="create"||ot==="update")&&o(!1),ot==="delete"&&c(null),q(!1),V(null)}},ie=()=>{X||V(null)},ue=async()=>{if(!x||!Ne)return;const re=Lr(Ne),ot=Lr(x.status);if(re!==ot){ke(!0);try{await ae.put(`/accounts/admin/${x.id}`,{status:re}),W.success(`Account status updated to ${NA(re)}`),b(Rt=>Rt.map(kt=>kt.id===x.id?{...kt,status:re}:kt)),v(null)}catch(Rt){console.error(Rt);const kt=Rt.response?.data?.detail||"Failed to update account status. Please try again.";W.error(kt)}finally{ke(!1)}}},[se,Pe]=h.useState(!1),ge=re=>{re.preventDefault(),Pe(!0);const ot=f.name.trim();if(!ot){W.error("Account name is required.");return}if(!f.assigned_to){W.error("Assigned To is required.");return}const kt={name:ot,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},Yt=s&&d?"update":"create";V({title:Yt==="create"?"Confirm New Account":"Confirm Update",message:Yt==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:ot}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:ot}),"?"]}),confirmLabel:Yt==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Yt,payload:kt,targetId:d||null,name:ot}})},fe=[{label:"Filter by Status",value:"Filter by Status"},...vA.map(re=>({label:re.label,value:re.value}))],Fe=Q?.action?.type==="delete"?Q.action.targetId:null,Xe=x&&(l===x.id||Fe===x.id),pt=x&&l===x.id,Nt=x?gFe(x.status):"",St=x?n.jsx("div",{id:"accountModalBackdrop",onClick:ct,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:re=>re.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Qe,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nt}`,children:NA(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>de(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>D(x),disabled:!!Xe,children:pt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(re=>n.jsx("button",{onClick:()=>pe(re),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===re?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:re},re))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Ze(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Ze(x.updated_at)||"N/A"})]})]}),n.jsx(Ta,{comments:ee,onAddComment:Ee})]}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[he.tasks&&he.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",he.tasks.length,")"]})]}),Ce==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.tasks.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||"No description"}),re.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",re.assigned_to.first_name," ",re.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.due_date||re.created_at)})]},`task-${ot}`))})]}),he.meetings&&he.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",he.meetings.length,")"]})]}),Ce==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.meetings.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||re.location||"No description"}),re.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",re.host.first_name," ",re.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.start_time||re.created_at)})]},`meeting-${ot}`))})]}),he.calls&&he.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",he.calls.length,")"]})]}),Ce==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.calls.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.call_time||re.created_at)})]},`call-${ot}`))})]}),he.contacts&&he.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",he.contacts.length,")"]})]}),Ce==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.contacts.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(sn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.first_name?`${re.first_name} `:"",re.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.created_at)})]},`contact-${ot}`))})]}),he.deals&&he.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",he.deals.length,")"]})]}),Ce==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.deals.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.deal_id?re.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",re.name||re.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:re.stage||re.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.close_date||re.created_at)})]},`deal-${ot}`))})]}),he.quotes&&he.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",he.quotes.length,")"]})]}),Ce==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.quotes.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(re.quote_id?re.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.presented_date)||""})]},`quote-${ot}`))})]}),(!he||(!he.tasks||he.tasks.length===0)&&(!he.meetings||he.meetings.length===0)&&(!he.calls||he.calls.length===0)&&(!he.quotes||he.quotes.length===0)&&(!he.deals||he.deals.length===0)&&(!he.contacts||he.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Ne||Lr(x?.status)||"PROSPECT",onChange:re=>Se(re.target.value),children:vA.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))}),n.jsx("button",{onClick:ue,disabled:Oe||!Ne||Lr(Ne)===Lr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!Ne||Lr(Ne)===Lr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,Ht=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{J(),Pe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(re=>n.jsx(yFe,{...re},re.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:re=>G(re.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:F,onChange:re=>P(re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):We.length>0?ve.map(re=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Te(re),Je(re.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:re.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:re.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${pFe(re.status)}`,children:NA(re.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:re.phone_number||"--"})]})})]},re.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:We.length,pageSize:K,currentPage:ne,onPrev:Be,onNext:nt,onPageSizeChange:re=>{R(re),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),on=t?n.jsx("div",{id:"modalBackdrop",onClick:je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:re=>re.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ht(),Pe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||X,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ge,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Km,{label:"Name",name:"name",value:f.name,onChange:ce,placeholder:"Company name",required:!0,isSubmitted:se})}),n.jsx(e8,{label:"Parent Company",value:f.parent_company,onChange:re=>{p(ot=>({...ot,parent_company:re}))},items:$.map(re=>({id:re,name:re})),getLabel:re=>re?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Km,{label:"Website",name:"website",value:f.website,onChange:ce,placeholder:"https://example.com",disabled:i}),n.jsx(Km,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Km,{label:"Industry",name:"industry",value:f.industry,onChange:ce,placeholder:"Industry",disabled:i}),n.jsx(Km,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:ce,placeholder:"Billing address",disabled:i}),n.jsx(Km,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:ce,placeholder:"Shipping address",disabled:i}),n.jsx(J7,{label:"Status",name:"status",value:f.status,onChange:ce,options:[{value:"",label:"Select status"},...vA],required:!0,disabled:i}),n.jsx(e8,{label:"Assigned To",value:f.assigned_to,onChange:re=>{const ot=S.find(kt=>String(kt.id)===String(re));_(ot);let Rt=null;ot&&ot.assigned_territory&&ot.assigned_territory.length===1&&(Rt=ot.assigned_territory[0].id),p(kt=>({...kt,assigned_to:re,territory_id:Rt}))},items:S||[],getLabel:re=>`${re?.first_name??""} ${re?.last_name??""} (${re?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:se,disabled:i||S.length===0}),n.jsx(J7,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:ce,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(re=>({value:String(re.id),label:re.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),Pe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||X,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||X,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,cn=Q?n.jsx(vFe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:B,onCancel:ie,loading:X}):null;return n.jsxs(n.Fragment,{children:[Ht,St,on,cn]})}function yFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Km({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function J7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function e8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function bFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),E=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function vFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const jA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},pl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),uo=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function wFe(){const e=wt(),t=Jt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[E,k]=h.useState(!1),[_,A]=h.useState(null),[T,$]=h.useState(jA),[z,F]=h.useState(""),[P,M]=h.useState("Filter by Accounts"),[G,Q]=h.useState(null),[V,X]=h.useState("Overview"),[q,ne]=h.useState(1),[oe,K]=h.useState(10),[R,ye]=h.useState({}),[pe,Ne]=h.useState(null),[Se,Oe]=h.useState(null),{comments:ke,addComment:he,refresh:Ge}=Ea({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&Ge()},[u?.id,Ge]),h.useEffect(()=>{const D=t.state?.contactID;D&&(Oe(D),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Se&&a.length>0&&!r){const D=a.find(B=>B.id===Se);D?f(D):W.error("Contact not found."),Oe(null)}},[Se,a,r]);const Ce=h.useCallback(async(D=null)=>{i(!0);try{const B=await ae.get("/contacts/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((se,Pe)=>{const ge=se?.created_at||se?.updated_at||0,fe=Pe?.created_at||Pe?.updated_at||0;return new Date(fe)-new Date(ge)});if(s(ue),D){const se=ue.find(Pe=>Pe.id===D);f(se||null)}}catch(B){console.error(B),s([]),B.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),xe=h.useCallback(async()=>{try{const D=await ae.get("/accounts/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>(ue?.name||"").localeCompare(se?.name||""));l(ie)}catch(D){console.error(D),l([]),D.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),ee=h.useCallback(async()=>{try{const D=await ae.get("/users/all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>pl(ue).localeCompare(pl(se)));d(ie)}catch(D){console.error(D),d([]),D.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),Ee=h.useCallback(async D=>{try{const B=await ae.get(`/activities/contact/${D}`);ye(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{Ce(),xe(),ee()},[Ce,xe,ee]);const Ae=h.useMemo(()=>{const D=new Map;o.forEach(ie=>{ie?.id&&ie?.name&&D.set(String(ie.id),ie.name)}),a.forEach(ie=>{ie?.account_id&&ie?.account?.name&&D.set(String(ie.account_id),ie.account.name)});const B=Array.from(D.entries()).sort((ie,ue)=>ie[1].localeCompare(ue[1])).map(([ie,ue])=>({value:ie,label:ue}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...B]},[o,a]),Re=h.useMemo(()=>{const D=z.trim().toLowerCase(),B=P.trim();return a.filter(ie=>{const ue=[ie?.first_name,ie?.last_name,ie?.email,ie?.title,ie?.department,ie?.account?.name,ie?.account?.status,ie?.work_phone,ie?.mobile_phone_1,ie?.mobile_phone_2,ie?.assigned_contact?.first_name,ie?.assigned_contact?.last_name,ie?.contact_creator?.first_name,ie?.contact_creator?.last_name,ie?.notes,uo(ie?.created_at),uo(ie?.updated_at)],se=D===""||ue.some(ge=>ge==null?!1:ge.toString().toLowerCase().includes(D)),Pe=B==="Filter by Accounts"||String(ie.account_id)===B;return se&&Pe})},[a,z,P]),et=Math.max(1,Math.ceil(Re.length/oe)||1);h.useEffect(()=>{ne(1)},[z,P]),h.useEffect(()=>{ne(D=>{const B=Math.max(1,Math.ceil(Re.length/oe)||1);return D>B?B:D})},[Re.length]);const De=h.useMemo(()=>{const D=(q-1)*oe;return Re.slice(D,D+oe)},[Re,q]),tt=()=>ne(D=>Math.max(D-1,1)),Je=()=>ne(D=>Math.min(D+1,et)),H=h.useMemo(()=>{if(!v||!_)return o;const D=a.find(ie=>ie.id===_);return!D||!D.account||o.some(ie=>ie.id===D.account.id)?o:[...o,D.account]},[o,v,_,a]),be=h.useCallback(()=>{x(!1),N(!1),A(null),$(jA),C(!1),We(!1)},[]),le=D=>{D.target.id==="modalBackdrop"&&!b&&!E&&be()},Z=D=>{const{name:B,value:ie}=D.target;$(ue=>({...ue,[B]:ie}))},_e=()=>{$(jA),N(!1),A(null),x(!0)},te=async D=>{if(!D)return;const B=await ae.get(`/accounts/get/${D.account_id}`);$({first_name:D.first_name||"",last_name:D.last_name||"",account_id:B.data.id?B.data.id:"",title:D.title||"",department:D.department||"",email:D.email||"",work_phone:D.work_phone||"",mobile_phone_1:D.mobile_phone_1||"",mobile_phone_2:D.mobile_phone_2||"",notes:D.notes||"",assigned_to:D.assigned_to?String(D.assigned_to):""}),N(!0),A(D.id),x(!0),f(null)},Ue=D=>{if(!D)return;const B=pl(D)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},[Ie,We]=h.useState(!1),gt=D=>{D.preventDefault(),We(!0);const B=T.first_name.trim(),ie=T.last_name.trim();if(!B||!ie){W.error("First name and last name are required.");return}if(!T.account_id){W.error("Account is required.");return}if(!T.assigned_to){W.error("Assigned To is required.");return}const se=T.email?.trim();if(!se){W.error("Email is required.");return}if(!se.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(se)){W.error("Please enter a valid email address.");return}const ge={first_name:B,last_name:ie,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},fe=v&&_?"update":"create",Fe=`${B} ${ie}`.trim();S({title:fe==="create"?"Confirm New Contact":"Confirm Update",message:fe==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Fe})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Fe}),"?"]}),confirmLabel:fe==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:fe,payload:ge,targetId:_||null,name:Fe}})},ve=async()=>{if(!w?.action){S(null);return}const{action:D}=w,{type:B,payload:ie,targetId:ue,name:se}=D;k(!0);try{if(B==="create"){C(!0),await ae.post("/contacts/admin",ie),W.success(`Contact "${se}" created successfully.`);const Pe=u?.id||null;be(),await Ce(Pe)}else if(B==="update"){if(!ue)throw new Error("Missing contact identifier for update.");C(!0),await ae.put(`/contacts/admin/${ue}`,ie),W.success(`Contact "${se}" updated successfully.`);const Pe=u?.id&&u.id===ue?ue:u?.id||null;be(),await Ce(Pe),u?.id===ue&&f(null)}else if(B==="delete"){if(!ue)throw new Error("Missing contact identifier for deletion.");const Pe=u?.id;Q(ue),await ae.delete(`/contacts/admin/${ue}`),W.success(`Contact "${se}" deleted successfully.`),await Ce(Pe&&Pe!==ue?Pe:null),Pe===ue&&f(null)}}catch(Pe){console.error(Pe);const ge=B==="create"?"Failed to create contact. Please review the details and try again.":B==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",fe=Pe.response?.data?.detail||ge;W.error(fe)}finally{(B==="create"||B==="update")&&C(!1),B==="delete"&&Q(null),k(!1),S(null)}},Be=()=>{E||S(null)},nt=D=>{f(D),X("Overview")},Te=()=>f(null),Qe=D=>{D.target.id==="contactModalBackdrop"&&!E&&Te()},ct=w?.action?.type==="delete"?w.action.targetId:null,ht=u&&(G===u.id||ct===u.id),je=u&&G===u.id,Ze=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Qe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Te,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:pl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>te(u),disabled:E||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ue(u),disabled:!!ht,children:je?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(D=>n.jsx("button",{onClick:()=>X(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:pl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:uo(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:uo(u.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Ta,{comments:ke,onAddComment:he})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[R.tasks&&R.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",R.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.tasks.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||"No description"}),D.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",D.assigned_to.first_name," ",D.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:uo(D.due_date||D.created_at)})]},`task-${B}`))})]}),R.meetings&&R.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",R.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.meetings.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||D.location||"No description"}),D.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",D.host.first_name," ",D.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:uo(D.start_time||D.created_at)})]},`meeting-${B}`))})]}),R.calls&&R.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",R.calls.length,")"]})]}),pe==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.calls.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:uo(D.call_time||D.created_at)})]},`call-${B}`))})]}),R.deals&&R.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",R.deals.length,")"]})]}),pe==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.deals.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",D.name||D.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:D.stage||D.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:uo(D.close_date||D.created_at)})]},`deal-${B}`))})]}),R.quotes&&R.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",R.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.quotes.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(D.quote_id?D.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:D.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:uo(D.presented_date)||""})]},`quote-${B}`))})]}),(!R||(!R.tasks||R.tasks.length===0)&&(!R.meetings||R.meetings.length===0)&&(!R.calls||R.calls.length===0)&&(!R.quotes||R.quotes.length===0)&&(!R.deals||R.deals.length===0)&&(!R.contacts||R.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const D=encodeURIComponent(u.email),B=encodeURIComponent(""),ie=encodeURIComponent(""),ue=`mailto:${D}?subject=${B}&body=${ie}`;window.location.href=ue},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{_e(),We(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:D=>F(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:D=>M(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ae.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value??D.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):Re.length>0?De.map(D=>{const B=[{Icon:na,value:D.email,key:"email"},{Icon:Lt,value:D.work_phone,key:"work_phone"},{Icon:id,value:D.mobile_phone_1,key:"mobile_phone_1"},{Icon:id,value:D.mobile_phone_2,key:"mobile_phone_2"}].filter(ie=>!!ie.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{nt(D),Ee(D.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:pl(D)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:D.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ix,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:D.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:B.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:B.map(({Icon:ie,value:ue,key:se})=>{const Pe=yt.createElement(ie,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Pe,n.jsx("span",{children:ue})]},se)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(sn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.assigned_contact?`${D.assigned_contact.first_name} ${D.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:uo(D.created_at)||"--"})]})})]},D.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:oe,currentPage:q,onPrev:tt,onNext:Je,onPageSizeChange:D=>{K(D),ne(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),J=p?n.jsx("div",{id:"modalBackdrop",onClick:le,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:()=>{be(),We(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||E,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:gt,noValidate:!0,children:[n.jsx(zc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Z,placeholder:"First name",required:!0,isSubmitted:Ie}),n.jsx(zc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Z,placeholder:"Last name",required:!0,isSubmitted:Ie}),n.jsx(t8,{label:"Account",value:T.account_id,onChange:D=>$(B=>({...B,account_id:D})),items:v?H:o||[],getLabel:D=>D?.name??"",placeholder:"Search account...",disabled:b||(v?H.length===0:o.length===0),required:!0,isSubmitted:Ie}),n.jsx(t8,{label:"Assigned To",value:T.assigned_to,onChange:D=>$(B=>({...B,assigned_to:D})),items:c||[],getLabel:D=>`${D?.first_name??""} ${D?.last_name??""} (${D?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ie,disabled:b||c.length===0}),n.jsx(zc,{label:"Title",name:"title",value:T.title,onChange:Z,placeholder:"Job title",disabled:b}),n.jsx(zc,{label:"Department",name:"department",value:T.department,onChange:Z,placeholder:"Department",disabled:b}),n.jsx(zc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Z,placeholder:"example@email.com",required:!0,isSubmitted:Ie}),n.jsx(zc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(zc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(zc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(jFe,{label:"Notes",name:"notes",value:T.notes,onChange:Z,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{be(),We(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||E,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,de=w?n.jsx(CFe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:ve,onCancel:Be,loading:E}):null;return n.jsxs(n.Fragment,{children:[ce,Ze,J,de]})}function zc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function t8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(NFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function NFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function jFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function CFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const CA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function YZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Ql(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[E,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,A]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const M=await ae.get(`/leads/get/${c}`);u(M.data),v(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),A({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&T()},[c,e]);const $=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){W.error("Lead must be Qualified before it can be converted.");return}const M=await ae.put(`/leads/${d.id}/update/status`,{status:x});W.success("Lead status updated successfully");const G={...d,status:M.data.status};u(G),i&&i(G),a&&a(),t&&t()}catch(M){console.error(M),W.error("Failed to update lead status")}},z=async M=>{const G={...w,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",G),console.log("Contact data: ",E),console.log("Deal data: ",_),console.log("Lead data: ",M);try{const V=(await ae.post("/accounts/convertedLead",G)).data.id,X={...E,account_id:V,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},ne=(await ae.post("/contacts/convertedLead",X)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},K=_.amount&&_.amount!==""?parseFloat(_.amount):0,R={..._,account_id:V,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:ne,probability:oe(),stage:"Prospecting"},ye=await ae.post("/deals/convertedLead",R),pe=await ae.put(`/leads/convert/${M.id}`);i&&i(null),a(),W.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const V=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";W.error(V)}},F=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=M=>M.toString().toLowerCase().replace(/\b\w/g,G=>G.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${F(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>z(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:CA(M.due_date||M.created_at)})]},`task-${G}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:CA(M.start_time||M.created_at)})]},`meeting-${G}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:CA(M.call_time||M.created_at)})]},`call-${G}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),G=encodeURIComponent(""),Q=encodeURIComponent(""),V=`mailto:${M}?subject=${G}&body=${Q}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>v(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:$,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const SFe=Vf.all(),SA=SFe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),_Fe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),AFe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},_A={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function TFe(){const e=wt(),{leadID:t}=Ql();Us();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[E,k]=h.useState(10),[_,A]=h.useState(_A),[T,$]=h.useState(!1),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState(null),[V,X]=h.useState(!1),[q,ne]=h.useState({});h.useRef(null);const[oe,K]=h.useState(!1),[R,ye]=h.useState(null),[pe,Ne]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Se,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[ke,he]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ge=async()=>{try{const je=await ae.get("/leads/getUsers");l(je.data)}catch(je){console.error(`Error fetching users: ${je}`)}},Ce=async()=>{x(!0);try{const je=await ae.get("/leads/admin/getLeads");f(je.data),console.log(je.data)}catch(je){console.error(`Error fetching leads: ${je}`)}finally{x(!1)}};h.useEffect(()=>{Ge(),Ce()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const je=u.find(Ze=>Ze.id===Number(t));je&&s(je)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(R){const Ze=(de=>{if(!de)return{code:"+63",number:""};const D=de.match(/^(\+\d+)\s(.+)$/);if(D)return{code:D[1],number:D[2]};if(de.startsWith("+")){const B=de.match(/^(\+\d{1,3})/);if(B)return{code:B[1],number:de.substring(B[1].length).trim()}}return{code:"+63",number:de}})(R.work_phone),ce=[];R.work_phone&&ce.push(`Work: ${R.work_phone}`),R.mobile_phone_1&&ce.push(`Mobile 1: ${R.mobile_phone_1}`),R.mobile_phone_2&&ce.push(`Mobile 2: ${R.mobile_phone_2}`);const J=ce.length>0?ce.join(" | "):"";Ne({name:R.company_name||"",website:"",countryCode:Ze.code,phone_number:Ze.number,combinedPhoneNumbers:J,billing_address:R.address||"",shipping_address:R.address||"",industry:"",status:"Prospect",territory_id:R.assigned_to?.territory?.id||null,assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),Oe({last_name:R.last_name||"",first_name:R.first_name||"",account_id:null,title:R.title||"",department:R.department||"",email:R.email||"",work_phone:R.work_phone||"",mobile_phone_1:R.mobile_phone_1||"",mobile_phone_2:R.mobile_phone_2||"",notes:R.notes||"",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),he({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null})}},[R]);const xe=je=>N(je.target.value),ee=h.useMemo(()=>{const je=v.trim().toLowerCase(),Ze=b.trim().toUpperCase();return u.filter(ce=>{const J=[ce?.first_name,ce?.last_name,ce?.company_name,ce?.title,ce?.email,ce?.work_phone,ce?.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:""],de=je===""||J.some(B=>B==null||B===""?!1:B.toString().toLowerCase().includes(je));let D=!1;return Ze==="FILTER BY STATUS"?D=(ce.status?ce.status.toUpperCase():"")!=="CONVERTED":D=(ce.status?ce.status.toUpperCase():"")===Ze,de&&D})},[u,v,b]),Ee=Math.max(1,Math.ceil(ee.length/E)||1);h.useEffect(()=>{S(1)},[v,b]),h.useEffect(()=>{S(je=>{const Ze=Math.max(1,Math.ceil(ee.length/E)||1);return je>Ze?Ze:je})},[ee.length]);const Ae=h.useMemo(()=>{const je=(w-1)*E;return ee.slice(je,je+E)},[ee,w]),Re=()=>S(je=>Math.max(je-1,1)),et=()=>S(je=>Math.min(je+1,Ee)),De=h.useCallback(async je=>{try{const Ze=await ae.get(`/activities/lead/${je}`);ne(Ze.data&&typeof Ze.data=="object"?Ze.data:{})}catch(Ze){console.error(Ze),Ze.response?.status===404&&(console.warn("No activities found for this account."),ne({}))}},[]),tt=je=>{s(je),De(je.id)},Je=()=>{s(null),t&&e("/admin/leads",{replace:!0})},H=()=>{i(!1),A(_A),$(!1),F(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},be=je=>{je.target.id==="modalBackdrop"&&H()},le=()=>{A(_A),$(!1),F(null),d(null),i(!0)},Z=je=>{if(!je){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",je),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Ze=B=>{if(!B)return{code:"+63",number:""};const ie=B.match(/^(\+\d+)\s(.+)$/);return ie?{code:ie[1],number:ie[2]}:{code:"+63",number:B}},ce=Ze(je.work_phone),J=Ze(je.mobile_phone_1),de=Ze(je.mobile_phone_2);let D="";if(je.assigned_to){D=String(je.assigned_to.id);const B=o?.find(ie=>ie.id===je.assigned_to.id);d(B)}A({first_name:je.first_name||"",last_name:je.last_name||"",company_name:je.company_name||"",title:je.title||"",department:je.department||"",email:je.email||"",work_ccode:ce.code,work_phone:ce.number,m1_ccode:J.code,mobile_phone_1:J.number,m2_ccode:de.code,mobile_phone_2:de.number,address:je.address||"",notes:je.notes||"",source:je.source||"",territory_id:je.territory?.id||null,lead_owner:D,status:je.status||"New"}),$(!0),F(je.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},_e=je=>{if(!je){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",je);const Ze=`${je.first_name} ${je.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ze}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:je.id,name:Ze}})},te=je=>{const{name:Ze,value:ce}=je.target;if(A(J=>({...J,[Ze]:ce})),Ze==="lead_owner"){const J=o.find(de=>de.id===parseInt(ce));d(J)}},[Ue,Ie]=h.useState(!1),We=je=>{if(je.preventDefault(),Ie(!0),!_.last_name?.trim()){W.error("Last name is required.");return}if(!_.company_name?.trim()){W.error("Company is required.");return}if(!_.email?.trim()){W.error("Email is required.");return}if(!_.email.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){W.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){W.error("Please assign a lead owner.");return}const ce={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},J=T&&z?"update":"create",de=`${_.first_name} ${_.last_name}`;Q({title:J==="create"?"Confirm New Lead":"Confirm Update",message:J==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}),confirmLabel:J==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:ce,targetId:z||null,name:de}})},gt=async()=>{if(!G?.action){Q(null);return}const{action:je}=G,{type:Ze,payload:ce,targetId:J,name:de,lead:D}=je;console.log(ce),X(!0);try{if(Ze==="create")M(!0),await ae.post("/leads/create",ce),W.success(`Lead "${de}" created successfully.`),H(),await Ce();else if(Ze==="update"){if(!J)throw new Error("Missing lead identifier for update.");M(!0);const B=await ae.put(`/leads/${J}`,ce);W.success(`Lead "${de}" updated successfully.`),a&&a.id===J&&s(null),H(),await Ce()}else if(Ze==="delete"){if(!J)throw new Error("Missing lead identifier for deletion.");await ae.delete(`/leads/${J}`),W.success(`Lead "${de}" deleted successfully.`),a?.id===J&&s(null),await Ce()}}catch(B){console.error(B);const ie=Ze==="create"?"Failed to create lead. Please review the details and try again.":Ze==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ue=B.response?.data?.detail||ie;W.error(ue)}finally{(Ze==="create"||Ze==="update")&&M(!1),Ze!=="edit"&&(X(!1),Q(null))}},ve=()=>{V||Q(null)},Be=u.filter(je=>je.status==="New").length,nt=u.filter(je=>je.status==="Contacted").length,Te=u.filter(je=>je.status==="Qualified").length,Qe=u.filter(je=>je.status==="Converted").length,ct=u.filter(je=>je.status==="Lost").length,ht=[{title:"New",value:Be,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:nt,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Te,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Qe,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ct,icon:zs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{le(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ht.map(je=>n.jsx(kFe,{...je},je.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:xe,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:je=>C(je.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ee.length>0?Ae.map(je=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>tt(je),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[je.first_name," ",je.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:je.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.assigned_to?`${je.assigned_to.first_name} ${je.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${AFe(je.status||"New")}`,children:_Fe(je.status||"New")})})]},je.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ee.length,pageSize:E,currentPage:w,onPrev:Re,onNext:et,onPageSizeChange:je=>{k(je),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:be,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:je=>je.stopPropagation(),children:[n.jsx("button",{onClick:()=>{H(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:te,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Ue&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:te,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:te,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:SA.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:SA.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:SA.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:te,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Ue&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(LFe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:je=>`${je.first_name} ${je.last_name}`,onChange:je=>{const Ze=o.find(J=>String(J.id)===String(je));d(Ze);let ce=null;Ze&&Ze.assigned_territory&&Ze.assigned_territory.length===1&&(ce=Ze.assigned_territory[0].id),A(J=>({...J,lead_owner:je,territory_id:ce}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:te,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(je=>n.jsx("option",{value:je.id,children:je.name},je.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:te,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:te,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{H(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||V,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:We,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||V,children:P||V?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),G&&n.jsx(EFe,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:gt,onCancel:ve,loading:V}),a&&!r&&!T&&n.jsx(YZ,{relatedActs:q,lead:a,onBack:Je,fetchLeads:Ce,setSelectedLead:s,onEdit:Z,onDelete:_e})]})}function EFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function kFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function LFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const mb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Za=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),PFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Za,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Za,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Za,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Za,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Za,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),DFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Za,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Za,{label:"Department",name:"department",value:e.department}),n.jsx(Za,{label:"Title",name:"title",value:e.title}),n.jsx(Za,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Za,{label:"Email",name:"email",value:e.email}),n.jsx(Za,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Za,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),OFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Za,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Za,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Za,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Description",name:"description",value:e.description}),n.jsx(Za,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function MFe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(PFe,{data:mb});case 2:return n.jsx(DFe,{data:mb});case 3:return n.jsx(OFe,{data:mb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:mb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(ej,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function KZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=wt(),{user:c}=tn();h.useEffect(()=>{console.log("ManagerDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){W.error("No deal selected");return}if(!s||s===e.stage){W.info("Please select a different stage");return}const f=e.id;o(!0);try{await ae.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{W.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";W.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function XZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=Us(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=tn(),{comments:b,addComment:C,refresh:w}=Ea({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const $=((await ae.get("/deals/admin/fetch-all")).data||[]).find(z=>z.id===parseInt(u));if($){const z={...$,amount:typeof $.amount=="number"?$.amount:parseFloat($.amount||0),probability:$.probability||0};p(z)}else console.warn("Deal not found with ID:",u)}catch(A){console.error("Error fetching deal:",A)}})()},[u,e]),!f&&!u||u&&!f)return null;const E=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${E(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):v(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(z=>z==="PROSPECTING"?0:z==="QUALIFICATION"?1:z==="PROPOSAL"?2:z==="NEGOTIATION"?3:z==="CLOSED_WON"||z==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(z=>T===z?"orange":T>z?"green":"gray").map((z,F)=>n.jsxs(yt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${z==="green"?"bg-green-500 border-green-500":z==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),F<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},F))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,A)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},A))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Ta,{comments:b,onAddComment:C})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,A)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},A))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(KZ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function IFe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Jt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[E,k]=h.useState(10),[_,A]=h.useState(!1),[T,$]=h.useState(null),[z,F]=h.useState(!1),[P,M]=h.useState(!1),[G,Q]=h.useState(null),[V,X]=h.useState([]),[q,ne]=h.useState([]),[oe,K]=h.useState([]),[R,ye]=h.useState({}),[pe,Ne]=h.useState(null);h.useEffect(()=>{const J=t.state,de=J?.dealID;if(de&&!J?.openDealModal){Ne(de),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(pe&&v?.length>0&&!b){const J=v.find(de=>de.id===pe);J?d(J):W.error("Deal not found."),Ne(null)}},[pe,v,b]);const[Se,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ke,he]=h.useState(null),[Ge,Ce]=h.useState(null),xe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ee=J=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[J]||J||"--",Ee=J=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[J]||"bg-gray-100 text-gray-700",Ae=h.useCallback(async J=>{try{const de=await ae.get(`/activities/deal/${J}`);ye(de.data&&typeof de.data=="object"?de.data:{})}catch(de){console.error(de),de.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Re=h.useMemo(()=>{const J=a.trim().toLowerCase(),de=r.trim(),D=o.trim();return(v??[]).filter(B=>{const ie=[B?.name,B?.description,B?.account?.name,B?.contact?.first_name,B?.contact?.last_name,B?.assigned_deals?.first_name,B?.assigned_deals?.last_name],ue=J===""||ie.some(ge=>ge==null||ge===""?!1:ge.toString().toLowerCase().includes(J)),se=de==="Filter by Stage"||de===""||B.stage===xe[de]||B.stage===de,Pe=D==="Filter by Owner"||D===""||`${B.assigned_deals?.first_name||""} ${B.assigned_deals?.last_name||""}`.trim().toLowerCase()===D.toLowerCase();return ue&&se&&Pe})},[v,a,r,o]),et=Math.max(1,Math.ceil(Re.length/E)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(J=>{const de=Math.max(1,Math.ceil(Re.length/E)||1);return J>de?de:J})},[Re.length]);const De=h.useMemo(()=>{const J=(w-1)*E;return Re.slice(J,J+E)},[Re,w]),tt=()=>S(J=>Math.max(J-1,1)),Je=()=>S(J=>Math.min(J+1,et)),H=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),Q(null),x(!0)},be=async()=>{C(!0);try{const J=await ae.get("/deals/admin/fetch-all"),D=[...Array.isArray(J.data)?J.data:[]].sort((B,ie)=>{const ue=B?.created_at?new Date(B.created_at).getTime():0;return(ie?.created_at?new Date(ie.created_at).getTime():0)-ue});N(D)}catch(J){J.response&&J.response.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch deals. Please try again later."),console.error(J)}finally{C(!1)}},le=async()=>{try{const J=await ae.get("/accounts/admin/fetch-all");X(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},Z=async()=>{try{const J=await ae.get("/contacts/admin/fetch-all");ne(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},_e=async()=>{try{const J=await ae.get("/users/all");K(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&W.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{be(),le(),Z(),_e()},[]);const te=async J=>{J&&(Oe({id:J.id||null,name:J.name||"",account_id:J.account_id?.toString()||"",primary_contact_id:J.primary_contact_id?.toString()||"",stage:J.stage||"PROPOSAL",amount:J.amount?.toString()||"",close_date:J.close_date?new Date(J.close_date).toISOString().split("T")[0]:"",assigned_to:J.assigned_to?.toString()||"",currency:J.currency||"PHP",description:J.description||""}),he(J.account||null),Ce(J.contact||null),M(!0),Q(J.id),d(null),x(!0))},Ue=async(J=!1)=>{try{const de=await ae.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((ie,ue)=>{const se=ie?.created_at?new Date(ie.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-se});if(N(B),!J&&c&&c.id){const ie=B.find(ue=>ue.id===c.id);ie&&d({...ie})}}catch(de){console.error("Failed to refresh deal data:",de),await be()}},Ie=J=>{const de=J.name.trim();if(!de){W.error("Deal name is required.");return}if(!J.account_id){W.error("Account is required.");return}const D=P&&G?"update":"create",B=de;$({title:D==="create"?"Confirm New Deal":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:D,formData:J,targetId:G||null,name:B}})},We=J=>{if(!J)return;const de=J.name||"this deal";$({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:J.id,name:de}})},gt=async()=>{if(!T?.action){$(null);return}const{action:J}=T,{type:de,formData:D,targetId:B,name:ie}=J;F(!0);try{if(de==="create"){A(!0);const ue={name:D.name.trim(),account_id:parseInt(D.account_id),primary_contact_id:D.primary_contact_id?parseInt(D.primary_contact_id):null,stage:D.stage,amount:D.amount?parseFloat(D.amount):null,currency:D.currency||"PHP",close_date:D.close_date||null,description:D.description||null,assigned_to:D.assigned_to?parseInt(D.assigned_to):null};await ae.post("/deals/admin/create",ue),W.success(`Deal "${ie}" created successfully.`),x(!1),await be()}else if(de==="update"){if(!B)throw new Error("Missing deal identifier for update.");A(!0);const ue={};D.name!==void 0&&(ue.name=D.name.trim()),D.account_id!==void 0&&D.account_id!==""&&(ue.account_id=parseInt(D.account_id)),D.primary_contact_id!==void 0&&(ue.primary_contact_id=D.primary_contact_id?parseInt(D.primary_contact_id):null),D.stage!==void 0&&(ue.stage=D.stage),D.amount!==void 0&&D.amount!==""&&(ue.amount=parseFloat(D.amount)),D.currency!==void 0&&(ue.currency=D.currency),D.close_date!==void 0&&(ue.close_date=D.close_date||null),D.description!==void 0&&(ue.description=D.description||null),D.assigned_to!==void 0&&(ue.assigned_to=D.assigned_to?parseInt(D.assigned_to):null),await ae.put(`/deals/admin/${B}`,ue),W.success(`Deal "${ie}" updated successfully.`),x(!1),await be()}else if(de==="delete"){if(!B)throw new Error("Missing deal identifier for deletion.");await ae.delete(`/deals/admin/${B}`),W.success(`Deal "${ie}" deleted successfully.`),c?.id===B&&d(null),await be()}}catch(ue){console.error(ue);const se=de==="create"?"Failed to create deal. Please review the details and try again.":de==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Pe=ue.response?.data?.detail||se;W.error(Pe)}finally{(de==="create"||de==="update")&&A(!1),F(!1),$(null)}},ve=()=>{z||$(null)},Be=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),he(null),Ce(null),M(!1),Q(null),A(!1)},nt=(v??[]).filter(J=>J.stage==="PROSPECTING").length,Te=(v??[]).filter(J=>J.stage==="QUALIFICATION").length,Qe=(v??[]).filter(J=>J.stage==="PROPOSAL").length,ct=(v??[]).filter(J=>J.stage==="NEGOTIATION").length,ht=(v??[]).filter(J=>J.stage==="CLOSED_WON").length,je=(v??[]).filter(J=>J.stage==="CLOSED_LOST").length,Ze=(v??[]).filter(J=>J.stage==="CLOSED_CANCELLED").length,ce=[{title:"Prospecting",value:nt,icon:Hw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Te,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Qe,icon:en,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ct,icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ht,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:je,icon:zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ze,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(en,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:H,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ce.map(J=>n.jsx(RFe,{...J},J.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:J=>s(J.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:J=>i(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:J=>l(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(J=>`${J.assigned_deals?.first_name} ${J.assigned_deals?.last_name}`))].map((J,de)=>n.jsx("option",{value:J,children:J},de))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Re.length>0?De.map(J=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...J}),Ae(J.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.deal_id?J.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:J.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:J.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.contact?.first_name&&J.contact?.last_name?`${J.contact.first_name} ${J.contact.last_name}`:J.contact?.first_name||J.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ee(J.stage)}`,children:ee(J.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",J.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.assigned_deals?.first_name&&J.assigned_deals?.last_name?`${J.assigned_deals.first_name} ${J.assigned_deals.last_name}`:J.assigned_deals?.first_name||J.assigned_deals?.last_name||"--"})]},J.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:E,currentPage:w,onPrev:tt,onNext:Je,onPageSizeChange:J=>{k(J),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(zFe,{onClose:Be,formData:Se,setFormData:Oe,isEditing:P,onSubmit:Ie,isSubmitting:_||z,accounts:V,contacts:q,users:oe,currentAccount:ke,currentContact:Ge}),c&&n.jsx(XZ,{relatedActs:R,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:te,onDelete:We,onStatusUpdate:Ue}),T&&n.jsx($Fe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:gt,onCancel:ve,loading:z})]})}function $Fe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function RFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function zFe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=b=>{if(b.preventDefault(),p(!0),!t.name?.trim()){W.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){W.error("Amount must be a number greater than 0.");return}if(!t.account_id){W.error("Please select an account.");return}if(!t.primary_contact_id){W.error("Please select a primary contact.");return}if(!t.assigned_to){W.error("Please assign this deal to a user.");return}r?.(t)},v=b=>{b.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const b=String(t.account_id||"").trim(),C=Array.isArray(l)?l:[];return b?C.filter(w=>{const E=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return E?String(E)===b:!1}):C},[l,t.account_id]);return h.useEffect(()=>{const b=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!b)return;N.some(S=>String(S?.id)===C)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(AA,{label:"Deal Name",name:"name",value:t.name,onChange:b=>a({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(TA,{label:"Account",value:t.account_id||"",onChange:b=>a({...t,account_id:b}),items:o||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(TA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>a({...t,primary_contact_id:b}),items:N||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(n8,{label:"Stage",name:"stage",value:t.stage,onChange:b=>a({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(AA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>a({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(n8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>a({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(AA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>a({...t,close_date:b.target.value}),disabled:i}),n.jsx(TA,{label:"Assign To",value:t.assigned_to||"",onChange:b=>a({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(FFe,{label:"Description",name:"description",value:t.description,onChange:b=>a({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function AA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function n8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function TA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(UFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function UFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function FFe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const EA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],kA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},$i=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},LA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",BFe=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},HFe=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},fb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ng=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",GFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},PA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},a8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},s8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},vw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},WFe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=vw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=vw(t);return a||null},qFe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},VFe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function QFe(){const e=wt(),t=Jt(),{user:a}=tn(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[E,k]=h.useState(!1),[_,A]=h.useState(!1),[T,$]=h.useState(!1),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState(!1),[V,X]=h.useState(null),[q,ne]=h.useState(kA),[oe,K]=h.useState(""),[R,ye]=h.useState("Filter by Status"),[pe,Ne]=h.useState(null),Se=h.useCallback(async()=>{if(w)try{Q(!0);const I=(await ae.get("/company/invoice-info"))?.data;Fj({quote:w,companyInfo:I,currencySymbol:s,title:"Invoice"})}catch(U){const I=U?.response?.data?.detail||U?.message||"Failed to print invoice.";W.error(I)}finally{Q(!1)}},[w,s]),[Oe,ke]=h.useState(1),[he,Ge]=h.useState(10),[Ce,xe]=h.useState("Overview"),[ee,Ee]=h.useState("Draft"),[Ae,Re]=h.useState([]),[et,De]=h.useState(null),{comments:tt,addComment:Je,refresh:H}=Ea({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&H()},[w?.id,H]),h.useEffect(()=>{const I=t.state?.quoteID;if(I){De(I),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(et&&r.length>0&&!o){const U=r.find(I=>I.id===et);U?S(U):W.error("Quote not found."),De(null)}},[et,p,o]),h.useEffect(()=>{let U=!0;return(async()=>{const me=WFe();if(me&&U){C(me);return}try{const Le=await ae.get("/auth/me"),$e=vw(Le?.data);if($e&&U){C($e);return}}catch{}try{const Le=await ae.get("/users/me"),$e=vw(Le?.data);if($e&&U){C($e);return}}catch{}U&&C(null)})(),()=>{U=!1}},[]);const be=h.useCallback(U=>U&&u.find(me=>String(me.id)===String(U))?.name||"",[u]),le=h.useCallback(U=>{if(!U)return"";const I=p.find(me=>String(me.id)===String(U));return I?`${I.first_name} ${I.last_name}`.trim():""},[p]),Z=h.useCallback(U=>{if(!U)return"--";const I=c.find(me=>String(me.id)===String(U));return I?.deal_name||I?.name||`Deal #${a8(U)}`},[c]),_e=h.useCallback(U=>{const I=c.find($e=>String($e.id)===String(U)),me=qFe(I);let Le=VFe(I);if(!Le&&me){const $e=p.filter(Ve=>String(Ve.account_id||"")===String(me));if($e.length>0){const Ve=[...$e].sort((Ye,At)=>{const Ct=`${Ye.first_name||""} ${Ye.last_name||""}`.trim().toLowerCase(),Kt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Kt)});Le=String(Ve[0].id)}}if(me&&Le){const $e=p.find(Ve=>String(Ve.id)===String(Le));$e?.account_id&&String($e.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),te=h.useCallback(U=>{if(!U)return"--";if(U.deal?.deal_name)return U.deal.deal_name;if(U.deal?.name)return U.deal.name;const I=U.deal_id||U.deal?.id;return I?Z(I):"--"},[Z]),Ue=h.useCallback(U=>{if(!U)return"--";if(U.account?.name)return U.account.name;let I=U.account_id||U.account?.id;if(!I){const me=U.deal_id||U.deal?.id;me&&(I=_e(me).accountId)}return I?be(I)||`Account #${I}`:"--"},[_e,be]),Ie=h.useCallback(U=>{if(!U)return"--";if(U.contact?.first_name||U.contact?.last_name)return`${U.contact?.first_name||""} ${U.contact?.last_name||""}`.trim()||"--";let I=U.contact_id||U.contact?.id;if(!I){const Le=U.deal_id||U.deal?.id;Le&&(I=_e(Le).contactId)}return(I?le(I):"")||(I?`Contact #${I}`:"--")},[_e,le]),We=h.useCallback(async(U=null)=>{l(!0);try{const I=await ae.get("/quotes/admin/fetch-all"),Le=[...Array.isArray(I.data)?I.data:[]].sort(($e,Ve)=>{const Ye=$e?.created_at||$e?.updated_at||0,At=Ve?.created_at||Ve?.updated_at||0;return new Date(At)-new Date(Ye)});if(i(Le),U){const $e=Le.find(Ve=>Ve.id===U);S($e||null)}}catch(I){console.error(I),i([]),I.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),gt=h.useCallback(async()=>{try{const U=await ae.get("/deals/admin/fetch-all");d(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load deals (permission denied).")}},[]),ve=h.useCallback(async()=>{try{const U=await ae.get("/accounts/admin/fetch-all");f(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const U=await ae.get("/contacts/admin/fetch-all");x(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},[]),nt=h.useCallback(async()=>{try{const U=await ae.get("/users/all");N(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&W.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{We(),gt(),ve(),Be(),nt()},[We,gt,ve,Be,nt]);const Te=h.useMemo(()=>{const U=oe.trim().toLowerCase(),I=R.trim();return r.filter(me=>{const Le=te(me),$e=Ue(me),Ve=Ie(me),Ye=PA(me.presented_date,me.validity_days),At=[me.quote_id,Le,$e,Ve,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?Ng(me.presented_date):"",Ye?Ng(Ye):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,fb(me.created_at),fb(me.updated_at)],Ct=U===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(U)),Kt=I==="Filter by Status"||$i(me.status)===I;return Ct&&Kt})},[r,oe,R,te,Ue,Ie]),Qe=Math.max(1,Math.ceil(Te.length/he)||1);h.useEffect(()=>ke(1),[oe,R]),h.useEffect(()=>{ke(U=>{const I=Math.max(1,Math.ceil(Te.length/he)||1);return U>I?I:U})},[Te.length,he]);const ct=h.useMemo(()=>{const U=(Oe-1)*he;return Te.slice(U,U+he)},[Te,Oe,he]),ht=()=>ke(U=>Math.max(U-1,1)),je=()=>ke(U=>Math.min(U+1,Qe)),Ze=U=>{S(U),xe("Overview"),Ee($i(U?.status)||"Draft")},ce=()=>{S(null),xe("Overview")},J=U=>{U.target.id==="quoteModalBackdrop"&&!P&&ce()},de=h.useCallback(()=>{k(!1),A(!1),X(null),ne(kA),$(!1)},[]),D=U=>{U.target.id==="modalBackdrop"&&!T&&!P&&de()},B=U=>{const{name:I,value:me}=U.target;if(I==="deal_id"){const{accountId:Le,contactId:$e}=_e(me);ne(Ve=>({...Ve,deal_id:me,account_id:Le,contact_id:$e}));return}ne(Le=>({...Le,[I]:me}))},ie=()=>{ne(kA),A(!1),X(null),k(!0)},ue=U=>{if(!U)return;S(null);const I=U.deal?.id?String(U.deal.id):U.deal_id?String(U.deal_id):"",me=I?_e(I):{accountId:"",contactId:""},Le=U.account?.id?String(U.account.id):U.account_id?String(U.account_id):me.accountId,$e=U.contact?.id?String(U.contact.id):U.contact_id?String(U.contact_id):me.contactId,Ve=U.assigned_user?.id?String(U.assigned_user.id):U.assigned_to?String(U.assigned_to):"";ne({deal_id:I,account_id:Le||"",contact_id:$e||"",total_amount:U.total_amount?.toString()||"",presented_date:GFe(U.presented_date),validity_days:U.validity_days!==null&&U.validity_days!==void 0?String(U.validity_days):"",status:$i(U.status)||"Draft",assigned_to:Ve,notes:U.notes||"",subtotal:parseFloat(U.subtotal)||0,tax_rate:parseFloat(U.tax_rate)||0,tax_amount:parseFloat(U.tax_amount)||0,discount_type:U.discount_type||"",discount_value:parseFloat(U.discount_value)||0,discount_amount:parseFloat(U.discount_amount)||0,currency:U.currency||"PHP",items:Array.isArray(U.items)?U.items.map(Ye=>({id:Ye.id,item_type:Ye.item_type||"Product",name:Ye.name||"",description:Ye.description||"",sku:Ye.sku||"",variant:Ye.variant||"",unit:Ye.unit||"pcs",quantity:parseFloat(Ye.quantity)||1,unit_price:parseFloat(Ye.unit_price)||0,discount_percent:parseFloat(Ye.discount_percent)||0,discount_amount:parseFloat(Ye.discount_amount)||0,line_total:parseFloat(Ye.line_total)||0,sort_order:Ye.sort_order||0})):[]}),A(!0),X(U.id),k(!0)},se=U=>{if(U.target.checked){const I=ct.map(me=>me.id);Re(I)}else Re([])},Pe=U=>{Re(I=>I.includes(U)?I.filter(me=>me!==U):[...I,U])},ge=U=>{if(!U)return;const I=U.quote_id||"this quote";F({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:I}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id,name:I}})},fe=async()=>{Ae.length!==0&&F({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ae.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ae.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ae}})},[Fe,Xe]=h.useState(!1),pt=U=>{if(U.preventDefault(),Xe(!0),!b){W.error("Unable to determine current user. Please log in again.");return}if(!q.deal_id){W.error("Deal is required.");return}if(!q.assigned_to){W.error("Assigned To is required.");return}const me=_e(q.deal_id),Le=q.items.map((Ct,Kt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Kt})),$e={deal_id:Number(q.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(q.subtotal)||0,tax_rate:parseFloat(q.tax_rate)||0,tax_amount:parseFloat(q.tax_amount)||0,discount_type:q.discount_type||null,discount_value:parseFloat(q.discount_value)||0,discount_amount:parseFloat(q.discount_amount)||0,total_amount:parseFloat(q.total_amount)||0,currency:q.currency||"PHP",presented_date:q.presented_date||null,validity_days:q.validity_days===""?null:Number(q.validity_days),status:q.status||"Draft",assigned_to:q.assigned_to?Number(q.assigned_to):null,notes:q.notes?.trim()||null,items:Le},Ve=_&&V?"update":"create",Ye=Z(q.deal_id),At=Ve==="create"?{...$e,created_by_id:Number(b)}:$e;F({title:Ve==="create"?"Confirm New Quote":"Confirm Update",message:Ve==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}),confirmLabel:Ve==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:At,targetId:V||null,name:Ye}})},Nt=async()=>{if(!z?.action){F(null);return}const{action:U}=z,{type:I,payload:me,targetId:Le,name:$e}=U;M(!0);try{if(I==="create")$(!0),await ae.post("/quotes/admin",me),W.success("Quote created successfully."),de(),await We();else if(I==="update"){if(!Le)throw new Error("Missing quote identifier for update.");$(!0),await ae.put(`/quotes/admin/${Le}`,me),W.success("Quote updated successfully."),de(),await We(),w?.id===Le&&S(null)}else if(I==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Ve=w?.id;Ne(Le),await ae.delete(`/quotes/admin/${Le}`),W.success(`Quote "${$e}" deleted successfully.`),await We(Ve&&Ve!==Le?Ve:null),Ve===Le&&S(null)}else I==="bulk-delete"&&(await ae.post("/quotes/admin/bulk-delete",{quote_ids:Ae}),W.success(`Successfully deleted ${Ae.length} quotes`),Re([]),await We())}catch(Ve){console.error(Ve);const Ye=I==="create"?"Failed to create quote. Please review the details and try again.":I==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";W.error(Ye),(I==="create"||I==="update")&&$(!1),I==="delete"&&Ne(null)}finally{(I==="create"||I==="update")&&$(!1),I==="delete"&&Ne(null),M(!1),F(null)}},St=()=>{P||F(null)},Ht=h.useCallback((U,I)=>{const me=U?.deal_id??U?.deal?.id??"",Le=me?Number(me):null,$e=Le?_e(String(Le)):{accountId:"",contactId:""},Ve=U?.account_id??U?.account?.id??$e.accountId??null,Ye=U?.contact_id??U?.contact?.id??$e.contactId??null,At=U?.total_amount??0,Ct=U?.assigned_to??U?.assigned_user?.id??null;return{deal_id:Le,account_id:Ve!=null&&String(Ve).trim()!==""?Number(Ve):null,contact_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,total_amount:Number(At),presented_date:U?.presented_date||null,validity_days:U?.validity_days===""||U?.validity_days===void 0||U?.validity_days===null?null:Number(U.validity_days),status:I,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:U?.notes?.trim()||null}},[_e]),on=h.useCallback(async()=>{if(!w?.id)return;const U=$i(ee),I=[U,U.toLowerCase()],me=async Le=>ae.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const $e of I)try{await me($e),Le=!0;break}catch(Ve){if(Ve?.response?.status===422)continue;throw Ve}if(!Le){const $e=Ht(w,U);if(!$e.deal_id){W.error("Cannot update status: missing deal_id on selected quote.");return}if(!$e.total_amount||$e.total_amount<=0){W.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ae.put(`/quotes/admin/${w.id}`,$e)}W.success(`Quote status updated to ${U}`),S(null),xe("Overview"),await We()}catch(Le){console.error(Le);const $e=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";W.error($e)}},[w,ee,We,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...EA.map(U=>({label:U.label,value:U.value}))],re=z?.action?.type==="delete"?z.action.targetId:null,ot=w&&(pe===w.id||re===w.id),Rt=w&&pe===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:J,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:U=>U.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:te(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${HFe(w.status)}`,children:LA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Se,disabled:G||T||P,children:[n.jsx(hn,{className:"mr-2"}),G?"Preparing...":"Print Invoice"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||z?.action?.type==="update"&&z.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ge(w),disabled:!!ot,children:Rt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(U=>n.jsx("button",{onClick:()=>xe(U),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===U?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:U},U))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:s8(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:te(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:Ie(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:Ng(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:Ng(PA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:LA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:fb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:fb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(hd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Ta,{comments:tt,onAddComment:Je})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ee||$i(w.status)||"Draft",onChange:U=>Ee(U.target.value),children:EA.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))}),n.jsx("button",{onClick:on,disabled:$i(ee)===$i(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${$i(ee)===$i(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Yt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ie(),Xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:oe,onChange:U=>K(U.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:R,onChange:U=>ye(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ct.length>0&&Ae.length===ct.length,onChange:se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ae.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ae.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Te.length>0?ct.map(U=>{const I=PA(U.presented_date,U.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ze(U),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ae.includes(U.id),onChange:()=>Pe(U.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:s8(U.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:te(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ue(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ie(U)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:U.total_amount?`${s}${Number(U.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${BFe(U.status)}`,children:LA(U.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:U.assigned_user?`${U.assigned_user.first_name} ${U.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:Ng(I)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},U.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Te.length,pageSize:he,currentPage:Oe,onPrev:ht,onNext:je,onPageSizeChange:U=>{Ge(U),ke(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=E?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:U=>U.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(o8,{label:"Deal",name:"deal_id",value:q.deal_id,onChange:U=>{const{accountId:I,contactId:me}=_e(U);ne(Le=>({...Le,deal_id:U,account_id:I,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:U=>`${a8(U?.deal_id??"")} ${U?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Fe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(i8,{label:"Account",value:be(q.account_id)||(q.account_id?`Account #${q.account_id}`:""),disabled:!0}),n.jsx(i8,{label:"Contact",value:le(q.contact_id)||(q.contact_id?`Contact #${q.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(hd,{items:q.items,onChange:U=>ne(I=>({...I,items:U})),currencySymbol:s,readOnly:T,taxRate:q.tax_rate,discountType:q.discount_type,discountValue:q.discount_value,onTotalsChange:U=>{ne(I=>({...I,subtotal:U.subtotal,discount_amount:U.discount_amount,tax_amount:U.tax_amount,total_amount:U.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:q.discount_type||"",onChange:U=>ne(I=>({...I,discount_type:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",q.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:q.discount_value||"",onChange:U=>ne(I=>({...I,discount_value:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:q.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!q.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:q.tax_rate||"",onChange:U=>ne(I=>({...I,tax_rate:U.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(q.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(r8,{label:"Presented Date",name:"presented_date",type:"date",value:q.presented_date,onChange:B,disabled:T}),n.jsx(r8,{label:"Validity Days",name:"validity_days",type:"number",value:q.validity_days,onChange:B,placeholder:"30",disabled:T}),n.jsx(o8,{label:"Assigned To",value:q.assigned_to||"",onChange:U=>ne(I=>({...I,assigned_to:U})),items:Array.isArray(v)?v:[],getLabel:U=>{const I=`${U?.first_name??""} ${U?.last_name??""}`.trim();return I?U?.role?`${I} (${U.role})`:I:U?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Fe,disabled:T}),n.jsx(YFe,{label:"Status",name:"status",value:q.status,onChange:B,options:EA,required:!0,disabled:T}),n.jsx(XFe,{label:"Notes",name:"notes",value:q.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=z?n.jsx(ZFe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Yt,Me,vt]})}function r8({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function i8({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function YFe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function o8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(KFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function KFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function XFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ZFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function JFe(){const{userRole:e}=Ys();return n.jsx(Uj,{currentUserRole:e,currentUserId:null})}function e7e(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ae.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,$=[_,T,k.action,k.entity_type,A,k.description],z=w===""||$.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),F=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&F}).sort((k,_)=>{const A=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-A})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){zx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),E=[w.join(","),...S.map(T=>T.map($=>`"${String($).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),A=document.createElement("a");A.href=_,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(_)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Rx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ts,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Yl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const t7e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],n7e=e=>e?String(e).toUpperCase():"",lf=e=>{const t=n7e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},DA=e=>{const t=lf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},l8=e=>{switch(lf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},c8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function a7e(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[_,A]=h.useState("PLANNED"),[T,$]=h.useState(!1),[z,F]=h.useState(!1),[P,M]=h.useState(null),{comments:G,addComment:Q,refresh:V}=Ea({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&V()},[a?.id,V]),Us();const X=wt(),q=Jt(),ne=Te=>{if(!Te)return"";const Qe=String(Te).split("-");return Qe.length===3?`${Qe[0]}-${Qe[2]}`:String(Te)},K={subject:"",call_time:(()=>{const Te=new Date,Qe=Te.getFullYear(),ct=String(Te.getMonth()+1).padStart(2,"0"),ht=String(Te.getDate()).padStart(2,"0");return`${Qe}-${ct}-${ht}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[R,ye]=h.useState(K);h.useEffect(()=>{const Te=q.state,Qe=Te?.callID;if(Qe&&!Te?.openCallModal){M(Qe),X(q.pathname,{replace:!0,state:{}});return}!Te?.openCallModal||!Te?.initialCallData||Te.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||Te.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),ye(ct=>({...ct,...Te.initialCallData,relatedTo1:Te.initialCallData.relatedTo1?String(Te.initialCallData.relatedTo1):"",relatedTo2:Te.initialCallData.relatedTo2?String(Te.initialCallData.relatedTo2):""})),X(q.pathname,{replace:!0,state:{}}))},[q.state,o]),h.useEffect(()=>{if(P&&u.length>0&&!z){const Te=u.find(Qe=>Qe.id===P);Te?s(Te):W.error("Call not found."),M(null)}},[P,u,z]);const pe=async()=>{try{F(!0);const Te=await ae.get("/calls/admin/fetch-all"),ct=[...Array.isArray(Te.data)?Te.data:[]].sort((ht,je)=>{const Ze=ht?.created_at?new Date(ht.created_at):0;return(je?.created_at?new Date(je.created_at):0)-Ze});f(ct)}catch(Te){console.error("Error fetching calls:",Te),W.error("Failed to load calls")}finally{F(!1)}},Ne=async()=>{try{const Te=await ae.get("/users/all");x(Te.data)}catch(Te){console.error("Error fetching users: ",Te)}};h.useEffect(()=>{Ne(),pe()},[]);const Se=[],Oe="",ke="Filter by Status",he="Filter by Users",[Ge,Ce]=h.useState(1),[xe,ee]=h.useState(10),Ee=u,Ae=u,Re=u.length,et=u.filter(Te=>lf(Te.status)==="PLANNED").length,De=u.filter(Te=>lf(Te.status)==="HELD").length,tt=u.filter(Te=>lf(Te.status)==="NOT_HELD").length,Je=[{title:"Total",value:Re,icon:Rs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:et,icon:qs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:De,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:tt,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}],[H,be]=h.useState("Overview"),le=Te=>{const{name:Qe,value:ct}=Te.target;ye(ht=>{const je={...ht,[Qe]:ct};return Qe==="relatedType1"&&(je.relatedTo1="",ct==="Lead"?(je.relatedType2=null,je.relatedTo2=null,d([])):ct==="Account"&&(je.relatedType2="Contact")),Qe==="relatedType2"&&(je.relatedTo2=""),je})};h.useEffect(()=>{const Te=async()=>{try{l([]);let Qe;R.relatedType1==="Lead"?Qe=await ae.get("/leads/admin/getLeads"):R.relatedType1==="Account"&&(Qe=await ae.get("/accounts/admin/fetch-all"));let ct=[];if(Qe&&Array.isArray(Qe.data)?ct=Qe.data:ct=[],v&&R.relatedTo1)try{let ht;R.relatedType1==="Lead"?ht=await ae.get(`/leads/get/${R.relatedTo1}`):R.relatedType1==="Account"&&(ht=await ae.get(`/accounts/get/${R.relatedTo1}`)),ht&&ht.data&&(ct.some(Ze=>String(Ze.id)===String(R.relatedTo1))||(ct=[ht.data,...ct]))}catch(ht){console.error("Error fetching specific related item:",ht)}l(ct)}catch(Qe){console.error("Error fetching data:",Qe),l([])}};R.relatedType1&&Te()},[R.relatedType1,v,R.relatedTo1]),h.useEffect(()=>{const Te=async()=>{try{d([]);let Qe;if(R.relatedType1==="Account"&&R.relatedTo1)R.relatedType2==="Contact"?Qe=await ae.get(`/contacts/from-acc/${R.relatedTo1}`):R.relatedType2==="Deal"?Qe=await ae.get(`/deals/from-acc/${R.relatedTo1}`):R.relatedType2==="Quote"&&(Qe=await ae.get(`/quotes/from-acc/${R.relatedTo1}`));else{d([]);return}Qe&&Array.isArray(Qe.data)?d(Qe.data):d([])}catch(Qe){console.error("Error fetching data:",Qe),d([])}};R.relatedType2&&Te()},[R.relatedType2,R.relatedTo1,R.relatedType1]);const[Z,_e]=h.useState(!1),te=Te=>{Te.preventDefault(),_e(!0);const Qe=R.subject;if(!Qe||Qe.trim()===""){W.error("Subject is required.");return}if(!R.relatedTo1){W.error(`Please select a ${R.relatedType1||"Lead/Account"}.`);return}if(!R.assigned_to){W.error("Subject is required.");return}const ht={...R,duration_minutes:R.duration_minutes?parseInt(R.duration_minutes,10):null,relatedTo1:R.relatedTo1?parseInt(R.relatedTo1,10):null,relatedTo2:R.relatedType1==="Lead"?null:R.relatedTo2?parseInt(R.relatedTo2,10):null,relatedType2:R.relatedType1==="Lead"?null:R.relatedType2,assigned_to:R.assigned_to?parseInt(R.assigned_to,10):null},je=v&&b?"update":"create",Ze=(R.subject||"").trim()||"Untitled Call";i({title:je==="create"?"Confirm New Call":"Confirm Update",message:je==="create"?`Create "${Ze}"?`:`Save changes to "${Ze}"?`,confirmLabel:je==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:je,payload:ht,targetId:b||null,name:Ze}})},Ue=Te=>s(Te),Ie=()=>{t(!1),N(!1),C(null)},We=async()=>{if(!r?.action){i(null);return}const{action:Te}=r,{type:Qe,payload:ct,targetId:ht,name:je}=Te;k(!0);try{if(Qe==="create")S(!0),await ae.post("/calls/create",ct),W.success(`Call "${je}" created successfully.`),t(!1),ye(K),N(!1),C(null),await pe();else if(Qe==="update"){if(!ht)throw new Error("Missing call identifier for update.");S(!0),await ae.put(`/calls/${ht}`,ct),W.success(`Call "${je}" updated successfully.`),t(!1),ye(K),N(!1),C(null),await pe()}else if(Qe==="delete"){if(!ht)throw new Error("Missing call identifier for deletion.");await ae.delete(`/calls/${ht}`),W.success(`Call "${je}" deleted successfully.`),a?.id===ht&&s(null),await pe()}}catch(Ze){const ce=Qe==="create"?"Failed to create call. Please review the details and try again.":Qe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",J=Ze?.response?.data?.detail||ce;W.error(J)}finally{(Qe==="create"||Qe==="update")&&S(!1),k(!1),i(null)}},gt=()=>{E||i(null)},ve=async()=>{if(a?.id)try{$(!0),await ae.put(`/calls/${a.id}`,{status:_}),W.success(`Status updated to ${DA(_)}`),f(Te=>Array.isArray(Te)?Te.map(Qe=>Qe.id===a.id?{...Qe,status:_}:Qe):Te),s(null)}catch(Te){const Qe=Te.response?.data?.detail||"Failed to update status.";W.error(Qe)}finally{$(!1)}};h.useEffect(()=>{a&&A(lf(a.status))},[a]);const Be=a?n.jsxs("div",{id:"callModalBackdrop",onClick:Te=>Te.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${l8(a.status)}`,children:DA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const Te=Ze=>{if(!Ze)return"";const ce=new Date(Ze),J=ce.getFullYear(),de=String(ce.getMonth()+1).padStart(2,"0"),D=String(ce.getDate()).padStart(2,"0"),B=String(ce.getHours()).padStart(2,"0"),ie=String(ce.getMinutes()).padStart(2,"0");return`${J}-${de}-${D}T${B}:${ie}`},Qe=a.lead?"Lead":a.account?"Account":"Lead",ct=a.lead?a.lead.id:a.account?a.account.id:null,ht=Qe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",je=Qe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;ye({subject:a.subject||"",call_time:Te(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:Qe,relatedType2:ht,relatedTo1:ct?String(ct):"",relatedTo2:je?String(je):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const Te=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${Te}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:Te}})},children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Te=>n.jsx("button",{onClick:()=>be(Te),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${H===Te?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Te},Te))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[H==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(mo,{label:"Call Time",value:c8(a.call_time)}),n.jsx(mo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(mo,{label:"Direction",value:a.direction||"--"}),n.jsx(mo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(mo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(mo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(mo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(mo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(mo,{label:"Quote",value:ne(a.quote.quote_id)}),n.jsx(mo,{label:"Created At",value:c8(a.created_at)})]})}),H==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Ta,{comments:G,onAddComment:Q})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:Te=>A(Te.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ve,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,nt=e?n.jsx("div",{id:"modalBackdrop",onClick:Te=>Te.target.id==="modalBackdrop"&&Ie(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Ie(),_e(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:te,noValidate:!0,children:[n.jsx(r7e,{label:"Subject",className:"md:col-span-2",name:"subject",value:R.subject,onChange:le,isSubmitted:Z,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:le,value:R.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(OA,{items:Array.isArray(o)?o:[],value:R.relatedTo1??"",placeholder:`Search ${R.relatedType1||"here"}...`,getLabel:Te=>R.relatedType1==="Lead"?Te.title:Te.name??"",onChange:Te=>ye(Qe=>({...Qe,relatedTo1:Te})),required:!0,isSubmitted:Z,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:le,value:R.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:R.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(OA,{disabled:R.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:R.relatedTo2??"",placeholder:R.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${R.relatedType2||"Contact"}...`:`No ${R.relatedType2||""} data found`,getLabel:Te=>R.relatedType2==="Contact"?`${Te.first_name??""} ${Te.last_name??""}`.trim():R.relatedType2==="Quote"?ne(Te.quote_id)??"":Te.name??"",onChange:Te=>ye(Qe=>({...Qe,relatedTo2:Te}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:R.call_time,onChange:le,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:R.duration_minutes,onChange:le,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(OA,{items:Array.isArray(p)?p:[],value:R.assigned_to??"",placeholder:"Search an account...",getLabel:Te=>`${Te.first_name} ${Te.last_name}`,onChange:Te=>ye(Qe=>({...Qe,assigned_to:Te})),required:!0,isSubmitted:Z})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:le,value:R.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:le,value:R.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(i7e,{className:"col-span-2",label:"Notes",value:R.notes,onChange:le,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ie(),_e(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Rs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ye(K),N(!1),C(null),t(!0),_e(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(Te=>n.jsx(s7e,{...Te},Te.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Oe})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:ke,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),t7e.map(Te=>n.jsx("option",{value:Te.value,children:Te.label},Te.value))]}),n.jsxs("select",{defaultValue:he,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Se.map(Te=>n.jsx("option",{value:Te.name,children:Te.name},Te.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:z?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):Ae.length>0?Ae.map(Te=>n.jsxs("tr",{onClick:()=>Ue(Te),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:Te.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[Te.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.lead.title}),Te.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.account.name}),Te.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Te.contact.first_name," ",Te.contact.last_name]}),Te.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.deal.name}),Te.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne(Te.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Te.call_time?new Date(Te.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Te?.call_assign_to?`${Te.call_assign_to.first_name} ${Te.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l8(Te.status)}`,children:DA(Te.status)})})]},Te.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:Ee.length,pageSize:xe,currentPage:Ge,onPrev:()=>Ce(Te=>Math.max(1,Te-1)),onNext:()=>Ce(Te=>Te+1),onPageSizeChange:Te=>{ee(Te),Ce(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),Be,nt,r&&n.jsx(o7e,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:We,onCancel:gt,loading:E})]})}function s7e({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function r7e({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function i7e(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function mo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function o7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function OA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const d8=["Not started","In progress","Deferred","Completed"],u8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},ZZ=e=>e&&(u8[e]||u8[String(e).toUpperCase()])||"Not started",l7e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},m8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},c7e=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),ZZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},d7e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=G=>{if(!G)return"";const Q=String(G).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(G)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",E="",k="",_="Lead",A="",T="",$="";const z=c(),F=v(),P=l(),M=x();if(z){w="Account",_="Account",A=F,S=String(z);const G=d(),Q=u(),V=N(),X=b(),q=f(),ne=C();G?(E="Contact",T="Contact",$=V,k=String(G)):Q?(T="Deal",E="Deal",$=X,k=String(Q)):q&&(T="Quote",E="Quote",$=ne,k=String(q))}else P?(_="Lead",A=M,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:ZZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:A,relatedType2Text:T,relatedTo2Text:$,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:E,relatedTo2:k}};function u7e(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=tn(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[_,A]=h.useState(1),[T,$]=h.useState(10),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState([]),V=wt(),X=Jt(),[q,ne]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,K]=h.useState(null);h.useEffect(()=>{const H=X.state?.openTaskModal,be=X.state?.initialTaskData,le=X.state?.taskID;H?(i(!0),be&&ne(Z=>({...Z,...be})),V(X.pathname,{replace:!0,state:{}})):le&&(K(le),V(X.pathname,{replace:!0,state:{}}))},[X,V]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const H=u.find(be=>be.id===oe);H?Ne(H,!0):W.error("Task not found."),K(null)}},[oe,u,p]);const R=async()=>{try{const H=await ae.get("/users/all");k(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),W.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const H=await ae.get("/tasks/all"),le=(Array.isArray(H.data)?H.data:[]).map(d7e);le.sort((Z,_e)=>{const te=Z.createdAt?new Date(Z.createdAt):0;return(_e.createdAt?new Date(_e.createdAt):0)-te}),f(le),a==="list"&&A(1)}catch(H){console.error("Failed to load tasks:",H),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(R(),ye())},[t,e]);const pe=()=>{l(null),ne({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ne=(H=null,be=!1)=>{l(H),d(be),H?ne({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:l7e(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):pe(),i(!0)},Se=()=>{i(!1),l(null),d(!1),pe()},Oe=async H=>{const be=c7e(H);try{o&&!c?(await ae.put(`/tasks/${o.id}`,be),W.success("Task updated successfully.")):(await ae.post("/tasks/create",be),W.success("Task created successfully.")),i(!1),await ye()}catch(le){console.error("Failed to save task:",le);const Z=le.response?.data?.detail||"Failed to save task.";W.error(Z)}},ke=H=>{H&&F({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},he=()=>{if(Ae.every(H=>G.includes(H.id)))Q(G.filter(H=>!Ae.map(be=>be.id).includes(H)));else{const H=Ae.map(be=>be.id);Q([...new Set([...G,...H])])}},Ge=H=>{Q(be=>be.includes(H)?be.filter(le=>le!==H):[...be,H])},Ce=async()=>{G.length!==0&&F({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:G}})},xe=async()=>{if(!z?.action){F(null);return}const{action:H}=z;M(!0);try{H.type==="delete"?(await ae.delete(`/tasks/${H.targetId}`),W.success("Task deleted successfully."),await ye()):H.type==="bulk-delete"&&(await ae.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),W.success(`Successfully deleted ${H.task_ids.length} tasks`),Q([]),await ye())}catch(be){console.error("Task action failed:",be),W.error("Failed to delete task.")}finally{M(!1),F(null)}},ee=()=>{P||F(null)},Ee=h.useMemo(()=>{const H=v.trim().toLowerCase();return[...u].sort((le,Z)=>{const _e=le.createdAt?new Date(le.createdAt):0;return(Z.createdAt?new Date(Z.createdAt):0)-_e}).filter(le=>{const Z=H===""||le.title?.toLowerCase().includes(H)||le.description?.toLowerCase().includes(H)||le.assignedToName?.toLowerCase().includes(H)||le.createdBy?.toLowerCase().includes(H),_e=b==="Filter by Status"||le.status===b,te=w==="Filter by Priority"||le.priority===w;return Z&&_e&&te})},[u,v,b,w]);h.useEffect(()=>{A(1)},[v,b,w,a,T]),h.useEffect(()=>{if(a==="list"){const H=Ee.length===0?1:Math.ceil(Ee.length/T);_>H&&A(H)}},[Ee.length,_,a,T]);const Ae=h.useMemo(()=>{if(a==="board")return Ee;const H=(_-1)*T;return Ee.slice(H,H+T)},[Ee,_,a,T]),Re=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:qs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:qi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<H&&be.status!=="Completed").length,icon:Wf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),et=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",De=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},tt=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Je=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(qi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Re.map(H=>n.jsx(m7e,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:H=>C(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),d8.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ee.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:d8.map(H=>{const be=Ae.filter(le=>le.status===H);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:H}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:be.length})]}),n.jsx("div",{className:`space-y-3 ${be.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:be.length>0?be.map(le=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(le)}`,onClick:()=>Ne(le,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:le.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",le.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",le.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:et(le)?"text-red-600":"text-gray-600",children:le.dateAssigned?m8(le.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),Ne(le)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ga,{})}),n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ke(le)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},le.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},H)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ae.length>0&&Ae.every(H=>G.includes(H.id)),onChange:he})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:G.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected tasks`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ae.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.includes(H.id),onChange:()=>Ge(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ne(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${tt(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Je(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ne(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${et(H)?"text-red-600 font-medium":""}`,onClick:()=>Ne(H,!0),children:H.dateAssigned?m8(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ee.length,pageSize:T,currentPage:Ee.length===0?0:_,onPrev:()=>A(H=>Math.max(H-1,1)),onNext:()=>A(H=>Math.min(H+1,Math.max(1,Math.ceil(Ee.length/T)||1))),onPageSizeChange:H=>{$(H),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Se,onSave:Oe,onEdit:()=>d(!1),setFormData:ne,formData:q,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:ke}),z&&n.jsx(f7e,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:xe,onCancel:ee,loading:P})]})}function m7e({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function f7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const JZ=e=>e?e.toUpperCase():"",hb=e=>{const t=JZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},h7e=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},g7e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},p7e=e=>{const t=JZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},MA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},x7e=()=>{const e=wt(),t=Jt(),[a]=Us(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,E]=h.useState(1),[k,_]=h.useState(10),[A,T]=h.useState(MA),[$,z]=h.useState(!1),[F,P]=h.useState(null),[M,G]=h.useState(!1),[Q,V]=h.useState(null),[X,q]=h.useState(!1),[ne,oe]=h.useState(null);h.useEffect(()=>{const ee=t.state?.openMeetingModal,Ee=t.state?.initialMeetingData?.relatedTo||a.get("id"),Ae=t.state?.meetingID;ee||Ee?(b(!0),t.state?.initialMeetingData&&T(Re=>({...Re,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ae&&(oe(Ae),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(ne&&i.length>0&&!l){const ee=i.find(Ee=>Ee.id===ne);ee?w(ee):W.error("Meeting not found."),oe(null)}},[ne,i,l]);const K=async()=>{if(s&&r){const ee=sessionStorage.getItem("meetingDetailData");if(ee)try{const Ee=JSON.parse(ee);if(Ee.id===parseInt(s)){w(Ee),sessionStorage.removeItem("meetingDetailData");return}}catch(Ee){console.error(Ee)}}c(!0);try{const ee=await ae.get("/meetings/admin/fetch-all"),Ae=[...Array.isArray(ee.data)?ee.data:[]].sort((Re,et)=>{const De=Re?.createdAt?new Date(Re.createdAt).getTime():0;return(et?.createdAt?new Date(et.createdAt).getTime():0)-De});if(o(Ae),s&&!C){const Re=Ae.find(et=>et.id===parseInt(s));Re&&w(Re)}}catch{W.error("Failed to load meetings.")}finally{c(!1)}},R=async()=>{try{const ee=await ae.get("/users/all");u(Array.isArray(ee.data)?ee.data:[])}catch(ee){console.error(ee)}};h.useEffect(()=>{K(),R()},[]);const ye=ee=>p(ee.target.value),pe=h.useMemo(()=>{const ee=f.trim().toLowerCase(),Ee=x.trim().toUpperCase();return i.filter(Ae=>{const Re=[Ae?.activity,Ae?.description,Ae?.relatedTo,Ae?.assignedTo],et=ee===""||Re.some(tt=>tt&&tt.toString().toLowerCase().includes(ee)),De=Ee==="FILTER BY STATUS"||hb(Ae.status||"PENDING")===Ee;return et&&De})},[i,f,x]),Ne=h.useMemo(()=>{const ee=(S-1)*k;return pe.slice(ee,ee+k)},[pe,S]),Se=()=>{b(!1),T(MA),z(!1),P(null),G(!1)},Oe=()=>{T(MA),z(!1),P(null),b(!0)},ke=ee=>{let Ee="";if(ee.meet_assign_to?.id)Ee=String(ee.meet_assign_to.id);else if(ee.assignedTo){const le=d.find(Z=>`${Z.first_name} ${Z.last_name}`===ee.assignedTo);Ee=le?String(le.id):""}const Ae=le=>{if(!le)return"";try{const Z=new Date(le),_e=Z.getTimezoneOffset()*6e4;return new Date(Z.getTime()-_e).toISOString().slice(0,16)}catch{return""}};let Re="Lead",et="",De="Contact",tt="";if(ee.lead)Re="Lead",et=String(ee.lead.id);else if(ee.account)Re="Account",et=String(ee.account.id),ee.contact?(De="Contact",tt=String(ee.contact.id)):ee.deal?(De="Deal",tt=String(ee.deal.id)):ee.quote&&(De="Quote",tt=String(ee.quote.id));else if(ee.relatedType||ee.related_type){const le=ee.relatedType||ee.related_type,Z=ee.related_to||ee.relatedToId;le==="Lead"?(Re="Lead",et=String(Z)):(Re="Account",et=ee.account_id?String(ee.account_id):"")}const Je={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},H=hb(ee.status),be=Je[H]||"Planned";T({subject:ee.subject||ee.activity||"",location:ee.location||"",startTime:Ae(ee.start_time||ee.startTime),endTime:Ae(ee.end_time||ee.endTime),status:be,notes:ee.description||ee.notes||"",assignedTo:Ee,relatedType1:Re,relatedTo1:et,relatedType2:De,relatedTo2:tt}),z(!0),P(ee.id),w(null),b(!0)},he=ee=>{if(!ee.subject?.trim())return W.error("Subject is required.");if(!ee.startTime)return W.error("Start time is required.");if(ee.endTime&&!(new Date(ee.endTime)-new Date(ee.startTime)>0))return W.error("End time must be after start time.");ee.relatedType1,ee.relatedTo1,ee.relatedType1==="Account"&&ee.relatedType2&&ee.relatedTo2&&(ee.relatedType2,ee.relatedTo2);const Ee={...ee,assignedTo:parseInt(ee.assignedTo),relatedTo1:parseInt(ee.relatedTo1),relatedTo2:parseInt(ee.relatedTo2)},Ae=$&&F?"update":"create";V({title:Ae==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ae} "${Ee.subject}"?`,confirmLabel:Ae==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ae,payload:Ee,targetId:F,name:Ee.subject}})},Ge=async()=>{if(!Q?.action)return;const{type:ee,payload:Ee,targetId:Ae,name:Re}=Q.action;q(!0);try{ee==="create"?(G(!0),await ae.post("/meetings/create",Ee),W.success(`Meeting "${Re}" created.`),Se(),await K()):ee==="update"?(G(!0),await ae.put(`/meetings/${Ae}`,Ee),W.success(`Meeting "${Re}" updated.`),Se(),await K()):ee==="delete"&&(await ae.delete(`/meetings/${Ae}`),W.success(`Meeting "${Re}" deleted.`),C?.id===Ae&&w(null),await K())}catch(et){const De=et.response?.data?.detail||"Action failed.";W.error(typeof De=="string"?De:JSON.stringify(De)),console.error(De)}finally{G(!1),q(!1),V(null)}},Ce=ee=>{V({title:"Delete Meeting",message:`Permanently delete "${ee.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ee.id,name:ee.activity}})},xe=async(ee,Ee)=>{try{await ae.put(`/meetings/${ee}`,{status:Ee}),W.success("Status updated"),K(),w(null)}catch{W.error("Failed to update status")}};return r&&s?C?n.jsx(gd,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:ke,onDelete:Ce,onStatusUpdate:xe}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Oe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ye,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ee=>v(ee.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Ne.length>0?Ne.map(ee=>n.jsxs("tr",{onClick:()=>w(ee),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ee.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ee.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.lead.title}),ee.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.account.name}),ee.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ee.contact.first_name," ",ee.contact.last_name]}),ee.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.deal.name}),ee.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:h7e(ee.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:g7e(ee.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ee.meet_assign_to.first_name," ",ee.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p7e(hb(ee.status))}`,children:hb(ee.status).replace("_"," ")})})]},ee.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:pe.length,pageSize:k,currentPage:S,onPrev:()=>E(ee=>Math.max(1,ee-1)),onNext:()=>E(ee=>ee+1),onPageSizeChange:ee=>{_(ee),E(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),N&&n.jsx(Zj,{onClose:Se,formData:A,setFormData:T,isEditing:$,onSubmit:he,isSubmitting:M||X,users:d}),C&&n.jsx(gd,{meeting:C,onClose:()=>w(null),onEdit:ke,onDelete:Ce,onStatusUpdate:xe}),Q&&n.jsx(y7e,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:Ge,onCancel:()=>V(null),loading:X})]})};function y7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const Jj=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],jg={firstName:"",lastName:"",email:"",password:"",role:""},b7e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Co=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",v7e=e=>{const t=Co(e),a=Jj.find(s=>Co(s.value)===t);return a?a.value:e||""},Ek=e=>{const t=Co(e),a=Jj.find(s=>Co(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},f8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},IA=(e,{size:t="sm"}={})=>{const a=Co(e),s=b7e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Ek(e)})},w7e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},h8=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function N7e(){const{user:e,loading:t}=tn(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(jg),[E,k]=h.useState(!1),[_,A]=h.useState(null),[T,$]=h.useState(!1),[z,F]=h.useState(1),[P,M]=h.useState(10),[G,Q]=h.useState("Overview"),[V,X]=h.useState(""),[q,ne]=h.useState(!1),oe=Co(e?.role),K=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(oe),R=!t&&K,ye=h.useMemo(()=>{const te=Jj.filter(Ue=>Co(Ue.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...te]},[]),pe=h.useCallback(te=>{te&&(s(Ue=>Ue.map(Ie=>Ie.id===te?{...Ie,highlight:!0}:Ie)),setTimeout(()=>{s(Ue=>Ue.map(Ie=>Ie.id===te?{...Ie,highlight:!1}:Ie))},2e3))},[]),Ne=h.useCallback(async()=>{i(!0);try{const te=await ae.get("/users/all"),Ue=Array.isArray(te.data)?te.data:[],Ie=h8(Ue);s(Ie),f(We=>We&&(Ie.find(ve=>ve.id===We.id)||null)),console.log(te.data)}catch(te){console.error("Error fetching users:",te);const Ue=te.response?.data?.detail||"Failed to load users. Please try again later.";W.error(Ue)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!K&&e&&W.error("You are not authorized to access User Management.")},[K,t,e]),h.useEffect(()=>{t||!K||Ne()},[t,K,Ne]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Se=h.useMemo(()=>{const te=o.trim().toLowerCase(),Ue=Co(c);return h8(a.filter(Ie=>{if(!Ie)return!1;const We=te===""||[Ie.first_name,Ie.last_name,`${Ie.first_name||""} ${Ie.last_name||""}`,Ie.email,Ek(Ie.role)].filter(Boolean).some(ve=>ve.toString().toLowerCase().includes(te)),gt=Ue===""||Ue==="CEO"&&["CEO","ADMIN"].includes(Co(Ie.role))||Co(Ie.role)===Ue;return We&&gt}))},[a,o,c]),Oe=Math.max(1,Math.ceil(Se.length/P)||1);h.useEffect(()=>{F(1)},[o,c]),h.useEffect(()=>{F(te=>{const Ue=Math.max(1,Math.ceil(Se.length/P)||1);return te>Ue?Ue:te})},[Se.length]);const ke=h.useMemo(()=>{const te=(z-1)*P;return Se.slice(te,te+P)},[Se,z]);Se.length===0||(z-1)*P+1,Math.min(z*P,Se.length);const he=()=>F(te=>Math.max(te-1,1)),Ge=()=>F(te=>Math.min(te+1,Oe)),Ce=()=>{S(jg),N(!1),C(null),x(!0)},xe=te=>{console.log(te),f(te),Q("Overview"),X(te?.is_active?"Active":"Inactive")},ee=te=>{te.target.id==="userModalBackdrop"&&!T&&Ee()},Ee=()=>{f(null)},Ae=(te,Ue)=>{S(Ie=>({...Ie,[te]:Ue}))},Re=()=>{const te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Ue="";for(let Ie=0;Ie<10;Ie+=1)Ue+=te.charAt(Math.floor(Math.random()*te.length));Ae("password",Ue)},et=()=>{E||T||(x(!1),S(jg),C(null),N(!1))},De=te=>{S({firstName:te.first_name||"",lastName:te.last_name||"",email:te.email||"",password:"",role:v7e(te.role)}),N(!0),C(te.id),x(!0),f(null)},tt=te=>{A({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[te.first_name," ",te.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:te.id,name:`${te.first_name||""} ${te.last_name||""}`.trim()||te.email||"user"}})},Je=te=>{te.preventDefault();const Ue=w.firstName.trim(),Ie=w.lastName.trim(),We=w.email.trim(),gt=w.password.trim(),ve="Sales",Be=!(v&&b);if(!Ue||!We||!ve){W.warn("Please fill in all required fields.");return}if(Be&&!gt){W.warn("Please fill in all required fields.");return}if(gt&&gt.length<8){W.warn("Password should be at least 8 characters long.");return}const nt={first_name:Ue,last_name:Ie,email:We,role:ve};console.log(nt),(Be||gt)&&(nt.password=gt);const Te=`${Ue} ${Ie}`.trim(),Qe=Be?"create":"update";A({title:Qe==="create"?"Confirm New User":"Confirm User Update",message:Qe==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Te})," with role"," ",n.jsx("span",{className:"font-semibold",children:Ek(ve)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Te||We}),"?"]}),confirmLabel:Qe==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:nt,targetId:b,name:Te||We}})},H=async()=>{if(!_?.action){A(null);return}const{action:te}=_,{type:Ue,payload:Ie,targetId:We,name:gt}=te;$(!0),(Ue==="create"||Ue==="update")&&k(!0);try{if(Ue==="create"){const Be=(await ae.post("/users/createuser",Ie)).data;await Ne(),pe(Be.id),W.success(`User "${gt}" created successfully.`),x(!1),S(jg),C(null),N(!1)}else if(Ue==="update"){if(!We)throw new Error("Missing user identifier for update.");const Be=(await ae.put(`/users/updateuser/${We}`,Ie)).data;await Ne(),f(null),pe(Be.id),W.success(`User "${gt}" updated successfully.`),x(!1),S(jg),C(null),N(!1)}else if(Ue==="delete"){if(!We)throw new Error("Missing user identifier for deletion.");await ae.delete(`/users/deleteuser/${We}`),s(ve=>ve.map(Be=>Be.id===We?{...Be,is_active:!1}:Be)),u&&u.id===We&&(f(null),X("")),W.success(`User "${gt}" deactivated successfully.`)}}catch(ve){console.error("User management error:",ve);const Be=Ue==="create"?"Failed to create user. Please review the details and try again.":Ue==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",nt=ve.response?.data?.detail||Be;W.error(nt)}finally{(Ue==="create"||Ue==="update")&&k(!1),$(!1),A(null)}},be=()=>{T||A(null)},le=async()=>{if(!u||!V)return;const te=u.is_active?"Active":"Inactive";if(V===te)return;const Ue=V==="Active";ne(!0);try{const We=(await ae.put(`/users/updateuser/${u.id}`,{is_active:Ue})).data;s(gt=>gt.map(ve=>ve.id===We.id?We:ve)),f(null),X(""),W.success(`User status updated to ${V}`)}catch(Ie){console.error("Failed to update user status:",Ie);const We=Ie.response?.data?.detail||"Failed to update user status. Please try again.";W.error(We)}finally{ne(!1)}},Z=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!R)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Bw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Ce,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:te=>l(te.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:te=>d(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ye.map(te=>n.jsx("option",{value:te.value,children:te.label},te.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Se.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):ke.map(te=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${te.highlight?"bg-green-50":""} ${te.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[te.first_name," ",te.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>xe(te),children:te.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:IA(te.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${te.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:te.is_active?"Active":"Inactive"})})]},te.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:Se.length,pageSize:P,currentPage:z,onPrev:he,onNext:Ge,onPageSizeChange:te=>{M(te),F(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),_e=u?n.jsx("div",{id:"userModalBackdrop",onClick:ee,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ee,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:w7e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),IA(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>De(u),disabled:T,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>tt(u),disabled:T,children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(te=>n.jsx("button",{onClick:()=>Q(te),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===te?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:te},te))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:IA(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,te=>te.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:f8(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?f8(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const te=encodeURIComponent(u.email),Ue=encodeURIComponent(""),Ie=encodeURIComponent(""),We=`https://mail.google.com/mail/?view=cm&fs=1&to=${te}&su=${Ue}&body=${Ie}`;window.open(We,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(u.is_active?"Active":"Inactive"),onChange:te=>X(te.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:le,disabled:q||V===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${q||V===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:q?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Z,_e,n.jsx(j7e,{open:p,isEditing:v,isSubmitting:E,confirmProcessing:T,formData:w,onClose:et,onSubmit:Je,onChange:Ae,onGeneratePassword:Re}),n.jsx(C7e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:H,onCancel:be})]})}function j7e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(gb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(gb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(gb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(gb,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...Jj],required:!0}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function gb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function C7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function S7e({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Jt(),{logout:i}=Ys(),{user:o,fetchUser:l}=tn(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};h.useEffect(()=>{l()},[]);const d=c[r.pathname]||"Marketing Panel";return h.useEffect(()=>{function u(f){s.current&&!s.current.contains(f.target)&&a(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ox,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:d})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(rx,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:o?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),n.jsx("div",{className:"border-t my-1"}),n.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function _7e(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Jt(),{fetchUser:d}=tn();h.useEffect(()=>{d()},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],v=["/marketing/tasks"],N=p.includes(c.pathname),b=x.includes(c.pathname),C=v.includes(c.pathname);return h.useEffect(()=>{N&&t(!0),b&&s(!0),C&&i(!0)},[N,b,C]),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsxs(It,{to:"/marketing/dashboard",className:({isActive:w})=>w?u:f,children:[n.jsx(ix,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/marketing/accounts",className:({isActive:w})=>w?u:f,children:[n.jsx(aa,{})," Accounts"]}),n.jsxs(It,{to:"/marketing/contacts",className:({isActive:w})=>w?u:f,children:[n.jsx(sn,{})," Contacts"]}),n.jsxs(It,{to:"/marketing/leads",className:({isActive:w})=>w?u:f,children:[n.jsx(Yn,{})," Leads"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(lr,{className:"text-lg"}),"Tools"]}),n.jsx(Tt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/marketing/campaigns",className:({isActive:w})=>w?u:f,children:[n.jsx(_ie,{})," Campaign"]}),n.jsxs(It,{to:"/marketing/templates",className:({isActive:w})=>w?u:f,children:[n.jsx(Yk,{})," Templates"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsx("div",{className:"ml-6 mt-2 space-y-1",children:n.jsxs(It,{to:"/marketing/tasks",className:({isActive:w})=>w?u:f,children:[n.jsx(Qt,{})," Tasks"]})})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(S7e,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}function d0(e){return e+.5|0}const Jc=(e,t,a)=>Math.max(Math.min(e,a),t);function Gg(e){return Jc(d0(e*2.55),0,255)}function rd(e){return Jc(d0(e*255),0,255)}function Nl(e){return Jc(d0(e/2.55)/100,0,1)}function g8(e){return Jc(d0(e*100),0,100)}const ri={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},kk=[..."0123456789ABCDEF"],A7e=e=>kk[e&15],T7e=e=>kk[(e&240)>>4]+kk[e&15],pb=e=>(e&240)>>4===(e&15),E7e=e=>pb(e.r)&&pb(e.g)&&pb(e.b)&&pb(e.a);function k7e(e){var t=e.length,a;return e[0]==="#"&&(t===4||t===5?a={r:255&ri[e[1]]*17,g:255&ri[e[2]]*17,b:255&ri[e[3]]*17,a:t===5?ri[e[4]]*17:255}:(t===7||t===9)&&(a={r:ri[e[1]]<<4|ri[e[2]],g:ri[e[3]]<<4|ri[e[4]],b:ri[e[5]]<<4|ri[e[6]],a:t===9?ri[e[7]]<<4|ri[e[8]]:255})),a}const L7e=(e,t)=>e<255?t(e):"";function P7e(e){var t=E7e(e)?A7e:T7e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+L7e(e.a,t):void 0}const D7e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function eJ(e,t,a){const s=t*Math.min(a,1-a),r=(i,o=(i+e/30)%12)=>a-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function O7e(e,t,a){const s=(r,i=(r+e/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function M7e(e,t,a){const s=eJ(e,1,.5);let r;for(t+a>1&&(r=1/(t+a),t*=r,a*=r),r=0;r<3;r++)s[r]*=1-t-a,s[r]+=t;return s}function I7e(e,t,a,s,r){return e===r?(t-a)/s+(t<a?6:0):t===r?(a-e)/s+2:(e-t)/s+4}function kD(e){const a=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(a,s,r),o=Math.min(a,s,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=I7e(a,s,r,u,i),c=c*60+.5),[c|0,d||0,l]}function LD(e,t,a,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,a,s)).map(rd)}function PD(e,t,a){return LD(eJ,e,t,a)}function $7e(e,t,a){return LD(M7e,e,t,a)}function R7e(e,t,a){return LD(O7e,e,t,a)}function tJ(e){return(e%360+360)%360}function z7e(e){const t=D7e.exec(e);let a=255,s;if(!t)return;t[5]!==s&&(a=t[6]?Gg(+t[5]):rd(+t[5]));const r=tJ(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=$7e(r,i,o):t[1]==="hsv"?s=R7e(r,i,o):s=PD(r,i,o),{r:s[0],g:s[1],b:s[2],a}}function U7e(e,t){var a=kD(e);a[0]=tJ(a[0]+t),a=PD(a),e.r=a[0],e.g=a[1],e.b=a[2]}function F7e(e){if(!e)return;const t=kD(e),a=t[0],s=g8(t[1]),r=g8(t[2]);return e.a<255?`hsla(${a}, ${s}%, ${r}%, ${Nl(e.a)})`:`hsl(${a}, ${s}%, ${r}%)`}const p8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},x8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function B7e(){const e={},t=Object.keys(x8),a=Object.keys(p8);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<a.length;r++)i=a[r],l=l.replace(i,p8[i]);i=parseInt(x8[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let xb;function H7e(e){xb||(xb=B7e(),xb.transparent=[0,0,0,0]);const t=xb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const G7e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function W7e(e){const t=G7e.exec(e);let a=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];a=t[8]?Gg(o):Jc(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?Gg(s):Jc(s,0,255)),r=255&(t[4]?Gg(r):Jc(r,0,255)),i=255&(t[6]?Gg(i):Jc(i,0,255)),{r:s,g:r,b:i,a}}}function q7e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Nl(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const $A=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Xm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function V7e(e,t,a){const s=Xm(Nl(e.r)),r=Xm(Nl(e.g)),i=Xm(Nl(e.b));return{r:rd($A(s+a*(Xm(Nl(t.r))-s))),g:rd($A(r+a*(Xm(Nl(t.g))-r))),b:rd($A(i+a*(Xm(Nl(t.b))-i))),a:e.a+a*(t.a-e.a)}}function yb(e,t,a){if(e){let s=kD(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*a,t===0?360:1)),s=PD(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function nJ(e,t){return e&&Object.assign(t||{},e)}function y8(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=rd(e[3]))):(t=nJ(e,{r:0,g:0,b:0,a:1}),t.a=rd(t.a)),t}function Q7e(e){return e.charAt(0)==="r"?W7e(e):z7e(e)}class Fp{constructor(t){if(t instanceof Fp)return t;const a=typeof t;let s;a==="object"?s=y8(t):a==="string"&&(s=k7e(t)||H7e(t)||Q7e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=nJ(this._rgb);return t&&(t.a=Nl(t.a)),t}set rgb(t){this._rgb=y8(t)}rgbString(){return this._valid?q7e(this._rgb):void 0}hexString(){return this._valid?P7e(this._rgb):void 0}hslString(){return this._valid?F7e(this._rgb):void 0}mix(t,a){if(t){const s=this.rgb,r=t.rgb;let i;const o=a===i?.5:a,l=2*o-1,c=s.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*r.r+.5,s.g=255&d*s.g+i*r.g+.5,s.b=255&d*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,a){return t&&(this._rgb=V7e(this._rgb,t._rgb,a)),this}clone(){return new Fp(this.rgb)}alpha(t){return this._rgb.a=rd(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=d0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return yb(this._rgb,2,t),this}darken(t){return yb(this._rgb,2,-t),this}saturate(t){return yb(this._rgb,1,t),this}desaturate(t){return yb(this._rgb,1,-t),this}rotate(t){return U7e(this._rgb,t),this}}function xl(){}const Y7e=(()=>{let e=0;return()=>e++})();function Ln(e){return e==null}function as(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function jn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ni(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function fo(e,t){return Ni(e)?e:t}function dn(e,t){return typeof e>"u"?t:e}const K7e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,aJ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ea(e,t,a){if(e&&typeof e.call=="function")return e.apply(a,t)}function In(e,t,a,s){let r,i,o;if(as(e))for(i=e.length,r=0;r<i;r++)t.call(a,e[r],r);else if(jn(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(a,e[o[r]],o[r])}function ww(e,t){let a,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;++a)if(r=e[a],i=t[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Nw(e){if(as(e))return e.map(Nw);if(jn(e)){const t=Object.create(null),a=Object.keys(e),s=a.length;let r=0;for(;r<s;++r)t[a[r]]=Nw(e[a[r]]);return t}return e}function sJ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function X7e(e,t,a,s){if(!sJ(e))return;const r=t[e],i=a[e];jn(r)&&jn(i)?Bp(r,i,s):t[e]=Nw(i)}function Bp(e,t,a){const s=as(t)?t:[t],r=s.length;if(!jn(e))return e;a=a||{};const i=a.merger||X7e;let o;for(let l=0;l<r;++l){if(o=s[l],!jn(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],e,o,a)}return e}function ap(e,t){return Bp(e,t,{merger:Z7e})}function Z7e(e,t,a){if(!sJ(e))return;const s=t[e],r=a[e];jn(s)&&jn(r)?ap(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Nw(r))}const b8={"":e=>e,x:e=>e.x,y:e=>e.y};function J7e(e){const t=e.split("."),a=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}function e8e(e){const t=J7e(e);return a=>{for(const s of t){if(s==="")break;a=a&&a[s]}return a}}function Bu(e,t){return(b8[t]||(b8[t]=e8e(t)))(e)}function DD(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Hp=e=>typeof e<"u",pd=e=>typeof e=="function",v8=(e,t)=>{if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0};function t8e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Rn=Math.PI,Sa=2*Rn,n8e=Sa+Rn,jw=Number.POSITIVE_INFINITY,a8e=Rn/180,ss=Rn/2,Gd=Rn/4,w8=Rn*2/3,rJ=Math.log10,Oo=Math.sign;function sp(e,t,a){return Math.abs(e-t)<a}function N8(e){const t=Math.round(e);e=sp(e,t,e/1e3)?t:e;const a=Math.pow(10,Math.floor(rJ(e))),s=e/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function s8e(e){const t=[],a=Math.sqrt(e);let s;for(s=1;s<a;s++)e%s===0&&(t.push(s),t.push(e/s));return a===(a|0)&&t.push(a),t.sort((r,i)=>r-i).pop(),t}function r8e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Gp(e){return!r8e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function i8e(e,t){const a=Math.round(e);return a-t<=e&&a+t>=e}function o8e(e,t,a){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Tl(e){return e*(Rn/180)}function l8e(e){return e*(180/Rn)}function j8(e){if(!Ni(e))return;let t=1,a=0;for(;Math.round(e*t)/t!==e;)t*=10,a++;return a}function iJ(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.sqrt(a*a+s*s);let i=Math.atan2(s,a);return i<-.5*Rn&&(i+=Sa),{angle:i,distance:r}}function Lk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function c8e(e,t){return(e-t+n8e)%Sa-Rn}function zi(e){return(e%Sa+Sa)%Sa}function Wp(e,t,a,s){const r=zi(e),i=zi(t),o=zi(a),l=zi(i-r),c=zi(o-r),d=zi(r-i),u=zi(r-o);return r===i||r===o||s&&i===o||l>c&&d<u}function Ms(e,t,a){return Math.max(t,Math.min(a,e))}function d8e(e){return Ms(e,-32768,32767)}function ed(e,t,a,s=1e-6){return e>=Math.min(t,a)-s&&e<=Math.max(t,a)+s}function OD(e,t,a){a=a||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,a(i)?r=i:s=i;return{lo:r,hi:s}}const mu=(e,t,a,s)=>OD(e,a,s?r=>{const i=e[r][t];return i<a||i===a&&e[r+1][t]===a}:r=>e[r][t]<a),u8e=(e,t,a)=>OD(e,a,s=>e[s][t]>=a);function m8e(e,t,a){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>a;)r--;return s>0||r<e.length?e.slice(s,r):e}const oJ=["push","pop","shift","splice","unshift"];function f8e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),oJ.forEach(a=>{const s="_onData"+DD(a),r=e[a];Object.defineProperty(e,a,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function C8(e,t){const a=e._chartjs;if(!a)return;const s=a.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(oJ.forEach(i=>{delete e[i]}),delete e._chartjs)}function lJ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const cJ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function dJ(e,t){let a=[],s=!1;return function(...r){a=r,s||(s=!0,cJ.call(window,()=>{s=!1,e.apply(t,a)}))}}function h8e(e,t){let a;return function(...s){return t?(clearTimeout(a),a=setTimeout(e,t,s)):e.apply(this,s),t}}const MD=e=>e==="start"?"left":e==="end"?"right":"center",Ls=(e,t,a)=>e==="start"?t:e==="end"?a:(t+a)/2,g8e=(e,t,a,s)=>e===(s?"left":"right")?a:e==="center"?(t+a)/2:t;function p8e(e,t,a){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:x,maxDefined:v}=o.getUserBounds();if(x){if(r=Math.min(mu(c,u,f).lo,a?s:mu(t,u,o.getPixelForValue(f)).lo),d){const N=c.slice(0,r+1).reverse().findIndex(b=>!Ln(b[l.axis]));r-=Math.max(0,N)}r=Ms(r,0,s-1)}if(v){let N=Math.max(mu(c,o.axis,p,!0).hi+1,a?0:mu(t,u,o.getPixelForValue(p),!0).hi+1);if(d){const b=c.slice(N-1).findIndex(C=>!Ln(C[l.axis]));N+=Math.max(0,b)}i=Ms(N,r,s)-r}else i=s-r}return{start:r,count:i}}function x8e(e){const{xScale:t,yScale:a,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==a.min||s.ymax!==a.max;return Object.assign(s,r),i}const bb=e=>e===0||e===1,S8=(e,t,a)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Sa/a)),_8=(e,t,a)=>Math.pow(2,-10*e)*Math.sin((e-t)*Sa/a)+1,rp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ss)+1,easeOutSine:e=>Math.sin(e*ss),easeInOutSine:e=>-.5*(Math.cos(Rn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>bb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>bb(e)?e:S8(e,.075,.3),easeOutElastic:e=>bb(e)?e:_8(e,.075,.3),easeInOutElastic(e){return bb(e)?e:e<.5?.5*S8(e*2,.1125,.45):.5+.5*_8(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-rp.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?rp.easeInBounce(e*2)*.5:rp.easeOutBounce(e*2-1)*.5+.5};function ID(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function A8(e){return ID(e)?e:new Fp(e)}function RA(e){return ID(e)?e:new Fp(e).saturate(.5).darken(.1).hexString()}const y8e=["x","y","borderWidth","radius","tension"],b8e=["color","borderColor","backgroundColor"];function v8e(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:b8e},numbers:{type:"number",properties:y8e}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function w8e(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const T8=new Map;function N8e(e,t){t=t||{};const a=e+JSON.stringify(t);let s=T8.get(a);return s||(s=new Intl.NumberFormat(e,t),T8.set(a,s)),s}function $D(e,t,a){return N8e(t,a).format(e)}const j8e={values(e){return as(e)?e:""+e},numeric(e,t,a){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(a.length>1){const d=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=C8e(e,a)}const o=rJ(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),$D(e,s,c)}};function C8e(e,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e)),a}var uJ={formatters:j8e};function S8e(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uJ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Hu=Object.create(null),Pk=Object.create(null);function ip(e,t){if(!t)return e;const a=t.split(".");for(let s=0,r=a.length;s<r;++s){const i=a[s];e=e[i]||(e[i]=Object.create(null))}return e}function zA(e,t,a){return typeof t=="string"?Bp(ip(e,t),a):Bp(ip(e,""),t)}class _8e{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>RA(r.backgroundColor),this.hoverBorderColor=(s,r)=>RA(r.borderColor),this.hoverColor=(s,r)=>RA(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return zA(this,t,a)}get(t){return ip(this,t)}describe(t,a){return zA(Pk,t,a)}override(t,a){return zA(Hu,t,a)}route(t,a,s,r){const i=ip(this,t),o=ip(this,s),l="_"+a;Object.defineProperties(i,{[l]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[l],d=o[r];return jn(c)?Object.assign({},d,c):dn(c,d)},set(c){this[l]=c}}})}apply(t){t.forEach(a=>a(this))}}var Da=new _8e({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[v8e,w8e,S8e]);function A8e(e){return!e||Ln(e.size)||Ln(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function E8(e,t,a,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>s&&(s=i),s}function Wd(e,t,a){const s=e.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((t-r)*s)/s+r}function k8(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Dk(e,t,a,s){mJ(e,t,a,s,null)}function mJ(e,t,a,s,r){let i,o,l,c,d,u,f,p;const x=t.pointStyle,v=t.rotation,N=t.radius;let b=(v||0)*a8e;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(a,s),e.rotate(b),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(N)||N<=0)){switch(e.beginPath(),x){default:r?e.ellipse(a,s,r/2,N,0,0,Sa):e.arc(a,s,N,0,Sa),e.closePath();break;case"triangle":u=r?r/2:N,e.moveTo(a+Math.sin(b)*u,s-Math.cos(b)*N),b+=w8,e.lineTo(a+Math.sin(b)*u,s-Math.cos(b)*N),b+=w8,e.lineTo(a+Math.sin(b)*u,s-Math.cos(b)*N),e.closePath();break;case"rectRounded":d=N*.516,c=N-d,o=Math.cos(b+Gd)*c,f=Math.cos(b+Gd)*(r?r/2-d:c),l=Math.sin(b+Gd)*c,p=Math.sin(b+Gd)*(r?r/2-d:c),e.arc(a-f,s-l,d,b-Rn,b-ss),e.arc(a+p,s-o,d,b-ss,b),e.arc(a+f,s+l,d,b,b+ss),e.arc(a-p,s+o,d,b+ss,b+Rn),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*N,u=r?r/2:c,e.rect(a-u,s-c,2*u,2*c);break}b+=Gd;case"rectRot":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+p,s-o),e.lineTo(a+f,s+l),e.lineTo(a-p,s+o),e.closePath();break;case"crossRot":b+=Gd;case"cross":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"star":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o),b+=Gd,f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"line":o=r?r/2:Math.cos(b)*N,l=Math.sin(b)*N,e.moveTo(a-o,s-l),e.lineTo(a+o,s+l);break;case"dash":e.moveTo(a,s),e.lineTo(a+Math.cos(b)*(r?r/2:N),s+Math.sin(b)*N);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function qp(e,t,a){return a=a||.5,!t||e&&e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a}function RD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function zD(e){e.restore()}function T8e(e,t,a,s,r){if(!t)return e.lineTo(a.x,a.y);if(r==="middle"){const i=(t.x+a.x)/2;e.lineTo(i,t.y),e.lineTo(i,a.y)}else r==="after"!=!!s?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}function E8e(e,t,a,s){if(!t)return e.lineTo(a.x,a.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function k8e(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ln(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function L8e(e,t,a,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,d=a+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(l,u),e.stroke()}}function P8e(e,t){const a=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=a}function Vp(e,t,a,s,r,i={}){const o=as(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=r.string,k8e(e,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&P8e(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Ln(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,a,s,i.maxWidth)),e.fillText(d,a,s,i.maxWidth),L8e(e,a,s,d,i),s+=Number(r.lineHeight);e.restore()}function Cw(e,t){const{x:a,y:s,w:r,h:i,radius:o}=t;e.arc(a+o.topLeft,s+o.topLeft,o.topLeft,1.5*Rn,Rn,!0),e.lineTo(a,s+i-o.bottomLeft),e.arc(a+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Rn,ss,!0),e.lineTo(a+r-o.bottomRight,s+i),e.arc(a+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,ss,0,!0),e.lineTo(a+r,s+o.topRight),e.arc(a+r-o.topRight,s+o.topRight,o.topRight,0,-ss,!0),e.lineTo(a+o.topLeft,s)}const D8e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,O8e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function M8e(e,t){const a=(""+e).match(D8e);if(!a||a[1]==="normal")return t*1.2;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return t*e}const I8e=e=>+e||0;function UD(e,t){const a={},s=jn(t),r=s?Object.keys(t):t,i=jn(e)?s?o=>dn(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)a[o]=I8e(i(o));return a}function fJ(e){return UD(e,{top:"y",right:"x",bottom:"y",left:"x"})}function xf(e){return UD(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ji(e){const t=fJ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Is(e,t){e=e||{},t=t||Da.font;let a=dn(e.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let s=dn(e.style,t.style);s&&!(""+s).match(O8e)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:dn(e.family,t.family),lineHeight:M8e(dn(e.lineHeight,t.lineHeight),a),size:a,style:s,weight:dn(e.weight,t.weight),string:""};return r.string=A8e(r),r}function vb(e,t,a,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function $8e(e,t,a){const{min:s,max:r}=e,i=aJ(t,(r-s)/2),o=(l,c)=>a&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function tm(e,t){return Object.assign(Object.create(e),t)}function FD(e,t=[""],a,s,r=()=>e[0]){const i=a||e;typeof s>"u"&&(s=xJ("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>FD([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return gJ(l,c,()=>W8e(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return P8(l).includes(c)},ownKeys(l){return P8(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function $f(e,t,a,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:a,_stack:new Set,_descriptors:hJ(e,s),setContext:i=>$f(e,i,a,s),override:i=>$f(e.override(i),t,a,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return gJ(i,o,()=>z8e(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function hJ(e,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:a,indexable:s,isScriptable:pd(a)?a:()=>a,isIndexable:pd(s)?s:()=>s}}const R8e=(e,t)=>e?e+DD(t):t,BD=(e,t)=>jn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function gJ(e,t,a){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=a();return e[t]=s,s}function z8e(e,t,a){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return pd(l)&&o.isScriptable(t)&&(l=U8e(t,l,e,a)),as(l)&&l.length&&(l=F8e(t,l,e,o.isIndexable)),BD(t,l)&&(l=$f(l,r,i&&i[t],o)),l}function U8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=a;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),BD(e,c)&&(c=HD(r._scopes,r,e,c)),c}function F8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=a;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(jn(t[0])){const c=t,d=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const f=HD(d,r,e,u);t.push($f(f,i,o&&o[e],l))}}return t}function pJ(e,t,a){return pd(e)?e(t,a):e}const B8e=(e,t)=>e===!0?t:typeof e=="string"?Bu(t,e):void 0;function H8e(e,t,a,s,r){for(const i of t){const o=B8e(a,i);if(o){e.add(o);const l=pJ(o._fallback,a,r);if(typeof l<"u"&&l!==a&&l!==s)return l}else if(o===!1&&typeof s<"u"&&a!==s)return null}return!1}function HD(e,t,a,s){const r=t._rootScopes,i=pJ(t._fallback,a,s),o=[...e,...r],l=new Set;l.add(s);let c=L8(l,o,a,i||a,s);return c===null||typeof i<"u"&&i!==a&&(c=L8(l,o,i,c,s),c===null)?!1:FD(Array.from(l),[""],r,i,()=>G8e(t,a,s))}function L8(e,t,a,s,r){for(;a;)a=H8e(e,t,a,s,r);return a}function G8e(e,t,a){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return as(r)&&jn(a)?a:r||{}}function W8e(e,t,a,s){let r;for(const i of t)if(r=xJ(R8e(i,e),a),typeof r<"u")return BD(e,r)?HD(a,s,e,r):r}function xJ(e,t){for(const a of t){if(!a)continue;const s=a[e];if(typeof s<"u")return s}}function P8(e){let t=e._keys;return t||(t=e._keys=q8e(e._scopes)),t}function q8e(e){const t=new Set;for(const a of e)for(const s of Object.keys(a).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const V8e=Number.EPSILON||1e-14,Rf=(e,t)=>t<e.length&&!e[t].skip&&e[t],yJ=e=>e==="x"?"y":"x";function Q8e(e,t,a,s){const r=e.skip?t:e,i=t,o=a.skip?t:a,l=Lk(i,r),c=Lk(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const f=s*d,p=s*u;return{previous:{x:i.x-f*(o.x-r.x),y:i.y-f*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function Y8e(e,t,a){const s=e.length;let r,i,o,l,c,d=Rf(e,0);for(let u=0;u<s-1;++u)if(c=d,d=Rf(e,u+1),!(!c||!d)){if(sp(t[u],0,V8e)){a[u]=a[u+1]=0;continue}r=a[u]/t[u],i=a[u+1]/t[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),a[u]=r*o*t[u],a[u+1]=i*o*t[u])}}function K8e(e,t,a="x"){const s=yJ(a),r=e.length;let i,o,l,c=Rf(e,0);for(let d=0;d<r;++d){if(o=l,l=c,c=Rf(e,d+1),!l)continue;const u=l[a],f=l[s];o&&(i=(u-o[a])/3,l[`cp1${a}`]=u-i,l[`cp1${s}`]=f-i*t[d]),c&&(i=(c[a]-u)/3,l[`cp2${a}`]=u+i,l[`cp2${s}`]=f+i*t[d])}}function X8e(e,t="x"){const a=yJ(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,l,c,d=Rf(e,0);for(o=0;o<s;++o)if(l=c,c=d,d=Rf(e,o+1),!!c){if(d){const u=d[t]-c[t];r[o]=u!==0?(d[a]-c[a])/u:0}i[o]=l?d?Oo(r[o-1])!==Oo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Y8e(e,r,i),K8e(e,i,t)}function wb(e,t,a){return Math.max(Math.min(e,a),t)}function Z8e(e,t){let a,s,r,i,o,l=qp(e[0],t);for(a=0,s=e.length;a<s;++a)o=i,i=l,l=a<s-1&&qp(e[a+1],t),i&&(r=e[a],o&&(r.cp1x=wb(r.cp1x,t.left,t.right),r.cp1y=wb(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=wb(r.cp2x,t.left,t.right),r.cp2y=wb(r.cp2y,t.top,t.bottom)))}function J8e(e,t,a,s,r){let i,o,l,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")X8e(e,r);else{let d=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=Q8e(d,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}t.capBezierPoints&&Z8e(e,a)}function GD(){return typeof window<"u"&&typeof document<"u"}function WD(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Sw(e,t,a){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[a])):s=e,s}const e1=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function eBe(e,t){return e1(e).getPropertyValue(t)}const tBe=["top","right","bottom","left"];function wu(e,t,a){const s={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=tBe[r];s[i]=parseFloat(e[t+"-"+i+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const nBe=(e,t,a)=>(e>0||t>0)&&(!a||!a.shadowRoot);function aBe(e,t){const a=e.touches,s=a&&a.length?a[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(nBe(r,i,e.target))l=r,c=i;else{const d=t.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Jd(e,t){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:s}=t,r=e1(a),i=r.boxSizing==="border-box",o=wu(r,"padding"),l=wu(r,"border","width"),{x:c,y:d,box:u}=aBe(e,a),f=o.left+(u&&l.left),p=o.top+(u&&l.top);let{width:x,height:v}=t;return i&&(x-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-f)/x*a.width/s),y:Math.round((d-p)/v*a.height/s)}}function sBe(e,t,a){let s,r;if(t===void 0||a===void 0){const i=e&&WD(e);if(!i)t=e.clientWidth,a=e.clientHeight;else{const o=i.getBoundingClientRect(),l=e1(i),c=wu(l,"border","width"),d=wu(l,"padding");t=o.width-d.width-c.width,a=o.height-d.height-c.height,s=Sw(l.maxWidth,i,"clientWidth"),r=Sw(l.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:s||jw,maxHeight:r||jw}}const td=e=>Math.round(e*10)/10;function rBe(e,t,a,s){const r=e1(e),i=wu(r,"margin"),o=Sw(r.maxWidth,e,"clientWidth")||jw,l=Sw(r.maxHeight,e,"clientHeight")||jw,c=sBe(e,t,a);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const p=wu(r,"border","width"),x=wu(r,"padding");d-=x.width+p.width,u-=x.height+p.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=td(Math.min(d,o,c.maxWidth)),u=td(Math.min(u,l,c.maxHeight)),d&&!u&&(u=td(d/2)),(t!==void 0||a!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=td(Math.floor(u*s))),{width:d,height:u}}function D8(e,t,a){const s=t||1,r=td(e.height*s),i=td(e.width*s);e.height=td(e.height),e.width=td(e.width);const o=e.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const iBe=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};GD()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function O8(e,t){const a=eBe(e,t),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function eu(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}}function oBe(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:s==="middle"?a<.5?e.y:t.y:s==="after"?a<1?e.y:t.y:a>0?t.y:e.y}}function lBe(e,t,a,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=eu(e,r,a),l=eu(r,i,a),c=eu(i,t,a),d=eu(o,l,a),u=eu(l,c,a);return eu(d,u,a)}const cBe=function(e,t){return{x(a){return e+e+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,s){return a-s},leftForLtr(a,s){return a-s}}},dBe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function yf(e,t,a){return e?cBe(t,a):dBe()}function bJ(e,t){let a,s;(t==="ltr"||t==="rtl")&&(a=e.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=s)}function vJ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function wJ(e){return e==="angle"?{between:Wp,compare:c8e,normalize:zi}:{between:ed,compare:(t,a)=>t-a,normalize:t=>t}}function M8({start:e,end:t,count:a,loop:s,style:r}){return{start:e%a,end:t%a,loop:s&&(t-e+1)%a===0,style:r}}function uBe(e,t,a){const{property:s,start:r,end:i}=a,{between:o,normalize:l}=wJ(s),c=t.length;let{start:d,end:u,loop:f}=e,p,x;if(f){for(d+=c,u+=c,p=0,x=c;p<x&&o(l(t[d%c][s]),r,i);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:e.style}}function mBe(e,t,a){if(!a)return[e];const{property:s,start:r,end:i}=a,o=t.length,{compare:l,between:c,normalize:d}=wJ(s),{start:u,end:f,loop:p,style:x}=uBe(e,t,a),v=[];let N=!1,b=null,C,w,S;const E=()=>c(r,S,C)&&l(r,S)!==0,k=()=>l(i,C)===0||c(i,S,C),_=()=>N||E(),A=()=>!N||k();for(let T=u,$=u;T<=f;++T)w=t[T%o],!w.skip&&(C=d(w[s]),C!==S&&(N=c(C,r,i),b===null&&_()&&(b=l(C,r)===0?T:$),b!==null&&A()&&(v.push(M8({start:b,end:T,loop:p,count:o,style:x})),b=null),$=T,S=C));return b!==null&&v.push(M8({start:b,end:f,loop:p,count:o,style:x})),v}function fBe(e,t){const a=[],s=e.segments;for(let r=0;r<s.length;r++){const i=mBe(s[r],e.points,t);i.length&&a.push(...i)}return a}function hBe(e,t,a,s){let r=0,i=t-1;if(a&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,a&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function gBe(e,t,a,s){const r=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=a;++c){const d=e[c%r];d.skip||d.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=o=d.stop?c:null):(o=c,l.skip&&(t=c)),l=d}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function pBe(e,t){const a=e.points,s=e.options.spanGaps,r=a.length;if(!r)return[];const i=!!e._loop,{start:o,end:l}=hBe(a,r,i,s);if(s===!0)return I8(e,[{start:o,end:l,loop:i}],a,t);const c=l<o?l+r:l,d=!!e._fullLoop&&o===0&&l===r-1;return I8(e,gBe(a,o,c,d),a,t)}function I8(e,t,a,s){return!s||!s.setContext||!a?t:xBe(e,t,a,s)}function xBe(e,t,a,s){const r=e._chart.getContext(),i=$8(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=a.length,d=[];let u=i,f=t[0].start,p=f;function x(v,N,b,C){const w=l?-1:1;if(v!==N){for(v+=c;a[v%c].skip;)v-=w;for(;a[N%c].skip;)N+=w;v%c!==N%c&&(d.push({start:v%c,end:N%c,loop:b,style:C}),u=C,f=N%c)}}for(const v of t){f=l?f:v.start;let N=a[f%c],b;for(p=f+1;p<=v.end;p++){const C=a[p%c];b=$8(s.setContext(tm(r,{type:"segment",p0:N,p1:C,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),yBe(b,u)&&x(f,p-1,v.loop,u),N=C,u=b}f<p-1&&x(f,p-1,v.loop,u)}return d}function $8(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function yBe(e,t){if(!t)return!1;const a=[],s=function(r,i){return ID(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Nb(e,t,a){return e.options.clip?e[a]:t[a]}function bBe(e,t){const{xScale:a,yScale:s}=e;return a&&s?{left:Nb(a,t,"left"),right:Nb(a,t,"right"),top:Nb(s,t,"top"),bottom:Nb(s,t,"bottom")}:t}function vBe(e,t){const a=t._clip;if(a.disabled)return!1;const s=bBe(t,e.chartArea);return{left:a.left===!1?0:s.left-(a.left===!0?0:a.left),right:a.right===!1?e.width:s.right+(a.right===!0?0:a.right),top:a.top===!1?0:s.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?e.height:s.bottom+(a.bottom===!0?0:a.bottom)}}class wBe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,s,r){const i=a.listeners[r],o=a.duration;i.forEach(l=>l({chart:t,initial:a.initial,numSteps:o,currentStep:Math.min(s-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=cJ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let s=a.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,s)),s}listen(t,a,s){this._getAnims(t).listeners[a].push(s)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const s=a.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var bl=new wBe;const R8="transparent",NBe={boolean(e,t,a){return a>.5?t:e},color(e,t,a){const s=A8(e||R8),r=s.valid&&A8(t||R8);return r&&r.valid?r.mix(s,a).hexString():t},number(e,t,a){return e+(t-e)*a}};class jBe{constructor(t,a,s,r){const i=a[s];r=vb([t.to,r,i,t.from]);const o=vb([t.from,i,r]);this._active=!0,this._fn=t.fn||NBe[t.type||typeof o],this._easing=rp[t.easing]||rp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,a,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=vb([t.to,a,r,t.from]),this._from=vb([t.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||a<s),!this._active){this._target[r]=l,this._notify(!0);return}if(a<0){this._target[r]=i;return}c=a/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,s)=>{t.push({res:a,rej:s})})}_notify(t){const a=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][a]()}}class NJ{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!jn(t))return;const a=Object.keys(Da.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!jn(i))return;const o={};for(const l of a)o[l]=i[l];(as(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,a){const s=a.options,r=SBe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&CBe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,a){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(a),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,a));continue}const u=a[d];let f=i[d];const p=s.get(d);if(f)if(p&&f.active()){f.update(p,u,l);continue}else f.cancel();if(!p||!p.duration){t[d]=u;continue}i[d]=f=new jBe(p,t,d,u),r.push(f)}return r}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const s=this._createAnimations(t,a);if(s.length)return bl.add(this._chart,s),!0}}function CBe(e,t){const a=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function SBe(e,t){if(!t)return;let a=e.options;if(!a){e.options=t;return}return a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function z8(e,t){const a=e&&e.options||{},s=a.reverse,r=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function _Be(e,t,a){if(a===!1)return!1;const s=z8(e,a),r=z8(t,a);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function ABe(e){let t,a,s,r;return jn(e)?(t=e.top,a=e.right,s=e.bottom,r=e.left):t=a=s=r=e,{top:t,right:a,bottom:s,left:r,disabled:e===!1}}function jJ(e,t){const a=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)a.push(s[r].index);return a}function U8(e,t,a,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,d;if(t===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===a){if(u=!0,s.all)continue;break}d=e.values[c],Ni(d)&&(i||t===0||Oo(t)===Oo(d))&&(t+=d)}return!u&&!s.all?0:t}function TBe(e,t){const{iScale:a,vScale:s}=t,r=a.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:e[u]};return l}function UA(e,t){const a=e&&e.options.stacked;return a||a===void 0&&t.stack!==void 0}function EBe(e,t,a){return`${e.id}.${t.id}.${a.stack||a.type}`}function kBe(e){const{min:t,max:a,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function LBe(e,t,a){const s=e[t]||(e[t]={});return s[a]||(s[a]={})}function F8(e,t,a,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function B8(e,t){const{chart:a,_cachedMeta:s}=e,r=a._stacks||(a._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,d=o.axis,u=EBe(i,o,s),f=t.length;let p;for(let x=0;x<f;++x){const v=t[x],{[c]:N,[d]:b}=v,C=v._stacks||(v._stacks={});p=C[d]=LBe(r,u,N),p[l]=b,p._top=F8(p,o,!0,s.type),p._bottom=F8(p,o,!1,s.type);const w=p._visualValues||(p._visualValues={});w[l]=b}}function FA(e,t){const a=e.scales;return Object.keys(a).filter(s=>a[s].axis===t).shift()}function PBe(e,t){return tm(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function DBe(e,t,a){return tm(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function Cg(e,t){const a=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][a]===void 0)return;delete i[s][a],i[s]._visualValues!==void 0&&i[s]._visualValues[a]!==void 0&&delete i[s]._visualValues[a]}}}const BA=e=>e==="reset"||e==="none",H8=(e,t)=>t?e:Object.assign({},e),OBe=(e,t,a)=>e&&!t.hidden&&t._stacked&&{keys:jJ(a,!0),values:null};class t1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=UA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Cg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,s=this.getDataset(),r=(f,p,x,v)=>f==="x"?p:f==="r"?v:x,i=a.xAxisID=dn(s.xAxisID,FA(t,"x")),o=a.yAxisID=dn(s.yAxisID,FA(t,"y")),l=a.rAxisID=dn(s.rAxisID,FA(t,"r")),c=a.indexAxis,d=a.iAxisID=r(c,i,o,l),u=a.vAxisID=r(c,o,i,l);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(l),a.iScale=this.getScaleForId(d),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&C8(this._data,this),t._stacked&&Cg(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),s=this._data;if(jn(a)){const r=this._cachedMeta;this._data=TBe(a,r)}else if(s!==a){if(s){C8(s,this);const r=this._cachedMeta;Cg(r),r._parsed=[]}a&&Object.isExtensible(a)&&f8e(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=UA(a.vScale,a),a.stack!==s.stack&&(r=!0,Cg(a),a.stack=s.stack),this._resyncElements(t),(r||i!==a._stacked)&&(B8(this,a._parsed),a._stacked=UA(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&a===r.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,f,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{as(r[t])?p=this.parseArrayData(s,r,t,a):jn(r[t])?p=this.parseObjectData(s,r,t,a):p=this.parsePrimitiveData(s,r,t,a);const x=()=>f[l]===null||d&&f[l]<d[l];for(u=0;u<a;++u)s._parsed[u+t]=f=p[u],c&&(x()&&(c=!1),d=f);s._sorted=c}o&&B8(this,p)}parsePrimitiveData(t,a,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,f=new Array(r);let p,x,v;for(p=0,x=r;p<x;++p)v=p+s,f[p]={[l]:u||i.parse(d[v],v),[c]:o.parse(a[v],v)};return f}parseArrayData(t,a,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,d,u,f;for(c=0,d=r;c<d;++c)u=c+s,f=a[u],l[c]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return l}parseObjectData(t,a,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,f,p,x;for(u=0,f=r;u<f;++u)p=u+s,x=a[p],d[u]={x:i.parse(Bu(x,l),p),y:o.parse(Bu(x,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,s){const r=this.chart,i=this._cachedMeta,o=a[t.axis],l={keys:jJ(r,!0),values:a._stacks[t.axis]._visualValues};return U8(l,o,i.index,{mode:s})}updateRangeFromParsed(t,a,s,r){const i=s[a.axis];let o=i===null?NaN:i;const l=r&&s._stacks[a.axis];r&&l&&(r.values=l,o=U8(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,a){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=OBe(a,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=kBe(l);let p,x;function v(){x=r[p];const N=x[l.axis];return!Ni(x[t.axis])||u>N||f<N}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(d,t,x,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(d,t,x,c);break}}return d}getAllParsedValues(t){const a=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=a.length;r<i;++r)o=a[r][t.axis],Ni(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,s=a.iScale,r=a.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=ABe(dn(this.options.clip,_Be(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,s=this._cachedMeta,r=s.data||[],i=a.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,l,c),u=l;u<l+c;++u){const f=r[u];f.hidden||(f.active&&d?o.push(f):f.draw(t,i))}for(u=0;u<o.length;++u)o[u].draw(t,i)}getStyle(t,a){const s=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,a,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=DBe(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=PBe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",s){const r=a==="active",i=this._cachedDataOpts,o=t+"-"+a,l=i[o],c=this.enableOptionSharing&&Hp(s);if(l)return H8(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),u),x=Object.keys(Da.elements[t]),v=()=>this.getContext(s,r,a),N=d.resolveNamedOptions(p,x,v,f);return N.$shared&&(N.$shared=c,i[o]=Object.freeze(H8(N,c))),N}_resolveAnimations(t,a,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${a}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,a),p=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(p,this.getContext(t,s,a))}const d=new NJ(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||BA(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const s=this.resolveDataElementOptions(t,a),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,s),{sharedOptions:i,includeOptions:o}}updateElement(t,a,s,r){BA(r)?Object.assign(t,s):this._resolveAnimations(a,r).update(t,s)}updateSharedOptions(t,a,s){t&&!BA(a)&&this._resolveAnimations(void 0,a).update(t,s)}_setStyle(t,a,s,r){t.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,a,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=s.length,i=a.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,a,s=!0){const r=this._cachedMeta,i=r.data,o=t+a;let l;const c=d=>{for(d.length+=a,l=d.length-1;l>=o;l--)d[l]=d[l-a]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,a),s&&this.updateElements(i,t,a,"reset")}updateElements(t,a,s,r){}_removeElements(t,a){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,a);s._stacked&&Cg(s,r)}s.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,s,r]=t;this[a](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function MBe(e,t){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=a.length;r<i;r++)s=s.concat(a[r].controller.getAllParsedValues(e));e._cache.$bar=lJ(s.sort((r,i)=>r-i))}return e._cache.$bar}function IBe(e){const t=e.iScale,a=MBe(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Hp(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=a.length;r<i;++r)o=t.getPixelForValue(a[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function $Be(e,t,a,s){const r=a.barThickness;let i,o;return Ln(r)?(i=t.min*a.categoryPercentage,o=a.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function RBe(e,t,a,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=a.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:a.barPercentage,start:d}}function zBe(e,t,a,s){const r=a.parse(e[0],s),i=a.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),t[a.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function CJ(e,t,a,s){return as(e)?zBe(e,t,a,s):t[a.axis]=a.parse(e,s),t}function G8(e,t,a,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let d,u,f,p;for(d=a,u=a+s;d<u;++d)p=t[d],f={},f[r.axis]=l||r.parse(o[d],d),c.push(CJ(p,f,i,d));return c}function HA(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function UBe(e,t,a){return e!==0?Oo(e):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function FBe(e){let t,a,s,r,i;return e.horizontal?(t=e.base>e.x,a="left",s="right"):(t=e.base<e.y,a="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:a,end:s,reverse:t,top:r,bottom:i}}function BBe(e,t,a,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=FBe(e);r==="middle"&&a&&(e.enableBorderRadius=!0,(a._top||0)===s?r=d:(a._bottom||0)===s?r=u:(i[W8(u,o,l,c)]=!0,r=d)),i[W8(r,o,l,c)]=!0,e.borderSkipped=i}function W8(e,t,a,s){return s?(e=HBe(e,t,a),e=q8(e,a,t)):e=q8(e,t,a),e}function HBe(e,t,a){return e===t?a:e===a?t:e}function q8(e,t,a){return e==="start"?t:e==="end"?a:e}function GBe(e,{inflateAmount:t},a){e.inflateAmount=t==="auto"?a===1?.33:0:t}class WBe extends t1{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,a,s,r){return G8(t,a,s,r)}parseArrayData(t,a,s,r){return G8(t,a,s,r)}parseObjectData(t,a,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,f=[];let p,x,v,N;for(p=s,x=s+r;p<x;++p)N=a[p],v={},v[i.axis]=i.parse(Bu(N,d),p),f.push(CJ(Bu(N,u),v,o,p));return f}updateRangeFromParsed(t,a,s,r){super.updateRangeFromParsed(t,a,s,r);const i=s._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:s,vScale:r}=a,i=this.getParsed(t),o=i._custom,l=HA(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(a,r);for(let x=a;x<a+s;x++){const v=this.getParsed(x),N=i||Ln(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),b=this._calculateBarIndexPixels(x,u),C=(v._stacks||{})[l.axis],w={horizontal:d,base:N.base,enableBorderRadius:!C||HA(v._custom)||o===C._top||o===C._bottom,x:d?N.head:b.center,y:d?b.center:N.head,height:d?b.size:Math.abs(N.size),width:d?Math.abs(N.size):b.size};p&&(w.options=f||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=w.options||t[x].options;BBe(w,S,C,o),GBe(w,S,u.ratio),this.updateElement(t[x],x,w,r)}}_getStacks(t,a){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(a),c=l&&l[s.axis],d=u=>{const f=u._parsed.find(x=>x[s.axis]===c),p=f&&f[u.vScale.axis];if(Ln(p)||isNaN(p))return!0};for(const u of r)if(!(a!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[dn(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,s){const r=this._getStacks(t,s),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,s=a.iScale,r=[];let i,o;for(i=0,o=a.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||IBe(a),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),d=c._custom,u=HA(d);let f=c[a.axis],p=0,x=s?this.applyStack(a,c,s):f,v,N;x!==f&&(p=x-f,x=f),u&&(f=d.barStart,x=d.barEnd-d.barStart,f!==0&&Oo(f)!==Oo(d.barEnd)&&(p=0),p+=f);const b=!Ln(i)&&!u?i:p;let C=a.getPixelForValue(b);if(this.chart.getDataVisibility(t)?v=a.getPixelForValue(p+x):v=C,N=v-C,Math.abs(N)<o){N=UBe(N,a,l)*o,f===l&&(C-=N/2);const w=a.getPixelForDecimal(0),S=a.getPixelForDecimal(1),E=Math.min(w,S),k=Math.max(w,S);C=Math.max(Math.min(C,k),E),v=C+N,s&&!u&&(c._stacks[a.axis]._visualValues[r]=a.getValueForPixel(v)-a.getValueForPixel(C))}if(C===a.getPixelForValue(l)){const w=Oo(N)*a.getLineWidthForValue(l)/2;C+=w,N-=w}return{size:N,base:C,head:v,center:v+N/2}}_calculateBarIndexPixels(t,a){const s=a.scale,r=this.options,i=r.skipNull,o=dn(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(a.grouped){const u=i?this._getStackCount(t):a.stackCount,f=r.barThickness==="flex"?RBe(t,a,r,u*d):$Be(t,a,r,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(dn(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;l=f.start+f.chunk*v+f.chunk/2,c=Math.min(o,f.chunk*f.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,a.min*a.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,a=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function qBe(e,t,a){let s=1,r=1,i=0,o=0;if(t<Sa){const l=e,c=l+t,d=Math.cos(l),u=Math.sin(l),f=Math.cos(c),p=Math.sin(c),x=(S,E,k)=>Wp(S,l,c,!0)?1:Math.max(E,E*a,k,k*a),v=(S,E,k)=>Wp(S,l,c,!0)?-1:Math.min(E,E*a,k,k*a),N=x(0,d,f),b=x(ss,u,p),C=v(Rn,d,f),w=v(Rn+ss,u,p);s=(N-C)/2,r=(b-w)/2,i=-(N+C)/2,o=-(b+w)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class VBe extends t1{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((c,d)=>{const f=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(l||f.borderRadius),index:d}}):[]}},onClick(t,a,s){s.chart.toggleDataVisibility(a.index),s.chart.update()}}}};constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(jn(s[t])){const{key:c="value"}=this._parsing;i=d=>+Bu(s[d],c)}let o,l;for(o=t,l=t+a;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return Tl(this.options.rotation-90)}_getCircumference(){return Tl(this.options.circumference)}_getRotationExtents(){let t=Sa,a=-Sa;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),a=Math.max(a,i+o)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:s}=a,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(K7e(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:v,offsetY:N}=qBe(f,u,c),b=(s.width-o)/p,C=(s.height-o)/x,w=Math.max(Math.min(b,C)/2,0),S=aJ(this.options.radius,w),E=Math.max(S*c,0),k=(S-E)/this._getVisibleDatasetWeightTotal();this.offsetX=v*S,this.offsetY=N*S,r.total=this.calculateTotal(),this.outerRadius=S-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Sa)}updateElements(t,a,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,f=(l.top+l.bottom)/2,p=i&&d.animateScale,x=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:N,includeOptions:b}=this._getSharedOptions(a,r);let C=this._getRotation(),w;for(w=0;w<a;++w)C+=this._circumference(w,i);for(w=a;w<a+s;++w){const S=this._circumference(w,i),E=t[w],k={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+S,circumference:S,outerRadius:v,innerRadius:x};b&&(k.options=N||this.resolveDataElementOptions(w,E.active?"active":r)),C+=S,this.updateElement(E,w,k,r)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let s=0,r;for(r=0;r<a.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?Sa*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=$D(a._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(a+=this._getRingWeight(s));return a}_getRingWeight(t){return Math.max(dn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class QBe extends t1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=a,o=this.chart._animationsDisabled;let{start:l,count:c}=p8e(a,r,o);this._drawStart=l,this._drawCount=c,x8e(a)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},t),this.updateElements(r,l,c,t)}updateElements(t,a,s,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(a,r),p=o.axis,x=l.axis,{spanGaps:v,segment:N}=this.options,b=Gp(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||r==="none",w=a+s,S=t.length;let E=a>0&&this.getParsed(a-1);for(let k=0;k<S;++k){const _=t[k],A=C?_:{};if(k<a||k>=w){A.skip=!0;continue}const T=this.getParsed(k),$=Ln(T[x]),z=A[p]=o.getPixelForValue(T[p],k),F=A[x]=i||$?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,T,c):T[x],k);A.skip=isNaN(z)||isNaN(F)||$,A.stop=k>0&&Math.abs(T[p]-E[p])>b,N&&(A.parsed=T,A.raw=d.data[k]),f&&(A.options=u||this.resolveDataElementOptions(k,_.active?"active":r)),C||this.updateElement(_,k,A,r),E=T}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,s=a.options&&a.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class YBe extends VBe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function qd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qD{static override(t){Object.assign(qD.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return qd()}parse(){return qd()}format(){return qd()}add(){return qd()}diff(){return qd()}startOf(){return qd()}endOf(){return qd()}}var KBe={_date:qD};function XBe(e,t,a,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const d=l._reversePixels?u8e:mu;if(s){if(r._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const p=d(i,t,a-f),x=d(i,t,a+f);return{lo:p.lo,hi:x.hi}}}}else{const u=d(i,t,a);if(c){const{vScale:f}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,u.lo+1).reverse().findIndex(N=>!Ln(N[f.axis]));u.lo-=Math.max(0,x);const v=p.slice(u.hi).findIndex(N=>!Ln(N[f.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function n1(e,t,a,s,r){const i=e.getSortedVisibleDatasetMetas(),o=a[t];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:f,hi:p}=XBe(i[l],t,o,r);for(let x=f;x<=p;++x){const v=u[x];v.skip||s(v,d,x)}}}function ZBe(e){const t=e.indexOf("x")!==-1,a=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=a?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function GA(e,t,a,s,r){const i=[];return!r&&!e.isPointInArea(t)||n1(e,a,t,function(l,c,d){!r&&!qp(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function JBe(e,t,a,s){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=iJ(o,{x:t.x,y:t.y});Wp(f,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return n1(e,a,t,i),r}function eHe(e,t,a,s,r,i){let o=[];const l=ZBe(a);let c=Number.POSITIVE_INFINITY;function d(u,f,p){const x=u.inRange(t.x,t.y,r);if(s&&!x)return;const v=u.getCenterPoint(r);if(!(!!i||e.isPointInArea(v))&&!x)return;const b=l(t,v);b<c?(o=[{element:u,datasetIndex:f,index:p}],c=b):b===c&&o.push({element:u,datasetIndex:f,index:p})}return n1(e,a,t,d),o}function WA(e,t,a,s,r,i){return!i&&!e.isPointInArea(t)?[]:a==="r"&&!s?JBe(e,t,a,r):eHe(e,t,a,s,r,i)}function V8(e,t,a,s,r){const i=[],o=a==="x"?"inXRange":"inYRange";let l=!1;return n1(e,a,t,(c,d,u)=>{c[o]&&c[o](t[a],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var tHe={modes:{index(e,t,a,s){const r=Jd(t,e),i=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?GA(e,r,i,s,o):WA(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,a,s){const r=Jd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?GA(e,r,i,s,o):WA(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=e.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(e,t,a,s){const r=Jd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return GA(e,r,i,s,o)},nearest(e,t,a,s){const r=Jd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return WA(e,r,i,a.intersect,s,o)},x(e,t,a,s){const r=Jd(t,e);return V8(e,r,"x",a.intersect,s)},y(e,t,a,s){const r=Jd(t,e);return V8(e,r,"y",a.intersect,s)}}};const SJ=["left","top","right","bottom"];function Sg(e,t){return e.filter(a=>a.pos===t)}function Q8(e,t){return e.filter(a=>SJ.indexOf(a.pos)===-1&&a.box.axis===t)}function _g(e,t){return e.sort((a,s)=>{const r=t?s:a,i=t?a:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function nHe(e){const t=[];let a,s,r,i,o,l;for(a=0,s=(e||[]).length;a<s;++a)r=e[a],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function aHe(e){const t={};for(const a of e){const{stack:s,pos:r,stackWeight:i}=a;if(!s||!SJ.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function sHe(e,t){const a=aHe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,d=a[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=u?u*r:c&&t.availableHeight)}return a}function rHe(e){const t=nHe(e),a=_g(t.filter(d=>d.box.fullSize),!0),s=_g(Sg(t,"left"),!0),r=_g(Sg(t,"right")),i=_g(Sg(t,"top"),!0),o=_g(Sg(t,"bottom")),l=Q8(t,"x"),c=Q8(t,"y");return{fullSize:a,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Sg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function Y8(e,t,a,s){return Math.max(e[a],t[a])+Math.max(e[s],t[s])}function _J(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function iHe(e,t,a,s){const{pos:r,box:i}=a,o=e.maxPadding;if(!jn(r)){a.size&&(e[r]-=a.size);const f=s[a.stack]||{size:0,count:1};f.size=Math.max(f.size,a.horizontal?i.height:i.width),a.size=f.size/f.count,e[r]+=a.size}i.getPadding&&_J(o,i.getPadding());const l=Math.max(0,t.outerWidth-Y8(o,e,"left","right")),c=Math.max(0,t.outerHeight-Y8(o,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function oHe(e){const t=e.maxPadding;function a(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function lHe(e,t){const a=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],a[o])}),i}return s(e?["left","right"]:["top","bottom"])}function Wg(e,t,a,s){const r=[];let i,o,l,c,d,u;for(i=0,o=e.length,d=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,lHe(l.horizontal,t));const{same:f,other:p}=iHe(t,a,l,s);d|=f&&r.length,u=u||p,c.fullSize||r.push(l)}return d&&Wg(r,t,a,s)||u}function jb(e,t,a,s,r){e.top=a,e.left=t,e.right=t+s,e.bottom=a+r,e.width=s,e.height=r}function K8(e,t,a,s){const r=a.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,d=s[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const f=t.w*u,p=d.size||c.height;Hp(d.start)&&(o=d.start),c.fullSize?jb(c,r.left,o,a.outerWidth-r.right-r.left,p):jb(c,t.left+d.placed,o,f,p),d.start=o,d.placed+=f,o=c.bottom}else{const f=t.h*u,p=d.size||c.width;Hp(d.start)&&(i=d.start),c.fullSize?jb(c,i,r.top,p,a.outerHeight-r.bottom-r.top):jb(c,i,t.top+d.placed,p,f),d.start=i,d.placed+=f,i=c.right}}t.x=i,t.y=o}var hi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},e.boxes.push(t)},removeBox(e,t){const a=e.boxes?e.boxes.indexOf(t):-1;a!==-1&&e.boxes.splice(a,1)},configure(e,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(e,t,a,s){if(!e)return;const r=ji(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(a-r.height,0),l=rHe(e.boxes),c=l.vertical,d=l.horizontal;In(e.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const u=c.reduce((N,b)=>b.box.options&&b.box.options.display===!1?N:N+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},r);_J(p,ji(s));const x=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),v=sHe(c.concat(d),f);Wg(l.fullSize,x,f,v),Wg(c,x,f,v),Wg(d,x,f,v)&&Wg(c,x,f,v),oHe(x),K8(l.leftAndTop,x,f,v),x.x+=x.w,x.y+=x.h,K8(l.rightAndBottom,x,f,v),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},In(l.chartArea,N=>{const b=N.box;Object.assign(b,e.chartArea),b.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class AJ{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,s){}removeEventListener(t,a,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,s,r){return a=Math.max(0,a||t.width),s=s||t.height,{width:a,height:Math.max(0,r?Math.floor(a/r):s)}}isAttached(t){return!0}updateConfig(t){}}class cHe extends AJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Jb="$chartjs",dHe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},X8=e=>e===null||e==="";function uHe(e,t){const a=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[Jb]={initial:{height:s,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",X8(r)){const i=O8(e,"width");i!==void 0&&(e.width=i)}if(X8(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=O8(e,"height");i!==void 0&&(e.height=i)}return e}const TJ=iBe?{passive:!0}:!1;function mHe(e,t,a){e&&e.addEventListener(t,a,TJ)}function fHe(e,t,a){e&&e.canvas&&e.canvas.removeEventListener(t,a,TJ)}function hHe(e,t){const a=dHe[e.type]||e.type,{x:s,y:r}=Jd(e,t);return{type:a,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function _w(e,t){for(const a of e)if(a===t||a.contains(t))return!0}function gHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||_w(l.addedNodes,s),o=o&&!_w(l.removedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function pHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||_w(l.removedNodes,s),o=o&&!_w(l.addedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const Qp=new Map;let Z8=0;function EJ(){const e=window.devicePixelRatio;e!==Z8&&(Z8=e,Qp.forEach((t,a)=>{a.currentDevicePixelRatio!==e&&t()}))}function xHe(e,t){Qp.size||window.addEventListener("resize",EJ),Qp.set(e,t)}function yHe(e){Qp.delete(e),Qp.size||window.removeEventListener("resize",EJ)}function bHe(e,t,a){const s=e.canvas,r=s&&WD(s);if(!r)return;const i=dJ((l,c)=>{const d=r.clientWidth;a(l,c),d<r.clientWidth&&a()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),xHe(e,i),o}function qA(e,t,a){a&&a.disconnect(),t==="resize"&&yHe(e)}function vHe(e,t,a){const s=e.canvas,r=dJ(i=>{e.ctx!==null&&a(hHe(i,e))},e);return mHe(s,t,r),r}class wHe extends AJ{acquireContext(t,a){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(uHe(t,a),s):null}releaseContext(t){const a=t.canvas;if(!a[Jb])return!1;const s=a[Jb].initial;["height","width"].forEach(i=>{const o=s[i];Ln(o)?a.removeAttribute(i):a.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[Jb],!0}addEventListener(t,a,s){this.removeEventListener(t,a);const r=t.$proxies||(t.$proxies={}),o={attach:gHe,detach:pHe,resize:bHe}[a]||vHe;r[a]=o(t,a,s)}removeEventListener(t,a){const s=t.$proxies||(t.$proxies={}),r=s[a];if(!r)return;({attach:qA,detach:qA,resize:qA}[a]||fHe)(t,a,r),s[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,s,r){return rBe(t,a,s,r)}isAttached(t){const a=t&&WD(t);return!!(a&&a.isConnected)}}function NHe(e){return!GD()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?cHe:wHe}let cc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}hasValue(){return Gp(this.x)&&Gp(this.y)}getProps(t,a){const s=this.$animations;if(!a||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function jHe(e,t){const a=e.options.ticks,s=CHe(e),r=Math.min(a.maxTicksLimit||s,s),i=a.major.enabled?_He(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return AHe(t,d,i,o/r),d;const u=SHe(i,t,r);if(o>0){let f,p;const x=o>1?Math.round((c-l)/(o-1)):null;for(Cb(t,d,u,Ln(x)?0:l-x,l),f=0,p=o-1;f<p;f++)Cb(t,d,u,i[f],i[f+1]);return Cb(t,d,u,c,Ln(x)?t.length:c+x),d}return Cb(t,d,u),d}function CHe(e){const t=e.options.offset,a=e._tickSize(),s=e._length/a+(t?0:1),r=e._maxLength/a;return Math.floor(Math.min(s,r))}function SHe(e,t,a){const s=THe(e),r=t.length/a;if(!s)return Math.max(r,1);const i=s8e(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function _He(e){const t=[];let a,s;for(a=0,s=e.length;a<s;a++)e[a].major&&t.push(a);return t}function AHe(e,t,a,s){let r=0,i=a[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=a[r*s])}function Cb(e,t,a,s,r){const i=dn(s,0),o=Math.min(dn(r,e.length),e.length);let l=0,c,d,u;for(a=Math.ceil(a),r&&(c=r-s,a=c/Math.floor(c/a)),u=i;u<0;)l++,u=Math.round(i+l*a);for(d=Math.max(i,0);d<o;d++)d===u&&(t.push(e[d]),l++,u=Math.round(i+l*a))}function THe(e){const t=e.length;let a,s;if(t<2)return!1;for(s=e[0],a=1;a<t;++a)if(e[a]-e[a-1]!==s)return!1;return s}const EHe=e=>e==="left"?"right":e==="right"?"left":e,J8=(e,t,a)=>t==="top"||t==="left"?e[t]+a:e[t]-a,eB=(e,t)=>Math.min(t||e,e);function tB(e,t){const a=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)a.push(e[Math.floor(i)]);return a}function kHe(e,t,a){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),d;if(!(a&&(s===1?d=Math.max(c-i,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(r-1))/2,c+=r<t?d:-d,c<i-l||c>o+l)))return c}function LHe(e,t){In(e,a=>{const s=a.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete a.data[s[i]];s.splice(0,r)}})}function Ag(e){return e.drawTicks?e.tickLength:0}function nB(e,t){if(!e.display)return 0;const a=Is(e.font,t),s=ji(e.padding);return(as(e.text)?e.text.length:1)*a.lineHeight+s.height}function PHe(e,t){return tm(e,{scale:t,type:"scale"})}function DHe(e,t,a){return tm(e,{tick:a,index:t,type:"tick"})}function OHe(e,t,a){let s=MD(e);return(a&&t!=="right"||!a&&t==="right")&&(s=EHe(s)),s}function MHe(e,t,a,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let f=0,p,x,v;const N=o-r,b=l-i;if(e.isHorizontal()){if(x=Ls(s,i,l),jn(a)){const C=Object.keys(a)[0],w=a[C];v=u[C].getPixelForValue(w)+N-t}else a==="center"?v=(d.bottom+d.top)/2+N-t:v=J8(e,a,t);p=l-i}else{if(jn(a)){const C=Object.keys(a)[0],w=a[C];x=u[C].getPixelForValue(w)-b+t}else a==="center"?x=(d.left+d.right)/2-b+t:x=J8(e,a,t);v=Ls(s,o,r),f=a==="left"?-ss:ss}return{titleX:x,titleY:v,maxWidth:p,rotation:f}}class mh extends cc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:s,_suggestedMax:r}=this;return t=fo(t,Number.POSITIVE_INFINITY),a=fo(a,Number.NEGATIVE_INFINITY),s=fo(s,Number.POSITIVE_INFINITY),r=fo(r,Number.NEGATIVE_INFINITY),{min:fo(t,s),max:fo(a,r),minDefined:Ni(t),maxDefined:Ni(a)}}getMinMax(t){let{min:a,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:a,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,t),r||(a=Math.min(a,o.min)),i||(s=Math.max(s,o.max));return a=i&&a>s?s:a,s=r&&a>s?a:s,{min:fo(a,fo(s,a)),max:fo(s,fo(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ea(this.options.beforeUpdate,[this])}update(t,a,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$8e(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?tB(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=jHe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,s;this.isHorizontal()?(a=this.left,s=this.right):(a=this.top,s=this.bottom,t=!t),this._startPixel=a,this._endPixel=s,this._reversePixels=t,this._length=s-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ea(this.options.afterUpdate,[this])}beforeSetDimensions(){ea(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ea(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ea(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ea(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=ea(a.callback,[i.value,s,t],this)}afterTickToLabelConversion(){ea(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ea(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,s=eB(this.ticks.length,t.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!a.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,x=Ms(this.chart.width-f,0,this.maxWidth);l=t.offset?this.maxWidth/s:x/(s-1),f+6>l&&(l=x/(s-(t.offset?.5:1)),c=this.maxHeight-Ag(t.grid)-a.padding-nB(t.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),o=l8e(Math.min(Math.asin(Ms((u.highest.height+6)/l,-1,1)),Math.asin(Ms(c/d,-1,1))-Math.asin(Ms(p/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ea(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ea(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=nB(r,a.options.font);if(l?(t.width=this.maxWidth,t.height=Ag(i)+c):(t.height=this.maxHeight,t.width=Ag(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:f,highest:p}=this._getLabelSizes(),x=s.padding*2,v=Tl(this.labelRotation),N=Math.cos(v),b=Math.sin(v);if(l){const C=s.mirror?0:b*f.width+N*p.height;t.height=Math.min(this.maxHeight,t.height+C+x)}else{const C=s.mirror?0:N*f.width+b*p.height;t.width=Math.min(this.maxWidth,t.width+C+x)}this._calculatePadding(d,u,b,N)}}this._handleMargins(),l?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?d?(p=r*t.width,x=s*a.height):(p=s*t.height,x=r*a.width):i==="start"?x=a.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=a.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-f+o)*this.width/(this.width-f),0)}else{let u=a.height/2,f=t.height/2;i==="start"?(u=0,f=t.height):i==="end"&&(u=a.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ea(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,s;for(a=0,s=t.length;a<s;a++)Ln(t[a].label)&&(t.splice(a,1),s--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let s=this.ticks;a<s.length&&(s=tB(s,a)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(a/eB(a,s));let d=0,u=0,f,p,x,v,N,b,C,w,S,E,k;for(f=0;f<a;f+=c){if(v=t[f].label,N=this._resolveTickFontOptions(f),r.font=b=N.string,C=i[b]=i[b]||{data:{},gc:[]},w=N.lineHeight,S=E=0,!Ln(v)&&!as(v))S=E8(r,C.data,C.gc,S,v),E=w;else if(as(v))for(p=0,x=v.length;p<x;++p)k=v[p],!Ln(k)&&!as(k)&&(S=E8(r,C.data,C.gc,S,k),E+=w);o.push(S),l.push(E),d=Math.max(S,d),u=Math.max(E,u)}LHe(i,a);const _=o.indexOf(d),A=l.indexOf(u),T=$=>({width:o[$]||0,height:l[$]||0});return{first:T(0),last:T(a-1),widest:T(_),highest:T(A),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return d8e(this._alignToPixels?Wd(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const s=a[t];return s.$context||(s.$context=DHe(this.getContext(),t,s))}return this.$context||(this.$context=PHe(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=Tl(this.labelRotation),s=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=Ag(i),x=[],v=l.setContext(this.getContext()),N=v.display?v.width:0,b=N/2,C=function(V){return Wd(s,V,N)};let w,S,E,k,_,A,T,$,z,F,P,M;if(o==="top")w=C(this.bottom),A=this.bottom-p,$=w-b,F=C(t.top)+b,M=t.bottom;else if(o==="bottom")w=C(this.top),F=t.top,M=C(t.bottom)-b,A=w+b,$=this.top+p;else if(o==="left")w=C(this.right),_=this.right-p,T=w-b,z=C(t.left)+b,P=t.right;else if(o==="right")w=C(this.left),z=t.left,P=C(t.right)-b,_=w+b,T=this.left+p;else if(a==="x"){if(o==="center")w=C((t.top+t.bottom)/2+.5);else if(jn(o)){const V=Object.keys(o)[0],X=o[V];w=C(this.chart.scales[V].getPixelForValue(X))}F=t.top,M=t.bottom,A=w+b,$=A+p}else if(a==="y"){if(o==="center")w=C((t.left+t.right)/2);else if(jn(o)){const V=Object.keys(o)[0],X=o[V];w=C(this.chart.scales[V].getPixelForValue(X))}_=w-b,T=_-p,z=t.left,P=t.right}const G=dn(r.ticks.maxTicksLimit,f),Q=Math.max(1,Math.ceil(f/G));for(S=0;S<f;S+=Q){const V=this.getContext(S),X=i.setContext(V),q=l.setContext(V),ne=X.lineWidth,oe=X.color,K=q.dash||[],R=q.dashOffset,ye=X.tickWidth,pe=X.tickColor,Ne=X.tickBorderDash||[],Se=X.tickBorderDashOffset;E=kHe(this,S,c),E!==void 0&&(k=Wd(s,E,ne),d?_=T=z=P=k:A=$=F=M=k,x.push({tx1:_,ty1:A,tx2:T,ty2:$,x1:z,y1:F,x2:P,y2:M,width:ne,color:oe,borderDash:K,borderDashOffset:R,tickWidth:ye,tickColor:pe,tickBorderDash:Ne,tickBorderDashOffset:Se}))}return this._ticksLength=f,this._borderValue=w,x}_computeLabelItems(t){const a=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=i,p=Ag(s.grid),x=p+u,v=f?-u:x,N=-Tl(this.labelRotation),b=[];let C,w,S,E,k,_,A,T,$,z,F,P,M="middle";if(r==="top")_=this.bottom-v,A=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+v,A=this._getXAxisLabelAlignment();else if(r==="left"){const Q=this._getYAxisLabelAlignment(p);A=Q.textAlign,k=Q.x}else if(r==="right"){const Q=this._getYAxisLabelAlignment(p);A=Q.textAlign,k=Q.x}else if(a==="x"){if(r==="center")_=(t.top+t.bottom)/2+x;else if(jn(r)){const Q=Object.keys(r)[0],V=r[Q];_=this.chart.scales[Q].getPixelForValue(V)+x}A=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")k=(t.left+t.right)/2-x;else if(jn(r)){const Q=Object.keys(r)[0],V=r[Q];k=this.chart.scales[Q].getPixelForValue(V)}A=this._getYAxisLabelAlignment(p).textAlign}a==="y"&&(c==="start"?M="top":c==="end"&&(M="bottom"));const G=this._getLabelSizes();for(C=0,w=l.length;C<w;++C){S=l[C],E=S.label;const Q=i.setContext(this.getContext(C));T=this.getPixelForTick(C)+i.labelOffset,$=this._resolveTickFontOptions(C),z=$.lineHeight,F=as(E)?E.length:1;const V=F/2,X=Q.color,q=Q.textStrokeColor,ne=Q.textStrokeWidth;let oe=A;o?(k=T,A==="inner"&&(C===w-1?oe=this.options.reverse?"left":"right":C===0?oe=this.options.reverse?"right":"left":oe="center"),r==="top"?d==="near"||N!==0?P=-F*z+z/2:d==="center"?P=-G.highest.height/2-V*z+z:P=-G.highest.height+z/2:d==="near"||N!==0?P=z/2:d==="center"?P=G.highest.height/2-V*z:P=G.highest.height-F*z,f&&(P*=-1),N!==0&&!Q.showLabelBackdrop&&(k+=z/2*Math.sin(N))):(_=T,P=(1-F)*z/2);let K;if(Q.showLabelBackdrop){const R=ji(Q.backdropPadding),ye=G.heights[C],pe=G.widths[C];let Ne=P-R.top,Se=0-R.left;switch(M){case"middle":Ne-=ye/2;break;case"bottom":Ne-=ye;break}switch(A){case"center":Se-=pe/2;break;case"right":Se-=pe;break;case"inner":C===w-1?Se-=pe:C>0&&(Se-=pe/2);break}K={left:Se,top:Ne,width:pe+R.width,height:ye+R.height,color:Q.backdropColor}}b.push({label:E,font:$,textOffset:P,options:{rotation:N,color:X,strokeColor:q,strokeWidth:ne,textAlign:oe,textBaseline:M,translation:[k,_],backdrop:K}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-Tl(this.labelRotation))return t==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let d,u;return a==="left"?r?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):a==="right"?r?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:s,top:r,width:i,height:o}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const a=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(a.display)for(i=0,o=r.length;i<o;++i){const c=r[i];a.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,f,p;this.isHorizontal()?(d=Wd(t,this.left,o)-o/2,u=Wd(t,this.right,l)+l/2,f=p=c):(f=Wd(t,this.top,o)-o/2,p=Wd(t,this.bottom,l)+l/2,d=u=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(d,f),a.lineTo(u,p),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&RD(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;Vp(s,d,0,u,c,l)}r&&zD(s)}drawTitle(){const{ctx:t,options:{position:a,title:s,reverse:r}}=this;if(!s.display)return;const i=Is(s.font),o=ji(s.padding),l=s.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||jn(a)?(c+=o.bottom,as(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:f,rotation:p}=MHe(this,c,a,l);Vp(t,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:p,textAlign:OHe(l,a,r),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,s=dn(t.grid&&t.grid.z,-1),r=dn(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==mh.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=a.length;i<o;++i){const l=a[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return Is(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Sb{constructor(t,a,s){this.type=t,this.scope=a,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let s;RHe(a)&&(s=this.register(a));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,IHe(t,o,s),this.override&&Da.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const a=this.items,s=t.id,r=this.scope;s in a&&delete a[s],r&&s in Da[r]&&(delete Da[r][s],this.override&&delete Hu[s])}}function IHe(e,t,a){const s=Bp(Object.create(null),[a?Da.get(a):{},Da.get(t),e.defaults]);Da.set(t,s),e.defaultRoutes&&$He(t,e.defaultRoutes),e.descriptors&&Da.describe(t,e.descriptors)}function $He(e,t){Object.keys(t).forEach(a=>{const s=a.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[a].split("."),l=o.pop(),c=o.join(".");Da.route(i,r,c,l)})}function RHe(e){return"id"in e&&"defaults"in e}class zHe{constructor(){this.controllers=new Sb(t1,"datasets",!0),this.elements=new Sb(cc,"elements"),this.plugins=new Sb(Object,"plugins"),this.scales=new Sb(mh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,s){[...a].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):In(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,a,s){const r=DD(t);ea(s["before"+r],[],s),a[t](s),ea(s["after"+r],[],s)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const s=this._typedRegistries[a];if(s.isForType(t))return s}return this.plugins}_get(t,a,s){const r=a.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var yo=new zHe;class UHe{constructor(){this._init=void 0}notify(t,a,s,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,a,s);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,a,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[a,r,i.options];if(ea(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ln(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const s=t&&t.config,r=dn(s.options&&s.options.plugins,{}),i=FHe(s);return r===!1&&!a?[]:HHe(t,i,r,a)}_notifyStateChanges(t){const a=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(a,s),t,"stop"),this._notify(r(s,a),t,"start")}}function FHe(e){const t={},a=[],s=Object.keys(yo.plugins.items);for(let i=0;i<s.length;i++)a.push(yo.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];a.indexOf(o)===-1&&(a.push(o),t[o.id]=!0)}return{plugins:a,localIds:t}}function BHe(e,t){return!t&&e===!1?null:e===!0?{}:e}function HHe(e,{plugins:t,localIds:a},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,d=BHe(s[c],r);d!==null&&i.push({plugin:l,options:GHe(e.config,{plugin:l,local:a[c]},d,o)})}return i}function GHe(e,{plugin:t,local:a},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return a&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ok(e,t){const a=Da.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function WHe(e,t){let a=e;return e==="_index_"?a=t:e==="_value_"&&(a=t==="x"?"y":"x"),a}function qHe(e,t){return e===t?"_index_":"_value_"}function aB(e){if(e==="x"||e==="y"||e==="r")return e}function VHe(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Mk(e,...t){if(aB(e))return e;for(const a of t){const s=a.axis||VHe(a.position)||e.length>1&&aB(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function sB(e,t,a){if(a[t+"AxisID"]===e)return{axis:t}}function QHe(e,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(a.length)return sB(e,"x",a[0])||sB(e,"y",a[0])}return{}}function YHe(e,t){const a=Hu[e.type]||{scales:{}},s=t.scales||{},r=Ok(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!jn(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Mk(o,l,QHe(o,e),Da.scales[l.type]),d=qHe(c,r),u=a.scales||{};i[o]=ap(Object.create(null),[{axis:c},l,u[c],u[d]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||Ok(l,t),u=(Hu[l]||{}).scales||{};Object.keys(u).forEach(f=>{const p=WHe(f,c),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),ap(i[x],[{axis:p},s[x],u[f]])})}),Object.keys(i).forEach(o=>{const l=i[o];ap(l,[Da.scales[l.type],Da.scale])}),i}function kJ(e){const t=e.options||(e.options={});t.plugins=dn(t.plugins,{}),t.scales=YHe(e,t)}function LJ(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function KHe(e){return e=e||{},e.data=LJ(e.data),kJ(e),e}const rB=new Map,PJ=new Set;function _b(e,t){let a=rB.get(e);return a||(a=t(),rB.set(e,a),PJ.add(a)),a}const Tg=(e,t,a)=>{const s=Bu(t,a);s!==void 0&&e.add(s)};class XHe{constructor(t){this._config=KHe(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=LJ(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),kJ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return _b(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return _b(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return _b(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,s=this.type;return _b(`${s}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const s=this._scopeCache;let r=s.get(t);return(!r||a)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,a,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(a);if(l)return l;const c=new Set;a.forEach(u=>{t&&(c.add(t),u.forEach(f=>Tg(c,t,f))),u.forEach(f=>Tg(c,r,f)),u.forEach(f=>Tg(c,Hu[i]||{},f)),u.forEach(f=>Tg(c,Da,f)),u.forEach(f=>Tg(c,Pk,f))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),PJ.has(a)&&o.set(a,d),d}chartOptionScopes(){const{options:t,type:a}=this;return[t,Hu[a]||{},Da.datasets[a]||{},{type:a},Da,Pk]}resolveNamedOptions(t,a,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=iB(this._resolverCache,t,r);let c=o;if(JHe(o,a)){i.$shared=!1,s=pd(s)?s():s;const d=this.createResolver(t,s,l);c=$f(o,s,d)}for(const d of a)i[d]=c[d];return i}createResolver(t,a,s=[""],r){const{resolver:i}=iB(this._resolverCache,t,s);return jn(a)?$f(i,a,void 0,r):i}}function iB(e,t,a){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=a.join();let i=s.get(r);return i||(i={resolver:FD(t,a),subPrefixes:a.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const ZHe=e=>jn(e)&&Object.getOwnPropertyNames(e).some(t=>pd(e[t]));function JHe(e,t){const{isScriptable:a,isIndexable:s}=hJ(e);for(const r of t){const i=a(r),o=s(r),l=(o||i)&&e[r];if(i&&(pd(l)||ZHe(l))||o&&as(l))return!0}return!1}var e9e="4.5.1";const t9e=["top","bottom","left","right","chartArea"];function oB(e,t){return e==="top"||e==="bottom"||t9e.indexOf(e)===-1&&t==="x"}function lB(e,t){return function(a,s){return a[e]===s[e]?a[t]-s[t]:a[e]-s[e]}}function cB(e){const t=e.chart,a=t.options.animation;t.notifyPlugins("afterRender"),ea(a&&a.onComplete,[e],t)}function n9e(e){const t=e.chart,a=t.options.animation;ea(a&&a.onProgress,[e],t)}function DJ(e){return GD()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ev={},dB=e=>{const t=DJ(e);return Object.values(ev).filter(a=>a.canvas===t).pop()};function a9e(e,t,a){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(a>0||i>t)&&(e[i+a]=o)}}}function s9e(e,t,a,s){return!a||e.type==="mouseout"?null:s?t:e}let a1=class{static defaults=Da;static instances=ev;static overrides=Hu;static registry=yo;static version=e9e;static getChart=dB;static register(...t){yo.add(...t),uB()}static unregister(...t){yo.remove(...t),uB()}constructor(t,a){const s=this.config=new XHe(a),r=DJ(t),i=dB(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||NHe(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=Y7e(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new UHe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=h8e(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],ev[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}bl.listen(this,"complete",cB),bl.listen(this,"progress",n9e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:s,height:r,_aspectRatio:i}=this;return Ln(t)?a&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return yo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():D8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return k8(this.canvas,this.ctx),this}stop(){return bl.stop(this),this}resize(t,a){bl.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,a,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,D8(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ea(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};In(a,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,a=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];a&&(i=i.concat(Object.keys(a).map(o=>{const l=a[o],c=Mk(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),In(i,o=>{const l=o.options,c=l.id,d=Mk(c,l),u=dn(l.type,o.dtype);(l.position===void 0||oB(l.position,d)!==oB(o.dposition))&&(l.position=o.dposition),r[c]=!0;let f=null;if(c in s&&s[c].type===u)f=s[c];else{const p=yo.getScale(u);f=new p({id:c,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(l,t)}),In(r,(o,l)=>{o||delete s[l]}),In(s,o=>{hi.configure(this,o,o.options),hi.addBox(this,o)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>a){for(let r=a;r<s;++r)this._destroyDatasetMeta(r);t.splice(a,s-a)}this._sortedMetasets=t.slice(0).sort(lB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((s,r)=>{a.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=a.length;s<r;s++){const i=a[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||Ok(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=yo.getController(l),{datasetElementType:d,dataElementType:u}=Da.datasets[l];Object.assign(c,{dataElementType:yo.getElement(u),datasetElementType:d&&yo.getElement(d)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){In(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const s=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:f}=this.getDatasetMeta(d),p=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||In(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(lB("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){In(this.scales,t=>{hi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!v8(a,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of a){const o=s==="_removeElements"?-i:i;a9e(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<a;i++)if(!v8(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hi.update(this,this.width,this.height,t);const a=this.chartArea,s=a.width<=0||a.height<=0;this._layers=[],In(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,s=this.data.datasets.length;a<s;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,s=this.data.datasets.length;a<s;++a)this._updateDataset(a,pd(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bl.has(this)?this.attached&&!bl.running(this)&&bl.start(this):(this.draw(),cB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,s=[];let r,i;for(r=0,i=a.length;r<i;++r){const o=a[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=vBe(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&RD(a,r),t.controller.draw(),r&&zD(a),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return qp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,s,r){const i=tHe.modes[a];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const a=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=tm(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!a.hidden}setDatasetVisibility(t,a){const s=this.getDatasetMeta(t);s.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);Hp(a)?(i.data[a].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),bl.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),k8(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete ev[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,s=(i,o)=>{a.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};In(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,s=(c,d)=>{a.addEventListener(this,c,d),t[c]=d},r=(c,d)=>{t[c]&&(a.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},a.isAttached(this.canvas)?l():o()}unbindEvents(){In(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},In(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,s){const r=s?"set":"remove";let i,o,l,c;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!ww(s,a)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,a))}notifyPlugins(t,a,s){return this._plugins.notify(this,t,a,s)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,s){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(a,t),l=s?t:i(t,a);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,a){const s={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,a,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,a,s){const{_active:r=[],options:i}=this,o=a,l=this._getActiveElements(t,r,s,o),c=t8e(t),d=s9e(t,this._lastEvent,s,c);s&&(this._lastEvent=null,ea(i.onHover,[t,l,this],this),c&&ea(i.onClick,[t,l,this],this));const u=!ww(l,r);return(u||a)&&(this._active=l,this._updateHoverStyles(l,r,a)),this._lastEvent=d,u}_getActiveElements(t,a,s,r){if(t.type==="mouseout")return[];if(!s)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function uB(){return In(a1.instances,e=>e._plugins.invalidate())}function r9e(e,t,a){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,f=Math.min(d/o,zi(s-a));if(e.beginPath(),e.arc(r,i,o-d/2,s+f/2,a-f/2),l>0){const p=Math.min(d/l,zi(s-a));e.arc(r,i,l+d/2,a-p/2,s+p/2,!0)}else{const p=Math.min(d/2,o*zi(s-a));if(u==="round")e.arc(r,i,p,a-Rn/2,s+Rn/2,!0);else if(u==="bevel"){const x=2*p*p,v=-x*Math.cos(a+Rn/2)+r,N=-x*Math.sin(a+Rn/2)+i,b=x*Math.cos(s+Rn/2)+r,C=x*Math.sin(s+Rn/2)+i;e.lineTo(v,N),e.lineTo(b,C)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function i9e(e,t,a){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=r/l;e.beginPath(),e.arc(i,o,l,s-d,a+d),c>r?(d=r/c,e.arc(i,o,c,a+d,s-d,!0)):e.arc(i,o,r,a+ss,s-ss),e.closePath(),e.clip()}function o9e(e){return UD(e,["outerStart","outerEnd","innerStart","innerEnd"])}function l9e(e,t,a,s){const r=o9e(e.options.borderRadius),i=(a-t)/2,o=Math.min(i,s*t/2),l=c=>{const d=(a-Math.min(i,c))*s/2;return Ms(c,0,Math.min(i,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Ms(r.innerStart,0,o),innerEnd:Ms(r.innerEnd,0,o)}}function Zm(e,t,a,s){return{x:a+e*Math.cos(t),y:s+e*Math.sin(t)}}function Aw(e,t,a,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=t,f=Math.max(t.outerRadius+s+a-d,0),p=u>0?u+s+a+d:0;let x=0;const v=r-c;if(s){const Q=u>0?u-s:0,V=f>0?f-s:0,X=(Q+V)/2,q=X!==0?v*X/(X+s):v;x=(v-q)/2}const N=Math.max(.001,v*f-a/Rn)/f,b=(v-N)/2,C=c+b+x,w=r-b-x,{outerStart:S,outerEnd:E,innerStart:k,innerEnd:_}=l9e(t,p,f,w-C),A=f-S,T=f-E,$=C+S/A,z=w-E/T,F=p+k,P=p+_,M=C+k/F,G=w-_/P;if(e.beginPath(),i){const Q=($+z)/2;if(e.arc(o,l,f,$,Q),e.arc(o,l,f,Q,z),E>0){const ne=Zm(T,z,o,l);e.arc(ne.x,ne.y,E,z,w+ss)}const V=Zm(P,w,o,l);if(e.lineTo(V.x,V.y),_>0){const ne=Zm(P,G,o,l);e.arc(ne.x,ne.y,_,w+ss,G+Math.PI)}const X=(w-_/p+(C+k/p))/2;if(e.arc(o,l,p,w-_/p,X,!0),e.arc(o,l,p,X,C+k/p,!0),k>0){const ne=Zm(F,M,o,l);e.arc(ne.x,ne.y,k,M+Math.PI,C-ss)}const q=Zm(A,C,o,l);if(e.lineTo(q.x,q.y),S>0){const ne=Zm(A,$,o,l);e.arc(ne.x,ne.y,S,C-ss,$)}}else{e.moveTo(o,l);const Q=Math.cos($)*f+o,V=Math.sin($)*f+l;e.lineTo(Q,V);const X=Math.cos(z)*f+o,q=Math.sin(z)*f+l;e.lineTo(X,q)}e.closePath()}function c9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){Aw(e,t,a,s,c,r);for(let d=0;d<i;++d)e.fill();isNaN(l)||(c=o+(l%Sa||Sa))}return Aw(e,t,a,s,c,r),e.fill(),c}function d9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:p,borderRadius:x}=c,v=c.borderAlign==="inner";if(!d)return;e.setLineDash(f||[]),e.lineDashOffset=p,v?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let N=t.endAngle;if(i){Aw(e,t,a,s,N,r);for(let b=0;b<i;++b)e.stroke();isNaN(l)||(N=o+(l%Sa||Sa))}v&&i9e(e,t,N),c.selfJoin&&N-o>=Rn&&x===0&&u!=="miter"&&r9e(e,t,N),i||(Aw(e,t,a,s,N,r),e.stroke())}class u9e extends cc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.getProps(["x","y"],s),{angle:i,distance:o}=iJ(r,{x:t,y:a}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=dn(f,c-l),v=Wp(i,l,c)&&l!==c,N=x>=Sa||v,b=ed(o,d+p,u+p);return N&&b}getCenterPoint(t){const{x:a,y:s,startAngle:r,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:d}=this.options,u=(r+i)/2,f=(o+l+d+c)/2;return{x:a+Math.cos(u)*f,y:s+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:a,circumference:s}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=s>Sa?Math.floor(s/Sa):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Rn,s||0)),d=r*c;t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,c9e(t,this,d,i,o),d9e(t,this,d,i,o),t.restore()}}function OJ(e,t,a=t){e.lineCap=dn(a.borderCapStyle,t.borderCapStyle),e.setLineDash(dn(a.borderDash,t.borderDash)),e.lineDashOffset=dn(a.borderDashOffset,t.borderDashOffset),e.lineJoin=dn(a.borderJoinStyle,t.borderJoinStyle),e.lineWidth=dn(a.borderWidth,t.borderWidth),e.strokeStyle=dn(a.borderColor,t.borderColor)}function m9e(e,t,a){e.lineTo(a.x,a.y)}function f9e(e){return e.stepped?T8e:e.tension||e.cubicInterpolationMode==="monotone"?E8e:m9e}function MJ(e,t,a={}){const s=e.length,{start:r=0,end:i=s-1}=a,{start:o,end:l}=t,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:d<c&&!u?s+d-c:d-c}}function h9e(e,t,a,s){const{points:r,options:i}=t,{count:o,start:l,loop:c,ilen:d}=MJ(r,a,s),u=f9e(i);let{move:f=!0,reverse:p}=s||{},x,v,N;for(x=0;x<=d;++x)v=r[(l+(p?d-x:x))%o],!v.skip&&(f?(e.moveTo(v.x,v.y),f=!1):u(e,N,v,p,i.stepped),N=v);return c&&(v=r[(l+(p?d:0))%o],u(e,N,v,p,i.stepped)),!!c}function g9e(e,t,a,s){const r=t.points,{count:i,start:o,ilen:l}=MJ(r,a,s),{move:c=!0,reverse:d}=s||{};let u=0,f=0,p,x,v,N,b,C;const w=E=>(o+(d?l-E:E))%i,S=()=>{N!==b&&(e.lineTo(u,b),e.lineTo(u,N),e.lineTo(u,C))};for(c&&(x=r[w(0)],e.moveTo(x.x,x.y)),p=0;p<=l;++p){if(x=r[w(p)],x.skip)continue;const E=x.x,k=x.y,_=E|0;_===v?(k<N?N=k:k>b&&(b=k),u=(f*u+E)/++f):(S(),e.lineTo(E,k),v=_,f=0,N=b=k),C=k}S()}function Ik(e){const t=e.options,a=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?g9e:h9e}function p9e(e){return e.stepped?oBe:e.tension||e.cubicInterpolationMode==="monotone"?lBe:eu}function x9e(e,t,a,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,a,s)&&r.closePath()),OJ(e,t.options),e.stroke(r)}function y9e(e,t,a,s){const{segments:r,options:i}=t,o=Ik(t);for(const l of r)OJ(e,i,l.style),e.beginPath(),o(e,t,l,{start:a,end:a+s-1})&&e.closePath(),e.stroke()}const b9e=typeof Path2D=="function";function v9e(e,t,a,s){b9e&&!t.options.segment?x9e(e,t,a,s):y9e(e,t,a,s)}class w9e extends cc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;J8e(this._points,s,t,r,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=pBe(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,s=t.length;return s&&a[t[s-1].end]}interpolate(t,a){const s=this.options,r=t[a],i=this.points,o=fBe(this,{property:a,start:r,end:r});if(!o.length)return;const l=[],c=p9e(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:f,end:p}=o[d],x=i[f],v=i[p];if(x===v){l.push(x);continue}const N=Math.abs((r-x[a])/(v[a]-x[a])),b=c(x,v,N,s.stepped);b[a]=t[a],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,a,s){return Ik(this)(t,this,a,s)}path(t,a,s){const r=this.segments,i=Ik(this);let o=this._loop;a=a||0,s=s||this.points.length-a;for(const l of r)o&=i(t,this,l,{start:a,end:a+s-1});return!!o}draw(t,a,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),v9e(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function mB(e,t,a,s){const r=e.options,{[a]:i}=e.getProps([a],s);return Math.abs(t-i)<r.radius+r.hitRadius}class N9e extends cc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(a-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,a){return mB(this,t,"x",a)}inYRange(t,a){return mB(this,t,"y",a)}getCenterPoint(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}size(t){t=t||this.options||{};let a=t.radius||0;a=Math.max(a,a&&t.hoverRadius||0);const s=a&&t.borderWidth||0;return(a+s)*2}draw(t,a){const s=this.options;this.skip||s.radius<.1||!qp(this,a,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Dk(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function IJ(e,t){const{x:a,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,d,u,f;return e.horizontal?(f=o/2,l=Math.min(a,r),c=Math.max(a,r),d=s-f,u=s+f):(f=i/2,l=a-f,c=a+f,d=Math.min(s,r),u=Math.max(s,r)),{left:l,top:d,right:c,bottom:u}}function nd(e,t,a,s){return e?0:Ms(t,a,s)}function j9e(e,t,a){const s=e.options.borderWidth,r=e.borderSkipped,i=fJ(s);return{t:nd(r.top,i.top,0,a),r:nd(r.right,i.right,0,t),b:nd(r.bottom,i.bottom,0,a),l:nd(r.left,i.left,0,t)}}function C9e(e,t,a){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=xf(r),o=Math.min(t,a),l=e.borderSkipped,c=s||jn(r);return{topLeft:nd(!c||l.top||l.left,i.topLeft,0,o),topRight:nd(!c||l.top||l.right,i.topRight,0,o),bottomLeft:nd(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:nd(!c||l.bottom||l.right,i.bottomRight,0,o)}}function S9e(e){const t=IJ(e),a=t.right-t.left,s=t.bottom-t.top,r=j9e(e,a/2,s/2),i=C9e(e,a/2,s/2);return{outer:{x:t.left,y:t.top,w:a,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function VA(e,t,a,s){const r=t===null,i=a===null,l=e&&!(r&&i)&&IJ(e,s);return l&&(r||ed(t,l.left,l.right))&&(i||ed(a,l.top,l.bottom))}function _9e(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function A9e(e,t){e.rect(t.x,t.y,t.w,t.h)}function QA(e,t,a={}){const s=e.x!==a.x?-t:0,r=e.y!==a.y?-t:0,i=(e.x+e.w!==a.x+a.w?t:0)-s,o=(e.y+e.h!==a.y+a.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class T9e extends cc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=S9e(this),l=_9e(o.radius)?Cw:A9e;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,QA(o,a,i)),t.clip(),l(t,QA(i,-a,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,QA(i,a)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,a,s){return VA(this,t,a,s)}inXRange(t,a){return VA(this,t,null,a)}inYRange(t,a){return VA(this,null,t,a)}getCenterPoint(t){const{x:a,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+r)/2:a,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const fB=(e,t)=>{let{boxHeight:a=t,boxWidth:s=t}=e;return e.usePointStyle&&(a=Math.min(a,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(t,a)}},E9e=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class hB extends cc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,s){this.maxWidth=t,this.maxHeight=a,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=ea(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(s=>t.filter(s,this.chart.data))),t.sort&&(a=a.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Is(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=fB(s,i);let d,u;a.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,a,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-u;return this.legendItems.forEach((v,N)=>{const b=s+a/2+i.measureText(v.text).width;(N===0||d[d.length-1]+b+2*l>o)&&(f+=u,d[d.length-(N>0?0:1)]=0,x+=u,p++),c[N]={left:0,top:x,row:p,width:b,height:r},d[d.length-1]+=b+l}),f}_fitCols(t,a,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-t;let f=l,p=0,x=0,v=0,N=0;return this.legendItems.forEach((b,C)=>{const{itemWidth:w,itemHeight:S}=k9e(s,a,i,b,r);C>0&&x+S+2*l>u&&(f+=p+l,d.push({width:p,height:x}),v+=p+l,N++,p=x=0),c[C]={left:v,top:x,col:N,width:w,height:S},p=Math.max(p,w),x+=S+l}),f+=p,d.push({width:p,height:x}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:s,labels:{padding:r},rtl:i}}=this,o=yf(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ls(s,this.left+r,this.right-this.lineWidths[l]);for(const d of a)l!==d.row&&(l=d.row,c=Ls(s,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+t+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=Ls(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const d of a)d.col!==l&&(l=d.col,c=Ls(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;RD(t,this),this._draw(),zD(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=Da.color,c=yf(t.rtl,this.left,this.width),d=Is(o.font),{padding:u}=o,f=d.size,p=f/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:v,boxHeight:N,itemHeight:b}=fB(o,f),C=function(_,A,T){if(isNaN(v)||v<=0||isNaN(N)||N<0)return;r.save();const $=dn(T.lineWidth,1);if(r.fillStyle=dn(T.fillStyle,l),r.lineCap=dn(T.lineCap,"butt"),r.lineDashOffset=dn(T.lineDashOffset,0),r.lineJoin=dn(T.lineJoin,"miter"),r.lineWidth=$,r.strokeStyle=dn(T.strokeStyle,l),r.setLineDash(dn(T.lineDash,[])),o.usePointStyle){const z={radius:N*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:$},F=c.xPlus(_,v/2),P=A+p;mJ(r,z,F,P,o.pointStyleWidth&&v)}else{const z=A+Math.max((f-N)/2,0),F=c.leftForLtr(_,v),P=xf(T.borderRadius);r.beginPath(),Object.values(P).some(M=>M!==0)?Cw(r,{x:F,y:z,w:v,h:N,radius:P}):r.rect(F,z,v,N),r.fill(),$!==0&&r.stroke()}r.restore()},w=function(_,A,T){Vp(r,T.text,_,A+b/2,d,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},S=this.isHorizontal(),E=this._computeTitleHeight();S?x={x:Ls(i,this.left+u,this.right-s[0]),y:this.top+u+E,line:0}:x={x:this.left+u,y:Ls(i,this.top+E+u,this.bottom-a[0].height),line:0},bJ(this.ctx,t.textDirection);const k=b+u;this.legendItems.forEach((_,A)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const T=r.measureText(_.text).width,$=c.textAlign(_.textAlign||(_.textAlign=o.textAlign)),z=v+p+T;let F=x.x,P=x.y;c.setWidth(this.width),S?A>0&&F+z+u>this.right&&(P=x.y+=k,x.line++,F=x.x=Ls(i,this.left+u,this.right-s[x.line])):A>0&&P+k>this.bottom&&(F=x.x=F+a[x.line].width+u,x.line++,P=x.y=Ls(i,this.top+E+u,this.bottom-a[x.line].height));const M=c.x(F);if(C(M,P,_),F=g8e($,F+v+p,S?F+z:this.right,t.rtl),w(c.x(F),P,_),S)x.x+=z+u;else if(typeof _.text!="string"){const G=d.lineHeight;x.y+=$J(_,G)+u}else x.y+=k}),vJ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,s=Is(a.font),r=ji(a.padding);if(!a.display)return;const i=yf(t.rtl,this.left,this.width),o=this.ctx,l=a.position,c=s.size/2,d=r.top+c;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,f=Ls(t.align,f,this.right-p);else{const v=this.columnSizes.reduce((N,b)=>Math.max(N,b.height),0);u=d+Ls(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const x=Ls(l,f,f+p);o.textAlign=i.textAlign(MD(l)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=s.string,Vp(o,a.text,x,u,s)}_computeTitleHeight(){const t=this.options.title,a=Is(t.font),s=ji(t.padding);return t.display?a.lineHeight+s.height:0}_getLegendItemAt(t,a){let s,r,i;if(ed(t,this.left,this.right)&&ed(a,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],ed(t,r.left,r.left+r.width)&&ed(a,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const a=this.options;if(!D9e(t.type,a))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=E9e(r,s);r&&!i&&ea(a.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&ea(a.onHover,[t,s,this],this)}else s&&ea(a.onClick,[t,s,this],this)}}function k9e(e,t,a,s,r){const i=L9e(s,e,t,a),o=P9e(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function L9e(e,t,a,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+a.size/2+s.measureText(r).width}function P9e(e,t,a){let s=e;return typeof t.text!="string"&&(s=$J(t,a)),s}function $J(e,t){const a=e.text?e.text.length:0;return t*a}function D9e(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var O9e={id:"legend",_element:hB,start(e,t,a){const s=e.legend=new hB({ctx:e.ctx,options:a,chart:e});hi.configure(e,s,a),hi.addBox(e,s)},stop(e){hi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,a){const s=e.legend;hi.configure(e,s,a),s.options=a},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,a){const s=t.datasetIndex,r=a.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(a?0:void 0),u=ji(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class RJ extends cc{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const r=as(s.text)?s.text.length:1;this._padding=ji(s.padding);const i=r*Is(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,u,f;return this.isHorizontal()?(u=Ls(l,s,i),f=a+t,d=i-s):(o.position==="left"?(u=s+t,f=Ls(l,r,a),c=Rn*-.5):(u=i-t,f=Ls(l,a,r),c=Rn*.5),d=r-a),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const s=Is(a.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Vp(t,a.text,0,0,s,{color:a.color,maxWidth:c,rotation:d,textAlign:MD(a.align),textBaseline:"middle",translation:[o,l]})}}function M9e(e,t){const a=new RJ({ctx:e.ctx,options:t,chart:e});hi.configure(e,a,t),hi.addBox(e,a),e.titleBlock=a}var I9e={id:"title",_element:RJ,start(e,t,a){M9e(e,a)},stop(e){const t=e.titleBlock;hi.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,a){const s=e.titleBlock;hi.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qg={average(e){if(!e.length)return!1;let t,a,s=new Set,r=0,i=0;for(t=0,a=e.length;t<a;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let a=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Lk(t,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();a=c.x,s=c.y}return{x:a,y:s}}};function xo(e,t){return t&&(as(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function vl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function $9e(e,t){const{element:a,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:a}}function gB(e,t){const a=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=Is(t.bodyFont),d=Is(t.titleFont),u=Is(t.footerFont),f=i.length,p=r.length,x=s.length,v=ji(t.padding);let N=v.height,b=0,C=s.reduce((E,k)=>E+k.before.length+k.lines.length+k.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,f&&(N+=f*d.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),C){const E=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;N+=x*E+(C-x)*c.lineHeight+(C-1)*t.bodySpacing}p&&(N+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let w=0;const S=function(E){b=Math.max(b,a.measureText(E).width+w)};return a.save(),a.font=d.string,In(e.title,S),a.font=c.string,In(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,In(s,E=>{In(E.before,S),In(E.lines,S),In(E.after,S)}),w=0,a.font=u.string,In(e.footer,S),a.restore(),b+=v.width,{width:b,height:N}}function R9e(e,t){const{y:a,height:s}=t;return a<s/2?"top":a>e.height-s/2?"bottom":"center"}function z9e(e,t,a,s){const{x:r,width:i}=s,o=a.caretSize+a.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function U9e(e,t,a,s){const{x:r,width:i}=a,{width:o,chartArea:{left:l,right:c}}=e;let d="center";return s==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),z9e(d,e,t,a)&&(d="center"),d}function pB(e,t,a){const s=a.yAlign||t.yAlign||R9e(e,a);return{xAlign:a.xAlign||t.xAlign||U9e(e,t,a,s),yAlign:s}}function F9e(e,t){let{x:a,width:s}=e;return t==="right"?a-=s:t==="center"&&(a-=s/2),a}function B9e(e,t,a){let{y:s,height:r}=e;return t==="top"?s+=a:t==="bottom"?s-=r+a:s-=r/2,s}function xB(e,t,a,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=a,d=r+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:x}=xf(o);let v=F9e(t,l);const N=B9e(t,c,d);return c==="center"?l==="left"?v+=d:l==="right"&&(v-=d):l==="left"?v-=Math.max(u,p)+r:l==="right"&&(v+=Math.max(f,x)+r),{x:Ms(v,0,s.width-t.width),y:Ms(N,0,s.height-t.height)}}function Ab(e,t,a){const s=ji(a.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function yB(e){return xo([],vl(e))}function H9e(e,t,a){return tm(e,{tooltip:t,tooltipItems:a,type:"tooltip"})}function bB(e,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?e.override(a):e}const zJ={beforeTitle:xl,title(e){if(e.length>0){const t=e[0],a=t.chart.data.labels,s=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return a[t.dataIndex]}return""},afterTitle:xl,beforeBody:xl,beforeLabel:xl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const a=e.formattedValue;return Ln(a)||(t+=a),t},labelColor(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:xl,afterBody:xl,beforeFooter:xl,footer:xl,afterFooter:xl};function rr(e,t,a,s){const r=e[t].call(a,s);return typeof r>"u"?zJ[t].call(a,s):r}class vB extends cc{static positioners=qg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&a.options.animation&&s.animations,i=new NJ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=H9e(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:s}=a,r=rr(s,"beforeTitle",this,t),i=rr(s,"title",this,t),o=rr(s,"afterTitle",this,t);let l=[];return l=xo(l,vl(r)),l=xo(l,vl(i)),l=xo(l,vl(o)),l}getBeforeBody(t,a){return yB(rr(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:s}=a,r=[];return In(t,i=>{const o={before:[],lines:[],after:[]},l=bB(s,i);xo(o.before,vl(rr(l,"beforeLabel",this,i))),xo(o.lines,rr(l,"label",this,i)),xo(o.after,vl(rr(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,a){return yB(rr(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:s}=a,r=rr(s,"beforeFooter",this,t),i=rr(s,"footer",this,t),o=rr(s,"afterFooter",this,t);let l=[];return l=xo(l,vl(r)),l=xo(l,vl(i)),l=xo(l,vl(o)),l}_createItems(t){const a=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=a.length;c<d;++c)l.push($9e(this.chart,a[c]));return t.filter&&(l=l.filter((u,f,p)=>t.filter(u,f,p,s))),t.itemSort&&(l=l.sort((u,f)=>t.itemSort(u,f,s))),In(l,u=>{const f=bB(t.callbacks,u);r.push(rr(f,"labelColor",this,u)),i.push(rr(f,"labelPointStyle",this,u)),o.push(rr(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,a){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=qg[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=gB(this,s),d=Object.assign({},l,c),u=pB(this.chart,s,d),f=xB(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,s,r){const i=this.getCaretPosition(t,s,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=xf(l),{x:p,y:x}=t,{width:v,height:N}=a;let b,C,w,S,E,k;return i==="center"?(E=x+N/2,r==="left"?(b=p,C=b-o,S=E+o,k=E-o):(b=p+v,C=b+o,S=E-o,k=E+o),w=b):(r==="left"?C=p+Math.max(c,u)+o:r==="right"?C=p+v-Math.max(d,f)-o:C=this.caretX,i==="top"?(S=x,E=S-o,b=C-o,w=C+o):(S=x+N,E=S+o,b=C+o,w=C-o),k=S),{x1:b,x2:C,x3:w,y1:S,y2:E,y3:k}}drawTitle(t,a,s){const r=this.title,i=r.length;let o,l,c;if(i){const d=yf(s.rtl,this.x,this.width);for(t.x=Ab(this,s.titleAlign,s),a.textAlign=d.textAlign(s.titleAlign),a.textBaseline="middle",o=Is(s.titleFont),l=s.titleSpacing,a.fillStyle=s.titleColor,a.font=o.string,c=0;c<i;++c)a.fillText(r[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,a,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=Is(i.bodyFont),f=Ab(this,"left",i),p=r.x(f),x=c<u.lineHeight?(u.lineHeight-c)/2:0,v=a.y+x;if(i.usePointStyle){const N={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(p,d)+d/2,C=v+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Dk(t,N,b,C),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Dk(t,N,b,C)}else{t.lineWidth=jn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const N=r.leftForLtr(p,d),b=r.leftForLtr(r.xPlus(p,1),d-2),C=xf(o.borderRadius);Object.values(C).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Cw(t,{x:N,y:v,w:d,h:c,radius:C}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Cw(t,{x:b,y:v+1,w:d-2,h:c-2,radius:C}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(N,v,d,c),t.strokeRect(N,v,d,c),t.fillStyle=o.backgroundColor,t.fillRect(b,v+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,a,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,f=Is(s.bodyFont);let p=f.lineHeight,x=0;const v=yf(s.rtl,this.x,this.width),N=function(T){a.fillText(T,v.x(t.x+x),t.y+p/2),t.y+=p+i},b=v.textAlign(o);let C,w,S,E,k,_,A;for(a.textAlign=o,a.textBaseline="middle",a.font=f.string,t.x=Ab(this,b,s),a.fillStyle=s.bodyColor,In(this.beforeBody,N),x=l&&b!=="right"?o==="center"?d/2+u:d+2+u:0,E=0,_=r.length;E<_;++E){for(C=r[E],w=this.labelTextColors[E],a.fillStyle=w,In(C.before,N),S=C.lines,l&&S.length&&(this._drawColorBox(a,t,E,v,s),p=Math.max(f.lineHeight,c)),k=0,A=S.length;k<A;++k)N(S[k]),p=f.lineHeight;In(C.after,N)}x=0,p=f.lineHeight,In(this.afterBody,N),t.y-=i}drawFooter(t,a,s){const r=this.footer,i=r.length;let o,l;if(i){const c=yf(s.rtl,this.x,this.width);for(t.x=Ab(this,s.footerAlign,s),t.y+=s.footerMarginTop,a.textAlign=c.textAlign(s.footerAlign),a.textBaseline="middle",o=Is(s.footerFont),a.fillStyle=s.footerColor,a.font=o.string,l=0;l<i;++l)a.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,a,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:d,height:u}=s,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:v}=xf(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(l+f,c),o==="top"&&this.drawCaret(t,a,s,r),a.lineTo(l+d-p,c),a.quadraticCurveTo(l+d,c,l+d,c+p),o==="center"&&i==="right"&&this.drawCaret(t,a,s,r),a.lineTo(l+d,c+u-v),a.quadraticCurveTo(l+d,c+u,l+d-v,c+u),o==="bottom"&&this.drawCaret(t,a,s,r),a.lineTo(l+x,c+u),a.quadraticCurveTo(l,c+u,l,c+u-x),o==="center"&&i==="left"&&this.drawCaret(t,a,s,r),a.lineTo(l,c+f),a.quadraticCurveTo(l,c,l+f,c),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=qg[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=gB(this,t),c=Object.assign({},o,this._size),d=pB(a,t,c),u=xB(t,c,d,a);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=ji(a.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,a),bJ(t,a.textDirection),i.y+=o.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),vJ(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!ww(s,r),o=this._positionChanged(r,a);(i||o)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,s=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,a,s),l=this._positionChanged(o,t),c=a||!ww(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),c}_getActiveElements(t,a,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return a.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,a){const{caretX:s,caretY:r,options:i}=this,o=qg[i.position].call(this,t,a);return o!==!1&&(s!==o.x||r!==o.y)}}var G9e={id:"tooltip",_element:vB,positioners:qg,afterInit(e,t,a){a&&(e.tooltip=new vB({chart:e,options:a}))},beforeUpdate(e,t,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,t,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,t){if(e.tooltip){const a=t.replay;e.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:zJ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const W9e=(e,t,a,s)=>(typeof t=="string"?(a=e.push(t)-1,s.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function q9e(e,t,a,s){const r=e.indexOf(t);if(r===-1)return W9e(e,t,a,s);const i=e.lastIndexOf(t);return r!==i?a:r}const V9e=(e,t)=>e===null?null:Ms(Math.round(e),0,t);function wB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Q9e extends mh{static id="category";static defaults={ticks:{callback:wB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const s=this.getLabels();for(const{index:r,label:i}of a)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(Ln(t))return null;const s=this.getLabels();return a=isFinite(a)&&s[a]===t?a:q9e(s,t,dn(a,t),this._addedLabels),V9e(a,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),a||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,a=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=a;o++)r.push({value:o});return r}getLabelForValue(t){return wB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Y9e(e,t){const a=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:p}=e,x=i||1,v=u-1,{min:N,max:b}=t,C=!Ln(o),w=!Ln(l),S=!Ln(d),E=(b-N)/(f+1);let k=N8((b-N)/v/x)*x,_,A,T,$;if(k<1e-14&&!C&&!w)return[{value:N},{value:b}];$=Math.ceil(b/k)-Math.floor(N/k),$>v&&(k=N8($*k/v/x)*x),Ln(c)||(_=Math.pow(10,c),k=Math.ceil(k*_)/_),r==="ticks"?(A=Math.floor(N/k)*k,T=Math.ceil(b/k)*k):(A=N,T=b),C&&w&&i&&i8e((l-o)/i,k/1e3)?($=Math.round(Math.min((l-o)/k,u)),k=(l-o)/$,A=o,T=l):S?(A=C?o:A,T=w?l:T,$=d-1,k=(T-A)/$):($=(T-A)/k,sp($,Math.round($),k/1e3)?$=Math.round($):$=Math.ceil($));const z=Math.max(j8(k),j8(A));_=Math.pow(10,Ln(c)?z:c),A=Math.round(A*_)/_,T=Math.round(T*_)/_;let F=0;for(C&&(p&&A!==o?(a.push({value:o}),A<o&&F++,sp(Math.round((A+F*k)*_)/_,o,NB(o,E,e))&&F++):A<o&&F++);F<$;++F){const P=Math.round((A+F*k)*_)/_;if(w&&P>l)break;a.push({value:P})}return w&&p&&T!==l?a.length&&sp(a[a.length-1].value,l,NB(l,E,e))?a[a.length-1].value=l:a.push({value:l}):(!w||T===l)&&a.push({value:T}),a}function NB(e,t,{horizontal:a,minRotation:s}){const r=Tl(s),i=(a?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class K9e extends mh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return Ln(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=a?r:c,l=c=>i=s?i:c;if(t){const c=Oo(r),d=Oo(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,o=Y9e(r,i);return t.bounds==="ticks"&&o8e(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let a=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-a)/Math.max(t.length-1,1)/2;a-=r,s+=r}this._startValue=a,this._endValue=s,this._valueRange=s-a}getLabelForValue(t){return $D(t,this.chart.options.locale,this.options.ticks.format)}}class X9e extends K9e{static id="linear";static defaults={ticks:{callback:uJ.formatters.numeric}};determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=Ni(t)?t:0,this.max=Ni(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,s=Tl(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const s1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},or=Object.keys(s1);function jB(e,t){return e-t}function CB(e,t){if(Ln(t))return null;const a=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Ni(o)||(o=typeof s=="string"?a.parse(o,s):a.parse(o)),o===null?null:(r&&(o=r==="week"&&(Gp(i)||i===!0)?a.startOf(o,"isoWeek",i):a.startOf(o,r)),+o)}function SB(e,t,a,s){const r=or.length;for(let i=or.indexOf(e);i<r-1;++i){const o=s1[or[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-t)/(l*o.size))<=s)return or[i]}return or[r-1]}function Z9e(e,t,a,s,r){for(let i=or.length-1;i>=or.indexOf(a);i--){const o=or[i];if(s1[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return or[a?or.indexOf(a):0]}function J9e(e){for(let t=or.indexOf(e)+1,a=or.length;t<a;++t)if(s1[or[t]].common)return or[t]}function _B(e,t,a){if(!a)e[t]=!0;else if(a.length){const{lo:s,hi:r}=OD(a,t),i=a[s]>=t?a[s]:a[r];e[i]=!0}}function eGe(e,t,a,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=a[l],c>=0&&(t[c].major=!0);return t}function AB(e,t,a){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!a?s:eGe(e,s,r,a)}class TB extends mh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const s=t.time||(t.time={}),r=this._adapter=new KBe._date(t.adapters.date);r.init(a),ap(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:CB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ni(r)&&!isNaN(r)?r:+a.startOf(Date.now(),s),i=Ni(i)&&!isNaN(i)?i:+a.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],s=t[t.length-1]),{min:a,max:s}}buildTicks(){const t=this.options,a=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=m8e(r,i,o);return this._unit=a.unit||(s.autoSkip?SB(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):Z9e(this,l.length,a.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:J9e(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),AB(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?a=1-r:a=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;a=Ms(a,0,o),s=Ms(s,0,o),this._offsets={start:a,end:s,factor:1/(a+1+s)}}_generate(){const t=this._adapter,a=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||SB(i.minUnit,a,s,this._getLabelCapacity(a)),l=dn(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=Gp(c)||c===!0,u={};let f=a,p,x;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":o),t.diff(s,a,o)>1e5*l)throw new Error(a+" and "+s+" are too far apart with stepSize of "+l+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,x=0;p<s;p=+t.add(p,l,o),x++)_B(u,p,v);return(p===s||r.bounds==="ticks"||x===1)&&_B(u,p,v),Object.keys(u).sort(jB).map(N=>+N)}getLabelForValue(t){const a=this._adapter,s=this.options.time;return s.tooltipFormat?a.format(t,s.tooltipFormat):a.format(t,s.displayFormats.datetime)}format(t,a){const r=this.options.time.displayFormats,i=this._unit,o=a||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,a,s,r){const i=this.options,o=i.ticks.callback;if(o)return ea(o,[t,a,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],f=d&&l[d],p=s[a],x=d&&f&&p&&p.major;return this._adapter.format(t,r||(x?f:u))}generateTickLabels(t){let a,s,r;for(a=0,s=t.length;a<s;++a)r=t[a],r.label=this._tickFormatFunction(r.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+s)*a.factor)}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,s=this.ctx.measureText(t).width,r=Tl(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const a=this.options.time,s=a.displayFormats,r=s[a.unit]||s.millisecond,i=this._tickFormatFunction(t,0,AB(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],a,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,s=r.length;a<s;++a)t=t.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,s;if(t.length)return t;const r=this.getLabels();for(a=0,s=r.length;a<s;++a)t.push(CB(this,r[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return lJ(t.sort(jB))}}function Tb(e,t,a){let s=0,r=e.length-1,i,o,l,c;a?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=mu(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=mu(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const d=o-i;return d?l+(c-l)*(t-i)/d:l}class wVe extends TB{static id="timeseries";static defaults=TB.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=Tb(a,this.min),this._tableRange=Tb(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:s}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=t.length;o<l;++o)d=t[o],d>=a&&d<=s&&r.push(d);if(r.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const t=this.min,a=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(a)||s.length===1)&&s.push(a),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),s=this.getLabelTimestamps();return a.length&&s.length?t=this.normalize(a.concat(s)):t=a.length?a:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Tb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return Tb(this._table,s*this._tableRange+this._minPos,!0)}}const UJ="label";function EB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function tGe(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function FJ(e,t){e.labels=t}function BJ(e,t,a=UJ){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[a]===r[a]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function nGe(e,t=UJ){const a={labels:[],datasets:[]};return FJ(a,e.labels),BJ(a,e.datasets,t),a}function aGe(e,t){const{height:a=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:f,...p}=e,x=h.useRef(null),v=h.useRef(null),N=()=>{x.current&&(v.current=new a1(x.current,{type:o,data:nGe(l,i),options:c&&{...c},plugins:d}),EB(t,v.current))},b=()=>{EB(t,null),v.current&&(v.current.destroy(),v.current=null)};return h.useEffect(()=>{!r&&v.current&&c&&tGe(v.current,c)},[r,c]),h.useEffect(()=>{!r&&v.current&&FJ(v.current.config.data,l.labels)},[r,l.labels]),h.useEffect(()=>{!r&&v.current&&l.datasets&&BJ(v.current.config.data,l.datasets,i)},[r,l.datasets]),h.useEffect(()=>{v.current&&(r?(b(),setTimeout(N)):v.current.update(f))},[r,c,l.labels,l.datasets,f]),h.useEffect(()=>{v.current&&(b(),setTimeout(N))},[o]),h.useEffect(()=>(N(),()=>b()),[]),n.jsx("canvas",{ref:x,role:"img",height:a,width:s,...p,children:u})}const sGe=h.forwardRef(aGe);function VD(e,t){return a1.register(t),h.forwardRef((a,s)=>n.jsx(sGe,{...a,ref:s,type:e}))}const rGe=VD("line",QBe),iGe=VD("bar",WBe),oGe=VD("pie",YBe);a1.register(Q9e,X9e,T9e,w9e,N9e,u9e,I9e,G9e,O9e);const HJ=e=>n.jsx(aa,{...e}),lGe=e=>n.jsx(VH,{...e}),cGe=e=>n.jsx(sx,{...e}),dGe=e=>n.jsx(_a,{...e}),GJ=e=>n.jsx(hn,{...e}),uGe=e=>n.jsx(qde,{...e}),mGe=[{icon:HJ,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:GJ,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:cGe,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:lGe,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],fGe=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],hGe={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},gGe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},pGe={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},xGe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},yGe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},bGe=()=>{const e=[{icon:HJ,label:"New Contact"},{icon:GJ,label:"New Campaign"},{icon:dGe,label:"New Task"},{icon:uGe,label:"New Leads"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,a)=>n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:n.jsx(t.icon,{size:20})}),n.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},a))})]})},vGe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]}),wGe=({name:e,company:t,assignedBy:a,source:s,date:r})=>{const{text:i,bg:o}=yGe(s);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-xs text-gray-500",children:t}),a&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",n.jsx("span",{className:"font-semibold text-gray-700",children:a})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:r}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${o} px-2 py-0.5 rounded-full`,children:s})]})]})})},NGe=({title:e,children:t})=>n.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),jGe=({title:e,chartData:t,chartOptions:a})=>{const[s,r]=h.useState("bar"),i=s==="pie"?pGe:t,o=s==="pie"?xGe:a,l=s==="line"?rGe:s==="pie"?oGe:iGe,c=s==="pie"?250:300;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsxs("select",{value:s,onChange:d=>r(d.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[n.jsx("option",{value:"bar",children:"Bar"}),n.jsx("option",{value:"line",children:"Line"}),n.jsx("option",{value:"pie",children:"Pie"})]})]}),n.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:n.jsx(l,{data:i,options:o})})]})};function CGe(){const{user:e}=tn();return h.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),n.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:n.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),n.jsx(bGe,{}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:mGe.map(t=>n.jsx(vGe,{...t},t.title))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsx(jGe,{title:"Leads & Conversions",chartData:hGe,chartOptions:gGe}),n.jsx(NGe,{title:"Latest Leads",children:fGe.map((t,a)=>n.jsx(wGe,{...t},a))})]})]})})}function SGe(){h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("All Statuses"),o=h.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),l=f=>t(f),c=()=>t(null),d=h.useMemo(()=>[{title:"Total Accounts",value:o.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:aa},{title:"Customers",value:o.filter(f=>f.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Mo},{title:"Prospects",value:o.filter(f=>f.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Yn},{title:"Partners",value:o.filter(f=>f.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:sn},{title:"Active",value:o.filter(f=>f.status==="CUSTOMER"||f.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Mo},{title:"Inactive",value:o.filter(f=>f.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:Io},{title:"Former",value:o.filter(f=>f.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:Io}],[o]);if(e)return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:n.jsx("div",{children:n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,n.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Website:"})," ",n.jsx("br",{}),n.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Industry:"})," ",n.jsx("br",{}),e.industry]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Territory:"})," ",n.jsx("br",{}),e.territory]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",n.jsx("br",{}),e.phone_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",n.jsx("br",{}),e.billing_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",n.jsx("br",{}),e.shipping_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),e.created_by," on ",e.created_date]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),e.last_updated]})]})]})]});const u=o.filter(f=>{const p=f.company.toLowerCase().includes(a.toLowerCase())||f.url.toLowerCase().includes(a.toLowerCase())||f.industry.toLowerCase().includes(a.toLowerCase())||f.territory.toLowerCase().includes(a.toLowerCase())||f.phone_number.toLowerCase().includes(a.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(f.status==="CUSTOMER"||f.status==="PARTNER")||r==="Inactive"&&f.status==="INACTIVE"||r==="Former"&&f.status==="FORMER"||f.status.toLowerCase()===r.toLowerCase();return p&&x});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[n.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:d.map(f=>n.jsx(_Ge,{...f},f.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:a,onChange:f=>s(f.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Customer"}),n.jsx("option",{children:"Prospect"}),n.jsx("option",{children:"Partner"}),n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Inactive"}),n.jsx("option",{children:"Former"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsxs("tbody",{children:[u.map((f,p)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>l(f),children:[n.jsx("td",{className:"py-3 px-4 break-words",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:f.company}),n.jsx("div",{className:"text-gray-500 text-xs break-words",children:f.url})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="CUSTOMER"?"bg-green-100 text-green-700":f.status==="PROSPECT"?"bg-purple-100 text-purple-700":f.status==="PARTNER"?"bg-pink-100 text-pink-700":f.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:f.status})}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.industry}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.territory}),n.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:f.phone_number})]})]},p)),u.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const _Ge=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]});function AGe(){h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All Contacts"),[u,f]=h.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=h.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),v=k=>{k.target.id==="modalBackdrop"&&t(!1)},N=k=>{s(k)},b=()=>{s(null)},C=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},w=(k,_)=>{_.stopPropagation(),i(!0),x(k),t(!0)},S=k=>{const{name:_,value:A}=k.target;x(T=>({...T,[_]:A}))},E=k=>{if(k.preventDefault(),r)f(_=>_.map(A=>A.id===p.id?{...p}:A));else{const _={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};f(A=>[...A,_])}t(!1)};return a?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:b,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.account}),n.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:n.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[n.jsx(Yl,{}),"Export"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",n.jsx("br",{}),a.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",n.jsx("br",{}),a.email]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),a.createdBy," on ",a.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.jsx("br",{}),a.title]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",n.jsx("br",{}),a.assigned]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",n.jsx("br",{}),a.workPhone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Account:"})," ",n.jsx("br",{}),a.account]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",n.jsx("br",{}),a.phone1]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),a.lastUpdated]})]}),n.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[n.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.notes?a.notes:"No additional notes were provided for this contact."})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts...",value:o,onChange:k=>l(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Contacts"}),n.jsx("option",{children:"Option 1"}),n.jsx("option",{children:"Option 2"}),n.jsx("option",{children:"Option 3"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-xs text-gray-700",children:u.map((k,_)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>N(k),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:k.name}),n.jsx("div",{className:"text-xs text-gray-500",children:k.title})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ix,{className:"text-gray-500"}),n.jsx("span",{children:k.account})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(na,{className:"text-gray-500"}),n.jsx("span",{children:k.email})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:k.phone1})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:k.phone2})]})]})}),n.jsx("td",{className:"py-3 px-4",children:k.department}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{className:"text-gray-500"}),n.jsx("span",{children:k.assigned})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Et,{className:"text-gray-500"}),n.jsx("span",{children:k.created})]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:A=>w(k,A),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})})})})]},_))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),n.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),n.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),n.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),n.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),n.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",children:"Assign To"}),n.jsx("option",{value:"Smith",children:"Smith"}),n.jsx("option",{value:"Doe",children:"Doe"}),n.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),n.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const Eb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ja=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),TGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ja,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ja,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ja,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ja,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ja,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),EGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ja,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ja,{label:"Department",name:"department",value:e.department}),n.jsx(Ja,{label:"Title",name:"title",value:e.title}),n.jsx(Ja,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ja,{label:"Email",name:"email",value:e.email}),n.jsx(Ja,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ja,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),kGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ja,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ja,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ja,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Description",name:"description",value:e.description}),n.jsx(Ja,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function WJ({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(TGe,{data:Eb});case 2:return n.jsx(EGe,{data:Eb});case 3:return n.jsx(kGe,{data:Eb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Eb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(ej,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const LGe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function qJ({lead:e=LGe,onBack:t}){const[a,s]=h.useState(!1);return e?n.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),n.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),n.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:n.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsx("p",{children:e.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:e.company})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:e.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:e.department})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:e.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:e.territory})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assign To:"}),n.jsx("p",{children:e.assignedTo})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:e.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:e.workPhone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:e.phone1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:e.phone2})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:e.source})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),n.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",n.jsx("br",{}),e.addressLine2," ",n.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),n.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),n.jsx(WJ,{isOpen:a,onClose:()=>s(!1)})]}):null}const PGe=Vf.all(),YA=PGe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function DGe(){const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,d]=h.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[u,f]=h.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=A=>t(A),x=()=>t(null),[v,N]=h.useState(""),[b,C]=h.useState("All Accounts"),w=()=>{s(!1),i(null),f({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=A=>{i(A),s(!0),f({work_ccode:A.work_ccode||"+63",work_phone:A.workPhone||"",m1_ccode:A.m1_ccode||"+63",mobile_phone_1:A.phone1||"",m2_ccode:A.m2_ccode||"+63",mobile_phone_2:A.phone2||""})},E=A=>{window.confirm("Are you sure you want to delete this lead?")&&d(c.filter(T=>T.id!==A))},k=A=>{const{name:T,value:$}=A.target;f(z=>({...z,[T]:$}))},_=A=>{A.preventDefault();const T=new FormData(A.target),$=Object.fromEntries(T.entries());$.name=`${$.firstName} ${$.lastName}`,$.assignedTo=o.find(z=>z.id.toString()===$.assignedTo)?.first_name+" "+o.find(z=>z.id.toString()===$.assignedTo)?.last_name,$.work_ccode=u.work_ccode,$.workPhone=u.work_phone,$.m1_ccode=u.m1_ccode,$.phone1=u.mobile_phone_1,$.m2_ccode=u.m2_ccode,$.phone2=u.mobile_phone_2,d(r?c.map(z=>z.id===r.id?{...z,...$}:z):[...c,{...$,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),w()};return e?n.jsx(qJ,{lead:e,onBack:x}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"})," Leads"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[n.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[n.jsx(Yl,{})," Download"]}),n.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Leads...",value:v,onChange:A=>N(A.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:A=>C(A.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Leads"}),n.jsx("option",{children:"New"}),n.jsx("option",{children:"Contacted"}),n.jsx("option",{children:"Qualified"}),n.jsx("option",{children:"Converted"}),n.jsx("option",{children:"Lost"})]})})]}),n.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[n.jsx("div",{children:"Name"}),n.jsx("div",{children:"Account"}),n.jsx("div",{children:"Title"}),n.jsx("div",{children:"Department"}),n.jsx("div",{children:"Email"}),n.jsx("div",{children:"Work Phone"}),n.jsx("div",{children:"Assigned To"}),n.jsx("div",{children:"Updated"}),n.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(A=>n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(A),children:[n.jsx("div",{className:"truncate",children:A.name}),n.jsx("div",{className:"truncate",children:A.company}),n.jsx("div",{className:"truncate",children:A.title}),n.jsx("div",{className:"truncate",children:A.department}),n.jsx("div",{className:"truncate",children:A.email}),n.jsxs("div",{className:"truncate",children:[A.work_ccode," ",A.workPhone]}),n.jsx("div",{className:"truncate",children:A.assignedTo}),n.jsx("div",{className:"truncate",children:A.lastUpdated}),n.jsxs("div",{className:"flex justify-center space-x-2",children:[n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:T=>{T.stopPropagation(),S(A)},children:n.jsx(ma,{})}),n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:T=>{T.stopPropagation(),E(A.id)},children:n.jsx(Wt,{})})]})]},A.id))]}),a&&n.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[n.jsx("button",{onClick:w,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:_,children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),n.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),n.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),n.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),n.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),n.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),n.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"work_ccode",value:u.work_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:YA.map(A=>n.jsx("option",{value:A.code,children:A.code},A.code))}),n.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:u.work_phone,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m1_ccode",value:u.m1_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:YA.map(A=>n.jsx("option",{value:A.code,children:A.code},A.code))}),n.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:u.mobile_phone_1,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m2_ccode",value:u.m2_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:YA.map(A=>n.jsx("option",{value:A.code,children:A.code},A.code))}),n.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:u.mobile_phone_2,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),n.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),n.jsxs("select",{name:"assignedTo",defaultValue:o.find(A=>`${A.first_name} ${A.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",disabled:!0,children:"Select user"}),o.map(A=>n.jsxs("option",{value:A.id,children:[A.first_name," ",A.last_name]},A.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),n.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),n.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),n.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const kB=["To Do","In Progress","Review","Completed"],Eg=10,OGe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},LB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},MGe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,u=o?"Contact":l?"Deal":i?"Account":r?"Lead":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},IGe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let N="Lead",b="",C="",w="",S="Lead",E="",k="",_="";const A=l(),T=p(),$=o(),z=f();if(A){N="Account",S="Account",E=T,b=String(A);const F=c(),P=d(),M=x(),G=v();F?(C="Contact",k="Contact",_=M,w=String(F)):P&&(k="Deal",C="Deal",_=G,w=String(P))}else $?(S="Lead",E=z,N="Lead",b=String($)):e.related_type==="Account"&&(N="Account",b=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:E,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:N,relatedTo1:b,relatedType2:C,relatedTo2:w}};function $Ge(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=tn(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[_,A]=h.useState(1),[T,$]=h.useState(null),[z,F]=h.useState(!1),P=wt(),M=Jt(),[G,Q]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const xe=M.state?.openTaskModal,ee=M.state?.initialTaskData;xe&&(i(!0),ee&&Q(Ee=>({...Ee,...ee})),P(M.pathname,{replace:!0,state:{}}))},[M,P]);const V=async()=>{try{const xe=await ae.get("/users/all");k(Array.isArray(xe.data)?xe.data:[])}catch(xe){console.error("Failed to fetch users:",xe),W.error("Failed to fetch users.")}},X=async()=>{try{x(!0);const xe=await ae.get("/tasks/all"),Ee=(Array.isArray(xe.data)?xe.data:[]).map(IGe);Ee.sort((Ae,Re)=>{const et=Ae.createdAt?new Date(Ae.createdAt):0;return(Re.createdAt?new Date(Re.createdAt):0)-et}),console.log("Fetched Tasks:",Ee),f(Ee),a==="list"&&A(1)}catch(xe){console.error("Failed to load tasks:",xe),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(V(),X())},[t,e]);const q=()=>{l(null),Q({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ne=(xe=null,ee=!1)=>{l(xe),d(ee),xe?Q({id:xe.id,subject:xe.title||"",description:xe.description||"",priority:xe.priority||"Normal",status:xe.status||"Not started",dueDate:OGe(xe.dueDate),assignedTo:xe.assignedToId?String(xe.assignedToId):"",notes:xe.notes||"",relatedType1Text:xe.relatedType1Text||"",relatedTo1Text:xe.relatedTo1Text||"",relatedType2Text:xe.relatedType2Text||"",relatedTo2Text:xe.relatedTo2Text||"",relatedType1:xe.relatedType1||"",relatedTo1:xe.relatedTo1||"",relatedType2:xe.relatedType2||"",relatedTo2:xe.relatedTo2||""}):q(),i(!0)},oe=()=>{i(!1),l(null),d(!1),q()},K=async xe=>{const ee=MGe(xe);try{o&&!c?(await ae.put(`/tasks/${o.id}`,ee),W.success("Task updated successfully.")):(await ae.post("/tasks/create",ee),W.success("Task created successfully.")),i(!1),await X()}catch(Ee){console.error("Failed to save task:",Ee);const Ae=Ee.response?.data?.detail||"Failed to save task.";W.error(Ae)}},R=xe=>{xe&&$({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:xe.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:xe.id}})},ye=async()=>{if(!T?.action){$(null);return}const{action:xe}=T;F(!0);try{xe.type==="delete"&&(await ae.delete(`/tasks/${xe.targetId}`),W.success("Task deleted successfully."),await X())}catch(ee){console.error("Task action failed:",ee),W.error("Failed to delete task.")}finally{F(!1),$(null)}},pe=()=>{z||$(null)},Ne=h.useMemo(()=>{const xe=v.trim().toLowerCase();return[...u].sort((Ee,Ae)=>{const Re=Ee.createdAt?new Date(Ee.createdAt):0;return(Ae.createdAt?new Date(Ae.createdAt):0)-Re}).filter(Ee=>{const Ae=xe===""||Ee.title?.toLowerCase().includes(xe)||Ee.description?.toLowerCase().includes(xe)||Ee.assignedToName?.toLowerCase().includes(xe)||Ee.createdBy?.toLowerCase().includes(xe),Re=b==="Filter by Status"||Ee.status===b,et=w==="Filter by Priority"||Ee.priority===w;return Ae&&Re&&et})},[u,v,b,w]);h.useEffect(()=>{A(1)},[v,b,w,a]),h.useEffect(()=>{if(a==="list"){const xe=Ne.length===0?1:Math.ceil(Ne.length/Eg);_>xe&&A(xe)}},[Ne.length,_,a]);const Se=h.useMemo(()=>{if(a==="board")return Ne;const xe=(_-1)*Eg;return Ne.slice(xe,xe+Eg)},[Ne,_,a]),Oe=h.useMemo(()=>{const xe=new Date;return[{title:"To Do",value:u.filter(ee=>ee.status==="Not started").length,icon:qs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ee=>ee.status==="In progress").length,icon:qi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ee=>ee.status==="Completed").length,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ee=>ee.dueDate&&new Date(ee.dueDate)<xe&&ee.status!=="Completed").length,icon:Wf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ee=>ee.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),ke=xe=>xe.dueDate&&new Date(xe.dueDate)<new Date&&xe.status!=="Completed",he=xe=>{switch(xe.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ge=xe=>{switch(xe){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ce=xe=>{switch(xe){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(qi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Oe.map(xe=>n.jsx(RGe,{...xe},xe.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:xe=>N(xe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:xe=>C(xe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),kB.map(xe=>n.jsx("option",{children:xe},xe))]}),n.jsxs("select",{value:w,onChange:xe=>S(xe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&Ne.length===0&&n.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&Ne.length>0&&a==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:kB.map(xe=>{const ee=Se.filter(Ee=>Ee.status===xe);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:xe}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ee.length})]}),n.jsx("div",{className:`space-y-3 ${ee.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ee.length>0?ee.map(Ee=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${he(Ee)}`,onClick:()=>ne(Ee,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Ee.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Ee.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Ee.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:ke(Ee)?"text-red-600":"text-gray-600",children:Ee.dateAssigned?LB(Ee.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Ae=>{Ae.stopPropagation(),ne(Ee)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ga,{})}),n.jsx("button",{type:"button",onClick:Ae=>{Ae.stopPropagation(),R(Ee)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},Ee.id)):n.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},xe)})}),!p&&!t&&Ne.length>0&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:Se.map(xe=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",xe),ne(xe,!0)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:xe.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ge(xe.status||"To Do")}`,children:xe.status||"To Do"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(xe.priority||"Low")}`,children:xe.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:xe.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ke(xe)?"text-red-600 font-medium":""}`,children:xe.dateAssigned?LB(xe.dateAssigned):""}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",onClick:ee=>ee.stopPropagation(),children:[n.jsxs("button",{type:"button",onClick:()=>ne(xe),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(ga,{})," Edit"]}),n.jsxs("button",{type:"button",onClick:()=>R(xe),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[n.jsx(Wt,{})," Delete"]})]})})]},xe.id))})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ne.length,pageSize:Eg,currentPage:Ne.length===0?0:_,onPrev:()=>A(xe=>Math.max(xe-1,1)),onNext:()=>A(xe=>Math.min(xe+1,Math.max(1,Math.ceil(Ne.length/Eg)||1))),label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:oe,onSave:K,onEdit:()=>d(!1),setFormData:Q,formData:G,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:R}),T&&n.jsx(zGe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ye,onCancel:pe,loading:z})]})}function RGe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function zGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function UGe(){h.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(""),[c,d]=h.useState("All Statuses"),[u,f]=h.useState({show:!1,action:null,campaign:null}),[p,x]=h.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[v,N]=h.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),b=p.filter(F=>{const P=c==="All Statuses"||F.status===c,M=F.name.toLowerCase().includes(o.toLowerCase())||F.subject.toLowerCase().includes(o.toLowerCase());return P&&M}),C=()=>{s(!1),N({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},w=(F,P)=>{P.stopPropagation(),s(!0),N(F),t(!0)},S=(F,P)=>{P.stopPropagation(),f({show:!0,action:"delete",campaign:F})},E=F=>{F.preventDefault(),f({show:!0,action:a?"edit":"add",campaign:{...v}})},k=()=>{if(u.action==="add"){const F={...u.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(P=>[...P,F]),t(!1)}else u.action==="edit"?(x(F=>F.map(P=>P.id===u.campaign.id?{...u.campaign}:P)),t(!1)):u.action==="delete"&&x(F=>F.filter(P=>P.id!==u.campaign.id));f({show:!1,action:null,campaign:null})},_=()=>{f({show:!1,action:null,campaign:null})},A=F=>i(F),T=()=>i(null),$=F=>{const{name:P,value:M}=F.target;N(G=>({...G,[P]:M}))},z=F=>{F.target.id==="modalBackdrop"&&t(!1)};return r?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:T,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-5 h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),n.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Subject:"})," ",n.jsx("br",{}),r.subject]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),r.createdBy]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created On:"})," ",n.jsx("br",{}),r.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",n.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),n.jsxs("p",{className:"sm:col-span-2",children:[n.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",n.jsx("br",{}),r.content]}),r.status==="Scheduled"&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",n.jsx("br",{}),r.recipients]})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),n.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:o,onChange:F=>l(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:F=>d(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Draft"}),n.jsx("option",{children:"Scheduled"}),n.jsx("option",{children:"Sent"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),n.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Recipients"}),n.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-sm text-gray-700",children:b.map((F,P)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>A(F),children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:F.name}),n.jsx("td",{className:"py-3 px-4",children:F.subject}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${F.status==="Scheduled"?"bg-yellow-100 text-yellow-700":F.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:F.status})}),n.jsx("td",{className:"py-3 px-4",children:F.recipients?`${F.recipients} emails`:""}),n.jsx("td",{className:"py-3 px-4",children:F.scheduleDate?new Date(F.scheduleDate).toLocaleString():""}),n.jsx("td",{className:"py-3 px-4 text-center",onClick:M=>M.stopPropagation(),children:n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx("button",{onClick:M=>w(F,M),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})}),n.jsx("button",{onClick:M=>S(F,M),className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})})]},P))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:a?"Edit Campaign":"Add New Campaign"}),n.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:v.name,onChange:$,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:v.subject,onChange:$,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"status",value:v.status,onChange:$,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Sent",children:"Sent"})]})]}),v.status==="Scheduled"&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",name:"scheduleDate",value:v.scheduleDate,onChange:$,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"recipients",value:v.recipients,onChange:$,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"content",rows:4,value:v.content,onChange:$,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),u.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:_,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:u.action==="delete"?"Confirm Delete":u.action==="edit"?"Confirm Edit":"Confirm Add"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:u.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):u.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):n.jsxs(n.Fragment,{children:["Add new campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const FGe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],PB={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function BGe(){h.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=h.useState(FGe),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(""),[u,f]=h.useState("All Categories"),[p,x]=h.useState({name:"",category:"",subject:"",body:""}),[v,N]=h.useState({show:!1,action:null,template:null}),b=()=>{l(null),i(null),s(!1)},C=P=>{x({...p,[P.target.name]:P.target.value})},w=()=>{N({show:!0,action:"add",template:{...p}})},S=P=>{i(P),x({name:P.name,category:P.category,subject:P.subject,body:P.body})},E=()=>{N({show:!0,action:"edit",template:{...p,id:r.id}})},k=P=>{N({show:!0,action:"delete",template:P})},_=P=>{zx.success(`Template "${P.name}" selected for use!`),N({show:!1,action:null,template:null})},A=()=>{const P=v.template;if(v.action==="add"){const M={...P,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(G=>[M,...G]),s(!1),x({name:"",category:"",subject:"",body:""})}else v.action==="edit"?(t(M=>M.map(G=>G.id===P.id?{...P}:G).sort((G,Q)=>new Date(Q.date).getTime()-new Date(G.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),l(null)):v.action==="delete"&&(t(M=>M.filter(G=>G.id!==P.id)),l(null));N({show:!1,action:null,template:null})},T=()=>{N({show:!1,action:null,template:null})},$=P=>l(P),z=e.filter(P=>P.name.toLowerCase().includes(c.toLowerCase())&&(u==="All Categories"||P.category===u)),F=(P,M=!1)=>n.jsxs("div",{className:"flex flex-col justify-between h-full",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:P.name}),n.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${PB[P.category]||PB.default}`,children:P.category})]}),n.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:P.subject}),n.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${M?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:M?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:P.body})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!M&&n.jsxs("button",{onClick:G=>{G.stopPropagation(),_(P)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(hn,{})," Use Template"]}),M&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:G=>{G.stopPropagation(),S(P)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(ga,{})," Edit"]}),n.jsxs("button",{onClick:G=>{G.stopPropagation(),k(P)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[n.jsx(Wt,{})," Delete"]})]}),n.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",P.createdBy," | ",P.date]})]})]});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[n.jsx(Rx,{position:"top-center",reverseOrder:!1}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-black"})," Templates"]}),n.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:P=>d(P.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:u,onChange:P=>f(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Categories"}),n.jsx("option",{children:"Welcome"}),n.jsx("option",{children:"Follow-up"}),n.jsx("option",{children:"Newsletter"}),n.jsx("option",{children:"Promotional"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:z.map(P=>n.jsxs("div",{onClick:()=>$(P),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow",children:F(P)})]},P.id))}),(a||r)&&n.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[n.jsx("button",{onClick:b,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),n.jsxs("form",{onSubmit:P=>{P.preventDefault(),r?E():w()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:C,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"category",value:p.category,onChange:C,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"Welcome",children:"Welcome"}),n.jsx("option",{value:"Follow-up",children:"Follow-up"}),n.jsx("option",{value:"Newsletter",children:"Newsletter"}),n.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:C,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:C,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),o&&!r&&n.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:P=>P.stopPropagation(),children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:F(o,!0)})]})}),v.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:T,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Xt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:v.action==="delete"?"Confirm Delete":v.action==="edit"?"Confirm Update":v.action==="add"?"Confirm Add":"Confirm Use"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:v.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="add"?n.jsxs(n.Fragment,{children:["Add new template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):n.jsxs(n.Fragment,{children:["Use template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:A,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}function HGe({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Jt(),i=wt(),{logout:o}=Ys(),{user:l,fetchUser:c}=tn(),d={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};h.useEffect(()=>{c()},[]),h.useEffect(()=>{const f=()=>{c()};return window.addEventListener("userProfileUpdated",f),()=>{window.removeEventListener("userProfileUpdated",f)}},[c]);const u=d[r.pathname]||"Group Manager Panel";return h.useEffect(()=>{function f(p){s.current&&!s.current.contains(p.target)&&a(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:u})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(rx,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[l?.first_name," ",l?.middle_name," ",l?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{i("/group-manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:o,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function GGe(){const[e,t]=h.useState(!0),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Jt(),{user:d}=tn();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(It,{to:"/group-manager/dashboard",className:({isActive:v})=>v?u:f,children:[n.jsx(ix,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/group-manager/accounts",className:({isActive:v})=>v?u:f,children:[n.jsx(xd,{})," Accounts"]}),n.jsxs(It,{to:"/group-manager/contacts",className:({isActive:v})=>v?u:f,children:[n.jsx(sn,{})," Contacts"]}),n.jsxs(It,{to:"/group-manager/leads",className:({isActive:v})=>v?u:f,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs(It,{to:"/group-manager/deals",className:({isActive:v})=>v?u:f,children:[n.jsx(en,{})," Deals"]}),n.jsxs(It,{to:"/group-manager/quotes",className:({isActive:v})=>v?u:f,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs(It,{to:"/group-manager/targets",className:({isActive:v})=>v?u:f,children:[n.jsx(lr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ts,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/group-manager/tasks",className:({isActive:v})=>v?u:f,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs(It,{to:"/group-manager/meetings",className:({isActive:v})=>v?u:f,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs(It,{to:"/group-manager/calls",className:({isActive:v})=>v?u:f,children:[n.jsx(Rs,{})," Calls"]}),n.jsxs(It,{to:"/group-manager/audit",className:({isActive:v})=>v?u:f,children:[n.jsx(Ts,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(It,{to:"/group-manager/territory",className:({isActive:v})=>v?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xk,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(It,{to:"/group-manager/users",className:({isActive:v})=>v?u:f,children:[n.jsx(aa,{})," Users"]}),n.jsxs(It,{to:"/group-manager/manage-account",className:({isActive:v})=>v?u:f,children:[n.jsx(sn,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(HGe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Xp,{})})]})]})}const WGe=e=>n.jsx(qt,{...e}),VJ=e=>n.jsx(xd,{...e}),QJ=e=>n.jsx(qs,{...e}),qGe=e=>n.jsx(sx,{...e}),VGe=e=>n.jsx(zw,{...e}),QGe=e=>n.jsx(Et,{...e}),YGe=e=>n.jsx(Lt,{...e}),KGe=e=>n.jsx(Fw,{...e}),YJ=e=>n.jsx(Uw,{...e}),XGe=e=>n.jsx(aa,{...e}),KJ=e=>n.jsx(sn,{...e}),ZGe=e=>n.jsx(Yn,{...e}),XJ=e=>n.jsx(en,{...e}),JGe=e=>n.jsx(hn,{...e}),eWe=e=>n.jsx(lr,{...e}),tWe=e=>n.jsx(_a,{...e}),nWe=e=>n.jsx(Et,{...e}),aWe=e=>n.jsx(Rs,{...e}),sWe=e=>n.jsx(Xl,{...e}),rWe=e=>n.jsx(Ts,{...e}),ZJ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,iWe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},oWe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},lWe=e=>{switch(e){case"call":return{Icon:YGe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:KGe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:QGe,color:"text-blue-500",bgColor:"bg-blue-100"}}},cWe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},dWe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:VJ,label:"Account"},{icon:KJ,label:"Contact"},{icon:ZGe,label:"Leads"},{icon:XJ,label:"Deals"},{icon:JGe,label:"Quotes"},{icon:eWe,label:"Target"},{icon:tWe,label:"Task"},{icon:nWe,label:"Meeting"},{icon:aWe,label:"Call"},{icon:rWe,label:"Audit"},{icon:sWe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(WGe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},uWe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},mWe=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(YJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(uWe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},fWe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),hWe=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let E=0;E<=C;E++)w.push(s[E]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",E=b.stage||"",k=E.toUpperCase()==="CLOSED_WON"||E==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const A=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:E,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(b)})),S&&k&&A)try{let T=new Date(w);if(isNaN(T.getTime())){const $=String(w).split("T")[0];T=new Date($+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const $=T.getFullYear(),z=T.getMonth()+1,F=`${$}-${String(z).padStart(2,"0")}`;l[F]||(l[F]=0),l[F]+=_,c++,console.log(` Added deal ${b.id} to month ${F}: ${_}, total: ${l[F]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${F} (Year: ${$}, Month: ${z})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,E=l[S]||0;x.push(`${s[w]} ${C}`),v.push(E),E>0&&console.log(`Month ${s[w]} ${C} (${S}): ${E}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(YJ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(YN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},gWe=({pipelineData:e,loading:t})=>{const a=wt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/group-manager/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/group-manager/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:ZJ(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},KA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},pWe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=oWe(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},xWe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=wt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=iWe(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?qGe:VGe,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/group-manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:ZJ(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},yWe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=lWe(f),{text:N,bg:b}=cWe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const A=new Date(_),$=A-new Date,z=Math.floor($/864e5);return z===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),E=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/group-manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/group-manager/meetings/info?id=${o}`)):d("/group-manager/tasks"):d(f==="call"?`/group-manager/calls/info?id=${o}`:f==="meeting"?`/group-manager/meetings/info?id=${o}`:"/group-manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(QJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(KJ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",E]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},bWe=()=>{const e=wt(),{user:t}=tn(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[E,k]=h.useState(""),[_,A]=h.useState([]),[T,$]=h.useState([]),[z,F]=h.useState([]),[P,M]=h.useState(new Date),G=h.useRef(null),Q=h.useRef(null),V=h.useMemo(()=>{try{if(!E.trim())return[];const oe=E.toLowerCase().trim(),K=[];return Array.isArray(_)&&_.forEach(R=>{const ye=`${R.first_name||""} ${R.last_name||""}`.trim().toLowerCase(),pe=(R.company_name||"").toLowerCase(),Ne=(R.email||"").toLowerCase(),Se=(R.phone||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:R.id,name:`${R.first_name||""} ${R.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:R.company_name||"No company",route:`/group-manager/leads/${R.id}`})}),Array.isArray(T)&&T.forEach(R=>{const ye=(R.name||"").toLowerCase(),pe=(R.account?.name||"").toLowerCase(),Ne=(R.description||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe))&&K.push({id:R.id,name:R.name||"Unnamed Deal",type:"Deal",details:R.account?.name||"No account",route:`/group-manager/deals/info?id=${R.id}`})}),Array.isArray(z)&&z.forEach(R=>{const ye=(R.name||"").toLowerCase(),pe=(R.email||"").toLowerCase(),Ne=(R.phone||"").toLowerCase(),Se=(R.website||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:R.id,name:R.name||"Unnamed Account",type:"Account",details:R.email||R.phone||"No contact info",route:"/group-manager/accounts"})}),K.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[E,_,T,z]),X=oe=>{oe.route&&(e(oe.route),k(""))},q=h.useCallback(async()=>{C(!0),S(null);try{const[oe,K,R,ye,pe,Ne,Se]=await Promise.all([ae.get("/leads/group-manager/getLeads").catch(Z=>(console.error("Error fetching leads:",Z),{data:[]})),ae.get("/deals/group-manager/fetch-all").catch(Z=>(console.error("Error fetching deals:",Z),{data:[]})),ae.get("/accounts/group-manager/fetch-all").catch(Z=>(console.error("Error fetching accounts:",Z),{data:[]})),ae.get("/tasks/all").catch(Z=>(console.error("Error fetching tasks:",Z),{data:[]})),ae.get("/meetings/group-manager/fetch-all").catch(Z=>(console.error("Error fetching meetings:",Z),{data:[]})),ae.get("/calls/group-manager/fetch-all").catch(Z=>(console.error("Error fetching calls:",Z),{data:[]})),ae.get("/logs/read-all").catch(Z=>(console.error("Error fetching logs:",Z),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],ke=Array.isArray(K.data)?K.data:[],he=Array.isArray(R.data)?R.data:[],Ge=Array.isArray(ye.data)?ye.data:[],Ce=Array.isArray(pe.data)?pe.data:[],xe=Array.isArray(Ne.data)?Ne.data:[],ee=Array.isArray(Se.data)?Se.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),A(Oe),$(ke),F(he);const Ee=Oe.filter(Z=>Z.status&&!["Lost","Converted"].includes(Z.status)).length,Ae=Ge.filter(Z=>!Z.dueDate||Z.status==="Completed"?!1:new Date(Z.dueDate)<new Date).length;s({activeLeads:Ee,totalDeals:ke.length,activeAccounts:he.length,overdueTasks:Ae});const Re=[...Oe].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);i(Re);const et=[...ke].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);l(et);const De=new Date,tt=[];xe.forEach(Z=>{const _e=Z.due_date||Z.call_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="MISSED"||te==="NOT_HELD"||te==="HELD"||tt.push({type:"Call",title:Z.subject||"Untitled Call",assignedTo:Z.assigned_to||(Z.call_assign_to?`${Z.call_assign_to.first_name||""} ${Z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"call",fullData:Z})}}),Ce.forEach(Z=>{const _e=Z.dueDate||Z.start_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="CANCELLED"||te==="DONE"||tt.push({type:"Meeting",title:Z.subject||Z.activity||"Untitled Meeting",assignedTo:Z.assignedTo||(Z.meet_assign_to?`${Z.meet_assign_to.first_name||""} ${Z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"meeting",fullData:Z})}});const Je={HIGH:1,MEDIUM:2,LOW:3},H=tt.sort((Z,_e)=>{const te=Je[Z.priority]||3,Ue=Je[_e.priority]||3;if(te!==Ue)return te-Ue;const Ie=new Date(Z.scheduledDate||0),We=new Date(_e.scheduledDate||0);return Ie-We}).slice(0,5);d(H),f(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const be=ke.filter(Z=>(Z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",be.length),be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),be.forEach((Z,_e)=>{let te=Z.amount;te&&typeof te=="object"?te.toString?te=parseFloat(te.toString()):te=parseFloat(te):te=parseFloat(te)||0,console.log(`Deal ${_e+1}:`,{id:Z.id,name:Z.name,stage:Z.stage,stage_upper:(Z.stage||"").toUpperCase(),amount:Z.amount,amount_parsed:te,amount_type:typeof Z.amount,close_date:Z.close_date,close_date_type:typeof Z.close_date,close_date_value:Z.close_date?new Date(Z.close_date):null,has_close_date:!!Z.close_date,has_amount:te>0,all_keys:Object.keys(Z),full_deal:Z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(Z=>Z.stage))),N(ke);const le=[...ee].sort((Z,_e)=>new Date(_e.timestamp||0)-new Date(Z.timestamp||0));x(le)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),q(),G.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),q(),M(new Date)},3e4),()=>{G.current&&clearInterval(G.current)}),[q]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const K=3;let R=null;const ye=()=>{const pe=window.location.protocol==="https:"?"wss:":"ws:",Ne=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Se=`${pe}//${Ne}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Se);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=ke=>{try{const he=JSON.parse(ke.data);console.log(" Real-time notification received:",he),he.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(he.event)&&(console.log(" Refreshing dashboard due to:",he.event),q(),M(new Date))}catch(he){console.error("Error parsing WebSocket message:",he)}},Oe.onerror=ke=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<K&&(oe++,R=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{R&&clearTimeout(R),Q.current&&(Q.current.close(),Q.current=null)}},[t,q]);const ne=[{icon:XGe,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:XJ,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:VJ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/group-manager/accounts")},{icon:QJ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(dWe,{searchQuery:E,onSearchChange:k,searchResults:V,onSearchResultClick:X}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:ne.map(oe=>n.jsx(fWe,{...oe,loading:b},oe.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(mWe,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(hWe,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(gWe,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(KA,{title:"Latest Leads",children:r.length>0?r.map((oe,K)=>n.jsx(pWe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(KA,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((oe,K)=>n.jsx(xWe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(KA,{title:"Upcoming Activities",children:c.length>0?c.map((oe,K)=>n.jsx(yWe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},XA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],ZA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Pr=e=>e?e.toUpperCase():"",JA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",vWe=e=>{switch(Pr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},wWe=e=>{switch(Pr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function NWe(){const e=wt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(ZA),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,E]=h.useState([]),[k,_]=h.useState(null),[A,T]=h.useState([]),[$,z]=h.useState([]),[F,P]=h.useState("Filter by Status"),[M,G]=h.useState(""),[Q,V]=h.useState(null),[X,q]=h.useState(!1),[ne,oe]=h.useState(1),[K,R]=h.useState(10),[ye,pe]=h.useState("Overview"),[Ne,Se]=h.useState(""),[Oe,ke]=h.useState(!1),[he,Ge]=h.useState({}),[Ce,xe]=h.useState(null),{comments:ee,addComment:Ee,refresh:Ae}=Ea({relatedType:"account",relatedId:x?.id});h.useEffect(()=>{x?.id&&Ae()},[x?.id,Ae]);const Re=h.useCallback(async(re=null)=>{w(!0);try{const ot=await ae.get("/accounts/admin/fetch-all"),kt=[...Array.isArray(ot.data)?ot.data:[]].sort((Yt,Me)=>{const vt=Yt?.created_at||Yt?.updated_at||0,U=Me?.created_at||Me?.updated_at||0;return new Date(U)-new Date(vt)});if(b(kt),re){const Yt=kt.find(Me=>Me.id===re);v(Yt||null)}}catch(ot){console.error(ot),b([]),ot.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),et=h.useCallback(async()=>{try{const re=await ae.get("/users/all");E(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),De=h.useCallback(async()=>{try{const re=await ae.get("/territories/fetch");T(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&W.warn("Unable to load territories (permission denied).")}},[]),tt=h.useCallback(async()=>{try{const re=await ae.get("/accounts/admin/parent-companies");z(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&W.warn("Unable to load parent companies (permission denied).")}},[]),Je=h.useCallback(async re=>{try{const ot=await ae.get(`/activities/accounts/${re}`);Ge(ot.data&&typeof ot.data=="object"?ot.data:{})}catch(ot){console.error(ot),ot.response?.status===404&&(console.warn("No activities found for this account."),Ge({}))}},[]);h.useEffect(()=>{Re(),et(),De(),tt()},[Re,et,De,tt]),h.useEffect(()=>{x&&Se(Pr(x.status)||"PROSPECT")},[x]);const H=N.length,be=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="customer").length,[N]),le=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="prospect").length,[N]),Z=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="partner").length,[N]),_e=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="active").length,[N]),te=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="inactive").length,[N]),Ue=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="former").length,[N]),Ie=h.useMemo(()=>[{title:"Total",value:H,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:be,icon:Mo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:le,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Z,icon:sn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:_e,icon:Mo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:te,icon:Io,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Ue,icon:Io,color:"text-orange-600",bgColor:"bg-orange-100"}],[H,be,le,Z,_e,te,Ue]),We=h.useMemo(()=>{const re=M.trim().toLowerCase(),ot=F.trim().toUpperCase();return N.filter(Rt=>{const kt=[Rt?.name,Rt?.website,Rt?.industry,Rt?.territory?.name,Rt?.phone_number],Yt=re===""||kt.some(vt=>vt==null?!1:vt.toString().toLowerCase().includes(re)),Me=ot==="FILTER BY STATUS"||Pr(Rt.status)===ot;return Yt&&Me})},[N,M,F]),gt=Math.max(1,Math.ceil(We.length/K)||1);h.useEffect(()=>{oe(1)},[M,F,K]),h.useEffect(()=>{oe(re=>{const ot=Math.max(1,Math.ceil(We.length/K)||1);return re>ot?ot:re})},[We.length,K]);const ve=h.useMemo(()=>{const re=(ne-1)*K;return We.slice(re,re+K)},[We,ne,K]);We.length===0||(ne-1)*K+1,Math.min(ne*K,We.length);const Be=()=>oe(re=>Math.max(re-1,1)),nt=()=>oe(re=>Math.min(re+1,gt)),Te=re=>{v(re),pe("Overview"),Se(Pr(re?.status)||"PROSPECT")},Qe=()=>v(null),ct=re=>{re.target.id==="accountModalBackdrop"&&!X&&Qe()},ht=()=>{a(!1),r(!1),u(null),p(ZA),o(!1),_(null)},je=re=>{re.target.id==="modalBackdrop"&&ht()},Ze=re=>re?new Date(re).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ce=re=>{const{name:ot,value:Rt}=re.target;p(kt=>({...kt,[ot]:Rt}))},J=()=>{p(ZA),r(!1),u(null),a(!0)},de=re=>{v(null),re.assigned_accs?_(re.assigned_accs):_(null),p({name:re.name||"",website:re.website||"",phone_number:re.phone_number||"",billing_address:re.billing_address||"",shipping_address:re.shipping_address||"",industry:re.industry||"",status:Pr(re.status)||"PROSPECT",territory_id:re.territory?.id?String(re.territory.id):"",assigned_to:re.assigned_accs?.id?String(re.assigned_accs.id):""}),r(!0),u(re.id),a(!0)},D=re=>{re&&V({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:re.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:re.id,name:re.name}})},B=async()=>{if(!Q?.action){V(null);return}const{action:re}=Q,{type:ot,payload:Rt,targetId:kt,name:Yt}=re;q(!0);try{if(ot==="create"){o(!0);const Me=await ae.post("/accounts/admin",Rt);tt(),W.success(`Account "${Yt}" created successfully.`);const vt=x?.id||null;ht(),await Re(vt),!x&&Me.data?.id}else if(ot==="update"){if(!kt)throw new Error("Missing account identifier for update.");o(!0),await ae.put(`/accounts/admin/${kt}`,Rt),W.success(`Account "${Yt}" updated successfully.`);const Me=x?.id&&x.id===kt?kt:null;ht(),await Re(Me),x?.id===kt&&v(null)}else if(ot==="delete"){if(!kt)throw new Error("Missing account identifier for deletion.");const Me=x?.id;c(kt),await ae.delete(`/accounts/admin/${kt}`),W.success(`Account "${Yt}" deleted successfully.`),await Re(Me&&Me!==kt?Me:null),Me===kt&&v(null)}}catch(Me){console.error(Me);const vt=ot==="create"?"Failed to create account. Please review the details and try again.":ot==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",U=Me.response?.data?.detail||vt;W.error(U),(ot==="create"||ot==="update")&&o(!1),ot==="delete"&&c(null)}finally{(ot==="create"||ot==="update")&&o(!1),ot==="delete"&&c(null),q(!1),V(null)}},ie=()=>{X||V(null)},ue=async()=>{if(!x||!Ne)return;const re=Pr(Ne),ot=Pr(x.status);if(re!==ot){ke(!0);try{await ae.put(`/accounts/admin/${x.id}`,{status:re}),W.success(`Account status updated to ${JA(re)}`),b(Rt=>Rt.map(kt=>kt.id===x.id?{...kt,status:re}:kt)),v(null)}catch(Rt){console.error(Rt);const kt=Rt.response?.data?.detail||"Failed to update account status. Please try again.";W.error(kt)}finally{ke(!1)}}},[se,Pe]=h.useState(!1),ge=re=>{re.preventDefault(),Pe(!0);const ot=f.name.trim();if(!ot){W.error("Account name is required.");return}if(!f.assigned_to){W.error("Assigned To is required.");return}const kt={name:ot,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},Yt=s&&d?"update":"create";V({title:Yt==="create"?"Confirm New Account":"Confirm Update",message:Yt==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:ot}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:ot}),"?"]}),confirmLabel:Yt==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Yt,payload:kt,targetId:d||null,name:ot}})},fe=[{label:"Filter by Status",value:"Filter by Status"},...XA.map(re=>({label:re.label,value:re.value}))],Fe=Q?.action?.type==="delete"?Q.action.targetId:null,Xe=x&&(l===x.id||Fe===x.id),pt=x&&l===x.id,Nt=x?vWe(x.status):"",St=x?n.jsx("div",{id:"accountModalBackdrop",onClick:ct,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:re=>re.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Qe,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nt}`,children:JA(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>de(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>D(x),disabled:!!Xe,children:pt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(re=>n.jsx("button",{onClick:()=>pe(re),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===re?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:re},re))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Ze(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Ze(x.updated_at)||"N/A"})]})]}),n.jsx(Ta,{comments:ee,onAddComment:Ee})]}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[he.tasks&&he.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",he.tasks.length,")"]})]}),Ce==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.tasks.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||"No description"}),re.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",re.assigned_to.first_name," ",re.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.due_date||re.created_at)})]},`task-${ot}`))})]}),he.meetings&&he.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",he.meetings.length,")"]})]}),Ce==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.meetings.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||re.location||"No description"}),re.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",re.host.first_name," ",re.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.start_time||re.created_at)})]},`meeting-${ot}`))})]}),he.calls&&he.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",he.calls.length,")"]})]}),Ce==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.calls.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.call_time||re.created_at)})]},`call-${ot}`))})]}),he.contacts&&he.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",he.contacts.length,")"]})]}),Ce==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.contacts.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(sn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.first_name?`${re.first_name} `:"",re.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.created_at)})]},`contact-${ot}`))})]}),he.deals&&he.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",he.deals.length,")"]})]}),Ce==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.deals.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.deal_id?re.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",re.name||re.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:re.stage||re.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.close_date||re.created_at)})]},`deal-${ot}`))})]}),he.quotes&&he.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",he.quotes.length,")"]})]}),Ce==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),Ce==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.quotes.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(re.quote_id?re.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.presented_date)||""})]},`quote-${ot}`))})]}),(!he||(!he.tasks||he.tasks.length===0)&&(!he.meetings||he.meetings.length===0)&&(!he.calls||he.calls.length===0)&&(!he.quotes||he.quotes.length===0)&&(!he.deals||he.deals.length===0)&&(!he.contacts||he.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Ne||Pr(x?.status)||"PROSPECT",onChange:re=>Se(re.target.value),children:XA.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))}),n.jsx("button",{onClick:ue,disabled:Oe||!Ne||Pr(Ne)===Pr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!Ne||Pr(Ne)===Pr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,Ht=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{J(),Pe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(re=>n.jsx(jWe,{...re},re.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:re=>G(re.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:F,onChange:re=>P(re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):We.length>0?ve.map(re=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Te(re),Je(re.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:re.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:re.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${wWe(re.status)}`,children:JA(re.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:re.phone_number||"--"})]})})]},re.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:We.length,pageSize:K,currentPage:ne,onPrev:Be,onNext:nt,onPageSizeChange:R,label:"accounts"})]}),on=t?n.jsx("div",{id:"modalBackdrop",onClick:je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:re=>re.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ht(),Pe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||X,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ge,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Jm,{label:"Name",name:"name",value:f.name,onChange:ce,placeholder:"Company name",required:!0,isSubmitted:se})}),n.jsx(OB,{label:"Parent Company",value:f.parent_company,onChange:re=>{p(ot=>({...ot,parent_company:re}))},items:$.map(re=>({id:re,name:re})),getLabel:re=>re?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Jm,{label:"Website",name:"website",value:f.website,onChange:ce,placeholder:"https://example.com",disabled:i}),n.jsx(Jm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Jm,{label:"Industry",name:"industry",value:f.industry,onChange:ce,placeholder:"Industry",disabled:i}),n.jsx(Jm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:ce,placeholder:"Billing address",disabled:i}),n.jsx(Jm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:ce,placeholder:"Shipping address",disabled:i}),n.jsx(DB,{label:"Status",name:"status",value:f.status,onChange:ce,options:[{value:"",label:"Select status"},...XA],required:!0,disabled:i}),n.jsx(OB,{label:"Assigned To",value:f.assigned_to,onChange:re=>{const ot=S.find(kt=>String(kt.id)===String(re));_(ot);let Rt=null;ot&&ot.assigned_territory&&ot.assigned_territory.length===1&&(Rt=ot.assigned_territory[0].id),p(kt=>({...kt,assigned_to:re,territory_id:Rt}))},items:S||[],getLabel:re=>`${re?.first_name??""} ${re?.last_name??""} (${re?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:se,disabled:i||S.length===0}),n.jsx(DB,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:ce,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(re=>({value:String(re.id),label:re.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),Pe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||X,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||X,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,cn=Q?n.jsx(SWe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:B,onCancel:ie,loading:X}):null;return n.jsxs(n.Fragment,{children:[Ht,St,on,cn]})}function jWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Jm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function DB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function OB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(CWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function CWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),E=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function SWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const eT={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},yl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),ho=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function _We(){const e=wt(),t=Jt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[E,k]=h.useState(!1),[_,A]=h.useState(null),[T,$]=h.useState(eT),[z,F]=h.useState(""),[P,M]=h.useState("Filter by Accounts"),[G,Q]=h.useState(null),[V,X]=h.useState("Overview"),[q,ne]=h.useState(1),[oe,K]=h.useState(10),[R,ye]=h.useState({}),[pe,Ne]=h.useState(null),[Se,Oe]=h.useState(null),{comments:ke,addComment:he,refresh:Ge}=Ea({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&Ge()},[u?.id,Ge]),h.useEffect(()=>{const D=t.state?.contactID;D&&(Oe(D),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Se&&a.length>0&&!r){const D=a.find(B=>B.id===Se);D?f(D):W.error("Contact not found."),Oe(null)}},[Se,a,r]);const Ce=h.useCallback(async(D=null)=>{i(!0);try{const B=await ae.get("/contacts/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((se,Pe)=>{const ge=se?.created_at||se?.updated_at||0,fe=Pe?.created_at||Pe?.updated_at||0;return new Date(fe)-new Date(ge)});if(s(ue),D){const se=ue.find(Pe=>Pe.id===D);f(se||null)}}catch(B){console.error(B),s([]),B.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),xe=h.useCallback(async()=>{try{const D=await ae.get("/accounts/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>(ue?.name||"").localeCompare(se?.name||""));l(ie)}catch(D){console.error(D),l([]),D.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),ee=h.useCallback(async()=>{try{const D=await ae.get("/users/all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>yl(ue).localeCompare(yl(se)));d(ie)}catch(D){console.error(D),d([]),D.response?.status===403&&W.warn("Unable to load users for assignment (permission denied).")}},[]),Ee=h.useCallback(async D=>{try{const B=await ae.get(`/activities/contact/${D}`);ye(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{Ce(),xe(),ee()},[Ce,xe,ee]);const Ae=h.useMemo(()=>{const D=new Map;o.forEach(ie=>{ie?.id&&ie?.name&&D.set(String(ie.id),ie.name)}),a.forEach(ie=>{ie?.account_id&&ie?.account?.name&&D.set(String(ie.account_id),ie.account.name)});const B=Array.from(D.entries()).sort((ie,ue)=>ie[1].localeCompare(ue[1])).map(([ie,ue])=>({value:ie,label:ue}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...B]},[o,a]),Re=h.useMemo(()=>{const D=z.trim().toLowerCase(),B=P.trim();return a.filter(ie=>{const ue=[ie?.first_name,ie?.last_name,ie?.email,ie?.title,ie?.department,ie?.account?.name,ie?.account?.status,ie?.work_phone,ie?.mobile_phone_1,ie?.mobile_phone_2,ie?.assigned_contact?.first_name,ie?.assigned_contact?.last_name,ie?.contact_creator?.first_name,ie?.contact_creator?.last_name,ie?.notes,ho(ie?.created_at),ho(ie?.updated_at)],se=D===""||ue.some(ge=>ge==null?!1:ge.toString().toLowerCase().includes(D)),Pe=B==="Filter by Accounts"||String(ie.account_id)===B;return se&&Pe})},[a,z,P]),et=Math.max(1,Math.ceil(Re.length/oe)||1);h.useEffect(()=>{ne(1)},[z,P,oe]),h.useEffect(()=>{ne(D=>{const B=Math.max(1,Math.ceil(Re.length/oe)||1);return D>B?B:D})},[Re.length,oe]);const De=h.useMemo(()=>{const D=(q-1)*oe;return Re.slice(D,D+oe)},[Re,q,oe]),tt=()=>ne(D=>Math.max(D-1,1)),Je=()=>ne(D=>Math.min(D+1,et)),H=h.useMemo(()=>{if(!v||!_)return o;const D=a.find(ie=>ie.id===_);return!D||!D.account||o.some(ie=>ie.id===D.account.id)?o:[...o,D.account]},[o,v,_,a]),be=h.useCallback(()=>{x(!1),N(!1),A(null),$(eT),C(!1),We(!1)},[]),le=D=>{D.target.id==="modalBackdrop"&&!b&&!E&&be()},Z=D=>{const{name:B,value:ie}=D.target;$(ue=>({...ue,[B]:ie}))},_e=()=>{$(eT),N(!1),A(null),x(!0)},te=async D=>{if(!D)return;const B=await ae.get(`/accounts/get/${D.account_id}`);$({first_name:D.first_name||"",last_name:D.last_name||"",account_id:B.data.id?B.data.id:"",title:D.title||"",department:D.department||"",email:D.email||"",work_phone:D.work_phone||"",mobile_phone_1:D.mobile_phone_1||"",mobile_phone_2:D.mobile_phone_2||"",notes:D.notes||"",assigned_to:D.assigned_to?String(D.assigned_to):""}),N(!0),A(D.id),x(!0),f(null)},Ue=D=>{if(!D)return;const B=yl(D)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},[Ie,We]=h.useState(!1),gt=D=>{D.preventDefault(),We(!0);const B=T.first_name.trim(),ie=T.last_name.trim();if(!B||!ie){W.error("First name and last name are required.");return}if(!T.account_id){W.error("Account is required.");return}if(!T.assigned_to){W.error("Assigned To is required.");return}const se=T.email?.trim();if(!se){W.error("Email is required.");return}if(!se.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(se)){W.error("Please enter a valid email address.");return}const ge={first_name:B,last_name:ie,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},fe=v&&_?"update":"create",Fe=`${B} ${ie}`.trim();S({title:fe==="create"?"Confirm New Contact":"Confirm Update",message:fe==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Fe})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Fe}),"?"]}),confirmLabel:fe==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:fe,payload:ge,targetId:_||null,name:Fe}})},ve=async()=>{if(!w?.action){S(null);return}const{action:D}=w,{type:B,payload:ie,targetId:ue,name:se}=D;k(!0);try{if(B==="create"){C(!0),await ae.post("/contacts/admin",ie),W.success(`Contact "${se}" created successfully.`);const Pe=u?.id||null;be(),await Ce(Pe)}else if(B==="update"){if(!ue)throw new Error("Missing contact identifier for update.");C(!0),await ae.put(`/contacts/admin/${ue}`,ie),W.success(`Contact "${se}" updated successfully.`);const Pe=u?.id&&u.id===ue?ue:u?.id||null;be(),await Ce(Pe),u?.id===ue&&f(null)}else if(B==="delete"){if(!ue)throw new Error("Missing contact identifier for deletion.");const Pe=u?.id;Q(ue),await ae.delete(`/contacts/admin/${ue}`),W.success(`Contact "${se}" deleted successfully.`),await Ce(Pe&&Pe!==ue?Pe:null),Pe===ue&&f(null)}}catch(Pe){console.error(Pe);const ge=B==="create"?"Failed to create contact. Please review the details and try again.":B==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",fe=Pe.response?.data?.detail||ge;W.error(fe)}finally{(B==="create"||B==="update")&&C(!1),B==="delete"&&Q(null),k(!1),S(null)}},Be=()=>{E||S(null)},nt=D=>{f(D),X("Overview")},Te=()=>f(null),Qe=D=>{D.target.id==="contactModalBackdrop"&&!E&&Te()},ct=w?.action?.type==="delete"?w.action.targetId:null,ht=u&&(G===u.id||ct===u.id),je=u&&G===u.id,Ze=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Qe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Te,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:yl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>te(u),disabled:E||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ue(u),disabled:!!ht,children:je?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(D=>n.jsx("button",{onClick:()=>X(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:yl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ho(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ho(u.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Ta,{comments:ke,onAddComment:he})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[R.tasks&&R.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",R.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.tasks.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||"No description"}),D.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",D.assigned_to.first_name," ",D.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(D.due_date||D.created_at)})]},`task-${B}`))})]}),R.meetings&&R.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",R.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.meetings.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||D.location||"No description"}),D.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",D.host.first_name," ",D.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(D.start_time||D.created_at)})]},`meeting-${B}`))})]}),R.calls&&R.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",R.calls.length,")"]})]}),pe==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.calls.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(D.call_time||D.created_at)})]},`call-${B}`))})]}),R.deals&&R.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",R.deals.length,")"]})]}),pe==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.deals.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",D.name||D.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:D.stage||D.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(D.close_date||D.created_at)})]},`deal-${B}`))})]}),R.quotes&&R.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",R.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.quotes.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(D.quote_id?D.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:D.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(D.presented_date)||""})]},`quote-${B}`))})]}),(!R||(!R.tasks||R.tasks.length===0)&&(!R.meetings||R.meetings.length===0)&&(!R.calls||R.calls.length===0)&&(!R.quotes||R.quotes.length===0)&&(!R.deals||R.deals.length===0)&&(!R.contacts||R.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${yl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const D=encodeURIComponent(u.email),B=encodeURIComponent(""),ie=encodeURIComponent(""),ue=`mailto:${D}?subject=${B}&body=${ie}`;window.location.href=ue},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${yl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${yl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{_e(),We(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:D=>F(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:D=>M(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ae.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value??D.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):Re.length>0?De.map(D=>{const B=[{Icon:na,value:D.email,key:"email"},{Icon:Lt,value:D.work_phone,key:"work_phone"},{Icon:id,value:D.mobile_phone_1,key:"mobile_phone_1"},{Icon:id,value:D.mobile_phone_2,key:"mobile_phone_2"}].filter(ie=>!!ie.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{nt(D),Ee(D.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:yl(D)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:D.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ix,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:D.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:B.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:B.map(({Icon:ie,value:ue,key:se})=>{const Pe=yt.createElement(ie,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Pe,n.jsx("span",{children:ue})]},se)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(sn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.assigned_contact?`${D.assigned_contact.first_name} ${D.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:ho(D.created_at)||"--"})]})})]},D.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:oe,currentPage:q,onPrev:tt,onNext:Je,onPageSizeChange:K,label:"contacts"})]}),J=p?n.jsx("div",{id:"modalBackdrop",onClick:le,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:()=>{be(),We(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||E,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:gt,noValidate:!0,children:[n.jsx(Uc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Z,placeholder:"First name",required:!0,isSubmitted:Ie}),n.jsx(Uc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Z,placeholder:"Last name",required:!0,isSubmitted:Ie}),n.jsx(MB,{label:"Account",value:T.account_id,onChange:D=>$(B=>({...B,account_id:D})),items:v?H:o||[],getLabel:D=>D?.name??"",placeholder:"Search account...",disabled:b||(v?H.length===0:o.length===0),required:!0,isSubmitted:Ie}),n.jsx(MB,{label:"Assigned To",value:T.assigned_to,onChange:D=>$(B=>({...B,assigned_to:D})),items:c||[],getLabel:D=>`${D?.first_name??""} ${D?.last_name??""} (${D?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ie,disabled:b||c.length===0}),n.jsx(Uc,{label:"Title",name:"title",value:T.title,onChange:Z,placeholder:"Job title",disabled:b}),n.jsx(Uc,{label:"Department",name:"department",value:T.department,onChange:Z,placeholder:"Department",disabled:b}),n.jsx(Uc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Z,placeholder:"example@email.com",required:!0,isSubmitted:Ie}),n.jsx(Uc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Uc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Uc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(TWe,{label:"Notes",name:"notes",value:T.notes,onChange:Z,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{be(),We(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||E,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,de=w?n.jsx(EWe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:ve,onCancel:Be,loading:E}):null;return n.jsxs(n.Fragment,{children:[ce,Ze,J,de]})}function Uc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function MB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(AWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function AWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function TWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function EWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const tT=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function JJ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Ql(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[E,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,A]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const M=await ae.get(`/leads/get/${c}`);u(M.data),v(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),A({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&T()},[c,e]);const $=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){W.error("Lead must be Qualified before it can be converted.");return}const M=await ae.put(`/leads/${d.id}/update/status`,{status:x});W.success("Lead status updated successfully");const G={...d,status:M.data.status};u(G),i&&i(G),a&&a(),t&&t()}catch(M){console.error(M),W.error("Failed to update lead status")}},z=async M=>{const G={...w,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",G),console.log("Contact data: ",E),console.log("Deal data: ",_),console.log("Lead data: ",M);try{const V=(await ae.post("/accounts/convertedLead",G)).data.id,X={...E,account_id:V,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},ne=(await ae.post("/contacts/convertedLead",X)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},K=_.amount&&_.amount!==""?parseFloat(_.amount):0,R={..._,account_id:V,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:ne,probability:oe(),stage:"Prospecting"},ye=await ae.post("/deals/convertedLead",R),pe=await ae.put(`/leads/convert/${M.id}`);i&&i(null),a(),W.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const V=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";W.error(V)}},F=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=M=>M.toString().toLowerCase().replace(/\b\w/g,G=>G.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${F(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>z(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:tT(M.due_date||M.created_at)})]},`task-${G}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:tT(M.start_time||M.created_at)})]},`meeting-${G}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(zt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((M,G)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:tT(M.call_time||M.created_at)})]},`call-${G}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),G=encodeURIComponent(""),Q=encodeURIComponent(""),V=`mailto:${M}?subject=${G}&body=${Q}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>v(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:$,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const kWe=Vf.all(),nT=kWe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),LWe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),PWe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},aT={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function DWe(){const e=wt(),{leadID:t}=Ql();Us();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[E,k]=h.useState(10),[_,A]=h.useState(aT),[T,$]=h.useState(!1),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState(null),[V,X]=h.useState(!1),[q,ne]=h.useState({});h.useRef(null);const[oe,K]=h.useState(!1),[R,ye]=h.useState(null),[pe,Ne]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Se,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[ke,he]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ge=async()=>{try{const je=await ae.get("/leads/getUsers");l(je.data)}catch(je){console.error(`Error fetching users: ${je}`)}},Ce=async()=>{x(!0);try{const je=await ae.get("/leads/admin/getLeads");f(je.data),console.log(je.data)}catch(je){console.error(`Error fetching leads: ${je}`)}finally{x(!1)}};h.useEffect(()=>{Ge(),Ce()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const je=u.find(Ze=>Ze.id===Number(t));je&&s(je)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(R){const Ze=(de=>{if(!de)return{code:"+63",number:""};const D=de.match(/^(\+\d+)\s(.+)$/);if(D)return{code:D[1],number:D[2]};if(de.startsWith("+")){const B=de.match(/^(\+\d{1,3})/);if(B)return{code:B[1],number:de.substring(B[1].length).trim()}}return{code:"+63",number:de}})(R.work_phone),ce=[];R.work_phone&&ce.push(`Work: ${R.work_phone}`),R.mobile_phone_1&&ce.push(`Mobile 1: ${R.mobile_phone_1}`),R.mobile_phone_2&&ce.push(`Mobile 2: ${R.mobile_phone_2}`);const J=ce.length>0?ce.join(" | "):"";Ne({name:R.company_name||"",website:"",countryCode:Ze.code,phone_number:Ze.number,combinedPhoneNumbers:J,billing_address:R.address||"",shipping_address:R.address||"",industry:"",status:"Prospect",territory_id:R.assigned_to?.territory?.id||null,assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),Oe({last_name:R.last_name||"",first_name:R.first_name||"",account_id:null,title:R.title||"",department:R.department||"",email:R.email||"",work_phone:R.work_phone||"",mobile_phone_1:R.mobile_phone_1||"",mobile_phone_2:R.mobile_phone_2||"",notes:R.notes||"",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),he({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null})}},[R]);const xe=je=>N(je.target.value),ee=h.useMemo(()=>{const je=v.trim().toLowerCase(),Ze=b.trim().toUpperCase();return u.filter(ce=>{const J=[ce?.first_name,ce?.last_name,ce?.company_name,ce?.title,ce?.email,ce?.work_phone,ce?.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:""],de=je===""||J.some(B=>B==null||B===""?!1:B.toString().toLowerCase().includes(je));let D=!1;return Ze==="FILTER BY STATUS"?D=(ce.status?ce.status.toUpperCase():"")!=="CONVERTED":D=(ce.status?ce.status.toUpperCase():"")===Ze,de&&D})},[u,v,b]),Ee=Math.max(1,Math.ceil(ee.length/E)||1);h.useEffect(()=>{S(1)},[v,b,E]),h.useEffect(()=>{S(je=>{const Ze=Math.max(1,Math.ceil(ee.length/E)||1);return je>Ze?Ze:je})},[ee.length,E]);const Ae=h.useMemo(()=>{const je=(w-1)*E;return ee.slice(je,je+E)},[ee,w,E]),Re=()=>S(je=>Math.max(je-1,1)),et=()=>S(je=>Math.min(je+1,Ee)),De=h.useCallback(async je=>{try{const Ze=await ae.get(`/activities/lead/${je}`);ne(Ze.data&&typeof Ze.data=="object"?Ze.data:{})}catch(Ze){console.error(Ze),Ze.response?.status===404&&(console.warn("No activities found for this account."),ne({}))}},[]),tt=je=>{s(je),De(je.id)},Je=()=>{s(null),t&&e("/admin/leads",{replace:!0})},H=()=>{i(!1),A(aT),$(!1),F(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},be=je=>{je.target.id==="modalBackdrop"&&H()},le=()=>{A(aT),$(!1),F(null),d(null),i(!0)},Z=je=>{if(!je){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",je),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Ze=B=>{if(!B)return{code:"+63",number:""};const ie=B.match(/^(\+\d+)\s(.+)$/);return ie?{code:ie[1],number:ie[2]}:{code:"+63",number:B}},ce=Ze(je.work_phone),J=Ze(je.mobile_phone_1),de=Ze(je.mobile_phone_2);let D="";if(je.assigned_to){D=String(je.assigned_to.id);const B=o?.find(ie=>ie.id===je.assigned_to.id);d(B)}A({first_name:je.first_name||"",last_name:je.last_name||"",company_name:je.company_name||"",title:je.title||"",department:je.department||"",email:je.email||"",work_ccode:ce.code,work_phone:ce.number,m1_ccode:J.code,mobile_phone_1:J.number,m2_ccode:de.code,mobile_phone_2:de.number,address:je.address||"",notes:je.notes||"",source:je.source||"",territory_id:je.territory?.id||null,lead_owner:D,status:je.status||"New"}),$(!0),F(je.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},_e=je=>{if(!je){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",je);const Ze=`${je.first_name} ${je.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ze}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:je.id,name:Ze}})},te=je=>{const{name:Ze,value:ce}=je.target;if(A(J=>({...J,[Ze]:ce})),Ze==="lead_owner"){const J=o.find(de=>de.id===parseInt(ce));d(J)}},[Ue,Ie]=h.useState(!1),We=je=>{if(je.preventDefault(),Ie(!0),!_.last_name?.trim()){W.error("Last name is required.");return}if(!_.company_name?.trim()){W.error("Company is required.");return}if(!_.title?.trim()){W.error("Job title is required.");return}if(!_.email?.trim()){W.error("Email is required.");return}if(!_.email.includes("@")){W.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){W.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){W.error("Please assign a lead owner.");return}const ce={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},J=T&&z?"update":"create",de=`${_.first_name} ${_.last_name}`;Q({title:J==="create"?"Confirm New Lead":"Confirm Update",message:J==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}),confirmLabel:J==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:ce,targetId:z||null,name:de}})},gt=async()=>{if(!G?.action){Q(null);return}const{action:je}=G,{type:Ze,payload:ce,targetId:J,name:de,lead:D}=je;console.log(ce),X(!0);try{if(Ze==="create")M(!0),await ae.post("/leads/create",ce),W.success(`Lead "${de}" created successfully.`),H(),await Ce();else if(Ze==="update"){if(!J)throw new Error("Missing lead identifier for update.");M(!0);const B=await ae.put(`/leads/${J}`,ce);W.success(`Lead "${de}" updated successfully.`),a&&a.id===J&&s(null),H(),await Ce()}else if(Ze==="delete"){if(!J)throw new Error("Missing lead identifier for deletion.");await ae.delete(`/leads/${J}`),W.success(`Lead "${de}" deleted successfully.`),a?.id===J&&s(null),await Ce()}}catch(B){console.error(B);const ie=Ze==="create"?"Failed to create lead. Please review the details and try again.":Ze==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ue=B.response?.data?.detail||ie;W.error(ue)}finally{(Ze==="create"||Ze==="update")&&M(!1),Ze!=="edit"&&(X(!1),Q(null))}},ve=()=>{V||Q(null)},Be=u.filter(je=>je.status==="New").length,nt=u.filter(je=>je.status==="Contacted").length,Te=u.filter(je=>je.status==="Qualified").length,Qe=u.filter(je=>je.status==="Converted").length,ct=u.filter(je=>je.status==="Lost").length,ht=[{title:"New",value:Be,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:nt,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Te,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Qe,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ct,icon:zs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{W.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yl,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{le(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ht.map(je=>n.jsx(MWe,{...je},je.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:xe,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:je=>C(je.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ee.length>0?Ae.map(je=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>tt(je),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[je.first_name," ",je.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:je.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.assigned_to?`${je.assigned_to.first_name} ${je.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${PWe(je.status||"New")}`,children:LWe(je.status||"New")})})]},je.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ee.length,pageSize:E,currentPage:w,onPrev:Re,onNext:et,onPageSizeChange:k,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:be,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:je=>je.stopPropagation(),children:[n.jsx("button",{onClick:()=>{H(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:te,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Ue&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:te,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:te,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:nT.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:nT.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:nT.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:te,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Ue&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(IWe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:je=>`${je.first_name} ${je.last_name}`,onChange:je=>{const Ze=o.find(J=>String(J.id)===String(je));d(Ze);let ce=null;Ze&&Ze.assigned_territory&&Ze.assigned_territory.length===1&&(ce=Ze.assigned_territory[0].id),A(J=>({...J,lead_owner:je,territory_id:ce}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:te,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(je=>n.jsx("option",{value:je.id,children:je.name},je.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:te,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:te,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{H(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||V,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:We,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||V,children:P||V?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),G&&n.jsx(OWe,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:gt,onCancel:ve,loading:V}),a&&!r&&!T&&n.jsx(JJ,{relatedActs:q,lead:a,onBack:Je,fetchLeads:Ce,setSelectedLead:s,onEdit:Z,onDelete:_e})]})}function OWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function MWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function IWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const kb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},es=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),$We=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(es,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(es,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(es,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(es,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(es,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),RWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(es,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(es,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(es,{label:"Department",name:"department",value:e.department}),n.jsx(es,{label:"Title",name:"title",value:e.title}),n.jsx(es,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(es,{label:"Email",name:"email",value:e.email}),n.jsx(es,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(es,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),zWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(es,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(es,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(es,{label:"Stage",name:"stage",value:e.stage}),n.jsx(es,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(es,{label:"Description",name:"description",value:e.description}),n.jsx(es,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function UWe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx($We,{data:kb});case 2:return n.jsx(RWe,{data:kb});case 3:return n.jsx(zWe,{data:kb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:kb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(ej,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function eee({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=wt(),{user:c}=tn();h.useEffect(()=>{console.log("Group Manager DealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){W.error("No deal selected");return}if(!s||s===e.stage){W.info("Please select a different stage");return}const f=e.id;o(!0);try{await ae.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{W.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";W.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function tee({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=Us(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=tn(),{comments:b,addComment:C,refresh:w}=Ea({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const $=((await ae.get("/deals/admin/fetch-all")).data||[]).find(z=>z.id===parseInt(u));if($){const z={...$,amount:typeof $.amount=="number"?$.amount:parseFloat($.amount||0),probability:$.probability||0};p(z)}else console.warn("Deal not found with ID:",u)}catch(A){console.error("Error fetching deal:",A)}})()},[u,e]),!f&&!u||u&&!f)return null;const E=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Xt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${E(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ga,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):v(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(z=>z==="PROSPECTING"?0:z==="QUALIFICATION"?1:z==="PROPOSAL"?2:z==="NEGOTIATION"?3:z==="CLOSED_WON"||z==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(z=>T===z?"orange":T>z?"green":"gray").map((z,F)=>n.jsxs(yt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${z==="green"?"bg-green-500 border-green-500":z==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),F<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},F))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,A)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},A))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Ta,{comments:b,onAddComment:C})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,A)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},A))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(eee,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}const FWe=10;function BWe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Jt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[E,k]=h.useState(10),[_,A]=h.useState(!1),[T,$]=h.useState(null),[z,F]=h.useState(!1),[P,M]=h.useState(!1),[G,Q]=h.useState(null),[V,X]=h.useState([]),[q,ne]=h.useState([]),[oe,K]=h.useState([]),[R,ye]=h.useState({}),[pe,Ne]=h.useState(null);h.useEffect(()=>{const J=t.state,de=J?.dealID;if(de&&!J?.openDealModal){Ne(de),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(pe&&v?.length>0&&!b){const J=v.find(de=>de.id===pe);J?d(J):W.error("Deal not found."),Ne(null)}},[pe,v,b]);const[Se,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ke,he]=h.useState(null),[Ge,Ce]=h.useState(null),xe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ee=J=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[J]||J||"--",Ee=J=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[J]||"bg-gray-100 text-gray-700",Ae=h.useCallback(async J=>{try{const de=await ae.get(`/activities/deal/${J}`);ye(de.data&&typeof de.data=="object"?de.data:{})}catch(de){console.error(de),de.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Re=h.useMemo(()=>{const J=a.trim().toLowerCase(),de=r.trim(),D=o.trim();return(v??[]).filter(B=>{const ie=[B?.name,B?.description,B?.account?.name,B?.contact?.first_name,B?.contact?.last_name,B?.assigned_deals?.first_name,B?.assigned_deals?.last_name],ue=J===""||ie.some(ge=>ge==null||ge===""?!1:ge.toString().toLowerCase().includes(J)),se=de==="Filter by Stage"||de===""||B.stage===xe[de]||B.stage===de,Pe=D==="Filter by Owner"||D===""||`${B.assigned_deals?.first_name||""} ${B.assigned_deals?.last_name||""}`.trim().toLowerCase()===D.toLowerCase();return ue&&se&&Pe})},[v,a,r,o]),et=Math.max(1,Math.ceil(Re.length/FWe)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(J=>{const de=Math.max(1,Math.ceil(Re.length/E)||1);return J>de?de:J})},[Re.length,E]);const De=h.useMemo(()=>{const J=(w-1)*E;return Re.slice(J,J+E)},[Re,w,E]),tt=()=>S(J=>Math.max(J-1,1)),Je=()=>S(J=>Math.min(J+1,et)),H=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),Q(null),x(!0)},be=async()=>{C(!0);try{const J=await ae.get("/deals/admin/fetch-all"),D=[...Array.isArray(J.data)?J.data:[]].sort((B,ie)=>{const ue=B?.created_at?new Date(B.created_at).getTime():0;return(ie?.created_at?new Date(ie.created_at).getTime():0)-ue});N(D)}catch(J){J.response&&J.response.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch deals. Please try again later."),console.error(J)}finally{C(!1)}},le=async()=>{try{const J=await ae.get("/accounts/admin/fetch-all");X(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},Z=async()=>{try{const J=await ae.get("/contacts/admin/fetch-all");ne(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},_e=async()=>{try{const J=await ae.get("/users/all");K(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&W.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{be(),le(),Z(),_e()},[]);const te=async J=>{J&&(Oe({id:J.id||null,name:J.name||"",account_id:J.account_id?.toString()||"",primary_contact_id:J.primary_contact_id?.toString()||"",stage:J.stage||"PROPOSAL",amount:J.amount?.toString()||"",close_date:J.close_date?new Date(J.close_date).toISOString().split("T")[0]:"",assigned_to:J.assigned_to?.toString()||"",currency:J.currency||"PHP",description:J.description||""}),he(J.account||null),Ce(J.contact||null),M(!0),Q(J.id),d(null),x(!0))},Ue=async(J=!1)=>{try{const de=await ae.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((ie,ue)=>{const se=ie?.created_at?new Date(ie.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-se});if(N(B),!J&&c&&c.id){const ie=B.find(ue=>ue.id===c.id);ie&&d({...ie})}}catch(de){console.error("Failed to refresh deal data:",de),await be()}},Ie=J=>{const de=J.name.trim();if(!de){W.error("Deal name is required.");return}if(!J.account_id){W.error("Account is required.");return}const D=P&&G?"update":"create",B=de;$({title:D==="create"?"Confirm New Deal":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:D,formData:J,targetId:G||null,name:B}})},We=J=>{if(!J)return;const de=J.name||"this deal";$({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:J.id,name:de}})},gt=async()=>{if(!T?.action){$(null);return}const{action:J}=T,{type:de,formData:D,targetId:B,name:ie}=J;F(!0);try{if(de==="create"){A(!0);const ue={name:D.name.trim(),account_id:parseInt(D.account_id),primary_contact_id:D.primary_contact_id?parseInt(D.primary_contact_id):null,stage:D.stage,amount:D.amount?parseFloat(D.amount):null,currency:D.currency||"PHP",close_date:D.close_date||null,description:D.description||null,assigned_to:D.assigned_to?parseInt(D.assigned_to):null};await ae.post("/deals/admin/create",ue),W.success(`Deal "${ie}" created successfully.`),x(!1),await be()}else if(de==="update"){if(!B)throw new Error("Missing deal identifier for update.");A(!0);const ue={};D.name!==void 0&&(ue.name=D.name.trim()),D.account_id!==void 0&&D.account_id!==""&&(ue.account_id=parseInt(D.account_id)),D.primary_contact_id!==void 0&&(ue.primary_contact_id=D.primary_contact_id?parseInt(D.primary_contact_id):null),D.stage!==void 0&&(ue.stage=D.stage),D.amount!==void 0&&D.amount!==""&&(ue.amount=parseFloat(D.amount)),D.currency!==void 0&&(ue.currency=D.currency),D.close_date!==void 0&&(ue.close_date=D.close_date||null),D.description!==void 0&&(ue.description=D.description||null),D.assigned_to!==void 0&&(ue.assigned_to=D.assigned_to?parseInt(D.assigned_to):null),await ae.put(`/deals/admin/${B}`,ue),W.success(`Deal "${ie}" updated successfully.`),x(!1),await be()}else if(de==="delete"){if(!B)throw new Error("Missing deal identifier for deletion.");await ae.delete(`/deals/admin/${B}`),W.success(`Deal "${ie}" deleted successfully.`),c?.id===B&&d(null),await be()}}catch(ue){console.error(ue);const se=de==="create"?"Failed to create deal. Please review the details and try again.":de==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Pe=ue.response?.data?.detail||se;W.error(Pe)}finally{(de==="create"||de==="update")&&A(!1),F(!1),$(null)}},ve=()=>{z||$(null)},Be=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),he(null),Ce(null),M(!1),Q(null),A(!1)},nt=(v??[]).filter(J=>J.stage==="PROSPECTING").length,Te=(v??[]).filter(J=>J.stage==="QUALIFICATION").length,Qe=(v??[]).filter(J=>J.stage==="PROPOSAL").length,ct=(v??[]).filter(J=>J.stage==="NEGOTIATION").length,ht=(v??[]).filter(J=>J.stage==="CLOSED_WON").length,je=(v??[]).filter(J=>J.stage==="CLOSED_LOST").length,Ze=(v??[]).filter(J=>J.stage==="CLOSED_CANCELLED").length,ce=[{title:"Prospecting",value:nt,icon:Hw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Te,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Qe,icon:en,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ct,icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ht,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:je,icon:zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ze,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(en,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:H,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ce.map(J=>n.jsx(GWe,{...J},J.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:J=>s(J.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:J=>i(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:J=>l(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(J=>`${J.assigned_deals?.first_name} ${J.assigned_deals?.last_name}`))].map((J,de)=>n.jsx("option",{value:J,children:J},de))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Re.length>0?De.map(J=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...J}),Ae(J.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.deal_id?J.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:J.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:J.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.contact?.first_name&&J.contact?.last_name?`${J.contact.first_name} ${J.contact.last_name}`:J.contact?.first_name||J.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ee(J.stage)}`,children:ee(J.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",J.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.assigned_deals?.first_name&&J.assigned_deals?.last_name?`${J.assigned_deals.first_name} ${J.assigned_deals.last_name}`:J.assigned_deals?.first_name||J.assigned_deals?.last_name||"--"})]},J.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:E,currentPage:w,onPrev:tt,onNext:Je,onPageSizeChange:k,label:"deals"}),p&&n.jsx(WWe,{onClose:Be,formData:Se,setFormData:Oe,isEditing:P,onSubmit:Ie,isSubmitting:_||z,accounts:V,contacts:q,users:oe,currentAccount:ke,currentContact:Ge}),c&&n.jsx(tee,{relatedActs:R,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:te,onDelete:We,onStatusUpdate:Ue}),T&&n.jsx(HWe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:gt,onCancel:ve,loading:z})]})}function HWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function GWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function WWe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=b=>{if(b.preventDefault(),p(!0),!t.name?.trim()){W.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){W.error("Amount must be a number greater than 0.");return}if(!t.account_id){W.error("Please select an account.");return}if(!t.primary_contact_id){W.error("Please select a primary contact.");return}if(!t.assigned_to){W.error("Please assign this deal to a user.");return}r?.(t)},v=b=>{b.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const b=String(t.account_id||"").trim(),C=Array.isArray(l)?l:[];return b?C.filter(w=>{const E=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return E?String(E)===b:!1}):C},[l,t.account_id]);return h.useEffect(()=>{const b=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!b)return;N.some(S=>String(S?.id)===C)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(sT,{label:"Deal Name",name:"name",value:t.name,onChange:b=>a({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(rT,{label:"Account",value:t.account_id||"",onChange:b=>a({...t,account_id:b}),items:o||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(rT,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>a({...t,primary_contact_id:b}),items:N||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(IB,{label:"Stage",name:"stage",value:t.stage,onChange:b=>a({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(sT,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>a({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(IB,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>a({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(sT,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>a({...t,close_date:b.target.value}),disabled:i}),n.jsx(rT,{label:"Assign To",value:t.assigned_to||"",onChange:b=>a({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(VWe,{label:"Description",name:"description",value:t.description,onChange:b=>a({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function sT({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function IB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function rT({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(qWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function qWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function VWe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const iT=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],oT={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ri=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},lT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",QWe=e=>{switch(Ri(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},YWe=e=>{switch(Ri(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Lb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",kg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",KWe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},cT=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},$B=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},dT=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Tw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},XWe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Tw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Tw(t);return a||null},ZWe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},JWe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},eqe=e=>{if(!e)return"";const a=[e.assigned_user?.id,e.assigned_to?.id,e.assigned_to,e.assigned_user_id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function tqe(){const e=wt(),t=Jt(),{user:a}=tn(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[E,k]=h.useState(!1),[_,A]=h.useState(!1),[T,$]=h.useState(!1),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState(!1),[V,X]=h.useState(null),[q,ne]=h.useState(oT),[oe,K]=h.useState(""),[R,ye]=h.useState("Filter by Status"),[pe,Ne]=h.useState(null),Se=h.useCallback(async()=>{if(w)try{Q(!0);const me=(await ae.get("/company/invoice-info"))?.data;Fj({quote:w,companyInfo:me,currencySymbol:s,title:"Invoice"})}catch(I){const me=I?.response?.data?.detail||I?.message||"Failed to print invoice.";W.error(me)}finally{Q(!1)}},[w,s]),[Oe,ke]=h.useState(1),[he,Ge]=h.useState(10),[Ce,xe]=h.useState("Overview"),[ee,Ee]=h.useState("Draft"),[Ae,Re]=h.useState([]),[et,De]=h.useState(null),tt=h.useMemo(()=>eqe(w),[w]),{comments:Je,addComment:H,refresh:be}=Ea({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&be()},[w?.id,be]),h.useEffect(()=>{const me=t.state?.quoteID;if(me){De(me),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(et&&r.length>0&&!o){const I=r.find(me=>me.id===et);I?S(I):W.error("Quote not found."),De(null)}},[et,p,o]),h.useEffect(()=>{let I=!0;return(async()=>{const Le=XWe();if(Le&&I){C(Le);return}try{const $e=await ae.get("/auth/me"),Ve=Tw($e?.data);if(Ve&&I){C(Ve);return}}catch{}try{const $e=await ae.get("/users/me"),Ve=Tw($e?.data);if(Ve&&I){C(Ve);return}}catch{}I&&C(null)})(),()=>{I=!1}},[]);const le=h.useCallback(I=>I&&u.find(Le=>String(Le.id)===String(I))?.name||"",[u]),Z=h.useCallback(I=>{if(!I)return"";const me=p.find(Le=>String(Le.id)===String(I));return me?`${me.first_name} ${me.last_name}`.trim():""},[p]),_e=h.useCallback(I=>{if(!I)return"--";const me=c.find(Le=>String(Le.id)===String(I));return me?.deal_name||me?.name||`Deal #${$B(I)}`},[c]),te=h.useCallback(I=>{const me=c.find(Ve=>String(Ve.id)===String(I)),Le=ZWe(me);let $e=JWe(me);if(!$e&&Le){const Ve=p.filter(Ye=>String(Ye.account_id||"")===String(Le));if(Ve.length>0){const Ye=[...Ve].sort((At,Ct)=>{const Kt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase(),sa=`${Ct.first_name||""} ${Ct.last_name||""}`.trim().toLowerCase();return Kt.localeCompare(sa)});$e=String(Ye[0].id)}}if(Le&&$e){const Ve=p.find(Ye=>String(Ye.id)===String($e));Ve?.account_id&&String(Ve.account_id)!==String(Le)&&($e="")}return{accountId:Le||"",contactId:$e||""}},[c,p]),Ue=h.useCallback(I=>{if(!I)return"--";if(I.deal?.deal_name)return I.deal.deal_name;if(I.deal?.name)return I.deal.name;const me=I.deal_id||I.deal?.id;return me?_e(me):"--"},[_e]),Ie=h.useCallback(I=>{if(!I)return"--";if(I.account?.name)return I.account.name;let me=I.account_id||I.account?.id;if(!me){const Le=I.deal_id||I.deal?.id;Le&&(me=te(Le).accountId)}return me?le(me)||`Account #${me}`:"--"},[te,le]),We=h.useCallback(I=>{if(!I)return"--";if(I.contact?.first_name||I.contact?.last_name)return`${I.contact?.first_name||""} ${I.contact?.last_name||""}`.trim()||"--";let me=I.contact_id||I.contact?.id;if(!me){const $e=I.deal_id||I.deal?.id;$e&&(me=te($e).contactId)}return(me?Z(me):"")||(me?`Contact #${me}`:"--")},[te,Z]),gt=h.useCallback(async(I=null)=>{l(!0);try{const me=await ae.get("/quotes/admin/fetch-all"),$e=[...Array.isArray(me.data)?me.data:[]].sort((Ve,Ye)=>{const At=Ve?.created_at||Ve?.updated_at||0,Ct=Ye?.created_at||Ye?.updated_at||0;return new Date(Ct)-new Date(At)});if(i($e),I){const Ve=$e.find(Ye=>Ye.id===I);S(Ve||null)}}catch(me){console.error(me),i([]),me.response?.status===403?W.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):W.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ve=h.useCallback(async()=>{try{const I=await ae.get("/deals/admin/fetch-all");d(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&W.warn("Unable to load deals (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const I=await ae.get("/accounts/admin/fetch-all");f(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&W.warn("Unable to load accounts (permission denied).")}},[]),nt=h.useCallback(async()=>{try{const I=await ae.get("/contacts/admin/fetch-all");x(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&W.warn("Unable to load contacts (permission denied).")}},[]),Te=h.useCallback(async()=>{try{const I=await ae.get("/users/all");N(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&W.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{gt(),ve(),Be(),nt(),Te()},[gt,ve,Be,nt,Te]);const Qe=h.useMemo(()=>{const I=oe.trim().toLowerCase(),me=R.trim();return r.filter(Le=>{const $e=Ue(Le),Ve=Ie(Le),Ye=We(Le),At=cT(Le.presented_date,Le.validity_days),Ct=[Le.quote_id,$e,Ve,Ye,Le.total_amount?.toString(),Le.validity_days?.toString(),Le.presented_date?kg(Le.presented_date):"",At?kg(At):"",Le.assigned_user?.first_name,Le.assigned_user?.last_name,Le.creator?.first_name,Le.creator?.last_name,Le.status,Le.notes,Lb(Le.created_at),Lb(Le.updated_at)],Kt=I===""||Ct.some(fh=>fh==null?!1:fh.toString().toLowerCase().includes(I)),sa=me==="Filter by Status"||Ri(Le.status)===me;return Kt&&sa})},[r,oe,R,Ue,Ie,We]),ct=Math.max(1,Math.ceil(Qe.length/he)||1);h.useEffect(()=>ke(1),[oe,R]),h.useEffect(()=>{ke(I=>{const me=Math.max(1,Math.ceil(Qe.length/he)||1);return I>me?me:I})},[Qe.length,he]);const ht=h.useMemo(()=>{const I=(Oe-1)*he;return Qe.slice(I,I+he)},[Qe,Oe,he]),je=()=>ke(I=>Math.max(I-1,1)),Ze=()=>ke(I=>Math.min(I+1,ct)),ce=I=>{S(I),xe("Overview"),Ee(Ri(I?.status)||"Draft")},J=()=>{S(null),xe("Overview")},de=I=>{I.target.id==="quoteModalBackdrop"&&!P&&J()},D=h.useCallback(()=>{k(!1),A(!1),X(null),ne(oT),$(!1)},[]),B=I=>{I.target.id==="modalBackdrop"&&!T&&!P&&D()},ie=I=>{const{name:me,value:Le}=I.target;if(me==="deal_id"){const{accountId:$e,contactId:Ve}=te(Le);ne(Ye=>({...Ye,deal_id:Le,account_id:$e,contact_id:Ve}));return}ne($e=>({...$e,[me]:Le}))},ue=()=>{ne(oT),A(!1),X(null),k(!0)},se=I=>{if(!I)return;S(null);const me=I.deal?.id?String(I.deal.id):I.deal_id?String(I.deal_id):"",Le=me?te(me):{accountId:"",contactId:""},$e=I.account?.id?String(I.account.id):I.account_id?String(I.account_id):Le.accountId,Ve=I.contact?.id?String(I.contact.id):I.contact_id?String(I.contact_id):Le.contactId,Ye=I.assigned_user?.id?String(I.assigned_user.id):I.assigned_to?String(I.assigned_to):"";ne({deal_id:me,account_id:$e||"",contact_id:Ve||"",total_amount:I.total_amount?.toString()||"",presented_date:KWe(I.presented_date),validity_days:I.validity_days!==null&&I.validity_days!==void 0?String(I.validity_days):"",status:Ri(I.status)||"Draft",assigned_to:Ye,notes:I.notes||"",subtotal:parseFloat(I.subtotal)||0,tax_rate:parseFloat(I.tax_rate)||0,tax_amount:parseFloat(I.tax_amount)||0,discount_type:I.discount_type||"",discount_value:parseFloat(I.discount_value)||0,discount_amount:parseFloat(I.discount_amount)||0,currency:I.currency||"PHP",items:Array.isArray(I.items)?I.items.map(At=>({id:At.id,item_type:At.item_type||"Product",name:At.name||"",description:At.description||"",sku:At.sku||"",variant:At.variant||"",unit:At.unit||"pcs",quantity:parseFloat(At.quantity)||1,unit_price:parseFloat(At.unit_price)||0,discount_percent:parseFloat(At.discount_percent)||0,discount_amount:parseFloat(At.discount_amount)||0,line_total:parseFloat(At.line_total)||0,sort_order:At.sort_order||0})):[]}),A(!0),X(I.id),k(!0)},Pe=I=>{if(I.target.checked){const me=ht.map(Le=>Le.id);Re(me)}else Re([])},ge=I=>{Re(me=>me.includes(I)?me.filter(Le=>Le!==I):[...me,I])},fe=I=>{if(!I)return;const me=I.quote_id||"this quote";F({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:me}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:I.id,name:me}})},Fe=async()=>{Ae.length!==0&&F({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ae.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ae.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ae}})},[Xe,pt]=h.useState(!1),Nt=I=>{if(I.preventDefault(),pt(!0),!b){W.error("Unable to determine current user. Please log in again.");return}if(!q.deal_id){W.error("Deal is required.");return}if(!q.assigned_to){W.error("Assigned To is required.");return}const Le=te(q.deal_id),$e=q.items.map((Kt,sa)=>({item_type:Kt.item_type||"Product",name:Kt.name,description:Kt.description||null,sku:Kt.sku||null,variant:Kt.variant||null,unit:Kt.unit||null,quantity:parseFloat(Kt.quantity)||1,unit_price:parseFloat(Kt.unit_price)||0,discount_percent:parseFloat(Kt.discount_percent)||0,sort_order:Kt.sort_order??sa})),Ve={deal_id:Number(q.deal_id),account_id:Le.accountId?Number(Le.accountId):null,contact_id:Le.contactId?Number(Le.contactId):null,subtotal:parseFloat(q.subtotal)||0,tax_rate:parseFloat(q.tax_rate)||0,tax_amount:parseFloat(q.tax_amount)||0,discount_type:q.discount_type||null,discount_value:parseFloat(q.discount_value)||0,discount_amount:parseFloat(q.discount_amount)||0,total_amount:parseFloat(q.total_amount)||0,currency:q.currency||"PHP",presented_date:q.presented_date||null,validity_days:q.validity_days===""?null:Number(q.validity_days),status:q.status||"Draft",assigned_to:q.assigned_to?Number(q.assigned_to):null,notes:q.notes?.trim()||null,items:$e},Ye=_&&V?"update":"create",At=_e(q.deal_id),Ct=Ye==="create"?{...Ve,created_by_id:Number(b)}:Ve;F({title:Ye==="create"?"Confirm New Quote":"Confirm Update",message:Ye==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:At}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:At}),"?"]}),confirmLabel:Ye==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ye,payload:Ct,targetId:V||null,name:At}})},St=async()=>{if(!z?.action){F(null);return}const{action:I}=z,{type:me,payload:Le,targetId:$e,name:Ve}=I;M(!0);try{if(me==="create")$(!0),await ae.post("/quotes/admin",Le),W.success("Quote created successfully."),D(),await gt();else if(me==="update"){if(!$e)throw new Error("Missing quote identifier for update.");$(!0),await ae.put(`/quotes/admin/${$e}`,Le),W.success("Quote updated successfully."),D(),await gt(),w?.id===$e&&S(null)}else if(me==="delete"){if(!$e)throw new Error("Missing quote identifier for deletion.");const Ye=w?.id;Ne($e),await ae.delete(`/quotes/admin/${$e}`),W.success(`Quote "${Ve}" deleted successfully.`),await gt(Ye&&Ye!==$e?Ye:null),Ye===$e&&S(null)}else me==="bulk-delete"&&(await ae.post("/quotes/admin/bulk-delete",{quote_ids:Ae}),W.success(`Successfully deleted ${Ae.length} quotes`),Re([]),await gt())}catch(Ye){console.error(Ye);const At=me==="create"?"Failed to create quote. Please review the details and try again.":me==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";W.error(At),(me==="create"||me==="update")&&$(!1),me==="delete"&&Ne(null)}finally{(me==="create"||me==="update")&&$(!1),me==="delete"&&Ne(null),M(!1),F(null)}},Ht=()=>{P||F(null)},on=h.useCallback((I,me)=>{const Le=I?.deal_id??I?.deal?.id??"",$e=Le?Number(Le):null,Ve=$e?te(String($e)):{accountId:"",contactId:""},Ye=I?.account_id??I?.account?.id??Ve.accountId??null,At=I?.contact_id??I?.contact?.id??Ve.contactId??null,Ct=I?.total_amount??0,Kt=I?.assigned_to??I?.assigned_user?.id??null;return{deal_id:$e,account_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,contact_id:At!=null&&String(At).trim()!==""?Number(At):null,total_amount:Number(Ct),presented_date:I?.presented_date||null,validity_days:I?.validity_days===""||I?.validity_days===void 0||I?.validity_days===null?null:Number(I.validity_days),status:me,assigned_to:Kt!=null&&String(Kt).trim()!==""?Number(Kt):null,notes:I?.notes?.trim()||null}},[te]),cn=h.useCallback(async()=>{if(!w?.id)return;const I=Ri(ee),me=[I,I.toLowerCase()],Le=async $e=>ae.patch(`/quotes/admin/${w.id}/status`,{status:$e},{headers:{"Content-Type":"application/json"}});try{let $e=!1;for(const Ve of me)try{await Le(Ve),$e=!0;break}catch(Ye){if(Ye?.response?.status===422)continue;throw Ye}if(!$e){const Ve=on(w,I);if(!Ve.deal_id){W.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ve.total_amount||Ve.total_amount<=0){W.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ae.put(`/quotes/admin/${w.id}`,Ve)}W.success(`Quote status updated to ${I}`),S(null),xe("Overview"),await gt()}catch($e){console.error($e);const Ve=$e?.response?.data?.message||($e?.response?.data?.errors?Object.values($e.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";W.error(Ve)}},[w,ee,gt,on]),re=[{label:"Filter by Status",value:"Filter by Status"},...iT.map(I=>({label:I.label,value:I.value}))],ot=z?.action?.type==="delete"?z.action.targetId:null,Rt=w&&(pe===w.id||ot===w.id),kt=w&&pe===w.id,Yt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:J,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ue(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${YWe(w.status)}`,children:lT(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Se,disabled:G||T||P,children:[n.jsx(hn,{className:"mr-2"}),G?"Preparing...":"Print Invoice"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>se(w),disabled:P||z?.action?.type==="update"&&z.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>fe(w),disabled:!!Rt,children:kt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(I=>n.jsx("button",{onClick:()=>xe(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:dT(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Ie(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:We(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:kg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:kg(cT(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:lT(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Lb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Lb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(hd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Ta,{comments:Je,onAddComment:H})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${dT(w.quote_id)}`,assigned_to:tt,direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:tt,status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:tt,priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ee||Ri(w.status)||"Draft",onChange:I=>Ee(I.target.value),children:iT.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value))}),n.jsx("button",{onClick:cn,disabled:Ri(ee)===Ri(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ri(ee)===Ri(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Me=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ue(),pt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:oe,onChange:I=>K(I.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:R,onChange:I=>ye(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:re.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ht.length>0&&Ae.length===ht.length,onChange:Pe,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ae.length>0?n.jsx("button",{onClick:Fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ae.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Qe.length>0?ht.map(I=>{const me=cT(I.presented_date,I.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>ce(I),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Le=>Le.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ae.includes(I.id),onChange:()=>ge(I.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:dT(I.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ue(I)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ie(I)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:We(I)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:I.total_amount?`${s}${Number(I.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${QWe(I.status)}`,children:lT(I.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:I.assigned_user?`${I.assigned_user.first_name} ${I.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:kg(me)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},I.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Qe.length,pageSize:he,currentPage:Oe,onPrev:je,onNext:Ze,onPageSizeChange:I=>{Ge(I),ke(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),vt=E?n.jsx("div",{id:"modalBackdrop",onClick:B,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:I=>I.stopPropagation(),children:[n.jsx("button",{onClick:()=>{D(),pt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Nt,children:[n.jsx(UB,{label:"Deal",name:"deal_id",value:q.deal_id,onChange:I=>{const{accountId:me,contactId:Le}=te(I);ne($e=>({...$e,deal_id:I,account_id:me,contact_id:Le}))},items:Array.isArray(c)?c:[],getLabel:I=>`${$B(I?.deal_id??"")} ${I?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Xe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(zB,{label:"Account",value:le(q.account_id)||(q.account_id?`Account #${q.account_id}`:""),disabled:!0}),n.jsx(zB,{label:"Contact",value:Z(q.contact_id)||(q.contact_id?`Contact #${q.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(hd,{items:q.items,onChange:I=>ne(me=>({...me,items:I})),currencySymbol:s,readOnly:T,taxRate:q.tax_rate,discountType:q.discount_type,discountValue:q.discount_value,onTotalsChange:I=>{ne(me=>({...me,subtotal:I.subtotal,discount_amount:I.discount_amount,tax_amount:I.tax_amount,total_amount:I.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:q.discount_type||"",onChange:I=>ne(me=>({...me,discount_type:I.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",q.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:q.discount_value||"",onChange:I=>ne(me=>({...me,discount_value:I.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:q.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!q.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:q.tax_rate||"",onChange:I=>ne(me=>({...me,tax_rate:I.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(q.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(RB,{label:"Presented Date",name:"presented_date",type:"date",value:q.presented_date,onChange:ie,disabled:T}),n.jsx(RB,{label:"Validity Days",name:"validity_days",type:"number",value:q.validity_days,onChange:ie,placeholder:"30",disabled:T}),n.jsx(UB,{label:"Assigned To",value:q.assigned_to||"",onChange:I=>ne(me=>({...me,assigned_to:I})),items:Array.isArray(v)?v:[],getLabel:I=>{const me=`${I?.first_name??""} ${I?.last_name??""}`.trim();return me?I?.role?`${me} (${I.role})`:me:I?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Xe,disabled:T}),n.jsx(nqe,{label:"Status",name:"status",value:q.status,onChange:ie,options:iT,required:!0,disabled:T}),n.jsx(sqe,{label:"Notes",name:"notes",value:q.notes,onChange:ie,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{D(),pt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,U=z?n.jsx(rqe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:St,onCancel:Ht,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?Yt:Me,vt,U]})}function RB({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function zB({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function nqe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function UB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(aqe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function aqe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function sqe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function rqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function iqe(){const{userRole:e}=Ys();return n.jsx(Uj,{currentUserRole:e,currentUserId:null})}const FB=["Not started","In progress","Deferred","Completed"],BB={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},nee=e=>e&&(BB[e]||BB[String(e).toUpperCase()])||"Not started",oqe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},HB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},lqe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),nee(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},cqe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=G=>{if(!G)return"";const Q=String(G).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(G)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",E="",k="",_="Lead",A="",T="",$="";const z=c(),F=v(),P=l(),M=x();if(z){w="Account",_="Account",A=F,S=String(z);const G=d(),Q=u(),V=N(),X=b(),q=f(),ne=C();G?(E="Contact",T="Contact",$=V,k=String(G)):Q?(T="Deal",E="Deal",$=X,k=String(Q)):q&&(T="Quote",E="Quote",$=ne,k=String(q))}else P?(_="Lead",A=M,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:nee(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:A,relatedType2Text:T,relatedTo2Text:$,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:E,relatedTo2:k}};function dqe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=tn(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[_,A]=h.useState(1),[T,$]=h.useState(10),[z,F]=h.useState(null),[P,M]=h.useState(!1),[G,Q]=h.useState([]),V=wt(),X=Jt(),[q,ne]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,K]=h.useState(null);h.useEffect(()=>{const H=X.state?.openTaskModal,be=X.state?.initialTaskData,le=X.state?.taskID;H?(i(!0),be&&ne(Z=>({...Z,...be})),V(X.pathname,{replace:!0,state:{}})):le&&(K(le),V(X.pathname,{replace:!0,state:{}}))},[X,V]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const H=u.find(be=>be.id===oe);H?Ne(H,!0):W.error("Task not found."),K(null)}},[oe,u,p]);const R=async()=>{try{const H=await ae.get("/users/all");k(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),W.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const H=await ae.get("/tasks/all"),le=(Array.isArray(H.data)?H.data:[]).map(cqe);le.sort((Z,_e)=>{const te=Z.createdAt?new Date(Z.createdAt):0;return(_e.createdAt?new Date(_e.createdAt):0)-te}),f(le),a==="list"&&A(1)}catch(H){console.error("Failed to load tasks:",H),W.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(R(),ye())},[t,e]);const pe=()=>{l(null),ne({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ne=(H=null,be=!1)=>{l(H),d(be),H?ne({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:oqe(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):pe(),i(!0)},Se=()=>{i(!1),l(null),d(!1),pe()},Oe=async H=>{const be=lqe(H);try{o&&!c?(await ae.put(`/tasks/${o.id}`,be),W.success("Task updated successfully.")):(await ae.post("/tasks/create",be),W.success("Task created successfully.")),i(!1),await ye()}catch(le){console.error("Failed to save task:",le);const Z=le.response?.data?.detail||"Failed to save task.";W.error(Z)}},ke=H=>{H&&F({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},he=()=>{if(Ae.every(H=>G.includes(H.id)))Q(G.filter(H=>!Ae.map(be=>be.id).includes(H)));else{const H=Ae.map(be=>be.id);Q([...new Set([...G,...H])])}},Ge=H=>{Q(be=>be.includes(H)?be.filter(le=>le!==H):[...be,H])},Ce=async()=>{G.length!==0&&F({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:G.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:G}})},xe=async()=>{if(!z?.action){F(null);return}const{action:H}=z;M(!0);try{H.type==="delete"?(await ae.delete(`/tasks/${H.targetId}`),W.success("Task deleted successfully."),await ye()):H.type==="bulk-delete"&&(await ae.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),W.success(`Successfully deleted ${H.task_ids.length} tasks`),Q([]),await ye())}catch(be){console.error("Task action failed:",be),W.error("Failed to delete task.")}finally{M(!1),F(null)}},ee=()=>{P||F(null)},Ee=h.useMemo(()=>{const H=v.trim().toLowerCase();return[...u].sort((le,Z)=>{const _e=le.createdAt?new Date(le.createdAt):0;return(Z.createdAt?new Date(Z.createdAt):0)-_e}).filter(le=>{const Z=H===""||le.title?.toLowerCase().includes(H)||le.description?.toLowerCase().includes(H)||le.assignedToName?.toLowerCase().includes(H)||le.createdBy?.toLowerCase().includes(H),_e=b==="Filter by Status"||le.status===b,te=w==="Filter by Priority"||le.priority===w;return Z&&_e&&te})},[u,v,b,w]);h.useEffect(()=>{A(1)},[v,b,w,a,T]),h.useEffect(()=>{if(a==="list"){const H=Ee.length===0?1:Math.ceil(Ee.length/T);_>H&&A(H)}},[Ee.length,_,a,T]);const Ae=h.useMemo(()=>{if(a==="board")return Ee;const H=(_-1)*T;return Ee.slice(H,H+T)},[Ee,_,a,T]),Re=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:qs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:qi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<H&&be.status!=="Completed").length,icon:Wf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),et=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",De=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},tt=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Je=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(qi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Re.map(H=>n.jsx(uqe,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:H=>C(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),FB.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ee.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:FB.map(H=>{const be=Ae.filter(le=>le.status===H);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:H}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:be.length})]}),n.jsx("div",{className:`space-y-3 ${be.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:be.length>0?be.map(le=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(le)}`,onClick:()=>Ne(le,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:le.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",le.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",le.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:et(le)?"text-red-600":"text-gray-600",children:le.dateAssigned?HB(le.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),Ne(le)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ga,{})}),n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ke(le)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},le.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},H)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ae.length>0&&Ae.every(H=>G.includes(H.id)),onChange:he})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:G.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected tasks`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ae.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.includes(H.id),onChange:()=>Ge(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ne(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${tt(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Je(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ne(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${et(H)?"text-red-600 font-medium":""}`,onClick:()=>Ne(H,!0),children:H.dateAssigned?HB(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ee.length,pageSize:T,currentPage:Ee.length===0?0:_,onPrev:()=>A(H=>Math.max(H-1,1)),onNext:()=>A(H=>Math.min(H+1,Math.max(1,Math.ceil(Ee.length/T)||1))),onPageSizeChange:H=>{$(H),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(c0,{isOpen:r,onClose:Se,onSave:Oe,onEdit:()=>d(!1),setFormData:ne,formData:q,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:ke}),z&&n.jsx(mqe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:xe,onCancel:ee,loading:P})]})}function uqe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function mqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const aee=e=>e?e.toUpperCase():"",Pb=e=>{const t=aee(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},fqe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},hqe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},gqe=e=>{const t=aee(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},uT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},pqe=()=>{const e=wt(),t=Jt(),[a]=Us(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,E]=h.useState(1),[k,_]=h.useState(10),[A,T]=h.useState(uT),[$,z]=h.useState(!1),[F,P]=h.useState(null),[M,G]=h.useState(!1),[Q,V]=h.useState(null),[X,q]=h.useState(!1),[ne,oe]=h.useState(null);h.useEffect(()=>{const ee=t.state?.openMeetingModal,Ee=t.state?.initialMeetingData?.relatedTo||a.get("id"),Ae=t.state?.meetingID;ee||Ee?(b(!0),t.state?.initialMeetingData&&T(Re=>({...Re,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ae&&(oe(Ae),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(ne&&i.length>0&&!l){const ee=i.find(Ee=>Ee.id===ne);ee?w(ee):W.error("Meeting not found."),oe(null)}},[ne,i,l]);const K=async()=>{if(s&&r){const ee=sessionStorage.getItem("meetingDetailData");if(ee)try{const Ee=JSON.parse(ee);if(Ee.id===parseInt(s)){w(Ee),sessionStorage.removeItem("meetingDetailData");return}}catch(Ee){console.error(Ee)}}c(!0);try{const ee=await ae.get("/meetings/admin/fetch-all"),Ae=[...Array.isArray(ee.data)?ee.data:[]].sort((Re,et)=>{const De=Re?.createdAt?new Date(Re.createdAt).getTime():0;return(et?.createdAt?new Date(et.createdAt).getTime():0)-De});if(o(Ae),s&&!C){const Re=Ae.find(et=>et.id===parseInt(s));Re&&w(Re)}}catch{W.error("Failed to load meetings.")}finally{c(!1)}},R=async()=>{try{const ee=await ae.get("/users/all");u(Array.isArray(ee.data)?ee.data:[])}catch(ee){console.error(ee)}};h.useEffect(()=>{K(),R()},[]);const ye=ee=>p(ee.target.value),pe=h.useMemo(()=>{const ee=f.trim().toLowerCase(),Ee=x.trim().toUpperCase();return i.filter(Ae=>{const Re=[Ae?.activity,Ae?.description,Ae?.relatedTo,Ae?.assignedTo],et=ee===""||Re.some(tt=>tt&&tt.toString().toLowerCase().includes(ee)),De=Ee==="FILTER BY STATUS"||Pb(Ae.status||"PENDING")===Ee;return et&&De})},[i,f,x]),Ne=h.useMemo(()=>{const ee=(S-1)*k;return pe.slice(ee,ee+k)},[pe,S,k]),Se=()=>{b(!1),T(uT),z(!1),P(null),G(!1)},Oe=()=>{T(uT),z(!1),P(null),b(!0)},ke=ee=>{let Ee="";if(ee.meet_assign_to?.id)Ee=String(ee.meet_assign_to.id);else if(ee.assignedTo){const le=d.find(Z=>`${Z.first_name} ${Z.last_name}`===ee.assignedTo);Ee=le?String(le.id):""}const Ae=le=>{if(!le)return"";try{const Z=new Date(le),_e=Z.getTimezoneOffset()*6e4;return new Date(Z.getTime()-_e).toISOString().slice(0,16)}catch{return""}};let Re="Lead",et="",De="Contact",tt="";if(ee.lead)Re="Lead",et=String(ee.lead.id);else if(ee.account)Re="Account",et=String(ee.account.id),ee.contact?(De="Contact",tt=String(ee.contact.id)):ee.deal?(De="Deal",tt=String(ee.deal.id)):ee.quote&&(De="Quote",tt=String(ee.quote.id));else if(ee.relatedType||ee.related_type){const le=ee.relatedType||ee.related_type,Z=ee.related_to||ee.relatedToId;le==="Lead"?(Re="Lead",et=String(Z)):(Re="Account",et=ee.account_id?String(ee.account_id):"")}const Je={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},H=Pb(ee.status),be=Je[H]||"Planned";T({subject:ee.subject||ee.activity||"",location:ee.location||"",startTime:Ae(ee.start_time||ee.startTime),endTime:Ae(ee.end_time||ee.endTime),status:be,notes:ee.description||ee.notes||"",assignedTo:Ee,relatedType1:Re,relatedTo1:et,relatedType2:De,relatedTo2:tt}),z(!0),P(ee.id),w(null),b(!0)},he=ee=>{if(!ee.subject?.trim())return W.error("Subject is required.");if(!ee.startTime)return W.error("Start time is required.");if(ee.endTime&&!(new Date(ee.endTime)-new Date(ee.startTime)>0))return W.error("End time must be after start time.");ee.relatedType1,ee.relatedTo1,ee.relatedType1==="Account"&&ee.relatedType2&&ee.relatedTo2&&(ee.relatedType2,ee.relatedTo2);const Ee={...ee,assignedTo:parseInt(ee.assignedTo),relatedTo1:parseInt(ee.relatedTo1),relatedTo2:parseInt(ee.relatedTo2)},Ae=$&&F?"update":"create";V({title:Ae==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ae} "${Ee.subject}"?`,confirmLabel:Ae==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ae,payload:Ee,targetId:F,name:Ee.subject}})},Ge=async()=>{if(!Q?.action)return;const{type:ee,payload:Ee,targetId:Ae,name:Re}=Q.action;q(!0);try{ee==="create"?(G(!0),await ae.post("/meetings/create",Ee),W.success(`Meeting "${Re}" created.`),Se(),await K()):ee==="update"?(G(!0),await ae.put(`/meetings/${Ae}`,Ee),W.success(`Meeting "${Re}" updated.`),Se(),await K()):ee==="delete"&&(await ae.delete(`/meetings/${Ae}`),W.success(`Meeting "${Re}" deleted.`),C?.id===Ae&&w(null),await K())}catch(et){const De=et.response?.data?.detail||"Action failed.";W.error(typeof De=="string"?De:JSON.stringify(De)),console.error(De)}finally{G(!1),q(!1),V(null)}},Ce=ee=>{V({title:"Delete Meeting",message:`Permanently delete "${ee.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ee.id,name:ee.activity}})},xe=async(ee,Ee)=>{try{await ae.put(`/meetings/${ee}`,{status:Ee}),W.success("Status updated"),K(),w(null)}catch{W.error("Failed to update status")}};return r&&s?C?n.jsx(gd,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:ke,onDelete:Ce,onStatusUpdate:xe}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Oe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(qt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ye,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ee=>v(ee.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Ne.length>0?Ne.map(ee=>n.jsxs("tr",{onClick:()=>w(ee),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ee.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ee.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.lead.title}),ee.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.account.name}),ee.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ee.contact.first_name," ",ee.contact.last_name]}),ee.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.deal.name}),ee.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:fqe(ee.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:hqe(ee.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ee.meet_assign_to.first_name," ",ee.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${gqe(Pb(ee.status))}`,children:Pb(ee.status).replace("_"," ")})})]},ee.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:pe.length,pageSize:k,currentPage:S,onPrev:()=>E(ee=>Math.max(1,ee-1)),onNext:()=>E(ee=>ee+1),onPageSizeChange:_,label:"meetings"}),N&&n.jsx(Zj,{onClose:Se,formData:A,setFormData:T,isEditing:$,onSubmit:he,isSubmitting:M||X,users:d}),C&&n.jsx(gd,{meeting:C,onClose:()=>w(null),onEdit:ke,onDelete:Ce,onStatusUpdate:xe}),Q&&n.jsx(xqe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:Ge,onCancel:()=>V(null),loading:X})]})};function xqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const yqe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],bqe=e=>e?String(e).toUpperCase():"",cf=e=>{const t=bqe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},mT=e=>{const t=cf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},GB=e=>{switch(cf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},WB=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function vqe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[_,A]=h.useState("PLANNED"),[T,$]=h.useState(!1),[z,F]=h.useState(!1),[P,M]=h.useState(null),{comments:G,addComment:Q,refresh:V}=Ea({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&V()},[a?.id,V]),Us();const X=wt(),q=Jt(),ne=ce=>{if(!ce)return"";const J=String(ce).split("-");return J.length===3?`${J[0]}-${J[2]}`:String(ce)},K={subject:"",call_time:(()=>{const ce=new Date,J=ce.getFullYear(),de=String(ce.getMonth()+1).padStart(2,"0"),D=String(ce.getDate()).padStart(2,"0");return`${J}-${de}-${D}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[R,ye]=h.useState(K);h.useEffect(()=>{const ce=q.state,J=ce?.callID;if(J&&!ce?.openCallModal){M(J),X(q.pathname,{replace:!0,state:{}});return}!ce?.openCallModal||!ce?.initialCallData||ce.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ce.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),ye(de=>({...de,...ce.initialCallData,relatedTo1:ce.initialCallData.relatedTo1?String(ce.initialCallData.relatedTo1):"",relatedTo2:ce.initialCallData.relatedTo2?String(ce.initialCallData.relatedTo2):""})),X(q.pathname,{replace:!0,state:{}}))},[q.state,o]),h.useEffect(()=>{if(P&&u.length>0&&!z){const ce=u.find(J=>J.id===P);ce?s(ce):W.error("Call not found."),M(null)}},[P,u,z]);const pe=async()=>{try{F(!0);const ce=await ae.get("/calls/admin/fetch-all"),de=[...Array.isArray(ce.data)?ce.data:[]].sort((D,B)=>{const ie=D?.created_at?new Date(D.created_at):0;return(B?.created_at?new Date(B.created_at):0)-ie});f(de)}catch(ce){console.error("Error fetching calls:",ce),W.error("Failed to load calls")}finally{F(!1)}},Ne=async()=>{try{const ce=await ae.get("/users/all");x(ce.data)}catch(ce){console.error("Error fetching users: ",ce)}};h.useEffect(()=>{Ne(),pe()},[]);const Se=[],[Oe,ke]=h.useState(""),[he,Ge]=h.useState("Filter by Status"),[Ce,xe]=h.useState("Filter by Users"),[ee,Ee]=h.useState(1),[Ae,Re]=h.useState(10),et=u,De=Math.max(1,Math.ceil(et.length/Ae)||1);h.useEffect(()=>{Ee(1)},[Oe,he,Ae]),h.useEffect(()=>{Ee(ce=>{const J=Math.max(1,Math.ceil(et.length/Ae)||1);return ce>J?J:ce})},[et.length,Ae]);const tt=h.useMemo(()=>{const ce=(ee-1)*Ae;return et.slice(ce,ce+Ae)},[et,ee,Ae]),Je=()=>Ee(ce=>Math.max(ce-1,1)),H=()=>Ee(ce=>Math.min(ce+1,De)),be=u.length,le=u.filter(ce=>cf(ce.status)==="PLANNED").length,Z=u.filter(ce=>cf(ce.status)==="HELD").length,_e=u.filter(ce=>cf(ce.status)==="NOT_HELD").length,te=[{title:"Total",value:be,icon:Rs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:le,icon:qs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Z,icon:_a,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:_e,icon:zs,color:"text-gray-600",bgColor:"bg-gray-100"}],[Ue,Ie]=h.useState("Overview"),We=ce=>{const{name:J,value:de}=ce.target;ye(D=>{const B={...D,[J]:de};return J==="relatedType1"&&(B.relatedTo1="",de==="Lead"?(B.relatedType2=null,B.relatedTo2=null,d([])):de==="Account"&&(B.relatedType2="Contact")),J==="relatedType2"&&(B.relatedTo2=""),B})};h.useEffect(()=>{const ce=async()=>{try{l([]);let J;R.relatedType1==="Lead"?J=await ae.get("/leads/admin/getLeads"):R.relatedType1==="Account"&&(J=await ae.get("/accounts/admin/fetch-all"));let de=[];if(J&&Array.isArray(J.data)?de=J.data:de=[],v&&R.relatedTo1)try{let D;R.relatedType1==="Lead"?D=await ae.get(`/leads/get/${R.relatedTo1}`):R.relatedType1==="Account"&&(D=await ae.get(`/accounts/get/${R.relatedTo1}`)),D&&D.data&&(de.some(ie=>String(ie.id)===String(R.relatedTo1))||(de=[D.data,...de]))}catch(D){console.error("Error fetching specific related item:",D)}l(de)}catch(J){console.error("Error fetching data:",J),l([])}};R.relatedType1&&ce()},[R.relatedType1,v,R.relatedTo1]),h.useEffect(()=>{const ce=async()=>{try{d([]);let J;if(R.relatedType1==="Account"&&R.relatedTo1)R.relatedType2==="Contact"?J=await ae.get(`/contacts/from-acc/${R.relatedTo1}`):R.relatedType2==="Deal"?J=await ae.get(`/deals/from-acc/${R.relatedTo1}`):R.relatedType2==="Quote"&&(J=await ae.get(`/quotes/from-acc/${R.relatedTo1}`));else{d([]);return}let de=[];if(J&&Array.isArray(J.data)?de=J.data:de=[],v&&R.relatedTo2)try{let D;R.relatedType2==="Contact"?D=await ae.get(`/contacts/get/${R.relatedTo2}`):R.relatedType2==="Deal"?D=await ae.get(`/deals/get/${R.relatedTo2}`):R.relatedType2==="Quote"&&(D=await ae.get(`/quotes/get/${R.relatedTo2}`)),D&&D.data&&(de.some(ie=>String(ie.id)===String(R.relatedTo2))||(de=[D.data,...de]))}catch(D){console.error("Error fetching specific related item:",D)}d(de)}catch(J){console.error("Error fetching data:",J),d([])}};R.relatedType2&&ce()},[R.relatedType2,R.relatedTo1,R.relatedType1,v,R.relatedTo2]);const[gt,ve]=h.useState(!1),Be=ce=>{ce.preventDefault(),ve(!0);const J=R.subject;if(!J||J.trim()===""){W.error("Subject is required.");return}if(!R.relatedTo1){W.error(`Please select a ${R.relatedType1||"Lead/Account"}.`);return}if(!R.assigned_to){W.error("Subject is required.");return}const D={...R,duration_minutes:R.duration_minutes?parseInt(R.duration_minutes,10):null,relatedTo1:R.relatedTo1?parseInt(R.relatedTo1,10):null,relatedTo2:R.relatedType1==="Lead"?null:R.relatedTo2?parseInt(R.relatedTo2,10):null,relatedType2:R.relatedType1==="Lead"?null:R.relatedType2,assigned_to:R.assigned_to?parseInt(R.assigned_to,10):null},B=v&&b?"update":"create",ie=(R.subject||"").trim()||"Untitled Call";i({title:B==="create"?"Confirm New Call":"Confirm Update",message:B==="create"?`Create "${ie}"?`:`Save changes to "${ie}"?`,confirmLabel:B==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:B,payload:D,targetId:b||null,name:ie}})},nt=ce=>s(ce),Te=()=>{t(!1),N(!1),C(null)},Qe=async()=>{if(!r?.action){i(null);return}const{action:ce}=r,{type:J,payload:de,targetId:D,name:B}=ce;k(!0);try{if(J==="create")S(!0),await ae.post("/calls/create",de),W.success(`Call "${B}" created successfully.`),t(!1),ye(K),N(!1),C(null),await pe();else if(J==="update"){if(!D)throw new Error("Missing call identifier for update.");S(!0),await ae.put(`/calls/${D}`,de),W.success(`Call "${B}" updated successfully.`),t(!1),ye(K),N(!1),C(null),await pe()}else if(J==="delete"){if(!D)throw new Error("Missing call identifier for deletion.");await ae.delete(`/calls/${D}`),W.success(`Call "${B}" deleted successfully.`),a?.id===D&&s(null),await pe()}}catch(ie){const ue=J==="create"?"Failed to create call. Please review the details and try again.":J==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",se=ie?.response?.data?.detail||ue;W.error(se)}finally{(J==="create"||J==="update")&&S(!1),k(!1),i(null)}},ct=()=>{E||i(null)},ht=async()=>{if(a?.id)try{$(!0),await ae.put(`/calls/${a.id}`,{status:_}),W.success(`Status updated to ${mT(_)}`),f(ce=>Array.isArray(ce)?ce.map(J=>J.id===a.id?{...J,status:_}:J):ce),s(null)}catch(ce){const J=ce.response?.data?.detail||"Failed to update status.";W.error(J)}finally{$(!1)}};h.useEffect(()=>{a&&A(cf(a.status))},[a]);const je=a?n.jsxs("div",{id:"callModalBackdrop",onClick:ce=>ce.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${GB(a.status)}`,children:mT(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ce=ie=>{if(!ie)return"";const ue=new Date(ie),se=ue.getFullYear(),Pe=String(ue.getMonth()+1).padStart(2,"0"),ge=String(ue.getDate()).padStart(2,"0"),fe=String(ue.getHours()).padStart(2,"0"),Fe=String(ue.getMinutes()).padStart(2,"0");return`${se}-${Pe}-${ge}T${fe}:${Fe}`},J=a.lead?"Lead":a.account?"Account":"Lead",de=a.lead?a.lead.id:a.account?a.account.id:null,D=J==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",B=J==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;ye({subject:a.subject||"",call_time:ce(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:J,relatedType2:D,relatedTo1:de?String(de):"",relatedTo2:B?String(B):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ce=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ce}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:ce}})},children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ce=>n.jsx("button",{onClick:()=>Ie(ce),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Ue===ce?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ce},ce))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ue==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(go,{label:"Call Time",value:WB(a.call_time)}),n.jsx(go,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(go,{label:"Direction",value:a.direction||"--"}),n.jsx(go,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(go,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(go,{label:"Account",value:a.account.name}),a.contact&&n.jsx(go,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(go,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(go,{label:"Quote",value:ne(a.quote.quote_id)}),n.jsx(go,{label:"Created At",value:WB(a.created_at)})]})}),Ue==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Ta,{comments:G,onAddComment:Q})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:ce=>A(ce.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ht,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,Ze=e?n.jsx("div",{id:"modalBackdrop",onClick:ce=>ce.target.id==="modalBackdrop"&&Te(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Te(),ve(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Be,noValidate:!0,children:[n.jsx(Nqe,{label:"Subject",className:"md:col-span-2",name:"subject",value:R.subject,onChange:We,isSubmitted:gt,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:We,value:R.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(fT,{items:Array.isArray(o)?o:[],value:R.relatedTo1??"",placeholder:`Search ${R.relatedType1||"here"}...`,getLabel:ce=>R.relatedType1==="Lead"?ce.title:ce.name??"",onChange:ce=>ye(J=>({...J,relatedTo1:ce})),required:!0,isSubmitted:gt,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:We,value:R.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:R.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(fT,{disabled:R.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:R.relatedTo2??"",placeholder:R.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${R.relatedType2||"Contact"}...`:`No ${R.relatedType2||""} data found`,getLabel:ce=>R.relatedType2==="Contact"?`${ce.first_name??""} ${ce.last_name??""}`.trim():R.relatedType2==="Quote"?ne(ce.quote_id)??"":ce.name??"",onChange:ce=>ye(J=>({...J,relatedTo2:ce}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:R.call_time,onChange:We,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:R.duration_minutes,onChange:We,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(fT,{items:Array.isArray(p)?p:[],value:R.assigned_to??"",placeholder:"Search an account...",getLabel:ce=>`${ce.first_name} ${ce.last_name}`,onChange:ce=>ye(J=>({...J,assigned_to:ce})),required:!0,isSubmitted:gt})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:We,value:R.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:We,value:R.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(jqe,{className:"col-span-2",label:"Notes",value:R.notes,onChange:We,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Te(),ve(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Rs,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ye(K),N(!1),C(null),t(!0),ve(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:te.map(ce=>n.jsx(wqe,{...ce},ce.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Oe})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:he,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),yqe.map(ce=>n.jsx("option",{value:ce.value,children:ce.label},ce.value))]}),n.jsxs("select",{defaultValue:Ce,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Se.map(ce=>n.jsx("option",{value:ce.name,children:ce.name},ce.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:z?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):tt.length>0?tt.map(ce=>n.jsxs("tr",{onClick:()=>nt(ce),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ce.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[ce.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.lead.title}),ce.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.account.name}),ce.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ce.contact.first_name," ",ce.contact.last_name]}),ce.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.deal.name}),ce.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne(ce.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ce.call_time?new Date(ce.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ce?.call_assign_to?`${ce.call_assign_to.first_name} ${ce.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${GB(ce.status)}`,children:mT(ce.status)})})]},ce.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:et.length,pageSize:Ae,currentPage:ee,onPrev:Je,onNext:H,onPageSizeChange:Re,label:"calls"})]}),je,Ze,r&&n.jsx(Cqe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Qe,onCancel:ct,loading:E})]})}function wqe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Nqe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function jqe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function go({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function Cqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function fT({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Sqe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ae.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,$=[_,T,k.action,k.entity_type,A,k.description],z=w===""||$.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),F=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&F}).sort((k,_)=>{const A=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-A})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,c]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){zx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),E=[w.join(","),...S.map(T=>T.map($=>`"${String($).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),A=document.createElement("a");A.href=_,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(_)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx(Rx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ts,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Yl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:d,label:"logs"})]})}const r1=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Lg={firstName:"",lastName:"",email:"",password:"",role:""},_qe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},So=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",Aqe=e=>{const t=So(e),a=r1.find(s=>So(s.value)===t);return a?a.value:e||""},$k=e=>{const t=So(e),a=r1.find(s=>So(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},qB=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},hT=(e,{size:t="sm"}={})=>{const a=So(e),s=_qe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:$k(e)})},Tqe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},VB=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function Eqe(){const{user:e,loading:t}=tn(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(Lg),[E,k]=h.useState(!1),[_,A]=h.useState(null),[T,$]=h.useState(!1),[z,F]=h.useState(1),[P,M]=h.useState(10),[G,Q]=h.useState("Overview"),[V,X]=h.useState(""),[q,ne]=h.useState(!1),oe=So(e?.role);console.log("meow",e);const K=["ADMIN","CEO","GROUP_MANAGER"].includes(oe),R=!t&&K,ye=h.useMemo(()=>{const te=r1.filter(Ue=>So(Ue.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...te]},[]),pe=h.useCallback(te=>{te&&(s(Ue=>Ue.map(Ie=>Ie.id===te?{...Ie,highlight:!0}:Ie)),setTimeout(()=>{s(Ue=>Ue.map(Ie=>Ie.id===te?{...Ie,highlight:!1}:Ie))},2e3))},[]),Ne=h.useCallback(async()=>{i(!0);try{const te=await ae.get("/users/all"),Ue=Array.isArray(te.data)?te.data:[],Ie=VB(Ue);s(Ie),f(We=>We&&(Ie.find(ve=>ve.id===We.id)||null)),console.log(te.data)}catch(te){console.error("Error fetching users:",te);const Ue=te.response?.data?.detail||"Failed to load users. Please try again later.";W.error(Ue)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!K&&e&&W.error("You are not authorized to access User Management.")},[K,t,e]),h.useEffect(()=>{t||!K||Ne()},[t,K,Ne]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Se=h.useMemo(()=>{const te=o.trim().toLowerCase(),Ue=So(c);return VB(a.filter(Ie=>{if(!Ie)return!1;const We=te===""||[Ie.first_name,Ie.last_name,`${Ie.first_name||""} ${Ie.last_name||""}`,Ie.email,$k(Ie.role)].filter(Boolean).some(ve=>ve.toString().toLowerCase().includes(te)),gt=Ue===""||Ue==="CEO"&&["CEO","ADMIN"].includes(So(Ie.role))||So(Ie.role)===Ue;return We&&gt}))},[a,o,c]),Oe=Math.max(1,Math.ceil(Se.length/P)||1);h.useEffect(()=>{F(1)},[o,c,P]),h.useEffect(()=>{F(te=>{const Ue=Math.max(1,Math.ceil(Se.length/P)||1);return te>Ue?Ue:te})},[Se.length,P]);const ke=h.useMemo(()=>{const te=(z-1)*P;return Se.slice(te,te+P)},[Se,z,P]);Se.length===0||(z-1)*P+1,Math.min(z*P,Se.length);const he=()=>F(te=>Math.max(te-1,1)),Ge=()=>F(te=>Math.min(te+1,Oe)),Ce=()=>{S(Lg),N(!1),C(null),x(!0)},xe=te=>{f(te),Q("Overview"),X(te?.is_active?"Active":"Inactive")},ee=te=>{te.target.id==="userModalBackdrop"&&!T&&Ee()},Ee=()=>{f(null)},Ae=(te,Ue)=>{S(Ie=>({...Ie,[te]:Ue}))},Re=()=>{const te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Ue="";for(let Ie=0;Ie<10;Ie+=1)Ue+=te.charAt(Math.floor(Math.random()*te.length));Ae("password",Ue)},et=()=>{E||T||(x(!1),S(Lg),C(null),N(!1))},De=te=>{S({firstName:te.first_name||"",lastName:te.last_name||"",email:te.email||"",password:"",role:Aqe(te.role)}),N(!0),C(te.id),x(!0),f(null)},tt=te=>{A({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[te.first_name," ",te.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:te.id,name:`${te.first_name||""} ${te.last_name||""}`.trim()||te.email||"user"}})},Je=te=>{te.preventDefault();const Ue=w.firstName.trim(),Ie=w.lastName.trim(),We=w.email.trim(),gt=w.password.trim(),ve=w.role,Be=!(v&&b);if(!Ue||!We||!ve){W.warn("Please fill in all required fields.");return}if(Be&&!gt){W.warn("Please fill in all required fields.");return}if(gt&&gt.length<8){W.warn("Password should be at least 8 characters long.");return}const nt={first_name:Ue,last_name:Ie,email:We,role:ve};(Be||gt)&&(nt.password=gt);const Te=`${Ue} ${Ie}`.trim(),Qe=Be?"create":"update";A({title:Qe==="create"?"Confirm New User":"Confirm User Update",message:Qe==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Te})," with role"," ",n.jsx("span",{className:"font-semibold",children:$k(ve)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Te||We}),"?"]}),confirmLabel:Qe==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:nt,targetId:b,name:Te||We}})},H=async()=>{if(!_?.action){A(null);return}const{action:te}=_,{type:Ue,payload:Ie,targetId:We,name:gt}=te;$(!0),(Ue==="create"||Ue==="update")&&k(!0);try{if(Ue==="create"){const Be=(await ae.post("/users/createuser",Ie)).data;await Ne(),pe(Be.id),W.success(`User "${gt}" created successfully.`),x(!1),S(Lg),C(null),N(!1)}else if(Ue==="update"){if(!We)throw new Error("Missing user identifier for update.");const Be=(await ae.put(`/users/updateuser/${We}`,Ie)).data;await Ne(),f(null),pe(Be.id),W.success(`User "${gt}" updated successfully.`),x(!1),S(Lg),C(null),N(!1)}else if(Ue==="delete"){if(!We)throw new Error("Missing user identifier for deletion.");await ae.delete(`/users/deleteuser/${We}`),s(ve=>ve.map(Be=>Be.id===We?{...Be,is_active:!1}:Be)),u&&u.id===We&&(f(null),X("")),W.success(`User "${gt}" deactivated successfully.`)}}catch(ve){console.error("User management error:",ve);const Be=Ue==="create"?"Failed to create user. Please review the details and try again.":Ue==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",nt=ve.response?.data?.detail||Be;W.error(nt)}finally{(Ue==="create"||Ue==="update")&&k(!1),$(!1),A(null)}},be=()=>{T||A(null)},le=async()=>{if(!u||!V)return;const te=u.is_active?"Active":"Inactive";if(V===te)return;const Ue=V==="Active";ne(!0);try{const We=(await ae.put(`/users/updateuser/${u.id}`,{is_active:Ue})).data;s(gt=>gt.map(ve=>ve.id===We.id?We:ve)),f(null),X(""),W.success(`User status updated to ${V}`)}catch(Ie){console.error("Failed to update user status:",Ie);const We=Ie.response?.data?.detail||"Failed to update user status. Please try again.";W.error(We)}finally{ne(!1)}},Z=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!R)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Bw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Ce,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(qt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:te=>l(te.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:te=>d(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ye.map(te=>n.jsx("option",{value:te.value,children:te.label},te.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Se.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):ke.map(te=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${te.highlight?"bg-green-50":""} ${te.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[te.first_name," ",te.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>xe(te),children:te.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:hT(te.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${te.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:te.is_active?"Active":"Inactive"})})]},te.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:Se.length,pageSize:P,currentPage:z,onPrev:he,onNext:Ge,onPageSizeChange:M,label:"users"})]}),_e=u?n.jsx("div",{id:"userModalBackdrop",onClick:ee,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ee,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:Tqe(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),hT(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>De(u),disabled:T,children:[n.jsx(ga,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>tt(u),disabled:T,children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(te=>n.jsx("button",{onClick:()=>Q(te),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${G===te?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:te},te))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:G==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:hT(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,te=>te.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:qB(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?qB(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const te=encodeURIComponent(u.email),Ue=encodeURIComponent(""),Ie=encodeURIComponent(""),We=`https://mail.google.com/mail/?view=cm&fs=1&to=${te}&su=${Ue}&body=${Ie}`;window.open(We,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(u.is_active?"Active":"Inactive"),onChange:te=>X(te.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:le,disabled:q||V===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${q||V===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:q?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Z,_e,n.jsx(kqe,{open:p,isEditing:v,isSubmitting:E,confirmProcessing:T,formData:w,onClose:et,onSubmit:Je,onChange:Ae,onGeneratePassword:Re}),n.jsx(Lqe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:H,onCancel:be})]})}function kqe({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Xt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(Db,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(Db,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(Db,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(Db,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...r1],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Db({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function Lqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Pqe(){return n.jsxs(Wae,{children:[n.jsx(Ose,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),n.jsxs(vae,{children:[n.jsx(bt,{path:"/",element:n.jsx($ie,{})}),n.jsx(bt,{path:"/header",element:n.jsx(YH,{})}),n.jsx(bt,{path:"/signup",element:n.jsx(Ide,{})}),n.jsx(bt,{path:"/login",element:n.jsx(Rde,{})}),n.jsx(bt,{path:"/forgot-password",element:n.jsx(Fde,{})}),n.jsxs(bt,{path:"/admin",element:n.jsx(rg,{requiredRole:"ceo",children:n.jsx(Gde,{})}),children:[n.jsx(bt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(bt,{path:"dashboard",element:n.jsx(E1e,{})}),n.jsx(bt,{path:"accounts",element:n.jsx(Y1e,{})}),n.jsx(bt,{path:"contacts",element:n.jsx(J1e,{})}),n.jsx(bt,{path:"leads",element:n.jsx(iCe,{})}),n.jsx(bt,{path:"leads/:leadID",element:n.jsx(UV,{})}),n.jsx(bt,{path:"audit",element:n.jsx(XCe,{})}),n.jsx(bt,{path:"targets",element:n.jsx(e$e,{})}),n.jsx(bt,{path:"quotes",element:n.jsx(d$e,{})}),n.jsx(bt,{path:"users",element:n.jsx(y$e,{})}),n.jsx(bt,{path:"manage-account",element:n.jsx(N$e,{})}),n.jsx(bt,{path:"company-details",element:n.jsx(nze,{})}),n.jsx(bt,{path:"deals",element:n.jsx(j$e,{})}),n.jsx(bt,{path:"deals/info",element:n.jsx(eZ,{})}),n.jsx(bt,{path:"deals/quickaction",element:n.jsx(JX,{})}),n.jsx(bt,{path:"tasks",element:n.jsx(MRe,{})}),n.jsxs(bt,{path:"/admin/territory",children:[n.jsx(bt,{index:!0,element:n.jsx($c,{})}),n.jsx(bt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(bt,{path:"calls",element:n.jsx($7,{})}),n.jsx(bt,{path:"calls/info",element:n.jsx($7,{})}),n.jsx(bt,{path:"meetings",element:n.jsx(R7,{})}),n.jsx(bt,{path:"meetings/info",element:n.jsx(R7,{})})]}),n.jsxs(bt,{path:"/sales",element:n.jsx(rg,{requiredRole:"sales",children:n.jsx(sze,{})}),children:[n.jsx(bt,{index:!0,element:n.jsx(li,{to:"overview",replace:!0})}),n.jsx(bt,{path:"overview",element:n.jsx(Dze,{})}),n.jsx(bt,{path:"accounts",element:n.jsx(Ize,{})}),n.jsx(bt,{path:"contacts",element:n.jsx(Uze,{})}),n.jsx(bt,{path:"leads",element:n.jsx(Vze,{})}),n.jsx(bt,{path:"leads/info",element:n.jsx(RZ,{})}),n.jsx(bt,{path:"leads/convert",element:n.jsx(eUe,{})}),n.jsx(bt,{path:"deals",element:n.jsx(tUe,{})}),n.jsx(bt,{path:"deals/info",element:n.jsx(UZ,{})}),n.jsx(bt,{path:"deals/quickaction",element:n.jsx(zZ,{})}),n.jsx(bt,{path:"quotes",element:n.jsx(fUe,{})}),n.jsx(bt,{path:"targets",element:n.jsx(yUe,{})}),n.jsx(bt,{path:"audit",element:n.jsx(bUe,{})}),n.jsx(bt,{path:"manage-account",element:n.jsx(Py,{})}),n.jsxs(bt,{path:"/sales/territory",children:[n.jsx(bt,{index:!0,element:n.jsx($c,{})}),n.jsx(bt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(bt,{path:"meetings",element:n.jsx(EUe,{})}),n.jsx(bt,{path:"calls",element:n.jsx(DUe,{})}),n.jsx(bt,{path:"tasks",element:n.jsx(jUe,{})})]}),n.jsxs(bt,{path:"/manager",element:n.jsx(rg,{requiredRole:"manager",children:n.jsx(zUe,{})}),children:[n.jsx(bt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(bt,{path:"dashboard",element:n.jsx(hFe,{})}),n.jsx(bt,{path:"accounts",element:n.jsx(xFe,{})}),n.jsx(bt,{path:"contacts",element:n.jsx(wFe,{})}),n.jsx(bt,{path:"leads",element:n.jsx(TFe,{})}),n.jsx(bt,{path:"leads/info",element:n.jsx(YZ,{})}),n.jsx(bt,{path:"leads/convert",element:n.jsx(MFe,{})}),n.jsx(bt,{path:"deals",element:n.jsx(IFe,{})}),n.jsx(bt,{path:"deals/info",element:n.jsx(XZ,{})}),n.jsx(bt,{path:"deals/quickaction",element:n.jsx(KZ,{})}),n.jsx(bt,{path:"quotes",element:n.jsx(QFe,{})}),n.jsx(bt,{path:"targets",element:n.jsx(JFe,{})}),n.jsx(bt,{path:"meetings",element:n.jsx(x7e,{})}),n.jsx(bt,{path:"audit",element:n.jsx(e7e,{})}),n.jsx(bt,{path:"calls",element:n.jsx(a7e,{})}),n.jsx(bt,{path:"tasks",element:n.jsx(u7e,{})}),n.jsxs(bt,{path:"/manager/territory",children:[n.jsx(bt,{index:!0,element:n.jsx($c,{})}),n.jsx(bt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(bt,{path:"users",element:n.jsx(N7e,{})}),n.jsx(bt,{path:"manage-account",element:n.jsx(Py,{})})]}),n.jsx(bt,{children:n.jsxs(bt,{path:"/marketing",element:n.jsx(rg,{requiredRole:"marketing",children:n.jsx(_7e,{})}),children:[n.jsx(bt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(bt,{path:"dashboard",element:n.jsx(CGe,{})}),n.jsx(bt,{path:"accounts",element:n.jsx(SGe,{})}),n.jsx(bt,{path:"contacts",element:n.jsx(AGe,{})}),n.jsx(bt,{path:"leads",element:n.jsx(DGe,{})}),n.jsx(bt,{path:"leads/info",element:n.jsx(qJ,{})}),n.jsx(bt,{path:"leads/convert",element:n.jsx(WJ,{})}),n.jsx(bt,{path:"tasks",element:n.jsx($Ge,{})}),n.jsx(bt,{path:"campaigns",element:n.jsx(UGe,{})}),n.jsx(bt,{path:"templates",element:n.jsx(BGe,{})}),n.jsx(bt,{path:"manage-account",element:n.jsx(Py,{})})]})}),n.jsxs(bt,{path:"/group-manager",element:n.jsx(rg,{requiredRole:"group manager",children:n.jsx(GGe,{})}),children:[n.jsx(bt,{index:!0,element:n.jsx(li,{to:"dashboard",replace:!0})}),n.jsx(bt,{path:"dashboard",element:n.jsx(bWe,{})}),n.jsx(bt,{path:"accounts",element:n.jsx(NWe,{})}),n.jsx(bt,{path:"contacts",element:n.jsx(_We,{})}),n.jsx(bt,{path:"leads",element:n.jsx(DWe,{})}),n.jsx(bt,{path:"leads/info",element:n.jsx(JJ,{})}),n.jsx(bt,{path:"leads/convert",element:n.jsx(UWe,{})}),n.jsx(bt,{path:"deals",element:n.jsx(BWe,{})}),n.jsx(bt,{path:"deals/info",element:n.jsx(tee,{})}),n.jsx(bt,{path:"deals/quickaction",element:n.jsx(eee,{})}),n.jsx(bt,{path:"quotes",element:n.jsx(tqe,{})}),n.jsx(bt,{path:"targets",element:n.jsx(iqe,{})}),n.jsx(bt,{path:"tasks",element:n.jsx(dqe,{})}),n.jsxs(bt,{path:"/group-manager/territory",children:[n.jsx(bt,{index:!0,element:n.jsx($c,{})}),n.jsx(bt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(bt,{path:"meetings",element:n.jsx(pqe,{})}),n.jsx(bt,{path:"calls",element:n.jsx(vqe,{})}),n.jsx(bt,{path:"audit",element:n.jsx(Sqe,{})}),n.jsx(bt,{path:"users",element:n.jsx(Eqe,{})}),n.jsx(bt,{path:"manage-account",element:n.jsx(Py,{})})]})]})]})}wne.createRoot(document.getElementById("root")).render(n.jsx(h.StrictMode,{children:n.jsx(Pqe,{})}));
